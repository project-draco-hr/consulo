{
  DataContext dataContext=e.getDataContext();
  Project project=DataKeys.PROJECT.getData(dataContext);
  if (project == null)   return;
  DebuggerManagerEx debugManager=DebuggerManagerEx.getInstanceEx(project);
  if (myInitialBreakpoint == null) {
    Editor editor=DataKeys.EDITOR.getData(dataContext);
    if (editor != null) {
      BreakpointManager manager=debugManager.getBreakpointManager();
      int offset=editor.getCaretModel().getOffset();
      Document editorDocument=editor.getDocument();
      myInitialBreakpoint=manager.findBreakpoint(editorDocument,offset,null);
    }
  }
  DialogWrapper dialog=debugManager.getBreakpointManager().createConfigurationDialog(myInitialBreakpoint,null);
  dialog.show();
  myInitialBreakpoint=null;
}
