{
  AbstractButton b=(AbstractButton)c;
  ButtonModel model=b.getModel();
  FontMetrics fm=g.getFontMetrics();
  Insets i=c.getInsets();
  viewRect.x=i.left;
  viewRect.y=i.top;
  viewRect.width=b.getWidth() - (i.right + viewRect.x);
  viewRect.height=b.getHeight() - (i.bottom + viewRect.y);
  textRect.x=textRect.y=textRect.width=textRect.height=0;
  iconRect.x=iconRect.y=iconRect.width=iconRect.height=0;
  Font f=c.getFont();
  g.setFont(f);
  String text=SwingUtilities.layoutCompoundLabel(c,fm,b.getText(),b.getIcon(),b.getVerticalAlignment(),b.getHorizontalAlignment(),b.getVerticalTextPosition(),b.getHorizontalTextPosition(),viewRect,iconRect,textRect,b.getText() == null ? 0 : defaultTextIconGap);
  clearTextShiftOffset();
  if (model.isArmed() && model.isPressed()) {
    paintButtonPressed(g,b);
  }
  if (b.getIcon() != null) {
    paintIcon(g,c,iconRect);
  }
  if (text != null && !text.equals("")) {
    paintText(g,c,textRect,text);
  }
  if (b.isFocusPainted() && b.hasFocus()) {
    paintFocus(g,b,viewRect,textRect,iconRect);
  }
}
