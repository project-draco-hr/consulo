{
  if (element instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)element;
    final PsiElement target=referenceExpression.resolve();
    if (variable.equals(target)) {
      return true;
    }
  }
 else   if (element instanceof PsiParenthesizedExpression) {
    final PsiParenthesizedExpression parenthesizedExpression=(PsiParenthesizedExpression)element;
    final PsiExpression expression=parenthesizedExpression.getExpression();
    return hasReferenceToVariable(variable,expression);
  }
 else   if (element instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)element;
    final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
    final String name=methodExpression.getReferenceName();
    if (returnSelfNames.contains(name)) {
      return hasReferenceToVariable(variable,methodExpression.getQualifierExpression());
    }
  }
 else   if (element instanceof PsiConditionalExpression) {
    final PsiConditionalExpression conditionalExpression=(PsiConditionalExpression)element;
    final PsiExpression thenExpression=conditionalExpression.getThenExpression();
    if (hasReferenceToVariable(variable,thenExpression)) {
      return true;
    }
    final PsiExpression elseExpression=conditionalExpression.getElseExpression();
    return hasReferenceToVariable(variable,elseExpression);
  }
  return false;
}
