{
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  if (editor != getEditor1() && editor != getEditor2())   return;
  final Side side=Side.fromLeft(editor == getEditor(Side.LEFT));
  final List<SimpleDiffChange> selectedChanges=getSelectedChanges(side);
  if (selectedChanges.isEmpty())   return;
  Editor modifiedEditor=getEditor(myModifiedSide);
  if (!DiffUtil.isEditable(modifiedEditor))   return;
  String title=e.getPresentation().getText() + " selected changes";
  DiffUtil.executeWriteCommand(modifiedEditor.getDocument(),e.getProject(),title,new Runnable(){
    @Override public void run(){
      apply(selectedChanges);
    }
  }
);
}
