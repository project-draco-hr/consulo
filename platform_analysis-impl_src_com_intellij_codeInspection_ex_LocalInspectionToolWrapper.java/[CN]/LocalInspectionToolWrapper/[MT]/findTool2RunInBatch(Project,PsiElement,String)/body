{
  final InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(project).getInspectionProfile();
  final InspectionToolWrapper toolWrapper=element == null ? inspectionProfile.getInspectionTool(name,project) : inspectionProfile.getInspectionTool(name,element);
  if (toolWrapper instanceof LocalInspectionToolWrapper && ((LocalInspectionToolWrapper)toolWrapper).isUnfair()) {
    final LocalInspectionTool inspectionTool=((LocalInspectionToolWrapper)toolWrapper).getTool();
    if (inspectionTool instanceof PairedUnfairLocalInspectionTool) {
      final String oppositeShortName=((PairedUnfairLocalInspectionTool)inspectionTool).getInspectionForBatchShortName();
      return element == null ? inspectionProfile.getInspectionTool(oppositeShortName,project) : inspectionProfile.getInspectionTool(oppositeShortName,element);
    }
    return null;
  }
  return toolWrapper;
}
