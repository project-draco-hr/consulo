{
  super(true);
  setTitle(title);
  myExistingDescription=description;
  myValidator=validator;
  myNameField.setText(macroName);
  myDocumentListener=new DocumentAdapter(){
    public void textChanged(    DocumentEvent event){
      updateControls();
    }
  }
;
  myNameField.getDocument().addDocumentListener(myDocumentListener);
  myValueField.setText(value);
  myValueField.addBrowseFolderListener(null,null,null,new FileChooserDescriptor(false,true,true,false,true,false),new TextComponentAccessor<JTextField>(){
    public String getText(    JTextField component){
      return component.getText();
    }
    public void setText(    JTextField component,    String text){
      final int len=text.length();
      if (len > 0 && text.charAt(len - 1) == File.separatorChar) {
        text=text.substring(0,len - 1);
      }
      component.setText(text);
    }
  }
);
  myValueField.getTextField().getDocument().addDocumentListener(myDocumentListener);
  if (!editPathsOnly) {
    myDescriptionPane=new JTextPane();
    myDescriptionPanel=new JPanel();
    myDescriptionPanel.setLayout(new BorderLayout(5,5));
    myDescriptionPanel.add(new JLabel(ProjectBundle.message("project.configure.path.variables.description.title")),BorderLayout.NORTH);
    final JScrollPane scrollPane=new JScrollPane(myDescriptionPane);
    scrollPane.setPreferredSize(new Dimension(300,100));
    myDescriptionPanel.add(scrollPane,BorderLayout.CENTER);
    myDescriptionPane.setText(description);
  }
  init();
  updateControls();
}
