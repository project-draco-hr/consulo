{
  myFile=file;
  myStorageLockContext=storageLockContext != null ? storageLockContext : ourLock.myDefaultStorageLockContext;
  myPageSize=Math.max(pageSize > 0 ? pageSize : BUFFER_SIZE,Page.PAGE_SIZE);
  myValuesAreBufferAligned=valuesAreBufferAligned;
  myStorageIndex=myStorageLockContext.myStorageLock.registerPagedFileStorage(this);
  myTypedIOBuffer=valuesAreBufferAligned ? null : new byte[8];
}
