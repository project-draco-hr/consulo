{
  final Map<Integer,ByteBufferWrapper> buffers=getBuffersOrderedForOwner(index,storageLockContext);
  if (buffers != null) {
    mySegmentsAccessLock.lock();
    try {
      for (      Integer key : buffers.keySet()) {
        mySegments.remove(key);
      }
    }
  finally {
      mySegmentsAccessLock.unlock();
    }
    mySegmentsAllocationLock.lock();
    try {
      disposeRemovedSegments();
    }
  finally {
      mySegmentsAllocationLock.unlock();
    }
  }
}
