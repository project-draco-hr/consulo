{
  if (!context.isMake()) {
    cleanOutputRoots(context);
  }
  context.processMessage(new ProgressMessage("Running 'before' tasks"));
  runTasks(context,myBuilderRegistry.getBeforeTasks());
  context.setCompilingTests(false);
  context.processMessage(new ProgressMessage("Building production sources"));
  buildChunks(context,myProductionChunks);
  context.setCompilingTests(true);
  context.processMessage(new ProgressMessage("Building test sources"));
  buildChunks(context,myTestChunks);
  context.processMessage(new ProgressMessage("Running 'after' tasks"));
  runTasks(context,myBuilderRegistry.getAfterTasks());
}
