{
  final List<ModuleChunk> allChunks=chunks.getChunkList();
  final Map<ModuleBuildTarget,Set<ModuleBuildTarget>> depsMap=new HashMap<ModuleBuildTarget,Set<ModuleBuildTarget>>();
  for (  ModuleBuildTarget target : chunks.getAllTargets()) {
    depsMap.put(target,chunks.getDependenciesRecursively(target));
  }
  final List<ChunkGroup> groups=new ArrayList<ChunkGroup>();
  ChunkGroup currentGroup=new ChunkGroup();
  groups.add(currentGroup);
  for (  ModuleChunk chunk : allChunks) {
    if (dependsOnGroup(chunk,currentGroup,depsMap)) {
      currentGroup=new ChunkGroup();
      groups.add(currentGroup);
    }
    currentGroup.addChunk(chunk);
  }
  return groups;
}
