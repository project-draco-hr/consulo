{
  if (file.isDirectory()) {
    final File[] files=file.listFiles();
    if (files != null) {
      for (      File child : files) {
        deleteOutputsOfRemovedSources(child,outputToSourceStorage,allChunkSources,removedSources);
      }
    }
  }
 else {
    final String outPath=file.getPath();
    final String srcPath=outputToSourceStorage.getState(outPath);
    if (srcPath != null) {
      final File outputSource=new File(srcPath);
      if (!allChunkSources.contains(outputSource)) {
        removedSources.add(outputSource);
        FileUtil.delete(file);
        outputToSourceStorage.remove(outPath);
      }
    }
  }
}
