{
  Set<? extends BuildTarget<?>> targets=chunk.getTargets();
  if (targets.size() > 1) {
    Set<ModuleBuildTarget> moduleTargets=new HashSet<ModuleBuildTarget>();
    for (    BuildTarget<?> target : targets) {
      if (target instanceof ModuleBuildTarget) {
        moduleTargets.add((ModuleBuildTarget)target);
      }
 else {
        context.processMessage(new CompilerMessage(BUILD_NAME,BuildMessage.Kind.ERROR,"Cannot build " + target.getPresentableName() + " because it is included into a circular dependency"));
        return false;
      }
    }
    return runModuleLevelBuilders(context,new ModuleChunk(moduleTargets));
  }
  BuildTarget<?> target=targets.iterator().next();
  if (target instanceof ModuleBuildTarget) {
    return runModuleLevelBuilders(context,new ModuleChunk(Collections.singleton((ModuleBuildTarget)target)));
  }
 else {
    return runTargetBuilders(target,context);
  }
}
