{
  if (context != null) {
    final ProjectDescriptor pd=context.getProjectDescriptor();
    pd.timestamps.getStorage().force();
    pd.dataManager.flush(false);
  }
  final ExternalJavacDescriptor descriptor=ExternalJavacDescriptor.KEY.get(context);
  if (descriptor != null) {
    try {
      final RequestFuture future=descriptor.client.sendShutdownRequest();
      future.waitFor(500L,TimeUnit.MILLISECONDS);
    }
  finally {
      descriptor.process.destroyProcess();
    }
    ExternalJavacDescriptor.KEY.set(context,null);
  }
}
