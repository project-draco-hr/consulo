{
  try {
    context.ensureFSStateInitialized(chunk);
    if (context.isMake()) {
      processDeletedPaths(context,chunk);
    }
    context.onChunkBuildStart(chunk);
    runModuleLevelBuilders(context,chunk);
  }
 catch (  ProjectBuildException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ProjectBuildException(e);
  }
 finally {
    try {
      for (      BuilderCategory category : BuilderCategory.values()) {
        for (        ModuleLevelBuilder builder : myBuilderRegistry.getBuilders(category)) {
          builder.cleanupResources(context,chunk);
        }
      }
    }
  finally {
      try {
        context.onChunkBuildComplete(chunk);
      }
 catch (      Exception e) {
        throw new ProjectBuildException(e);
      }
 finally {
        Paths.CHUNK_REMOVED_SOURCES_KEY.set(context,null);
      }
    }
  }
}
