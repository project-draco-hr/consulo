{
  if (context.isProjectRebuild() || configuration.isTargetDirty()) {
    FSOperations.markDirtyFiles(context,target,timestamps,true,null);
    updateOutputRootsLayout(context,target);
    configuration.save();
  }
 else {
    if (context.isMake()) {
      if (pd.fsState.markInitialScanPerformed(target)) {
        initTargetFSState(context,target,hasOutputDirectoryChanged(pd,target));
        updateOutputRootsLayout(context,target);
      }
    }
 else {
      if (context.getScope().isRecompilationForced(target)) {
        initTargetFSState(context,target,true);
        updateOutputRootsLayout(context,target);
      }
    }
  }
}
