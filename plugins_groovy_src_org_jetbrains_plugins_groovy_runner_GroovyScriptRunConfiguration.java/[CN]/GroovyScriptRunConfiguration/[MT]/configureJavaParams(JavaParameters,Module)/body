{
  RunnerUtil.configureScriptSystemClassPath(params,module);
  params.setWorkingDirectory(getAbsoluteWorkDir());
  final ArrayList<String> list=new ArrayList<String>();
  CompilerUtil.addLocaleOptions(list,false);
  params.getVMParametersList().addAll(list);
  String groovyHome=GroovyConfigUtils.getInstance().getSDKInstallPath(module);
  if (groovyHome.length() == 0) {
    groovyHome=GrailsConfigUtils.getInstance().getSDKInstallPath(module);
  }
  params.getVMParametersList().addParametersString(DGROOVY_HOME + "\"" + groovyHome+ "\"");
  final String confpath=groovyHome + GROOVY_STARTER_CONF;
  params.getVMParametersList().add(DGROOVY_STARTER_CONF + confpath);
  Sdk jdk=params.getJdk();
  if (jdk != null && jdk.getSdkType() instanceof JavaSdkType) {
    String toolsPath=((JavaSdkType)jdk.getSdkType()).getToolsPath(jdk);
    if (toolsPath != null) {
      params.getVMParametersList().add(DTOOLS_JAR + toolsPath);
    }
  }
  params.getVMParametersList().addParametersString(vmParams);
  params.setMainClass(GROOVY_STARTER);
}
