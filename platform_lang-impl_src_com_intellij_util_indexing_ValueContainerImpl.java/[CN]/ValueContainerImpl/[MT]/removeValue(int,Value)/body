{
  final Object input=getInput(value);
  if (input == null) {
    return false;
  }
  if (input instanceof TIntHashSet) {
    final TIntHashSet idSet=(TIntHashSet)input;
    final boolean reallyRemoved=idSet.remove(inputId);
    if (reallyRemoved) {
      idSet.compact();
    }
    if (!idSet.isEmpty()) {
      return reallyRemoved;
    }
  }
 else   if (input instanceof Integer) {
    if (((Integer)input).intValue() != inputId) {
      return false;
    }
  }
  if (!(myInputIdMapping instanceof THashMap)) {
    myInputIdMapping=null;
    myInputIdMappingValue=null;
  }
 else {
    THashMap<Value,Object> mapping=(THashMap<Value,Object>)myInputIdMapping;
    mapping.remove(value);
    if (mapping.size() == 1) {
      myInputIdMapping=mapping.keySet().iterator().next();
      myInputIdMappingValue=mapping.get((Value)myInputIdMapping);
    }
  }
  return true;
}
