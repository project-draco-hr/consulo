{
  if (count <= 1)   return;
  Object input=getInput(value);
  if (input != null) {
    if (input instanceof Integer) {
      IdSet idSet=new IdSet(count + 1);
      idSet.add(((Integer)input).intValue());
      resetFileSetForValue(value,idSet);
    }
 else     if (input instanceof IdSet) {
      IdSet idSet=(IdSet)input;
      int nextSize=idSet.size() + count;
      if (nextSize <= MAX_FILES)       idSet.ensureCapacity(count);
 else {
        resetFileSetForValue(value,new IdBitSet(idSet));
      }
    }
    return;
  }
  final Object fileSet=count > MAX_FILES ? new IdBitSet(count) : new IdSet(count);
  attachFileSetForNewValue(value,fileSet);
}
