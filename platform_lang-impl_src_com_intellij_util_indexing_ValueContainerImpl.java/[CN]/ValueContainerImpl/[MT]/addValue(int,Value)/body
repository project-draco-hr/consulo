{
  final Object input=getInput(value);
  if (input == null) {
    attachFileSetForNewValue(value,inputId);
  }
 else {
    final TIntHashSet idSet;
    if (input instanceof Integer) {
      idSet=new IdSet(3);
      idSet.add(((Integer)input).intValue());
      idSet.add(inputId);
      resetFileSetForValue(value,idSet);
    }
 else     if (input instanceof TIntHashSet) {
      idSet=(TIntHashSet)input;
      idSet.add(inputId);
      if (idSet.size() > MAX_FILES) {
        resetFileSetForValue(value,new IdBitSet(idSet));
      }
    }
 else     if (input instanceof IdBitSet) {
      ((IdBitSet)input).set(inputId);
    }
  }
}
