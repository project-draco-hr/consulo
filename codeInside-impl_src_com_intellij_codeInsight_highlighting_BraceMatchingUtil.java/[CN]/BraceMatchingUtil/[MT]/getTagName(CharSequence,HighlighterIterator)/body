{
  final IElementType tokenType=getToken(iterator);
  String name=null;
  if (tokenType == XmlTokenType.XML_START_TAG_START) {
{
      boolean wasWhiteSpace=false;
      iterator.advance();
      IElementType tokenType1=(!iterator.atEnd() ? getToken(iterator) : null);
      if (tokenType1 == JavaTokenType.WHITE_SPACE || tokenType1 == JspTokenType.JSP_WHITE_SPACE) {
        wasWhiteSpace=true;
        iterator.advance();
        tokenType1=(!iterator.atEnd() ? getToken(iterator) : null);
      }
      if (tokenType1 == XmlTokenType.XML_TAG_NAME || tokenType1 == XmlTokenType.XML_NAME) {
        name=fileText.subSequence(iterator.getStart(),iterator.getEnd()).toString();
      }
      if (wasWhiteSpace)       iterator.retreat();
      iterator.retreat();
    }
  }
 else   if (tokenType == XmlTokenType.XML_TAG_END || tokenType == XmlTokenType.XML_EMPTY_ELEMENT_END) {
{
      int balance=0;
      int count=0;
      IElementType tokenType1=getToken(iterator);
      while (balance >= 0) {
        iterator.retreat();
        count++;
        if (iterator.atEnd())         break;
        tokenType1=getToken(iterator);
        if (tokenType1 == XmlTokenType.XML_TAG_END || tokenType1 == XmlTokenType.XML_EMPTY_ELEMENT_END)         balance++;
 else         if (tokenType1 == XmlTokenType.XML_TAG_NAME)         balance--;
      }
      if (tokenType1 == XmlTokenType.XML_TAG_NAME)       name=fileText.subSequence(iterator.getStart(),iterator.getEnd()).toString();
      while (count-- > 0)       iterator.advance();
    }
  }
  return name;
}
