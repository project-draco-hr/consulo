{
  final Project project=e.getData(DataKeys.PROJECT);
  final Editor editor=e.getData(DataKeys.EDITOR);
  if (Boolean.TRUE.equals(e.getData(DataKeys.IS_MODAL_CONTEXT))) {
    GotoLineNumberDialog dialog=new GotoLineNumberDialog(project,editor);
    dialog.show();
  }
 else {
    CommandProcessor processor=CommandProcessor.getInstance();
    processor.executeCommand(project,new Runnable(){
      public void run(){
        GotoLineNumberDialog dialog=new GotoLineNumberDialog(project,editor);
        dialog.show();
        IdeDocumentHistory.getInstance(project).includeCurrentCommandAsNavigation();
      }
    }
,IdeBundle.message("command.go.to.line"),null);
  }
}
