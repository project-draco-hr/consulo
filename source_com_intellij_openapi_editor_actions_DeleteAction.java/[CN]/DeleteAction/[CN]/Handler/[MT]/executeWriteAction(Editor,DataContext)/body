{
  CommandProcessor.getInstance().setCurrentCommandGroupId(EditorActionUtil.DELETE_COMMAND_GROUP);
  SelectionModel selectionModel=editor.getSelectionModel();
  if (selectionModel.hasBlockSelection()) {
    final LogicalPosition start=selectionModel.getBlockStart();
    final LogicalPosition end=selectionModel.getBlockEnd();
    if (start.column == end.column) {
      int column=start.column;
      int startLine=Math.min(start.line,end.line);
      int endLine=Math.max(start.line,end.line);
      for (int i=startLine; i <= endLine; i++) {
        editor.getCaretModel().moveToLogicalPosition(new LogicalPosition(i,column));
        deleteCharAtCaret(editor);
      }
      selectionModel.setBlockSelection(new LogicalPosition(startLine,column),new LogicalPosition(endLine,column));
      return;
    }
    EditorModificationUtil.deleteBlockSelection(editor);
  }
 else   if (!selectionModel.hasSelection()) {
    deleteCharAtCaret(editor);
  }
 else {
    EditorModificationUtil.deleteSelectedText(editor);
  }
}
