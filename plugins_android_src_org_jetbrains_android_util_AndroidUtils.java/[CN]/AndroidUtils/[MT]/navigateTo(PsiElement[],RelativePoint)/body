{
  if (targets.length == 0) {
    final JComponent renderer=HintUtil.createErrorLabel("Empty text");
    final JBPopup popup=JBPopupFactory.getInstance().createComponentPopupBuilder(renderer,renderer).createPopup();
    if (pointToShowPopup != null) {
      popup.show(pointToShowPopup);
    }
    return;
  }
  if (targets.length == 1 || pointToShowPopup == null) {
    PsiNavigateUtil.navigate(targets[0]);
  }
 else {
    DefaultPsiElementCellRenderer renderer=new DefaultPsiElementCellRenderer(){
      @Override public String getElementText(      PsiElement element){
        final PsiFile file=getContainingFile(element);
        return file != null ? file.getName() : super.getElementText(element);
      }
      @Override public String getContainerText(      PsiElement element,      String name){
        final PsiFile file=getContainingFile(element);
        final PsiDirectory dir=file != null ? file.getContainingDirectory() : null;
        return dir == null ? "" : '(' + dir.getName() + ')';
      }
    }
;
    final JBPopup popup=NavigationUtil.getPsiElementPopup(targets,renderer,null);
    popup.show(pointToShowPopup);
  }
}
