{
  String[] commands=commandLine.getCommands();
  String command=StringUtil.join(commands," ");
  LOG.info("Execute: " + command);
  if (processHandler != null && !processHandler.isProcessTerminated()) {
    processHandler.notifyTextAvailable(command + '\n',ProcessOutputTypes.STDOUT);
  }
  StringBuilder messageBuilder=new StringBuilder();
  String result;
  boolean success=false;
  try {
    success=executeCommand(commandLine,messageBuilder);
    result=messageBuilder.toString();
  }
 catch (  ExecutionException e) {
    result=e.getMessage();
  }
  if (result != null && !success) {
    final String errorMessage=result;
    if (processHandler != null) {
      processHandler.notifyTextAvailable(errorMessage + '\n',ProcessOutputTypes.STDERR);
      processHandler.destroyProcess();
    }
 else {
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        public void run(){
          Messages.showErrorDialog(project,errorMessage,AndroidBundle.message("emulator.error.dialog.title"));
        }
      }
);
    }
  }
  return result;
}
