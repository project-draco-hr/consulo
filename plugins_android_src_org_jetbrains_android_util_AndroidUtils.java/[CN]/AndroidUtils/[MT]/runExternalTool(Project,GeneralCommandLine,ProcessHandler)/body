{
  String[] commands=commandLine.getCommands();
  String command=StringUtil.join(commands," ");
  LOG.info("Execute: " + command);
  if (processHandler != null && !processHandler.isProcessTerminated()) {
    processHandler.notifyTextAvailable(command + '\n',ProcessOutputTypes.STDOUT);
  }
  String result;
  try {
    result=executeCommand(commandLine);
  }
 catch (  ExecutionException e) {
    result=e.getMessage();
  }
  if (result != null) {
    final String errorMessage=result;
    if (processHandler != null) {
      processHandler.notifyTextAvailable(errorMessage + '\n',ProcessOutputTypes.STDERR);
      processHandler.destroyProcess();
    }
 else {
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        public void run(){
          Messages.showErrorDialog(project,errorMessage,AndroidBundle.message("emulator.error.dialog.title"));
        }
      }
);
    }
  }
}
