{
  final FacetManager facetManager=FacetManager.getInstance(module);
  ModifiableFacetModel model=facetManager.createModifiableModel();
  AndroidFacet facet=model.getFacetByType(AndroidFacet.ID);
  if (facet == null) {
    facet=facetManager.createFacet(AndroidFacet.getFacetType(),"Android",null);
    AndroidFacetConfiguration configuration=facet.getConfiguration();
    configuration.init(module,contentRoot);
    if (library) {
      configuration.LIBRARY_PROJECT=true;
    }
    model.addFacet(facet);
  }
  model.commit();
  return facet;
}
