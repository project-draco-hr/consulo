{
  LOG.info(commandLine.getCommandLineString());
  OSProcessHandler handler=new OSProcessHandler(commandLine.createProcess(),"");
  if (timeout == null || timeout > 0) {
    handler.addProcessListener(new ProcessAdapter(){
      public void onTextAvailable(      final ProcessEvent event,      final Key outputType){
        messageBuilder.append(event.getText());
      }
    }
);
  }
  handler.startNotify();
  try {
    if (timeout != null) {
      if (timeout > 0) {
        handler.waitFor(timeout);
      }
    }
 else {
      handler.waitFor();
    }
  }
 catch (  ProcessCanceledException e) {
    return ExecutionStatus.ERROR;
  }
  if (!handler.isProcessTerminated()) {
    return ExecutionStatus.TIMEOUT;
  }
  if (timeout == null || timeout > 0) {
    String message=messageBuilder.toString();
    LOG.info(message);
  }
  int exitCode=handler.getProcess().exitValue();
  return exitCode == 0 ? ExecutionStatus.SUCCESS : ExecutionStatus.ERROR;
}
