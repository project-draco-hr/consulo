{
  int attempt=0;
  while (attempt < 5) {
    if (infinite) {
      device.executeShellCommand(command,receiver,0);
    }
 else {
      device.executeShellCommand(command,receiver,TIMEOUT);
    }
    if (infinite && !receiver.isCancelled()) {
      attempt++;
    }
 else     if (receiver.isTryAgain()) {
      attempt++;
    }
 else {
      break;
    }
    receiver.invalidate();
  }
}
