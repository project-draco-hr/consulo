{
  final TreePath[] selectionPaths=myTree.getSelectionPaths();
  if (selectionPaths == null) {
    return null;
  }
  final VirtualFile[] selected=new VirtualFile[selectionPaths.length];
  for (int i=0; i < selectionPaths.length; i++) {
    TreePath treePath=selectionPaths[i];
    final DefaultMutableTreeNode node=(DefaultMutableTreeNode)treePath.getLastPathComponent();
    final Object nodeDescriptor=node.getUserObject();
    if (!(nodeDescriptor instanceof FileNodeDescriptor)) {
      return null;
    }
    selected[i]=((FileNodeDescriptor)nodeDescriptor).getElement().getFile();
  }
  return selected;
}
