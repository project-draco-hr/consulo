{
  if (myElement instanceof PsiCompiledElement)   return null;
  final PsiFile containingFile=myElement.getContainingFile();
  if (containingFile == null)   return null;
  if (!myElement.isPhysical())   return null;
  for (  SmartPointerElementInfoFactory factory : Extensions.getExtensions(SmartPointerElementInfoFactory.EP_NAME)) {
    final SmartPointerElementInfo result=factory.createElementInfo(myElement);
    if (result != null) {
      return result;
    }
  }
  if (myElement instanceof PsiFile) {
    return new FileElementInfo((PsiFile)myElement);
  }
  PsiDocumentManager documentManager=PsiDocumentManager.getInstance(getProject());
  Document document=documentManager.getDocument(containingFile);
  if (document == null)   return null;
  if (containingFile.getContext() != null) {
    return new InjectedSelfElementInfo(myElement,document);
  }
  return new SelfElementInfo(myElement,document);
}
