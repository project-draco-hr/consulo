{
  if (element instanceof PsiCompiledElement || !element.isPhysical() || containingFile == null || element.getTextRange() == null) {
    return new HardElementInfo(element);
  }
  for (  SmartPointerElementInfoFactory factory : Extensions.getExtensions(SmartPointerElementInfoFactory.EP_NAME)) {
    final SmartPointerElementInfo result=factory.createElementInfo(element);
    if (result != null) {
      return result;
    }
  }
  if (element instanceof PsiFile) {
    return new FileElementInfo((PsiFile)element);
  }
  if (containingFile.getContext() != null) {
    return new InjectedSelfElementInfo(element,containingFile);
  }
  return new SelfElementInfo(element,containingFile);
}
