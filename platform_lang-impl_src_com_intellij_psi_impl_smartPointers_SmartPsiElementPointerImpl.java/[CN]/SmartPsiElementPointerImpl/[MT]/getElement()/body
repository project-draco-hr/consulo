{
  PsiElement element=getCachedElement();
  if (element != null && !element.isValid()) {
    element=null;
  }
  if (element == null && myElementInfo != null) {
    element=myElementInfo.restoreElement();
    if (element != null && (!element.getClass().equals(myElementClass) || !element.isValid())) {
      element=null;
    }
    myElement=element == null ? null : new WeakReference(element);
  }
  return (E)element;
}
