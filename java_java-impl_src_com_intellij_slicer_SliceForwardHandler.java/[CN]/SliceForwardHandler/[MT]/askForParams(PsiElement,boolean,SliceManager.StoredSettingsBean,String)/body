{
  AnalysisScope analysisScope=new AnalysisScope(element.getContainingFile());
  Module module=ModuleUtil.findModuleForPsiElement(element);
  String name=module == null ? null : module.getName();
  Project myProject=element.getProject();
  final SliceForwardForm form=new SliceForwardForm();
  form.init(storedSettingsBean.showDereferences);
  AnalysisUIOptions analysisUIOptions=new AnalysisUIOptions();
  analysisUIOptions.save(storedSettingsBean.analysisUIOptions);
  BaseAnalysisActionDialog dialog=new BaseAnalysisActionDialog(dialogTitle,"Analyze scope",myProject,analysisScope,name,true,analysisUIOptions,element){
    @Override protected JComponent getAdditionalActionSettings(    Project project){
      return form.getComponent();
    }
  }
;
  dialog.show();
  if (!dialog.isOK())   return null;
  storedSettingsBean.analysisUIOptions.save(analysisUIOptions);
  storedSettingsBean.showDereferences=form.isToShowDerefs();
  AnalysisScope scope=dialog.getScope(analysisUIOptions,analysisScope,myProject,module);
  SliceAnalysisParams params=new SliceAnalysisParams();
  params.scope=scope;
  params.dataFlowToThis=dataFlowToThis;
  params.showInstanceDereferences=form.isToShowDerefs();
  return params;
}
