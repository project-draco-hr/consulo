{
  ArrayList<LookupItem> array=new ArrayList<LookupItem>();
  HashMap<String,LookupItem> methodNameToItem=new HashMap<String,LookupItem>();
  for (  LookupItem item : items) {
    if (item.getAttribute(LookupItem.FORCE_SHOW_SIGNATURE_ATTR) != null) {
      array.add(item);
      continue;
    }
    Object o=item.getObject();
    if (o instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)o;
      String name=method.getName();
      LookupItem item1=methodNameToItem.get(name);
      if (item1 != null) {
        ArrayList<PsiMethod> allMethods=(ArrayList<PsiMethod>)item1.getAttribute(LookupImpl.ALL_METHODS_ATTRIBUTE);
        allMethods.add(method);
        continue;
      }
 else {
        methodNameToItem.put(name,item);
        ArrayList<PsiMethod> allMethods=new ArrayList<PsiMethod>();
        allMethods.add(method);
        item.setAttribute(LookupImpl.ALL_METHODS_ATTRIBUTE,allMethods);
      }
    }
    array.add(item);
  }
  items=array.toArray(new LookupItem[array.size()]);
  for (  LookupItem item : items) {
    ArrayList<PsiMethod> allMethods=(ArrayList<PsiMethod>)item.getAttribute(LookupImpl.ALL_METHODS_ATTRIBUTE);
    if (allMethods != null) {
      item.setAttribute(LookupImpl.ALL_METHODS_ATTRIBUTE,allMethods.toArray(new PsiMethod[allMethods.size()]));
    }
  }
  return items;
}
