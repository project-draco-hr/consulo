{
  final String testName=getTestName(false);
  configureByFile("/refactoring/extractMethodObject/" + testName + ".java");
  PsiElement element=TargetElementUtilBase.findTargetElement(myEditor,TargetElementUtilBase.ELEMENT_NAME_ACCEPTED);
  assertTrue(element instanceof PsiMethod);
  final PsiMethod method=(PsiMethod)element;
  final ExtractMethodObjectProcessor processor=new ExtractMethodObjectProcessor(getProject(),getEditor(),method.getBody().getStatements(),"InnerClass");
  final ExtractMethodObjectProcessor.MyExtractMethodProcessor extractProcessor=processor.getExtractProcessor();
  processor.setCreateInnerClass(createInnerClass);
  extractProcessor.setShowErrorDialogs(false);
  extractProcessor.prepare();
  extractProcessor.testPrepare();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      ExtractMethodObjectHandler.run(getProject(),getEditor(),processor,extractProcessor);
    }
  }
);
  checkResultByFile("/refactoring/extractMethodObject/" + testName + ".java"+ ".after");
}
