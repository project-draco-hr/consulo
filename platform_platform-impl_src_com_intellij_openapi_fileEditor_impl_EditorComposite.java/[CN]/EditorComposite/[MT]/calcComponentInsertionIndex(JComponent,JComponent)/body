{
  for (int i=0, max=container.getComponentCount(); i < max; i++) {
    Component childWrapper=container.getComponent(i);
    Component childComponent=childWrapper instanceof Wrapper ? ((Wrapper)childWrapper).getTargetComponent() : childWrapper;
    boolean weighted1=newComponent instanceof Weighted;
    boolean weighted2=childComponent instanceof Weighted;
    if (!weighted2)     continue;
    if (!weighted1)     return i;
    double w1=((Weighted)newComponent).getWeight();
    double w2=((Weighted)childComponent).getWeight();
    if (w1 < w2)     return i;
  }
  return -1;
}
