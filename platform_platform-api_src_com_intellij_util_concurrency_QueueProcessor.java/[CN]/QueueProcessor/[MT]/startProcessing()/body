{
  LOG.assertTrue(Thread.holdsLock(myQueue));
  if (isProcessing || !myStarted) {
    return false;
  }
  isProcessing=true;
  final T item=myQueue.removeFirst();
  final Runnable runnable=new Runnable(){
    @Override public void run(){
      if (myDeathCondition.value(null))       return;
      runSafely(new Runnable(){
        @Override public void run(){
          myProcessor.consume(item,myContinuationContext);
        }
      }
);
    }
  }
;
  final Application application=ApplicationManager.getApplication();
  if (myThreadToUse == ThreadToUse.AWT) {
    final ModalityState state=myModalityState.remove(new MyOverrideEquals(item));
    if (state != null) {
      application.invokeLater(runnable,state);
    }
 else {
      application.invokeLater(runnable);
    }
  }
 else {
    application.executeOnPooledThread(runnable);
  }
  return true;
}
