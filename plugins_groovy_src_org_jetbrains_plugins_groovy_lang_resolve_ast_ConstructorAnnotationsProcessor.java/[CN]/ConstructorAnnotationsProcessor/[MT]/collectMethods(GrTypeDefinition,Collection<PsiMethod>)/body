{
  if (typeDefinition.getName() == null)   return;
  PsiModifierList modifierList=typeDefinition.getModifierList();
  if (modifierList == null)   return;
  final PsiAnnotation tupleConstructor=modifierList.findAnnotation(GROOVY_TRANSFORM_TUPLE_CONSTRUCTOR);
  final boolean immutable=modifierList.findAnnotation(GROOVY_LANG_IMMUTABLE) != null || modifierList.findAnnotation(GROOVY_TRANSFORM_IMMUTABLE) != null;
  final boolean canonical=modifierList.findAnnotation(GROOVY_TRANSFORM_CANONICAL) != null;
  if (!immutable && !canonical && tupleConstructor == null) {
    return;
  }
  if (tupleConstructor != null && typeDefinition.getCodeConstructors().length > 0 && !PsiUtil.getAnnoAttributeValue(tupleConstructor,"force",false)) {
    return;
  }
  final GrLightMethodBuilder fieldsConstructor=generateFieldConstructor(typeDefinition,tupleConstructor,immutable,canonical);
  final GrLightMethodBuilder mapConstructor=generateMapConstructor(typeDefinition);
  collector.add(fieldsConstructor);
  collector.add(mapConstructor);
}
