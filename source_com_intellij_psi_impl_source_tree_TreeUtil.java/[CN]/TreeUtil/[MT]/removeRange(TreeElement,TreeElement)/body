{
  if (start == null)   return;
  if (start == end)   return;
  final CompositeElement parent=start.getTreeParent();
  final TreeElement startPrev=start.getTreePrev();
  final TreeElement endPrev=end != null ? end.getTreePrev() : null;
  if (parent != null) {
    if (start == parent.getFirstChildNode()) {
      parent.firstChild=end;
    }
    if (end == null) {
      parent.lastChild=startPrev;
    }
  }
  if (startPrev != null) {
    startPrev.setTreeNext(end);
  }
  if (end != null) {
    end.setTreePrev(startPrev);
  }
  start.setTreePrev(null);
  if (parent != null) {
    for (TreeElement element=start; element != end; element=element.getTreeNext()) {
      element.setTreeParent(null);
    }
  }
  if (endPrev != null) {
    endPrev.setTreeNext(null);
  }
  if (DebugUtil.CHECK) {
    if (parent != null) {
      DebugUtil.checkTreeStructure(parent);
    }
    DebugUtil.checkTreeStructure(start);
  }
}
