{
  int length=0;
  if (tree instanceof LeafElement) {
    length+=tree.getTextLength();
  }
 else {
    final ASTNode composite=tree;
    TreeElement firstChild=(TreeElement)composite.getFirstChildNode();
    while (firstChild != null) {
      length+=getNotCachedLength(firstChild);
      firstChild=firstChild.getTreeNext();
    }
  }
  return length;
}
