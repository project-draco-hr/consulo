{
  if (DebugUtil.CHECK_INSIDE_ATOMIC_ACTION_ENABLED) {
    ApplicationManager.getApplication().assertReadAccessAllowed();
  }
  List<ASTNode> result=new ArrayList<ASTNode>();
  for (ASTNode element=parent.getFirstChildNode(); element != null; element=element.getTreeNext()) {
    if (types.contains(element.getElementType())) {
      result.add(element);
    }
  }
  return result.toArray(new ASTNode[result.size()]);
}
