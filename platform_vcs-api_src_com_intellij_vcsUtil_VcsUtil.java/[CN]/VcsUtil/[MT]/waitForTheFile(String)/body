{
  final VirtualFile[] file=new VirtualFile[1];
  final Application app=ApplicationManager.getApplication();
  Runnable action=new Runnable(){
    public void run(){
      app.runWriteAction(new Runnable(){
        public void run(){
          file[0]=LocalFileSystem.getInstance().refreshAndFindFileByPath(path);
        }
      }
);
    }
  }
;
  if (app.isDispatchThread()) {
    action.run();
  }
 else {
    app.invokeAndWait(action,ModalityState.defaultModalityState());
  }
  return file[0];
}
