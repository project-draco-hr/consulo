{
  try {
    String projectName=FileUtil.getNameWithoutExtension(new File(projectFilePath));
    final Element root=loadProjectFileRoot(projectFilePath);
    final int version=getVersion(root);
    final ProjectConverter converter=getConverter(version,projectFilePath);
    if (converter == null) {
      return true;
    }
    converter.prepare();
    if (!converter.isConversionNeeded()) {
      return true;
    }
    final ProjectConversionDialog dialog=new ProjectConversionDialog(projectName,converter);
    dialog.show();
    return dialog.isConverted();
  }
 catch (  IOException e) {
    Messages.showErrorDialog(IdeBundle.message("error.cannot.load.project",e.getMessage()),IdeBundle.message("title.cannot.convert.project"));
    return false;
  }
catch (  JDOMException e) {
    Messages.showErrorDialog(IdeBundle.message("error.project.file.is.corrupted"),IdeBundle.message("title.cannot.convert.project"));
    return false;
  }
}
