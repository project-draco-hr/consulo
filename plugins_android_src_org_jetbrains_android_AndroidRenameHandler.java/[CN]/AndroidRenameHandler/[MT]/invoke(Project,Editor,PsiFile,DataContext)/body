{
  if (file == null || editor == null) {
    return;
  }
  final XmlTag tag=AndroidUsagesTargetProvider.findValueResourceTagInContext(editor,file);
  if (tag == null) {
    return;
  }
  final XmlAttribute nameAttribute=tag.getAttribute("name");
  if (nameAttribute == null) {
    return;
  }
  final XmlAttributeValue attributeValue=nameAttribute.getValueElement();
  if (attributeValue == null) {
    return;
  }
  final RenameDialog dialog=new RenameDialog(project,new ValueResourceElementWrapper(attributeValue),null,editor);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    final String name=PsiElementRenameHandler.DEFAULT_NAME.getData(dataContext);
    dialog.performRename(name);
    dialog.close(DialogWrapper.OK_EXIT_CODE);
  }
 else {
    dialog.show();
  }
}
