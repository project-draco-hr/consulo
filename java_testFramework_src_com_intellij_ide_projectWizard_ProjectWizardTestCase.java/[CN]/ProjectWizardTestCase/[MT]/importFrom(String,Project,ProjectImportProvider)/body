{
  VirtualFile file=LocalFileSystem.getInstance().refreshAndFindFileByPath(path);
  assertNotNull("Can't find " + path,file);
  assertTrue(providers[0].canImport(file,project));
  ImportModuleAction action=new ImportModuleAction(){
    @Override protected AddModuleWizard createWizard(    Project project,    List<ProjectImportProvider> available,    String path){
      myWizard=new TestWizard(project,path,providers);
      return myWizard;
    }
    @Override protected boolean processWizard(    AddModuleWizard wizard){
      runWizard(null);
      return true;
    }
    @Override public List<Module> createFromWizard(    Project project,    AddModuleWizard wizard){
      return project == null ? new ImportProjectAction().createFromWizard(project,wizard) : super.createFromWizard(project,wizard);
    }
  }
;
  List<Module> modules=action.doImport(project,file);
  return modules == null || modules.isEmpty() ? null : modules.get(0);
}
