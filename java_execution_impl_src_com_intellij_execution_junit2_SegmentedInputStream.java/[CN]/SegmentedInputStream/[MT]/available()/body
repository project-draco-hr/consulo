{
  while (mySourceStream.ready()) {
    while (myStartupPassed < SegmentedStream.STARTUP_MESSAGE.length()) {
      final int aChar=readNext();
      if (aChar != SegmentedStream.STARTUP_MESSAGE.charAt(myStartupPassed)) {
        mySourceStream.pushBack(aChar);
        final char[] charsRead=SegmentedStream.STARTUP_MESSAGE.substring(0,myStartupPassed).toCharArray();
        mySourceStream.pushBack(charsRead);
        myStartupPassed=0;
        return charsRead.length + 1;
      }
      myStartupPassed++;
    }
    final int b=mySourceStream.next();
    if (b != SegmentedStream.SPECIAL_SYMBOL) {
      mySourceStream.pushBack(b);
      return 1;
    }
    final Integer packetRead=readControlSequence();
    if (packetRead != null) {
      mySourceStream.pushBack(b);
      mySourceStream.pushBack(packetRead);
      return 1;
    }
  }
  return 0;
}
