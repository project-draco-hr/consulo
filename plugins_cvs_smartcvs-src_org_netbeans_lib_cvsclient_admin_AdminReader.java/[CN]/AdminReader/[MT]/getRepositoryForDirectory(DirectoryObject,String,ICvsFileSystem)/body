{
  final File directory=cvsFileSystem.getAdminFileSystem().getFile(directoryObject);
  File repositoryFile;
  String repositoryDirs="";
  File dirFile=directory;
  while (true) {
    if (dirFile == null || dirFile.getName().length() == 0 || !dirFile.exists()) {
      throw new FileNotFoundException(SmartCvsSrcBundle.message("repository.file.not.found.for.directory.error.message",directory));
    }
    repositoryFile=new File(dirFile,CVS_REPOSITORY_FILE_PATH);
    if (repositoryFile.exists()) {
      break;
    }
    repositoryDirs='/' + dirFile.getName() + repositoryDirs;
    dirFile=dirFile.getParentFile();
  }
  String fileRepository=FileUtils.readLineFromFile(repositoryFile);
  if (fileRepository == null) {
    fileRepository="";
  }
  fileRepository+=repositoryDirs;
  fileRepository=fileRepository.replace(File.separatorChar,'/');
  if (fileRepository.startsWith(repository)) {
    return fileRepository;
  }
 else {
    return FileUtils.ensureTrailingSlash(repository) + fileRepository;
  }
}
