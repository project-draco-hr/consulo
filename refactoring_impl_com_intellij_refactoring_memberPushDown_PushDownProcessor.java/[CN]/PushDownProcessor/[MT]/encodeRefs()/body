{
  final Set<PsiMember> movedMembers=new HashSet<PsiMember>();
  for (  MemberInfo memberInfo : myMemberInfos) {
    movedMembers.add(memberInfo.getMember());
  }
  for (  MemberInfo memberInfo : myMemberInfos) {
    final PsiMember member=memberInfo.getMember();
    member.accept(new JavaRecursiveElementVisitor(){
      @Override public void visitReferenceExpression(      PsiReferenceExpression expression){
        encodeRef(expression,movedMembers,expression);
        super.visitReferenceExpression(expression);
      }
      @Override public void visitNewExpression(      PsiNewExpression expression){
        final PsiJavaCodeReferenceElement classReference=expression.getClassReference();
        if (classReference != null) {
          encodeRef(classReference,movedMembers,expression);
        }
        super.visitNewExpression(expression);
      }
      @Override public void visitTypeElement(      final PsiTypeElement type){
        final PsiJavaCodeReferenceElement referenceElement=type.getInnermostComponentReferenceElement();
        if (referenceElement != null) {
          encodeRef(referenceElement,movedMembers,type);
        }
        super.visitTypeElement(type);
      }
    }
);
    ChangeContextUtil.encodeContextInfo(member,false);
  }
}
