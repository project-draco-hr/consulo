{
  List<String> parameters=new LinkedList<String>();
  parameters.add("--logfile");
  parameters.add(saveCommitMessage().getAbsolutePath());
  parameters.addAll(chunk);
  if (amendCommit) {
    parameters.add("--amend");
  }
  HgCommandExecutor executor=new HgCommandExecutor(myProject);
  executor.setCharset(myCharset);
  ensureSuccess(executor.executeInCurrentThread(myRoot,"commit",parameters));
}
