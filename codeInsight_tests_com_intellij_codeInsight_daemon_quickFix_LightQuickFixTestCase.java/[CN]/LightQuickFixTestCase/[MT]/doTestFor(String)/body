{
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          final String relativePath=getBasePath() + "/" + BEFORE_PREFIX+ testName;
          final String testFullPath=getTestDataPath().replace(File.separatorChar,'/') + relativePath;
          final File ioFile=new File(testFullPath);
          try {
            String contents=StringUtil.convertLineSeparators(new String(FileUtil.loadFileText(ioFile,CharsetToolkit.UTF8)),"\n");
            configureFromFileText(ioFile.getName(),contents);
            bringRealEditorBack();
            final Pair<String,Boolean> pair=parseActionHintImpl(getFile(),contents);
            final String text=pair.getFirst();
            final boolean actionShouldBeAvailable=pair.getSecond().booleanValue();
            beforeActionStarted(testName,contents);
            try {
              doAction(text,actionShouldBeAvailable,testFullPath,testName);
            }
  finally {
              afterActionCompleted(testName,contents);
            }
          }
 catch (          Exception e) {
            e.printStackTrace();
            fail();
          }
        }
      }
);
    }
  }
,"","");
  System.out.print(testName + " ");
}
