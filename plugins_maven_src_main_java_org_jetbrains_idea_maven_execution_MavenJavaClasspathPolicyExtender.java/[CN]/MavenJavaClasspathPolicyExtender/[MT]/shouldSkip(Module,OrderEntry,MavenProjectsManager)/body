{
  Module ownerModule=orderEntry.getOwnerModule();
  if (originalModule == ownerModule)   return false;
  MavenProject ownerProject=manager.findProject(ownerModule);
  if (ownerProject == null)   return false;
  MavenId depId;
  if (orderEntry instanceof ModuleOrderEntry) {
    Module module=((ModuleOrderEntry)orderEntry).getModule();
    if (module == null)     return false;
    MavenProject depProject=manager.findProject(module);
    if (depProject == null)     return false;
    depId=depProject.getMavenId();
  }
 else   if (orderEntry instanceof LibraryOrderEntry) {
    Library lib=((LibraryOrderEntry)orderEntry).getLibrary();
    depId=MavenRootModelAdapter.getMavenId(ownerProject,lib);
    if (depId == null)     return false;
  }
 else {
    return false;
  }
  return ownerProject.isOptionalDependency(depId);
}
