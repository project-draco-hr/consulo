{
  Map<ArrangementSettingType,List<?>> availableSettings=ArrangementSettingsUtil.buildAvailableOptions(e.getDataContext());
  if (availableSettings.isEmpty()) {
    return;
  }
  ArrangementNodeDisplayManager displayManager=ArrangementSettingsUtil.DISPLAY_MANAGER.getData(e.getDataContext());
  if (displayManager == null) {
    return;
  }
  Project project=PlatformDataKeys.PROJECT.getData(e.getDataContext());
  if (project == null) {
    return;
  }
  JComponent tree=ArrangementSettingsUtil.TREE.getData(e.getDataContext());
  if (tree == null) {
    return;
  }
  ArrangementSettingsNode node=ArrangementSettingsUtil.getSettingsNode(e.getDataContext());
  if (node == null) {
  }
 else {
    ArrangementNodeEditor editor=new ArrangementNodeEditor(displayManager,availableSettings);
    editor.applyColorsFrom(tree);
    Balloon balloon=JBPopupFactory.getInstance().createBalloonBuilder(editor).setDisposable(project).setHideOnClickOutside(true).setFillColor(tree.getBackground()).createBalloon();
    Point point=MouseInfo.getPointerInfo().getLocation();
    SwingUtilities.convertPointFromScreen(point,tree);
    balloon.show(new RelativePoint(tree,point),Balloon.Position.below);
  }
}
