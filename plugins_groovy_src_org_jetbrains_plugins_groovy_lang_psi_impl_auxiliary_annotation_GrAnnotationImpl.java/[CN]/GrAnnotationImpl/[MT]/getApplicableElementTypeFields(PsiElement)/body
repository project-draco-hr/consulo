{
  if (owner instanceof PsiClass) {
    PsiClass aClass=(PsiClass)owner;
    if (aClass.isAnnotationType()) {
      return new TargetType[]{TargetType.ANNOTATION_TYPE,TargetType.TYPE};
    }
 else     if (aClass instanceof GrTypeParameter) {
      return new TargetType[]{TargetType.TYPE_PARAMETER};
    }
 else {
      return new TargetType[]{TargetType.TYPE};
    }
  }
  if (owner instanceof GrMethod) {
    if (((PsiMethod)owner).isConstructor()) {
      return new TargetType[]{TargetType.CONSTRUCTOR};
    }
 else {
      return new TargetType[]{TargetType.METHOD};
    }
  }
  if (owner instanceof GrVariableDeclaration) {
    final GrVariable[] variables=((GrVariableDeclaration)owner).getVariables();
    if (variables.length == 0) {
      return TargetType.EMPTY_ARRAY;
    }
    if (variables[0] instanceof GrField || ResolveUtil.isScriptField(variables[0])) {
      return new TargetType[]{TargetType.FIELD};
    }
 else {
      return new TargetType[]{TargetType.LOCAL_VARIABLE};
    }
  }
  if (owner instanceof GrParameter) {
    return new TargetType[]{TargetType.PARAMETER};
  }
  if (owner instanceof GrPackageDefinition) {
    return new TargetType[]{TargetType.PACKAGE};
  }
  if (owner instanceof GrTypeElement) {
    return new TargetType[]{TargetType.TYPE_USE};
  }
  return TargetType.EMPTY_ARRAY;
}
