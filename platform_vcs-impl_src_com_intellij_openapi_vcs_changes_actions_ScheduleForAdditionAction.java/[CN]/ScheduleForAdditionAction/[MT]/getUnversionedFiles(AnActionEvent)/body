{
  List<VirtualFile> unversionedFiles=e.getData(ChangesListView.UNVERSIONED_FILES_DATA_KEY);
  if (unversionedFiles != null && !unversionedFiles.isEmpty()) {
    return unversionedFiles;
  }
  final VirtualFile[] files=PlatformDataKeys.VIRTUAL_FILE_ARRAY.getData(e.getDataContext());
  if (files == null) {
    return null;
  }
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  if (project == null) {
    return null;
  }
  unversionedFiles=new ArrayList<VirtualFile>(files.length);
  for (  VirtualFile file : files) {
    if (file != null && FileStatusManager.getInstance(project).getStatus(file) == FileStatus.UNKNOWN) {
      unversionedFiles.add(file);
    }
  }
  return unversionedFiles.isEmpty() ? null : unversionedFiles;
}
