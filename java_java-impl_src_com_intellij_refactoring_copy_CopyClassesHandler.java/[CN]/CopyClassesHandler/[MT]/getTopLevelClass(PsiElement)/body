{
  while (true) {
    if (element == null || element instanceof PsiFile)     break;
    if (element instanceof PsiClass && element.getParent() instanceof PsiFile)     break;
    element=element.getParent();
  }
  if (element instanceof PsiClassOwner) {
    PsiClass[] classes=((PsiClassOwner)element).getClasses();
    if (classes.length > 0) {
      for (      final PsiClass aClass : classes) {
        if (aClass instanceof SyntheticElement) {
          return null;
        }
      }
      element=classes[0];
    }
  }
  return element instanceof PsiClass ? (PsiClass)element : null;
}
