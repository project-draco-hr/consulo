{
  while (true) {
    if (element == null || element instanceof PsiFile)     break;
    if (element instanceof PsiClass && element.getParent() != null && ((PsiClass)element).getContainingClass() == null && !(element instanceof PsiAnonymousClass))     break;
    element=element.getParent();
  }
  if (element instanceof PsiClassOwner) {
    PsiClass[] classes=((PsiClassOwner)element).getClasses();
    if (classes.length > 0) {
      for (      final PsiClass aClass : classes) {
        if (aClass instanceof SyntheticElement) {
          return null;
        }
      }
      return classes;
    }
  }
  return element instanceof PsiClass ? new PsiClass[]{(PsiClass)element} : null;
}
