{
  final EditorTextField textField=getTextField();
  final Editor editor=textField.getEditor();
  if (editor != null && isCommitted()) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        final List<DomElementProblemDescriptor> problems=DomElementAnnotationsManager.getInstance().getProblems(getDomElement(),true);
        final boolean shouldHighlighBackground=problems.size() > 0 && textField.getText().trim().length() == 0;
        textField.setBackground(shouldHighlighBackground ? getErrorBackground() : getDefaultBackground());
        DaemonCodeAnalyzer.getInstance(getProject()).updateVisibleHighlighters(editor);
      }
    }
);
  }
}
