{
  if (myView.getItemsSize() > 0) {
    myView.clearItems();
  }
  if (defaultSelection == null && directories.length > 0) {
    defaultSelection=directories[0];
  }
  int selectionIndex=-1;
  for (int i=0; i < directories.length; i++) {
    PsiDirectory directory=directories[i];
    if (directory.equals(defaultSelection)) {
      selectionIndex=i;
      break;
    }
  }
  if (selectionIndex < 0 && directories.length == 1) {
    selectionIndex=0;
  }
  if (selectionIndex < 0) {
    PsiDirectory[] sourceDirectories=PsiManager.getInstance(project).getRootDirectories(PsiRootPackageType.SOURCE_PATH);
    for (int i=0; i < sourceDirectories.length; i++) {
      PsiDirectory directory=sourceDirectories[i];
      if (isParent(defaultSelection,directory)) {
        defaultSelection=directory;
        break;
      }
    }
  }
  for (int i=0; i < directories.length; i++) {
    PsiDirectory directory=directories[i];
    final String postfixForDirectory;
    if (postfixes == null) {
      postfixForDirectory=postfixToShow;
    }
 else {
      postfixForDirectory=postfixes.get(directory);
    }
    final ItemWrapper itemWrapper=new ItemWrapper(directory,postfixForDirectory);
    myView.addItem(itemWrapper);
    if (selectionIndex < 0 && isParent(directory,defaultSelection)) {
      selectionIndex=i;
    }
  }
  buildFragments();
  myView.listFilled();
  if (directories.length > 0) {
    myView.selectItemByIndex(selectionIndex);
  }
 else {
    myView.clearSelection();
  }
  enableButtons();
  myView.getComponent().repaint();
}
