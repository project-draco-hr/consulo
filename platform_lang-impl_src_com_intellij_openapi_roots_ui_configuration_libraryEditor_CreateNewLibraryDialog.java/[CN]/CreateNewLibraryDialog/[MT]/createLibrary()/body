{
  final LibraryTableBase.ModifiableModelEx modifiableModel=(LibraryTableBase.ModifiableModelEx)getTableModifiableModel();
  final LibraryType<?> type=myLibraryEditor.getType();
  final Library library=modifiableModel.createLibrary(myLibraryEditor.getName(),type != null ? type.getKind() : null);
  final LibraryEx.ModifiableModelEx model=(LibraryEx.ModifiableModelEx)library.getModifiableModel();
  myLibraryEditor.applyTo(model);
  new WriteAction(){
    @Override protected void run(    final Result result){
      model.commit();
    }
  }
.execute();
  return library;
}
