{
  for (  final Pair<ElementPattern<? extends PsiElement>,CompletionProvider<CompletionParameters>> pair : myMap.get(parameters.getCompletionType())) {
    final ProcessingContext context=new ProcessingContext();
    if (ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
      public Boolean compute(){
        return pair.first.accepts(parameters.getPosition(),context);
      }
    }
).booleanValue()) {
      if (!pair.second.addCompletionVariants(parameters,context,result))       return false;
    }
  }
  return true;
}
