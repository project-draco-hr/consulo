{
  TemplateItemsData data=getTemplateItemsData(presentation);
  final int KEY_LENGTH_LIMIT=10;
  int max=presentation.getMaxLength() - Math.min(KEY_LENGTH_LIMIT,TemplateSettings.getInstance().getMaxKeyLength());
  max=Math.min(max,data.maxTemplateDescriptionLength + 1);
  StringBuilder buffer=new StringBuilder(max);
  buffer.append(' ');
  buffer.append(template.getDescription());
  if (buffer.length() > max) {
    final String ellipsis="...";
    if (max > ellipsis.length()) {
      buffer.setLength(max - ellipsis.length());
      buffer.append(ellipsis);
    }
  }
 else   if (!data.hasNonTemplates) {
    while (buffer.length() < max) {
      buffer.append(' ');
    }
  }
  return buffer.toString();
}
