{
  Element element=new Element(ENTRY_POINT);
  element.setAttribute(TYPE_ATTR,myType);
  element.setAttribute(FQNAME_ATTR,getFQName());
  if (myRefElement != null) {
    final RefEntity entity=myRefElement.getOwner();
    if (entity instanceof RefElement) {
      final RefElement elementOwner=findSyntheticJSP((RefElement)entity);
      if (elementOwner.isSyntheticJSP()) {
        final PsiFile psiFile=PsiUtil.getJspFile(elementOwner.getElement());
        if (psiFile != null) {
          final VirtualFile virtualFile=psiFile.getVirtualFile();
          LOG.assertTrue(virtualFile != null);
          new SmartRefElementPointerImpl(FILE,virtualFile.getUrl(),elementOwner.getRefManager()).writeExternal(parentNode);
          return;
        }
      }
 else {
        new SmartRefElementPointerImpl(entity,myIsPersistent).writeExternal(element);
      }
    }
  }
  parentNode.addContent(element);
}
