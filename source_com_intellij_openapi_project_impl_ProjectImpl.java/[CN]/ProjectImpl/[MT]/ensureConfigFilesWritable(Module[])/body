{
  final List<VirtualFile> readonlyFiles=new ArrayList<VirtualFile>(modules.length + 2);
  collectReadonlyFiles(getConfigurationFiles(),readonlyFiles);
  for (int idx=0; idx < modules.length; idx++) {
    final ModuleImpl module=(ModuleImpl)modules[idx];
    module.collectReadonlyFiles(module.getConfigurationFiles(),readonlyFiles);
  }
  return ReadonlyStatusHandler.getInstance(this).ensureFilesWritable(readonlyFiles.toArray(new VirtualFile[readonlyFiles.size()]));
}
