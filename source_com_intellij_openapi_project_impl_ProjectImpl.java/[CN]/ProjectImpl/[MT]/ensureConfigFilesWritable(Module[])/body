{
  final List<VirtualFile> readonlyFiles=new ArrayList<VirtualFile>(modules.length + 2);
  collectReadonlyFiles(getConfigurationFiles(),readonlyFiles);
  for (  Module module1 : modules) {
    final ModuleImpl module=(ModuleImpl)module1;
    module.collectReadonlyFiles(module.getConfigurationFiles(),readonlyFiles);
  }
  return ReadonlyStatusHandler.getInstance(this).ensureFilesWritable(readonlyFiles.toArray(new VirtualFile[readonlyFiles.size()]));
}
