{
  if (ASSERT_THREADING) {
    boolean ok=ApplicationManager.getApplication().isWriteAccessAllowed() || Thread.holdsLock(START_OFFSET_LOCK) || isNonPhysicalOrInjected();
    if (!ok) {
      FileElement fileElement;
      PsiFile psiFile;
      LOG.error("Threading assertion. " + " Under write: " + ApplicationManager.getApplication().isWriteAccessAllowed() + "; Thread.holdsLock(START_OFFSET_LOCK): "+ Thread.holdsLock(START_OFFSET_LOCK)+ "; Thread.holdsLock(PsiLock.LOCK): "+ Thread.holdsLock(PsiLock.LOCK)+ "; wrapper: "+ myWrapper+ "; wrapper.isPhysical(): "+ (myWrapper != null && myWrapper.isPhysical())+ "; fileElement: "+ (fileElement=TreeUtil.getFileElement(this))+ "; psiFile: "+ (psiFile=fileElement == null ? null : (PsiFile)fileElement.getPsi())+ "; psiFile.getViewProvider(): "+ (psiFile == null ? null : psiFile.getViewProvider())+ "; psiFile.isPhysical(): "+ (psiFile != null && psiFile.isPhysical()));
    }
  }
  myCachedLength=NOT_CACHED;
  myModificationsCount++;
  myHC=-1;
  clearRelativeOffsets(rawFirstChild());
}
