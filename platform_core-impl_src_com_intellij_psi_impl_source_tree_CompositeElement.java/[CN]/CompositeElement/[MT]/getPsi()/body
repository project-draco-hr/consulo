{
  ProgressIndicatorProvider.checkCanceled();
  PsiElement wrapper=myWrapper;
  if (wrapper != null)   return wrapper;
  wrapper=obtainStubBasedPsi();
  if (wrapper == null)   wrapper=createPsiNoLock();
  return ourPsiUpdater.compareAndSet(this,null,wrapper) ? wrapper : ObjectUtils.assertNotNull(myWrapper);
}
