{
  final GrAnonymousClassDefinition anonymous=getAnonymousClassDefinition();
  if (anonymous != null) {
    return anonymous.getBaseClassType();
  }
  PsiType type=null;
  GrCodeReferenceElement refElement=getReferenceElement();
  if (refElement != null) {
    type=new GrClassReferenceType(refElement);
  }
 else {
    GrBuiltInTypeElement builtin=findChildByClass(GrBuiltInTypeElement.class);
    if (builtin != null)     type=builtin.getType();
  }
  if (type != null) {
    for (int i=0; i < getArrayCount(); i++) {
      type=type.createArrayType();
    }
    return type;
  }
  return null;
}
