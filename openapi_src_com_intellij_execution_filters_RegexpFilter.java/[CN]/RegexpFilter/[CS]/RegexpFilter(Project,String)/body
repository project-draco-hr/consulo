{
  myProject=project;
  validate(expression);
  if (expression == null || "".equals(expression.trim())) {
    throw new InvalidExpressionException("expression == null or empty");
  }
  int filePathIndex=expression.indexOf(FILE_PATH_MACROS);
  int lineIndex=expression.indexOf(LINE_MACROS);
  int columnIndex=expression.indexOf(COLUMN_MACROS);
  if (filePathIndex == -1) {
    throw new InvalidExpressionException("Expression must contain " + FILE_PATH_MACROS + " macros.");
  }
  final TreeMap<Integer,String> map=new TreeMap<Integer,String>();
  map.put(new Integer(filePathIndex),"file");
  expression=StringUtil.replace(expression,FILE_PATH_MACROS,FILE_PATH_REGEXP);
  if (lineIndex != -1) {
    expression=StringUtil.replace(expression,LINE_MACROS,NUMBER_REGEXP);
    map.put(new Integer(lineIndex),"line");
  }
  if (columnIndex != -1) {
    expression=StringUtil.replace(expression,COLUMN_MACROS,NUMBER_REGEXP);
    map.put(new Integer(columnIndex),"column");
  }
  int count=0;
  final Iterator<Integer> itr=map.keySet().iterator();
  while (itr.hasNext()) {
    count++;
    final String s=map.get(itr.next());
    if ("file".equals(s)) {
      filePathIndex=count;
    }
 else     if ("line".equals(s)) {
      lineIndex=count;
    }
 else     if ("column".equals(s)) {
      columnIndex=count;
    }
  }
  myFileRegister=filePathIndex;
  myLineRegister=lineIndex;
  myColumnRegister=columnIndex;
  myPattern=Pattern.compile(expression,Pattern.MULTILINE);
}
