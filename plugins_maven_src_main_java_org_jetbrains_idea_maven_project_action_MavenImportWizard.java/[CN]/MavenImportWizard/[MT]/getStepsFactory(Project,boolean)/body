{
  if ((currentProject != null && updateCurrent)) {
    preferencesForEditing=MavenImporterPreferencesComponent.getInstance(currentProject).getState().safeClone();
  }
 else {
    preferencesForEditing=new MavenImporterPreferences();
  }
  myImportProcessor=new MavenImportProcessor(updateCurrent ? currentProject : null,preferencesForEditing);
  return new AddModuleWizard.ExtraStepsCreator(){
    public Collection<ModuleWizardStep> createSteps(    final WizardContext wizardContext){
      final Collection<ModuleWizardStep> list=new ArrayList<ModuleWizardStep>();
      list.add(new MavenImportRootStep(wizardContext,myImportProcessor,preferencesForEditing));
      list.add(new SelectMavenProjectsStep(myImportProcessor));
      return list;
    }
  }
;
}
