{
  myImportProcessor.clearMavenProjectModel();
  importRoot=FileFinder.refreshRecursively(root);
  if (importRoot != null) {
    ProgressManager.getInstance().run(new Task.Modal(null,ProjectBundle.message("maven.scanning.projects"),true){
      public void run(      ProgressIndicator indicator){
        indicator.setText(ProjectBundle.message("maven.locating.files"));
        final Collection<VirtualFile> files=FileFinder.findFilesByName(importRoot.getChildren(),MavenEnv.POM_FILE,new ArrayList<VirtualFile>(),null,indicator,preferences.isLookForNested());
        indicator.setText2("");
        if (indicator.isCanceled())         return;
        myImportProcessor.createMavenProjectModel(new HashMap<VirtualFile,Module>(),files);
      }
      public void onCancel(){
        myImportProcessor.clearMavenProjectModel();
      }
    }
);
  }
  return myImportProcessor.getMavenProjectModel() != null;
}
