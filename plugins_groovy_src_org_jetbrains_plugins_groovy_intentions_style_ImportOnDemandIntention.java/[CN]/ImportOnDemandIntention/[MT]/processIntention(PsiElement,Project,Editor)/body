{
  if (!(element instanceof GrReferenceElement))   return;
  final GrReferenceElement ref=(GrReferenceElement)element;
  final PsiElement resolved=ref.resolve();
  if (!(resolved instanceof PsiClass))   return;
  final String qname=((PsiClass)resolved).getQualifiedName();
  final GrImportStatement importStatement=GroovyPsiElementFactory.getInstance(project).createImportStatementFromText(qname,true,true,null);
  final PsiFile containingFile=element.getContainingFile();
  if (!(containingFile instanceof GroovyFile))   return;
  ((GroovyFile)containingFile).addImport(importStatement);
  for (  PsiReference reference : ReferencesSearch.search(resolved,new LocalSearchScope(containingFile),true)) {
    final PsiElement refElement=reference.getElement();
    if (refElement == null)     continue;
    final PsiElement parent=refElement.getParent();
    if (parent instanceof GrQualifiedReference<?>) {
      GrReferenceAdjuster.shortenReference((GrQualifiedReference<?>)parent);
    }
  }
}
