{
  Graphics2D g2d=(Graphics2D)g;
  UISettings uiSettings=getInstance();
  g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_OFF);
  if (uiSettings.ANTIALIASING_IN_EDITOR) {
    Toolkit tk=Toolkit.getDefaultToolkit();
    Map map=(Map)tk.getDesktopProperty("awt.font.desktophints");
    if (map != null) {
      final Object textAA=map.get(RenderingHints.KEY_TEXT_ANTIALIASING);
      if (RenderingHints.VALUE_TEXT_ANTIALIAS_DEFAULT.equals(textAA)) {
        g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
      }
 else {
        g2d.addRenderingHints(map);
      }
    }
 else {
      g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    }
  }
 else {
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_OFF);
  }
}
