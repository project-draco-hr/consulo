{
  ProjectManagerEx projectManager=ProjectManagerEx.getInstanceEx();
  File projectFile=File.createTempFile(PROJECT_FILE_PREFIX,PROJECT_FILE_SUFFIX);
  myFilesToDelete.add(projectFile);
  LocalFileSystem.getInstance().refreshAndFindFileByIoFile(projectFile);
  myProject=projectManager.newProject(projectFile.getPath(),false,false);
  for (  ModuleFixtureBuilder moduleFixtureBuilder : myModuleFixtureBuilders) {
    moduleFixtureBuilder.getFixture().setUp();
  }
  PropertiesReferenceManager.getInstance(myProject).projectOpened();
  ((StartupManagerImpl)StartupManager.getInstance(myProject)).runStartupActivities();
  ((StartupManagerImpl)StartupManager.getInstance(myProject)).runPostStartupActivities();
  ProjectManagerEx.getInstanceEx().setCurrentTestProject(myProject);
}
