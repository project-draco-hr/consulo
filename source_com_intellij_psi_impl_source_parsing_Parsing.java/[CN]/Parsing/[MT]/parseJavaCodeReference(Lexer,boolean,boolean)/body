{
  if (lexer.getTokenType() != IDENTIFIER)   return null;
  TreeElement identifier=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
  lexer.advance();
  CompositeElement refElement=ASTFactory.composite(JAVA_CODE_REFERENCE);
  refElement.rawAddChildren(identifier);
  CompositeElement parameterList;
  if (parseParameterList) {
    parameterList=parseReferenceParameterList(lexer,true);
  }
 else {
    parameterList=ASTFactory.composite(REFERENCE_PARAMETER_LIST);
  }
  refElement.rawAddChildren(parameterList);
  while (lexer.getTokenType() == DOT) {
    final LexerPosition dotPos=lexer.getCurrentPosition();
    TreeElement dot=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
    lexer.advance();
    if (lexer.getTokenType() == IDENTIFIER) {
      identifier=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
      lexer.advance();
    }
 else {
      if (!allowIncomplete) {
        lexer.restore(dotPos);
        return refElement;
      }
      identifier=null;
    }
    CompositeElement refElement1=ASTFactory.composite(JAVA_CODE_REFERENCE);
    refElement1.rawAddChildren(refElement);
    refElement1.rawAddChildren(dot);
    if (identifier == null) {
      refElement1.rawAddChildren(Factory.createErrorElement(JavaErrorMessages.message("expected.identifier")));
      refElement1.rawAddChildren(ASTFactory.composite(REFERENCE_PARAMETER_LIST));
      return refElement1;
    }
    refElement1.rawAddChildren(identifier);
    CompositeElement parameterList1;
    if (parseParameterList) {
      parameterList1=parseReferenceParameterList(lexer,true);
    }
 else {
      parameterList1=ASTFactory.composite(REFERENCE_PARAMETER_LIST);
    }
    refElement1.rawAddChildren(parameterList1);
    refElement=refElement1;
  }
  return refElement;
}
