{
  if (lexer.getTokenType() != IDENTIFIER)   return null;
  TreeElement identifier=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
  lexer.advance();
  CompositeElement refElement=ASTFactory.composite(JAVA_CODE_REFERENCE);
  TreeUtil.addChildren(refElement,identifier);
  CompositeElement parameterList;
  if (parseParameterList) {
    parameterList=parseReferenceParameterList(lexer,true);
  }
 else {
    parameterList=ASTFactory.composite(REFERENCE_PARAMETER_LIST);
  }
  TreeUtil.addChildren(refElement,parameterList);
  while (lexer.getTokenType() == DOT) {
    final LexerPosition dotPos=lexer.getCurrentPosition();
    TreeElement dot=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
    lexer.advance();
    if (lexer.getTokenType() == IDENTIFIER) {
      identifier=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
      lexer.advance();
    }
 else {
      if (!allowIncomplete) {
        lexer.restore(dotPos);
        return refElement;
      }
      identifier=null;
    }
    CompositeElement refElement1=ASTFactory.composite(JAVA_CODE_REFERENCE);
    TreeUtil.addChildren(refElement1,refElement);
    TreeUtil.addChildren(refElement1,dot);
    if (identifier == null) {
      TreeUtil.addChildren(refElement1,Factory.createErrorElement(JavaErrorMessages.message("expected.identifier")));
      TreeUtil.addChildren(refElement1,ASTFactory.composite(REFERENCE_PARAMETER_LIST));
      return refElement1;
    }
    TreeUtil.addChildren(refElement1,identifier);
    CompositeElement parameterList1;
    if (parseParameterList) {
      parameterList1=parseReferenceParameterList(lexer,true);
    }
 else {
      parameterList1=ASTFactory.composite(REFERENCE_PARAMETER_LIST);
    }
    TreeUtil.addChildren(refElement1,parameterList1);
    refElement=refElement1;
  }
  return refElement;
}
