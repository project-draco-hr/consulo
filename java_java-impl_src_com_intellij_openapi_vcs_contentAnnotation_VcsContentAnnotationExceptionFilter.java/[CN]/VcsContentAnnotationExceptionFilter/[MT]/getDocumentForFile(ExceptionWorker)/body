{
  return ApplicationManager.getApplication().runReadAction(new Computable<Document>(){
    @Override public Document compute(){
      final Document document=FileDocumentManager.getInstance().getDocument(worker.getFile().getVirtualFile());
      if (document == null) {
        LOG.info("can not get document for file: " + worker.getFile().getVirtualFile());
        return null;
      }
      return document;
    }
  }
);
}
