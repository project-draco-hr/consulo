{
  if (element instanceof XmlTag) {
    XmlTag tag=(XmlTag)element;
    ASTNode tagNameElement=XmlChildRole.START_TAG_NAME_FINDER.findChild(SourceTreeToPsiMap.psiElementToTree(tag));
    if (tagNameElement == null)     return null;
    int nameEnd=tagNameElement.getTextRange().getEndOffset();
    int end=tag.getLastChild().getTextRange().getStartOffset();
    XmlAttribute[] attributes=tag.getAttributes();
    if (attributes.length > 0) {
      XmlAttribute lastAttribute=attributes[attributes.length - 1];
      XmlAttribute lastAttributeBeforeCR=null;
      for (PsiElement child=tag.getFirstChild(); child != lastAttribute.getNextSibling(); child=child.getNextSibling()) {
        if (child instanceof XmlAttribute) {
          lastAttributeBeforeCR=(XmlAttribute)child;
        }
 else         if (child instanceof PsiWhiteSpace) {
          if (child.textContains('\n'))           break;
        }
      }
      if (lastAttributeBeforeCR != null) {
        int attributeEnd=lastAttributeBeforeCR.getTextRange().getEndOffset();
        return new TextRange(attributeEnd,end);
      }
    }
    return new TextRange(nameEnd,end);
  }
 else {
    return null;
  }
}
