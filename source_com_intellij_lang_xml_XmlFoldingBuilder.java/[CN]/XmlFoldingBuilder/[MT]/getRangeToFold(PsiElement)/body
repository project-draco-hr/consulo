{
  if (element instanceof XmlTag) {
    final ASTNode tagNode=element.getNode();
    ASTNode tagNameElement=XmlChildRole.START_TAG_NAME_FINDER.findChild(tagNode);
    if (tagNameElement == null)     return null;
    int nameEnd=tagNameElement.getTextRange().getEndOffset();
    int end=tagNode.getLastChildNode().getTextRange().getStartOffset();
    ASTNode[] attributes=tagNode.getChildren(XML_ATTRIBUTE_SET);
    if (attributes.length > 0) {
      ASTNode lastAttribute=attributes[attributes.length - 1];
      ASTNode lastAttributeBeforeCR=null;
      for (ASTNode child=tagNode.getFirstChildNode(); child != lastAttribute.getTreeNext(); child=child.getTreeNext()) {
        if (child.getElementType() == XmlElementType.XML_ATTRIBUTE) {
          lastAttributeBeforeCR=child;
        }
 else         if (child.getPsi() instanceof PsiWhiteSpace) {
          if (child.textContains('\n'))           break;
        }
      }
      if (lastAttributeBeforeCR != null) {
        int attributeEnd=lastAttributeBeforeCR.getTextRange().getEndOffset();
        return new TextRange(attributeEnd,end);
      }
    }
    return new TextRange(nameEnd,end);
  }
 else   if (element instanceof XmlComment) {
    final XmlComment xmlComment=(XmlComment)element;
    final TextRange textRange=element.getTextRange();
    int commentStartOffset=getCommentStartOffset(xmlComment);
    int commentEndOffset=getCommentStartEnd(xmlComment);
    if (textRange.getEndOffset() - textRange.getStartOffset() > commentStartOffset + commentEndOffset) {
      return new TextRange(textRange.getStartOffset() + commentStartOffset,textRange.getEndOffset() - commentEndOffset);
    }
 else {
      return null;
    }
  }
 else {
    return null;
  }
}
