{
  final PsiElement psiElement=node.getPsi();
  XmlDocument xmlDocument=null;
  if (psiElement instanceof XmlFile) {
    XmlFile file=((XmlFile)psiElement);
    xmlDocument=file.getDocument();
  }
 else   if (psiElement instanceof XmlDocument) {
    xmlDocument=(XmlDocument)psiElement;
  }
  XmlTag rootTag=xmlDocument == null ? null : xmlDocument.getRootTag();
  List<FoldingDescriptor> foldings=null;
  if (rootTag != null) {
    foldings=new ArrayList<FoldingDescriptor>();
    addElementsToFold(foldings,rootTag,document);
  }
  return foldings != null ? foldings.toArray(new FoldingDescriptor[foldings.size()]) : FoldingDescriptor.EMPTY;
}
