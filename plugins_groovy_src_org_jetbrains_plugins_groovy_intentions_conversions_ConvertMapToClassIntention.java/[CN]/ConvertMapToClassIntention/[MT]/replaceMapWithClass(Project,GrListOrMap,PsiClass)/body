{
  PsiUtil.shortenReferences((GroovyPsiElement)generatedClass);
  CreateClassActionBase.putCursor(project,generatedClass.getContainingFile(),generatedClass);
  final String text=map.getText();
  int begin=0;
  int end=text.length();
  if (text.startsWith("["))   begin++;
  if (text.endsWith("]"))   end--;
  final GrExpression newExpression=GroovyPsiElementFactory.getInstance(project).createExpressionFromText("new " + generatedClass.getQualifiedName() + "("+ text.substring(begin,end)+ ")");
  final GrExpression replacedNewExpression=((GrExpression)map.replace(newExpression));
  checkForVariableDeclaration(replacedNewExpression);
  checkForReturnFromMethod(replacedNewExpression);
  PsiUtil.shortenReferences(replacedNewExpression);
}
