{
  List<String> conflicts=new ArrayList<String>();
  PsiPackage sourcePackage=myClassToMove.getContainingFile().getContainingDirectory().getPackage();
  PsiPackage targetPackage=myTargetClass.getContainingFile().getContainingDirectory().getPackage();
  if (!Comparing.equal(sourcePackage,targetPackage)) {
    PsiElement[] elementsToMove=new PsiElement[]{myClassToMove};
    myClassToMove.accept(new PackageLocalsUsageCollector(elementsToMove,new PackageWrapper(targetPackage),conflicts));
  }
  return conflicts;
}
