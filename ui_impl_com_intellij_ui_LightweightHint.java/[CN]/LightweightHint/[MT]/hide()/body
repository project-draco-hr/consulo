{
  if (isVisible()) {
    if (myIsRealPopup) {
      myPopup.cancel();
      myPopup=null;
      myLastShownRect=null;
    }
 else {
      final Rectangle bounds=myComponent.getBounds();
      final JLayeredPane layeredPane=myComponent.getRootPane().getLayeredPane();
      try {
        if (myFocusBackComponent != null) {
          LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(myFocusBackComponent);
        }
        layeredPane.remove(myComponent);
      }
  finally {
        LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(null);
      }
      layeredPane.paintImmediately(bounds.x,bounds.y,bounds.width,bounds.height);
    }
  }
  if (myEscListener != null) {
    myComponent.unregisterKeyboardAction(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0));
  }
  fireHintHidden();
}
