{
  final String refText;
  if (ref instanceof PsiQualifiedReference) {
    refText=((PsiQualifiedReference)ref).getReferenceName();
  }
 else {
    refText=ref.getCanonicalText();
  }
  String toRename;
  if (fieldName.equals(refText)) {
    toRename=newName;
  }
 else   if (GroovyPropertyUtils.getGetterNameNonBoolean(fieldName).equals(refText)) {
    toRename=GroovyPropertyUtils.getGetterNameNonBoolean(newName);
  }
 else   if (GroovyPropertyUtils.getGetterNameBoolean(fieldName).equals(refText)) {
    toRename=GroovyPropertyUtils.getGetterNameBoolean(newName);
  }
 else   if (GroovyPropertyUtils.getSetterName(fieldName).equals(refText)) {
    toRename=GroovyPropertyUtils.getSetterName(newName);
  }
 else {
    toRename=newName;
  }
  ref.handleElementRename(toRename);
}
