{
  if (myBuilder == null)   return null;
  final Object selectedValue=getSelectedValue();
  if (DataConstants.PSI_ELEMENT.equals(dataId)) {
    final PsiElement selectedElement=getSelectedElement();
    return selectedElement != null && selectedElement.isValid() ? selectedElement : null;
  }
  if (DataConstants.PSI_ELEMENT_ARRAY.equals(dataId)) {
    return filterInvalidElements(getSelectedElements());
  }
 else   if (DataConstantsEx.PASTE_TARGET_PSI_ELEMENT.equals(dataId)) {
    final AbstractTreeNode parentNode=myBuilder.getParentNode();
    final Object element=parentNode != null ? parentNode.getValue() : null;
    return element instanceof PsiElement && ((PsiElement)element).isValid() ? element : null;
  }
 else   if (DataConstants.NAVIGATABLE_ARRAY.equals(dataId)) {
    return getNavigatables();
  }
 else   if (DataConstants.COPY_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator != null ? myCopyPasteDelegator.getCopyProvider() : null;
  }
 else   if (DataConstants.CUT_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator != null ? myCopyPasteDelegator.getCutProvider() : null;
  }
 else   if (DataConstants.PASTE_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator != null ? myCopyPasteDelegator.getPasteProvider() : null;
  }
 else   if (DataConstants.IDE_VIEW.equals(dataId)) {
    return myIdeView;
  }
 else   if (DataConstants.DELETE_ELEMENT_PROVIDER.equals(dataId)) {
    return myDeleteElementProvider;
  }
 else   if (DataConstants.MODULE.equals(dataId)) {
    return selectedValue instanceof Module ? selectedValue : null;
  }
 else   if (DataConstantsEx.MODULE_GROUP_ARRAY.equals(dataId)) {
    return selectedValue instanceof ModuleGroup ? new ModuleGroup[]{(ModuleGroup)selectedValue} : null;
  }
 else   if (DataConstantsEx.LIBRARY_GROUP_ARRAY.equals(dataId)) {
    return selectedValue instanceof LibraryGroupElement ? new LibraryGroupElement[]{(LibraryGroupElement)selectedValue} : null;
  }
 else   if (DataConstantsEx.NAMED_LIBRARY_ARRAY.equals(dataId)) {
    return selectedValue instanceof NamedLibraryElement ? new NamedLibraryElement[]{(NamedLibraryElement)selectedValue} : null;
  }
  if (myProjectTreeStructure != null) {
    return myProjectTreeStructure.getDataFromProviders(getSelectedNodes(),dataId);
  }
  return null;
}
