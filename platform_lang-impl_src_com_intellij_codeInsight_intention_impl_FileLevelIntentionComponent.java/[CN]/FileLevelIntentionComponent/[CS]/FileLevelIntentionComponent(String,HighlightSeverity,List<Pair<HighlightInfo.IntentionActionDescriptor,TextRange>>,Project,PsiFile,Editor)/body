{
  myProject=project;
  final ShowIntentionsPass.IntentionsInfo info=new ShowIntentionsPass.IntentionsInfo();
  if (intentions != null) {
    for (    Pair<HighlightInfo.IntentionActionDescriptor,TextRange> intention : intentions) {
      final HighlightInfo.IntentionActionDescriptor descriptor=intention.getFirst();
      info.intentionsToShow.add(descriptor);
      final IntentionAction action=descriptor.getAction();
      if (action instanceof EmptyIntentionAction) {
        continue;
      }
      final String text=action.getText();
      createActionLabel(text,new Runnable(){
        public void run(){
          ShowIntentionActionsHandler.chooseActionAndInvoke(psiFile,editor,action,text);
        }
      }
);
    }
  }
  myLabel.setText(description);
  myLabel.setIcon(SeverityRegistrar.getInstance(project).compare(severity,HighlightSeverity.ERROR) >= 0 ? ourQuickFixIcon : ourIntentionIcon);
  setBackground(getColor(severity));
  new ClickListener(){
    @Override public boolean onClick(    MouseEvent e,    int clickCount){
      IntentionListStep step=new IntentionListStep(null,info,editor,psiFile,project);
      if (intentions != null && !intentions.isEmpty()) {
        HighlightInfo.IntentionActionDescriptor descriptor=intentions.get(0).getFirst();
        IntentionActionWithTextCaching actionWithTextCaching=step.wrapAction(descriptor,psiFile,psiFile,editor);
        if (step.hasSubstep(actionWithTextCaching)) {
          step=step.getSubStep(actionWithTextCaching,null);
        }
      }
      JBPopupFactory.getInstance().createListPopup(step).showUnderneathOf(myLabel);
      return true;
    }
  }
.installOn(myLabel);
}
