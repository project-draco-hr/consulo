{
  myProject=project;
  final ShowIntentionsPass.IntentionsInfo info=new ShowIntentionsPass.IntentionsInfo();
  if (intentions != null) {
    for (    Pair<HighlightInfo.IntentionActionDescriptor,TextRange> intention : intentions) {
      final HighlightInfo.IntentionActionDescriptor descriptor=intention.getFirst();
      info.intentionsToShow.add(descriptor);
      final String text=descriptor.getAction().getText();
      createActionLabel(text,new Runnable(){
        public void run(){
          ShowIntentionActionsHandler.chooseActionAndInvoke(psiFile,editor,descriptor.getAction(),text);
        }
      }
);
    }
  }
  myLabel.setText(description);
  myLabel.setIcon(SeverityRegistrar.getInstance(project).compare(severity,HighlightSeverity.ERROR) >= 0 ? ourQuickFixIcon : ourIntentionIcon);
  setBackground(getColor(severity));
  myLabel.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      IntentionListStep step=new IntentionListStep(null,info,editor,psiFile,project);
      if (intentions != null && !intentions.isEmpty()) {
        HighlightInfo.IntentionActionDescriptor descriptor=intentions.get(0).getFirst();
        IntentionActionWithTextCaching actionWithTextCaching=step.wrapAction(descriptor,psiFile,psiFile,editor);
        step=step.getSubStep(actionWithTextCaching,null);
      }
      JBPopupFactory.getInstance().createListPopup(step).showUnderneathOf(myLabel);
    }
  }
);
}
