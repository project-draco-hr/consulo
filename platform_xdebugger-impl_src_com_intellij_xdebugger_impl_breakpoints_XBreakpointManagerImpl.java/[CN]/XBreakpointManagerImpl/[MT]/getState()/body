{
  myDependentBreakpointManager.saveState();
  BreakpointManagerState state=new BreakpointManagerState();
  for (  XBreakpointBase<?,?,?> breakpoint : myDefaultBreakpoints.values()) {
    final BreakpointState breakpointState=breakpoint.getState();
    if (differsFromDefault(breakpoint.getType(),breakpointState)) {
      state.getDefaultBreakpoints().add(breakpointState);
    }
  }
  for (  XBreakpointBase<?,?,?> breakpoint : myBreakpoints.values()) {
    state.getBreakpoints().add(breakpoint.getState());
  }
  for (  Map.Entry<XBreakpointType,BreakpointState<?,?,?>> entry : myBreakpointsDefaults.entrySet()) {
    if (statesAreDifferent(entry.getValue(),createBreakpointDefaults(entry.getKey()))) {
      state.getBreakpointsDefaults().add(entry.getValue());
    }
  }
  state.setBreakpointsDialogProperties(myBreakpointsDialogSettings);
  state.setTime(myTime);
  state.setDefaultGroup(myDefaultGroup);
  return state;
}
