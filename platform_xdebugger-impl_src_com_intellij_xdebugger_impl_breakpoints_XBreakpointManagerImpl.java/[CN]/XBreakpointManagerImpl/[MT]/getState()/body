{
  myDependentBreakpointManager.saveState();
  BreakpointManagerState state=new BreakpointManagerState();
  for (  XBreakpointBase<?,?,?> breakpoint : myDefaultBreakpoints.values()) {
    final BreakpointState breakpointState=breakpoint.getState();
    if (differsFromDefault(breakpoint.getType(),breakpointState)) {
      state.getDefaultBreakpoints().add(breakpointState);
    }
  }
  for (  XBreakpointBase<?,?,?> breakpoint : myBreakpoints.values()) {
    state.getBreakpoints().add(breakpoint.getState());
  }
  for (  Map.Entry<XBreakpointType<?,?>,XBreakpointTypeDialogState> entry : myBreakpointsDialogSettings.entrySet()) {
    state.getBreakpointTypeDialogProperties().put(entry.getKey().getId(),entry.getValue());
  }
  return state;
}
