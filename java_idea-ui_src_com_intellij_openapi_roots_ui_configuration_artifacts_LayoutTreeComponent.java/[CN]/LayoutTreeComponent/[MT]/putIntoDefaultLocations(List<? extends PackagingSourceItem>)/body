{
  final List<PackagingElement<?>> toSelect=new ArrayList<PackagingElement<?>>();
  final CompositePackagingElement<?> rootElement=getArtifact().getRootElement();
  final ArtifactType artifactType=getArtifact().getArtifactType();
  editLayout(new Runnable(){
    public void run(){
      for (      PackagingSourceItem item : items) {
        final String path=artifactType.getDefaultPathFor(item);
        if (path != null) {
          final CompositePackagingElement<?> directory=PackagingElementFactory.getInstance().getOrCreateDirectory(rootElement,path);
          final List<? extends PackagingElement<?>> elements=item.createElements(myContext);
          toSelect.addAll(directory.addOrFindChildren(elements));
        }
      }
    }
  }
);
  myArtifactsEditor.getSourceItemsTree().rebuildTree();
  updateAndSelect(myTree.getRootPackagingNode(),toSelect);
}
