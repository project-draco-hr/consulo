{
  final PackagingElementNode<?> parentNode=getParentNode(myTree.getSelection());
  final PackagingElement<?> element=parentNode.getElementIfSingle();
  if (!checkCanAdd(type,element,parentNode))   return;
  final CompositePackagingElement<?> parent=element instanceof CompositePackagingElement<?> ? (CompositePackagingElement<?>)element : getArtifact().getRootElement();
  final List<? extends PackagingElement<?>> children=type.chooseAndCreate(myContext,getArtifact(),parent);
  editLayout(new Runnable(){
    public void run(){
      for (      PackagingElement<?> child : children) {
        parent.addOrFindChild(child);
      }
    }
  }
);
  updateAndSelect(parentNode,children);
}
