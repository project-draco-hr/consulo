{
  Set<Artifact> parentArtifacts=new HashSet<Artifact>();
  for (  PackagingElementNode<?> node : nodes) {
    final Collection<PackagingNodeSource> sources=node.getNodeSources();
    for (    PackagingNodeSource source : sources) {
      final Artifact artifact=source.getSourceArtifact();
      if (artifact != null) {
        parentArtifacts.add(artifact);
      }
 else {
        Messages.showErrorDialog(myArtifactsEditor.getMainComponent(),"'" + node.getElementPresentation().getPresentableName() + "' comes from '"+ source.getPresentableName()+ "' so it cannot be removed itself");
        return false;
      }
    }
  }
  if (!parentArtifacts.isEmpty()) {
    final int answer=Messages.showYesNoDialog(myArtifactsEditor.getMainComponent(),"Some elements come from included artifacts. Do you want to remove it?","Remove Elements",null);
    if (answer != 0)     return false;
  }
  return true;
}
