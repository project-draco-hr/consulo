{
  myArtifactsEditor=artifactsEditor;
  mySubstitutionParameters=substitutionParameters;
  myContext=context;
  myOriginalArtifact=originalArtifact;
  mySortElements=sortElements;
  myTree=new LayoutTree(myArtifactsEditor);
  myTreeStructure=new LayoutTreeStructure();
  myBuilder=new LayoutTreeBuilder();
  Disposer.register(this,myTree);
  Disposer.register(this,myBuilder);
  myTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      updatePropertiesPanel(false);
    }
  }
);
  createPropertiesPanel();
  myTreePanel=new JPanel(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myTree),BorderLayout.CENTER);
  myTreePanel.add(myPropertiesPanelWrapper,BorderLayout.SOUTH);
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    DnDManager.getInstance().registerTarget(this,myTree);
  }
}
