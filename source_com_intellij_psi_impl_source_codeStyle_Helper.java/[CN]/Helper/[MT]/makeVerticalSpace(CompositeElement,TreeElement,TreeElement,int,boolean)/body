{
  if (soft) {
    boolean inCode=parent.getElementType() != ElementType.JAVA_FILE && parent.getElementType() != ElementType.CLASS;
    int maxKeep=inCode ? mySettings.KEEP_BLANK_LINES_IN_CODE : mySettings.KEEP_BLANK_LINES_IN_DECLARATIONS;
    int lineBreaks=getLineBreakCount(parent,child1,child2);
    lineBreaks=Math.min(lineBreaks,maxKeep + 1);
    lineBreaks=Math.max(lineBreaks,size + 1);
    return makeLineBreaks(parent,child1,child2,lineBreaks);
  }
 else {
    return makeLineBreaks(parent,child1,child2,size + 1);
  }
}
