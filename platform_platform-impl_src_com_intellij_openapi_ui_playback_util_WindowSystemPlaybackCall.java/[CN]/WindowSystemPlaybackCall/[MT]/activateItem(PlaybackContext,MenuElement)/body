{
  final AsyncResult<MenuElement[]> result=new AsyncResult<MenuElement[]>();
  final AbstractButton c=(AbstractButton)element.getComponent();
  if (!c.isShowing()) {
    result.setRejected();
    return result;
  }
  context.runPooledThread(new Runnable(){
    @Override public void run(){
      Robot robot=context.getRobot();
      Point location=c.getLocationOnScreen();
      Dimension size=c.getSize();
      Point point=new Point(location.x + size.width / 2,location.y + size.height / 2);
      robot.mouseMove(point.x,point.y);
      robot.delay(90);
      robot.mousePress(InputEvent.BUTTON1_MASK);
      robot.delay(90);
      robot.mouseRelease(InputEvent.BUTTON1_MASK);
      robot.delay(90);
      context.flushAwtAndRun(new Runnable(){
        @Override public void run(){
          context.flushAwtAndRun(new Runnable(){
            @Override public void run(){
              MenuElement[] subElements=element.getSubElements();
              if (subElements == null || subElements.length == 0) {
                result.setDone();
              }
 else {
                MenuElement[] menuElements=subElements[0].getSubElements();
                result.setDone(menuElements);
              }
            }
          }
);
        }
      }
);
    }
  }
);
  return result;
}
