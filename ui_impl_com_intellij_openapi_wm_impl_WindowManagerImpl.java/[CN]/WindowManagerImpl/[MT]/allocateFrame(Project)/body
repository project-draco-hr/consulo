{
  LOG.assertTrue(!myProject2Frame.containsKey(project));
  final IdeFrame frame;
  if (myProject2Frame.containsKey(null)) {
    frame=myProject2Frame.get(null);
    myProject2Frame.remove(null);
    myProject2Frame.put(project,frame);
    frame.setProject(project);
  }
 else {
    frame=new IdeFrame((ApplicationInfoEx)ApplicationInfo.getInstance(),ActionManager.getInstance(),UISettings.getInstance(),DataManager.getInstance(),KeymapManagerEx.getInstance());
    if (myFrameBounds != null) {
      frame.setBounds(myFrameBounds);
    }
    frame.setProject(project);
    myProject2Frame.put(project,frame);
    frame.show();
  }
  frame.addWindowListener(myActivationListener);
  return frame;
}
