{
  final Application old=ApplicationManagerEx.getApplication();
  MockApplication app=new MockApplication(){
    @Override public Future<?> executeOnPooledThread(    @NotNull Runnable action){
      return old != null ? old.executeOnPooledThread(action) : super.executeOnPooledThread(action);
    }
  }
;
  myRootDisposable=Disposer.newDisposable();
  ApplicationManagerEx.setApplication(app,myRootDisposable);
}
