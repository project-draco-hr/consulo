{
  PsiType iterType=qualifier.getType();
  if (iterType == null)   return null;
  if (iterType instanceof PsiArrayType) {
    return TypesUtil.boxPrimitiveType(((PsiArrayType)iterType).getComponentType(),context.getManager(),context.getResolveScope());
  }
  if (iterType instanceof GrTupleType) {
    PsiType[] types=((GrTupleType)iterType).getParameters();
    return types.length == 1 ? types[0] : null;
  }
  if (iterType instanceof GrRangeType) {
    return ((GrRangeType)iterType).getIterationType();
  }
  PsiType res=PsiUtil.extractIterableTypeParameter(iterType,true);
  if (res != null) {
    return PsiImplUtil.normalizeWildcardTypeByPosition(res,qualifier);
  }
  if (TypesUtil.isClassType(iterType,CommonClassNames.JAVA_LANG_STRING) || TypesUtil.isClassType(iterType,JAVA_IO_FILE)) {
    return TypesUtil.createTypeByFQClassName(CommonClassNames.JAVA_LANG_STRING,context);
  }
  if (InheritanceUtil.isInheritor(iterType,CommonClassNames.JAVA_UTIL_MAP)) {
    return getEntryForMap(iterType,context);
  }
  return null;
}
