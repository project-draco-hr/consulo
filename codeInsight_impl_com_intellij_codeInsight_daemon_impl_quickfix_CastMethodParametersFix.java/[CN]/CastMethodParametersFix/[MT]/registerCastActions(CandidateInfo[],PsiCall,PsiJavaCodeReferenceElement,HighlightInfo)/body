{
  if (candidates.length == 0)   return;
  List<CandidateInfo> methodCandidates=new ArrayList<CandidateInfo>(Arrays.asList(candidates));
  PsiExpressionList list=call.getArgumentList();
  PsiExpression[] expressions=list.getExpressions();
  if (expressions.length == 0)   return;
  nextMethod:   for (int i=methodCandidates.size() - 1; i >= 0; i--) {
    CandidateInfo candidate=methodCandidates.get(i);
    PsiMethod method=(PsiMethod)candidate.getElement();
    PsiSubstitutor substitutor=candidate.getSubstitutor();
    PsiParameter[] parameters=method.getParameterList().getParameters();
    if (expressions.length != parameters.length) {
      methodCandidates.remove(i);
      continue;
    }
    for (int j=0; j < parameters.length; j++) {
      PsiParameter parameter=parameters[j];
      PsiExpression expression=expressions[j];
      PsiType exprType=expression.getType();
      PsiType parameterType=substitutor.substitute(parameter.getType());
      if (exprType == null || parameterType == null || !TypeConversionUtil.areTypesConvertible(exprType,parameterType)) {
        methodCandidates.remove(i);
        continue nextMethod;
      }
    }
  }
  if (methodCandidates.size() == 0)   return;
  try {
    for (int i=0; i < expressions.length; i++) {
      PsiExpression expression=expressions[i];
      PsiType exprType=expression.getType();
      Set<String> suggestedCasts=new THashSet<String>();
      for (      CandidateInfo candidate : methodCandidates) {
        PsiMethod method=(PsiMethod)candidate.getElement();
        PsiSubstitutor substitutor=candidate.getSubstitutor();
        PsiParameter[] parameters=method.getParameterList().getParameters();
        PsiType originalParameterType=parameters[i].getType();
        PsiType parameterType=substitutor.substitute(originalParameterType);
        if (parameterType instanceof PsiWildcardType)         continue;
        if (suggestedCasts.contains(parameterType.getCanonicalText()))         continue;
        if (Comparing.equal(exprType,parameterType))         continue;
        PsiCall newCall=(PsiCall)call.copy();
        PsiTypeCastExpression castExpression=createCastExpression(expression,methodRef.getProject(),parameterType);
        newCall.getArgumentList().getExpressions()[i].replace(castExpression);
        JavaResolveResult resolveResult=newCall.resolveMethodGenerics();
        if (resolveResult.getElement() != null && resolveResult.isValidResult()) {
          suggestedCasts.add(parameterType.getCanonicalText());
          QuickFixAction.registerQuickFixAction(highlightInfo,new CastMethodParametersFix(list,i,parameterType));
        }
      }
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
