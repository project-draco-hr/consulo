{
  final PsiClassType.ClassResolveResult resolveResult=PsiUtil.resolveGenericsClassInType(GenericsUtil.eliminateWildcards(receiverType));
  final PsiClass receiverClass=resolveResult.getElement();
  if (receiverClass != null && isReceiverType(receiverClass,containingClass)) {
    LOG.assertTrue(containingClass != null);
    return resolveResult.getSubstitutor().equals(psiSubstitutor) || PsiUtil.isRawSubstitutor(containingClass,psiSubstitutor) || PsiUtil.isRawSubstitutor(receiverClass,resolveResult.getSubstitutor());
  }
  return false;
}
