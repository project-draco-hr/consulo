{
  myClass=aClass;
  PsiElement parent=expression.getParent();
  while (parent instanceof PsiParenthesizedExpression) {
    parent=parent.getParent();
  }
  if (parent instanceof PsiExpressionList) {
    final PsiElement gParent=parent.getParent();
    if (gParent instanceof PsiCallExpression) {
      final Map<PsiElement,PsiMethod> map=MethodCandidateInfo.CURRENT_CANDIDATE.get();
      myMethod=map != null ? map.get(parent) : null;
      if (myMethod == null) {
        myMethod=((PsiCallExpression)gParent).resolveMethod();
      }
      if (myMethod != null && PsiTreeUtil.isAncestor(myMethod,expression,false)) {
        myMethod=null;
      }
    }
  }
}
