{
  super.visitReferenceExpression(expression);
  PsiReferenceParameterList parameterList=expression.getParameterList();
  if (parameterList != null && parameterList.getTypeArguments().length > 0) {
    return;
  }
  final PsiExpression qualifierExpression=expression.getQualifierExpression();
  if (qualifierExpression == null) {
    return;
  }
  if (!(qualifierExpression instanceof PsiThisExpression)) {
    return;
  }
  final PsiThisExpression thisExpression=(PsiThisExpression)qualifierExpression;
  if (thisExpression.getQualifier() != null) {
    return;
  }
  if (expression.getParent() instanceof PsiCallExpression) {
    registerError(qualifierExpression);
    return;
  }
  final String varName=expression.getReferenceName();
  if (varName == null) {
    return;
  }
  if (!VariableSearchUtils.existsLocalOrParameter(varName,expression)) {
    registerError(thisExpression);
  }
}
