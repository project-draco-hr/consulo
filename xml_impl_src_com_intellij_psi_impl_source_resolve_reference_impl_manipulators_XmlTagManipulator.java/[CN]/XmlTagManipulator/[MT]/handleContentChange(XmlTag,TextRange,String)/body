{
  final StringBuilder replacement=new StringBuilder(tag.getValue().getText());
  final int valueOffset=tag.getValue().getTextRange().getStartOffset() - tag.getTextOffset();
  replacement.replace(range.getStartOffset() - valueOffset,range.getEndOffset() - valueOffset,newContent);
  tag.getValue().setText(replacement.toString());
  return tag;
}
