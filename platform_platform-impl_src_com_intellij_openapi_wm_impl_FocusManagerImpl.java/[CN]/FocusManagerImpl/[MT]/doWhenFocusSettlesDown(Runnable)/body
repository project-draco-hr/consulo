{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      if (FocusManagerImpl.this.isFlushingIdleRequests()) {
        myIdleRequests.add(runnable);
        return;
      }
      if (myRunContext != null) {
        flushRequest(runnable);
        return;
      }
      final boolean needsRestart=FocusManagerImpl.this.isIdleQueueEmpty();
      if (myIdleRequests.contains(runnable)) {
        myIdleRequests.remove(runnable);
        myIdleRequests.add(runnable);
      }
 else {
        myIdleRequests.add(runnable);
      }
      if (FocusManagerImpl.this.canFlushIdleRequests()) {
        FocusManagerImpl.this.flushIdleRequests();
      }
 else {
        if (needsRestart) {
          FocusManagerImpl.this.restartIdleAlarm();
        }
      }
    }
  }
);
}
