{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      if (isFlushingIdleRequests()) {
        SwingUtilities.invokeLater(this);
        return;
      }
      if (myRunContext != null) {
        flushRequest(runnable);
        return;
      }
      final boolean needsRestart=isIdleQueueEmpty();
      if (myIdleRequests.contains(runnable)) {
        myIdleRequests.remove(runnable);
        myIdleRequests.add(runnable);
      }
 else {
        myIdleRequests.add(runnable);
      }
      if (canFlushIdleRequests()) {
        flushIdleRequests();
      }
 else {
        if (needsRestart) {
          restartIdleAlarm();
        }
      }
    }
  }
);
}
