{
  assertDispatchThread();
  if (cmd == myRequestFocusCmd) {
    myRequestFocusCmd=null;
  }
  final KeyEventProcessor processor=cmd.getProcessor();
  if (processor != null) {
    processor.finish(myKeyProcessorContext);
  }
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      myFocusRequests.remove(cmd);
    }
  }
);
  if (reject) {
    ActionCallback cb=cmd.getCallback();
    if (cb != null && !cb.isProcessed()) {
      cmd.getCallback().setRejected();
    }
  }
}
