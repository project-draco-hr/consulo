{
  int modalDialogs=0;
  Window[] windows=Frame.getWindows();
  for (  Window each : windows) {
    if (each instanceof Dialog) {
      Dialog eachDialog=(Dialog)each;
      if (eachDialog.isModal() && eachDialog.isShowing()) {
        modalDialogs++;
      }
    }
  }
  Iterator<Integer> modalityCounts=myModalityCount2FlushCount.keySet().iterator();
  while (modalityCounts.hasNext()) {
    Integer eachModalityCount=modalityCounts.next();
    if (eachModalityCount > modalDialogs) {
      modalityCounts.remove();
    }
  }
  return modalDialogs;
}
