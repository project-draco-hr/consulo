{
  ChangeListener listener=new ChangeListener(){
    public void stateChanged(    ChangeEvent e){
      myExpandByCombo.setEnabled(!isEnabledInStaticContextOnly());
    }
  }
;
  JPanel panel=new JPanel();
  panel.setBorder(IdeBorderFactory.createTitledBorder(CodeInsightBundle.message("dialog.edit.template.context.title")));
  panel.setLayout(new GridBagLayout());
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.weightx=1;
  gbConstraints.weighty=1;
  final Collection<TemplateContextType> contextTypes=TemplateManagerImpl.getAllContextTypes();
  int row=0;
  int col=0;
  for (  TemplateContextType contextType : contextTypes) {
    gbConstraints.gridy=row;
    gbConstraints.gridx=col;
    JCheckBox cb=new JCheckBox(contextType.getName());
    cb.getModel().addChangeListener(listener);
    panel.add(cb,gbConstraints);
    myCbContextMap.put(contextType,cb);
    if (row == (contextTypes.size() + 1) / 2 - 1) {
      row=0;
      col=1;
    }
 else {
      row++;
    }
  }
  for (  JCheckBox checkBox : myCbContextMap.values()) {
    addUpdateHighlighterAction(checkBox);
  }
  return panel;
}
