{
  ApplicationManager.getApplication().assertIsDispatchThread();
  PsiElement psiElement=infos.get(0).getElement();
  if (psiElement == null)   return;
  PsiFile psiFile=psiElement.getContainingFile();
  if (psiFile == null)   return;
  PsiLanguageInjectionHost host=InjectedLanguageManager.getInstance(myProject).getInjectionHost(psiFile);
  if (host != null) {
    psiFile=host.getContainingFile();
    if (psiFile == null)     return;
  }
  final Document document=PsiDocumentManager.getInstance(psiFile.getProject()).getDocument(psiFile);
  if (document == null)   return;
  if (myEditor == null || document != myEditor.getDocument()) {
    releaseEditor();
    removeAll();
    myEditor=createEditor(psiFile,document);
    if (myEditor == null)     return;
    myEditor.setBorder(null);
    add(myEditor.getComponent(),BorderLayout.CENTER);
    revalidate();
  }
  final Editor editor=myEditor;
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      if (myProject.isDisposed())       return;
      highlight(infos,editor);
    }
  }
);
}
