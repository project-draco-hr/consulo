{
  final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(aClass.getContainingFile().getContainingDirectory());
  if (aPackage != null) {
    ((GroovyPsiElement)aClass).accept(new GroovyRecursiveElementVisitor(){
      @Override public void visitReferenceExpression(      GrReferenceExpression reference){
        if (reference.isQualified() && reference.isReferenceTo(aClass)) {
          final PsiElement qualifier=reference.getQualifier();
          if (qualifier instanceof PsiJavaCodeReferenceElement && ((PsiJavaCodeReferenceElement)qualifier).isReferenceTo(aPackage)) {
            try {
              ((PsiJavaCodeReferenceElement)qualifier).bindToElement(newContainingPackage);
            }
 catch (            IncorrectOperationException e) {
            }
          }
        }
        super.visitReferenceExpression(reference);
      }
    }
);
  }
}
