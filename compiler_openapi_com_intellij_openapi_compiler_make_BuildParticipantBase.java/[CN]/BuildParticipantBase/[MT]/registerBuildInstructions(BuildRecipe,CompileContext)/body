{
  final ConfigFile[] deploymentDescriptors=getDeploymentDescriptors();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      for (      ConfigFile descriptor : deploymentDescriptors) {
        VirtualFile virtualFile=descriptor.getVirtualFile();
        if (virtualFile != null) {
          final File file=VfsUtil.virtualToIoFile(virtualFile);
          instructions.addFileCopyInstruction(file,false,myModule,descriptor.getMetaData().getDirectoryPath() + "/" + virtualFile.getName(),null);
        }
      }
      final CustomConfigFile[] customDescriptors=getCustomDescriptors();
      for (      CustomConfigFile descriptor : customDescriptors) {
        final String url=descriptor.getUrl();
        final VirtualFile virtualFile=VirtualFileManager.getInstance().findFileByUrl(url);
        if (virtualFile != null) {
          File file=VfsUtil.virtualToIoFile(virtualFile);
          instructions.addFileCopyInstruction(file,false,myModule,descriptor.getOutputDirectoryPath() + "/" + virtualFile.getName(),null);
        }
      }
    }
  }
);
}
