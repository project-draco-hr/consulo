{
  Presentation p=event.getPresentation();
  if (TestFinderHelper.getFinders().length == 0) {
    p.setVisible(false);
    return;
  }
  p.setEnabled(false);
  Project project=event.getData(CommonDataKeys.PROJECT);
  Editor editor=event.getData(PlatformDataKeys.EDITOR);
  if (editor == null || project == null)   return;
  PsiFile psiFile=PsiUtilBase.getPsiFileInEditor(editor,project);
  if (psiFile == null)   return;
  PsiElement element=GotoTestOrCodeHandler.getSelectedElement(editor,psiFile);
  if (TestFinderHelper.findSourceElement(element) == null)   return;
  p.setEnabled(true);
  if (TestFinderHelper.isTest(element)) {
    p.setText(ActionsBundle.message("action.GotoTestSubject.text"));
    p.setDescription(ActionsBundle.message("action.GotoTestSubject.description"));
  }
 else {
    p.setText(ActionsBundle.message("action.GotoTest.text"));
    p.setDescription(ActionsBundle.message("action.GotoTest.description"));
  }
}
