{
  GraphicsConfiguration targetGraphicsConfiguration=null;
  GraphicsEnvironment env=GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice[] devices=env.getScreenDevices();
  int minDistance;
  GraphicsConfiguration minDsitanceConfig;
  for (int i=0; i < devices.length; i++) {
    GraphicsDevice eachDevice=devices[i];
    GraphicsConfiguration eachConfig=eachDevice.getDefaultConfiguration();
    Rectangle eachRec=eachConfig.getBounds();
    Insets insets=Toolkit.getDefaultToolkit().getScreenInsets(eachConfig);
    if (insets != null) {
      eachRec.x-=insets.left;
      eachRec.width+=(insets.left + insets.right);
      eachRec.y-=insets.top;
      eachRec.height+=(insets.top + insets.bottom);
    }
    if (eachRec.x <= x && x < eachRec.x + eachRec.width && eachRec.y <= y && y < eachRec.y + eachRec.height) {
      targetGraphicsConfiguration=eachConfig;
      break;
    }
  }
  if (targetGraphicsConfiguration == null && devices.length > 0) {
    targetGraphicsConfiguration=env.getDefaultScreenDevice().getDefaultConfiguration();
  }
  if (targetGraphicsConfiguration == null) {
    throw new IllegalStateException("It's impossible to determine target graphics environment for point (" + x + ","+ y+ ")");
  }
  Insets insets=Toolkit.getDefaultToolkit().getScreenInsets(targetGraphicsConfiguration);
  Rectangle targetRectangle=targetGraphicsConfiguration.getBounds();
  targetRectangle.x+=insets.left;
  targetRectangle.y+=insets.top;
  targetRectangle.width-=insets.left + insets.right;
  targetRectangle.height-=insets.top + insets.bottom;
  return targetRectangle;
}
