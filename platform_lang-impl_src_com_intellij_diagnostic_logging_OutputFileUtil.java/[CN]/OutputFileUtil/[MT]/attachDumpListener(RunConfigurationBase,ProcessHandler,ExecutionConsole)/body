{
  if (base.isSaveOutputToFile()) {
    final String outputFilePath=base.getOutputFilePath();
    if (outputFilePath != null) {
      final String filePath=FileUtil.toSystemDependentName(outputFilePath);
      startedProcess.addProcessListener(new ProcessAdapter(){
        private PrintStream myOutput;
        @Override public void onTextAvailable(        ProcessEvent event,        Key outputType){
          if (base.collectOutputFromProcessHandler() && myOutput != null && outputType != ProcessOutputTypes.SYSTEM) {
            myOutput.print(event.getText());
          }
        }
        @Override public void startNotified(        ProcessEvent event){
          try {
            myOutput=new PrintStream(new FileOutputStream(new File(filePath)));
          }
 catch (          FileNotFoundException ignored) {
          }
          startedProcess.notifyTextAvailable(CONSOLE_OUTPUT_FILE_MESSAGE + filePath + "\n",ProcessOutputTypes.SYSTEM);
        }
        @Override public void processTerminated(        ProcessEvent event){
          startedProcess.removeProcessListener(this);
          if (myOutput != null) {
            myOutput.close();
          }
        }
      }
);
      if (console instanceof ConsoleView) {
        ((ConsoleView)console).addMessageFilter(new ShowOutputFileFilter());
      }
    }
  }
}
