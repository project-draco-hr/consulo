{
  if (refExpr != null) {
    PsiElement def;
    if (refExpr instanceof PsiReferenceExpression && PsiUtil.isAccessedForWriting((PsiExpression)refExpr)) {
      def=refExpr;
    }
 else {
      final PsiElement[] defs=DefUseUtil.getDefs(block,local,refExpr);
      if (defs.length == 1) {
        def=defs[0];
      }
 else {
        return null;
      }
    }
    if (def instanceof PsiReferenceExpression && def.getParent() instanceof PsiAssignmentExpression) {
      final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)def.getParent();
      if (assignmentExpression.getOperationTokenType() != JavaTokenType.EQ)       return null;
      final PsiExpression rExpr=assignmentExpression.getRExpression();
      if (rExpr != null)       return rExpr;
    }
  }
  return local.getInitializer();
}
