{
  for (  T scheme : schemes) {
    if (isExternalizable(scheme)) {
      E eScheme=(E)scheme;
      eScheme.getExternalInfo().setPreviouslySavedName(eScheme.getName());
      if (myProcessor.shouldBeSaved(eScheme)) {
        final File file=getFileForScheme(myBaseDir,fileNameProvider,eScheme);
        try {
          final Document document=writeSchemeToDocument(eScheme);
          long newHash=computeHashValue(document);
          Long oldHash=eScheme.getExternalInfo().getHash();
          saveIfNeeded(eScheme,file,document,newHash,oldHash);
        }
 catch (        IOException e) {
          LOG.debug(e);
          myProcessor.showWriteErrorMessage(e,scheme.getName(),file.getPath());
        }
      }
    }
  }
}
