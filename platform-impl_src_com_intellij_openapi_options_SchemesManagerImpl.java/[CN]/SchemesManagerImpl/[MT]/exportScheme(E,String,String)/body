{
  final StreamProvider[] providers=((ApplicationImpl)ApplicationManager.getApplication()).getStateStore().getStateStorageManager().getStreamProviders(RoamingType.GLOBAL);
  if (providers != null) {
    Document document=myProcessor.writeScheme(scheme);
    if (document != null) {
      Document wrapped=wrap(document,name,description);
      for (      StreamProvider provider : providers) {
        if (provider instanceof CurrentUserHolder) {
          wrapped=(Document)wrapped.clone();
          wrapped.getRootElement().setAttribute(USER,((CurrentUserHolder)provider).getCurrentUserName());
        }
        try {
          provider.saveContent(getFileFullPath(UniqueFileNamesProvider.convertName(scheme.getName())) + EXT,wrapped,RoamingType.GLOBAL);
        }
 catch (        IOException e) {
          LOG.debug(e);
        }
      }
    }
  }
}
