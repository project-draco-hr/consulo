{
  for (  T scheme : schemes) {
    mySchemeToName.put(scheme,scheme.getName());
    if (myProcessor.shouldBeSaved(scheme)) {
      String schemeKey=scheme.getName();
      final File file=getFileForScheme(myBaseDir,fileNameProvider,scheme);
      try {
        final Document document=writeSchemeToDocument(scheme);
        long newHash=computeHashValue(document);
        Long oldHash=mySchemeNameToHashValue.get(schemeKey);
        saveIfNeeded(providers,schemeKey,file,document,newHash,oldHash);
      }
 catch (      IOException e) {
        LOG.debug(e);
        myProcessor.showWriteErrorMessage(e,scheme.getName(),file.getPath());
      }
    }
  }
}
