{
  Collection<E> result=new ArrayList<E>();
  for (  StreamProvider provider : getEnabledProviders()) {
    String[] paths=provider.listSubFiles(myFileSpec);
    for (    String subpath : paths) {
      if (!subpath.equals(DELETED_XML)) {
        try {
          final Document subDocument=provider.loadDocument(getFileFullPath(subpath),myRoamingType);
          if (subDocument != null) {
            checkFileNameIsFree(subpath);
            final File file=new File(myBaseDir,subpath);
            byte[] text=JDOMUtil.writeDocument(subDocument,"\n").getBytes();
            if (needsSave(file,text)) {
              FileUtil.writeToFile(file,text);
            }
            E scheme=readScheme(subDocument);
            if (scheme != null) {
              loadScheme(file,scheme);
              result.add(scheme);
            }
          }
        }
 catch (        Exception e) {
          LOG.info("Cannot load data from IDEAServer: " + e.getLocalizedMessage());
        }
      }
    }
  }
  return result;
}
