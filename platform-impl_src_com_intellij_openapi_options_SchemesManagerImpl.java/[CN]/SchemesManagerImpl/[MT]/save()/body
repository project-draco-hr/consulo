{
  if (myRefreshAlarm != null) {
    myRefreshAlarm.cancelAllRequests();
    myRefreshAlarm=null;
  }
  if (myVFSBaseDir == null) {
    ensureVFSBaseDir();
  }
  if (myVFSBaseDir != null) {
    final WriteExternalException[] ex=new WriteExternalException[1];
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        try {
          doSave();
        }
 catch (        WriteExternalException e) {
          ex[0]=e;
        }
      }
    }
);
    if (ex[0] != null)     throw ex[0];
  }
}
