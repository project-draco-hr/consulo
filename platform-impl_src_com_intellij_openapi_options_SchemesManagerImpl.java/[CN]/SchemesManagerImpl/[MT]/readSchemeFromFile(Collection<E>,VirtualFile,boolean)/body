{
  final String name=file.getName();
  if (!file.isDirectory() && StringUtil.endsWithIgnoreCase(name,EXT)) {
    try {
      final Document document;
      try {
        document=JDOMUtil.loadDocument(file.getInputStream());
      }
 catch (      JDOMException e) {
        try {
          file.copy(this,file.getParent(),file.getName() + ".copy");
        }
 catch (        IOException e1) {
          LOG.info(e1);
        }
        LOG.info("Error reading file " + file.getPath() + ": "+ e.getLocalizedMessage());
        throw e;
      }
      final E scheme=readScheme(document);
      if (scheme != null) {
        if (scheme.getName() == null) {
          scheme.setName(FileUtil.getNameWithoutExtension(file.getName()));
        }
        loadScheme(file,scheme,forceAdd);
        result.add(scheme);
      }
    }
 catch (    final Exception e) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          String msg="Cannot read scheme " + file.getName() + "  from '"+ myFileSpec+ "': "+ e.getLocalizedMessage();
          LOG.info(msg,e);
          Messages.showErrorDialog(msg,"Load Settings");
        }
      }
);
    }
  }
}
