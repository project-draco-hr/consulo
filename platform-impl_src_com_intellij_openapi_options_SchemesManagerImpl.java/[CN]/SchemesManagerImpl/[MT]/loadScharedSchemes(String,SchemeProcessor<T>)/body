{
  final StreamProvider[] providers=((ApplicationImpl)ApplicationManager.getApplication()).getStateStore().getStateStorageManager().getStreamProviders(RoamingType.GLOBAL);
  final HashMap<String,T> result=new HashMap<String,T>();
  if (providers != null) {
    for (    StreamProvider provider : providers) {
      String[] paths=provider.listSubFiles(dirSpec);
      for (      String subpath : paths) {
        try {
          final Document subDocument=provider.loadDocument(dirSpec + "/" + subpath,RoamingType.GLOBAL);
          if (subDocument != null) {
            final T scheme=schemeProcessor.readScheme(subDocument,null);
            final String schemeName=scheme.getName();
            result.put(schemeName,scheme);
          }
        }
 catch (        Exception e) {
          LOG.info("Cannot load data from IDEAServer: " + e.getLocalizedMessage());
        }
      }
    }
  }
  return result.values();
}
