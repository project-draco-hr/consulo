{
  Collection<String> names=new HashSet<String>(currentSchemeNameList);
  final StreamProvider[] providers=((ApplicationImpl)ApplicationManager.getApplication()).getStateStore().getStateStorageManager().getStreamProviders(RoamingType.GLOBAL);
  final HashMap<String,T> result=new HashMap<String,T>();
  if (providers != null) {
    for (    StreamProvider provider : providers) {
      String[] paths=provider.listSubFiles(myFileSpec);
      for (      String subpath : paths) {
        try {
          final Document subDocument=provider.loadDocument(getFileFullPath(subpath),RoamingType.GLOBAL);
          if (subDocument != null) {
            final T scheme=myProcessor.readScheme(subDocument);
            String schemeName=scheme.getName();
            String uniqueName=UniqueNameGenerator.generateUniqueName("[shared] " + schemeName,"","",names);
            if (!uniqueName.equals(schemeName)) {
              renameScheme(scheme,uniqueName);
              schemeName=uniqueName;
            }
            mySharedSchemeToOriginalPath.put(schemeName,getFileFullPath(subpath));
            result.put(schemeName,scheme);
          }
        }
 catch (        Exception e) {
          LOG.info("Cannot load data from IDEAServer: " + e.getLocalizedMessage());
        }
      }
    }
  }
  for (  T t : result.values()) {
    myProcessor.initScheme(t);
  }
  return result.values();
}
