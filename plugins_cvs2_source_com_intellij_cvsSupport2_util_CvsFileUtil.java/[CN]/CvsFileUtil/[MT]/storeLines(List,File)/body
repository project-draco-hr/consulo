{
  String separator=getLineSeparatorFor(file);
  if (!file.exists())   file.createNewFile();
  Writer writer;
  if (!file.exists()) {
    file.createNewFile();
  }
  if (!file.canWrite()) {
    new FileReadOnlyHandler().setFileReadOnly(file,false);
  }
  writer=new OutputStreamWriter(new BufferedOutputStream(new FileOutputStream(file)),CvsApplicationLevelConfiguration.getCharset());
  try {
    for (Iterator each=lines.iterator(); each.hasNext(); ) {
      String line=(String)each.next();
      writer.write(line);
      writer.write(separator);
    }
  }
  finally {
    writer.close();
  }
}
