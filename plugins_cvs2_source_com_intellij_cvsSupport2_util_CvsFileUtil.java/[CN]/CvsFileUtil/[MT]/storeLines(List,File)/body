{
  String separator=getLineSeparatorFor(file);
  if (!file.exists())   file.createNewFile();
  PrintStream writer;
  if (!file.exists()) {
    file.createNewFile();
  }
  if (!file.canWrite()) {
    new FileReadOnlyHandler().setFileReadOnly(file,false);
  }
  writer=new PrintStream(new BufferedOutputStream(new FileOutputStream(file)));
  try {
    for (Iterator each=lines.iterator(); each.hasNext(); ) {
      String line=(String)each.next();
      writer.print(line);
      writer.print(separator);
    }
  }
  finally {
    writer.close();
  }
}
