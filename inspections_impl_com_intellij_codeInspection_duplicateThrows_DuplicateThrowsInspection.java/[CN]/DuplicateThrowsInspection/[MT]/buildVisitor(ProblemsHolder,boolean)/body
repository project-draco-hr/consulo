{
  return new PsiElementVisitor(){
    public void visitReferenceExpression(    PsiReferenceExpression expression){
    }
    public void visitMethod(    PsiMethod method){
      PsiReferenceList throwsList=method.getThrowsList();
      PsiJavaCodeReferenceElement[] refs=throwsList.getReferenceElements();
      PsiClassType[] types=throwsList.getReferencedTypes();
      outer:       for (int i=0; i < types.length; i++) {
        PsiClassType type=types[i];
        for (int j=0; j < types.length; j++) {
          PsiClassType otherType=types[j];
          if (i == j)           continue;
          String problem=null;
          if (type.equals(otherType)) {
            problem=InspectionsBundle.message("inspection.duplicate.throws.problem");
          }
 else           if (otherType.isAssignableFrom(type)) {
            problem=InspectionsBundle.message("inspection.duplicate.throws.more.general.problem",otherType.getCanonicalText());
          }
          if (problem != null) {
            holder.registerProblem(refs[i],problem,ProblemHighlightType.LIKE_UNUSED_SYMBOL,new DeleteThrowsFix(method,type));
            break outer;
          }
        }
      }
    }
  }
;
}
