{
  List<LineFragment> fragments=new ArrayList<LineFragment>();
  for (  Range ch : changes.iterateChanges()) {
    IntPair offsets1=getOffsets(lines1,ch.start1,ch.end1);
    IntPair offsets2=getOffsets(lines2,ch.start2,ch.end2);
    fragments.add(new LineFragmentImpl(ch.start1,ch.end1,ch.start2,ch.end2,offsets1.val1,offsets1.val2,offsets2.val1,offsets2.val2));
  }
  return fragments;
}
