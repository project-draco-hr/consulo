{
  final PsiClass psiClass=buildClass();
  if (psiClass == null)   return;
  if (delegationRequired) {
    buildDelegate();
  }
  final Set<PsiMember> members=new HashSet<PsiMember>();
  for (  PsiMethod method : methods) {
    final PsiMethod member=psiClass.findMethodBySignature(method,false);
    if (member != null) {
      members.add(member);
    }
  }
  for (  PsiField field : fields) {
    final PsiField member=psiClass.findFieldByName(field.getName(),false);
    if (member != null) {
      members.add(member);
    }
  }
  super.performRefactoring(usageInfos);
  if (myNewVisibility == null)   return;
  for (  PsiMember member : members) {
    VisibilityUtil.fixVisibility(usageInfos,member,myNewVisibility);
  }
}
