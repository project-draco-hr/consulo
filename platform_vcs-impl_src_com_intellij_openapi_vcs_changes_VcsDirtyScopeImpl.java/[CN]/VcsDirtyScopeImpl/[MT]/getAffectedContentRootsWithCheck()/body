{
  if (myVcs.allowsNestedRoots()) {
    final ProjectLevelVcsManager vcsManager=ProjectLevelVcsManager.getInstance(myVcs.getProject());
    final VirtualFile[] roots=vcsManager.getRootsUnderVcs(myVcs);
    final List<VirtualFile> asList=Arrays.asList(roots);
    final Set<VirtualFile> result=new HashSet<VirtualFile>();
    for (    VirtualFile root : myAffectedContentRoots) {
      result.addAll(ProjectLevelVcsManagerImpl.getRootsUnder(asList,root));
    }
    return new SmartList<VirtualFile>(result);
  }
  return myAffectedContentRoots;
}
