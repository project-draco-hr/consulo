{
  VirtualFile vcsRoot=ApplicationManager.getApplication().runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      return myVcsManager.getVcsRootFor(dir);
    }
  }
);
  if (vcsRoot != null) {
    perRoot.putValue(vcsRoot,new FileOrDir(dir,recursively));
  }
}
