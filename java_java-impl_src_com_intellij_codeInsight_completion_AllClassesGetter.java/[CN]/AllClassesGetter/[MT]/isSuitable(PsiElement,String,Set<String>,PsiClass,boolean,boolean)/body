{
  ProgressManager.checkCanceled();
  if (!context.isValid() || !psiClass.isValid())   return false;
  if (JavaCompletionUtil.isInExcludedPackage(psiClass,false))   return false;
  final String qualifiedName=psiClass.getQualifiedName();
  if (qualifiedName == null || !qualifiedName.startsWith(packagePrefix))   return false;
  if (qnames.contains(qualifiedName))   return false;
  if (!filterByScope && !(psiClass instanceof PsiCompiledElement))   return true;
  return JavaCompletionUtil.isSourceLevelAccessible(context,psiClass,pkgContext);
}
