{
  final String fileText=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
    public String compute(){
      ProgressManager.checkCanceled();
      return context.getContainingFile().getText();
    }
  }
);
  int i=offset - 1;
  while (i >= 0) {
    final char c=fileText.charAt(i);
    if (!Character.isJavaIdentifierPart(c) && c != '.')     break;
    i--;
  }
  String prefix=fileText.substring(i + 1,offset);
  final int j=prefix.lastIndexOf('.');
  return j > 0 ? prefix.substring(0,j) : "";
}
