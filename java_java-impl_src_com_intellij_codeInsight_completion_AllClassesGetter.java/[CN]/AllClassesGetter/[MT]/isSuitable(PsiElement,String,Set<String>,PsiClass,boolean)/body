{
  ProgressManager.checkCanceled();
  if (!context.isValid() || !psiClass.isValid())   return false;
  if (JavaCompletionUtil.isInExcludedPackage(psiClass))   return false;
  final String qualifiedName=psiClass.getQualifiedName();
  if (qualifiedName == null || !qualifiedName.startsWith(packagePrefix))   return false;
  if (!(psiClass instanceof PsiCompiledElement) || !filterByScope || JavaPsiFacade.getInstance(psiClass.getProject()).getResolveHelper().isAccessible(psiClass,context,psiClass)) {
    return qnames.add(qualifiedName);
  }
  return false;
}
