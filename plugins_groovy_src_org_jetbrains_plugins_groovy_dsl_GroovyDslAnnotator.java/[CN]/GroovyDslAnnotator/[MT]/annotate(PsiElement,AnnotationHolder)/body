{
  if (psiElement instanceof GroovyFile) {
    final VirtualFile vfile=((GroovyFile)psiElement).getVirtualFile();
    if (vfile != null && "gdsl".equals(vfile.getExtension()) && (!GroovyDslFileIndex.isActivated(vfile) || FileDocumentManager.getInstance().isFileModified(vfile))) {
      final String reason=GroovyDslFileIndex.getInactivityReason(vfile);
      final String message;
      boolean modified=reason == null || GroovyDslFileIndex.MODIFIED.equals(reason);
      if (modified) {
        message="DSL descriptor file has been changed and isn't currently executed.";
      }
 else {
        message="DSL descriptor file has been disabled due to a processing error.";
      }
      final Annotation annotation=holder.createWarningAnnotation(psiElement,message);
      annotation.setFileLevelAnnotation(true);
      if (!modified) {
        annotation.registerFix(new InvestigateFix(reason));
      }
      annotation.registerFix(new ActivateFix(vfile));
    }
  }
}
