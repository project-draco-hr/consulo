{
  if (psiElement instanceof GroovyFile) {
    final VirtualFile vfile=((GroovyFile)psiElement).getVirtualFile();
    Document document=((GroovyFile)psiElement).getViewProvider().getDocument();
    if (vfile != null && "gdsl".equals(vfile.getExtension()) && (!GroovyDslFileIndex.isActivated(vfile) || document != null && FileDocumentManager.getInstance().isDocumentUnsaved(document))) {
      final Annotation annotation=holder.createWarningAnnotation(psiElement,"DSL descriptor file has been changed and isn't currently executed. Click to activate it back.");
      annotation.setFileLevelAnnotation(true);
      annotation.registerFix(new IntentionAction(){
        @NotNull public String getText(){
          return "Activate";
        }
        @NotNull public String getFamilyName(){
          return "Activate DSL descriptor";
        }
        public boolean isAvailable(        @NotNull Project project,        Editor editor,        PsiFile file){
          return true;
        }
        public void invoke(        @NotNull Project project,        Editor editor,        PsiFile file) throws IncorrectOperationException {
          FileDocumentManager.getInstance().saveAllDocuments();
          GroovyDslFileIndex.activateUntilModification(vfile);
          DaemonCodeAnalyzer.getInstance(project).restart();
        }
        public boolean startInWriteAction(){
          return false;
        }
      }
);
    }
  }
}
