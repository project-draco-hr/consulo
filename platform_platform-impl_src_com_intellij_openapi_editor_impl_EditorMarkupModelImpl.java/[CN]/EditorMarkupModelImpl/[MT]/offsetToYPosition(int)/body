{
  int lineNumber=offsetToLine(offset);
  if (myEditorScrollbarTop == -1 || myEditorTargetHeight == -1) {
    recalcEditorDimensions();
  }
  if (myEditorSourceHeight < myEditorTargetHeight) {
    return myEditorScrollbarTop + lineNumber * myEditor.getLineHeight();
  }
 else {
    final int lineCount=myEditorSourceHeight / myEditor.getLineHeight();
    return myEditorScrollbarTop + (int)((float)lineNumber / lineCount * myEditorTargetHeight);
  }
}
