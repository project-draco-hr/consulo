{
  super.setUp();
  final File testRoot=new File(PluginPathManager.getPluginHomePath("eclipse") + "/testData",getRelativeTestPath());
  assertTrue(testRoot.getAbsolutePath(),testRoot.isDirectory());
  final File currentTestRoot=new File(testRoot,getTestName(true));
  assertTrue(currentTestRoot.getAbsolutePath(),currentTestRoot.isDirectory());
  final String tempPath=getProject().getBaseDir().getPath();
  final File tempDir=new File(tempPath);
  FileUtil.copyDir(currentTestRoot,tempDir);
  final VirtualFile virtualTestDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(tempDir);
  assertNotNull(tempDir.getAbsolutePath(),virtualTestDir);
  virtualTestDir.refresh(false,true);
  PathMacros.getInstance().setMacro(VARIABLE,new File(tempPath,VARIABLE + "idea").getPath());
  PathMacros.getInstance().setMacro(SRCVARIABLE,new File(tempPath,SRCVARIABLE + "idea").getPath());
}
