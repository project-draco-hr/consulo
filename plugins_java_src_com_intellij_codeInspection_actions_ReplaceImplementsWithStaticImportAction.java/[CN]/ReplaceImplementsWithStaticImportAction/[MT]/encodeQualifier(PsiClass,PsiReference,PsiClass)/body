{
  if (reference instanceof PsiReferenceExpression) {
    final PsiElement qualifier=((PsiReferenceExpression)reference).getQualifier();
    if (qualifier != null) {
      if (qualifier instanceof PsiReferenceExpression) {
        final PsiElement resolved=((PsiReferenceExpression)qualifier).resolve();
        if (resolved == containingClass || resolved instanceof PsiClass && InheritanceUtil.isInheritorOrSelf(targetClass,(PsiClass)resolved,true)) {
          return true;
        }
      }
      qualifier.putCopyableUserData(ChangeContextUtil.CAN_REMOVE_QUALIFIER_KEY,ChangeContextUtil.canRemoveQualifier((PsiReferenceExpression)reference));
    }
  }
  return false;
}
