{
  if (CompilerPaths.getRebuildMarkerFile(compileContext.getProject()).exists()) {
    compileContext.requestRebuildNextTime("Compiler caches are out of date, project rebuild is required");
    return;
  }
  final CompileStatus compileStatus=readStatus();
  if (compileStatus == null) {
    compileContext.requestRebuildNextTime(CompilerBundle.message("error.compiler.caches.corrupted"));
  }
 else   if (compileStatus.CACHE_FORMAT_VERSION != -1 && compileStatus.CACHE_FORMAT_VERSION != DEPENDENCY_FORMAT_VERSION) {
    compileContext.requestRebuildNextTime(CompilerBundle.message("error.caches.old.format"));
  }
 else   if (compileStatus.COMPILATION_IN_PROGRESS) {
    compileContext.requestRebuildNextTime(CompilerBundle.message("error.previous.compilation.failed"));
  }
 else   if (compileStatus.VFS_CREATION_STAMP >= 0L) {
    if (currentVFSTimestamp != compileStatus.VFS_CREATION_STAMP) {
      compileContext.requestRebuildNextTime(CompilerBundle.message("error.vfs.was.rebuilt"));
    }
  }
}
