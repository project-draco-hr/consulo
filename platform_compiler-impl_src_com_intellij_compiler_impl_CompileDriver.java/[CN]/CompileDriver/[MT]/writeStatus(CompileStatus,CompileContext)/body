{
  final File statusFile=new File(myCachesDirectoryPath,VERSION_FILE_NAME);
  final File lockFile=getLockFile();
  try {
    FileUtil.createIfDoesntExist(statusFile);
    DataOutputStream out=new DataOutputStream(new FileOutputStream(statusFile));
    try {
      out.writeInt(status.CACHE_FORMAT_VERSION);
      out.writeLong(status.VFS_CREATION_STAMP);
    }
  finally {
      out.close();
    }
    if (status.COMPILATION_IN_PROGRESS) {
      FileUtil.createIfDoesntExist(lockFile);
    }
 else {
      deleteFile(lockFile);
    }
  }
 catch (  IOException e) {
    context.addMessage(CompilerMessageCategory.ERROR,CompilerBundle.message("compiler.error.exception",e.getMessage()),null,-1,-1);
  }
}
