{
  IElementType tokenType=iterator.getTokenType();
  PairedBraceMatcher matcher=LanguageBraceMatching.INSTANCE.forLanguage(tokenType.getLanguage());
  if (matcher != null) {
    BracePair[] pairs=matcher.getPairs();
    for (    BracePair pair : pairs) {
      if ((pair.getLeftBraceType() == tokenType || pair.getRightBraceType() == tokenType) && pair.isStructural())       return true;
    }
  }
  if (fileType == StdFileTypes.JAVA) {
    return tokenType == JavaTokenType.RBRACE || tokenType == JavaTokenType.LBRACE;
  }
 else   if (fileType == StdFileTypes.HTML || fileType == StdFileTypes.XML || fileType == StdFileTypes.XHTML) {
    return tokenType == XmlTokenType.XML_START_TAG_START || tokenType == XmlTokenType.XML_TAG_END || tokenType == XmlTokenType.XML_EMPTY_ELEMENT_END || (tokenType == XmlTokenType.XML_TAG_END && (fileType == StdFileTypes.HTML || fileType == StdFileTypes.JSP) && isEndOfSingleHtmlTag(text,iterator));
  }
 else {
    return (fileType == StdFileTypes.JSP || fileType == StdFileTypes.JSPX) && isJspJspxStructuralBrace(tokenType);
  }
}
