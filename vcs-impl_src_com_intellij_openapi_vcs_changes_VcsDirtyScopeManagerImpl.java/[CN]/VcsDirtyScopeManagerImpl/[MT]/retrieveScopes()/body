{
  final Ref<DirtBuilder> dirtCopyRef=new Ref<DirtBuilder>();
  final boolean done=myLife.doIfAlive(new Runnable(){
    public void run(){
      dirtCopyRef.set(new DirtBuilder(myDirtBuilder));
      myDirtBuilder.reset();
    }
  }
);
  if (done && (!dirtCopyRef.isNull())) {
    return ApplicationManager.getApplication().runReadAction(new Computable<VcsInvalidated>(){
      public VcsInvalidated compute(){
        final Scopes scopes=new Scopes(myProject,myGuess);
        scopes.takeDirt(dirtCopyRef.get());
        return scopes.retrieveAndClear();
      }
    }
);
  }
  return null;
}
