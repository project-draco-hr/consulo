{
  boolean somethingDirty=false;
  if (filesDirty != null) {
    for (    FilePath file : filesDirty) {
      final AbstractVcs vcs=getVcsForDirty(file);
      if (vcs != null) {
        somethingDirty=true;
        getScope(vcs).addDirtyFile(file);
      }
    }
  }
  if (dirsRecursivelyDirty != null) {
    for (    FilePath dir : dirsRecursivelyDirty) {
      AbstractVcs vcs=getVcsForDirty(dir);
      if (vcs != null) {
        somethingDirty=true;
        getScope(vcs).addDirtyDirRecursively(dir);
      }
    }
  }
  if (somethingDirty) {
    myChangeListManager.scheduleUpdate();
  }
}
