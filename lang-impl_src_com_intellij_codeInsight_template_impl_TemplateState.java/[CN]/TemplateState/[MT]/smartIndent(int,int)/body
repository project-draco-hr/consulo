{
  int startLineNum=myDocument.getLineNumber(startOffset);
  int endLineNum=myDocument.getLineNumber(endOffset);
  if (endLineNum == startLineNum) {
    return;
  }
  int indentLineNum=startLineNum;
  int lineLength=0;
  for (; indentLineNum >= 0; indentLineNum--) {
    lineLength=myDocument.getLineEndOffset(indentLineNum) - myDocument.getLineStartOffset(indentLineNum);
    if (lineLength > 0) {
      break;
    }
  }
  if (indentLineNum < 0) {
    return;
  }
  StringBuilder buffer=new StringBuilder();
  CharSequence text=myDocument.getCharsSequence();
  for (int i=0; i < lineLength; i++) {
    char ch=text.charAt(myDocument.getLineStartOffset(indentLineNum) + i);
    if (ch != ' ' && ch != '\t') {
      break;
    }
    buffer.append(ch);
  }
  if (buffer.length() == 0) {
    return;
  }
  String stringToInsert=buffer.toString();
  for (int i=startLineNum + 1; i <= endLineNum; i++) {
    myDocument.insertString(myDocument.getLineStartOffset(i),stringToInsert);
  }
}
