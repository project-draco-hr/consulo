{
  if (processor instanceof CompletionProcessor) {
    final Map<CustomizableReferenceProvider.CustomizationKey,Object> options=getOptions();
    if (options != null && (JavaClassReferenceProvider.EXTEND_CLASS_NAMES.getValue(options) != null || JavaClassReferenceProvider.NOT_INTERFACE.getBooleanValue(options) || JavaClassReferenceProvider.CONCRETE.getBooleanValue(options))) {
      ((CompletionProcessor)processor).setCompletionElements(getVariants());
      return;
    }
  }
  PsiScopeProcessor processorToUse=processor;
  if (myInStaticImport) {
    processor.handleEvent(PsiScopeProcessor.Event.CHANGE_LEVEL,null);
  }
 else {
    if (isStaticClassReference()) {
      processor.handleEvent(PsiScopeProcessor.Event.START_STATIC,null);
    }
    processorToUse=new PsiScopeProcessor(){
      public boolean execute(      PsiElement element,      PsiSubstitutor substitutor){
        return !(element instanceof PsiClass || element instanceof PsiPackage) || processor.execute(element,substitutor);
      }
      public <V>V getHint(      Class<V> hintClass){
        return processor.getHint(hintClass);
      }
      public void handleEvent(      Event event,      Object associated){
        processor.handleEvent(event,associated);
      }
    }
;
  }
  super.processVariants(processorToUse);
}
