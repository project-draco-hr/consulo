{
  final List<LocalQuickFix> list=OrderEntryFix.registerFixes(new QuickFixActionRegistrarImpl(info),this);
  final String[] extendClasses=JavaClassReferenceProvider.EXTEND_CLASS_NAMES.getValue(getOptions());
  final String extendClass=extendClasses != null && extendClasses.length > 0 ? extendClasses[0] : null;
  final PsiReference contextReference=getContextReference();
  PsiElement context=contextReference != null ? contextReference.resolve() : null;
  if (context != null || contextReference == null) {
    boolean createJavaClass=!canReferencePackage();
    final List<PsiDirectory> writableDirectoryList=getWritableDirectoryList(context);
    if (!writableDirectoryList.isEmpty() && checkCreateClassOrPackage(writableDirectoryList,createJavaClass)) {
      final Pair<String,ClassKind> pair=JavaClassReferenceProvider.CLASS_TEMPLATE.getValue(getOptions());
      final ClassKind kind=createJavaClass ? pair != null ? pair.second : ClassKind.CLASS : null;
      final CreateClassOrPackageFix action=new CreateClassOrPackageFix(writableDirectoryList,this,kind,extendClass,pair == null ? null : pair.first);
      QuickFixAction.registerQuickFixAction(info,action);
      if (list == null) {
        return Arrays.asList(action);
      }
 else {
        final ArrayList<LocalQuickFix> fixes=new ArrayList<LocalQuickFix>(list.size() + 1);
        fixes.addAll(list);
        fixes.add(action);
        return fixes;
      }
    }
  }
  return list;
}
