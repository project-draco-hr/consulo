{
  if (file.isDirectory()) {
    final VirtualFile[] files=file.getChildren();
    for (    VirtualFile child : files) {
      collectItems(child,facet,context,items);
    }
  }
 else   if (StdFileTypes.CLASS.equals(file.getFileType())) {
    final VirtualFile sourceFile=((CompileContextEx)context).getSourceFileByOutputFile(file);
    if (sourceFile != null && facet.shouldRunEnhancerFor(sourceFile)) {
      items.add(new ClassFileItem(file,sourceFile,facet));
    }
  }
}
