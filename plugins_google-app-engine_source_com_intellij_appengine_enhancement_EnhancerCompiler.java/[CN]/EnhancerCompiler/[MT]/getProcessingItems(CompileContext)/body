{
  List<ProcessingItem> items=new ArrayList<ProcessingItem>();
  final Module[] affectedModules=context.getCompileScope().getAffectedModules();
  for (  Module module : affectedModules) {
    for (    AppEngineFacet facet : FacetManager.getInstance(module).getFacetsByType(AppEngineFacet.ID)) {
      if (facet.getConfiguration().isRunEnhancerOnMake()) {
        final VirtualFile outputRoot=CompilerModuleExtension.getInstance(module).getCompilerOutputPath();
        if (outputRoot != null) {
          collectItems(outputRoot,facet,context,items);
        }
      }
    }
  }
  return items.toArray(new ProcessingItem[items.size()]);
}
