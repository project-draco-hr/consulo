{
  myRunnerParameters=parameters;
  try {
    FileDocumentManager.getInstance().saveAllDocuments();
    executor=createTask(myRunnerParameters,mavenCore.getState(),myState);
    openToolWindow(executor.createConsole(project));
    ProgressManager.getInstance().run(new Task.Backgroundable(project,executor.getCaption(),true){
      public void run(      ProgressIndicator indicator){
        executor.execute();
      }
      @Nullable public NotificationInfo getNotificationInfo(){
        return new NotificationInfo("Maven","Maven Task Finished","");
      }
      public void onSuccess(){
        onRunComplete();
      }
      public void onCancel(){
        onRunComplete();
      }
      public boolean shouldStartInBackground(){
        return myState.isRunMavenInBackground();
      }
      public void processSentToBackground(){
        myState.setRunMavenInBackground(true);
      }
      public void processRestoredToForeground(){
        myState.setRunMavenInBackground(false);
      }
    }
);
  }
 catch (  Exception e) {
    ErrorHandler.showError(project,e,false);
  }
}
