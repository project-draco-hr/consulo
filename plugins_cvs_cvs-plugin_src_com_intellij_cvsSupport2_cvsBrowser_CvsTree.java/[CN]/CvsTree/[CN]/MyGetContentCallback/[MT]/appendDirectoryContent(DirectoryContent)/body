{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      final TreePath selectionPath=myTree.getSelectionPath();
      if (selectionPath != null) {
        mySelectionPath=selectionPath;
      }
      if (myShowModules) {
        process(directoryContent.getSubModulesRaw(),CvsElementFactory.MODULE_ELEMENT_FACTORY,new ModuleDataProvider(myCvsRootConfiguration));
      }
      process(directoryContent.getSubDirectoriesRaw(),CvsElementFactory.FOLDER_ELEMENT_FACTORY,myParentNode.getDataProvider().getChildrenDataProvider());
      if (myShowFiles) {
        process(directoryContent.getFilesRaw(),CvsElementFactory.FILE_ELEMENT_FACTORY,RemoteResourceDataProvider.NOT_EXPANDABLE);
      }
      if (myTree.getSelectionPath() == null) {
        myTree.setSelectionPath(mySelectionPath);
      }
      final long currentTime=System.currentTimeMillis();
      if (currentTime - timeStamp > waitTime) {
        waitTime+=100;
        myModel.reload(myParentNode);
        timeStamp=System.currentTimeMillis();
      }
    }
  }
,myModalityState);
}
