{
  final String content=beforeRevision.getContent();
  if (content == null) {
    throw new VcsException("Failed to fetch old content for deleted file " + beforeRevision.getFile().getPath());
  }
  String[] lines=DiffUtil.convertToLines(content);
  FilePatch result=buildPatchHeading(basePath,beforeRevision,beforeRevision);
  PatchHunk hunk=new PatchHunk(0,lines.length,-1,-1);
  for (  String line : lines) {
    addLineToHunk(hunk,line,PatchLine.Type.REMOVE);
  }
  result.addHunk(hunk);
  return result;
}
