{
  final PsiClass throwableClass=JavaPsiFacade.getInstance(myProject).findClass("java.lang.Throwable",GlobalSearchScope.allScope(myProject));
  TreeClassChooser chooser=TreeClassChooserFactory.getInstance(myProject).createInheritanceClassChooser(DebuggerBundle.message("add.exception.breakpoint.classchooser.title"),GlobalSearchScope.allScope(myProject),throwableClass,true,true,null);
  chooser.showDialog();
  PsiClass selectedClass=chooser.getSelected();
  String qName=selectedClass == null ? null : JVMNameUtil.getNonAnonymousClassName(selectedClass);
  if (qName != null && qName.length() > 0) {
    ExceptionBreakpoint breakpoint=DebuggerManagerEx.getInstanceEx(myProject).getBreakpointManager().addExceptionBreakpoint(qName,((PsiClassOwner)selectedClass.getContainingFile()).getPackageName());
    getPanel().addBreakpoint(breakpoint);
  }
}
