{
  if (myTemplate != null && myProject != null) {
    return EditorHighlighterFactory.getInstance().createEditorHighlighter(myProject,new LightVirtualFile("aaa." + myTemplate.getExtension() + ".ft"));
  }
 else {
    FileType fileType=null;
    if (myTemplate != null) {
      fileType=FileTypeManager.getInstance().getFileTypeByExtension(myTemplate.getExtension());
    }
    if (fileType == null) {
      fileType=FileTypes.PLAIN_TEXT;
    }
    SyntaxHighlighter originalHighlighter=SyntaxHighlighterFactory.getSyntaxHighlighter(fileType,null,null);
    if (originalHighlighter == null)     originalHighlighter=new PlainSyntaxHighlighter();
    return new LexerEditorHighlighter(new TemplateHighlighter(originalHighlighter),EditorColorsManager.getInstance().getGlobalScheme());
  }
}
