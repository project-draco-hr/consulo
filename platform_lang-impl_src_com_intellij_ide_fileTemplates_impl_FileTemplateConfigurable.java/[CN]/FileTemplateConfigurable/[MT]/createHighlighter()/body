{
  FileType fileType=null;
  if (myTemplate != null) {
    String extension=myTemplate.getExtension();
    if (myTemplate instanceof CustomFileTemplate) {
      extension=((CustomFileTemplate)myTemplate).getEditorExtension();
    }
    fileType=FileTypeManager.getInstance().getFileTypeByExtension(extension);
  }
  if (fileType == null) {
    fileType=PlainTextFileType.INSTANCE;
  }
  SyntaxHighlighter originalHighlighter=SyntaxHighlighterFactory.getSyntaxHighlighter(fileType,null,null);
  if (originalHighlighter == null)   originalHighlighter=new PlainSyntaxHighlighter();
  return new LexerEditorHighlighter(new TemplateHighlighter(originalHighlighter),EditorColorsManager.getInstance().getGlobalScheme());
}
