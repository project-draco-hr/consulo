{
  String name=myNameField.getText();
  String extension=myExtensionField.getText();
  int lastDotIndex=extension.lastIndexOf(".");
  if (lastDotIndex >= 0) {
    name+=extension.substring(0,lastDotIndex + 1);
    extension=extension.substring(lastDotIndex + 1);
  }
  if (editor) {
    if (myTemplate instanceof CustomFileTemplate) {
      ((CustomFileTemplate)myTemplate).setEditorName(name);
      ((CustomFileTemplate)myTemplate).setEditorExtension(extension);
    }
  }
 else {
    if (name.length() == 0 || !isValidFilename(name + "." + extension)) {
      return false;
    }
    myTemplate.setName(name);
    myTemplate.setExtension(extension);
  }
  return true;
}
