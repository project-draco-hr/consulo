{
  EditorFactory editorFactory=EditorFactory.getInstance();
  Document doc=editorFactory.createDocument(oldText == null ? myTemplate == null ? "" : myTemplate.getText() : oldText);
  Editor editor=editorFactory.createEditor(doc);
  EditorSettings editorSettings=editor.getSettings();
  editorSettings.setVirtualSpace(false);
  editorSettings.setLineMarkerAreaShown(false);
  editorSettings.setIndentGuidesShown(false);
  editorSettings.setLineNumbersShown(false);
  editorSettings.setFoldingOutlineShown(false);
  editorSettings.setAdditionalColumnsCount(3);
  editorSettings.setAdditionalLinesCount(3);
  EditorColorsScheme scheme=editor.getColorsScheme();
  scheme.setColor(EditorColors.CARET_ROW_COLOR,null);
  editor.getDocument().addDocumentListener(new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      onTextChanged();
    }
  }
);
  ((EditorEx)editor).setHighlighter(createHighlighter());
  ((EditorEx)editor).getScrollPane().setBorder(null);
  mySplitter.setFirstComponent(editor.getComponent());
  return editor;
}
