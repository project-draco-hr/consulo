{
  final Object element=nodeDescriptor.getElement();
  if (element != null) {
    FileElement descriptor=(FileElement)element;
    VirtualFile file=descriptor.getFile();
    if (file != null) {
      if (myChooserDescriptor.isChooseJarContents() && FileElement.isArchive(file)) {
        return true;
      }
      if (file.isDirectory()) {
        return true;
      }
      return false;
    }
  }
  return true;
}
