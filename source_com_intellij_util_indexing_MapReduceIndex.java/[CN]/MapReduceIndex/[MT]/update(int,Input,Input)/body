{
  final Map<Key,Set<Value>> oldData=oldContent != null ? processInput(oldContent) : Collections.<Key,Set<Value>>emptyMap();
  final Map<Key,Set<Value>> data=content != null ? processInput(content) : Collections.<Key,Set<Value>>emptyMap();
  final Set<Key> allKeys=new HashSet<Key>(oldData.size() + data.size());
  allKeys.addAll(oldData.keySet());
  allKeys.addAll(data.keySet());
  for (  Key key : allKeys) {
    final Set<Value> oldValues=oldData.get(key);
    if (oldValues != null && oldValues.size() > 0) {
      for (      Value oldValue : oldValues) {
        myStorage.removeValue(key,inputId,oldValue);
      }
    }
    final Set<Value> newValues=data.get(key);
    if (newValues != null) {
      for (      Value value : newValues) {
        myStorage.addValue(key,inputId,value);
      }
    }
  }
}
