def getcommit(self, version):
    c = self.catfile(version, 'commit')
    end = c.find('\n\n')
    message = c[(end + 2):]
    message = self.recode(message)
    l = c[:end].splitlines()
    parents = []
    author = committer = None
    for e in l[1:]:
        (n, v) = e.split(' ', 1)
        if (n == 'author'):
            p = v.split()
            (tm, tz) = p[(-2):]
            author = ' '.join(p[:(-2)])
            if (author[0] == '<'):
                author = author[1:(-1)]
            author = self.recode(author)
        if (n == 'committer'):
            p = v.split()
            (tm, tz) = p[(-2):]
            committer = ' '.join(p[:(-2)])
            if (committer[0] == '<'):
                committer = committer[1:(-1)]
            committer = self.recode(committer)
        if (n == 'parent'):
            parents.append(v)
    if (committer and (committer != author)):
        message += ('\ncommitter: %s\n' % committer)
    (tzs, tzh, tzm) = ((tz[(-5):(-4)] + '1'), tz[(-4):(-2)], tz[(-2):])
    tz = ((- int(tzs)) * ((int(tzh) * 3600) + int(tzm)))
    date = ((tm + ' ') + str(tz))
    c = commit(parents=parents, date=date, author=author, desc=message, rev=version)
    return c
