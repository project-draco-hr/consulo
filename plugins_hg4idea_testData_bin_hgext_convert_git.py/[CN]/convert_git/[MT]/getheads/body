def getheads(self):
    if (not self.rev):
        (heads, ret) = self.gitread('git rev-parse --branches --remotes')
        heads = heads.splitlines()
    else:
        (heads, ret) = self.gitread(('git rev-parse --verify %s' % self.rev))
        heads = [heads[:(-1)]]
    if ret:
        raise util.Abort(_('cannot retrieve git heads'))
    return heads
