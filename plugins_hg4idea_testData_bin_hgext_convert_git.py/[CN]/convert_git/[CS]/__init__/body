def __init__(self, ui, path, rev=None):
    super(convert_git, self).__init__(ui, path, rev=rev)
    if os.path.isdir((path + '/.git')):
        path += '/.git'
    if (not os.path.exists((path + '/objects'))):
        raise NoRepo((_('%s does not look like a Git repository') % path))
    checktool('git', 'git')
    self.path = path
