{
  CommitId commitId=myCommitIdKeyDescriptor.read(in);
  if (commitId == null)   throw new IOException("Can not read commit id for reference");
  String name=IOUtil.readUTF(in);
  VcsRefType type=myLogProviders.get(commitId.getRoot()).getReferenceManager().deserialize(in);
  return new VcsRefImpl(commitId.getHash(),name,type,commitId.getRoot());
}
