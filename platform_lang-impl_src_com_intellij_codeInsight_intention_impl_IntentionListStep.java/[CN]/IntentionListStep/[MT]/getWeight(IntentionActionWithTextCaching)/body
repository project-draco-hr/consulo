{
  IntentionAction a=action.getAction();
  int group=getGroup(action);
  if (a instanceof IntentionActionWrapper) {
    a=((IntentionActionWrapper)a).getDelegate();
  }
  if (a instanceof IntentionWrapper) {
    a=((IntentionWrapper)a).getAction();
  }
  if (a instanceof HighPriorityAction) {
    return group + 3;
  }
 else   if (a instanceof LowPriorityAction) {
    return group - 3;
  }
 else   if (a instanceof QuickFixWrapper) {
    final LocalQuickFix quickFix=((QuickFixWrapper)a).getFix();
    if (quickFix instanceof HighPriorityAction) {
      return group + 3;
    }
    if (quickFix instanceof LowPriorityAction) {
      return group - 3;
    }
  }
  return group;
}
