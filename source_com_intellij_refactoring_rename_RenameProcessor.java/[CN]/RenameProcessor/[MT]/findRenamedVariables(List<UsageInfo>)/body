{
  for (  final AutomaticRenamer automaticVariableRenamer : myRenamers) {
    if (!automaticVariableRenamer.hasAnythingToRename())     continue;
    final AutomaticRenamingDialog dialog=new AutomaticRenamingDialog(myProject,automaticVariableRenamer);
    dialog.show();
    if (!dialog.isOK())     return false;
  }
  for (  final AutomaticRenamer renamer : myRenamers) {
    final List<? extends PsiNamedElement> variables=renamer.getElements();
    for (    final PsiNamedElement variable : variables) {
      final String newName=renamer.getNewName(variable);
      if (newName != null) {
        addElement(variable,newName);
      }
    }
  }
  Runnable runnable=new Runnable(){
    public void run(){
      for (Iterator<AutomaticRenamer> iterator=myRenamers.iterator(); iterator.hasNext(); ) {
        final AutomaticRenamer renamer=iterator.next();
        renamer.findUsages(variableUsages,mySearchInComments,mySearchTextOccurences);
      }
    }
  }
;
  final boolean isOK=ApplicationManager.getApplication().runProcessWithProgressSynchronously(runnable,"Searching for variables",true,myProject);
  return isOK;
}
