{
  for (Iterator<AutomaticRenamer> iterator=myRenamers.iterator(); iterator.hasNext(); ) {
    final AutomaticRenamer automaticVariableRenamer=iterator.next();
    if (!automaticVariableRenamer.hasAnythingToRename())     continue;
    final AutomaticRenamingDialog dialog=new AutomaticRenamingDialog(myProject,automaticVariableRenamer);
    dialog.show();
    if (!dialog.isOK())     return false;
  }
  for (Iterator<AutomaticRenamer> iterator=myRenamers.iterator(); iterator.hasNext(); ) {
    final AutomaticRenamer renamer=iterator.next();
    final List<? extends PsiNamedElement> variables=renamer.getElements();
    for (Iterator<? extends PsiNamedElement> iterator1=variables.iterator(); iterator1.hasNext(); ) {
      final PsiNamedElement variable=iterator1.next();
      addElement(variable,renamer.getNewName(variable));
    }
  }
  Runnable runnable=new Runnable(){
    public void run(){
      for (Iterator<AutomaticRenamer> iterator=myRenamers.iterator(); iterator.hasNext(); ) {
        final AutomaticRenamer renamer=iterator.next();
        renamer.findUsages(variableUsages,mySearchInComments,mySearchInNonJavaFiles);
      }
    }
  }
;
  final boolean isOK=ApplicationManager.getApplication().runProcessWithProgressSynchronously(runnable,"Searching for variables",true,myProject);
  return isOK;
}
