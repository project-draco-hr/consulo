{
  if (element instanceof PsiDirectory) {
    final PsiPackage aPackage=((PsiDirectory)element).getPackage();
    if (aPackage != null) {
      element=aPackage;
    }
  }
  final ArrayList<UsageInfo> extractedUsages=new ArrayList<UsageInfo>(usages.length);
  for (int idx=0; idx < usages.length; idx++) {
    UsageInfo usage=usages[idx];
    LOG.assertTrue(usage instanceof MoveRenameUsageInfo);
    MoveRenameUsageInfo usageInfo=(MoveRenameUsageInfo)usage;
    if (element.equals(usageInfo.referencedElement)) {
      extractedUsages.add(usageInfo);
    }
  }
  return extractedUsages.toArray(new UsageInfo[extractedUsages.size()]);
}
