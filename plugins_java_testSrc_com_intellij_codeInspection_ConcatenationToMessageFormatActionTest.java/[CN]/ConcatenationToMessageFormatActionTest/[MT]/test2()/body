{
  final String text="1 + 2 + 3 + \"{}'\" + '\\n' + ((java.lang.String)ccc)";
  final PsiExpression expression=JavaPsiFacade.getElementFactory(getProject()).createExpressionFromText(text,null);
  final StringBuilder result=new StringBuilder();
  final ArrayList<PsiExpression> args=new ArrayList<PsiExpression>();
  ConcatenationToMessageFormatAction.buildMessageFormatString(expression,result,args);
  assertEquals("{0}'{'}''\\n{1}",result.toString());
  assertEquals(2,args.size());
  assertEquals("1 + 2 + 3",args.get(0).getText());
  assertEquals("ccc",args.get(1).getText());
}
