{
  VirtualFile vFile=file.getVirtualFile();
  String newName=myNewName + "." + vFile.getExtension();
  FileDocumentManager.getInstance().saveDocument(PsiDocumentManager.getInstance(project).getDocument(file));
  try {
    vFile.rename(file.getManager(),newName);
  }
 catch (  IOException e) {
    MessagesEx.error(project,e.getMessage()).showLater();
  }
  if (editor != null) {
    DaemonCodeAnalyzer.getInstance(project).updateVisibleHighlighters(editor);
  }
}
