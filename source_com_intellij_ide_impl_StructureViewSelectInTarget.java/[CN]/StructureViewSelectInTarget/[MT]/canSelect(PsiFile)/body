{
  StructureView structureView=getStructureView();
  if (file == null || structureView == null || !FileEditorManager.getInstance(myProject).getSelectedEditor(file.getVirtualFile()).equals(structureView.getFileEditor())) {
    return false;
  }
  return (file instanceof PsiJavaFile || file instanceof XmlFile) && file.isValid();
}
