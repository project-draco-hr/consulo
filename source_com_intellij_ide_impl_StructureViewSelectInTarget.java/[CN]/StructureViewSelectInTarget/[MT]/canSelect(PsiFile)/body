{
  StructureView structureView=getStructureView();
  if (file == null) {
    return false;
  }
 else   if (structureView == null) {
    return false;
  }
 else   if (!Comparing.equal(FileEditorManager.getInstance(myProject).getSelectedEditor(file.getVirtualFile()),structureView.getFileEditor())) {
    return false;
  }
 else {
    return (file instanceof PsiJavaFile || file instanceof XmlFile) && file.isValid();
  }
}
