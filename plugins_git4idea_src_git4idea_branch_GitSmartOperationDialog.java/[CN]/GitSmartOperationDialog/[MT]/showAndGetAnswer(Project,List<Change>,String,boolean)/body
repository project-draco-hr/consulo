{
  final AtomicInteger exitCode=new AtomicInteger();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      GitSmartOperationDialog dialog=new GitSmartOperationDialog(project,changes,operationTitle,forceButton);
      ServiceManager.getService(project,GitPlatformFacade.class).showDialog(dialog);
      exitCode.set(dialog.getExitCode());
    }
  }
);
  return exitCode.get();
}
