{
  IdeView view=e.getData(LangDataKeys.IDE_VIEW);
  Project project=e.getData(CommonDataKeys.PROJECT);
  if (view == null || project == null) {
    return;
  }
  PsiDirectory directory=DirectoryChooserUtil.getOrChooseDirectory(view);
  if (directory == null) {
    return;
  }
  Trinity<ContentFolderTypeProvider,PsiDirectory,ChildType> info=getInfo(directory);
  CreateDirectoryOrPackageHandler validator=new CreateDirectoryOrPackageHandler(project,directory,info.getThird() == ChildType.Directory,info.getThird().getSeparator());
  Messages.showInputDialog(project,IdeBundle.message("prompt.enter.new.name"),info.getThird().getName(),Messages.getQuestionIcon(),"",validator);
  PsiFileSystemItem result=validator.getCreatedElement();
  if (result != null) {
    view.selectElement(result);
  }
}
