{
  myWizardContext=wizardContext;
  myBuilder=builder;
  myModulesProvider=modulesProvider;
  myIcon=icon;
  myHelpId=helpId;
  myPanel=new JPanel(new GridBagLayout());
  myPanel.setBorder(BorderFactory.createEtchedBorder());
  final String text;
  final ModuleType moduleType=builder.getModuleType();
  if (ModuleType.J2EE_APPLICATION.equals(moduleType)) {
    text="Please specify module name";
  }
 else {
    text="Please specify module name and module content root.\nA module content root is a directory where the files that belong to the module are stored.";
  }
  final JLabel textLabel=new JLabel(text);
  textLabel.setUI(new MultiLineLabelUI());
  myPanel.add(textLabel,new GridBagConstraints(0,GridBagConstraints.RELATIVE,2,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.NONE,new Insets(8,10,8,10),0,0));
  myNamePathComponent=new NamePathComponent("Module name:","Module content root:",'M','r',"Select Module Content Root","");
  if (ModuleType.J2EE_APPLICATION.equals(moduleType)) {
    myNamePathComponent.setPathComponentVisible(false);
  }
  myPanel.add(myNamePathComponent,new GridBagConstraints(0,GridBagConstraints.RELATIVE,2,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(8,10,0,10),0,0));
  final JLabel label=new JLabel("Module file will be saved in:");
  myPanel.add(label,new GridBagConstraints(0,GridBagConstraints.RELATIVE,2,1,1.0,1.0,GridBagConstraints.SOUTHWEST,GridBagConstraints.HORIZONTAL,new Insets(30,10,0,10),0,0));
  myTfModuleFilePath=new JTextField();
  myTfModuleFilePath.setEditable(false);
  final Insets borderInsets=myTfModuleFilePath.getBorder().getBorderInsets(myTfModuleFilePath);
  myTfModuleFilePath.setBorder(BorderFactory.createEmptyBorder(borderInsets.top,borderInsets.left,borderInsets.bottom,borderInsets.right));
  final FieldPanel fieldPanel=createFieldPanel(myTfModuleFilePath,null,null);
  myPanel.add(fieldPanel,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(0,10,10,0),0,0));
  JButton browseButton=new JButton("Change Directory...");
  browseButton.addActionListener(new BrowseModuleFileDirectoryListener(myTfModuleFilePath));
  myPanel.add(browseButton,new GridBagConstraints(1,GridBagConstraints.RELATIVE,1,1,0.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.NONE,new Insets(0,0,10,10),0,0));
  final DocumentListener documentListener=new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      updateModuleFilePathField();
    }
  }
;
  myNamePathComponent.getNameComponent().getDocument().addDocumentListener(documentListener);
  myNamePathComponent.getPathComponent().getDocument().addDocumentListener(documentListener);
  myNamePathComponent.getPathComponent().getDocument().addDocumentListener(new DocumentAdapter(){
    public void textChanged(    DocumentEvent event){
      myWizardContext.requestWizardButtonsUpdate();
    }
  }
);
}
