{
  final JpsRemoteProto.Message.Failure.Builder builder=JpsRemoteProto.Message.Failure.newBuilder().setDescription(description);
  if (reason != null) {
    final ByteArrayOutputStream baos=new ByteArrayOutputStream();
    reason.printStackTrace(new PrintStream(baos));
    builder.setStacktrace(new String(baos.toByteArray()));
  }
  return builder.build();
}
