{
  if (node.getElementType() == TokenType.ERROR_ELEMENT) {
    return node.getTextRange();
  }
  final ASTNode prevLeaf=FormattingAstUtil.getPrevLeaf(node,TokenType.WHITE_SPACE);
  if (prevLeaf == null || prevLeaf.getElementType() != TokenType.ERROR_ELEMENT) {
    return node.getTextRange();
  }
  final TextRange range=doGetRangeAffectingIndent(prevLeaf);
  if (range == null) {
    return node.getTextRange();
  }
 else {
    return new TextRange(range.getStartOffset(),node.getTextRange().getEndOffset());
  }
}
