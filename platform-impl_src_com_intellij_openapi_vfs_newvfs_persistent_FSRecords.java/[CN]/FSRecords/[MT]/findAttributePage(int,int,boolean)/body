{
  int attrsRecord=getRecords().getInt(fileId * RECORD_SIZE + ATTREF_OFFSET);
  if (attrsRecord == 0) {
    attrsRecord=getAttributes().createNewRecord();
    getRecords().putInt(fileId * RECORD_SIZE + ATTREF_OFFSET,attrsRecord);
  }
  final DataInputStream attrRefs=getAttributes().readStream(attrsRecord);
  while (attrRefs.available() > 0) {
    final int attIdOnPage=attrRefs.readInt();
    final int attAddress=attrRefs.readInt();
    if (attIdOnPage == attributeId)     return attAddress;
  }
  attrRefs.close();
  if (createIfNotFound) {
    Storage.AppenderStream appender=getAttributes().appendStream(attrsRecord);
    appender.writeInt(attributeId);
    int attAddress=getAttributes().createNewRecord();
    appender.writeInt(attAddress);
    appender.close();
    return attAddress;
  }
  return 0;
}
