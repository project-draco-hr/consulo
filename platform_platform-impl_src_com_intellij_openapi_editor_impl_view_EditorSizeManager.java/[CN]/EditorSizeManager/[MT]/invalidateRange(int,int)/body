{
  if (myDocument.isInBulkUpdate())   return;
  if (myDocument.isInEventsHandling()) {
    myDocumentChangeStartOffset=Math.min(myDocumentChangeStartOffset,startOffset);
    myDocumentChangeEndOffset=Math.max(myDocumentChangeEndOffset,endOffset);
  }
 else {
    doInvalidateRange(startOffset,endOffset);
  }
}
