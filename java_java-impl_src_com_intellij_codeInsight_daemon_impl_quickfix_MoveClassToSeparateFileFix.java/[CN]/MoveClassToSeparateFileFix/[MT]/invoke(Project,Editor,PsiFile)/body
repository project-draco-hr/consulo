{
  if (!CodeInsightUtilBase.prepareFileForWrite(myClass.getContainingFile()))   return;
  PsiDirectory dir=file.getContainingDirectory();
  try {
    String name=myClass.getName();
    JavaDirectoryService directoryService=JavaDirectoryService.getInstance();
    PsiClass placeHolder=myClass.isInterface() ? directoryService.createInterface(dir,name) : directoryService.createClass(dir,name);
    PsiClass newClass=(PsiClass)placeHolder.replace(myClass);
    myClass.delete();
    OpenFileDescriptor descriptor=new OpenFileDescriptor(project,newClass.getContainingFile().getVirtualFile(),newClass.getTextOffset());
    FileEditorManager.getInstance(project).openTextEditor(descriptor,true);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
