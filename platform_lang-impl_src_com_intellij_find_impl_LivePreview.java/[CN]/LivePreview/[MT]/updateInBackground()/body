{
  if (myDelegate == null)   return;
  final TextRange oldCursorRange=myCursor != null ? myCursor.getPrimaryRange() : null;
  mySearchResults=performSearchInBackground();
  Collections.sort(mySearchResults,new Comparator<LiveOccurrence>(){
    @Override public int compare(    LiveOccurrence liveOccurrence,    LiveOccurrence liveOccurence1){
      return liveOccurrence.getPrimaryRange().getStartOffset() - liveOccurence1.getPrimaryRange().getStartOffset();
    }
  }
);
  if (mySearchResults != null) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        doInternalCleanUp();
        highlightUsages(oldCursorRange);
        if (myContinuation != null) {
          myContinuation.run();
          myContinuation=null;
        }
      }
    }
);
  }
}
