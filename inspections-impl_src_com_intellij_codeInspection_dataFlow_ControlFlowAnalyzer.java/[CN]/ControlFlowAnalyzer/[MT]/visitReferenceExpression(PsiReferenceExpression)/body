{
  startElement(expression);
  DfaValue dfaValue=myFactory.create(expression);
  if (dfaValue instanceof DfaVariableValue) {
    DfaVariableValue dfaVariable=(DfaVariableValue)dfaValue;
    PsiVariable psiVariable=dfaVariable.getPsiVariable();
    if (psiVariable instanceof PsiField && !psiVariable.getModifierList().hasModifierProperty(PsiModifier.FINAL)) {
      addField(dfaVariable);
    }
  }
  final PsiExpression qualifierExpression=expression.getQualifierExpression();
  if (qualifierExpression != null) {
    qualifierExpression.accept(this);
    if (expression.resolve() instanceof PsiField) {
      addInstruction(new FieldReferenceInstruction(expression));
    }
 else {
      addInstruction(new PopInstruction());
    }
  }
  addInstruction(new PushInstruction(dfaValue));
  finishElement(expression);
}
