{
  startElement(expression);
  try {
    DfaValue dfaValue=myFactory.create(expression);
    if (dfaValue != null) {
      addInstruction(new PushInstruction(dfaValue));
    }
 else {
      String op=expression.getOperationSign().getText();
      PsiExpression lExpr=expression.getLOperand();
      PsiExpression rExpr=expression.getROperand();
      if (lExpr == null || rExpr == null) {
        pushUnknown();
        return;
      }
      if ("&&".equals(op)) {
        generateAndExpression(lExpr,rExpr);
      }
 else       if ("||".equals(op)) {
        generateOrExpression(lExpr,rExpr);
      }
 else       if ("^".equals(op) && expression.getType() == PsiType.BOOLEAN) {
        generateXorExpression(expression,lExpr,rExpr);
      }
 else {
        lExpr.accept(this);
        rExpr.accept(this);
        addInstruction(new BinopInstruction(op,expression.isPhysical() ? expression : null));
      }
    }
  }
  finally {
    finishElement(expression);
  }
}
