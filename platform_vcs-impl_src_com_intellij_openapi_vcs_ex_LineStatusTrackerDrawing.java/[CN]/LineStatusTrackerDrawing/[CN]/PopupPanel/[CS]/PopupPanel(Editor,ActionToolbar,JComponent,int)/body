{
  super(new BorderLayout());
  setOpaque(false);
  myEditorComponent=editorComponent;
  myEditorLeftBorder=editorLeftBorder;
  Color background=((EditorEx)editor).getBackgroundColor();
  Color foreground=editor.getColorsScheme().getColor(EditorColors.CARET_COLOR);
  JComponent toolbarComponent=toolbar.getComponent();
  toolbarComponent.setBackground(background);
  boolean isEditorVisible=editorComponent != null;
  toolbarComponent.setBorder(new ColoredSideBorder(foreground,foreground,isEditorVisible ? null : foreground,foreground,1));
  JPanel emptyPanel=new JPanel();
  emptyPanel.setOpaque(false);
  JPanel toolbarPanel=new JPanel(new BorderLayout());
  toolbarPanel.setOpaque(false);
  toolbarPanel.add(toolbarComponent,BorderLayout.WEST);
  toolbarPanel.add(emptyPanel,BorderLayout.CENTER);
  add(toolbarPanel,BorderLayout.NORTH);
  if (editorComponent != null)   add(editorComponent,BorderLayout.CENTER);
  MouseAdapter listener=new MouseAdapter(){
    @Override public void mousePressed(    MouseEvent e){
      transferEvent(e,editor);
    }
    @Override public void mouseClicked(    MouseEvent e){
      transferEvent(e,editor);
    }
    @Override public void mouseReleased(    MouseEvent e){
      transferEvent(e,editor);
    }
  }
;
  emptyPanel.addMouseListener(listener);
}
