{
  if (range.getType() == Range.INSERTED)   return null;
  DocumentEx doc=(DocumentEx)tracker.getVcsDocument();
  EditorEx uEditor=(EditorEx)EditorFactory.getInstance().createViewer(doc,tracker.getProject());
  uEditor.setColorsScheme(editor.getColorsScheme());
  FileType fileType=tracker.getVirtualFile().getFileType();
  DiffUtil.setEditorCodeStyle(tracker.getProject(),uEditor,fileType);
  EditorHighlighterFactory highlighterFactory=EditorHighlighterFactory.getInstance();
  EditorHighlighter highlighter=highlighterFactory.createEditorHighlighter(tracker.getProject(),getFileName(tracker.getDocument()));
  uEditor.setHighlighter(highlighter);
  if (wordDiff != null) {
    int vcsStartShift=tracker.getVcsTextRange(range).getStartOffset();
    for (    DiffFragment fragment : wordDiff) {
      int vcsStart=vcsStartShift + fragment.getStartOffset1();
      int vcsEnd=vcsStartShift + fragment.getEndOffset1();
      TextDiffType type=getDiffType(fragment);
      DiffDrawUtil.createInlineHighlighter(uEditor,vcsStart,vcsEnd,type);
    }
  }
  JComponent fragmentComponent=EditorFragmentComponent.createEditorFragmentComponent(uEditor,range.getVcsLine1(),range.getVcsLine2(),false,false);
  EditorFactory.getInstance().releaseEditor(uEditor);
  return fragmentComponent;
}
