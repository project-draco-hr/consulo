{
  final EditorGutterComponentEx gutter=((EditorEx)editor).getGutterComponentEx();
  final Color stripeColor=editor.getColorsScheme().getAttributes(diffAttributeKey).getErrorStripeColor();
  g.setColor(brighter(stripeColor));
  final int endX=gutter.getWhitespaceSeparatorOffset();
  final int x=r.x + r.width - 5;
  final int width=endX - x;
  if (r.height > 0) {
    g.fillRect(x,r.y + 2,width,r.height - 4);
    g.setColor(gutter.getOutlineColor(false));
    UIUtil.drawLine(g,x,r.y + 2,x + width,r.y + 2);
    UIUtil.drawLine(g,x,r.y + 2,x,r.y + r.height - 3);
    UIUtil.drawLine(g,x,r.y + r.height - 3,x + width,r.y + r.height - 3);
  }
 else {
    final int[] xPoints=new int[]{x,x,x + width - 1};
    final int[] yPoints=new int[]{r.y - 4,r.y + 4,r.y};
    g.fillPolygon(xPoints,yPoints,3);
    g.setColor(gutter.getOutlineColor(false));
    g.drawPolygon(xPoints,yPoints,3);
  }
}
