{
  try {
    Element libraryElement=null;
    if (LibraryTablesRegistrar.PROJECT_LEVEL.equals(level)) {
      libraryElement=findProjectLibraryElement(name);
    }
 else     if (LibraryTablesRegistrar.APPLICATION_LEVEL.equals(level)) {
      libraryElement=findGlobalLibraryElement(name);
    }
    if (libraryElement != null) {
      final Element classesChild=libraryElement.getChild("CLASSES");
      if (classesChild != null) {
        final List<Element> roots=JDomConvertingUtil.getChildren(classesChild,"root");
        List<File> files=new ArrayList<File>();
        final ExpandMacroToPathMap pathMap=createExpandMacroMap();
        for (        Element root : roots) {
          final String url=root.getAttributeValue("url");
          final String path=VfsUtil.urlToPath(url);
          files.add(new File(PathUtil.getLocalPath(pathMap.substitute(path,true,null))));
        }
        return files;
      }
    }
    return Collections.emptyList();
  }
 catch (  CannotConvertException e) {
    return Collections.emptyList();
  }
}
