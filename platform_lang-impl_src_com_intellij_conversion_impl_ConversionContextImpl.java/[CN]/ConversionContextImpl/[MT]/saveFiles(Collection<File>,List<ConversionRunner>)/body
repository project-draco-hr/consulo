{
  Set<String> performedConversions=new HashSet<String>();
  for (  ConversionRunner runner : usedRunners) {
    final ConverterProvider provider=runner.getProvider();
    if (!provider.canDetermineIfConversionAlreadyPerformedByProjectFiles()) {
      performedConversions.add(provider.getId());
    }
  }
  if (!performedConversions.isEmpty()) {
    performedConversions.addAll(myPerformedConversionIds);
    final ProjectFileVersionState state=new ProjectFileVersionState();
    final List<String> performedConversionsList=new ArrayList<String>(performedConversions);
    Collections.sort(performedConversionsList,String.CASE_INSENSITIVE_ORDER);
    state.setPerformedConversionIds(performedConversionsList);
    final ComponentManagerSettings settings=getProjectFileVersionSettings();
    if (settings != null) {
      final Element element=JDomConvertingUtil.findOrCreateComponentElement(settings.getRootElement(),ProjectFileVersionImpl.COMPONENT_NAME);
      XmlSerializer.serializeInto(state,element);
    }
  }
  for (  File file : files) {
    final SettingsXmlFile xmlFile=mySettingsFiles.get(file);
    if (xmlFile != null) {
      xmlFile.save();
    }
  }
}
