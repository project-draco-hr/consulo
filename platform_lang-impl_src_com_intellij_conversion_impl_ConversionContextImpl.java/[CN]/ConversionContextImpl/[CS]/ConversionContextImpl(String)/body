{
  myProjectFile=new File(projectPath);
  File modulesFile;
  if (myProjectFile.isDirectory()) {
    myStorageScheme=StorageScheme.DIRECTORY_BASED;
    myProjectBaseDir=myProjectFile;
    mySettingsBaseDir=new File(myProjectBaseDir.getAbsolutePath(),".idea");
    modulesFile=new File(mySettingsBaseDir,"modules.xml");
    myWorkspaceFile=new File(mySettingsBaseDir,"workspace.xml");
  }
 else {
    myStorageScheme=StorageScheme.DEFAULT;
    myProjectBaseDir=myProjectFile.getParentFile();
    modulesFile=myProjectFile;
    myWorkspaceFile=new File(StringUtil.trimEnd(projectPath,ProjectFileType.DOT_DEFAULT_EXTENSION) + WorkspaceFileType.DOT_DEFAULT_EXTENSION);
  }
  myModuleFiles=modulesFile.exists() ? findModuleFiles(JDomConvertingUtil.loadDocument(modulesFile).getRootElement()) : new File[0];
  myPerformedConversionIds=loadPerformedConversionIds();
}
