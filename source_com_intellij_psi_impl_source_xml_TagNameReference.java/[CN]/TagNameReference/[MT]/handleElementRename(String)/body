{
  final XmlTag element=getElement();
  if (element == null)   return null;
  if ((newElementName.endsWith(TAG_EXTENSION) || newElementName.endsWith(TAGX_EXTENSION)) && PsiUtil.isInJspFile(element.getContainingFile())) {
    final String namespacePrefix=element.getNamespacePrefix();
    newElementName=newElementName.substring(0,newElementName.lastIndexOf('.'));
    if (namespacePrefix != null && namespacePrefix.length() > 0) {
      newElementName=namespacePrefix + ":" + newElementName;
    }
  }
 else   if (newElementName.indexOf(':') == -1) {
    final String namespacePrefix=element.getNamespacePrefix();
    if (namespacePrefix != null && namespacePrefix.length() > 0) {
      if (PsiUtil.isInJspFile(element.getContainingFile())) {
        final XmlNSDescriptor nsDescriptor=element.getNSDescriptor(element.getNamespace(),true);
        if (nsDescriptor instanceof TldDescriptor) {
          newElementName=namespacePrefix + ":" + newElementName;
        }
      }
    }
  }
  element.setName(newElementName);
  return element;
}
