{
  LOG.assertTrue(!subBlocks.isEmpty());
  final Block lastBlock=subBlocks.get(subBlocks.size() - 1);
  if (lastBlock instanceof AbstractXmlBlock) {
    return ((AbstractXmlBlock)lastBlock).getTreeNode();
  }
 else {
    return getLastNode(lastBlock.getSubBlocks());
  }
}
