{
  myState.getProportions().saveSplitterProportions(myWholePanel);
  myAutoScrollHandler.cancelAllRequests();
  myDetails.disposeUIResources();
  myInitializedConfigurables.clear();
  TreeUtil.traverseDepth(myRoot,new TreeUtil.Traverse(){
    public boolean accept(    Object node){
      if (node instanceof MyNode) {
        final MyNode treeNode=((MyNode)node);
        treeNode.getConfigurable().disposeUIResources();
        if (!(treeNode instanceof MyRootNode)) {
          treeNode.setUserObject(null);
        }
      }
      return true;
    }
  }
);
  myRoot.removeAllChildren();
  final String key=getComponentStateKey();
  final MasterDetailsStateService stateService=getStateService();
  if (key != null && stateService != null) {
    stateService.setComponentState(key,getState());
  }
  myCurrentConfigurable=null;
}
