{
  final CompilerMessage.Kind kind;
switch (diagnostic.getKind()) {
case ERROR:
    kind=BuildMessage.Kind.ERROR;
  myErrorCount++;
break;
case MANDATORY_WARNING:
case WARNING:
case NOTE:
kind=BuildMessage.Kind.WARNING;
myWarningCount++;
break;
default :
kind=BuildMessage.Kind.INFO;
}
final JavaFileObject source=diagnostic.getSource();
final File sourceFile=source != null ? Utils.convertToFile(source.toUri()) : null;
final String srcPath=sourceFile != null ? FileUtil.toSystemIndependentName(sourceFile.getPath()) : null;
myContext.processMessage(new CompilerMessage(BUILDER_NAME,kind,diagnostic.getMessage(Locale.US),srcPath,diagnostic.getStartPosition(),diagnostic.getEndPosition(),diagnostic.getPosition(),diagnostic.getLineNumber(),diagnostic.getColumnNumber()));
}
