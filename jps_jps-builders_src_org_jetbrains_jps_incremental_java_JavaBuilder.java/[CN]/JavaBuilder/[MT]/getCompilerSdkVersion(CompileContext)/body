{
  final Integer cached=JAVA_COMPILER_VERSION_KEY.get(context);
  if (cached != null) {
    return cached;
  }
  int javaVersion=convertToNumber(SystemProperties.getJavaVersion());
  if (!USE_EMBEDDED_JAVAC) {
    for (    JpsTypedLibrary<JpsSdkProperties> sdk : context.getProjectDescriptor().getProjectJavaSdks()) {
      final String version=sdk.getProperties().getVersionString();
      final int ver=convertToNumber(version);
      if (ver > javaVersion) {
        javaVersion=ver;
      }
    }
  }
  JAVA_COMPILER_VERSION_KEY.set(context,javaVersion);
  return javaVersion;
}
