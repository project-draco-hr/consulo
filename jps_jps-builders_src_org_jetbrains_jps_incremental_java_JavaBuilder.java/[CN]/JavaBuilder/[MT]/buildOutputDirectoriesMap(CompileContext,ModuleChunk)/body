{
  final Map<File,Set<File>> map=new LinkedHashMap<File,Set<File>>();
  for (  RealModuleBuildTarget target : chunk.getTargets()) {
    final File outputDir=JpsJavaExtensionService.getInstance().getOutputDirectory(target.getModule(),target.isTests());
    if (outputDir == null) {
      continue;
    }
    final Set<File> roots=new LinkedHashSet<File>();
    for (    RootDescriptor descriptor : context.getProjectDescriptor().rootsIndex.getModuleRoots(context,target.getModule())) {
      if (descriptor.isTestRoot == target.isTests()) {
        roots.add(descriptor.root);
      }
    }
    map.put(outputDir,roots);
  }
  return map;
}
