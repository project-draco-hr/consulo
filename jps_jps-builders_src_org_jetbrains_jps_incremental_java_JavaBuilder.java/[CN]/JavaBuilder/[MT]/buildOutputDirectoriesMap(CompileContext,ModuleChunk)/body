{
  final Map<File,Set<File>> map=new LinkedHashMap<File,Set<File>>();
  final boolean compilingTests=context.isCompilingTests();
  for (  Module module : chunk.getModules()) {
    final Set<File> roots=new LinkedHashSet<File>();
    for (    RootDescriptor descriptor : context.getModuleRoots(module)) {
      if (descriptor.isTestRoot == compilingTests) {
        roots.add(descriptor.root);
      }
    }
    map.put(new File(compilingTests ? module.getTestOutputPath() : module.getOutputPath()),roots);
  }
  return map;
}
