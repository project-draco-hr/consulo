{
  JpsLibraryType<P> type=library.getType();
  if (!type.equals(JpsJavaLibraryType.INSTANCE)) {
    JpsLibraryPropertiesSerializer<P> serializer=getLibraryPropertiesSerializer(type);
    libraryElement.setAttribute(TYPE_ATTRIBUTE,serializer.getTypeId());
    Element element=new Element(PROPERTIES_TAG);
    serializer.saveProperties(library.getProperties(),element);
    if (!element.getContent().isEmpty() || !element.getAttributes().isEmpty()) {
      libraryElement.addContent(element);
    }
  }
}
