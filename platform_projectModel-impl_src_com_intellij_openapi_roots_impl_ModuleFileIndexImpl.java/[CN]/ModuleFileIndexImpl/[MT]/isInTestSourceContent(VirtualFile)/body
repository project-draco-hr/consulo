{
  if (fileOrDir.isDirectory()) {
    DirectoryInfo info=myDirectoryIndex.getInfoForDirectory(fileOrDir);
    return info != null && (info.hasContentFolderFlag(ContentFolderType.TEST) || info.hasContentFolderFlag(ContentFolderType.TEST_RESOURCE)) && myModule.equals(info.getModule());
  }
 else {
    VirtualFile parent=fileOrDir.getParent();
    return parent != null && isInTestSourceContent(parent);
  }
}
