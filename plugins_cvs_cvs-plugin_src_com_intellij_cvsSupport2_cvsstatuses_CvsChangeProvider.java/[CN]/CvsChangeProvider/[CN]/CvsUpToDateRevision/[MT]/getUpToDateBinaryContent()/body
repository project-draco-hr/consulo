{
  VirtualFile virtualFile=myPath.getVirtualFile();
  byte[] result=null;
  if (virtualFile != null) {
    result=getLastUpToDateContentFor(virtualFile);
  }
  if (result == null) {
    String createVersionFile=null;
    final GetFileContentOperation operation;
    if (virtualFile != null) {
      Entry entry=myEntriesManager.getEntryFor(virtualFile.getParent(),virtualFile.getName());
      if (entry != null && entry.isResultOfMerge()) {
        createVersionFile=entry.getRevision();
      }
      operation=GetFileContentOperation.createForFile(virtualFile,SimpleRevision.createForTheSameVersionOf(virtualFile));
    }
 else {
      operation=GetFileContentOperation.createForFile(myPath);
    }
    if (operation.getRoot().isOffline())     return null;
    CvsVcs2.executeQuietOperation(CvsBundle.message("operation.name.get.file.content"),operation,myVcs.getProject());
    result=operation.tryGetFileBytes();
    if (result != null && createVersionFile != null) {
      CvsUtil.storeContentForRevision(virtualFile,createVersionFile,result);
    }
  }
  return result;
}
