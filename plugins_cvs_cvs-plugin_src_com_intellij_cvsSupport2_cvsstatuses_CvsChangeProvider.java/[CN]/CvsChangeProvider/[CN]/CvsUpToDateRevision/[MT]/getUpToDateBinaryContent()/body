{
  final VirtualFile virtualFile=myPath.getVirtualFile();
  byte[] result=null;
  if (virtualFile != null) {
    result=getLastUpToDateContentFor(virtualFile);
  }
  if (result == null) {
    String revision=null;
    final GetFileContentOperation operation;
    if (virtualFile != null) {
      final Entry entry=myEntriesManager.getEntryFor(virtualFile.getParent(),virtualFile.getName());
      if (entry != null) {
        revision=entry.getRevision();
        operation=GetFileContentOperation.createForFile(virtualFile,new SimpleRevision(revision));
      }
 else {
        operation=GetFileContentOperation.createForFile(myPath);
      }
    }
 else {
      operation=GetFileContentOperation.createForFile(myPath);
    }
    if (operation.getRoot().isOffline())     return null;
    CvsVcs2.executeQuietOperation(CvsBundle.message("operation.name.get.file.content"),operation,myVcs.getProject());
    result=operation.tryGetFileBytes();
    if (result != null && revision != null) {
      CvsUtil.storeContentForRevision(virtualFile,revision,result);
    }
  }
  return result;
}
