{
  Element element=new Element("state");
  if (!shared) {
    element.setAttribute("enabled",Boolean.toString(myEnabled));
    element.setAttribute("enabledForTabs",Boolean.toString(myEnabledForTabs));
  }
  myModel.save(element,shared);
  if (!shared) {
    final boolean exists=findConfigurationByName(NonProjectFilesScope.NAME,myModel.getLocalConfigurations()) != null;
    if (myEnabledForNonProject && !exists) {
      myEnabledForNonProject=false;
    }
 else     if (!myEnabledForNonProject && exists) {
      myEnabledForNonProject=true;
    }
    element.setAttribute("showNonProject",Boolean.toString(myEnabledForNonProject));
  }
  return element;
}
