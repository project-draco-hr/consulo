{
  if (isIteratorNext(element,iteratorName)) {
    out.append(contentVariableName);
  }
 else {
    final PsiElement[] children=element.getChildren();
    if (children.length == 0) {
      out.append(element.getText());
    }
 else {
      boolean skippingWhiteSpace=false;
      for (int i=0; i < children.length; i++) {
        final PsiElement child=children[i];
        if (child.equals(childToSkip)) {
          skippingWhiteSpace=true;
        }
 else         if (child instanceof PsiWhiteSpace && skippingWhiteSpace) {
        }
 else {
          skippingWhiteSpace=false;
          replaceIteratorNext(child,contentVariableName,iteratorName,childToSkip,out);
        }
      }
    }
  }
}
