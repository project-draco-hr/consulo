{
  createProjectPom("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<build>"+ "  <directory>my-target</directory>"+ "</build>");
  updateAll(myProjectPom);
  MavenProject project=myTree.getRootProjects().get(0);
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target"),project.getBuildDirectory());
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target/classes"),project.getOutputDirectory());
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target/test-classes"),project.getTestOutputDirectory());
  MavenEmbeddersManager embeddersManager=new MavenEmbeddersManager(myProject);
  try {
    myTree.resolve(myProject,project,getMavenGeneralSettings(),embeddersManager,NULL_MAVEN_CONSOLE,EMPTY_MAVEN_PROCESS);
  }
  finally {
    embeddersManager.releaseInTests();
  }
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target"),project.getBuildDirectory());
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target/classes"),project.getOutputDirectory());
  PlatformTestUtil.assertPathsEqual(pathFromBasedir("my-target/test-classes"),project.getTestOutputDirectory());
}
