{
  myAfterVcsRefreshModification=ChangeListsModificationAfterCommit.NOTHING;
  if (myChangeList instanceof LocalChangeList) {
    final LocalChangeList localList=(LocalChangeList)myChangeList;
    final boolean containsAll=new HashSet<Change>(myIncludedChanges).containsAll(new HashSet<Change>(myChangeList.getChanges()));
    if (containsAll && !localList.isDefault() && !localList.isReadOnly()) {
      myAfterVcsRefreshModification=ChangeListsModificationAfterCommit.DELETE_LIST;
    }
 else     if (myConfiguration.OFFER_MOVE_TO_ANOTHER_CHANGELIST_ON_PARTIAL_COMMIT && (!containsAll) && localList.isDefault()&& myAllOfDefaultChangeListChangesIncluded) {
      myAfterVcsRefreshModification=ChangeListsModificationAfterCommit.MOVE_OTHERS;
    }
  }
}
