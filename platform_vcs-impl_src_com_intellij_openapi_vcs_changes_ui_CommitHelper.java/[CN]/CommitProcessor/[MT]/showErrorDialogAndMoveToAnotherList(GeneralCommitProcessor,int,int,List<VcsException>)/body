{
  WaitForProgressToShow.runOrInvokeLaterAboveProgress(new Runnable(){
    @Override public void run(){
      String message;
      if (errorsSize > 0 && warningsSize > 0) {
        message=VcsBundle.message("message.text.commit.failed.with.errors.and.warnings");
      }
 else       if (errorsSize > 0) {
        message=StringUtil.pluralize(VcsBundle.message("message.text.commit.failed.with.error"),errorsSize);
      }
 else {
        message=StringUtil.pluralize(VcsBundle.message("message.text.commit.finished.with.warning"),warningsSize);
      }
      message+=":\n" + StringUtil.join(errors,new Function<VcsException,String>(){
        @Override public String fun(        VcsException e){
          return e.getMessage();
        }
      }
,"\n");
      Messages.showErrorDialog(message,VcsBundle.message("message.title.commit"));
      if (errorsSize > 0) {
        processor.afterFailedCheckIn();
      }
    }
  }
,null,myProject);
}
