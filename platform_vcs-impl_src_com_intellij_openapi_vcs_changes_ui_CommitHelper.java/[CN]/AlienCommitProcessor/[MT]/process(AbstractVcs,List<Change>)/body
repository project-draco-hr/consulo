{
  if (myVcs.getName().equals(vcs.getName())) {
    final CheckinEnvironment environment=vcs.getCheckinEnvironment();
    if (environment != null) {
      Collection<FilePath> paths=ChangesUtil.getPaths(items);
      myPathsToRefresh.addAll(paths);
      final Object addData=(myAdditionalData == null) ? null : myAdditionalData.get(vcs.getName());
      final List<VcsException> exceptions=environment.commit(items,myCommitMessage,addData);
      if (exceptions != null && exceptions.size() > 0) {
        myVcsExceptions.addAll(exceptions);
        myChangesFailedToCommit.addAll(items);
      }
    }
  }
}
