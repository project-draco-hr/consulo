{
  if (myVcs.getName().equals(vcs.getName())) {
    final CheckinEnvironment environment=vcs.getCheckinEnvironment();
    if (environment != null) {
      Collection<FilePath> paths=ChangesUtil.getPaths(items);
      myPathsToRefresh.addAll(paths);
      final List<VcsException> exceptions=environment.commit(items,myCommitMessage,myAdditionalData,myFeedback);
      if (exceptions != null && exceptions.size() > 0) {
        myVcsExceptions.addAll(exceptions);
        myChangesFailedToCommit.addAll(items);
      }
    }
  }
}
