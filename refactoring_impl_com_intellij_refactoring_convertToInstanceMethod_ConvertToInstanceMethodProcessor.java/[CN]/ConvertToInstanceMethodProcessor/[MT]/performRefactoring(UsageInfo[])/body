{
  if (!CommonRefactoringUtil.checkReadOnlyStatus(myProject,myTargetClass))   return;
  final LocalHistoryAction lvcsAction=LvcsIntegration.checkinFilesBeforeRefactoring(myProject,getCommandName());
  try {
    doRefactoring(usages);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
 finally {
    LvcsIntegration.checkinFilesAfterRefactoring(myProject,lvcsAction);
  }
}
