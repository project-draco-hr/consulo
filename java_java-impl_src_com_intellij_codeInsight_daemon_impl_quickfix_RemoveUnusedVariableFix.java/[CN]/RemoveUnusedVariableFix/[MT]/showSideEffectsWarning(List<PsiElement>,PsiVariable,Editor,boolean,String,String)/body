{
  if (sideEffects.isEmpty())   return SideEffectWarningDialog.DELETE_ALL;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return canCopeWithSideEffects ? SideEffectWarningDialog.MAKE_STATEMENT : SideEffectWarningDialog.DELETE_ALL;
  }
  Project project=editor.getProject();
  HighlightManager highlightManager=HighlightManager.getInstance(project);
  PsiElement[] elements=sideEffects.toArray(new PsiElement[sideEffects.size()]);
  EditorColorsManager manager=EditorColorsManager.getInstance();
  TextAttributes attributes=manager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
  highlightManager.addOccurrenceHighlights(editor,elements,attributes,true,null);
  SideEffectWarningDialog dialog=new SideEffectWarningDialog(project,false,variable,beforeText,afterText,canCopeWithSideEffects);
  dialog.show();
  return dialog.getExitCode();
}
