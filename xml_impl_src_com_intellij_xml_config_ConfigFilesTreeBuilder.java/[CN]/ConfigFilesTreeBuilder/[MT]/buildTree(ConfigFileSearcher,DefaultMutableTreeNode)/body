{
  final MultiMap<Module,PsiFile> files=searcher.getFilesByModules();
  final MultiMap<VirtualFile,PsiFile> jars=searcher.getJars();
  final Set<PsiFile> psiFiles=buildModuleNodes(files,jars,root);
  final MultiMap<VirtualFile,PsiFile> virtualFiles=searcher.getVirtualFiles();
  for (  Map.Entry<VirtualFile,Collection<PsiFile>> entry : virtualFiles.entrySet()) {
    DefaultMutableTreeNode node=createFileNode(entry.getKey());
    List<PsiFile> list=new ArrayList<PsiFile>(entry.getValue());
    Collections.sort(list,new Comparator<PsiFile>(){
      @Override public int compare(      PsiFile o1,      PsiFile o2){
        return o1.getName().compareToIgnoreCase(o2.getName());
      }
    }
);
    for (    PsiFile file : list) {
      node.add(createFileNode(file));
    }
    root.add(node);
  }
  return psiFiles;
}
