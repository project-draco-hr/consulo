{
  Node node=getSelectedNode();
  if (key == DataKeys.PROJECT) {
    sink.put(DataKeys.PROJECT,myProject);
  }
 else   if (key == USAGE_VIEW_KEY) {
    sink.put(USAGE_VIEW_KEY,UsageViewImpl.this);
  }
 else   if (key == DataKeys.NAVIGATABLE_ARRAY) {
    sink.put(DataKeys.NAVIGATABLE_ARRAY,getNavigatablesForNodes(getSelectedNodes()));
  }
 else   if (key == DataKeys.EXPORTER_TO_TEXT_FILE) {
    sink.put(DataKeys.EXPORTER_TO_TEXT_FILE,myTextFileExporter);
  }
 else   if (key == USAGES_KEY) {
    final Set<Usage> selectedUsages=getSelectedUsages();
    sink.put(USAGES_KEY,selectedUsages != null ? selectedUsages.toArray(new Usage[selectedUsages.size()]) : null);
  }
 else   if (key == USAGE_TARGETS_KEY) {
    sink.put(USAGE_TARGETS_KEY,getSelectedUsageTargets());
  }
 else   if (key == DataKeys.VIRTUAL_FILE_ARRAY) {
    final Set<Usage> usages=getSelectedUsages();
    VirtualFile[] data=provideVirtualFileArray(usages != null ? usages.toArray(new Usage[usages.size()]) : null,getSelectedUsageTargets());
    sink.put(DataKeys.VIRTUAL_FILE_ARRAY,data);
  }
 else   if (key == DataKeys.HELP_ID) {
    sink.put(DataKeys.HELP_ID,HELP_ID);
  }
 else   if (node != null) {
    Object userObject=node.getUserObject();
    if (userObject instanceof TypeSafeDataProvider) {
      ((TypeSafeDataProvider)userObject).calcData(key,sink);
    }
 else     if (userObject instanceof DataProvider) {
      DataProvider dataProvider=(DataProvider)userObject;
      Object data=dataProvider.getData(key.getName());
      if (data != null) {
        sink.put(key,data);
      }
    }
  }
}
