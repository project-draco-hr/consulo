{
  Set<Usage> usages=getReadOnlyUsages();
  Set<VirtualFile> result=new THashSet<VirtualFile>();
  for (  Usage usage : usages) {
    if (usage instanceof UsageInFile) {
      UsageInFile usageInFile=(UsageInFile)usage;
      result.add(usageInFile.getFile());
    }
    if (usage instanceof UsageInFiles) {
      UsageInFiles usageInFiles=(UsageInFiles)usage;
      result.addAll(Arrays.asList(usageInFiles.getFiles()));
    }
  }
  for (  UsageTarget target : myTargets) {
    VirtualFile[] files=target.getFiles();
    if (files == null)     continue;
    result.addAll(Arrays.asList(files));
  }
  return result;
}
