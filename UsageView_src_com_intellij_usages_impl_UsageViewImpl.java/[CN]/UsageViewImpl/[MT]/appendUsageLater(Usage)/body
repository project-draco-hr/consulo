{
  myUsages.add(usage);
  ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  myFlushAlarm.cancelAllRequests();
  myFlushAlarm.addRequest(new Runnable(){
    public void run(){
      flush();
    }
  }
,300,indicator != null ? indicator.getModalityState() : ModalityState.defaultModalityState());
  myUsagesToFlush.offer(usage);
  if (myUsagesToFlush.size() > 50) {
    flush();
  }
}
