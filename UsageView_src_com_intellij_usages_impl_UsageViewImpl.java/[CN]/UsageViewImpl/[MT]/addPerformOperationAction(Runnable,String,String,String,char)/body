{
  addButtonToLowerPane(new Runnable(){
    public void run(){
      checkReadonlyUsages();
      PsiDocumentManager.getInstance(myProject).commitAllDocuments();
      if (cannotMakeString != null && myChangesDetected) {
        if (canPerformReRun() && allTargetsAreValid()) {
          int answer=Messages.showYesNoDialog(myProject,cannotMakeString + "\nWould you like to rerun the search now?","Error",Messages.getErrorIcon());
          if (answer == 0) {
            refreshUsages();
          }
        }
 else {
          Messages.showMessageDialog(myProject,cannotMakeString,"Error",Messages.getErrorIcon());
        }
        return;
      }
      close();
      CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
        public void run(){
          processRunnable.run();
        }
      }
,commandName,null);
    }
    private boolean allTargetsAreValid(){
      for (int i=0; i < myTargets.length; i++) {
        UsageTarget target=myTargets[i];
        if (!target.isValid())         return false;
      }
      return true;
    }
  }
,shortDescription,mnemonic);
}
