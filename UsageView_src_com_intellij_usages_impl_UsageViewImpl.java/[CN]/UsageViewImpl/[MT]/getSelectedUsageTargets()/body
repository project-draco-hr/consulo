{
  TreePath[] selectionPaths=myTree.getSelectionPaths();
  if (selectionPaths == null)   return null;
  Set<UsageTarget> targets=new THashSet<UsageTarget>();
  for (  TreePath selectionPath : selectionPaths) {
    Object lastPathComponent=selectionPath.getLastPathComponent();
    if (lastPathComponent instanceof UsageTargetNode) {
      UsageTargetNode usageTargetNode=(UsageTargetNode)lastPathComponent;
      UsageTarget target=usageTargetNode.getTarget();
      if (target != null && target.isValid()) {
        targets.add(target);
      }
    }
  }
  return targets.isEmpty() ? null : targets.toArray(new UsageTarget[targets.size()]);
}
