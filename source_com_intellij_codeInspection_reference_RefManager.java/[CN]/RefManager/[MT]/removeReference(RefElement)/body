{
  final HashMap<PsiElement,RefElement> refTable=getRefTable();
  if (refElem instanceof RefMethod) {
    RefMethod refMethod=(RefMethod)refElem;
    RefParameter[] params=refMethod.getParameters();
    for (int i=0; i < params.length; i++) {
      removeReference(params[i]);
    }
  }
  if (refTable.remove(refElem.getElement()) != null)   return;
  Set<PsiElement> keys=refTable.keySet();
  for (Iterator<PsiElement> iterator=keys.iterator(); iterator.hasNext(); ) {
    PsiElement psiElement=iterator.next();
    if (refTable.get(psiElement) == refElem) {
      refTable.remove(psiElement);
      return;
    }
  }
}
