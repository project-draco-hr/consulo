{
  PsiElement parent=place.getParent();
  if (parent instanceof GrCall) {
    List<PsiType> result=new ArrayList<PsiType>();
    GrCall call=(GrCall)parent;
    GrNamedArgument[] namedArgs=call.getNamedArguments();
    if (namedArgs.length > 0) {
      result.add(createMapType(place.getResolveScope()));
    }
    GrExpression[] expressions=call.getExpressionArguments();
    for (    GrExpression expression : expressions) {
      PsiType type=expression.getType();
      if (type == null) {
        result.add(nullAsBottom ? PsiType.NULL : TypesUtil.getJavaLangObject(call));
      }
 else {
        result.add(type);
      }
      if (stopAt == expression) {
        return result.toArray(new PsiType[result.size()]);
      }
    }
    GrClosableBlock[] closures=call.getClosureArguments();
    for (    GrClosableBlock closure : closures) {
      PsiType closureType=closure.getType();
      if (closureType != null) {
        result.add(closureType);
      }
      if (stopAt == closure) {
        break;
      }
    }
    return result.toArray(new PsiType[result.size()]);
  }
 else   if (parent instanceof GrAnonymousClassDefinition) {
    final GrAnonymousClassDefinition anonymous=(GrAnonymousClassDefinition)parent;
    final GrArgumentList argList=anonymous.getArgumentListGroovy();
    List<PsiType> result=new ArrayList<PsiType>();
    GrNamedArgument[] namedArgs=argList.getNamedArguments();
    if (namedArgs.length > 0) {
      result.add(createMapType(place.getResolveScope()));
    }
    GrExpression[] expressions=argList.getExpressionArguments();
    for (    GrExpression expression : expressions) {
      PsiType type=expression.getType();
      if (type == null) {
        result.add(nullAsBottom ? PsiType.NULL : TypesUtil.getJavaLangObject(argList));
      }
 else {
        result.add(type);
      }
      if (stopAt == expression) {
        break;
      }
    }
    return result.toArray(new PsiType[result.size()]);
  }
  return null;
}
