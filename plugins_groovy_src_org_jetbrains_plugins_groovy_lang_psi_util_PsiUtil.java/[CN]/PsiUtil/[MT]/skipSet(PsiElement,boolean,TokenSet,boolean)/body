{
  while (elem != null && elem.getNode() != null && set.contains(elem.getNode().getElementType()) && (skipNLs || elem.getText().indexOf('\n') == -1)) {
    if (forward) {
      elem=elem.getNextSibling();
    }
 else {
      elem=elem.getPrevSibling();
    }
  }
  return elem;
}
