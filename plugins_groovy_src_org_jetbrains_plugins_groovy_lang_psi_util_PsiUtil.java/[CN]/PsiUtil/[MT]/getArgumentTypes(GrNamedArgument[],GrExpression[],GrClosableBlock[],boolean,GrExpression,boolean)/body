{
  List<PsiType> result=new ArrayList<PsiType>();
  if (namedArgs.length > 0) {
    result.add(new GrMapType(namedArgs[0],byShape ? new GrNamedArgument[0] : namedArgs));
  }
  for (  GrExpression expression : expressions) {
    PsiType type=expression.getType();
    if (expression instanceof GrSpreadArgument) {
      if (type instanceof GrTupleType) {
        result.addAll(Arrays.asList(((GrTupleType)type).getComponentTypes()));
      }
 else {
        return null;
      }
    }
 else {
      if (type == null) {
        result.add(nullAsBottom ? null : TypesUtil.getJavaLangObject(expression));
      }
 else {
        if (stopAt == expression) {
          type=TypeConversionUtil.erasure(type);
        }
        result.add(type);
      }
    }
    if (stopAt == expression) {
      return result.toArray(new PsiType[result.size()]);
    }
  }
  for (  GrClosableBlock closure : closures) {
    PsiType closureType=closure.getType();
    if (closureType != null) {
      if (stopAt == closure) {
        closureType=TypeConversionUtil.erasure(closureType);
      }
      result.add(closureType);
    }
    if (stopAt == closure) {
      break;
    }
  }
  return result.toArray(new PsiType[result.size()]);
}
