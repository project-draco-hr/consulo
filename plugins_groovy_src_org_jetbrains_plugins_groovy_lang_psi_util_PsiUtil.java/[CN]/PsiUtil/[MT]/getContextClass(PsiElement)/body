{
  while (context != null) {
    if (context instanceof PsiClass && !isInDummyFile(context)) {
      return (PsiClass)context;
    }
 else     if (context instanceof GroovyFileBase && !isInDummyFile(context)) {
      return ((GroovyFileBase)context).getScriptClass();
    }
    context=context.getContext();
  }
  return null;
}
