{
  final ArrayList<Object> pathsToExpand=new ArrayList<Object>();
  final ArrayList<Object> selectionPaths=new ArrayList<Object>();
  Runnable expandPaths=null;
  if (restoreExpandedPaths) {
    TreeBuilderUtil.storePaths(getTreeBuilder(),(DefaultMutableTreeNode)myTree.getModel().getRoot(),pathsToExpand,selectionPaths,true);
    expandPaths=new Runnable(){
      public void run(){
        if (myTree != null && getTreeBuilder() != null && !getTreeBuilder().isDisposed()) {
          myTree.setSelectionPaths(new TreePath[0]);
          TreeBuilderUtil.restorePaths(getTreeBuilder(),pathsToExpand,selectionPaths,true);
        }
      }
    }
;
  }
  getTreeBuilder().addSubtreeToUpdate((DefaultMutableTreeNode)getTreeBuilder().getTreeModel().getRoot(),expandPaths);
}
