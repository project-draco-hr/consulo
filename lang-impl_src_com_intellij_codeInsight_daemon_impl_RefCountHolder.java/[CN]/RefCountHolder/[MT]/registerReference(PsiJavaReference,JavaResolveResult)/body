{
  assertIsAnalyzing();
  PsiElement refElement=resolveResult.getElement();
  PsiFile psiFile=refElement == null ? null : refElement.getContainingFile();
  if (psiFile != null)   psiFile=(PsiFile)psiFile.getNavigationElement();
  if (refElement != null && psiFile != null && myFile.getViewProvider().equals(psiFile.getViewProvider())) {
    registerLocalRef(ref,refElement.getNavigationElement());
  }
  PsiElement resolveScope=resolveResult.getCurrentFileResolveScope();
  if (resolveScope instanceof PsiImportStatementBase) {
    registerImportStatement(ref,(PsiImportStatementBase)resolveScope);
  }
}
