{
  CommonCodeStyleSettings defaultSettings=getDefaultSettings();
  Set<String> supportedFields=getSupportedFields();
  if (supportedFields != null) {
    supportedFields.add("PARENT_SETTINGS_INSTALLED");
    supportedFields.add("FORCE_REARRANGE_MODE");
  }
  DefaultJDOMExternalizer.writeExternal(this,element,new SupportedFieldsDiffFilter(this,supportedFields,defaultSettings));
  if (myIndentOptions != null) {
    IndentOptions defaultIndentOptions=defaultSettings != null ? defaultSettings.getIndentOptions() : null;
    Element indentOptionsElement=new Element(INDENT_OPTIONS_TAG);
    myIndentOptions.serialize(indentOptionsElement,defaultIndentOptions);
    if (!indentOptionsElement.getChildren().isEmpty()) {
      element.addContent(indentOptionsElement);
    }
  }
  if (myArrangementSettings != null) {
    Element container=new Element(ARRANGEMENT_ELEMENT_NAME);
    ArrangementUtil.writeExternal(container,myArrangementSettings,myLanguage);
    if (!container.getChildren().isEmpty()) {
      element.addContent(container);
    }
  }
}
