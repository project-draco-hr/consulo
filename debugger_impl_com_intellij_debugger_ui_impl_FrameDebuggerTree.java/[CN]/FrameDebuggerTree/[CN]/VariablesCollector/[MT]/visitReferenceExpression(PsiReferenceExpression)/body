{
  if (myLineRange.intersects(reference.getTextRange())) {
    final PsiElement psiElement=reference.resolve();
    if (psiElement instanceof PsiVariable) {
      final PsiVariable var=(PsiVariable)psiElement;
      if (var instanceof PsiField) {
        if (!hasSideEffects(reference)) {
          myExpressions.add(new TextWithImportsImpl(reference));
        }
      }
 else       if (var instanceof PsiLocalVariable) {
        if (myVisibleLocals.contains(((PsiLocalVariable)psiElement).getName())) {
          myVars.add(var.getName());
        }
      }
    }
  }
  super.visitReferenceExpression(reference);
}
