{
  final SourcePosition sourcePosition=getDebuggerContext().getSourcePosition();
  final Pair<Set<String>,Set<TextWithImports>> usedVars=ApplicationManager.getApplication().runReadAction(new Computable<Pair<Set<String>,Set<TextWithImports>>>(){
    public Pair<Set<String>,Set<TextWithImports>> compute(){
      return findReferencedVars(sourcePosition);
    }
  }
);
  if (usedVars.first.isEmpty() && usedVars.second.isEmpty()) {
    return;
  }
  final StackFrameProxyImpl frame=stackDescriptor.getFrameProxy();
  for (  LocalVariableProxyImpl local : frame.visibleVariables()) {
    if (usedVars.first.contains(local.name())) {
      final LocalVariableDescriptorImpl descriptor=myNodeManager.getLocalVariableDescriptor(stackDescriptor,local);
      myChildren.add(myNodeManager.createNode(descriptor,evaluationContext));
    }
  }
  for (  TextWithImports text : usedVars.second) {
    myChildren.add(myNodeManager.createNode(new WatchItemDescriptor(getProject(),text,false),evaluationContext));
  }
}
