{
  VirtualFile virtualFile=source.getVirtualFile();
  if (virtualFile.isDirectory()) {
    virtualFile=virtualFile.getParent();
    LOG.assertTrue(virtualFile.isDirectory());
  }
  final VirtualFile sourceRootForFile=myFileIndex.getSourceRootForFile(virtualFile);
  if (sourceRootForFile == null) {
    return "";
  }
  return checkCanCreateInSourceRoot(sourceRootForFile);
}
