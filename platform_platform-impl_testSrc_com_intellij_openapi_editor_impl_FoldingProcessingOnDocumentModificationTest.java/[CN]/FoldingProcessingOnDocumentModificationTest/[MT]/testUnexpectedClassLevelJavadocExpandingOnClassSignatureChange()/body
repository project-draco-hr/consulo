{
  String text="/**\n" + " * This is a test comment\n" + " */\n"+ "public <caret>class Test {\n"+ "}";
  init(text);
  CaretModel caretModel=myEditor.getCaretModel();
  int caretOffset=caretModel.getOffset();
  addCollapsedFoldRegion(0,text.indexOf("public") - 1,"/***/");
  assertEquals(caretOffset,caretModel.getOffset());
  type('a');
  assertEquals(caretOffset + 1,caretModel.getOffset());
  assertEquals(1,myEditor.getFoldingModel().getAllFoldRegions().length);
  FoldRegion foldRegion=getFoldRegion(0);
  assertFalse(foldRegion.isExpanded());
}
