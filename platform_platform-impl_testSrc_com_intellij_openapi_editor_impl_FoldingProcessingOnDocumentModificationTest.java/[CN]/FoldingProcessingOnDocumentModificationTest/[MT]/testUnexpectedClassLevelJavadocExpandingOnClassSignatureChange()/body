{
  String text="/**\n" + " * This is a test comment\n" + " */\n"+ "public <caret>class Test {\n"+ "}";
  init(text,TestFileType.JAVA);
  CaretModel caretModel=myEditor.getCaretModel();
  int caretOffset=caretModel.getOffset();
  assertEquals(caretOffset,caretModel.getOffset());
  updateFoldRegions();
  toggleFoldRegionState(getFoldRegion(0),false);
  type('a');
  updateFoldRegions();
  assertEquals(caretOffset + 1,caretModel.getOffset());
  assertEquals(1,myEditor.getFoldingModel().getAllFoldRegions().length);
  FoldRegion foldRegion=getFoldRegion(0);
  assertFalse(foldRegion.isExpanded());
}
