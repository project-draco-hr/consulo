{
  if (LanguageLevel.JDK_1_5.compareTo(PsiUtil.getLanguageLevel(file)) > 0)   return false;
  PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  if (element instanceof PsiIdentifier && element.getParent() instanceof PsiReferenceExpression && ((PsiReferenceExpression)element.getParent()).getQualifierExpression() != null) {
    PsiReferenceExpression refExpr=(PsiReferenceExpression)element.getParent();
    if (refExpr.getParameterList() != null && refExpr.getParameterList().getFirstChild() != null)     return false;
    PsiElement resolved=refExpr.resolve();
    if (resolved instanceof PsiMember && ((PsiModifierListOwner)resolved).hasModifierProperty(PsiModifier.STATIC)) {
      PsiClass aClass=((PsiMember)resolved).getContainingClass();
      if (aClass != null && !PsiTreeUtil.isAncestor(aClass,element,true)) {
        String qName=aClass.getQualifiedName();
        if (qName != null) {
          qName=qName + "." + refExpr.getReferenceName();
          if (file instanceof PsiJavaFile) {
            if (((PsiJavaFile)file).getImportList().findSingleImportStatement(refExpr.getReferenceName()) == null) {
              setText(CodeInsightBundle.message("intention.add.single.member.static.import.text",qName));
              return true;
            }
          }
        }
      }
    }
  }
  return false;
}
