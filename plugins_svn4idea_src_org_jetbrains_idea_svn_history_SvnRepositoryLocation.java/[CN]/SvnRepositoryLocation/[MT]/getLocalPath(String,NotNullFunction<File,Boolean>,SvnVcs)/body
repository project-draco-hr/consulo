{
  if (vcs.getProject().isDefault())   return null;
  final SVNURL fullPathURL;
  try {
    fullPathURL=SVNURL.parseURIEncoded(fullPath);
  }
 catch (  SVNException e) {
    return null;
  }
  final RootUrlInfo rootForUrl=vcs.getSvnFileUrlMapping().getWcRootForUrl(fullPath);
  if (rootForUrl != null) {
    return LocationDetector.filePathByUrlAndPath(fullPath,rootForUrl.getUrl().toString(),rootForUrl.getIoFile().getAbsolutePath(),detector);
  }
 else {
    final VirtualFile[] underVcs=ProjectLevelVcsManager.getInstance(vcs.getProject()).getRootsUnderVcs(vcs);
    if (underVcs.length == 0)     return null;
    for (    VirtualFile vf : underVcs) {
      final File ioFile=new File(vf.getPath());
      final SVNURL url=SvnUtil.getUrl(vcs,ioFile);
      if (url != null && SVNURLUtil.isAncestor(url,fullPathURL)) {
        return LocationDetector.filePathByUrlAndPath(fullPath,url.toString(),ioFile.getPath(),detector);
      }
    }
  }
  return null;
}
