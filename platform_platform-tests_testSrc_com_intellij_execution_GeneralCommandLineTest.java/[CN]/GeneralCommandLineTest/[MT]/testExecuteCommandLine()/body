{
  String[] parameters={"with space","\"quoted\"","\"quoted with spaces\"","","  ","param 1","\"","param2","trailing slash\\"};
  GeneralCommandLine commandLine=makeCommandLine(ParamPassingTest.class);
  commandLine.addParameters(parameters);
  Process process=commandLine.createProcess();
  String output=FileUtil.loadTextAndClose(process.getInputStream());
  int result=process.waitFor();
  assertEquals("Command:\n" + commandLine.getCommandLineString() + "\nOutput:\n"+ output,0,result);
  assertEquals("=====\n" + StringUtil.join(parameters,"\n") + "\n=====\n",StringUtil.convertLineSeparators(output));
}
