{
  String[] parameters={"with space","\"quoted\"","\"quoted with spaces\"","","  ","param 1","\"","param2","trailing slash\\"};
  GeneralCommandLine commandLine=makeJavaCommand(ParamPassingTest.class,null);
  commandLine.addParameters(parameters);
  String output=execAndGetOutput(commandLine,null);
  assertEquals("=====\n" + StringUtil.join(parameters,new Function<String,String>(){
    @Override public String fun(    String s){
      return ParamPassingTest.format(s);
    }
  }
,"\n") + "\n=====\n",StringUtil.convertLineSeparators(output));
}
