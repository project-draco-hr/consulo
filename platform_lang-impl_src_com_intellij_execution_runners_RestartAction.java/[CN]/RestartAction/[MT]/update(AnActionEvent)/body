{
  final Presentation presentation=event.getPresentation();
  String name=myEnvironment.getRunProfile().getName();
  if (name.startsWith(ActionsBundle.message("action.RerunFailedTests.text")))   name=myEnvironment.getRunnerAndConfigurationSettings().getName();
  presentation.setText(ExecutionBundle.message("rerun.configuration.action.name",name));
  final boolean isRunning=myProcessHandler != null && !myProcessHandler.isProcessTerminated();
  if (myProcessHandler != null && !isRunning) {
    myProcessHandler=null;
  }
  presentation.setIcon(isRunning ? STOP_AND_START_ICON : myIcon);
  boolean isTerminating=myProcessHandler != null && myProcessHandler.isProcessTerminating();
  boolean isStarting=ExecutorRegistry.getInstance().isStarting(myEnvironment.getProject(),myExecutor.getId(),myRunner.getRunnerId());
  presentation.setEnabled(!isStarting && !isTerminating);
}
