{
  final Presentation presentation=event.getPresentation();
  String name=myEnvironment.getRunProfile().getName();
  if (name.startsWith(ActionsBundle.message("action.RerunFailedTests.text"))) {
    RunnerAndConfigurationSettings settings=myEnvironment.getRunnerAndConfigurationSettings();
    if (settings != null)     name=settings.getName();
  }
  final boolean isRunning=myProcessHandler != null && !myProcessHandler.isProcessTerminated();
  boolean isTerminating=myProcessHandler != null && myProcessHandler.isProcessTerminating();
  boolean isStarting=ExecutorRegistry.getInstance().isStarting(myEnvironment.getProject(),myExecutor.getId(),myRunner.getRunnerId());
  presentation.setText(ExecutionBundle.message("rerun.configuration.action.name",name));
  presentation.setIcon(isRunning ? STOP_AND_START_ICON : myIcon);
  presentation.setEnabled(!isStarting && !isTerminating);
}
