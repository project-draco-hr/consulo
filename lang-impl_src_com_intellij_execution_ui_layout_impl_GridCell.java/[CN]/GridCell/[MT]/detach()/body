{
  myContext.saveUiState();
  final DimensionService dimService=DimensionService.getInstance();
  Point storedLocation=dimService.getLocation(getDimensionKey(),myContext.getProject());
  Dimension storedSize=dimService.getSize(getDimensionKey(),myContext.getProject());
  final IdeFrame frame=WindowManager.getInstance().getIdeFrame(myContext.getProject());
  final Rectangle targetBounds=frame.suggestChildFrameBounds();
  if (storedLocation != null && storedSize != null) {
    targetBounds.setLocation(storedLocation);
    targetBounds.setSize(storedSize);
  }
  if (storedLocation == null || storedSize == null) {
    if (myContents.size() > 0) {
      myContext.validate(myContents.getKeys().iterator().next(),new ActionCallback.Runnable(){
        public ActionCallback run(){
          if (!myTabs.isShowing()) {
            detachTo(targetBounds.getLocation(),targetBounds.getSize(),false);
          }
 else {
            detachForShowingTabs();
          }
          return new ActionCallback.Done();
        }
      }
);
      return;
    }
  }
  detachTo(targetBounds.getLocation(),targetBounds.getSize(),false);
}
