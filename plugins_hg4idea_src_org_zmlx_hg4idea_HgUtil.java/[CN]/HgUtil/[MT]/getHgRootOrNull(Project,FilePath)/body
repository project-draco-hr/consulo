{
  if (project == null) {
    return getNearestHgRoot(VcsUtil.getVirtualFile(filePath.getPath()));
  }
  return getNearestHgRoot(VcsUtil.getVcsRootFor(project,filePath));
}
