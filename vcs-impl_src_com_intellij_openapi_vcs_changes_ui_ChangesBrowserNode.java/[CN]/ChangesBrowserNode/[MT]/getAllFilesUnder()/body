{
  List<VirtualFile> files=new ArrayList<VirtualFile>();
  final Enumeration enumeration=breadthFirstEnumeration();
  while (enumeration.hasMoreElements()) {
    ChangesBrowserNode child=(ChangesBrowserNode)enumeration.nextElement();
    final Object value=child.getUserObject();
    if (value instanceof VirtualFile) {
      final VirtualFile file=(VirtualFile)value;
      if (file.isValid()) {
        files.add(file);
      }
    }
  }
  return files;
}
