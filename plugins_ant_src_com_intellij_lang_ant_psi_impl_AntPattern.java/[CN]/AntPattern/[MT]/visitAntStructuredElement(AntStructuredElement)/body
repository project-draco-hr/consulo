{
  final AntTypeDefinition typeDef=element.getTypeDefinition();
  if (typeDef != null) {
    final AntTypeId antTypeId=typeDef.getTypeId();
    if ("include".equals(antTypeId.getName())) {
      if (isEnabled(element)) {
        final String value=element.getSourceElement().getAttributeValue("name");
        if (value != null) {
          addIncludePattern(value);
        }
      }
    }
 else     if ("exclude".equals(antTypeId.getName())) {
      if (isEnabled(element)) {
        final String value=element.getSourceElement().getAttributeValue("name");
        if (value != null) {
          addExcludePattern(value);
        }
      }
    }
 else {
      final String includeAttribs=element.getSourceElement().getAttributeValue("includes");
      if (includeAttribs != null) {
        addPatterns(true,includeAttribs);
      }
      final String excludeAttribs=element.getSourceElement().getAttributeValue("excludes");
      if (excludeAttribs != null) {
        addPatterns(false,excludeAttribs);
      }
    }
    final PsiReference[] refs=element.getReferences();
    for (    PsiReference ref : refs) {
      if (ref instanceof AntRefIdReference) {
        final PsiElement psiElement=ref.resolve();
        if (psiElement instanceof AntStructuredElement) {
          ((AntStructuredElement)psiElement).acceptAntElementVisitor(this);
        }
      }
    }
  }
  super.visitAntStructuredElement(element);
}
