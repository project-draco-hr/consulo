{
  Set<AttributeFormat> formats=attr.getFormats();
  CompositeConverter composite=new CompositeConverter();
  String[] values=attr.getValues();
  boolean containsUnsupportedFormats=false;
  for (  AttributeFormat format : formats) {
    ResolvingConverter<String> converter=getStringConverter(format,values);
    if (converter != null) {
      composite.addConverter(converter);
    }
 else {
      containsUnsupportedFormats=true;
    }
  }
  ResourceReferenceConverter resConverter=getResourceReferenceConverter(attr);
  if (formats.contains(AttributeFormat.Flag)) {
    if (resConverter != null) {
      composite.addConverter(new LightFlagConverter(values));
    }
    return new FlagConverter(simplify(composite),values);
  }
  if (resConverter == null && formats.contains(AttributeFormat.Enum)) {
    resConverter=new ResourceReferenceConverter(Arrays.asList(ResourceType.INTEGER.getName()));
    resConverter.setQuiet(true);
  }
  ResolvingConverter<String> stringConverter=simplify(composite);
  if (resConverter != null) {
    resConverter.setAdditionalConverter(simplify(composite),containsUnsupportedFormats);
    return resConverter;
  }
  return stringConverter;
}
