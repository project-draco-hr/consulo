{
  if (project == null)   return Collections.emptySet();
  final Set<LibraryKind<?>> usedKinds=new HashSet<LibraryKind<?>>();
  final Processor<Library> processor=new Processor<Library>(){
    @Override public boolean process(    Library library){
      usedKinds.addAll(LibraryPresentationManagerImpl.getLibraryKinds(library,null));
      return true;
    }
  }
;
  for (  Module module : ModuleManager.getInstance(project).getModules()) {
    ModuleRootManager.getInstance(module).orderEntries().librariesOnly().forEachLibrary(processor);
  }
  final HashSet<UsageDescriptor> usageDescriptors=new HashSet<UsageDescriptor>();
  for (  LibraryKind<?> kind : usedKinds) {
    final GroupDescriptor group=GroupDescriptor.create(GROUP_ID);
    usageDescriptors.add(new UsageDescriptor(group,kind.getKindId(),1));
  }
  return usageDescriptors;
}
