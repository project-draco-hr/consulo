{
  final List<BeforeAfter<List<String>>> steps=hunk.getPatchSteps();
  final BeforeAfter<List<String>> first=steps.get(0);
  final BeforeAfter<List<String>> last=steps.get(steps.size() - 1);
  final boolean complementFirst=first.getBefore().isEmpty() || first.getAfter().isEmpty();
  final boolean complementLast=last.getBefore().isEmpty() || last.getAfter().isEmpty();
  final List<String> contextBefore=hunk.getContextBefore();
  if (complementFirst && !contextBefore.isEmpty()) {
    final String firstContext=contextBefore.get(contextBefore.size() - 1);
    first.getBefore().add(0,firstContext);
    first.getAfter().add(0,firstContext);
    contextBefore.remove(contextBefore.size() - 1);
  }
  final List<String> contextAfter=hunk.getContextAfter();
  if (complementLast && !contextAfter.isEmpty()) {
    final String firstContext=contextAfter.get(0);
    last.getBefore().add(firstContext);
    last.getAfter().add(firstContext);
    contextAfter.remove(0);
  }
}
