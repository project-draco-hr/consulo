{
  final JPanel result=new JPanel();
  result.setLayout(new BoxLayout(result,BoxLayout.X_AXIS));
  result.setBackground(Color.WHITE);
  result.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  final ButtonGroup group=new ButtonGroup();
  myColorToButtonMap=new HashMap<String,AbstractButton>();
  final Collection<String> names=myManager.getColorNames();
  for (  final String name : names) {
    final ColorButton colorButton=new ColorButton(name,myManager.getColor(name));
    colorButton.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        updateOKButton();
      }
    }
);
    colorButton.setBackground(Color.WHITE);
    colorButton.setBorder(BorderFactory.createEmptyBorder(5,10,5,10));
    group.add(colorButton);
    result.add(colorButton);
    myColorToButtonMap.put(name,colorButton);
    result.add(Box.createHorizontalStrut(5));
  }
  if (configuration != null) {
    final AbstractButton button=myColorToButtonMap.get(configuration.getColorName());
    if (button != null) {
      button.setSelected(true);
    }
  }
  return result;
}
