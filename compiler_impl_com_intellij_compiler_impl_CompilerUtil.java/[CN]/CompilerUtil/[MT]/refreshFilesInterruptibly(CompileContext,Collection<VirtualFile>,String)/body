{
  ThrowableRunnable<RuntimeException> runnable=new ThrowableRunnable<RuntimeException>(){
    public void run(){
      int i=0;
      for (      VirtualFile file : files) {
        context.getProgressIndicator().checkCanceled();
        if (files.size() > 100) {
          context.getProgressIndicator().setFraction(++i * 1.0 / files.size());
          context.getProgressIndicator().setText2(file.getPath());
        }
        file.refresh(false,true);
      }
    }
  }
;
  if (files.size() > 100) {
    CompileDriver.runInContext(context,title,runnable);
  }
 else {
    runnable.run();
  }
}
