{
  String javaVmExecutablePath=System.getProperty("java.home") + File.separator + "bin"+ File.separator+ "java";
  String classpath=System.getProperty("java.class.path");
  try {
    final Process process=Runtime.getRuntime().exec("cmd " + javaVmExecutablePath + " -cp "+ classpath+ " com.intellij.idea.Main");
    new Thread(new Redirector(process.getErrorStream(),System.err)).start();
    new Thread(new Redirector(process.getInputStream(),System.out)).start();
    process.waitFor();
  }
 catch (  IOException e) {
    System.out.println("Can't launch java VM executable: " + e.getMessage());
    e.printStackTrace();
  }
  System.out.println("Launcher exited");
}
