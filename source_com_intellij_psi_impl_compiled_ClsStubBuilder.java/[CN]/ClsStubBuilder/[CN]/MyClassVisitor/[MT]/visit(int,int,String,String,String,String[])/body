{
  String fqn=Type.getObjectType(name).getClassName();
  if (isAnonymousOrChildOf(name))   return;
  fqn=fqn.replace('$','.');
  final String shortName=PsiNameHelper.getShortClassName(fqn);
  boolean isDeprecated=(access & Opcodes.ACC_DEPRECATED) != 0;
  boolean isInterface=(access & Opcodes.ACC_INTERFACE) != 0;
  boolean isEnum=(access & Opcodes.ACC_ENUM) != 0;
  boolean isAnnotationType=(access & Opcodes.ACC_ANNOTATION) != 0;
  final byte flags=PsiClassStubImpl.packFlags(isDeprecated,isInterface,isEnum,false,false,isAnnotationType,false);
  myResult=new PsiClassStubImpl(myParent,fqn,shortName,null,flags);
  ((PsiClassStubImpl)myResult).setLanguageLevel(convertFromVersion(version));
  myModlist=new PsiModifierListStubImpl(myResult,packModlistFlags(access));
  CharacterIterator signatureIterator=signature != null ? new StringCharacterIterator(signature) : null;
  if (signatureIterator != null) {
    try {
      SignatureParsing.parseTypeParametersDeclaration(signatureIterator,myResult);
    }
 catch (    ClsFormatException e) {
      signatureIterator=null;
    }
  }
  String convertedSuper;
  List<String> convertedInterfaces=new ArrayList<String>();
  if (signatureIterator == null) {
    convertedSuper=parseClassDescription(superName,interfaces,convertedInterfaces);
  }
 else {
    try {
      convertedSuper=parseClassSignature(signatureIterator,convertedInterfaces);
    }
 catch (    ClsFormatException e) {
      convertedSuper=parseClassDescription(superName,interfaces,convertedInterfaces);
    }
  }
  String[] interfacesArray=convertedInterfaces.toArray(new String[convertedInterfaces.size()]);
  if (isInterface) {
    new PsiClassReferenceListStubImpl(myResult,interfacesArray,PsiReferenceList.Role.EXTENDS_LIST);
    new PsiClassReferenceListStubImpl(myResult,EMPTY_STRINGS,PsiReferenceList.Role.IMPLEMENTS_LIST);
  }
 else {
    if (convertedSuper != null && !"java.lang.Object".equals(convertedSuper)) {
      new PsiClassReferenceListStubImpl(myResult,new String[]{convertedSuper},PsiReferenceList.Role.EXTENDS_LIST);
    }
 else {
      new PsiClassReferenceListStubImpl(myResult,EMPTY_STRINGS,PsiReferenceList.Role.EXTENDS_LIST);
    }
    new PsiClassReferenceListStubImpl(myResult,interfacesArray,PsiReferenceList.Role.IMPLEMENTS_LIST);
  }
}
