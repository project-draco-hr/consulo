{
  ColoredTreeCellRenderer r=getTextRenderer();
  if (!(value instanceof CheckedTreeNode)) {
    renderUnknown(r,value);
    return;
  }
  CheckedTreeNode node=(CheckedTreeNode)value;
  if (!(node.getUserObject() instanceof VirtualFile)) {
    renderUnknown(r,node.getUserObject());
    return;
  }
  VirtualFile file=(VirtualFile)node.getUserObject();
  if (leaf) {
    VirtualFile parent=(VirtualFile)((CheckedTreeNode)node.getParent()).getUserObject();
    Icon i=file.getIcon();
    if (i != null) {
      r.setIcon(i);
    }
    r.append(GitUtil.getRelativeFilePath(file,parent),SimpleTextAttributes.REGULAR_ATTRIBUTES,true);
  }
 else {
    r.append(file.getPresentableUrl(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES,true);
  }
}
