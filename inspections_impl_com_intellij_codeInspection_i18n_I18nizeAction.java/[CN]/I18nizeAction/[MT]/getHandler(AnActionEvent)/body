{
  final Editor editor=getEditor(e);
  if (editor == null)   return null;
  PsiFile psiFile=e.getData(LangDataKeys.PSI_FILE);
  if (psiFile == null)   return null;
  final PsiLiteralExpression literalExpression=getEnclosingStringLiteral(psiFile,editor);
  TextRange range=getSelectedRange(getEditor(e),psiFile);
  PsiElement element=psiFile.findElementAt(editor.getCaretModel().getOffset());
  if (element == null)   return null;
  if (range != null && ConcatenationToMessageFormatAction.getEnclosingLiteralConcatenation(element) != null) {
    return new I18nizeConcatenationQuickFix();
  }
 else   if (literalExpression != null && range != null && literalExpression.getTextRange().contains(range)) {
    return new I18nizeQuickFix();
  }
 else   if (psiFile instanceof JspFile && range != null) {
    return this;
  }
 else {
    return null;
  }
}
