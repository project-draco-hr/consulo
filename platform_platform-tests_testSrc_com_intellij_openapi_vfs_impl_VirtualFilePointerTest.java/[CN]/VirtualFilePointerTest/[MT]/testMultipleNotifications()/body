{
  final File tempDir=createTempDirectory();
  final File file_f1=new File(tempDir,"f1");
  final File file_f2=new File(tempDir,"f2");
  final LoggingListener listener=new LoggingListener();
  final VirtualFilePointer pointer_f1=createPointerByFile(file_f1,listener);
  final VirtualFilePointer pointer_f2=createPointerByFile(file_f2,listener);
  assertFalse(pointer_f1.isValid());
  assertFalse(pointer_f2.isValid());
  file_f1.createNewFile();
  file_f2.createNewFile();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      LocalFileSystem.getInstance().refresh(false);
    }
  }
);
  assertEquals("[before:false:false, after:true:true]",listener.getLog().toString());
}
