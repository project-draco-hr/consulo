{
  FilePointerPartNode.pushDebug(false,disposable);
  LoggingListener listener=new LoggingListener();
  final List<VFileEvent> events=new ArrayList<VFileEvent>();
  final File ioTempDir=createTempDirectory();
  final VirtualFile temp=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(ioTempDir);
  for (int i=0; i < 100000; i++) {
    myVirtualFilePointerManager.create(VfsUtilCore.pathToUrl("/a/b/c/d/" + i),disposable,listener);
    events.add(new VFileCreateEvent(this,temp,"xxx" + i,false,true));
  }
  PlatformTestUtil.startPerformanceTest("vfp update",10000,new ThrowableRunnable(){
    @Override public void run() throws Throwable {
      for (int i=0; i < 100; i++) {
        myVirtualFilePointerManager.before(events);
        myVirtualFilePointerManager.after(events);
      }
    }
  }
).assertTiming();
}
