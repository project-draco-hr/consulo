{
  Application application=ApplicationManager.getApplication();
  VirtualFile previous=application.runWriteAction(new Computable<VirtualFile>(){
    public VirtualFile compute(){
      return LocalFileSystem.getInstance().refreshAndFindFileByPath(externalEditorPath.getText().replace('\\','/'));
    }
  }
);
  FileChooserDescriptor fileDescriptor=new FileChooserDescriptor(true,SystemInfo.isMac,false,false,false,false);
  fileDescriptor.setShowFileSystemRoots(true);
  fileDescriptor.setTitle(ImagesBundle.message("select.external.executable.title"));
  fileDescriptor.setDescription(ImagesBundle.message("select.external.executable.message"));
  FileChooser.chooseFilesWithSlideEffect(fileDescriptor,null,previous,new Consumer<VirtualFile[]>(){
    @Override public void consume(    VirtualFile[] virtualFiles){
      if (virtualFiles != null && virtualFiles.length > 0) {
        String path=virtualFiles[0].getPath();
        externalEditorPath.setText(path);
      }
    }
  }
);
}
