{
  PsiField psiField=(PsiField)getElement();
  if (psiField != null) {
    RefUtil.addReferences(psiField,this,psiField.getInitializer());
    if (psiField instanceof PsiEnumConstant) {
      RefUtil.addReferences(psiField,this,psiField);
    }
    if (psiField.getInitializer() != null || psiField instanceof PsiEnumConstant) {
      if (!checkFlag(USED_FOR_WRITING_MASK)) {
        setFlag(true,ASSIGNED_ONLY_IN_INITIALIZER);
        setFlag(true,USED_FOR_WRITING_MASK);
      }
    }
    PsiType type=psiField.getType();
    if (type != null) {
      PsiType psiType=type;
      RefClass ownerClass=RefUtil.getOwnerClass(getRefManager(),psiField);
      if (ownerClass != null) {
        psiType=psiType.getDeepComponentType();
        if (psiType instanceof PsiClassType) {
          PsiClass psiClass=PsiUtil.resolveClassInType(psiType);
          if (psiClass != null && RefUtil.belongsToScope(psiClass,getRefManager())) {
            RefClass refClass=(RefClass)getRefManager().getReference(psiClass);
            if (refClass != null) {
              refClass.addTypeReference(ownerClass);
              refClass.addClassExporter(this);
            }
          }
        }
      }
    }
  }
}
