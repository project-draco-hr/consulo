{
  final JPanel jdkPanel=new JPanel(new GridBagLayout());
  myProjectJdkNameLabel=new SimpleColoredComponent();
  myCbModuleJdk=new JdkComboBox();
  myCbModuleJdk.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED) {
        mySelectedModuleJdk=myCbModuleJdk.getSelectedJdk();
      }
    }
  }
);
  myRbUseProjectJdk=new JRadioButton(ProjectBundle.message("module.libraries.target.jdk.project.radio"),myRootModel.isJdkInherited());
  myRbUseCustomJdk=new JRadioButton(ProjectBundle.message("module.libraries.target.jdk.module.radio"),!myRootModel.isJdkInherited());
  final ButtonGroup buttonGroup=new ButtonGroup();
  buttonGroup.add(myRbUseProjectJdk);
  buttonGroup.add(myRbUseCustomJdk);
  myRbUseProjectJdk.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED) {
        updateJdkPanelControls();
      }
    }
  }
);
  myRbUseCustomJdk.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED) {
        updateJdkPanelControls();
      }
    }
  }
);
  myChangeProjectJdkButton=new FixedSizeButton(20);
  myChangeProjectJdkButton.addActionListener(new ChangeJdkAction(ProjectBundle.message("module.libraries.target.jdk.select.title"),myChangeProjectJdkButton){
    public ProjectJdk getProjectJdkToSelect(){
      return ProjectRootManager.getInstance(myProject).getProjectJdk();
    }
    public void setChosenJdk(    ProjectJdk jdk){
      ProjectRootManager.getInstance(myProject).setProjectJdk(jdk);
    }
  }
);
  myChangeModuleJdkButton=new FixedSizeButton(20);
  myChangeModuleJdkButton.addActionListener(new ConfigureJdkAction(myChangeModuleJdkButton));
  myCbModuleJdk.setPreferredSize(new Dimension(myCbModuleJdk.getPreferredSize().width,myChangeModuleJdkButton.getPreferredSize().height));
  jdkPanel.add(myRbUseProjectJdk,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,0.0,0.0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(0,6,0,0),0,0));
  jdkPanel.add(myProjectJdkNameLabel,new GridBagConstraints(1,GridBagConstraints.RELATIVE,1,1,0.0,0.0,GridBagConstraints.WEST,GridBagConstraints.BOTH,new Insets(0,2,0,0),0,0));
  jdkPanel.add(myChangeProjectJdkButton,new GridBagConstraints(2,GridBagConstraints.RELATIVE,1,1,0.0,0.0,GridBagConstraints.EAST,GridBagConstraints.NONE,new Insets(0,4,0,6),0,0));
  jdkPanel.add(myRbUseCustomJdk,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,0.0,1.0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(5,6,0,0),0,0));
  jdkPanel.add(myCbModuleJdk,new GridBagConstraints(1,GridBagConstraints.RELATIVE,1,1,0.0,1.0,GridBagConstraints.WEST,GridBagConstraints.NONE,new Insets(5,2,0,0),0,0));
  jdkPanel.add(myChangeModuleJdkButton,new GridBagConstraints(2,GridBagConstraints.RELATIVE,1,1,0.0,1.0,GridBagConstraints.EAST,GridBagConstraints.NONE,new Insets(5,4,0,6),0,0));
  jdkPanel.add(Box.createHorizontalGlue(),new GridBagConstraints(3,GridBagConstraints.RELATIVE,1,2,1.0,1.0,GridBagConstraints.CENTER,GridBagConstraints.BOTH,new Insets(0,0,0,0),0,0));
  updateJdkPanelControls();
  return jdkPanel;
}
