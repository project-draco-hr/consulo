{
  final List<LayoutUsageData> inlineInfos=new ArrayList<LayoutUsageData>();
  for (  UsageInfo usage : usages) {
    final PsiElement element=usage.getElement();
    if (element == null)     continue;
    final XmlTag tag=PsiTreeUtil.getParentOfType(element,XmlTag.class);
    final LayoutUsageData usageData=tag != null ? AndroidInlineUtil.getLayoutUsageData(tag) : null;
    if (usageData != null && usageData.getReference().computeTargetElements().length == 1) {
      inlineInfos.add(usageData);
    }
  }
  for (  LayoutUsageData info : inlineInfos) {
    try {
      info.inline(myLayoutRootTag);
    }
 catch (    AndroidRefactoringErrorException e) {
      LOG.info(e);
      String message=e.getMessage();
      if (message == null) {
        message="Refactoring was performed with errors";
      }
      AndroidUtils.reportError(myProject,message,AndroidBundle.message("android.inline.style.title"));
      return;
    }
  }
  if (myUsageElement == null) {
    myLayoutFile.delete();
  }
}
