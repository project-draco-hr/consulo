{
  return new NameSuggestionsGenerator(){
    private final JavaCodeStyleManager myCodeStyleManager=JavaCodeStyleManager.getInstance(project);
    public SuggestedNameInfo getSuggestedNameInfo(    PsiType type){
      VariableKind variableKind=willBeDeclaredStatic ? VariableKind.STATIC_FIELD : VariableKind.FIELD;
      String propertyName=null;
      if (isInvokedOnDeclaration) {
        propertyName=myCodeStyleManager.variableNameToPropertyName(localVariable.getName(),VariableKind.LOCAL_VARIABLE);
      }
      final SuggestedNameInfo nameInfo=myCodeStyleManager.suggestVariableName(variableKind,propertyName,initializerExpression,type);
      if (initializerExpression != null) {
        String[] names=nameInfo.names;
        for (int i=0, namesLength=names.length; i < namesLength; i++) {
          String name=names[i];
          if (parentClass.findFieldByName(name,false) != null) {
            names[i]=myCodeStyleManager.suggestUniqueVariableName(name,initializerExpression,true);
          }
        }
      }
      final String[] strings=AbstractJavaInplaceIntroducer.appendUnresolvedExprName(JavaCompletionUtil.completeVariableNameForRefactoring(myCodeStyleManager,type,VariableKind.LOCAL_VARIABLE,nameInfo),initializerExpression);
      return new SuggestedNameInfo.Delegate(enteredName != null ? ArrayUtil.mergeArrays(new String[]{enteredName},strings) : strings,nameInfo);
    }
  }
;
}
