{
  PsiBuilder.Marker marker=builder.mark();
  final PsiBuilder.Marker marker2=builder.mark();
  final boolean result=ParserUtils.getToken(builder,mDOLLAR_SLASH_REGEX_BEGIN);
  LOG.assertTrue(result);
  boolean inj=false;
  ParserUtils.getToken(builder,mDOLLAR_SLASH_REGEX_CONTENT);
  while (parseInjection(builder,parser)) {
    inj=true;
    ParserUtils.getToken(builder,mDOLLAR_SLASH_REGEX_CONTENT);
  }
  if (!ParserUtils.getToken(builder,mDOLLAR_SLASH_REGEX_END)) {
    builder.error(GroovyBundle.message("dollar.slash.end.expected"));
  }
  if (inj) {
    marker2.drop();
    marker.done(REGEX);
  }
 else {
    marker2.done(mDOLLAR_SLASH_REGEX_LITERAL);
    if (forRefExpr) {
      marker.drop();
    }
 else {
      marker.done(LITERAL);
    }
  }
  return inj;
}
