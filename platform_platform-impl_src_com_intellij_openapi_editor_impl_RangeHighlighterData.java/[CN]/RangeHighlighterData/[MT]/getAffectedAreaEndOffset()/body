{
  int endOffset=getRangeHighlighter().getEndOffset();
  if (getTargetArea() == HighlighterTargetArea.EXACT_RANGE)   return endOffset;
  int textLength=myModel.getDocument().getTextLength();
  if (endOffset == textLength)   return endOffset;
  return Math.min(textLength,myModel.getDocument().getLineEndOffset(myModel.getDocument().getLineNumber(endOffset)) + 1);
}
