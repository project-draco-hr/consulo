{
  String cvsRoot=settings.getCvsRootAsString();
  String stored=getPassword(cvsRoot);
  if (stored != null) {
    IConnection connection=settings.createConnection(new ReadWriteStatistics());
    try {
      connection.open(new StreamLogger());
      settings.setOffline(false);
      return true;
    }
 catch (    AuthenticationException e) {
      if (settings.checkReportOfflineException(e,project)) {
        return false;
      }
 else {
        settings.showConnectionErrorMessage(getMessageFrom(e),project);
        settings.releasePassword();
        return relogin(settings,executor,project);
      }
    }
 finally {
      try {
        connection.close();
      }
 catch (      IOException e) {
      }
    }
  }
  String password=requestForPassword(cvsRoot);
  if (password == null)   return false;
  try {
    storePassword(cvsRoot,password);
  }
 catch (  IOException e) {
    Messages.showMessageDialog(CvsBundle.message("error.message.cannot.store.password",e.getLocalizedMessage()),CvsBundle.message("error.title.storing.cvs.password"),Messages.getErrorIcon());
    return false;
  }
  settings.storePassword(password);
  return login(settings,executor,project);
}
