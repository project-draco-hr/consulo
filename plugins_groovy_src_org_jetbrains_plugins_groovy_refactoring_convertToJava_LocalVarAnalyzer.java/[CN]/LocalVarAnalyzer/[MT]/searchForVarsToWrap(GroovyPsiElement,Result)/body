{
  LocalVarAnalyzer visitor=new LocalVarAnalyzer();
  root.accept(visitor);
  Set<GrVariable> toWrap=analyzedVars == null ? new HashSet<GrVariable>() : analyzedVars.toWrap;
  Set<GrVariable> toMakeFinal=analyzedVars == null ? new HashSet<GrVariable>() : analyzedVars.toMakeFinal;
  for (  GrVariable v : visitor.touched) {
    if (visitor.rewritten.contains(v)) {
      toWrap.add(v);
    }
 else {
      toMakeFinal.add(v);
    }
  }
  return analyzedVars == null ? new Result(toMakeFinal,toWrap) : analyzedVars;
}
