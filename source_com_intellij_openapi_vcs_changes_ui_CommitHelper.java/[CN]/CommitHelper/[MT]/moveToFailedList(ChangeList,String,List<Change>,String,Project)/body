{
  if (failedChanges.containsAll(changeList.getChanges()))   return;
  final ChangeListManager changeListManager=ChangeListManager.getInstance(project);
  int index=1;
  String failedListName=newChangelistName;
  while (changeListManager.findChangeList(failedListName) != null) {
    index++;
    failedListName=newChangelistName + " (" + index+ ")";
  }
  final LocalChangeList failedList=changeListManager.addChangeList(failedListName,commitMessage);
  changeListManager.moveChangesTo(failedList,failedChanges.toArray(new Change[failedChanges.size()]));
}
