{
  final List<VcsException> vcsExceptions=new ArrayList<VcsException>();
  final List<Change> changesFailedToCommit=new ArrayList<Change>();
  final Runnable action=checkinAction(vcsExceptions,changesFailedToCommit,myChangeList);
  if (myForceSyncCommit) {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(action,myActionName,true,myProject);
  }
 else {
    ProgressManager.getInstance().runProcessWithProgressAsynchronously(myProject,myActionName,new Runnable(){
      public void run(){
        final ProjectLevelVcsManager vcsManager=ProjectLevelVcsManager.getInstance(myProject);
        vcsManager.startBackgroundVcsOperation();
        try {
          action.run();
        }
  finally {
          vcsManager.stopBackgroundVcsOperation();
        }
      }
    }
,null,null,VcsConfiguration.getInstance(myProject).getCommitOption());
  }
}
