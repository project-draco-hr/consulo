{
  if (path.startsWith("/")) {
    if (rootFinder != null) {
      int moduleNameEnd=endOfToken(path,1);
      String otherRoot=rootFinder.getRootByName(path.substring(1,moduleNameEnd));
      if (otherRoot != null) {
        return getRelative(baseRoot,otherRoot + path.substring(moduleNameEnd));
      }
    }
    return UNRESOLVED_PREFIX + path.substring(1);
  }
  if (isAbsolute(path)) {
    try {
      return getRelative(normalize(new File(baseRoot).getCanonicalPath()),normalize(new File(path).getCanonicalPath()));
    }
 catch (    IOException e) {
      return path;
    }
  }
  return path;
}
