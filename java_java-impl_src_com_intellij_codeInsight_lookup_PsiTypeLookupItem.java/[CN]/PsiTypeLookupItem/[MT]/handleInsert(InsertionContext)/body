{
  context.getDocument().insertString(context.getTailOffset(),calcGenerics());
  DefaultInsertHandler.addImportForItem(context,this);
  PostprocessReformattingAspect.getInstance(context.getProject()).doPostponedFormatting();
  int tail=context.getTailOffset();
  String braces=StringUtil.repeat("[]",getBracketsCount());
  Editor editor=context.getEditor();
  if (!braces.isEmpty()) {
    context.getDocument().insertString(tail,braces);
    editor.getCaretModel().moveToOffset(tail + 1);
    if (context.getCompletionChar() == '[') {
      context.setAddCompletionChar(false);
    }
  }
 else {
    editor.getCaretModel().moveToOffset(tail);
  }
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  InsertHandler handler=getInsertHandler();
  if (handler != null && !(handler instanceof DefaultInsertHandler)) {
    handler.handleInsert(context,this);
  }
}
