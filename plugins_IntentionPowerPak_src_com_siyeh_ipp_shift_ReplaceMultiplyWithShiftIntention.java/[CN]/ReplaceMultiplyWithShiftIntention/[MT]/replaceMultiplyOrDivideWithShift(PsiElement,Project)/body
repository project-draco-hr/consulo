{
  final PsiBinaryExpression exp=(PsiBinaryExpression)matchingElement;
  final PsiExpression lhs=exp.getLOperand();
  final PsiExpression rhs=exp.getROperand();
  final PsiJavaToken sign=exp.getOperationSign();
  final IElementType tokenType=sign.getTokenType();
  final String operatorString;
  if (tokenType.equals(JavaTokenType.ASTERISK)) {
    operatorString="<<";
  }
 else {
    operatorString=">>";
  }
  final String lhsText;
  if (ParenthesesUtils.getPrecendence(lhs) > ParenthesesUtils.SHIFT_PRECEDENCE) {
    lhsText='(' + lhs.getText() + ')';
  }
 else {
    lhsText=lhs.getText();
  }
  String expString=lhsText + operatorString + ShiftUtils.getLogBase2(rhs);
  final PsiElement parent=exp.getParent();
  if (parent != null && parent instanceof PsiExpression) {
    if (!(parent instanceof PsiParenthesizedExpression) && ParenthesesUtils.getPrecendence((PsiExpression)parent) < ParenthesesUtils.SHIFT_PRECEDENCE) {
      expString='(' + expString + ')';
    }
  }
  replaceExpression(project,expString,exp);
}
