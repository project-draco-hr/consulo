{
  boolean rootTagChecked=false;
  IElementType tokenType;
  while ((tokenType=lexer.getTokenType()) != null) {
    if (tokenType == XML_ATTLIST_DECL_START) {
      TreeUtil.addChildren(root,parseAttlistDecl(lexer));
    }
 else     if (tokenType == XML_ELEMENT_DECL_START) {
      TreeUtil.addChildren(root,parseElementDecl(lexer));
    }
 else     if (tokenType == XML_ENTITY_DECL_START) {
      TreeUtil.addChildren(root,parseEntityDecl(lexer));
    }
 else     if (tokenType == XML_NOTATION_DECL_START) {
      TreeUtil.addChildren(root,parseNotationDecl(lexer));
    }
 else     if (tokenType == XML_ENTITY_REF_TOKEN) {
      TreeUtil.addChildren(root,parseEntityRef(lexer));
    }
 else     if (parseProcessingInstruction(root,lexer)) {
    }
 else     if (_parseTag(root,lexer,names)) {
    }
 else     if (parseConditionalSection(root,lexer)) {
    }
 else     if (tokenType != null) {
      if (!rootTagChecked) {
        rootTagChecked=true;
      }
      addToken(root,lexer);
    }
  }
  if (!rootTagChecked) {
    rootTagChecked=true;
  }
  ParseUtil.insertMissingTokens(root,((FilterLexer)lexer).getOriginal(),0,lexer.getBufferEnd(),-1,WhiteSpaceAndCommentsProcessor.INSTANCE,myContext);
}
