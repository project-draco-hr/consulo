{
  if (ref instanceof GrEnumConstant)   return ((GrEnumConstant)ref).resolveConstructorGenerics();
  PsiElement parent=ref.getParent();
  if (parent instanceof GrCallExpression) {
    final GroovyResolveResult[] variants=((GrCallExpression)parent).getMethodVariants();
    return variants.length == 1 ? variants[0] : null;
  }
 else   if (parent instanceof GrApplicationStatement) {
    final GrExpression expression=((GrApplicationStatement)parent).getFunExpression();
    if (expression instanceof GrReferenceExpression) {
      return ((GrReferenceExpression)expression).advancedResolve();
    }
  }
 else   if (parent instanceof GrConstructorInvocation) {
    return ((GrConstructorInvocation)parent).resolveConstructorGenerics();
  }
  return null;
}
