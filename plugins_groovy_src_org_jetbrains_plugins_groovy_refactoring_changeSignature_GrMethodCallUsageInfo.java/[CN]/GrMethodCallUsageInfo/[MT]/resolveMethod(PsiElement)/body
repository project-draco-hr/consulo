{
  if (ref instanceof GrEnumConstant)   return ((GrEnumConstant)ref).resolveConstructor();
  PsiElement parent=ref.getParent();
  if (parent instanceof GrCallExpression) {
    return ((GrCallExpression)parent).resolveMethod();
  }
 else   if (parent instanceof GrApplicationStatement) {
    final GrExpression expression=((GrApplicationStatement)parent).getFunExpression();
    if (expression instanceof GrReferenceExpression) {
      final PsiElement element=((GrReferenceExpression)expression).resolve();
      if (element instanceof PsiMethod) {
        return (PsiMethod)element;
      }
    }
  }
 else   if (parent instanceof GrConstructorInvocation) {
    return ((PsiNewExpression)parent.getParent()).resolveConstructor();
  }
  return null;
}
