{
  PsiExpression expression;
  if (mySubExpressionValue == null) {
    expression=mySubExpression;
  }
 else {
    PsiExpression constExpression=PsiManager.getInstance(project).getElementFactory().createExpressionFromText(mySubExpressionValue.toString(),mySubExpression);
    expression=(PsiExpression)mySubExpression.replace(constExpression);
  }
  while (expression.getParent() instanceof PsiExpression) {
    expression=(PsiExpression)expression.getParent();
  }
  final PsiExpression newExpression=simplifyExpression(expression);
  expression.replace(newExpression);
}
