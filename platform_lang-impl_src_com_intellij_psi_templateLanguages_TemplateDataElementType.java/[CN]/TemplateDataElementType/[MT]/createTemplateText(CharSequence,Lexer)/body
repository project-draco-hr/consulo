{
  StringBuilder result=new StringBuilder(buf.length());
  lexer.start(buf);
  while (lexer.getTokenType() != null) {
    if (lexer.getTokenType() == myTemplateElementType) {
      appendCurrentTemplateToken(result,buf,lexer);
    }
    lexer.advance();
  }
  return result;
}
