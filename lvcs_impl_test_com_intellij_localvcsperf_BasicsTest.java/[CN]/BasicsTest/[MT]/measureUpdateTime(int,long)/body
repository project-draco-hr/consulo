{
  final LocalFileSystem fs=createMock(LocalFileSystem.class);
  expect(fs.physicalContentsToByteArray((VirtualFile)anyObject())).andStubReturn(new byte[0]);
  final VirtualFile root=buildVFSTree(timestamp);
  assertExecutionTime(expected,new RunnableAdapter(){
    public void doRun(){
      Updater u=new Updater(vcs,new TestFileFilter(),root);
      CacheUpdaterHelper.performUpdate(u);
    }
  }
);
}
