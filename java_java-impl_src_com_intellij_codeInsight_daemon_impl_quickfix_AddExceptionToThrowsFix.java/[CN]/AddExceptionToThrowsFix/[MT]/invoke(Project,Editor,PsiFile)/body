{
  if (!CodeInsightUtilBase.prepareFileForWrite(file))   return;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final PsiMethod targetMethod=PsiTreeUtil.getParentOfType(myWrongElement,PsiMethod.class);
  PsiElement element=findElement(myWrongElement,targetMethod);
  LOG.assertTrue(element != null);
  final Set<PsiClassType> unhandledExceptions=filterInProjectExceptions(targetMethod,ExceptionUtil.getUnhandledExceptions(element));
  addExceptionsToThrowsList(project,targetMethod,unhandledExceptions);
}
