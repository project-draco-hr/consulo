{
  if (!CodeInsightUtilBase.prepareFileForWrite(file))   return;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiMethod targetMethod=PsiTreeUtil.getParentOfType(myWrongElement,PsiMethod.class);
  List<PsiClassType> exceptions=getUnhandledExceptions(myWrongElement,targetMethod);
  if (exceptions == null || targetMethod == null)   return;
  Set<PsiClassType> unhandledExceptions=new THashSet<PsiClassType>(exceptions);
  addExceptionsToThrowsList(project,targetMethod,unhandledExceptions);
}
