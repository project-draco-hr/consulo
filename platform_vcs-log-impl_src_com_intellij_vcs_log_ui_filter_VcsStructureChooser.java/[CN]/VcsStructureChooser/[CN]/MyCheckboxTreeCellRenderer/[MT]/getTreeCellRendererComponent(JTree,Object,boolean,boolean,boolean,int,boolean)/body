{
  invalidate();
  if (value == null)   return myEmpty;
  VirtualFile file=getFile(value);
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  if (file == null) {
    Object uo=node.getUserObject();
    if (uo instanceof String) {
      myColoredRenderer.getTreeCellRendererComponent(tree,node,selected,expanded,leaf,row,hasFocus);
      return myColoredRenderer;
    }
    return myEmpty;
  }
  myCheckbox.setVisible(true);
  TreeNodeState state=mySelectionManager.getState(node);
  myCheckbox.setEnabled(TreeNodeState.CLEAR.equals(state) || TreeNodeState.SELECTED.equals(state));
  myCheckbox.setSelected(!TreeNodeState.CLEAR.equals(state));
  myCheckbox.setOpaque(false);
  myCheckbox.setBackground(null);
  setBackground(null);
  myTextRenderer.getListCellRendererComponent(myFictive,file,0,selected,hasFocus);
  revalidate();
  return this;
}
