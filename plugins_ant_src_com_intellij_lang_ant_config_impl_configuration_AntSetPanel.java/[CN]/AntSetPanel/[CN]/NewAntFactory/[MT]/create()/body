{
  VirtualFile[] files=FileChooser.chooseFiles(myParent,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  if (files.length == 0)   return null;
  VirtualFile homePath=files[0];
  try {
    final AntInstallation inst=AntInstallation.fromHome(homePath.getPresentableUrl());
    adjustName(inst);
    return inst;
  }
 catch (  AntInstallation.ConfigurationException e) {
    Messages.showErrorDialog(myParent,e.getMessage(),AntBundle.message("ant.setup.dialog.title"));
    return null;
  }
}
