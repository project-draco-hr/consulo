{
  CommandProcessor.getInstance().executeCommand(myModule.getProject(),new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          myInsideChange=true;
          try {
            final XmlWriter writer=new XmlWriter();
            getRootContainer().write(writer);
            final String newText=writer.getText();
            final String oldText=myDocument.getText();
            try {
              final ReplaceInfo replaceInfo=findFragmentToChange(oldText,newText);
              if (replaceInfo.getStartOffset() == -1) {
              }
 else {
                myDocument.replaceString(replaceInfo.getStartOffset(),replaceInfo.getEndOffset(),replaceInfo.getReplacement());
              }
            }
 catch (            Exception e) {
              LOG.error(e);
              myDocument.replaceString(0,oldText.length(),newText);
            }
          }
  finally {
            myInsideChange=false;
          }
        }
      }
);
    }
  }
,"UI Designer Save",null);
  fireHierarchyChanged();
}
