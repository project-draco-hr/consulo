{
  if (!IS_TEST_MODE) {
    LOG.assertTrue(isDispatchThread(),"leaveModal() should be invoked in event-dispatch thread");
  }
  LOG.info("leaveModal:" + modalEntity);
  if (!IS_TEST_MODE) {
    ourModalityStateMulticaster.getMulticaster().beforeModalityStateChanged();
  }
  boolean removed=ourModalEntities.remove(modalEntity);
  LOG.assertTrue(removed);
  ourQueueSkipCount=0;
  requestFlush();
}
