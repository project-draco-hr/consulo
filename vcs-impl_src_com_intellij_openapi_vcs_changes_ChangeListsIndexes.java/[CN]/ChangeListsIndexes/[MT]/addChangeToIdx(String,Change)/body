{
  final ContentRevision afterRevision=change.getAfterRevision();
  if (afterRevision != null) {
    add(afterRevision.getFile().getVirtualFile(),listName,change.getFileStatus());
  }
  final ContentRevision beforeRevision=change.getBeforeRevision();
  if (beforeRevision != null) {
    if (afterRevision != null) {
      if (!Comparing.equal(beforeRevision.getFile(),afterRevision.getFile())) {
        add(beforeRevision.getFile().getVirtualFile(),listName,FileStatus.DELETED);
      }
    }
 else {
      add(beforeRevision.getFile().getVirtualFile(),listName,change.getFileStatus());
    }
  }
}
