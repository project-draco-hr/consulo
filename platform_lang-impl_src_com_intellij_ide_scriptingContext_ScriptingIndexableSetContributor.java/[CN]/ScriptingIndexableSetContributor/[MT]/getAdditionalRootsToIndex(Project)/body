{
  final Set<VirtualFile> predefinedFiles=getPredefinedFilesToIndex();
  final THashSet<VirtualFile> filesToIndex=new THashSet<VirtualFile>();
  filesToIndex.addAll(predefinedFiles);
  if (project != null) {
    ScriptingLibraryManager manager=new ScriptingLibraryManager(project);
    LibraryTable libTable=manager.getLibraryTable();
    if (libTable != null) {
      for (      Library lib : libTable.getLibraries()) {
        for (        VirtualFile libFile : lib.getFiles(OrderRootType.CLASSES)) {
          libFile.putUserData(getIndexKey(),"");
          filesToIndex.add(libFile);
        }
      }
    }
    manager.disposeModel();
  }
  return filesToIndex;
}
