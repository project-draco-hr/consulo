{
  if ((!myProject.isInitialized()) || myProject.isDisposed())   return;
  final List<VcsDirectoryMapping> copy=myNewMappings.getDirectoryMappings();
  final List<VcsDirectoryMapping> added=new LinkedList<VcsDirectoryMapping>(copy);
  added.removeAll(myDirectoryMappingWatches.keySet());
  final List<VcsDirectoryMapping> deleted=new LinkedList<VcsDirectoryMapping>(myDirectoryMappingWatches.keySet());
  deleted.removeAll(copy);
  for (  VcsDirectoryMapping mapping : added) {
    if (mapping.isDefaultMapping())     continue;
    final LocalFileSystem.WatchRequest watchRequest=myLfs.addRootToWatch(mapping.getDirectory(),true);
    myDirectoryMappingWatches.put(mapping,watchRequest);
  }
  for (  VcsDirectoryMapping mapping : deleted) {
    if (mapping.isDefaultMapping())     continue;
    myLfs.removeWatchedRoot(myDirectoryMappingWatches.remove(mapping));
  }
}
