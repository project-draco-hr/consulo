{
  final PsiElement tag=descriptor.getPsiElement();
  if (!CodeInsightUtilBase.prepareFileForWrite(tag.getContainingFile())) {
    return;
  }
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final ASTNode child=XmlChildRole.START_TAG_END_FINDER.findChild(tag.getNode());
  if (child == null)   return;
  final int offset=child.getTextRange().getStartOffset();
  OpenFileDescriptor openFileDescriptor=new OpenFileDescriptor(project,tag.getContainingFile().getVirtualFile(),offset);
  final Editor editor=FileEditorManager.getInstance(project).openTextEditor(openFileDescriptor,true);
  new WriteCommandAction(project){
    protected void run(    final Result result) throws Throwable {
      editor.getDocument().replaceString(offset,tag.getTextRange().getEndOffset(),"/>");
    }
  }
.execute();
}
