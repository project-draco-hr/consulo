{
  final XPathType expectedType=ExpectedTypeUtil.getExpectedType(expression);
  if (expectedType == XPathType.NODESET) {
    if (expression != null) {
      final XPathType opType=expression.getType();
      if (opType != expectedType && !opType.isAbstract() && !expectedType.isAbstract()) {
        holder.createErrorAnnotation(expression,"Expected type '" + expectedType.getName() + "', got '"+ opType.getName()+ "'");
      }
    }
  }
}
