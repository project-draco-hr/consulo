{
  StringBuilder labelText=new StringBuilder("<html>");
  int index=0;
  final String disabledTag=FLAG_TO_TAG.get(ParameterInfoUIContextEx.Flag.DISABLE);
  if (isDisabledBeforeHighlight) {
    addTag(labelText,disabledTag);
  }
  for (  Map.Entry<TextRange,ParameterInfoUIContextEx.Flag> entry : flagsMap.entrySet()) {
    TextRange highlightRange=entry.getKey();
    final ParameterInfoUIContextEx.Flag flag=entry.getValue();
    String tagValue=FLAG_TO_TAG.get(flag);
    labelText.append(text.substring(index,highlightRange.getStartOffset()));
    if (flag == ParameterInfoUIContextEx.Flag.HIGHLIGHT && isDisabledBeforeHighlight) {
      addClosingTag(labelText,disabledTag);
    }
    addTag(labelText,tagValue);
    labelText.append(text.substring(highlightRange.getStartOffset(),highlightRange.getEndOffset()));
    addClosingTag(labelText,tagValue);
    index=highlightRange.getEndOffset();
  }
  labelText.append(text.substring(index,text.length()));
  labelText.append("</html>");
  return labelText.toString();
}
