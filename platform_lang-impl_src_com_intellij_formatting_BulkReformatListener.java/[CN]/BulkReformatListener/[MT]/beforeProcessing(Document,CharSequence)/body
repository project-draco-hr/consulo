{
  reset();
  Diff.Change change=Diff.buildChanges(document.getCharsSequence(),newText);
  if (change == null) {
    return;
  }
  BookmarkManager manager=BookmarkManager.getInstance(myProject);
  for (  Bookmark bookmark : manager.getValidBookmarks()) {
    if (bookmark.isValid() && bookmark.getDocument() == document) {
      int newLine=Diff.translateLine(change,bookmark.getLine());
      if (newLine >= 0) {
        myBookmarks.add(new BookmarkData(bookmark.getDescription(),bookmark.getLine()));
      }
    }
  }
}
