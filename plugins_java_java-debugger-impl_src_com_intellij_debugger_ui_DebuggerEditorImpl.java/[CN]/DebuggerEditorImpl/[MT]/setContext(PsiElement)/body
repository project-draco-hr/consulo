{
  myContext=context;
  List<CodeFragmentFactory> factories=DebuggerUtilsEx.getCodeFragmentFactories(context);
  boolean many=factories.size() > 1;
  if (myInitialFactory) {
    myInitialFactory=false;
    setFactory(factories.get(0));
    myChooseFactory.setVisible(many);
  }
  myChooseFactory.setVisible(myChooseFactory.isVisible() || many);
  myChooseFactory.setEnabled(many && factories.contains(myFactory));
  updateEditorUi();
}
