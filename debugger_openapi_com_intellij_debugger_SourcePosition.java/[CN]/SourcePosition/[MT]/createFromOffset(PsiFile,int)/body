{
  return new SourcePositionCache(file){
    protected int calcLine(){
      final Document document=PsiDocumentManager.getInstance(file.getProject()).getDocument(file);
      if (document != null) {
        try {
          return document.getLineNumber(offset);
        }
 catch (        IndexOutOfBoundsException e) {
        }
      }
      return -1;
    }
    protected int calcOffset(){
      return offset;
    }
  }
;
}
