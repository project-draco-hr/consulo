{
  PsiImportList importList=((PsiJavaFile)file).getImportList();
  final TextRange importsRange=importList == null ? TextRange.EMPTY_RANGE : importList.getTextRange();
  boolean hasErrorsExceptUnresolvedImports=!DaemonCodeAnalyzerEx.processHighlights(myDocument,myProject,HighlightSeverity.ERROR,0,myDocument.getTextLength(),new Processor<HighlightInfo>(){
    @Override public boolean process(    HighlightInfo error){
      int infoStart=error.getActualStartOffset();
      int infoEnd=error.getActualEndOffset();
      return importsRange.containsRange(infoStart,infoEnd) && error.type.equals(HighlightInfoType.WRONG_REF);
    }
  }
);
  return hasErrorsExceptUnresolvedImports;
}
