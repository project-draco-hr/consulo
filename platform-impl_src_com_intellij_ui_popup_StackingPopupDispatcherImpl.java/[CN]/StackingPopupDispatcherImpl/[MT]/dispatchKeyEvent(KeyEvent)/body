{
  if (!isPopupFocused())   return false;
  JBPopup popup=getFocusedPopup();
  if (e.getID() == KeyEvent.KEY_PRESSED && e.getKeyCode() == KeyEvent.VK_ESCAPE && e.getModifiers() == 0) {
    if (popup.isCancelKeyEnabled()) {
      popup.cancel();
      return true;
    }
  }
  return false;
}
