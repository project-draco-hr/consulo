{
  if (PlatformDataKeys.COPY_PROVIDER.is(dataId)) {
    return new CopyProvider(){
      public boolean isCopyEnabled(      @NotNull DataContext dataContext){
        return getSelectionPath() != null;
      }
      public boolean isCopyVisible(      @NotNull DataContext dataContext){
        return true;
      }
      public void performCopy(      @NotNull DataContext dataContext){
        TreePath selection=getSelectionPath();
        Object value=selection.getLastPathComponent();
        String text;
        if (value instanceof MessageNode) {
          MessageNode messageNode=((MessageNode)value);
          String[] lines=messageNode.getText();
          text="";
          for (          String line : lines) {
            text+=line + "\n";
          }
        }
 else {
          text=value.toString();
        }
        CopyPasteManager.getInstance().setContents(new StringSelection(text));
      }
    }
;
  }
  return null;
}
