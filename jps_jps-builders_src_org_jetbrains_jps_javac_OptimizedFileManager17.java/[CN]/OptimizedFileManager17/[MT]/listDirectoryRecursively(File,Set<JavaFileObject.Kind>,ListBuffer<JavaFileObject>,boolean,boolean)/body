{
  final File[] children=listChildren(file,canUseCache);
  final String fileName=file.getName();
  if (children != null) {
    if (isRootCall || SourceVersion.isIdentifier(fileName)) {
      if (sortFiles != null) {
        Arrays.sort(children,sortFiles);
      }
      for (      File child : children) {
        listDirectoryRecursively(child,fileKinds,resultList,false,canUseCache);
      }
    }
  }
 else {
    if (isValidFile(fileName,fileKinds)) {
      JavaFileObject fe=new InputFileObject(this,file);
      resultList.append(fe);
    }
  }
}
