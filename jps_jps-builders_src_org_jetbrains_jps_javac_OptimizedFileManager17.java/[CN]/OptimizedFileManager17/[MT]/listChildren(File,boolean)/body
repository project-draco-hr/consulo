{
  if (!canUseCache) {
    return file.listFiles();
  }
  final SoftReference<File[]> ref=myDirectoryCache.get(file);
  File[] cached=ref != null ? ref.get() : null;
  if (cached == null) {
    cached=file.listFiles();
    myDirectoryCache.put(file,new SoftReference<File[]>(cached != null ? cached : NULL_FILE_ARRAY));
  }
  return cached == NULL_FILE_ARRAY ? null : cached;
}
