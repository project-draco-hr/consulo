{
  final File[] files=directory.listFiles();
  if (files != null) {
    if (sortFiles != null) {
      Arrays.sort(files,sortFiles);
    }
    final boolean acceptUnknownFiles=fileKinds.contains(JavaFileObject.Kind.OTHER);
    for (    File f : files) {
      final String fileName=f.getName();
      if (isValidFile(fileName,fileKinds)) {
        if (acceptUnknownFiles && !isFile(f)) {
          continue;
        }
        final JavaFileObject fe=new InputFileObject(this,f);
        resultList.append(fe);
      }
    }
  }
}
