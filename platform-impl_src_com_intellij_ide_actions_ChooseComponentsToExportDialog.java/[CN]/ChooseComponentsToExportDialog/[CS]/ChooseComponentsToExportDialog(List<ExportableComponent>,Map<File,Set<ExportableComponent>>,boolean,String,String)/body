{
  super(false);
  myDescription=description;
  myShowFilePath=showFilePath;
  Map<ExportableComponent,ComponentElementProperties> componentToContainingListElement=new LinkedHashMap<ExportableComponent,ComponentElementProperties>();
  for (  ExportableComponent component : components) {
    if (!addToExistingListElement(component,componentToContainingListElement,fileToComponents)) {
      ComponentElementProperties componentElementProperties=new ComponentElementProperties();
      componentElementProperties.addComponent(component);
      componentToContainingListElement.put(component,componentElementProperties);
    }
  }
  final Set<ComponentElementProperties> componentElementProperties=new LinkedHashSet<ComponentElementProperties>(componentToContainingListElement.values());
  myChooser=new ElementsChooser<ComponentElementProperties>(true);
  for (  final ComponentElementProperties componentElementProperty : componentElementProperties) {
    myChooser.addElement(componentElementProperty,true,componentElementProperty);
  }
  final ActionListener browseAction=new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      String oldPath=myPathPanel.getText();
      String path=chooseSettingsFile(oldPath,getWindow(),IdeBundle.message("title.export.file.location"),IdeBundle.message("prompt.choose.export.settings.file.path"));
      if (path == null)       return;
      myPathPanel.setText(FileUtil.toSystemDependentName(path));
    }
  }
;
  myPathPanel=new FieldPanel(IdeBundle.message("editbox.export.settings.to"),null,browseAction,null);
  String exportPath=PropertiesComponent.getInstance().getOrInit("export.settings.path",DEFAULT_PATH);
  myPathPanel.setText(exportPath);
  setTitle(title);
  init();
}
