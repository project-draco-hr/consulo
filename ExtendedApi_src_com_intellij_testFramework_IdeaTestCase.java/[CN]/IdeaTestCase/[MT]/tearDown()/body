{
  try {
    assertNotNull("Application components damaged",ProjectManager.getInstance());
    FileDocumentManager.getInstance().saveAllDocuments();
    PsiDocumentManager.getInstance(myProject).commitAllDocuments();
    try {
      ((ProjectEx)myProject).dispose();
      for (      final File fileToDelete : myFilesToDelete) {
        File file=fileToDelete;
        delete(file);
      }
      Throwable fromThreadGroup=MY_THREAD_GROUP.popThrowable();
      if (fromThreadGroup != null) {
        throw new RuntimeException(fromThreadGroup);
      }
      if (!myAssertionsInTestDetected) {
        if (IdeaLogger.ourErrorsOccurred != null) {
          throw IdeaLogger.ourErrorsOccurred;
        }
        assertTrue("Logger errors occurred in " + getFullName(),IdeaLogger.ourErrorsOccurred == null);
      }
      ourApplication.setDataProvider(null);
    }
  finally {
      ourTestCase=null;
    }
    super.tearDown();
    assertEquals(0,EditorFactory.getInstance().getAllEditors().length);
  }
  finally {
    myProjectManager=null;
    myProject=null;
    myModule=null;
    myFilesToDelete=null;
  }
}
