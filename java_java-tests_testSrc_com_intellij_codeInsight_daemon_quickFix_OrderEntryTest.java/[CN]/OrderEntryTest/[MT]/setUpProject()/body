{
  final String root=PathManagerEx.getTestDataPath() + BASE_PATH;
  VirtualFile tempProjectRootDir=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      try {
        return PsiTestUtil.createTestProjectStructure(getTestName(true),null,FileUtil.toSystemIndependentName(root),myFilesToDelete,false);
      }
 catch (      Exception e) {
        LOG.error(e);
        return null;
      }
    }
  }
);
  VirtualFile projectFile=tempProjectRootDir.findChild("orderEntry.ipr");
  myProject=ProjectManagerEx.getInstanceEx().loadProject(projectFile.getPath());
  simulateProjectOpen();
  myModule=ModuleManager.getInstance(getProject()).getModules()[0];
}
