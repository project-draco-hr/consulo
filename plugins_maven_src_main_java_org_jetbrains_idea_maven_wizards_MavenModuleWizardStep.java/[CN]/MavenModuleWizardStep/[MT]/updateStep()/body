{
  if (myProjectOrNull != null) {
    MavenProjectModel parent=myBuilder.findPotentialParentProject(myProjectOrNull);
    myAggregator=parent;
    myParent=parent;
  }
  myArtifactIdField.setText(myBuilder.getName());
  myGroupIdField.setText(myParent == null ? myBuilder.getName() : myParent.getMavenId().groupId);
  myVersionField.setText(myParent == null ? "1.0" : myParent.getMavenId().version);
  MavenId selectedArchId=getSelectedArtifactId();
  if (selectedArchId == null && myUseArchetypeCheckBox.isSelected()) {
    selectedArchId=myBuilder.getArchetypeId();
  }
  DefaultListModel model=new DefaultListModel();
  List<Archetype> archetypes=new ArrayList<Archetype>(MavenIndicesManager.getInstance().getArchetypes());
  Collections.sort(archetypes,new Comparator<Archetype>(){
    public int compare(    Archetype o1,    Archetype o2){
      String key1=o1.getGroupId() + ":" + o1.getArtifactId();
      String key2=o2.getGroupId() + ":" + o2.getArtifactId();
      int result=key1.compareToIgnoreCase(key2);
      if (result != 0)       return result;
      return o2.getVersion().compareToIgnoreCase(o1.getVersion());
    }
  }
);
  Archetype selectedArch=null;
  for (  Archetype each : archetypes) {
    if (getArchetypeId(each).equals(selectedArchId))     selectedArch=each;
    model.addElement(each);
  }
  myArchetypesList.setModel(model);
  myArchetypesList.setSelectedValue(selectedArch,true);
  updateComponents();
}
