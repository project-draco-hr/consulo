{
  final String extension=((FileTypeManagerEx)FileTypeManager.getInstance()).getExtension(fileName);
  FileTypeChooser chooser=new FileTypeChooser(extension);
  chooser.show();
  if (!chooser.isOK())   return null;
  final FileType type=chooser.getSelectedType();
  if (type == StdFileTypes.UNKNOWN)   return null;
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      FileTypeManagerEx.getInstanceEx().associateExtension(type,extension);
    }
  }
);
  return type;
}
