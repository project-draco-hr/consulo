{
  final VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile instanceof LightVirtualFile && file instanceof XmlFile && FileDocumentManager.getInstance().getCachedDocument(virtualFile) == null) {
    final XmlDocument document=((XmlFile)file).getDocument();
    if (document != null) {
      final XmlTag tag=document.getRootTag();
      if (tag != null) {
        return tag.getLocalName();
      }
    }
    return null;
  }
  final NanoXmlUtil.RootTagNameBuilder builder=new NanoXmlUtil.RootTagNameBuilder();
  NanoXmlUtil.parseFile(file,builder);
  return builder.getResult();
}
