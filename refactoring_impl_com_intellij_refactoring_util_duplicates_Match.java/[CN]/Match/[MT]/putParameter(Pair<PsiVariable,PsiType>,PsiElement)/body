{
  final PsiVariable psiVariable=parameter.first;
  final PsiElement currentValue=myParameterValues.get(psiVariable);
  if (currentValue == null) {
    if (!(value instanceof PsiExpression))     return false;
    final PsiType type=((PsiExpression)value).getType();
    final PsiType parameterType=parameter.second;
    if (type == null || !parameterType.isAssignableFrom(type))     return false;
    myParameterValues.put(psiVariable,value);
    final ArrayList<PsiElement> elements=new ArrayList<PsiElement>();
    myParameterOccurences.put(psiVariable,elements);
    if (!psiVariable.getType().isAssignableFrom(type)) {
      myChangedParams.put(psiVariable,parameterType);
    }
    return true;
  }
 else {
    if (!PsiEquivalenceUtil.areElementsEquivalent(currentValue,value)) {
      return false;
    }
    myParameterOccurences.get(psiVariable).add(value);
    return true;
  }
}
