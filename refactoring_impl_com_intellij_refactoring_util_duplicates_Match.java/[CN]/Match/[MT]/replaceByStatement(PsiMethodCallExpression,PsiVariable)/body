{
  final PsiStatement statement;
  if (outputVariable != null) {
    ReturnValue returnValue=getOutputVariableValue(outputVariable);
    if (returnValue == null && outputVariable instanceof PsiField) {
      returnValue=new FieldReturnValue((PsiField)outputVariable);
    }
    if (returnValue == null)     return null;
    statement=returnValue.createReplacement(methodCallExpression);
  }
 else   if (getReturnValue() != null) {
    statement=getReturnValue().createReplacement(methodCallExpression);
  }
 else {
    final PsiElementFactory elementFactory=JavaPsiFacade.getInstance(methodCallExpression.getProject()).getElementFactory();
    PsiExpressionStatement expressionStatement=(PsiExpressionStatement)elementFactory.createStatementFromText("x();",null);
    final CodeStyleManager styleManager=CodeStyleManager.getInstance(methodCallExpression.getManager());
    expressionStatement=(PsiExpressionStatement)styleManager.reformat(expressionStatement);
    expressionStatement.getExpression().replace(methodCallExpression);
    statement=expressionStatement;
  }
  return replaceWith(statement);
}
