{
  int lineCount=myDocument.getLineCount();
  int cacheSize=myLines.size();
  if (cacheSize != lineCount)   throw new IllegalStateException("Line count: " + lineCount + ", cache size: "+ cacheSize);
  int tabSize=myView.getTabSize();
  for (int i=0; i < cacheSize; i++) {
    LineData data=myLines.get(i);
    if (data != null) {
      LineData actual=new LineData(myDocument,i,tabSize);
      if (!Arrays.equals(data.columnCache,actual.columnCache))       throw new IllegalStateException("Wrong cache state at line " + i);
    }
  }
}
