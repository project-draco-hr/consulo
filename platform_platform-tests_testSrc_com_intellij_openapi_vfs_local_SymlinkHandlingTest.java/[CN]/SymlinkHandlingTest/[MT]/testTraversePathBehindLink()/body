{
  final File topDir=createTempDirectory(myTempDir,"top.",".dir");
  final File subDir1=createTempDirectory(topDir,"sub1.",".dir");
  final File link=IoTestUtil.createSymLink(subDir1.getPath(),myTempDir + "/link");
  final VirtualFile vLink=refreshAndFind(link);
  assertNotNull(link.getPath(),vLink);
  final File subDir2=createTempDirectory(topDir,"sub2.",".dir");
  final File subChild=createTempFile(subDir2,"subChild.",".txt");
  final VirtualFile vSubChild=refreshAndFind(subChild);
  assertNotNull(subChild.getPath(),vSubChild);
  final String relPath="../" + subDir2.getName() + "/"+ subChild.getName();
  VirtualFile vSubChildRel;
  vSubChildRel=vLink.findFileByRelativePath(relPath);
  assertEquals(vSubChild,vSubChildRel);
  vSubChildRel=LocalFileSystem.getInstance().findFileByPath(vLink.getPath() + "/" + relPath);
  assertEquals(vSubChild,vSubChildRel);
}
