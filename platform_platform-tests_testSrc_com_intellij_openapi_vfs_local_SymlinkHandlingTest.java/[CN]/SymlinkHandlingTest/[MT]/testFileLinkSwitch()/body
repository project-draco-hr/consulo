{
  final File target1=createTempFile(myTempDir,"target1.",".txt");
  FileUtil.writeToFile(target1,"some text");
  final File target2=createTempFile(myTempDir,"target2.",".txt");
  FileUtil.writeToFile(target2,"some quite another text");
  final File link=createTempLink(target1.getPath(),myTempDir + "/link");
  final VirtualFile vLink1=refreshAndFind(link);
  assertTrue("link=" + link + ", vLink="+ vLink1,vLink1 != null && !vLink1.isDirectory() && vLink1.isSymLink());
  assertEquals(FileUtil.loadFile(target1),VfsUtilCore.loadText(vLink1));
  assertTrue(link.toString(),link.delete());
  createTempLink(target2.getPath(),myTempDir + "/" + link.getName());
  refresh();
  assertFalse(vLink1.isValid());
  final VirtualFile vLink2=myFileSystem.findFileByIoFile(link);
  assertTrue("link=" + link + ", vLink="+ vLink2,vLink2 != null && !vLink2.isDirectory() && vLink2.isSymLink());
  assertEquals(FileUtil.loadFile(target2),VfsUtilCore.loadText(vLink2));
}
