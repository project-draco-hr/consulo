{
  File target1=createTestFile(myTempDir,"target1.txt");
  FileUtil.writeToFile(target1,"some text");
  File target2=createTestFile(myTempDir,"target2.txt");
  FileUtil.writeToFile(target2,"some quite another text");
  File link=createSymLink(target1.getPath(),myTempDir + "/link");
  VirtualFile vLink1=refreshAndFind(link);
  assertTrue("link=" + link + ", vLink="+ vLink1,vLink1 != null && !vLink1.isDirectory() && vLink1.is(VFileProperty.SYMLINK));
  assertEquals(FileUtil.loadFile(target1),VfsUtilCore.loadText(vLink1));
  assertTrue(link.toString(),link.delete());
  createSymLink(target2.getPath(),myTempDir + "/" + link.getName());
  refresh();
  assertFalse(vLink1.isValid());
  VirtualFile vLink2=myFileSystem.findFileByIoFile(link);
  assertTrue("link=" + link + ", vLink="+ vLink2,vLink2 != null && !vLink2.isDirectory() && vLink2.is(VFileProperty.SYMLINK));
  assertEquals(FileUtil.loadFile(target2),VfsUtilCore.loadText(vLink2));
}
