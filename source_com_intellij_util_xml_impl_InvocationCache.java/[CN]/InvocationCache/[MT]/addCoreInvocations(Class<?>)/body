{
  for (  final Method method : aClass.getDeclaredMethods()) {
    if ("equals".equals(method.getName())) {
      ourCoreInvocations.put(JavaMethodSignature.getSignature(method),new Invocation(){
        public Object invoke(        DomInvocationHandler handler,        Object[] args) throws Throwable {
          final Object o=args[0];
          final DomElement proxy=handler.getProxy();
          return proxy == o || o instanceof StableElement && o.equals(((StableElement)o).getWrappedElement());
        }
      }
);
    }
 else {
      ourCoreInvocations.put(JavaMethodSignature.getSignature(method),new Invocation(){
        public Object invoke(        DomInvocationHandler handler,        Object[] args) throws Throwable {
          return method.invoke(handler,args);
        }
      }
);
    }
  }
}
