{
  if (loc.getCompletionType() != CompletionType.BASIC)   return 0;
  final PsiElement position=loc.getCompletionParameters().getPosition();
  if (PsiTreeUtil.getParentOfType(position,PsiDocComment.class) != null)   return 0;
  if (position.getParent() instanceof PsiReferenceExpression) {
    final PsiReferenceExpression refExpr=(PsiReferenceExpression)position.getParent();
    final PsiElement qualifier=refExpr.getQualifier();
    if (qualifier == null) {
      return 0;
    }
    if (!(qualifier instanceof PsiJavaCodeReferenceElement) || !(((PsiJavaCodeReferenceElement)qualifier).resolve() instanceof PsiClass)) {
      return 0;
    }
  }
  final Object o=element.getObject();
  if (!(o instanceof PsiMember))   return 0;
  if (((PsiMember)o).hasModifierProperty(PsiModifier.STATIC)) {
    if (o instanceof PsiMethod)     return 5;
    if (o instanceof PsiField)     return 4;
  }
  if (o instanceof PsiClass && ((PsiClass)o).getContainingClass() != null) {
    return 3;
  }
  return 5;
}
