{
  final Collection<FileAnnotation> annotations;
synchronized (myLock) {
    annotations=myFileAnnotationMap.get(vf);
  }
  if (!annotations.isEmpty()) {
    if (number == null) {
      number=fromDiffProvider(vf);
    }
    if (number == null)     return;
    for (    FileAnnotation annotation : annotations) {
      if (annotation.isBaseRevisionChanged(number)) {
        annotation.close();
      }
    }
  }
}
