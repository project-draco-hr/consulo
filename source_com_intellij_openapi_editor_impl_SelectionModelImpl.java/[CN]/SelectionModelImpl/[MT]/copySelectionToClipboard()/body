{
  validateContext();
  String s=myEditor.getSelectionModel().getSelectedText();
  if (s == null)   return;
  s=StringUtil.convertLineSeparators(s,"\n");
  StringSelection contents=new StringSelection(s);
  Project project=DataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(myEditor.getContentComponent()));
  if (project == null) {
    Clipboard clipboard=myEditor.getComponent().getToolkit().getSystemClipboard();
    clipboard.setContents(contents,defaultClipboardOwner);
  }
 else {
    CopyPasteManager.getInstance().setContents(contents);
  }
}
