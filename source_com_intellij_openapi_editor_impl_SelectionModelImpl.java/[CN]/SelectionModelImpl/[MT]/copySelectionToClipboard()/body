{
  validateContext();
  String s=myEditor.getSelectionModel().getSelectedText();
  if (s == null)   return;
  s=StringUtil.convertLineSeparators(s,"\n");
  StringSelection contents=new StringSelection(s);
  Project project=(Project)DataManager.getInstance().getDataContext(myEditor.getContentComponent()).getData(DataConstants.PROJECT);
  if (project == null) {
    Clipboard clipboard=myEditor.getComponent().getToolkit().getSystemClipboard();
    clipboard.setContents(contents,defaultClipboardOwner);
  }
 else {
    CopyPasteManager.getInstance().setContents(contents);
  }
}
