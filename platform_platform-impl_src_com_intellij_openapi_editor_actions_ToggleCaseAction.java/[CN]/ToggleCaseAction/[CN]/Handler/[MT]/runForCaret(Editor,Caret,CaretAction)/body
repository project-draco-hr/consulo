{
  if (caret == null) {
    editor.getCaretModel().runForEachCaret(action);
  }
 else {
    action.perform(caret);
  }
}
