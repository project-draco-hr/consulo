{
  toProcessChangedUpdate=false;
  for (int i=0; i < indices.size(); i++) {
    int index=indices.get(i);
    String name=myTemplate.getSegmentName(index);
    for (int j=0; j < myTemplate.getVariableCount(); j++) {
      if (myTemplate.getVariableNameAt(j).equals(name)) {
        Expression e=myTemplate.getExpressionAt(j);
        @NonNls String marker="a";
        if (e instanceof MacroCallNode) {
          marker=((MacroCallNode)e).getMacro().getDefaultValue();
        }
        myDocument.deleteString(mySegments.getSegmentStart(index),mySegments.getSegmentStart(index) + marker.length());
        break;
      }
    }
  }
  toProcessChangedUpdate=true;
}
