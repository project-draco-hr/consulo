{
  if (ApplicationManager.getApplication().isUnitTestMode())   return true;
  if (myProgressIndicator != null)   myProgressIndicator.pushState();
  try {
    Collection modifiedFiles=collectModifiedFiles(files);
    if (modifiedFiles.isEmpty())     return true;
    return requestConfirmation(modifiedFiles);
  }
  finally {
    if (myProgressIndicator != null)     myProgressIndicator.popState();
  }
}
