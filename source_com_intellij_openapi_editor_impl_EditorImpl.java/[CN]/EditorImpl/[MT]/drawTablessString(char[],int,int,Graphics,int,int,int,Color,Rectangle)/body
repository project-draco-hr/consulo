{
  int endX=x;
  if (start < end) {
    final FontInfo font=fontForChar(text[start],fontType);
    for (int j=start; j < end; j++) {
      final char c=text[j];
      FontInfo newFont=fontForChar(c,fontType);
      if (font != newFont) {
        int x1=drawTablessString(text,start,j,g,x,y,fontType,fontColor,clip);
        return drawTablessString(text,j,end,g,x1,y,fontType,fontColor,clip);
      }
      endX+=font.charWidth(c,myEditorComponent);
    }
    if (!(x < clip.x && endX < clip.x || x > clip.x + clip.width && endX > clip.x + clip.width)) {
      drawCharsCached(g,text,start,end,x,y,fontType,fontColor);
    }
  }
  return endX;
}
