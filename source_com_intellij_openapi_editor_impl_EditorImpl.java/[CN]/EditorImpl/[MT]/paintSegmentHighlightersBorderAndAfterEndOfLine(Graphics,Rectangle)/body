{
  if (myDocument.getLineCount() == 0)   return;
  int startLineNumber=yPositionToVisibleLineNumber(clip.y);
  int endLineNumber=yPositionToVisibleLineNumber(clip.y + clip.height) + 1;
  RangeHighlighter[] segmentHighlighters;
  final MarkupModel docMarkup=myDocument.getMarkupModel(myProject);
  if (docMarkup != null) {
    segmentHighlighters=docMarkup.getAllHighlighters();
    for (    RangeHighlighter segmentHighlighter : segmentHighlighters) {
      paintSegmentHighlighterAfterEndOfLine(g,(RangeHighlighterEx)segmentHighlighter,startLineNumber,endLineNumber);
    }
  }
  segmentHighlighters=getMarkupModel().getAllHighlighters();
  for (  RangeHighlighter segmentHighlighter : segmentHighlighters) {
    paintSegmentHighlighterAfterEndOfLine(g,(RangeHighlighterEx)segmentHighlighter,startLineNumber,endLineNumber);
  }
}
