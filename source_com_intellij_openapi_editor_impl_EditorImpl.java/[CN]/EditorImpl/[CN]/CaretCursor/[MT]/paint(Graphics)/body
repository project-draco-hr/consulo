{
  if (!isVisible || !IJSwingUtilities.hasFocus(getContentComponent()) || isRendererMode())   return;
  int x=myLocation.x;
  int lineHeight=getLineHeight();
  int y=myLocation.y;
  Rectangle viewRect=getScrollingModel().getVisibleArea();
  if (x - viewRect.x < 0) {
    return;
  }
  g.setColor(myScheme.getColor(EditorColors.CARET_COLOR));
  if (!SystemInfo.isMac) {
    Color background=myScheme.getColor(EditorColors.CARET_ROW_COLOR);
    if (background == null)     background=getBackroundColor();
    g.setXORMode(background);
  }
  if (EditorImpl.this.myIsInsertMode != mySettings.isBlockCursor()) {
    for (int i=0; i < mySettings.getLineCursorWidth(); i++) {
      UIUtil.drawLine(g,x + i,y,x + i,y + lineHeight - 1);
    }
  }
 else {
    g.fillRect(x,y,myWidth,lineHeight - 1);
  }
  g.setPaintMode();
}
