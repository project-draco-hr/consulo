{
  ActionListener l=new ActionListener(){
    Boolean previousState;
    public void actionPerformed(    ActionEvent e){
      if (checked.isSelected() == checkedState) {
        if (previousState == null) {
          previousState=changed.isSelected();
        }
        changed.setEnabled(false);
        changed.setSelected(impliedState);
      }
 else {
        changed.setEnabled(true);
        if (previousState != null) {
          changed.setSelected(previousState);
          previousState=null;
        }
      }
    }
  }
;
  checked.addActionListener(l);
  l.actionPerformed(null);
}
