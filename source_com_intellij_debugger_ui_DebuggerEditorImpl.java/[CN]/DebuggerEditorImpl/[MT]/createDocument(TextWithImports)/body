{
  LOG.assertTrue(myContext == null || myContext.isValid());
  if (item == null) {
    item=createText("");
  }
  PsiCodeFragment codeFragment=DefaultCodeFragmentFactory.getInstance().createCodeFragment(item,getContext(),getProject());
  if (myCurrentDocument != null) {
    for (    DocumentListener documentListener : myDocumentListeners) {
      myCurrentDocument.removeDocumentListener(documentListener);
    }
  }
  myCurrentDocument=PsiDocumentManager.getInstance(getProject()).getDocument(codeFragment);
  for (  DocumentListener documentListener : myDocumentListeners) {
    myCurrentDocument.addDocumentListener(documentListener);
  }
  return myCurrentDocument;
}
