{
  PsiJavaFile file=(PsiJavaFile)myFixture.configureByText("Foo.java","public class Foo {\n" + "}\n" + "\n"+ "class Bar {}\n");
  VirtualFile virtualFile=file.getVirtualFile();
  assertNotNull(virtualFile);
  myManager.openFile(virtualFile,true);
  assertEquals(0,getOffset(virtualFile));
  myManager.closeAllFiles();
  PsiClass psiClass=file.getClasses()[1];
  int identifierOffset=psiClass.getNameIdentifier().getTextOffset();
  NavigationUtil.activateFileWithPsiElement(psiClass);
  assertEquals(identifierOffset,getOffset(virtualFile));
  getEditor(virtualFile).getCaretModel().moveToOffset(identifierOffset + 3);
  NavigationUtil.activateFileWithPsiElement(psiClass);
  assertEquals(identifierOffset + 3,getOffset(virtualFile));
  getEditor(virtualFile).getCaretModel().moveToOffset(0);
  NavigationUtil.activateFileWithPsiElement(psiClass);
  assertEquals(identifierOffset,getOffset(virtualFile));
}
