{
  if (myDescriptor == null) {
    XmlDoctype doctype=getProlog().getDoctype();
    final XmlNSDescriptor xhtmlDescr;
    if (doctype == null || doctype.getDtdUri() == null) {
      xhtmlDescr=PsiManager.getInstance(getProject()).getJspElementFactory().getXHTMLDescriptor();
    }
 else {
      final XmlFile xmlFile=XmlUtil.findXmlFile(XmlUtil.getContainingFile(this),doctype.getDtdUri());
      if (xmlFile == null)       return null;
      xhtmlDescr=(XmlNSDescriptor)xmlFile.getDocument().getMetaData();
    }
    myDescriptor=getManager().getCachedValuesManager().createCachedValue(new CachedValueProvider<XmlNSDescriptor>(){
      public CachedValueProvider.Result<XmlNSDescriptor> compute(){
        final HtmlNSDescriptorImpl value=new HtmlNSDescriptorImpl(xhtmlDescr);
        return new Result<XmlNSDescriptor>(value,value.getDependences());
      }
    }
,false);
  }
  return myDescriptor.getValue();
}
