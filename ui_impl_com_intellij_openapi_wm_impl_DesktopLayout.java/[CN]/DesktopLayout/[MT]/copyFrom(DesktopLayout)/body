{
  final WindowInfoImpl[] infos=layout.getAllInfos();
  for (int i=0; i < infos.length; i++) {
    WindowInfoImpl info=myRegisteredId2Info.get(infos[i].getId());
    if (info != null) {
      info.copyFrom(infos[i]);
      continue;
    }
    info=myUnregisteredId2Info.get(infos[i].getId());
    if (info != null) {
      info.copyFrom(infos[i]);
    }
 else {
      myUnregisteredId2Info.put(infos[i].getId(),infos[i].copy());
    }
  }
  myRegisteredInfos=null;
  myUnregisteredInfos=null;
  myAllInfos=null;
  normalizeOrder(getAllInfos(ToolWindowAnchor.TOP));
  normalizeOrder(getAllInfos(ToolWindowAnchor.LEFT));
  normalizeOrder(getAllInfos(ToolWindowAnchor.BOTTOM));
  normalizeOrder(getAllInfos(ToolWindowAnchor.RIGHT));
}
