{
  final IElementType elementType=element.getTokenType();
  if (elementType instanceof IStubElementType) {
    if (elementType instanceof ILightStubElementType) {
      final ILightStubElementType lightElementType=(ILightStubElementType)elementType;
      if (lightElementType.shouldCreateStub(tree,element,parentStub)) {
        return lightElementType.createStub(tree,element,parentStub);
      }
    }
 else {
      LOG.error("Element is not of ILightStubElementType: " + LogUtil.objectAndClass(elementType) + ", "+ element);
    }
  }
  return parentStub;
}
