{
  if (elements.length == 0)   return;
  int flags=HighlightManagerImpl.HIDE_BY_ESCAPE;
  if (hideByTextChange) {
    flags|=HighlightManagerImpl.HIDE_BY_TEXT_CHANGE;
  }
  Color scrollmarkColor=null;
  if (attributes.getBackgroundColor() != null) {
    scrollmarkColor=attributes.getBackgroundColor().darker();
  }
  for (int i=0; i < elements.length; i++) {
    PsiElement element=elements[i];
    TextRange range=element.getTextRange();
    int start=range.getStartOffset();
    int end=range.getEndOffset();
    addOccurrenceHighlight(editor,start,end,attributes,flags,highlightersVector,scrollmarkColor);
  }
}
