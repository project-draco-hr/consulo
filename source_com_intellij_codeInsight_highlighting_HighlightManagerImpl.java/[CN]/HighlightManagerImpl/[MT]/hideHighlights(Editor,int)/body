{
  ArrayList<RangeHighlighter> highlightersToRemove=new ArrayList<RangeHighlighter>();
  Map<RangeHighlighter,HighlightInfo> map=getHighlightInfoMap(editor,false);
  if (map == null)   return false;
  boolean done=false;
  for (Iterator<RangeHighlighter> iterator=map.keySet().iterator(); iterator.hasNext(); ) {
    RangeHighlighter highlighter=iterator.next();
    HighlightInfo info=map.get(highlighter);
    if (!info.editor.equals(editor))     continue;
    if ((info.flags & mask) != 0) {
      highlightersToRemove.add(highlighter);
      done=true;
    }
  }
  for (int i=0; i < highlightersToRemove.size(); i++) {
    RangeHighlighter highlighter=highlightersToRemove.get(i);
    removeSegmentHighlighter(editor,highlighter);
  }
  return done;
}
