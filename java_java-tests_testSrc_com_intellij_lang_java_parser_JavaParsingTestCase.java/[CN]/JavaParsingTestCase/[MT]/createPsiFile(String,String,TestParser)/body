{
  if (TEST_FILE_ELEMENT_TYPE == null) {
    TEST_FILE_ELEMENT_TYPE=new MyIFileElementType();
  }
  TEST_PARSER=parser;
  final LightVirtualFile virtualFile=new LightVirtualFile(name + '.' + myFileExt,StdFileTypes.JAVA,text,-1);
  final FileViewProvider viewProvider=new SingleRootFileViewProvider(PsiManager.getInstance(getProject()),virtualFile,true);
  return new PsiJavaFileImpl(viewProvider){
    @Override protected FileElement createFileElement(    final CharSequence text){
      return new FileElement(TEST_FILE_ELEMENT_TYPE,text);
    }
  }
;
}
