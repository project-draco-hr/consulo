{
  peer.ensureUpToDate(false);
  final Collection<Change> changes=peer.getDefaultChangeList().getChanges();
  if (only) {
    Assert.assertEquals(changes.size(),files.length);
  }
  final Collection<VirtualFile> filesInChangeList=new HashSet<VirtualFile>();
  for (  Change c : changes) {
    filesInChangeList.add(c.getVirtualFile());
  }
  for (  VirtualFile f : files) {
    Assert.assertTrue(filesInChangeList.contains(f));
  }
}
