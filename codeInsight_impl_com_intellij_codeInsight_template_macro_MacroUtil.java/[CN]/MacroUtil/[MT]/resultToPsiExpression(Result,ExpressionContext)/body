{
  if (result instanceof PsiElementResult) {
    PsiElement element=((PsiElementResult)result).getElement();
    if (element instanceof PsiExpression) {
      return (PsiExpression)element;
    }
  }
  Project project=context.getProject();
  String text=result.toString();
  if (text == null)   return null;
  PsiManager manager=PsiManager.getInstance(project);
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(context.getEditor().getDocument());
  PsiElement place=file != null ? file.findElementAt(context.getStartOffset()) : null;
  if (place != null) {
    PsiElement parent=place.getParent();
    if (parent != null) {
      PsiElement parentOfParent=parent.getParent();
      if (parentOfParent instanceof PsiDeclarationStatement) {
        place=file.findElementAt(parentOfParent.getTextOffset() - 1);
      }
    }
  }
  PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  try {
    return factory.createExpressionFromText(text,place);
  }
 catch (  IncorrectOperationException e) {
    return null;
  }
}
