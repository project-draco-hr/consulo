{
  if (result instanceof PsiTypeResult) {
    return ((PsiTypeResult)result).getType();
  }
  Project project=context.getProject();
  String text=result.toString();
  if (text == null)   return null;
  PsiManager manager=PsiManager.getInstance(project);
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(context.getEditor().getDocument());
  PsiElement place=file != null ? file.findElementAt(context.getStartOffset()) : null;
  PsiDeclarationStatement decl=file != null ? PsiTreeUtil.getParentOfType(place,PsiDeclarationStatement.class) : null;
  if (decl != null) {
    place=file.findElementAt(decl.getTextOffset() - 1);
  }
  PsiElementFactory factory=manager.getElementFactory();
  try {
    return factory.createTypeFromText(text,place);
  }
 catch (  IncorrectOperationException e) {
    return null;
  }
}
