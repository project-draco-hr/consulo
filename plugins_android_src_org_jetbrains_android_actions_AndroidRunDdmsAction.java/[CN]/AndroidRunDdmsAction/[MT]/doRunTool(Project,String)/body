{
  if (getDdmsProcessHandler() != null) {
    Messages.showErrorDialog(project,AndroidBundle.message("android.launch.ddms.already.launched.error"),CommonBundle.getErrorTitle());
    return;
  }
  final boolean adbServiceEnabled=AndroidEnableAdbServiceAction.isAdbServiceEnabled();
  if (adbServiceEnabled && !AndroidEnableAdbServiceAction.disableAdbService(project)) {
    return;
  }
  final String toolPath=sdkPath + File.separator + AndroidCommonUtils.toolPath(getDdmsCmdName());
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(toolPath);
  LOG.info(commandLine.getCommandLineString());
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      doLaunchDdms(commandLine,project,adbServiceEnabled);
    }
  }
);
}
