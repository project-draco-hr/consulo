{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      FileTypeManager.getInstance().registerFileType(GroovyFileType.GROOVY_FILE_TYPE,GROOVY_EXTENTIONS.toArray(new String[GROOVY_EXTENTIONS.size()]));
    }
  }
);
  CompletionUtil.registerCompletionData(GroovyFileType.GROOVY_FILE_TYPE,new GroovyCompletionData());
  MethodReferencesSearch.INSTANCE.registerExecutor(new AccessorReferencesSearcher());
  TypedHandler.registerQuoteHandler(GroovyFileType.GROOVY_FILE_TYPE,new GroovyQuoteHandler());
  ProjectManager.getInstance().addProjectManagerListener(new ProjectManagerAdapter(){
    public void projectOpened(    Project project){
      CompilerManager compilerManager=CompilerManager.getInstance(project);
      GroovyToJavaGenerator generator=new GroovyToJavaGenerator();
      compilerManager.addCompiler(generator);
      compilerManager.addCompilationStatusListener(generator);
      compilerManager.addCompiler(new GroovyCompilerProcess());
      compilerManager.addCompilableFileType(GroovyFileType.GROOVY_FILE_TYPE);
      DebuggerManager.getInstance(project).registerPositionManagerFactory(new Function<DebugProcess,PositionManager>(){
        public PositionManager fun(        DebugProcess debugProcess){
          return new GroovyPositionManager(debugProcess);
        }
      }
);
    }
  }
);
}
