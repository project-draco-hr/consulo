{
  if (!toRun(mode,facet)) {
    return;
  }
  final Set<String> obsoleteFiles=new HashSet<String>(facet.getAutogeneratedFiles(mode));
switch (mode) {
case AAPT:
    runAapt(facet,context);
  break;
case AIDL:
runAidl(facet,context);
break;
case RENDERSCRIPT:
runRenderscript(facet,context);
break;
case BUILDCONFIG:
runBuildConfigGenerator(facet,context);
break;
default :
LOG.error("Unknown mode" + mode);
}
obsoleteFiles.removeAll(facet.getAutogeneratedFiles(mode));
for (String path : obsoleteFiles) {
final File file=new File(path);
if (file.isFile()) {
FileUtil.delete(file);
CompilerUtil.refreshIOFile(file);
}
}
}
