{
  final Document document=editor.getDocument();
  final PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(document);
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final ReferenceTransferableData.ReferenceData[] referenceData1=((ReferenceTransferableData)value).getData();
  final PsiJavaCodeReferenceElement[] refs=findReferencesToRestore(file,bounds,referenceData1);
  if (CodeInsightSettings.getInstance().ADD_IMPORTS_ON_PASTE == CodeInsightSettings.ASK) {
    askReferencesToRestore(project,refs,referenceData1);
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      restoreReferences(referenceData1,refs);
    }
  }
);
}
