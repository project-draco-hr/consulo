{
  return new DataIndexer<String,XsdNamespaceBuilder,FileContent>(){
    @Override @NotNull public Map<String,XsdNamespaceBuilder> map(    final FileContent inputData){
      final XsdNamespaceBuilder builder;
      if ("dtd".equals(inputData.getFile().getExtension())) {
        builder=new XsdNamespaceBuilder(inputData.getFileName(),"",Collections.<String>emptyList());
      }
 else {
        builder=XsdNamespaceBuilder.computeNamespace(CharArrayUtil.readerFromCharSequence(inputData.getContentAsText()));
      }
      final HashMap<String,XsdNamespaceBuilder> map=new HashMap<String,XsdNamespaceBuilder>(2);
      String namespace=builder.getNamespace();
      if (namespace != null) {
        map.put(namespace,builder);
      }
      map.put(inputData.getFile().getUrl(),builder);
      return map;
    }
  }
;
}
