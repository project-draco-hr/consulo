{
  final boolean wasEmpty=myFilter.isEmpty();
  if (files != null) {
    for (    VirtualFile file : files) {
      final StructureNode node=new StructureNode(myCommonData,myFiltering,myProject,this,file);
      addChild(node);
      myFilter.addPath(file);
    }
    if (wasEmpty) {
      myFiltering.addFilter(myFilter);
    }
 else {
      myFiltering.markDirty();
    }
    after.consume(this);
  }
}
