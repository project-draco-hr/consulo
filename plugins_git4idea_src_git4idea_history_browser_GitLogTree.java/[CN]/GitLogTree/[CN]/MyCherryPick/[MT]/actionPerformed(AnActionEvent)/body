{
  final List<GitCommit> commits=getSelectedCommitsAndCheck();
  Collections.reverse(commits);
  if (commits == null)   return;
  final int result=Messages.showOkCancelDialog("You are going to cherry-pick changes into current branch. Continue?","Cherry-pick",Messages.getQuestionIcon());
  if (result != 0)   return;
  for (  GitCommit commit : commits) {
    myIdsInProgress.add(commit.getHash());
  }
  final Application application=ApplicationManager.getApplication();
  application.executeOnPooledThread(new Runnable(){
    public void run(){
      myController.cherryPick(ObjectsConvertor.convert(commits,new Convertor<GitCommit,SHAHash>(){
        public SHAHash convert(        GitCommit o){
          return o.getHash();
        }
      }
));
      application.invokeLater(new Runnable(){
        public void run(){
          for (          GitCommit commit : commits) {
            myIdsInProgress.remove(commit.getHash());
          }
        }
      }
);
    }
  }
);
}
