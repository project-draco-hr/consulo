{
  final PsiElement element=descriptor.getPsiElement();
  final PsiField field;
  if (element instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)element;
    final PsiElement target=referenceExpression.resolve();
    if (!(target instanceof PsiField)) {
      return;
    }
    field=(PsiField)target;
  }
 else {
    final PsiElement parent=element.getParent();
    if (!(parent instanceof PsiField)) {
      return;
    }
    field=(PsiField)parent;
  }
  final PsiModifierList modifierList=field.getModifierList();
  if (modifierList == null) {
    return;
  }
  modifierList.setModifierProperty(PsiModifier.FINAL,true);
}
