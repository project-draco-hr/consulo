{
  final DefaultActionGroup group=new DefaultActionGroup();
  group.removeAll();
  group.add(new ToggleAction("Flatten Packages","Flatten Packages",Icons.FLATTEN_PACKAGES_ICON){
    public boolean isSelected(    AnActionEvent e){
      return myFavoritesConfiguration.IS_FLATTEN_PACKAGES;
    }
    public void setSelected(    AnActionEvent event,    boolean flag){
      final SelectionInfo selectionInfo=new SelectionInfo();
      myFavoritesConfiguration.IS_FLATTEN_PACKAGES=flag;
      myBuilder.updateTree();
      selectionInfo.apply();
    }
  }
);
  group.add(new ToggleAction(""){
    public boolean isSelected(    AnActionEvent e){
      return myFavoritesConfiguration.IS_HIDE_EMPTY_MIDDLE_PACKAGES;
    }
    public void setSelected(    AnActionEvent event,    boolean flag){
      final SelectionInfo selectionInfo=new SelectionInfo();
      myFavoritesConfiguration.IS_HIDE_EMPTY_MIDDLE_PACKAGES=flag;
      myBuilder.updateTree();
      selectionInfo.apply();
    }
    public void update(    AnActionEvent e){
      super.update(e);
      final Presentation presentation=e.getPresentation();
      if (myFavoritesConfiguration.IS_FLATTEN_PACKAGES) {
        presentation.setText("Hide Empty Middle Packages");
        presentation.setDescription("Show/Hide Empty Middle Packages");
        presentation.setIcon(HIDE_EMPTY_MIDDLE_PACKAGES_ICON);
      }
 else {
        presentation.setText("Compact Empty Middle Packages");
        presentation.setDescription("Show/Compact Empty Middle Packages");
        presentation.setIcon(COMPACT_EMPTY_MIDDLE_PACKAGES_ICON);
      }
    }
  }
);
  group.add(new ToggleAction("Abbreviate Qualified Package Names","Abbreviate Qualified Package Names",IconLoader.getIcon("/objectBrowser/abbreviatePackageNames.png")){
    public boolean isSelected(    AnActionEvent e){
      return myFavoritesConfiguration.IS_ABBREVIATION_PACKAGE_NAMES;
    }
    public void setSelected(    AnActionEvent e,    boolean state){
      myFavoritesConfiguration.IS_ABBREVIATION_PACKAGE_NAMES=state;
      myBuilder.updateTree();
    }
    public void update(    final AnActionEvent e){
      super.update(e);
      e.getPresentation().setEnabled(myFavoritesConfiguration.IS_FLATTEN_PACKAGES);
    }
  }
);
  group.add(new ToggleAction("Show Members","Show/Hide Members",IconLoader.getIcon("/objectBrowser/showMembers.png")){
    public boolean isSelected(    AnActionEvent e){
      return myFavoritesConfiguration.IS_SHOW_MEMBERS;
    }
    public void setSelected(    AnActionEvent e,    boolean state){
      SelectionInfo selectionInfo=new SelectionInfo();
      myFavoritesConfiguration.IS_SHOW_MEMBERS=state;
      myBuilder.updateTree();
      selectionInfo.apply();
    }
  }
);
  group.add(myAutoScrollToSourceHandler.createToggleAction());
  group.add(ActionManager.getInstance().getAction(IdeActions.REMOVE_FROM_FAVORITES));
  return ActionManager.getInstance().createActionToolbar(ActionPlaces.FAVORITES_VIEW_TOOLBAR,group,true).getComponent();
}
