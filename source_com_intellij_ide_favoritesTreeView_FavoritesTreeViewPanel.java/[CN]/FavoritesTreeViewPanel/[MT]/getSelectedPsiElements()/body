{
  final Object[] elements=getSelectedNodeElements();
  if (elements == null) {
    return null;
  }
  ArrayList<PsiElement> result=new ArrayList<PsiElement>();
  for (int i=0; i < elements.length; i++) {
    Object element=elements[i];
    if (element instanceof PsiElement) {
      result.add((PsiElement)element);
    }
 else     if (element instanceof SmartPsiElementPointer) {
      result.add(((SmartPsiElementPointer)element).getElement());
    }
  }
  return result.isEmpty() ? null : result.toArray(new PsiElement[result.size()]);
}
