{
  if (myDraggableObject != null) {
    int dropAction=dtde.getDropAction();
    if ((dropAction & DnDConstants.ACTION_MOVE) != 0) {
      final Collection<AbstractTreeNode> children=((AbstractTreeNode)myFavoritesTreeStructure.getRootElement()).getChildren();
      for (Iterator<AbstractTreeNode> iterator=children.iterator(); iterator.hasNext(); ) {
        AbstractTreeNode abstractTreeNode=iterator.next();
        if (abstractTreeNode.getValue() == null ? myDraggableObject.getValue() == null : abstractTreeNode.getValue().equals(myDraggableObject.getValue())) {
          return;
        }
      }
      addToFavorites(myDraggableObject);
      dtde.dropComplete(true);
      return;
    }
  }
  dtde.rejectDrop();
}
