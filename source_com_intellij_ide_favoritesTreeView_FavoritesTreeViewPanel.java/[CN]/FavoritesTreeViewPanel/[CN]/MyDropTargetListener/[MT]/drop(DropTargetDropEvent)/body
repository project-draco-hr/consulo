{
  Object draggableObject;
  try {
    draggableObject=dtde.getTransferable().getTransferData(AbstractProjectViewPSIPane.FLAVORS[0]);
  }
 catch (  UnsupportedFlavorException e) {
    draggableObject=null;
  }
catch (  IOException e) {
    draggableObject=null;
  }
  if (draggableObject != null) {
    int dropAction=dtde.getDropAction();
    if ((dropAction & DnDConstants.ACTION_MOVE) != 0) {
      if (myBuilder.findSmartFirstLevelNodeByElement(draggableObject) != null)       return;
      FavoritesManager.getInstance(myProject).addRoots(myListName,null,draggableObject);
      dtde.dropComplete(true);
      return;
    }
  }
  dtde.rejectDrop();
}
