{
  myEditor=editor;
  myEditor.getScrollPane().getViewport().addChangeListener(new ChangeListener(){
    private Rectangle myLastViewRect;
    public void stateChanged(    ChangeEvent event){
      Rectangle viewRect=getVisibleArea();
      VisibleAreaEvent visibleAreaEvent=new VisibleAreaEvent(myEditor,myLastViewRect,viewRect);
      myLastViewRect=viewRect;
      VisibleAreaListener[] listeners=myVisibleAreaListeners.toArray(new VisibleAreaListener[myVisibleAreaListeners.size()]);
      for (int i=0; i < listeners.length; i++) {
        listeners[i].visibleAreaChanged(visibleAreaEvent);
      }
    }
  }
);
  myDocumentListener=new DocumentAdapter(){
    public void beforeDocumentChange(    DocumentEvent e){
      cancelAnimatedScrolling(true);
    }
  }
;
  myEditor.getDocument().addDocumentListener(myDocumentListener);
}
