{
  vcs.createDirectory("dir1");
  vcs.createDirectory("dir2");
  vcs.createFile("dir1/file",cf("content"),-1);
  TestVirtualFile oldParent=new TestVirtualFile("dir1");
  TestVirtualFile newParent=new TestVirtualFile("dir2");
  TestVirtualFile f=new TestVirtualFile("file",null,-1);
  newParent.addChild(f);
  fireMoved(f,oldParent,newParent);
  assertFalse(vcs.hasEntry("dir1/file"));
  Entry e=vcs.findEntry("dir2/file");
  assertNotNull(e);
  assertEquals(c("content"),e.getContent());
}
