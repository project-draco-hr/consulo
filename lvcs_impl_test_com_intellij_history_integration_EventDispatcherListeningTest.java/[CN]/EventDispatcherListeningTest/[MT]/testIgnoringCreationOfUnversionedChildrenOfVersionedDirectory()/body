{
  TestVirtualFile dir=testDir("dir");
  TestVirtualFile subDir=testDir("subDir");
  TestVirtualFile file=testFile("file");
  TestVirtualFile subFile=testFile("subFile");
  dir.addChild(subDir);
  dir.addChild(file);
  subDir.addChild(subFile);
  filter.setNotAllowedFiles(subDir,file);
  fireCreated(dir);
  assertTrue(vcs.hasEntry("dir"));
  assertFalse(vcs.hasEntry("dir/subDir"));
  assertFalse(vcs.hasEntry("dir/subDir/subFile"));
  assertFalse(vcs.hasEntry("dir/file"));
}
