{
  if (OrderRootType.CLASSES_AND_OUTPUT.equals(type) || OrderRootType.COMPILATION_CLASSES.equals(type) || OrderRootType.PRODUCTION_COMPILATION_CLASSES.equals(type)) {
    final ArrayList<VirtualFile> result=new ArrayList<VirtualFile>();
    VirtualFile outputRoot=getCompilerOutputPath();
    if (outputRoot != null)     result.add(outputRoot);
    if (!OrderRootType.PRODUCTION_COMPILATION_CLASSES.equals(type)) {
      final VirtualFile outputPathForTests=getCompilerOutputPathForTests();
      if (outputPathForTests != null && !outputPathForTests.equals(outputRoot)) {
        result.add(outputPathForTests);
      }
    }
    return VfsUtil.toVirtualFileArray(result);
  }
  return null;
}
