{
  final PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
  try {
    final PsiDocCommentOwner owner=PsiTreeUtil.getParentOfType(descriptor.getEndElement(),PsiDocCommentOwner.class);
    if (owner != null) {
      if (!CodeInsightUtil.preparePsiElementsForWrite(owner))       return;
      final PsiDocComment docComment=owner.getDocComment();
      final PsiDocTag tag=factory.createDocTagFromText("@" + myTag + " "+ myValue);
      if (docComment != null) {
        PsiElement addedTag;
        final PsiElement anchor=getAnchor(descriptor);
        if (anchor != null) {
          addedTag=docComment.addBefore(tag,anchor);
        }
 else {
          addedTag=docComment.add(tag);
        }
        moveCaretTo(addedTag);
      }
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
