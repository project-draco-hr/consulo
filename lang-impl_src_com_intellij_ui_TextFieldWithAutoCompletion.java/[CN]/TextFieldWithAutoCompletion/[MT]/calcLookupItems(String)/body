{
  final List<LookupItem<PresentableLookupValue>> items=new ArrayList<LookupItem<PresentableLookupValue>>();
  if (prefix == null || prefix.length() == 0) {
    for (    PresentableLookupValue variant : myVariants) {
      items.add(new LookupItem<PresentableLookupValue>(variant,variant.getPresentation()));
    }
  }
 else {
    final String regexp=NameUtil.buildRegexp(prefix,0,true,true);
    final Pattern pattern=Pattern.compile(regexp);
    final Matcher matcher=pattern.matcher("");
    for (    PresentableLookupValue variant : myVariants) {
      matcher.reset(variant.getPresentation());
      if (matcher.matches()) {
        items.add(new LookupItem<PresentableLookupValue>(variant,variant.getPresentation()));
      }
    }
  }
  Collections.sort(items,new Comparator<LookupItem<PresentableLookupValue>>(){
    public int compare(    final LookupItem<PresentableLookupValue> item1,    final LookupItem<PresentableLookupValue> item2){
      return item1.getLookupString().compareTo(item2.getLookupString());
    }
  }
);
  return (LookupItem<PresentableLookupValue>[])items.toArray(new LookupItem[items.size()]);
}
