{
  final List<LookupItem<PresentableLookupValue>> items=new ArrayList<LookupItem<PresentableLookupValue>>();
  if (prefix == null || prefix.length() == 0) {
    for (    PresentableLookupValue variant : myVariants) {
      items.add(new LookupItem<PresentableLookupValue>(variant,variant.getPresentation()));
    }
  }
 else {
    final NameUtil.Matcher matcher=NameUtil.buildMatcher(prefix,0,true,true);
    for (    PresentableLookupValue variant : myVariants) {
      if (matcher.matches(variant.getPresentation())) {
        items.add(new LookupItem<PresentableLookupValue>(variant,variant.getPresentation()));
      }
    }
  }
  Collections.sort(items,new Comparator<LookupItem<PresentableLookupValue>>(){
    public int compare(    final LookupItem<PresentableLookupValue> item1,    final LookupItem<PresentableLookupValue> item2){
      return item1.getLookupString().compareTo(item2.getLookupString());
    }
  }
);
  return (LookupItem<PresentableLookupValue>[])items.toArray(new LookupItem[items.size()]);
}
