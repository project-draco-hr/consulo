{
  final ByteBuffer flush;
  if (offset + length > mySize) {
    flush=ByteBuffer.wrap(buf.array(),0,(int)(mySize - offset));
  }
 else {
    flush=buf;
    flush.position(0);
  }
  final FileChannel channel=myChannel.acquire();
  channel.write(flush,offset);
  myChannel.release();
}
