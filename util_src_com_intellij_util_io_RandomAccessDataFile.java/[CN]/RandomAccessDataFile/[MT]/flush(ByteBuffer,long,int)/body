{
  if (offset + length > mySize) {
    length=(int)(mySize - offset);
  }
  final RandomAccessFile file=getFile();
  try {
    file.seek(offset);
    file.write(buf.array(),0,length);
  }
  finally {
    releaseFile();
  }
}
