{
  if (this instanceof GitLineHandler) {
    ((GitLineHandler)this).addLineListener(new GitLineHandlerAdapter(){
      private boolean myAuthFailed;
      @Override public void onLineAvailable(      String line,      Key outputType){
        if (line.toLowerCase().contains("authentication failed")) {
          myAuthFailed=true;
        }
      }
      @Override public void processTerminated(      int exitCode){
        if (myAuthFailed) {
          authenticator.forgetPassword();
        }
 else {
          authenticator.saveAuthData();
        }
      }
    }
);
  }
}
