{
  myProject=project;
  myCommand=command;
  myAppSettings=GitVcsApplicationSettings.getInstance();
  myProjectSettings=GitVcsSettings.getInstance(myProject);
  myEnv=new HashMap<String,String>(System.getenv());
  if (!myEnv.containsKey("HOME")) {
    String home=System.getProperty("user.home");
    if (home != null) {
      myEnv.put("HOME",home);
    }
  }
  myVcs=GitVcs.getInstance(project);
  myWorkingDirectory=directory;
  myCommandLine=new GeneralCommandLine();
  if (myAppSettings != null) {
    myCommandLine.setExePath(myAppSettings.getPathToGit());
  }
  myCommandLine.setWorkingDirectory(myWorkingDirectory);
  if (command.name().length() > 0) {
    myCommandLine.addParameter(command.name());
  }
}
