{
  final IntStack stack=new IntStack(instructions.length);
  final boolean[] visited=new boolean[instructions.length];
  stack.push(startInstruction);
  while (!stack.empty()) {
    ProgressManager.checkCanceled();
    final int num=stack.pop();
    final Instruction instr=instructions[num];
    final Operation nextOperation=closure.fun(instr);
    if (nextOperation == Operation.CONTINUE) {
      continue;
    }
    if (nextOperation == Operation.BREAK) {
      break;
    }
    for (    Instruction pred : instr.allPred()) {
      final int predNum=pred.num();
      if (!visited[predNum]) {
        visited[predNum]=true;
        stack.push(predNum);
      }
    }
  }
}
