{
  final Stack stack=new Stack(instructions.length);
  final boolean[] visited=new boolean[instructions.length];
  stack.push(startInstruction);
  while (!stack.isEmpty()) {
    ProgressManager.checkCanceled();
    final int num=stack.pop();
    if (visited[num]) {
      continue;
    }
    visited[num]=true;
    final Instruction instr=instructions[num];
    final Operation nextOperation=closure.fun(instr);
    if (nextOperation == Operation.CONTINUE) {
      continue;
    }
 else     if (nextOperation == Operation.BREAK) {
      break;
    }
    for (    Instruction pred : instr.allPred()) {
      stack.push(pred.num());
    }
  }
}
