{
  final LanguageLevel newLanguageLevel=myLanguageLevelCombo.getSelectedItem() != LanguageLevelCombo.USE_PROJECT_LANGUAGE_LEVEL ? (LanguageLevel)myLanguageLevelCombo.getSelectedItem() : null;
  final boolean needToReload=myModule.getLanguageLevel() != newLanguageLevel;
  ModuleRootManager.getInstance(myModule).setLanguageLevel(newLanguageLevel);
  if (needToReload) {
    final Project project=myModule.getProject();
    final Runnable reloadProjectRequest=((ProjectRootManagerImpl)ProjectRootManagerEx.getInstanceEx(project)).getReloadProjectRequest();
    if (reloadProjectRequest != null)     return;
    ProjectRootConfigurable.getInstance(project).addReloadProjectRequest(new Runnable(){
      public void run(){
        final String _message=ProjectBundle.message("module.project.language.level.changed.reload.prompt",project.getName());
        if (Messages.showYesNoDialog(project,_message,ProjectBundle.message("modules.title"),Messages.getQuestionIcon()) == 0) {
          ProjectManagerEx.getInstanceEx().reloadProject(project);
        }
      }
    }
);
  }
}
