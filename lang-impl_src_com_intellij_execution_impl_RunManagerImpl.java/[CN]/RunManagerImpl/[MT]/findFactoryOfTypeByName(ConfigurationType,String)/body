{
  if (type == null || factoryName == null)   return null;
  final ConfigurationFactory[] factories=type.getConfigurationFactories();
  for (  final ConfigurationFactory factory : factories) {
    if (factoryName.equals(factory.getName()))     return factory;
  }
  if (type instanceof UnknownConfigurationType) {
    return type.getConfigurationFactories()[0];
  }
  return null;
}
