{
  OrderEnumerator base=OrderEnumerator.orderEntries(module);
  if (type == OrderRootType.CLASSES) {
    return base.exportedOnly().withoutModuleSourceEntries().recursively().classes();
  }
  if (type == OrderRootType.SOURCES) {
    return base.exportedOnly().recursively().sources();
  }
  if (type.collectFromDependentModules()) {
    return base.recursively().roots(type);
  }
  return base.roots(type);
}
