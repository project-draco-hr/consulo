{
  saveAll();
  final VirtualFile[] roots=ProjectLevelVcsManager.getInstance(project).getRootsUnderVcs(vcs);
  for (  VirtualFile root : roots) {
    GitCommandRunnable cmdr=new GitCommandRunnable(project,vcs.getSettings(),root);
    cmdr.setCommand(GitCommand.PUSH_CMD);
    cmdr.setArgs(new String[]{"--mirror"});
    ProgressManager manager=ProgressManager.getInstance();
    manager.runProcessWithProgressSynchronously(cmdr,GitBundle.getString("pushing.all.changes"),false,project);
    @SuppressWarnings({"ThrowableResultOfMethodCallIgnored"}) VcsException ex=cmdr.getException();
    if (ex != null) {
      GitUtil.showOperationError(project,ex,"git push --mirror");
    }
  }
}
