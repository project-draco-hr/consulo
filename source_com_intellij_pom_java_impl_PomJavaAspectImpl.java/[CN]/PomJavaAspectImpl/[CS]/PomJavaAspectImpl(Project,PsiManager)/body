{
  myProject=project;
  myPsiManager=psiManager;
  myRootPackage=new PomPackageImpl("",null,this);
  myPsiManager.addPsiTreeChangeListener(new PsiTreeChangeAdapter(){
    public void childAdded(    PsiTreeChangeEvent event){
      firePomEvent(event.getChild());
    }
    public void childRemoved(    PsiTreeChangeEvent event){
      firePomEvent(event.getParent());
    }
    public void childReplaced(    PsiTreeChangeEvent event){
      firePomEvent(event.getParent());
    }
    public void childrenChanged(    PsiTreeChangeEvent event){
      firePomEvent(event.getParent());
    }
    public void childMoved(    PsiTreeChangeEvent event){
      final PsiFile file1=event.getOldParent().getContainingFile();
      final PsiFile file2=event.getNewParent().getContainingFile();
      firePomEvent(file1);
      if (file1 != null && !file1.equals(file2)) {
        firePomEvent(file2);
      }
    }
    public void propertyChanged(    PsiTreeChangeEvent event){
      firePomEvent(event.getElement());
    }
  }
);
}
