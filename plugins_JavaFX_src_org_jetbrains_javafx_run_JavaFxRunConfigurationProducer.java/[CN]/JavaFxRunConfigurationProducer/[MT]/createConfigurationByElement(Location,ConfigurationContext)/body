{
  final PsiFile script=location.getPsiElement().getContainingFile();
  if (script == null || script.getFileType() != JavaFxFileType.INSTANCE) {
    return null;
  }
  if (!RunnableScriptUtil.isRunnable(script)) {
    return null;
  }
  final Module module=ModuleUtil.findModuleForPsiElement(script);
  if (module == null) {
    return null;
  }
  mySourceFile=script;
  final Project project=mySourceFile.getProject();
  final RunnerAndConfigurationSettings settings=cloneTemplateConfiguration(project,context);
  final JavaFxRunConfiguration configuration=(JavaFxRunConfiguration)settings.getConfiguration();
  final VirtualFile vFile=mySourceFile.getVirtualFile();
  if (vFile == null) {
    return null;
  }
  configuration.setMainScript(vFile.getPath());
  configuration.setName(configuration.suggestedName());
  configuration.setModule(module);
  return settings;
}
