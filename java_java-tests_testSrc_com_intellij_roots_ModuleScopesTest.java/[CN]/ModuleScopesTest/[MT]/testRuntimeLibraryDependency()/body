{
  Module m=createModule("a.iml",StdModuleTypes.JAVA);
  VirtualFile libraryRoot=addLibrary(m,DependencyScope.RUNTIME);
  final VirtualFile[] runtimeClasspath=getRuntimeClasspath(m);
  assertOrderedEquals(runtimeClasspath,libraryRoot);
  final VirtualFile[] compilationClasspath=getCompilationClasspath(m);
  assertEquals(1,compilationClasspath.length);
  VirtualFile[] production=getProductionCompileClasspath(m);
  assertEmpty(production);
  VirtualFile libraryClass=myFixture.createFile("lib/Test.class");
  assertFalse(m.getModuleWithDependenciesAndLibrariesScope(true).contains(libraryClass));
  assertFalse(m.getModuleWithDependenciesAndLibrariesScope(false).contains(libraryClass));
  assertTrue(m.getModuleRuntimeScope(true).contains(libraryClass));
  assertTrue(m.getModuleRuntimeScope(false).contains(libraryClass));
}
