{
  final Clipboard clip=editor.getComponent().getToolkit().getSystemSelection();
  if (clip != null) {
    Transferable res=null;
    try {
      res=clip.getContents(null);
    }
 catch (    Exception e) {
      if (!ApplicationManager.getApplication().isHeadlessEnvironment()) {
        LOG.info(e);
        Messages.showErrorDialog(editor.getProject(),"Cannot paste from X11 clipboard: " + e.getLocalizedMessage(),"Cannot Paste");
        return;
      }
    }
    editor.putUserData(EditorEx.LAST_PASTED_REGION,EditorModificationUtil.pasteFromTransferrable(res,editor));
  }
}
