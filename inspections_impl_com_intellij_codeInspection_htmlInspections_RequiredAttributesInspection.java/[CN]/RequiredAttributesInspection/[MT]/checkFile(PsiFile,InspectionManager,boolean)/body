{
  final java.util.List<ProblemDescriptor> problems=new ArrayList<ProblemDescriptor>();
  file.accept(new PsiElementVisitor(){
    public void visitElement(    PsiElement element){
      element.acceptChildren(this);
    }
    public void visitReferenceExpression(    PsiReferenceExpression expression){
      visitExpression(expression);
    }
    public void visitXmlTag(    XmlTag tag){
      if (tag.getName() == null) {
        return;
      }
      checkTagByDescriptor(tag,manager,problems);
      super.visitXmlTag(tag);
    }
  }
);
  return problems.isEmpty() ? null : problems.toArray(new ProblemDescriptor[problems.size()]);
}
