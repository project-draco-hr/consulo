{
  LanguageInjector[] extensions=Extensions.getExtensions(LanguageInjector.EXTENSION_POINT_NAME);
  if (extensions.length == 0) {
    MultiHostInjector prev=myPsiManagerRegisteredInjectorsAdapter.getAndSet(null);
    if (prev != null) {
      unregisterMultiHostInjector(prev);
    }
  }
 else {
    PsiManagerRegisteredInjectorsAdapter adapter=new PsiManagerRegisteredInjectorsAdapter();
    if (myPsiManagerRegisteredInjectorsAdapter.compareAndSet(null,adapter)) {
      registerMultiHostInjector(adapter,PsiLanguageInjectionHost.class);
    }
  }
}
