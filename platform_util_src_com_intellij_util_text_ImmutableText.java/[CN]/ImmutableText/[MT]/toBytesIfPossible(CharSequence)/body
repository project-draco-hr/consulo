{
  byte[] bytes=new byte[seq.length()];
  char[] chars=CharArrayUtil.fromSequenceWithoutCopying(seq);
  if (chars != null) {
    for (int i=0; i < bytes.length; i++) {
      char c=chars[i];
      if ((c & 0xff00) != 0) {
        return null;
      }
      bytes[i]=(byte)c;
    }
  }
 else {
    for (int i=0; i < bytes.length; i++) {
      char c=seq.charAt(i);
      if ((c & 0xff00) != 0) {
        return null;
      }
      bytes[i]=(byte)c;
    }
  }
  return bytes;
}
