{
  boolean bold=presentation.isItemTextBold();
  myNameComponent.setFont(bold ? BOLD_FONT : NORMAL_FONT);
  int style=bold ? SimpleTextAttributes.STYLE_BOLD : SimpleTextAttributes.STYLE_PLAIN;
  if (presentation.isStrikeout()) {
    style|=SimpleTextAttributes.STYLE_STRIKEOUT;
  }
  if (presentation.isItemTextUnderlined()) {
    style|=SimpleTextAttributes.STYLE_UNDERLINE;
  }
  final FontMetrics metrics=bold ? myBoldMetrics : myNormalMetrics;
  final String name=trimLabelText(presentation.getItemText(),allowedWidth,metrics);
  int used=RealLookupElementPresentation.getStringWidth(name,metrics);
  renderItemName(item,foreground,selected,style,name,myNameComponent);
  return used;
}
