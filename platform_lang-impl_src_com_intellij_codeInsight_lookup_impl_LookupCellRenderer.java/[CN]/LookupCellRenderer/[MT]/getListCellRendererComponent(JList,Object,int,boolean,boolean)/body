{
  final LookupElement item=(LookupElement)value;
  final Color foreground=isSelected ? SELECTED_FOREGROUND_COLOR : FOREGROUND_COLOR;
  final Color background=getItemBackground(list,index,isSelected);
  final LookupElementPresentation presentation=new LookupElementPresentation(true);
  item.renderElement(presentation);
  myNameComponent.clear();
  myNameComponent.setIcon(getIcon(presentation.getIcon()));
  myNameComponent.setBackground(background);
  setItemTextLabel(item,foreground,isSelected,presentation.getItemText(),presentation.isStrikeout(),presentation.isItemTextBold());
  myTypeLabel.setText(null);
  myTypeLabel.setBackground(background);
  setTypeTextLabel(item,background,foreground,presentation.getTypeText(),presentation.getTypeIcon());
  myTailComponent.setBackground(background);
  setTailTextLabel(isSelected,presentation,foreground);
  myArrowLabel.setIcon(myLookup.getActionsFor(item).isEmpty() ? PopupIcons.EMPTY_ICON : PopupIcons.HAS_NEXT_ICON_GRAYED);
  myArrowLabel.setBackground(background);
  myArrowLabel.setForeground(foreground);
  return myPanel;
}
