{
  final String testName=getTestName(true);
  configureByFile("/refactoring/extractMethodObject/" + testName + ".java");
  PsiElement element=TargetElementUtilBase.findTargetElement(myEditor,TargetElementUtilBase.ELEMENT_NAME_ACCEPTED);
  assertTrue(element instanceof PsiMethod);
  PsiMethod method=(PsiMethod)element;
  final ExtractMethodObjectProcessor processor=new ExtractMethodObjectProcessor(getProject(),getEditor(),method.getBody().getStatements(),"InnerClass");
  final ExtractMethodObjectProcessor.MyExtractMethodProcessor extractProcessor=processor.getExtractProcessor();
  extractProcessor.setShowErrorDialogs(false);
  extractProcessor.prepare();
  extractProcessor.testRun();
  processor.setCreateInnerClass(createInnerClass);
  processor.run();
  DuplicatesImpl.processDuplicates(extractProcessor,getProject(),getEditor());
  processor.getMethod().delete();
  checkResultByFile("/refactoring/extractMethodObject/" + testName + ".java"+ ".after");
}
