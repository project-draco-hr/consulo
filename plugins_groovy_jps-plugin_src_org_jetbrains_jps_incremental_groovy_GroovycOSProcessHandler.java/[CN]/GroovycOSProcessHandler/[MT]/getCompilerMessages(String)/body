{
  ArrayList<CompilerMessage> messages=new ArrayList<CompilerMessage>(compilerMessages);
  final StringBuffer unparsedBuffer=getStdErr();
  if (unparsedBuffer.length() != 0) {
    String msg=unparsedBuffer.toString();
    if (msg.contains(GroovyRtConstants.NO_GROOVY)) {
      msg="Cannot compile Groovy files: no Groovy library is defined for module '" + moduleName + "'";
    }
    messages.add(new CompilerMessage("Groovyc",BuildMessage.Kind.INFO,msg));
  }
  final int exitValue=getProcess().exitValue();
  if (exitValue != 0) {
    for (    CompilerMessage message : messages) {
      if (message.getKind() == BuildMessage.Kind.ERROR) {
        return messages;
      }
    }
    messages.add(new CompilerMessage("Groovyc",BuildMessage.Kind.ERROR,"Internal groovyc error: code " + exitValue));
  }
  return messages;
}
