{
  max=ParenthesesUtils.stripParentheses(max);
  if (max == null) {
    return null;
  }
  min=ParenthesesUtils.stripParentheses(min);
  if (min == null) {
    return buildExpressionText(max,plusOne,false);
  }
  final Object constant=ExpressionUtils.computeConstantExpression(min);
  if (constant instanceof Number) {
    final Number minNumber=(Number)constant;
    final int minValue;
    if (plusOne) {
      minValue=minNumber.intValue() - 1;
    }
 else {
      minValue=minNumber.intValue();
    }
    final String maxText=buildExpressionText(max,false,false);
    if (minValue > 0) {
      return maxText + '-' + minValue;
    }
 else     if (minValue == 0) {
      return maxText;
    }
 else {
      return maxText + '+' + -minValue;
    }
  }
  final int precedence=ParenthesesUtils.getPrecedence(min);
  final String minText;
  if (precedence >= ParenthesesUtils.ADDITIVE_PRECEDENCE) {
    minText='(' + min.getText() + ')';
  }
 else {
    minText=min.getText();
  }
  final String maxText=buildExpressionText(max,plusOne,false);
  return maxText + '-' + minText;
}
