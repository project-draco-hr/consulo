{
  MavenUtil.invokeAndWaitWriteAction(myProject,new Runnable(){
    public void run(){
      processExternalArtifactDependencies();
      for (      Library.ModifiableModel each : myLibraryModels.values()) {
        each.commit();
      }
      myLibrariesModel.commit();
      Collection<ModifiableRootModel> rootModels=myRootModels.values();
      ProjectRootManager.getInstance(myProject).multiCommit(myModuleModel,rootModels.toArray(new ModifiableRootModel[rootModels.size()]));
      for (      ModifiableFacetModel each : myFacetModels.values()) {
        each.commit();
      }
      if (myArtifactModel != null) {
        myArtifactModel.commit();
      }
    }
  }
);
}
