{
  ProjectSystemId owner=externalProject.getData().getOwner();
  IntegrationKey key=new IntegrationKey(ideProject,owner);
  ExternalProjectChangesCalculationContext context=new ExternalProjectChangesCalculationContext(myChanges.get(key),myPlatformFacade,myLibraryPathTypeMapper);
  for (  ExternalProjectStructureChangesPostProcessor processor : myCommonPostProcessors) {
    processor.processChanges(context.getCurrentChanges(),owner,ideProject,onIdeProjectStructureChange);
  }
  Set<ExternalProjectStructureChangesPostProcessor> postProcessors=mySpecificPostProcessors.get(owner);
  if (postProcessors != null)   for (  ExternalProjectStructureChangesPostProcessor processor : myCommonPostProcessors) {
    processor.processChanges(context.getCurrentChanges(),owner,ideProject,onIdeProjectStructureChange);
  }
  return context;
}
