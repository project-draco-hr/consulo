{
  List<ChangeSetBlock> result=new ArrayList<ChangeSetBlock>();
  int each=findFirstObsoleteBlock(period,intervalBetweenActivities);
  try {
    while (each != 0) {
      result.add(doReadBlock(each));
      myStorage.deleteRecord(each);
      each=myStorage.getPrevRecord(each);
    }
  }
 catch (  IOException e) {
    throw handleError(e);
  }
  return result;
}
