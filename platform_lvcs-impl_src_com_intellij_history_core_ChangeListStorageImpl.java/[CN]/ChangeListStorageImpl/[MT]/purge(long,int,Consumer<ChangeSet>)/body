{
  int eachBlockId=findFirstObsoleteBlock(period,intervalBetweenActivities);
  try {
    while (eachBlockId != 0) {
      processor.consume(doReadBlock(eachBlockId).changeSet);
      int toDelete=eachBlockId;
      eachBlockId=myStorage.getPrevRecord(eachBlockId);
      myStorage.deleteRecord(toDelete);
    }
  }
 catch (  IOException e) {
    throw handleError(e);
  }
}
