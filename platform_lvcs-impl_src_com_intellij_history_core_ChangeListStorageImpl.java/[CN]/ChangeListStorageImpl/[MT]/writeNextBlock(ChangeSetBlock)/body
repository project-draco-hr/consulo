{
  try {
    block.id=myStorage.createNextRecord();
    AbstractStorage.StorageDataOutput out=myStorage.writeStream(block.id);
    try {
      out.writeInt(block.changes.size());
      for (      ChangeSet each : block.changes) {
        each.write(out);
      }
    }
  finally {
      out.close();
    }
  }
 catch (  IOException e) {
    throw handleError(e);
  }
}
