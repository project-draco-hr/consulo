{
  long storageTimestamp=-1;
  try {
    if (myStorage != null) {
      myStorage.setVersion(-1);
      myStorage.force();
      storageTimestamp=myStorage.getFSTimestamp();
    }
  }
 catch (  Throwable ex) {
    LocalHistoryLog.LOG.error("cannot mark storage as broken",ex);
  }
  long vfsTimestamp=getVFSTimestamp();
  long timestamp=System.currentTimeMillis();
  throw new RuntimeException("Local history is broken and will be rebuilt after restart " + "(version:" + VERSION + ",current timestamp:"+ timestamp+ ",storage timestamp:"+ storageTimestamp+ ",vfs timestamp:"+ vfsTimestamp+ ")",e);
}
