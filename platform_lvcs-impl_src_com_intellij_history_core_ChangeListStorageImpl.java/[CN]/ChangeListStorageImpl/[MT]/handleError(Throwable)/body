{
  long storageTimestamp=-1;
  long vfsTimestamp=getVFSTimestamp();
  long timestamp=System.currentTimeMillis();
  try {
    storageTimestamp=myStorage.getFSTimestamp();
  }
 catch (  Exception ex) {
    LocalHistoryLog.LOG.warn("cannot read storage timestamp",ex);
  }
  LocalHistoryLog.LOG.warn("Local history is broken" + "(version:" + VERSION + ",current timestamp:"+ timestamp+ ",storage timestamp:"+ storageTimestamp+ ",vfs timestamp:"+ vfsTimestamp+ ")",e);
  myStorage.dispose();
  try {
    FileUtil.delete(myStorageDir);
    myStorage=createStorage(myStorageDir);
  }
 catch (  Throwable ex) {
    LocalHistoryLog.LOG.warn("cannot recreate storage",ex);
    isCompletelyBroken=true;
  }
}
