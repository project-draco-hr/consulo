{
  if (isCompletelyBroken)   return;
  try {
    int id=myStorage.createNextRecord();
    AbstractStorage.StorageDataOutput out=myStorage.writeStream(id,true);
    try {
      changeSet.write(out);
    }
  finally {
      out.close();
    }
    myStorage.setLastId(myLastId);
    myStorage.force();
  }
 catch (  IOException e) {
    handleError(e);
  }
}
