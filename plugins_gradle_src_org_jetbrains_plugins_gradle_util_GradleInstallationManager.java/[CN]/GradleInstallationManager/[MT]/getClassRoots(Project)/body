{
  final Collection<File> libraries=getAllLibraries(project);
  if (libraries == null) {
    return null;
  }
  final LocalFileSystem localFileSystem=LocalFileSystem.getInstance();
  final JarFileSystem jarFileSystem=JarFileSystem.getInstance();
  List<VirtualFile> result=new ArrayList<VirtualFile>();
  for (  File file : libraries) {
    if (ANY_GRADLE_JAR_FILE_PATTERN.matcher(file.getName()).matches() || GroovyConfigUtils.GROOVY_ALL_JAR_PATTERN.matcher(file.getName()).matches()) {
      final VirtualFile virtualFile=localFileSystem.refreshAndFindFileByIoFile(file);
      if (virtualFile != null) {
        ContainerUtil.addIfNotNull(result,jarFileSystem.getJarRootForLocalFile(virtualFile));
      }
    }
  }
  return result;
}
