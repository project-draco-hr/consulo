{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (info.isFileLevelAnnotation)   return;
  MarkupModel markup=document.getMarkupModel(project);
  Processor<HighlightInfo> otherHighlightInTheWayProcessor=new Processor<HighlightInfo>(){
    public boolean process(    HighlightInfo oldInfo){
      return oldInfo.group != group || !oldInfo.equalsByActualOffset(info);
    }
  }
;
  if (!DaemonCodeAnalyzerImpl.processHighlights(document,project,null,info.getActualStartOffset(),info.getActualEndOffset(),otherHighlightInTheWayProcessor)) {
    return;
  }
  if (info.getStartOffset() < startOffset || info.getEndOffset() > endOffset)   return;
  createOrReuseHighlighterFor(info,document,group,file,(MarkupModelEx)markup,null,null,SeverityRegistrar.getInstance(project));
  DaemonCodeAnalyzerImpl.addHighlight(markup,project,info);
  clearWhiteSpaceOptimizationFlag(document);
  assertMarkupConsistent(markup,project);
}
