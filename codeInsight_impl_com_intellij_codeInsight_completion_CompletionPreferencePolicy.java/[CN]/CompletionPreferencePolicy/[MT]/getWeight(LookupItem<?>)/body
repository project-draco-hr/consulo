{
  if (item.getAttribute(LookupItem.WEIGHT) != null)   return item.getAttribute(LookupItem.WEIGHT);
  final int[] result=new int[9];
  String item1StringCap=capitalsOnly(item.getLookupString());
  result[0]=item1StringCap.startsWith(myPrefixCapitals) ? 1 : 0;
  final Object object=item.getObject();
  if (object instanceof PsiClass && myExpectedInfos != null) {
    final PsiClass psiClass=(PsiClass)object;
    for (    final ExpectedTypeInfo info : myExpectedInfos) {
      if (info.getType().getDeepComponentType().equals(psiClass.getManager().getElementFactory().createType(psiClass))) {
        result[0]=Integer.MAX_VALUE;
        break;
      }
    }
  }
  result[1]=item1StringCap.startsWith(capitalsOnly(myPrefix) + myPrefixCapitals) ? 1 : 0;
  result[2]=item.getLookupString().startsWith(myPrefix) ? 1 : 0;
  result[3]=item.getLookupString().toLowerCase().startsWith(myPrefixLowered) ? 1 : 0;
  if (myExpectedInfos != null) {
    result[4]=getMatchedWordCount(object);
  }
  result[5]=object instanceof String || object instanceof PsiKeyword ? 1 : 0;
  if (object instanceof PsiLocalVariable || object instanceof PsiParameter) {
synchronized (myItemToIndexMap) {
      result[6]=myItemToIndexMap.get(item) - 1;
    }
  }
 else   if (object instanceof PsiMember) {
    if (object instanceof PsiNamedElement) {
      result[6]=myPrefix.equals(((PsiNamedElement)object).getName()) ? 1 : 0;
    }
    final PsiType qualifierType1=CompletionUtil.getQualifierType(item);
    if (qualifierType1 != null) {
      result[7]=StatisticsManager.getInstance().getMemberUseCount(qualifierType1,(PsiMember)object);
    }
  }
  if (object instanceof PsiElement) {
    result[8]=-myProximityComparator.getProximity((PsiElement)object);
  }
  item.setAttribute(LookupItem.WEIGHT,result);
  return result;
}
