{
  if (type == null)   return CommonClassNames.JAVA_LANG_OBJECT;
  if (type instanceof Closure)   return GroovyCommonClassNames.GROOVY_LANG_CLOSURE;
  if (type instanceof Map)   return CommonClassNames.JAVA_UTIL_MAP;
  if (type instanceof Class)   return ((Class)type).getName();
  String s=type.toString();
  LOG.assertTrue(!s.startsWith("? extends"),s);
  LOG.assertTrue(!s.contains("?extends"),s);
  LOG.assertTrue(!s.contains("<null."),s);
  LOG.assertTrue(!s.startsWith("null."),s);
  LOG.assertTrue(!(s.contains(",") && !s.contains("<")),s);
  return s;
}
