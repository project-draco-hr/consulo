{
  try {
    commandLine.setEnvParams(EnvironmentUtil.getEnviromentProperties());
    myProcess=commandLine.createProcess();
    final OSProcessHandler processHandler=new OSProcessHandler(myProcess,commandLine.getCommandLineString()){
      protected Reader createProcessOutReader(){
        return new InputStreamReader(new ByteArrayInputStream(new byte[0]));
      }
    }
;
    processHandler.addProcessListener(new ProcessListener(){
      public void startNotified(      ProcessEvent event){
      }
      public void processTerminated(      ProcessEvent event){
      }
      public void processWillTerminate(      ProcessEvent event,      boolean willBeDestroyed){
      }
      public void onTextAvailable(      ProcessEvent event,      Key outputType){
        if (outputType == ProcessOutputTypes.STDERR) {
          myErrorText.append(event.getText());
          myErrorRegistry.registerError(event.getText());
          myContainsError=true;
        }
      }
    }
);
    myInputStream=myProcess.getInputStream();
    myOutputStream=myProcess.getOutputStream();
  }
 catch (  Exception e) {
    closeInternal();
    throw new AuthenticationException(e.getLocalizedMessage(),e);
  }
}
