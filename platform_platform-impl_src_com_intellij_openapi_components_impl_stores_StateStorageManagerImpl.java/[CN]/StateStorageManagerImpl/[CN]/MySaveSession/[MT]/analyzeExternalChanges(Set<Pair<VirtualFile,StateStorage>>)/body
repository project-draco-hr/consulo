{
  Set<String> result=null;
  for (  Pair<VirtualFile,StateStorage> pair : changedFiles) {
    StateStorage.SaveSession saveSession=mySaveSessions.get(pair.second);
    if (saveSession == null) {
      continue;
    }
    Set<String> changes=saveSession.analyzeExternalChanges(changedFiles);
    if (changes == null) {
      return null;
    }
    if (result == null) {
      result=new THashSet<String>();
    }
    result.addAll(changes);
  }
  return result == null ? Collections.<String>emptySet() : result;
}
