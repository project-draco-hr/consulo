{
  final String expandedFile=expandMacroses(file);
  if (expandedFile == null) {
    myStorages.put(file,null);
    return null;
  }
  final StateSplitter splitter;
  try {
    splitter=splitterClass.newInstance();
  }
 catch (  InstantiationException e) {
    throw new StateStorageException(e);
  }
catch (  IllegalAccessException e) {
    throw new StateStorageException(e);
  }
  return new DirectoryBasedStorage(myPathMacroSubstitutor,expandedFile,splitter,this,myPicoContainer);
}
