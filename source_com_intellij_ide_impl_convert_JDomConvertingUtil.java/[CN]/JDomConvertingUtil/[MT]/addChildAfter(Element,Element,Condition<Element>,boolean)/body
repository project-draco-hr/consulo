{
  List list=parent.getContent();
  for (int i=0; i < list.size(); i++) {
    Object o=list.get(i);
    if (o instanceof Element && filter.value((Element)o)) {
      if (i < list.size() - 1) {
        parent.addContent(i + 1,child);
      }
 else {
        parent.addContent(child);
      }
      return;
    }
  }
  if (addFirstIfNotFound) {
    parent.addContent(0,child);
  }
}
