{
  VirtualFile m1=createModulePom("m1","<groupId>test</groupId>" + "<artifactId>m1</artifactId>" + "<version>1</version>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>test</groupId>"+ "    <artifactId>m2</artifactId>"+ "    <version>1</version>"+ "  </dependency>"+ "</dependencies>");
  VirtualFile m2=createModulePom("m2","<groupId>test</groupId>" + "<artifactId>m2</artifactId>" + "<version>1</version>");
  importProjects(m1,m2);
  ModifiableRootModel model=ModuleRootManager.getInstance(getModule("m2")).getModifiableModel();
  LibraryTable libraryTable=ProjectLibraryTable.getInstance(myProject);
  Library library=libraryTable.createLibrary("foo");
  Library.ModifiableModel libraryModel=library.getModifiableModel();
  libraryModel.addRoot("jar://" + getRepositoryPath() + "/junit/junit/4.0/junit-4.0.jar!/",OrderRootType.CLASSES);
  libraryModel.commit();
  model.addLibraryEntry(library);
  model.commit();
  assertModuleLibDeps("m2","foo");
  setupJdkForModule("m1");
  setupJdkForModule("m2");
  assertModuleClasspath("m1",getProjectPath() + "/m1/target/classes",getProjectPath() + "/m2/target/classes",getRepositoryPath() + "/junit/junit/4.0/junit-4.0.jar");
  assertModuleClasspath("m2",getProjectPath() + "/m2/target/classes",getRepositoryPath() + "/junit/junit/4.0/junit-4.0.jar");
}
