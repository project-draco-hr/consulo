{
  if (!NavBarModel.isValid(object))   return null;
  if (object instanceof Project)   return AllIcons.Nodes.Project;
  if (object instanceof Module)   return ModuleType.get(((Module)object)).getIcon();
  try {
    if (object instanceof PsiElement) {
      Icon icon=ApplicationManager.getApplication().runReadAction(new Computable<Icon>(){
        @Override public Icon compute(){
          return ((PsiElement)object).isValid() ? ((PsiElement)object).getIcon(0) : null;
        }
      }
);
      if (icon != null && (icon.getIconHeight() > 16 || icon.getIconWidth() > 16)) {
        icon=IconUtil.cropIcon(icon,16,16);
      }
      return icon;
    }
  }
 catch (  IndexNotReadyException e) {
    return null;
  }
  if (object instanceof JdkOrderEntry) {
    final SdkTypeId sdkType=((JdkOrderEntry)object).getJdk().getSdkType();
    return ((SdkType)sdkType).getIcon();
  }
  if (object instanceof LibraryOrderEntry)   return AllIcons.Nodes.PpLibFolder;
  if (object instanceof ModuleOrderEntry)   return ModuleType.get(((ModuleOrderEntry)object).getModule()).getIcon();
  return null;
}
