{
  if (!NavBarModel.isValid(object))   return SimpleTextAttributes.REGULAR_ATTRIBUTES;
  if (object instanceof PsiElement) {
    if (!ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
      @Override public Boolean compute(){
        return ((PsiElement)object).isValid();
      }
    }
).booleanValue())     return SimpleTextAttributes.GRAYED_ATTRIBUTES;
    PsiFile psiFile=((PsiElement)object).getContainingFile();
    if (psiFile != null) {
      final VirtualFile virtualFile=psiFile.getVirtualFile();
      return new SimpleTextAttributes(null,selected ? null : FileStatusManager.getInstance(myProject).getStatus(virtualFile).getColor(),JBColor.red,WolfTheProblemSolver.getInstance(myProject).isProblemFile(virtualFile) ? SimpleTextAttributes.STYLE_WAVED : SimpleTextAttributes.STYLE_PLAIN);
    }
 else {
      if (object instanceof PsiDirectory) {
        VirtualFile vDir=((PsiDirectory)object).getVirtualFile();
        if (vDir.getParent() == null || ProjectRootsUtil.isModuleContentRoot(vDir,myProject)) {
          return SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES;
        }
      }
      if (wolfHasProblemFilesBeneath((PsiElement)object)) {
        return WOLFED;
      }
    }
  }
 else   if (object instanceof Module) {
    if (WolfTheProblemSolver.getInstance(myProject).hasProblemFilesBeneath((Module)object)) {
      return WOLFED;
    }
  }
 else   if (object instanceof Project) {
    final Project project=(Project)object;
    final Module[] modules=ApplicationManager.getApplication().runReadAction(new Computable<Module[]>(){
      @Override public Module[] compute(){
        return ModuleManager.getInstance(project).getModules();
      }
    }
);
    for (    Module module : modules) {
      if (WolfTheProblemSolver.getInstance(project).hasProblemFilesBeneath(module)) {
        return WOLFED;
      }
    }
  }
  return SimpleTextAttributes.REGULAR_ATTRIBUTES;
}
