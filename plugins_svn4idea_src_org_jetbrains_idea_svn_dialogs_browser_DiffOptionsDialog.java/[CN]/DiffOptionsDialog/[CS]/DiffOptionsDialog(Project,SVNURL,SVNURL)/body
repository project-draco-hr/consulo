{
  super(project,true);
  myURL=url;
  myRootURL=rootURL;
  myProject=project;
  setTitle(SvnBundle.message("diff.options.title"));
  mySourceUrlLabel.setText(myURL.toString());
  myBrowser.setRepositoryURL(myRootURL,false);
  myBrowser.addChangeListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      update();
    }
  }
);
  myUIDiffButton.addActionListener(this);
  myUnifiedDiffButton.addActionListener(this);
  init();
  myFileBrowser.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      File f=selectFile("Patch File","Select file to store unified diff");
      if (f != null) {
        if (f.exists() && f.isDirectory()) {
          f=new File(f,DEFAULT_PATCH_NAME);
        }
        myFileBrowser.setText(f.getAbsolutePath());
      }
    }
  }
);
  myFileBrowser.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    final DocumentEvent e){
      update();
    }
  }
);
  final VirtualFile baseDir=myProject.getBaseDir();
  if (baseDir != null) {
    String projectDir=baseDir.getPath();
    projectDir=projectDir.replace('/',File.separatorChar);
    myFileBrowser.setText(projectDir + File.separatorChar + DEFAULT_PATCH_NAME);
  }
}
