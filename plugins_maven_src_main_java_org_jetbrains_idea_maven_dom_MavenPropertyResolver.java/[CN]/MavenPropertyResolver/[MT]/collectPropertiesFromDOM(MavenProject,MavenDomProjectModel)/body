{
  Properties result=new Properties();
  collectPropertiesFromDOM(projectDom.getProperties(),result);
  Collection<String> activePropfiles=project.getActivatedProfilesIds();
  for (  MavenDomProfile each : projectDom.getProfiles().getProfiles()) {
    XmlTag idTag=each.getId().getXmlTag();
    if (idTag == null || !activePropfiles.contains(idTag.getValue().getTrimmedText()))     continue;
    collectPropertiesFromDOM(each.getProperties(),result);
  }
  return result;
}
