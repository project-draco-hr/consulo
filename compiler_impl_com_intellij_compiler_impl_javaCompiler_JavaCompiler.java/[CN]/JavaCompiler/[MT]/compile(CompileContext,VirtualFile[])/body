{
  final BackendCompiler backEndCompiler=getBackEndCompiler();
  final BackendCompilerWrapper wrapper=new BackendCompilerWrapper(myProject,Arrays.asList(files),(CompileContextEx)context,backEndCompiler);
  List<OutputItem> outputItems;
  try {
    outputItems=wrapper.compile();
  }
 catch (  CompilerException e) {
    outputItems=Collections.emptyList();
    context.addMessage(CompilerMessageCategory.ERROR,e.getMessage(),null,-1,-1);
  }
catch (  CacheCorruptedException e) {
    LOG.info(e);
    context.requestRebuildNextTime(e.getMessage());
    outputItems=Collections.emptyList();
  }
  Collection<VirtualFile> vf=wrapper.getFilesToRecompile();
  return new ExitStatusImpl(outputItems,vf.toArray(new VirtualFile[vf.size()]));
}
