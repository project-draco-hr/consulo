{
  List<PsiClass> list=null;
  final PsiDirectory[] dirs=psiPackage.getDirectories(scope);
  String packageName=psiPackage.getQualifiedName();
  for (  PsiDirectory dir : dirs) {
    PsiClass[] classes=JavaDirectoryService.getInstance().getClasses(dir);
    if (classes.length == 0)     continue;
    if (list == null)     list=new ArrayList<PsiClass>();
    for (    PsiClass aClass : classes) {
      if (Comparing.strEqual(((PsiClassOwner)aClass.getContainingFile()).getPackageName(),packageName)) {
        list.add(aClass);
      }
    }
  }
  return list == null ? PsiClass.EMPTY_ARRAY : list.toArray(new PsiClass[list.size()]);
}
