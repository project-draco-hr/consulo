{
  final ActionCallback result=new ActionCallback();
  ToolWindowManager windowManager=ToolWindowManager.getInstance(project);
  final ToolWindow favoritesToolWindow=windowManager.getToolWindow(ToolWindowId.FAVORITES_VIEW);
  if (favoritesToolWindow != null) {
    final FavoritesTreeViewPanel panel=UIUtil.findComponentOfType(favoritesToolWindow.getComponent(),FavoritesTreeViewPanel.class);
    if (panel != null) {
      final Runnable runnable=new Runnable(){
        public void run(){
          panel.selectElement(toSelect,virtualFile,requestFocus);
          result.setDone();
        }
      }
;
      if (requestFocus) {
        favoritesToolWindow.activate(runnable,false);
      }
 else {
        favoritesToolWindow.show(runnable);
      }
    }
  }
  return result;
}
