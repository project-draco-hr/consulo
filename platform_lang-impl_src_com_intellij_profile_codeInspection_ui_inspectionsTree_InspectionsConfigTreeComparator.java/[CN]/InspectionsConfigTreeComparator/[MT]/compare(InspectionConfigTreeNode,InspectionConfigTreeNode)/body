{
  String s1=null;
  String s2=null;
  Object userObject1=o1.getUserObject();
  Object userObject2=o2.getUserObject();
  if (userObject1 instanceof String && userObject2 instanceof String) {
    s1=(String)userObject1;
    s2=(String)userObject2;
  }
 else {
    if (userObject1 instanceof String)     return -1;
    if (userObject2 instanceof String)     return 1;
  }
  if (s1 != null) {
    return getDisplayTextToSort(s1).compareToIgnoreCase(getDisplayTextToSort(s2));
  }
  final ToolDescriptors descriptors1=o1.getDescriptors();
  final ToolDescriptors descriptors2=o2.getDescriptors();
  if (descriptors1 != null && descriptors2 != null) {
    s1=descriptors1.getDefaultDescriptor().getText();
    s2=descriptors2.getDefaultDescriptor().getText();
  }
  if (s1 != null && s2 != null) {
    return getDisplayTextToSort(s1).compareToIgnoreCase(getDisplayTextToSort(s2));
  }
  return -1;
}
