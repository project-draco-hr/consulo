def stylemap(styles, paths=None):
    'Return path to mapfile for a given style.\n\n    Searches mapfile in the following locations:\n    1. templatepath/style/map\n    2. templatepath/map-style\n    3. templatepath/map\n    '
    if (paths is None):
        paths = templatepath()
    elif isinstance(paths, str):
        paths = [paths]
    if isinstance(styles, str):
        styles = [styles]
    for style in styles:
        if (not style):
            continue
        locations = [os.path.join(style, 'map'), ('map-' + style)]
        locations.append('map')
        for path in paths:
            for location in locations:
                mapfile = os.path.join(path, location)
                if os.path.isfile(mapfile):
                    return (style, mapfile)
    raise RuntimeError(('No hgweb templates found in %r' % paths))
