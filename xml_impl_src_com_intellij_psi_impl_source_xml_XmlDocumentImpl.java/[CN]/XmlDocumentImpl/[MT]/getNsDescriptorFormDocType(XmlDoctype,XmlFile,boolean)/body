{
  XmlNSDescriptor descriptor=getNSDescriptorFromMetaData(doctype.getMarkupDecl(),nonEmpty);
  final String dtdUri=XmlUtil.getDtdUri(doctype);
  if (dtdUri != null && dtdUri.length() > 0) {
    final XmlFile xmlFile=XmlUtil.findNamespace(containingFile,dtdUri);
    XmlNSDescriptor descriptorFromDtd=getNSDescriptorFromMetaData(xmlFile == null ? null : xmlFile.getDocument(),nonEmpty);
    if (descriptor != null && descriptorFromDtd != null) {
      descriptor=new XmlNSDescriptorSequence(new XmlNSDescriptor[]{descriptor,descriptorFromDtd});
    }
 else     if (descriptorFromDtd != null) {
      descriptor=descriptorFromDtd;
    }
  }
  return descriptor;
}
