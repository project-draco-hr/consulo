{
  XmlNSDescriptor descr=null;
  if (doctype.getMarkupDecl() != null) {
    descr=(XmlNSDescriptor)doctype.getMarkupDecl().getMetaData();
    final XmlElementDescriptor[] rootElementsDescriptors=descr.getRootElementsDescriptors(this);
    if (rootElementsDescriptors.length == 0)     descr=null;
  }
  final String dtdUri=doctype.getDtdUri();
  if (dtdUri == null || dtdUri.length() > 0) {
    XmlFile xmlFile;
    if (dtdUri == null) {
      URL schemaLocation=getClass().getResource(ExternalResourceManagerImpl.STANDARD_SCHEMAS + HTML5_SCHEMA);
      String path=FileUtil.toSystemIndependentName(schemaLocation.getPath().substring(1));
      xmlFile=XmlUtil.findXmlFile(containingFile,path);
    }
 else {
      xmlFile=XmlUtil.findNamespace(containingFile,dtdUri);
    }
    final XmlNSDescriptor descr1=xmlFile == null ? null : (XmlNSDescriptor)xmlFile.getDocument().getMetaData();
    if (descr != null && descr1 != null) {
      descr=new XmlNSDescriptorSequence(new XmlNSDescriptor[]{descr,descr1});
    }
 else     if (descr1 != null) {
      descr=descr1;
    }
  }
  return descr;
}
