{
  XmlNSDescriptor descr=null;
  if (doctype.getMarkupDecl() != null) {
    descr=(XmlNSDescriptor)doctype.getMarkupDecl().getMetaData();
    final XmlElementDescriptor[] rootElementsDescriptors=descr.getRootElementsDescriptors(this);
    if (rootElementsDescriptors.length == 0)     descr=null;
  }
  XmlFile xmlFile=null;
  final String dtdUri=doctype.getDtdUri();
  if (dtdUri == null && descr == null) {
    xmlFile=getNsDescriptorWhenEmptyDocType(containingFile);
  }
 else   if (dtdUri != null && dtdUri.length() > 0) {
    xmlFile=XmlUtil.findNamespace(containingFile,dtdUri);
  }
  final XmlNSDescriptor descr1=xmlFile == null ? null : (XmlNSDescriptor)xmlFile.getDocument().getMetaData();
  if (descr != null && descr1 != null) {
    descr=new XmlNSDescriptorSequence(new XmlNSDescriptor[]{descr,descr1});
  }
 else   if (descr1 != null) {
    descr=descr1;
  }
  return descr;
}
