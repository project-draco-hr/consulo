{
  final ConcurrentHashMap<String,CachedValue<XmlNSDescriptor>> defaultDescriptorsCache;
  if (strict) {
    defaultDescriptorsCache=myDefaultDescriptorsCacheStrict;
  }
 else {
    defaultDescriptorsCache=myDefaultDescriptorsCacheNotStrict;
  }
  CachedValue<XmlNSDescriptor> cachedValue=defaultDescriptorsCache.get(namespace);
  if (cachedValue == null) {
    defaultDescriptorsCache.put(namespace,cachedValue=new PsiCachedValueImpl<XmlNSDescriptor>(getManager(),new CachedValueProvider<XmlNSDescriptor>(){
      public Result<XmlNSDescriptor> compute(){
        final XmlNSDescriptor defaultNSDescriptorInner=getDefaultNSDescriptorInner(namespace,strict);
        if (isGeneratedFromDtd(defaultNSDescriptorInner)) {
          return new Result<XmlNSDescriptor>(defaultNSDescriptorInner,XmlDocumentImpl.this,ExternalResourceManager.getInstance());
        }
        return new Result<XmlNSDescriptor>(defaultNSDescriptorInner,defaultNSDescriptorInner != null ? defaultNSDescriptorInner.getDependences() : ExternalResourceManager.getInstance());
      }
    }
));
  }
  return cachedValue.getValue();
}
