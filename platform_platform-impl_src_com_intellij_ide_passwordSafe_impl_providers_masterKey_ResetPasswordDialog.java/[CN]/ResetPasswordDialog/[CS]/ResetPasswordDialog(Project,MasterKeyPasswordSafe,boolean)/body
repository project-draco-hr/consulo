{
  super(project,true);
  setTitle(firstTime ? "Master Password" : "Reset Master Password");
  setOKButtonText(firstTime ? "Set Password" : "Reset Password");
  if (safe.isOsProtectedPasswordSupported()) {
    myEncryptMasterPasswordWithCheckBox.setSelected(true);
  }
 else {
    myEncryptMasterPasswordWithCheckBox.setSelected(false);
    myEncryptMasterPasswordWithCheckBox.setVisible(false);
  }
  if (firstTime) {
    myPrompt.setText("Specify Master Password for the password database.");
  }
  MasterKeyUtils.matchPasswords(myConfirmNewPasswordPasswordField,myNewPasswordPasswordField,new Processor<String>(){
    public boolean process(    String s){
      setErrorText(s);
      setOKActionEnabled(s == null);
      return false;
    }
  }
);
  init();
}
