{
  NotNullFunction<Integer,CommitId> function;
  if (!commitsIdMap.isEmpty() && commitsIdMap.get(0) instanceof Integer) {
    int[] ints=new int[commitsIdMap.size()];
    for (int row=0; row < commitsIdMap.size(); row++) {
      ints[row]=(Integer)commitsIdMap.get(row);
    }
    function=(NotNullFunction<Integer,CommitId>)new IntegerCommitIdMapFunction(CompressedIntList.newInstance(ints));
  }
 else {
    function=new CommitIdMapFunction<>(commitsIdMap);
  }
  return function;
}
