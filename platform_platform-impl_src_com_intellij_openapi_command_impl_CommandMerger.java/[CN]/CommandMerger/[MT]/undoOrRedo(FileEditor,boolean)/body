{
  boolean fullyTransparent=isTransparent();
  flushCurrentCommand();
  if (fullyTransparent) {
    while (true) {
      Undo undo=new Undo(myManager,editor);
      if (!undo.isTransparentsOnly())       break;
      undo.execute(true);
      if (!undo.hasMoreActions())       break;
    }
  }
  do {
    UndoRedo undoOrRedo=isUndo ? new Undo(myManager,editor) : new Redo(myManager,editor);
    undoOrRedo.execute(false);
    boolean shouldRepeat=undoOrRedo.isTransparentsOnly() && undoOrRedo.hasMoreActions();
    if (!shouldRepeat)     break;
  }
 while (true);
}
