{
  myManager=manager;
  EditorEventMulticaster eventMulticaster=editorFactory.getEventMulticaster();
  DocumentAdapter documentListener=new DocumentAdapter(){
    public void documentChanged(    DocumentEvent e){
      Document document=e.getDocument();
      if (myManager.isActive() && !myManager.isUndoInProgress() && !myManager.isRedoInProgress()) {
        myManager.getRedoStacksHolder().getStack(document).clear();
      }
    }
  }
;
  eventMulticaster.addDocumentListener(documentListener,this);
}
