{
  final VirtualFile vcsRoot=VcsUtil.getVcsRootFor(myProject,filePath);
  if (vcsRoot == null) {
    return null;
  }
  final HgLogCommand logCommand=new HgLogCommand(myProject);
  logCommand.setFollowCopies(true);
  final HgFile file=new HgFile(vcsRoot,filePath);
  final List<HgFileRevision> revisions=logCommand.execute(file,DEFAULT_LIMIT);
  return new VcsAbstractHistorySession(revisions){
    protected VcsRevisionNumber calcCurrentRevisionNumber(){
      return logCommand.execute(file,1).get(0).getRevisionNumber();
    }
    public HistoryAsTreeProvider getHistoryAsTreeProvider(){
      return null;
    }
  }
;
}
