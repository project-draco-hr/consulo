{
  final VirtualFile vcsRoot=VcsUtil.getVcsRootFor(myProject,filePath);
  if (vcsRoot == null) {
    return null;
  }
  final List<HgFileRevision> revisions=getHistory(filePath,vcsRoot,myProject,DEFAULT_LIMIT);
  return new VcsAbstractHistorySession(revisions){
    public VcsRevisionNumber calcCurrentRevisionNumber(){
      return new HgWorkingCopyRevisionsCommand(myProject).firstParent(vcsRoot);
    }
    public HistoryAsTreeProvider getHistoryAsTreeProvider(){
      return null;
    }
  }
;
}
