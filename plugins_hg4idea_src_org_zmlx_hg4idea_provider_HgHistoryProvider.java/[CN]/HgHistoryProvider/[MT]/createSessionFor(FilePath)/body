{
  final VirtualFile vcsRoot=VcsUtil.getVcsRootFor(project,filePath);
  if (vcsRoot == null) {
    return null;
  }
  HgFile hgFile=new HgFile(vcsRoot,filePath);
  List<HgFileRevision> revisions=getHistory(filePath,vcsRoot,project,DEFAULT_LIMIT);
  final List<VcsFileRevision> result=new LinkedList<VcsFileRevision>(revisions);
  return new VcsHistorySession(){
    public VcsRevisionNumber getCurrentRevisionNumber(){
      return new HgWorkingCopyRevisionsCommand(project).firstParent(vcsRoot);
    }
    public HistoryAsTreeProvider getHistoryAsTreeProvider(){
      return null;
    }
    public List<VcsFileRevision> getRevisionList(){
      return result;
    }
    public boolean isCurrentRevision(    VcsRevisionNumber vcsRevisionNumber){
      return vcsRevisionNumber.equals(getCurrentRevisionNumber());
    }
    public boolean shouldBeRefreshed(){
      return false;
    }
    public boolean allowAsyncRefresh(){
      return false;
    }
    public boolean isContentAvailable(    VcsFileRevision vcsFileRevision){
      return false;
    }
  }
;
}
