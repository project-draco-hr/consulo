{
  if (position == null)   return false;
  if (position instanceof PsiWhiteSpace || position.getNode().getElementType() == mNLS) {
    position=FilterPositionUtil.searchNonSpaceNonCommentBack(position);
  }
  boolean hasCommas=false;
  while (position != null) {
    PsiElement parent=position.getParent();
    if (parent instanceof GrVariable) {
      PsiElement prev=FilterPositionUtil.searchNonSpaceNonCommentBack(parent);
      hasCommas=prev != null && prev.getNode().getElementType() == mCOMMA;
    }
    if (parent instanceof GrClosableBlock) {
      PsiElement sibling=position.getPrevSibling();
      while (sibling != null) {
        if (sibling instanceof GrParameterList) {
          return hasCommas;
        }
        boolean isComma=sibling instanceof LeafPsiElement && mCOMMA == ((LeafPsiElement)sibling).getElementType();
        hasCommas|=isComma;
        if (isComma || sibling instanceof PsiWhiteSpace || sibling instanceof PsiErrorElement|| sibling instanceof GrVariableDeclaration|| sibling instanceof GrReferenceExpression && !((GrReferenceExpression)sibling).isQualified()) {
          sibling=sibling.getPrevSibling();
        }
 else {
          return false;
        }
      }
      return false;
    }
    position=parent;
  }
  return false;
}
