{
  final StringBuilder classpathBuffer=StringBuilderSpinAllocator.alloc();
  try {
    final OrderEntry[] orderEntries=CompilerPathsEx.getOrderEntries(module);
    for (    final OrderEntry orderEntry : orderEntries) {
      final VirtualFile[] files=orderEntry.getFiles(OrderRootType.COMPILATION_CLASSES);
      for (      VirtualFile file : files) {
        final String path=PathUtil.getLocalPath(file);
        if (path == null) {
          continue;
        }
        if (classpathBuffer.length() > 0) {
          classpathBuffer.append(File.pathSeparatorChar);
        }
        classpathBuffer.append(path);
      }
    }
    return classpathBuffer.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(classpathBuffer);
  }
}
