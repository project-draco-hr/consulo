{
  if (injectedNode instanceof LeafElement) {
    return oldFileNode instanceof LeafElement && injectedNode.getElementType().equals(oldFileNode.getElementType()) && injectedNode.getText().equals(oldFileNode.getText());
  }
  if (!(injectedNode instanceof CompositeElement) || !(oldFileNode instanceof CompositeElement))   return false;
  CompositeElement element1=(CompositeElement)injectedNode;
  CompositeElement element2=(CompositeElement)oldFileNode;
  TreeElement child1=element1.getFirstChildNode();
  TreeElement child2=element2.getFirstChildNode();
  while (child1 != null && child2 != null) {
    if (!comparePSI(child1,child2))     return false;
    child1=child1.getTreeNext();
    child2=child2.getTreeNext();
  }
  return child1 == null && child2 == null;
}
