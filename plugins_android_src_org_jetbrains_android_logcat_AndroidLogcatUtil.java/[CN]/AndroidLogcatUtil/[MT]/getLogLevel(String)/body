{
  if (LOG_LEVELS == null) {
    LOG_LEVELS=new HashMap<String,Log.LogLevel>();
    for (    Log.LogLevel level : Log.LogLevel.values()) {
      String name=level.name();
      if (minLogLevelNameLength == 0 || name.length() < minLogLevelNameLength) {
        minLogLevelNameLength=name.length();
      }
      if (name.length() > maxLogLevelNameLength) {
        maxLogLevelNameLength=name.length();
      }
      LOG_LEVELS.put(name,level);
    }
  }
  for (int i=0, n=message.length(); i < n; i++) {
    for (int j=i + minLogLevelNameLength; j <= i + maxLogLevelNameLength && j < n; j++) {
      String s=message.substring(i,j);
      Log.LogLevel logLevel=LOG_LEVELS.get(s);
      if (logLevel != null)       return logLevel;
    }
  }
  return null;
}
