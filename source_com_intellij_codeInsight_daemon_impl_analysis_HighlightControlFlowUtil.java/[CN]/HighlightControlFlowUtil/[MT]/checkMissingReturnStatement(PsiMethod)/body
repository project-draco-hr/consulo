{
  PsiCodeBlock body=method.getBody();
  if (body == null || method.getReturnType() == null || PsiType.VOID == method.getReturnType()) {
    return null;
  }
  final PsiCodeBlock codeFragment=body;
  try {
    final ControlFlow controlFlow=ControlFlowFactory.getControlFlow(codeFragment,LocalsOrMyInstanceFieldsControlFlowPolicy.getInstance(),false);
    if (!ControlFlowUtil.returnPresent(controlFlow)) {
      final PsiElement context=body.getRBrace() == null ? body.getLastChild() : body.getRBrace();
      final HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,context,"Missing return statement");
      QuickFixAction.registerQuickFixAction(highlightInfo,new AddReturnFix(method));
      QuickFixAction.registerQuickFixAction(highlightInfo,new MethodReturnFix(method,PsiType.VOID,false));
      return highlightInfo;
    }
  }
 catch (  ControlFlowAnalyzer.AnalysisCanceledException e) {
  }
  return null;
}
