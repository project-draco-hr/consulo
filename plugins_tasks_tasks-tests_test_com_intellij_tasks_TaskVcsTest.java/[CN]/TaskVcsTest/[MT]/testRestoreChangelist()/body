{
  final LocalTaskImpl task=new LocalTaskImpl("foo","bar");
  myTaskManager.activateTask(task,true,true);
  myTaskManager.activateTask(new LocalTaskImpl("next",""),true,true);
  final String changelistName=myTaskManager.getChangelistName(task);
  myChangeListManager.removeChangeList(changelistName);
  myChangeListManager.invokeAfterUpdate(new Runnable(){
    @Override public void run(){
      assertTrue(myTaskManager.isLocallyClosed(task));
      myTaskManager.activateTask(task,true,true);
      assertNotNull(myChangeListManager.findChangeList(changelistName));
    }
  }
,InvokeAfterUpdateMode.SYNCHRONOUS_NOT_CANCELLABLE,"foo",ModalityState.NON_MODAL);
}
