{
  if (s == null) {
    stream.writeInt(-1);
    return;
  }
  if (s.length() == 0) {
    stream.writeInt(0);
    return;
  }
  char[] chars=s.toCharArray();
  byte[] bytes=new byte[chars.length * 2];
  stream.writeInt(chars.length);
  for (int i=0, i2=0; i < chars.length; i++, i2+=2) {
    char aChar=chars[i];
    bytes[i2]=(byte)((aChar >>> 8) & 0xFF);
    bytes[i2 + 1]=(byte)((aChar) & 0xFF);
  }
  stream.write(bytes);
}
