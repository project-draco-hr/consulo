{
  if (Thread.interrupted())   throw new InterruptedException();
  Thread caller=Thread.currentThread();
synchronized (this) {
    if (caller == owner_) {
      ++holds_;
      return true;
    }
 else     if (owner_ == null) {
      owner_=caller;
      holds_=1;
      return true;
    }
 else     if (msecs <= 0)     return false;
 else {
      long waitTime=msecs;
      long start=System.currentTimeMillis();
      try {
        for (; ; ) {
          wait(waitTime);
          if (caller == owner_) {
            ++holds_;
            return true;
          }
 else           if (owner_ == null) {
            owner_=caller;
            holds_=1;
            return true;
          }
 else {
            waitTime=msecs - (System.currentTimeMillis() - start);
            if (waitTime <= 0)             return false;
          }
        }
      }
 catch (      InterruptedException ex) {
        notify();
        throw ex;
      }
    }
  }
}
