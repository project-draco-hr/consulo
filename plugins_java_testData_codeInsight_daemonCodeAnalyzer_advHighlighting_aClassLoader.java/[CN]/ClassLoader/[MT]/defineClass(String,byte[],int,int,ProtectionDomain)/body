{
  check();
  if ((name != null) && name.startsWith("java.")) {
    throw new SecurityException("Prohibited package name: " + name.substring(0,name.lastIndexOf('.')));
  }
  if (protectionDomain == null) {
    protectionDomain=getDefaultDomain();
  }
  if (name != null)   checkCerts(name,protectionDomain.getCodeSource());
  Class c=null;
  try {
    c=defineClass0(name,b,off,len,protectionDomain);
  }
 catch (  ClassFormatError cfe) {
    Object[] transformers=ClassFileTransformer.getTransformers();
    for (int i=0; transformers != null && i < transformers.length; i++) {
      try {
        byte[] tb=((ClassFileTransformer)transformers[i]).transform(b,off,len);
        c=defineClass0(name,tb,0,tb.length,protectionDomain);
        break;
      }
 catch (      ClassFormatError cfe2) {
      }
    }
    if (c == null)     throw cfe;
  }
  if (protectionDomain.getCodeSource() != null) {
    java.security.cert.Certificate certs[]=protectionDomain.getCodeSource().getCertificates();
    if (certs != null)     setSigners(c,certs);
  }
  return c;
}
