{
  if (nextOffset > myFlow.getSize())   nextOffset=myFlow.getSize();
  CopyOnWriteList readVars=readVariables[nextOffset];
  PsiElement element=myFlow.getElement(offset);
  final PsiVariable variable=instruction.variable;
  if (!(variable instanceof PsiParameter) || ((PsiParameter)variable).getDeclarationScope() instanceof PsiForeachStatement) {
    PsiReferenceExpression expression=getEnclosingReferenceExpression(element,variable);
    if (expression != null) {
      VariableInfo variableInfo=new VariableInfo(variable,expression);
      if (readVars == null) {
        readVars=new CopyOnWriteList();
        readVars.list.add(variableInfo);
      }
 else {
        readVars=readVars.add(variableInfo);
      }
    }
  }
  merge(offset,readVars,readVariables);
}
