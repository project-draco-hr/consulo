{
  final DirDiffOperation op=getOperation();
  if (myType == DiffType.SOURCE) {
    myOperation=op == COPY_TO ? DELETE : op == DELETE ? NONE : COPY_TO;
  }
 else   if (myType == DiffType.TARGET) {
    myOperation=op == COPY_FROM ? DELETE : op == DELETE ? NONE : COPY_FROM;
  }
 else   if (myType == DiffType.CHANGED) {
    myOperation=op == MERGE ? COPY_TO : op == COPY_TO ? COPY_FROM : MERGE;
  }
}
