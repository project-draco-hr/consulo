{
  final PsiStatement containingStatement=PsiTreeUtil.getParentOfType(element,PsiStatement.class);
  if (containingStatement == null) {
    return;
  }
  if (ExpandBooleanPredicate.isBooleanAssignment(containingStatement)) {
    final PsiExpressionStatement assignmentStatement=(PsiExpressionStatement)containingStatement;
    final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)assignmentStatement.getExpression();
    final PsiExpression rhs=assignmentExpression.getRExpression();
    if (rhs == null) {
      return;
    }
    final String rhsText=rhs.getText();
    final PsiExpression lhs=assignmentExpression.getLExpression();
    final String lhsText=lhs.getText();
    final PsiJavaToken sign=assignmentExpression.getOperationSign();
    final String signText=sign.getText();
    final String conditionText;
    if (signText.length() == 2) {
      conditionText=lhsText + signText.charAt(0) + rhsText;
    }
 else {
      conditionText=rhsText;
    }
    @NonNls final String statement="if(" + conditionText + ") "+ lhsText+ " = true; else "+ lhsText+ " = false;";
    replaceStatement(statement,containingStatement);
  }
 else   if (ExpandBooleanPredicate.isBooleanReturn(containingStatement)) {
    final PsiReturnStatement returnStatement=(PsiReturnStatement)containingStatement;
    final PsiExpression returnValue=returnStatement.getReturnValue();
    if (returnValue == null) {
      return;
    }
    final String valueText=returnValue.getText();
    @NonNls final String statement="if(" + valueText + ") return true; else return false;";
    replaceStatement(statement,containingStatement);
  }
}
