{
  final String descriptionDirectoryName=extension.getDescriptionDirectoryName();
  final String[] categories=extension.getCategories();
  final IntentionAction instance=createIntentionActionWrapper(extension,categories);
  if (categories == null) {
    addAction(instance);
  }
 else {
    if (descriptionDirectoryName != null) {
      addAction(instance);
      mySettings.registerIntentionMetaData(instance,categories,descriptionDirectoryName,extension.getMetadataClassLoader());
    }
 else {
      registerIntentionAndMetaData(instance,categories);
    }
  }
}
