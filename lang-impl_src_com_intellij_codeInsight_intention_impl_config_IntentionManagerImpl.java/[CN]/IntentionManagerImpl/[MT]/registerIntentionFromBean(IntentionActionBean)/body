{
  try {
    final String descriptionDirectoryName=extension.getDescriptionDirectoryName();
    final String[] categories=extension.getCategories();
    final IntentionAction instance=createIntentionActionWrapper(extension.instantiate(),categories);
    if (categories == null) {
      addAction(instance);
    }
 else {
      if (descriptionDirectoryName != null) {
        addAction(instance);
        mySettings.registerIntentionMetaData(instance,categories,descriptionDirectoryName,extension.getMetadataClassLoader());
      }
 else {
        registerIntentionAndMetaData(instance,categories);
      }
    }
  }
 catch (  ClassNotFoundException e) {
    LOG.error(e);
  }
}
