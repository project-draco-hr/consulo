{
  final StringBuffer message=new StringBuffer();
  message.append("Invalid formatting blocks");
  message.append('\n');
  if (model instanceof FormattingDocumentModelImpl) {
    final FormattingDocumentModelImpl modelImpl=((FormattingDocumentModelImpl)model);
    message.append("Psi Tree:");
    message.append('\n');
    DebugUtil.treeToBuffer(message,modelImpl.getFile().getNode(),0,false,true,true);
    message.append('\n');
  }
  message.append("Start Offset:");
  message.append(startOffset);
  message.append(newEndOffset);
  message.append(newEndOffset);
  message.append("File text:");
  message.append('\n');
  message.append(model.getText(new TextRange(0,model.getTextLength())).toString());
  LOG.assertTrue(false,message.toString());
}
