{
  final CachedValue<TypeDescriptor> value=CachedValuesManager.getManager(tag.getProject()).createCachedValue(new CachedValueProvider<TypeDescriptor>(){
    public CachedValueProvider.Result<TypeDescriptor> compute(){
      final String name=tag.getAttributeValue("name");
      if (name != null && pair.first != null && pair.first.first != null && !name.equals(XmlUtil.findLocalNameByQualifiedName(pair.first.first))) {
        myTypesMap.remove(pair);
        return new Result<TypeDescriptor>(null);
      }
      final ComplexTypeDescriptor complexTypeDescriptor=new ComplexTypeDescriptor(XmlNSDescriptorImpl.this,tag);
      return new Result<TypeDescriptor>(complexTypeDescriptor,tag);
    }
  }
,false);
  myTypesMap.put(pair,value);
  return value;
}
