{
  VirtualFile vFile=VfsUtil.findFileByIoFile(file,true);
  String patchPath=file.getPath();
  if (vFile == null) {
    VcsNotifier.getInstance(project).notifyWeakError("Can't find patch file " + patchPath);
    return false;
  }
  if (!isPatchFile(file)) {
    VcsNotifier.getInstance(project).notifyWeakError("Selected file " + patchPath + " is not patch type file ");
    return false;
  }
  final ApplyPatchDifferentiatedDialog dialog=new ApplyPatchDifferentiatedDialog(project,new ApplyPatchDefaultExecutor(project),Collections.emptyList(),ApplyPatchMode.APPLY_PATCH_IN_MEMORY,vFile);
  dialog.setModal(true);
  return dialog.showAndGet();
}
