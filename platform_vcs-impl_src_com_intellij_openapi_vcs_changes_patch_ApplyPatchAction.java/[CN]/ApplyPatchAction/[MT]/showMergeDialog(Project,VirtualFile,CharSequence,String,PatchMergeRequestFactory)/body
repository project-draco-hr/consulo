{
  final FileDocumentManager fileDocumentManager=FileDocumentManager.getInstance();
  Document document=fileDocumentManager.getDocument(file);
  if (document != null) {
    fileDocumentManager.saveDocument(document);
  }
  CharSequence fileContent=LoadTextUtil.loadText(file);
  if (fileContent == null || content == null) {
    return ApplyPatchStatus.FAILURE;
  }
  final MergeRequest request=mergeRequestFactory.createMergeRequest(fileContent.toString(),patchedContent,content.toString(),file,project);
  DiffManager.getInstance().getDiffTool().show(request);
  if (request.getResult() == DialogWrapper.OK_EXIT_CODE) {
    return ApplyPatchStatus.SUCCESS;
  }
  request.restoreOriginalContent();
  return ApplyPatchStatus.FAILURE;
}
