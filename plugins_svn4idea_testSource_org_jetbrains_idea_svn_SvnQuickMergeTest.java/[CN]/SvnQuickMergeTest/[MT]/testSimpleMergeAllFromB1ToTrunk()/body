{
  editFileInCommand(myProject,myBranchTree.myS1File,"edited in branch");
  runInAndVerifyIgnoreOutput(myBranchRoot,"ci","-m","change in branch",myBranchTree.myS1File.getPath());
  final WCInfo found=getWcInfo();
  final QuickMerge quickMerge=new QuickMerge(myProject,myBranchUrl,found,SVNPathUtil.tail(myBranchUrl),myWorkingCopyDir);
  final QuickMergeTestInteraction testInteraction=new QuickMergeTestInteraction(){
    @Override public boolean shouldReintegrate(    @NotNull String sourceUrl,    @NotNull String targetUrl){
      return true;
    }
  }
;
  final WaitingTaskDescriptor descriptor=new WaitingTaskDescriptor();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      quickMerge.execute(testInteraction,descriptor);
    }
  }
);
  descriptor.waitForCompletion();
  testInteraction.throwIfExceptions();
  Assert.assertTrue(descriptor.isCompleted());
  VcsDirtyScopeManager.getInstance(myProject).markEverythingDirty();
  myChangeListManager.ensureUpToDate(false);
  final Change fileChange=myChangeListManager.getChange(myTree.myS1File);
  Assert.assertNotNull(fileChange);
  Assert.assertEquals(FileStatus.MODIFIED,fileChange.getFileStatus());
  final Change dirChange=myChangeListManager.getChange(myWorkingCopyDir);
  Assert.assertNotNull(dirChange);
  Assert.assertEquals(FileStatus.MODIFIED,dirChange.getFileStatus());
}
