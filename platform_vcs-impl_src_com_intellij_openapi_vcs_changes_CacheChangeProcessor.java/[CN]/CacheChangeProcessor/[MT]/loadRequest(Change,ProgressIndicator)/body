{
  ChangeDiffRequestProducer presentable=ChangeDiffRequestProducer.create(getProject(),change);
  if (presentable == null)   return new ErrorDiffRequest("Can't show diff");
  try {
    return presentable.process(getContext(),indicator);
  }
 catch (  ProcessCanceledException e) {
    OperationCanceledDiffRequest request=new OperationCanceledDiffRequest(presentable.getName());
    request.putUserData(DiffUserDataKeys.CONTEXT_ACTIONS,Collections.<AnAction>singletonList(new ReloadRequestAction(change)));
    return request;
  }
catch (  DiffRequestProducerException e) {
    return new ErrorDiffRequest(presentable,e);
  }
catch (  Exception e) {
    LOG.warn(e);
    return new ErrorDiffRequest(presentable,e);
  }
}
