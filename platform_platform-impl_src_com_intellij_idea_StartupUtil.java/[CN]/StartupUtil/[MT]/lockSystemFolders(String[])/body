{
  if (ourLock == null) {
    ourLock=new SocketLock();
  }
  SocketLock.ActivateStatus activateStatus=ourLock.lock(PathManager.getConfigPath(),true,args);
  if (activateStatus == SocketLock.ActivateStatus.NO_INSTANCE) {
    activateStatus=ourLock.lock(PathManager.getSystemPath(),false);
  }
  if (activateStatus != SocketLock.ActivateStatus.NO_INSTANCE) {
    if (Main.isHeadless() || activateStatus == SocketLock.ActivateStatus.CANNOT_ACTIVATE) {
      String message="Only one instance of " + ApplicationNamesInfo.getInstance().getFullProductName() + " can be run at a time.";
      Main.showMessage("Too Many Instances",message,true);
    }
    return false;
  }
  return true;
}
