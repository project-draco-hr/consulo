{
  if (ourLock == null) {
    ourLock=new SocketLock();
  }
  boolean locked=ourLock.lock(PathManager.getConfigPath(false)) && ourLock.lock(PathManager.getSystemPath());
  if (!locked) {
    if (isHeadless()) {
      System.out.println("Only one instance of " + ApplicationNamesInfo.getInstance().getProductName() + " can be run at a time.");
      return false;
    }
    JOptionPane.showMessageDialog(JOptionPane.getRootFrame(),"Only one instance of " + ApplicationNamesInfo.getInstance().getProductName() + " can be run at a time.","Error",JOptionPane.INFORMATION_MESSAGE);
  }
  return locked;
}
