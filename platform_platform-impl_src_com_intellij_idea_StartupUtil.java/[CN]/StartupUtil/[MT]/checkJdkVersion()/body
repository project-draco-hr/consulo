{
  if (!"true".equals(System.getProperty("idea.no.jre.check"))) {
    try {
      Class.forName("com.sun.jdi.Field");
    }
 catch (    ClassNotFoundException e) {
      if (isHeadless()) {
        System.out.println("tools.jar is not in " + ApplicationNamesInfo.getInstance().getProductName() + " classpath. Please ensure JAVA_HOME points to JDK rather than JRE");
        return false;
      }
      try {
        final Runnable runnable=new Runnable(){
          public void run(){
            JOptionPane.showMessageDialog(JOptionPane.getRootFrame(),"tools.jar is not in " + ApplicationNamesInfo.getInstance().getProductName() + " classpath. Please ensure JAVA_HOME points to JDK rather than JRE","Error",JOptionPane.ERROR_MESSAGE);
          }
        }
;
        if (EventQueue.isDispatchThread()) {
          runnable.run();
        }
 else {
          EventQueue.invokeAndWait(runnable);
        }
      }
 catch (      Exception ex) {
      }
      return false;
    }
  }
  if ("true".equals(System.getProperty("idea.no.jdk.check")))   return true;
  String version=System.getProperty("java.version");
  if (version.startsWith("1.5") || version.startsWith("1.6")) {
    return true;
  }
  showVersionMismatch(version);
  return false;
}
