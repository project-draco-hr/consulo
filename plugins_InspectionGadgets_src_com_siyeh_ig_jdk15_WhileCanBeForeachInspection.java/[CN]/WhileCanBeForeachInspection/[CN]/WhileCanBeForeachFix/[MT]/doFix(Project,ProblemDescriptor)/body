{
  final PsiElement whileElement=descriptor.getPsiElement();
  final PsiWhileStatement whileStatement=(PsiWhileStatement)whileElement.getParent();
  final String newExpression=createCollectionIterationText(whileStatement);
  if (newExpression == null) {
    return;
  }
  final PsiStatement statement=getPreviousStatement(whileStatement);
  if (statement == null) {
    return;
  }
  deleteElement(statement);
  replaceStatementAndShortenClassNames(whileStatement,newExpression);
}
