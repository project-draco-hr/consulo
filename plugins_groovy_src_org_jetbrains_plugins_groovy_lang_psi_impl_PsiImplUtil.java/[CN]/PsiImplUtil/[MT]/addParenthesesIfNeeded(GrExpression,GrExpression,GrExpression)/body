{
  GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(oldExpr.getProject());
  int parentPriorityLevel=getExprPriorityLevel(oldParent);
  int newPriorityLevel=getExprPriorityLevel(newExpr);
  if (parentPriorityLevel > newPriorityLevel) {
    newExpr=factory.createParenthesizedExpr(newExpr);
  }
 else   if (parentPriorityLevel == newPriorityLevel && parentPriorityLevel != 0) {
    if (oldParent instanceof GrBinaryExpression) {
      GrBinaryExpression binaryExpression=(GrBinaryExpression)oldParent;
      if (isNotAssociative(binaryExpression) && oldExpr.equals(binaryExpression.getRightOperand())) {
        newExpr=factory.createParenthesizedExpr(newExpr);
      }
    }
  }
  return newExpr;
}
