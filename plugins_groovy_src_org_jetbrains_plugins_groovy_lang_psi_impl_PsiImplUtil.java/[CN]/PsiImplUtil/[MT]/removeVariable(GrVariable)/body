{
  final GrVariableDeclaration varDecl=(GrVariableDeclaration)variable.getParent();
  final List<GrVariable> variables=Arrays.asList(varDecl.getVariables());
  if (!variables.contains(variable)) {
    throw new IncorrectOperationException();
  }
  final ASTNode varDeclNode=varDecl.getNode();
  final PsiElement parent=varDecl.getParent();
  final ASTNode owner=parent.getNode();
  if (variables.size() == 1 && owner != null) {
    GroovyVariableUtil.cleanAroundDeclarationBeforeRemove(varDecl);
    owner.removeChild(varDeclNode);
    reformatCode(parent);
    return;
  }
  GroovyVariableUtil.cleanAroundVariableBeforeRemove(variable);
  final ASTNode varNode=variable.getNode();
  if (varNode != null) {
    varDeclNode.removeChild(varNode);
  }
  reformatCode(varDecl);
}
