{
  final GrVariableDeclaration varDecl=(GrVariableDeclaration)variable.getParent();
  final List<GrVariable> variables=Arrays.asList(varDecl.getVariables());
  if (!variables.contains(variable)) {
    throw new IllegalArgumentException();
  }
  final ASTNode varDeclNode=varDecl.getNode();
  final PsiElement parent=varDecl.getParent();
  final ASTNode owner=parent.getNode();
  if (variables.size() == 1 && owner != null) {
    PsiElement next=varDecl.getNextSibling();
    while (next != null && next.getNode() != null && next.getNode().getElementType() == mSEMI) {
      PsiElement tmpNext=next.getNextSibling();
      owner.removeChild(next.getNode());
      next=tmpNext;
    }
    removeNewLineAfter(varDecl);
    owner.removeChild(varDeclNode);
    PsiUtil.reformatCode(parent);
    return;
  }
  final ASTNode varNode=variable.getNode();
  if (varNode != null) {
    varDeclNode.removeChild(varNode);
  }
  PsiUtil.reformatCode(varDecl);
}
