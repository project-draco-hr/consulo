{
  if (!(element instanceof PsiJavaFile)) {
    return FoldingDescriptor.EMPTY;
  }
  PsiJavaFile file=(PsiJavaFile)element;
  List<FoldingDescriptor> result=new ArrayList<FoldingDescriptor>();
  PsiImportList importList=file.getImportList();
  if (importList != null) {
    PsiImportStatementBase[] statements=importList.getAllImportStatements();
    if (statements.length > 1) {
      final TextRange rangeToFold=getRangeToFold(importList);
      if (rangeToFold != null && rangeToFold.getEndOffset() > rangeToFold.getStartOffset()) {
        result.add(new FoldingDescriptor(importList,rangeToFold));
      }
    }
  }
  PsiClass[] classes=file.getClasses();
  for (  PsiClass aClass : classes) {
    ProgressManager.checkCanceled();
    addElementsToFold(result,aClass,document,true,quick);
  }
  TextRange range=getFileHeader(file);
  if (range != null && document.getLineNumber(range.getEndOffset()) > document.getLineNumber(range.getStartOffset())) {
    result.add(new FoldingDescriptor(file,range));
  }
  return result.toArray(new FoldingDescriptor[result.size()]);
}
