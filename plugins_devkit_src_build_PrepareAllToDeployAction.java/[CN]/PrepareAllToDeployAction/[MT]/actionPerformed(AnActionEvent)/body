{
  final Project project=e.getData(DataKeys.PROJECT);
  if (project == null)   return;
  List<Module> pluginModules=new ArrayList<Module>();
  for (  Module aModule : ModuleManager.getInstance(project).getModules()) {
    if (aModule.getModuleType() instanceof PluginModuleType) {
      pluginModules.add(aModule);
    }
  }
  ChooseModulesDialog dialog=new ChooseModulesDialog(project,pluginModules,DevKitBundle.message("select.plugin.modules.title"),DevKitBundle.message("select.plugin.modules.description"));
  dialog.show();
  if (dialog.isOK()) {
    doPrepare(dialog.getSelectedModules());
  }
}
