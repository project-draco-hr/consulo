{
  if (myDocument == null) {
    if (isBinary())     return null;
    String text=null;
    try {
      Charset charset=ObjectUtils.notNull(myCharset,EncodingProjectManager.getInstance(myProject).getDefaultCharset());
      text=CharsetToolkit.bytesToString(myBytes,charset);
    }
 catch (    IllegalCharsetNameException e) {
    }
    if (text == null)     text=new String(myBytes);
    text=LineTokenizer.correctLineSeparators(text);
    myDocument=EditorFactory.getInstance().createDocument(text);
    myDocument.setReadOnly(true);
  }
  return myDocument;
}
