{
  LOG.assertTrue(templatesManager != null);
  String name=templateName;
  String extension=myTypeManager.getExtension(name);
  if (extension.length() > 0) {
    name=name.substring(0,name.length() - extension.length() - 1);
  }
  FileTemplate template=templatesManager.getTemplate(name);
  if (template != null) {
    if (extension.equals(template.getExtension())) {
      return template;
    }
  }
 else {
    if (ApplicationManager.getApplication().isUnitTestMode() && templateName.endsWith("ForTest"))     return null;
    VirtualFile[] defaultTemplates=templatesManager.getDefaultTemplates();
    @NonNls String message="Unable to find " + templateType + " Template '"+ templateName+ "'! Default "+ templateType+ " Templates are: ";
    if (defaultTemplates != null) {
      for (int i=0; i < defaultTemplates.length; i++) {
        VirtualFile defaultTemplate=defaultTemplates[i];
        if (i != 0) {
          message+=", ";
        }
        message+=defaultTemplate.getPresentableUrl();
      }
    }
    LOG.error(message);
  }
  return null;
}
