{
  int version=VERSION;
  for (  final FileType fileType : FileTypeManager.getInstance().getRegisteredFileTypes()) {
    if (fileType instanceof LanguageFileType) {
      Language l=((LanguageFileType)fileType).getLanguage();
      ParserDefinition parserDefinition=LanguageParserDefinitions.INSTANCE.forLanguage(l);
      if (parserDefinition != null) {
        final IFileElementType type=parserDefinition.getFileNodeType();
        if (type instanceof IStubFileElementType) {
          version+=((IStubFileElementType)type).getStubVersion();
        }
      }
    }
 else     if (fileType.isBinary()) {
      final BinaryFileStubBuilder builder=BinaryFileStubBuilders.INSTANCE.forFileType(fileType);
      if (builder != null) {
        version+=builder.getStubVersion();
      }
    }
  }
  return version;
}
