{
  Map<FileType,Integer> map=new HashMap<FileType,Integer>();
  for (  final FileType fileType : FileTypeManager.getInstance().getRegisteredFileTypes()) {
    if (fileType instanceof LanguageFileType) {
      Language l=((LanguageFileType)fileType).getLanguage();
      ParserDefinition parserDefinition=LanguageParserDefinitions.INSTANCE.forLanguage(l);
      if (parserDefinition != null) {
        final IFileElementType type=parserDefinition.getFileNodeType();
        if (type instanceof IStubFileElementType) {
          map.put(fileType,((IStubFileElementType)type).getStubVersion());
        }
      }
    }
    final BinaryFileStubBuilder builder=BinaryFileStubBuilders.INSTANCE.forFileType(fileType);
    if (builder != null) {
      map.put(fileType,builder.getStubVersion());
    }
  }
  return map;
}
