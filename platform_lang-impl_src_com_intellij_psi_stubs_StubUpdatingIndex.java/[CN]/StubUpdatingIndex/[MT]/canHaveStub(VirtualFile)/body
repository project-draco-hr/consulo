{
  final FileType fileType=file.getFileType();
  if (fileType instanceof LanguageFileType) {
    Language l=((LanguageFileType)fileType).getLanguage();
    ParserDefinition parserDefinition=LanguageParserDefinitions.INSTANCE.forLanguage(l);
    if (parserDefinition == null)     return false;
    final IFileElementType elementType=parserDefinition.getFileNodeType();
    return elementType instanceof IStubFileElementType && (((IStubFileElementType)elementType).shouldBuildStubFor(file) || IndexingStamp.isFileIndexed(file,INDEX_ID,IndexInfrastructure.getIndexCreationStamp(INDEX_ID)));
  }
  if (fileType.isBinary()) {
    final BinaryFileStubBuilder builder=BinaryFileStubBuilders.INSTANCE.forFileType(fileType);
    return builder != null && builder.acceptsFile(file);
  }
  return false;
}
