{
  final Map<Integer,SerializedStubTree> result=new HashMap<Integer,SerializedStubTree>();
  IndexStorage<Integer,SerializedStubTree> indexStorage=myStorage;
  if (indexStorage instanceof MemoryIndexStorage) {
    final MemoryIndexStorage<Integer,SerializedStubTree> memIndexStorage=(MemoryIndexStorage<Integer,SerializedStubTree>)indexStorage;
    if (!memIndexStorage.isBufferingEnabled()) {
      indexStorage=memIndexStorage.getBackendStorage();
    }
  }
  final ValueContainer<SerializedStubTree> valueContainer=indexStorage.read(key);
  if (valueContainer.size() != 1) {
    LOG.assertTrue(valueContainer.size() == 0);
    return result;
  }
  result.put(key,valueContainer.getValueIterator().next());
  return result;
}
