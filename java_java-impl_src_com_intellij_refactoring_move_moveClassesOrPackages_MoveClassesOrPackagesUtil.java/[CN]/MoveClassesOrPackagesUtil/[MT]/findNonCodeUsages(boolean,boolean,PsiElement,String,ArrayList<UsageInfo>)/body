{
  if (searchInStringsAndComments || searchInNonJavaFiles) {
    final String stringToSearch=getStringToSearch(element);
    if (stringToSearch == null)     return;
    TextOccurrencesUtil.UsageInfoFactory factory=createUsageInfoFactory(element,newQName);
    if (searchInStringsAndComments) {
      TextOccurrencesUtil.addUsagesInStringsAndComments(element,stringToSearch,results,factory);
    }
    if (searchInNonJavaFiles) {
      GlobalSearchScope projectScope=GlobalSearchScope.projectScope(element.getProject());
      TextOccurrencesUtil.addTextOccurences(element,stringToSearch,projectScope,results,factory);
    }
  }
}
