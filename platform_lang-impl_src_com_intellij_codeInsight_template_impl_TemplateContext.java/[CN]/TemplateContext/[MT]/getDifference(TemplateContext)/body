{
  Map<TemplateContextType,Boolean> result=ContainerUtil.newHashMap();
synchronized (myAdditionalContexts) {
synchronized (defaultContext == null ? myAdditionalContexts : defaultContext.myAdditionalContexts) {
      for (      TemplateContextType contextType : TemplateManagerImpl.getAllContextTypes()) {
        String id=contextType.getContextId();
        Boolean mine=myAdditionalContexts.get(id);
        if (mine != null && differsFromDefault(defaultContext,id,mine)) {
          result.put(contextType,mine);
        }
      }
    }
  }
  return result;
}
