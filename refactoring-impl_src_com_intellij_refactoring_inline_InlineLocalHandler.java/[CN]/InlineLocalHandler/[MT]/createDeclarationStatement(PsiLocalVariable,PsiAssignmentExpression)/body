{
  PsiDeclarationStatement declaration=(PsiDeclarationStatement)local.getParent();
  try {
    if (assignment == null || !declaration.getParent().equals(assignment.getParent().getParent())) {
      declaration=(PsiDeclarationStatement)declaration.copy();
      PsiExpression initializer=((PsiVariable)declaration.getDeclaredElements()[0]).getInitializer();
      if (initializer != null) {
        initializer.delete();
      }
    }
 else {
      PsiElementFactory factory=local.getManager().getElementFactory();
      declaration=factory.createVariableDeclarationStatement(local.getName(),local.getType(),assignment.getRExpression());
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
  return declaration;
}
