{
  final ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
  VirtualFile outPath;
  if (forTestClasses) {
    final VirtualFile path=moduleRootManager.getCompilerOutputPathForTests();
    if (path != null) {
      outPath=path;
    }
 else {
      outPath=moduleRootManager.getCompilerOutputPath();
    }
  }
 else {
    outPath=moduleRootManager.getCompilerOutputPath();
  }
  if (outPath != null && !outPath.isValid()) {
    return null;
  }
  return outPath;
}
