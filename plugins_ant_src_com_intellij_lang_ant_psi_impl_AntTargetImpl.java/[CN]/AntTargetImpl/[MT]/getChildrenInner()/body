{
synchronized (PsiLock.LOCK) {
    final AntElement[] baseChildren=super.getChildrenInner();
    if (myPropElement == null) {
      return baseChildren;
    }
    if (!myInGettingChildren) {
      myInGettingChildren=true;
      try {
        final List<AntElement> children=new ArrayList<AntElement>(baseChildren.length + 1);
        children.add(myPropElement);
        for (        final AntElement child : baseChildren) {
          children.add(child);
        }
        return children.toArray(new AntElement[children.size()]);
      }
  finally {
        myInGettingChildren=false;
      }
    }
    return AntElement.EMPTY_ARRAY;
  }
}
