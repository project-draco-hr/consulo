{
  waitFor(new Condition<Void>(){
    @Override public boolean value(    Void aVoid){
      if (action != null)       action.run();
      int validIndex=-1;
      int validCount=0;
      for (      Object o : myHolder) {
        validIndex=nextValidIndex(validIndex,myCollection);
        if (o != myCollection.get(validIndex))         return false;
        validCount++;
      }
      if (myHolder.size() != validCount)       return false;
      if (myCollection.size() != nextValidIndex(validIndex,myCollection))       return false;
      if (myCollection.size() - myHolder.size() != myCollection.getCorpseCount())       return false;
      WeakReference[] references=myCollection.getReferences();
      for (int i=myCollection.size(); i < references.length; i++) {
        if (references[i] != null)         return false;
      }
      return true;
    }
  }
);
}
