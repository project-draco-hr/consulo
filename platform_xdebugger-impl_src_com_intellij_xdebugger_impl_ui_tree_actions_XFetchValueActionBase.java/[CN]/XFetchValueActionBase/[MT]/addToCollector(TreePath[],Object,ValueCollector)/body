{
  if (node instanceof XValueNodeImpl) {
    XValueNodeImpl valueNode=(XValueNodeImpl)node;
    XFullValueEvaluator fullValueEvaluator=valueNode.getFullValueEvaluator();
    if (paths.length > 1) {
      valueCollector.add(valueNode.getText().toString(),valueNode.getPath().getPathCount());
    }
 else {
      if (fullValueEvaluator == null || !fullValueEvaluator.isShowValuePopup()) {
        valueCollector.add(StringUtil.notNullize(DebuggerUIUtil.getNodeRawValue(valueNode)));
      }
 else {
        new CopyValueEvaluationCallback(valueNode,valueCollector).startFetchingValue(fullValueEvaluator);
      }
    }
  }
 else   if (node instanceof WatchMessageNode) {
    valueCollector.add(((WatchMessageNode)node).getExpression().getExpression());
  }
}
