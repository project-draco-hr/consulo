{
  super(new BorderLayout());
  myCheckbox=new JCheckBox();
  myTextRenderer=new ColoredListCellRenderer(){
    protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      final FilePath path=TreeModelBuilder.getPathForObject(value);
      if (path.isDirectory()) {
        setIcon(PlatformIcons.DIRECTORY_CLOSED_ICON);
      }
 else {
        setIcon(path.getFileType().getIcon());
      }
      final FileStatus fileStatus;
      if (value instanceof Change) {
        fileStatus=((Change)value).getFileStatus();
      }
 else {
        final VirtualFile virtualFile=path.getVirtualFile();
        if (virtualFile != null) {
          fileStatus=FileStatusManager.getInstance(myProject).getStatus(virtualFile);
        }
 else {
          fileStatus=FileStatus.NOT_CHANGED;
        }
      }
      append(path.getName(),new SimpleTextAttributes(SimpleTextAttributes.STYLE_PLAIN,fileStatus.getColor(),null));
      final boolean applyChangeDecorator=(value instanceof Change) && myChangeDecorator != null;
      final File parentFile=path.getIOFile().getParentFile();
      if (parentFile != null) {
        final String parentPath=parentFile.getPath();
        List<Pair<String,ChangeNodeDecorator.Stress>> parts=null;
        if (applyChangeDecorator) {
          parts=myChangeDecorator.stressPartsOfFileName((Change)value,parentPath);
        }
        if (parts == null) {
          parts=Collections.singletonList(new Pair<String,ChangeNodeDecorator.Stress>(parentPath,ChangeNodeDecorator.Stress.PLAIN));
        }
        append(" (");
        for (        Pair<String,ChangeNodeDecorator.Stress> part : parts) {
          append(part.getFirst(),part.getSecond().derive(SimpleTextAttributes.GRAYED_ATTRIBUTES));
        }
        append(")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
      }
      if (applyChangeDecorator) {
        myChangeDecorator.decorate((Change)value,this,isShowFlatten());
      }
    }
  }
;
  myCheckbox.setBackground(null);
  setBackground(null);
  if (myShowCheckboxes) {
    add(myCheckbox,BorderLayout.WEST);
  }
  add(myTextRenderer,BorderLayout.CENTER);
}
