{
  if (myShowFlatten) {
    ListModel m=myList.getModel();
    int size=m.getSize();
    List result=new ArrayList(size);
    for (int i=0; i < size; i++) {
      result.add(m.getElementAt(i));
    }
    return result;
  }
 else {
    final LinkedHashSet result=new LinkedHashSet();
    TreeUtil.traverseDepth((ChangesBrowserNode)myTree.getModel().getRoot(),new TreeUtil.Traverse(){
      public boolean accept(      Object node){
        ChangesBrowserNode changeNode=(ChangesBrowserNode)node;
        if (changeNode.isLeaf())         result.addAll(changeNode.getAllChangesUnder());
        return true;
      }
    }
);
    return new ArrayList<T>(result);
  }
}
