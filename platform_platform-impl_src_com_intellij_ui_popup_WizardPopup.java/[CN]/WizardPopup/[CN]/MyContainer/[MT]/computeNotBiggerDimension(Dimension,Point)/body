{
  int resultHeight=ofContent.height > MAX_SIZE.height + 50 ? MAX_SIZE.height : ofContent.height;
  if (locationOnScreen != null) {
    final Rectangle r=ScreenUtil.getScreenRectangle(locationOnScreen);
    resultHeight=ofContent.height > r.height - (r.height / 4) ? r.height - (r.height / 4) : ofContent.height;
  }
  int resultWidth=ofContent.width > MAX_SIZE.width ? MAX_SIZE.width : ofContent.width;
  if (ofContent.height > MAX_SIZE.height) {
    resultWidth+=ScrollPaneFactory.createScrollPane().getVerticalScrollBar().getPreferredSize().getWidth();
  }
  return new Dimension(resultWidth,resultHeight);
}
