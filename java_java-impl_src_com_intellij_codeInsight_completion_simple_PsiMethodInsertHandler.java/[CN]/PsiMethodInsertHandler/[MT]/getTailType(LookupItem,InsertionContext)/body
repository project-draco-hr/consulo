{
  final char completionChar=context.getCompletionChar();
  if (completionChar == '!')   return item.getTailType();
  if (completionChar == '(') {
    final Object o=item.getObject();
    if (o instanceof PsiMethod) {
      final PsiMethod psiMethod=(PsiMethod)o;
      return psiMethod.getParameterList().getParameters().length > 0 || psiMethod.getReturnType() != PsiType.VOID ? TailType.NONE : TailType.SEMICOLON;
    }
 else     if (o instanceof PsiClass) {
      return TailType.NONE;
    }
  }
  if (completionChar == Lookup.COMPLETE_STATEMENT_SELECT_CHAR)   return TailType.SMART_COMPLETION;
  if (!context.shouldAddCompletionChar()) {
    return TailType.NONE;
  }
  return LookupItem.handleCompletionChar(context.getEditor(),item,completionChar);
}
