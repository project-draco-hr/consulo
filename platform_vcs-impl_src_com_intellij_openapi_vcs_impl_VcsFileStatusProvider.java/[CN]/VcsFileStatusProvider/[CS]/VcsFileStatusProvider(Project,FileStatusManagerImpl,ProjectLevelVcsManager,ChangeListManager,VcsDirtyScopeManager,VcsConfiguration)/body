{
  myProject=project;
  myFileStatusManager=fileStatusManager;
  myVcsManager=vcsManager;
  myChangeListManager=changeListManager;
  myDirtyScopeManager=dirtyScopeManager;
  myConfiguration=configuration;
  myHaveEmptyContentRevisions=true;
  myFileStatusManager.setFileStatusProvider(this);
  myAdditionalProviders=VcsBaseContentProvider.EP_NAME.getExtensions(project);
  changeListManager.addChangeListListener(new ChangeListAdapter(){
    @Override public void changeListAdded(    ChangeList list){
      fileStatusesChanged();
    }
    @Override public void changeListRemoved(    ChangeList list){
      fileStatusesChanged();
    }
    @Override public void changeListChanged(    ChangeList list){
      fileStatusesChanged();
    }
    @Override public void changeListUpdateDone(){
      if (myHaveEmptyContentRevisions) {
        myHaveEmptyContentRevisions=false;
        fileStatusesChanged();
      }
    }
    @Override public void unchangedFileStatusChanged(){
      fileStatusesChanged();
    }
  }
);
}
