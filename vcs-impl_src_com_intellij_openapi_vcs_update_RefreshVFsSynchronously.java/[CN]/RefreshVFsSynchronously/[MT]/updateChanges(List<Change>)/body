{
  final ProgressIndicator pi=ProgressManager.getInstance().getProgressIndicator();
  if (pi != null) {
    pi.setIndeterminate(false);
  }
  final double num=changes.size();
  int cnt=0;
  for (  Change change : changes) {
    if ((change.getBeforeRevision() != null) && (change.isMoved() || change.isRenamed() || change.isIsReplaced()|| (change.getAfterRevision() == null))) {
      refreshDeletedOrReplaced(change.getBeforeRevision().getFile().getIOFile());
    }
 else     if (change.getBeforeRevision() != null) {
      refresh(change.getBeforeRevision().getFile().getIOFile());
    }
    if (change.getAfterRevision() != null && (!Comparing.equal(change.getAfterRevision(),change.getBeforeRevision()))) {
      refresh(change.getAfterRevision().getFile().getIOFile());
    }
    if (pi != null) {
      ++cnt;
      pi.setFraction(cnt / num);
      pi.setText2("Refreshing: " + change.toString());
    }
  }
}
