{
  Object o=element.getObject();
  if (o instanceof ResolveResult) {
    o=((ResolveResult)o).getElement();
  }
  if (!(o instanceof PsiElement))   return null;
  final PsiElement position=location.getCompletionParameters().getPosition();
  if (!(position.getParent() instanceof GrReferenceElement))   return null;
  final GrReferenceElement parent=(GrReferenceElement)position.getParent();
  if (parent.getQualifier() == null) {
    if (o instanceof GrVariable && GroovyRefactoringUtil.isLocalVariable((GrVariable)o))     return NotQualifiedKind.aLocal;
    if (o instanceof PsiClass)     return NotQualifiedKind.aClass;
    if (o instanceof PsiPackage)     return NotQualifiedKind.aPackage;
    if (isLightElement(o))     return NotQualifiedKind.anImplicitGroovyMethod;
    if (o instanceof PsiMember)     return NotQualifiedKind.aMember;
  }
 else {
    if (o instanceof PsiClass)     return QualifiedKind.aClass;
    if (o instanceof PsiPackage)     return QualifiedKind.aPackage;
    if (isLightElement(o)) {
      return QualifiedKind.anImplicitGroovyMethod;
    }
    if (o instanceof GrEnumConstant || o instanceof PsiEnumConstant)     return QualifiedKind.anEnumConstant;
    if (o instanceof PsiMember) {
      final PsiClass containingClass=((PsiMember)o).getContainingClass();
      if (containingClass != null) {
        if (TRASH_CLASSES.contains(containingClass.getQualifiedName())) {
          return QualifiedKind.aTrashMethod;
        }
      }
      return QualifiedKind.aMember;
    }
  }
  return null;
}
