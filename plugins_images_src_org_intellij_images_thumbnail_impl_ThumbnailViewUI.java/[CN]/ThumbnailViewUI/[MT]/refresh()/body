{
  createUI();
  if (list != null) {
    DefaultListModel model=(DefaultListModel)list.getModel();
    model.clear();
    VirtualFile root=thumbnailView.getRoot();
    if (root.isValid() && root.isDirectory()) {
      Set<VirtualFile> files=findFiles(root.getChildren());
      VirtualFile[] virtualFiles=files.toArray(VirtualFile.EMPTY_ARRAY);
      Arrays.sort(virtualFiles,new Comparator<VirtualFile>(){
        public int compare(        VirtualFile o1,        VirtualFile o2){
          if (o1.isDirectory() && !o2.isDirectory()) {
            return -1;
          }
          if (o2.isDirectory() && !o1.isDirectory()) {
            return 1;
          }
          return o1.getPath().toLowerCase().compareTo(o2.getPath().toLowerCase());
        }
      }
);
      model.ensureCapacity(model.size() + virtualFiles.length + 1);
      for (      VirtualFile virtualFile : virtualFiles) {
        model.addElement(virtualFile);
      }
    }
 else {
      thumbnailView.setVisible(false);
    }
  }
}
