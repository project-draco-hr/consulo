{
  ImageFileTypeManager typeManager=ImageFileTypeManager.getInstance();
  Set<VirtualFile> files=new HashSet<VirtualFile>(1);
  if (file.isDirectory()) {
    if (thumbnailView.isRecursive()) {
      files.addAll(findFiles(file.getChildren()));
    }
 else {
      files.add(file);
    }
  }
 else   if (typeManager.isImage(file)) {
    files.add(file);
  }
  return files;
}
