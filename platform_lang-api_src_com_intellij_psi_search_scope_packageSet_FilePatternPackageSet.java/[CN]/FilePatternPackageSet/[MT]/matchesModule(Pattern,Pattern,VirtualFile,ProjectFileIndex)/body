{
  final Module module=fileIndex.getModuleForFile(file);
  if (module == null) {
    LOG.error("url: " + file.getUrl());
  }
  if (modulePattern != null && modulePattern.matcher(module.getName()).matches())   return true;
  if (moduleGroupPattern != null) {
    final String[] groupPath=ModuleManager.getInstance(module.getProject()).getModuleGroupPath(module);
    if (groupPath != null) {
      for (      String node : groupPath) {
        if (moduleGroupPattern.matcher(node).matches())         return true;
      }
    }
  }
  return modulePattern == null && moduleGroupPattern == null;
}
