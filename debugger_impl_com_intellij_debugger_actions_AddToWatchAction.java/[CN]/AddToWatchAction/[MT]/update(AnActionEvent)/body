{
  DataContext context=DataManager.getInstance().getDataContext();
  if (context == null) {
    e.getPresentation().setEnabled(false);
    return;
  }
  DebuggerTreeNodeImpl[] selectedNodes=getSelectedNodes(context);
  boolean enabled=false;
  if (selectedNodes != null && selectedNodes.length > 0) {
    if (getPanel(context) instanceof VariablesPanel) {
      enabled=true;
      for (      DebuggerTreeNodeImpl node : selectedNodes) {
        NodeDescriptorImpl descriptor=node.getDescriptor();
        if (!(descriptor instanceof ValueDescriptorImpl)) {
          enabled=false;
          break;
        }
      }
    }
  }
 else {
    final Editor editor=(Editor)context.getData(DataKeys.EDITOR.getName());
    enabled=DebuggerUtilsEx.getEditorText(editor) != null;
  }
  e.getPresentation().setEnabled(enabled);
  if (ActionPlaces.isPopupPlace(e.getPlace())) {
    e.getPresentation().setVisible(enabled);
  }
}
