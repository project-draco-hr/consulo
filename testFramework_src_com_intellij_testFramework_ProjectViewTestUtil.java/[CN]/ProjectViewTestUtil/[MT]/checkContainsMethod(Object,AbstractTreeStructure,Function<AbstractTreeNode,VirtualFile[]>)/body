{
  MultiValuesMap<VirtualFile,AbstractTreeNode> map=new MultiValuesMap<VirtualFile,AbstractTreeNode>();
  collect((AbstractTreeNode)rootElement,map,structure,converterFunction);
  for (  VirtualFile eachFile : map.keySet()) {
    Collection<AbstractTreeNode> nodes=map.values();
    for (    final AbstractTreeNode node : nodes) {
      ProjectViewNode eachNode=(ProjectViewNode)node;
      boolean actual=eachNode.contains(eachFile);
      boolean expected=map.get(eachFile).contains(eachNode);
      if (actual != expected) {
        Assert.assertTrue("file=" + eachFile + " node="+ eachNode.getTestPresentation()+ " expected:"+ expected,false);
      }
    }
  }
}
