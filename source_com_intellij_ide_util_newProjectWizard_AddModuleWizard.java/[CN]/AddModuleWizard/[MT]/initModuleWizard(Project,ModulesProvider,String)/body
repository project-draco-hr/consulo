{
  myWizardContext=new WizardContext(project);
  if (defaultPath != null) {
    myWizardContext.setProjectFileDirectory(defaultPath);
  }
  myWizardContext.addContextListener(new WizardContext.Listener(){
    public void buttonsUpdateRequested(){
      updateButtons();
    }
  }
);
  final ArrayList<WizardMode> modes=new ArrayList<WizardMode>();
  for (  WizardMode mode : Extensions.getExtensions(WizardMode.MODES)) {
    if (mode.isAvailable(myWizardContext)) {
      modes.add(mode);
    }
  }
  myRootStep=new ProjectCreateModeStep(modes,myWizardContext){
    protected void update(){
      updateButtons();
    }
  }
;
  addStep(myRootStep);
  for (  WizardMode mode : modes) {
    appendSteps(mode.getSteps(myWizardContext,modulesProvider));
  }
  init();
}
