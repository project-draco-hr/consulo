{
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      ProjectManager.getInstance().getDefaultProject();
    }
  }
,ProjectBundle.message("project.new.wizard.progress.title"),true,null);
  myWizardContext=new WizardContext(project);
  if (defaultPath != null) {
    myWizardContext.setProjectFileDirectory(defaultPath);
  }
  myWizardContext.addContextListener(new WizardContext.Listener(){
    public void buttonsUpdateRequested(){
      updateButtons();
    }
  }
);
  final ArrayList<CreationMode> modes=new ArrayList<CreationMode>();
  for (  CreationMode mode : Extensions.getExtensions(CreationMode.MODES)) {
    if (mode.isAvailable(myWizardContext)) {
      modes.add(mode);
    }
  }
  myRootStep=new ProjectCreateModeStep(modes,myWizardContext){
    protected void update(){
      updateButtons();
    }
  }
;
  addStep(myRootStep);
  for (  CreationMode mode : modes) {
    appendSteps(mode.getSteps(myWizardContext,modulesProvider));
  }
  init();
}
