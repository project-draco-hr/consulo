{
  if (state != State.PENDING) {
    return;
  }
  this.result=result;
  state=State.FULFILLED;
  Consumer<T> done=this.done;
  clearHandlers();
  if (done != null && !isObsolete(done)) {
    done.consume(result);
  }
}
