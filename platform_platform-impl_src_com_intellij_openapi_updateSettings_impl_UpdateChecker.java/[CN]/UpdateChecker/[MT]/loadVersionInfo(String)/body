{
  if (LOGGER.isDebugEnabled()) {
    LOGGER.debug("enter: loadVersionInfo(UPDATE_URL='" + url + "' )");
  }
  final InputStream[] inputStreams=new InputStream[]{null};
  final Exception[] exception=new Exception[]{null};
  Future<?> downloadThreadFuture=ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        URL requestUrl=new URL(url);
        if (!StandardFileSystems.FILE_PROTOCOL.equals(requestUrl.getProtocol())) {
          HttpConfigurable.getInstance().prepareURL(url);
          requestUrl=new URL(url + (url.contains("?") ? "&" : "?") + "build="+ ApplicationInfo.getInstance().getBuild().asString());
        }
        inputStreams[0]=requestUrl.openStream();
      }
 catch (      IOException e) {
        exception[0]=e;
      }
    }
  }
);
  try {
    downloadThreadFuture.get(5,TimeUnit.SECONDS);
  }
 catch (  TimeoutException e) {
  }
  if (!downloadThreadFuture.isDone()) {
    downloadThreadFuture.cancel(true);
    throw new ConnectionException(IdeBundle.message("updates.timeout.error"));
  }
  if (exception[0] != null)   throw exception[0];
  return inputStreams[0];
}
