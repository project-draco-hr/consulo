{
  final List<PluginDownloader> downloaded=new ArrayList<PluginDownloader>();
  final Set<String> failed=new HashSet<String>();
  for (  String host : getPluginHosts(settingsConfigurable)) {
    try {
      checkPluginsHost(host,downloaded);
    }
 catch (    Exception e) {
      LOG.info(e);
      failed.add(host);
    }
  }
  if (!failed.isEmpty()) {
    final String failedMessage=IdeBundle.message("connection.failed.message",StringUtil.join(failed,","));
    if (showErrorDialog) {
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          Messages.showErrorDialog(failedMessage,IdeBundle.message("title.connection.error"));
        }
      }
);
    }
 else {
      LOG.info(failedMessage);
    }
  }
  return downloaded.isEmpty() ? null : downloaded;
}
