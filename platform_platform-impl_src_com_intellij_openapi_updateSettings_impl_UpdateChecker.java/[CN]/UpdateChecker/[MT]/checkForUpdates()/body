{
  try {
    BuildNumber ourBuild=ApplicationInfo.getInstance().getBuild();
    if (LOG.isDebugEnabled()) {
      LOG.debug("enter: checkForUpdates()");
    }
    final Document document;
    try {
      document=loadVersionInfo(getUpdateUrl());
      if (document == null)       return null;
    }
 catch (    Throwable t) {
      LOG.debug(t);
      throw new ConnectionException(t);
    }
    Element root=document.getRootElement();
    UpdateChannel channel=findUpdateChannel(root,ourBuild.getProductCode());
    if (channel == null)     return null;
    BuildInfo latestBuild=channel.getLatestBuild();
    if (latestBuild == null)     return null;
    if (ourBuild.compareTo(latestBuild.getNumber()) < 0) {
      return channel;
    }
    return null;
  }
 catch (  Throwable t) {
    LOG.debug(t);
    return null;
  }
 finally {
    UpdateSettings.getInstance().LAST_TIME_CHECKED=System.currentTimeMillis();
  }
}
