{
  for (  Element element : state.getChildren("task")) {
    String url=element.getAttributeValue("url");
    String name=element.getAttributeValue("name");
    String providerName=element.getAttributeValue("provider-name");
    boolean enabled=Boolean.valueOf(element.getAttributeValue("enabled"));
    VirtualFilePointer virtualFilePointer=VirtualFilePointerManager.getInstance().create(url,this,null);
    BackgroundTaskByVfsParametersImpl parameters=new BackgroundTaskByVfsParametersImpl(myProject);
    BackgroundTaskByVfsChangeTaskImpl task=new BackgroundTaskByVfsChangeTaskImpl(myProject,virtualFilePointer,providerName,name,parameters,this);
    task.setEnabled(enabled);
    Element parametersElement=element.getChild("parameters");
    if (parametersElement != null) {
      ReplacePathToMacroMap replaceMacroToPathMap=task.createReplaceMacroToPathMap();
      replaceMacroToPathMap.substitute(parametersElement,false,true);
      XmlSerializer.deserializeInto(parameters,parametersElement);
    }
    myListener.taskAdded(task);
    myTasks.add(task);
  }
}
