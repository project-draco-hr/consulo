{
  List<FilePath> files=e.getData(ChangesListView.MISSING_FILES_DATA_KEY);
  if (files != null && !files.isEmpty()) {
    new RollbackDeletionAction().actionPerformed(e);
  }
 else {
    Change[] changes=e.getData(DataKeys.CHANGES);
    final ChangeList list=ChangesUtil.getChangeListIfOnlyOne(myProject,changes);
    if (list == null)     return;
    FileDocumentManager.getInstance().saveAllDocuments();
    RollbackChangesDialog.rollbackChanges(myProject,Arrays.asList(changes));
  }
}
