{
  List<FilePath> files=(List<FilePath>)e.getDataContext().getData(ChangesListView.MISSING_FILES_KEY);
  if (files != null && !files.isEmpty()) {
    new RollbackDeletionAction().actionPerformed(e);
  }
 else {
    Change[] changes=(Change[])e.getDataContext().getData(DataConstants.CHANGES);
    final ChangeList list=ChangesUtil.getChangeListIfOnlyOne(myProject,changes);
    if (list == null)     return;
    FileDocumentManager.getInstance().saveAllDocuments();
    RollbackChangesDialog.rollbackChanges(myProject,Arrays.asList(changes));
  }
}
