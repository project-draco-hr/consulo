{
  InputStream in=Utils.findEntryInputStream(patchFile,myPath);
  boolean executable=readExecutableFlag(in);
  File temp=Utils.createTempFile();
  OutputStream out=new BufferedOutputStream(new FileOutputStream(temp));
  try {
    InputStream oldFileIn=new FileInputStream(toFile);
    try {
      applyDiff(in,oldFileIn,out);
    }
  finally {
      oldFileIn.close();
    }
  }
  finally {
    out.close();
  }
  replaceUpdated(temp,toFile);
  Utils.setExecutable(toFile,executable);
}
