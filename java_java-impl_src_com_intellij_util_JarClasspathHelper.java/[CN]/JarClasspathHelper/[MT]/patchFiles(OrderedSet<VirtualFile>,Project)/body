{
  if (!Registry.is("jar.build")) {
    return files;
  }
  String path=getJarsPath(project);
  final OrderedSet<VirtualFile> result=new OrderedSet<VirtualFile>(TObjectHashingStrategy.CANONICAL);
  final Collection<VirtualFile> modulesOutputs=OrderEnumerator.orderEntries(project).withoutLibraries().withoutSdk().getClassesRoots();
  for (  VirtualFile file : files) {
    VirtualFile jar=getJarFile(path,file.getName());
    if (modulesOutputs.contains(file) && jar != null) {
      result.add(jar);
    }
 else {
      result.add(file);
    }
  }
  return result;
}
