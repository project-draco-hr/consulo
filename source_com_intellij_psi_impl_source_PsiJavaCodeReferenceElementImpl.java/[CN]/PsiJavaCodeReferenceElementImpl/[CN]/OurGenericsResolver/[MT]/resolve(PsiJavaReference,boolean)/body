{
  final JavaResolveResult[] result=_resolve(ref,incompleteCode);
  if (result.length > 0 && result[0].getElement() instanceof PsiClass) {
    final PsiType[] parameters=((PsiJavaCodeReferenceElement)ref).getTypeParameters();
    final JavaResolveResult[] newResult=new JavaResolveResult[result.length];
    for (int i=0; i < result.length; i++) {
      final CandidateInfo resolveResult=(CandidateInfo)result[i];
      final PsiClass aClass=(PsiClass)resolveResult.getElement();
      newResult[i]=aClass.getTypeParameters().length == 0 ? resolveResult : new CandidateInfo(resolveResult,((PsiSubstitutorEx)resolveResult.getSubstitutor()).putAll(aClass,parameters));
    }
    return newResult;
  }
  return result;
}
