{
  return LookupElementDecorator.withInsertHandler(element,new InsertHandler<LookupElementDecorator<LookupElement>>(){
    @Override public void handleInsert(    InsertionContext context,    LookupElementDecorator<LookupElement> item){
      TailType tailType=LookupItem.getDefaultTailType(context.getCompletionChar());
      if (tailType != null) {
        context.setAddCompletionChar(false);
        tailType.processTail(context.getEditor(),context.getTailOffset());
      }
      callback.nameChosen(item.getLookupString());
    }
  }
);
}
