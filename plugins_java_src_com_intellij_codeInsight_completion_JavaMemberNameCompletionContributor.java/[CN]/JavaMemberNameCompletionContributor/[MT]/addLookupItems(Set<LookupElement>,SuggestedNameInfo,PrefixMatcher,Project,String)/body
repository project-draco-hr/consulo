{
  outer:   for (int i=0; i < strings.length; i++) {
    String name=strings[i];
    if (!matcher.prefixMatches(name) || !JavaPsiFacade.getInstance(project).getNameHelper().isIdentifier(name,LanguageLevel.HIGHEST)) {
      continue;
    }
    for (    LookupElement lookupElement : lookupElements) {
      if (lookupElement.getAllLookupStrings().contains(name)) {
        continue outer;
      }
    }
    LookupElement element=PrioritizedLookupElement.withPriority(LookupElementBuilder.create(name).withAutoCompletionPolicy(AutoCompletionPolicy.GIVE_CHANCE_TO_OVERWRITE),-i);
    if (callback != null) {
      element=LookupElementDecorator.withInsertHandler(element,new InsertHandler<LookupElementDecorator<LookupElement>>(){
        @Override public void handleInsert(        InsertionContext context,        LookupElementDecorator<LookupElement> item){
          callback.nameChosen(item.getLookupString());
        }
      }
);
    }
    lookupElements.add(element);
  }
}
