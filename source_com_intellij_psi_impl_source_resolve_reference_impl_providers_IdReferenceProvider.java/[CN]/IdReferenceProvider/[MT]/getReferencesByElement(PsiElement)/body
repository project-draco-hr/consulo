{
  if (element instanceof XmlAttributeValue) {
    if (PsiTreeUtil.getChildOfAnyType(element,JspXmlTagBase.class,ELExpressionHolder.class) != null) {
      return PsiReference.EMPTY_ARRAY;
    }
    final PsiElement parentElement=element.getParent();
    if (!(parentElement instanceof XmlAttribute))     return PsiReference.EMPTY_ARRAY;
    final String name=((XmlAttribute)parentElement).getName();
    final String ns=((XmlAttribute)parentElement).getParent().getNamespace();
    final boolean jsfNs=com.intellij.xml.util.XmlUtil.JSF_CORE_URI.equals(ns) || com.intellij.xml.util.XmlUtil.JSF_HTML_URI.equals(ns);
    if (FOR_ATTR_NAME.equals(name)) {
      return new PsiReference[]{jsfNs && element.getText().indexOf(':') != -1 ? new IdRefReference(element,1){
        public boolean isSoft(){
          return true;
        }
      }
 : new IdRefReference(element,1)};
    }
 else {
      final boolean allowReferences=!(ourNamespacesWithoutNameReference.contains(ns));
      if ((ID_ATTR_NAME.equals(name) && allowReferences) || STYLE_ID_ATTR_NAME.equals(name) || (NAME_ATTR_NAME.equals(name) && allowReferences)) {
        final AttributeValueSelfReference attributeValueSelfReference;
        if (jsfNs) {
          attributeValueSelfReference=new AttributeValueSelfReference(element);
        }
 else {
          attributeValueSelfReference=new GlobalAttributeValueSelfReference(element,true);
        }
        return new PsiReference[]{attributeValueSelfReference};
      }
    }
  }
  return PsiReference.EMPTY_ARRAY;
}
