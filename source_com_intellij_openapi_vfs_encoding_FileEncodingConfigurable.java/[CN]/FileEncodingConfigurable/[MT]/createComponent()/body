{
  myAction=new ChooseFileEncodingAction(null,myProject){
    public void update(    final AnActionEvent e){
      super.update(e);
      getTemplatePresentation().setText(mySelectedCharsetForPropertiesFiles == null ? IdeBundle.message("encoding.name.system.default") : mySelectedCharsetForPropertiesFiles.displayName());
    }
    protected void chosen(    final VirtualFile virtualFile,    final Charset charset){
      mySelectedCharsetForPropertiesFiles=charset == NO_ENCODING ? null : charset;
      update(new AnActionEvent(null,DataManager.getInstance().getDataContext(),"",myAction.getTemplatePresentation(),ActionManager.getInstance(),0));
    }
  }
;
  Presentation templatePresentation=myAction.getTemplatePresentation();
  myPropertiesFilesEncodingCombo.add(myAction.createCustomComponent(templatePresentation));
  myTreeView=new FileTreeTable(myProject);
  myTreePanel.setViewportView(myTreeView);
  return myPanel;
}
