{
  Map<VirtualFile,Charset> result=myTreeView.getValues();
  EncodingProjectManager encodingManager=EncodingProjectManager.getInstance(myProject);
  encodingManager.setMapping(result);
  encodingManager.setDefaultCharsetForPropertiesFiles(null,mySelectedCharsetForPropertiesFiles);
  encodingManager.setNative2AsciiForPropertiesFiles(null,myTransparentNativeToAsciiCheckBox.isSelected());
  encodingManager.setUseUTFGuessing(null,myAutodetectUTFEncodedFilesCheckBox.isSelected());
  final Object item=myIdeEncodingsCombo.getSelectedItem();
  if (SYSTEM_DEFAULT.equals(item)) {
    EncodingManager.getInstance().setDefaultCharsetName("");
  }
 else   if (item != null) {
    EncodingManager.getInstance().setDefaultCharsetName(((Charset)item).name());
  }
}
