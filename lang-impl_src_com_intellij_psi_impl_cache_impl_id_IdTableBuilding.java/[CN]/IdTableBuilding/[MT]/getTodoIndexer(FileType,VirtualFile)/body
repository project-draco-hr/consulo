{
  final DataIndexer<TodoIndexEntry,Integer,FileContent> indexer=ourTodoIndexers.get(fileType);
  if (indexer != null) {
    return indexer;
  }
  if (fileType instanceof LanguageFileType) {
    final Language lang=((LanguageFileType)fileType).getLanguage();
    final ParserDefinition parserDef=LanguageParserDefinitions.INSTANCE.forLanguage(lang);
    final TokenSet commentTokens=parserDef != null ? parserDef.getCommentTokens() : null;
    if (commentTokens != null) {
      return new TokenSetTodoIndexer(commentTokens,virtualFile);
    }
  }
  if (fileType instanceof AbstractFileType) {
    final TokenSet commentTokens=TokenSet.create(CustomHighlighterTokenType.LINE_COMMENT,CustomHighlighterTokenType.MULTI_LINE_COMMENT);
    return new TokenSetTodoIndexer(commentTokens,virtualFile);
  }
  return null;
}
