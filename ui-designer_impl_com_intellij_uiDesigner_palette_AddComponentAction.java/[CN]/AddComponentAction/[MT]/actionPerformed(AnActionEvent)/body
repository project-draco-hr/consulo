{
  Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  GroupItem groupItem=(GroupItem)e.getDataContext().getData(GroupItem.class.getName());
  if (project == null || groupItem == null)   return;
  final ComponentItem itemToBeAdded=new ComponentItem(project,"",null,null,new GridConstraints(),new HashMap<String,StringDescriptor>(),true,false,false);
  Window parentWindow=WindowManager.getInstance().suggestParentWindow(project);
  final ComponentItemDialog dialog=new ComponentItemDialog(project,parentWindow,itemToBeAdded,false);
  dialog.setTitle(UIDesignerBundle.message("title.add.component"));
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  if (groupItem.containsItemClass(itemToBeAdded.getClassName())) {
    return;
  }
  final Palette palette=Palette.getInstance(project);
  palette.addItem(groupItem,itemToBeAdded);
  palette.fireGroupsChanged();
}
