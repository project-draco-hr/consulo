{
  Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  if (e.getDataContext().getData(GroupItem.class.getName()) != null || e.getDataContext().getData(ComponentItem.class.getName()) != null) {
    e.getPresentation().setVisible(true);
    GroupItem groupItem=(GroupItem)e.getDataContext().getData(GroupItem.class.getName());
    e.getPresentation().setEnabled(project != null && (groupItem == null || !groupItem.isReadOnly()));
  }
 else {
    PsiFile psiFile=(PsiFile)e.getDataContext().getData(DataConstants.PSI_FILE);
    e.getPresentation().setVisible(psiFile != null && findElementToAdd(psiFile) != null);
  }
}
