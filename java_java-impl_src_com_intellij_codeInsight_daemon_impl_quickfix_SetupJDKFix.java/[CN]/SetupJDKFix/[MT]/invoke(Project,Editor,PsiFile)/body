{
  Sdk projectJdk=ProjectSettingsService.getInstance(project).chooseAndSetSdk();
  if (projectJdk == null)   return;
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      Module module=ModuleUtil.findModuleForPsiElement(file);
      if (module != null) {
        ModifiableRootModel modifiableModel=ModuleRootManager.getInstance(module).getModifiableModel();
        modifiableModel.inheritSdk();
        modifiableModel.commit();
      }
    }
  }
);
}
