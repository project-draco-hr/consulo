{
  if (!myUpdateQueue.isEmpty()) {
    myUpdateQueue.pullFirst().run();
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      myDumb.set(false);
      myPublisher.exitDumbMode();
    }
  }
);
  if (project == null || project.isDisposed())   return;
  while (true) {
    final Runnable runnable;
synchronized (myAfterUpdateQueue) {
      if (myAfterUpdateQueue.isEmpty()) {
        break;
      }
      runnable=myAfterUpdateQueue.pullFirst();
    }
    runnable.run();
  }
}
