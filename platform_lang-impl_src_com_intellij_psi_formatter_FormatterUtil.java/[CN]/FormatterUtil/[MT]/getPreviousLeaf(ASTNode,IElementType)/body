{
  ASTNode prev=getPrevious(node,typesToIgnore);
  if (prev == null) {
    return null;
  }
  ASTNode result=prev;
  ASTNode lastChild=prev.getLastChildNode();
  while (lastChild != null) {
    result=lastChild;
    lastChild=lastChild.getLastChildNode();
  }
  for (  IElementType type : typesToIgnore) {
    if (result.getElementType() == type) {
      return getPreviousLeaf(result,typesToIgnore);
    }
  }
  return result;
}
