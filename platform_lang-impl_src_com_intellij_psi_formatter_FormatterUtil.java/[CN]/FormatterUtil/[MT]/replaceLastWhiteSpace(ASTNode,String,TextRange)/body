{
  ASTNode lastWS=TreeUtil.findLastLeaf(astNode);
  if (lastWS == null) {
    return;
  }
  if (lastWS.getElementType() != TokenType.WHITE_SPACE) {
    lastWS=null;
  }
  if (lastWS != null && !lastWS.getTextRange().equals(textRange)) {
    return;
  }
  if (whiteSpace.length() == 0 && lastWS == null) {
    return;
  }
  if (lastWS != null && whiteSpace.length() == 0) {
    lastWS.getTreeParent().removeRange(lastWS,null);
    return;
  }
  LeafElement whiteSpaceElement=ASTFactory.whitespace(whiteSpace);
  if (lastWS == null) {
    astNode.addChild(whiteSpaceElement,null);
  }
 else {
    ASTNode treeParent=lastWS.getTreeParent();
    treeParent.replaceChild(lastWS,whiteSpaceElement);
  }
}
