{
  if (element == null)   return null;
  ASTNode treePrev=element.getTreePrev();
  if (treePrev != null) {
    ASTNode candidate=getLastChildOf(treePrev);
    if (candidate != null && !isSpaceTextElement(candidate) && candidate.getTextLength() > 0) {
      return candidate;
    }
 else {
      return getLeafNonSpaceBefore(candidate);
    }
  }
  final ASTNode treeParent=element.getTreeParent();
  if (treeParent == null || treeParent.getTreeParent() == null) {
    return null;
  }
 else {
    return getLeafNonSpaceBefore(treeParent);
  }
}
