{
  if (t instanceof ProcessCanceledException) {
    myLogger.error("Do not log ProcessCanceledException. Logged at: ",new Throwable());
    myLogger.error("Do not log ProcessCanceledException. Thrown at:",t);
    throw (ProcessCanceledException)t;
  }
  t.printStackTrace();
  String detailString="";
  for (  String detail : details) {
    detailString+=(detail + "\n");
  }
  if (ourErrorsOccurred == null) {
    String s=((message != null) && (message.length() > 0)) ? "Error message is '" + message + "'" : "";
    String mess="Logger errors occurred. See IDEA logs for details. " + s;
    ourErrorsOccurred=new Exception(mess + (detailString.length() > 0 ? "\nDetails: " + detailString : ""),t);
  }
  myLogger.error(message + (detailString.length() > 0 ? "\nDetails: " + detailString : ""),t);
  logErrorHeader();
  if (t.getCause() != null) {
    myLogger.error("Original exception: ",t.getCause());
  }
}
