{
  final Project project=context.getProject();
  return PsiDocumentManager.getInstance(project).commitAndRunReadAction(new Computable<TextWithImports>(){
    public TextWithImports compute(){
      PsiExpression expressionText=null;
      try {
        expressionText=getEvaluationExpression(node,context);
      }
 catch (      EvaluateException e) {
        LOG.error(e.getMessage());
        return null;
      }
      if (expressionText == null)       return null;
      return new TextWithImportsImpl(expressionText);
    }
  }
);
}
