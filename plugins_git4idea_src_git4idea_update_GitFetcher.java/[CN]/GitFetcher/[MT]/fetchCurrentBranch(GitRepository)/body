{
  FetchParams fetchParams=getFetchParams(repository);
  if (fetchParams.isError()) {
    return fetchParams.getError();
  }
  GitRemote remote=fetchParams.getRemote();
  String remoteBranch=fetchParams.getRemoteBranch();
  String url=fetchParams.getUrl();
  if (GitHttpAdapter.shouldUseJGit(url)) {
    return GitHttpAdapter.fetch(repository,remote,url,remoteBranch);
  }
  return fetchNatively(repository.getRoot(),remote,remoteBranch);
}
