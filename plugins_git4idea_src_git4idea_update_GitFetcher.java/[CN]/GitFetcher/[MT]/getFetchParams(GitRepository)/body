{
  GitLocalBranch currentBranch=repository.getCurrentBranch();
  if (currentBranch == null) {
    String message="Current branch can't be null here. \nRepository: " + repository;
    LOG.error(message);
    return new FetchParams(GitFetchResult.error(new Exception(message)));
  }
  GitBranchTrackInfo trackInfo=GitBranchUtil.getTrackInfoForBranch(repository,currentBranch);
  if (trackInfo == null) {
    String message="Tracked info is null for branch " + currentBranch + "\n Repository: "+ repository;
    LOG.error(message);
    return new FetchParams(GitFetchResult.error(new Exception(message)));
  }
  GitRemote remote=trackInfo.getRemote();
  String url=remote.getFirstUrl();
  if (url == null) {
    String message="URL is null for remote " + remote.getName();
    LOG.error(message);
    return new FetchParams(GitFetchResult.error(new Exception(message)));
  }
  return new FetchParams(remote,trackInfo.getRemoteBranch(),url);
}
