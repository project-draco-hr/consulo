{
  for (  GitRemote remote : repository.getRemotes()) {
    String url=remote.getFirstUrl();
    if (url == null) {
      LOG.error("URL is null for remote " + remote.getName());
      continue;
    }
    if (GitHttpAdapter.shouldUseJGit(url)) {
      GitFetchResult res=GitHttpAdapter.fetch(repository,remote,url,null);
      res.addPruneInfo(fetchResult.getPrunedRefs());
      fetchResult=res;
      myErrors.addAll(fetchResult.getErrors());
      if (!fetchResult.isSuccess()) {
        break;
      }
    }
 else {
      GitFetchResult res=fetchNatively(root,remote,null);
      res.addPruneInfo(fetchResult.getPrunedRefs());
      fetchResult=res;
      if (!fetchResult.isSuccess()) {
        break;
      }
    }
  }
  return fetchResult;
}
