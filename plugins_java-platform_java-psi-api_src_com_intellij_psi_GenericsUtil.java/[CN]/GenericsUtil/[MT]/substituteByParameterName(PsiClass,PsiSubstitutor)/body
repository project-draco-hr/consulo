{
  final Map<PsiTypeParameter,PsiType> substitutionMap=parentSubstitutor.getSubstitutionMap();
  final List<PsiType> result=new ArrayList<PsiType>(substitutionMap.size());
  for (  PsiTypeParameter typeParameter : psiClass.getTypeParameters()) {
    final String name=typeParameter.getName();
    final PsiTypeParameter key=ContainerUtil.find(substitutionMap.keySet(),new Condition<PsiTypeParameter>(){
      @Override public boolean value(      final PsiTypeParameter psiTypeParameter){
        return name.equals(psiTypeParameter.getName());
      }
    }
);
    if (key != null) {
      result.add(substitutionMap.get(key));
    }
  }
  return PsiSubstitutor.EMPTY.putAll(psiClass,result.toArray(new PsiType[result.size()]));
}
