{
  if (!CodeInsightUtilBase.prepareFileForWrite(myCatchParameter.getContainingFile()))   return;
  try {
    PsiTryStatement tryStatement=((PsiCatchSection)myCatchParameter.getDeclarationScope()).getTryStatement();
    PsiElement tryParent=tryStatement.getParent();
    if (tryStatement.getCatchBlocks().length == 1 && tryStatement.getFinallyBlock() == null) {
      PsiCodeBlock tryBlock=tryStatement.getTryBlock();
      PsiElement firstElement=tryBlock.getFirstBodyElement();
      PsiElement lastAddedStatement=null;
      if (firstElement != null) {
        PsiElement endElement=tryBlock.getLastBodyElement();
        tryParent.addRangeBefore(firstElement,endElement,tryStatement);
        lastAddedStatement=tryStatement.getPrevSibling();
        while (lastAddedStatement != null && (lastAddedStatement instanceof PsiWhiteSpace || lastAddedStatement.getTextLength() == 0)) {
          lastAddedStatement=lastAddedStatement.getPrevSibling();
        }
      }
      tryStatement.delete();
      if (lastAddedStatement != null) {
        editor.getCaretModel().moveToOffset(lastAddedStatement.getTextRange().getEndOffset());
      }
      return;
    }
    LOG.assertTrue(myCatchParameter.getParent() instanceof PsiCatchSection);
    final PsiElement catchSection=myCatchParameter.getParent();
    PsiElement previousElement=catchSection.getPrevSibling();
    while (previousElement instanceof PsiWhiteSpace) {
      previousElement=previousElement.getPrevSibling();
    }
    catchSection.delete();
    if (previousElement != null) {
      editor.getCaretModel().moveToOffset(previousElement.getTextRange().getEndOffset());
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
