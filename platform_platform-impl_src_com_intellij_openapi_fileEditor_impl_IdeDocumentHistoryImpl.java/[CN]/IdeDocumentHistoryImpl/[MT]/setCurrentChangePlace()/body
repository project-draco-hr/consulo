{
  final Pair<FileEditor,FileEditorProvider> selectedEditorWithProvider=getSelectedEditor();
  if (selectedEditorWithProvider == null) {
    return;
  }
  final PlaceInfo placeInfo=createPlaceInfo(selectedEditorWithProvider.getFirst(),selectedEditorWithProvider.getSecond());
  final VirtualFile file=placeInfo.getFile();
  if (myChangedFilesInCurrentCommand.contains(file)) {
    myRecentlyChangedFiles.register(file);
  }
  myCurrentChangePlace=placeInfo;
  if (!myChangePlaces.isEmpty()) {
    final PlaceInfo lastInfo=myChangePlaces.get(myChangePlaces.size() - 1);
    if (isSame(placeInfo,lastInfo)) {
      myChangePlaces.removeLast();
    }
  }
  myCurrentIndex=myStartIndex + myChangePlaces.size();
}
