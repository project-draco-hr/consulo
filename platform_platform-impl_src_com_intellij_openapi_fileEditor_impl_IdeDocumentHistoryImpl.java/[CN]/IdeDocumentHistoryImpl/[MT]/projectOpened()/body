{
  myEditorManager=(FileEditorManagerEx)FileEditorManager.getInstance(myProject);
  EditorEventMulticaster eventMulticaster=myEditorFactory.getEventMulticaster();
  DocumentListener documentListener=new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      onDocumentChanged(e);
    }
  }
;
  eventMulticaster.addDocumentListener(documentListener,myProject);
  CaretListener caretListener=new CaretListener(){
    @Override public void caretPositionChanged(    CaretEvent e){
      onCaretPositionChanged(e);
    }
  }
;
  eventMulticaster.addCaretListener(caretListener,myProject);
  myProject.getMessageBus().connect().subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new FileEditorManagerAdapter(){
    @Override public void selectionChanged(    @NotNull FileEditorManagerEvent e){
      onSelectionChanged();
    }
  }
);
  VirtualFileListener fileListener=new VirtualFileAdapter(){
    @Override public void fileDeleted(    VirtualFileEvent event){
      onFileDeleted();
    }
  }
;
  myVfManager.addVirtualFileListener(fileListener,myProject);
  myCmdProcessor.addCommandListener(myCommandListener,myProject);
}
