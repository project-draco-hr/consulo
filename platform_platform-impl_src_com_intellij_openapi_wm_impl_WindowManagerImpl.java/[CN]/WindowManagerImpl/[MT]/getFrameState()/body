{
  final Project[] projects=ProjectManager.getInstance().getOpenProjects();
  if (projects.length == 0) {
    return null;
  }
  Project project=projects[0];
  final IdeFrameImpl frame=getFrame(project);
  if (frame == null) {
    return null;
  }
  int extendedState=updateFrameBounds(frame);
  Rectangle rectangle=myFrameBounds;
  final Element frameElement=new Element(FRAME_ELEMENT);
  frameElement.setAttribute(X_ATTR,Integer.toString(rectangle.x));
  frameElement.setAttribute(Y_ATTR,Integer.toString(rectangle.y));
  frameElement.setAttribute(WIDTH_ATTR,Integer.toString(rectangle.width));
  frameElement.setAttribute(HEIGHT_ATTR,Integer.toString(rectangle.height));
  if (!(frame.isInFullScreen() && SystemInfo.isAppleJvm)) {
    frameElement.setAttribute(EXTENDED_STATE_ATTR,Integer.toString(extendedState));
  }
  return frameElement;
}
