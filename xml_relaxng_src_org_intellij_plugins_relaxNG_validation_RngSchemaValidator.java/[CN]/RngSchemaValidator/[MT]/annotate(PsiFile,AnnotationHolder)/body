{
  final FileType type=file.getFileType();
  if (type != StdFileTypes.XML && type != RncFileType.getInstance()) {
    return;
  }
  final XmlFile xmlfile=(XmlFile)file;
  final XmlDocument document=xmlfile.getDocument();
  if (document == null) {
    return;
  }
  if (type == StdFileTypes.XML) {
    final XmlTag rootTag=document.getRootTag();
    if (rootTag == null) {
      return;
    }
    if (!ApplicationLoader.RNG_NAMESPACE.equals(rootTag.getNamespace())) {
      return;
    }
  }
 else {
    if (!ApplicationManager.getApplication().isUnitTestMode() && MyErrorFinder.hasError(xmlfile)) {
      return;
    }
  }
  final Document doc=PsiDocumentManager.getInstance(file.getProject()).getDocument(file);
  ErrorHandler eh=new DefaultHandler(){
    public void warning(    SAXParseException e) throws SAXException {
      handleError(e,file,doc,new WarningMessageConsumer(holder));
    }
    public void error(    SAXParseException e) throws SAXException {
      handleError(e,file,doc,new ErrorMessageConsumer(holder));
    }
  }
;
  RngParser.parsePattern(file,eh,true);
}
