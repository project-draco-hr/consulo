{
  try {
    if (!CodeInsightUtil.prepareFileForWrite(file)) {
      return;
    }
    int offset=editor.getCaretModel().getOffset();
    PsiJavaToken token=(PsiJavaToken)file.findElementAt(offset);
    LOG.assertTrue(token.getTokenType() == JavaTokenType.ANDAND || token.getTokenType() == JavaTokenType.OROR);
    PsiBinaryExpression expression=(PsiBinaryExpression)token.getParent();
    PsiIfStatement ifStatement=PsiTreeUtil.getParentOfType(expression,PsiIfStatement.class);
    LOG.assertTrue(PsiTreeUtil.isAncestor(ifStatement.getCondition(),expression,false));
    if (token.getTokenType() == JavaTokenType.ANDAND) {
      doAndSplit(ifStatement,expression,editor);
    }
 else     if (token.getTokenType() == JavaTokenType.OROR) {
      doOrSplit(ifStatement,expression,editor);
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
