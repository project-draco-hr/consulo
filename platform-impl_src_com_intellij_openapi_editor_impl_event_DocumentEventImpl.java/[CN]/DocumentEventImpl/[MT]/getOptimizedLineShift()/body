{
  if (!myOptimizedLineShiftCalculated) {
    myOptimizedLineShiftCalculated=true;
    if (myOldLength == 0) {
      int lineShift=StringUtil.countNewLines(myNewString);
      myOptimizedLineShift=lineShift == 0 ? -1 : lineShift;
    }
  }
  return myOptimizedLineShift;
}
