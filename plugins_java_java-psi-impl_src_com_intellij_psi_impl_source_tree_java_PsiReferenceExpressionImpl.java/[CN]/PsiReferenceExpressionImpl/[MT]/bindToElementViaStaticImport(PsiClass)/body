{
  String qualifiedName=qualifierClass.getQualifiedName();
  if (qualifiedName == null)   throw new IncorrectOperationException();
  if (getQualifierExpression() != null) {
    throw new IncorrectOperationException("Reference is qualified: " + getText());
  }
  if (!isPhysical()) {
    return this;
  }
  String staticName=getReferenceName();
  PsiFile containingFile=getContainingFile();
  PsiImportList importList=null;
  boolean doImportStatic;
  if (containingFile instanceof PsiJavaFile) {
    importList=((PsiJavaFile)containingFile).getImportList();
    PsiImportStatementBase singleImportStatement=importList.findSingleImportStatement(staticName);
    doImportStatic=singleImportStatement == null;
    if (singleImportStatement instanceof PsiImportStaticStatement) {
      String qName=qualifierClass.getQualifiedName() + "." + staticName;
      if (qName.equals(singleImportStatement.getImportReference().getQualifiedName()))       return this;
    }
  }
 else {
    doImportStatic=false;
  }
  if (doImportStatic) {
    bindToElementViaStaticImport(qualifierClass,staticName,importList);
  }
 else {
    PsiManagerEx manager=getManager();
    PsiReferenceExpression classRef=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory().createReferenceExpression(qualifierClass);
    final CharTable treeCharTab=SharedImplUtil.findCharTableByTree(this);
    LeafElement dot=Factory.createSingleLeafElement(JavaTokenType.DOT,".",0,1,treeCharTab,manager);
    addInternal(dot,dot,SourceTreeToPsiMap.psiElementToTree(getParameterList()),Boolean.TRUE);
    addBefore(classRef,SourceTreeToPsiMap.treeElementToPsi(dot));
  }
  return this;
}
