{
  try {
    List<VirtualFile> files=Collections.singletonList(projectPom);
    List<String> profilesList=Arrays.asList(profiles);
    MavenImportProcessor p=new MavenImportProcessor(myProject);
    p.createMavenProjectModel(files,new HashMap<VirtualFile,Module>(),profilesList,new Progress());
    p.createMavenToIdeaMapping();
    unresolvedArtifacts=new LinkedHashMap<MavenProject,List<Artifact>>();
    p.resolve(myProject,profilesList,unresolvedArtifacts);
    p.commit(myProject,profilesList);
    projectModel=p.getMavenProjectModel();
  }
 catch (  CanceledException e) {
    throw new RuntimeException(e);
  }
}
