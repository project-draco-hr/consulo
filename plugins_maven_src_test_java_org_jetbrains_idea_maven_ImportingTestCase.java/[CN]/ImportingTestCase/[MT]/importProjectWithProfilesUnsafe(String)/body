{
  try {
    List<VirtualFile> files=Collections.singletonList(projectPom);
    List<String> profilesList=Arrays.asList(profiles);
    MavenImportProcessor p=new MavenImportProcessor(myProject);
    p.createMavenProjectModel(new HashMap<VirtualFile,Module>(),files,profilesList,new Progress());
    p.createMavenToIdeaMapping(false);
    p.resolve(myProject,profilesList);
    p.commit(myProject,profilesList,false);
    projectModel=p.getMavenProjectModel();
  }
 catch (  CanceledException e) {
    throw new RuntimeException(e);
  }
}
