{
  fireBeforeFileTypesChanged();
  for (  FileType fileType : getSchemesManager().getAllSchemes()) {
    if (fileType instanceof AbstractFileType) {
      ((AbstractFileType)fileType).disposeSupport();
    }
  }
  mySchemesManager.clearAllSchemes();
  for (  FileType fileType : fileTypes) {
    mySchemesManager.addNewScheme(fileType,true);
    if (fileType instanceof AbstractFileType) {
      ((AbstractFileType)fileType).initSupport();
    }
  }
  myPatternsTable=assocTable.copy();
  fireFileTypesChanged();
}
