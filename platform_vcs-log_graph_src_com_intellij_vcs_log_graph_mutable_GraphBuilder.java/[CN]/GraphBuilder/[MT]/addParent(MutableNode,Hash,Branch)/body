{
  MutableNode parentNode=underdoneNodes.remove(parentHash);
  if (parentNode == null) {
    parentNode=createNode(parentHash,branch);
    createUsualEdge(node,parentNode,branch);
    underdoneNodes.put(parentHash,parentNode);
  }
 else {
    createUsualEdge(node,parentNode,branch);
    int parentRowIndex=getLogIndexOfCommit(parentHash);
    if (nextRow.getRowIndex() != parentRowIndex) {
      parentNode.setNodeRow(nextRow);
      parentNode.setType(EDGE_NODE);
      nextRow.getInnerNodeList().add(parentNode);
      MutableNode newParentNode=createNode(parentHash,parentNode.getBranch());
      createUsualEdge(parentNode,newParentNode,parentNode.getBranch());
      underdoneNodes.put(parentHash,newParentNode);
    }
 else {
      underdoneNodes.put(parentHash,parentNode);
    }
  }
}
