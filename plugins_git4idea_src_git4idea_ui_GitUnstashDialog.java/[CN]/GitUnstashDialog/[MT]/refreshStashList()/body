{
  final DefaultListModel listModel=(DefaultListModel)myStashList.getModel();
  listModel.clear();
  VirtualFile root=getGitRoot();
  GitStashUtils.loadStashStack(myProject,root,new Consumer<StashInfo>(){
    @Override public void consume(    StashInfo stashInfo){
      listModel.addElement(stashInfo);
    }
  }
);
  myBranches.clear();
  GitRepository repository=GitUtil.getRepositoryManager(myProject).getRepositoryForRoot(root);
  if (repository != null) {
    myBranches.addAll(GitBranchUtil.convertBranchesToNames(repository.getBranches().getLocalBranches()));
  }
 else {
    LOG.error("Repository is null for root " + root);
  }
  myStashList.setSelectedIndex(0);
}
