{
  GitLineHandler h=new GitLineHandler(myProject,getGitRoot(),GitCommand.STASH);
  h.setNoSSH(true);
  String branch=myBranchTextField.getText();
  if (branch.length() == 0) {
    h.addParameters(myPopStashCheckBox.isSelected() ? "pop" : "apply");
    if (myReinstateIndexCheckBox.isSelected()) {
      h.addParameters("--index");
    }
  }
 else {
    h.addParameters("branch",branch);
  }
  String selectedStash=getSelectedStash().getStash();
  if (escaped) {
    selectedStash=translateStash(selectedStash);
  }
 else   if (GitVersionSpecialty.NEEDS_QUOTES_IN_STASH_NAME.existsIn(myVcs.getVersion())) {
    selectedStash="\"" + selectedStash + "\"";
  }
  h.addParameters(selectedStash);
  return h;
}
