{
  clear();
  setFont(list.getFont());
  mySelected=selected;
  myForeground=list.getForeground();
  if (index == -1) {
    mySelectionForeground=list.getForeground();
  }
 else {
    mySelectionForeground=list.getSelectionForeground();
  }
  setBackground(selected ? hasFocus ? UIUtil.getListSelectionBackground() : UIUtil.getListUnfocusedSelectionBackground() : UIUtil.getListBackground());
  setPaintFocusBorder(hasFocus);
  customizeCellRenderer(list,(T)value,index,selected,hasFocus);
  if (myDefaultGtkRenderer != null && list.getModel() instanceof ComboBoxModel) {
    final Component component=myDefaultGtkRenderer.getListCellRendererComponent(list,value,index,selected,hasFocus);
    if (component instanceof JLabel) {
      return formatToLabel((JLabel)component);
    }
  }
  return this;
}
