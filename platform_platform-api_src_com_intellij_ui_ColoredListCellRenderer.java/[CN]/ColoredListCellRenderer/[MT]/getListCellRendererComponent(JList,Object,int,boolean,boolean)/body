{
  clear();
  setFont(list.getFont());
  mySelected=selected;
  myForeground=list.getForeground();
  mySelectionForeground=list.getSelectionForeground();
  if (UIUtil.isWinLafOnVista()) {
    if (index == -1) {
      setOpaque(false);
      mySelected=false;
    }
 else {
      setOpaque(true);
      setBackground(selected ? list.getSelectionBackground() : null);
    }
  }
 else {
    setBackground(selected ? list.getSelectionBackground() : null);
  }
  setPaintFocusBorder(hasFocus);
  customizeCellRenderer(list,(T)value,index,selected,hasFocus);
  if (myDefaultGtkRenderer != null && list.getModel() instanceof ComboBoxModel) {
    final Component component=myDefaultGtkRenderer.getListCellRendererComponent(list,value,index,selected,hasFocus);
    if (component instanceof JLabel) {
      return formatToLabel((JLabel)component);
    }
  }
  return this;
}
