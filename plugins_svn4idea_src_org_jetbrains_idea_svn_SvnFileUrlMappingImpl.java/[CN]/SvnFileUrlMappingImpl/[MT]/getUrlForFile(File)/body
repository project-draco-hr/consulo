{
  final Pair<String,SvnFileUrlMappingRefresher.RootUrlInfo> rootInfo=getWcRootForFilePath(file);
  if (rootInfo == null) {
    return null;
  }
  final String absolutePath=file.getAbsolutePath();
  if (absolutePath.length() < rootInfo.first.length()) {
    if (absolutePath.equals(rootInfo.first.substring(0,rootInfo.first.length() - 1))) {
      return rootInfo.second.getAbsoluteUrlAsUrl();
    }
    return null;
  }
  final String relativePath=absolutePath.substring(rootInfo.first.length());
  try {
    return rootInfo.second.getAbsoluteUrlAsUrl().appendPath(FileUtil.toSystemIndependentName(relativePath),true);
  }
 catch (  SVNException e) {
    LOG.info(e);
    return null;
  }
}
