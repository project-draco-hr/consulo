{
  final RootUrlInfo rootUrlInfo=getWcRootForFilePath(file);
  if (rootUrlInfo == null) {
    return null;
  }
  final String absolutePath=file.getAbsolutePath();
  final String rootAbsPath=rootUrlInfo.getIoFile().getAbsolutePath();
  if (absolutePath.length() < rootAbsPath.length()) {
    if (absolutePath.equals(rootAbsPath.substring(0,rootAbsPath.length() - 1))) {
      return rootUrlInfo.getAbsoluteUrlAsUrl();
    }
    return null;
  }
  final String relativePath=absolutePath.substring(rootAbsPath.length());
  try {
    return rootUrlInfo.getAbsoluteUrlAsUrl().appendPath(FileUtil.toSystemIndependentName(relativePath),true);
  }
 catch (  SVNException e) {
    LOG.info(e);
    return null;
  }
}
