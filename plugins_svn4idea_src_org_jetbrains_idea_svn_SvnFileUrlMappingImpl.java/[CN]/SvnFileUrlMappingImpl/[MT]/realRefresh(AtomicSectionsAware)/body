{
  final SvnVcs vcs=SvnVcs.getInstance(myProject);
  final VirtualFile[] roots=myHelper.executeDefended(myProject);
  final CopiesApplier copiesApplier=new CopiesApplier();
  final CopiesDetector copiesDetector=new CopiesDetector(atomicSectionsAware,vcs,copiesApplier,new Getter<NestedCopiesData>(){
    public NestedCopiesData get(){
      return myTempSink.receive();
    }
  }
);
  copiesDetector.detectCopyRoots(roots,init());
}
