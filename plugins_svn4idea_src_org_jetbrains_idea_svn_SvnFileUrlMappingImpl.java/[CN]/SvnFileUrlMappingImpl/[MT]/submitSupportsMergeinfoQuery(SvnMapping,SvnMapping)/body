{
  final SvnVcs vcs=SvnVcs.getInstance(myProject);
  final Map<String,SVNURL> supportingMergeinfo=new HashMap<String,SVNURL>();
  for (  String path : mapping.getFileRoots()) {
    supportingMergeinfo.put(path,mapping.byFile(path).getAbsoluteUrlAsUrl());
  }
  for (  String path : realMapping.getFileRoots()) {
    supportingMergeinfo.put(path,realMapping.byFile(path).getAbsoluteUrlAsUrl());
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      for (Iterator<String> iterator=supportingMergeinfo.keySet().iterator(); iterator.hasNext(); ) {
        final String path=iterator.next();
        final SVNURL url=supportingMergeinfo.get(path);
        final boolean value=SvnUtil.doesRepositorySupportMergeinfo(vcs,url);
        if (!value)         iterator.remove();
      }
      for (      String path : supportingMergeinfo.keySet()) {
        setSupportsMergeinfo(path,true);
      }
    }
  }
);
}
