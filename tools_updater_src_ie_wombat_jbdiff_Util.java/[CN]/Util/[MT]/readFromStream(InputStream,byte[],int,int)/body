{
  int totalBytesRead=0;
  int nbytes;
  while (totalBytesRead < len) {
    nbytes=in.read(buf,offset + totalBytesRead,len - totalBytesRead);
    if (nbytes < 0) {
      System.err.println("readFromStream(): returning prematurely. Read " + totalBytesRead + " bytes");
      return false;
    }
    totalBytesRead+=nbytes;
  }
  return true;
}
