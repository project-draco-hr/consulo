{
  final Graph<PsiJavaPackage> graph=GraphGenerator.create(CachingSemiGraph.create(new GraphGenerator.SemiGraph<PsiJavaPackage>(){
    public Collection<PsiJavaPackage> getNodes(){
      return getAllScopePackages().values();
    }
    public Iterator<PsiJavaPackage> getIn(    PsiJavaPackage psiPack){
      final Set<PsiJavaPackage> psiPackages=myPackageDependencies.get(psiPack);
      if (psiPackages == null) {
        return new HashSet<PsiJavaPackage>().iterator();
      }
      return psiPackages.iterator();
    }
  }
));
  return graph;
}
