{
  final FragmentedContent requestForChange;
  try {
    requestForChange=value.get();
    if (requestForChange == null)     throw new VcsException("Can not load content");
    if (requestForChange.getRanges().isEmpty()) {
      return noDifferences();
    }
  }
 catch (  VcsException e) {
    return new Pair<JPanel,Disposable>(UIVcsUtil.errorPanel(e.getMessage(),true),null);
  }
  final ChangesFragmentedDiffPanel panel=new ChangesFragmentedDiffPanel(myProject,requestForChange,myDiffPanelCache,changeDescription(change));
  panel.buildUi();
  return new Pair<JPanel,Disposable>(panel.getPanel(),panel);
}
