{
  final Pair<AntBuildFile,String> pair;
synchronized (myEventToTargetMap) {
    pair=myEventToTargetMap.get(event);
  }
  if (pair == null) {
    return null;
  }
  final AntBuildFileBase buildFile=(AntBuildFileBase)pair.first;
synchronized (myBuildFiles) {
    if (!myBuildFiles.contains(buildFile)) {
      return null;
    }
  }
  final String targetName=pair.second;
  final AntBuildTarget antBuildTarget=buildFile.getModel().findTarget(targetName);
  if (antBuildTarget != null) {
    return antBuildTarget;
  }
  final List<ExecutionEvent> events=getEventsByClass(ExecuteCompositeTargetEvent.class);
  if (events.size() == 0) {
    return null;
  }
  for (  ExecutionEvent ev : events) {
    final String name=ExecuteCompositeTargetEvent.TYPE_ID.equals(ev.getTypeId()) ? ((ExecuteCompositeTargetEvent)ev).getMetaTargetName() : ev.getPresentableName();
    if (Comparing.strEqual(targetName,name)) {
      return new MetaTarget(buildFile,ev.getPresentableName(),((ExecuteCompositeTargetEvent)ev).getTargetNames());
    }
  }
  return null;
}
