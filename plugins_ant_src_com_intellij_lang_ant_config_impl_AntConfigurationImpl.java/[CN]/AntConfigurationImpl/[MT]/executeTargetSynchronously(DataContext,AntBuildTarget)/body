{
  final Semaphore targetDone=new Semaphore();
  final boolean[] result=new boolean[1];
  try {
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      public void run(){
        Project project=DataAccessors.PROJECT.from(dataContext);
        if (project == null || project.isDisposed()) {
          result[0]=false;
          return;
        }
        targetDone.down();
        target.run(dataContext,new AntBuildListener(){
          public void buildFinished(          int state,          int errorCount){
            result[0]=(state == AntBuildListener.FINISHED_SUCCESSFULLY) && (errorCount == 0);
            targetDone.up();
          }
        }
);
      }
    }
,ModalityState.NON_MODAL);
  }
 catch (  Exception e) {
    LOG.error(e);
    return false;
  }
  targetDone.waitFor();
  return result[0];
}
