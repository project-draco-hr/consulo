{
  final AntFile antFile=(AntFile)buildFile.getAntFile();
  if (antFile != null) {
    final XmlFile xmlFile=antFile.getSourceElement();
    xmlFile.putCopyableUserData(AntFileImpl.ANT_BUILD_FILE,null);
    AntSupport.markFileAsAntFile(xmlFile.getVirtualFile(),xmlFile.getViewProvider(),false);
  }
synchronized (myBuildFiles) {
    myBuildFilesArray=null;
    myBuildFiles.remove(buildFile);
  }
  myModelToBuildFileMap.remove(buildFile);
  myEventDispatcher.getMulticaster().buildFileRemoved(buildFile);
}
