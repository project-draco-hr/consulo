{
  PsiFile psiFile=myPsiManager.findFile(file);
  if (psiFile != null) {
    psiFile=psiFile.getViewProvider().getPsi(AntSupport.getLanguage());
  }
  if (psiFile == null)   throw new AntNoFileException(AntBundle.message("cant.add.file.error.message"),file);
  AntBuildFileImpl buildFile=new AntBuildFileImpl((AntFile)psiFile,this);
  myBuildFiles.add(buildFile);
  myEventDispatcher.getMulticaster().buildFileAdded(buildFile);
  return buildFile;
}
