{
  final int roundValue=SystemInfo.isMac ? 5 : 2;
  final PainterSettings s=getSettings();
  final Font oldFont=g2.getFont();
  final int offset=c.getOffset() - pageOffset;
  final Color bg=s.getBackgroundColor(c);
  if (bg != null) {
    g2.setColor(bg);
    g2.fillRoundRect(offset + 1,1,c.getWidth() - 3,height - 2,roundValue,roundValue);
  }
  final Color borderColor=s.getBorderColor(c);
  if (borderColor != null) {
    g2.setColor(borderColor);
    g2.drawRoundRect(offset + 1,1,c.getWidth() - 3,height - 2,roundValue,roundValue);
  }
  final Color textColor=s.getForegroundColor(c);
  if (textColor != null) {
    g2.setColor(textColor);
  }
  final Font font=s.getFont(g2,c);
  if (font != null) {
    g2.setFont(font);
  }
  final FontMetrics fm=g2.getFontMetrics();
  g2.drawString(c.getString(),offset + 2,fm.getAscent() + (SystemInfo.isMac ? fm.getDescent() : 0));
  g2.setFont(oldFont);
}
