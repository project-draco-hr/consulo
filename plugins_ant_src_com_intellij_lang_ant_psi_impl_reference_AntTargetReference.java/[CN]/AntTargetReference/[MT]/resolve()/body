{
  final String name=getCanonicalText();
  AntElement element=getElement();
  AntProject project=element.getAntProject();
  AntTarget result=project.getTarget(name);
  if (result == null) {
    for (    final AntFile imported : project.getImportedFiles()) {
      if ((result=imported.getAntProject().getTarget(name)) != null) {
        break;
      }
    }
  }
  if (result == null && element instanceof AntAntImpl) {
    AntAntImpl ant=(AntAntImpl)element;
    final PsiFile psiFile=ant.findFileByName(ant.getFileName());
    if (psiFile != null) {
      AntFile antFile;
      if (psiFile instanceof AntFile) {
        antFile=(AntFile)psiFile;
      }
 else {
        antFile=(AntFile)psiFile.getViewProvider().getPsi(AntSupport.getLanguage());
      }
      result=antFile.getAntProject().getTarget(name);
    }
  }
  return result;
}
