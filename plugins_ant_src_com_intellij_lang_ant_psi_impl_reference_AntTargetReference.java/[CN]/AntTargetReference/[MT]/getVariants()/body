{
  final AntElement element=getElement();
  if (element instanceof AntAntImpl) {
    final PsiFile psiFile=((AntAntImpl)element).getCalledAntFile();
    if (psiFile != null) {
      AntFile antFile;
      if (psiFile instanceof AntFile) {
        antFile=(AntFile)psiFile;
      }
 else {
        antFile=AntSupport.getAntFile(psiFile);
      }
      final AntProject project=(antFile == null) ? null : antFile.getAntProject();
      if (project != null) {
        return ContainerUtil.map2Array(project.getTargets(),LookupElement.class,VARIANT_MAPPER);
      }
    }
  }
  List<AntTarget> result=new ArrayList<AntTarget>();
  final AntProject project=element.getAntProject();
  final AntTarget[] targets=project.getTargets();
  for (  final AntTarget target : targets) {
    if (target != element) {
      result.add(target);
    }
  }
  result.addAll(Arrays.asList(project.getImportedTargets()));
  return ContainerUtil.map2Array(result,LookupElement.class,VARIANT_MAPPER);
}
