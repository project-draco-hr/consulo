{
  final AntElement element=getElement();
  if (element instanceof AntProject || element instanceof AntCall) {
    getAttribute().setValue(newElementName);
    element.subtreeChanged();
  }
 else   if (element instanceof AntTarget) {
    int start=getElementStartOffset() + getReferenceStartOffset() - getAttributeValueStartOffset();
    final String value=getAttribute().getValue();
    final StringBuilder builder=StringBuilderSpinAllocator.alloc();
    try {
      if (start > 0) {
        builder.append(value.substring(0,start));
      }
      builder.append(newElementName);
      if (value.length() > start + getRangeInElement().getLength()) {
        builder.append(value.substring(start + getRangeInElement().getLength()));
      }
      getAttribute().setValue(builder.toString());
    }
  finally {
      StringBuilderSpinAllocator.dispose(builder);
    }
    element.subtreeChanged();
  }
  return element;
}
