{
  PsiBuilder.Marker marker=builder.mark();
  GroovyElementType result=LogicalOrExpression.parse(builder);
  if (!result.equals(WRONGWAY)) {
    if (ParserUtils.getToken(builder,mQUESTION)) {
      result=CONDITIONAL_EXPRESSION;
      ParserUtils.getToken(builder,mNLS);
      GroovyElementType res=AssignmentExpression.parse(builder);
      if (res.equals(WRONGWAY)) {
        builder.error(GroovyBundle.message("expression.expected"));
      }
      if (ParserUtils.getToken(builder,mCOLON,GroovyBundle.message("colon.expected"))) {
        ParserUtils.getToken(builder,mNLS);
        parse(builder);
      }
      marker.done(CONDITIONAL_EXPRESSION);
    }
 else     if (ParserUtils.getToken(builder,mELVIS)) {
      result=ELVIS_EXPRESSION;
      ParserUtils.getToken(builder,mNLS);
      GroovyElementType res=parse(builder);
      if (res.equals(WRONGWAY)) {
        builder.error(GroovyBundle.message("expression.expected"));
      }
      marker.done(ELVIS_EXPRESSION);
    }
 else {
      marker.drop();
    }
  }
 else {
    marker.drop();
  }
  return result;
}
