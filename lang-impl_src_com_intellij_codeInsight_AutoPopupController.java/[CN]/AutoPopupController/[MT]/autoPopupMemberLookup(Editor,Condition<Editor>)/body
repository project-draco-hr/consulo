{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  if (settings.AUTO_POPUP_MEMBER_LOOKUP) {
    final PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(editor.getDocument());
    if (file == null)     return;
    final Runnable request=new Runnable(){
      public void run(){
        PsiDocumentManager.getInstance(myProject).commitAllDocuments();
        new WriteCommandAction(myProject){
          protected void run(          Result result) throws Throwable {
            if (!ApplicationManager.getApplication().isUnitTestMode() && !editor.getContentComponent().isShowing())             return;
            if (condition != null && !condition.value(editor))             return;
            new DotAutoLookupHandler().invoke(myProject,editor,file);
          }
        }
.execute();
      }
    }
;
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        myAlarm.addRequest(request,settings.MEMBER_LOOKUP_DELAY);
      }
    }
);
  }
}
