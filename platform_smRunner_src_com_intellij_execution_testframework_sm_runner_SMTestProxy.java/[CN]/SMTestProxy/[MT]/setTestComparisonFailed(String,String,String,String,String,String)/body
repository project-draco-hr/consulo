{
  setStacktraceIfNotSet(stackTrace);
  final TestComparisionFailedState comparisionFailedState=new TestComparisionFailedState(localizedMessage,stackTrace,actualText,expectedText,expectedFilePath,actualFilePath);
  if (myState instanceof TestComparisionFailedState) {
    final TestComparisonFailedStates states=new TestComparisonFailedStates(localizedMessage,stackTrace);
    states.addComparisonFailure((TestComparisionFailedState)myState);
    states.addComparisonFailure(comparisionFailedState);
    myState=states;
  }
 else   if (myState instanceof TestComparisonFailedStates) {
    ((TestComparisonFailedStates)myState).addComparisonFailure(comparisionFailedState);
  }
 else {
    myState=comparisionFailedState;
  }
  fireOnNewPrintable(comparisionFailedState);
}
