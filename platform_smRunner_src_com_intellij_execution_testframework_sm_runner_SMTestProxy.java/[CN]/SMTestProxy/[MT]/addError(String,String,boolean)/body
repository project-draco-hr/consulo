{
  myHasCriticalErrors=isCritical;
  if (isCritical) {
    invalidateCachedHasErrorMark();
  }
  setStacktraceIfNotSet(stackTrace);
  addLast(new Printable(){
    @Override public void printOn(    final Printer printer){
      String errorText=TestFailedState.buildErrorPresentationText(output,stackTrace);
      LOG.assertTrue(errorText != null);
      TestFailedState.printError(printer,Collections.singletonList(errorText));
    }
  }
);
}
