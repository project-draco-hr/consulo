{
  myHasCriticalErrors=isCritical;
  setStacktraceIfNotSet(stackTrace);
  addLast(new Printable(){
    public void printOn(    final Printer printer){
      final String errorText=TestFailedState.buildErrorPresentationText(output,stackTrace);
      LOG.assertTrue(errorText != null);
      TestFailedState.printError(printer,Arrays.asList(errorText));
    }
  }
);
}
