{
  final PackagingElementsTree tree=myEditor.getPackagingElementsTree();
  final PackagingElementNode[] nodes=tree.getSelectedNodes();
  if (nodes.length != 1)   return;
  final PackagingElement<?> element=nodes[0].getPackagingElement();
  if (!(element instanceof ArtifactPackagingElement))   return;
  final TreeNode parentNode=nodes[0].getParent();
  if (!(parentNode instanceof PackagingElementNode))   return;
  final Function<PackagingElement<?>,PackagingElement<?>> map=tree.ensureRootIsWritable();
  CompositePackagingElement<?> parent=(CompositePackagingElement<?>)map.fun(((PackagingElementNode)parentNode).getPackagingElement());
  parent.removeChild(map.fun(element));
  final Artifact artifact=((ArtifactPackagingElement)element).findArtifact(myEditor.getContext());
  if (artifact != null) {
    for (    PackagingElement<?> child : artifact.getRootElement().getChildren()) {
      parent.addChild(ArtifactUtil.copyWithChildren(child));
    }
  }
  tree.rebuildTree();
}
