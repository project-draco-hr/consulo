{
  String prefix=myNameField.getName();
  Pair<LookupItemPreferencePolicy,Set<LookupItem>> pair=myGenerator.completeVariableName(prefix,myTypeSelector.getSelectedType());
  LookupItem[] lookupItems=pair.second.toArray(new LookupItem[pair.second.size()]);
  editor.getCaretModel().moveToOffset(prefix.length());
  editor.getSelectionModel().removeSelection();
  LookupItemPreferencePolicy first=pair.first;
  LookupManager.getInstance(myProject).showLookup(editor,lookupItems,prefix,first,new CharFilter(){
    public int accept(    char c,    final String prefix,    final LookupElement element){
      if (Character.isJavaIdentifierPart(c))       return CharFilter.ADD_TO_PREFIX;
      return CharFilter.SELECT_ITEM_AND_FINISH_LOOKUP;
    }
  }
);
}
