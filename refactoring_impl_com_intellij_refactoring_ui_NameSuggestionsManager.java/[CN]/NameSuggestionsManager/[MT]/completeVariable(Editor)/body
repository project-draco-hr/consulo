{
  String prefix=myNameField.getEnteredName();
  Pair<LookupItemPreferencePolicy,Set<LookupItem>> pair=myGenerator.completeVariableName(prefix,myTypeSelector.getSelectedType());
  LookupItem[] lookupItems=pair.second.toArray(new LookupItem[pair.second.size()]);
  editor.getCaretModel().moveToOffset(prefix.length());
  editor.getSelectionModel().removeSelection();
  LookupItemPreferencePolicy first=pair.first;
  LookupManager.getInstance(myProject).showLookup(editor,lookupItems,first);
}
