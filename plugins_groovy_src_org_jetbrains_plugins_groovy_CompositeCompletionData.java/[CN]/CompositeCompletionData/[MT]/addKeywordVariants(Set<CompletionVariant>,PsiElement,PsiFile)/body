{
  if (!ourShouldCompleteKeywords)   return;
  AccessToken accessToken=ApplicationManager.getApplication().acquireReadActionLock();
  try {
    Set<CompletionVariant> toAdd=new HashSet<CompletionVariant>();
    outer:     for (    final CompletionData completionData : myDataByPriority) {
      completionData.addKeywordVariants(toAdd,position,file);
      for (      CompletionVariant completionVariant : toAdd) {
        if (completionVariant.hasKeywordCompletions()) {
          break outer;
        }
      }
    }
    set.addAll(toAdd);
  }
  finally {
    accessToken.finish();
  }
}
