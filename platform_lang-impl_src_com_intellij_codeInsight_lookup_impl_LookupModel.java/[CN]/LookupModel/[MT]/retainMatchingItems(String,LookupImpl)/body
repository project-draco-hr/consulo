{
synchronized (lock) {
    final List<LookupElement> newItems=ContainerUtil.findAll(myItems,new Condition<LookupElement>(){
      @Override public boolean value(      LookupElement item){
        return item.isValid() && item.setPrefixMatcher(lookup.itemMatcher(item).cloneWithPrefix(newPrefix));
      }
    }
);
    if (newItems.size() == myItems.size()) {
      return;
    }
    clearItems();
    for (    LookupElement newItem : newItems) {
      addItem(newItem);
    }
  }
}
