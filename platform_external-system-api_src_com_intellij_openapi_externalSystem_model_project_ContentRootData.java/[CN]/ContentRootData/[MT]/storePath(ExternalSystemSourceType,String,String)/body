{
  if (FileUtil.isAncestor(new File(getRootPath()),new File(path),false)) {
    Collection<SourceRoot> paths=myData.get(type);
    if (paths == null) {
      myData.put(type,paths=new TreeSet<SourceRoot>(SourceRootComparator.INSTANCE));
    }
    paths.add(new SourceRoot(ExternalSystemApiUtil.toCanonicalPath(path),StringUtil.nullize(packagePrefix,true)));
    return;
  }
  if (!ExternalSystemSourceType.EXCLUDED.equals(type)) {
    throw new IllegalArgumentException(String.format("Can't register given path of type '%s' because it's out of content root.%nContent root: '%s'%nGiven path: '%s'",type,getRootPath(),new File(path).getAbsolutePath()));
  }
}
