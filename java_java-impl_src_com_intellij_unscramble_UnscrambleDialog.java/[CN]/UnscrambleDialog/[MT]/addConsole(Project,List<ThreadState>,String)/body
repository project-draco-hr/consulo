{
  Icon icon=null;
  String message=IdeBundle.message("unscramble.unscrambled.stacktrace.tab");
  if (!threadDump.isEmpty()) {
    message=IdeBundle.message("unscramble.unscrambled.threaddump.tab");
    icon=THREAD_DUMP_ICON;
  }
 else {
    String name=getExceptionName(unscrambledTrace);
    if (name != null) {
      message=name;
      icon=EXCEPTION_ICON;
    }
  }
  if (ContainerUtil.find(threadDump,DEADLOCK_CONDITION) != null) {
    message=IdeBundle.message("unscramble.unscrambled.deadlock.tab");
    icon=DEADLOCK_ICON;
  }
  return AnalyzeStacktraceUtil.addConsole(project,threadDump.size() > 1 ? new AnalyzeStacktraceUtil.ConsoleFactory(){
    public JComponent createConsoleComponent(    ConsoleView consoleView,    DefaultActionGroup toolbarActions){
      return new ThreadDumpPanel(project,consoleView,toolbarActions,threadDump);
    }
  }
 : null,message,unscrambledTrace,icon);
}
