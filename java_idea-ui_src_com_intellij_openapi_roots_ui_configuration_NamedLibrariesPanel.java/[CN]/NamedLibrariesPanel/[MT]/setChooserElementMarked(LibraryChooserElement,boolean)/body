{
  if (isMarked) {
    if (!chooserElement.isAttachedToProject()) {
      final LibraryOrderEntry orderEntry=chooserElement.isValid() ? myRootModel.addLibraryEntry(chooserElement.getLibrary()) : myRootModel.addInvalidLibrary(chooserElement.getName(),myLibraryTable.getTableLevel());
      chooserElement.setOrderEntry(orderEntry);
    }
  }
 else {
    if (chooserElement.isAttachedToProject()) {
      myRootModel.removeOrderEntry(chooserElement.getOrderEntry());
      chooserElement.setOrderEntry(null);
    }
  }
}
