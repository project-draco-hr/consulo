def write(self):
    if (self.dirty and self.transplantfile):
        if (not os.path.isdir(self.path)):
            os.mkdir(self.path)
        fp = self.opener(self.transplantfile, 'w')
        for c in self.transplants:
            (l, r) = map(revlog.hex, (c.lnode, c.rnode))
            fp.write((((l + ':') + r) + '\n'))
        fp.close()
    self.dirty = False
