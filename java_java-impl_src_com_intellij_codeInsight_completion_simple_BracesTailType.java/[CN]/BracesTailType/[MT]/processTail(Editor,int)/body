{
  final CommonCodeStyleSettings styleSettings=getLocalCodeStyleSettings(editor,tailOffset);
  if (isSpaceBeforeLBrace(styleSettings,editor,tailOffset)) {
    tailOffset=insertChar(editor,tailOffset,' ');
  }
  tailOffset=insertChar(editor,tailOffset,'{');
  if (EnterAfterUnmatchedBraceHandler.isAfterUnmatchedLBrace(editor,tailOffset,getFileType(editor))) {
    new EnterHandler(EditorActionManager.getInstance().getActionHandler(IdeActions.ACTION_EDITOR_ENTER)).executeWriteAction(editor,DataManager.getInstance().getDataContext(editor.getContentComponent()));
    return editor.getCaretModel().getOffset();
  }
  return tailOffset;
}
