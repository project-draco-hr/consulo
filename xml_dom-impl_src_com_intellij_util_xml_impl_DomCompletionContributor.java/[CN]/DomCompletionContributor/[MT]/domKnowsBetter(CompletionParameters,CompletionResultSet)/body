{
  final PsiElement element=PsiTreeUtil.getParentOfType(parameters.getPosition(),XmlTag.class,XmlAttributeValue.class);
  return element != null && ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      if (isSchemaEnumerated(element)) {
        return false;
      }
      final PsiReference[] references=myProvider.getReferencesByElement(element,new ProcessingContext());
      if (references.length > 0) {
        return LegacyCompletionContributor.completeReference(parameters,result,new XmlCompletionData());
      }
      return false;
    }
  }
).booleanValue();
}
