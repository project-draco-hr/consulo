{
  Collection<Object> collection=getIterable(o);
  String tagName=getTagName(o);
  if (tagName == null) {
    List<Object> result=new SmartList<Object>();
    if (!ContainerUtil.isEmpty(collection)) {
      for (      Object item : collection) {
        ContainerUtil.addAllNotNull(result,serializeItem(item,result,filter));
      }
    }
    return result;
  }
 else {
    Element result=new Element(tagName);
    if (!ContainerUtil.isEmpty(collection)) {
      for (      Object item : collection) {
        Content child=(Content)serializeItem(item,result,filter);
        if (child != null) {
          result.addContent(child);
        }
      }
    }
    return result;
  }
}
