{
  final Set<String> result=new TreeSet<String>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final Module[] modules=myModulesConfigurator.getModules();
      for (      final Module module : modules) {
        final ModuleEditor moduleEditor=myModulesConfigurator.getModuleEditor(module);
        if (moduleEditor != null) {
          final OrderEntry[] entries=moduleEditor.getModifiableRootModel().getOrderEntries();
          for (          OrderEntry entry : entries) {
            if (myDisposed)             return;
            if (condition.value(entry)) {
              result.add(module.getName());
              break;
            }
          }
        }
      }
    }
  }
);
  return result;
}
