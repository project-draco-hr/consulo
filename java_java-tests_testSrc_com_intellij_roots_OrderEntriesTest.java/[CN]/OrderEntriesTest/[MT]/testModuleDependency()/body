{
  final Module dep=createModule("dep");
  final VirtualFile srcRoot=addSourceRoot(dep,false);
  final VirtualFile testRoot=addSourceRoot(dep,true);
  final VirtualFile output=setModuleOutput(dep,false);
  final VirtualFile testOutput=setModuleOutput(dep,true);
  ModuleRootModificationUtil.addDependency(dep,createJDomLibrary(),DependencyScope.COMPILE,true);
  ModuleRootModificationUtil.addDependency(myModule,dep,DependencyScope.COMPILE,false);
  assertOrderFiles(OrderRootType.CLASSES,getRtJar(),getJDomJar());
  assertOrderFiles(OrderRootType.SOURCES,srcRoot,testRoot,getJDomSources());
  assertOrderFiles(OrderRootType.CLASSES_AND_OUTPUT,getRtJar(),testOutput,output,getJDomJar());
  assertOrderFiles(OrderRootType.COMPILATION_CLASSES,getRtJar(),testOutput,output,getJDomJar());
  assertOrderFiles(OrderRootType.PRODUCTION_COMPILATION_CLASSES,getRtJar(),output,getJDomJar());
}
