{
  myManager.startBatchFilesProcessingMode();
  try {
    final List<VirtualFile> result=new ArrayList<VirtualFile>();
    boolean success=processFilesWithText(scope,searchContext,caseSensitively,text,new CommonProcessors.CollectProcessor<VirtualFile>(result),progress);
    LOG.assertTrue(success);
    return result;
  }
  finally {
    myManager.finishBatchFilesProcessingMode();
  }
}
