{
  for (  final PsiSearchRequest primitive : request.getSearchRequests()) {
    final SearchScope scope=primitive.searchScope;
    if (scope instanceof LocalSearchScope) {
      customs.add(new Processor<Processor<PsiReference>>(){
        public boolean process(        Processor<PsiReference> processor){
          return processSingleRequest(primitive,processor);
        }
      }
);
    }
 else {
      final List<String> words=StringUtil.getWordsIn(primitive.word);
      final Set<IdIndexEntry> key=new HashSet<IdIndexEntry>(words.size() * 2);
      for (      String word : words) {
        key.add(new IdIndexEntry(word,primitive.caseSensitive));
      }
      singles.putValue(key,primitive);
    }
  }
  customs.addAll(request.getCustomSearchActions());
}
