{
  if (request instanceof PsiSearchRequest.SingleRequest) {
    return processSingleRequest((PsiSearchRequest.SingleRequest)request);
  }
 else   if (request instanceof PsiSearchRequest.CustomRequest) {
    return ((PsiSearchRequest.CustomRequest)request).searchAction.compute();
  }
 else   if (request instanceof PsiSearchRequest.ComplexRequest) {
    final MultiMap<Set<IdIndexEntry>,PsiSearchRequest.SingleRequest> singles=new MultiMap<Set<IdIndexEntry>,PsiSearchRequest.SingleRequest>();
    final List<PsiSearchRequest.CustomRequest> customs=new ArrayList<PsiSearchRequest.CustomRequest>();
    distributePrimitives((PsiSearchRequest.ComplexRequest)request,singles,customs);
    if (processRequestsOptimized(singles)) {
      for (      PsiSearchRequest.CustomRequest custom : customs) {
        if (!custom.searchAction.compute()) {
          return false;
        }
      }
      return true;
    }
    return false;
  }
 else {
    LOG.error("Unknown request: " + request);
    return true;
  }
}
