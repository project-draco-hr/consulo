{
  if (request instanceof PsiSearchRequest.SingleRequest) {
    return processSingleRequest((PsiSearchRequest.SingleRequest)request);
  }
 else   if (request instanceof PsiSearchRequest.CustomRequest) {
    ((PsiSearchRequest.CustomRequest)request).searchAction.run();
    return true;
  }
 else   if (request instanceof PsiSearchRequest.ComplexRequest) {
    final MultiMap<IdIndexEntry,PsiSearchRequest.SingleRequest> singles=new MultiMap<IdIndexEntry,PsiSearchRequest.SingleRequest>();
    final List<PsiSearchRequest.CustomRequest> customs=new ArrayList<PsiSearchRequest.CustomRequest>();
    distributePrimitives((PsiSearchRequest.ComplexRequest)request,singles,customs);
    if (processRequestsOptimized(singles)) {
      for (      PsiSearchRequest.CustomRequest custom : customs) {
        custom.searchAction.run();
      }
      return true;
    }
    return false;
  }
 else {
    LOG.error("Unknown request: " + request);
    return true;
  }
}
