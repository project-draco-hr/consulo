{
  VirtualFile[] selectedRoots=selectRoots(roots);
  for (  VirtualFile r : selectedRoots) {
    if (!vcs.hasEntry(r.getPath())) {
      vcs.createDirectory(r.getPath(),null);
    }
    updateRoot(vcs,r);
  }
  for (  Entry root : vcs.getRoots()) {
    boolean isDeleted=true;
    for (    VirtualFile selectedRoot : selectedRoots) {
      if (selectedRoot.getPath().equals(root.getPath().getPath())) {
        isDeleted=false;
        break;
      }
    }
    if (isDeleted)     vcs.delete(root.getPath().getPath());
  }
  vcs.apply();
}
