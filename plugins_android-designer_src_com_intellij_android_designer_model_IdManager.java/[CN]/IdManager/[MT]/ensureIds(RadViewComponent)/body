{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final List<Pair<Pair<String,String>,String>> replaceList=new ArrayList<Pair<Pair<String,String>,String>>();
      container.accept(new RadComponentVisitor(){
        @Override public void endVisit(        RadComponent component){
          RadViewComponent viewComponent=(RadViewComponent)component;
          String idValue=parseIdValue(viewComponent.getId());
          if (component == container) {
            createId(viewComponent);
          }
 else           if (idValue != null && myIdList.contains(idValue)) {
            createId(viewComponent);
            replaceList.add(new Pair<Pair<String,String>,String>(new Pair<String,String>("@id/" + idValue,"@+id/" + idValue),viewComponent.getId()));
          }
 else {
            addComponent(viewComponent);
          }
        }
      }
,true);
      if (!replaceList.isEmpty()) {
        container.accept(new RadComponentVisitor(){
          @Override public void endVisit(          RadComponent component){
            XmlTag tag=((RadViewComponent)component).getTag();
            for (            XmlAttribute attribute : tag.getAttributes()) {
              String value=attribute.getValue();
              for (              Pair<Pair<String,String>,String> replace : replaceList) {
                if (replace.first.first.equals(value) || replace.first.second.equals(value)) {
                  attribute.setValue(replace.second);
                  break;
                }
              }
            }
          }
        }
,true);
      }
    }
  }
);
}
