{
  changeFile_A_AndCommitInRemoteRepository();
  createAndCommitNewFileInLocalRepository();
  HgRevisionNumber parentBeforeUpdate=new HgWorkingCopyRevisionsCommand(myProject).parents(projectRepoVirtualFile).get(0);
  editFileInCommand(myProject,projectRepoVirtualFile.findFileByRelativePath("com/a.txt"),"modified file contents");
  assertUpdateThroughPluginFails();
  assertEquals(new HgHeadsCommand(myProject,projectRepoVirtualFile).execute().size(),2,"Remote head should have been pulled in");
  assertEquals(new HgWorkingCopyRevisionsCommand(myProject).parents(projectRepoVirtualFile).size(),1,"No merge should have been attempted");
  assertEquals(new HgWorkingCopyRevisionsCommand(myProject).parents(projectRepoVirtualFile).get(0),parentBeforeUpdate,"No merge should have been attempted");
}
