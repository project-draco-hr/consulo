{
  WebProjectGenerator generator=myCurrentGenerator;
  if (generator == null) {
    throw new RuntimeException("Current generator should be not-null");
  }
  WebProjectGenerator.GeneratorPeer peer=myGeneratorPeers.get(myCurrentGenerator);
  if (peer == null) {
    throw new RuntimeException("Peer should be not-null for " + myCurrentGenerator.getName());
  }
  Object settings=peer.getSettings();
  File dir=new File(myModuleBuilder.getModuleFileDirectory());
  VirtualFile moduleDir=LocalFileSystem.getInstance().findFileByIoFile(dir);
  if (moduleDir == null || !moduleDir.isValid()) {
    moduleDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(dir);
  }
  if (moduleDir != null && moduleDir.isValid()) {
    generator.generateProject(null,moduleDir,settings,null);
  }
}
