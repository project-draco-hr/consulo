{
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(false,true,false,false,false,false){
    @Override public void validateSelectedFiles(    VirtualFile[] files) throws Exception {
      if (files.length != 0) {
        final String selectedPath=files[0].getPath();
        boolean valid=isValidSdkHome(selectedPath);
        if (!valid) {
          valid=isValidSdkHome(adjustSelectedSdkHome(selectedPath));
          if (!valid) {
            String message=files[0].isDirectory() ? ProjectBundle.message("sdk.configure.home.invalid.error",getPresentableName()) : ProjectBundle.message("sdk.configure.home.file.invalid.error",getPresentableName());
            throw new Exception(message);
          }
        }
      }
    }
  }
;
  descriptor.setTitle(ProjectBundle.message("sdk.configure.home.title",getPresentableName()));
  return descriptor;
}
