{
  SVNURL url=getNotNullSelectedNode().getURL();
  File dir=selectFile("Destination directory","Select checkout destination directory");
  if (dir == null) {
    return;
  }
  Project p=myProject;
  CheckoutOptionsDialog dialog=new CheckoutOptionsDialog(p,url,dir,SvnUtil.getVirtualFile(dir.getAbsolutePath()));
  dialog.show();
  dir=dialog.getTarget();
  if (dialog.isOK()) {
    final SVNRevision revision;
    try {
      revision=dialog.getRevision();
    }
 catch (    ConfigurationException e) {
      Messages.showErrorDialog(SvnBundle.message("message.text.cannot.checkout",e.getMessage()),SvnBundle.message("message.title.check.out"));
      return;
    }
    SvnCheckoutProvider.doCheckout(myProject,dir,url.toString(),revision,dialog.isRecursive(),dialog.isIgnoreExternals(),listener);
  }
}
