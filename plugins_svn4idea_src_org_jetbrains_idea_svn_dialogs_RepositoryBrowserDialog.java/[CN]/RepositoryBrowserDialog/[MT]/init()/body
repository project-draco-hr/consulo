{
  super.init();
  SvnConfiguration config=SvnConfiguration.getInstance(myProject);
  Collection urls=config == null ? Collections.EMPTY_LIST : config.getCheckoutURLs();
  String lastURL=null;
  for (Iterator us=urls.iterator(); us.hasNext(); ) {
    String url=(String)us.next();
    myRepositoryBox.addItem(url);
    lastURL=url;
  }
  if (config != null && config.getLastSelectedCheckoutURL() != null) {
    lastURL=config.getLastSelectedCheckoutURL();
  }
  if (lastURL != null) {
    myRepositoryBox.getEditor().setItem(lastURL);
    myRepositoryBox.setSelectedItem(lastURL);
  }
 else {
    lastURL=(String)myRepositoryBox.getSelectedItem();
  }
  myRepositoryBox.getEditor().selectAll();
  if (urls.isEmpty()) {
    myRepositoryBrowser.setRepositoryURL(null,true);
  }
 else {
    myRepositoryBrowser.setRepositoryURL(lastURL,true);
    if (myRepositoryBrowser.getRootURL() != null) {
      myRepositoryBrowser.getPreferredFocusedComponent().requestFocus();
    }
  }
  myCopiedURL=null;
  myCopiedEntry=null;
  final JTextField editor=(JTextField)myRepositoryBox.getEditor().getEditorComponent();
  editor.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_ENTER) {
        myCopiedURL=null;
        myCopiedEntry=null;
        e.consume();
        String url=editor.getText();
        myRepositoryBrowser.setRepositoryURL(url,true);
        if (myRepositoryBrowser.getRootURL() != null) {
          myRepositoryBrowser.getPreferredFocusedComponent().requestFocus();
        }
      }
    }
  }
);
  myRepositoryBox.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED && !myIsDialogClosed) {
        myCopiedURL=null;
        myCopiedEntry=null;
        String url=(String)myRepositoryBox.getEditor().getItem();
        myRepositoryBrowser.setRepositoryURL(url,true);
        if (myRepositoryBrowser.getRootURL() != null) {
          SvnConfiguration.getInstance(myProject).addCheckoutURL(myRepositoryBrowser.getRootURL());
          myRepositoryBrowser.getPreferredFocusedComponent().requestFocus();
        }
      }
    }
  }
);
  myRepositoryBrowser.addChangeListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      updateState();
    }
  }
);
  updateState();
}
