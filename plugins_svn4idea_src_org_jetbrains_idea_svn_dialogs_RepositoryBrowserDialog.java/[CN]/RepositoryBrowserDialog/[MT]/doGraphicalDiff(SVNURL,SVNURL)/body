{
  SVNRepository sourceRepository=myVCS.createRepository(sourceURL.toString());
  sourceRepository.setCanceller(new SvnProgressCanceller());
  SvnDiffEditor diffEditor;
  final long rev;
  SVNRepository targetRepository=null;
  try {
    rev=sourceRepository.getLatestRevision();
    targetRepository=myVCS.createRepository(targetURL.toString());
    diffEditor=new SvnDiffEditor(sourceRepository,targetRepository,-1,false);
    final ISVNEditor cancellableEditor=SVNCancellableEditor.newInstance(diffEditor,new SvnProgressCanceller(),null);
    sourceRepository.diff(targetURL,rev,rev,null,true,true,false,new ISVNReporterBaton(){
      public void report(      ISVNReporter reporter) throws SVNException {
        reporter.setPath("",null,rev,false);
        reporter.finishReport();
      }
    }
,cancellableEditor);
  }
  finally {
    sourceRepository.closeSession();
    if (targetRepository != null) {
      targetRepository.closeSession();
    }
  }
  final String sourceTitle=SVNPathUtil.tail(sourceURL.toString());
  final String targetTitle=SVNPathUtil.tail(targetURL.toString());
  showDiffEditorResults(diffEditor.getChangesMap(),sourceTitle,targetTitle,sourceURL,targetURL,rev);
}
