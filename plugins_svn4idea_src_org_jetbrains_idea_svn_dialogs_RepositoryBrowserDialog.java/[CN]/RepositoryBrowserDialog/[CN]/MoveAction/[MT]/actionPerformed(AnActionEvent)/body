{
  Project p=e.getData(DataKeys.PROJECT);
  SVNURL root;
  RepositoryTreeNode node=getRepositoryBrowser().getSelectedNode();
  while (node.getSVNDirEntry() != null) {
    node=(RepositoryTreeNode)node.getParent();
  }
  root=node.getURL();
  CopyOptionsDialog dialog=new CopyOptionsDialog("Move or Rename",p,root,getRepositoryBrowser().getSelectedNode().getURL());
  dialog.show();
  if (dialog.isOK()) {
    SVNURL dst=dialog.getTargetURL();
    SVNURL src=dialog.getSourceURL();
    String message=dialog.getCommitMessage();
    doCopy(src,dst,true,message);
    node.reload();
  }
}
