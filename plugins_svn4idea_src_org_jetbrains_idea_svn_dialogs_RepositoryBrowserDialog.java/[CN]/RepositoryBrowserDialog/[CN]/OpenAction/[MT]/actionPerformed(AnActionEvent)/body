{
  RepositoryTreeNode node=getRepositoryBrowser().getSelectedNode();
  SVNURL url=node.getURL();
  Project p=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  final SvnFileRevision revision=new SvnFileRevision(myVCS,SVNRevision.UNDEFINED,SVNRevision.HEAD,url.toString(),null,null,null);
  try {
    revision.loadContent();
  }
 catch (  VcsException e1) {
    Messages.showErrorDialog("Cannot load file contents: " + e1.getMessage(),"Open File Error");
    return;
  }
  try {
    File tmpDir=new File(System.getProperty("java.io.tmpdir"));
    String name=node.getSVNDirEntry().getName().substring(0,node.getSVNDirEntry().getName().lastIndexOf('.'));
    String extension=node.getSVNDirEntry().getName().substring(node.getSVNDirEntry().getName().lastIndexOf('.') + 1);
    File f1=new File(tmpDir,name + " (r" + node.getSVNDirEntry().getRevision()+ ")."+ extension);
    if (!f1.exists()) {
      f1.createNewFile();
    }
    final VirtualFile vf=VirtualFileManager.getInstance().findFileByUrl("file://" + f1.getAbsolutePath().replace(File.separatorChar,'/'));
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        try {
          vf.setBinaryContent(revision.getContent());
        }
 catch (        IOException e1) {
        }
      }
    }
);
    FileEditorManager.getInstance(p).openFile(vf,true);
  }
 catch (  IOException e1) {
  }
}
