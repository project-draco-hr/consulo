{
  VirtualFile file=baseFile.getVirtualFile();
  if (file == null && baseFile.getOriginalFile() != null) {
    file=baseFile.getOriginalFile().getVirtualFile();
  }
  final Module moduleForFile=file != null ? ProjectRootManager.getInstance(baseFile.getProject()).getFileIndex().getModuleForFile(file) : null;
  final XmlFile schema=moduleForFile != null ? XmlSchemaProvider.findSchema(url,moduleForFile) : null;
  if (schema != null) {
    return schema;
  }
  final String location=getResourceLocation(url,version);
  return XmlUtil.findXmlFile(baseFile,location);
}
