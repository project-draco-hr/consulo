{
  String title=null;
  if (element == null || !element.isValid()) {
    title=null;
  }
 else   if (element instanceof PsiDirectory) {
    final PsiDirectory directory=(PsiDirectory)element;
    title=UsageViewUtil.getPackageName(directory,true);
  }
 else   if (element instanceof PsiFile) {
    final PsiFile file=(PsiFile)element;
    title=file.getVirtualFile().getPresentableUrl();
  }
 else   if (element instanceof PsiClass) {
    final PsiClass psiClass=(PsiClass)element;
    title=psiClass.getQualifiedName();
  }
 else   if (element instanceof PsiMethod) {
    final PsiMethod method=(PsiMethod)element;
    final PsiClass aClass=method.getContainingClass();
    title=aClass != null ? aClass.getQualifiedName() : method.toString();
  }
 else   if (element instanceof PsiField) {
    final PsiField field=(PsiField)element;
    final PsiClass aClass=field.getContainingClass();
    title=aClass != null ? aClass.getQualifiedName() : field.toString();
  }
 else {
    final PsiFile file=element.getContainingFile();
    title=file != null ? file.getVirtualFile().getPresentableUrl() : element.toString();
  }
  return title;
}
