{
  ModalTask task=new ModalTask(myProject,myHandler,myTitle){
    public void execute(    ProgressIndicator indicator){
      addListeners(this,indicator);
      GitHandlerUtil.runInCurrentThread(myHandler,indicator,false,myTitle);
    }
    @Override public void onSuccess(){
      if (!myHandler.errors().isEmpty()) {
        myResult.set(GitTaskResult.GIT_ERROR);
      }
 else {
        myResult.set(GitTaskResult.OK);
      }
    }
    @Override public void onCancel(){
      myResult.set(GitTaskResult.CANCELLED);
    }
  }
;
  ProgressManager.getInstance().run(task);
  return myResult.get();
}
