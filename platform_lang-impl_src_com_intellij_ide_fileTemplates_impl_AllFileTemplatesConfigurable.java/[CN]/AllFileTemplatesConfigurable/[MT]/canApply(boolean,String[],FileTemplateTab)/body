{
  final FileTemplate[] templates=myCurrentTab.getTemplates();
  ArrayList<String> allNames=new ArrayList<String>();
  FileTemplate itemWithError=null;
  String errorMessage=null;
  String errorTitle=null;
  boolean errorInName=true;
  for (  FileTemplate template : templates) {
    if (isInternalTemplateName(template.getName()))     continue;
    String currName=template.getName();
    String currExt=template.getExtension();
    if (currName.length() == 0) {
      itemWithError=template;
      errorMessage=IdeBundle.message("error.please.specify.a.name.for.this.template");
      errorTitle=IdeBundle.message("title.template.name.not.specified");
      errorString[0]=IdeBundle.message("error.please.specify.template.name");
      break;
    }
    if (allNames.contains(currName)) {
      itemWithError=template;
      errorMessage=IdeBundle.message("error.please.specify.a.different.name.for.this.template");
      errorTitle=IdeBundle.message("title.template.already.exists");
      errorString[0]=IdeBundle.message("error.template.with.such.name.already.exists");
      break;
    }
    if (currExt.length() == 0) {
      itemWithError=template;
      errorMessage=IdeBundle.message("error.please.specify.extension");
      errorTitle=IdeBundle.message("title.template.extension.not.specified");
      errorString[0]=IdeBundle.message("error.please.specify.template.extension");
      errorInName=false;
      break;
    }
    allNames.add(currName);
  }
  if (itemWithError == null) {
    return true;
  }
 else {
    final String _errorString=errorMessage;
    final String _errorTitle=errorTitle;
    final boolean _errorInName=errorInName;
    myTabbedPane.setSelectedIndex(Arrays.asList(myTabs).indexOf(list));
    selectTemplate(itemWithError);
    list.selectTemplate(itemWithError);
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        if (showErrorDialog) {
          Messages.showMessageDialog(myMainPanel,_errorString,_errorTitle,Messages.getErrorIcon());
        }
        if (_errorInName) {
          myEditor.focusToNameField();
        }
 else {
          myEditor.focusToExtensionField();
        }
      }
    }
);
    return false;
  }
}
