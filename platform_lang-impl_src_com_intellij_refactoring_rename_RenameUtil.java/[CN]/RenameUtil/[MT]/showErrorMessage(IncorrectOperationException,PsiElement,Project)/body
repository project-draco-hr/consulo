{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    throw new RuntimeException(e);
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      final String helpID=RenamePsiElementProcessor.forElement(element).getHelpID(element);
      String message=e.getMessage();
      if (StringUtil.isEmpty(message)) {
        message=RefactoringBundle.message("rename.not.supported");
      }
      CommonRefactoringUtil.showErrorMessage(RefactoringBundle.message("rename.title"),message,helpID,project);
    }
  }
);
}
