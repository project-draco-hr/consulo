{
  myContext.saveUiState();
  final DimensionService dimService=DimensionService.getInstance();
  Point storedLocation=dimService.getLocation(getDimensionKey(),myContext.getProject());
  Dimension storedSize=dimService.getSize(getDimensionKey(),myContext.getProject());
  final IdeFrame frame=WindowManager.getInstance().getIdeFrame(myContext.getProject());
  final Rectangle targetBounds=frame.suggestChildFrameBounds();
  if (storedLocation != null && storedSize != null) {
    targetBounds.setLocation(storedLocation);
    targetBounds.setSize(storedSize);
  }
  final ActionCallback result=new ActionCallback();
  if (storedLocation == null || storedSize == null) {
    if (myContents.size() > 0) {
      myContext.validate(myContents.getKeys().iterator().next(),new ActiveRunnable(){
        public ActionCallback run(){
          if (!myTabs.getComponent().isShowing()) {
            detachTo(targetBounds.getLocation(),targetBounds.getSize(),false,requestFocus).notifyWhenDone(result);
          }
 else {
            detachForShowingTabs(requestFocus).notifyWhenDone(result);
          }
          return new ActionCallback.Done();
        }
      }
);
      return result;
    }
  }
  detachTo(targetBounds.getLocation(),targetBounds.getSize(),false,requestFocus).notifyWhenDone(result);
  return result;
}
