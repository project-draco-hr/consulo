{
  Wrapper wrapper=new Wrapper(myTabs.getComponent());
  wrapper.setBorder(new EmptyBorder(1,0,0,0));
  final ComponentPopupBuilder builder=JBPopupFactory.getInstance().createComponentPopupBuilder(wrapper,myTabs.getComponent()).setTitle(myContainer.getSessionName()).setMovable(true).setRequestFocus(requestFocus).setFocusable(true).setResizable(true).setDimensionServiceKey(myContext.getProject(),getDimensionKey(),true).setCancelOnOtherWindowOpen(false).setCancelOnClickOutside(false).setCancelKeyEnabled(true).setLocateByContent(dragging).setLocateWithinScreenBounds(!dragging).setCancelKeyEnabled(false).setBelongsToGlobalPopupStack(false).setModalContext(false).setCancelCallback(new Computable<Boolean>(){
    public Boolean compute(){
      if (myDisposed || myContents.size() == 0)       return Boolean.TRUE;
      myRestoreFromDetach.restoreInGrid();
      myRestoreFromDetach=null;
      myContext.saveUiState();
      myTabs.updateTabActions(true);
      return Boolean.TRUE;
    }
  }
);
  return builder.createPopup();
}
