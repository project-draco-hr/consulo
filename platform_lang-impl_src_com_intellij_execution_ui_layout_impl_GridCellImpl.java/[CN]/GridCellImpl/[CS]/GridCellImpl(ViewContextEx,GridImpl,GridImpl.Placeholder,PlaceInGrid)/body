{
  myContext=context;
  myContainer=container;
  myPlaceInGrid=placeInGrid;
  myPlaceholder=placeholder;
  myTabs=new JBTabsImpl(myContext.getProject(),myContext.getActionManager(),myContext.getFocusManager(),container){
    @Override protected Color getFocusedTopFillColor(){
      return UIUtil.isUnderDarcula() ? ColorUtil.toAlpha(new Color(0x1E2533),100) : new Color(202,211,227);
    }
    @Override public boolean useSmallLabels(){
      return true;
    }
    @Override protected void paintBorder(    Graphics2D g2d,    ShapeInfo shape,    Color borderColor){
      if (UIUtil.isUnderDarcula()) {
        return;
      }
      super.paintBorder(g2d,shape,borderColor);
    }
    @Override protected Color getFocusedBottomFillColor(){
      return UIUtil.isUnderDarcula() ? new Color(0x1E2533) : new Color(0xc2cbdb);
    }
    @Override public Color getBackground(){
      return UIUtil.isUnderDarcula() ? new Color(0x27292A) : super.getBackground();
    }
    @Override public void processDropOver(    TabInfo over,    RelativePoint point){
      ((RunnerContentUi)myContext).myTabs.processDropOver(over,point);
    }
    @Override public Image startDropOver(    TabInfo tabInfo,    RelativePoint point){
      return ((RunnerContentUi)myContext).myTabs.startDropOver(tabInfo,point);
    }
    @Override public void resetDropOver(    TabInfo tabInfo){
      ((RunnerContentUi)myContext).myTabs.resetDropOver(tabInfo);
    }
  }
.setDataProvider(new DataProvider(){
    @Nullable public Object getData(    @NonNls final String dataId){
      if (ViewContext.CONTENT_KEY.is(dataId)) {
        TabInfo target=myTabs.getTargetInfo();
        if (target != null) {
          return new Content[]{getContentFor(target)};
        }
      }
 else       if (ViewContext.CONTEXT_KEY.is(dataId)) {
        return myContext;
      }
      return null;
    }
  }
);
  myTabs.getPresentation().setUiDecorator(new UiDecorator(){
    @NotNull public UiDecoration getDecoration(){
      return new UiDecoration(null,new Insets(1,-1,1,-1));
    }
  }
).setSideComponentVertical(!context.getLayoutSettings().isToolbarHorizontal()).setStealthTabMode(true).setFocusCycle(false).setPaintFocus(true).setProvideSwitchTargets(false).setTabDraggingEnabled(true).setSideComponentOnTabs(false);
  myTabs.addTabMouseListener(new MouseAdapter(){
    public void mousePressed(    final MouseEvent e){
      if (UIUtil.isCloseClick(e)) {
        closeOrMinimize(e);
      }
    }
  }
);
  rebuildPopupGroup();
  myTabs.addListener(new TabsListener.Adapter(){
    public void beforeSelectionChanged(    TabInfo oldSelection,    TabInfo newSelection){
      if (oldSelection != null && myContext.isStateBeingRestored()) {
        saveUiState();
      }
    }
    public void selectionChanged(    final TabInfo oldSelection,    final TabInfo newSelection){
      updateSelection(myTabs.getComponent().isShowing());
      if (!myTabs.getComponent().isShowing())       return;
      if (newSelection != null) {
        newSelection.stopAlerting();
      }
    }
  }
);
}
