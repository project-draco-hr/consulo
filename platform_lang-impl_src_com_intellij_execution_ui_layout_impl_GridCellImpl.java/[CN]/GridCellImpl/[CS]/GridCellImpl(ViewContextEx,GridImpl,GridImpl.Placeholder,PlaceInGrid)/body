{
  myContext=context;
  myContainer=container;
  Disposer.register(container,this);
  myPlaceInGrid=placeInGrid;
  myPlaceholder=placeholder;
  myTabs=new JBTabsImpl(myContext.getProject(),myContext.getActionManager(),myContext.getFocusManager(),container).setDataProvider(new DataProvider(){
    @Nullable public Object getData(    @NonNls final String dataId){
      if (ViewContext.CONTENT_KEY.is(dataId)) {
        TabInfo target=myTabs.getTargetInfo();
        if (target != null) {
          return new Content[]{getContentFor(target)};
        }
      }
 else       if (ViewContext.CONTEXT_KEY.is(dataId)) {
        return myContext;
      }
      return null;
    }
  }
);
  myTabs.getPresentation().setUiDecorator(new UiDecorator(){
    @NotNull public UiDecoration getDecoration(){
      return new UiDecoration(null,new Insets(1,-1,1,-1));
    }
  }
).setSideComponentVertical(!context.getLayoutSettings().isToolbarHorizontal()).setStealthTabMode(true).setFocusCycle(false).setPaintFocus(true);
  myTabs.addTabMouseListener(new MouseAdapter(){
    public void mousePressed(    final MouseEvent e){
      if (UIUtil.isCloseClick(e)) {
        if (isDetached()) {
          myPopup.cancel();
        }
 else {
          minimize(e);
        }
      }
    }
  }
);
  rebuildPopupGroup();
  myTabs.addListener(new TabsListener(){
    public void beforeSelectionChanged(    TabInfo oldSelection,    TabInfo newSelection){
      if (oldSelection != null && myContext.isStateBeingRestored()) {
        saveUiState();
      }
    }
    public void selectionChanged(    final TabInfo oldSelection,    final TabInfo newSelection){
      updateSelection(myTabs.getComponent().isShowing());
      if (!myTabs.getComponent().isShowing())       return;
      if (newSelection != null) {
        newSelection.stopAlerting();
      }
    }
  }
);
}
