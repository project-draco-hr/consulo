{
  if (psiElement instanceof PsiJavaPackage) {
    final PsiJavaPackage psiPackage=(PsiJavaPackage)psiElement;
    final PsiJavaPackage parentPackage=psiPackage.getParentPackage();
    return parentPackage != null ? parentPackage.getQualifiedName() : "";
  }
 else   if (psiElement instanceof PsiDirectory) {
    PsiJavaPackage aPackage=JavaDirectoryService.getInstance().getPackage((PsiDirectory)psiElement);
    return aPackage != null ? getTargetPackageNameForMovedElement(aPackage) : "";
  }
 else   if (psiElement != null) {
    PsiJavaPackage aPackage=JavaDirectoryService.getInstance().getPackage(psiElement.getContainingFile().getContainingDirectory());
    return aPackage != null ? aPackage.getQualifiedName() : "";
  }
 else {
    return null;
  }
}
