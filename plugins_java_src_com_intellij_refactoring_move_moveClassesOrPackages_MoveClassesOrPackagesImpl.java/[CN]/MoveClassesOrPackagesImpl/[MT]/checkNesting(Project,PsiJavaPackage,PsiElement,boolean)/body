{
  final PsiJavaPackage targetPackage=targetElement instanceof PsiJavaPackage ? (PsiJavaPackage)targetElement : targetElement instanceof PsiDirectory ? JavaDirectoryService.getInstance().getPackage((PsiDirectory)targetElement) : null;
  for (PsiJavaPackage curPackage=targetPackage; curPackage != null; curPackage=curPackage.getParentPackage()) {
    if (curPackage.equals(srcPackage)) {
      if (showError) {
        CommonRefactoringUtil.showErrorMessage(RefactoringBundle.message("move.title"),RefactoringBundle.message("cannot.move.package.into.itself"),HelpID.getMoveHelpID(srcPackage),project);
      }
      return false;
    }
  }
  return true;
}
