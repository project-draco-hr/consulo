{
  Runnable toRun;
synchronized (this) {
    if (isExecuted()) {
      if (myRunnables == null) {
        toRun=runnable;
      }
 else {
        CompositeRunnable composite=new CompositeRunnable(myRunnables);
        composite.add(runnable);
        toRun=composite;
        myRunnables=null;
      }
    }
 else {
      toRun=EmptyRunnable.getInstance();
      if (myRunnables == null) {
        myRunnables=new SmartList<Runnable>();
      }
      myRunnables.add(runnable);
    }
  }
  toRun.run();
}
