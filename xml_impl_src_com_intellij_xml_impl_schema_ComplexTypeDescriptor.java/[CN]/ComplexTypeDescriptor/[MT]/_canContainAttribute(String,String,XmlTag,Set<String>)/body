{
  if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"anyAttribute")) {
    String ns=tag.getAttributeValue("namespace");
    if (OTHER_NAMESPACE_ATTR_VALUE.equals(ns)) {
      return !namespace.equals(myDocumentDescriptor.getDefaultNamespace());
    }
    return true;
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"attributeGroup")) {
    String ref=tag.getAttributeValue(REF_ATTR_NAME);
    if (ref != null && !visited.contains(ref)) {
      visited.add(ref);
      XmlTag groupTag=myDocumentDescriptor.findAttributeGroup(ref);
      if (groupTag != null) {
        if (_canContainAttribute(name,namespace,groupTag,visited))         return true;
      }
    }
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"restriction") || XmlNSDescriptorImpl.equalsToSchemaName(tag,"extension")) {
    String base=tag.getAttributeValue("base");
    if (base != null && !visited.contains(base)) {
      visited.add(base);
      TypeDescriptor descriptor=myDocumentDescriptor.findTypeDescriptor(myDocumentDescriptor.getTag(),base);
      if (descriptor instanceof ComplexTypeDescriptor) {
        ComplexTypeDescriptor complexTypeDescriptor=(ComplexTypeDescriptor)descriptor;
        if (complexTypeDescriptor._canContainAttribute(name,namespace,complexTypeDescriptor.getDeclaration(),visited))         return true;
      }
    }
  }
  final XmlTag[] subTags=tag.getSubTags();
  for (  XmlTag subTag : subTags) {
    if (_canContainAttribute(name,namespace,subTag,visited))     return true;
  }
  return false;
}
