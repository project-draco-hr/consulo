{
  final GitVcsSettings settings=GitVcsSettings.getInstance(project);
  if (settings == null) {
    return getDefaultSaver(project,git,progressIndicator,stashMessage);
  }
switch (settings.updateChangesPolicy()) {
case STASH:
    return new GitStashChangesSaver(project,git,progressIndicator,stashMessage);
case SHELVE:
  return new GitShelveChangesSaver(project,git,progressIndicator,stashMessage);
}
return getDefaultSaver(project,git,progressIndicator,stashMessage);
}
