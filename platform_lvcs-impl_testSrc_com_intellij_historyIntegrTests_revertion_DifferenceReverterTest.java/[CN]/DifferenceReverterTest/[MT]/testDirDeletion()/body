{
  VirtualFile dir=root.createChildDirectory(this,"dir");
  VirtualFile subdir=dir.createChildDirectory(this,"subdir");
  VirtualFile f=subdir.createChildData(this,"foo.txt");
  f.setBinaryContent(new byte[]{123},-1,456);
  dir.delete(this);
  revertLastChange();
  dir=root.findChild("dir");
  subdir=dir.findChild("subdir");
  f=subdir.findChild("foo.txt");
  assertNotNull(f);
  assertEquals(123,f.contentsToByteArray()[0]);
  assertEquals(456,f.getTimeStamp());
}
