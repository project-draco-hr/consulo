{
  VirtualFile dir1=myRoot.createChildDirectory(this,"dir1");
  VirtualFile dir2=myRoot.createChildDirectory(this,"dir2");
  VirtualFile f=dir1.createChildData(this,"foo.txt");
  f.move(this,dir2);
  dir1.delete(this);
  dir2.delete(this);
  revertChange(2);
  dir1=myRoot.findChild("dir1");
  assertNotNull(dir1);
  assertNull(myRoot.findChild("dir2"));
  assertNotNull(dir1.findChild("foo.txt"));
}
