{
  VirtualFile f=myRoot.createChildData(this,"foo.txt");
  f.setBinaryContent(new byte[]{1},-1,1000);
  getVcs().beginChangeSet();
  f.rename(this,"bar.txt");
  f.setBinaryContent(new byte[]{2},-1,2000);
  getVcs().endChangeSet(null);
  myRoot.createChildDirectory(this,"foo.txt");
  revertChange(1,0,1);
  assertNull(myRoot.findChild("bar.txt"));
  f=myRoot.findChild("foo.txt");
  assertNotNull(f);
  assertFalse(f.isDirectory());
  assertEquals(1,f.contentsToByteArray()[0]);
  assertEquals(1000,f.getTimeStamp());
}
