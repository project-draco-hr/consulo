{
  VirtualFile dir=root.createChildDirectory(this,"dir");
  VirtualFile f=dir.createChildData(this,"foo.txt");
  f.setBinaryContent(new byte[]{1},-1,1000);
  f.setBinaryContent(new byte[]{2},-1,2000);
  dir.delete(this);
  revertChange(1);
  dir=root.findChild("dir");
  assertNotNull(dir);
  f=dir.findChild("foo.txt");
  assertNotNull(f);
  assertEquals(1,f.contentsToByteArray()[0]);
  assertEquals(1000,f.getTimeStamp());
}
