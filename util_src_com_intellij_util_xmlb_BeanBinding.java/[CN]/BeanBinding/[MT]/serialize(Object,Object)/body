{
  Element element=new Element(myTagName);
  for (  Binding binding : myPropertyBindingsList) {
    Accessor accessor=myPropertyBindings.get(binding);
    if (!filter.accepts(accessor,o))     continue;
    final Property property=XmlSerializerImpl.findAnnotation(accessor.getAnnotations(),Property.class);
    if (property != null) {
      try {
        if (!property.filter().newInstance().accepts(accessor,o))         continue;
      }
 catch (      InstantiationException e) {
        throw new XmlSerializationException(e);
      }
catch (      IllegalAccessException e) {
        throw new XmlSerializationException(e);
      }
    }
    Object node=binding.serialize(o,element);
    if (node != element) {
      if (node instanceof org.jdom.Attribute) {
        org.jdom.Attribute attr=(org.jdom.Attribute)node;
        element.setAttribute(attr.getName(),attr.getValue());
      }
 else {
        JDOMUtil.addContent(element,node);
      }
    }
  }
  return element;
}
