{
  if (expression instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)expression;
    final PsiExpression lhs=binaryExpression.getLOperand();
    buildConcatenationText(lhs,out);
    final PsiExpression rhs=binaryExpression.getROperand();
    if (rhs != null) {
      buildConcatenationText(rhs,out);
    }
  }
 else {
    final Object value=ExpressionUtils.computeConstantExpression(expression);
    if (value == null) {
      out.append('?');
    }
 else {
      out.append(value.toString());
    }
  }
}
