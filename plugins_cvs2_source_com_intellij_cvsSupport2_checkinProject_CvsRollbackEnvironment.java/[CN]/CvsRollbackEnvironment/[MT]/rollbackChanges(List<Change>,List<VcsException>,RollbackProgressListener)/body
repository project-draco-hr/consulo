{
  listener.determinate();
  CvsRollbacker rollbacker=new CvsRollbacker(myProject);
  for (  Change change : changes) {
    final FilePath filePath=ChangesUtil.getFilePath(change);
    listener.accept(change);
    VirtualFile parent=filePath.getVirtualFileParent();
    String name=filePath.getName();
    try {
switch (change.getType()) {
case DELETED:
        rollbacker.rollbackFileDeleting(parent,name);
      break;
case MODIFICATION:
    rollbacker.rollbackFileModifying(parent,name);
  break;
case MOVED:
rollbacker.rollbackFileCreating(parent,name);
break;
case NEW:
rollbacker.rollbackFileCreating(parent,name);
break;
}
}
 catch (IOException e) {
exceptions.add(new VcsException(e));
}
}
}
