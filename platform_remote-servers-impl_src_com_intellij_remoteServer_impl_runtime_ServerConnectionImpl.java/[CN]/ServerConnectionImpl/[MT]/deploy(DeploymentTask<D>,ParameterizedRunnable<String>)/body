{
  connectIfNeeded(new ConnectionCallbackBase<D>(){
    @Override public void connected(    @NotNull ServerRuntimeInstance<D> instance){
      DeploymentSource source=task.getSource();
      String deploymentName=instance.getDeploymentName(source);
      myLocalDeployments.put(deploymentName,new DeploymentImpl(deploymentName,DeploymentStatus.DEPLOYING,null,null));
      LoggingHandlerImpl handler=(LoggingHandlerImpl)task.getLoggingHandler();
      handler.printlnSystemMessage("Deploying '" + deploymentName + "'...");
      myLoggingHandlers.put(deploymentName,handler);
      onDeploymentStarted.run(deploymentName);
      instance.deploy(task,new DeploymentOperationCallbackImpl(deploymentName,(DeploymentTaskImpl<D>)task,handler));
    }
  }
);
}
