{
  boolean inXml=file.getLanguage() instanceof XMLLanguage || file.getViewProvider().getBaseLanguage() instanceof XMLLanguage;
  if (c == '=' && inXml) {
    int offset=editor.getCaretModel().getOffset();
    PsiElement at=file.findElementAt(offset - 1);
    PsiElement atParent=at != null ? at.getParent() : null;
    needToInsertQuotes=atParent instanceof XmlAttribute && ((XmlAttribute)atParent).getValueElement() == null;
  }
  return super.beforeCharTyped(c,project,editor,file,fileType);
}
