{
  PsiElement element=getPsiElement();
  if (element instanceof PsiPackage) {
    return new FindPackageUsagesDialog(element,getProject(),myFindPackageOptions,toShowInNewTab,mustOpenInNewTab,isSingleFile,handler);
  }
  if (element instanceof PsiClass) {
    return new FindClassUsagesDialog(element,getProject(),myFindClassOptions,toShowInNewTab,mustOpenInNewTab,isSingleFile,handler);
  }
  if (element instanceof PsiMethod) {
    return new FindMethodUsagesDialog(element,getProject(),myFindMethodOptions,toShowInNewTab,mustOpenInNewTab,isSingleFile,handler);
  }
  if (element instanceof PsiVariable) {
    return new FindVariableUsagesDialog(element,getProject(),myFindVariableOptions,toShowInNewTab,mustOpenInNewTab,isSingleFile,handler);
  }
  if (ThrowSearchUtil.isSearchable(element)) {
    return new FindThrowUsagesDialog(element,getProject(),myFindThrowOptions,toShowInNewTab,mustOpenInNewTab,isSingleFile,handler);
  }
  return super.getFindUsagesDialog(isSingleFile,toShowInNewTab,mustOpenInNewTab,handler);
}
