{
  PsiElement element=myRef.getElement();
  PsiFile containingFile=element == null ? null : element.getContainingFile();
  if (!(containingFile instanceof PsiJavaFile))   return;
  PsiJavaFile javaFile=(PsiJavaFile)containingFile;
  PsiImportList importList=javaFile.getImportList();
  PsiImportStatementBase[] importStatements=importList == null ? PsiImportStatementBase.EMPTY_ARRAY : importList.getAllImportStatements();
  Set<String> importedNames=new THashSet<String>(importStatements.length);
  for (  PsiImportStatementBase statement : importStatements) {
    PsiJavaCodeReferenceElement ref=statement.getImportReference();
    String name=ref == null ? null : ref.getReferenceName();
    if (name != null && ref.resolve() == null)     importedNames.add(name);
  }
  for (int i=list.size() - 1; i >= 0; i--) {
    PsiClass aClass=list.get(i);
    String className=aClass.getName();
    if (className != null && importedNames.contains(className)) {
      list.remove(i);
    }
  }
}
