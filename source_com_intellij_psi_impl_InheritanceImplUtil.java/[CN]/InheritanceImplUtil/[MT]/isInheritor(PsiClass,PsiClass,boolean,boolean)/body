{
  if (baseClass instanceof PsiAnonymousClass) {
    return false;
  }
  if (isInheritor(candidateClass,baseClass,checkDeep,null))   return true;
  if (checkEjb) {
    final EjbClassRole classRole=J2EERolesUtil.getEjbRole(candidateClass);
    if (classRole != null && candidateClass.getManager().areElementsEquivalent(candidateClass,classRole.getEjb().getEjbClass().getPsiClass())) {
      final Ejb ejb=classRole.getEjb();
      return !EjbUtil.visitEjbInterfaces(ejb,new J2EEElementsVisitor(){
        public boolean visitInterface(        PsiClass anInterface){
          return !InheritanceUtil.isInheritorOrSelf(anInterface,baseClass,checkDeep);
        }
      }
);
    }
  }
  return false;
}
