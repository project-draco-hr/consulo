{
  List<PsiElement> psiElements=new ArrayList<PsiElement>(nodes.length);
  for (  TreeNode node : nodes) {
    PsiElement psiElement=getPsiElement(node);
    if (psiElement != null) {
      psiElements.add(psiElement);
    }
  }
  if (psiElements.size() != 0) {
    return PsiUtilCore.toPsiElementArray(psiElements);
  }
 else {
    return BaseRefactoringAction.getPsiElementArray(DataManager.getInstance().getDataContext(myTree));
  }
}
