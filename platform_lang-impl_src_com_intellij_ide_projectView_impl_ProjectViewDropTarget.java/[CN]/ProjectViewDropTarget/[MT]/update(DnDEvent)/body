{
  final Object attached=aEvent.getAttachedObject();
  aEvent.setDropPossible(false,"");
  final int dropAction=aEvent.getAction().getActionId();
  final DropHandler dropHandler=getDropHandler(dropAction);
  final TreeNode[] sourceNodes=getSourceNodes(attached);
  final Point point=aEvent.getPoint();
  final TreeNode targetNode=getTargetNode(point);
  if (targetNode == null || (dropAction & DnDConstants.ACTION_COPY_OR_MOVE) == 0) {
    return false;
  }
 else   if (sourceNodes == null && !aEvent.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
    return false;
  }
 else   if (sourceNodes != null && !dropHandler.isValidSource(sourceNodes,targetNode)) {
    return false;
  }
  if (sourceNodes != null) {
    boolean redundant=true;
    for (    TreeNode sourceNode : sourceNodes) {
      if (!dropHandler.isDropRedundant(sourceNode,targetNode)) {
        redundant=false;
        break;
      }
    }
    if (redundant)     return false;
  }
  final Rectangle pathBounds=myTree.getPathBounds(myTree.getPathForLocation(point.x,point.y));
  aEvent.setHighlighting(new RelativeRectangle(myTree,pathBounds),DnDEvent.DropTargetHighlightingType.RECTANGLE);
  aEvent.setDropPossible(true,null);
  return false;
}
