{
  super.updateControls(removeParamsCb);
  if (myParameterIndex < 0)   return;
  final boolean writeUsageWouldBeReplaced=myHasWriteAccess && isReplaceAllOccurences();
  Runnable restartTemplateRunnable=new Runnable(){
    public void run(){
      final TemplateState templateState=TemplateManagerImpl.getTemplateState(myEditor);
      if (templateState != null) {
        PsiDocumentManager.getInstance(myProject).commitDocument(myEditor.getDocument());
        final PsiParameter parameter=getParameter();
        boolean hasFinalModifier=parameter.hasModifierProperty(PsiModifier.FINAL) && !writeUsageWouldBeReplaced;
        templateState.gotoEnd(true);
        startIntroduceTemplate(isReplaceAllOccurences(),hasFinalModifier);
      }
    }
  }
;
  CommandProcessor.getInstance().executeCommand(myProject,restartTemplateRunnable,IntroduceParameterHandler.REFACTORING_NAME,IntroduceParameterHandler.REFACTORING_NAME);
  if (myFinalCb != null) {
    if (writeUsageWouldBeReplaced) {
      myFinalCb.setSelected(false);
    }
    myFinalCb.setEnabled(!writeUsageWouldBeReplaced);
  }
}
