{
  final PsiElementFactory elementFactory=JavaPsiFacade.getElementFactory(myMethod.getProject());
  return ApplicationManager.getApplication().runWriteAction(new Computable<PsiParameter>(){
    @Override public PsiParameter compute(){
      final String name=getInputName() != null ? getInputName() : names[0];
      final PsiParameter anchor=JavaIntroduceParameterMethodUsagesProcessor.getAnchorParameter(myMethod);
      final PsiParameter psiParameter=(PsiParameter)myMethod.getParameterList().addAfter(elementFactory.createParameter(name,defaultType),anchor);
      PsiUtil.setModifierProperty(psiParameter,PsiModifier.FINAL,myPanel.hasFinalModifier());
      myParameterIndex=myMethod.getParameterList().getParameterIndex(psiParameter);
      return psiParameter;
    }
  }
);
}
