{
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      myTypeSelectorManager.setAllOccurences(replaceAllOccurrences);
      final PsiType defaultType=myTypeSelectorManager.getTypeSelector().getSelectedType();
      final String propName=myLocalVar != null ? JavaCodeStyleManager.getInstance(myProject).variableNameToPropertyName(myLocalVar.getName(),VariableKind.LOCAL_VARIABLE) : null;
      final String[] names=IntroduceParameterHandler.createNameSuggestionGenerator(myExpr,propName,myProject).getSuggestedNameInfo(defaultType).names;
      final PsiParameter parameter=createParameterToStartTemplateOn(names,defaultType);
      if (parameter != null) {
        myParameterIndex=myMethod.getParameterList().getParameterIndex(parameter);
        myEditor.getCaretModel().moveToOffset(parameter.getTextOffset());
        showBalloon();
        final LinkedHashSet<String> nameSuggestions=new LinkedHashSet<String>();
        nameSuggestions.add(parameter.getName());
        nameSuggestions.addAll(Arrays.asList(names));
        final VariableInplaceRenamer renamer=new ParameterInplaceIntroducer(parameter);
        renamer.performInplaceRename(false,nameSuggestions);
      }
    }
  }
,IntroduceParameterHandler.REFACTORING_NAME,null);
}
