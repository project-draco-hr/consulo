{
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      myTypeSelectorManager.setAllOccurences(replaceChoice != OccurrencesChooser.ReplaceChoice.NO);
      final PsiType defaultType=myTypeSelectorManager.getTypeSelector().getSelectedType();
      final String[] names=myNameSuggestionsGenerator.getSuggestedNameInfo(defaultType).names;
      final PsiParameter parameter=createParameterToStartTemplateOn(names,defaultType);
      if (parameter != null) {
        myEditor.getCaretModel().moveToOffset(parameter.getTextOffset());
        showSettingsPopup();
        final VariableInplaceRenamer renamer=new ParameterInplaceIntroducer(parameter,replaceChoice);
        renamer.performInplaceRename(false,new LinkedHashSet<String>(Arrays.asList(names)));
      }
    }
  }
,IntroduceParameterHandler.REFACTORING_NAME,null);
}
