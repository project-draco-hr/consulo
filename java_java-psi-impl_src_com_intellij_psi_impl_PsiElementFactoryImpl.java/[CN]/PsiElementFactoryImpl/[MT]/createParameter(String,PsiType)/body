{
  PsiUtil.checkIsIdentifier(myManager,name);
  if (PsiType.NULL.equals(type)) {
    throw new IncorrectOperationException("Cannot create parameter with type \"null\".");
  }
  final String text=StringUtil.join(type.getCanonicalText() + " " + name);
  PsiParameter parameter=createParameterFromText(text,null);
  final CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(myManager.getProject());
  PsiUtil.setModifierProperty(parameter,PsiModifier.FINAL,JavaCodeStyleSettingsFacade.getInstance(myManager.getProject()).isGenerateFinalParameters());
  GeneratedMarkerVisitor.markGenerated(parameter);
  parameter=(PsiParameter)JavaCodeStyleManager.getInstance(myManager.getProject()).shortenClassReferences(parameter);
  return (PsiParameter)codeStyleManager.reformat(parameter);
}
