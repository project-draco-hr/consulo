{
  myProject=project;
  uiSettings.addUISettingsListener(new UISettingsListener(){
    @Override public void uiSettingsChanged(    UISettings source){
      trimToSize();
    }
  }
,project);
  MessageBusConnection connection=project.getMessageBus().connect();
  connection.subscribe(FileEditorManagerListener.Before.FILE_EDITOR_MANAGER,new FileEditorManagerListener.Before.Adapter(){
    @Override public void beforeFileClosed(    @NotNull FileEditorManager source,    @NotNull VirtualFile file){
      updateHistoryEntry(file,false);
    }
  }
);
  connection.subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new MyEditorManagerListener());
}
