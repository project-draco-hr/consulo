{
  if (thisExpr.getQualifier() == null) {
    PsiClass qualifierClass=thisExpr.getCopyableUserData(THIS_QUALIFIER_CLASS_KEY);
    thisExpr.putCopyableUserData(THIS_QUALIFIER_CLASS_KEY,null);
    if (qualifierClass != null && qualifierClass.isValid()) {
      if (qualifierClass.equals(thisClass) && thisAccessExpr != null) {
        return thisExpr.replace(thisAccessExpr);
      }
    }
  }
 else {
    PsiClass qualifierClass=(PsiClass)thisExpr.getQualifier().resolve();
    if (qualifierClass != null) {
      if (qualifierClass.equals(thisClass) && thisAccessExpr != null) {
        return thisExpr.replace(thisAccessExpr);
      }
    }
  }
  return thisExpr;
}
