{
  final boolean onePath=patch.isDeletedFile() || patch.isNewFile() || Comparing.equal(patch.getAfterName(),patch.getBeforeName());
  final int size=onePath ? 1 : 2;
  myParts=new StripCapablePath[size];
  int cnt=0;
  if (patch.getAfterName() != null) {
    myAfterIdx=0;
    myParts[cnt]=new StripCapablePath(patch.getAfterName());
    ++cnt;
  }
 else {
    myAfterIdx=-1;
  }
  if (cnt < size) {
    myParts[cnt]=new StripCapablePath(patch.getBeforeName());
    myBeforeIdx=cnt;
  }
 else {
    myBeforeIdx=0;
  }
}
