{
  JScrollPane scrollPane=(JScrollPane)parent;
  vsbPolicy=scrollPane.getVerticalScrollBarPolicy();
  hsbPolicy=scrollPane.getHorizontalScrollBarPolicy();
  Insets insets=parent.getInsets();
  int minWidth=insets.left + insets.right;
  int minHeight=insets.top + insets.bottom;
  if (viewport != null) {
    Dimension size=viewport.getMinimumSize();
    minWidth+=size.width;
    minHeight+=size.height;
  }
  Border viewportBorder=scrollPane.getViewportBorder();
  if (viewportBorder != null) {
    Insets vpbInsets=viewportBorder.getBorderInsets(parent);
    minWidth+=vpbInsets.left + vpbInsets.right;
    minHeight+=vpbInsets.top + vpbInsets.bottom;
  }
  if ((rowHead != null) && rowHead.isVisible()) {
    Dimension size=rowHead.getMinimumSize();
    minWidth+=size.width;
    minHeight=Math.max(minHeight,size.height);
  }
  if ((colHead != null) && colHead.isVisible()) {
    Dimension size=colHead.getMinimumSize();
    minWidth=Math.max(minWidth,size.width);
    minHeight+=size.height;
  }
  if ((vsb != null) && (vsbPolicy != VERTICAL_SCROLLBAR_NEVER)) {
    Dimension size=vsb.getMinimumSize();
    minWidth+=size.width;
    minHeight=Math.max(minHeight,size.height);
  }
  if ((hsb != null) && (hsbPolicy != VERTICAL_SCROLLBAR_NEVER)) {
    Dimension size=hsb.getMinimumSize();
    minWidth=Math.max(minWidth,size.width);
    minHeight+=size.height;
  }
  return new Dimension(minWidth,minHeight);
}
