{
  ArrayList<StructureViewTreeElement> array=new ArrayList<StructureViewTreeElement>();
  final PsiClass aClass=getElement();
  if (aClass == null)   return array;
  List<PsiElement> children=Arrays.asList(aClass.getChildren());
  Collection<PsiElement> ownChildren=new THashSet<PsiElement>();
  ownChildren.addAll(Arrays.asList(aClass.getFields()));
  ownChildren.addAll(Arrays.asList(aClass.getMethods()));
  ownChildren.addAll(Arrays.asList(aClass.getInnerClasses()));
  ownChildren.addAll(Arrays.asList(aClass.getInitializers()));
  Collection<PsiElement> inherited=new LinkedHashSet<PsiElement>(children);
  aClass.processDeclarations(new AddAllMembersProcessor(inherited,aClass),ResolveState.initial(),null,aClass);
  for (  PsiElement child : inherited) {
    if (!child.isValid())     continue;
    boolean isInherited=!ownChildren.contains(child);
    if (child instanceof PsiClass) {
      array.add(new JavaClassTreeElement((PsiClass)child,isInherited));
    }
 else     if (child instanceof PsiField) {
      array.add(new PsiFieldTreeElement((PsiField)child,isInherited));
    }
 else     if (child instanceof PsiMethod) {
      array.add(new PsiMethodTreeElement((PsiMethod)child,isInherited));
    }
 else     if (child instanceof PsiClassInitializer) {
      array.add(new ClassInitializerTreeElement((PsiClassInitializer)child));
    }
  }
  return array;
}
