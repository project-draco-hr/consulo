{
  final VirtualFile sourceRoot=selectedTarget.getVirtualFile();
  for (int i=0; i < directories.length; i++) {
    PsiDirectory directory=directories[i];
    final PsiPackage parentPackage=directory.getPackage().getParentPackage();
    final PackageWrapper wrapper=new PackageWrapper(parentPackage);
    final PsiDirectory moveTarget=RefactoringUtil.createPackageDirectoryInSourceRoot(wrapper,sourceRoot);
    MoveClassesOrPackagesUtil.moveDirectoryRecursively(directory,moveTarget);
  }
}
