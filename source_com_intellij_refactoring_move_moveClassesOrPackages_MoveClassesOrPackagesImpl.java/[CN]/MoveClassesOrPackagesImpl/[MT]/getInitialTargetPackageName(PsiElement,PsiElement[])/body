{
  String name=getContainerPackageName(initialTargetElement);
  if (name == null) {
    if (movedElements != null) {
      name=getTargetPackageNameForMovedElement(movedElements[0]);
    }
    if (name == null) {
      final PsiDirectory commonDirectory=getCommonDirectory(movedElements);
      if (commonDirectory != null && commonDirectory.getPackage() != null) {
        name=commonDirectory.getPackage().getQualifiedName();
      }
    }
  }
  if (name == null) {
    name="";
  }
  return name;
}
