{
  final PsiClass throwableClass=PsiManager.getInstance(myProject).findClass("java.lang.Throwable",GlobalSearchScope.allScope(myProject));
  TreeClassChooser chooser=TreeClassChooserFactory.getInstance(myProject).createInheritanceClassChooser(DebuggerBundle.message("add.exception.breakpoint.classchooser.title"),GlobalSearchScope.allScope(myProject),throwableClass,true,true,null);
  chooser.showDialog();
  PsiClass selectedClass=chooser.getSelectedClass();
  String qName=(selectedClass != null) ? JVMNameUtil.getNonAnonymousClassName(selectedClass) : null;
  if (qName != null && qName.length() > 0) {
    ExceptionBreakpoint breakpoint=DebuggerManagerEx.getInstanceEx(myProject).getBreakpointManager().addExceptionBreakpoint(qName,((PsiJavaFile)selectedClass.getContainingFile()).getPackageName());
    getPanel().addBreakpoint(breakpoint);
  }
}
