{
  InspectionTool[] tools=profile.getInspectionTools();
  LOG.assertTrue(tools != null,"Profile was not correctly init");
  for (Iterator<String> iterator=myDisplayLevelMap.keySet().iterator(); iterator.hasNext(); ) {
    final String shortName=iterator.next();
    HighlightDisplayLevel level=myDisplayLevelMap.get(shortName);
    HighlightDisplayKey key=HighlightDisplayKey.find(shortName);
    if (key == null) {
      key=HighlightDisplayKey.register(shortName);
    }
    if (level != HighlightDisplayLevel.DO_NOT_SHOW) {
      profile.enableTool(shortName);
    }
    if (level == null || level == HighlightDisplayLevel.DO_NOT_SHOW) {
      level=HighlightDisplayLevel.WARNING;
    }
    profile.setErrorLevel(key,level);
  }
}
