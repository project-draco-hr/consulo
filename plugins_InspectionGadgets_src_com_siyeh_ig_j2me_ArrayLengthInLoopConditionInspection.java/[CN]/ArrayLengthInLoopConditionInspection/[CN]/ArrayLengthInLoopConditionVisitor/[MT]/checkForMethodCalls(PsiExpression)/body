{
  final PsiRecursiveElementVisitor visitor=new PsiRecursiveElementVisitor(){
    public void visitReferenceExpression(    PsiReferenceExpression expression){
      super.visitReferenceExpression(expression);
      final String name=expression.getReferenceName();
      if (!"length".equals(name)) {
        return;
      }
      final PsiExpression qualifier=expression.getQualifierExpression();
      if (qualifier == null) {
        return;
      }
      final PsiType type=qualifier.getType();
      if (!(type instanceof PsiArrayType)) {
        return;
      }
      final PsiElement lengthElement=expression.getReferenceNameElement();
      registerError(lengthElement);
    }
  }
;
  condition.accept(visitor);
}
