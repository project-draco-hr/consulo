{
  DefaultMutableTreeNode root=new DefaultMutableTreeNode();
  final JTree tree=new Tree(new DefaultTreeModel(root)){
    protected void paintComponent(    Graphics g){
      DuplicateNodeRenderer.paintDuplicateNodesBackground(g,this);
      super.paintComponent(g);
    }
  }
;
  tree.setOpaque(false);
  tree.setToggleClickCount(-1);
  SliceUsageCellRenderer renderer=new SliceUsageCellRenderer();
  renderer.setOpaque(false);
  tree.setCellRenderer(renderer);
  UIUtil.setLineStyleAngled(tree);
  tree.setRootVisible(true);
  tree.setShowsRootHandles(true);
  tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  tree.setSelectionPath(new TreePath(root.getPath()));
  EditSourceOnDoubleClickHandler.install(tree);
  new TreeSpeedSearch(tree);
  TreeUtil.installActions(tree);
  TreeToolTipHandler.install(tree);
  ToolTipManager.sharedInstance().registerComponent(tree);
  myAutoScrollToSourceHandler.install(tree);
  tree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    final TreeSelectionEvent e){
      treeSelectionChanged();
    }
  }
);
  return tree;
}
