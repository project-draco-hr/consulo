{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  List<Library> addedLibraries=new ArrayList<Library>(model.myLibraries);
  addedLibraries.removeAll(myModel.myLibraries);
  List<Library> removedLibraries=new ArrayList<Library>(myModel.myLibraries);
  removedLibraries.removeAll(model.myLibraries);
  for (  Library library : removedLibraries) {
    fireBeforeLibraryRemoved(library);
  }
  myModel=model;
  for (  Library library : removedLibraries) {
    library.dispose();
    fireAfterLibraryRemoved(library);
  }
  for (  Library library : addedLibraries) {
    fireLibraryAdded(library);
  }
}
