{
  final VirtualFile virtualFile=handler.getFile().getVirtualFile();
  if (virtualFile != null && !virtualFile.isWritable()) {
    throw new ReadOnlyDeploymentDescriptorModificationException(virtualFile);
  }
  final Class type=myClassGetter.fun(args);
  final DomElement domElement=handler.addChild(myTagName,type,myIndexGetter.fun(args));
  handler.getManager().getClassChooser(myType).distinguishTag(domElement.getXmlTag(),DomUtil.getRawType(type));
  return domElement;
}
