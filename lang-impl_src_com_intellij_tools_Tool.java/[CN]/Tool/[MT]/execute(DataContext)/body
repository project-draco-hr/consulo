{
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return;
  }
  FileDocumentManager.getInstance().saveAllDocuments();
  try {
    if (isUseConsole()) {
      RunStrategy.getInstance().executeDefault(new ToolRunProfile(this,dataContext),dataContext);
    }
 else {
      GeneralCommandLine commandLine=createCommandLine(dataContext);
      if (commandLine == null) {
        return;
      }
      OSProcessHandler handler=new OSProcessHandler(commandLine.createProcess(),commandLine.getCommandLineString());
      handler.addProcessListener(new ToolProcessAdapter(project,synchronizeAfterExecution(),getName()));
      handler.startNotify();
    }
  }
 catch (  ExecutionException ex) {
    ExecutionErrorDialog.show(ex,ToolsBundle.message("tools.process.start.error"),project);
  }
}
