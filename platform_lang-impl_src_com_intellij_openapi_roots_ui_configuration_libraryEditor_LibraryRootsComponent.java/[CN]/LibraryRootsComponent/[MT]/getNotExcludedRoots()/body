{
  Set<VirtualFile> roots=new LinkedHashSet<VirtualFile>();
  String[] excludedRootUrls=getLibraryEditor().getExcludedRootUrls();
  Set<VirtualFile> excludedRoots=new HashSet<VirtualFile>();
  for (  String url : excludedRootUrls) {
    ContainerUtil.addIfNotNull(excludedRoots,VirtualFileManager.getInstance().findFileByUrl(url));
  }
  for (  PersistentOrderRootType type : OrderRootType.getAllPersistentTypes()) {
    VirtualFile[] files=getLibraryEditor().getFiles(type);
    for (    VirtualFile file : files) {
      if (!VfsUtilCore.isUnder(file,excludedRoots)) {
        roots.add(PathUtil.getLocalFile(file));
      }
    }
  }
  return roots;
}
