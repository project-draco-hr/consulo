{
  final String[] pieces=RelativePathCalculator.split(path);
  for (int i=0; i < pieces.length; i++) {
    final String piece=pieces[i];
    if ("".equals(piece) || ".".equals(piece)) {
      continue;
    }
    if ("..".equals(piece)) {
      final boolean upResult=merger.up();
      if (!upResult)       return null;
      continue;
    }
    final boolean downResult=merger.down(piece);
    if (!downResult) {
      if (tail != null) {
        for (int j=i; j < pieces.length; j++) {
          final String pieceInner=pieces[j];
          tail.add(pieceInner);
        }
      }
      return merger.getResult();
    }
  }
  return merger.getResult();
}
