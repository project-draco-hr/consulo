{
  final Language fileLanguage=file.getLanguage();
  final FormattingModelBuilder builder=fileLanguage.getFormattingModelBuilder();
  if (builder != null) {
    final CodeStyleSettings settings=getSettings();
    final CodeStyleSettings.IndentOptions indentOptions=settings.getIndentOptions(file.getFileType());
    final FormattingModel model=builder.createModel(file,settings);
    FormatterEx.getInstanceEx().adjustLineIndentsForRange(model,settings,indentOptions,rangeToAdjust);
  }
}
