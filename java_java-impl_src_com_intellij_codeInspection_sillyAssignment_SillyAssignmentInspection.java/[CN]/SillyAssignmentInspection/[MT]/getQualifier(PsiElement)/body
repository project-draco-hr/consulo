{
  if (qualifier instanceof PsiThisExpression) {
    final PsiJavaCodeReferenceElement thisQualifier=((PsiThisExpression)qualifier).getQualifier();
    if (thisQualifier != null) {
      final PsiClass innerMostClass=PsiTreeUtil.getParentOfType(thisQualifier,PsiClass.class);
      if (innerMostClass == thisQualifier.resolve()) {
        return null;
      }
    }
    return thisQualifier;
  }
 else   if (qualifier != null) {
    return ((PsiSuperExpression)qualifier).getQualifier();
  }
  return null;
}
