{
  myMessageLabel.setIcon(null);
  myConfigureButton.setVisible(true);
  myDownloadRadioButton.setEnabled(mySettings.getDownloadSettings() != null);
  if (!myDownloadRadioButton.isEnabled() && myDownloadRadioButton.isSelected() && myUseLibraryRadioButton.isVisible()) {
    myUseLibraryRadioButton.setSelected(true);
  }
  String message="";
  boolean showConfigurePanel=true;
switch (myButtonEnumModel.getSelected()) {
case DOWNLOAD:
    message=getDownloadFilesMessage();
  break;
case USE_LIBRARY:
final Object item=myExistingLibraryComboBox.getSelectedItem();
if (item == null) {
myMessageLabel.setIcon(AllIcons.RunConfigurations.ConfigurationWarning);
message="<b>Error:</b> library is not specified";
myConfigureButton.setVisible(false);
}
 else if (item instanceof NewLibraryEditor) {
final LibraryEditor libraryEditor=(LibraryEditor)item;
message=IdeBundle.message("label.library.will.be.created.description.text",mySettings.getNewLibraryLevel(),libraryEditor.getName(),libraryEditor.getFiles(OrderRootType.CLASSES).length);
}
 else {
message=MessageFormat.format("<b>{0}</b> library will be used",((ExistingLibraryEditor)item).getName());
}
break;
default :
showConfigurePanel=false;
}
if (mySettings.getDownloadSettings() != null) {
myHiddenLabel.setText(getDownloadFilesMessage());
}
 else {
myHiddenLabel.setText(IdeBundle.message("label.library.will.be.created.description.text",mySettings.getNewLibraryLevel(),"name",10));
}
((CardLayout)myConfigurationPanel.getLayout()).show(myConfigurationPanel,showConfigurePanel ? "configure" : "empty");
myMessageLabel.setText("<html>" + message + "</html>");
}
