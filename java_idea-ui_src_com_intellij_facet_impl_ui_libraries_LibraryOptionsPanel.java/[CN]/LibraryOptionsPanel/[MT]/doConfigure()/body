{
switch (myButtonEnumModel.getSelected()) {
case DOWNLOAD:
    new DownloadingOptionsDialog(myPanel,mySettings.getDownloadSettings()).show();
  break;
case USE_LIBRARY:
final Object item=myExistingLibraryComboBox.getSelectedItem();
if (item instanceof LibraryEditor) {
EditLibraryDialog dialog=new EditLibraryDialog(myPanel,mySettings,(LibraryEditor)item);
dialog.show();
if (item instanceof ExistingLibraryEditor) {
  new WriteAction(){
    protected void run(    final Result result){
      ((ExistingLibraryEditor)item).commit();
    }
  }
.execute();
}
}
break;
default :
break;
}
updateState();
}
