{
  IndexingContext c=addContext("virtual",myIndexDir,null,null);
  createProjectPom("");
  ArtifactInfo ai=new ArtifactInfo(c.getRepositoryId(),"group","id","version",null);
  ArtifactContext a=new ArtifactContext(new File(myProjectPom.getPath()),null,null,ai,null);
  Maven2ServerIndexerImpl.addArtifact(myIndexer,c,a);
  Query q=new TermQuery(new Term(ArtifactInfo.GROUP_ID,"group"));
  FlatSearchRequest request=new FlatSearchRequest(q,ArtifactInfo.VERSION_COMPARATOR);
  FlatSearchResponse response=myIndexer.searchFlat(request);
  Set<ArtifactInfo> result=response.getResults();
  assertSize(1,result);
  ArtifactInfo found=new ArrayList<ArtifactInfo>(result).get(0);
  assertEquals("group",found.groupId);
  assertEquals("id",found.artifactId);
  assertEquals("version",found.version);
  IndexReader r=c.getIndexReader();
  for (int i=0; i < r.numDocs(); i++) {
    Document d=r.document(i);
  }
}
