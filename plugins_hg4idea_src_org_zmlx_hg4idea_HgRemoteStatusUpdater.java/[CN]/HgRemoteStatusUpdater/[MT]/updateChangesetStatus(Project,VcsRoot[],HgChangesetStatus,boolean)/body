{
  final List<HgRevisionNumber> changesets=new LinkedList<HgRevisionNumber>();
  for (  VcsRoot root : roots) {
    if (incoming) {
      changesets.addAll(new HgIncomingCommand(project).execute(root.path));
    }
 else {
      changesets.addAll(new HgOutgoingCommand(project).execute(root.path));
    }
  }
  status.setChanges(changesets.size(),new ChangesetFormatter(status,changesets));
}
