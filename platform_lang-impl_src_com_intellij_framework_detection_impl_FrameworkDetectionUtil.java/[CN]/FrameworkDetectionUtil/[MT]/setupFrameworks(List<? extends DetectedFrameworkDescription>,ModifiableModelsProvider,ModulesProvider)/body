{
  AccessToken token=WriteAction.start();
  try {
    List<DetectedFrameworkDescription> sortedDescriptions=new ArrayList<DetectedFrameworkDescription>();
    for (    DetectedFrameworkDescription description : descriptions) {
      if (description.getDetector().getUnderlyingFrameworkType() == null) {
        sortedDescriptions.add(description);
      }
    }
    for (    DetectedFrameworkDescription description : descriptions) {
      if (description.getDetector().getUnderlyingFrameworkType() != null) {
        sortedDescriptions.add(description);
      }
    }
    for (    DetectedFrameworkDescription description : sortedDescriptions) {
      description.setupFramework(modelsProvider,modulesProvider);
    }
  }
  finally {
    token.finish();
  }
}
