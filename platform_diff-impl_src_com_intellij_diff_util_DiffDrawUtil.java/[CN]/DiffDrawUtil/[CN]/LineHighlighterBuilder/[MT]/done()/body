{
  boolean isEmptyRange=startLine == endLine;
  boolean isLastLine=endLine == getLineCount(editor.getDocument());
  TextRange offsets=DiffUtil.getLinesRange(editor.getDocument(),startLine,endLine);
  int start=offsets.getStartOffset();
  int end=offsets.getEndOffset();
  TextAttributes attributes=isEmptyRange || resolved ? null : getTextAttributes(type,editor,ignored);
  TextAttributes stripeAttributes=isEmptyRange || resolved ? null : getStripeTextAttributes(type,editor);
  RangeHighlighter highlighter=editor.getMarkupModel().addRangeHighlighter(start,end,DEFAULT_LAYER,attributes,HighlighterTargetArea.LINES_IN_RANGE);
  highlighter.setLineMarkerRenderer(new DiffLineMarkerRenderer(highlighter,type,ignored,resolved,hideWithoutLineNumbers,isEmptyRange,isLastLine));
  if (stripeAttributes == null)   return Collections.singletonList(highlighter);
  RangeHighlighter stripeHighlighter=editor.getMarkupModel().addRangeHighlighter(start,end,STRIPE_LAYER,stripeAttributes,HighlighterTargetArea.LINES_IN_RANGE);
  return ContainerUtil.list(highlighter,stripeHighlighter);
}
