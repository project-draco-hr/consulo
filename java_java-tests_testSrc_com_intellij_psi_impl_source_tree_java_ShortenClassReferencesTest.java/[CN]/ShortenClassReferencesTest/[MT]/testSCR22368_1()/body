{
  final PsiElementFactory factory=myJavaFacade.getElementFactory();
  final PsiClass aClass=factory.createClass("X");
  final PsiMethod methodFromText=factory.createMethodFromText("void method() {\n" + "    IntelliJIDEARulezz<\n" + "}",null);
  final PsiMethod method=(PsiMethod)aClass.add(methodFromText);
  final PsiDeclarationStatement declarationStatement=(PsiDeclarationStatement)method.getBody().getStatements()[0];
  final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)declarationStatement.getFirstChild().getFirstChild();
  final PsiClass javaUtilListClass=myJavaFacade.findClass(CommonClassNames.JAVA_UTIL_LIST,GlobalSearchScope.allScope(myPsiManager.getProject()));
  assertNotNull(javaUtilListClass);
  final PsiElement resultingElement=referenceElement.bindToElement(javaUtilListClass);
  assertEquals("List<",resultingElement.getText());
  assertEquals("void method() {\n" + "    List<\n" + "}",method.getText());
}
