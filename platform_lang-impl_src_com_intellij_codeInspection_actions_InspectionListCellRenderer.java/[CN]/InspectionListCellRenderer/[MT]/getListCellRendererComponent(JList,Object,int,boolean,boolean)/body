{
  final JPanel panel=new JPanel(new BorderLayout());
  panel.setOpaque(true);
  final Color bg=sel ? UIUtil.getListSelectionBackground() : UIUtil.getListBackground();
  final Color fg=sel ? UIUtil.getListSelectionForeground() : UIUtil.getListForeground();
  panel.setBackground(bg);
  panel.setForeground(fg);
  SimpleTextAttributes attr=sel ? SELECTED : PLAIN;
  if (value instanceof InspectionProfileEntry) {
    final InspectionProfileEntry tool=(InspectionProfileEntry)value;
    final SimpleColoredComponent c=new SimpleColoredComponent();
    SpeedSearchUtil.appendColoredFragmentForMatcher("  " + tool.getDisplayName(),c,attr,myMatcher,bg,sel);
    panel.add(c,BorderLayout.WEST);
    final SimpleColoredComponent group=new SimpleColoredComponent();
    SpeedSearchUtil.appendColoredFragmentForMatcher(tool.getGroupDisplayName() + "  ",group,attr,myMatcher,bg,sel);
    final JPanel right=new JPanel(new BorderLayout());
    right.setBackground(bg);
    right.setForeground(fg);
    right.add(group,BorderLayout.CENTER);
    final JLabel icon=new JLabel(getIcon(tool));
    icon.setBackground(bg);
    icon.setForeground(fg);
    right.add(icon,BorderLayout.EAST);
    panel.add(right,BorderLayout.EAST);
  }
 else {
    return value == ChooseByNameBase.NON_PREFIX_SEPARATOR ? ChooseByNameBase.renderNonPrefixSeparatorComponent(UIUtil.getListBackground()) : super.getListCellRendererComponent(list,value,index,sel,focus);
  }
  return panel;
}
