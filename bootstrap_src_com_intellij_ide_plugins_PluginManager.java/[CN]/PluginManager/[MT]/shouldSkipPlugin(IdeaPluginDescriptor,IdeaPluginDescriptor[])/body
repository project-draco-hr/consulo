{
  final String idString=descriptor.getPluginId().getIdString();
  if (idString.equals(CORE_PLUGIN_ID)) {
    return false;
  }
  final String pluginId=System.getProperty("idea.load.plugins.id");
  if (pluginId == null) {
    if (descriptor instanceof IdeaPluginDescriptorImpl && !((IdeaPluginDescriptorImpl)descriptor).isEnabled())     return true;
    if (!shouldLoadPlugins())     return true;
  }
  boolean shouldLoad;
  final String loadPluginCategory=System.getProperty("idea.load.plugins.category");
  if (loadPluginCategory != null) {
    shouldLoad=loadPluginCategory.equals(descriptor.getCategory());
  }
 else {
    if (pluginId != null) {
      shouldLoad=pluginId.equals(idString);
      if (!shouldLoad) {
        for (        IdeaPluginDescriptor plugin : loaded) {
          if (plugin.getPluginId().getIdString().equals(pluginId)) {
            for (            PluginId id : plugin.getDependentPluginIds()) {
              if (id.equals(descriptor.getPluginId())) {
                shouldLoad=true;
                break;
              }
            }
            break;
          }
        }
      }
    }
 else {
      shouldLoad=!getDisabledPlugins().contains(idString);
    }
    if (shouldLoad && descriptor instanceof IdeaPluginDescriptorImpl) {
      if (isIncompatible(descriptor))       return true;
    }
  }
  return !shouldLoad;
}
