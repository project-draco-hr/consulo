{
  PsiClass aClass=resolved.getContainingClass();
  if (aClass != null && !PsiUtil.isAccessible(aClass,element,null)) {
    final PsiElement qualifier=((PsiJavaCodeReferenceElement)element.getParent()).getQualifier();
    if (qualifier instanceof PsiReferenceExpression) {
      final PsiElement qResolved=((PsiReferenceExpression)qualifier).resolve();
      if (qResolved instanceof PsiVariable) {
        aClass=PsiUtil.resolveClassInClassTypeOnly(((PsiVariable)qResolved).getType());
      }
    }
  }
  return aClass;
}
