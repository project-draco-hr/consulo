{
  vcs.createFile("file",b("old"),123L);
  Clock.setCurrentTimestamp(456);
  gateway.addUnsavedDocument("file","new");
  l.startAction(null);
  assertEquals(c("new"),vcs.getEntry("file").getContent());
  assertEquals(456L,vcs.getEntry("file").getTimestamp());
  assertEquals(2,vcs.getRevisionsFor("file").size());
}
