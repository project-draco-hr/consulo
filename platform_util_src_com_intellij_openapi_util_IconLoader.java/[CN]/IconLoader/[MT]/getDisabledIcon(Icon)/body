{
  if (icon == null) {
    return null;
  }
  Icon disabledIcon=ourIcon2DisabledIcon.get(icon);
  if (disabledIcon == null) {
    if (!isGoodSize(icon)) {
      LOG.error(icon);
      return EMPTY_ICON;
    }
    final BufferedImage image=new BufferedImage(icon.getIconWidth(),icon.getIconHeight(),BufferedImage.TYPE_INT_ARGB);
    final Graphics2D graphics=image.createGraphics();
    graphics.setColor(UIUtil.TRANSPARENT_COLOR);
    graphics.fillRect(0,0,icon.getIconWidth(),icon.getIconHeight());
    icon.paintIcon(ourFakeComponent,graphics,0,0);
    graphics.dispose();
    disabledIcon=new MyImageIcon(GrayFilter.createDisabledImage(image));
    ourIcon2DisabledIcon.put(icon,disabledIcon);
  }
  return disabledIcon;
}
