{
  final MyElement rootElement=createDomFile("a.xml","<root xmlns:xi=\"http://www.w3.org/2001/XInclude\">" + "<xi:include href=\"b.xml\" xpointer=\"xpointer(/xxx/*)\"/>" + "<child xxx=\"a\"/>"+ "</root>");
  createFile("b.xml","<xxx><child xxx=\"b\"/></xxx>");
  final List<DomIncludesTest.Child> children=rootElement.getChildren();
  Consumer<MyElement> consumer1=new Consumer<MyElement>(){
    @Override public void consume(    final MyElement element){
      assertFalse(element.getXmlElement().isPhysical());
      assertEquals(rootElement,element.getParent());
      assertEquals(DomUtil.getFileElement(rootElement),DomUtil.getFileElement(element));
      assertEquals("b",element.getXxx().getValue());
    }
  }
;
  Consumer<MyElement> consumer2=new Consumer<MyElement>(){
    @Override public void consume(    final MyElement element){
      assertTrue(element.getXmlElement().isPhysical());
      assertEquals(rootElement,element.getParent());
      assertEquals(DomUtil.getFileElement(rootElement),DomUtil.getFileElement(element));
      assertEquals("a",element.getXxx().getValue());
    }
  }
;
  assertOrderedCollection(children,new Consumer[]{consumer1,consumer2});
}
