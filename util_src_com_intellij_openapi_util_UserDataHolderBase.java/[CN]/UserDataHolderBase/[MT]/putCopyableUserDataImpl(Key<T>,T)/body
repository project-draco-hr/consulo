{
synchronized (USER_MAP_LOCK) {
    HashMap<Key,Object> map=getUserData(COPYABLE_USER_MAP_KEY);
    if (map == null) {
      if (value == null)       return;
      map=new HashMap<Key,Object>(4);
      putUserData(COPYABLE_USER_MAP_KEY,map);
    }
    if (value != null) {
      map.put(key,value);
    }
 else {
      map.remove(key);
      if (map.size() == 0) {
        putUserData(COPYABLE_USER_MAP_KEY,null);
      }
    }
  }
}
