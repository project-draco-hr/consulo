{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("navigation.popup.symbol");
  final Project project=e.getData(DataKeys.PROJECT);
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiElement context=e.getData(DataKeys.PSI_FILE);
  final ChooseByNamePopup popup=ChooseByNamePopup.createPopup(project,new GotoSymbolModel2(project),context);
  popup.invoke(new ChooseByNamePopupComponent.Callback(){
    public void onClose(){
      if (GotoSymbolAction.class.equals(myInAction))       myInAction=null;
    }
    public void elementChosen(    Object element){
      ((NavigationItem)element).navigate(true);
    }
  }
,ModalityState.current(),true);
}
