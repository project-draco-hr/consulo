{
  if (!template.isToShortenLongNames())   return;
  try {
    PsiDocumentManager.getInstance(project).commitDocument(document);
    final PsiFile file=PsiUtilBase.getPsiFileInEditor(editor,project);
    if (file instanceof GroovyFile) {
      GrReferenceAdjuster.shortenReferences(file,templateRange.getStartOffset(),templateRange.getEndOffset(),true,false);
    }
    PsiDocumentManager.getInstance(project).doPostponedOperationsAndUnblockDocument(document);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
