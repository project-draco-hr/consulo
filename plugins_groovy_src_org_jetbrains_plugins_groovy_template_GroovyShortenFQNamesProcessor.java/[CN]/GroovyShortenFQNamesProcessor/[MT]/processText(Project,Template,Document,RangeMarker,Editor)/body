{
  if (!template.isToShortenLongNames())   return;
  try {
    PsiDocumentManager.getInstance(project).commitDocument(document);
    final PsiFile file=PsiUtilBase.getPsiFileInEditor(editor,project);
    if (file instanceof GroovyFile) {
      JavaCodeStyleManager.getInstance(project).shortenClassReferences(file,templateRange.getStartOffset(),templateRange.getEndOffset());
    }
    PsiDocumentManager.getInstance(project).doPostponedOperationsAndUnblockDocument(document);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
