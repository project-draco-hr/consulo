{
  return new TextRange(Math.max(0,range.getStartOffset() - shift),Math.max(0,Math.min(size - 1,range.getEndOffset() + shift)));
}
