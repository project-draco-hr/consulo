{
  UIUtil.addToInvokeLater(new Runnable(){
    public void run(){
      final String fullTestName=getFullTestName(testName);
      final RTestUnitTestProxy testProxy=getProxyByFullTestName(fullTestName);
      if (testProxy == null) {
        LOG.error("Test wasn't started! TestFailure event: name = {" + testName + "}, message = {"+ localizedMessage+ "}, stackTrace = {"+ stackTrace+ "}");
        return;
      }
      if (myFailedTestsSet.contains(testProxy)) {
        LOG.warn("Dublicate failure for test [" + fullTestName + "]: msg = "+ localizedMessage+ ", stacktrace = "+ stackTrace);
        return;
      }
      testProxy.setTestFailed(localizedMessage,stackTrace,isTestError);
      myFailedTestsSet.add(testProxy);
      fireOnTestFailed(testProxy);
    }
  }
);
}
