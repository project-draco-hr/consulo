{
  try {
    TREE_CONSTRUCTION_LOCK.writeLock().lock();
    myRootNode.removeAllChildren();
    createNodes(defaultRepository,selectedRepositories,commits);
    myTreeModel.nodeStructureChanged(myRootNode);
    myTree.setModel(myTreeModel);
    TreeUtil.expandAll(myTree);
    selectFirstCommit();
    collapseEmptyRepoNodes(commits);
    myTreeWasConstructed=true;
  }
  finally {
    TREE_CONSTRUCTION_LOCK.writeLock().unlock();
  }
}
