{
  try {
    TREE_CONSTRUCTION_LOCK.writeLock().lock();
    myRootNode.removeAllChildren();
    createNodes(commits);
    myTreeModel.nodeStructureChanged(myRootNode);
    myTree.setModel(myTreeModel);
    myTreeCellRenderer.recalculateWidth(commits.getAllCommits());
    TreeUtil.expandAll(myTree);
    selectFirstCommit();
  }
  finally {
    TREE_CONSTRUCTION_LOCK.writeLock().unlock();
  }
}
