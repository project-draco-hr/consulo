{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final List<VirtualFile> currentFiles=new ArrayList<VirtualFile>(myFiles);
      for (      VirtualFile file : currentFiles) {
        if (fileDropped(file) || scope.belongsTo(PeerFactory.getInstance().getVcsContextFactory().createFilePathOn(file))) {
          myFiles.remove(file);
        }
      }
    }
  }
);
}
