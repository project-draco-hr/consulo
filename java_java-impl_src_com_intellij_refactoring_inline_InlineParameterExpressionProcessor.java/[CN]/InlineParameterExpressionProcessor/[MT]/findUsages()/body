{
  int parameterIndex=myMethod.getParameterList().getParameterIndex(myParameter);
  final Map<PsiVariable,PsiElement> localToParamRef=new HashMap<PsiVariable,PsiElement>();
  final PsiExpression[] arguments=myMethodCall.getArgumentList().getExpressions();
  for (int i=0; i < arguments.length; i++) {
    if (i != parameterIndex && arguments[i] instanceof PsiReferenceExpression) {
      final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)arguments[i];
      final PsiElement element=referenceExpression.resolve();
      if (element instanceof PsiLocalVariable || element instanceof PsiParameter) {
        final PsiParameter param=myMethod.getParameterList().getParameters()[i];
        final PsiExpression paramRef=JavaPsiFacade.getInstance(myMethod.getProject()).getElementFactory().createExpressionFromText(param.getName(),myMethod);
        localToParamRef.put((PsiVariable)element,paramRef);
      }
    }
  }
  final List<UsageInfo> result=new ArrayList<UsageInfo>();
  myInitializer.accept(new JavaRecursiveElementVisitor(){
    @Override public void visitReferenceExpression(    final PsiReferenceExpression expression){
      super.visitReferenceExpression(expression);
      final PsiElement element=expression.resolve();
      if (element instanceof PsiLocalVariable) {
        final PsiLocalVariable localVariable=(PsiLocalVariable)element;
        final PsiElement[] elements=DefUseUtil.getDefs(myCallingMethod.getBody(),localVariable,expression);
        if (elements.length == 1) {
          PsiExpression localInitializer=null;
          if (elements[0] instanceof PsiLocalVariable) {
            localInitializer=((PsiLocalVariable)elements[0]).getInitializer();
          }
 else           if (elements[0] instanceof PsiAssignmentExpression) {
            localInitializer=((PsiAssignmentExpression)elements[0]).getRExpression();
          }
          if (localInitializer != null) {
            final PsiElement replacement;
            if (localToParamRef.containsKey(localVariable)) {
              replacement=localToParamRef.get(localVariable);
            }
 else {
              replacement=replaceArgs(localToParamRef,localInitializer.copy());
            }
            result.add(new LocalReplacementUsageInfo(expression,replacement));
          }
        }
      }
    }
  }
);
  if (!myCreateLocal) {
    for (    PsiReference ref : ReferencesSearch.search(myParameter).findAll()) {
      result.add(new UsageInfo(ref));
    }
  }
  final UsageInfo[] usageInfos=result.toArray(new UsageInfo[result.size()]);
  return UsageViewUtil.removeDuplicatedUsages(usageInfos);
}
