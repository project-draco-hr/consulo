{
  String message=event.getMessage();
  @NonNls StringBuilder descBuilder=new StringBuilder();
  if (!StringUtil.isEmpty(description)) {
    descBuilder.append("User description: ").append(description).append("\n");
  }
  if (message != null) {
    descBuilder.append("Error message: ").append(message).append("\n");
  }
  Throwable t=event.getThrowable();
  if (t != null) {
    final PluginId pluginId=IdeErrorsDialog.findPluginId(t);
    if (pluginId != null) {
      final IdeaPluginDescriptor ideaPluginDescriptor=PluginsFacade.INSTANCE.getPlugin(pluginId);
      if (ideaPluginDescriptor != null && !ideaPluginDescriptor.isBundled()) {
        descBuilder.append("Plugin ").append(ideaPluginDescriptor.getName()).append(" version: ").append(ideaPluginDescriptor.getVersion()).append("\n");
      }
    }
  }
  if (IdeaLogger.ourLastActionId != null) {
    descBuilder.append("Last action: ").append(IdeaLogger.ourLastActionId);
  }
  if (previousExceptionThreadId != 0) {
    descBuilder.append("Previous exception is: ").append(URL_HEADER).append(previousExceptionThreadId).append("\n");
  }
  if (wasException) {
    descBuilder.append("There was at least one exception before this one.\n");
  }
  return descBuilder.toString();
}
