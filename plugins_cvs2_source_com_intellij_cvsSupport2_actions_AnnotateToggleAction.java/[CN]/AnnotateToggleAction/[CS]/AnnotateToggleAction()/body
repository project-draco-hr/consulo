{
  myVisibility.shouldNotBePerformedOnDirectory();
  myVisibility.addCondition(ActionOnSelectedElement.FILES_EXIST_IN_CVS);
  myVisibility.addCondition(ActionOnSelectedElement.FILES_ARE_NOT_DELETED);
  myVisibility.addCondition(new CvsActionVisibility.Condition(){
    public boolean isPerformedOn(    CvsContext context){
      if (context.getEditor() != null)       return true;
      VirtualFile selectedFile=context.getSelectedFile();
      if (selectedFile == null)       return false;
      return hasTextEditor(selectedFile);
    }
  }
);
}
