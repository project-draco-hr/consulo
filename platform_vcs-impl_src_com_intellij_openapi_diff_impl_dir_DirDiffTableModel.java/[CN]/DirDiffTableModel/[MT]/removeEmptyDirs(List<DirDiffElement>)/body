{
  final DirDiffElement[] tmp=elements.toArray(new DirDiffElement[elements.size()]);
  boolean prevItemIsSeparator=true;
  for (int i=tmp.length - 1; i >= 0; i--) {
    final boolean isSeparator=tmp[i].isSeparator();
    if (isSeparator) {
      if (prevItemIsSeparator) {
        elements.remove(i);
      }
      prevItemIsSeparator=true;
    }
 else {
      prevItemIsSeparator=false;
    }
  }
}
