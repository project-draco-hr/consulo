{
  final DiffElement<?> source=element.getSource();
  if (source != null) {
    final String path=element.getParentNode().getPath();
    final AccessToken token=ApplicationManager.getApplication().acquireWriteActionLock(getClass());
    try {
      final DiffElement<?> diffElement=source.copyTo(myTrg,path);
      if (diffElement != null) {
        final DTree node=element.getNode();
        final int row=myElements.indexOf(element);
        if (getSettings().showEqual) {
          node.setType(DType.EQUAL);
          node.setTarget(diffElement);
          element.updateTargetFromSource(source);
          fireTableRowsUpdated(row,row);
        }
 else {
          removeElement(element);
        }
      }
    }
  finally {
      token.finish();
    }
  }
}
