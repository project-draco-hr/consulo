{
  final Element iprRoot=loadRootElement(iprFile);
  File iwsFile=new File(iprFile.getParent(),FileUtil.getNameWithoutExtension(iprFile) + ".iws");
  Element iwsRoot=iwsFile.exists() ? loadRootElement(iwsFile) : null;
  JpsSdkType<?> projectSdkType=loadProjectRoot(iprRoot);
  for (  JpsModelSerializerExtension extension : JpsModelSerializerExtension.getExtensions()) {
    for (    JpsProjectExtensionSerializer serializer : extension.getProjectExtensionSerializers()) {
      Element rootTag=JpsProjectExtensionSerializer.WORKSPACE_FILE.equals(serializer.getConfigFileName()) ? iwsRoot : iprRoot;
      Element component=JDomSerializationUtil.findComponent(rootTag,serializer.getComponentName());
      if (component != null) {
        serializer.loadExtension(myProject,component);
      }
    }
  }
  loadModules(iprRoot,projectSdkType);
  loadProjectLibraries(JDomSerializationUtil.findComponent(iprRoot,"libraryTable"));
  loadArtifacts(JDomSerializationUtil.findComponent(iprRoot,"ArtifactManager"));
  if (hasRunConfigurationSerializers()) {
    JpsRunConfigurationSerializer.loadRunConfigurations(myProject,JDomSerializationUtil.findComponent(iprRoot,"ProjectRunConfigurationManager"));
    JpsRunConfigurationSerializer.loadRunConfigurations(myProject,JDomSerializationUtil.findComponent(iwsRoot,"RunManager"));
  }
}
