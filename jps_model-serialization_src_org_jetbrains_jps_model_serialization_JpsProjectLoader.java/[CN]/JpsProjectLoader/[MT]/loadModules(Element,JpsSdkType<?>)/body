{
  Element componentRoot=JDomSerializationUtil.findComponent(root,"ProjectModuleManager");
  if (componentRoot == null)   return;
  final Element modules=componentRoot.getChild("modules");
  List<Future<JpsModule>> futures=new ArrayList<Future<JpsModule>>();
  final List<String> paths=new ArrayList<String>();
  for (  Element moduleElement : JDOMUtil.getChildren(modules,"module")) {
    final String path=moduleElement.getAttributeValue("filepath");
    paths.add(path);
  }
  for (  final String path : paths) {
    futures.add(ourThreadPool.submit(new Callable<JpsModule>(){
      @Override public JpsModule call() throws Exception {
        return loadModule(path,paths,projectSdkType);
      }
    }
));
  }
  try {
    for (    Future<JpsModule> future : futures) {
      JpsModule module=future.get();
      if (module != null) {
        myProject.addModule(module);
      }
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
