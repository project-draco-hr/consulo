{
  final ActionCallback result=new ActionCallback();
  String text=getText().substring(PREFIX.length()).trim();
  final Map<String,String> expected=new LinkedHashMap<String,String>();
  if (text.length() > 0) {
    final String[] keyValue=text.split(",");
    for (    String each : keyValue) {
      final String[] eachPair=each.split("=");
      if (eachPair.length != 2) {
        context.getCallback().error("Syntax error, must be comma-separated pairs key=value",getLine());
        result.setRejected();
        return result;
      }
      expected.put(eachPair[0],eachPair[1]);
    }
  }
  IdeFocusManager.findInstance().doWhenFocusSettlesDown(new Runnable(){
    public void run(){
      try {
        doAssert(expected,context.getCallback());
        result.setDone();
      }
 catch (      AssertionError error) {
        context.getCallback().error("Assertion failed: " + error.getMessage(),getLine());
        result.setRejected();
      }
    }
  }
);
  return result;
}
