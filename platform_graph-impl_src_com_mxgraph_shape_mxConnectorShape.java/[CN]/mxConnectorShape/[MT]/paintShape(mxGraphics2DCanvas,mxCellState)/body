{
  if (state.getAbsolutePointCount() > 1 && configureGraphics(canvas,state,false)) {
    List<mxPoint> pts=new ArrayList<mxPoint>(state.getAbsolutePoints());
    Map<String,Object> style=state.getStyle();
    boolean dashed=mxUtils.isTrue(style,mxConstants.STYLE_DASHED);
    Object dashedValue=style.get(mxConstants.STYLE_DASHED);
    if (dashed) {
      style.remove(mxConstants.STYLE_DASHED);
      canvas.getGraphics().setStroke(canvas.createStroke(style));
    }
    translatePoint(pts,0,paintMarker(canvas,state,true));
    translatePoint(pts,pts.size() - 1,paintMarker(canvas,state,false));
    if (dashed) {
      style.put(mxConstants.STYLE_DASHED,dashedValue);
      canvas.getGraphics().setStroke(canvas.createStroke(style));
    }
    paintPolyline(canvas,pts,state.getStyle());
  }
}
