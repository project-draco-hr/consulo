{
  alarm.cancelAllRequests();
  final int delay=Math.max(50,Registry.intValue("compiler.automake.trigger.delay",MAKE_TRIGGER_DELAY));
  alarm.addRequest(new Runnable(){
    @Override public void run(){
      if (!HeavyProcessLatch.INSTANCE.isRunning() && !taskLatch.getAndSet(true)) {
        try {
          ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
            @Override public void run(){
              try {
                task.run();
              }
  finally {
                taskLatch.set(false);
              }
            }
          }
);
        }
 catch (        RejectedExecutionException ignored) {
          taskLatch.set(false);
        }
catch (        Throwable e) {
          taskLatch.set(false);
          throw new RuntimeException(e);
        }
      }
 else {
        scheduleTask(alarm,taskLatch,task);
      }
    }
  }
,delay);
}
