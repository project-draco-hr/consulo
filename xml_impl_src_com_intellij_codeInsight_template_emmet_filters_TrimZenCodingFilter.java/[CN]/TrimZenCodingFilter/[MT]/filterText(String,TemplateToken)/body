{
  XmlDocument document=token.getFile().getDocument();
  if (document != null) {
    XmlTag tag=document.getRootTag();
    if (tag != null && !tag.getText().isEmpty()) {
      new XmlElementVisitor(){
        @Override public void visitXmlTag(        XmlTag tag){
          if (!tag.isEmpty()) {
            XmlTagValue tagValue=tag.getValue();
            tagValue.setText(PATTERN.matcher(tagValue.getText()).replaceAll(""));
          }
          tag.acceptChildren(this);
        }
      }
.visitXmlTag(tag);
      return tag.getText();
    }
 else {
      return PATTERN.matcher(document.getText()).replaceAll("");
    }
  }
  return text;
}
