{
  if (settings.JAVADOC_STUB_ON_ENTER) {
    final DocumentationProvider langDocumentationProvider=comment.getParent().getLanguage().getDocumentationProvider();
    final CodeDocumentationProvider docProvider=langDocumentationProvider instanceof CodeDocumentationProvider ? (CodeDocumentationProvider)langDocumentationProvider : null;
    if (docProvider != null) {
      if (docProvider.findExistingDocComment(comment) != comment)       return comment;
      String docStub=docProvider.generateDocumentationContentStub(comment);
      if (docStub != null && docStub.length() != 0) {
        myOffset=CharArrayUtil.shiftForwardUntil(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
        myOffset=CharArrayUtil.shiftForward(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
        myDocument.insertString(myOffset,docStub);
      }
    }
    PsiDocumentManager.getInstance(project).commitAllDocuments();
    return PsiTreeUtil.getNonStrictParentOfType(myFile.findElementAt(myOffset),PsiDocComment.class,PsiComment.class);
  }
  return comment;
}
