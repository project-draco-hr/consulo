{
  String commentText=comment.getText();
  if (!commentText.endsWith(DOC_COMMENT_SUFFIX))   return false;
  Lexer lexer=new JavaLexer(PsiUtil.getLanguageLevel(comment));
  lexer.start(commentText,DOC_COMMENT_PREFIX.length(),commentText.length(),0);
  while (true) {
    IElementType tokenType=lexer.getTokenType();
    if (tokenType == null) {
      return false;
    }
    if (tokenType == JavaTokenType.STRING_LITERAL || tokenType == JavaTokenType.CHARACTER_LITERAL) {
      String text=commentText.substring(lexer.getTokenStart(),lexer.getTokenEnd());
      int endOffset=comment.getTextRange().getEndOffset();
      if (text.endsWith(DOC_COMMENT_SUFFIX) && endOffset < comment.getContainingFile().getTextLength() - 1 && comment.getContainingFile().getText().charAt(endOffset + 1) == '\n') {
        return true;
      }
    }
    if (lexer.getTokenEnd() == commentText.length()) {
      return lexer.getTokenEnd() - lexer.getTokenStart() == 1;
    }
    if (tokenType == JavaDocElementType.DOC_COMMENT || tokenType == JavaTokenType.C_STYLE_COMMENT) {
      return false;
    }
    lexer.advance();
  }
}
