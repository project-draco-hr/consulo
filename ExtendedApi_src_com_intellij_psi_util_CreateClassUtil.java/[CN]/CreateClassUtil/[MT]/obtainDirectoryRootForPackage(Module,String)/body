{
  final Project project=module.getProject();
  GlobalSearchScope scope=GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module);
  final PsiPackage aPackage=JavaPsiFacade.getInstance(project).findPackage(packageName);
  if (aPackage != null) {
    PsiDirectory[] directories=aPackage.getDirectories(scope);
    if (directories.length == 1)     return getSourceRootDirectory(directories[0]);
  }
  final VirtualFile[] sourceRoots=ModuleRootManager.getInstance(module).getSourceRoots();
  List<PsiDirectory> directoryList=new ArrayList<PsiDirectory>();
  for (  VirtualFile sourceRoot : sourceRoots) {
    final PsiDirectory directory=PsiManager.getInstance(project).findDirectory(sourceRoot);
    directoryList.add(directory);
  }
  PsiDirectory[] sourceDirectories=directoryList.toArray(new PsiDirectory[directoryList.size()]);
  return DirectoryChooserUtil.selectDirectory(project,sourceDirectories,null,File.separatorChar + packageName.replace('.',File.separatorChar));
}
