def diffstat(self):


    class patchbuf(object):

        def __init__(self):
            self.lines = []
            self.name = 'cia'

        def write(self, data):
            self.lines.append(data)

        def close(self):
            pass
    n = self.ctx.node()
    pbuf = patchbuf()
    patch.export(self.cia.repo, [n], fp=pbuf)
    return (patch.diffstat(pbuf.lines) or '')
