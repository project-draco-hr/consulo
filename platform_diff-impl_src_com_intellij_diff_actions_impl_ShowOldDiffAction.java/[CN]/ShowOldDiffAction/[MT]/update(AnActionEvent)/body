{
  if (!ApplicationManager.getApplication().isInternal()) {
    e.getPresentation().setEnabledAndVisible(false);
    return;
  }
  e.getPresentation().setVisible(true);
  DiffRequest request=e.getData(DiffDataKeys.DIFF_REQUEST);
  if (request == null || !(request instanceof ContentDiffRequest)) {
    e.getPresentation().setEnabled(false);
    return;
  }
  List<DiffContent> contents=((ContentDiffRequest)request).getContents();
  if (contents.size() != 2) {
    e.getPresentation().setEnabled(false);
    return;
  }
  for (  DiffContent content : contents) {
    if (content instanceof EmptyContent || content instanceof DocumentContent || content instanceof FileContent|| content instanceof DirectoryContent) {
      continue;
    }
    e.getPresentation().setEnabled(false);
    return;
  }
  e.getPresentation().setEnabled(true);
}
