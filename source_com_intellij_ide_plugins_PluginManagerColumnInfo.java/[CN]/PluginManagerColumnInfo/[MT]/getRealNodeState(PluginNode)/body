{
  if (node.getStatus() == PluginNode.STATUS_DOWNLOADED)   return PluginNode.STATUS_DOWNLOADED;
 else   if (node.getStatus() == PluginNode.STATUS_DELETED)   return PluginNode.STATUS_DELETED;
 else   if (node.getStatus() == PluginNode.STATUS_CART)   return PluginNode.STATUS_CART;
  PluginDescriptor existing=PluginManager.getPlugin(node.getName());
  if (existing == null)   return PluginNode.STATUS_MISSING;
  if (existing.getVendor() == null ? true : !existing.getVendor().equals(node.getVendor())) {
    return PluginNode.STATUS_MISSING;
  }
  int state=compareVersion(node.getVersion(),existing.getVersion());
  if (state == 0)   return PluginNode.STATUS_CURRENT;
 else   if (state >= 1)   return PluginNode.STATUS_OUT_OF_DATE;
 else   if (state <= -1) {
    return PluginNode.STATUS_NEWEST;
  }
  return PluginNode.STATUS_UNKNOWN;
}
