{
  final List<PsiVariable> result=new ArrayList<PsiVariable>();
  scope.accept(new PsiRecursiveElementVisitor(){
    public void visitReferenceExpression(    PsiReferenceExpression expression){
      final PsiElement element=expression.resolve();
      if (element instanceof PsiVariable) {
        result.add((PsiVariable)element);
      }
      final PsiExpression qualifier=expression.getQualifierExpression();
      if (qualifier != null) {
        qualifier.accept(this);
      }
    }
  }
);
  return result;
}
