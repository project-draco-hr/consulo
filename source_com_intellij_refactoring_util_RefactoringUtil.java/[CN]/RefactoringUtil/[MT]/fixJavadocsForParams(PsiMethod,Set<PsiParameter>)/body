{
  final PsiDocComment docComment=method.getDocComment();
  if (docComment == null)   return;
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  final PsiDocTag[] paramTags=docComment.findTagsByName("param");
  if (parameters.length > 0 && newParameters.size() < parameters.length && paramTags.length == 0)   return;
  Map<PsiParameter,PsiDocTag> tagForParam=new HashMap<PsiParameter,PsiDocTag>();
  for (int i=0; i < parameters.length; i++) {
    PsiParameter parameter=parameters[i];
    boolean found=false;
    for (int j=0; j < paramTags.length; j++) {
      PsiDocTag paramTag=paramTags[j];
      if (parameter.getName().equals(getNameOfReferencedParameter(paramTag))) {
        tagForParam.put(parameter,paramTag);
        found=true;
        break;
      }
    }
    if (!found && !newParameters.contains(parameter)) {
      tagForParam.put(parameter,null);
    }
  }
  List<PsiDocTag> newTags=new ArrayList<PsiDocTag>();
  for (int i=0; i < parameters.length; i++) {
    PsiParameter parameter=parameters[i];
    if (tagForParam.containsKey(parameter)) {
      final PsiDocTag psiDocTag=tagForParam.get(parameter);
      if (psiDocTag != null) {
        newTags.add((PsiDocTag)psiDocTag.copy());
      }
    }
 else {
      newTags.add(method.getManager().getElementFactory().createParamTag(parameter.getName(),""));
    }
  }
  PsiDocTag anchor=paramTags.length > 0 ? paramTags[paramTags.length - 1] : null;
  for (Iterator<PsiDocTag> iterator=newTags.iterator(); iterator.hasNext(); ) {
    PsiDocTag psiDocTag=iterator.next();
    anchor=(PsiDocTag)docComment.addAfter(psiDocTag,anchor);
  }
  for (int i=0; i < paramTags.length; i++) {
    PsiDocTag paramTag=paramTags[i];
    paramTag.delete();
  }
}
