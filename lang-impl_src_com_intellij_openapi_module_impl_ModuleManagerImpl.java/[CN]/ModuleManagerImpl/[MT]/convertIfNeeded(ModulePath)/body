{
  final ModuleConverter[] converters=ModuleConverter.EXTENSION_POINT.getExtensions();
  final File file=new File(modulePath.getPath());
  final Document document;
  try {
    document=JDOMUtil.loadDocument(file);
  }
 catch (  JDOMException e) {
    return;
  }
catch (  IOException e) {
    return;
  }
  final Element element=document.getRootElement();
  for (  final ModuleConverter converter : converters) {
    if (converter.isConversionNeeded(element)) {
      final String fileName=file.getName();
      if (Messages.showYesNoDialog(myProject,"Module file '" + fileName + "' has old format. Would you like to convert it to a new one?","Conversion",Messages.getWarningIcon()) == 0) {
        converter.convertModuleRoot(fileName,element);
        JDOMUtil.writeDocument(document,modulePath.myPath,SystemProperties.getLineSeparator());
      }
      return;
    }
  }
}
