{
  myDisplayName=displayName;
  Set<PsiElement> localScope=new HashSet<PsiElement>(scope.length);
  for (  final PsiElement element : scope) {
    LOG.assertTrue(element.getContainingFile() != null);
    if (element instanceof PsiFile) {
      final FileViewProvider provider=((PsiFile)element).getViewProvider();
      for (      Language lang : provider.getPrimaryLanguages()) {
        localScope.add(provider.getPsi(lang));
      }
    }
 else {
      localScope.add(element);
    }
  }
  myScope=localScope.toArray(new PsiElement[localScope.size()]);
}
