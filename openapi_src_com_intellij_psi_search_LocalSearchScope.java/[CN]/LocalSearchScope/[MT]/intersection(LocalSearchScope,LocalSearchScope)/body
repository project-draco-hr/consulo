{
  List<PsiElement> result=new ArrayList<PsiElement>();
  final PsiElement[] elements1=scope1.myScope;
  final PsiElement[] elements2=scope2.myScope;
  for (int i=0; i < elements1.length; i++) {
    final PsiElement element1=elements1[i];
    for (int j=0; j < elements2.length; j++) {
      final PsiElement element2=elements2[j];
      final PsiElement element=intersectScopeElements(element1,element2);
      if (element != null) {
        result.add(element);
      }
    }
  }
  return new LocalSearchScope((PsiElement[])result.toArray(new PsiElement[result.size()]));
}
