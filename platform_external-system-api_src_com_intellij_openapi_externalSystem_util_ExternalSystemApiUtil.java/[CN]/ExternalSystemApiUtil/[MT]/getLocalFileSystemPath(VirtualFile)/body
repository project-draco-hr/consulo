{
  final VirtualFile archiveRoot=ArchiveVfsUtil.getVirtualFileForArchive(file);
  if (archiveRoot != null) {
    return archiveRoot.getPath();
  }
  return toCanonicalPath(file.getPath());
}
