{
  if (document == null)   return;
  Editor[] editors=EditorFactory.getInstance().getEditors(document);
  for (  Editor editor : editors) {
    Rectangle visibleArea=editor.getScrollingModel().getVisibleArea();
    Point pos=editor.visualPositionToXY(editor.getCaretModel().getVisualPosition());
    int relativePosition=pos.y - visibleArea.y;
    myCaretRelativeVerticalPositions.put(editor,relativePosition);
  }
}
