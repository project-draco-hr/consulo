{
  for (  final VirtualFile file : result) {
    if (isProjectFile(file.getName())) {
      int answer=Messages.showYesNoDialog(project,IdeBundle.message("message.open.file.is.project",file.getName(),ApplicationNamesInfo.getInstance().getProductName()),IdeBundle.message("title.open.project"),Messages.getQuestionIcon());
      if (answer == 0) {
        ProjectUtil.openProject(file.getPath(),project,false);
        return;
      }
    }
    FileType type=FileTypeChooser.getKnownFileTypeOrAssociate(file.getName());
    if (type == null)     return;
    if (project != null) {
      openFile(file,project);
    }
 else {
      PlatformProjectOpenProcessor.getInstance().doOpenProject(file,null,false);
    }
  }
}
