{
  return new GroovyPsiElementVisitor(new GroovyElementVisitor(){
    public void visitClosure(    GrClosableBlock closure){
      super.visitClosure(closure);
      final PsiType expectedClosureType=GroovyExpectedTypesProvider.getExpectedClosureReturnType(closure);
      check(closure,problemsHolder,expectedClosureType != null && expectedClosureType != PsiType.VOID);
    }
    public void visitMethod(    GrMethod method){
      super.visitMethod(method);
      final GrOpenBlock block=method.getBlock();
      if (block != null) {
        final boolean mustReturnValue=method.getReturnTypeElementGroovy() != null && method.getReturnType() != PsiType.VOID;
        check(block,problemsHolder,mustReturnValue);
      }
    }
  }
);
}
