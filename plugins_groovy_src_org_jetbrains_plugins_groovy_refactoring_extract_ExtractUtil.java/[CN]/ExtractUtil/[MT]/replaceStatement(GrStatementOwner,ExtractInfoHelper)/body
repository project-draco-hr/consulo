{
  GrStatement realStatement;
  if (declarationOwner != null && !isSingleExpression(helper.getStatements())) {
    final GrStatement[] newStatement=createResultStatement(helper);
    final GrStatement[] statements=helper.getStatements();
    LOG.assertTrue(statements.length > 0);
    realStatement=null;
    for (    GrStatement statement : newStatement) {
      realStatement=declarationOwner.addStatementBefore(statement,statements[0]);
      GrReferenceAdjuster.shortenReferences(realStatement);
    }
    LOG.assertTrue(realStatement != null);
    removeOldStatements(declarationOwner,helper);
    PsiImplUtil.removeNewLineAfter(realStatement);
  }
 else {
    GrExpression methodCall=createMethodCall(helper);
    GrExpression oldExpr=(GrExpression)helper.getStatements()[0];
    realStatement=oldExpr.replaceWithExpression(methodCall,true);
    GrReferenceAdjuster.shortenReferences(realStatement);
  }
  return realStatement;
}
