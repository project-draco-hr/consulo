{
  myContext=context;
  myRequest=request;
  List<DiffContent> contents=request.getContents();
  DiffElement element1=createDiffElement(contents.get(0));
  DiffElement element2=createDiffElement(contents.get(1));
  Project project=context.getProject();
  if (project == null)   project=DefaultProjectFactory.getInstance().getDefaultProject();
  DirDiffTableModel model=new DirDiffTableModel(project,element1,element2,new DirDiffSettings());
  myDirDiffPanel=new DirDiffPanel(model,new DirDiffWindow((DirDiffFrame)null){
    @Override public Window getWindow(){
      return null;
    }
    @Override public Disposable getDisposable(){
      return DirDiffViewer.this;
    }
    @Override public void setTitle(    String title){
    }
  }
);
  myPanel=new JPanel(new BorderLayout());
  myPanel.add(myDirDiffPanel.getPanel(),BorderLayout.CENTER);
  DataManager.registerDataProvider(myPanel,new DataProvider(){
    @Override public Object getData(    @NonNls String dataId){
      if (PlatformDataKeys.HELP_ID.is(dataId)) {
        return "reference.dialogs.diff.folder";
      }
      return myDirDiffPanel.getData(dataId);
    }
  }
);
}
