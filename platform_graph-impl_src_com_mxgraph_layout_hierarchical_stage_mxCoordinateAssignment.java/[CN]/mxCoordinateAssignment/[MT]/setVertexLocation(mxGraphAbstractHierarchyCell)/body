{
  mxGraphHierarchyNode node=(mxGraphHierarchyNode)cell;
  Object realCell=node.cell;
  double positionX=node.x[0] - node.width / 2;
  double positionY=node.y[0] - node.height / 2;
  rankTopY[cell.minRank]=Math.min(rankTopY[cell.minRank],positionY);
  rankBottomY[cell.minRank]=Math.max(rankBottomY[cell.minRank],positionY + node.height);
  if (orientation == SwingConstants.NORTH || orientation == SwingConstants.SOUTH) {
    layout.setVertexLocation(realCell,positionX,positionY);
  }
 else {
    layout.setVertexLocation(realCell,positionY,positionX);
  }
  limitX=Math.max(limitX,positionX + node.width);
}
