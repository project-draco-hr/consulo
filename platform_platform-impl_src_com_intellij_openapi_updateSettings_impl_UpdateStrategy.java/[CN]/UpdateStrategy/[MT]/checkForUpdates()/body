{
  if (myProduct.getChannels().isEmpty()) {
    return new CheckForUpdateResult(State.NOTHING_LOADED);
  }
  UpdateChannel updatedChannel=null;
  BuildInfo newBuild=null;
  List<UpdateChannel> activeChannels=getActiveChannels(myProduct);
  for (  UpdateChannel channel : activeChannels) {
    if (hasNewVersion(channel)) {
      updatedChannel=channel;
      newBuild=updatedChannel.getLatestBuild();
      break;
    }
  }
  CheckForUpdateResult result=new CheckForUpdateResult(updatedChannel,newBuild,myProduct.getAllChannelIds());
  UpdateChannel channelToPropose=null;
  for (  UpdateChannel channel : myProduct.getChannels()) {
    if (!myUpdateSettings.getKnownChannelsIds().contains(channel.getId()) && channel.getMajorVersion() >= myMajorVersion && channel.getStatus().compareTo(myChannelStatus) >= 0 && hasNewVersion(channel)) {
      result.addNewChannel(channel);
      if (channelToPropose == null || isBetter(channelToPropose,channel)) {
        channelToPropose=channel;
      }
    }
  }
  result.setChannelToPropose(channelToPropose);
  return result;
}
