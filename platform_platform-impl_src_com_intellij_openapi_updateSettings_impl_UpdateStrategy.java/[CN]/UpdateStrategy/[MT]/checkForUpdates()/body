{
  final Product product=updatesInfo.getProduct(ourBuild.getProductCode());
  if (product.getChannels().isEmpty()) {
    return new CheckForUpdateResult(State.NOTHING_LOADED);
  }
  boolean replacedWithAppDef=false;
  UpdateChannel channel=getChannelByIds(selectedChannel,product);
  if (!forced && (channel == null || isChannelIsOlderThenBuild(channel))) {
    selectedChannel=updateSettings.getAppDefaultChannelId();
    replacedWithAppDef=true;
    channel=getChannelByIds(selectedChannel,product);
  }
  if (channel == null) {
    return new CheckForUpdateResult(State.NOTHING_LOADED);
  }
  final Pair<List<UpdateChannel>,UpdateChannel> newChannels=getNewChannels(product);
  return new CheckForUpdateResult(replacedWithAppDef,channel,getNewVersionInSelectedChannel(channel),newChannels.getFirst(),getFilteredKnownChannels(product),newChannels.getSecond());
}
