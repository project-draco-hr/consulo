{
  VirtualFile dir=createDirectory("dir");
  VirtualFile f=createFile("dir/file.txt");
  dir.rename("dir","newDir");
  setContent(f,"xxx");
  List<Revision> rr=getRevisionsFor(f);
  assertEquals(4,rr.size());
  assertEquals(myRoot.getPath() + "/newDir/file.txt",rr.get(0).findEntry().getPath());
  assertEquals(myRoot.getPath() + "/newDir/file.txt",rr.get(1).findEntry().getPath());
  assertEquals(myRoot.getPath() + "/dir/file.txt",rr.get(2).findEntry().getPath());
}
