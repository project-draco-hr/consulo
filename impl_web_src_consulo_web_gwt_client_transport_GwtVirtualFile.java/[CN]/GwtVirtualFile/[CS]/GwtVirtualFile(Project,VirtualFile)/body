{
  url=virtualFile.getUrl();
  name=virtualFile.getName();
  isDirectory=virtualFile.isDirectory();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      Icon icon=IconUtil.getIcon(virtualFile,Iconable.ICON_FLAG_READ_STATUS,project);
      if (icon instanceof DeferredIcon) {
        icon=((DeferredIcon)icon).evaluate();
      }
      String maybeUrl=icon.toString();
      int i=maybeUrl.indexOf("!/");
      if (i != -1) {
        GwtVirtualFile.this.icon=maybeUrl.substring(i + 2,maybeUrl.length());
      }
    }
  }
);
  VirtualFile[] children=virtualFile.getChildren();
  for (  VirtualFile child : children) {
    this.children.add(new GwtVirtualFile(project,child));
  }
}
