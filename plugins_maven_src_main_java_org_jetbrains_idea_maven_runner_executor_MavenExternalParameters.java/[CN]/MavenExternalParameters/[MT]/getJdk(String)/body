{
  if (name.equals(MavenRunnerState.USE_INTERNAL_JAVA)) {
    return ProjectJdkTable.getInstance().getInternalJdk();
  }
  if (name.equals(MavenRunnerState.USE_JAVA_HOME)) {
    final String javaHome=System.getenv(JAVA_HOME);
    if (StringUtil.isEmptyOrSpaces(javaHome)) {
      throw new ExecutionException(RunnerBundle.message("maven.java.home.undefined"));
    }
    final Sdk jdk=JavaSdk.getInstance().createJdk("",javaHome);
    if (jdk == null) {
      throw new ExecutionException(RunnerBundle.message("maven.java.home.invalid",javaHome));
    }
    return jdk;
  }
  for (  Sdk projectJdk : ProjectJdkTable.getInstance().getAllJdks()) {
    if (projectJdk.getName().equals(name)) {
      return projectJdk;
    }
  }
  throw new ExecutionException(RunnerBundle.message("maven.java.not.found",name));
}
