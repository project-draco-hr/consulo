{
synchronized (lock) {
    Pair<String,Integer> p=fontFamily(defaultFontFamily,style);
    if (ourSharedKeyInstance.mySize == size && ourSharedKeyInstance.myStyle == p.getSecond() && ourSharedKeyInstance.myFamilyName != null && ourSharedKeyInstance.myFamilyName.equals(p.getFirst()) && ourSharedDefaultFont != null && (c < 128 || ourSharedDefaultFont.canDisplay(c))) {
      return ourSharedDefaultFont;
    }
    ourSharedKeyInstance.myFamilyName=p.getFirst();
    ourSharedKeyInstance.mySize=size;
    ourSharedKeyInstance.myStyle=p.getSecond();
    FontInfo defaultFont=ourUsedFonts.get(ourSharedKeyInstance);
    if (defaultFont == null) {
      defaultFont=new FontInfo(p.getFirst(),size,p.getSecond());
      ourUsedFonts.put(ourSharedKeyInstance,defaultFont);
      ourSharedKeyInstance=new FontKey("",0,0);
    }
    ourSharedDefaultFont=defaultFont;
    if (c < 128 || defaultFont.canDisplay(c)) {
      return defaultFont;
    }
 else {
      return null;
    }
  }
}
