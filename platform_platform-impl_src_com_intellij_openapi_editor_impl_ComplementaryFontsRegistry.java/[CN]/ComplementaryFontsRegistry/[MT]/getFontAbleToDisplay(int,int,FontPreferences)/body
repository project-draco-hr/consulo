{
  boolean tryDefaultFont=true;
  List<String> fontFamilies=preferences.getEffectiveFontFamilies();
  boolean useLigatures=preferences.useLigatures();
  FontInfo result;
  for (int i=0, len=fontFamilies.size(); i < len; ++i) {
    final String fontFamily=fontFamilies.get(i);
    result=doGetFontAbleToDisplay(codePoint,preferences.getSize(fontFamily),style,fontFamily,useLigatures);
    if (result != null) {
      return result;
    }
    tryDefaultFont&=!FontPreferences.DEFAULT_FONT_NAME.equals(fontFamily);
  }
  int size=FontPreferences.DEFAULT_FONT_SIZE;
  if (!fontFamilies.isEmpty()) {
    size=preferences.getSize(fontFamilies.get(0));
  }
  if (tryDefaultFont) {
    result=doGetFontAbleToDisplay(codePoint,size,style,FontPreferences.DEFAULT_FONT_NAME,useLigatures);
    if (result != null) {
      return result;
    }
  }
  result=doGetFontAbleToDisplay(codePoint,size,style,useLigatures);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Fallback font: " + result.getFont().getFontName());
  }
  return result;
}
