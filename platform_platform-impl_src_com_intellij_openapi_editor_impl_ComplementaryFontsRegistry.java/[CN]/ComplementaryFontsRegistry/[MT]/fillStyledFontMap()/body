{
  Font[] allFonts=GraphicsEnvironment.getLocalGraphicsEnvironment().getAllFonts();
  for (  Font font : allFonts) {
    String name=font.getName();
    Integer style=null;
    if (!SystemInfo.isAppleJvm) {
      style=FONT_NAME_TO_STYLE.get(name);
    }
    if (style == null) {
      if (!Patches.JDK_MAC_FONT_STYLE_BUG)       continue;
      style=getFontStyle(name);
    }
    if (style != Font.PLAIN) {
      String familyName=font.getFamily();
      Pair<String,Integer>[] entry=ourStyledFontMap.get(familyName);
      if (entry == null) {
        entry=new Pair[4];
        for (int i=1; i < 4; i++) {
          entry[i]=Pair.create(familyName,i);
        }
        ourStyledFontMap.put(familyName,entry);
      }
      entry[style]=Pair.create(name,Font.PLAIN);
    }
  }
}
