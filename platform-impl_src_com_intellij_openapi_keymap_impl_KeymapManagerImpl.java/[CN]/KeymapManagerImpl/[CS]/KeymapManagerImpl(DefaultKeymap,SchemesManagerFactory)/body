{
  mySchemesManager=factory.createSchemesManager("$ROOT_CONFIG$/keymaps",new SchemeProcessor<Keymap>(){
    public Keymap readScheme(    final Document schemeContent) throws InvalidDataException, IOException, JDOMException {
      return readKeymap(schemeContent);
    }
    public Document writeScheme(    final Keymap scheme) throws WriteExternalException {
      return new Document(((KeymapImpl)scheme).writeExternal());
    }
    public void showReadErrorMessage(    final Exception e,    final String schemeName,    final String filePath){
    }
    public void showWriteErrorMessage(    final Exception e,    final String schemeName,    final String filePath){
    }
    public boolean shouldBeSaved(    final Keymap scheme){
      return scheme.canModify();
    }
    public void renameScheme(    final String name,    final Keymap scheme){
      ((KeymapImpl)scheme).setName(name);
    }
    public void initScheme(    final Keymap scheme){
    }
  }
,RoamingType.PER_USER);
  Keymap[] keymaps=defaultKeymap.getKeymaps();
  for (  Keymap keymap : keymaps) {
    addKeymap(keymap);
    String systemDefaultKeymap=SystemInfo.isMac ? MAC_OS_X_KEYMAP : DEFAULT_IDEA_KEYMAP;
    if (systemDefaultKeymap.equals(keymap.getName())) {
      setActiveKeymap(keymap);
    }
  }
  load();
}
