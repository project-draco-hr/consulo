{
  mySchemesManager=factory.createSchemesManager("$ROOT_CONFIG$/keymaps",new SchemeProcessor<KeymapImpl>(){
    public KeymapImpl readScheme(    final Document schemeContent) throws InvalidDataException, IOException, JDOMException {
      return readKeymap(schemeContent);
    }
    public Document writeScheme(    final KeymapImpl scheme) throws WriteExternalException {
      return new Document(scheme.writeExternal());
    }
    public boolean shouldBeSaved(    final KeymapImpl scheme){
      return scheme.canModify();
    }
    public void initScheme(    final KeymapImpl scheme){
    }
    public void onSchemeAdded(    final KeymapImpl scheme){
    }
    public void onSchemeDeleted(    final KeymapImpl scheme){
    }
    public void onCurrentSchemeChanged(    final Scheme newCurrentScheme){
    }
  }
,RoamingType.PER_USER);
  Keymap[] keymaps=defaultKeymap.getKeymaps();
  for (  Keymap keymap : keymaps) {
    addKeymap(keymap);
    String systemDefaultKeymap=SystemInfo.isMac ? MAC_OS_X_KEYMAP : DEFAULT_IDEA_KEYMAP;
    if (systemDefaultKeymap.equals(keymap.getName())) {
      setActiveKeymap(keymap);
    }
  }
  load();
}
