{
  myStartHOffset=startHOffset;
  myStartVOffset=startVOffset;
  myEndHOffset=endHOffset;
  myEndVOffset=endVOffset;
  myHDist=Math.abs(myEndHOffset - myStartHOffset);
  myVDist=Math.abs(myEndVOffset - myStartVOffset);
  myMaxDistToScroll=myEditor.getLineHeight() * 50;
  myTotalDist=Math.sqrt((double)myHDist * myHDist + (double)myVDist * myVDist);
  myScrollDist=Math.min(myTotalDist,myMaxDistToScroll);
  myAnimationDuration=calcAnimationDuration();
  if (myAnimationDuration < SCROLL_INTERVAL * 2) {
    throw new NoAnimationRequiredException();
  }
  myStepCount=myAnimationDuration / SCROLL_INTERVAL - 1;
  double firstStepTime=1.0 / myStepCount;
  double firstScrollDist=5.0;
  if (myTotalDist > myScrollDist) {
    firstScrollDist*=myTotalDist / myScrollDist;
    firstScrollDist=Math.min(firstScrollDist,myEditor.getLineHeight() * 5);
  }
  myPow=myScrollDist > 0 ? setupPow(firstStepTime,firstScrollDist / myScrollDist) : 1;
  myStartCommand=CommandProcessor.getInstance().getCurrentCommand();
  myTimer=new Timer(SCROLL_INTERVAL,new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      tick();
    }
  }
);
  myTimer.setRepeats(true);
  myTimer.start();
}
