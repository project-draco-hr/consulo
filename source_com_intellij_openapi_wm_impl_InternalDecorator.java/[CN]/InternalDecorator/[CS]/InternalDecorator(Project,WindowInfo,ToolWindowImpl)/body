{
  super(new BorderLayout());
  myProject=project;
  myToolWindow=toolWindow;
  myDivider=new MyDivider();
  myTitlePanel=new TitlePanel();
  myTitleLabel=new MyTitleLabel();
  myToolWindowBorder=new ActivatableLineBorder();
  myToggleFloatingModeButton=new MyTitleButton();
  myToggleDockModeButton=new MyTitleButton();
  myToggleAutoHideModeButton=new MyTitleButton();
  myHideButton=new MyTitleButton();
  myListenerList=new EventListenerList();
  myToggleFloatingModeAction=new ToggleFloatingModeAction();
  myFloatingDockSeparator=new Separator();
  myFloatingDockSeparator.setBorder(BorderFactory.createEmptyBorder(0,2,0,2));
  myToggleDockModeAction=new ToggleDockModeAction();
  myDockAutoHideSeparator=new Separator();
  myToggleAutoHideModeAction=new TogglePinnedModeAction();
  myAutoHideHideSeparator=new Separator();
  myHideAction=new HideAction();
  myKeymapManagerListener=new MyKeymapManagerListener();
  final KeymapManagerEx keymapManager=KeymapManagerEx.getInstanceEx();
  myWeakKeymapManagerListener=new WeakKeymapManagerListener(keymapManager,myKeymapManagerListener);
  keymapManager.addKeymapManagerListener(myWeakKeymapManagerListener);
  init();
  myToolWindowHandler=new ToolWindowHandler();
  myToolWindow.addPropertyChangeListener(myToolWindowHandler);
  apply(info);
}
