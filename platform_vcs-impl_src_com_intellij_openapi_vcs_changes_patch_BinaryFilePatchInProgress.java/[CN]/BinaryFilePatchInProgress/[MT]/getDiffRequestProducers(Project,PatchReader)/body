{
  final ShelvedBinaryFile file=getPatch().getShelvedBinaryFile();
  return new DiffRequestProducer(){
    @NotNull @Override public DiffRequest process(    @NotNull UserDataHolder context,    @NotNull ProgressIndicator indicator) throws DiffRequestProducerException, ProcessCanceledException {
      Change change=file.createChange(project);
      return PatchDiffRequestFactory.createDiffRequest(project,change,getName(),context,indicator);
    }
    @NotNull @Override public String getName(){
      final File file1=new File(VfsUtilCore.virtualToIoFile(getBase()),file.AFTER_PATH == null ? file.BEFORE_PATH : file.AFTER_PATH);
      return FileUtil.toSystemDependentName(file1.getPath());
    }
  }
;
}
