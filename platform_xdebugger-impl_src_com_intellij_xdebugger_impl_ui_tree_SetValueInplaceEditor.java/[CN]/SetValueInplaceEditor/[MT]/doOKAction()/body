{
  if (myModifier == null)   return;
  myExpressionEditor.saveTextInHistory();
  final XDebuggerTreeState treeState=XDebuggerTreeState.saveState(myTree);
  myValueNode.setValueModificationStarted();
  myModifier.setValue(myExpressionEditor.getText(),new XValueModifier.XModificationCallback(){
    public void valueModified(){
      DebuggerUIUtil.invokeOnEventDispatch(new Runnable(){
        public void run(){
          myTree.rebuildAndRestore(treeState);
        }
      }
);
    }
    public void errorOccurred(    @NotNull final String errorMessage){
      DebuggerUIUtil.invokeOnEventDispatch(new Runnable(){
        public void run(){
          myTree.rebuildAndRestore(treeState);
          HintManager.getInstance().showErrorHint(myExpressionEditor.getEditor(),errorMessage);
        }
      }
);
    }
  }
);
  super.doOKAction();
}
