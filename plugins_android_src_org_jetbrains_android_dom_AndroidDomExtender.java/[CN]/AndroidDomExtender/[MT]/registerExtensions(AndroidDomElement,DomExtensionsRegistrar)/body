{
  AndroidFacet facet=AndroidFacet.getInstance(element);
  if (facet == null)   return;
  XmlTag tag=element.getXmlTag();
  registerExistingAttributes(facet,tag,registrar);
  String tagName=tag.getName();
  Set<String> registeredSubtags=new HashSet<String>();
  if (element instanceof ManifestElement) {
    registerExtensionsForManifest(facet,tagName,(ManifestElement)element,registrar,registeredSubtags);
  }
 else   if (element instanceof LayoutElement) {
    registerExtensionsForLayout(facet,tag,(LayoutElement)element,registrar,registeredSubtags);
  }
 else   if (element instanceof AnimationElement) {
    registerExtensionsForAnimation(facet,tagName,(AnimationElement)element,registrar,registeredSubtags);
  }
 else   if (element instanceof MenuElement) {
    String styleableName=StringUtil.capitalize(tagName);
    if (!styleableName.equals("Menu")) {
      styleableName="Menu" + styleableName;
    }
    registerAttributes(facet,element,styleableName,SYSTEM_RESOURCE_PACKAGE,registrar);
  }
 else   if (element instanceof XmlResourceElement) {
    registerExtensionsForXmlResources(facet,tagName,(XmlResourceElement)element,registrar,registeredSubtags);
  }
  Collections.addAll(registeredSubtags,AndroidDomUtil.getStaticallyDefinedSubtags(element));
  if (!(element instanceof LayoutElement)) {
    Processor<String> existingSubtagsFilter=element instanceof XmlResourceElement ? new Processor<String>(){
      public boolean process(      String s){
        return s.length() > 0 && Character.isLowerCase(s.charAt(0));
      }
    }
 : null;
    registerExistingSubtags(tag,registrar,registeredSubtags,existingSubtagsFilter);
  }
}
