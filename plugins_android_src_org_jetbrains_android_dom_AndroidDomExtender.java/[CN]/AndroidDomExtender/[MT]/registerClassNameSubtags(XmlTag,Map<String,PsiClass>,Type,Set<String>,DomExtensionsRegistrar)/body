{
  final Set<String> allAllowedTags=new HashSet<String>();
  final Map<String,String> class2Name=new HashMap<String,String>();
  for (  String tagName : classMap.keySet()) {
    final PsiClass aClass=classMap.get(tagName);
    if (!AndroidUtils.isAbstract(aClass)) {
      allAllowedTags.add(tagName);
      final String qName=aClass.getQualifiedName();
      final String prevTagName=class2Name.get(qName);
      if (prevTagName == null || tagName.indexOf('.') == -1) {
        class2Name.put(qName,tagName);
      }
    }
  }
  registerSubtags(registrar,tag,allAllowedTags,class2Name.values(),registeredSubtags,type);
}
