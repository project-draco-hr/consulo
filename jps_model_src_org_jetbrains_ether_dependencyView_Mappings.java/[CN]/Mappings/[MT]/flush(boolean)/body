{
synchronized (myLock) {
    myClassToSubclasses.flush(memoryCachesOnly);
    myClassToClassDependency.flush(memoryCachesOnly);
    mySourceFileToClasses.flush(memoryCachesOnly);
    mySourceFileToAnnotationUsages.flush(memoryCachesOnly);
    mySourceFileToUsages.flush(memoryCachesOnly);
    myClassToSourceFile.flush(memoryCachesOnly);
    if (!myIsDelta) {
      final DependencyContext context=myContext;
      if (context != null) {
        context.clearMemoryCaches();
        if (!memoryCachesOnly) {
          context.flush();
        }
      }
    }
  }
}
