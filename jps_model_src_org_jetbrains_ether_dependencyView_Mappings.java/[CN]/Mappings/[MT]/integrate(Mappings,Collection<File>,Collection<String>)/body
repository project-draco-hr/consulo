{
  if (removed != null) {
    for (    String file : removed) {
      final DependencyContext.S key=context.get(file);
      final Set<ClassRepr> classes=(Set<ClassRepr>)sourceFileToClasses.get(key);
      final UsageRepr.Cluster cluster=sourceFileToUsages.get(key);
      final Set<UsageRepr.Usage> usages=cluster == null ? null : cluster.getUsages();
      if (classes != null) {
        for (        ClassRepr cr : classes) {
          classToSubclasses.remove(cr.name);
          classToSourceFile.remove(cr.name);
          classToClassDependency.remove(cr.name);
          for (          DependencyContext.S superSomething : cr.getSupers()) {
            classToSubclasses.removeFrom(superSomething,cr.name);
          }
          if (usages != null) {
            for (            UsageRepr.Usage u : usages) {
              if (u instanceof UsageRepr.ClassUsage) {
                final Set<DependencyContext.S> residents=cluster.getResidence(u);
                if (residents != null && residents.contains(cr.name)) {
                  classToClassDependency.removeFrom(((UsageRepr.ClassUsage)u).className,cr.name);
                }
              }
            }
          }
        }
      }
      sourceFileToClasses.remove(key);
      sourceFileToUsages.remove(key);
    }
  }
  classToSubclasses.putAll(delta.classToSubclasses);
  sourceFileToClasses.putAll(delta.sourceFileToClasses);
  sourceFileToUsages.putAll(delta.sourceFileToUsages);
  sourceFileToAnnotationUsages.putAll(delta.sourceFileToAnnotationUsages);
  classToSourceFile.putAll(delta.classToSourceFile);
  for (  DependencyContext.S file : delta.classToClassDependency.keyCollection()) {
    final Collection<DependencyContext.S> now=delta.classToClassDependency.get(file);
    final Collection<DependencyContext.S> past=classToClassDependency.get(file);
    if (past == null) {
      classToClassDependency.put(file,now);
    }
 else {
      final Collection<DependencyContext.S> removeSet=new HashSet<DependencyContext.S>();
      for (      File c : compiled) {
        removeSet.add(context.get(FileUtil.toSystemIndependentName(c.getAbsolutePath())));
      }
      removeSet.removeAll(now);
      past.addAll(now);
      past.removeAll(removeSet);
      classToClassDependency.remove(file);
      classToClassDependency.put(file,past);
    }
  }
}
