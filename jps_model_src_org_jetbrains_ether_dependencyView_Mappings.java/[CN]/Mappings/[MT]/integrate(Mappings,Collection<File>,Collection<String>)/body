{
  if (removed != null) {
    for (    String file : removed) {
      final StringCache.S key=StringCache.get(file);
      final Set<ClassRepr> classes=(Set<ClassRepr>)sourceFileToClasses.foxyGet(key);
      final UsageRepr.Cluster cluster=sourceFileToUsages.get(key);
      final Set<UsageRepr.Usage> usages=cluster == null ? null : cluster.getUsages();
      if (classes != null) {
        for (        ClassRepr cr : classes) {
          classToSubclasses.remove(cr.name);
          classToSourceFile.remove(cr.name);
          classToClassDependency.remove(cr.name);
          for (          StringCache.S superSomething : cr.getSupers()) {
            classToSubclasses.removeFrom(superSomething,cr.name);
          }
          if (usages != null) {
            for (            UsageRepr.Usage u : usages) {
              if (u instanceof UsageRepr.ClassUsage) {
                final Set<StringCache.S> residents=cluster.getResidence(u);
                if (residents != null && residents.contains(cr.name)) {
                  classToClassDependency.removeFrom(((UsageRepr.ClassUsage)u).className,cr.name);
                }
              }
            }
          }
        }
      }
      sourceFileToClasses.remove(key);
      sourceFileToUsages.remove(key);
    }
  }
  classToSubclasses.putAll(delta.classToSubclasses);
  formToClass.putAll(delta.formToClass);
  classToForm.putAll(delta.classToForm);
  sourceFileToClasses.putAll(delta.sourceFileToClasses);
  sourceFileToUsages.putAll(delta.sourceFileToUsages);
  sourceFileToAnnotationUsages.putAll(delta.sourceFileToAnnotationUsages);
  classToSourceFile.putAll(delta.classToSourceFile);
  for (  StringCache.S file : delta.classToClassDependency.keySet()) {
    final Collection<StringCache.S> now=delta.classToClassDependency.foxyGet(file);
    final Collection<StringCache.S> past=classToClassDependency.foxyGet(file);
    if (past == null) {
      classToClassDependency.put(file,now);
    }
 else {
      final Collection<StringCache.S> removeSet=new HashSet<StringCache.S>();
      for (      File c : compiled) {
        removeSet.add(StringCache.get(FileUtil.toSystemIndependentName(c.getAbsolutePath())));
      }
      removeSet.removeAll(now);
      past.addAll(now);
      past.removeAll(removeSet);
      classToClassDependency.remove(file);
      classToClassDependency.put(file,past);
    }
  }
}
