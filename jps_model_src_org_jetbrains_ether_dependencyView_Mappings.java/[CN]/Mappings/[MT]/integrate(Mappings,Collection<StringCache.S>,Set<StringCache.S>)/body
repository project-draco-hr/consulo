{
  if (removed != null) {
    for (    StringCache.S file : removed) {
      final Set<ClassRepr> classes=(Set<ClassRepr>)sourceFileToClasses.foxyGet(file);
      if (classes != null) {
        for (        ClassRepr cr : classes) {
          classToSourceFile.remove(cr.fileName);
        }
      }
      sourceFileToClasses.remove(file);
      sourceFileToUsages.remove(file);
      fileToFileDependency.remove(file);
    }
  }
  classToSubclasses.putAll(delta.classToSubclasses);
  formToClass.putAll(delta.formToClass);
  classToForm.putAll(delta.classToForm);
  sourceFileToClasses.putAll(delta.sourceFileToClasses);
  sourceFileToUsages.putAll(delta.sourceFileToUsages);
  sourceFileToAnnotationUsages.putAll(delta.sourceFileToAnnotationUsages);
  classToSourceFile.putAll(delta.classToSourceFile);
  for (  StringCache.S file : delta.fileToFileDependency.keySet()) {
    final Collection<StringCache.S> now=delta.fileToFileDependency.foxyGet(file);
    final Collection<StringCache.S> past=fileToFileDependency.foxyGet(file);
    if (past == null) {
      fileToFileDependency.put(file,now);
    }
 else {
      final Collection<StringCache.S> removeSet=new HashSet<StringCache.S>(compiled);
      removeSet.removeAll(now);
      past.addAll(now);
      past.removeAll(removeSet);
      fileToFileDependency.remove(file);
      fileToFileDependency.put(file,past);
    }
  }
}
