{
  final GithubSettings settings=GithubSettings.getInstance();
  final String password=settings.getPassword();
  final boolean validCredentials;
  try {
    validCredentials=accessToGithubWithModalProgress(project,new Computable<Boolean>(){
      @Override public Boolean compute(){
        ProgressManager.getInstance().getProgressIndicator().setText("Trying to login to GitHub");
        return testConnection(settings.getHost(),settings.getLogin(),password);
      }
    }
);
  }
 catch (  CancelledException e) {
    return null;
  }
  if (!validCredentials) {
    final GithubLoginDialog dialog=new GithubLoginDialog(project);
    dialog.show();
    if (!dialog.isOK()) {
      return null;
    }
  }
  try {
    final String settingsPassword=settings.getPassword();
    return accessToGithubWithModalProgress(project,new Computable<List<RepositoryInfo>>(){
      @Override public List<RepositoryInfo> compute(){
        ProgressManager.getInstance().getProgressIndicator().setText("Extracting info about available repositories");
        return getAvailableRepos(settings.getHost(),settings.getLogin(),settingsPassword,ownOnly);
      }
    }
);
  }
 catch (  CancelledException e) {
    return null;
  }
}
