{
  if (myInitialized)   return true;
  myStaticGenericInfo.buildMethodMaps();
  if (myComputing.get() == Boolean.TRUE)   return false;
  final XmlElement element=myInvocationHandler.getXmlElement();
  if (element == null)   return true;
  myComputing.set(Boolean.TRUE);
  try {
    DomExtensionsRegistrarImpl registrar=runDomExtenders();
synchronized (element) {
      if (myInitialized)       return true;
      if (registrar != null) {
        final SemService semService=SemService.getSemService(myInvocationHandler.getManager().getProject());
        final List<DomExtensionImpl> fixeds=registrar.getFixeds();
        final List<DomExtensionImpl> collections=registrar.getCollections();
        final List<DomExtensionImpl> attributes=registrar.getAttributes();
        if (!attributes.isEmpty()) {
          ChildrenDescriptionsHolder<AttributeChildDescriptionImpl> newAttributes=new ChildrenDescriptionsHolder<AttributeChildDescriptionImpl>(myStaticGenericInfo.getAttributes());
          for (          final DomExtensionImpl extension : attributes) {
            newAttributes.addDescription(extension.addAnnotations(new AttributeChildDescriptionImpl(extension.getXmlName(),extension.getType())));
          }
          for (          XmlAttribute attribute : ((XmlTag)element).getAttributes()) {
            semService.clearCachedSemElements(attribute);
          }
          myAttributes=newAttributes;
        }
        boolean clearSubTags=false;
        if (!fixeds.isEmpty()) {
          ChildrenDescriptionsHolder<FixedChildDescriptionImpl> newFixeds=new ChildrenDescriptionsHolder<FixedChildDescriptionImpl>(myStaticGenericInfo.getFixed());
          for (          final DomExtensionImpl extension : fixeds) {
            newFixeds.addDescription(extension.addAnnotations(new FixedChildDescriptionImpl(extension.getXmlName(),extension.getType(),extension.getCount(),ArrayUtil.EMPTY_COLLECTION_ARRAY)));
          }
          clearSubTags=true;
          myFixeds=newFixeds;
        }
        if (!collections.isEmpty()) {
          ChildrenDescriptionsHolder<CollectionChildDescriptionImpl> newCollections=new ChildrenDescriptionsHolder<CollectionChildDescriptionImpl>(myStaticGenericInfo.getCollections());
          for (          final DomExtensionImpl extension : collections) {
            newCollections.addDescription(extension.addAnnotations(new CollectionChildDescriptionImpl(extension.getXmlName(),extension.getType(),Collections.<JavaMethod>emptyList())));
          }
          clearSubTags=true;
          myCollections=newCollections;
        }
        final DomExtensionImpl extension=registrar.getCustomChildrenType();
        if (extension != null) {
          myCustomChildren=new CustomDomChildrenDescriptionImpl(null,extension.getType(),extension.getTagNameDescriptor());
          clearSubTags=true;
        }
        if (clearSubTags) {
          for (          XmlTag tag : ((XmlTag)element).getSubTags()) {
            semService.clearCachedSemElements(tag);
          }
        }
      }
      myInitialized=true;
    }
  }
  finally {
    myComputing.set(null);
  }
  return true;
}
