{
  parsePackageStatement(builder);
  final Pair<PsiBuilder.Marker,Boolean> impListInfo=parseImportList(builder,importListStoppers);
  Boolean firstDeclarationOk=null;
  PsiBuilder.Marker firstDeclaration=null;
  PsiBuilder.Marker invalidElements=null;
  while (!builder.eof()) {
    if (builder.getTokenType() == JavaTokenType.SEMICOLON) {
      if (invalidElements != null) {
        invalidElements.error(errorMessage);
        invalidElements=null;
      }
      builder.advanceLexer();
      if (firstDeclarationOk == null)       firstDeclarationOk=false;
      continue;
    }
    final PsiBuilder.Marker declaration=declarationParser.parse(builder);
    if (declaration != null) {
      if (invalidElements != null) {
        invalidElements.errorBefore(errorMessage,declaration);
        invalidElements=null;
      }
      if (firstDeclarationOk == null) {
        firstDeclarationOk=exprType(declaration) != JavaElementType.MODIFIER_LIST;
        if (firstDeclarationOk) {
          firstDeclaration=declaration;
        }
      }
      continue;
    }
    if (invalidElements == null) {
      invalidElements=builder.mark();
    }
    builder.advanceLexer();
    if (firstDeclarationOk == null)     firstDeclarationOk=false;
  }
  if (invalidElements != null) {
    invalidElements.error(errorMessage);
  }
  if (impListInfo.second && firstDeclarationOk == Boolean.TRUE) {
    impListInfo.first.setCustomEdgeTokenBinders(JavaParserUtil.PRECEDING_COMMENT_BINDER,null);
    firstDeclaration.setCustomEdgeTokenBinders(JavaParserUtil.SPECIAL_PRECEDING_COMMENT_BINDER,null);
  }
}
