{
  if (host instanceof XmlComment) {
    final ASTNode comment=host.getNode();
    if (comment != null) {
      final ASTNode[] conditionalStarts=comment.getChildren(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_START_END));
      if (conditionalStarts.length > 0) {
        final ASTNode[] conditionalEnds=comment.getChildren(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_END_START));
        if (conditionalEnds.length > 0) {
          final ASTNode[] endOfEnd=comment.getChildren(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_END));
          if (endOfEnd.length > 0) {
            final TextRange textRange=host.getTextRange();
            final int startOffset=textRange.getStartOffset();
            final ASTNode start=conditionalStarts[0];
            final ASTNode end=conditionalEnds[0];
            registrar.startInjecting(HTMLLanguage.INSTANCE).addPlace(null,null,(PsiLanguageInjectionHost)host,new TextRange(start.getTextRange().getEndOffset() - startOffset,end.getStartOffset() - startOffset)).doneInjecting();
          }
        }
      }
    }
  }
}
