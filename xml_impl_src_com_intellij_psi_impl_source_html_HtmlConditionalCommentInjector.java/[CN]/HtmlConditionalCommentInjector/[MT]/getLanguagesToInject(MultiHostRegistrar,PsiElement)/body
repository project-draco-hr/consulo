{
  if (host instanceof XmlComment) {
    final ASTNode comment=host.getNode();
    if (comment != null) {
      final ASTNode conditionalStart=comment.findChildByType(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_START_END));
      if (conditionalStart != null) {
        final ASTNode conditionalEnd=comment.findChildByType(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_END_START));
        if (conditionalEnd != null) {
          final ASTNode endOfEnd=comment.findChildByType(TokenSet.create(XmlTokenType.XML_CONDITIONAL_COMMENT_END));
          if (endOfEnd != null) {
            final TextRange textRange=host.getTextRange();
            final int startOffset=textRange.getStartOffset();
            Language language=host.getParent().getLanguage();
            TextRange range=new TextRange(conditionalStart.getTextRange().getEndOffset() - startOffset,conditionalEnd.getStartOffset() - startOffset);
            registrar.startInjecting(language).addPlace(null,null,(PsiLanguageInjectionHost)host,range).doneInjecting();
          }
        }
      }
    }
  }
}
