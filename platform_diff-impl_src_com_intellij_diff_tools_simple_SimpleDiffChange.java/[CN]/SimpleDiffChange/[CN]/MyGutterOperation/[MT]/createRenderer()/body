{
  myCtrlPressed=myViewer.getModifierProvider().isCtrlPressed();
  myShiftPressed=myViewer.getModifierProvider().isShiftPressed();
  boolean isEditable=DiffUtil.isEditable(myViewer.getEditor(mySide));
  boolean isOtherEditable=DiffUtil.isEditable(myViewer.getEditor(mySide.other()));
  boolean isAppendable=myFragment.getStartLine1() != myFragment.getEndLine1() && myFragment.getStartLine2() != myFragment.getEndLine2();
  if ((myShiftPressed || !isOtherEditable) && isEditable) {
    return createRevertRenderer(mySide);
  }
  if (myCtrlPressed && isAppendable) {
    return createAppendRenderer(mySide);
  }
  return createApplyRenderer(mySide);
}
