{
  int line1=getStartLine(side);
  int line2=getEndLine(side);
  int sideIndex=side.getIndex();
  DiffUtil.UpdatedLineRange newRange=DiffUtil.updateRangeOnModification(line1,line2,oldLine1,oldLine2,shift);
  myLineStartShifts[sideIndex]+=newRange.startLine - line1;
  myLineEndShifts[sideIndex]+=newRange.endLine - line2;
  if (newRange.damaged) {
    for (    MyGutterOperation operation : myOperations) {
      operation.dispose();
    }
    myOperations.clear();
    myIsValid=false;
  }
  return newRange.damaged;
}
