{
  final PsiReferenceExpression methodExpression=expression.getMethodExpression();
  if (methodName != null) {
    final String referenceName=methodExpression.getReferenceName();
    if (!methodName.equals(referenceName)) {
      return false;
    }
  }
  final PsiMethod method=expression.resolveMethod();
  if (method == null) {
    return false;
  }
  if (calledOnClassName != null) {
    final PsiExpression qualifier=methodExpression.getQualifierExpression();
    if (qualifier != null) {
      if (!TypeUtils.expressionHasTypeOrSubtype(calledOnClassName,qualifier)) {
        return false;
      }
      return MethodUtils.methodMatches(method,null,returnType,methodName,parameterTypes);
    }
  }
  return MethodUtils.methodMatches(method,calledOnClassName,returnType,methodName,parameterTypes);
}
