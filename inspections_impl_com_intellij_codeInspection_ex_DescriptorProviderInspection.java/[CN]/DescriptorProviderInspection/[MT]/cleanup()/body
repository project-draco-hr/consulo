{
  super.cleanup();
  final GlobalInspectionContextImpl context=getContext();
  if (context != null && context.getUIOptions().SHOW_DIFF_WITH_PREVIOUS_RUN) {
    if (myOldProblemElements == null) {
      myOldProblemElements=new HashMap<RefEntity,CommonProblemDescriptor[]>();
    }
    myOldProblemElements.clear();
    myOldProblemElements.putAll(myIgnoredElements);
    myOldProblemElements.putAll(myProblemElements);
  }
 else {
    myOldProblemElements=null;
  }
  myProblemElements.clear();
  myProblemToElements.clear();
  myQuickFixActions.clear();
  myIgnoredElements.clear();
  myPackageContents=null;
  myModulesProblems=null;
}
