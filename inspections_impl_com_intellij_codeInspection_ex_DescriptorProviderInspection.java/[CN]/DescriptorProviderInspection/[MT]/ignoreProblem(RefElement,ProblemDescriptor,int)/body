{
  if (refElement == null)   return;
  final Set<LocalQuickFix> localQuickFixes=myQuickFixActions.get(refElement);
  final LocalQuickFix[] fixes=problem.getFixes();
  if (isIgnoreProblem(fixes,localQuickFixes,idx)) {
    myProblemToElements.remove(problem);
    ProblemDescriptor[] descriptors=myProblemElements.get(refElement);
    if (descriptors != null) {
      ArrayList<ProblemDescriptor> newDescriptors=new ArrayList<ProblemDescriptor>(Arrays.asList(descriptors));
      newDescriptors.remove(problem);
      myQuickFixActions.put(refElement,null);
      if (newDescriptors.size() > 0) {
        myProblemElements.put(refElement,newDescriptors.toArray(new ProblemDescriptor[newDescriptors.size()]));
        for (        ProblemDescriptor descriptor : newDescriptors) {
          collectQuickFixes(descriptor.getFixes(),refElement);
        }
      }
 else {
        myProblemElements.remove(refElement);
      }
    }
  }
}
