{
  final VirtualFile[][] result=new VirtualFile[1][];
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      if (directory.isValid()) {
        result[0]=directory.getChildren();
      }
    }
  }
);
  return result[0];
}
