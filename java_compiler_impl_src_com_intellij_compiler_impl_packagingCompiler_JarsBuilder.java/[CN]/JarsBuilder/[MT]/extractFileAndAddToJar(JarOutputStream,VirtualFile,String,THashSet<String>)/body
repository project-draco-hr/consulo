{
  relativePath=addParentDirectories(jarOutputStream,writtenPaths,relativePath);
  myContext.getProgressIndicator().setText2(relativePath);
  if (!writtenPaths.add(relativePath))   return;
  final BufferedInputStream input=ArtifactCompilerUtil.getJarEntryInputStream(sourceFile,myContext);
  if (input == null)   return;
  ZipEntry entry=new ZipEntry(relativePath);
  entry.setTime(ArtifactCompilerUtil.getJarFile(sourceFile).lastModified());
  jarOutputStream.putNextEntry(entry);
  FileUtil.copy(input,jarOutputStream);
  jarOutputStream.closeEntry();
}
