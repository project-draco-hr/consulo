{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  if (project != null) {
    final FileChooserDescriptor descriptor=new FileChooserDescriptor(false,true,false,false,false,false);
    final VirtualFile[] files1=FileChooserFactory.getInstance().createFileChooser(descriptor,project).choose(null,project);
    final VirtualFile[] files2=FileChooserFactory.getInstance().createFileChooser(descriptor,project).choose(null,project);
    if (files1.length == 1 && files2.length == 1) {
      final DirDiffManager diffManager=DirDiffManager.getInstance(project);
      if (diffManager.canShow(files1[0],files2[0])) {
        diffManager.showDiff(files1[0],files2[0]);
      }
    }
  }
}
