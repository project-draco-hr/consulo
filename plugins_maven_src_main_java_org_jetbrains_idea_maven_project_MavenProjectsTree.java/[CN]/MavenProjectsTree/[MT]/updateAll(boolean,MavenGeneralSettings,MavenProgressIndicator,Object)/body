{
  List<VirtualFile> managedFiles=getExistingManagedFiles();
  Collection<String> explicitProfiles=getExplicitProfiles();
  MavenProjectReader projectReader=new MavenProjectReader();
  update(managedFiles,true,force,explicitProfiles,projectReader,generalSettings,process,message);
  List<VirtualFile> obsoleteFiles=getRootProjectsFiles();
  obsoleteFiles.removeAll(managedFiles);
  delete(projectReader,obsoleteFiles,explicitProfiles,generalSettings,process,message);
}
