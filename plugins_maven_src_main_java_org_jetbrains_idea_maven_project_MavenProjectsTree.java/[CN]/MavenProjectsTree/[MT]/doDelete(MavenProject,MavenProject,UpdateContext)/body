{
  for (  MavenProject each : getModules(project)) {
    if (isManagedFile(each.getPath())) {
      if (reconnect(null,each)) {
        updateContext.update(each,new MavenProjectChanges());
      }
    }
 else {
      doDelete(project,each,updateContext);
    }
  }
  writeLock();
  try {
    if (aggregator != null) {
      removeModule(aggregator,project);
    }
 else {
      myRootProjects.remove(project);
    }
    myTimestamps.remove(project);
    myVirtualFileToProjectMapping.remove(project.getFile());
    myMavenIdToProjectMapping.remove(project.getMavenId());
    myAggregatorToModuleMapping.remove(project);
    myModuleToAggregatorMapping.remove(project);
  }
  finally {
    writeUnlock();
  }
  updateContext.deleted(project);
}
