{
  int count=in.readInt();
  List<MavenProject> result=new ArrayList<MavenProject>(count);
  while (count-- > 0) {
    MavenProject project=MavenProject.read(in);
    MavenProjectTimestamp timestamp=MavenProjectTimestamp.read(in);
    List<MavenProject> modules=readProjectsRecursively(in,tree);
    if (project != null) {
      result.add(project);
      tree.myTimestamps.put(project,timestamp);
      tree.myVirtualFileToProjectMapping.put(project.getFile(),project);
      tree.myMavenIdToProjectMapping.put(project.getMavenId(),project);
      tree.myMavenIdToFileMapping.put(project.getMavenId(),project.getFile());
      tree.myAggregatorToModuleMapping.put(project,modules);
      for (      MavenProject eachModule : modules) {
        tree.myModuleToAggregatorMapping.put(eachModule,project);
      }
    }
  }
  return result;
}
