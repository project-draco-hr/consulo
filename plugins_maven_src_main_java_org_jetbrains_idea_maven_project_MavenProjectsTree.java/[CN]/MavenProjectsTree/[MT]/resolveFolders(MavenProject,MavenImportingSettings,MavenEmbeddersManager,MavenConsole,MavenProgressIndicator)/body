{
  MavenEmbedderWrapper embedder=embeddersManager.getEmbedder(EmbedderKind.EMBEDDER_FOR_FOLDERS_RESOLVE);
  embedder.customizeForStrictResolve(this,console,process);
  embeddersManager.clearCachesFor(mavenProject);
  try {
    process.checkCanceled();
    process.setText(ProjectBundle.message("maven.updating.folders.pom",FileUtil.toSystemDependentName(mavenProject.getPath())));
    process.setText2("");
    Pair<Boolean,MavenProjectChanges> resolveResult=mavenProject.resolveFolders(embedder,importingSettings,new MavenProjectReader(),console,process);
    if (resolveResult.first) {
      fireFoldersResolved(Pair.create(mavenProject,resolveResult.second));
    }
  }
  finally {
    embeddersManager.release(embedder);
  }
}
