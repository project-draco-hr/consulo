{
  List<MavenProjectModel> projectsToUpdate=new ArrayList<MavenProjectModel>();
  List<MavenProjectModel> removedProjects=new ArrayList<MavenProjectModel>();
  for (  VirtualFile each : files) {
    p.checkCanceled();
    MavenProjectModel project=findProject(each);
    if (project == null)     return;
    projectsToUpdate.addAll(findInheritors(project));
    doRemove(findAggregator(project),project,removedProjects);
  }
  projectsToUpdate.removeAll(removedProjects);
  List<VirtualFile> filesToUpdate=new ArrayList<VirtualFile>();
  for (  MavenProjectModel each : projectsToUpdate) {
    filesToUpdate.add(each.getFile());
  }
  update(filesToUpdate,mavenSettings,p);
}
