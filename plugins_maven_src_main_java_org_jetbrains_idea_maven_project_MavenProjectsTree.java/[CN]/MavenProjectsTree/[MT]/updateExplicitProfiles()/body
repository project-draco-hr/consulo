{
  Collection<String> available=getAvailableProfiles();
synchronized (myStateLock) {
    Collection<String> removedProfiles=new THashSet<String>(myExplicitProfiles);
    removedProfiles.removeAll(available);
    myTemporarilyRemovedExplicitProfiles.addAll(removedProfiles);
    Collection<String> restoredProfiles=new THashSet<String>(myTemporarilyRemovedExplicitProfiles);
    restoredProfiles.retainAll(available);
    myTemporarilyRemovedExplicitProfiles.removeAll(restoredProfiles);
    myExplicitProfiles.removeAll(removedProfiles);
    myExplicitProfiles.addAll(restoredProfiles);
  }
}
