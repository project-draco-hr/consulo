{
  if (files.isEmpty())   return;
  UpdateContext updateContext=new UpdateContext();
  Stack<MavenProject> updateStack=new Stack<MavenProject>();
  for (  VirtualFile each : files) {
    MavenProject mavenProject=findProject(each);
    if (mavenProject == null) {
      doAdd(each,recursive,updateContext,updateStack,projectReader,generalSettings,process);
    }
 else {
      doUpdate(mavenProject,findAggregator(mavenProject),false,recursive,updateContext,updateStack,projectReader,generalSettings,process);
    }
  }
  updateContext.fireUpdatedIfNecessary();
}
