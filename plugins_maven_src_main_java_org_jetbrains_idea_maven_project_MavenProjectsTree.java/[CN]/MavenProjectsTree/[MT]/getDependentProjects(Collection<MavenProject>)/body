{
  readLock();
  try {
    List<MavenProject> result=null;
    Set<MavenCoordinate> projectIds=new THashSet<MavenCoordinate>(new MavenCoordinateHashCodeStrategy());
    for (    MavenProject project : projects) {
      projectIds.add(project.getMavenId());
    }
    for (    MavenProject project : myVirtualFileToProjectMapping.values()) {
      for (      MavenArtifact dep : project.getDependencies()) {
        if (projectIds.contains(dep)) {
          if (result == null)           result=new ArrayList<MavenProject>();
          result.add(project);
          break;
        }
      }
    }
    return result == null ? Collections.<MavenProject>emptyList() : result;
  }
  finally {
    readUnlock();
  }
}
