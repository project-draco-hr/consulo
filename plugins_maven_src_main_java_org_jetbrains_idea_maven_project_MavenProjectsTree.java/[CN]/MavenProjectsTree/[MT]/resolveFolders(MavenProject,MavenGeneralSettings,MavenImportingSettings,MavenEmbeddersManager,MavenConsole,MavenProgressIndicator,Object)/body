{
  doWithEmbedder(mavenProject,embeddersManager,MavenEmbeddersManager.EmbedderKind.FOR_FOLDERS_RESOLVE,console,process,new EmbedderTask(){
    public void run(    MavenEmbedderWrapper embedder) throws MavenProcessCanceledException {
      process.checkCanceled();
      process.setText(ProjectBundle.message("maven.updating.folders.pom",mavenProject.getDisplayName()));
      process.setText2("");
      Pair<Boolean,MavenProjectChanges> resolveResult=mavenProject.resolveFolders(embedder,generalSettings,importingSettings,new MavenProjectReader(),console);
      if (resolveResult.first) {
        fireFoldersResolved(Pair.create(mavenProject,resolveResult.second),message);
      }
    }
  }
);
}
