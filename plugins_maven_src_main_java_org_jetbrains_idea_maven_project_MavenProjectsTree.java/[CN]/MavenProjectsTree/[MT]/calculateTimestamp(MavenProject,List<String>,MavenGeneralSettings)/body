{
  long pomTimestamp=getFileTimestamp(mavenProject.getFile());
  MavenProject parent=findParent(mavenProject);
  long parentLastReadStamp=parent == null ? -1 : parent.getLastReadStamp();
  VirtualFile profilesXmlFile=mavenProject.getDirectoryFile().findChild(MavenConstants.PROFILES_XML);
  long profilesTimestamp=getFileTimestamp(profilesXmlFile);
  File userSettings=MavenEmbedderFactory.resolveUserSettingsFile(generalSettings.getMavenSettingsFile());
  File globalSettings=MavenEmbedderFactory.resolveGlobalSettingsFile(generalSettings.getMavenHome());
  long userSettingsTimestamp=getFileTimestamp(userSettings);
  long globalSettingsTimestamp=getFileTimestamp(globalSettings);
  int profilesHashCode=new HashSet<String>(activeProfiles).hashCode();
  return new MavenProjectTimestamp(pomTimestamp,parentLastReadStamp,profilesTimestamp,userSettingsTimestamp,globalSettingsTimestamp,profilesHashCode);
}
