{
  if (container instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)container;
    int startOffset=method.getModifierList().getTextRange().getStartOffset();
    int endOffset=method.getThrowsList().getTextRange().getEndOffset();
    return new TextRange(startOffset,endOffset);
  }
 else   if (container instanceof PsiClass) {
    PsiClass aClass=(PsiClass)container;
    if (aClass instanceof PsiAnonymousClass) {
      PsiNewExpression newExpr=(PsiNewExpression)aClass.getParent();
      int startOffset=newExpr.getTextRange().getStartOffset();
      int endOffset=newExpr.getArgumentList().getTextRange().getEndOffset();
      return new TextRange(startOffset,endOffset);
    }
 else {
      int startOffset=aClass.getModifierList().getTextRange().getStartOffset();
      int endOffset=aClass.getImplementsList().getTextRange().getEndOffset();
      return new TextRange(startOffset,endOffset);
    }
  }
 else   if (container instanceof PsiClassInitializer) {
    PsiClassInitializer initializer=(PsiClassInitializer)container;
    int startOffset=initializer.getModifierList().getTextRange().getStartOffset();
    int endOffset=initializer.getBody().getTextRange().getStartOffset();
    return new TextRange(startOffset,endOffset);
  }
 else   if (container instanceof XmlTag) {
    XmlTag xmlTag=(XmlTag)container;
    int endOffset=xmlTag.getTextRange().getStartOffset();
    for (PsiElement child=xmlTag.getFirstChild(); child != null; child=child.getNextSibling()) {
      endOffset=child.getTextRange().getEndOffset();
      if (child instanceof XmlToken) {
        XmlToken token=(XmlToken)child;
        IElementType tokenType=token.getTokenType();
        if (tokenType == XmlTokenType.XML_EMPTY_ELEMENT_END || tokenType == XmlTokenType.XML_TAG_END)         break;
      }
    }
    return new TextRange(xmlTag.getTextRange().getStartOffset(),endOffset);
  }
 else {
    LOG.assertTrue(false);
    return null;
  }
}
