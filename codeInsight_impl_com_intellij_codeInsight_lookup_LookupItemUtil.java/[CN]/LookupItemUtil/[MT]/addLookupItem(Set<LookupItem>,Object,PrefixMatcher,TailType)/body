{
  if (object instanceof PsiType) {
    PsiType psiType=(PsiType)object;
    for (    final LookupItem lookupItem : set) {
      Object o=lookupItem.getObject();
      if (o.equals(psiType)) {
        return lookupItem;
      }
    }
  }
  for (  LookupItem lookupItem : set) {
    if (lookupItem.getObject().equals(lookupItem))     return null;
  }
  LookupItem item=objectToLookupItem(object);
  String text=item.getLookupString();
  if (matcher.prefixMatches(item)) {
    item.setLookupString(text);
    if (tailType != TailType.UNKNOWN) {
      item.setAttribute(CompletionUtil.TAIL_TYPE_ATTR,tailType);
    }
    return set.add(item) ? item : null;
  }
  return null;
}
