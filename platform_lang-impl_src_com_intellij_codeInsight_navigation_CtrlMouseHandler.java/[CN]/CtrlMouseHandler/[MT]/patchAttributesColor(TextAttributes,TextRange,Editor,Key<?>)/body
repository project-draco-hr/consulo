{
  if (key != null) {
    int line=editor.offsetToLogicalPosition(range.getStartOffset()).line;
    for (    RangeHighlighter highlighter : editor.getMarkupModel().getAllHighlighters()) {
      Object hasKey=highlighter.getUserData(key);
      if (hasKey instanceof Boolean && ((Boolean)hasKey).booleanValue()) {
        if (editor.offsetToLogicalPosition(highlighter.getStartOffset()).line == line) {
          TextAttributes clone=attributes.clone();
          clone.setForegroundColor(Color.orange);
          clone.setEffectColor(Color.orange);
          return clone;
        }
      }
    }
  }
  return attributes;
}
