{
  final JComponent internalComponent=editor.getContentComponent();
  internalComponent.addKeyListener(myEditorKeyListener);
  editor.getScrollingModel().addVisibleAreaListener(myVisibleAreaListener);
  final Cursor cursor=internalComponent.getCursor();
  internalComponent.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
  myFileEditorManager.addFileEditorManagerListener(myFileEditorManagerListener);
  List<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
  TextAttributes attributes=myEditorColorsManager.getGlobalScheme().getAttributes(EditorColors.REFERENCE_HYPERLINK_COLOR);
  for (  TextRange range : info.getRanges()) {
    TextAttributes attr=patchAttributesColor(attributes,range,editor);
    final RangeHighlighter highlighter=editor.getMarkupModel().addRangeHighlighter(range.getStartOffset(),range.getEndOffset(),HighlighterLayer.SELECTION + 1,attr,HighlighterTargetArea.EXACT_RANGE);
    highlighters.add(highlighter);
  }
  return new HighlightersSet(highlighters,editor,cursor,info);
}
