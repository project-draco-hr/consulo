{
  PsiElement resolvedElement=ref.resolve();
  if (resolvedElement == null && ref instanceof PsiPolyVariantReference) {
    List<PsiElement> result=new ArrayList<PsiElement>();
    final ResolveResult[] psiElements=((PsiPolyVariantReference)ref).multiResolve(false);
    for (    ResolveResult resolveResult : psiElements) {
      if (resolveResult.getElement() != null) {
        result.add(resolveResult.getElement());
      }
    }
    return result;
  }
  return resolvedElement == null ? Collections.<PsiElement>emptyList() : Collections.singletonList(resolvedElement);
}
