{
  int line=editor.offsetToLogicalPosition(range.getStartOffset()).line;
  for (  RangeHighlighter highlighter : editor.getMarkupModel().getAllHighlighters()) {
    if (!highlighter.isValid())     continue;
    if (highlighter.getTargetArea() == HighlighterTargetArea.LINES_IN_RANGE && editor.offsetToLogicalPosition(highlighter.getStartOffset()).line == line) {
      TextAttributes textAttributes=highlighter.getTextAttributes();
      if (textAttributes != null) {
        Color color=textAttributes.getBackgroundColor();
        if (color != null && color.getBlue() > 128 && color.getRed() < 128 && color.getGreen() < 128) {
          TextAttributes clone=attributes.clone();
          clone.setForegroundColor(Color.orange);
          clone.setEffectColor(Color.orange);
          return clone;
        }
      }
    }
  }
  return attributes;
}
