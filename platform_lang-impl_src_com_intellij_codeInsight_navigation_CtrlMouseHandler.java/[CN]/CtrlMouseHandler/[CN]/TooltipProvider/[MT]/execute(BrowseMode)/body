{
  myBrowseMode=browseMode;
  Document document=myEditor.getDocument();
  final PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
  if (file == null)   return;
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  if (TargetElementUtilBase.inVirtualSpace(myEditor,myPosition)) {
    return;
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          doExecute(file);
        }
      }
);
    }
  }
);
}
