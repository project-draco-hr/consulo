{
  if (scope == null) {
    return;
  }
  processor.addFileFilter(new VirtualFileFilter(){
    @Override public boolean accept(    @NotNull VirtualFile file){
      if (scope instanceof LocalSearchScope) {
        return ((LocalSearchScope)scope).isInScope(file);
      }
      if (scope instanceof GlobalSearchScope) {
        return ((GlobalSearchScope)scope).contains(file);
      }
      return false;
    }
  }
);
}
