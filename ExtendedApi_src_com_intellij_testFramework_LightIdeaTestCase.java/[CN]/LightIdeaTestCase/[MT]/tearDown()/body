{
  CodeStyleSettingsManager.getInstance(getProject()).setTemporarySettings(null);
  assertNotNull("Application components damaged",ProjectManager.getInstance());
  final IOException[] exception=new IOException[1];
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      try {
        final VirtualFile[] children=ourSourceRoot.getChildren();
        for (int i=0; i < children.length; i++) {
          children[i].delete(this);
        }
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
);
  if (exception[0] != null)   throw exception[0];
  assertFalse(PsiManager.getInstance(getProject()).isDisposed());
  if (!myAssertionsInTestDetected) {
    if (IdeaLogger.ourErrorsOccurred != null) {
      throw IdeaLogger.ourErrorsOccurred;
    }
  }
  ourApplication.setDataProvider(null);
  ourTestCase=null;
  ((PsiManagerImpl)ourPsiManager).cleanupForNextTest();
  super.tearDown();
  final Editor[] allEditors=EditorFactory.getInstance().getAllEditors();
  if (allEditors.length > 0) {
    for (int i=0; i < allEditors.length; i++) {
      EditorFactory.getInstance().releaseEditor(allEditors[i]);
    }
    fail("Unreleased editors: " + allEditors.length);
  }
}
