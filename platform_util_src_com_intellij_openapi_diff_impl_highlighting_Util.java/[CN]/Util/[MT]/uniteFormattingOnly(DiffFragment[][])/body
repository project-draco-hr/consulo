{
  List2D result=new List2D();
  for (int i=0; i < lines.length; i++) {
    DiffFragment[] line=lines[i];
    if (!areEqual(line) && areEqualOrFormatting(line))     result.addAll(line);
 else {
      result.newRow();
      result.addAll(line);
      result.newRow();
    }
  }
  return result.toArray();
}
