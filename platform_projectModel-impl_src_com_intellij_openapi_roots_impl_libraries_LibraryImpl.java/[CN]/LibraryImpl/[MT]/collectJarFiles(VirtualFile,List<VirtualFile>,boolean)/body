{
  VfsUtilCore.visitChildrenRecursively(dir,new VirtualFileVisitor(SKIP_ROOT,(recursively ? null : ONE_LEVEL_DEEP)){
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      VirtualFile archiveFileAsContainer=ArchiveVfsUtil.getJarRootForLocalFile(file);
      if (archiveFileAsContainer != null) {
        container.add(archiveFileAsContainer);
        return false;
      }
      return true;
    }
  }
);
}
