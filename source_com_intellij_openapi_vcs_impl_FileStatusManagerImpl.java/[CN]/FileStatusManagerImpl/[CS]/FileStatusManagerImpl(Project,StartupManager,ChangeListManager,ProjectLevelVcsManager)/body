{
  myProject=project;
  myVcsManager=vcsManager;
  startupManager.registerPostStartupActivity(new Runnable(){
    public void run(){
      fileStatusesChanged();
    }
  }
);
  changeListManager.addChangeListListener(new ChangeListAdapter(){
    public void changeListAdded(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListRemoved(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListChanged(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListUpdateDone(){
      ProjectLevelVcsManagerImpl vcsManager=(ProjectLevelVcsManagerImpl)myVcsManager;
      if (vcsManager.hasEmptyContentRevisions()) {
        vcsManager.resetHaveEmptyContentRevisions();
        fileStatusesChanged();
      }
    }
    @Override public void unchangedFileStatusChanged(){
      fileStatusesChanged();
    }
  }
);
}
