{
  VirtualFile file=FileDocumentManager.getInstance().getFile(event.getDocument());
  if (file != null) {
    FileStatus cachedStatus=getCachedStatus(file);
    if (cachedStatus == FileStatus.NOT_CHANGED) {
      fileStatusChanged(file);
      final AbstractVcs vcs=myVcsManager.getVcsFor(file);
      if (vcs == null)       return;
      ChangeProvider cp=vcs.getChangeProvider();
      if (cp == null || !cp.isModifiedDocumentTrackingRequired())       return;
      VcsDirtyScopeManager.getInstance(myProject).fileDirty(file);
    }
  }
}
