{
  final Map<String,List<String>> out=new HashMap<String,List<String>>();
  final Map<String,List<String>> in=new HashMap<String,List<String>>();
  for (  String s : graph.keySet()) {
    out.put(s,new ArrayList<String>());
    in.put(s,new ArrayList<String>());
  }
  for (  Map.Entry<String,String> entry : graph.entrySet()) {
    String from=entry.getKey();
    for (int i=0; i < entry.getValue().length(); i++) {
      String to=String.valueOf(entry.getValue().charAt(i));
      out.get(from).add(to);
      in.get(to).add(from);
    }
  }
  return new Graph<String>(){
    @Override public Collection<String> getNodes(){
      return graph.keySet();
    }
    @Override public Iterator<String> getIn(    final String n){
      return in.get(n).iterator();
    }
    @Override public Iterator<String> getOut(    String n){
      return out.get(n).iterator();
    }
  }
;
}
