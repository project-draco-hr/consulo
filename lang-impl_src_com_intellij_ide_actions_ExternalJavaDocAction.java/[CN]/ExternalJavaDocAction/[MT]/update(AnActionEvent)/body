{
  Presentation presentation=event.getPresentation();
  DataContext dataContext=event.getDataContext();
  Editor editor=PlatformDataKeys.EDITOR.getData(dataContext);
  final PsiElement element=LangDataKeys.PSI_ELEMENT.getData(dataContext);
  final PsiElement originalElement=getOriginalElement(LangDataKeys.PSI_FILE.getData(dataContext),editor);
  DocumentationManager.storeOriginalElement(PlatformDataKeys.PROJECT.getData(dataContext),originalElement,element);
  final DocumentationProvider provider=DocumentationManager.getProviderFromElement(element);
  boolean enabled=provider instanceof ExtensibleDocumentationProvider && ((ExtensibleDocumentationProvider)provider).isExternalDocumentationEnabled(element,originalElement);
  if (editor != null) {
    presentation.setEnabled(enabled);
    if (event.getPlace().equals(ActionPlaces.MAIN_MENU)) {
      presentation.setEnabled(true);
    }
 else {
      presentation.setEnabled(enabled);
    }
  }
 else {
    presentation.setEnabled(enabled);
  }
}
