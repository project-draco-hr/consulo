{
  if (modules.isEmpty())   return;
  saveData();
  modules.removeAll(Arrays.asList(myModifiedConfiguration.getContainingIdeaModules()));
  ContainerElement last=null;
  for (  Module module : modules) {
    ModuleLink element=DeploymentUtil.getInstance().createModuleLink(module,myPolicy.getModule());
    addElement(element);
    last=element;
  }
  rebuildTree();
  if (last != null) {
    selectElement(last,false);
  }
}
