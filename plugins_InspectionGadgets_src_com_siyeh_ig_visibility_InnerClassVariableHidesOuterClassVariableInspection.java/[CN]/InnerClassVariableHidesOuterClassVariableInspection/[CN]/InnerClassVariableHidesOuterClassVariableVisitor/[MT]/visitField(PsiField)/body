{
  final PsiClass aClass=field.getContainingClass();
  if (aClass == null) {
    return;
  }
  final String fieldName=field.getName();
  if ("serialVersionUID".equals(fieldName)) {
    return;
  }
  boolean reportStaticsOnly=false;
  if (aClass.hasModifierProperty(PsiModifier.STATIC)) {
    reportStaticsOnly=true;
  }
  PsiClass ancestorClass=ClassUtils.getContainingClass(aClass);
  while (ancestorClass != null) {
    final PsiField ancestorField=ancestorClass.findFieldByName(fieldName,false);
    if (ancestorField != null) {
      if (!m_ignoreInvisibleFields || !reportStaticsOnly || field.hasModifierProperty(PsiModifier.STATIC)) {
        registerFieldError(field);
      }
    }
    ancestorClass=ClassUtils.getContainingClass(ancestorClass);
  }
}
