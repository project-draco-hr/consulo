{
  try {
    InputStream stream=getClass().getResourceAsStream(name);
    Document document=new SAXBuilder().build(stream);
    stream.close();
    Element rootElement=document.getRootElement();
    ClassLoader classLoader=getClass().getClassLoader();
    Map<MetaModel,List<String>> modelToMorphing=new HashMap<MetaModel,List<String>>();
    for (    Object element : rootElement.getChildren(META)) {
      loadModel(classLoader,(Element)element,modelToMorphing);
    }
    for (    Object element : rootElement.getChild(PALETTE).getChildren(GROUP)) {
      loadGroup((Element)element);
    }
    Element wrapInElement=rootElement.getChild(WRAP_IN);
    if (wrapInElement != null) {
      for (      Object element : wrapInElement.getChildren(ITEM)) {
        Element item=(Element)element;
        myWrapModels.add(myTag2Model.get(item.getAttributeValue("tag")));
      }
    }
    for (    Map.Entry<MetaModel,List<String>> entry : modelToMorphing.entrySet()) {
      MetaModel meta=entry.getKey();
      List<MetaModel> morphingModels=new ArrayList<MetaModel>();
      for (      String tag : entry.getValue()) {
        MetaModel morphingModel=myTag2Model.get(tag);
        if (morphingModel != null) {
          morphingModels.add(morphingModel);
        }
      }
      if (!morphingModels.isEmpty()) {
        meta.setMorphingModels(morphingModels);
      }
    }
  }
 catch (  Throwable e) {
    LOG.error(e);
  }
}
