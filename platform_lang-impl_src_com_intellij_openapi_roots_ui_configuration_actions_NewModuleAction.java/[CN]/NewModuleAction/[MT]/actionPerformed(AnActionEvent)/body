{
  final Project project=getEventProject(e);
  if (project == null) {
    return;
  }
  Object dataFromContext=prepareDataFromContext(e);
  String defaultPath=null;
  final VirtualFile virtualFile=e.getData(CommonDataKeys.VIRTUAL_FILE);
  if (virtualFile != null && virtualFile.isDirectory()) {
    defaultPath=virtualFile.getPath();
  }
  if (!EarlyAccessProgramManager.getInstance().getState(NewModuleWizard.class)) {
    showModuleWizard(project,dataFromContext,defaultPath);
  }
 else {
    Module moduleBySimpleWay=createModuleBySimpleWay(project,virtualFile);
    if (moduleBySimpleWay != null) {
      processCreatedModule(moduleBySimpleWay,dataFromContext);
    }
  }
}
