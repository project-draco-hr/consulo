{
  FileType fileType;
  if (myTemplate != null) {
    String extension=myTemplate.getExtension();
    fileType=FileTypeManager.getInstance().getFileTypeByExtension(extension);
  }
 else {
    fileType=StdFileTypes.PLAIN_TEXT;
  }
  SyntaxHighlighter originalHighlighter=fileType.getHighlighter(null,null);
  if (originalHighlighter == null)   originalHighlighter=new PlainSyntaxHighlighter();
  EditorHighlighter highlighter=new LexerEditorHighlighter(new TemplateHighlighter(originalHighlighter),EditorColorsManager.getInstance().getGlobalScheme());
  ((EditorEx)myTemplateEditor).setHighlighter(highlighter);
  ((EditorEx)myTemplateEditor).repaint(0,myTemplateEditor.getDocument().getTextLength());
}
