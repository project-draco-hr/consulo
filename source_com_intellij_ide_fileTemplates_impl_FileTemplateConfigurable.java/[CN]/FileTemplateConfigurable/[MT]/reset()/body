{
  final String text=(myTemplate == null) ? "" : myTemplate.getText();
  String name=(myTemplate == null) ? "" : myTemplate.getName();
  String extension=(myTemplate == null) ? "" : myTemplate.getExtension();
  String description=(myTemplate == null) ? "" : myTemplate.getDescription();
  if (description == null) {
    description="";
  }
  if ((description.length() == 0) && (myDefaultDescription != null)) {
    try {
      description=VfsUtil.loadText(myDefaultDescription);
    }
 catch (    IOException e) {
      LOG.error(e);
    }
  }
  boolean adjust=(myTemplate != null) && myTemplate.isAdjust();
  setHighlighter();
  myNameField.setText(name);
  myExtensionField.setText(extension);
  myAdjustBox.setSelected(adjust);
  String desc=description.length() > 0 ? description : EMPTY_HTML;
  myDescriptionComponent.setContentType(CONTENT_TYPE_PLAIN);
  myDescriptionComponent.setEditable(true);
  myDescriptionComponent.setText(desc);
  myDescriptionComponent.setContentType(CONTENT_TYPE_HTML);
  myDescriptionComponent.setText(desc);
  myDescriptionComponent.setCaretPosition(0);
  myDescriptionComponent.setEditable(false);
  CommandProcessor.getInstance().executeCommand(null,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          final Document document=myTemplateEditor.getDocument();
          document.replaceString(0,document.getTextLength(),text);
          UndoManager.getGlobalInstance().undoableActionPerformed(new NonUndoableAction(){
            public DocumentReference[] getAffectedDocuments(){
              return new DocumentReference[]{DocumentReferenceByDocument.createDocumentReference(document)};
            }
            public boolean isComplex(){
              return false;
            }
          }
);
        }
      }
);
    }
  }
,"",null);
  myNameField.setEditable((myTemplate != null) && (!myTemplate.isDefault()));
  myExtensionField.setEditable((myTemplate != null) && (!myTemplate.isDefault()));
  myModified=false;
}
