{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  checkValid();
  if (myStackFrame == null) {
    try {
      final ThreadReference threadRef=myThreadProxy.getThreadReference();
      myStackFrame=threadRef.frame(getFrameIndex());
    }
 catch (    IndexOutOfBoundsException e) {
      throw new EvaluateException(e.getMessage(),e);
    }
catch (    ObjectCollectedException e) {
      throw EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.thread.collected"));
    }
catch (    IncompatibleThreadStateException e) {
      throw EvaluateExceptionUtil.createEvaluateException(e);
    }
  }
  return myStackFrame;
}
