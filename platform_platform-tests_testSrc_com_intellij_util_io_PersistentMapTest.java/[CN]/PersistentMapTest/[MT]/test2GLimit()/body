{
  if (!DO_SLOW_TEST)   return;
  File file=FileUtil.createTempFile("persistent","map");
  FileUtil.createParentDirs(file);
  EnumeratorStringDescriptor stringDescriptor=new EnumeratorStringDescriptor();
  PersistentHashMap<String,String> map=new PersistentHashMap<String,String>(file,stringDescriptor,stringDescriptor);
  for (int i=0; i < 12000; i++) {
    map.put("abc" + i,StringUtil.repeat("0123456789",10000));
  }
  map.close();
  map=new PersistentHashMap<String,String>(file,stringDescriptor,stringDescriptor);
  long len=0;
  for (  String key : map.getAllKeysWithExistingMapping()) {
    len+=map.get(key).length();
  }
  map.close();
  assertEquals(1200000000L,len);
}
