{
  return new ConversionProcessor<WorkspaceSettings>(){
    @Override public boolean isConversionNeeded(    WorkspaceSettings workspaceSettings){
      for (      Element element : workspaceSettings.getRunConfigurations()) {
        final String confType=element.getAttributeValue("type");
        if (GRAILS_TESTS_RUN_CONFIGURATION_TYPE.equals(confType) || GANT_SCRIPT_RUN_CONFIGURATION.equals(confType)) {
          return true;
        }
      }
      return false;
    }
    @Override public void process(    WorkspaceSettings workspaceSettings) throws CannotConvertException {
      for (      Element element : workspaceSettings.getRunConfigurations()) {
        final String confType=element.getAttributeValue("type");
        final boolean wasGrails=GRAILS_TESTS_RUN_CONFIGURATION_TYPE.equals(confType);
        if (wasGrails || GANT_SCRIPT_RUN_CONFIGURATION.equals(confType)) {
          if ("true".equals(element.getAttributeValue("default"))) {
            element.detach();
          }
 else {
            element.setAttribute("type",wasGrails ? "GrailsRunConfigurationType" : "GroovyScriptRunConfiguration");
            element.setAttribute("factoryName",wasGrails ? "Grails Application" : "Groovy Script");
          }
        }
      }
    }
  }
;
}
