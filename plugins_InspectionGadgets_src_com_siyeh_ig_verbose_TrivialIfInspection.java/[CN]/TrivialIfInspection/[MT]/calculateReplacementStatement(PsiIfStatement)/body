{
  PsiStatement thenBranch=statement.getThenBranch();
  thenBranch=ControlFlowUtils.stripBraces(thenBranch);
  final PsiExpression condition=statement.getCondition();
  final String replacementString;
  if (thenBranch instanceof PsiReturnStatement) {
    if (isReturn(thenBranch,"true")) {
      replacementString="return " + condition.getText() + ';';
    }
 else {
      replacementString="return " + BoolUtils.getNegatedExpressionText(condition) + ';';
    }
  }
 else {
    final PsiExpressionStatement expressionStatement=(PsiExpressionStatement)thenBranch;
    final PsiAssignmentExpression assignment=(PsiAssignmentExpression)expressionStatement.getExpression();
    final PsiExpression lhs=assignment.getLExpression();
    final PsiJavaToken sign=assignment.getOperationSign();
    if (isAssignment(thenBranch,"true")) {
      replacementString=lhs.getText() + ' ' + sign.getText()+ ' '+ condition.getText()+ ';';
    }
 else {
      replacementString=lhs.getText() + ' ' + sign.getText()+ ' '+ BoolUtils.getNegatedExpressionText(condition)+ ';';
    }
  }
  return replacementString;
}
