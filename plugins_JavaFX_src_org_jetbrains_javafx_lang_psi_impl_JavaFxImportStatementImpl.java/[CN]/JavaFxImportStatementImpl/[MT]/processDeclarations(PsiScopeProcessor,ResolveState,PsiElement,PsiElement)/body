{
  final PsiFile containingFile=getContainingFile();
  if (place.getContainingFile() != containingFile) {
    return true;
  }
  final JavaFxReferenceElement importReferenceElement=getImportReference();
  if (importReferenceElement != null) {
    final PsiReference importReference=importReferenceElement.getReference();
    if (importReference != null) {
      if (!isOnDemand()) {
        final NameHint nameHint=processor.getHint(NameHint.KEY);
        String name=null;
        if (nameHint != null) {
          name=nameHint.getName(state);
        }
 else         if (processor instanceof JavaFxResolveProcessor) {
          name=((JavaFxResolveProcessor)processor).getName();
        }
        if (name != null) {
          if (StringUtil.endsWith(getText(),name)) {
            final PsiElement resolveResult=importReference.resolve();
            if (resolveResult != null && resolveResult != containingFile) {
              return resolveResult instanceof PsiFile ? resolveResult.processDeclarations(processor,state,this,place) : processor.execute(resolveResult,state);
            }
          }
        }
      }
 else {
        final PsiElement resolveResult=importReference.resolve();
        if (resolveResult instanceof PsiPackage || resolveResult instanceof PsiFile && resolveResult != containingFile) {
          return resolveResult.processDeclarations(processor,state,this,place);
        }
      }
    }
  }
  return true;
}
