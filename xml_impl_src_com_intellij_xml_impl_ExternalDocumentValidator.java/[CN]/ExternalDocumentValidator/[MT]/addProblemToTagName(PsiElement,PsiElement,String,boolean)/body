{
  currentElement=PsiTreeUtil.getParentOfType(currentElement,XmlTag.class,false);
  if (currentElement == null) {
    currentElement=PsiTreeUtil.getParentOfType(originalElement,XmlElementDecl.class,false);
  }
  if (currentElement == null) {
    currentElement=originalElement;
  }
  assertValidElement(currentElement,originalElement,localizedMessage);
  if (currentElement != null) {
    myHost.addMessage(currentElement,localizedMessage,warning ? Validator.ValidationHost.WARNING : Validator.ValidationHost.ERROR);
  }
  return currentElement;
}
