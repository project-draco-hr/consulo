{
  if (!(expression instanceof PsiExpression))   return Access.Read;
  PsiExpression expr=(PsiExpression)expression;
  boolean readAccess=PsiUtil.isAccessedForReading(expr);
  boolean writeAccess=PsiUtil.isAccessedForWriting(expr);
  if (!writeAccess && expr instanceof PsiReferenceExpression) {
    PsiElement actualReferee=((PsiReferenceExpression)expr).resolve();
    if (actualReferee instanceof PsiMethod && PropertyUtil.isSimplePropertySetter((PsiMethod)actualReferee)) {
      writeAccess=true;
      readAccess=false;
    }
  }
  if (writeAccess && readAccess)   return Access.ReadWrite;
  return writeAccess ? Access.Write : Access.Read;
}
