{
  final String name=getComponentName(component);
  myComponents.put(name,component);
  if (optimizeTestLoading())   return;
  Class<T> stateClass=getComponentStateClass(component);
  T state=null;
  final StateStorage defaultsStorage=getDefaultsStorage();
  if (defaultsStorage != null) {
    try {
      state=defaultsStorage.getState(component,name,stateClass,null);
    }
 catch (    StateStorage.StateStorageException e) {
      LOG.error(e);
    }
  }
  try {
    Storage[] storageSpecs=getComponentStorageSpecs(component,StateStorageOperation.READ);
    for (    Storage storageSpec : storageSpecs) {
      StateStorage stateStorage=getStateStorage(storageSpec);
      if (stateStorage == null || !stateStorage.hasState(component,name,stateClass))       continue;
      state=stateStorage.getState(component,name,stateClass,state);
    }
  }
 catch (  StateStorage.StateStorageException e) {
    LOG.error("Error while initializing: " + component,e);
  }
catch (  Throwable e) {
    LOG.error("Error while initializing: " + component,e);
  }
  if (state != null) {
    component.loadState(state);
  }
}
