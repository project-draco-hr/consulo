{
  final String componentName=((BaseComponent)component).getComponentName();
  StateStorage stateStorage=getOldStorage(component);
  try {
    final Element element=new Element("temp_element");
    component.writeExternal(element);
    final org.w3c.dom.Element domElement;
    try {
      final Document d=new Document();
      d.addContent(element);
      domElement=new DOMOutputter().output(d).getDocumentElement();
    }
 catch (    JDOMException e1) {
      throw new RuntimeException(e1);
    }
    stateStorage.setState(component,componentName,domElement);
  }
 catch (  WriteExternalException ex) {
    LOG.debug(ex);
  }
catch (  StateStorage.StateStorageException e) {
    LOG.error(e);
  }
}
