{
  final String componentName=getComponentName(component);
  myComponents.put(componentName,component);
  if (optimizeTestLoading())   return;
  loadJdomDefaults(component,componentName);
  Element element=null;
  try {
    StateStorage stateStorage=getOldStorage(component,componentName,StateStorageOperation.READ);
    if (stateStorage == null)     return;
    element=getJdomState(component,componentName,stateStorage);
  }
 catch (  StateStorage.StateStorageException e) {
    LOG.error(e);
  }
  if (element == null)   return;
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Loading configuration for " + component.getClass());
    }
    component.readExternal(element);
  }
 catch (  InvalidDataException e) {
    throw new InvalidComponentDataException(e);
  }
}
