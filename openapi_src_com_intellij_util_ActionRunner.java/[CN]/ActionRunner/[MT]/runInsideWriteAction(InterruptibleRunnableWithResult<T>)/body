{
  final Throwable[] exception=new Throwable[]{null};
  final T[] result=(T[])new Object[1];
  Runnable swingRunnable=new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          try {
            result[0]=runnable.run();
          }
 catch (          Exception e) {
            exception[0]=e;
          }
        }
      }
);
    }
  }
;
  if (SwingUtilities.isEventDispatchThread()) {
    swingRunnable.run();
  }
 else {
    ApplicationManager.getApplication().invokeAndWait(swingRunnable,ModalityState.NON_MODAL);
  }
  Throwable e=exception[0];
  if (e != null) {
    if (e instanceof Exception)     throw (Exception)e;
    throw new Exception(e);
  }
  return result[0];
}
