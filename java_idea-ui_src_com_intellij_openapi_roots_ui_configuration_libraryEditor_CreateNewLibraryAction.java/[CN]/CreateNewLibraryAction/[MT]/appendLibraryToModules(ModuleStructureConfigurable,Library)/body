{
  final List<Module> modules=new ArrayList<Module>();
  for (  Module module : rootConfigurable.getModules()) {
    if (myType == null || myType.isSuitableModuleType(module.getModuleType())) {
      modules.add(module);
    }
  }
  if (modules.isEmpty())   return;
  final ChooseModulesDialog dlg=new ChooseModulesDialog(myProject,modules,ProjectBundle.message("choose.modules.dialog.title"),ProjectBundle.message("choose.modules.dialog.description",libraryToSelect.getName()));
  dlg.show();
  if (dlg.isOK()) {
    final List<Module> chosenModules=dlg.getChosenElements();
    for (    Module module : chosenModules) {
      rootConfigurable.addLibraryOrderEntry(module,libraryToSelect);
    }
  }
}
