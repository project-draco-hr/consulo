{
  if (modules.size() == 0)   return new ArrayList<Module>(0);
  final HashSet<Module> result=new HashSet<Module>();
  final Project project=modules.iterator().next().getProject();
  final ModuleManager moduleManager=ModuleManager.getInstance(project);
  for (Iterator<Module> iterator=modules.iterator(); iterator.hasNext(); ) {
    final Module module=iterator.next();
    result.add(module);
    result.addAll(moduleManager.getModuleDependentModules(module));
  }
  return result;
}
