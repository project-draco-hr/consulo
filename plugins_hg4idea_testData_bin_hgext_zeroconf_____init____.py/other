'discover and advertise repositories on the local network\n\nZeroconf enabled repositories will be announced in a network without\nthe need to configure a server or a service. They can be discovered\nwithout knowing their actual IP address.\n\nTo allow other people to discover your repository using run "hg serve"\nin your repository::\n\n  $ cd test\n  $ hg serve\n\nYou can discover zeroconf enabled repositories by running "hg paths"::\n\n  $ hg paths\n  zc-test = http://example.com:8000/test\n'
import Zeroconf, socket, time, os
from mercurial import ui, hg, encoding
from mercurial import extensions
from mercurial.hgweb import hgweb_mod
from mercurial.hgweb import hgwebdir_mod
server = None
localip = None
extensions.wrapfunction(ui.ui, 'config', config)
extensions.wrapfunction(ui.ui, 'configitems', configitems)
extensions.wrapfunction(hg, 'defaultdest', defaultdest)
hgweb_mod.hgweb = hgwebzc
hgwebdir_mod.hgwebdir = hgwebdirzc
