def publish(name, desc, path, port):
    global server, localip
    if (not server):
        ip = getip()
        if ip.startswith('127.'):
            return
        localip = socket.inet_aton(ip)
        server = Zeroconf.Zeroconf(ip)
    hostname = socket.gethostname().split('.')[0]
    host = (hostname + '.local')
    name = ('%s-%s' % (hostname, name))
    svc = Zeroconf.ServiceInfo('_http._tcp.local.', (name + '._http._tcp.local.'), server=host, port=port, properties={'description': desc, 'path': ('/' + path), }, address=localip, weight=0, priority=0)
    server.registerService(svc)
    svc = Zeroconf.ServiceInfo('_hg._tcp.local.', (name + '._hg._tcp.local.'), server=host, port=port, properties={'description': desc, 'path': ('/' + path), }, address=localip, weight=0, priority=0)
    server.registerService(svc)
