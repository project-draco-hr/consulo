{
  if (!(usage.getElement() instanceof PsiMethod) || !isJavaUsage(usage))   return true;
  PsiMethod method=(PsiMethod)usage.getElement();
  final FieldConflictsResolver fieldConflictsResolver=new FieldConflictsResolver(data.getParameterName(),method.getBody());
  final MethodJavaDocHelper javaDocHelper=new MethodJavaDocHelper(method);
  PsiElementFactory factory=JavaPsiFacade.getInstance(data.getProject()).getElementFactory();
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  data.getParametersToRemove().forEachDescending(new TIntProcedure(){
    public boolean execute(    final int paramNum){
      try {
        PsiParameter param=parameters[paramNum];
        PsiDocTag tag=javaDocHelper.getTagForParameter(param);
        if (tag != null) {
          tag.delete();
        }
        param.delete();
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      return true;
    }
  }
);
  PsiParameter parameter=factory.createParameter(data.getParameterName(),data.getForcedType());
  PsiUtil.setModifierProperty(parameter,PsiModifier.FINAL,data.isDeclareFinal());
  final PsiParameter anchorParameter=getAnchorParameter(method);
  final PsiParameterList parameterList=method.getParameterList();
  parameter=(PsiParameter)parameterList.addAfter(parameter,anchorParameter);
  JavaCodeStyleManager.getInstance(data.getProject()).shortenClassReferences(parameter);
  final PsiDocTag tagForAnchorParameter=javaDocHelper.getTagForParameter(anchorParameter);
  javaDocHelper.addParameterAfter(data.getParameterName(),tagForAnchorParameter);
  fieldConflictsResolver.fix();
  return false;
}
