{
  if (startOffset < 0 || startOffset > buffer.length || length < 0 || startOffset + length > buffer.length || startOffset + length < 0) {
    throw new IndexOutOfBoundsException();
  }
  ensureOpen();
  int charsRead=0;
  for (int offset=startOffset; length > 0; offset++, charsRead++, length--) {
    final int value=readChar(inputStream);
    if (value < 0) {
      break;
    }
    buffer[offset]=(char)value;
  }
  return charsRead > 0 ? charsRead : -1;
}
