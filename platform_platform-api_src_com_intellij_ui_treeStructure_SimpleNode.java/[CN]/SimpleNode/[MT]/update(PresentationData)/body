{
  Object newElement=updateElement();
  if (getElement() != newElement) {
    presentation.setChanged(true);
  }
  if (newElement == null)   return;
  Color oldColor=myColor;
  String oldName=myName;
  Icon oldIcon=getIcon();
  List<ColoredFragment> oldFragments=new ArrayList<ColoredFragment>(presentation.getColoredText());
  myColor=UIUtil.getTreeTextForeground();
  updateFileStatus();
  doUpdate();
  myName=getName();
  presentation.setPresentableText(myName);
  presentation.setChanged(!Comparing.equal(new Object[]{getIcon(),myName,oldFragments,myColor},new Object[]{oldIcon,oldName,oldFragments,oldColor}));
  presentation.setForcedTextForeground(myColor);
  presentation.setIcon(getIcon());
}
