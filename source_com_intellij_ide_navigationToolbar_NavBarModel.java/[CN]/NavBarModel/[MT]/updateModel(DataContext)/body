{
  PsiElement psiElement=(PsiElement)dataContext.getData(DataConstants.PSI_FILE);
  if (psiElement instanceof PsiJavaFile) {
    final PsiJavaFile psiJavaFile=(PsiJavaFile)psiElement;
    if (psiJavaFile.getViewProvider().getBaseLanguage() == StdLanguages.JAVA) {
      final PsiClass[] psiClasses=psiJavaFile.getClasses();
      if (psiClasses.length == 1) {
        psiElement=psiClasses[0];
      }
    }
  }
  if (psiElement != null && psiElement.isValid()) {
    return updateModel(psiElement);
  }
 else {
    final Module module=(Module)dataContext.getData(DataConstants.MODULE_CONTEXT);
    if (module != null) {
      if (size() == 1 && getElement(0) == module) {
        return false;
      }
      removeAllElements();
      addElement(module);
    }
  }
  return true;
}
