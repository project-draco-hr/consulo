{
  if (object instanceof PsiElement) {
    final Object rootElement=size() > 1 ? getElement(1) : null;
    if (rootElement instanceof Module) {
      final Module module=(Module)rootElement;
      removeAllElements();
      addElement(module.getProject());
      ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
      addElement(module);
      traverseToRoot((PsiElement)object,new HashSet<VirtualFile>(Arrays.asList(moduleRootManager.getContentRoots())));
    }
 else {
      updateModel((PsiElement)object);
    }
  }
 else   if (object instanceof Module) {
    removeAllElements();
    addElement(((Module)object).getProject());
    addElement(object);
  }
}
