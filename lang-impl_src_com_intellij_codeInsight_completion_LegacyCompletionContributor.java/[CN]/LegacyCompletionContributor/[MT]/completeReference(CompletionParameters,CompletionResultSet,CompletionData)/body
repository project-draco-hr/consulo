{
  final Ref<Boolean> hasVariants=Ref.create(false);
  processReferences(parameters,result,completionData,new PairConsumer<PsiReference,CompletionResultSet>(){
    public void consume(    final PsiReference reference,    final CompletionResultSet resultSet){
      final Set<LookupElement> lookupSet=new LinkedHashSet<LookupElement>();
      completionData.completeReference(reference,lookupSet,parameters.getPosition(),parameters.getOriginalFile(),parameters.getOffset());
      for (      final LookupElement item : lookupSet) {
        if (resultSet.getPrefixMatcher().prefixMatches(item)) {
          hasVariants.set(true);
          resultSet.addElement(item);
        }
      }
    }
  }
);
  return hasVariants.get().booleanValue();
}
