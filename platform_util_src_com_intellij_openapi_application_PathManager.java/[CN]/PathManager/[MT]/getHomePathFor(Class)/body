{
  String rootPath=getResourceRoot(aClass,"/" + aClass.getName().replace('.','/') + ".class");
  if (rootPath != null) {
    File root=new File(rootPath).getAbsoluteFile();
    do {
      final String parent=root.getParent();
      if (parent == null)       return null;
      root=new File(parent).getAbsoluteFile();
    }
 while (root != null && !isIdeaHome(root));
    return root != null ? root.getAbsolutePath() : null;
  }
  return null;
}
