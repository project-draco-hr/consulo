{
  if (ourHomePath != null)   return ourHomePath;
  if (System.getProperty(PROPERTY_HOME_PATH) != null) {
    ourHomePath=getAbsolutePath(System.getProperty(PROPERTY_HOME_PATH));
  }
 else {
    ourHomePath=getHomePathFor(PathManager.class);
    if (ourHomePath == null) {
      if (SystemInfo.isMac) {
        throw new RuntimeException("Could not find installation home path. Please reinstall the software.");
      }
      throw new RuntimeException("Could not find IDEA home path. Please make sure bin/idea.properties is present in the installation directory.");
    }
  }
  try {
    if (!SystemInfo.isFileSystemCaseSensitive) {
      ourHomePath=ourHomePath == null ? null : new File(ourHomePath).getCanonicalPath();
    }
  }
 catch (  IOException e) {
  }
  return ourHomePath;
}
