{
  if (ourHomePath != null)   return ourHomePath;
  String fromProperty=System.getProperty(PROPERTY_HOME_PATH);
  if (fromProperty != null) {
    ourHomePath=getAbsolutePath(fromProperty);
    if (!new File(ourHomePath).isDirectory()) {
      throw new RuntimeException("Invalid home path '" + ourHomePath + "'");
    }
  }
 else {
    if (ourHomePath == null) {
      throw new RuntimeException("Could not find installation home path.");
    }
  }
  if (SystemInfo.isWindows) {
    try {
      ourHomePath=new File(ourHomePath).getCanonicalPath();
    }
 catch (    IOException ignored) {
    }
  }
  return ourHomePath;
}
