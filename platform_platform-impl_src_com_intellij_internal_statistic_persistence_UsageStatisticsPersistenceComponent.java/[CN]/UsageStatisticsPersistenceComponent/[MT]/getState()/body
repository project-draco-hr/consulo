{
  Element element=new Element("state");
  for (  Map.Entry<GroupDescriptor,Set<UsageDescriptor>> entry : ConvertUsagesUtil.sortDescriptorsByPriority(getSentUsages()).entrySet()) {
    Element projectElement=new Element(GROUP_TAG);
    projectElement.setAttribute(GROUP_ID_ATTR,entry.getKey().getId());
    projectElement.setAttribute(GROUP_PRIORITY_ATTR,Double.toString(entry.getKey().getPriority()));
    projectElement.setAttribute(DATA_ATTR,ConvertUsagesUtil.convertValueMap(entry.getValue()));
    element.addContent(projectElement);
  }
  element.setAttribute(LAST_TIME_ATTR,String.valueOf(getLastTimeSent()));
  element.setAttribute(IS_ALLOWED_ATTR,String.valueOf(isAllowed()));
  element.setAttribute(PERIOD_ATTR,myPeriod.getName());
  return element;
}
