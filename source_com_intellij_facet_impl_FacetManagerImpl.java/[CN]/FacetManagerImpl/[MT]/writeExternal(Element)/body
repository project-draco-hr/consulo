{
  final Facet[] facets=getAllFacets();
  if (facets.length == 0) {
    throw new WriteExternalException();
  }
  for (  Facet facet : facets) {
    final Element child=new Element(FACET_ELEMENT);
    child.setAttribute(TYPE_ATTRIBUTE,facet.getTypeId().getId());
    facet.getConfiguration().writeExternal(child);
    element.addContent(child);
  }
}
