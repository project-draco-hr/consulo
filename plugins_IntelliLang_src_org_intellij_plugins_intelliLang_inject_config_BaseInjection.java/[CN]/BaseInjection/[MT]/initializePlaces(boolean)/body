{
  if (myPlaces.isEmpty()) {
    for (    String text : generatePlaces()) {
      myPlaces.add(new InjectionPlace(text,compile ? PatternBasedInjectionHelper.createElementPattern(text,getDisplayName()) : null,true));
    }
  }
 else   if (compile) {
    boolean replace=false;
    final ArrayList<InjectionPlace> newPlaces=new ArrayList<InjectionPlace>();
    for (    InjectionPlace place : myPlaces) {
      if (StringUtil.isNotEmpty(place.getText()) && place.getElementPattern() == null) {
        replace=true;
        newPlaces.add(new InjectionPlace(place.getText(),PatternBasedInjectionHelper.createElementPattern(place.getText(),getDisplayName()),place.isEnabled()));
      }
 else {
        newPlaces.add(place);
      }
    }
    if (replace) {
      myPlaces.clear();
      myPlaces.addAll(newPlaces);
    }
  }
}
