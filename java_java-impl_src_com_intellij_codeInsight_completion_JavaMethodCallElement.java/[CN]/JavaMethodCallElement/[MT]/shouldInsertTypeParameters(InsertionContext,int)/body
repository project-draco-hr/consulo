{
  final PsiElement leaf=context.getFile().findElementAt(context.getStartOffset());
  if (PsiTreeUtil.getParentOfType(leaf,PsiExpressionList.class,true,PsiCodeBlock.class,PsiModifierListOwner.class) == null) {
    if (PsiTreeUtil.getParentOfType(leaf,PsiConditionalExpression.class,true,PsiCodeBlock.class,PsiModifierListOwner.class) == null) {
      return false;
    }
  }
  if (leaf != null) {
    final PsiElement parent=leaf.getParent();
    if (parent instanceof PsiReferenceExpression && ((PsiReferenceExpression)parent).getTypeParameters().length > 0) {
      return false;
    }
  }
  return SmartCompletionDecorator.hasUnboundTypeParams(getObject(),getExpectedTypeForExplicitTypeParameters(context,offset));
}
