{
  final PsiReference reference=file.findReferenceAt(startOffset);
  if (reference instanceof PsiReferenceExpression && ((PsiReferenceExpression)reference).isQualified()) {
    return;
  }
  final PsiMethod method=getObject();
  if (!method.hasModifierProperty(PsiModifier.STATIC)) {
    document.insertString(startOffset,"this.");
    if (method.getManager().areElementsEquivalent(myContainingClass,PsiTreeUtil.findElementOfClassAtOffset(file,startOffset,PsiClass.class,false))) {
      return;
    }
  }
  document.insertString(startOffset,".");
  JavaCompletionUtil.insertClassReference(myContainingClass,file,startOffset);
}
