def statfiles(files):
    'Stat each file in files and yield stat or None if file does not exist.'
    lstat = os.lstat
    for nf in files:
        try:
            st = lstat(nf)
        except OSError as err:
            if (err.errno not in (errno.ENOENT, errno.ENOTDIR)):
                raise
            st = None
        yield st
