def samedevice(fpath1, fpath2):
    'Returns whether fpath1 and fpath2 are on the same device. This is only\n    guaranteed to work for files, not directories.'
    st1 = os.lstat(fpath1)
    st2 = os.lstat(fpath2)
    return (st1.st_dev == st2.st_dev)
