def rcfiles(path):
    rcs = [os.path.join(path, 'hgrc')]
    rcdir = os.path.join(path, 'hgrc.d')
    try:
        rcs.extend([os.path.join(rcdir, f) for (f, kind) in osutil.listdir(rcdir) if f.endswith('.rc')])
    except OSError:
        pass
    return rcs
