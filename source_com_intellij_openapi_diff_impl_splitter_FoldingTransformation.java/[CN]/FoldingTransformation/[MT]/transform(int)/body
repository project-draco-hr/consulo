{
  FoldRegion foldRegion=findFoldRegion(line);
  int yOffset=0;
  if (foldRegion != null) {
    int startLine=getStartLine(foldRegion);
    yOffset=(int)((double)(line - startLine) / getLineLength(foldRegion) * myEditor.getLineHeight());
    line=startLine;
  }
  yOffset+=myEditor.logicalPositionToXY(new LogicalPosition(line,0)).y;
  return yOffset - myEditor.getScrollingModel().getVerticalScrollOffset();
}
