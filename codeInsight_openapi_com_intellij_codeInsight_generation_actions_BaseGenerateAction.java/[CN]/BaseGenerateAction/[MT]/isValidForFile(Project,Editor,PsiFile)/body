{
  if (!(file instanceof PsiJavaFile))   return false;
  if (file instanceof PsiCompiledElement)   return false;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiClass targetClass=getTargetClass(editor,file);
  if (targetClass == null)   return false;
  if (!isValidForClass(targetClass))   return false;
  return true;
}
