{
  DirDiffOperation defaultOperation=null;
  if (customSourceChooser != null) {
    DiffElement chosenSource=customSourceChooser.chooseSource(source,target);
    if (chosenSource == source) {
      defaultOperation=COPY_TO;
    }
 else     if (chosenSource == target) {
      defaultOperation=COPY_FROM;
    }
  }
  return new DirDiffElement(parent,source,target,DType.CHANGED,source.getName(),defaultOperation);
}
