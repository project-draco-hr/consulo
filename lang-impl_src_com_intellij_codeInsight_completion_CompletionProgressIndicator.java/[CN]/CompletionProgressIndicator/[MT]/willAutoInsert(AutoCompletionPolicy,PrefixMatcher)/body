{
  if (!myHandler.mayAutocompleteOnInvocation())   return false;
  if (policy == AutoCompletionPolicy.NEVER_AUTOCOMPLETE)   return false;
  if (policy == AutoCompletionPolicy.ALWAYS_AUTOCOMPLETE)   return true;
  if (!isAutocompleteOnInvocation())   return false;
  if (myContextOriginal.getOffsetMap().getOffset(CompletionInitializationContext.IDENTIFIER_END_OFFSET) != myContextOriginal.getSelectionEndOffset())   return false;
  if (policy == AutoCompletionPolicy.GIVE_CHANCE_TO_OVERWRITE)   return true;
  if (StringUtil.isEmpty(matcher.getPrefix()) && myParameters.getCompletionType() != CompletionType.SMART)   return false;
  return true;
}
