{
  ArrayList<Object> expectedProblems=new ArrayList<Object>(expectedDoc.getRootElement().getChildren("problem"));
  ArrayList reportedProblems=new ArrayList(doc.getRootElement().getChildren("problem"));
  Element[] expectedArrayed=expectedProblems.toArray(new Element[expectedProblems.size()]);
  boolean failed=false;
  expected:   for (  Element expectedProblem : expectedArrayed) {
    Element[] reportedArrayed=(Element[])reportedProblems.toArray(new Element[reportedProblems.size()]);
    for (    Element reportedProblem : reportedArrayed) {
      if (compareProblemWithExpected(reportedProblem,expectedProblem)) {
        expectedProblems.remove(expectedProblem);
        reportedProblems.remove(reportedProblem);
        continue expected;
      }
    }
    Document missing=new Document((Element)expectedProblem.clone());
    System.out.println("The following haven't been reported as expected: " + new String(JDOMUtil.printDocument(missing,"\n")));
    failed=true;
  }
  for (  Object reportedProblem1 : reportedProblems) {
    Element reportedProblem=(Element)reportedProblem1;
    Document extra=new Document((Element)reportedProblem.clone());
    System.out.println("The following has been unexpectedly reported: " + new String(JDOMUtil.printDocument(extra,"\n")));
    failed=true;
  }
  assertFalse(failed);
}
