{
  final Element element=new Element(COMPONENT_NAME);
  JDOMExternalizerUtil.writeField(element,INSTRUMENTATION_TYPE_NAME,myInstrumentationType.toString());
  JDOMExternalizerUtil.writeField(element,LANGUAGE_ANNOTATION_NAME,myLanguageAnnotation);
  JDOMExternalizerUtil.writeField(element,PATTERN_ANNOTATION_NAME,myPatternAnnotation);
  JDOMExternalizerUtil.writeField(element,SUBST_ANNOTATION_NAME,mySubstAnnotation);
  JDOMExternalizerUtil.writeField(element,RESOLVE_REFERENCES,String.valueOf(myResolveReferences));
  final List<String> injectorIds=new ArrayList<String>(myInjections.keySet());
  Collections.sort(injectorIds);
  for (  String key : injectorIds) {
    final List<BaseInjection> injections=new ArrayList<BaseInjection>(myInjections.get(key));
    if (myDefaultInjections != null) {
      injections.removeAll(myDefaultInjections);
    }
    Collections.sort(injections,new Comparator<BaseInjection>(){
      public int compare(      final BaseInjection o1,      final BaseInjection o2){
        return Comparing.compare(o1.getDisplayName(),o2.getDisplayName());
      }
    }
);
    for (    BaseInjection injection : injections) {
      element.addContent(injection.getState());
    }
  }
  return element;
}
