{
  List<PsiElement> parents=new ArrayList<PsiElement>();
  PsiElement current=context;
  Set<Language> languages=new HashSet<Language>();
  while (current != null) {
    parents.add(current);
    languages.add(current.getLanguage());
    if (current instanceof PsiFile)     break;
    current=current.getParent();
  }
  List<LineMarkerProvider> providers=new ArrayList<LineMarkerProvider>();
  for (  Language language : languages) {
    providers.addAll(LineMarkersPass.getMarkerProviders(language,context.getProject()));
  }
  List<GotoRelatedItem> items=new ArrayList<GotoRelatedItem>();
  for (  LineMarkerProvider provider : providers) {
    if (provider instanceof RelatedItemLineMarkerProvider) {
      List<RelatedItemLineMarkerInfo> markers=new ArrayList<RelatedItemLineMarkerInfo>();
      RelatedItemLineMarkerProvider relatedItemLineMarkerProvider=(RelatedItemLineMarkerProvider)provider;
      for (      PsiElement parent : parents) {
        ContainerUtil.addIfNotNull(relatedItemLineMarkerProvider.getLineMarkerInfo(parent),markers);
      }
      relatedItemLineMarkerProvider.collectNavigationMarkers(parents,markers,true);
      addItemsForMarkers(markers,items);
    }
  }
  return items;
}
