{
  final ConfigurationContext context=ConfigurationContext.getFromContext(dataContext);
  final RunnerAndConfigurationSettings existing=context.findExisting();
  if (existing == null) {
    final List<RuntimeConfigurationProducer> producers=getEnabledProducers(context);
    if (producers.size() > 1) {
      final AnAction[] children=new AnAction[producers.size()];
      int chldIdx=0;
      for (      final RuntimeConfigurationProducer producer : producers) {
        final ConfigurationType configurationType=producer.getConfigurationType();
        final RunConfiguration configuration=producer.getConfiguration().getConfiguration();
        final String actionName=configuration instanceof LocatableConfiguration ? StringUtil.unquoteString(suggestRunActionName((LocatableConfiguration)configuration)) : configurationType.getDisplayName();
        final AnAction anAction=new AnAction(actionName,configurationType.getDisplayName(),configurationType.getIcon()){
          @Override public void actionPerformed(          AnActionEvent e){
            perform(producer,context);
          }
        }
;
        anAction.getTemplatePresentation().setText(actionName,false);
        children[chldIdx++]=anAction;
      }
      return children;
    }
  }
  return EMPTY_ARRAY;
}
