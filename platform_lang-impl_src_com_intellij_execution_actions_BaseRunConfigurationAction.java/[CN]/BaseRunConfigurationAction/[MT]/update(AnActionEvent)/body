{
  final ConfigurationContext context=new ConfigurationContext(event.getDataContext());
  final Presentation presentation=event.getPresentation();
  RunnerAndConfigurationSettings configuration;
  try {
    configuration=context.getConfiguration();
  }
 catch (  IndexNotReadyException e) {
    configuration=null;
  }
  if (configuration == null) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
  }
 else {
    presentation.setEnabled(true);
    presentation.setVisible(true);
    final String name=suggestRunActionName((LocatableConfiguration)configuration.getConfiguration());
    final List<RuntimeConfigurationProducer> producers=getEnabledProducers(context);
    if (!producers.isEmpty()) {
      context.getConfiguration(producers.get(0));
    }
    updatePresentation(presentation,context.findExisting() != null || producers.size() <= 1 ? " " + name : "",context);
  }
}
