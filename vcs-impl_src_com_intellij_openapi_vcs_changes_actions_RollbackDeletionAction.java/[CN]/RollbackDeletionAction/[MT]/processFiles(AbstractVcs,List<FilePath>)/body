{
  RollbackEnvironment environment=vcs.getRollbackEnvironment();
  if (environment == null)   return Collections.emptyList();
  final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  if (indicator != null) {
    indicator.setText(vcs.getDisplayName() + ": performing rollback...");
  }
  final List<VcsException> result=new ArrayList<VcsException>(0);
  try {
    environment.rollbackMissingFileDeletion(files,result,new RollbackProgressModifier(files.size(),indicator));
  }
 catch (  ProcessCanceledException e) {
  }
  LocalFileSystem.getInstance().refreshIoFiles(ChangesUtil.filePathsToFiles(files));
  return result;
}
