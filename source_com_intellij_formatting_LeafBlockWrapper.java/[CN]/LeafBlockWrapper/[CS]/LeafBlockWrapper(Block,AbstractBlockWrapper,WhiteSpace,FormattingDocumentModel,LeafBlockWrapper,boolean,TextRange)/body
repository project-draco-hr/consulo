{
  super(block,whiteSpaceBefore,parent,textRange);
  myPreviousBlock=previousTokenBlock;
  final int lastLineNumber=model.getLineNumber(textRange.getEndOffset());
  myContainsLineFeeds=model.getLineNumber(textRange.getStartOffset()) != lastLineNumber;
  mySymbolsAtTheLastLine=myContainsLineFeeds ? textRange.getEndOffset() - model.getLineStartOffset(lastLineNumber) : textRange.getLength();
  myIsReadOnly=isReadOnly;
  myIsLeaf=block.isLeaf();
  if (myIsLeaf && myContainsLineFeeds) {
    myLastLineIndent=IndentInside.getLastLineIndent(model.getText(textRange).toString());
  }
 else {
    myLastLineIndent=null;
  }
}
