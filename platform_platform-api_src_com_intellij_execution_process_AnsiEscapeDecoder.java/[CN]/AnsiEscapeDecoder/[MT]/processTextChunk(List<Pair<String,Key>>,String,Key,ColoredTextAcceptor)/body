{
  Key attributes=getCurrentOutputAttributes(outputType);
  if (textAcceptor instanceof ColoredChunksAcceptor) {
    if (buffer == null) {
      buffer=ContainerUtil.newArrayListWithCapacity(1);
    }
    buffer.add(Pair.create(text,attributes));
  }
 else {
    textAcceptor.coloredTextAvailable(text,attributes);
  }
  return buffer;
}
