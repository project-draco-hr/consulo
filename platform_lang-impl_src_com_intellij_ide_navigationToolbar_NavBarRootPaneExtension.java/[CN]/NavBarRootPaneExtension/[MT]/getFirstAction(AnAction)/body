{
  if (group instanceof DefaultActionGroup) {
    AnAction firstAction=null;
    for (    final AnAction action : ((DefaultActionGroup)group).getChildActionsOrStubs()) {
      if (action instanceof DefaultActionGroup) {
        firstAction=getFirstAction((DefaultActionGroup)action);
      }
 else       if (action instanceof AnSeparator || action instanceof ActionGroup) {
        continue;
      }
 else {
        firstAction=action;
        break;
      }
      if (firstAction != null)       break;
    }
    return firstAction;
  }
  if (group instanceof CustomisedActionGroup) {
    return ((CustomisedActionGroup)group).getFirstAction();
  }
  return null;
}
