{
  if (myWrapperPanel == null) {
    myWrapperPanel=new JPanel(new BorderLayout()){
      @Override protected void paintChildren(      Graphics g){
        super.paintChildren(g);
        if (!isMainToolbarVisible()) {
          final Rectangle r=getBounds();
          g.setColor(new Color(0,0,0,90));
          g.drawLine(0,r.height - 2,r.width,r.height - 2);
          g.setColor(new Color(0,0,0,20));
          g.drawLine(0,r.height - 1,r.width,r.height - 1);
        }
      }
      @Override protected void paintComponent(      Graphics g){
        final Rectangle r=getBounds();
        if (isMainToolbarVisible()) {
          g.setColor(new Color(200,200,200));
          g.fillRect(0,0,r.width,r.height);
        }
 else {
          final Color startColor=UIUtil.isUnderAquaLookAndFeel() ? new Color(240,240,240) : UIUtil.getControlColor();
          final Color endColor=ColorUtil.shift(startColor,7.0d / 8.0d);
          ((Graphics2D)g).setPaint(new GradientPaint(0,0,startColor,0,r.height,endColor));
          g.fillRect(0,0,r.width,r.height);
        }
      }
      @Override public Insets getInsets(){
        final Insets i=super.getInsets();
        if (!UIUtil.isUnderAquaLookAndFeel()) {
          return new Insets(0,0,0,0);
        }
        return new Insets(i.top,i.left,i.bottom + 1,i.right);
      }
    }
;
    myWrapperPanel.add(buildNavBarPanel(),BorderLayout.CENTER);
    toggleRunPanel(!UISettings.getInstance().SHOW_MAIN_TOOLBAR);
  }
  return myWrapperPanel;
}
