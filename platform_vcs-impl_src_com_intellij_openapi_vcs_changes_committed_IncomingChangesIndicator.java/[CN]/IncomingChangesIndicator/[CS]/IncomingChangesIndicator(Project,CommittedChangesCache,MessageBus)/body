{
  myProject=project;
  myCache=cache;
  final MessageBusConnection connection=bus.connect();
  connection.subscribe(CommittedChangesCache.COMMITTED_TOPIC,new CommittedChangesAdapter(){
    public void incomingChangesUpdated(    @Nullable final List<CommittedChangeList> receivedChanges){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          refreshIndicator();
        }
      }
);
    }
  }
);
  connection.subscribe(ProjectLevelVcsManager.VCS_CONFIGURATION_CHANGED,new VcsListener(){
    @Override public void directoryMappingChanged(){
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          updateIndicatorVisibility();
        }
      }
);
    }
  }
);
}
