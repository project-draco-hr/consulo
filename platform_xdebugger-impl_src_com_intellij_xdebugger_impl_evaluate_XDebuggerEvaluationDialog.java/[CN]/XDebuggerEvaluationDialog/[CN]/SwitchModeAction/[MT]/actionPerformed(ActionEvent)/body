{
  XExpression text=myInputComponent.getInputEditor().getExpression();
  if (myMode == EvaluationMode.EXPRESSION) {
    switchToMode(EvaluationMode.CODE_FRAGMENT,text);
  }
 else {
    if (text.getExpression().indexOf('\n') != -1)     text=XExpressionImpl.EMPTY_EXPRESSION;
    switchToMode(EvaluationMode.EXPRESSION,text);
  }
}
