{
  final XDebuggerEditorBase inputEditor=getInputEditor();
  int offset=-1;
  Editor editor=inputEditor.getEditor();
  if (editor != null) {
    offset=editor.getCaretModel().getOffset();
  }
  final XDebuggerTree tree=myTreePanel.getTree();
  tree.markNodesObsolete();
  tree.setRoot(new EvaluatingExpressionRootNode(this,tree),false);
  myResultPanel.invalidate();
  editor=inputEditor.getEditor();
  inputEditor.selectAll();
  if (offset >= 0 && editor != null) {
    offset=Math.min(editor.getDocument().getTextLength(),offset);
    editor.getCaretModel().moveToOffset(offset);
    editor.getSelectionModel().setSelection(offset,offset);
  }
}
