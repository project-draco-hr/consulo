{
  if (myMode == mode)   return;
  XDebuggerSettingsManager.getInstance().getGeneralSettings().setEvaluationDialogMode(mode);
  myMode=mode;
  myInputComponent=createInputComponent(mode,text);
  myMainPanel.removeAll();
  myInputComponent.addComponent(myMainPanel,myResultPanel);
  setTitle(myInputComponent.getTitle());
  mySwitchModeAction.putValue(Action.NAME,getSwitchButtonText(mode));
  final JComponent preferredFocusedComponent=myInputComponent.getInputEditor().getPreferredFocusedComponent();
  if (preferredFocusedComponent != null) {
    IdeFocusManager.getInstance(mySession.getProject()).requestFocus(preferredFocusedComponent,true);
  }
}
