{
  saveSettings();
  final GrParametersOwner toReplaceIn=myInfo.getToReplaceIn();
  final GrExpression expr=findExpr();
  final GrVariable var=findVar();
  if (myTypeComboBox.isClosureSelected()) {
    GrIntroduceParameterSettings settings=new ExtractClosureHelperImpl(myInfo,myNameSuggestionsField.getEnteredName(),myDeclareFinalCheckBox.isSelected(),getParametersToRemove(),myDelegateViaOverloadingMethodCheckBox.isSelected(),getReplaceFieldsWithGetter(),myForceReturnCheckBox.isSelected());
    invokeRefactoring(new ExtractClosureFromMethodProcessor(settings));
  }
 else {
    GrIntroduceExpressionSettings settings=new GrIntroduceExpressionSettingsImpl(myInfo,myNameSuggestionsField.getEnteredName(),myDeclareFinalCheckBox.isSelected(),getParametersToRemove(),myDelegateViaOverloadingMethodCheckBox.isSelected(),getReplaceFieldsWithGetter(),expr,var,myTypeComboBox.getSelectedType(),myForceReturnCheckBox.isSelected());
    if (toReplaceIn instanceof GrMethod) {
      invokeRefactoring(new GrIntroduceParameterProcessor(settings));
    }
 else {
      invokeRefactoring(new GrIntroduceClosureParameterProcessor(settings));
    }
  }
}
