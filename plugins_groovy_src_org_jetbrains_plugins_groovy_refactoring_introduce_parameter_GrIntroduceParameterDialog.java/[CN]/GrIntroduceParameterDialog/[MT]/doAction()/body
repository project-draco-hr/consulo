{
  saveSettings();
  GrIntroduceParameterSettings settings=new GrIntroduceParameterSettingsImpl(myNameSuggestionsField.getEnteredName(),myReplaceAllOccurrencesCheckBox.isSelected(),myTypeComboBox.getSelectedType(),myDeclareFinalCheckBox.isSelected(),myDelegateViaOverloadingMethodCheckBox.isSelected(),getParametersToRemove(),getReplaceFieldsWithGetter(),myRemoveLocalVariableCheckBox.isSelected());
  final BaseRefactoringProcessor processor;
  if (myContext.getToReplaceIn() instanceof GrMethod) {
    processor=new GrIntroduceParameterProcessor(settings,myContext);
  }
 else {
    if (!myChangeVarUsages.isSelected() && myContext.getToSearchFor() != null) {
      myContext=new GrIntroduceParameterContextImpl(myContext,myContext.getToReplaceIn(),null);
    }
    processor=new GrIntroduceClosureParameterProcessor(settings,myContext);
  }
  invokeRefactoring(processor);
}
