{
  saveSettings();
  GrIntroduceParameterSettings settings=new GrIntroduceParameterSettingsImpl(myNameSuggestionsField.getEnteredName(),myReplaceAllOccurrencesCheckBox.isSelected(),myTypeComboBox.getSelectedType(),myDeclareFinalCheckBox.isSelected(),myDelegateViaOverloadingMethodCheckBox.isSelected(),getParametersToRemove(),getReplaceFieldsWithGetter(),myRemoveLocalVariableCheckBox.isSelected());
  final BaseRefactoringProcessor processor;
  if (myContext.toReplaceIn instanceof GrMethod) {
    processor=new GrIntroduceParameterProcessor(settings,myContext);
  }
 else {
    if (!myChangeVarUsages.isSelected() && myContext.toSearchFor != null) {
      myContext=new GrIntroduceParameterContext(myContext,myContext.toReplaceIn,null);
    }
    processor=new GrIntroduceClosureParameterProcessor(settings,myContext);
  }
  invokeRefactoring(processor);
}
