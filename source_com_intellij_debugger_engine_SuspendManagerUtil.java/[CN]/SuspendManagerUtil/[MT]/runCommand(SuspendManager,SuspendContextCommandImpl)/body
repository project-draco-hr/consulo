{
  SuspendContextImpl suspendContext=action.getSuspendContext();
  if (suspendContext.myInProgress) {
    postponeCommand(suspendContext,action);
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("running " + suspendManager);
    }
    try {
      if (!suspendContext.isResumed()) {
        suspendContext.myInProgress=true;
        action.contextAction();
      }
 else {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Context is invalid for SuspendContextCommand" + suspendManager);
        }
        action.notifyCancelled();
      }
    }
  finally {
      if (LOG.isDebugEnabled()) {
        LOG.debug("end processing " + suspendManager);
      }
      suspendContext.myInProgress=false;
      if (!suspendContext.isResumed() && suspendContext.myPostponedCommands.size() > 0) {
        suspendContext.getDebugProcess().getManagerThread().invokeLater(suspendContext.myPostponedCommands.remove(0));
      }
    }
  }
}
