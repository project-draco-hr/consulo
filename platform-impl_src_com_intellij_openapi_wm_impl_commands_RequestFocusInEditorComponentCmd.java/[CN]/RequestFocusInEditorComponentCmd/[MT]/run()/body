{
  try {
    if (myTimestamp.isExpired()) {
      final Component owner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
      if (owner != null && owner == myComponent) {
        myDoneCallback.setDone();
      }
 else {
        myDoneCallback.setRejected();
      }
    }
    final Window owner=SwingUtilities.getWindowAncestor(myEditorManager.getComponent());
    if (owner == null) {
      return;
    }
    if (!owner.isActive()) {
      final Window activeWindow=getActiveWindow(owner.getOwnedWindows());
      if (activeWindow == null || (activeWindow instanceof FloatingDecorator)) {
        owner.toFront();
      }
    }
    if (myComponent != null) {
      myFocusManager.requestFocus(myComponent,myForced).notifyWhenDone(myDoneCallback);
    }
 else {
      myDoneCallback.setRejected();
    }
  }
  finally {
    finish();
  }
}
