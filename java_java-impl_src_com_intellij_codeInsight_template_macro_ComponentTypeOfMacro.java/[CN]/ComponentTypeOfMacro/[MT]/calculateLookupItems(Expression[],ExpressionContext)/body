{
  if (params.length != 1)   return null;
  LookupElement[] lookupItems=params[0].calculateLookupItems(context);
  if (lookupItems == null)   return null;
  for (  LookupElement element : lookupItems) {
    if (element instanceof LookupItem) {
      final LookupItem item=(LookupItem)element;
      Integer bracketsCount=(Integer)item.getUserData(LookupItem.BRACKETS_COUNT_ATTR);
      if (bracketsCount == null)       return null;
      item.putUserData(LookupItem.BRACKETS_COUNT_ATTR,new Integer(bracketsCount.intValue() - 1));
    }
  }
  return lookupItems;
}
