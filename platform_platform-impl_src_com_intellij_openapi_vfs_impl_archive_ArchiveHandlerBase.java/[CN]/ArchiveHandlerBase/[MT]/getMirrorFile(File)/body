{
  if (!myFileSystem.isMakeCopyOfJar(originalFile))   return originalFile;
  final FileAttributes originalAttributes=FileSystemUtil.getAttributes(originalFile);
  if (originalAttributes == null)   return originalFile;
  final String folderPath=getJarsDir();
  if (!new File(folderPath).exists() && !new File(folderPath).mkdirs()) {
    return originalFile;
  }
  if (FSRecords.weHaveContentHashes) {
    return getMirrorWithContentHash(originalFile,originalAttributes);
  }
  final String mirrorName=originalFile.getName() + "." + Integer.toHexString(originalFile.getPath().hashCode());
  final File mirrorFile=new File(folderPath,mirrorName);
  final FileAttributes mirrorAttributes=FileSystemUtil.getAttributes(mirrorFile);
  if (mirrorAttributes == null || originalAttributes.length != mirrorAttributes.length || Math.abs(originalAttributes.lastModified - mirrorAttributes.lastModified) > FS_TIME_RESOLUTION) {
    return copyToMirror(originalFile,mirrorFile);
  }
  return mirrorFile;
}
