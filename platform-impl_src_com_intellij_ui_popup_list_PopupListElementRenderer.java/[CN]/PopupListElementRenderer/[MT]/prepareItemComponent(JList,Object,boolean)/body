{
  ListPopupStep<Object> step=myPopup.getListStep();
  boolean isSelectable=step.isSelectable(value);
  myTextLabel.setEnabled(isSelectable);
  super.prepareItemComponent(list,value,isSelected);
  if (step.isMnemonicsNavigationEnabled()) {
    final int pos=step.getMnemonicNavigationFilter().getMnemonicPos(value);
    if (pos != -1) {
      String text=myTextLabel.getText();
      text=text.substring(0,pos) + text.substring(pos + 1);
      myTextLabel.setText(text);
      myTextLabel.setDisplayedMnemonicIndex(pos);
    }
  }
 else {
    myTextLabel.setDisplayedMnemonicIndex(-1);
  }
  if (myPopup.getStep().hasSubstep(value) && isSelectable) {
    myNextStepLabel.setVisible(true);
    myNextStepLabel.setIcon(isSelected ? PopupIcons.HAS_NEXT_ICON : PopupIcons.HAS_NEXT_ICON_GRAYED);
  }
 else {
    myNextStepLabel.setVisible(false);
  }
}
