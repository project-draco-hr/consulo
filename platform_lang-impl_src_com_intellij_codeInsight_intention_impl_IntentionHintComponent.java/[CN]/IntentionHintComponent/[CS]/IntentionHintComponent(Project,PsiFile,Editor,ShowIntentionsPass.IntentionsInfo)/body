{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  myFile=file;
  myEditor=editor;
  setLayout(new BorderLayout());
  setOpaque(false);
  boolean showFix=false;
  for (  final HighlightInfo.IntentionActionDescriptor pairs : intentions.errorFixesToShow) {
    IntentionAction fix=pairs.getAction();
    if (IntentionManagerSettings.getInstance().isShowLightBulb(fix)) {
      showFix=true;
      break;
    }
  }
  mySmartTagIcon=showFix ? ourQuickFixIcon : ourBulbIcon;
  myHighlightedIcon=new RowIcon(2);
  myHighlightedIcon.setIcon(mySmartTagIcon,0);
  myHighlightedIcon.setIcon(ourArrowIcon,1);
  myInactiveIcon=new RowIcon(2);
  myInactiveIcon.setIcon(mySmartTagIcon,0);
  myInactiveIcon.setIcon(ourInactiveArrowIcon,1);
  myButton=new JButton(myInactiveIcon);
  myButton.setFocusable(false);
  myButton.setMargin(INACTIVE_MARGIN);
  myButton.setBorderPainted(false);
  myButton.setContentAreaFilled(false);
  add(myButton,BorderLayout.CENTER);
  setBorder(INACTIVE_BORDER);
  myButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      showPopup();
    }
  }
);
  myButton.addMouseListener(new MouseAdapter(){
    public void mouseEntered(    MouseEvent e){
      onMouseEnter();
    }
    public void mouseExited(    MouseEvent e){
      onMouseExit();
    }
  }
);
  myComponentHint=new MyComponentHint(this);
  IntentionListStep step=new IntentionListStep(this,intentions,myEditor,myFile,project);
  recreateMyPopup(step);
}
