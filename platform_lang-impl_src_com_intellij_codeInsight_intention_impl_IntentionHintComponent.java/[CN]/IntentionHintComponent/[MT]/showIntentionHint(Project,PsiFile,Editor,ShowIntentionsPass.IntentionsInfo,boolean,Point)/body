{
  ApplicationManager.getApplication().assertIsDispatchThread();
  final IntentionHintComponent component=new IntentionHintComponent(project,file,editor,intentions);
  component.showIntentionHintImpl(!showExpanded,position);
  Disposer.register(project,component);
  if (showExpanded) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        if (!editor.isDisposed() && editor.getComponent().isShowing()) {
          component.showPopup(false);
        }
      }
    }
,project.getDisposed());
  }
  return component;
}
