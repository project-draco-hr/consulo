{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myPopup == null || myPopup.isDisposed())   return;
  if (mouseClick && myPanel.isShowing()) {
    final RelativePoint swCorner=RelativePoint.getSouthWestOf(myPanel);
    final int yOffset=canPlaceBulbOnTheSameLine(myEditor) ? 0 : myEditor.getLineHeight() - (myEditor.isOneLineMode() ? SMALL_BORDER_SIZE : NORMAL_BORDER_SIZE);
    myPopup.show(new RelativePoint(swCorner.getComponent(),new Point(swCorner.getPoint().x,swCorner.getPoint().y + yOffset)));
  }
 else {
    myPopup.showInBestPositionFor(myEditor);
  }
  myPopupShown=true;
}
