{
  TextRange textRange=((ProblemDescriptorImpl)problemDescriptor).getTextRange();
  PsiElement element=problemDescriptor.getPsiElement();
  boolean isFileLevel=element instanceof PsiFile && textRange.equals(element.getTextRange());
  final HighlightSeverity severity=highlightInfoType.getSeverity(element);
  return new HighlightInfo(mySeverityRegistrar.getTextAttributesBySeverity(severity),highlightInfoType,textRange.getStartOffset(),textRange.getEndOffset(),message,toolTip,severity,problemDescriptor.isAfterEndOfLine(),null,isFileLevel);
}
