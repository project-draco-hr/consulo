{
  myFailFastOnAcquireReadAction=failFastOnAcquireReadAction;
  if (toolWrappers.isEmpty())   return;
  List<PsiElement> inside=new ArrayList<PsiElement>();
  List<PsiElement> outside=new ArrayList<PsiElement>();
  Divider.divideInsideAndOutside(myFile,myStartOffset,myEndOffset,myPriorityRange,inside,outside,HighlightLevelUtil.AnalysisLevel.HIGHLIGHT_AND_INSPECT,true);
  MultiMap<LocalInspectionToolWrapper,String> tools=getToolsForElements(toolWrappers,checkDumbAwareness,inside,outside);
  setProgressLimit(1L * tools.size() * 2);
  final LocalInspectionToolSession session=new LocalInspectionToolSession(myFile,myStartOffset,myEndOffset);
  List<InspectionContext> init=visitPriorityElementsAndInit(tools,iManager,isOnTheFly,indicator,inside,session,toolWrappers,checkDumbAwareness);
  visitRestElementsAndCleanup(iManager,isOnTheFly,indicator,outside,session,init,toolWrappers,checkDumbAwareness);
  indicator.checkCanceled();
  myInfos=new ArrayList<HighlightInfo>();
  addHighlightsFromResults(myInfos,indicator);
}
