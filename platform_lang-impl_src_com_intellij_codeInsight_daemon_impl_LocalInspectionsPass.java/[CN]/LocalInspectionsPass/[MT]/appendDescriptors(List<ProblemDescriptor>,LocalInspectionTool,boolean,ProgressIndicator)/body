{
  InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(myProject).getInspectionProfile();
  final HighlightSeverity severity=inspectionProfile.getErrorLevel(HighlightDisplayKey.find(tool.getShortName()),myFile).getSeverity();
  for (  ProblemDescriptor problemDescriptor : problemDescriptors) {
    progress.checkCanceled();
    if (!(ignoreSuppressed && InspectionManagerEx.inspectionResultSuppressed(problemDescriptor.getPsiElement(),tool))) {
      myDescriptors.add(problemDescriptor);
      HighlightInfoType type=highlightTypeFromDescriptor(problemDescriptor,severity);
      myLevels.add(type);
      myTools.add(tool);
    }
  }
}
