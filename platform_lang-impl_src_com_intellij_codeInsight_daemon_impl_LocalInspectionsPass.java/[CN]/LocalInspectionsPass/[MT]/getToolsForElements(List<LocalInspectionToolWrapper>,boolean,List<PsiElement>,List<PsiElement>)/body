{
  Set<Language> languages=new HashSet<Language>();
  for (  PsiElement element : inside) {
    languages.add(element.getLanguage());
  }
  for (  PsiElement element : outside) {
    languages.add(element.getLanguage());
  }
  Set<String> langIds=new HashSet<String>();
  for (  Language language : languages) {
    langIds.add(language.getID());
  }
  Set<String> dialects=new HashSet<String>();
  for (  Language language : languages) {
    for (    Language dialect : language.getDialects()) {
      dialects.add(dialect.getID());
    }
  }
  ArrayList<Pair<LocalInspectionTool,String>> pairs=new ArrayList<Pair<LocalInspectionTool,String>>();
  for (  LocalInspectionToolWrapper wrapper : toolWrappers) {
    String language=wrapper.getLanguage();
    if (language == null || langIds.contains(language) || wrapper.applyToDialects() && dialects.contains(language)) {
      LocalInspectionTool tool=wrapper.getTool();
      if (!checkDumbAwareness || tool instanceof DumbAware) {
        pairs.add(Pair.create(tool,language));
      }
    }
  }
  return pairs;
}
