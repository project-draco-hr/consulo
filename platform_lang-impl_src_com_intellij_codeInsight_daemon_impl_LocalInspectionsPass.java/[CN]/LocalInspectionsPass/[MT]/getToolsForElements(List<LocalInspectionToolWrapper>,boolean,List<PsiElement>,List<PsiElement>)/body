{
  Set<Language> languages=new HashSet<Language>();
  for (  PsiElement element : inside) {
    languages.add(element.getLanguage());
  }
  for (  PsiElement element : outside) {
    languages.add(element.getLanguage());
  }
  Set<String> langIds=new HashSet<String>();
  for (  Language language : languages) {
    langIds.add(language.getID());
    for (    Language dialect : language.getDialects()) {
      langIds.add(dialect.getID());
    }
  }
  List<LocalInspectionTool> tools=new ArrayList<LocalInspectionTool>();
  for (  LocalInspectionToolWrapper wrapper : toolWrappers) {
    if (wrapper.getLanguage() == null || langIds.contains(wrapper.getLanguage())) {
      LocalInspectionTool tool=wrapper.getTool();
      if (!checkDumbAwareness || tool instanceof DumbAware) {
        tools.add(tool);
      }
    }
  }
  return tools;
}
