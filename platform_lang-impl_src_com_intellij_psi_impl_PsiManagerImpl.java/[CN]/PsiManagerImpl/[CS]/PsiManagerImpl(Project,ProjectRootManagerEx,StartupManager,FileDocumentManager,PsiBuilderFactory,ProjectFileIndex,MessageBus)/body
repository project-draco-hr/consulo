{
  myProject=project;
  myMessageBus=messageBus;
  @SuppressWarnings({"UnusedDeclaration","UnnecessaryLocalVariable"}) Object used=psiBuilderFactory;
  boolean isProjectDefault=project.isDefault();
  myFileManager=isProjectDefault ? new EmptyFileManager(this) : new FileManagerImpl(this,fileDocumentManager,projectRootManagerEx,projectFileIndex);
  myModificationTracker=new PsiModificationTrackerImpl(myProject);
  myTreeChangePreprocessors.add(myModificationTracker);
  myResolveCache=new ResolveCache(messageBus);
  if (startupManager != null) {
    startupManager.registerPreStartupActivity(new Runnable(){
      public void run(){
        runPreStartupActivity();
      }
    }
);
  }
}
