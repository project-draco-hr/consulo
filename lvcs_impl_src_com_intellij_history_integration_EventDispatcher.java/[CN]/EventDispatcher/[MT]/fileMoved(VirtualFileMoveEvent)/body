{
  if (isMovedFromOutside(e) && isMovedToOutside(e))   return;
  if (isMovedFromOutside(e)) {
    if (notAllowedOrNotUnderContentRoot(e))     return;
    create(e.getFile());
    return;
  }
  VirtualFile oldFile=new ReparentedVirtualFile(e.getOldParent(),e.getFile());
  if (isMovedToOutside(e)) {
    boolean wasInContent=hasEntryFor(oldFile);
    if (wasInContent)     myFacade.delete(oldFile);
    return;
  }
  if (notAllowedOrNotUnderContentRoot(e))   return;
  myFacade.move(oldFile,e.getNewParent());
}
