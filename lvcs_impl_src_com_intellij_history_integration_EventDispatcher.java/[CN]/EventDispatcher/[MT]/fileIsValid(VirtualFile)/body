{
  if (f.isValid())   return true;
  String s="\nfile is not valid: " + f.getPath();
  VirtualFile validParent=f.getParent();
  while (validParent != null && !validParent.isValid()) {
    validParent=validParent.getParent();
  }
  s+="\nfirst valid parent: " + (validParent == null ? "null" : validParent.getPath());
  throw new RuntimeException(s);
}
