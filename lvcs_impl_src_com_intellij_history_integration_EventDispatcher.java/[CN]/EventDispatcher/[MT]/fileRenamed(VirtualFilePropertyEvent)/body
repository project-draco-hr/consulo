{
  VirtualFile newFile=e.getFile();
  VirtualFile oldFile=new RenamedVirtualFile(e.getFile(),(String)e.getOldValue());
  boolean wasInContent=hasEntryFor(oldFile);
  if (notAllowedOrNotUnderContentRoot(newFile)) {
    if (wasInContent)     myFacade.delete(oldFile);
    return;
  }
  if (!wasInContent) {
    create(newFile);
    return;
  }
  myFacade.rename(oldFile,e.getFile().getName());
}
