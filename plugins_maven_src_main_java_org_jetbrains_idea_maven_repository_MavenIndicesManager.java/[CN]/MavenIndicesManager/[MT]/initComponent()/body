{
  StartupManager.getInstance(myProject).registerStartupActivity(new Runnable(){
    public void run(){
      if (ApplicationManager.getApplication().isUnitTestMode())       return;
      if (!MavenProjectsManager.getInstance(myProject).isMavenProject())       return;
      try {
        initIndex();
      }
 catch (      MavenException e) {
        showErrorWhenProjectIsOpen(e);
      }
      StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
        public void run(){
          try {
            checkLocalIndex();
            checkProjectIndex();
          }
 catch (          MavenIndexException e) {
            showErrorWhenProjectIsOpen(new MavenException(e));
          }
        }
      }
);
    }
  }
);
}
