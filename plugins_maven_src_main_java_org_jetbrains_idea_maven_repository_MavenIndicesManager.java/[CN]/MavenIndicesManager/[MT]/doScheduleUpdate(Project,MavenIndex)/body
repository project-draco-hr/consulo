{
  new Task.Backgroundable(null,RepositoryBundle.message("maven.indices.updating"),true){
    public void run(    @NotNull ProgressIndicator indicator){
      try {
        List<MavenIndex> infos=index != null ? Collections.singletonList(index) : myIndices.getIndices();
        try {
          for (          MavenIndex each : infos) {
            indicator.setText(RepositoryBundle.message("maven.indices.updating.index",each.getId()));
            myIndices.update(each,p,indicator);
          }
        }
 catch (        ProcessCanceledException ignore) {
        }
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            rehighlightAllPoms(p);
          }
        }
);
      }
 catch (      MavenIndexException e) {
        showError(e);
      }
    }
  }
.queue();
}
