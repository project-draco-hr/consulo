{
  return new PsiPolyVariantCachingReference(){
    @Override @NotNull public JavaResolveResult[] resolveInner(    boolean incompleteCode){
      ASTNode classRef=findChildByRole(ChildRole.TYPE_REFERENCE);
      if (classRef != null) {
        ASTNode argumentList=PsiImplUtil.skipWhitespaceAndComments(classRef.getTreeNext());
        if (argumentList != null && argumentList.getElementType() == JavaElementType.EXPRESSION_LIST) {
          final JavaPsiFacade facade=JavaPsiFacade.getInstance(getProject());
          PsiType aClass=facade.getElementFactory().createType((PsiJavaCodeReferenceElement)SourceTreeToPsiMap.treeElementToPsi(classRef));
          return facade.getResolveHelper().multiResolveConstructor((PsiClassType)aClass,(PsiExpressionList)SourceTreeToPsiMap.treeElementToPsi(argumentList),PsiNewExpressionImpl.this);
        }
      }
 else {
        ASTNode anonymousClassElement=findChildByType(JavaElementType.ANONYMOUS_CLASS);
        if (anonymousClassElement != null) {
          final JavaPsiFacade facade=JavaPsiFacade.getInstance(getProject());
          final PsiAnonymousClass anonymousClass=(PsiAnonymousClass)SourceTreeToPsiMap.treeElementToPsi(anonymousClassElement);
          PsiType aClass=anonymousClass.getBaseClassType();
          ASTNode argumentList=anonymousClassElement.findChildByType(JavaElementType.EXPRESSION_LIST);
          return facade.getResolveHelper().multiResolveConstructor((PsiClassType)aClass,(PsiExpressionList)SourceTreeToPsiMap.treeElementToPsi(argumentList),anonymousClass);
        }
      }
      return JavaResolveResult.EMPTY_ARRAY;
    }
    @Override public PsiElement getElement(){
      return PsiNewExpressionImpl.this;
    }
    @Override public TextRange getRangeInElement(){
      return null;
    }
    @Override @NotNull public String getCanonicalText(){
      return null;
    }
    @Override public PsiElement handleElementRename(    String newElementName){
      return null;
    }
    @Override public PsiElement bindToElement(    @NotNull PsiElement element){
      return null;
    }
    @Override @NotNull public Object[] getVariants(){
      return ArrayUtil.EMPTY_OBJECT_ARRAY;
    }
    @Override public int hashCode(){
      return getElement().hashCode();
    }
    @Override public boolean equals(    Object obj){
      return obj instanceof PsiPolyVariantCachingReference && getElement() == ((PsiReference)obj).getElement();
    }
  }
;
}
