{
  PsiModifierList list;
  boolean isInterface=false;
  if (element instanceof PsiVariable) {
    list=((PsiVariable)element).getModifierList();
  }
 else   if (element instanceof PsiMethod) {
    list=((PsiMethod)element).getModifierList();
  }
 else   if (element instanceof PsiClass) {
    isInterface=((PsiClass)element).isInterface();
    list=((PsiClass)element).getModifierList();
    if (list == null)     return "";
  }
 else   if (element instanceof PsiClassInitializer) {
    list=((PsiClassInitializer)element).getModifierList();
    if (list == null)     return "";
  }
 else {
    throw new IllegalArgumentException();
  }
  if (list == null)   return "";
  StringBuilder buffer=new StringBuilder();
  if ((options & SHOW_REDUNDANT_MODIFIERS) != 0 ? list.hasModifierProperty(PsiModifier.PUBLIC) : list.hasExplicitModifier(PsiModifier.PUBLIC))   appendModifier(buffer,PsiModifier.PUBLIC);
  if (list.hasModifierProperty(PsiModifier.PROTECTED)) {
    appendModifier(buffer,PsiModifier.PROTECTED);
  }
  if (list.hasModifierProperty(PsiModifier.PRIVATE)) {
    appendModifier(buffer,PsiModifier.PRIVATE);
  }
  if ((options & SHOW_REDUNDANT_MODIFIERS) != 0 ? list.hasModifierProperty(PsiModifier.PACKAGE_LOCAL) : list.hasExplicitModifier(PsiModifier.PACKAGE_LOCAL)) {
    if (element instanceof PsiClass && element.getParent() instanceof PsiDeclarationStatement) {
      appendModifier(buffer,PsiBundle.message("local.class.preposition"));
    }
 else {
      appendModifier(buffer,PsiBundle.message("package.local.visibility"));
    }
  }
  if ((options & SHOW_REDUNDANT_MODIFIERS) != 0 ? list.hasModifierProperty(PsiModifier.STATIC) : list.hasExplicitModifier(PsiModifier.STATIC))   appendModifier(buffer,PsiModifier.STATIC);
  if (!isInterface && ((options & SHOW_REDUNDANT_MODIFIERS) != 0 ? list.hasModifierProperty(PsiModifier.ABSTRACT) : list.hasExplicitModifier(PsiModifier.ABSTRACT)))   appendModifier(buffer,PsiModifier.ABSTRACT);
  if ((options & SHOW_REDUNDANT_MODIFIERS) != 0 ? list.hasModifierProperty(PsiModifier.FINAL) : list.hasExplicitModifier(PsiModifier.FINAL))   appendModifier(buffer,PsiModifier.FINAL);
  if (list.hasModifierProperty(PsiModifier.NATIVE) && (options & JAVADOC_MODIFIERS_ONLY) == 0) {
    appendModifier(buffer,PsiModifier.NATIVE);
  }
  if (list.hasModifierProperty(PsiModifier.SYNCHRONIZED) && (options & JAVADOC_MODIFIERS_ONLY) == 0) {
    appendModifier(buffer,PsiModifier.SYNCHRONIZED);
  }
  if (list.hasModifierProperty(PsiModifier.STRICTFP) && (options & JAVADOC_MODIFIERS_ONLY) == 0) {
    appendModifier(buffer,PsiModifier.STRICTFP);
  }
  if (list.hasModifierProperty(PsiModifier.TRANSIENT) && element instanceof PsiVariable) {
    appendModifier(buffer,PsiModifier.TRANSIENT);
  }
  if (list.hasModifierProperty(PsiModifier.VOLATILE)) {
    appendModifier(buffer,PsiModifier.VOLATILE);
  }
  if (buffer.length() > 0) {
    buffer.setLength(buffer.length() - 1);
  }
  return buffer.toString();
}
