{
  StringBuffer buffer=new StringBuffer();
  if ((options & SHOW_MODIFIERS) != 0 && (options & MODIFIERS_AFTER) == 0) {
    buffer.append(formatModifiers(aClass,options));
  }
  if ((options & SHOW_NAME) != 0) {
    if (aClass instanceof PsiAnonymousClass && (options & SHOW_ANONYMOUS_CLASS_VERBOSE) != 0) {
      final PsiClassType baseClassReference=((PsiAnonymousClass)aClass).getBaseClassType();
      PsiClass baseClass=baseClassReference.resolve();
      String name=baseClass == null ? baseClassReference.getPresentableText() : formatClass(baseClass,options);
      buffer.append("Anonymous class derived from ");
      buffer.append(name);
    }
 else {
      String name=aClass.getName();
      if (name != null) {
        if (buffer.length() > 0) {
          buffer.append(' ');
        }
        if ((options & SHOW_FQ_NAME) != 0) {
          String qName=aClass.getQualifiedName();
          if (qName != null) {
            buffer.append(qName);
          }
 else {
            buffer.append(aClass.getName());
          }
        }
 else {
          buffer.append(aClass.getName());
        }
      }
    }
  }
  if ((options & SHOW_MODIFIERS) != 0 && (options & MODIFIERS_AFTER) != 0) {
    String modifiers=formatModifiers(aClass,options);
    if (modifiers.length() > 0) {
      if (buffer.length() > 0) {
        buffer.append(' ');
      }
      buffer.append(modifiers);
    }
  }
  if ((options & SHOW_EXTENDS_IMPLEMENTS) != 0) {
    String extendsText=formatReferenceList(aClass.getExtendsList(),options);
    if (extendsText.length() > 0) {
      if (buffer.length() > 0) {
        buffer.append(' ');
      }
      buffer.append("extends ");
      buffer.append(extendsText);
    }
    String implementsText=formatReferenceList(aClass.getImplementsList(),options);
    if (implementsText.length() > 0) {
      if (buffer.length() > 0) {
        buffer.append(' ');
      }
      buffer.append("implements ");
      buffer.append(implementsText);
    }
  }
  return buffer.toString();
}
