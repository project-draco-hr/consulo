{
  if (!myCompilerConfiguration.isAnnotationProcessorsEnabled()) {
    return true;
  }
  final Module module=context.getModuleByFile(file);
  if (module != null) {
    if (!myCompilerConfiguration.getAnnotationProcessingConfiguration(module).isEnabled()) {
      return true;
    }
    final String path=CompilerPaths.getAnnotationProcessorsGenerationPath(module);
    final VirtualFile generationDir=path != null ? LocalFileSystem.getInstance().findFileByPath(path) : null;
    if (generationDir != null && VfsUtil.isAncestor(generationDir,file,false)) {
      return true;
    }
  }
  return CompilerManager.getInstance(myProject).isExcludedFromCompilation(file);
}
