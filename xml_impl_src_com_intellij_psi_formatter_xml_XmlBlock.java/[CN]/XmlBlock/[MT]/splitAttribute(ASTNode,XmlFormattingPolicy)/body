{
  final ArrayList<Block> result=new ArrayList<Block>(3);
  ASTNode child=node.getFirstChildNode();
  while (child != null) {
    if (child.getElementType() == XmlElementType.XML_ATTRIBUTE_VALUE_START_DELIMITER || child.getElementType() == XmlElementType.XML_ATTRIBUTE_VALUE_END_DELIMITER) {
      result.add(new XmlBlock(child,null,null,formattingPolicy,null,null));
    }
 else     if (!child.getPsi().getLanguage().isKindOf(XMLLanguage.INSTANCE) && containsOuterLanguageElement(child)) {
      result.add(new XmlBlock(child,null,null,myXmlFormattingPolicy,getChildIndent(),null));
    }
 else     if (child.getElementType() != TokenType.ERROR_ELEMENT) {
      result.add(new ReadOnlyBlock(child));
    }
    child=child.getTreeNext();
  }
  return result;
}
