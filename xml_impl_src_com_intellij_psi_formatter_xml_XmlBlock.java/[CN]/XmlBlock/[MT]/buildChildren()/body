{
  if (myNode.getElementType() == XmlElementType.XML_ATTRIBUTE_VALUE || myNode.getElementType() == XmlElementType.XML_COMMENT) {
    return EMPTY;
  }
  if (myNode.getElementType() == XmlElementType.XML_TEXT) {
    if (myXmlFormattingPolicy.getShouldKeepWhiteSpaces()) {
      return EMPTY;
    }
    final ASTNode treeParent=myNode.getTreeParent();
    final XmlTag tag=getTag(treeParent);
    if (tag != null) {
      if (myXmlFormattingPolicy.keepWhiteSpacesInsideTag(tag)) {
        return EMPTY;
      }
    }
  }
  if (myNode instanceof CompositeElement) {
    final ArrayList<Block> result=new ArrayList<Block>(5);
    ChameleonTransforming.transformChildren(myNode);
    ASTNode child=myNode.getFirstChildNode();
    while (child != null) {
      if (!FormatterUtil.containsWhiteSpacesOnly(child) && child.getTextLength() > 0) {
        child=processChild(result,child,null,null,getChildDefaultIndent());
      }
      if (child != null) {
        LOG.assertTrue(child.getTreeParent() == myNode);
        child=child.getTreeNext();
      }
    }
    return result;
  }
 else {
    return EMPTY;
  }
}
