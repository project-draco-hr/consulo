{
  Lexer lexer=createLexer();
  lexer.start(text);
  String result="";
  while (true) {
    IElementType tokenType=lexer.getTokenType();
    if (tokenType == null) {
      break;
    }
    String tokenText=getTokenText(lexer);
    String tokenTypeName=tokenType.toString();
    String line=tokenTypeName + " ('" + tokenText+ "')\n";
    result+=line;
    lexer.advance();
  }
  if (expected != null) {
    assertSameLines(expected,result);
  }
 else {
    assertSameLinesWithFile(PathManager.getHomePath() + "/" + getDirPath()+ "/"+ getTestName(true)+ ".txt",result);
  }
}
