{
  final PsiMethod method=(PsiMethod)element.getParent();
  final Query<PsiReference> query=ReferencesSearch.search(method,method.getUseScope(),false);
  for (  PsiReference reference : query) {
    final PsiElement referenceElement=reference.getElement();
    if (!(referenceElement instanceof PsiReferenceExpression)) {
      continue;
    }
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)referenceElement;
    final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)referenceExpression.getParent();
    final PsiExpressionList argumentList=methodCallExpression.getArgumentList();
    final PsiExpression[] arguments=argumentList.getExpressions();
    if (arguments.length == 0) {
      continue;
    }
    final PsiExpression lastArgument=arguments[arguments.length - 1];
    if (!(lastArgument instanceof PsiNewExpression)) {
      continue;
    }
    final PsiNewExpression newExpression=(PsiNewExpression)lastArgument;
    final PsiArrayInitializerExpression arrayInitializerExpression=newExpression.getArrayInitializer();
    if (arrayInitializerExpression == null) {
      continue;
    }
    final PsiExpression[] initializers=arrayInitializerExpression.getInitializers();
    for (    PsiExpression initializer : initializers) {
      argumentList.add(initializer);
    }
    lastArgument.delete();
  }
}
