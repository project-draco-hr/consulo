{
  final GuiEditor guiEditor=UIDesignerToolWindowManager.getInstance(myProject).getActiveFormEditor();
  LOG.assertTrue(guiEditor != null);
  final StringEditorDialog dialog=new StringEditorDialog(myTfWithButton.getTextField(),getValue(),guiEditor.getStringDescriptorLocale(),guiEditor);
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      if (!guiEditor.ensureEditable()) {
        return;
      }
      dialog.show();
      if (!dialog.isOK()) {
        return;
      }
      final StringDescriptor descriptor=dialog.getDescriptor();
      if (descriptor == null) {
        return;
      }
      setValue(descriptor);
      fireValueCommitted(true,false);
      if (myProperty != null) {
        myProperty.refreshValue(myComponent);
      }
      guiEditor.refreshAndSave(false);
    }
  }
,UIDesignerBundle.message("command.edit.string.property"),null);
}
