{
  try {
    super.beforeLogin();
    FindAllRoots findAllRoots=new FindAllRoots(myProject);
    final FilePath[] filteredFiles=FindAllRootsHelper.findVersionedUnder(myFiles);
    myRoots.addAll(findAllRoots.executeOn(filteredFiles));
    myNotProcessedRepositories.addAll(findAllRoots.getDirectoriesToBeUpdated());
    myDirectoriesToBeProcessedCount=myNotProcessedRepositories.size();
    for (    VirtualFile file : myRoots) {
      if (getValidCvsRoot(file) != null) {
        ((UpdateOperation)myCvsOperation).addFile(file);
      }
    }
  }
 catch (  ProcessCanceledException ex) {
    myIsCanceled=true;
  }
}
