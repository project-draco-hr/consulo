{
  final CommittedChangesProvider provider=CommittedChangesCache.getInstance(myProject).getProviderForProject();
  if (provider == null)   return;
  if (myComponent == null) {
    myComponent=new CommittedChangesPanel(myProject,provider,provider.createDefaultSettings(),null,null);
    myConnection.subscribe(VcsConfigurationChangeListener.BRANCHES_CHANGED,new VcsConfigurationChangeListener.Notification(){
      public void execute(      final Project project,      final VirtualFile vcsRoot){
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            myComponent.passCachedListsToListener(myBus.syncPublisher(VcsConfigurationChangeListener.BRANCHES_CHANGED_RESPONSE),project,vcsRoot);
          }
        }
);
      }
    }
);
  }
 else {
    myComponent.setProvider(provider);
  }
}
