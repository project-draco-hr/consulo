{
  final File file=new File(path);
  if (myFileSystem != null) {
    final int flags=(Integer)myGetBooleanAttributes.invoke(myFileSystem,file);
    if (flags != 0) {
      final boolean isDirectory=(flags & BA_DIRECTORY) != 0;
      final boolean isSpecial=(flags & (BA_REGULAR | BA_DIRECTORY)) == 0;
      return new FileAttributes(isDirectory,false,isSpecial,file.length(),file.lastModified(),file.canWrite());
    }
  }
 else {
    if (file.exists()) {
      final boolean isDirectory=file.isDirectory();
      final boolean isSpecial=!isDirectory && !file.isFile();
      return new FileAttributes(isDirectory,false,isSpecial,file.length(),file.lastModified(),file.canWrite());
    }
  }
  return null;
}
