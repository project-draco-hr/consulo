{
  final File file=new File(path);
  if (myFileSystem != null) {
    final int flags=(Integer)myGetBooleanAttributes.invoke(myFileSystem,file);
    if (flags != 0) {
      final boolean isDirectory=isSet(flags,BA_DIRECTORY);
      final boolean isSpecial=notSet(flags,BA_REGULAR | BA_DIRECTORY);
      final boolean isHidden=isSet(flags,BA_HIDDEN);
      return new FileAttributes(isDirectory,isSpecial,false,isHidden,file.length(),file.lastModified(),file.canWrite());
    }
  }
 else {
    if (file.exists()) {
      final boolean isDirectory=file.isDirectory();
      final boolean isSpecial=!isDirectory && !file.isFile();
      final boolean isHidden=file.isHidden();
      return new FileAttributes(isDirectory,isSpecial,false,isHidden,file.length(),file.lastModified(),file.canWrite());
    }
  }
  return null;
}
