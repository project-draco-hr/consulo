{
  final String jdkPath=jdk != null ? new File(jdk.getVMExecutablePath()).getParent() : null;
  if (jdkPath == null) {
    throw new CantRunException(JavadocBundle.message("javadoc.generate.no.jdk.path"));
  }
  String versionString=jdk.getVersionString();
  if (HEAP_SIZE != null && HEAP_SIZE.trim().length() != 0) {
    if (versionString.indexOf("1.1") > -1) {
      cmdLine.getParametersList().prepend("-J-mx" + HEAP_SIZE + "m");
    }
 else {
      cmdLine.getParametersList().prepend("-J-Xmx" + HEAP_SIZE + "m");
    }
  }
  cmdLine.setWorkingDirectory(null);
  cmdLine.setExePath(jdkPath.replace('/',File.separatorChar) + File.separator + (SystemInfo.isWindows ? "javadoc.exe" : "javadoc"));
}
