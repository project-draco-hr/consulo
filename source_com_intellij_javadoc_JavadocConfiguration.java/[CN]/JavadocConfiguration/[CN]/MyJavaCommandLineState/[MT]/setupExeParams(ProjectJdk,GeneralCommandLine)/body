{
  final String jdkPath=jdk != null ? PathUtil.getLocalPath(jdk.getHomeDirectory()) : null;
  if (jdkPath == null) {
    throw new CantRunException("JDK path is not specified\nCannot generate JavaDoc");
  }
  String versionString=jdk.getVersionString();
  if (HEAP_SIZE != null && HEAP_SIZE.trim().length() != 0) {
    if (versionString.indexOf("1.1") > -1) {
      cmdLine.getParametersList().prepend("-J-mx" + HEAP_SIZE + "m");
    }
 else {
      cmdLine.getParametersList().prepend("-J-Xmx" + HEAP_SIZE + "m");
    }
  }
  cmdLine.setWorkingDirectory(null);
  cmdLine.setExePath(jdkPath.replace('/',File.separatorChar) + File.separator + "bin"+ File.separator+ (SystemInfo.isWindows ? "javadoc.exe" : "javadoc"));
}
