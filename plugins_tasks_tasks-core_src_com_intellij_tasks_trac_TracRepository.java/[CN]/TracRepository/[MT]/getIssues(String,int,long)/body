{
  final XmlRpcClient client=getRpcClient();
  Object[] result=(Object[])client.execute("ticket.query",new Vector<Object>(Arrays.asList(query == null ? "" : query)));
  if (result == null)   throw new Exception("Cannot connect to " + getUrl());
  List<Task> tasks=ContainerUtil.mapNotNull(result,new NullableFunction<Object,Task>(){
    @Override public Task fun(    Object o){
      try {
        return getTask((Integer)o,client);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
);
  return tasks.toArray(new Task[tasks.size()]);
}
