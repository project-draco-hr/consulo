{
  final Balloon balloon=JBPopupFactory.getInstance().createHtmlTextBalloonBuilder(htmlBody.replace("\n","<br>"),icon != null ? icon : type.getDefaultIcon(),type.getPopupBackground(),listener).createBalloon();
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      AsyncProcessIcon comp=myProgressIcon;
      Point point=new Point(comp.getBounds().width / 2,comp.getHeight() / 2 - 2);
      balloon.show(new RelativePoint(comp,point),Balloon.Position.above);
    }
  }
);
  return new BalloonHandler(){
    public void hide(){
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          balloon.hide();
        }
      }
);
    }
  }
;
}
