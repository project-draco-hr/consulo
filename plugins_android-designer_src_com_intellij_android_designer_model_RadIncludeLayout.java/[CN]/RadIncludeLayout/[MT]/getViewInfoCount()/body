{
  FolderConfiguration configuration=getRoot().getClientProperty(ModelParser.FOLDER_CONFIG_KEY);
  if (myViewInfoCount != -1 && !configuration.isMatchFor(myConfiguration)) {
    myViewInfoCount=-1;
  }
  if (myViewInfoCount == -1) {
    myConfiguration=configuration;
    XmlAttribute layout=getTag().getAttribute("layout");
    XmlAttributeValue value=layout == null ? null : layout.getValueElement();
    if (value == null) {
      myViewInfoCount=0;
    }
 else {
      PsiReference reference=value.getReference();
      if (reference == null) {
        myViewInfoCount=0;
      }
 else {
        XmlFile xmlFile=findFile(configuration,(AndroidResourceReference)reference);
        XmlTag tag=xmlFile == null ? null : xmlFile.getRootTag();
        if (tag == null) {
          myViewInfoCount=0;
        }
 else         if ("merge".equalsIgnoreCase(tag.getName())) {
          myViewInfoCount=tag.getSubTags().length;
        }
 else {
          myViewInfoCount=1;
        }
      }
    }
  }
  return myViewInfoCount;
}
