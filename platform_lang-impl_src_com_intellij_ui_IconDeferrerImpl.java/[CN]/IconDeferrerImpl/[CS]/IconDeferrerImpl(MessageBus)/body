{
  final MessageBusConnection connection=bus.connect();
  connection.setDefaultHandler(new MessageHandler(){
    public void handle(    final Method event,    final Object... params){
      invalidateAllIcons();
    }
  }
);
  connection.subscribe(ProjectTopics.MODIFICATION_TRACKER,new PsiModificationTracker.Listener(){
    public void modificationCountChanged(){
      invalidateAllIcons();
    }
  }
);
  connection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener(){
    public void before(    final List<? extends VFileEvent> events){
    }
    public void after(    final List<? extends VFileEvent> events){
      clear();
    }
  }
);
  connection.subscribe(ProjectLifecycleListener.TOPIC,new ProjectLifecycleListener.Adapter(){
    @Override public void afterProjectClosed(    @NotNull Project project){
      clear();
    }
  }
);
}
