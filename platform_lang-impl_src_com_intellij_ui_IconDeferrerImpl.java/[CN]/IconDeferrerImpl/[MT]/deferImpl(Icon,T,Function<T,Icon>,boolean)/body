{
  if (myEvaluationIsInProgress.get().booleanValue()) {
    return f.fun(param);
  }
synchronized (LOCK) {
    Icon result=myIconsCache.get(param);
    if (result == null) {
      final long started=myLastClearTimestamp;
      result=new DeferredIconImpl<T>(base,param,f,new DeferredIconImpl.IconListener<T>(){
        @Override public void evalDone(        DeferredIconImpl<T> source,        T key,        @NotNull Icon r){
synchronized (LOCK) {
            if (started == myLastClearTimestamp) {
              myIconsCache.put(key,autoupdatable ? source : r);
            }
          }
        }
      }
,autoupdatable);
      myIconsCache.put(param,result);
    }
    return result;
  }
}
