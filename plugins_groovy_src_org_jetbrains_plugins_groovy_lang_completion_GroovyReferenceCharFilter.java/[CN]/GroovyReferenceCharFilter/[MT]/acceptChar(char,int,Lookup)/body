{
  final PsiFile psiFile=lookup.getPsiFile();
  if (psiFile != null && !psiFile.getViewProvider().getLanguages().contains(GroovyFileType.GROOVY_LANGUAGE))   return null;
  LookupElement item=lookup.getCurrentItem();
  if (item == null)   return null;
  if (Character.isJavaIdentifierPart(c) || c == '\'') {
    return Result.ADD_TO_PREFIX;
  }
  if ((c == '[' || c == '<' || c == '.' || c == ' ') && JavaCharFilter.isNonImportedClassEntered((LookupImpl)lookup)) {
    return Result.HIDE_LOOKUP;
  }
  if (c == '[')   return CharFilter.Result.SELECT_ITEM_AND_FINISH_LOOKUP;
  if (c == '<' && item.getObject() instanceof PsiClass)   return Result.SELECT_ITEM_AND_FINISH_LOOKUP;
  return null;
}
