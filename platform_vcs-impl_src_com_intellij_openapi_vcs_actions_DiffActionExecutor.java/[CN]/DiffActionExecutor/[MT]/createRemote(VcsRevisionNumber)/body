{
  final ContentRevision fileRevision=myDiffProvider.createFileContent(revisionNumber,mySelectedFile);
  if (fileRevision instanceof BinaryContentRevision) {
    FilePath filePath=fileRevision.getFile();
    final byte[] content=((BinaryContentRevision)fileRevision).getBinaryContent();
    if (content == null)     return null;
    return DiffContentFactory.getInstance().createBinary(myProject,filePath.getName(),filePath.getFileType(),content);
  }
  if (fileRevision != null) {
    final String content=fileRevision.getContent();
    if (content == null) {
      throw new VcsException("Failed to load content");
    }
    return FileAwareDocumentContent.create(myProject,content,fileRevision.getFile());
  }
  return null;
}
