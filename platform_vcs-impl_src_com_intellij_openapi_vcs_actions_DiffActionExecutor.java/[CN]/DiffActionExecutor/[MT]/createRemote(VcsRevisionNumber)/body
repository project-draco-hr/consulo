{
  final ContentRevision fileRevision=myDiffProvider.createFileContent(revisionNumber,mySelectedFile);
  if (fileRevision instanceof BinaryContentRevision) {
    final byte[] a=mySelectedFile.contentsToByteArray();
    final byte[] content=((BinaryContentRevision)fileRevision).getBinaryContent();
    WaitForProgressToShow.runOrInvokeLaterAboveProgress(new Runnable(){
      public void run(){
        if (Arrays.equals(a,content)) {
          Messages.showInfoMessage(VcsBundle.message("message.text.binary.versions.are.identical"),VcsBundle.message("message.title.diff"));
        }
 else {
          Messages.showInfoMessage(VcsBundle.message("message.text.binary.versions.are.different"),VcsBundle.message("message.title.diff"));
        }
      }
    }
,ModalityState.NON_MODAL,myProject);
    return null;
  }
  if (fileRevision != null) {
    final String content=fileRevision.getContent();
    if (content == null) {
      throw new VcsException("Failed to load content");
    }
    return new SimpleContent(content,mySelectedFile.getFileType());
  }
  return null;
}
