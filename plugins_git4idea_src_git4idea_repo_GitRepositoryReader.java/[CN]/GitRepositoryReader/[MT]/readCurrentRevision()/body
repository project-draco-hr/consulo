{
  final Head head=readHead();
  if (!head.isBranch) {
    return head.ref;
  }
  File branchFile=null;
  final File[] files=myRefsHeadsDir.listFiles();
  for (  File file : files) {
    if (file.getName().equals(head.ref)) {
      branchFile=file;
    }
  }
  if (branchFile != null) {
    return readBranchFile(branchFile);
  }
  return findBranchRevisionInPackedRefs(head.ref);
}
