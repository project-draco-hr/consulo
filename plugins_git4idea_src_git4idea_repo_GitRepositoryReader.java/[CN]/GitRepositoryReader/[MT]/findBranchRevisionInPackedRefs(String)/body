{
  if (!myPackedRefsFile.exists()) {
    return null;
  }
  return tryOrThrow(new Callable<String>(){
    @Override public String call() throws Exception {
      BufferedReader reader=null;
      try {
        reader=new BufferedReader(new FileReader(myPackedRefsFile));
        String line;
        while ((line=reader.readLine()) != null) {
          final AtomicReference<String> hashRef=new AtomicReference<String>();
          parsePackedRefsLine(line,new PackedRefsLineResultHandler(){
            @Override public void handleResult(            String hash,            String branchName){
              if (hash == null || branchName == null) {
                return;
              }
              if (branchName.endsWith(ref)) {
                hashRef.set(hash);
              }
            }
          }
);
          if (hashRef.get() != null) {
            return hashRef.get();
          }
        }
        return null;
      }
  finally {
        if (reader != null) {
          reader.close();
        }
      }
    }
  }
,myPackedRefsFile);
}
