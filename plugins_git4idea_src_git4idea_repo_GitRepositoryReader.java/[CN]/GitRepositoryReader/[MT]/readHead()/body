{
  String headContent=tryLoadFile(myHeadFile,calcEncoding(myHeadFile));
  headContent=headContent.trim();
  Matcher matcher=BRANCH_PATTERN.matcher(headContent);
  if (matcher.matches()) {
    return new Head(true,matcher.group(1));
  }
  if (COMMIT_PATTERN.matcher(headContent).matches()) {
    return new Head(false,headContent);
  }
  matcher=BRANCH_WEAK_PATTERN.matcher(headContent);
  if (matcher.matches()) {
    LOG.info(".git/HEAD has not standard format: [" + headContent + "]. We've parsed branch ["+ matcher.group(1)+ "]");
    return new Head(true,matcher.group(1));
  }
  throw new GitRepoStateException("Invalid format of the .git/HEAD file: \n" + headContent);
}
