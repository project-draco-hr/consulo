{
  Head head=readHead();
  if (head.isBranch) {
    String branchName=head.ref;
    String hash=readCurrentRevision();
    return new GitLocalBranch(branchName,hash == null ? GitBranch.DUMMY_HASH : Hash.create(hash));
  }
  if (isRebaseInProgress()) {
    GitBranch branch=readRebaseBranch("rebase-apply");
    if (branch == null) {
      branch=readRebaseBranch("rebase-merge");
    }
    return branch;
  }
  return null;
}
