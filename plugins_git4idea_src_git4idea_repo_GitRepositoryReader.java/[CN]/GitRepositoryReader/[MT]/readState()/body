{
  if (isMergeInProgress()) {
    return GitRepository.State.MERGING;
  }
  if (isRebaseInProgress()) {
    return GitRepository.State.REBASING;
  }
  Head head=readHead();
  if (!head.isBranch) {
    return GitRepository.State.DETACHED;
  }
  return GitRepository.State.NORMAL;
}
