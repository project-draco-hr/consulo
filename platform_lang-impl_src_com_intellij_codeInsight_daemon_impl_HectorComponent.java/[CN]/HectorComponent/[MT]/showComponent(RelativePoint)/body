{
  final JBPopup hector=JBPopupFactory.getInstance().createComponentPopupBuilder(this,this).setRequestFocus(true).setMovable(true).setCancelCallback(new Computable<Boolean>(){
    @Override public Boolean compute(){
      for (      HectorComponentPanel additionalPanel : myAdditionalPanels) {
        if (!additionalPanel.canClose()) {
          return Boolean.FALSE;
        }
      }
      onClose();
      return Boolean.TRUE;
    }
  }
).createPopup();
  Disposer.register(myFile.getProject(),new Disposable(){
    @Override public void dispose(){
      final JBPopup oldHector=getOldHector();
      if (oldHector != null && !oldHector.isDisposed()) {
        Disposer.dispose(oldHector);
      }
      Disposer.dispose(hector);
    }
  }
);
  final JBPopup oldHector=getOldHector();
  if (oldHector != null) {
    oldHector.cancel();
  }
 else {
    myHectorRef=new WeakReference<JBPopup>(hector);
    hector.show(point);
  }
}
