{
  final HttpClient httpClient=getHttpClient();
  if (!isLoginAnonymously() && !isUseHttpAuthentication())   login(httpClient);
  final HttpMethod method=getTaskListsMethod(query != null ? query : "",max);
  httpClient.executeMethod(method);
  if (method.getStatusCode() != 200)   throw new Exception("Cannot get tasks: HTTP status code " + method.getStatusCode());
  final String response=method.getResponseBodyAsString();
  return parseResponse(query,max,response);
}
