{
  final List<DependenciesBuilder> builders=new ArrayList<DependenciesBuilder>();
  for (  AnalysisScope scope : myScopes) {
    builders.add(createDependenciesBuilder(scope));
  }
  final Task task;
  if (canStartInBackground()) {
    task=new Task.Backgroundable(myProject,getProgressTitle(),true,new PerformAnalysisInBackgroundOption(myProject)){
      public void run(      @NotNull final ProgressIndicator indicator){
        perform(builders);
      }
      public void onSuccess(){
        DependenciesHandlerBase.this.onSuccess(builders);
      }
    }
;
  }
 else {
    task=new Task.Modal(myProject,getProgressTitle(),true){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        perform(builders);
      }
      @Override public void onSuccess(){
        DependenciesHandlerBase.this.onSuccess(builders);
      }
    }
;
  }
  ProgressManager.getInstance().run(task);
}
