{
  VirtualFile javaFile=myFixture.copyFileToProject(BASE_PATH + getTestName(false) + ".java","src/p1/p2/Class.java");
  myFixture.configureFromExistingVirtualFile(javaFile);
  final boolean actualAvailable=intention.isAvailable(myFixture.getProject(),myFixture.getEditor(),myFixture.getFile());
  if (available) {
    assertTrue(actualAvailable);
    CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
      @Override public void run(){
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          @Override public void run(){
            intention.invoke(myFixture.getProject(),myFixture.getEditor(),myFixture.getFile());
          }
        }
);
      }
    }
,"","");
    myFixture.checkResultByFile(BASE_PATH + getTestName(false) + "_after.java");
  }
 else {
    assertFalse(actualAvailable);
  }
}
