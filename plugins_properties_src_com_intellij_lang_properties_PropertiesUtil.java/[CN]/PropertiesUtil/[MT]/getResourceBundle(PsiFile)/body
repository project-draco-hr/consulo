{
  VirtualFile virtualFile=containingFile.getVirtualFile();
  if (!containingFile.isValid() || virtualFile == null) {
    return ResourceBundleImpl.NULL;
  }
  String baseName=getBaseName(virtualFile);
  PsiDirectory directory=ApplicationManager.getApplication().runReadAction(new Computable<PsiDirectory>(){
    @Nullable public PsiDirectory compute(){
      return containingFile.getContainingDirectory();
    }
  }
);
  if (directory == null)   return ResourceBundleImpl.NULL;
  return new ResourceBundleImpl(directory.getVirtualFile(),baseName);
}
