{
  if (PsiTreeUtil.getNonStrictParentOfType(position,PsiLiteralExpression.class,PsiComment.class) != null) {
    return false;
  }
  if (psiElement().withSuperParent(2,PsiConditionalExpression.class).accepts(position)) {
    return false;
  }
  if (END_OF_BLOCK.isAcceptable(position,position) && PsiTreeUtil.getParentOfType(position,PsiCodeBlock.class,true,PsiMember.class) != null) {
    return true;
  }
  if (psiElement().withParents(PsiReferenceExpression.class,PsiExpressionStatement.class,PsiIfStatement.class).accepts(position)) {
    PsiElement stmt=position.getParent().getParent();
    PsiIfStatement ifStatement=(PsiIfStatement)stmt.getParent();
    if (ifStatement.getElseBranch() == stmt || ifStatement.getThenBranch() == stmt) {
      return true;
    }
  }
  return false;
}
