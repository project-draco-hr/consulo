{
  String nameFromPluginXml=super.getInstalledPluginNameByPath(project,pluginPath);
  if (nameFromPluginXml != null) {
    return nameFromPluginXml;
  }
  VirtualFile pluginJson=pluginPath.findChild("plugin.json");
  if (pluginJson != null) {
    String pluginAndVersion=pluginPath.getName();
    TIntArrayList separatorIndexes=new TIntArrayList();
    int start=-1;
    while (true) {
      start=pluginAndVersion.indexOf('-',start + 1);
      if (start == -1)       break;
      separatorIndexes.add(start);
    }
    if (separatorIndexes.size() == 1) {
      return pluginAndVersion.substring(0,separatorIndexes.get(0));
    }
    if (separatorIndexes.size() > 0) {
      String json;
      try {
        json=VfsUtil.loadText(pluginJson);
      }
 catch (      IOException e) {
        return null;
      }
      for (int i=0; i < separatorIndexes.size(); i++) {
        int idx=separatorIndexes.get(i);
        String name=pluginAndVersion.substring(0,idx);
        String version=pluginAndVersion.substring(idx + 1);
        if (hasValue(PLUGIN_NAME_JSON_PATTERN,json,name) && hasValue(PLUGIN_VERSION_JSON_PATTERN,json,version)) {
          return name;
        }
      }
    }
  }
  return null;
}
