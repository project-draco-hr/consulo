{
  final boolean oldState=getState().autoMode;
  if (on != oldState) {
    getState().autoMode=on;
    if (on) {
      IdeEventQueue.getInstance().addActivityListener(myActivityListener,myProject);
    }
 else {
      IdeEventQueue.getInstance().removeActivityListener(myActivityListener);
      myIdleAlarm.cancelAllRequests();
      if (!myTimeTrackingTimer.isRunning()) {
        myTimeTrackingTimer.start();
      }
    }
  }
}
