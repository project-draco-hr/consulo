{
  final XmlTag element=getTagElement();
  if (element == null || !myStartTagFlag)   return element;
  if (newElementName.indexOf(':') == -1) {
    final String namespacePrefix=element.getNamespacePrefix();
    final int index=newElementName.lastIndexOf('.');
    if (index != -1) {
      final PsiElement psiElement=resolve();
      if (psiElement instanceof PsiFile || (psiElement != null && psiElement.isEquivalentTo(psiElement.getContainingFile()))) {
        newElementName=newElementName.substring(0,index);
      }
    }
    newElementName=prependNamespacePrefix(newElementName,namespacePrefix);
  }
  element.setName(newElementName);
  return element;
}
