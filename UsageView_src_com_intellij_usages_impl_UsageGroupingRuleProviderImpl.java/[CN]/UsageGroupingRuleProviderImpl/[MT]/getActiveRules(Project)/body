{
  List<UsageGroupingRule> rules=new ArrayList<UsageGroupingRule>();
  rules.add(new NonCodeUsageGroupingRule());
  if (GROUP_BY_USAGE_TYPE) {
    rules.add(new UsageTypeGroupingRule());
  }
  if (GROUP_BY_MODULE) {
    rules.add(new ModuleGroupingRule());
  }
  if (GROUP_BY_PACKAGE) {
    rules.add(new PackageGroupingRule(project));
  }
  if (GROUP_BY_FILE_STRUCTURE) {
    rules.add(new NonJavaFileGroupingRule(project));
    rules.add(new ClassGroupingRule());
    rules.add(new MethodGroupingRule());
  }
 else {
    rules.add(new FileGroupingRule(project));
  }
  return rules.toArray(new UsageGroupingRule[rules.size()]);
}
