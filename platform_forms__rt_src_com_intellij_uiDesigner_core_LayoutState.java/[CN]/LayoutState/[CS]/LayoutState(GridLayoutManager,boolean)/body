{
  final ArrayList componentsList=new ArrayList(layout.getComponentCount());
  final ArrayList constraintsList=new ArrayList(layout.getComponentCount());
  for (int i=0; i < layout.getComponentCount(); i++) {
    final Component component=layout.getComponent(i);
    if (!ignoreInvisibleComponents || component.isVisible()) {
      componentsList.add(component);
      final GridConstraints constraints=layout.getConstraints(i);
      constraintsList.add(constraints);
    }
  }
  myComponents=(Component[])componentsList.toArray(new Component[componentsList.size()]);
  myConstraints=(GridConstraints[])constraintsList.toArray(new GridConstraints[constraintsList.size()]);
  myMinimumSizes=new Dimension[myComponents.length];
  myPreferredSizes=new Dimension[myComponents.length];
  myColumnCount=layout.getColumnCount();
  myRowCount=layout.getRowCount();
}
