{
  final VirtualFile vcsRoot=VcsUtil.getVcsRootFor(myProject,VcsUtil.getFilePath(file.getPath()));
  if (vcsRoot == null) {
    throw new VcsException("vcs root is null");
  }
  final HgFile hgFile=new HgFile(vcsRoot,VfsUtil.virtualToIoFile(file));
  return new HgAnnotation(hgFile,(new HgAnnotateCommand(myProject)).execute(hgFile),(new HgLogCommand(myProject)).execute(hgFile,DEFAULT_LIMIT,false));
}
