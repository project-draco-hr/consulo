{
  GraphicsConfiguration targetGraphicsConfiguration=null;
  GraphicsEnvironment env=GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice[] devices=env.getScreenDevices();
  for (int i=0; i < devices.length; i++) {
    GraphicsDevice device=devices[i];
    GraphicsConfiguration graphicsConfiguration=device.getDefaultConfiguration();
    Rectangle r=graphicsConfiguration.getBounds();
    if (r.x <= aTargetX && aTargetX <= r.x + r.width && r.y <= aTargetY && aTargetY <= r.y + r.height) {
      targetGraphicsConfiguration=graphicsConfiguration;
      break;
    }
  }
  if (targetGraphicsConfiguration == null && devices.length > 0) {
    targetGraphicsConfiguration=env.getDefaultScreenDevice().getDefaultConfiguration();
  }
  if (targetGraphicsConfiguration == null) {
    throw new IllegalStateException("It's impossible to determine target graphics environment for point (" + aTargetX + ","+ aTargetY+ ")");
  }
  Insets insets=Toolkit.getDefaultToolkit().getScreenInsets(targetGraphicsConfiguration);
  Rectangle targetRectangle=targetGraphicsConfiguration.getBounds();
  targetRectangle.x+=insets.left;
  targetRectangle.y+=insets.top;
  targetRectangle.width-=insets.left + insets.right;
  targetRectangle.height-=insets.top + insets.bottom;
  return targetRectangle;
}
