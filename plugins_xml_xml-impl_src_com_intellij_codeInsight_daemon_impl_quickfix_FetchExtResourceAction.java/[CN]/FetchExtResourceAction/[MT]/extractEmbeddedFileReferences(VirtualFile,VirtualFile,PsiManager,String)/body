{
  return ApplicationManager.getApplication().runReadAction(new Computable<Set<String>>(){
    @Override public Set<String> compute(){
      PsiFile file=psiManager.findFile(vFile);
      if (file instanceof XmlFile) {
        PsiFile contextFile=contextVFile != null ? psiManager.findFile(contextVFile) : null;
        return extractEmbeddedFileReferences((XmlFile)file,contextFile instanceof XmlFile ? (XmlFile)contextFile : null,url);
      }
      return Collections.emptySet();
    }
  }
);
}
