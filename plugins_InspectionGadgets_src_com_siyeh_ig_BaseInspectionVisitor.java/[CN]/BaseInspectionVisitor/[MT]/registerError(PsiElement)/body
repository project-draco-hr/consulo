{
  if (location == null) {
    return;
  }
  final LocalQuickFix fix;
  if (!m_onTheFly && m_inspection.buildQuickFixesOnlyForOnTheFlyErrors()) {
    fix=null;
  }
 else   if (m_onTheFly && m_inspection.buildQuickFixesOnlyForBatchErrors()) {
    fix=null;
  }
 else {
    fix=m_inspection.buildFix(location);
  }
  final String description=m_inspection.buildErrorString(location);
  final ProblemDescriptor problem=m_inspectionManager.createProblemDescriptor(location,description,fix,ProblemHighlightType.GENERIC_ERROR_OR_WARNING);
  addError(problem);
}
