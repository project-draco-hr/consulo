{
  if (!ModuleType.J2EE_APPLICATION.equals(module.getModuleType())) {
    return ModuleRootManager.getInstance(module).getDependencies();
  }
  List<Module> result=new ArrayList<Module>();
  final com.intellij.javaee.model.xml.application.Application root=((JavaeeApplicationModel)J2EEModuleProperties.getInstance(module)).getRoot();
  if (root == null) {
    return Module.EMPTY_ARRAY;
  }
  final List<com.intellij.javaee.model.xml.application.Module> modules=root.getModules();
  for (  final com.intellij.javaee.model.xml.application.Module moduleInApplication : modules) {
    final Module depModule=getReferenceModule(moduleInApplication);
    if (depModule != null && !dependsOn(depModule,module)) {
      result.add(depModule);
    }
  }
  return result.toArray(new Module[result.size()]);
}
