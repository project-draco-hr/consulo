{
  if (!ModuleType.J2EE_APPLICATION.equals(module.getModuleType())) {
    return ModuleRootManager.getInstance(module).getDependencies();
  }
  List<Module> result=new ArrayList<Module>();
  final ObjectsList<ModuleInApplication> modules=((J2EEApplicationModel)J2EEModuleProperties.getInstance(module)).getModules();
  final Iterator<ModuleInApplication> iterator=modules.iterator();
  while (iterator.hasNext()) {
    final ModuleInApplication moduleInApplication=iterator.next();
    final Module depModule=moduleInApplication.getReferenceModule();
    if (depModule != null && !dependsOn(depModule,module)) {
      result.add(depModule);
    }
  }
  return result.toArray(new Module[result.size()]);
}
