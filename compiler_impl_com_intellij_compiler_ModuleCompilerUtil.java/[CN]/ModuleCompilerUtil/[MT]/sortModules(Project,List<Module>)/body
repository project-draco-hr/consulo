{
  final Application application=ApplicationManager.getApplication();
  Runnable sort=new Runnable(){
    public void run(){
      Comparator<Module> comparator=ModuleManager.getInstance(project).moduleDependencyComparator();
      Collections.sort(modules,comparator);
    }
  }
;
  if (application.isDispatchThread()) {
    sort.run();
  }
 else {
    application.runReadAction(sort);
  }
}
