{
  PsiElement position=location.getPosition();
  if (!position.isPhysical() && element.isPhysical()) {
    final PsiFile file=position.getContainingFile();
    if (file != null) {
      final PsiFile originalFile=file.getOriginalFile();
      final int offset=position.getTextRange().getStartOffset();
      PsiElement candidate=originalFile.findElementAt(offset);
      if (candidate == null) {
        candidate=originalFile.findElementAt(offset - 1);
      }
      if (candidate != null) {
        position=candidate;
      }
    }
  }
  final PsiMember member=PsiTreeUtil.getContextOfType(PsiTreeUtil.findCommonContext(position,element),PsiMember.class,false);
  if (member instanceof PsiClass)   return 1;
  if (member != null)   return 2;
  return 0;
}
