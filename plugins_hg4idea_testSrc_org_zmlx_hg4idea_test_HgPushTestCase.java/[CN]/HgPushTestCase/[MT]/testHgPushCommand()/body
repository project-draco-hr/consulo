{
  final VirtualFile vf=myRepo.getDirFixture().createFile(AFILE);
  myChangeListManager.addUnversionedFilesToVcs(vf);
  myChangeListManager.checkFilesAreInList(true,vf);
  myChangeListManager.commitFiles(vf);
  final HgPushCommand command=new HgPushCommand(myProject,myRepo.getDir(),myParentRepo.getDir().getUrl());
  final HgCommandResult result=command.execute();
  assertNotNull(result);
  assertFalse(HgErrorUtil.isAbort(result));
  myParentRepo.update();
  assertNotNull(myParentRepo.getDirFixture().getFile(AFILE));
}
