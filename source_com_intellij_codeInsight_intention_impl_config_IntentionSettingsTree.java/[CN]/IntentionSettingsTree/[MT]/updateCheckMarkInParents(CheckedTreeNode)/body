{
  while (node.getParent() != null) {
    final CheckedTreeNode parent=(CheckedTreeNode)node.getParent();
    parent.setChecked(true);
    visitChildren(parent,new CheckedNodeVisitor(){
      public void visit(      CheckedTreeNode node){
        if (!node.isChecked()) {
          parent.setChecked(false);
        }
      }
    }
);
    node=parent;
  }
}
