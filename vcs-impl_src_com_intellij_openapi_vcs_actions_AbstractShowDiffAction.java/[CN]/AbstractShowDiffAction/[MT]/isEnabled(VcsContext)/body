{
  if (!(isVisible(vcsContext)))   return false;
  final Project project=vcsContext.getProject();
  if (project == null)   return false;
  final VirtualFile[] selectedFilePaths=vcsContext.getSelectedFiles();
  if (selectedFilePaths == null || selectedFilePaths.length != 1)   return false;
  final VirtualFile selectedFile=selectedFilePaths[0];
  final AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(selectedFile);
  if (vcs == null)   return false;
  final DiffProvider diffProvider=vcs.getDiffProvider();
  if (diffProvider == null)   return false;
  return AbstractVcs.fileInVcsByFileStatus(project,new FilePathImpl(selectedFile));
}
