{
  ProjectLevelVcsManager manager=ProjectLevelVcsManager.getInstance(project);
  List<FilePath> result=new ArrayList<FilePath>(Arrays.asList(roots));
  for (  FilePath first : roots) {
    for (    FilePath second : roots) {
      if (first != second) {
        AbstractVcs firstVcs=manager.getVcsFor(first);
        AbstractVcs secondVcs=manager.getVcsFor(second);
        if ((firstVcs == secondVcs) && (firstVcs != null) && (!firstVcs.allowsNestedRoots())&& VfsUtil.isAncestor(first.getIOFile(),second.getIOFile(),false)) {
          result.remove(second);
        }
      }
    }
  }
  return result.toArray(new FilePath[result.size()]);
}
