{
  final boolean[] result={true};
synchronized (documentsToCommit) {
    documentsToCommit.process(new Processor<CommitTask>(){
      @Override public boolean process(      CommitTask commitTask){
        result[0]&=processor.process(commitTask);
        return true;
      }
    }
);
  }
  return result[0];
}
