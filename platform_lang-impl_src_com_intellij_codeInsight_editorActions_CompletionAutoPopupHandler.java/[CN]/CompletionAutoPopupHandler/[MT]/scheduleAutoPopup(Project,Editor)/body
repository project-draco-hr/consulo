{
  final CompletionPhase.AutoPopupAlarm phase=new CompletionPhase.AutoPopupAlarm(false,editor);
  CompletionServiceImpl.setCompletionPhase(phase);
  final Runnable request=new Runnable(){
    @Override public void run(){
      if (phase.isExpired())       return;
      invokeCompletion(CompletionType.BASIC,false,true,project,editor,0,false);
    }
  }
;
  AutoPopupController.getInstance(project).invokeAutoPopupRunnable(new Runnable(){
    @Override public void run(){
      runLaterWithCommitted(project,editor.getDocument(),request);
    }
  }
,CodeInsightSettings.getInstance().AUTO_LOOKUP_DELAY);
}
