{
  if (CompletionService.getCompletionService().getCurrentCompletion() != null)   return Result.CONTINUE;
  if (!Character.isLetter(charTyped))   return Result.CONTINUE;
  if (!CodeInsightSettings.getInstance().AUTO_POPUP_COMPLETION_LOOKUP)   return Result.CONTINUE;
  AutoPopupController.getInstance(project).invokeAutoPopupRunnable(new Runnable(){
    @Override public void run(){
      if (project.isDisposed() || !file.isValid())       return;
      if (editor.isDisposed() || FileEditorManager.getInstance(project).getSelectedTextEditor() != editor)       return;
      new CodeCompletionHandlerBase(CompletionType.BASIC,false,false).invoke(project,editor);
    }
  }
,CodeInsightSettings.getInstance().AUTO_LOOKUP_DELAY);
  return Result.STOP;
}
