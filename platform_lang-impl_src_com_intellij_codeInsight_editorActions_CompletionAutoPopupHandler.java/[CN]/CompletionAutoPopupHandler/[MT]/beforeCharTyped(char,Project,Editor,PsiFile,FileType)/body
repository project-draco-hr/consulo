{
  CompletionPhase phase=CompletionServiceImpl.getCompletionPhase();
  if (phase instanceof CompletionPhase.EmptyAutoPopup) {
    long modificationStampBeforeTyping=editor.getDocument().getModificationStamp();
    ((CompletionPhase.EmptyAutoPopup)phase).handleTyping(c);
    AutoHardWrapHandler.getInstance().wrapLineIfNecessary(editor,DataManager.getInstance().getDataContext(editor.getContentComponent()),modificationStampBeforeTyping);
    return Result.STOP;
  }
  return Result.CONTINUE;
}
