{
  Ref<File> ref=myCachedGradleHomeFromPath;
  if (ref != null) {
    return ref.get();
  }
  String path=System.getenv("PATH");
  if (path == null) {
    return null;
  }
  for (  String pathEntry : path.split(File.pathSeparator)) {
    File dir=new File(pathEntry);
    if (!dir.isDirectory()) {
      continue;
    }
    for (    String fileName : GRADLE_START_FILE_NAMES) {
      File startFile=new File(dir,fileName);
      if (startFile.isFile()) {
        File candidate=dir.getParentFile();
        if (isGradleSdkHome(candidate)) {
          myCachedGradleHomeFromPath=new Ref<File>(candidate);
          return candidate;
        }
      }
    }
  }
  return null;
}
