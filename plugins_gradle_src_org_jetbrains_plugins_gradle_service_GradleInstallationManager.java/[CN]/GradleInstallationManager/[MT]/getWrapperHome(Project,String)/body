{
  if (project == null) {
    return null;
  }
  GradleProjectSettings settings=GradleSettings.getInstance(project).getLinkedProjectSettings(linkedProjectPath);
  if (settings == null) {
    return null;
  }
  if (settings.isPreferLocalInstallationToWrapper()) {
    return null;
  }
  String version=GradleUtil.getWrapperVersion(linkedProjectPath);
  if (version == null) {
    return null;
  }
  File gradleSystemDir=new File(System.getProperty("user.home"),".gradle");
  if (!gradleSystemDir.isDirectory()) {
    return null;
  }
  File gradleWrapperDistributionsHome=new File(gradleSystemDir,"wrapper/dists");
  if (!gradleWrapperDistributionsHome.isDirectory()) {
    return null;
  }
  File targetDistributionHome=new File(gradleWrapperDistributionsHome,String.format("gradle-%s-bin",version));
  if (!targetDistributionHome.isDirectory()) {
    return null;
  }
  File[] files=targetDistributionHome.listFiles();
  if (files == null || files.length != 1) {
    return null;
  }
  File result=new File(files[0],String.format("gradle-%s",version));
  if (result.isDirectory()) {
    return result;
  }
 else {
    return null;
  }
}
