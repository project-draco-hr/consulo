{
  if (project == null) {
    return null;
  }
  GradleProjectSettings settings=GradleSettings.getInstance(project).getLinkedProjectSettings(linkedProjectPath);
  if (settings == null) {
    return null;
  }
  if (settings.isPreferLocalInstallationToWrapper()) {
    return null;
  }
  String distribution=GradleUtil.getWrapperDistribution(linkedProjectPath);
  if (distribution == null) {
    return null;
  }
  File gradleSystemDir=new File(System.getProperty("user.home"),".gradle");
  if (!gradleSystemDir.isDirectory()) {
    return null;
  }
  File gradleWrapperDistributionsHome=new File(gradleSystemDir,"wrapper/dists");
  if (!gradleWrapperDistributionsHome.isDirectory()) {
    return null;
  }
  File targetDistributionHome=new File(gradleWrapperDistributionsHome,distribution);
  if (!targetDistributionHome.isDirectory()) {
    return null;
  }
  File[] files=targetDistributionHome.listFiles();
  if (files == null || files.length != 1) {
    return null;
  }
  File[] distFiles=files[0].listFiles(new FileFilter(){
    @Override public boolean accept(    File f){
      return f.isDirectory();
    }
  }
);
  if (distFiles == null || distFiles.length != 1) {
    return null;
  }
  return distFiles[0].isDirectory() ? distFiles[0] : null;
}
