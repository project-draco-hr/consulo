{
  ensureUniqueKeymapNames();
  final KeymapManagerImpl keymapManager=(KeymapManagerImpl)KeymapManager.getInstance();
  keymapManager.removeAllKeymapsExceptUnmodifiable();
  for (int i=0; i < myKeymapListModel.getSize(); i++) {
    final Keymap modelKeymap=(Keymap)myKeymapListModel.getElementAt(i);
    if (modelKeymap.canModify()) {
      final KeymapImpl keymapToAdd=((KeymapImpl)modelKeymap).copy();
      keymapManager.addKeymap(keymapToAdd);
    }
  }
  keymapManager.setActiveKeymap(mySelectedKeymap);
  try {
    keymapManager.save();
  }
 catch (  IOException e) {
    throw new ConfigurationException(e.getMessage());
  }
  myQuickListsPanel.apply();
}
