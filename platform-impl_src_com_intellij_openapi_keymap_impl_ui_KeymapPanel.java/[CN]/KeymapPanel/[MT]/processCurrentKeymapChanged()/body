{
  myCopyButton.setEnabled(false);
  myDeleteButton.setEnabled(false);
  myResetToDefault.setEnabled(false);
  myAddKeyboardShortcutButton.setEnabled(false);
  myAddMouseShortcutButton.setEnabled(false);
  myRemoveShortcutButton.setEnabled(false);
  if (myExportButton != null) {
    myExportButton.setEnabled(false);
  }
  KeymapImpl selectedKeymap=getSelectedKeymap();
  mySelectedKeymap=selectedKeymap;
  if (selectedKeymap == null) {
    myActionsTree.reset(new KeymapImpl(),getCurrentQuickListIds());
    return;
  }
  myKeymapList.setEditable(mySelectedKeymap.canModify());
  myCopyButton.setEnabled(true);
  myBaseKeymapLabel.setText("");
  Keymap parent=mySelectedKeymap.getParent();
  if (parent != null) {
    myBaseKeymapLabel.setText(KeyMapBundle.message("based.on.keymap.label",parent.getPresentableName()));
    if (mySelectedKeymap.canModify() && mySelectedKeymap.getOwnActionIds().length > 0) {
      myResetToDefault.setEnabled(true);
    }
  }
  if (mySelectedKeymap.canModify()) {
    myDeleteButton.setEnabled(true);
    myAddKeyboardShortcutButton.setEnabled(true);
    myAddMouseShortcutButton.setEnabled(true);
    myRemoveShortcutButton.setEnabled(true);
    if (!getSchemesManager().isShared(mySelectedKeymap)) {
      if (myExportButton != null) {
        myExportButton.setEnabled(true);
      }
    }
  }
  myActionsTree.reset(mySelectedKeymap,getCurrentQuickListIds());
  updateShortcutsList();
}
