{
  myCopyButton.setEnabled(false);
  myDeleteButton.setEnabled(false);
  myResetToDefault.setEnabled(false);
  myAddKeyboardShortcutButton.setEnabled(false);
  myAddMouseShortcutButton.setEnabled(false);
  myRemoveShortcutButton.setEnabled(false);
  KeymapImpl selectedKeymap=getSelectedKeymap();
  mySelectedKeymap=selectedKeymap;
  if (selectedKeymap == null) {
    myActionsTree.reset(new KeymapImpl(),myQuickListsPanel.getCurrentQuickListIds());
    return;
  }
  myKeymapList.setEditable(mySelectedKeymap.canModify());
  myCopyButton.setEnabled(true);
  myBaseKeymapLabel.setText("");
  Keymap parent=mySelectedKeymap.getParent();
  if (parent != null) {
    myBaseKeymapLabel.setText(KeyMapBundle.message("based.on.keymap.label",parent.getPresentableName()));
    if (mySelectedKeymap.canModify() && mySelectedKeymap.getOwnActionIds().length > 0) {
      myResetToDefault.setEnabled(true);
    }
  }
  myDisableMnemonicsCheckbox.setSelected(!mySelectedKeymap.areMnemonicsEnabled());
  myDisableMnemonicsCheckbox.setEnabled(mySelectedKeymap.canModify());
  if (mySelectedKeymap.canModify()) {
    myDeleteButton.setEnabled(true);
    myAddKeyboardShortcutButton.setEnabled(true);
    myAddMouseShortcutButton.setEnabled(true);
    myRemoveShortcutButton.setEnabled(true);
  }
  myActionsTree.reset(mySelectedKeymap,myQuickListsPanel.getCurrentQuickListIds());
  updateShortcutsList();
}
