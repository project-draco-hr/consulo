{
synchronized (myFilesToIgnore) {
    if (myFilesToIgnore.size() == 0) {
      return IgnoreResult.NO;
    }
    final VirtualFile baseDir=myProject.getBaseDir();
    final File baseDirIoFile=(baseDir != null) ? new File(baseDir.getPath()) : null;
    String absIoPath=new File(file.getPath()).getAbsolutePath();
    absIoPath=file.isDirectory() ? (absIoPath + File.separatorChar) : absIoPath;
    for (    IgnoredFileBean bean : myFilesToIgnore) {
      final String prefix=bean.getPath();
      if ("./".equals(prefix) && baseDir != null) {
        final String basePath=FileUtil.toSystemIndependentName(baseDir.getPath());
        final String fileAbsPath=FileUtil.toSystemIndependentName(file.getPath());
        if (StringUtil.startsWithIgnoreCase(fileAbsPath,basePath)) {
          return IgnoreResult.SUBTREE;
        }
      }
 else       if (prefix != null && bean.fileIsUnderMe(absIoPath,baseDirIoFile)) {
        return IgnoreSettingsType.UNDER_DIR.equals(bean.getType()) ? IgnoreResult.SUBTREE : IgnoreResult.SELF;
      }
      final Pattern pattern=bean.getPattern();
      if (pattern != null && pattern.matcher(file.getName()).matches()) {
        return IgnoreResult.SELF;
      }
    }
    return IgnoreResult.NO;
  }
}
