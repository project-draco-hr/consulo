{
  if (true)   return 0;
  TextRange range=root.getTextRange();
  int off=range.getStartOffset();
  PsiElement[] children=root.getChildren();
  if (children.length != 0) {
    for (int i=0; i < children.length; i++) {
      PsiElement child=children[i];
      off+=checkTextRanges(child);
    }
  }
 else {
    off+=root.getTextLength();
  }
  LOG.assertTrue(off == range.getEndOffset());
  String fileText=root.getContainingFile().getText();
  LOG.assertTrue(root.getText().equals(fileText.substring(range.getStartOffset(),range.getEndOffset())));
  if (root instanceof XmlTag) {
    XmlTagValue value=((XmlTag)root).getValue();
    TextRange textRange=value.getTextRange();
    LOG.assertTrue(value.getText().equals(fileText.substring(textRange.getStartOffset(),textRange.getEndOffset())));
  }
  return range.getLength();
}
