{
  super.visitAssignmentExpression(assignment);
  final PsiMember methodOrInitializer=checkConstructorOrInstanceInitializer(assignment);
  if (methodOrInitializer == null) {
    return;
  }
  final PsiExpression psiExpression=getLastRightExpression(assignment);
  if (psiExpression == null || !(psiExpression instanceof PsiThisExpression)) {
    return;
  }
  final PsiThisExpression thisExpression=(PsiThisExpression)psiExpression;
  if (!(assignment.getLExpression() instanceof PsiReferenceExpression)) {
    return;
  }
  final PsiReferenceExpression leftExpression=(PsiReferenceExpression)assignment.getLExpression();
  if (!(leftExpression.resolve() instanceof PsiField)) {
    return;
  }
  final PsiField field=(PsiField)leftExpression.resolve();
  if (field.getContainingFile().equals(assignment.getContainingFile())) {
    return;
  }
  final PsiClass cls=ClassUtils.getContainingClass(assignment);
  if (cls.isInheritor(field.getContainingClass(),true)) {
    return;
  }
  registerError(thisExpression);
}
