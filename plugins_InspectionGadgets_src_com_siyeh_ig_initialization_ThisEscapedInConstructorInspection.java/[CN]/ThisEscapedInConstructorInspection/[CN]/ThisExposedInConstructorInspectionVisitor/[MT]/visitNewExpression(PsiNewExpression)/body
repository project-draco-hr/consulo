{
  super.visitNewExpression(psiNewExpression);
  final PsiMember methodOrInitializer=checkConstructorOrInstanceInitializer(psiNewExpression);
  if (methodOrInitializer == null) {
    return;
  }
  if (psiNewExpression.getClassReference() == null) {
    return;
  }
  final PsiThisExpression thisExposed=checkArgumentsForThis(psiNewExpression);
  if (thisExposed == null) {
    return;
  }
  final PsiJavaCodeReferenceElement refElement=psiNewExpression.getClassReference();
  if (refElement != null) {
    final PsiClass constructorClass=(PsiClass)refElement.resolve();
    if (constructorClass != null) {
      if (constructorClass.getContainingFile().equals(psiNewExpression.getContainingFile())) {
        return;
      }
    }
  }
  registerError(thisExposed);
}
