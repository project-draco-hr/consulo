{
  super.visitNewExpression(newExpression);
  final boolean isInInitialization=checkForInitialization(newExpression);
  if (!isInInitialization) {
    return;
  }
  if (newExpression.getClassReference() == null) {
    return;
  }
  final PsiThisExpression thisExposed=checkArgumentsForThis(newExpression);
  if (thisExposed == null) {
    return;
  }
  final PsiJavaCodeReferenceElement refElement=newExpression.getClassReference();
  if (refElement != null) {
    final PsiClass constructorClass=(PsiClass)refElement.resolve();
    if (constructorClass != null) {
      final PsiFile containingFile=constructorClass.getContainingFile();
      if (containingFile.equals(newExpression.getContainingFile())) {
        return;
      }
    }
  }
  registerError(thisExposed);
}
