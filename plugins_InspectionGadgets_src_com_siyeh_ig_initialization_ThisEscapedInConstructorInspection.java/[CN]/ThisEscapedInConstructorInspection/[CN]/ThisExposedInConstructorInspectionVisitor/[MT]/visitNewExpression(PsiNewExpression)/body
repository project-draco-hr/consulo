{
  super.visitNewExpression(newExpression);
  final boolean isInInitialization=checkForInitialization(newExpression);
  if (!isInInitialization) {
    return;
  }
  final PsiJavaCodeReferenceElement refElement=newExpression.getClassReference();
  if (refElement == null) {
    return;
  }
  final PsiThisExpression thisExposed=checkArgumentsForThis(newExpression);
  if (thisExposed == null) {
    return;
  }
  final PsiClass constructorClass=(PsiClass)refElement.resolve();
  if (constructorClass != null) {
    final PsiFile containingFile=constructorClass.getContainingFile();
    if (containingFile.equals(newExpression.getContainingFile())) {
      return;
    }
  }
  registerError(thisExposed);
}
