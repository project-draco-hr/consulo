{
  if (!(action instanceof Separator)) {
    assertActionIsGroupOrStub(action);
  }
  String actionName=action instanceof ActionStub ? ((ActionStub)action).getClassName() : action.getClass().getName();
  if (!ADD_TO_GROUP_ELEMENT_NAME.equals(element.getName())) {
    reportActionError(pluginId,"unexpected name of element \"" + element.getName() + "\"");
    return;
  }
  final AnAction parentGroup=getParentGroup(element.getAttributeValue(GROUPID_ATTR_NAME),actionName,pluginId);
  if (parentGroup == null) {
    return;
  }
  final Anchor anchor=parseAnchor(element.getAttributeValue(ANCHOR_ELEMENT_NAME),actionName,pluginId);
  if (anchor == null) {
    return;
  }
  final String relativeToActionId=element.getAttributeValue(RELATIVE_TO_ACTION_ATTR_NAME);
  if (!checkRelativeToAction(relativeToActionId,anchor,actionName,pluginId)) {
    return;
  }
  final DefaultActionGroup group=(DefaultActionGroup)parentGroup;
  group.addAction(action,new Constraints(anchor,relativeToActionId),this).setAsSecondary(secondary);
}
