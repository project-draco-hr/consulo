{
  File tempFile=FileUtil.createTempFile("ideaGroovyToCompile",".txt",true);
  final Writer writer=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(tempFile)));
  try {
    for (    String file : changedSources) {
      writer.write(GroovyRtConstants.SRC_FILE + "\n");
      writer.write(file);
      writer.write("\n");
    }
    writer.write("class2src\n");
    for (    Map.Entry<String,String> entry : class2Src.entrySet()) {
      writer.write(entry.getKey() + "\n");
      writer.write(entry.getValue() + "\n");
    }
    writer.write(GroovyRtConstants.END + "\n");
    writer.write(GroovyRtConstants.PATCHERS + "\n");
    for (    String patcher : patchers) {
      writer.write(patcher + "\n");
    }
    writer.write(GroovyRtConstants.END + "\n");
    if (encoding != null) {
      writer.write(GroovyRtConstants.ENCODING + "\n");
      writer.write(encoding + "\n");
    }
    writer.write(GroovyRtConstants.OUTPUTPATH + "\n");
    writer.write(outputDir);
    writer.write("\n");
    writer.write(GroovyRtConstants.FINAL_OUTPUTPATH + "\n");
    writer.write(finalOutput);
    writer.write("\n");
  }
  finally {
    writer.close();
  }
  return tempFile;
}
