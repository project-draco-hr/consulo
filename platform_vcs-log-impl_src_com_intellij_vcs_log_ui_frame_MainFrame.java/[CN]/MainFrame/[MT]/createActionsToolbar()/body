{
  DefaultActionGroup toolbarGroup=new DefaultActionGroup();
  toolbarGroup.add(ActionManager.getInstance().getAction(VcsLogActionPlaces.TOOLBAR_ACTION_GROUP));
  DefaultActionGroup mainGroup=new DefaultActionGroup();
  mainGroup.add(myFilterUi.createActionGroup());
  mainGroup.addSeparator();
  if (BekUtil.isBekEnabled()) {
    if (BekUtil.isLinearBekEnabled()) {
      mainGroup.add(new IntelliSortChooserPopupAction());
    }
 else {
      mainGroup.add(ActionManager.getInstance().getAction(VcsLogActionPlaces.VCS_LOG_INTELLI_SORT_ACTION));
    }
  }
  mainGroup.add(toolbarGroup);
  ActionToolbar toolbar=createActionsToolbar(mainGroup);
  Wrapper textFilter=new Wrapper(myTextFilter);
  textFilter.setVerticalSizeReferent(toolbar.getComponent());
  textFilter.setBorder(JBUI.Borders.emptyLeft(5));
  ActionToolbar settings=createActionsToolbar(new DefaultActionGroup(ActionManager.getInstance().getAction(VcsLogActionPlaces.VCS_LOG_QUICK_SETTINGS_ACTION)));
  settings.setReservePlaceAutoPopupIcon(false);
  settings.setLayoutPolicy(ActionToolbar.NOWRAP_LAYOUT_POLICY);
  JPanel panel=new JPanel(new MigLayout("ins 0, fill","[left]0[left, fill]push[right]","center"));
  panel.add(textFilter);
  panel.add(toolbar.getComponent());
  panel.add(settings.getComponent());
  return panel;
}
