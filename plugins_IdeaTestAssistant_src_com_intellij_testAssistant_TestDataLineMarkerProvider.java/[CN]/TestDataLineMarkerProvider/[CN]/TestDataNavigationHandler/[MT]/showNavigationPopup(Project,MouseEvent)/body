{
  List<String> shortNames=new ArrayList<String>();
  for (  String fileName : myFileNames) {
    shortNames.add(new File(fileName).getName());
  }
  final JList list=new JList(shortNames.toArray(new String[shortNames.size()]));
  list.setCellRenderer(new ColoredListCellRenderer(){
    @Override protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      String fileName=(String)value;
      final FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(fileName);
      setIcon(fileType.getIcon());
      append(fileName);
    }
  }
);
  PopupChooserBuilder builder=new PopupChooserBuilder(list);
  builder.setItemChoosenCallback(new Runnable(){
    public void run(){
      final int[] indices=list.getSelectedIndices();
      for (      int index : indices) {
        openFileByIndex(project,index);
      }
    }
  }
).createPopup().show(new RelativePoint(e));
}
