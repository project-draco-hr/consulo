{
  if (repo == null) {
    return Collections.emptyMap();
  }
  final HgCommandExecutor executor=new HgCommandExecutor(project);
  executor.setSilent(true);
  HgCommandResult result=executor.executeInCurrentThread(repo,"showconfig",null);
  if (result == null) {
    return Collections.emptyMap();
  }
  Map<String,String> options=new HashMap<String,String>();
  for (  String line : result.getOutputLines()) {
    String[] option=StringUtils.splitPreserveAllTokens(line,'=');
    if (option.length == 2) {
      options.put(option[0].trim(),option[1].trim());
    }
  }
  return options;
}
