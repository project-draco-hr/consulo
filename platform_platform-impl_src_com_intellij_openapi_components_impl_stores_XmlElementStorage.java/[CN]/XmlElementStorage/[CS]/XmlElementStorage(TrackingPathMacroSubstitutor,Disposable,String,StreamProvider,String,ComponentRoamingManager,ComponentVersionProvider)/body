{
  myPathMacroSubstitutor=pathMacroSubstitutor;
  myRootElementName=rootElementName;
  myStreamProvider=streamProvider;
  myFileSpec=fileSpec;
  myComponentRoamingManager=componentRoamingManager;
  Disposer.register(parentDisposable,this);
  myIsProjectSettings=StoragePathMacros.PROJECT_FILE.equals(myFileSpec) || myFileSpec.startsWith(StoragePathMacros.PROJECT_CONFIG_DIR);
  myLocalVersionProvider=localComponentVersionsProvider;
  myRemoteVersionProvider=new ComponentVersionProvider(){
    @Override public long getVersion(    String name){
      if (myProviderVersions == null) {
        loadProviderVersions();
      }
      return myProviderVersions.containsKey(name) ? myProviderVersions.get(name).longValue() : 0;
    }
    @Override public void changeVersion(    String name,    long version){
      if (myProviderVersions == null) {
        loadProviderVersions();
      }
      myProviderVersions.put(name,version);
    }
  }
;
}
