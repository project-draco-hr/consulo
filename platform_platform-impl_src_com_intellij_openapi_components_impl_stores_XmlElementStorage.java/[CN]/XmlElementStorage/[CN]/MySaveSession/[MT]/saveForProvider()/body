{
  if (!myStreamProvider.isApplicable(myFileSpec,myRoamingType)) {
    return;
  }
  Element element=getElementToSave();
  if (element == null || element.getChildren().isEmpty()) {
    myStreamProvider.delete(myFileSpec,myRoamingType);
    return;
  }
  if (myFileSpec.equals(StoragePathMacros.WORKSPACE_FILE)) {
    Element copiedElement=JDOMUtil.cloneElement(element,DISABLED_ROAMING_ELEMENT_FILTER);
    if (copiedElement != null) {
      doSaveForProvider(copiedElement,DISABLED_ROAMING_ELEMENT_FILTER.myRoamingType,myStreamProvider);
    }
  }
 else {
    doSaveForProvider(element,myRoamingType,myStreamProvider);
  }
}
