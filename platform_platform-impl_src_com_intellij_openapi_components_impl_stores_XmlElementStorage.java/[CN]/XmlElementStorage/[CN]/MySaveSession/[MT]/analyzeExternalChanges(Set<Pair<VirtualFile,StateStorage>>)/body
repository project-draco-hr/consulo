{
  boolean containsSelf=false;
  for (  Pair<VirtualFile,StateStorage> pair : changedFiles) {
    if (pair.second == XmlElementStorage.this) {
      containsSelf=true;
      break;
    }
  }
  if (!containsSelf) {
    return Collections.emptySet();
  }
  try {
    Element element=loadLocalData();
    if (element == null) {
      return Collections.emptySet();
    }
    StorageData storageData=createStorageData();
    loadState(storageData,element);
    return storageData.getChangedComponentNames(myStorageData,myPathMacroSubstitutor);
  }
 catch (  StateStorageException e) {
    LOG.info(e);
  }
  return null;
}
