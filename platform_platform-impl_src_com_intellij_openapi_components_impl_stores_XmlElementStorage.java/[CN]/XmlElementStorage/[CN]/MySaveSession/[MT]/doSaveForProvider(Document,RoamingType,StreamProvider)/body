{
  try {
    boolean result=StorageUtil.doSendContent(streamProvider,myFileSpec,actualDocument,roamingType,true);
    if (streamProvider.isVersioningRequired()) {
      TObjectLongHashMap<String> versions=loadVersions(actualDocument.getRootElement().getChildren(StorageData.COMPONENT));
      if (!versions.isEmpty()) {
        Document versionDoc=new Document(StateStorageManagerImpl.createComponentVersionsXml(versions));
        StorageUtil.doSendContent(streamProvider,myFileSpec + VERSION_FILE_SUFFIX,versionDoc,roamingType,true);
      }
    }
    return result;
  }
 catch (  IOException e) {
    LOG.warn(e);
    return false;
  }
}
