{
  if (element.getAttributes().isEmpty() && element.getChildren().isEmpty())   return;
  myStorageData.setState(componentName,element);
  int hash=JDOMUtil.getTreeHash(element);
  try {
    Object oldElementState=myStorageComponentStates.get(componentName);
    if (oldElementState instanceof Element && !JDOMUtil.areElementsEqual((Element)oldElementState,element) || oldElementState instanceof Integer && hash != (Integer)oldElementState) {
      myListener.componentStateChanged(componentName);
    }
  }
  finally {
    myStorageComponentStates.put(componentName,hash);
  }
}
