{
  if (content == null) {
    StorageUtil.doSendContent(myStreamProvider,myFileSpec,element,roamingType,true);
  }
 else {
    myStreamProvider.saveContent(myFileSpec,content.getInternalBuffer(),content.size(),myRoamingType,true);
  }
  if (myStreamProvider.isVersioningRequired()) {
    TObjectLongHashMap<String> versions=loadVersions(element.getChildren(StorageData.COMPONENT));
    if (!versions.isEmpty()) {
      Element versionDoc=StateStorageManagerImpl.createComponentVersionsXml(versions);
      StorageUtil.doSendContent(myStreamProvider,myFileSpec + VERSION_FILE_SUFFIX,versionDoc,roamingType,true);
    }
  }
}
