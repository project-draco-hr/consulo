{
  Document document=loadDocument();
  StorageData result=createStorageData();
  if (document != null) {
    loadState(result,document.getRootElement());
  }
  if (useProvidersData && myStreamProvider != null && myStreamProvider.isEnabled()) {
    for (    RoamingType roamingType : RoamingType.values()) {
      if (roamingType != RoamingType.DISABLED && roamingType != RoamingType.GLOBAL) {
        try {
          Document sharedDocument=StorageUtil.loadDocument(myStreamProvider.loadContent(myFileSpec,roamingType));
          if (sharedDocument != null) {
            filterOutOfDate(sharedDocument.getRootElement());
            loadState(result,sharedDocument.getRootElement());
          }
        }
 catch (        Exception e) {
          LOG.warn(e);
        }
      }
    }
  }
  return result;
}
