{
  AccessToken token=HeavyProcessLatch.INSTANCE.processStarted("Resetting Project Structure");
  try {
    myContext.reset();
    myProjectSdksModel.reset(myProject);
    Configurable toSelect=null;
    for (    Configurable each : myName2Config) {
      if (myUiState.lastEditedConfigurable != null && myUiState.lastEditedConfigurable.equals(each.getDisplayName())) {
        toSelect=each;
      }
      if (each instanceof MasterDetailsComponent) {
        ((MasterDetailsComponent)each).setHistory(myHistory);
      }
      each.reset();
    }
    myHistory.clear();
    if (toSelect == null && myName2Config.size() > 0) {
      toSelect=myName2Config.iterator().next();
    }
    removeSelected();
    navigateTo(toSelect != null ? createPlaceFor(toSelect) : null,false);
    if (myUiState.proportion > 0) {
      mySplitter.setProportion(myUiState.proportion);
    }
  }
  finally {
    token.finish();
  }
}
