{
  if (element.getNode() == null || !this.equals(anchor.getParent())) {
    throw new IncorrectOperationException();
  }
  GroovyElementFactory factory=GroovyElementFactory.getInstance(getProject());
  ASTNode elemNode=element.getNode();
  getNode().addChild(elemNode,anchor.getNode());
  if (mayUseNewLinesAsSeparators()) {
    getNode().addChild(factory.createNewLine().getNode(),anchor.getNode());
  }
 else {
    getNode().addChild(factory.createSemicolon().getNode(),anchor.getNode());
  }
  return elemNode.getPsi();
}
