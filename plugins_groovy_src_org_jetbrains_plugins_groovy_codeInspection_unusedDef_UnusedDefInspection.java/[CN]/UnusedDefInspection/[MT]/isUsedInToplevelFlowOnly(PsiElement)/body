{
  GrVariable var=null;
  if (element instanceof GrVariable) {
    var=(GrVariable)element;
  }
 else   if (element instanceof GrReferenceExpression) {
    final PsiElement resolved=((GrReferenceExpression)element).resolve();
    if (resolved instanceof GrVariable)     var=(GrVariable)resolved;
  }
  if (var != null) {
    final GroovyPsiElement scope=getScope(var);
    LOG.assertTrue(scope != null,DebugUtil.psiToString(var.getContainingFile(),true,false));
    return ReferencesSearch.search(var,new LocalSearchScope(scope)).forEach(new Processor<PsiReference>(){
      public boolean process(      PsiReference ref){
        return getScope(ref.getElement()) == scope;
      }
    }
);
  }
  return true;
}
