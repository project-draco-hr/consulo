{
  PsiElement element=descriptor.getPsiElement();
  PsiElement parent=element.getParent();
  if (parent instanceof GrVariable) {
    Collection<PsiReference> all=ReferencesSearch.search(parent).findAll();
    for (    PsiReference reference : all) {
      PsiElement e=reference.getElement();
      if (e instanceof GrReferenceExpression) {
        PsiElement p=e.getParent();
        if (p instanceof GrAssignmentExpression) {
          if (PsiUtil.isExpressionUsed(p)) {
            ((GrAssignmentExpression)p).replaceWithExpression(((GrAssignmentExpression)p).getRValue(),true);
          }
 else {
            p.delete();
          }
        }
      }
 else {
        e.delete();
      }
    }
    parent.delete();
  }
}
