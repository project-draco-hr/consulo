{
  final JavaCommandLineState state=new JavaCommandLineState(runnerSettings,configurationSettings){
    protected JavaParameters createJavaParameters() throws ExecutionException {
      final JavaParameters params=new JavaParameters();
      JavaParametersUtil.configureModule(getConfigurationModule(),params,JavaParameters.JDK_AND_CLASSES_AND_TESTS);
      JavaParametersUtil.configureConfiguration(params,ApplicationConfiguration.this);
      params.setMainClass(MAIN_CLASS_NAME);
      return params;
    }
  }
;
  state.setConsoleBuilder(TextConsoleBuidlerFactory.getInstance().createBuilder(getProject()));
  state.setModulesToCompile(getModules());
  return state;
}
