{
  final Set<PsiFile> psiFiles=new com.intellij.util.containers.HashSet<PsiFile>();
  final MultiMap<Module,PsiFile> files=new MultiMap<Module,PsiFile>();
  final MultiMap<VirtualFile,PsiFile> jars=new MultiMap<VirtualFile,PsiFile>();
  final MultiMap<VirtualFile,PsiFile> virtualFiles=new MultiMap<VirtualFile,PsiFile>();
  for (  ConfigFileSearcher searcher : searchers) {
    files.putAllValues(searcher.getFilesByModules());
    jars.putAllValues(searcher.getJars());
    virtualFiles.putAllValues(searcher.getVirtualFiles());
  }
  psiFiles.addAll(buildModuleNodes(files,jars,root));
  for (  Map.Entry<VirtualFile,Collection<PsiFile>> entry : virtualFiles.entrySet()) {
    DefaultMutableTreeNode node=createFileNode(entry.getKey());
    List<PsiFile> list=new ArrayList<PsiFile>(entry.getValue());
    Collections.sort(list,FILE_COMPARATOR);
    for (    PsiFile file : list) {
      node.add(createFileNode(file));
    }
    root.add(node);
  }
  return psiFiles;
}
