{
  if (!(value instanceof DefaultMutableTreeNode))   return;
  final Object object=((DefaultMutableTreeNode)value).getUserObject();
  if (object instanceof FileType) {
    final FileType fileType=(FileType)object;
    final Icon icon=fileType.getIcon();
    renderer.setIcon(icon);
    renderer.append(getFileTypeNodeName(fileType),SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
 else   if (object instanceof Module) {
    final Module module=(Module)object;
    final Icon icon=ModuleType.get(module).getIcon();
    renderer.setIcon(icon);
    final String moduleName=module.getName();
    renderer.append(moduleName,SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
 else   if (object instanceof PsiFile) {
    final PsiFile psiFile=(PsiFile)object;
    final Icon icon=psiFile.getIcon(0);
    renderer.setIcon(icon);
    final String fileName=psiFile.getName();
    renderer.append(fileName,SimpleTextAttributes.REGULAR_ATTRIBUTES);
    final VirtualFile virtualFile=psiFile.getVirtualFile();
    if (virtualFile != null) {
      String path=virtualFile.getPath();
      final int i=path.indexOf(JarFileSystem.JAR_SEPARATOR);
      if (i >= 0) {
        path=path.substring(i + JarFileSystem.JAR_SEPARATOR.length());
      }
      renderer.append(" (" + path + ")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
    }
  }
 else   if (object instanceof VirtualFile) {
    VirtualFile file=(VirtualFile)object;
    renderer.setIcon(VirtualFilePresentation.getIcon(file));
    renderer.append(file.getName(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
    String path=file.getPath();
    final int i=path.indexOf(JarFileSystem.JAR_SEPARATOR);
    if (i >= 0) {
      path=path.substring(i + JarFileSystem.JAR_SEPARATOR.length());
    }
    renderer.append(" (" + path + ")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
  }
}
