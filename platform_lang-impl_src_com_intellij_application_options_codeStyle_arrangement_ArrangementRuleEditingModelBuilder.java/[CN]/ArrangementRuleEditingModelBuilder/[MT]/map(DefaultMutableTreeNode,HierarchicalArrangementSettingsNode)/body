{
  DefaultMutableTreeNode uiNode=null;
  int result=0;
  for (int i=uiParentNode.getChildCount() - 1; i >= 0; i--) {
    DefaultMutableTreeNode child=(DefaultMutableTreeNode)uiParentNode.getChildAt(i);
    if (settingsNode.getCurrent().equals(child.getUserObject())) {
      uiNode=child;
      break;
    }
  }
  if (uiNode == null) {
    uiNode=new DefaultMutableTreeNode(settingsNode.getCurrent());
    uiParentNode.add(uiNode);
    result++;
  }
  for (  HierarchicalArrangementSettingsNode childSettingsNode : settingsNode.getChildren()) {
    result+=map(uiNode,childSettingsNode);
  }
  return result;
}
