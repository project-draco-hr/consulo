{
  final char[] chars=editor.getDocument().getText().toCharArray();
  final ArrayList<String> words=new ArrayList<String>();
  final List<String> afterWords=new ArrayList<String>();
  IdTableBuilding.scanWords(new IdTableBuilding.ScanWordProcessor(){
    public void run(    final char[] chars,    final int start,    final int end){
      final int caretOffset=editor.getCaretModel().getOffset();
      if (start <= caretOffset && end >= caretOffset)       return;
      final String word=new String(chars,start,end - start);
      if (end > caretOffset)       afterWords.add(word);
 else       words.add(word);
    }
  }
,chars,0,chars.length);
  ListOrderedSet variants=new ListOrderedSet();
  for (int i=words.size() - 1; i >= 0; i--) {
    String s=words.get(i);
    variants.add(s);
  }
  variants.addAll(afterWords);
  return variants;
}
