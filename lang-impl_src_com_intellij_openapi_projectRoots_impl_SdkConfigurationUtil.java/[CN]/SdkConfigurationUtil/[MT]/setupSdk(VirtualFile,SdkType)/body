{
  return ApplicationManager.getApplication().runWriteAction(new Computable<Sdk>(){
    public Sdk compute(){
      final ProjectJdkImpl projectJdk=new ProjectJdkImpl(sdkType.suggestSdkName(null,homeDir.getPath()),sdkType);
      projectJdk.setHomePath(homeDir.getPath());
      sdkType.setupSdkPaths(projectJdk);
      ProjectJdkTable.getInstance().addJdk(projectJdk);
      return projectJdk;
    }
  }
);
}
