{
  DocumentFoldingInfo info=document.getUserData(FOLDING_INFO_IN_DOCUMENT_KEY);
  if (info == null) {
    info=new DocumentFoldingInfo(myProject,document);
    DocumentFoldingInfo written=((UserDataHolderEx)document).putUserDataIfAbsent(FOLDING_INFO_IN_DOCUMENT_KEY,info);
    if (written != info) {
      myDocumentsWithFoldingInfo.add(document);
      info=written;
    }
  }
  return info;
}
