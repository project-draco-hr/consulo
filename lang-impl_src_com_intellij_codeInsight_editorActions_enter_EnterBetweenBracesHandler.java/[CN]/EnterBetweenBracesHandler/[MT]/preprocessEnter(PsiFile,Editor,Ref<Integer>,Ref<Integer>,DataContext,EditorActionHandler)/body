{
  Document document=editor.getDocument();
  CharSequence text=document.getCharsSequence();
  int caretOffset=caretOffsetRef.get().intValue();
  if (CodeInsightSettings.getInstance().SMART_INDENT_ON_ENTER) {
    if (caretOffset > 0 && caretOffset < text.length() && ((text.charAt(caretOffset - 1) == '(' && text.charAt(caretOffset) == ')') || (text.charAt(caretOffset - 1) == '{' && text.charAt(caretOffset) == '}'))) {
      originalHandler.execute(editor,dataContext);
      PsiDocumentManager.getInstance(file.getProject()).commitDocument(document);
      try {
        CodeStyleManager.getInstance(file.getProject()).adjustLineIndent(file,editor.getCaretModel().getOffset());
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      return Result.Handled;
    }
  }
  return Result.NotHandled;
}
