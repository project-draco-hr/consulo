{
  int offset=editor.getCaretModel().getOffset();
  PsiElement element=file.findElementAt(offset);
  if (element == null)   return false;
  final ParserDefinition definition=LanguageParserDefinitions.INSTANCE.forLanguage(element.getLanguage());
  if (definition != null) {
    final TokenSet stringLiteralElements=definition.getStringLiteralElements();
    final ASTNode node=element.getNode();
    if (node == null)     return false;
    final IElementType elementType=node.getElementType();
    if (stringLiteralElements.contains(elementType)) {
      return true;
    }
    PsiElement parent=element.getParent();
    if (parent != null && stringLiteralElements.contains(parent.getNode().getElementType())) {
      return true;
    }
  }
  return false;
}
