{
  String tempFileName=fileName;
  int i=1;
  String tempSubdir=null;
  while (myTempFileNames.contains(tempFileName)) {
    tempSubdir=String.valueOf(i++);
    tempFileName=tempSubdir + "/" + fileName;
  }
  String propertyName=basePropertyName;
  i=2;
  while (myProperties.contains(propertyName)) {
    propertyName=basePropertyName + i++;
  }
  runBeforeBuild(new Property(propertyName,BuildProperties.propertyRelativePath(ARTIFACTS_TEMP_DIR_PROPERTY,tempFileName)));
  if (tempSubdir != null && myCreatedTempSubdirs.add(tempSubdir)) {
    runBeforeBuild(new Mkdir(BuildProperties.propertyRelativePath(ARTIFACTS_TEMP_DIR_PROPERTY,tempSubdir)));
  }
  myTempFileNames.add(tempFileName);
  myProperties.add(propertyName);
  return propertyName;
}
