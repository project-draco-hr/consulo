{
  GitRemote remote=getRemoteByName(repository,remoteName);
  if (remote == null) {
    return pushDeletionNatively(repository,remoteName,branchName);
  }
  String remoteUrl=remote.getFirstUrl();
  if (remoteUrl != null && GitHttpAdapter.shouldUseJGit(remoteUrl)) {
    String fullBranchName=branchName.startsWith(GitBranch.REFS_HEADS_PREFIX) ? branchName : GitBranch.REFS_HEADS_PREFIX + branchName;
    String spec=":" + fullBranchName;
    GitSimplePushResult simplePushResult=GitHttpAdapter.push(repository,remote,remoteUrl,spec);
    return convertSimplePushResultToCommandResult(simplePushResult);
  }
 else {
    return pushDeletionNatively(repository,remoteName,branchName);
  }
}
