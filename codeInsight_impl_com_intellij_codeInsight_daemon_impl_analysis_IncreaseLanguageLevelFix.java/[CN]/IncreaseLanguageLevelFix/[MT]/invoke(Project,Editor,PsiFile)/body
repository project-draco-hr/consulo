{
  Module module=VfsUtil.getModuleForFile(project,file.getVirtualFile());
  LanguageLevel moduleLevel=module == null ? null : module.getLanguageLevel();
  ProjectJdk jdk=getRelevantJdk(project,module);
  if (moduleLevel != null && isJdkSupportsLevel(jdk)) {
    ModuleRootManager.getInstance(module).setLanguageLevel(myLevel);
  }
 else {
    ProjectRootManagerEx.getInstanceEx(project).setLanguageLevel(myLevel);
  }
}
