{
  final JpsModule module=myProject.addModule("m",JpsJavaModuleType.INSTANCE);
  JpsSimpleElement<JavaSourceRootProperties> properties=JpsElementFactory.getInstance().createSimpleElement(new JavaSourceRootProperties("com.xxx"));
  final JpsModuleSourceRoot sourceRoot=module.addSourceRoot("file://url",JavaSourceRootType.SOURCE,properties);
  assertSameElements(myDispatcher.retrieveAdded(JpsModule.class),module);
  assertSameElements(myDispatcher.retrieveAdded(JpsModuleSourceRoot.class),sourceRoot);
  final JpsModuleSourceRoot root=assertOneElement(module.getSourceRoots());
  assertEquals("file://url",root.getUrl());
  assertSameElements(ContainerUtilRt.newArrayList(module.getSourceRoots(JavaSourceRootType.SOURCE)),root);
  assertEmpty(ContainerUtil.newArrayList(module.getSourceRoots(JavaSourceRootType.TEST_SOURCE)));
  JpsTypedModuleSourceRoot<JpsSimpleElement<JavaSourceRootProperties>> typedRoot=root.asTyped(JavaSourceRootType.SOURCE);
  assertNotNull(typedRoot);
  assertEquals("com.xxx",typedRoot.getProperties().getData().getPackagePrefix());
}
