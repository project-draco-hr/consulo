{
  List<ChangeList> preferredLists=new ArrayList<ChangeList>(lists);
  Set<Change> changesAsSet=new THashSet<Change>(Arrays.asList(changes));
  for (  ChangeList list : lists) {
    for (    Change change : list.getChanges()) {
      if (changesAsSet.contains(change)) {
        preferredLists.remove(list);
        break;
      }
    }
  }
  if (preferredLists.isEmpty() && includeDefaultIfEmpty) {
    for (    ChangeList list : lists) {
      if (list.isDefault()) {
        preferredLists.add(list);
      }
    }
  }
  return preferredLists;
}
