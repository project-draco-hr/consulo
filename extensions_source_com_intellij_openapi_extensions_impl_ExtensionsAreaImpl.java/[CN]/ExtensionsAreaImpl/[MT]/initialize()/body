{
  for (Iterator iterator=ourDefaultEPs.keySet().iterator(); iterator.hasNext(); ) {
    String epName=(String)iterator.next();
    registerExtensionPoint(epName,(String)ourDefaultEPs.get(epName));
  }
  getExtensionPoint(EPAvailabilityListenerExtension.EXTENSION_POINT_NAME).addExtensionPointListener(new ExtensionPointListener(){
    public void extensionRemoved(    Object extension){
      EPAvailabilityListenerExtension epListenerExtension=(EPAvailabilityListenerExtension)extension;
      List listeners=(List)myAvailabilityListeners.get(epListenerExtension.getExtensionPointName());
      for (Iterator iterator=listeners.iterator(); iterator.hasNext(); ) {
        Object listener=iterator.next();
        if (listener.getClass().getName().equals(epListenerExtension.getListenerClass())) {
          iterator.remove();
          return;
        }
      }
      myLogger.warn("Failed to find EP availability listener: " + epListenerExtension.getListenerClass());
    }
    public void extensionAdded(    Object extension){
      EPAvailabilityListenerExtension epListenerExtension=(EPAvailabilityListenerExtension)extension;
      try {
        String epName=epListenerExtension.getExtensionPointName();
        ExtensionPointAvailabilityListener listener=(ExtensionPointAvailabilityListener)instantiate(epListenerExtension.loadListenerClass());
        addAvailabilityListener(epName,listener);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
}
