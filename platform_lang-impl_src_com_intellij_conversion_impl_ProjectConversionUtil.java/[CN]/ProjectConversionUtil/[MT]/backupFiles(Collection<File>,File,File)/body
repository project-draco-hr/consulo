{
  backupDir.mkdirs();
  for (  File file : files) {
    final File target;
    if (FileUtil.isAncestor(parentDir,file,true)) {
      final String relativePath=FileUtil.getRelativePath(parentDir,file);
      target=new File(backupDir.getAbsolutePath() + File.separator + relativePath);
      FileUtil.createParentDirs(target);
    }
 else {
      target=new File(backupDir,file.getName());
    }
    FileUtil.copy(file,target);
  }
}
