{
  processor.handleEvent(PsiScopeProcessor.Event.SET_DECLARATION_HOLDER,this);
  PsiElement[] decls=getDeclaredElements();
  for (  PsiElement decl : decls) {
    if (decl != lastParent) {
      if (!processor.execute(decl,substitutor))       return false;
    }
 else {
      final ElementClassHint hint=processor.getHint(ElementClassHint.class);
      if (lastParent instanceof PsiClass) {
        if (hint == null || hint.shouldProcess(PsiClass.class)) {
          processor.execute(lastParent,substitutor);
        }
      }
    }
  }
  return true;
}
