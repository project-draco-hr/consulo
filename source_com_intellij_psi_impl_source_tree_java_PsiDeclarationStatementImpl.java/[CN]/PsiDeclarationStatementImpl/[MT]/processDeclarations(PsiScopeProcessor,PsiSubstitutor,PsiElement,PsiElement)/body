{
  processor.handleEvent(PsiScopeProcessor.Event.SET_DECLARATION_HOLDER,this);
  PsiElement[] decls=getDeclaredElements();
  for (int i=0; i < decls.length; i++) {
    if (decls[i] != lastParent) {
      if (!processor.execute(decls[i],substitutor))       return false;
    }
 else {
      final ElementClassHint hint=processor.getHint(ElementClassHint.class);
      if (lastParent instanceof PsiClass) {
        if (hint == null || hint.shouldProcess(PsiClass.class)) {
          processor.execute(lastParent,substitutor);
        }
      }
    }
  }
  return true;
}
