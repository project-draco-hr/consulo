{
  setupRenderer();
  myPathLabel=new JLabel(" ");
  myPathLabel.setHorizontalAlignment(SwingConstants.RIGHT);
  final Font font=myPathLabel.getFont();
  myPathLabel.setFont(font.deriveFont((float)10));
  myUpdateAlarm=new Alarm(Alarm.ThreadToUse.SWING_THREAD);
  myDetailView=new DetailViewImpl(myProject);
  JPanel footerPanel=new JPanel(new BorderLayout()){
    @Override protected void paintComponent(    Graphics g){
      super.paintComponent(g);
      g.setColor(BORDER_COLOR);
      g.drawLine(0,0,getWidth(),0);
    }
  }
;
  Runnable runnable=new Runnable(){
    public void run(){
      IdeFocusManager.getInstance(myProject).doWhenFocusSettlesDown(new Runnable(){
        public void run(){
          Object[] values=getSelectedItems();
          if (values.length == 1) {
            ((ItemWrapper)values[0]).execute(myProject,myPopup);
          }
 else {
            for (            Object value : values) {
              if (value instanceof ItemWrapper) {
                ((ItemWrapper)value).execute(myProject,myPopup);
              }
            }
          }
        }
      }
);
    }
  }
;
  footerPanel.setBorder(BorderFactory.createEmptyBorder(4,4,4,4));
  footerPanel.add(myPathLabel);
  myActionToolbar=ActionManager.getInstance().createActionToolbar("",myActions,true);
  myActionToolbar.setReservePlaceAutoPopupIcon(false);
  myActionToolbar.setMinimumButtonSize(new Dimension(20,20));
  final JComponent toolBar=myActionToolbar.getComponent();
  toolBar.setOpaque(false);
  final PopupChooserBuilder builder=createInnerBuilder();
  myPopup=builder.setTitle(myDelegate.getTitle()).setMovable(true).setResizable(true).setAutoselectOnMouseMove(false).setSettingButton(toolBar).setSouthComponent(footerPanel).setEastComponent(myDetailView).setItemChoosenCallback(runnable).setCloseOnEnter(myCloseOnEnter).setMayBeParent(true).setMinSize(new Dimension(-1,700)).setFilteringEnabled(new Function<Object,String>(){
    public String fun(    Object o){
      return ((ItemWrapper)o).speedSearchText();
    }
  }
).createPopup();
  return myPopup;
}
