{
  final ChangeListManagerImpl listManager=ChangeListManagerImpl.getInstanceImpl(project);
  final List<LocalChangeList> lists=listManager.getChangeLists();
  ChangeListChooser chooser=new ChangeListChooser(project,getPreferredLists(lists,changes,true),guessPreferredList(lists,changes),VcsBundle.message("changes.changelist.chooser.title"));
  chooser.show();
  LocalChangeList resultList=chooser.getSelectedList();
  if (resultList != null) {
    listManager.moveChangesTo(resultList,changes);
    if (unversionedFiles != null) {
      listManager.addUnversionedFiles(resultList,unversionedFiles);
    }
    return true;
  }
  return false;
}
