{
  final ArrayList<VirtualFile> stubs=ContainerUtil.newArrayList();
  for (  String relativePath : output.keySet()) {
    final File stubFile=new File(outputRootDirectory.getPath(),relativePath);
    FileUtil.createIfDoesntExist(stubFile);
    try {
      FileUtil.writeToFile(stubFile,output.get(relativePath).toString().getBytes(src.getCharset()));
    }
 catch (    IOException e) {
      LOG.error(e);
    }
    CompilerUtil.refreshIOFile(stubFile);
    ContainerUtil.addIfNotNull(LocalFileSystem.getInstance().refreshAndFindFileByIoFile(stubFile),stubs);
  }
  return stubs;
}
