{
  final CompileScope scope=compileContext.getCompileScope();
  if (scope.getFiles(StdFileTypes.JAVA,true).length == 0) {
    return;
  }
  boolean hasGroovy=false;
  final ExcludedEntriesConfiguration excluded=GroovyCompilerConfiguration.getInstance(myProject).getState().excludeFromStubGeneration;
  List<VirtualFile> total=new ArrayList<VirtualFile>();
  for (  final VirtualFile virtualFile : virtualFiles) {
    if (!excluded.isExcluded(virtualFile)) {
      total.add(virtualFile);
      if (virtualFile.getFileType() == GroovyFileType.GROOVY_FILE_TYPE) {
        hasGroovy=true;
      }
    }
  }
  if (!hasGroovy) {
    return;
  }
  super.compile(compileContext,total.toArray(new VirtualFile[total.size()]),sink);
}
