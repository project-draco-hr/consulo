{
  ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
  for (  ContentEntry entry : rootManager.getContentEntries()) {
    for (    SourceFolder folder : entry.getSourceFolders()) {
      VirtualFile dir=folder.getFile();
      if ((!inTests || folder.isTestSource()) && dir != null) {
        if (!rootManager.getFileIndex().iterateContentUnderDirectory(dir,new ContentIterator(){
          @Override public boolean processFile(          VirtualFile fileOrDir){
            if (!fileOrDir.isDirectory() && JavaFileType.INSTANCE == fileOrDir.getFileType()) {
              return false;
            }
            return true;
          }
        }
)) {
          return true;
        }
      }
    }
  }
  return false;
}
