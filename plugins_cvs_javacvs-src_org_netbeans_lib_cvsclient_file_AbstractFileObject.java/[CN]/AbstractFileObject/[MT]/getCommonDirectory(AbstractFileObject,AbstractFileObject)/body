{
  final String parentPath1=getDirectory(abstractFileObject1).getPath();
  final String parentPath2=getDirectory(abstractFileObject2).getPath();
  final int parentPathLength1=parentPath1.length();
  final int parentPathLength2=parentPath2.length();
  final int length=Math.min(parentPathLength1,parentPathLength2);
  int lastSlashIndex=1;
  for (int i=1; i < length; i++) {
    final char chr1=parentPath1.charAt(i);
    final char chr2=parentPath2.charAt(i);
    if (chr1 != chr2) {
      return DirectoryObject.createInstance(parentPath1.substring(0,lastSlashIndex));
    }
    if (chr1 == '/') {
      lastSlashIndex=i;
    }
  }
  if (parentPathLength1 == parentPathLength2) {
    return DirectoryObject.createInstance(parentPath1);
  }
  if (parentPathLength1 > parentPathLength2) {
    if (parentPath1.charAt(parentPathLength2) == '/') {
      return DirectoryObject.createInstance(parentPath2);
    }
    return DirectoryObject.createInstance(parentPath1.substring(0,lastSlashIndex));
  }
 else {
    if (parentPath2.charAt(parentPathLength1) == '/') {
      return DirectoryObject.createInstance(parentPath1);
    }
    return DirectoryObject.createInstance(parentPath1.substring(0,lastSlashIndex));
  }
}
