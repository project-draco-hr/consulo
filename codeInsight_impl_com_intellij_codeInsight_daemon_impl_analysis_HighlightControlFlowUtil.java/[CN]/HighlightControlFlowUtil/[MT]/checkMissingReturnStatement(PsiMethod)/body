{
  PsiCodeBlock body=method.getBody();
  if (body == null || method.getReturnType() == null || PsiType.VOID == method.getReturnType()) {
    return null;
  }
  try {
    final ControlFlow controlFlow=ControlFlowFactory.getControlFlow(body,LocalsOrMyInstanceFieldsControlFlowPolicy.getInstance(),false);
    if (!ControlFlowUtil.returnPresent(controlFlow)) {
      final PsiElement context=body.getRBrace() == null ? body.getLastChild() : body.getRBrace();
      final HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,context,JavaErrorMessages.message("missing.return.statement"));
      QuickFixAction.registerQuickFixAction(highlightInfo,new AddReturnFix(method),null);
      IntentionAction fix=QUICK_FIX_FACTORY.createMethodReturnFix(method,PsiType.VOID,false);
      QuickFixAction.registerQuickFixAction(highlightInfo,fix,null);
      return highlightInfo;
    }
  }
 catch (  AnalysisCanceledException e) {
  }
  return null;
}
