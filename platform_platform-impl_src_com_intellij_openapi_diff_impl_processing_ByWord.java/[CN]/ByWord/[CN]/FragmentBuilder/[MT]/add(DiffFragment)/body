{
  DiffString text1=fragment.getText1();
  DiffString text2=fragment.getText2();
  if (text1 != null)   myVersion1.addOffset(text1.length());
  if (text2 != null)   myVersion2.addOffset(text2.length());
  if (fragment.isEqual() && !myFragments.isEmpty()) {
    int lastIndex=myFragments.size() - 1;
    DiffFragment prevFragment=myFragments.get(lastIndex);
    if (prevFragment.isEqual()) {
      prevFragment.appendText1(text1);
      prevFragment.appendText2(text2);
      return;
    }
  }
  myFragments.add(fragment);
}
