{
  String text1=fragment.getText1();
  String text2=fragment.getText2();
  if (text1 != null)   myVersion1.addOffset(text1.length());
  if (text2 != null)   myVersion2.addOffset(text2.length());
  if (fragment.isEqual() && myFragments.size() > 0) {
    int lastIndex=myFragments.size() - 1;
    DiffFragment prevFragment=myFragments.get(lastIndex);
    if (prevFragment.isEqual()) {
      myFragments.remove(lastIndex);
      fragment=DiffFragment.unchanged(prevFragment.getText1() + fragment.getText1(),prevFragment.getText2() + fragment.getText2());
    }
  }
  myFragments.add(fragment);
}
