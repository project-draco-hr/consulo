{
  int flags=TargetElementUtilBase.REFERENCED_ELEMENT_ACCEPTED | TargetElementUtil.NEW_AS_CONSTRUCTOR | TargetElementUtilBase.LOOKUP_ITEM_ACCEPTED| TargetElementUtil.THIS_ACCEPTED| TargetElementUtil.SUPER_ACCEPTED;
  PsiElement element=TargetElementUtilBase.getInstance().findTargetElement(editor,flags,offset);
  if (element != null)   return element;
  PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (file == null) {
    return null;
  }
  PsiElement elementAt=file.findElementAt(offset);
  for (  GotoDeclarationHandler handler : Extensions.getExtensions(GotoDeclarationHandler.EP_NAME)) {
    PsiElement result=handler.getGotoDeclarationTarget(elementAt);
    if (result != null) {
      return result;
    }
  }
  return null;
}
