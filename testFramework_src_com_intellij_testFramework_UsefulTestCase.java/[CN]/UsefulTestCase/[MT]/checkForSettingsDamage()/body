{
  if (!isPerformanceTest() && ApplicationManager.getApplication() != null) {
    final CodeInsightSettings settings=CodeInsightSettings.getInstance();
    Element newS=new Element("temp");
    settings.writeExternal(newS);
    Assert.assertEquals("Code insight settings damaged",DEFAULT_SETTINGS_EXTERNALIZED,JDOMUtil.writeElement(newS,"\n"));
    CodeStyleSettings codeStyleSettings=getCurrentCodeStyleSettings();
    codeStyleSettings.getIndentOptions(StdFileTypes.JAVA);
    checkSettingsEqual(myOldCodeStyleSettings,codeStyleSettings,"Code style settings damaged");
    codeStyleSettings.clearCodeStyleSettings();
    myOldCodeStyleSettings=null;
  }
}
