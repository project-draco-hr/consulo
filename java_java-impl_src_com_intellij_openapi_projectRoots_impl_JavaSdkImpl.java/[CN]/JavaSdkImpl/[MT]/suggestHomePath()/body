{
  if (SystemInfo.isMac) {
    if (new File("/usr/libexec/java_home").exists()) {
      final String path=ExecUtil.execAndReadLine("/usr/libexec/java_home");
      if (path != null && new File(path).exists()) {
        return path;
      }
    }
    return "/System/Library/Frameworks/JavaVM.framework/Versions";
  }
  if (SystemInfo.isLinux) {
    final String[] homes={"/usr/java","/opt/java","/usr/lib/jvm"};
    for (    String home : homes) {
      if (new File(home).isDirectory()) {
        return home;
      }
    }
  }
  if (SystemInfo.isSolaris) {
    return "/usr/jdk";
  }
  return null;
}
