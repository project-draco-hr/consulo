{
  if (SystemInfo.isMac) {
    if (new File("/usr/libexec/java_home").exists()) {
      BufferedReader input=null;
      try {
        final Process exec=Runtime.getRuntime().exec("/usr/libexec/java_home");
        input=new BufferedReader(new InputStreamReader(exec.getInputStream()));
        return input.readLine();
      }
 catch (      IOException e) {
      }
 finally {
        try {
          if (input != null)           input.close();
        }
 catch (        IOException e) {
        }
      }
    }
    return "/System/Library/Frameworks/JavaVM.framework/Versions/";
  }
  if (SystemInfo.isLinux) {
    return "/usr/lib/jvm/";
  }
  return null;
}
