{
  if (SystemInfo.isMac) {
    if (new File("/usr/libexec/java_home").exists()) {
      BufferedReader input=null;
      try {
        final Process exec=Runtime.getRuntime().exec("/usr/libexec/java_home");
        input=new BufferedReader(new InputStreamReader(exec.getInputStream()));
        final String path=input.readLine();
        if (new File(path).exists())         return path;
      }
 catch (      IOException e) {
      }
 finally {
        try {
          if (input != null)           input.close();
        }
 catch (        IOException e) {
        }
      }
    }
    return "/System/Library/Frameworks/JavaVM.framework/Versions/";
  }
  if (SystemInfo.isLinux) {
    return "/usr/lib/jvm/";
  }
  if (SystemInfo.isSolaris) {
    return "/usr/jdk/";
  }
  return null;
}
