{
  final Object selectedValue=getList().getSelectedValue();
  final ActionPopupStep actionPopupStep=ObjectUtils.tryCast(getListStep(),ActionPopupStep.class);
  if (actionPopupStep != null) {
    KeepingPopupOpenAction dontClosePopupAction=getActionByClass(selectedValue,actionPopupStep,KeepingPopupOpenAction.class);
    if (dontClosePopupAction != null) {
      actionPopupStep.performAction((AnAction)dontClosePopupAction,e != null ? e.getModifiers() : 0);
      for (      ActionItem item : actionPopupStep.myItems) {
        updateActionItem(item);
      }
      getList().repaint();
      return;
    }
  }
  super.handleSelect(handleFinalChoices,e);
}
