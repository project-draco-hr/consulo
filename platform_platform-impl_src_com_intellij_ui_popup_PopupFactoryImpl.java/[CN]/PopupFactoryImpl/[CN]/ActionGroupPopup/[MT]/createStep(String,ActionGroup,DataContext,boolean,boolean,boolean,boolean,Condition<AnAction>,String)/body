{
  final Component component=PlatformDataKeys.CONTEXT_COMPONENT.getData(dataContext);
  final ActionStepBuilder builder=new ActionStepBuilder(dataContext,showNumbers,useAlphaAsNumbers,showDisabledActions,honorActionMnemonics);
  if (actionPlace != null) {
    builder.setActionPlace(actionPlace);
  }
  builder.buildGroup(actionGroup);
  final List<ActionItem> items=builder.getItems();
  int defaultOptionIndex=0;
  if (preselectActionCondition != null) {
    for (int i=0; i < items.size(); i++) {
      final AnAction action=items.get(i).getAction();
      if (preselectActionCondition.value(action)) {
        defaultOptionIndex=i;
        break;
      }
    }
  }
  return new ActionPopupStep(items,title,component,showNumbers || honorActionMnemonics && itemsHaveMnemonics(items),defaultOptionIndex,false,showDisabledActions);
}
