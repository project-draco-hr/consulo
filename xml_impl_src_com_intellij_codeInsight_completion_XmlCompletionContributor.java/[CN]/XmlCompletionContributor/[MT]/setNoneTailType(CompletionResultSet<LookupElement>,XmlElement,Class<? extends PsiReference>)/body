{
  final PsiReference[] references=ApplicationManager.getApplication().runReadAction(new Computable<PsiReference[]>(){
    public PsiReference[] compute(){
      return element.getReferences();
    }
  }
);
  for (  final PsiReference reference : references) {
    if (referenceClass.isInstance(reference)) {
      result.setSuccessorFilter(new AsyncConsumer<LookupElement>(){
        public void consume(        final LookupElement lookupElement){
          if (lookupElement.getTailType() == TailType.UNKNOWN) {
            lookupElement.setTailType(TailType.NONE);
          }
          result.addElement(lookupElement);
        }
      }
);
      return;
    }
  }
}
