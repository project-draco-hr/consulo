{
  final PsiReference[] references=ApplicationManager.getApplication().runReadAction(new Computable<PsiReference[]>(){
    public PsiReference[] compute(){
      return element.getReferences();
    }
  }
);
  for (  final PsiReference reference : references) {
    if (referenceClass.isInstance(reference)) {
      return CompletionService.getCompletionService().getVariantsFromContributors(EP_NAME,parameters,contributor,new Consumer<LookupElement>(){
        public void consume(        final LookupElement lookupElement){
          if (lookupElement.getTailType() == TailType.UNKNOWN) {
            lookupElement.setTailType(TailType.NONE);
          }
          result.addElement(lookupElement);
        }
      }
);
    }
  }
  return true;
}
