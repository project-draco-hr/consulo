{
  ByteArrayOutputStream contents=new ByteArrayOutputStream();
  ContentLoader loader=new ContentLoader(myURL,contents,myRevision,myPegRevision);
  if (ApplicationManager.getApplication().isDispatchThread() && !myRevision.isLocal()) {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(loader,SvnBundle.message("progress.title.loading.file.content"),false,myVCS.getProject());
  }
 else {
    loader.run();
  }
  if (loader.getException() == null) {
    return contents.toByteArray();
  }
 else {
    final SVNException svnException=loader.getException();
    LOG.info("Failed to load file '" + myURL + "' content at revision: "+ myRevision+ "\n"+ svnException.getMessage(),svnException);
    throw new VcsException(svnException);
  }
}
