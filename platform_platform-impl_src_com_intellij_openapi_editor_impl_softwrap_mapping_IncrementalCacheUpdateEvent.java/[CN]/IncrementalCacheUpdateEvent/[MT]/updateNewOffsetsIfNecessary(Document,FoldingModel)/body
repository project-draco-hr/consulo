{
  myNewStartOffset=getLineStartOffset(myNewExactStartOffset,document);
  myNewEndOffset=getLineEndOffset(myNewExactEndOffset,document);
  for (FoldRegion region=foldingModel.getCollapsedRegionAtOffset(myNewEndOffset); region != null; region=foldingModel.getCollapsedRegionAtOffset(myNewEndOffset)) {
    myNewEndOffset=getLineEndOffset(region.getEndOffset(),document);
  }
  myNewLogicalLinesDiff=document.getLineNumber(myNewExactEndOffset) - document.getLineNumber(myNewExactStartOffset);
}
