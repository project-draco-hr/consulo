{
  final PsiWhileStatement whileStatement=(PsiWhileStatement)element.getParent();
  if (whileStatement == null) {
    return;
  }
  final PsiStatement body=whileStatement.getBody();
  final StringBuilder doWhileStatementText=new StringBuilder("if(");
  final PsiExpression condition=whileStatement.getCondition();
  if (condition != null) {
    doWhileStatementText.append(condition.getText());
  }
  doWhileStatementText.append(") {\n");
  if (body instanceof PsiBlockStatement) {
    doWhileStatementText.append("do {");
    final PsiBlockStatement blockStatement=(PsiBlockStatement)body;
    final PsiCodeBlock codeBlock=blockStatement.getCodeBlock();
    final PsiElement[] children=codeBlock.getChildren();
    if (children.length > 2) {
      for (int i=1; i < children.length - 1; i++) {
        final PsiElement child=children[i];
        doWhileStatementText.append(child.getText());
      }
    }
    doWhileStatementText.append('}');
  }
 else   if (body != null) {
    doWhileStatementText.append(body.getText());
  }
  doWhileStatementText.append("while(");
  if (condition != null) {
    doWhileStatementText.append(condition.getText());
  }
  doWhileStatementText.append(");\n}");
  replaceStatement(doWhileStatementText.toString(),whileStatement);
}
