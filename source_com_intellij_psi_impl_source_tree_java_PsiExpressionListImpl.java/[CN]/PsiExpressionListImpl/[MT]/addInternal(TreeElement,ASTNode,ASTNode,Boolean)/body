{
  TreeElement firstAdded=null;
  final CharTable treeCharTab=SharedImplUtil.findCharTableByTree(this);
  if (anchor == null) {
    if (before == null || before.booleanValue()) {
      anchor=findChildByRole(ChildRole.RPARENTH);
      if (anchor == null) {
        LeafElement lparenth=Factory.createSingleLeafElement(LPARENTH,new char[]{'('},0,1,treeCharTab,getManager());
        firstAdded=super.addInternal(lparenth,lparenth,null,Boolean.FALSE);
        LeafElement rparenth=Factory.createSingleLeafElement(RPARENTH,new char[]{')'},0,1,treeCharTab,getManager());
        super.addInternal(rparenth,rparenth,null,Boolean.TRUE);
        anchor=findChildByRole(ChildRole.RPARENTH);
        LOG.assertTrue(anchor != null);
      }
      before=Boolean.TRUE;
    }
 else {
      anchor=findChildByRole(ChildRole.LPARENTH);
      if (anchor == null) {
        LeafElement lparenth=Factory.createSingleLeafElement(LPARENTH,new char[]{'('},0,1,treeCharTab,getManager());
        firstAdded=super.addInternal(lparenth,lparenth,null,Boolean.FALSE);
        LeafElement rparenth=Factory.createSingleLeafElement(RPARENTH,new char[]{')'},0,1,treeCharTab,getManager());
        super.addInternal(rparenth,rparenth,null,Boolean.TRUE);
        anchor=findChildByRole(ChildRole.LPARENTH);
        LOG.assertTrue(anchor != null);
      }
      before=Boolean.FALSE;
    }
  }
  if (firstAdded != null)   firstAdded=super.addInternal(first,last,anchor,before);
 else   firstAdded=super.addInternal(first,last,anchor,before);
  if (ElementType.EXPRESSION_BIT_SET.contains(first.getElementType())) {
    ASTNode element=first;
    for (ASTNode child=element.getTreeNext(); child != null; child=child.getTreeNext()) {
      if (child.getElementType() == COMMA)       break;
      if (ElementType.EXPRESSION_BIT_SET.contains(child.getElementType())) {
        TreeElement comma=Factory.createSingleLeafElement(COMMA,new char[]{','},0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,element,Boolean.FALSE);
        break;
      }
    }
    for (ASTNode child=element.getTreePrev(); child != null; child=child.getTreePrev()) {
      if (child.getElementType() == COMMA)       break;
      if (ElementType.EXPRESSION_BIT_SET.contains(child.getElementType())) {
        TreeElement comma=Factory.createSingleLeafElement(COMMA,new char[]{','},0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,child,Boolean.FALSE);
        break;
      }
    }
  }
  return firstAdded;
}
