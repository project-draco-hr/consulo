{
  super.writeExternal(element);
  RunConfigurationExtension.writeSettings(this,element);
  writeModule(element);
  DefaultJDOMExternalizer.writeExternal(this,element);
  DefaultJDOMExternalizer.writeExternal(getPersistentData(),element);
  EnvironmentVariablesComponent.writeExternal(element,getPersistentData().getEnvs());
  final Element patternsElement=new Element(PATTERNS_EL_NAME);
  for (  String o : getPersistentData().getPatterns()) {
    final Element patternElement=new Element(PATTERN_EL_NAME);
    patternElement.setAttribute(TEST_CLASS_ATT_NAME,o);
    patternsElement.addContent(patternElement);
  }
  final String forkMode=getForkMode();
  if (!forkMode.equals("none")) {
    final Element forkModeElement=new Element("fork_mode");
    forkModeElement.setAttribute("value",forkMode);
    element.addContent(forkModeElement);
  }
  element.addContent(patternsElement);
  PathMacroManager.getInstance(getProject()).collapsePathsRecursively(element);
}
