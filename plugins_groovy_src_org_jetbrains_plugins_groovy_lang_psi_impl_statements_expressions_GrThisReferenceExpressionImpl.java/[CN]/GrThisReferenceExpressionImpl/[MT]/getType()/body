{
  GroovyPsiElement context=PsiTreeUtil.getParentOfType(this,GrTypeDefinition.class,GrClosableBlock.class,GroovyFile.class);
  if (context instanceof GrTypeDefinition) {
    return getManager().getElementFactory().createType((PsiClass)context);
  }
 else   if (context instanceof GroovyFile) {
    PsiClass scriptClass=getManager().findClass(GroovyFile.SCRIPT_BASE_CLASS_NAME);
    if (scriptClass != null) {
      return getManager().getElementFactory().createType(scriptClass);
    }
  }
  return null;
}
