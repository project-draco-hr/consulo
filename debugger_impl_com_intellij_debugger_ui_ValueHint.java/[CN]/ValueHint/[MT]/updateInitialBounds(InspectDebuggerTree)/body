{
  final Window popupWindow=SwingUtilities.windowForComponent(myPopup.getContent());
  final Dimension size=tree.getPreferredSize();
  final Point location=popupWindow.getLocation();
  final Rectangle windowBounds=popupWindow.getBounds();
  final Rectangle targetBounds=new Rectangle(location.x,location.y,Math.max(size.width + 250,windowBounds.width),Math.max(size.height,windowBounds.height));
  ScreenUtil.cropRectangleToFitTheScreen(targetBounds);
  popupWindow.setBounds(targetBounds);
  popupWindow.validate();
  popupWindow.repaint();
}
