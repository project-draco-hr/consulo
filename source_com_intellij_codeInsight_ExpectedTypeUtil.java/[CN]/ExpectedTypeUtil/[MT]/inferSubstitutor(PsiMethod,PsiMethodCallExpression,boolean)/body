{
  final PsiResolveHelper helper=method.getManager().getResolveHelper();
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  PsiExpression[] args=callExpr.getArgumentList().getExpressions();
  PsiSubstitutor result=PsiSubstitutor.EMPTY;
  final Iterator<PsiTypeParameter> iterator=PsiUtil.typeParametersIterator(method.getContainingClass());
  while (iterator.hasNext()) {
    final PsiTypeParameter typeParameter=iterator.next();
    PsiType type=helper.inferTypeForMethodTypeParameter(typeParameter,parameters,args,PsiSubstitutor.EMPTY,callExpr.getParent(),forCompletion);
    if (type == PsiType.NULL)     return null;
    result=result.put(typeParameter,type);
  }
  return result;
}
