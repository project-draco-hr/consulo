{
  myEditor=editor;
  enableEvents(AWTEvent.KEY_EVENT_MASK | AWTEvent.INPUT_METHOD_EVENT_MASK);
  enableInputMethods(true);
  setFocusCycleRoot(true);
  setOpaque(true);
  putClientProperty(Magnificator.CLIENT_PROPERTY_KEY,new Magnificator(){
    @Override public Point magnify(    double scale,    Point at){
      VisualPosition magnificationPosition=myEditor.xyToVisualPosition(at);
      double currentSize=myEditor.getColorsScheme().getEditorFontSize();
      int defaultFontSize=EditorColorsManager.getInstance().getGlobalScheme().getEditorFontSize();
      myEditor.setFontSize((int)(double)(int)(Math.max(currentSize * scale,defaultFontSize)));
      return myEditor.visualPositionToXY(magnificationPosition);
    }
  }
);
}
