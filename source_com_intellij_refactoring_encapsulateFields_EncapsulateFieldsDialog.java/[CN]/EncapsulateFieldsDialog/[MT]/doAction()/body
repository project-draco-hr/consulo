{
  if (myTable.isEditing()) {
    TableCellEditor editor=myTable.getCellEditor();
    if (editor != null) {
      editor.stopCellEditing();
    }
  }
  String errorString=validateData();
  if (errorString != null) {
    RefactoringMessageUtil.showErrorMessage("Encapsulate Fields",errorString,HelpID.ENCAPSULATE_FIELDS,myProject);
    return;
  }
  invokeRefactoring(new EncapsulateFieldsProcessor(myProject,this));
  RefactoringSettings settings=RefactoringSettings.getInstance();
  settings.ENCAPSULATE_FIELDS_USE_ACCESSORS_WHEN_ACCESSIBLE=myCbUseAccessorsWhenAccessible.isSelected();
}
