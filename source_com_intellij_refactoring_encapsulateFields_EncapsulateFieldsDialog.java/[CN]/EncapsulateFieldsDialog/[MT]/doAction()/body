{
  if (myTable.isEditing()) {
    TableCellEditor editor=myTable.getCellEditor();
    if (editor != null) {
      editor.stopCellEditing();
    }
  }
  String errorString=validateData();
  if (errorString == null) {
    myCallback.run(this);
    RefactoringSettings settings=RefactoringSettings.getInstance();
    settings.ENCAPSULATE_FIELDS_USE_ACCESSORS_WHEN_ACCESSIBLE=myCbUseAccessorsWhenAccessible.isSelected();
  }
 else {
    RefactoringMessageUtil.showErrorMessage("Encapsulate Fields",errorString,HelpID.ENCAPSULATE_FIELDS,myProject);
  }
}
