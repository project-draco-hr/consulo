{
  myTableModel=new MyTableModel();
  myTable=new Table(myTableModel);
  myTable.setSurrendersFocusOnKeystroke(true);
  MyTableRenderer renderer=new MyTableRenderer();
  TableColumnModel columnModel=myTable.getColumnModel();
  columnModel.getColumn(FIELD_COLUMN).setCellRenderer(renderer);
  columnModel.getColumn(GETTER_COLUMN).setCellRenderer(renderer);
  columnModel.getColumn(SETTER_COLUMN).setCellRenderer(renderer);
  columnModel.getColumn(CHECKED_COLUMN).setMaxWidth(new JCheckBox().getPreferredSize().width);
  myTable.setPreferredScrollableViewportSize(new Dimension(550,myTable.getRowHeight() * 12));
  myTable.getSelectionModel().setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
  JScrollPane scrollPane=ScrollPaneFactory.createScrollPane(myTable);
  Border titledBorder=IdeBorderFactory.createTitledBorder("Fields to Encapsulate");
  Border emptyBorder=BorderFactory.createEmptyBorder(0,5,5,5);
  Border border=BorderFactory.createCompoundBorder(titledBorder,emptyBorder);
  scrollPane.setBorder(border);
  myTable.registerKeyboardAction(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      TableCellEditor editor=myTable.getCellEditor();
      if (editor != null) {
        editor.cancelCellEditing();
      }
 else {
        doCancelAction();
      }
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  InputMap inputMap=myTable.getInputMap();
  inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,0),"enable_disable");
  myTable.getActionMap().put("enable_disable",new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      if (myTable.isEditing())       return;
      int[] rows=myTable.getSelectedRows();
      if (rows.length > 0) {
        boolean valueToBeSet=false;
        for (int idx=0; idx < rows.length; idx++) {
          if (!myCheckedMarks[rows[idx]]) {
            valueToBeSet=true;
            break;
          }
        }
        for (int idx=0; idx < rows.length; idx++) {
          myCheckedMarks[rows[idx]]=valueToBeSet;
        }
        myTableModel.fireTableRowsUpdated(rows[0],rows[rows.length - 1]);
        TableUtil.selectRows(myTable,rows);
      }
    }
  }
);
  inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0),"invokeImpl");
  myTable.getActionMap().put("invokeImpl",new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      TableCellEditor editor=myTable.getCellEditor();
      if (editor != null) {
        editor.stopCellEditing();
      }
 else {
        clickDefaultButton();
      }
    }
  }
);
  return scrollPane;
}
