{
  super.load();
  try {
    final StateStorage stateStorage=getStateStorageManager().getFileStateStorage(DEFAULT_STATE_STORAGE);
    if (stateStorage instanceof XmlElementStorage) {
      XmlElementStorage xmlElementStorage=(XmlElementStorage)stateStorage;
      Document doc=xmlElementStorage.getDocument();
      if (doc != null) {
        final Element element=doc.getRootElement();
        final List attributes=element.getAttributes();
        for (        Object attribute : attributes) {
          Attribute attr=(Attribute)attribute;
          final String optionName=attr.getName();
          final @NonNls String optionValue=attr.getValue();
          if (optionName.equals(RELATIVE_PATHS_OPTION) && optionValue.equals("true")) {
            setSavePathsRelative(true);
          }
        }
      }
    }
    ProjectConversionHelper conversionHelper=getConversionHelper();
    if (conversionHelper != null) {
      final StateStorage workspaceStorage=getStateStorageManager().getFileStateStorage(WS_FILE_STORAGE);
      if (workspaceStorage instanceof XmlElementStorage) {
        final XmlElementStorage xmlElementStorage=(XmlElementStorage)workspaceStorage;
        final Element root=xmlElementStorage.getRootElement();
        if (root != null) {
          conversionHelper.convertWorkspaceRootToNewFormat(root);
        }
      }
    }
  }
 catch (  StateStorage.StateStorageException e) {
    LOG.info(e);
    throw new IOException(e.getMessage());
  }
}
