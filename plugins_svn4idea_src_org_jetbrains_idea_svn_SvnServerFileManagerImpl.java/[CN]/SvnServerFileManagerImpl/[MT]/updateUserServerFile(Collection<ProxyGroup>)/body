{
  final Map<String,ProxyGroup> oldGroups=getGroups();
  for (  ProxyGroup proxyGroup : newUserGroups) {
    if (proxyGroup.isDefault()) {
      processGroup(proxyGroup,getDefaultGroup(),false);
    }
 else {
      findAndProcessGroup(proxyGroup,oldGroups);
    }
  }
  for (  String groupName : oldGroups.keySet()) {
    myFile.deleteGroup(groupName);
  }
  myFile.save();
}
