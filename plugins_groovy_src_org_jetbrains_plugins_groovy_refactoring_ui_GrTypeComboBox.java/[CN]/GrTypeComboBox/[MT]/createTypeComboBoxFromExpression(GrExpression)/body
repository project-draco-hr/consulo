{
  PsiType type=expression.getType();
  if (GroovyRefactoringUtil.isDiamondNewOperator(expression)) {
    LOG.assertTrue(expression instanceof GrNewExpression);
    PsiType expected=PsiImplUtil.inferExpectedTypeForDiamond((GrNewExpression)expression);
    return createTypeComboboxFromBounds(type,expected,expression.getManager(),expression.getResolveScope());
  }
 else {
    return createTypeComboBoxWithDefType(type);
  }
}
