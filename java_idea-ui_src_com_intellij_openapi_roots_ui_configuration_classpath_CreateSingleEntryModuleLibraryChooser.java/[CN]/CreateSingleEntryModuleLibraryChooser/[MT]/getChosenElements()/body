{
  if (myChosenFiles == null) {
    return Collections.emptyList();
  }
  final VirtualFile[] files=filterAlreadyAdded(myChosenFiles);
  if (files.length == 0) {
    return Collections.emptyList();
  }
  final List<Library> addedLibraries=new ArrayList<Library>(files.length);
  for (  VirtualFile file : files) {
    final Library library=myModuleLibrariesModel.createLibrary(null);
    final Library.ModifiableModel libModel=library.getModifiableModel();
    libModel.addRoot(file,OrderRootType.CLASSES);
    libModel.commit();
    addedLibraries.add(library);
  }
  return addedLibraries;
}
