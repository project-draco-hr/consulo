'expand expressions into changelog and summaries\n\nThis extension allows the use of a special syntax in summaries, which\nwill be automatically expanded into links or any other arbitrary\nexpression, much like InterWiki does.\n\nA few example patterns (link to bug tracking, etc.) that may be used\nin your hgrc::\n\n  [interhg]\n  issues = s!issue(\\d+)!<a href="http://bts/issue\\1">issue\\1</a>!\n  bugzilla = s!((?:bug|b=|(?=#?\\d{4,}))(?:\\s*#?)(\\d+))!<a..=\\2">\\1</a>!i\n  boldify = s!(^|\\s)#(\\d+)\\b! <b>#\\2</b>!\n'
import re
from mercurial.hgweb import hgweb_mod
from mercurial import templatefilters, extensions
from mercurial.i18n import _
orig_escape = templatefilters.filters['escape']
interhg_table = []
templatefilters.filters['escape'] = interhg_escape
extensions.wrapfunction(hgweb_mod.hgweb, 'refresh', interhg_refresh)
