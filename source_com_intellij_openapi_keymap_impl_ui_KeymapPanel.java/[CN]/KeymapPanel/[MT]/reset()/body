{
  myKeymapListModel.removeAllElements();
  KeymapManagerEx keymapManager=KeymapManagerEx.getInstanceEx();
  Keymap[] keymaps=keymapManager.getAllKeymaps();
  for (int i=0; i < keymaps.length; i++) {
    KeymapImpl keymap=(KeymapImpl)keymaps[i];
    if (keymap.canModify()) {
      keymap=keymap.copy();
    }
    myKeymapListModel.addElement(keymap);
    if (keymapManager.getActiveKeymap() == keymaps[i]) {
      myActiveKeymap=keymap;
    }
  }
  if (myKeymapListModel.getSize() == 0) {
    KeymapImpl keymap=new KeymapImpl();
    keymap.setName("<No name>");
    myKeymapListModel.addElement(keymap);
  }
  myQuickListsModel.removeAllElements();
  QuickList[] allQuickLists=QuickListsManager.getInstance().getAllQuickLists();
  for (int i=0; i < allQuickLists.length; i++) {
    QuickList list=allQuickLists[i];
    myQuickListsModel.addElement(list);
  }
  mySelectedKeymap=(KeymapImpl)myKeymapListModel.elementAt(0);
  myKeymapList.setSelectedValue(myActiveKeymap,true);
}
