{
  myCopyButton.setEnabled(false);
  myDeleteButton.setEnabled(false);
  mySetActiveButton.setEnabled(false);
  myKeymapNameField.getDocument().removeDocumentListener(myKeymapNameListener);
  myKeymapNameField.setText("");
  myKeymapNameField.setEnabled(false);
  myBaseKeymapLabel.setText("");
  myAddKeyboardShortcutButton.setEnabled(false);
  myAddMouseShortcutButton.setEnabled(false);
  myRemoveShortcutButton.setEnabled(false);
  KeymapImpl selectedKeymap=getSelectedKeymap();
  mySelectedKeymap=selectedKeymap;
  if (selectedKeymap == null) {
    myActionsTree.reset(new KeymapImpl(),getCurrentQuickListIds());
    return;
  }
  myCopyButton.setEnabled(true);
  myKeymapNameField.setText(mySelectedKeymap.getPresentableName());
  myKeymapNameField.getDocument().addDocumentListener(myKeymapNameListener);
  Keymap parent=mySelectedKeymap.getParent();
  if (parent != null) {
    myBaseKeymapLabel.setText("Based on keymap: " + parent.getPresentableName());
  }
  myDisableMnemonicsCheckbox.setSelected(!mySelectedKeymap.areMnemonicsEnabled());
  myDisableMnemonicsCheckbox.setEnabled(mySelectedKeymap.canModify());
  if (mySelectedKeymap.canModify()) {
    myDeleteButton.setEnabled(true);
    myKeymapNameField.setEnabled(true);
    myAddKeyboardShortcutButton.setEnabled(true);
    myAddMouseShortcutButton.setEnabled(true);
    myRemoveShortcutButton.setEnabled(true);
  }
  mySetActiveButton.setEnabled(mySelectedKeymap != myActiveKeymap);
  myActionsTree.reset(mySelectedKeymap,getCurrentQuickListIds());
  updateShortcutsList();
}
