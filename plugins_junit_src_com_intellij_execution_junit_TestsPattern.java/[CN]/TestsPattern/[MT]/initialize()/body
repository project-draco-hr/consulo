{
  super.initialize();
  final JUnitConfiguration.Data data=myConfiguration.getPersistentData();
  RunConfigurationModule module=myConfiguration.getConfigurationModule();
  JavaParametersUtil.configureModule(module,myJavaParameters,JavaParameters.JDK_AND_CLASSES_AND_TESTS,myConfiguration.isAlternativeJrePathEnabled() ? myConfiguration.getAlternativeJrePath() : null);
  final Project project=module.getProject();
  boolean isJUnit4=false;
  final ArrayList<String> classNames=new ArrayList<String>();
  for (  String className : data.getPatterns()) {
    final PsiClass psiClass=JavaExecutionUtil.findMainClass(project,className,GlobalSearchScope.allScope(project));
    if (psiClass != null && JUnitUtil.isTestClass(psiClass)) {
      classNames.add(className);
      if (JUnitUtil.isJUnit4TestClass(psiClass)) {
        isJUnit4=true;
      }
    }
  }
  addClassesListToJavaParameters(classNames,new Function.Self<String,String>(),"",true,isJUnit4);
}
