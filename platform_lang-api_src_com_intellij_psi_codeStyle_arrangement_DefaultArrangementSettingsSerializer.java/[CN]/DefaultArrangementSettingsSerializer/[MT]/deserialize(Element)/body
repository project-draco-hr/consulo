{
  StdArrangementSettings result=new StdArrangementSettings();
  Element groups=element.getChild(GROUPS_ELEMENT_NAME);
  if (groups != null) {
    for (    Object group : groups.getChildren(GROUP_ELEMENT_NAME)) {
      Element groupElement=(Element)group;
      try {
        ArrangementGroupingType type=ArrangementGroupingType.valueOf(groupElement.getChildText(TYPE_ELEMENT_NAME));
        ArrangementEntryOrderType orderType=ArrangementEntryOrderType.valueOf(groupElement.getChildText(ORDER_TYPE_ELEMENT_NAME));
        ArrangementGroupingRule groupingRule=new ArrangementGroupingRule(type,orderType);
        result.addGrouping(groupingRule);
      }
 catch (      Exception e) {
        LOG.warn(String.format("Can't deserialize grouping rule '%s'",groupElement.getText()),e);
      }
    }
  }
  Element rulesElement=element.getChild(RULES_ELEMENT_NAME);
  if (rulesElement != null) {
    for (    Object o : rulesElement.getChildren(RULE_ELEMENT_NAME)) {
      Element ruleElement=(Element)o;
      Element matcherElement=ruleElement.getChild(MATCHER_ELEMENT_NAME);
      if (matcherElement == null) {
        continue;
      }
      StdArrangementEntryMatcher matcher=null;
      for (      Object c : matcherElement.getChildren()) {
        matcher=myMatcherSerializer.deserialize((Element)c);
        if (matcher != null) {
          break;
        }
      }
      if (matcher == null) {
        return null;
      }
      Element orderTypeElement=element.getChild(ORDER_TYPE_ELEMENT_NAME);
      ArrangementEntryOrderType orderType=ArrangementMatchRule.DEFAULT_ORDER_TYPE;
      if (orderTypeElement != null) {
        try {
          orderType=ArrangementEntryOrderType.valueOf(orderTypeElement.getText());
        }
 catch (        Exception e) {
          LOG.warn(String.format("Can't deserialize matching rule order type for '%s'",ruleElement.getText()),e);
        }
      }
      result.addRule(new StdArrangementMatchRule(matcher,orderType));
    }
  }
  return result;
}
