{
  if (anchor == null) {
    if (before == null || before.booleanValue()) {
      anchor=findChildByRole(ChildRole.RBRACE);
      before=Boolean.TRUE;
    }
 else {
      anchor=findChildByRole(ChildRole.LBRACE);
      before=Boolean.FALSE;
    }
  }
  if (before == Boolean.TRUE) {
    while (isNonJavaStatement(anchor)) {
      anchor=anchor.getTreePrev();
      before=Boolean.FALSE;
    }
  }
 else   if (before == Boolean.FALSE) {
    while (isNonJavaStatement(anchor)) {
      anchor=anchor.getTreeNext();
      before=Boolean.TRUE;
    }
  }
  return super.addInternal(first,last,anchor,before);
}
