{
  return ApplicationManager.getApplication().runReadAction(new Computable<ProcessingItem[]>(){
    @Override public ProcessingItem[] compute(){
      final VirtualFile[] filesToCopy=getFilesToCopy(context);
      final ProcessingItem[] items=new ProcessingItem[filesToCopy.length];
      for (int idx=0; idx < filesToCopy.length; idx++) {
        final VirtualFile file=filesToCopy[idx];
        items[idx]=new CopyItem(file,getDestinationPath(context,file));
      }
      return items;
    }
  }
);
}
