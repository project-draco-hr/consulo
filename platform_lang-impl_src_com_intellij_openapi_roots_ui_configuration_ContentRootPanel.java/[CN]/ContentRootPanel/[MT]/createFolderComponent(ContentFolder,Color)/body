{
  final VirtualFile folderFile=folder.getFile();
  final VirtualFile contentEntryFile=getContentEntry().getFile();
  final String packagePrefix=folder instanceof SourceFolder ? ((SourceFolder)folder).getPackagePrefix() : "";
  if (folderFile != null && contentEntryFile != null) {
    String path=folderFile.equals(contentEntryFile) ? "." : VfsUtilCore.getRelativePath(folderFile,contentEntryFile,File.separatorChar);
    if (!packagePrefix.isEmpty()) {
      path=path + " (" + packagePrefix+ ")";
    }
    HoverHyperlinkLabel hyperlinkLabel=new HoverHyperlinkLabel(path,foreground);
    hyperlinkLabel.setMinimumSize(new Dimension(0,0));
    hyperlinkLabel.addHyperlinkListener(new HyperlinkListener(){
      @Override public void hyperlinkUpdate(      HyperlinkEvent e){
        myCallback.navigateFolder(getContentEntry(),folder);
      }
    }
);
    registerTextComponent(hyperlinkLabel,foreground);
    return new UnderlinedPathLabel(hyperlinkLabel);
  }
 else {
    String path=toRelativeDisplayPath(folder.getUrl(),getContentEntry().getUrl());
    if (!packagePrefix.isEmpty()) {
      path=path + " (" + packagePrefix+ ")";
    }
    final JLabel pathLabel=new JLabel(path);
    pathLabel.setOpaque(false);
    pathLabel.setForeground(Color.RED);
    return new UnderlinedPathLabel(pathLabel);
  }
}
