{
  TimestampGetter timestampGetter=createTimestampGetter(graphCommits);
  boolean isIntegerCase=!graphCommits.isEmpty() && graphCommits.get(0).getId().getClass() == Integer.class;
  List<CommitId> commitIdIndex;
  if (isIntegerCase) {
    commitIdIndex=(List<CommitId>)createCompressedIntList((List<? extends GraphCommit<Integer>>)graphCommits);
  }
 else {
    commitIdIndex=ContainerUtil.map(graphCommits,new Function<GraphCommit<CommitId>,CommitId>(){
      @Override public CommitId fun(      GraphCommit<CommitId> graphCommit){
        return graphCommit.getId();
      }
    }
);
  }
  return new PermanentCommitsInfoImpl<>(timestampGetter,commitIdIndex,notLoadedCommits);
}
