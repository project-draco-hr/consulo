{
  final IdeaTestFixtureFactory fixtureFactory=IdeaTestFixtureFactory.getFixtureFactory();
  final TestFixtureBuilder<IdeaProjectTestFixture> builder=fixtureFactory.createLightFixtureBuilder();
  final IdeaProjectTestFixture projectFixture=builder.getFixture();
  projectFixture.setUp();
  final CodeInsightTestFixture fixture=fixtureFactory.createCodeInsightFixture(projectFixture);
  fixture.setTestDataPath(getTestDataPath());
  fixture.setUp();
  final Project project=projectFixture.getProject();
  new WriteCommandAction(project){
    protected void run(    Result result) throws Throwable {
      FileTypeManager.getInstance().registerFileType(RegExpFileType.INSTANCE,new String[]{"regexp"});
    }
  }
.execute();
  myFixture=fixture;
}
