{
  final Result result=visitChildrenRecursively(root,new VirtualFileVisitor(){
    @NotNull @Override public Result visitFileEx(    @NotNull VirtualFile file){
      if (filter != null && !filter.accept(file))       return SKIP_CHILDREN;
      if (!iterator.processFile(file))       return skipTo(root);
      return CONTINUE;
    }
  }
);
  return !Comparing.equal(result.skipToParent,root);
}
