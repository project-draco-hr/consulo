{
  IElementType tokenType=token.getNode().getElementType();
  if (tokenType == mREGEX_CONTENT || tokenType == mREGEX_LITERAL) {
    return GrStringUtil.escapeSymbolsForSlashyStrings(s);
  }
  if (tokenType == mDOLLAR_SLASH_REGEX_CONTENT || tokenType == mDOLLAR_SLASH_REGEX_LITERAL) {
    return GrStringUtil.escapeSymbolsForDollarSlashyStrings(s);
  }
  if (tokenType == mGSTRING_CONTENT || tokenType == mGSTRING_LITERAL) {
    boolean escapeDoubleQuotes=!token.getText().contains("\"\"\"");
    return GrStringUtil.escapeSymbolsForGString(s,escapeDoubleQuotes,false);
  }
  if (tokenType == mSTRING_LITERAL) {
    boolean escapeQuotes=!token.getText().contains("'''");
    return GrStringUtil.escapeSymbolsForString(s,escapeQuotes,false);
  }
  return super.escapeCharCharacters(s,token);
}
