{
  if (myVisibleAreaWidth <= 0 || myDirtyRegions.isEmpty()) {
    return;
  }
  for (int i=0; i < myApplianceStrategies.size(); i++) {
    if (!myApplianceStrategies.get(i).processSoftWraps()) {
      return;
    }
  }
  myLastDocumentStamp=myEditor.getDocument().getModificationStamp();
  List<DirtyRegion> regions=new ArrayList<DirtyRegion>(myDirtyRegions);
  myDirtyRegions.clear();
  myInProgress=true;
  try {
    for (    DirtyRegion dirtyRegion : regions) {
      recalculateSoftWraps(dirtyRegion);
    }
  }
  finally {
    myInProgress=false;
  }
}
