{
  if (myVisibleAreaWidth <= 0 || myDirtyRegions.isEmpty() || !myEditor.getFoldingModel().isFoldingEnabled()) {
    return;
  }
  myLastDocumentStamp=myEditor.getDocument().getModificationStamp();
  myInProgress=true;
  try {
    for (    DirtyRegion dirtyRegion : myDirtyRegions) {
      recalculateSoftWraps(dirtyRegion);
    }
    myDirtyRegions.clear();
  }
  finally {
    myInProgress=false;
  }
}
