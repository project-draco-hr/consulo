{
  event.updateNewOffsetsIfNecessary(myEditor.getDocument());
  notifyListenersOnCacheUpdate(event,true);
  myStorage.removeInRange(event.getOldStartOffset(),event.getOldEndOffset());
  try {
    doRecalculateSoftWraps(event);
  }
  finally {
    notifyListenersOnCacheUpdate(event,false);
  }
}
