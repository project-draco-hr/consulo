{
  if (myEditor.getDocument() instanceof DocumentImpl && ((DocumentImpl)myEditor.getDocument()).acceptsSlashR()) {
    LOG.error("Soft wrapping is not supported for documents with non-standard line endings. File: " + myEditor.getVirtualFile());
  }
  if (myInProgress) {
    LogMessageEx.error(LOG,"Detected race condition at soft wraps recalculation",(myEditor instanceof EditorImpl) ? ((EditorImpl)myEditor).dumpState() : "",event.toString());
  }
  myInProgress=true;
  try {
    doRecalculateSoftWraps(event);
  }
  finally {
    myInProgress=false;
  }
}
