{
  int spaceWidth;
  if (fontType2spaceWidth.contains(fontType)) {
    spaceWidth=fontType2spaceWidth.get(fontType);
  }
 else {
    spaceWidth=EditorUtil.getSpaceWidth(fontType,myEditor);
    fontType2spaceWidth.put(fontType,spaceWidth);
  }
  if (context.symbol == '\n') {
    context.symbolWidthInColumns=0;
    context.symbolWidthInPixels=0;
    notifyListenersOnProcessedSymbol(context);
    context.offset++;
    context.onNewLine();
    offset2fontType.clear();
    startLineContext.from(context);
    logicalLineData.update(context.logicalLine,spaceWidth,myEditor);
    context.x=0;
    return;
  }
  context.symbolWidthInPixels=newX - context.x;
  context.symbolWidthInColumns=calculateWidthInColumns(context.symbolWidthInPixels,spaceWidth);
  notifyListenersOnProcessedSymbol(context);
  context.visualColumn+=context.symbolWidthInColumns;
  context.logicalColumn+=context.symbolWidthInColumns;
  context.x=newX;
  offset2widthInPixels.put(context.offset,context.symbolWidthInPixels);
  context.offset++;
}
