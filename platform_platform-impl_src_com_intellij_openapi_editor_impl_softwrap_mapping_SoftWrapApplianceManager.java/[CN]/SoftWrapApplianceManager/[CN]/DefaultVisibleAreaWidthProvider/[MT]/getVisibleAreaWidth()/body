{
  if (myEditor.isInDistractionFreeMode()) {
    int rightMargin=myEditor.getSettings().getRightMargin(myEditor.getProject());
    if (rightMargin > 0)     return rightMargin * EditorUtil.getPlainSpaceWidth(myEditor);
  }
  Insets insets=myEditor.getContentComponent().getInsets();
  return Math.max(0,myEditor.getScrollingModel().getVisibleArea().width - insets.left - insets.right);
}
