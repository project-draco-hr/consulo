{
  Document document=myEditor.getDocument();
  int startLineOffset=document.getLineStartOffset(logicalLine);
  endLineOffset=document.getLineEndOffset(logicalLine);
  CharSequence text=document.getCharsSequence();
  indentInColumns=0;
  indentInPixels=0;
  for (int i=startLineOffset; i < endLineOffset; i++) {
    char c=text.charAt(i);
switch (c) {
case ' ':
      indentInColumns+=1;
    indentInPixels+=spaceWidth;
  break;
case '\t':
int x=EditorUtil.nextTabStop(indentInPixels,editor);
indentInColumns+=calculateWidthInColumns(x - indentInPixels,spaceWidth);
indentInPixels=x;
break;
default :
myNonWhiteSpaceSymbolOffset=i;
return;
}
}
}
