{
  int visualLineBefore=currentPosition.visualLine;
  int logicalColumnBefore=currentPosition.logicalColumn;
  currentPosition.advance(foldRegion);
  currentPosition.x+=placeHolderWidthInPixels;
  int collapsedFoldingWidthInColumns=currentPosition.logicalColumn;
  if (currentPosition.visualLine <= visualLineBefore) {
    collapsedFoldingWidthInColumns=currentPosition.logicalColumn - logicalColumnBefore;
  }
  notifyListenersOnFoldRegion(foldRegion,collapsedFoldingWidthInColumns,visualLineBefore);
  tokenStartOffset=myContext.currentPosition.offset;
  softWrapStartOffset=foldRegion.getEndOffset();
}
