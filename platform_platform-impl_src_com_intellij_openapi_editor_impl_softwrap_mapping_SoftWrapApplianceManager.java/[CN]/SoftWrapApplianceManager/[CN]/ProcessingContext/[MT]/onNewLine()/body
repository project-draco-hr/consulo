{
  notifyListenersOnVisualLineEnd();
  currentPosition.onNewLine();
  softWrapStartOffset=currentPosition.offset;
  clearLastFoldInfo();
  lineStartPosition.from(currentPosition);
  logicalLineData.update(currentPosition.logicalLine,getSpaceWidth(),getPlainSpaceWidth());
  fontType=myOffset2fontType.get(currentPosition.offset);
  myOffset2fontType.clear();
  myOffset2widthInPixels.clear();
  skipToLineEnd=false;
}
