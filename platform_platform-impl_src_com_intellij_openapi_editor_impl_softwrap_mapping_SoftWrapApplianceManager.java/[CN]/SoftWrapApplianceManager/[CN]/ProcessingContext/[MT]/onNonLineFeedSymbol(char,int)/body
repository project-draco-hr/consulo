{
  int widthInPixels=newX - myContext.currentPosition.x;
  if (myOffset2widthInPixels.anchor <= 0) {
    myOffset2widthInPixels.anchor=currentPosition.offset;
  }
  if (currentPosition.offset - myOffset2widthInPixels.anchor >= myOffset2widthInPixels.data.length) {
    int[] newData=new int[myOffset2widthInPixels.data.length * 2];
    System.arraycopy(myOffset2widthInPixels.data,0,newData,0,myOffset2widthInPixels.data.length);
    myOffset2widthInPixels.data=newData;
  }
  myOffset2widthInPixels.data[currentPosition.offset - myOffset2widthInPixels.anchor]=widthInPixels;
  myOffset2widthInPixels.end++;
  int widthInColumns=calculateWidthInColumns(c,widthInPixels,myContext.getSpaceWidth());
  if (c == '\t') {
    notifyListenersOnVisualLineStart(myContext.lineStartPosition);
    notifyListenersOnTabulation(widthInColumns);
  }
  currentPosition.logicalColumn+=widthInColumns;
  currentPosition.visualColumn+=widthInColumns;
  currentPosition.x=newX;
  currentPosition.offset++;
  fontType=myOffset2fontType.get(currentPosition.offset);
}
