{
  final Module[] modules=scope.getAffectedModules();
  final Set<Sdk> checkedJdks=new HashSet<Sdk>();
  for (  final Module module : modules) {
    final Sdk jdk=ModuleRootManager.getInstance(module).getSdk();
    if (jdk == null) {
      continue;
    }
    checkedJdks.add(jdk);
  }
  Sdk projectJdk=ProjectRootManager.getInstance(myProject).getProjectJdk();
  if (projectJdk != null)   checkedJdks.add(projectJdk);
  for (  Sdk sdk : checkedJdks) {
    if (!CompilerUtil.isOfVersion(sdk.getVersionString(),"1.6")) {
      Messages.showErrorDialog(myProject,"Compiler API supports JDK of version 6 only: " + sdk.getVersionString(),"Incompatible JDK");
      return false;
    }
  }
  return true;
}
