{
  if (newRectangle.y == oldRectangle.y)   return;
  EditingSides sidesContainer=context.getSidesContainer();
  FragmentSide masterSide=context.getMasterSide();
  FragmentSide masterDiffSide=context.getMasterDiffSide();
  Editor master=sidesContainer.getEditor(masterSide);
  Editor slave=sidesContainer.getEditor(masterSide.otherSide());
  if (master == null || slave == null)   return;
  int masterVerticalScrollOffset=master.getScrollingModel().getVerticalScrollOffset();
  int slaveVerticalScrollOffset=slave.getScrollingModel().getVerticalScrollOffset();
  Rectangle viewRect=master.getScrollingModel().getVisibleArea();
  int middleY=viewRect.height / 3;
  if (master.getDocument().getTextLength() == 0)   return;
  LogicalPosition masterPos=master.xyToLogicalPosition(new Point(viewRect.x,masterVerticalScrollOffset + middleY));
  int masterCenterLine=masterPos.line;
  int scrollToLine=sidesContainer.getLineBlocks().transform(masterDiffSide,masterCenterLine);
  int offset;
  if (scrollToLine < 0) {
    offset=slaveVerticalScrollOffset + newRectangle.y - oldRectangle.y;
  }
 else {
    int correction=(masterVerticalScrollOffset + middleY) % master.getLineHeight();
    Point point=slave.logicalPositionToXY(new LogicalPosition(scrollToLine,masterPos.column));
    offset=point.y - middleY + correction;
  }
  int deltaHeaderOffset=getHeaderOffset(slave) - getHeaderOffset(master);
  doScrollVertically(slave.getScrollingModel(),offset + deltaHeaderOffset);
}
