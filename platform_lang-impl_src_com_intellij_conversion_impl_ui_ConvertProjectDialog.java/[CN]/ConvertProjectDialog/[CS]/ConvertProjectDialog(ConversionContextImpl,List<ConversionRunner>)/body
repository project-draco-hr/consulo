{
  super(true);
  setTitle(IdeBundle.message("dialog.title.convert.project"));
  setModal(true);
  myContext=context;
  myConversionRunners=conversionRunners;
  myAffectedFiles=new HashSet<File>();
  for (  ConversionRunner conversionRunner : conversionRunners) {
    myAffectedFiles.addAll(conversionRunner.getAffectedFiles());
  }
  myBackupDir=ProjectConversionUtil.getBackupDir(context.getProjectBaseDir());
  myTextPane.setSize(new Dimension(350,Integer.MAX_VALUE));
  StringBuilder message=new StringBuilder("<html>");
  if (myConversionRunners.size() == 1 && myConversionRunners.get(0).getProvider().getConversionDialogText(context) != null) {
    message.append(myConversionRunners.get(0).getProvider().getConversionDialogText(context));
  }
 else {
    message.append(IdeBundle.message("conversion.dialog.text.1",context.getProjectFile().getName(),ApplicationNamesInfo.getInstance().getProductName()));
  }
  message.append(IdeBundle.message("conversion.dialog.text.2",myBackupDir.getAbsolutePath()));
  message.append("</html>");
  Messages.configureMessagePaneUi(myTextPane,message.toString(),false);
  myTextPane.addHyperlinkListener(new HyperlinkListener(){
    public void hyperlinkUpdate(    HyperlinkEvent e){
      if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        @NonNls StringBuilder descriptions=new StringBuilder("<html>The following conversions will be performed:<br>");
        for (        ConversionRunner runner : conversionRunners) {
          descriptions.append(runner.getProvider().getConversionDescription()).append("<br>");
        }
        descriptions.append("</html>");
        Messages.showInfoMessage(descriptions.toString(),IdeBundle.message("dialog.title.convert.project"));
      }
    }
  }
);
  init();
  setOKButtonText("Convert");
}
