{
  myPairs=new ArrayList<EditLocationDialog.NameLocationPair>(myNewPairs);
  ExternalResourceManagerEx manager=ExternalResourceManagerEx.getInstanceEx();
  String[] urls=manager.getAvailableUrls();
  for (  String url : urls) {
    String loc=myProject == null ? manager.getResourceLocation(url,(String)null) : manager.getResourceLocation(url,myProject);
    myPairs.add(new EditLocationDialog.NameLocationPair(url,FileUtil.toSystemDependentName(loc),true));
  }
  if (myProject != null) {
    urls=manager.getAvailableUrls(myProject);
    for (    String url : urls) {
      String loc=manager.getResourceLocation(url,myProject);
      myPairs.add(new EditLocationDialog.NameLocationPair(url,FileUtil.toSystemDependentName(loc),false));
    }
  }
  Collections.sort(myPairs);
  myIgnoredUrls=new ArrayList<String>();
  final String[] ignoredResources=manager.getIgnoredResources();
  ContainerUtil.addAll(myIgnoredUrls,ignoredResources);
  Collections.sort(myIgnoredUrls);
  if (myExtPanel != null) {
    myExtPanel.setData(myPairs);
    myIgnorePanel.setData(myIgnoredUrls);
    if (!myNewPairs.isEmpty()) {
      ListSelectionModel selectionModel=myExtPanel.getTable().getSelectionModel();
      selectionModel.clearSelection();
      for (      EditLocationDialog.NameLocationPair newPair : myNewPairs) {
        int index=myPairs.indexOf(newPair);
        selectionModel.addSelectionInterval(index,index);
      }
    }
  }
  if (myProject != null) {
    myDefaultHtmlDoctype=manager.getDefaultHtmlDoctype(myProject);
    myHtmlLanguageLevelForm.resetFromDoctype(myDefaultHtmlDoctype);
  }
  setModified(!myNewPairs.isEmpty());
}
