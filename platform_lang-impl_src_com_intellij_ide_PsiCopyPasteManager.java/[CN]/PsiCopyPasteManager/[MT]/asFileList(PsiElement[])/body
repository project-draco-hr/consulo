{
  final List<File> result=new ArrayList<File>();
  for (  PsiElement element : elements) {
    final PsiFileSystemItem psiFile;
    if (element instanceof PsiFileSystemItem) {
      psiFile=(PsiFileSystemItem)element;
    }
 else     if (element instanceof PsiDirectoryContainer) {
      final PsiDirectory[] directories=((PsiDirectoryContainer)element).getDirectories();
      psiFile=directories[0];
    }
 else {
      psiFile=element.getContainingFile();
    }
    if (psiFile != null) {
      VirtualFile vFile=psiFile.getVirtualFile();
      if (vFile != null && vFile.getFileSystem() instanceof LocalFileSystem) {
        result.add(new File(vFile.getPath()));
      }
    }
  }
  return result.isEmpty() ? null : result;
}
