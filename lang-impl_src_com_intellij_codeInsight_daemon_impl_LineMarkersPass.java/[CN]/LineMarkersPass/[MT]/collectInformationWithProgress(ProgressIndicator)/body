{
  final List<LineMarkerInfo> lineMarkers=new ArrayList<LineMarkerInfo>();
  final FileViewProvider viewProvider=myFile.getViewProvider();
  final Set<Language> relevantLanguages=viewProvider.getPrimaryLanguages();
  for (  Language language : relevantLanguages) {
    PsiElement psiRoot=viewProvider.getPsi(language);
    if (!HighlightLevelUtil.shouldHighlight(psiRoot))     continue;
    List<PsiElement> elements=CollectHighlightsUtil.getElementsInRange(psiRoot,myStartOffset,myEndOffset);
    if (elements.isEmpty()) {
      elements=Collections.singletonList(psiRoot);
    }
    final LineMarkerProvider provider=LineMarkerProviders.INSTANCE.forLanguage(language);
    if (provider != null) {
      addLineMarkers(elements,provider,lineMarkers);
    }
  }
  myMarkers=lineMarkers;
}
