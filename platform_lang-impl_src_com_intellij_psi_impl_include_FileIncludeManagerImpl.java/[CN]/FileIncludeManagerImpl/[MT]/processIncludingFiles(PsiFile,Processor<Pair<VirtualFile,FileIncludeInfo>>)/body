{
  context=context.getOriginalFile();
  VirtualFile contextFile=context.getVirtualFile();
  if (contextFile == null)   return;
  MultiMap<VirtualFile,FileIncludeInfoImpl> infoList=FileIncludeIndex.getIncludingFileCandidates(context.getName(),GlobalSearchScope.allScope(myProject));
  for (  VirtualFile candidate : infoList.keySet()) {
    PsiFile psiFile=myPsiManager.findFile(candidate);
    if (psiFile == null || context.equals(psiFile))     continue;
    for (    FileIncludeInfo info : infoList.get(candidate)) {
      PsiFileSystemItem item=resolveFileInclude(info,psiFile);
      if (item != null && contextFile.equals(item.getVirtualFile())) {
        if (!processor.process(Pair.create(candidate,info))) {
          return;
        }
      }
    }
  }
}
