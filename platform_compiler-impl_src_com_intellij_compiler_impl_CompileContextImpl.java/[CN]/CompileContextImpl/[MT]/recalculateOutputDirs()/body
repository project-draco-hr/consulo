{
  final Module[] allModules=ModuleManager.getInstance(myProject).getModules();
  final Set<VirtualFile> allDirs=new OrderedSet<VirtualFile>();
  final Set<VirtualFile> testOutputDirs=new java.util.HashSet<VirtualFile>();
  final Set<VirtualFile> productionOutputDirs=new java.util.HashSet<VirtualFile>();
  CompilerPathsManager pathsManager=CompilerPathsManager.getInstance(getProject());
  for (  Module module : allModules) {
    final VirtualFile output=pathsManager.getCompilerOutput(module,ContentFolderType.PRODUCTION);
    if (output != null && output.isValid()) {
      allDirs.add(output);
      productionOutputDirs.add(output);
    }
    final VirtualFile testsOutput=pathsManager.getCompilerOutput(module,ContentFolderType.TEST);
    if (testsOutput != null && testsOutput.isValid()) {
      allDirs.add(testsOutput);
      testOutputDirs.add(testsOutput);
    }
  }
  myOutputDirectories=VfsUtil.toVirtualFileArray(allDirs);
  testOutputDirs.removeAll(productionOutputDirs);
  myTestOutputDirectories=Collections.unmodifiableSet(testOutputDirs);
}
