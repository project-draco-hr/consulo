{
  final VirtualFile file=findFileByUrl(url);
  if (file == null) {
    return null;
  }
  return ApplicationManager.getApplication().runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      if (file.isValid()) {
        for (        final Map.Entry<VirtualFile,Pair<SourceGeneratingCompiler,Module>> entry : myOutputRootToSourceGeneratorMap.entrySet()) {
          final VirtualFile root=entry.getKey();
          if (VfsUtilCore.isAncestor(root,file,false)) {
            final Pair<SourceGeneratingCompiler,Module> pair=entry.getValue();
            final VirtualFile presentableFile=pair.getFirst().getPresentableFile(CompileContextImpl.this,pair.getSecond(),root,file);
            return presentableFile != null ? presentableFile : file;
          }
        }
      }
      return file;
    }
  }
);
}
