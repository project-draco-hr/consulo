{
  String listText=myList.getText();
  final boolean isMultiline=listText.indexOf('\n') >= 0 || listText.indexOf('\r') >= 0;
  int startOffset=myList.getTextRange().getStartOffset() + 1;
  final LogicalPosition pos=myEditor.offsetToLogicalPosition(startOffset);
  Point p;
  if (!isMultiline) {
    p=chooseBestHintPosition(myProject,myEditor,pos.line,pos.column,hint);
  }
 else {
    p=HintManager.getInstance().getHintPosition(hint,myEditor,pos,HintManager.ABOVE);
    Dimension hintSize=hint.getComponent().getPreferredSize();
    JComponent editorComponent=myEditor.getComponent();
    JLayeredPane layeredPane=editorComponent.getRootPane().getLayeredPane();
    p.x=Math.min(p.x,layeredPane.getWidth() - hintSize.width);
    p.x=Math.max(p.x,0);
  }
  return p;
}
