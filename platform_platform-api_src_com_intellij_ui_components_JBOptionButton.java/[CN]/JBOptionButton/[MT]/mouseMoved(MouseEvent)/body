{
  final MouseEvent event=SwingUtilities.convertMouseEvent(e.getComponent(),e,getParent());
  final boolean insideRec=getBounds().contains(event.getPoint());
  if (!myPopupIsShowing && insideRec) {
    showPopup(null);
  }
 else   if (myPopupIsShowing && !insideRec) {
    final Component over=SwingUtilities.getDeepestComponentAt(e.getComponent(),e.getX(),e.getY());
    if (over != null && myPopup.isShowing()) {
      final Rectangle rec=new Rectangle(myPopup.getLocationOnScreen(),myPopup.getSize());
      int delta=15;
      rec.x-=delta;
      rec.width+=delta * 2;
      rec.y-=delta;
      rec.height+=delta * 2;
      final Point eventPoint=e.getPoint();
      SwingUtilities.convertPointToScreen(eventPoint,e.getComponent());
      if (rec.contains(eventPoint)) {
        return;
      }
    }
    closePopup();
  }
}
