{
  final JPopupMenu result=new JPopupMenu(){
    @Override public void paint(    Graphics g){
      GraphicsUtil.setupAntialiasing(g);
      super.paint(g);
    }
  }
;
  if (under && myOptions.length > 0) {
    final JMenuItem mainAction=new JMenuItem(getAction());
    configureItem(getMenuInfo(getAction()),mainAction);
    result.add(mainAction);
    result.addSeparator();
  }
  for (  Action each : myOptions) {
    if (getAction() == each)     continue;
    final OptionInfo info=getMenuInfo(each);
    final JMenuItem eachItem=new JMenuItem(each);
    configureItem(info,eachItem);
    result.add(eachItem);
  }
  if (!under && myOptions.length > 0) {
    result.addSeparator();
    final JMenuItem mainAction=new JMenuItem(getAction());
    configureItem(getMenuInfo(getAction()),mainAction);
    result.add(mainAction);
  }
  return result;
}
