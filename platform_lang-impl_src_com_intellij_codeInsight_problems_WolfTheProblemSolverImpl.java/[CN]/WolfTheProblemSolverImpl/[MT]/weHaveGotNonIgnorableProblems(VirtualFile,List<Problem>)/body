{
  if (problems.isEmpty())   return;
  boolean fireListener=false;
synchronized (myProblems) {
    ProblemFileInfo storedProblems=myProblems.get(virtualFile);
    if (storedProblems == null) {
      storedProblems=new ProblemFileInfo();
      myProblems.put(virtualFile,storedProblems);
      fireListener=true;
    }
    storedProblems.problems.addAll(problems);
  }
  doQueue(virtualFile);
  if (fireListener) {
    fireProblemListeners.problemsAppeared(virtualFile);
  }
}
