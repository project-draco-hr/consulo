{
  int button=-1;
  int modifiers=0;
  int clickCount=1;
  for (StringTokenizer tokenizer=new StringTokenizer(keystrokeString); tokenizer.hasMoreTokens(); ) {
    String token=tokenizer.nextToken();
    if (SHIFT.equals(token)) {
      modifiers|=InputEvent.SHIFT_DOWN_MASK;
    }
 else     if (CONTROL.equals(token) || CTRL.equals(token)) {
      modifiers|=InputEvent.CTRL_DOWN_MASK;
    }
 else     if (META.equals(token)) {
      modifiers|=InputEvent.META_DOWN_MASK;
    }
 else     if (ALT.equals(token)) {
      modifiers|=InputEvent.ALT_DOWN_MASK;
    }
 else     if (ALT_GRAPH.equals(token)) {
      modifiers|=InputEvent.ALT_GRAPH_DOWN_MASK;
    }
 else     if (BUTTON1.equals(token)) {
      button=MouseEvent.BUTTON1;
    }
 else     if (BUTTON2.equals(token)) {
      button=MouseEvent.BUTTON2;
    }
 else     if (BUTTON3.equals(token)) {
      button=MouseEvent.BUTTON3;
    }
 else     if (BUTTON4.equals(token)) {
      button=MouseEvent.BUTTON3 + 1;
    }
 else     if (BUTTON5.equals(token)) {
      button=MouseEvent.BUTTON3 + 2;
    }
 else     if (DOUBLE_CLICK.equals(token)) {
      clickCount=2;
    }
 else {
      throw new InvalidDataException("unknown token: " + token);
    }
  }
  return new MouseShortcut(button,modifiers,clickCount);
}
