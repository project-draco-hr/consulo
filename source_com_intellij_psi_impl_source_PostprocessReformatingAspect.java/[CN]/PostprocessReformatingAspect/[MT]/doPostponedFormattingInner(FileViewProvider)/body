{
  final List<ASTNode> astNodes=myReformatElements.remove(key);
  if (astNodes == null)   return;
  final PsiDocumentManager documentManager=PsiDocumentManager.getInstance(myPsiManager.getProject());
  final Document document=key.getDocument();
  if (document == null || documentManager.isUncommited(document))   return;
  insertWhitespacesAtMarkersPositions(astNodes,key);
  final TreeMap<RangeMarker,PostponedAction> rangesToProcess=createActionsMap(astNodes,document);
  final List<Pair<RangeMarker,? extends PostponedAction>> normalizedActions=normalizeAndReorderPostponedActions(rangesToProcess,document);
  for (  final Pair<RangeMarker,? extends PostponedAction> normalizedAction : normalizedActions) {
    normalizedAction.getSecond().processRange(normalizedAction.getFirst(),key);
  }
}
