{
  if (!ProjectFacetManager.getInstance(project).hasFacets(AndroidFacet.ID)) {
    return Collections.emptyList();
  }
  final List<String> dexTargetIds=new ArrayList<String>();
  final List<String> packagingTargetIds=new ArrayList<String>();
  final boolean fullBuild=AndroidCompileUtil.isFullBuild(baseScope);
  for (  Module module : baseScope.getAffectedModules()) {
    final AndroidFacet facet=AndroidFacet.getInstance(module);
    if (facet == null) {
      continue;
    }
    packagingTargetIds.add(module.getName());
    if (fullBuild && !facet.getConfiguration().LIBRARY_PROJECT) {
      dexTargetIds.add(module.getName());
    }
  }
  return Arrays.asList(TargetTypeBuildScope.newBuilder().setTypeId(AndroidCommonUtils.DEX_BUILD_TARGET_TYPE_ID).addAllTargetId(dexTargetIds).build(),TargetTypeBuildScope.newBuilder().setTypeId(AndroidCommonUtils.PACKAGING_BUILD_TARGET_TYPE_ID).addAllTargetId(packagingTargetIds).build());
}
