{
  try {
    final SVNException[] exception=new SVNException[1];
    final SVNCommitClient client=SvnVcs.getInstance(project).createCommitClient();
    ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
      public void run(){
        ProgressIndicator progressIndicator=ProgressManager.getInstance().getProgressIndicator();
        client.setEventHandler(new CheckoutEventHandler(SvnVcs.getInstance(project),true,progressIndicator));
        try {
          progressIndicator.setText(SvnBundle.message("progress.text.import",target.getAbsolutePath()));
          client.doImport(target,url,message,!includeIgnored,recursive);
        }
 catch (        SVNException e) {
          exception[0]=e;
        }
 finally {
          client.setIgnoreExternals(false);
          client.setEventHandler(null);
        }
      }
    }
,SvnBundle.message("message.title.import"),true,project);
    if (exception[0] != null) {
      throw exception[0];
    }
  }
 catch (  SVNException e1) {
    Messages.showErrorDialog(SvnBundle.message("message.text.cannot.import",e1.getMessage()),SvnBundle.message("message.title.import"));
  }
}
