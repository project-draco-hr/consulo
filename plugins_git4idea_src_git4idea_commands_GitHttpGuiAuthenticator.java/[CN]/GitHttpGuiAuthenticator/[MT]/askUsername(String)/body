{
  String key=adjustHttpUrl(url);
  AuthData authData=getSavedAuthData(myProject,key);
  String login=null;
  String password=null;
  if (authData != null) {
    login=authData.getLogin();
    password=authData.getPassword();
  }
  if (login != null && password != null) {
    myPassword=password;
    return login;
  }
  final AuthDialog dialog=new AuthDialog(myProject,myTitle,"Enter credentials for " + url,login,null,true);
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      dialog.show();
    }
  }
,myModalityState == null ? ModalityState.defaultModalityState() : myModalityState);
  if (!dialog.isOK()) {
    return "";
  }
  myPassword=dialog.getPassword();
  myLogin=dialog.getUsername();
  myUrl=key;
  myRememberOnDisk=dialog.isRememberPassword();
  myPasswordKey=makeKey(myUrl,myLogin);
  return myLogin;
}
