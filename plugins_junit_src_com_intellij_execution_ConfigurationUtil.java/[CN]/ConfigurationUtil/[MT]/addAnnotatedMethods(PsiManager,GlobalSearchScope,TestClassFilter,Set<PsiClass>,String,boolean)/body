{
  final Ref<Boolean> isJUnit4=new Ref<Boolean>(Boolean.FALSE);
  PsiClass testAnnotation=manager.findClass(annotation,GlobalSearchScope.allScope(manager.getProject()));
  if (testAnnotation != null) {
    AnnotatedMembersSearch.search(testAnnotation,scope).forEach(new Processor<PsiMember>(){
      public boolean process(      final PsiMember annotated){
        PsiClass containingClass=annotated instanceof PsiClass ? (PsiClass)annotated : annotated.getContainingClass();
        if (containingClass != null && annotated instanceof PsiMethod == isMethod && testClassFilter.isAccepted(containingClass)) {
          found.add(containingClass);
          isJUnit4.set(Boolean.TRUE);
        }
        return true;
      }
    }
);
  }
  return isJUnit4.get().booleanValue();
}
