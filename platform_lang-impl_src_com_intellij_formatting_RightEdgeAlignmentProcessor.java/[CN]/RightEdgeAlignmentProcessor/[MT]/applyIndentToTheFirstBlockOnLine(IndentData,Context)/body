{
  WhiteSpace whiteSpace=context.targetBlock.getWhiteSpace();
  int indentSpaces=alignmentAnchorIndent.getIndentSpaces();
  int spaces=alignmentAnchorIndent.getSpaces() - context.targetBlock.getSymbolsAtTheLastLine();
  if (spaces < 0) {
    indentSpaces+=spaces;
    spaces=0;
  }
  if (indentSpaces >= 0) {
    whiteSpace.setSpaces(spaces,indentSpaces);
    return true;
  }
  if (whiteSpace.getTotalSpaces() > 0) {
    CompositeBlockWrapper parent=context.targetBlock.getParent();
    if (parent != null) {
      IndentData childOffset=CoreFormatterUtil.getIndent(context.indentOptions,context.targetBlock,context.targetBlock.getStartOffset());
      if (whiteSpace.getTotalSpaces() > childOffset.getTotalSpaces()) {
        int leftShift=whiteSpace.getTotalSpaces() - childOffset.getTotalSpaces();
        if (leftShift >= whiteSpace.getSpaces()) {
          spaces=0;
          indentSpaces=whiteSpace.getIndentSpaces() - (leftShift - whiteSpace.getSpaces());
        }
 else {
          spaces=whiteSpace.getSpaces() - leftShift;
          indentSpaces=whiteSpace.getIndentSpaces();
        }
      }
      whiteSpace.setSpaces(spaces,indentSpaces);
    }
  }
  return false;
}
