{
  if (JAVAC_EXTERNAL_BACKEND == null) {
    createCompilers();
  }
  if (myDefaultJavaCompiler != JAVAC_EXTERNAL_BACKEND)   return myDefaultJavaCompiler;
  boolean runEmbedded=ApplicationManager.getApplication().isUnitTestMode() ? !JavacSettings.getInstance(myProject).isTestsUseExternalCompiler() : Boolean.parseBoolean(System.getProperty(PROPERTY_IDEA_USE_EMBEDDED_JAVAC));
  return runEmbedded ? JAVAC_EMBEDDED_BACKEND : JAVAC_EXTERNAL_BACKEND;
}
