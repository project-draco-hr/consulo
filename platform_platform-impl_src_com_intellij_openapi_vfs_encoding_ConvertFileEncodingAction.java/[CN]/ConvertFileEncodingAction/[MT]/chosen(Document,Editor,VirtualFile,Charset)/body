{
  if (!canBeConvertedTo(virtualFile,charset)) {
    int res=Messages.showDialog("Encoding '" + charset.displayName() + "' does not support some characters from the text.","Incompatible Encoding: " + charset.displayName(),new String[]{"Convert anyway","Cancel"},1,AllIcons.General.WarningDialog);
    if (res != 0)     return;
  }
  convert(document,editor,virtualFile,charset);
}
