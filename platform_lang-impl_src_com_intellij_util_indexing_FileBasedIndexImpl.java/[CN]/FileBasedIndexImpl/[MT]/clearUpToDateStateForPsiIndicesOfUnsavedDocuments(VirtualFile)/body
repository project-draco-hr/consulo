{
  Document document=myFileDocumentManager.getCachedDocument(file);
  if (document != null && myFileDocumentManager.isDocumentUnsaved(document)) {
    if (!myUpToDateIndicesForUnsavedOrTransactedDocuments.isEmpty()) {
      for (      ID<?,?> psiBackedIndex : myPsiDependentIndices) {
        myUpToDateIndicesForUnsavedOrTransactedDocuments.remove(psiBackedIndex);
      }
    }
    myLastIndexedDocStamps.clearForDocument(document);
    document.putUserData(ourFileContentKey,null);
    return true;
  }
  return false;
}
