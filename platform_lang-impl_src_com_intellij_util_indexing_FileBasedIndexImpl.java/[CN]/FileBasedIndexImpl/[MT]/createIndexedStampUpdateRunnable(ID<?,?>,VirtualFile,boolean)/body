{
  return new Runnable(){
    @Override public void run(){
      if (file.isValid()) {
        int fileId=getIdMaskingNonIdBasedFile(file);
        if (hasContent) {
          IndexingStamp.setFileIndexedStateCurrent(fileId,indexId);
        }
 else {
          IndexingStamp.setFileIndexedStateUnindexed(fileId,indexId);
        }
        if (myNotRequiringContentIndices.contains(indexId))         IndexingStamp.flushCache(fileId);
      }
    }
  }
;
}
