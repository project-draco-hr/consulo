{
  if (!(file instanceof VirtualFileWithId) || !file.isValid()) {
    return false;
  }
  if (restrictedTo != null && !Comparing.equal(file,restrictedTo) || filter != null && restrictedTo == null && !filter.accept(file)) {
    return false;
  }
  return true;
}
