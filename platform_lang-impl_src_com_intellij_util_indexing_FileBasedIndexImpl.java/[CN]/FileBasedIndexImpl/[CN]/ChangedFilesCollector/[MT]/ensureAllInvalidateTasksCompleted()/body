{
  final int size=getNumberOfPendingInvalidations();
  if (size == 0) {
    return;
  }
  ProgressManager.getInstance().executeNonCancelableSection(new Runnable(){
    @Override public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      indicator.setText("");
      int count=0;
      while (true) {
        InvalidationTask task=myFutureInvalidations.poll();
        if (task == null) {
          break;
        }
        indicator.setFraction((double)count++ / size);
        task.run();
      }
    }
  }
);
}
