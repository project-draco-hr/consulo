{
  Throwable unexpectedError=null;
  for (  ID<?,?> indexId : affectedIndices) {
    try {
      updateSingleIndex(indexId,inputId,null);
    }
 catch (    StorageException e) {
      LOG.info(e);
      requestRebuild(indexId);
    }
catch (    ProcessCanceledException pce) {
      LOG.error(pce);
    }
catch (    Throwable e) {
      LOG.info(e);
      if (unexpectedError == null) {
        unexpectedError=e;
      }
    }
  }
  IndexingStamp.flushCache(inputId);
  if (unexpectedError != null) {
    LOG.error(unexpectedError);
  }
}
