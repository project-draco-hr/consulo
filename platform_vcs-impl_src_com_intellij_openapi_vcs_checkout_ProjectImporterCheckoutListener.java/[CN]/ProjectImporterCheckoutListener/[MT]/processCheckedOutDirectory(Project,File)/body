{
  final File[] files=directory.listFiles();
  if (files != null) {
    final LocalFileSystem localFileSystem=LocalFileSystem.getInstance();
    for (    File file : files) {
      if (file.isDirectory())       continue;
      final VirtualFile virtualFile=localFileSystem.findFileByIoFile(file);
      if (virtualFile != null) {
        final ProjectOpenProcessor openProcessor=ProjectOpenProcessor.getImportProvider(virtualFile);
        if (openProcessor != null) {
          int rc=Messages.showYesNoDialog(project,VcsBundle.message("checkout.open.project.prompt",ProjectDirCheckoutListener.getProductNameWithArticle(),files[0].getPath()),VcsBundle.message("checkout.title"),Messages.getQuestionIcon());
          if (rc == Messages.YES) {
            openProcessor.doOpenProject(virtualFile,project,false);
          }
          return true;
        }
      }
    }
  }
  return false;
}
