{
  if (descriptor instanceof ProblemDescriptorImpl) {
    Navigatable navigatable=((ProblemDescriptorImpl)descriptor).getNavigatable();
    if (navigatable != null) {
      return navigatable;
    }
  }
  if (psiElement == null || !psiElement.isValid())   return null;
  final VirtualFile virtualFile=psiElement.getContainingFile().getVirtualFile();
  if (virtualFile != null) {
    return new OpenFileDescriptor(myProject,virtualFile,psiElement.getTextOffset());
  }
  return null;
}
