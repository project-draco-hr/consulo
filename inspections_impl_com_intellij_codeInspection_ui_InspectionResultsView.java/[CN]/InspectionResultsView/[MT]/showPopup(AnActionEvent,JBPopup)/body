{
  final InputEvent event=e.getInputEvent();
  if (event instanceof MouseEvent) {
    popup.showUnderneathOf(event.getComponent());
  }
 else {
    popup.showInBestPositionFor(e.getDataContext());
  }
}
