{
  final ProjectJdk jdk=parameters.getJdk();
  if (jdk == null) {
    throw new ExecutionException("JDK is not specified");
  }
  final String versionString=jdk.getVersionString();
  if (versionString.indexOf("1.0") > -1 || versionString.indexOf("1.1") > -1) {
    throw new ExecutionException("Debugging is not supported for JDK " + versionString);
  }
  if (SystemInfo.isWindows && versionString.indexOf("1.2") > -1) {
    final VirtualFile homeDirectory=jdk.getHomeDirectory();
    if (homeDirectory == null || !homeDirectory.isValid()) {
      throw new ExecutionException("Invalid JDK home directory specified." + versionString);
    }
    File dllFile=new File(homeDirectory.getPath().replace('/',File.separatorChar) + File.separator + "bin"+ File.separator+ "jdwp.dll");
    if (!dllFile.exists()) {
      GetJPDADialog dialog=new GetJPDADialog();
      dialog.show();
      throw new ExecutionException("Debug libraries are missig from JDK home.\nIn order for debugger to start, the libraries should be installed.\nPlease visit http://java.sun.com/products/jpda");
    }
  }
}
