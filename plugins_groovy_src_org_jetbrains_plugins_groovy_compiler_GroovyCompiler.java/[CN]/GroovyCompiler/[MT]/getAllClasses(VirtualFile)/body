{
  final ArrayList<PsiClass> classes=new ArrayList<PsiClass>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final PsiFile file=PsiManager.getInstance(myProject).findFile(vfile);
      if (file instanceof GroovyFile) {
        addClassesFrom(((GroovyFile)file).getClasses(),classes);
      }
    }
    private void addClassesFrom(    final PsiClass[] classes,    List<PsiClass> result){
      for (      PsiClass aClass : classes) {
        result.add(aClass);
        addClassesFrom(aClass.getInnerClasses(),result);
      }
    }
  }
);
  return classes;
}
