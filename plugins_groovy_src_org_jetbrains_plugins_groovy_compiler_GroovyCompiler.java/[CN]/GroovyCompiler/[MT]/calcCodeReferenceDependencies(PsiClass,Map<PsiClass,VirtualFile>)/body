{
  final Set<PsiClass> deps=new THashSet<PsiClass>();
  psiClass.acceptChildren(new PsiElementVisitor(){
    @Override public void visitElement(    PsiElement element){
      if (element instanceof PsiClass) {
        return;
      }
      if (element instanceof GrCodeReferenceElement) {
        GrCodeReferenceElement referenceElement=(GrCodeReferenceElement)element;
        try {
          final PsiElement target=referenceElement.resolve();
          if (target instanceof PsiClass && moduleClasses.containsKey(target)) {
            deps.add((PsiClass)target);
          }
        }
 catch (        Exception e) {
          LOG.error(e);
        }
      }
      element.acceptChildren(this);
    }
  }
);
  return deps;
}
