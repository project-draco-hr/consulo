{
  final Set<VirtualFile> moduleClasses=new THashSet<VirtualFile>();
  ModuleRootManager.getInstance(module).getFileIndex().iterateContent(new ContentIterator(){
    public boolean processFile(    final VirtualFile vfile){
      if (!vfile.isDirectory() && GroovyFileType.GROOVY_FILE_TYPE.equals(vfile.getFileType())) {
        AccessToken accessToken=ApplicationManager.getApplication().acquireReadActionLock();
        try {
          if (PsiManager.getInstance(myProject).findFile(vfile) instanceof GroovyFile) {
            moduleClasses.add(vfile);
          }
        }
  finally {
          accessToken.finish();
        }
      }
      return true;
    }
  }
);
  return moduleClasses;
}
