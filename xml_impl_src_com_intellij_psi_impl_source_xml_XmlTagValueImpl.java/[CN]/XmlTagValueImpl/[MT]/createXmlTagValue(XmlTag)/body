{
  final List<XmlTagChild> bodyElements=new ArrayList<XmlTagChild>();
  tag.processElements(new PsiElementProcessor(){
    boolean insideBody=false;
    public boolean execute(    @NotNull PsiElement element){
      final ASTNode treeElement=element.getNode();
      if (insideBody) {
        if (treeElement.getElementType() == XmlTokenType.XML_END_TAG_START)         return false;
        if (!(element instanceof XmlTagChild))         return true;
        bodyElements.add((XmlTagChild)element);
      }
 else       if (treeElement.getElementType() == XmlTokenType.XML_TAG_END)       insideBody=true;
      return true;
    }
  }
,tag);
  XmlTagChild[] tagChildren=ContainerUtil.toArray(bodyElements,new XmlTagChild[bodyElements.size()]);
  return new XmlTagValueImpl(tagChildren,tag);
}
