{
  if (!crossMenuMnemonic) {
    JPopupMenu pm=getActivePopupMenu();
    if (pm != null && pm != menuItem.getParent()) {
      return;
    }
  }
  int key=menuItem.getMnemonic();
  if (key == 0)   return;
  MenuElement path[]=e.getPath();
  if (lower((char)key) == lower(e.getKeyChar())) {
    JPopupMenu popupMenu=((JMenu)menuItem).getPopupMenu();
    MenuElement sub[]=popupMenu.getSubElements();
    if (sub.length > 0) {
      MenuSelectionManager manager=e.getMenuSelectionManager();
      MenuElement newPath[]=new MenuElement[path.length + 2];
      System.arraycopy(path,0,newPath,0,path.length);
      newPath[path.length]=popupMenu;
      newPath[path.length + 1]=sub[0];
      manager.setSelectedPath(newPath);
    }
    e.consume();
  }
}
