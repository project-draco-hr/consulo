{
  final VirtualFile vFile=LocalFileSystem.getInstance().findFileByPath(filePath.replace(File.separatorChar,'/'));
  assertNotNull("file " + filePath + " not found",vFile);
  String fileText=FileDocumentManager.getInstance().getDocument(vFile) != null ? FileDocumentManager.getInstance().getDocument(vFile).getText() : "";
  fileText=StringUtil.convertLineSeparators(fileText,"\n");
  int offset=fileText.indexOf(marker);
  assertTrue(offset >= 0);
  fileText=fileText.substring(0,offset) + fileText.substring(offset + marker.length());
  myFile=createFile(vFile.getName(),fileText);
  return myFile.findElementAt(offset);
}
