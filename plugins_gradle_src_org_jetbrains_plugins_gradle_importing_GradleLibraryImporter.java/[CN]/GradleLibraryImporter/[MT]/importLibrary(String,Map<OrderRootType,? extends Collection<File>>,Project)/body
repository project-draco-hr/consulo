{
  final Ref<Library> result=new Ref<Library>();
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      final GradleProjectEntityImportListener publisher=project.getMessageBus().syncPublisher(GradleProjectEntityImportListener.TOPIC);
      publisher.onImportStart(libraryName);
      try {
        result.set(doImportLibrary(libraryName,libraryFiles,project));
      }
  finally {
        publisher.onImportEnd(libraryName);
      }
    }
  }
);
  return result.get();
}
