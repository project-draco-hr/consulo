{
  PackagingMethod packagingMethod=getSelectedMethod();
  List<ContainerElement> changedElements=new ArrayList<ContainerElement>();
  if (packagingMethod != null && myElementsInfo.getPackagingMethod() != null) {
    for (    ContainerElement element : myElementsInfo.getElements()) {
      element.setPackagingMethod(packagingMethod);
    }
  }
  String text=myOutputPathField.getText();
  if (text.length() == 0) {
    text="/";
  }
  if (myElementsInfo.getRelativePath() != null) {
    for (    ContainerElement element : myElementsInfo.getElements()) {
      String path=text;
      if (myPathTails != null) {
        String tail=myPathTails.get(element);
        if (tail.startsWith("/")) {
          tail=tail.substring(1);
        }
        if (!path.endsWith("/")) {
          path+="/";
        }
        path+=tail;
      }
      if (path.length() > 1 && path.endsWith("/")) {
        path=path.substring(0,path.length() - 1);
      }
      element.setURI(FileUtil.toSystemIndependentName(path));
    }
  }
  if (myAdditionalPropertiesConfigurable != null && myElementsInfo.getElements().size() == 1) {
    myAdditionalPropertiesConfigurable.applyTo(myElementsInfo.getElements().get(0));
  }
  if (myListener != null) {
    for (    ContainerElement changedElement : changedElements) {
      myListener.packagingMethodChanged(changedElement);
    }
  }
}
