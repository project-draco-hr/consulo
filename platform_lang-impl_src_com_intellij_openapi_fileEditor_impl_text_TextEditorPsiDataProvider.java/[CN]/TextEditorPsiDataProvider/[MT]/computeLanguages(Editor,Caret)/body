{
  LinkedHashSet<Language> set=new LinkedHashSet<Language>(4);
  Language injectedLanguage=(Language)getData(injectedId(LANGUAGE.getName()),editor,caret);
  addIfNotNull(injectedLanguage,set);
  Language language=(Language)getData(LANGUAGE.getName(),editor,caret);
  addIfNotNull(language,set);
  PsiFile psiFile=(PsiFile)getData(PSI_FILE.getName(),editor,caret);
  if (psiFile != null) {
    addIfNotNull(psiFile.getViewProvider().getBaseLanguage(),set);
  }
  return set.toArray(new Language[set.size()]);
}
