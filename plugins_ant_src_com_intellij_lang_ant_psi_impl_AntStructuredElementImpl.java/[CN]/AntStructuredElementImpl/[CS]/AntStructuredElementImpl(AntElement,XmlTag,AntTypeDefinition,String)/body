{
  this(parent,sourceElement,nameElementAttribute);
  myDefinition=definition;
  final AntTypeId id=new AntTypeId(sourceElement.getName());
  if (definition != null) {
    if (!definition.getTypeId().equals(id)) {
      myDefinition=new AntTypeDefinitionImpl((AntTypeDefinitionImpl)myDefinition);
      myDefinition.setTypeId(id);
      myDefinitionCloned=true;
    }
  }
 else {
    final AntFile file=getAntFile();
    if (file != null) {
      final AntTypeDefinition targetDef=file.getTargetDefinition();
      final String className=targetDef != null ? targetDef.getNestedClassName(id) : null;
      if (className != null) {
        myDefinition=file.getBaseTypeDefinition(className);
      }
    }
  }
}
