{
  if (name == null)   return null;
  final AntFileImpl antFile=PsiTreeUtil.getParentOfType(this,AntFileImpl.class);
  if (antFile == null)   return null;
  VirtualFile vFile=antFile.getContainingPath();
  if (vFile == null)   return null;
  String projectPath=vFile.getPath();
  if (!ignoreBasedir) {
    final String baseDir=antFile.getAntProject().getBaseDir();
    if (baseDir != null && baseDir.length() > 0) {
      projectPath=new File(projectPath,baseDir).getAbsolutePath();
    }
  }
  final String fileName=computeAttributeValue(name);
  File file=new File(fileName);
  if (!file.isAbsolute()) {
    file=new File(projectPath,fileName);
  }
  vFile=LocalFileSystem.getInstance().findFileByPath(file.getAbsolutePath().replace(File.separatorChar,'/'));
  if (vFile == null)   return null;
  return antFile.getViewProvider().getManager().findFile(vFile);
}
