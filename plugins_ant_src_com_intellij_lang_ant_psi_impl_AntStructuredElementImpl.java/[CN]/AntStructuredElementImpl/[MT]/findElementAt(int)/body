{
synchronized (PsiLock.LOCK) {
    if (offset != myLastFoundElementOffset || (myLastFoundElement != null && !myLastFoundElement.isValid())) {
      final PsiElement foundElement=super.findElementAt(offset);
      if (foundElement == null) {
        return null;
      }
      myLastFoundElement=(AntElement)foundElement;
      myLastFoundElementOffset=offset;
    }
    return myLastFoundElement;
  }
}
