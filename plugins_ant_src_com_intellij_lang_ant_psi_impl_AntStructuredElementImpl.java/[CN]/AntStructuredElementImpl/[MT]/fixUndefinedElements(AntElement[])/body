{
  if (myLastProcessedChildren == elements) {
    return elements;
  }
  myLastProcessedChildren=elements;
  if (isValid()) {
    for (int i=0; i < elements.length; i++) {
      final AntElement element=elements[i];
      if (element instanceof AntStructuredElement && element.isValid()) {
        AntStructuredElement se=(AntStructuredElement)element;
        if (se.getTypeDefinition() == null) {
          final XmlTag sourceElement=se.getSourceElement();
          se=(AntStructuredElement)AntElementFactory.createAntElement(this,sourceElement);
          if (se != null && se.getTypeDefinition() != null) {
            elements[i]=se;
          }
        }
      }
    }
  }
  return elements;
}
