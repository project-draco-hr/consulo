{
  if (name == null) {
    return null;
  }
  final AntFile antFile=getAntFile();
  if (antFile == null) {
    return null;
  }
  VirtualFile vFile=antFile.getContainingPath();
  if (vFile == null) {
    return null;
  }
  String projectPath=vFile.getPath();
  String dir=baseDir;
  if (dir == null) {
    final AntProject project=antFile.getAntProject();
    dir=project == null ? null : project.getBaseDir();
  }
  if (dir != null && dir.length() > 0) {
    projectPath=new File(projectPath,dir).getAbsolutePath();
  }
  final String fileName=computeAttributeValue(name);
  if (fileName == null) {
    return null;
  }
  File file=new File(fileName);
  if (!file.isAbsolute()) {
    file=new File(projectPath,fileName);
  }
  vFile=LocalFileSystem.getInstance().findFileByPath(file.getAbsolutePath().replace(File.separatorChar,'/'));
  if (vFile == null) {
    return null;
  }
  return antFile.getViewProvider().getManager().findFile(vFile);
}
