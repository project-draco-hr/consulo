{
  if (!(file instanceof XmlFile)) {
    return null;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(file);
  if (facet == null) {
    return null;
  }
  if (!AndroidResourceUtil.isInResourceSubdirectory(file,ResourceFolderType.VALUES.getName())) {
    return null;
  }
  final PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  if (element == null) {
    return null;
  }
  final XmlTag tag=PsiTreeUtil.getParentOfType(element,XmlTag.class);
  if (tag == null) {
    return null;
  }
  final String name=tag.getAttributeValue("name");
  if (name == null || name.length() == 0) {
    return null;
  }
  final XmlTag parentTag=tag.getParentTag();
  return parentTag != null && parentTag.getParentTag() == null ? tag : null;
}
