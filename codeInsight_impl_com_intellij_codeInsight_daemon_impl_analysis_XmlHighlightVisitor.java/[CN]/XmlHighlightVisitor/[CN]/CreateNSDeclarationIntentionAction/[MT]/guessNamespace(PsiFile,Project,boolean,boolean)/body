{
  final List<String> possibleUris=new LinkedList<String>();
  boolean unitTestMode=ApplicationManager.getApplication().isUnitTestMode();
  if (unitTestMode)   doFindUris(acceptTaglib,project,file,possibleUris,acceptXmlNs);
 else {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
      public void run(){
        doFindUris(acceptTaglib,project,file,possibleUris,acceptXmlNs);
      }
    }
,XmlErrorMessages.message("finding.acceptable.uri"),false,project);
  }
  return possibleUris.toArray(new String[possibleUris.size()]);
}
