{
  List<String> possibleUris=new LinkedList<String>();
  if (acceptTaglib) {
    final JspManager instance=JspManager.getInstance(project);
    final JspFile jspFile=(JspFile)file;
    final String[] possibleTldUris=instance.getPossibleTldUris(jspFile);
    Arrays.sort(possibleTldUris);
    for (    String uri : possibleTldUris) {
      final XmlFile tldFileByUri=instance.getTldFileByUri(uri,jspFile);
      if (tldFileByUri == null)       continue;
      final PsiMetaData metaData=tldFileByUri.getDocument().getMetaData();
      if (metaData instanceof TldDescriptor) {
        if (((TldDescriptor)metaData).getElementDescriptor(myTag) != null) {
          possibleUris.add(uri);
        }
      }
    }
  }
  if (acceptXmlNs) {
    final ExternalResourceManagerEx instanceEx=ExternalResourceManagerEx.getInstanceEx();
    final String[] availableUrls=instanceEx.getResourceUrls(null,true);
    for (    String url : availableUrls) {
      final XmlFile xmlFile=XmlUtil.findXmlFile(file,url);
      if (xmlFile != null) {
        final PsiMetaData metaData=xmlFile.getDocument().getMetaData();
        if (metaData instanceof XmlNSDescriptorImpl) {
          XmlElementDescriptor elementDescriptor=((XmlNSDescriptorImpl)metaData).getElementDescriptor(myTag.getLocalName(),url);
          if (elementDescriptor != null && !(elementDescriptor instanceof AnyXmlElementDescriptor)) {
            possibleUris.add(url);
          }
        }
      }
    }
  }
  if (possibleUris.size() == 0) {
    if (acceptTaglib)     possibleUris.add(XmlUtil.JSTL_CORE_URIS[0]);
 else     possibleUris.add("someuri");
  }
  return possibleUris.toArray(new String[possibleUris.size()]);
}
