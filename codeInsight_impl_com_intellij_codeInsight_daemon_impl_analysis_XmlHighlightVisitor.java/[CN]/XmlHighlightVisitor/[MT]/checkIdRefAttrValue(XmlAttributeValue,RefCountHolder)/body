{
  if (!(value.getParent() instanceof XmlAttribute) || holder == null)   return null;
  XmlAttribute attribute=(XmlAttribute)value.getParent();
  XmlTag tag=attribute.getParent();
  XmlElementDescriptor elementDescriptor=tag.getDescriptor();
  if (elementDescriptor == null)   return null;
  XmlAttributeDescriptor attributeDescriptor=elementDescriptor.getAttributeDescriptor(attribute);
  if (attributeDescriptor == null)   return null;
  if (attributeDescriptor.hasIdRefType() && tag.getParent().getUserData(DO_NOT_VALIDATE_KEY) == null) {
    String unquotedValue=getUnquotedValue(value,tag);
    if (XmlUtil.isSimpleXmlAttributeValue(unquotedValue,value)) {
      XmlAttribute xmlAttribute=holder.getAttributeById(unquotedValue);
      if (xmlAttribute == null && tag instanceof HtmlTag) {
        xmlAttribute=holder.getAttributeById(StringUtil.stripQuotesAroundValue(value.getText()));
      }
      if (xmlAttribute == null || !xmlAttribute.isValid()) {
        return HighlightInfo.createHighlightInfo(HighlightInfoType.WRONG_REF,value,XmlErrorMessages.message("invalid.id.reference"));
      }
    }
  }
  return null;
}
