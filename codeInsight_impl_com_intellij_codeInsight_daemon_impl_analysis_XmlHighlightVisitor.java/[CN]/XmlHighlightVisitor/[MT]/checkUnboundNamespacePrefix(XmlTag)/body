{
  final String namespacePrefix=tag.getNamespacePrefix();
  if (namespacePrefix.length() > 0) {
    final String namespaceByPrefix=tag.getNamespaceByPrefix(namespacePrefix);
    if (namespaceByPrefix.length() == 0) {
      final PsiFile containingFile=tag.getContainingFile();
      if (!"xml".equals(namespacePrefix)) {
        final boolean error=containingFile.getFileType() == StdFileTypes.JSPX || containingFile.getFileType() == StdFileTypes.XHTML || containingFile.getFileType() == StdFileTypes.XML;
        final String localizedMessage=XmlErrorMessages.message("unbound.namespace",namespacePrefix);
        final int messageLength=namespacePrefix.length();
        final HighlightInfoType infoType=error ? HighlightInfoType.ERROR : HighlightInfoType.WARNING;
        bindMessageToTag(tag,infoType,0,messageLength,localizedMessage);
      }
    }
  }
}
