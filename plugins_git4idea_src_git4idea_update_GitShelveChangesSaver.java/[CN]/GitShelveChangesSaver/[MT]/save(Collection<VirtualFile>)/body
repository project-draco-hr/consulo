{
  LOG.info("save " + rootsToSave);
  ArrayList<Change> changes=new ArrayList<Change>();
  for (  LocalChangeList l : myChangeLists) {
    changes.addAll(filterChangesByRoots(l.getChanges(),rootsToSave));
  }
  if (!changes.isEmpty()) {
    String oldProgressTitle=myProgressIndicator.getText();
    myProgressIndicator.setText(GitBundle.getString("update.shelving.changes"));
    List<VcsException> exceptions=new ArrayList<VcsException>(1);
    myShelvedChangeList=GitStashUtils.shelveChanges(myProject,myShelveManager,changes,myStashMessage,exceptions);
    myProgressIndicator.setText(oldProgressTitle);
    if (!exceptions.isEmpty()) {
      LOG.info("save " + exceptions,exceptions.get(0));
      throw exceptions.get(0);
    }
  }
}
