{
  PsiElement[] tagElements=tag.getDataElements();
  int predictOffset=tagElements.length > 0 ? tagElements[0].getTextOffset() + tagElements[0].getText().length() : 0;
  StringBuffer buffer1=new StringBuffer();
  for (int j=0; j < tagElements.length; j++) {
    PsiElement tagElement=tagElements[j];
    if (tagElement.getTextOffset() > predictOffset)     buffer1.append(" ");
    predictOffset=tagElement.getTextOffset() + tagElement.getText().length();
    buffer1.append(tagElement.getText());
    if (j < tagElements.length - 1) {
      buffer1.append(" ");
    }
  }
  String text=buffer1.toString().trim();
  if (text.length() > 0) {
    int index=JavaDocUtil.extractReference(text);
    String refText=text.substring(0,index).trim();
    String label=text.substring(index).trim();
    if (label.length() == 0) {
      label=null;
    }
    generateLink(buffer,refText,label,tagElements[0],plainLink);
  }
}
