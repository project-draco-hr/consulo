{
  final PsiAnnotation[] annotations=owner.getModifierList().getAnnotations();
  PsiManager manager=owner.getManager();
  for (  PsiAnnotation annotation : annotations) {
    final PsiElement resolved=annotation.getNameReferenceElement().resolve();
    if (resolved instanceof PsiClass) {
      final PsiClass annotationType=(PsiClass)resolved;
      final PsiModifierList modifierList=annotationType.getModifierList();
      if (modifierList.findAnnotation("java.lang.annotation.Documented") != null) {
        final PsiClassType type=manager.getElementFactory().createType(annotationType,PsiSubstitutor.EMPTY);
        buffer.append("@");
        generateType(buffer,type,owner);
        final PsiNameValuePair[] attributes=annotation.getParameterList().getAttributes();
        if (attributes.length > 0) {
          boolean first=true;
          buffer.append("(");
          for (          PsiNameValuePair pair : attributes) {
            if (!first)             buffer.append("&nbsp;");
            final String name=pair.getName();
            if (name != null) {
              buffer.append(name);
              buffer.append(" = ");
            }
            final PsiAnnotationMemberValue value=pair.getValue();
            if (value != null) {
              buffer.append(value.getText());
            }
          }
          buffer.append(")");
        }
        buffer.append("\n");
      }
    }
  }
}
