{
  final Editor editor=context.editor;
  final int offset=editor.getCaretModel().getOffset();
  if (completionChar == Lookup.REPLACE_SELECT_CHAR) {
    final Document document=editor.getDocument();
    final CharSequence sequence=document.getCharsSequence();
    int i=offset;
    while (i < sequence.length() && Character.isJavaIdentifierPart(sequence.charAt(i)))     i++;
    document.deleteString(offset,i);
    PsiDocumentManager.getInstance(editor.getProject()).commitDocument(document);
  }
  final TailType tailType=DefaultInsertHandler.getTailType(completionChar,item);
  final int tailOffset=myHandler.handleInsert(editor,startOffset,SimpleLookupItem.this,data.items,tailType);
  tailType.processTail(editor,tailOffset);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  editor.getSelectionModel().removeSelection();
}
