{
  setAttribute(LookupItem.INSERT_HANDLER_ATTR,new InsertHandler(){
    public void handleInsert(    final CompletionContext context,    final int startOffset,    final LookupData data,    final LookupItem item,    final boolean signatureSelected,    final char completionChar){
      final Editor editor=context.editor;
      final int offset=editor.getCaretModel().getOffset();
      if (completionChar == Lookup.REPLACE_SELECT_CHAR) {
        final Document document=editor.getDocument();
        final CharSequence sequence=document.getCharsSequence();
        int i=offset;
        while (i < sequence.length() && Character.isJavaIdentifierPart(sequence.charAt(i)))         i++;
        if (i < sequence.length() - 2 && '(' == sequence.charAt(i) && ')' == sequence.charAt(i + 1))         i+=2;
        document.deleteString(offset,i);
      }
      final TailType tailType=DefaultInsertHandler.getTailType(completionChar,item);
      final int tailOffset=handler.handleInsert(editor,startOffset,SimpleLookupItem.this,data.items,tailType);
      tailType.processTail(editor,tailOffset);
      editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
      editor.getSelectionModel().removeSelection();
    }
  }
);
  return this;
}
