{
  List<AbstractTestProxy> failed=getFailedTests();
  final DataContext dataContext=e.getDataContext();
  Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  JUnitConfiguration configuration=myModel.getProperties().getConfiguration();
  final TestMethods testMethods=new TestMethods(project,configuration,myRunnerSettings,myConfigurationPerRunnerSettings,failed);
  boolean isDebug=myConsoleProperties.getDebugSession() != null;
  try {
    final RunProfile profile=new MyRunProfile(testMethods,configuration);
    final ProgramRunner runner=isDebug ? RunnerRegistry.getInstance().getRunner(DefaultDebugExecutor.EXECUTOR_ID,profile) : RunnerRegistry.getInstance().getRunner(DefaultRunExecutor.EXECUTOR_ID,profile);
    LOG.assertTrue(runner != null);
    runner.execute(profile,dataContext,myRunnerSettings,myConfigurationPerRunnerSettings);
  }
 catch (  ExecutionException e1) {
    LOG.error(e1);
  }
 finally {
    testMethods.clear();
  }
}
