{
  Exception sourceException=t.getUnderlyingException();
  if (!(sourceException instanceof IOException))   return t;
  String localizedMessage=t.getLocalizedMessage();
  if (!localizedMessage.startsWith(UNCHANDLED_RESPONSE_PREFIX))   return t;
  String response=localizedMessage.substring(UNCHANDLED_RESPONSE_PREFIX.length(),localizedMessage.length() - 1);
  if (response.startsWith(USER + "@" + HOST)) {
    return new IOCommandException(new IOException("Server rejected access"));
  }
 else {
    return new IOCommandException(new IOException("Cannot establish external connection. Response from server was: " + response));
  }
}
