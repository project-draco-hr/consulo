{
  final JpsRemoteProto.Message.Request.ShutdownCommand.Builder builder=JpsRemoteProto.Message.Request.ShutdownCommand.newBuilder();
  builder.setShutdownPolicy(cancelRunningBuilds ? JpsRemoteProto.Message.Request.ShutdownCommand.ShutdownPolicy.CANCEL_RUNNING_BUILDS : JpsRemoteProto.Message.Request.ShutdownCommand.ShutdownPolicy.WAIT_RUNNING_BUILDS);
  return JpsRemoteProto.Message.Request.newBuilder().setRequestType(JpsRemoteProto.Message.Request.Type.SHUTDOWN_COMMAND).setShutdownCommand(builder.build()).build();
}
