{
  final JpsRemoteProto.Message.Request.CompilationRequest.Builder builder=JpsRemoteProto.Message.Request.CompilationRequest.newBuilder().setCommandType(command);
  builder.setProjectId(project);
  if (!modules.isEmpty()) {
    builder.addAllModuleName(modules);
  }
  if (!artifacts.isEmpty()) {
    builder.addAllArtifactName(artifacts);
  }
  if (!userData.isEmpty()) {
    for (    Map.Entry<String,String> entry : userData.entrySet()) {
      final String key=entry.getKey();
      final String value=entry.getValue();
      if (key != null && value != null) {
        builder.addBuilderParameter(createPair(key,value));
      }
    }
  }
  if (!paths.isEmpty()) {
    builder.addAllFilePath(paths);
  }
  return JpsRemoteProto.Message.Request.newBuilder().setRequestType(JpsRemoteProto.Message.Request.Type.COMPILE_REQUEST).setCompileRequest(builder.build()).build();
}
