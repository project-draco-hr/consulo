{
  Iterator<VirtualFilePointerImpl> iterator=myPointers.keySet().iterator();
  HashMap<VirtualFilePointerListener,ArrayList<VirtualFilePointer>> listenerToArrayOfPointers=new HashMap<VirtualFilePointerListener,ArrayList<VirtualFilePointer>>();
  while (iterator.hasNext()) {
    VirtualFilePointerImpl pointer=iterator.next();
    if (pointer != null) {
      if (listenerNotifier.processPointer(pointer)) {
        VirtualFilePointerListener listener=pointer.getListener();
        if (listener != null) {
          ArrayList<VirtualFilePointer> list=listenerToArrayOfPointers.get(listener);
          if (list == null) {
            list=new ArrayList<VirtualFilePointer>();
            listenerToArrayOfPointers.put(listener,list);
          }
          list.add(pointer);
        }
      }
    }
  }
  return listenerToArrayOfPointers;
}
