{
  final HashMap<VirtualFilePointerListener,ArrayList<VirtualFilePointer>> listenerToArrayOfPointers=new HashMap<VirtualFilePointerListener,ArrayList<VirtualFilePointer>>();
synchronized (this) {
    for (    Map.Entry<VirtualFilePointerListener,THashSet<VirtualFilePointer>> entry : myListenerToPointersMap.entrySet()) {
      ArrayList<VirtualFilePointer> list=null;
      for (      VirtualFilePointer _pointer : entry.getValue()) {
        VirtualFilePointerImpl pointer=(VirtualFilePointerImpl)_pointer;
        if (listenerNotifier.processPointer(pointer)) {
          if (list == null) {
            list=new ArrayList<VirtualFilePointer>();
            listenerToArrayOfPointers.put(entry.getKey(),list);
          }
          list.add(pointer);
        }
      }
    }
  }
  iterateMap(listenerToArrayOfPointers,listenerNotifier);
  return listenerToArrayOfPointers;
}
