{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final MavenProjectsManager projectsManager=project != null ? project.getComponent(MavenProjectsManager.class) : null;
  final List<String> profiles=e.getData(MavenDataKeys.MAVEN_PROFILES_KEY);
  final boolean enabled=projectsManager != null && profiles != null && isEnabled(projectsManager,profiles);
  e.getPresentation().setEnabled(enabled);
  e.getPresentation().setText((enabled && projectsManager.getActiveProfiles().contains(profiles.get(0))) ? StateBundle.message("maven.profile.deactivate") : StateBundle.message("maven.profile.activate"));
}
