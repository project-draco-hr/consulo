{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final MavenProjectsManager projectsManager=project != null ? project.getComponent(MavenProjectsManager.class) : null;
  final VirtualFile file=e.getData(PlatformDataKeys.VIRTUAL_FILE);
  final List<String> profiles=e.getData(MavenDataKeys.MAVEN_PROFILES_KEY);
  final boolean enabled=projectsManager != null && file != null && profiles != null && isEnabled(projectsManager,file,profiles);
  e.getPresentation().setEnabled(enabled);
  e.getPresentation().setText((enabled && projectsManager.getProfiles(file).contains(profiles.get(0))) ? StateBundle.message("maven.profile.deactivate") : StateBundle.message("maven.profile.activate"));
}
