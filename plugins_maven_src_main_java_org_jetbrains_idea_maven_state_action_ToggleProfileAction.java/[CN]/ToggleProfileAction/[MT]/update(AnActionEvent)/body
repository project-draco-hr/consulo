{
  final Project project=e.getData(DataKeys.PROJECT);
  final MavenProjectsState projectsState=project != null ? project.getComponent(MavenProjectsState.class) : null;
  final VirtualFile file=e.getData(DataKeys.VIRTUAL_FILE);
  final List<String> profiles=e.getData(MavenDataKeys.MAVEN_PROFILES_KEY);
  final boolean enabled=projectsState != null && file != null && profiles != null && isEnabled(projectsState,file,profiles);
  e.getPresentation().setEnabled(enabled);
  e.getPresentation().setText((enabled && projectsState.getProfiles(file).contains(profiles.get(0))) ? StateBundle.message("maven.profile.deactivate") : StateBundle.message("maven.profile.activate"));
}
