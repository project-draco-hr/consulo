{
  PsiLanguageInjectionHost.Shred[] shreds;
synchronized (myLock) {
    shreds=myShreds.toArray(new PsiLanguageInjectionHost.Shred[myShreds.size()]);
  }
  for (  PsiLanguageInjectionHost.Shred shred : shreds) {
    if (!shred.isValid())     return false;
  }
  return true;
}
