{
  if (line < myPrefixLineCount) {
synchronized (myLock) {
      return myDelegate.getLineNumber(myShreds.get(0).getHostRangeMarker().getStartOffset());
    }
  }
  int lineCount=getLineCount();
  if (line > lineCount - mySuffixLineCount) {
    return lineCount;
  }
  int offset=getLineStartOffset(line);
  int hostOffset=injectedToHost(offset);
  return myDelegate.getLineNumber(hostOffset);
}
