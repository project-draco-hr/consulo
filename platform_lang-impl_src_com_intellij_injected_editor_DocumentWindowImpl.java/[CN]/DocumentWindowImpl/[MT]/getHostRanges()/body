{
synchronized (myLock) {
    List<Segment> markers=new ArrayList<Segment>(myShreds.size());
    for (    PsiLanguageInjectionHost.Shred shred : myShreds) {
      Segment hostMarker=shred.getHostRangeMarker();
      if (hostMarker != null) {
        markers.add(hostMarker);
      }
    }
    return markers.isEmpty() ? Segment.EMPTY_ARRAY : markers.toArray(new Segment[markers.size()]);
  }
}
