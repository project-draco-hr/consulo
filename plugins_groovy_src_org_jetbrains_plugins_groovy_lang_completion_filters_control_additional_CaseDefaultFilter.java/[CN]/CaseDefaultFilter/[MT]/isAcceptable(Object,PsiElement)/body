{
  if (context.getParent() instanceof GrReferenceExpression && context.getParent().getParent() instanceof GrCaseBlock) {
    return true;
  }
  if (GroovyCompletionUtil.nearestLeftSibling(context) instanceof GrSwitchStatement && ((GrSwitchStatement)GroovyCompletionUtil.nearestLeftSibling(context)).getCaseBlock() != null) {
    GrCaseBlock block=((GrSwitchStatement)GroovyCompletionUtil.nearestLeftSibling(context)).getCaseBlock();
    if (block.getLastChild() instanceof PsiErrorElement) {
      return true;
    }
  }
  PsiElement elem=GroovyCompletionUtil.nearestLeftSibling(context.getParent());
  if (elem instanceof GrSwitchStatement && ((GrSwitchStatement)elem).getCaseBlock() != null) {
    GrCaseBlock block=((GrSwitchStatement)elem).getCaseBlock();
    if (block.getLastChild() instanceof PsiErrorElement) {
      return true;
    }
  }
  final PsiElement leaf=GroovyCompletionUtil.getLeafByOffset(context.getTextRange().getStartOffset() - 1,context);
  if (leaf != null) {
    PsiElement parent=leaf.getParent();
    if (parent instanceof GrCaseBlock) {
      return true;
    }
  }
  return false;
}
