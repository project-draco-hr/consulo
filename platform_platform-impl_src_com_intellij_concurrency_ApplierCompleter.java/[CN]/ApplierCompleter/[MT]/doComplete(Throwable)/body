{
  ApplierCompleter<T> a=this;
  ApplierCompleter<T> child=a;
  while (true) {
    Throwable oldThrowable;
    Throwable newThrowable;
    do {
      oldThrowable=a.throwable;
      newThrowable=moreImportant(oldThrowable,throwable);
    }
 while (oldThrowable != newThrowable && !throwableUpdater.compareAndSet(a,oldThrowable,newThrowable));
    throwable=newThrowable;
    if (a.getPendingCount() == 0) {
      a.onCompletion(child);
      child=a;
      a=(ApplierCompleter)a.getCompleter();
      if (a == null) {
        child.quietlyComplete();
        break;
      }
    }
 else     if (a.decrementPendingCountUnlessZero() != 0) {
      break;
    }
  }
}
