{
  Runnable toRun=runInReadAction ? new Runnable(){
    @Override public void run(){
      if (!ApplicationManagerEx.getApplicationEx().tryRunReadAction(process)) {
        failedSubTasks=new ArrayList<ApplierCompleter<T>>();
        failedSubTasks.add(ApplierCompleter.this);
        doComplete(throwable);
      }
    }
  }
 : process;
  ProgressIndicator existing=ProgressManager.getInstance().getProgressIndicator();
  if (existing == progressIndicator) {
    toRun.run();
  }
 else {
    ProgressManager.getInstance().executeProcessUnderProgress(toRun,progressIndicator);
  }
}
