{
  myVcsLocation.mkdirs();
  myVcsLocation.mkdir();
  myImplementation._init(myVcsLocation);
  ProgressIndicator progress=getProgress();
  if (progress != null) {
    progress.pushState();
    progress.setText(LocalVcsBundle.message("progress.text.initializing.local.history"));
  }
  try {
    load();
  }
 catch (  Exception e) {
    if (recreateAfterError) {
      clearAndRecreateLocation();
    }
 else {
      throw e;
    }
  }
  if (progress != null) {
    progress.popState();
  }
  myIsLocked=true;
  myImplementation.markSourcesAsCurrentInInitialization();
}
