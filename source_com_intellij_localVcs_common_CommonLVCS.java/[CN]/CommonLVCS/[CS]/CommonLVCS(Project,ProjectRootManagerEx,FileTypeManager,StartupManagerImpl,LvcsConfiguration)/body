{
  myProject=project;
  myFileIndex=projectRootManager.getFileIndex();
  myFileTypeManager=fileTypeManager;
  myConfiguration=configuration;
  myVcsLocation=findProjectVcsLocation();
  myImplementation=new OldLvcsImplemetation(project,this);
  startupManagerEx.registerPreStartupActivity(new Runnable(){
    public void run(){
      runStartupActivity();
    }
  }
);
  myRefreshRootsOperation=new DelayedSyncOperation(myProject,this,LocalVcsBundle.message("operation.name.refreshing.roots"));
  startupManagerEx.getFileSystemSynchronizer().registerCacheUpdater(myRefreshRootsOperation);
  projectRootManager.registerChangeUpdater(myRefreshRootsOperation);
  myTracker=new LvcsFileTracker(this);
  registerAll();
}
