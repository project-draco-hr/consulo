{
  myModified=true;
  SdkConfigurationUtil.selectSdkHome(type,new Consumer<String>(){
    @Override public void consume(    final String home){
      String newSdkName=SdkConfigurationUtil.createUniqueSdkName(type,home,myProjectSdks.values());
      final ProjectJdkImpl newJdk=new ProjectJdkImpl(newSdkName,type);
      newJdk.setHomePath(home);
      if (!type.setupSdkPaths(newJdk,ProjectSdksModel.this))       return;
      if (newJdk.getVersionString() == null) {
        Messages.showMessageDialog(ProjectBundle.message("sdk.java.corrupt.error",home),ProjectBundle.message("sdk.java.corrupt.title"),Messages.getErrorIcon());
      }
      doAdd(newJdk,updateTree);
    }
  }
);
}
