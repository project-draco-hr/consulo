{
  String[] errorString=new String[1];
  if (!canApply(errorString,configurable,addedOnly)) {
    throw new ConfigurationException(errorString[0]);
  }
  final Sdk[] allFromTable=SdkTable.getInstance().getAllSdks();
  final ArrayList<Sdk> itemsInTable=new ArrayList<Sdk>();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final SdkTable sdkTable=SdkTable.getInstance();
      for (      final Sdk tableItem : allFromTable) {
        if (mySdks.containsKey(tableItem)) {
          itemsInTable.add(tableItem);
        }
 else {
          sdkTable.removeSdk(tableItem);
        }
      }
    }
  }
);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final SdkTable sdkTable=SdkTable.getInstance();
      for (      Sdk originalSdk : itemsInTable) {
        final Sdk modifiedSdk=mySdks.get(originalSdk);
        LOG.assertTrue(modifiedSdk != null);
        sdkTable.updateSdk(originalSdk,modifiedSdk);
      }
      final Sdk[] allSdks=sdkTable.getAllSdks();
      for (      final Sdk sdk : mySdks.keySet()) {
        LOG.assertTrue(sdk != null);
        if (ArrayUtilRt.find(allSdks,sdk) == -1) {
          sdkTable.addSdk(sdk);
        }
      }
    }
  }
);
  myModified=false;
}
