{
  String[] errorString=new String[1];
  if (!canApply(errorString,configurable,addedOnly)) {
    throw new ConfigurationException(errorString[0]);
  }
  final Sdk[] allFromTable=SdkTable.getInstance().getAllSdks();
  final ArrayList<Sdk> itemsInTable=new ArrayList<Sdk>();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final SdkTable jdkTable=SdkTable.getInstance();
      for (      final Sdk tableItem : allFromTable) {
        if (mySdks.containsKey(tableItem)) {
          itemsInTable.add(tableItem);
        }
 else {
          jdkTable.removeSdk(tableItem);
        }
      }
    }
  }
);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final SdkTable jdkTable=SdkTable.getInstance();
      for (      Sdk originalJdk : itemsInTable) {
        final Sdk modifiedJdk=mySdks.get(originalJdk);
        LOG.assertTrue(modifiedJdk != null);
        jdkTable.updateSdk(originalJdk,modifiedJdk);
      }
      final Sdk[] allJdks=jdkTable.getAllSdks();
      for (      final Sdk projectJdk : mySdks.keySet()) {
        LOG.assertTrue(projectJdk != null);
        if (ArrayUtilRt.find(allJdks,projectJdk) == -1) {
          jdkTable.addSdk(projectJdk);
        }
      }
    }
  }
);
  myModified=false;
}
