{
  myModified=true;
  final String home=SdkConfigurationUtil.selectSdkHome(parent,type);
  if (home == null) {
    return;
  }
  String newSdkName=SdkConfigurationUtil.createUniqueSdkName(type,home,myProjectSdks.values());
  final ProjectJdkImpl newJdk=new ProjectJdkImpl(newSdkName,type);
  newJdk.setHomePath(home);
  if (!type.setupSdkPaths(newJdk,this))   return;
  if (newJdk.getVersionString() == null) {
    Messages.showMessageDialog(ProjectBundle.message("sdk.java.corrupt.error",home),ProjectBundle.message("sdk.java.corrupt.title"),Messages.getErrorIcon());
  }
  myProjectSdks.put(newJdk,newJdk);
  updateTree.consume(newJdk);
  mySdkEventsDispatcher.getMulticaster().sdkAdded(newJdk);
}
