{
  ContentManager contentManager=ContentManagerUtil.getContentManagerFromContext(e.getDataContext(),true);
  boolean processed=false;
  if (contentManager != null && contentManager.canCloseContents()) {
    final Content selectedContent=contentManager.getSelectedContent();
    if (selectedContent != null && selectedContent.isCloseable()) {
      contentManager.removeContent(selectedContent,true);
      processed=true;
    }
  }
  if (!processed && contentManager != null) {
    final DataContext context=DataManager.getInstance().getDataContext(contentManager.getComponent());
    final ToolWindow tw=PlatformDataKeys.TOOL_WINDOW.getData(context);
    if (tw != null) {
      tw.hide(null);
    }
  }
}
