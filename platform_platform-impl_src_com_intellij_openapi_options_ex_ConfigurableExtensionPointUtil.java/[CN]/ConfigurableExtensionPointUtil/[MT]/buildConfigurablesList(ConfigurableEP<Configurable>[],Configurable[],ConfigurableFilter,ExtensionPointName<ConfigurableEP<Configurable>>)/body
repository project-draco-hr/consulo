{
  List<Configurable> result=new ArrayList<Configurable>();
  PluginDescriptor descriptor=null;
  for (  ConfigurableEP<Configurable> ep : extensions) {
    final Configurable configurable=ConfigurableWrapper.wrapConfigurable(ep);
    ContainerUtil.addIfNotNull(configurable,result);
  }
  ContainerUtil.addAll(result,components);
  final Iterator<Configurable> iterator=result.iterator();
  while (iterator.hasNext()) {
    Configurable each=iterator.next();
    if (each instanceof Configurable.Assistant || each instanceof OptionalConfigurable && !((OptionalConfigurable)each).needDisplay() || filter != null && !filter.isIncluded(each)) {
      iterator.remove();
    }
  }
  return result;
}
