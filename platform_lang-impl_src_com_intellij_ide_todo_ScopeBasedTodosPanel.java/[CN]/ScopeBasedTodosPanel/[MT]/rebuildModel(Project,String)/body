{
  final ArrayList<ScopeWrapper> scopes=new ArrayList<ScopeWrapper>();
  final DependencyValidationManager manager=DependencyValidationManager.getInstance(project);
  scopes.add(new ScopeWrapper("Predefined Scopes",true));
  List<NamedScope> predefinedScopesList=manager.getPredefinedScopes();
  NamedScope[] predefinedScopes=predefinedScopesList.toArray(new NamedScope[predefinedScopesList.size()]);
  predefinedScopes=NonProjectFilesScope.removeFromList(predefinedScopes);
  for (  NamedScope predefinedScope : predefinedScopes) {
    scopes.add(new ScopeWrapper(predefinedScope,false));
  }
  collectEditableScopes(scopes,manager,"Custom Project Scopes");
  collectEditableScopes(scopes,NamedScopeManager.getInstance(project),"Custom Local Scopes");
  myScopes.setModel(new DefaultComboBoxModel(scopes.toArray(new ScopeWrapper[scopes.size()])));
  if (scopeName != null) {
    for (    ScopeWrapper scope : scopes) {
      if (Comparing.strEqual(scopeName,scope.getName())) {
        myScopes.setSelectedItem(scope);
        break;
      }
    }
  }
}
