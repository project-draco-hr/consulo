{
  final PsiElement parent=getParent();
  List<String> known=Collections.emptyList();
  BidirectionalMap<String,String> map=myNamespaceMap.getOrCache();
  if (map != null) {
    known=new ArrayList<String>(map.values());
  }
  if (parent instanceof XmlTag) {
    if (known.isEmpty())     return ((XmlTag)parent).knownNamespaces();
    known.addAll(Arrays.asList(((XmlTag)parent).knownNamespaces()));
  }
 else   if (PsiUtil.isInJspFile(getContainingFile())) {
    final XmlTag rootTag=PsiUtil.getJspFile(getContainingFile()).getDocument().getRootTag();
    if (rootTag != this)     known.addAll(Arrays.asList(rootTag.knownNamespaces()));
  }
  return known.toArray(new String[known.size()]);
}
