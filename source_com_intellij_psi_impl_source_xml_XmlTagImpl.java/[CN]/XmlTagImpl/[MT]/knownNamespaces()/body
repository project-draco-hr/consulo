{
  final PsiElement parent=getParent();
  initNamespaceMaps(parent);
  List<String> known=Collections.EMPTY_LIST;
  if (myNamespaceMap != null) {
    known=new ArrayList<String>(myNamespaceMap.values());
  }
  if (parent instanceof XmlTag) {
    if (known.isEmpty())     return ((XmlTag)parent).knownNamespaces();
    known.addAll(Arrays.asList(((XmlTag)parent).knownNamespaces()));
  }
 else   if (getContainingFile() instanceof JspFile) {
    final XmlTag rootTag=((JspFile)getContainingFile()).getDocument().getRootTag();
    if (rootTag != this)     known.addAll(Arrays.asList((rootTag.knownNamespaces())));
  }
  return known.toArray(new String[known.size()]);
}
