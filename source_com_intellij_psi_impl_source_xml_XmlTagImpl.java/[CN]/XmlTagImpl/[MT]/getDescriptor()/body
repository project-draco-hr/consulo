{
  final XmlNSDescriptor nsDescriptor=getNSDescriptor(getNamespace(),false);
  XmlElementDescriptor elementDescriptor=(nsDescriptor != null) ? nsDescriptor.getElementDescriptor(this) : null;
  if (elementDescriptor == null) {
    final String type=getAttributeValue("type",XmlUtil.XML_SCHEMA_INSTANCE_URI);
    if (type != null) {
      final String namespaceByPrefix=XmlUtil.findNamespaceByPrefix(XmlUtil.findPrefixByQualifiedName(type),this);
      final XmlNSDescriptor typeDecr=getNSDescriptor(namespaceByPrefix,true);
      if (typeDecr instanceof XmlNSDescriptorImpl) {
        final XmlNSDescriptorImpl schemaDescriptor=((XmlNSDescriptorImpl)typeDecr);
        final XmlElementDescriptor descriptorByType=schemaDescriptor.getDescriptorByType(type,this);
        elementDescriptor=descriptorByType;
      }
    }
  }
  return elementDescriptor;
}
