{
  XmlNSDescriptor descriptor;
  if (myNSDescriptorsMap == null)   myNSDescriptorsMap=new HashMap<String,CachedValue<XmlNSDescriptor>>();
  final XmlFile containingFile=XmlUtil.getContainingFile(XmlTagImpl.this);
  XmlFile file=XmlUtil.findXmlFile(containingFile,ExternalResourceManager.getInstance().getResourceLocation(fileLocation));
  if (file == null && containingFile instanceof JspFile) {
    file=TldUtil.getTldFileByUri(namespace,(JspFile)containingFile);
  }
  if (file != null) {
    descriptor=(XmlNSDescriptor)file.getDocument().getMetaData();
    if (descriptor != null) {
      final XmlFile file1=file;
      myNSDescriptorsMap.put(namespace,getManager().getCachedValuesManager().createCachedValue(new CachedValueProvider<XmlNSDescriptor>(){
        public CachedValueProvider.Result<XmlNSDescriptor> compute(){
          return new Result<XmlNSDescriptor>((XmlNSDescriptor)file1.getDocument().getMetaData(),new Object[]{file1});
        }
      }
,false));
      return true;
    }
  }
  return true;
}
