{
  final PairConsumer<FileType,String> consumer=new PairConsumer<FileType,String>(){
    public void consume(    final FileType fileType,    final String extensions){
      myStandardFileTypes.put(fileType.getName(),Pair.create(fileType,extensions));
      registerFileTypeWithoutNotification(fileType,parse(extensions));
    }
  }
;
  for (  final FileTypeFactory factory : Extensions.getExtensions(FileTypeFactory.FILE_TYPE_FACTORY_EP)) {
    factory.createFileTypes(consumer);
  }
  if (loadAllFileTypes()) {
    restoreStandardFileExtensions();
  }
  myMessageBus=bus;
}
