{
  File fileTypesDir=getFileTypesDir(true);
  if (fileTypesDir == null)   return new File[0];
  File[] files=fileTypesDir.listFiles(new FileFilter(){
    public boolean accept(    File file){
      return !file.isDirectory() && file.getName().toLowerCase().endsWith(".xml");
    }
  }
);
  if (files == null) {
    LOG.error("Cannot read directory: " + fileTypesDir.getAbsolutePath());
    return new File[0];
  }
  ArrayList<File> fileList=new ArrayList<File>();
  for (int i=0; i < files.length; i++) {
    File file=files[i];
    if (!file.isDirectory()) {
      fileList.add(file);
    }
  }
  return fileList.toArray(new File[fileList.size()]);
}
