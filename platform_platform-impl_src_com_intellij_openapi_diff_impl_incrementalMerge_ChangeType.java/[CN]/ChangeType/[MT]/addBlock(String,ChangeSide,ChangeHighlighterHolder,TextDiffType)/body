{
  int length=text.length();
  int start=changeSide.getStart();
  int end=start + length;
  RangeHighlighter highlighter=markup.addRangeHighlighter(start,end,ChangeType.LAYER,diffType,HighlighterTargetArea.EXACT_RANGE);
  highlighter.setLineSeparatorPlacement(SeparatorPlacement.TOP);
  highlighter.setLineMarkerRenderer(LineRenderer.top());
  highlighter.setLineSeparatorColor(Color.GRAY);
  if (text.charAt(length - 1) == '\n') {
    end--;
  }
  highlighter=markup.addRangeHighlighter(start,end,LAYER,TextDiffType.NONE,HighlighterTargetArea.EXACT_RANGE);
  highlighter.setLineSeparatorPlacement(SeparatorPlacement.BOTTOM);
  highlighter.setLineSeparatorColor(Color.GRAY);
  highlighter.setLineMarkerRenderer(LineRenderer.bottom());
  return highlighter;
}
