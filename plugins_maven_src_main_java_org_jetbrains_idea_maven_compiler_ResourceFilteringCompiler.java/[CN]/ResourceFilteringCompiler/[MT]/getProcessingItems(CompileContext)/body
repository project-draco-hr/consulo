{
  MavenProjectsManager mavenProjectManager=MavenProjectsManager.getInstance(context.getProject());
  if (!mavenProjectManager.isMavenizedProject())   return ProcessingItem.EMPTY_ARRAY;
  CompilerConfiguration config=CompilerConfiguration.getInstance(context.getProject());
  List<ProcessingItem> result=new ArrayList<ProcessingItem>();
  for (  Module eachModule : context.getCompileScope().getAffectedModules()) {
    MavenProjectModel mavenProject=mavenProjectManager.findProject(eachModule);
    if (mavenProject == null)     continue;
    List<VirtualFile> outputDirs=Arrays.asList(context.getModuleOutputDirectory(eachModule),context.getModuleOutputDirectoryForTests(eachModule));
    for (    VirtualFile eachSourceRoot : context.getSourceRoots(eachModule)) {
      collectProcessingItems(eachModule,eachSourceRoot,eachSourceRoot,outputDirs,config,mavenProject.isFiltered(eachSourceRoot),result,context.getProgressIndicator());
    }
  }
  return result.toArray(new ProcessingItem[result.size()]);
}
