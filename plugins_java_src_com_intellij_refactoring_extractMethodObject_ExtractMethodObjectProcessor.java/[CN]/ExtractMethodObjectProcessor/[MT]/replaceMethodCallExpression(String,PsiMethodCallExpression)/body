{
  @NonNls final String staticqualifier=getMethod().hasModifierProperty(PsiModifier.STATIC) && notHasGeneratedFields() ? getInnerClassName() : null;
  @NonNls String newReplacement;
  final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
  final PsiExpressionList argumentList=methodCallExpression.getArgumentList();
  if (staticqualifier != null) {
    newReplacement=argumentList.getExpressions().length > 0 ? "new " + staticqualifier + inferredTypeArguments+ argumentList.getText()+ "." : staticqualifier + ".";
  }
 else {
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    final String qualifier=qualifierExpression != null ? qualifierExpression.getText() + "." : "";
    newReplacement=qualifier + "new " + getInnerClassName()+ inferredTypeArguments+ argumentList.getText()+ ".";
  }
  return (PsiMethodCallExpression)methodCallExpression.replace(myElementFactory.createExpressionFromText(newReplacement + "invoke()",null));
}
