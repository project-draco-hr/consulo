{
  if (filePath != null) {
    try {
      String canonicalPath=new File(filePath).getCanonicalPath();
      if (canonicalPath != null) {
        filePath=canonicalPath;
      }
    }
 catch (    IOException e) {
    }
  }
  ProjectImpl project=createProject(filePath,false,isDummy,ApplicationManager.getApplication().isUnitTestMode());
  if (useDefaultProjectSettings) {
    ProjectImpl defaultProject=(ProjectImpl)getDefaultProject();
    Element element=defaultProject.saveToXml(null,defaultProject.getProjectFile());
    try {
      project.loadFromXml(element,filePath);
    }
 catch (    Exception e) {
      LOG.error(e);
    }
  }
  project.init();
  return project;
}
