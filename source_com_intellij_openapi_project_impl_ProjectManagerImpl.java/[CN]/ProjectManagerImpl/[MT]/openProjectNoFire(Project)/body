{
  if (myOpenProjects.contains(project))   return false;
  if (!ApplicationManager.getApplication().isUnitTestMode() && !((ProjectImpl)project).getStateStore().checkVersion())   return false;
  myCountOfProjectsBeingOpen++;
  myOpenProjects.add(project);
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      ((StartupManagerImpl)StartupManager.getInstance(project)).runStartupActivities();
    }
  }
,ProjectBundle.message("project.load.progress"),false,project);
  ((StartupManagerImpl)StartupManager.getInstance(project)).runPostStartupActivities();
  myCountOfProjectsBeingOpen--;
  return true;
}
