{
  final List components=new ArrayList(3);
  final PsiJavaToken forToken=(PsiJavaToken)location;
  final PsiForStatement forStatement=(PsiForStatement)forToken.getParent();
  if (!hasInitializer(forStatement)) {
    components.add("initializer");
  }
  if (!hasCondition(forStatement)) {
    components.add("condition");
  }
  if (!hasUpdate(forStatement)) {
    components.add("update");
  }
  final String missingComponents;
  if (components.size() == 1) {
    missingComponents=(String)components.get(0);
  }
 else   if (components.size() == 2) {
    missingComponents=components.get(0) + " and " + components.get(1);
  }
 else {
    missingComponents=components.get(0) + ", " + components.get(1)+ " and "+ components.get(2);
  }
  return "#ref statement lacks " + missingComponents + " #loc";
}
