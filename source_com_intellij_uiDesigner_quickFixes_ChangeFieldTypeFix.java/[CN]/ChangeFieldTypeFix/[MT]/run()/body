{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      CommandProcessor.getInstance().executeCommand(myField.getProject(),new Runnable(){
        public void run(){
          try {
            final PsiManager manager=myField.getManager();
            myField.getTypeElement().replace(manager.getElementFactory().createTypeElement(myNewType));
          }
 catch (          final IncorrectOperationException e) {
            ApplicationManager.getApplication().invokeLater(new Runnable(){
              public void run(){
                Messages.showErrorDialog(myEditor,"Cannot change field '" + myField.getName() + "' type.\nReason: "+ e.getMessage(),"Error");
              }
            }
);
          }
        }
      }
,getName(),null);
    }
  }
);
}
