{
  final List<VirtualFile> addedFiles=new ArrayList<VirtualFile>(myAddedFiles);
  final Map<VirtualFile,VirtualFile> copyFromMap=new HashMap<VirtualFile,VirtualFile>(myCopyFromMap);
  myAddedFiles.clear();
  myCopyFromMap.clear();
  if (myAddOption.getValue() == VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY)   return;
  if (myAddOption.getValue() == VcsShowConfirmationOption.Value.DO_ACTION_SILENTLY) {
    performAdding(addedFiles,copyFromMap);
  }
 else {
    final AbstractVcsHelper helper=AbstractVcsHelper.getInstance(myProject);
    Collection<VirtualFile> filesToProcess=helper.selectFilesToProcess(addedFiles,getAddTitle(),null,getSingleFileAddTitle(),getSingleFileAddPromptTemplate(),myAddOption);
    if (filesToProcess != null) {
      performAdding(new ArrayList<VirtualFile>(filesToProcess),copyFromMap);
    }
  }
}
