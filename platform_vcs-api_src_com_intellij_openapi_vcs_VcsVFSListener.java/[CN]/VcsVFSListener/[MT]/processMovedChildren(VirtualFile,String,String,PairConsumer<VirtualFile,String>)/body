{
  if (file.isDirectory()) {
    VirtualFile[] children=file.getChildren();
    for (    VirtualFile child : children) {
      processMovedChildren(child,newParentPath + "/" + newName,child.getName(),consumer);
    }
  }
 else {
    consumer.consume(file,newParentPath + "/" + newName);
  }
}
