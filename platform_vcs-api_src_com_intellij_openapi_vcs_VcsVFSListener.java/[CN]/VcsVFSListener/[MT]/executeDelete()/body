{
  final List<FilePath> filesToDelete=new ArrayList<>(myDeletedWithoutConfirmFiles);
  final List<FilePath> deletedFiles=new ArrayList<>(myDeletedFiles);
  myDeletedWithoutConfirmFiles.clear();
  myDeletedFiles.clear();
  for (Iterator<FilePath> iterator=filesToDelete.iterator(); iterator.hasNext(); ) {
    FilePath file=iterator.next();
    if (myVcsFileListenerContextHelper.isDeletionIgnored(file)) {
      iterator.remove();
    }
  }
  for (Iterator<FilePath> iterator=deletedFiles.iterator(); iterator.hasNext(); ) {
    FilePath file=iterator.next();
    if (myVcsFileListenerContextHelper.isDeletionIgnored(file)) {
      iterator.remove();
    }
  }
  if (deletedFiles.isEmpty() && filesToDelete.isEmpty())   return;
  if (myRemoveOption.getValue() != VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY) {
    if (myRemoveOption.getValue() == VcsShowConfirmationOption.Value.DO_ACTION_SILENTLY || deletedFiles.isEmpty()) {
      filesToDelete.addAll(deletedFiles);
    }
 else {
      Collection<FilePath> filePaths=selectFilePathsToDelete(deletedFiles);
      if (filePaths != null) {
        filesToDelete.addAll(filePaths);
      }
    }
  }
  performDeletion(filesToDelete);
}
