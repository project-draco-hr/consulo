{
  if (isDirectoryVersioningSupported()) {
    processMovedFile(file,newParentPath,newName);
    return;
  }
  processMovedChildren(file,newParentPath,newName,new PairConsumer<VirtualFile,String>(){
    @Override public void consume(    VirtualFile file,    String newPath){
      processMovedFile(file,StringUtil.getPackageName(newPath,'/'),StringUtil.getShortName(newPath,'/'));
    }
  }
);
}
