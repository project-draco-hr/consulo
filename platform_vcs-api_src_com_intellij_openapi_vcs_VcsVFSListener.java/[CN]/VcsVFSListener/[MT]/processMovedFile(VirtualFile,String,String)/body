{
  final FileStatus status=FileStatusManager.getInstance(myProject).getStatus(file);
  if (status == FileStatus.IGNORED) {
    if (file.getParent() != null) {
      myDirtyFiles.add(file.getParent());
      myDirtyFiles.add(file);
    }
  }
  if (!(filterOutUnknownFiles() && status == FileStatus.UNKNOWN) && status != FileStatus.IGNORED) {
    final String newPath=newParentPath + "/" + newName;
    boolean foundExistingInfo=false;
    for (    MovedFileInfo info : myMovedFiles) {
      if (Comparing.equal(info.myFile,file)) {
        info.myNewPath=newPath;
        foundExistingInfo=true;
        break;
      }
    }
    if (!foundExistingInfo) {
      myMovedFiles.add(new MovedFileInfo(file,newPath));
    }
  }
}
