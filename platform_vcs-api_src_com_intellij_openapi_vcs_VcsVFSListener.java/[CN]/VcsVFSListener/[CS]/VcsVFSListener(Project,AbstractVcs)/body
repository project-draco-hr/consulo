{
  myProject=project;
  myVcs=vcs;
  myChangeListManager=ChangeListManager.getInstance(project);
  myDirtyScopeManager=VcsDirtyScopeManager.getInstance(myProject);
  final MyVirtualFileAdapter myVFSListener=new MyVirtualFileAdapter();
  final MyCommandAdapter myCommandListener=new MyCommandAdapter();
  final ProjectLevelVcsManager vcsManager=ProjectLevelVcsManager.getInstance(project);
  myAddOption=vcsManager.getStandardConfirmation(VcsConfiguration.StandardConfirmation.ADD,vcs);
  myRemoveOption=vcsManager.getStandardConfirmation(VcsConfiguration.StandardConfirmation.REMOVE,vcs);
  VirtualFileManager.getInstance().addVirtualFileListener(myVFSListener,this);
  CommandProcessor.getInstance().addCommandListener(myCommandListener,this);
}
