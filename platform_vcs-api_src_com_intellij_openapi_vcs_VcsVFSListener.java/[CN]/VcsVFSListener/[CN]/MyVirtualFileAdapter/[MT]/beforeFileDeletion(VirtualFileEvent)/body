{
  final VirtualFile file=event.getFile();
  if (isEventIgnored(event,true)) {
    return;
  }
  if (!myChangeListManager.isIgnoredFile(file)) {
    addFileToDelete(file);
    return;
  }
  if (event.getFile().isDirectory()) {
    final List<VirtualFile> list=new LinkedList<VirtualFile>();
    VcsUtil.collectFiles(file,list,true,isDirectoryVersioningSupported());
    for (    VirtualFile child : list) {
      if (!myChangeListManager.isIgnoredFile(child)) {
        addFileToDelete(child);
      }
    }
  }
}
