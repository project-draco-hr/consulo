{
  myFrame=frame;
  try {
    myLocation=frame.location();
    final ObjectReference thisObject=frame.thisObject();
    myObjectId=thisObject != null ? thisObject.uniqueID() : null;
    myMethodOccurrence=tracker.getMethodOccurrence(myLocation.method());
    myIsSynthetic=DebuggerUtils.isSynthetic(myMethodOccurrence.getMethod());
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      public void run(){
        final SourcePosition position=ContextUtil.getSourcePosition(StackFrameDescriptorImpl.this);
        final PsiFile file=position != null ? position.getFile() : null;
        if (file == null) {
          myIsInLibraryContent=true;
        }
 else {
          final ProjectFileIndex projectFileIndex=ProjectRootManager.getInstance(getDebugProcess().getProject()).getFileIndex();
          final VirtualFile vFile=file.getVirtualFile();
          myIsInLibraryContent=vFile != null && (projectFileIndex.isInLibraryClasses(vFile) || projectFileIndex.isInLibrarySource(vFile));
        }
      }
    }
);
  }
 catch (  InternalException e) {
    LOG.info(e);
    myLocation=null;
    myMethodOccurrence=tracker.getMethodOccurrence(null);
    myIsSynthetic=false;
    myIsInLibraryContent=false;
  }
catch (  EvaluateException e) {
    myLocation=null;
    myMethodOccurrence=tracker.getMethodOccurrence(null);
    myIsSynthetic=false;
    myIsInLibraryContent=false;
  }
}
