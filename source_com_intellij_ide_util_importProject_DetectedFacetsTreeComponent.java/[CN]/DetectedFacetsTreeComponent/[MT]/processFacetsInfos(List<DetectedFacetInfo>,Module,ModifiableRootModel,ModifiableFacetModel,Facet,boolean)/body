{
  for (  DetectedFacetInfo detectedFacetInfo : facets) {
    boolean createFacet=createFacets && detectedFacetInfo.isChecked();
    FacetInfo facetInfo=detectedFacetInfo.myFacetInfo;
    FacetType type=facetInfo.getFacetType();
    Facet facet=null;
    if (createFacet) {
      facet=FacetManagerImpl.createFacet(type,module,facetInfo.getName(),facetInfo.getConfiguration(),underlyingFacet);
      facetModel.addFacet(facet);
    }
 else {
      FacetAutodetectingManager.getInstance(module.getProject()).disableAutodetectionInFiles(type,module,detectedFacetInfo.myFile.getUrl());
    }
    processFacetsInfos(detectedFacetInfo.myChildren,module,rootModel,facetModel,facet,createFacet);
  }
}
