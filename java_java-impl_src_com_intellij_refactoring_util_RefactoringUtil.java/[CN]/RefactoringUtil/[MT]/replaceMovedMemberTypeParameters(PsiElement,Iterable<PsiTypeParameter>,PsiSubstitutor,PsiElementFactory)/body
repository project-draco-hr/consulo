{
  for (  PsiTypeParameter parameter : parametersIterable) {
    PsiType substitutedType=substitutor.substitute(parameter);
    if (substitutedType == null) {
      substitutedType=TypeConversionUtil.erasure(factory.createType(parameter));
    }
    for (    PsiReference reference : ReferencesSearch.search(parameter,new LocalSearchScope(member))) {
      final PsiElement element=reference.getElement();
      final PsiElement parent=element.getParent();
      if (parent instanceof PsiTypeElement) {
        parent.replace(factory.createTypeElement(substitutedType));
      }
 else       if (element instanceof PsiJavaCodeReferenceElement && substitutedType instanceof PsiClassType) {
        element.replace(factory.createReferenceElementByType((PsiClassType)substitutedType));
      }
    }
  }
}
