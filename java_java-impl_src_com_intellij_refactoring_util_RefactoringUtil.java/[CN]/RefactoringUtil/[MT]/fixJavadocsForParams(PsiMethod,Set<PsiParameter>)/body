{
  final PsiDocComment docComment=method.getDocComment();
  if (docComment == null)   return;
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  final PsiDocTag[] paramTags=docComment.findTagsByName("param");
  if (parameters.length > 0 && newParameters.size() < parameters.length && paramTags.length == 0)   return;
  Map<PsiParameter,PsiDocTag> tagForParam=new HashMap<PsiParameter,PsiDocTag>();
  for (  PsiParameter parameter : parameters) {
    boolean found=false;
    for (    PsiDocTag paramTag : paramTags) {
      if (parameter.getName().equals(getNameOfReferencedParameter(paramTag))) {
        tagForParam.put(parameter,paramTag);
        found=true;
        break;
      }
    }
    if (!found && !newParameters.contains(parameter)) {
      tagForParam.put(parameter,null);
    }
  }
  List<PsiDocTag> newTags=new ArrayList<PsiDocTag>();
  for (  PsiParameter parameter : parameters) {
    if (tagForParam.containsKey(parameter)) {
      final PsiDocTag psiDocTag=tagForParam.get(parameter);
      if (psiDocTag != null) {
        newTags.add((PsiDocTag)psiDocTag.copy());
      }
    }
 else {
      newTags.add(JavaPsiFacade.getInstance(method.getProject()).getElementFactory().createParamTag(parameter.getName(),""));
    }
  }
  PsiDocTag anchor=paramTags.length > 0 ? paramTags[paramTags.length - 1] : null;
  for (  PsiDocTag psiDocTag : newTags) {
    anchor=(PsiDocTag)docComment.addAfter(psiDocTag,anchor);
  }
  for (  PsiDocTag paramTag : paramTags) {
    paramTag.delete();
  }
}
