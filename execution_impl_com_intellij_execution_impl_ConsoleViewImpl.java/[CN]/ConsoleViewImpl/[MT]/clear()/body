{
  assertIsDispatchThread();
synchronized (LOCK) {
    myContentSize=0;
    if (USE_CYCLIC_BUFFER) {
      myDeferredOutput=new StringBuffer(Math.min(myDeferredOutput.length(),CYCLIC_BUFFER_SIZE));
    }
 else {
      myDeferredOutput=new StringBuffer();
    }
    myDeferredUserInput=new StringBuffer();
    if (myEditor != null) {
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          myHyperlinks.clear();
          myEditor.getMarkupModel().removeAllHighlighters();
          myTokens.clear();
          CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
            public void run(){
              myEditor.getDocument().deleteString(0,myEditor.getDocument().getTextLength());
            }
          }
,null,myEditor.getDocument());
        }
      }
);
    }
  }
}
