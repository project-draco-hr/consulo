{
  final EditorFactory editorFactory=EditorFactory.getInstance();
  final Document editorDocument=editorFactory.createDocument("");
  final int bufferSize=USE_CYCLIC_BUFFER ? CYCLIC_BUFFER_SIZE : 0;
  editorDocument.setCyclicBufferSize(bufferSize);
  final EditorEx editor=(EditorEx)editorFactory.createViewer(editorDocument,myProject);
  final EditorHighlighter highlighter=new MyHighghlighter();
  editor.setHighlighter(highlighter);
  editor.putUserData(CONSOLE_VIEW_IN_EDITOR_VIEW,this);
  final EditorSettings editorSettings=editor.getSettings();
  editorSettings.setLineMarkerAreaShown(false);
  editorSettings.setLineNumbersShown(false);
  editorSettings.setFoldingOutlineShown(false);
  editorSettings.setAdditionalPageAtBottom(false);
  editorSettings.setAdditionalColumnsCount(0);
  editorSettings.setAdditionalLinesCount(0);
  final EditorColorsScheme scheme=editor.getColorsScheme();
  editor.setBackgroundColor(BACKGROUND_COLOR);
  scheme.setColor(EditorColors.CARET_ROW_COLOR,null);
  scheme.setColor(EditorColors.RIGHT_MARGIN_COLOR,null);
  editor.addEditorMouseListener(new EditorPopupHandler(){
    public void invokePopup(    final EditorMouseEvent event){
      final MouseEvent mouseEvent=event.getMouseEvent();
      popupInvoked(mouseEvent.getComponent(),mouseEvent.getX(),mouseEvent.getY());
    }
  }
);
  editor.addEditorMouseListener(new EditorMouseAdapter(){
    public void mouseReleased(    final EditorMouseEvent e){
      final MouseEvent mouseEvent=e.getMouseEvent();
      if (!mouseEvent.isPopupTrigger()) {
        navigate(e);
      }
    }
  }
);
  editor.getContentComponent().addMouseMotionListener(new MouseMotionAdapter(){
    public void mouseMoved(    final MouseEvent e){
      final HyperlinkInfo info=getHyperlinkInfoByPoint(e.getPoint());
      if (info != null) {
        editor.getContentComponent().setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
      }
 else {
        editor.getContentComponent().setCursor(Cursor.getPredefinedCursor(Cursor.TEXT_CURSOR));
      }
    }
  }
);
  setEditorUpActions(editor);
  return editor;
}
