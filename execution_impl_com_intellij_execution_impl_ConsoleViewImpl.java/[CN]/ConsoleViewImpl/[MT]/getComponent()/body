{
  if (myEditor == null) {
    myEditor=createEditor();
    requestFlushImmediately();
    add(myEditor.getComponent(),BorderLayout.CENTER);
    myEditor.getDocument().addDocumentListener(new DocumentAdapter(){
      public void documentChanged(      DocumentEvent e){
        if (e.getNewLength() == 0 && e.getOffset() == 0) {
synchronized (LOCK) {
            int toRemoveLen=e.getOldLength();
            int tIndex=findTokenInfoIndexByOffset(toRemoveLen);
            ArrayList<TokenInfo> newTokens=new ArrayList<TokenInfo>(myTokens.subList(tIndex,myTokens.size()));
            for (            TokenInfo token : newTokens) {
              token.startOffset-=toRemoveLen;
              token.endOffset-=toRemoveLen;
            }
            if (!newTokens.isEmpty()) {
              newTokens.get(0).startOffset=0;
            }
            myContentSize-=Math.min(myContentSize,toRemoveLen);
            myTokens=newTokens;
          }
        }
      }
    }
);
  }
  return this;
}
