{
  if (myState.isRunning()) {
synchronized (LOCK) {
      final String text=myDeferredUserInput.substring(0,myDeferredUserInput.length());
      final int index=Math.max(text.lastIndexOf('\n'),text.lastIndexOf('\r'));
      if (index < 0)       return;
      try {
        myState.sendUserInput(text.substring(0,index + 1));
      }
 catch (      IOException e) {
        return;
      }
      myDeferredUserInput.setLength(0);
      myDeferredUserInput.append(text.substring(index + 1));
    }
  }
}
