{
  if (this == obj)   return true;
  if (!(obj instanceof PsiClassType))   return false;
  PsiClassType otherClassType=(PsiClassType)obj;
  if (!isValid() || !otherClassType.isValid())   return false;
  String className=getClassName();
  String otherClassName=otherClassType.getClassName();
  if (!Comparing.equal(className,otherClassName))   return false;
  final ClassResolveResult result=resolveGenerics();
  final ClassResolveResult otherResult=otherClassType.resolveGenerics();
  if (result == otherResult)   return true;
  final PsiClass aClass=result.getElement();
  final PsiClass otherClass=otherResult.getElement();
  if (aClass == null || otherClass == null) {
    return aClass == otherClass;
  }
  return aClass.getManager().areElementsEquivalent(aClass,otherClass) && PsiUtil.equalOnEquivalentClasses(result.getSubstitutor(),aClass,otherResult.getSubstitutor(),otherClass);
}
