{
  final GrAnnotation anno=PsiTreeUtil.findElementOfClassAtOffset(file,editor.getCaretModel().getOffset(),GrAnnotation.class,false);
  if (anno == null) {
    return false;
  }
  final String qname=anno.getQualifiedName();
  if (qname == null || !(qname.startsWith(GRAB_ANNO) || GRAPES_ANNO.equals(qname))) {
    return false;
  }
  final Module module=ModuleUtil.findModuleForPsiElement(file);
  if (module == null) {
    return false;
  }
  return file.getOriginalFile().getVirtualFile() != null;
}
