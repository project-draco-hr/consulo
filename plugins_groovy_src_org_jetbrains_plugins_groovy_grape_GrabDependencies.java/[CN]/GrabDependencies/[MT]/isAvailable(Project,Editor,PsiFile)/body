{
  final GrAnnotation anno=PsiTreeUtil.findElementOfClassAtOffset(file,editor.getCaretModel().getOffset(),GrAnnotation.class,false);
  if (anno == null) {
    return false;
  }
  final String qname=anno.getQualifiedName();
  if (qname == null || !(qname.startsWith(GRAB_ANNO) || GRAPES_ANNO.equals(qname))) {
    return false;
  }
  final Module module=ModuleUtilCore.findModuleForPsiElement(file);
  if (module == null) {
    return false;
  }
  final Sdk sdk=ModuleUtilCore.getSdk(module,JavaModuleExtensionImpl.class);
  if (sdk == null) {
    return false;
  }
  return file.getOriginalFile().getVirtualFile() != null && sdk.getSdkType() instanceof JavaSdkType;
}
