{
  if (annotation != null) {
    if (annotation.getText().indexOf("{") == -1) {
      final PsiNameValuePair[] attributes=annotation.getParameterList().getAttributes();
      if (attributes.length == 1) {
        final String suppressedWarnings=attributes[0].getText();
        return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText("@" + SuppressManager.SUPPRESS_INSPECTIONS_ANNOTATION_NAME + "({"+ suppressedWarnings+ ", \""+ id+ "\"})",container);
      }
    }
 else {
      final int curlyBraceIndex=annotation.getText().lastIndexOf("}");
      if (curlyBraceIndex > 0) {
        return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText(annotation.getText().substring(0,curlyBraceIndex) + ", \"" + id+ "\"})",container);
      }
 else       if (!ApplicationManager.getApplication().isUnitTestMode() && editor != null) {
        Messages.showErrorDialog(editor.getComponent(),InspectionsBundle.message("suppress.inspection.annotation.syntax.error",annotation.getText()));
      }
    }
  }
 else {
    return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText("@" + SuppressManager.SUPPRESS_INSPECTIONS_ANNOTATION_NAME + "(\""+ id+ "\")",container);
  }
  return null;
}
