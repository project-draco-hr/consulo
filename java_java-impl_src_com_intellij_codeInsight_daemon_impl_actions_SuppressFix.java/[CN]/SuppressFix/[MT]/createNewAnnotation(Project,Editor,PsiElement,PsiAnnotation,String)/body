{
  if (annotation != null) {
    final String currentSuppressedId="\"" + id + "\"";
    if (!annotation.getText().contains("{")) {
      final PsiNameValuePair[] attributes=annotation.getParameterList().getAttributes();
      if (attributes.length == 1) {
        final String suppressedWarnings=attributes[0].getText();
        if (suppressedWarnings.contains(currentSuppressedId))         return null;
        return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText("@" + SuppressManager.SUPPRESS_INSPECTIONS_ANNOTATION_NAME + "({"+ suppressedWarnings+ ", "+ currentSuppressedId+ "})",container);
      }
    }
 else {
      final int curlyBraceIndex=annotation.getText().lastIndexOf("}");
      if (curlyBraceIndex > 0) {
        final String oldSuppressWarning=annotation.getText().substring(0,curlyBraceIndex);
        if (oldSuppressWarning.contains(currentSuppressedId))         return null;
        return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText(oldSuppressWarning + ", " + currentSuppressedId+ "})",container);
      }
 else       if (!ApplicationManager.getApplication().isUnitTestMode() && editor != null) {
        Messages.showErrorDialog(editor.getComponent(),InspectionsBundle.message("suppress.inspection.annotation.syntax.error",annotation.getText()));
      }
    }
  }
 else {
    return JavaPsiFacade.getInstance(project).getElementFactory().createAnnotationFromText("@" + SuppressManager.SUPPRESS_INSPECTIONS_ANNOTATION_NAME + "(\""+ id+ "\")",container);
  }
  return null;
}
