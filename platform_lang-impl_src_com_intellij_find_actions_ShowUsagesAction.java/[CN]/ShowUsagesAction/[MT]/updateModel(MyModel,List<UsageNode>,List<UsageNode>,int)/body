{
  UsageNode[] oa=listOld.toArray(new UsageNode[listOld.size()]);
  UsageNode[] na=listNew.toArray(new UsageNode[listNew.size()]);
  List<ModelDiff.Cmd> cmds=ModelDiff.createDiffCmds(tableModel,oa,na);
  int selection=oldSelection;
  if (cmds != null) {
    for (    ModelDiff.Cmd cmd : cmds) {
      selection=cmd.translateSelection(selection);
      cmd.apply();
    }
  }
  return selection;
}
