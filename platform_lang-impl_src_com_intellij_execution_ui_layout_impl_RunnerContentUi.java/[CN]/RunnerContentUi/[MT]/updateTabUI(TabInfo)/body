{
  TabImpl t=getTabFor(tab);
  if (t == null) {
    return false;
  }
  String title=t.getDisplayName();
  Icon icon=t.getIcon();
  GridImpl grid=getGridFor(tab);
  boolean hasToolbarContent=grid.updateGridUI();
  List<Content> contents=grid.getContents();
  if (title == null) {
    title="";
    Iterator<Content> all=contents.iterator();
    while (all.hasNext()) {
      Content each=all.next();
      title+=each.getTabName();
      if (all.hasNext()) {
        title+=" | ";
      }
    }
  }
  if (icon == null && contents.size() == 1) {
    tab.setHidden(grid.isMinimized(contents.get(0)));
    icon=contents.get(0).getIcon();
  }
  tab.setDragOutDelegate(myTabs.getTabs().size() > 1 || !isOriginal() ? myDragOutDelegate : null);
  Tab gridTab=grid.getTab();
  tab.setText(title).setIcon(gridTab != null && gridTab.isDefault() ? null : icon);
  return hasToolbarContent;
}
