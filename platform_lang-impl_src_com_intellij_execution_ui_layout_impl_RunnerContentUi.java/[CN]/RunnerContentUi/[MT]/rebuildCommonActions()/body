{
  boolean hasToolbarContent=false;
  for (  GridImpl each : myCommonActionsPlaceholder.keySet()) {
    Wrapper eachPlaceholder=myCommonActionsPlaceholder.get(each);
    DefaultActionGroup groupToBuild;
    JComponent contextComponent=null;
    List<Content> contentList=each.getContents();
    Set<Content> contents=new HashSet<Content>();
    contents.addAll(contentList);
    if (isHorizontalToolbar() && contents.size() == 1) {
      Content content=contentList.get(0);
      groupToBuild=new DefaultActionGroup();
      if (content.getActions() != null) {
        groupToBuild.addAll(content.getActions());
        groupToBuild.addSeparator();
        contextComponent=content.getActionsContextComponent();
      }
      groupToBuild.addAll(myTopActions);
    }
 else {
      final DefaultActionGroup group=new DefaultActionGroup();
      group.addAll(myTopActions);
      groupToBuild=group;
    }
    if (!contents.equals(myContextActions.get(each))) {
      ActionToolbar tb=myActionManager.createActionToolbar(myActionsPlace,groupToBuild,true);
      tb.setTargetComponent(contextComponent);
      eachPlaceholder.setContent(tb.getComponent());
    }
    if (groupToBuild.getChildrenCount() > 0) {
      hasToolbarContent=true;
    }
    myContextActions.put(each,contents);
  }
  return hasToolbarContent;
}
