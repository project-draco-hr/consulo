{
  GridImpl grid=(GridImpl)findGridFor(content);
  if (grid != null || !createIfMissing)   return grid;
  grid=new GridImpl(this,mySessionName);
  grid.setBorder(new EmptyBorder(1,0,0,0));
  if (myCurrentOver != null) {
    final int index=((JBRunnerTabs)myCurrentOver).getDropInfoIndex() + (myOriginal != null ? myOriginal.getTabOffsetFor(this) : 0);
    for (    TabInfo info : myTabs.getTabs()) {
      final TabImpl tab=getTabFor(info);
      if (tab != null && tab.getIndex() >= index) {
        tab.setIndex(tab.getIndex() + 1);
      }
    }
    getStateFor(content).assignTab(myLayoutSettings.getOrCreateTab(index));
  }
  TabInfo tab=new TabInfo(grid).setObject(getStateFor(content).getTab()).setText("Tab");
  Wrapper left=new Wrapper();
  myCommonActionsPlaceholder.put(grid,left);
  Wrapper minimizedToolbar=new Wrapper();
  myMinimizedButtonsPlaceholder.put(grid,minimizedToolbar);
  final Wrapper searchComponent=new Wrapper();
  if (content.getSearchComponent() != null) {
    searchComponent.setContent(content.getSearchComponent());
  }
  TwoSideComponent right=new TwoSideComponent(searchComponent,minimizedToolbar);
  NonOpaquePanel sideComponent=new TwoSideComponent(left,right);
  tab.setSideComponent(sideComponent);
  tab.setTabLabelActions((ActionGroup)myActionManager.getAction(VIEW_TOOLBAR),TAB_TOOLBAR_PLACE);
  myTabs.addTab(tab);
  myTabs.sortTabs(myTabsComparator);
  return grid;
}
