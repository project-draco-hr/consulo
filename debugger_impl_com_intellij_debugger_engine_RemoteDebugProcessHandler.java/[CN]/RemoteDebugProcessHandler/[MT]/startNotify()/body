{
  final DebugProcess debugProcess=DebuggerManager.getInstance(myProject).getDebugProcess(this);
  final DebugProcessAdapter listener=new DebugProcessAdapter(){
    public void processDetached(    DebugProcess process,    boolean closedByUser){
      debugProcess.removeDebugProcessListener(this);
      notifyProcessDetached();
    }
  }
;
  debugProcess.addDebugProcessListener(listener);
  try {
    super.startNotify();
  }
  finally {
    if (debugProcess.isDetached()) {
      debugProcess.removeDebugProcessListener(listener);
      notifyProcessDetached();
    }
  }
}
