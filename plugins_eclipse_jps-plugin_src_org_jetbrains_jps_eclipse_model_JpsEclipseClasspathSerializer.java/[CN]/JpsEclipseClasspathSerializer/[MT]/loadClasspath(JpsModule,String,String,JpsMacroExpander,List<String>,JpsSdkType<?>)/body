{
  final JpsDependenciesList dependenciesList=module.getDependenciesList();
  dependenciesList.clear();
  try {
    if (classpathDir == null)     classpathDir=baseModulePath;
    final File classpathFile=new File(classpathDir,EclipseXml.DOT_CLASSPATH_EXT);
    if (!classpathFile.exists())     return;
    final String eml=module.getName() + EclipseXml.IDEA_SETTINGS_POSTFIX;
    final File emlFile=new File(baseModulePath,eml);
    final Map<String,String> levels=new HashMap<String,String>();
    final JpsIdeaSpecificSettings settings;
    final Element root;
    if (emlFile.isFile()) {
      final Document emlDocument=JDOMUtil.loadDocument(emlFile);
      root=emlDocument.getRootElement();
      settings=new JpsIdeaSpecificSettings(expander);
      settings.readIDEASpecific(root,module,projectSdkType,levels);
    }
 else {
      settings=null;
      root=null;
    }
    final Document document=JDOMUtil.loadDocument(classpathFile);
    final JpsEclipseClasspathReader reader=new JpsEclipseClasspathReader(classpathDir,paths,new HashSet<String>(),levels);
    reader.readClasspath(module,null,document.getRootElement(),expander);
    if (settings != null) {
      settings.updateEntries(root,module);
    }
  }
 catch (  Exception e) {
    LOG.info(e);
    throw new RuntimeException(e);
  }
}
