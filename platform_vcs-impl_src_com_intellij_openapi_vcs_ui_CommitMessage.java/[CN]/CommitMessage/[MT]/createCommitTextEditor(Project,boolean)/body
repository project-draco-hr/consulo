{
  Set<EditorFeature> features=new HashSet<EditorFeature>();
  VcsConfiguration configuration=VcsConfiguration.getInstance(project);
  if (configuration != null) {
    features.add(new SpellCheckingEditorFeature(forceSpellCheckOn || configuration.CHECK_COMMIT_MESSAGE_SPELLING));
    features.add(new RightMarginEditorFeature(configuration.USE_COMMIT_MESSAGE_MARGIN,configuration.COMMIT_MESSAGE_MARGIN_SIZE));
  }
 else {
    features.add(new SpellCheckingEditorFeature(true));
    features.add(new RightMarginEditorFeature(false,-1));
  }
  EditorTextFieldProvider service=ServiceManager.getService(project,EditorTextFieldProvider.class);
  return service.getEditorField(FileTypes.PLAIN_TEXT.getLanguage(),project,features);
}
