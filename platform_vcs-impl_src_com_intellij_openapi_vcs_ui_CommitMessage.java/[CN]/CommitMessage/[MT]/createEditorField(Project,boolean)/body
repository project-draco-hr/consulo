{
  EditorTextFieldProvider service=ServiceManager.getService(project,EditorTextFieldProvider.class);
  Set<EditorCustomization.Feature> enabledFeatures=EnumSet.of(EditorCustomization.Feature.SOFT_WRAP);
  Set<EditorCustomization.Feature> disabledFeatures=EnumSet.of(EditorCustomization.Feature.ADDITIONAL_PAGE_AT_BOTTOM);
  if (checkSpelling) {
    enabledFeatures.add(EditorCustomization.Feature.SPELL_CHECK);
  }
 else {
    disabledFeatures.add(EditorCustomization.Feature.SPELL_CHECK);
  }
  EditorTextField editorField=service.getEditorField(FileTypes.PLAIN_TEXT.getLanguage(),project,enabledFeatures,disabledFeatures);
  editorField.getDocument().putUserData(DATA_CONTEXT_KEY,DataManager.getInstance().getDataContext(editorField.getComponent()));
  return editorField;
}
