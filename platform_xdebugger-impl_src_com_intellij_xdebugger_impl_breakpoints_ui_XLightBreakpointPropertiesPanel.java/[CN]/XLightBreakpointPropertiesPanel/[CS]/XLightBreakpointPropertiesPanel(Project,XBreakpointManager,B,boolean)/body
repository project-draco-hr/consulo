{
  myBreakpoint=breakpoint;
  XBreakpointType<B,?> breakpointType=XBreakpointUtil.getType(breakpoint);
  mySuspendPolicyPanel.init(project,breakpointManager,breakpoint);
  mySuspendPolicyPanel.setDelegate(this);
  mySubPanels.add(mySuspendPolicyPanel);
  myMasterBreakpointPanel.init(project,breakpointManager,breakpoint);
  mySubPanels.add(myMasterBreakpointPanel);
  XDebuggerEditorsProvider debuggerEditorsProvider=breakpointType.getEditorsProvider(breakpoint,project);
  myActionsPanel.init(project,breakpointManager,breakpoint,debuggerEditorsProvider);
  mySubPanels.add(myActionsPanel);
  myCustomPanels=new ArrayList<XBreakpointCustomPropertiesPanel<B>>();
  if (debuggerEditorsProvider != null) {
    final XBreakpointCustomPropertiesPanel<B> conditionPanel;
    if (debuggerEditorsProvider instanceof XDebuggerComboBoxProvider) {
      conditionPanel=((XDebuggerComboBoxProvider<B>)debuggerEditorsProvider).createConditionComboBoxPanel(project,debuggerEditorsProvider,DefaultConditionComboBoxPanel.HISTORY_KEY,myBreakpoint.getSourcePosition());
    }
 else {
      conditionPanel=new DefaultConditionComboBoxPanel<B>(project,debuggerEditorsProvider,myBreakpoint.getSourcePosition());
    }
    myConditionExpressionPanel.add(conditionPanel.getComponent(),BorderLayout.CENTER);
    myCustomPanels.add(conditionPanel);
    myMainPanel.addFocusListener(new FocusAdapter(){
      @Override public void focusGained(      FocusEvent event){
        IdeFocusManager.findInstance().requestFocus(conditionPanel.getComponent(),false);
      }
    }
);
  }
 else {
    myConditionPanel.setVisible(false);
  }
  myShowMoreOptions=false;
  for (  XBreakpointPropertiesSubPanel<B> panel : mySubPanels) {
    if (panel.lightVariant(showAllOptions)) {
      myShowMoreOptions=true;
    }
  }
  XBreakpointCustomPropertiesPanel<B> customPropertiesPanel=breakpointType.createCustomPropertiesPanel();
  if (customPropertiesPanel != null) {
    myCustomPropertiesPanelWrapper.add(customPropertiesPanel.getComponent(),BorderLayout.CENTER);
    myCustomPanels.add(customPropertiesPanel);
  }
  XBreakpointCustomPropertiesPanel<B> customConditionPanel=breakpointType.createCustomConditionsPanel();
  if (customConditionPanel != null) {
    myCustomConditionsPanelWrapper.add(customConditionPanel.getComponent(),BorderLayout.CENTER);
    myCustomPanels.add(customConditionPanel);
  }
  XBreakpointCustomPropertiesPanel<B> customRightConditionPanel=breakpointType.createCustomRightPropertiesPanel(project);
  if (customRightConditionPanel != null && (showAllOptions || customRightConditionPanel.isVisibleOnPopup(breakpoint))) {
    myCustomRightPropertiesPanelWrapper.add(customRightConditionPanel.getComponent(),BorderLayout.CENTER);
    myCustomPanels.add(customRightConditionPanel);
  }
  myEnabledCheckbox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent event){
      myBreakpoint.setEnabled(myEnabledCheckbox.isSelected());
    }
  }
);
}
