{
  TreeClassChooser chooser=TreeClassChooserFactory.getInstance(myProject).createWithInnerClassesScopeChooser(RefactoringBundle.message("choose.destination.class"),GlobalSearchScope.projectScope(myProject),new TreeClassChooser.ClassFilter(){
    public boolean isAccepted(    PsiClass aClass){
      return aClass.getParent() instanceof PsiJavaFile || aClass.hasModifierProperty(PsiModifier.STATIC);
    }
  }
,null);
  if (myTargetClass != null) {
    chooser.selectDirectory(myTargetClass.getContainingFile().getContainingDirectory());
  }
  chooser.showDialog();
  PsiClass aClass=chooser.getSelectedClass();
  if (aClass != null) {
    myTfTargetClassName.setText(aClass.getQualifiedName());
  }
}
