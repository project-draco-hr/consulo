{
  if (!myHandler.isEnabled(project))   return false;
  Editor editor=event.getData(PlatformDataKeys.EDITOR);
  if (editor == null)   return false;
  InputEvent inputEvent=event.getInputEvent();
  if (inputEvent instanceof MouseEvent && inputEvent.isAltDown()) {
    MouseEvent mouseEvent=(MouseEvent)inputEvent;
    Component component=SwingUtilities.getDeepestComponentAt(mouseEvent.getComponent(),mouseEvent.getX(),mouseEvent.getY());
    if (SwingUtilities.isDescendingFrom(component,editor.getComponent())) {
      MouseEvent convertedEvent=SwingUtilities.convertMouseEvent(mouseEvent.getComponent(),mouseEvent,component);
      EditorMouseEventArea area=editor.getMouseEventArea(convertedEvent);
      if (area != EditorMouseEventArea.EDITING_AREA) {
        return false;
      }
    }
  }
 else {
    if (StringUtil.isEmptyOrSpaces(editor.getSelectionModel().getSelectedText())) {
      return false;
    }
  }
  return true;
}
