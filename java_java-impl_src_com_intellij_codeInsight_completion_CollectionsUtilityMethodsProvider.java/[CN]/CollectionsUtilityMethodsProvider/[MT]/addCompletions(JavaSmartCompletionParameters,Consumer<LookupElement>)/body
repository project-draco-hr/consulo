{
  final PsiElement element=parameters.getPosition();
  final PsiElement parent=element.getParent();
  if (parent instanceof PsiReferenceExpression && ((PsiReferenceExpression)parent).getQualifierExpression() != null)   return;
  final PsiClass collectionsClass=JavaPsiFacade.getInstance(element.getProject()).findClass(JAVA_UTIL_COLLECTIONS,element.getResolveScope());
  if (collectionsClass == null)   return;
  final PsiType type=parameters.getExpectedType();
  final PsiType defaultType=parameters.getDefaultType();
  final PsiElement pparent=parent.getParent();
  if (parameters.getInvocationCount() > 1 || pparent instanceof PsiReturnStatement || pparent instanceof PsiConditionalExpression && pparent.getParent() instanceof PsiReturnStatement) {
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_LIST,"emptyList",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_SET,"emptySet",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_MAP,"emptyMap",collectionsClass);
  }
  if (parameters.getInvocationCount() > 1) {
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_LIST,"singletonList",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_SET,"singleton",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_MAP,"singletonMap",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_COLLECTION,"unmodifiableCollection",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_LIST,"unmodifiableList",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_SET,"unmodifiableSet",collectionsClass);
    addCollectionMethod(result,type,defaultType,JAVA_UTIL_MAP,"unmodifiableMap",collectionsClass);
    addCollectionMethod(result,type,defaultType,"java.util.SortedSet","unmodifiableSortedSet",collectionsClass);
    addCollectionMethod(result,type,defaultType,"java.util.SortedMap","unmodifiableSortedMap",collectionsClass);
  }
}
