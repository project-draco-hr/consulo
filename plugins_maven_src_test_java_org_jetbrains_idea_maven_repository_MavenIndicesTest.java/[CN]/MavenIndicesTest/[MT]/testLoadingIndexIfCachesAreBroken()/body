{
  MavenIndex i1=new MavenIndex("local1",myDataTestFixture.getTestDataPath("local1"),MavenIndex.Kind.LOCAL);
  MavenIndex i2=new MavenIndex("local2",myDataTestFixture.getTestDataPath("local2"),MavenIndex.Kind.LOCAL);
  myIndices.add(i1);
  myIndices.add(i2);
  myIndices.update(i1,myProject,new EmptyProgressIndicator());
  myIndices.update(i2,myProject,new EmptyProgressIndicator());
  assertUnorderedElementsAreEqual(myIndices.getGroupIds(),"junit","jmock");
  myIndices.save();
  shutdownIndex();
  File cachesDir=new File(myIndexDir,"local1/caches");
  File groupIds=new File(cachesDir,"groupIds.dat");
  assertTrue(groupIds.exists());
  FileWriter w=new FileWriter(groupIds);
  w.write("bad content");
  w.close();
  initIndex();
  myIndices.load();
  assertEquals(2,myIndices.getIndices().size());
  assertTrue(cachesDir.exists());
  assertUnorderedElementsAreEqual(myIndices.getGroupIds(),"jmock");
}
