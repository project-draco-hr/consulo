{
  FilePatch filePatch=(FilePatch)value;
  String name=filePatch.getAfterNameRelative(getStripLeadingDirectories());
  final FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(name);
  setIcon(fileType.getIcon());
  if (myPatchesFailedToLoad.contains(filePatch) && !assumeProblemWillBeFixed(filePatch)) {
    append(name,SimpleTextAttributes.ERROR_ATTRIBUTES);
  }
 else   if (filePatch.isNewFile()) {
    append(name,myNewAttributes);
  }
 else   if (filePatch.isDeletedFile()) {
    append(name,myDeletedAttributes);
  }
 else {
    append(name,myModifiedAttributes);
  }
  final String afterPath=filePatch.getAfterName();
  final String beforePath=filePatch.getBeforeName();
  if ((beforePath != null) && (afterPath != null) && (!beforePath.equals(afterPath))) {
    final String message=myMoveRenameInfo.get(new Pair<String,String>(beforePath,afterPath));
    if (message != null) {
      append(message,SimpleTextAttributes.REGULAR_ATTRIBUTES);
    }
  }
}
