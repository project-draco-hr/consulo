{
  myLabel3.setHorizontalTextPosition(SwingConstants.RIGHT);
  myLabel3.setIcon(icon);
  String text=text3;
  final int listWidth=Math.max(list.getFixedCellWidth(),list.getWidth());
  final int maxWidth=listWidth - myNameComponent.getPreferredSize().width - myLabel2.getPreferredSize().width- 3 * FONT_WIDTH;
  JLabel label=myLabel3;
  if (text == null)   text="";
 else   text+=" ";
  label.setText(text);
  label.setFont(NORMAL_FONT);
  if (maxWidth > 0) {
    while (label.getPreferredSize().width > maxWidth) {
      String repl=text.replaceFirst("<((<\\.\\.\\.>)|[^<>])*>","<...>");
      if (repl.equals(text)) {
        break;
      }
      text=repl;
      label.setText(text);
    }
  }
  Color sampleBackground=background;
  Object o=item.getObject();
  if (o instanceof LookupValueWithUIHint && label.getText().length() == 0) {
    Color proposedBackground=((LookupValueWithUIHint)o).getColorHint();
    if (proposedBackground == null) {
      proposedBackground=BACKGROUND_COLOR;
    }
    sampleBackground=proposedBackground;
    label.setText("  ");
  }
  if (item.getAttribute(LookupImpl.EMPTY_ITEM_ATTRIBUTE) != null) {
    foreground=EMPTY_ITEM_FOREGROUND_COLOR;
  }
  label.setBackground(sampleBackground);
  label.setForeground(foreground);
}
