{
  ElementLookupRenderer renderer=getRendererForItem(item);
  if (renderer != null) {
    WidthCalculatingPresentation p=new WidthCalculatingPresentation(myLookupElementPresentation);
    renderer.renderElement(item.getObject(),p);
    return p.myTotalWidth;
  }
  String text=getName(item);
  final @NonNls String TYPE_GAP="XXX";
  text+=getText3(item) + TYPE_GAP;
  int width=myPanel.getFontMetrics(NORMAL_FONT).stringWidth(text) + 2;
  String text2=getText2(item,true);
  if (text2 != null) {
    boolean isSmall=item.getAttribute(LookupItem.TAIL_TEXT_SMALL_ATTR) != null;
    FontMetrics fontMetrics=myPanel.getFontMetrics(isSmall ? SMALL_FONT : NORMAL_FONT);
    width+=fontMetrics.stringWidth(text2);
  }
  return width;
}
