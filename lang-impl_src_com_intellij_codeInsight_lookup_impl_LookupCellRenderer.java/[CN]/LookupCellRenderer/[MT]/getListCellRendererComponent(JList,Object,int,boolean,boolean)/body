{
  final LookupItem item=(LookupItem)value;
  Color background=isSelected ? SELECTED_BACKGROUND_COLOR : BACKGROUND_COLOR;
  final Color foreground=isSelected ? SELECTED_FOREGROUND_COLOR : FOREGROUND_COLOR;
  final int preferredCount=myLookup.getPreferredItemsCount();
  if (index <= preferredCount - 1 && preferredCount < list.getModel().getSize() - 1) {
    background=isSelected ? SELECTED_BACKGROUND_COLOR : new Color(220,245,220);
  }
  myLookupElementPresentation.setContext(item,background,foreground,list,isSelected);
  ElementLookupRenderer renderer=getRendererForItem(item);
  if (renderer != null) {
    myLabel2.setBackground(background);
    renderer.renderElement(item.getObject(),myLookupElementPresentation);
  }
 else {
    setItemTextLabels(item,background,foreground,isSelected,getName(item));
    getLabel2(item,background,foreground,isSelected);
    setTypeTextLabel(item,background,foreground,list,getText3(item));
  }
  return myPanel;
}
