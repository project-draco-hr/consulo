{
  final String id=element.getAttributeValue(TYPE_ID_ATTRIBUTE);
  PackagingElementType<?> type=PackagingElementFactory.getInstance().findElementType(id);
  if (type == null) {
    throw new UnknownPackagingElementTypeException(id);
  }
  PackagingElement<T> packagingElement=(PackagingElement<T>)type.createEmpty(myProject);
  T state=packagingElement.getState();
  if (state != null) {
    XmlSerializer.deserializeInto(state,element);
    packagingElement.loadState(state);
  }
  final List children=element.getChildren(PACKAGING_ELEMENT_NAME);
  for (  Element child : (List<? extends Element>)children) {
    ((CompositePackagingElement<?>)packagingElement).addOrFindChild(deserializeElement(child));
  }
  return packagingElement;
}
