{
  super(settings);
  final ArrangementRuleTree ruleTree=new ArrangementRuleTree(filter);
  Tree component=ruleTree.getTreeComponent();
  myContent.add(new JBScrollPane(component),new GridBag().weightx(1).weighty(1).fillCell().coverLine());
  CustomizationUtil.installPopupHandler(component,ArrangementConstants.ACTION_GROUP_RULE_EDITOR_CONTEXT_MENU,ArrangementConstants.RULE_EDITOR_PLACE);
  final JXTaskPane editorPane=new JXTaskPane(ApplicationBundle.message("arrangement.title.editor"));
  final ArrangementMatcherRuleEditor ruleEditor=new ArrangementMatcherRuleEditor(filter);
  editorPane.add(ruleEditor);
  editorPane.setCollapsed(true);
  myContent.add(editorPane,new GridBag().weightx(1).fillCellHorizontally().coverLine());
  ruleTree.addEditingListener(new ArrangementMatcherEditingListener(){
    @Override public void startEditing(    @NotNull ArrangementMatcherSettings settings){
      ruleEditor.updateState(settings);
      editorPane.setCollapsed(false);
    }
    @Override public void stopEditing(){
      editorPane.setCollapsed(true);
    }
  }
);
}
