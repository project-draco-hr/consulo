{
  editorPane.addPropertyChangeListener("collapsed",new PropertyChangeListener(){
    @Override public void propertyChange(    PropertyChangeEvent evt){
      if (evt.getNewValue() == Boolean.FALSE && resetEditor.get()) {
        ruleEditor.updateState(null);
      }
    }
  }
);
  myRuleTree.addEditingListener(new ArrangementRuleSelectionListener(){
    @Override public void onSelectionChange(    @NotNull List<? extends ArrangementRuleEditingModel> selectedModels){
      if (selectedModels.size() != 1) {
        editorPane.setCollapsed(true);
      }
 else {
        ruleEditor.updateState(selectedModels.get(0));
        resetEditor.set(Boolean.FALSE);
        try {
          editorPane.setCollapsed(false);
        }
  finally {
          resetEditor.set(Boolean.TRUE);
        }
      }
    }
  }
);
}
