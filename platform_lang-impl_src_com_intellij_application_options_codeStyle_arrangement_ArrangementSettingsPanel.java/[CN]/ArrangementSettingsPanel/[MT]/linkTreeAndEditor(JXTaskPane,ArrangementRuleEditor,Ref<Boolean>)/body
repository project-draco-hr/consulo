{
  editorPane.addPropertyChangeListener("collapsed",new PropertyChangeListener(){
    @Override public void propertyChange(    PropertyChangeEvent evt){
      if (evt.getNewValue() == Boolean.FALSE && resetEditor.get()) {
        ruleEditor.updateState(null);
      }
    }
  }
);
  myRuleTree.addEditingListener(new ArrangementRuleSelectionListener(){
    @Override public void onSelected(    @NotNull ArrangementRuleEditingModel model){
      ruleEditor.updateState(model);
      resetEditor.set(Boolean.FALSE);
      try {
        editorPane.setCollapsed(false);
      }
  finally {
        resetEditor.set(Boolean.TRUE);
      }
    }
    @Override public void selectionRemoved(){
      editorPane.setCollapsed(true);
    }
  }
);
}
