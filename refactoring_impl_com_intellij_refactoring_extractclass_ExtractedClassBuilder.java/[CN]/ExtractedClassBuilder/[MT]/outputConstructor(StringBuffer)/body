{
  out.append("\tpublic " + className + '(');
  boolean isFirst=true;
  if (requiresBackPointer) {
    final String parameterName=settings.PARAMETER_NAME_PREFIX + backPointerName + settings.PARAMETER_NAME_SUFFIX;
    out.append(originalClassName);
    if (!typeParams.isEmpty()) {
      out.append('<');
      boolean first=true;
      for (      PsiTypeParameter typeParam : typeParams) {
        if (!first) {
          out.append(',');
        }
        out.append(typeParam.getName());
        first=false;
      }
      out.append('>');
    }
    out.append(' ' + parameterName);
    isFirst=false;
  }
  for (  final FieldSpec field : fields) {
    final PsiVariable variable=field.getField();
    if (variable.hasModifierProperty(PsiModifier.STATIC)) {
      continue;
    }
    if (!variable.hasInitializer()) {
      continue;
    }
    final PsiExpression initializer=variable.getInitializer();
    if (PsiUtil.isConstantExpression(initializer)) {
      continue;
    }
    if (!isFirst) {
      out.append(", ");
    }
    isFirst=false;
    final PsiType type=variable.getType();
    final String typeText=type.getCanonicalText();
    final String name=calculateStrippedName(variable);
    final String parameterName=settings.PARAMETER_NAME_PREFIX + name + settings.PARAMETER_NAME_SUFFIX;
    out.append(typeText + ' ' + parameterName);
  }
  out.append(")\n");
  out.append("\t{\n");
  if (requiresBackPointer) {
    final String parameterName=settings.PARAMETER_NAME_PREFIX + backPointerName + settings.PARAMETER_NAME_SUFFIX;
    if (backPointerName.equals(parameterName)) {
      out.append("\t\tthis." + backPointerName + " = "+ parameterName+ ";\n");
    }
 else {
      out.append("\t\t" + backPointerName + " = "+ parameterName+ ";\n");
    }
  }
  for (  final FieldSpec field : fields) {
    final PsiVariable variable=field.getField();
    if (variable.hasModifierProperty(PsiModifier.STATIC)) {
      continue;
    }
    if (!variable.hasInitializer()) {
      continue;
    }
    final PsiExpression initializer=variable.getInitializer();
    if (PsiUtil.isConstantExpression(initializer)) {
      continue;
    }
    final String name=calculateStrippedName(variable);
    final String fieldName;
    if (variable.hasModifierProperty(PsiModifier.STATIC)) {
      fieldName=settings.STATIC_FIELD_NAME_PREFIX + name + settings.STATIC_FIELD_NAME_SUFFIX;
    }
 else {
      fieldName=settings.FIELD_NAME_PREFIX + name + settings.FIELD_NAME_SUFFIX;
    }
    final String parameterName=settings.PARAMETER_NAME_PREFIX + name + settings.PARAMETER_NAME_SUFFIX;
    if (fieldName.equals(parameterName)) {
      out.append("\t\tthis." + fieldName + " = "+ parameterName+ ";\n");
    }
 else {
      out.append("\t\t" + fieldName + " = "+ parameterName+ ";\n");
    }
  }
  out.append("\t}\n");
  out.append('\n');
}
