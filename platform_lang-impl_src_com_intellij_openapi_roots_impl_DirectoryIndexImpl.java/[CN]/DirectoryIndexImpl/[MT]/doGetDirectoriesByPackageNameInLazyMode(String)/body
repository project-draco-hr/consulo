{
  ArrayList<VirtualFile> list=new ArrayList<VirtualFile>();
  Module[] modules=ModuleManager.getInstance(myProject).getModules();
  for (  Module module : modules) {
    for (    ContentEntry contentEntry : getContentEntries(module)) {
      SourceFolder[] sourceFolders=contentEntry.getSourceFolders();
      for (      SourceFolder sourceFolder : sourceFolders) {
        VirtualFile sourceRoot=sourceFolder.getFile();
        if (sourceRoot != null) {
          findAndAddDirByPackageName(list,sourceRoot,packageName);
        }
      }
    }
    for (    OrderEntry orderEntry : getOrderEntries(module)) {
      if (orderEntry instanceof LibraryOrderEntry || orderEntry instanceof JdkOrderEntry) {
        VirtualFile[] libRoots=orderEntry.getFiles(OrderRootType.CLASSES);
        for (        VirtualFile libRoot : libRoots) {
          findAndAddDirByPackageName(list,libRoot,packageName);
        }
        VirtualFile[] libSourceRoots=orderEntry.getFiles(OrderRootType.SOURCES);
        for (        VirtualFile libSourceRoot : libSourceRoots) {
          findAndAddDirByPackageName(list,libSourceRoot,packageName);
        }
      }
    }
  }
  return VfsUtil.toVirtualFileArray(list);
}
