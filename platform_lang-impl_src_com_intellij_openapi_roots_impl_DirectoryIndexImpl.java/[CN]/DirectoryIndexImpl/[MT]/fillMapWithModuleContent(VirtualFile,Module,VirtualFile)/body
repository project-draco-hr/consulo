{
  if (isExcluded(contentRoot,dir))   return;
  if (isIgnored(dir))   return;
  DirectoryInfo info=getOrCreateDirInfo(dir);
  if (info.module != null) {
    DirectoryInfo parentInfo=myDirToInfoMap.get(dir.getParent());
    if (parentInfo == null || !info.module.equals(parentInfo.module))     return;
  }
  VirtualFile[] children=dir.getChildren();
  for (  VirtualFile child : children) {
    if (child.isDirectory()) {
      fillMapWithModuleContent(child,module,contentRoot);
    }
  }
  info.module=module;
  info.contentRoot=contentRoot;
}
