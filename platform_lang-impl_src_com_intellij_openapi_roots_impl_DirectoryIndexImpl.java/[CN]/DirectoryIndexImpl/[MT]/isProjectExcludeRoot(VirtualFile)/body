{
  checkAvailability();
  if (!(dir instanceof NewVirtualFile))   return false;
  if (ourUseRootIndexOnly) {
    return getRootIndex().isProjectExcludeRoot(dir);
  }
  boolean standardResult=myState.myProjectExcludeRoots.contains(((NewVirtualFile)dir).getId());
  return standardResult;
}
