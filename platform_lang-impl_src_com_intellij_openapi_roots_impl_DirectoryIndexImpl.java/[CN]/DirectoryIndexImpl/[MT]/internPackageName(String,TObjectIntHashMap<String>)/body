{
  if (packageName == null) {
    return null;
  }
  if (packageName.isEmpty()) {
    return ArrayUtil.EMPTY_INT_ARRAY;
  }
  int dotCount=StringUtil.countChars(packageName,'.');
  int[] result=new int[dotCount + 2];
  result[0]=packageName.length();
  int tokenStart=0;
  int tokenIndex=0;
  while (tokenStart < packageName.length()) {
    int tokenEnd=packageName.indexOf('.',tokenStart);
    if (tokenEnd < 0) {
      tokenEnd=packageName.length();
    }
    String nextName=packageName.substring(tokenStart,tokenEnd);
    int internedId=alreadyEnumerated != null ? alreadyEnumerated.get(nextName) : 0;
    if (internedId == 0) {
      internedId=FileNameCache.storeName(nextName);
      if (alreadyEnumerated != null)       alreadyEnumerated.put(nextName,internedId);
    }
    result[tokenIndex + 1]=internedId;
    tokenStart=tokenEnd + 1;
    tokenIndex++;
  }
  return result;
}
