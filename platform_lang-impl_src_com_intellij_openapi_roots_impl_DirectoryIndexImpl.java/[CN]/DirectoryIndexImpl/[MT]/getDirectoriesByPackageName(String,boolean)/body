{
  Query<VirtualFile> standardResult=mySink.search(packageName,includeLibrarySources);
  RootIndex rootIndex=getRootIndex();
  if (rootIndex != null) {
    Collection<VirtualFile> riResult=rootIndex.getDirectoriesByPackageName(packageName,includeLibrarySources);
    Collection<VirtualFile> standard=standardResult.findAll();
    if (!new HashSet<VirtualFile>(riResult).equals(new HashSet<VirtualFile>(standard))) {
      for (      VirtualFile file : standard) {
        if (file.getPath().contains(".")) {
          return standardResult;
        }
      }
      assertConsistentResult(packageName,riResult,standard);
    }
  }
  return standardResult;
}
