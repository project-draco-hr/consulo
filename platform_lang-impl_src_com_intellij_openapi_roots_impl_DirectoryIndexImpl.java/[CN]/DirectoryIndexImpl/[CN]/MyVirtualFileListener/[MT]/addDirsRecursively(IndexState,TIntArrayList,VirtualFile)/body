{
  if (!(dir instanceof NewVirtualFile))   return;
  int id=((NewVirtualFile)dir).getId();
  if (state.getInfo(id) == null)   return;
  list.add(id);
  for (  VirtualFile child : ((NewVirtualFile)dir).getCachedChildren()) {
    if (child.isDirectory()) {
      addDirsRecursively(state,list,child);
    }
  }
}
