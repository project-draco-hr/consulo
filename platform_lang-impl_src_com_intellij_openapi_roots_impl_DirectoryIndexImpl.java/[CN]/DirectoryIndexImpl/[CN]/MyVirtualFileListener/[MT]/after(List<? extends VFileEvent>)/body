{
  RootIndex rootIndex=myRootIndex;
  if (rootIndex != null && !rootIndex.handleAfterEvent(events)) {
    myRootIndex=null;
  }
  if (ourUseRootIndexOnly) {
    return;
  }
  if (myBatchChangePlanned) {
    myBatchChangePlanned=false;
    long started=System.currentTimeMillis();
    doInitialize();
    LOG.info("Rebuilt indexstate for " + (System.currentTimeMillis() - started));
  }
 else {
    for (    VFileEvent event : events) {
      BulkVirtualFileListenerAdapter.fireAfter(this,event);
    }
  }
}
