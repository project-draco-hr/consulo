{
  if (!(file instanceof NewVirtualFile))   return 0;
  int counter=0;
  for (  VirtualFile child : ((NewVirtualFile)file).iterInDbChildren()) {
    if (child.isDirectory())     counter+=1 + (depth > 0 ? countDirectories(child,depth - 1) : 0);
  }
  return counter;
}
