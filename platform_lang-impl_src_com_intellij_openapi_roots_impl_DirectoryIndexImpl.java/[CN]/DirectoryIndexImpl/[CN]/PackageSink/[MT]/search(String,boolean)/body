{
  checkAvailability();
  dispatchPendingEvents();
  IndexState state=myState;
  List<VirtualFile> allDirs=state.myPackageNameToDirsMap.get(packageName);
  if (allDirs == null)   allDirs=Collections.emptyList();
  Query<VirtualFile> query=includeLibrarySources ? new CollectionQuery<VirtualFile>(allDirs) : createQuery(Pair.create(state,allDirs));
  return new FilteredQuery<VirtualFile>(query,IS_VALID);
}
