{
  assertWritable();
  progress.checkCanceled();
  progress.setText2(ProjectBundle.message("project.index.processing.library.classes.progress",module.getName()));
  for (  OrderEntry orderEntry : getOrderEntries(module)) {
    if (orderEntry instanceof LibraryOrSdkOrderEntry) {
      VirtualFile[] classRoots=((LibraryOrSdkOrderEntry)orderEntry).getRootFiles(OrderRootType.CLASSES);
      TIntHashSet excludedRoots=getExcludedRootsOfLibrary((LibraryOrSdkOrderEntry)orderEntry,libraryExcludedRoots);
      for (      final VirtualFile classRoot : classRoots) {
        if (classRoot instanceof NewVirtualFile) {
          fillMapWithLibraryClasses((NewVirtualFile)classRoot,"",(NewVirtualFile)classRoot,progress,interned,excludedRoots);
        }
      }
    }
  }
}
