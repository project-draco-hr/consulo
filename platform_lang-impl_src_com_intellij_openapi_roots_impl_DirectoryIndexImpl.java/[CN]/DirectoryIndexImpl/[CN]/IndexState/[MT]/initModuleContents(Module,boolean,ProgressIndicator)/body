{
  progress.checkCanceled();
  progress.setText2(ProjectBundle.message("project.index.processing.module.content.progress",module.getName()));
  ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
  VirtualFile[] contentRoots=rootManager.getContentRoots();
  if (reverseAllSets) {
    contentRoots=ArrayUtil.reverseArray(contentRoots);
  }
  for (  final VirtualFile contentRoot : contentRoots) {
    if (contentRoot instanceof NewVirtualFile) {
      fillMapWithModuleContent((NewVirtualFile)contentRoot,module,(NewVirtualFile)contentRoot,progress);
    }
  }
}
