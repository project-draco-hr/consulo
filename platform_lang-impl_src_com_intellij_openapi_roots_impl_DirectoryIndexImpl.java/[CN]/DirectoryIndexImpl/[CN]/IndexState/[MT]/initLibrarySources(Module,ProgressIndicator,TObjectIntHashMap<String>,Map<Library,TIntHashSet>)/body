{
  assertWritable();
  progress.checkCanceled();
  progress.setText2(ProjectBundle.message("project.index.processing.library.sources.progress",module.getName()));
  for (  OrderEntry orderEntry : getOrderEntries(module)) {
    if (orderEntry instanceof LibraryOrSdkOrderEntry) {
      VirtualFile[] sourceRoots=((LibraryOrSdkOrderEntry)orderEntry).getRootFiles(OrderRootType.SOURCES);
      TIntHashSet excludedRoots=getExcludedRootsOfLibrary((LibraryOrSdkOrderEntry)orderEntry,libraryExcludedRoots);
      for (      final VirtualFile sourceRoot : sourceRoots) {
        if (sourceRoot instanceof NewVirtualFile) {
          fillMapWithLibrarySources((NewVirtualFile)sourceRoot,"",(NewVirtualFile)sourceRoot,progress,interned,excludedRoots);
        }
      }
    }
  }
}
