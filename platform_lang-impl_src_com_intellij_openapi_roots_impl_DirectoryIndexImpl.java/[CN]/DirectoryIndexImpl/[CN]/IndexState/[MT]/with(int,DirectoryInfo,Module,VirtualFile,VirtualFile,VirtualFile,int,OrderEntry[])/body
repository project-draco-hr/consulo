{
  if (contentRoot != null) {
    assertAncestor(info,contentRoot,id);
  }
  if (sourceRoot instanceof NewVirtualFile) {
    VirtualFile root=contentRoot == null ? info.getContentRoot() : contentRoot;
    if (root != null) {
      assertAncestor(info,root,((NewVirtualFile)sourceRoot).getId());
    }
  }
  DirectoryInfo newInfo=info.with(module,contentRoot,sourceRoot,libraryClassRoot,sourceRootTypeData,orderEntries);
  storeInfo(newInfo,id);
  return newInfo;
}
