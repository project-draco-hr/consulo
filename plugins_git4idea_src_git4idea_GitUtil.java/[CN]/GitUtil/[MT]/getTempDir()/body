{
  try {
    @SuppressWarnings({"HardCodedStringLiteral"}) File temp=File.createTempFile("git-temp-file","txt");
    try {
      final File parentFile=temp.getParentFile();
      if (parentFile == null) {
        throw new Exception(GitBundle.message("missing.parent",temp));
      }
      final VirtualFile vFile=LocalFileSystem.getInstance().findFileByIoFile(parentFile);
      if (vFile == null) {
        throw new Exception(GitBundle.message("missing.virtual.file.for.dir",parentFile));
      }
      return vFile;
    }
  finally {
      temp.delete();
    }
  }
 catch (  Exception e) {
    throw new VcsException(GitBundle.message("cannot.locate.tempdir"),e);
  }
}
