{
  try {
    File temp=File.createTempFile("git-temp-file","txt");
    try {
      final File parentFile=temp.getParentFile();
      if (parentFile == null) {
        throw new Exception("Missing parent in " + temp);
      }
      final VirtualFile vFile=LocalFileSystem.getInstance().findFileByIoFile(parentFile);
      if (vFile == null) {
        throw new Exception("Missing virtual file for dir " + parentFile);
      }
      return vFile;
    }
  finally {
      temp.delete();
    }
  }
 catch (  Exception e) {
    throw new VcsException("Unable to locate temporary directory",e);
  }
}
