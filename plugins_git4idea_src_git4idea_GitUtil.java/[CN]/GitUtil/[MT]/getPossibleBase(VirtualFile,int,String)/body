{
  if (file == null || n <= 0 || n > path.length) {
    return null;
  }
  int i=1;
  VirtualFile c=file;
  for (; c != null && i < n; i++, c=c.getParent()) {
    if (!path[n - i].equals(c.getName())) {
      break;
    }
  }
  if (i == n && c != null) {
    return c.getParent();
  }
  return getPossibleBase(file,n - 1,path);
}
