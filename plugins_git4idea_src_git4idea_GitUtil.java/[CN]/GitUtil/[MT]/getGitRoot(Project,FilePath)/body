{
  VirtualFile root=VcsUtil.getVcsRootFor(project,filePath);
  while (root != null) {
    if (root.findFileByRelativePath(".git") != null) {
      return root;
    }
    root=root.getParent();
  }
  throw new IllegalArgumentException("The file " + filePath + " is not under git.");
}
