{
  myDetectionQueue=new MergingUpdateQueue("FrameworkDetectionQueue",500,true,null,myProject);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    myDetectionQueue.setPassThrough(false);
    myDetectionQueue.hideNotify();
  }
  myDetectedFrameworksData=new DetectedFrameworksData(myProject);
  FrameworkDetectionIndex.getInstance().addListener(this,myProject);
  myProject.getMessageBus().connect().subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    @Override public void enteredDumbMode(){
      myDetectionQueue.suspend();
    }
    @Override public void exitDumbMode(){
      myDetectionQueue.resume();
    }
  }
);
}
