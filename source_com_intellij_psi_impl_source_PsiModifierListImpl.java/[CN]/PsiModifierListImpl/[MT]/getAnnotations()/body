{
  if (myCachedAnnotations == null) {
    if (getTreeElement() != null) {
      myCachedAnnotations=(PsiAnnotation[])calcTreeElement().getChildrenAsPsiElements(ANNOTATION_BIT_SET,PSI_ANNOTATION_ARRAY_CONSTRUCTOR);
    }
 else {
      long parentId=((SrcRepositoryPsiElement)getParent()).getRepositoryId();
      DeclarationView view=(DeclarationView)getRepositoryManager().getItemView(parentId);
      String[] annotationStrings=view.getAnnotations(parentId);
      myCachedAnnotations=new PsiAnnotation[annotationStrings.length];
      for (int i=0; i < annotationStrings.length; i++) {
        try {
          myCachedAnnotations[i]=getManager().getElementFactory().createAnnotationFromText(annotationStrings[i],this);
        }
 catch (        IncorrectOperationException e) {
          LOG.error("Bad annotation text in repository: " + annotationStrings[i]);
        }
      }
    }
  }
  return myCachedAnnotations;
}
