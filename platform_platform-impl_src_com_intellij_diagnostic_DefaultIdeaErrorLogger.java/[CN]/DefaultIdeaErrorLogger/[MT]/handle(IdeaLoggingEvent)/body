{
  if (ourLoggerBroken)   return;
  try {
    Throwable throwable=event.getThrowable();
    if (isOOMError(throwable)) {
      processOOMError(throwable);
    }
 else     if (throwable instanceof MappingFailedException) {
      processMappingFailed(event);
    }
 else     if (!ourOomOccurred) {
      MessagePool messagePool=MessagePool.getInstance();
      LogMessage message=messagePool.addIdeFatalMessage(event);
      if (message != null && ApplicationManager.getApplication() != null) {
        ErrorNotifier.notifyUi(message,messagePool);
      }
    }
  }
 catch (  Throwable e) {
    String message=e.getMessage();
    if (message != null && message.contains("Could not initialize class com.intellij.diagnostic.MessagePool") || e instanceof NullPointerException && ApplicationManager.getApplication() == null) {
      ourLoggerBroken=true;
    }
  }
}
