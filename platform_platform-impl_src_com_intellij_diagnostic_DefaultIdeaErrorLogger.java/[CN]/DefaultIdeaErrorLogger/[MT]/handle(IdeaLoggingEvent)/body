{
  if (ourLoggerBroken) {
    return;
  }
  try {
    Throwable throwable=event.getThrowable();
    if (isOOMError(throwable)) {
      processOOMError(throwable);
    }
 else     if (throwable instanceof MappingFailedException) {
      processMappingFailed(event);
    }
 else     if (!ourOomOccured) {
      MessagePool messagePool=MessagePool.getInstance();
      LogMessage message=messagePool.addIdeFatalMessage(event);
      if (message != null && ApplicationManager.getApplication() != null) {
        notifyUi(messagePool,message);
      }
    }
  }
 catch (  Throwable e) {
    if (e.getMessage().contains("Could not initialize class com.intellij.diagnostic.MessagePool") || e instanceof NullPointerException && ApplicationManager.getApplication() == null) {
      ourLoggerBroken=true;
    }
    e.printStackTrace();
  }
}
