{
  if (!detectStartRevision())   return myStartNumber;
  SVNRepository repository=null;
  long latestOk=myStartNumber;
  try {
    repository=myVcs.createRepository(myUrl.toString());
    final SVNURL repRoot=repository.getRepositoryRoot(true);
    if (repRoot != null) {
      if (myEndNumber == -1) {
        myEndNumber=repository.getLatestRevision();
      }
      final String urlString=myUrl.toString().substring(repRoot.toString().length());
      for (long i=myStartNumber + 1; i < myEndNumber; i++) {
        final SVNNodeKind kind=repository.checkPath(urlString,i);
        if (SVNNodeKind.DIR.equals(kind) || SVNNodeKind.FILE.equals(kind)) {
          latestOk=i;
        }
      }
    }
  }
 catch (  SVNException e) {
  }
 finally {
    if (repository != null) {
      repository.closeSession();
    }
  }
  return latestOk;
}
