import encoding
import gettext, sys, os
if hasattr(sys, 'frozen'):
    module = sys.executable
else:
    module = __file__
base = os.path.dirname(module)
for dir in ('.', '..'):
    localedir = os.path.join(base, dir, 'locale')
    if os.path.isdir(localedir):
        break
t = gettext.translation('hg', localedir, fallback=True)
if ('HGPLAIN' in os.environ):
    _ = (lambda message: message)
else:
    _ = gettext
