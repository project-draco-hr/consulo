{
  while (true) {
    processQueue();
    MyReference<K,V> newRef=new MyReference<K,V>(key,value,myQueue);
    MyReference<K,V> oldRef=myMap.putIfAbsent(key,newRef);
    if (oldRef == null)     return null;
    final V oldVal=oldRef.get();
    if (oldVal == null) {
      if (myMap.replace(key,oldRef,newRef))       return null;
    }
 else {
      return oldVal;
    }
  }
}
