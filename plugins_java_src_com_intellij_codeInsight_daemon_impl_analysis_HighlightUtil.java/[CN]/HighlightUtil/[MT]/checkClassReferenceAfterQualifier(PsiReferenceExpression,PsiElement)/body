{
  if (!(resolved instanceof PsiClass))   return null;
  final PsiExpression qualifier=expression.getQualifierExpression();
  if (qualifier == null)   return null;
  if (qualifier instanceof PsiReferenceExpression) {
    PsiElement qualifierResolved=((PsiReferenceExpression)qualifier).resolve();
    if (qualifierResolved instanceof PsiClass || qualifierResolved instanceof PsiPackage)     return null;
  }
  String description=JavaErrorMessages.message("expected.class.or.package");
  HighlightInfo info=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(qualifier).descriptionAndTooltip(description).create();
  QuickFixAction.registerQuickFixAction(info,QUICK_FIX_FACTORY.createRemoveQualifierFix(qualifier,expression,(PsiClass)resolved));
  return info;
}
