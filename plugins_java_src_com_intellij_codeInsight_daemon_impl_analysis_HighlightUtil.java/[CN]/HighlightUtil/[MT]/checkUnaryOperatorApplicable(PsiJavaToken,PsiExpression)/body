{
  if (token != null && expression != null && !TypeConversionUtil.isUnaryOperatorApplicable(token,expression)) {
    PsiType type=expression.getType();
    if (type == null)     return null;
    String message=JavaErrorMessages.message("unary.operator.not.applicable",token.getText(),JavaHighlightUtil.formatType(type));
    PsiElement parentExpr=token.getParent();
    HighlightInfo highlightInfo=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(parentExpr).descriptionAndTooltip(message).create();
    if (parentExpr instanceof PsiPrefixExpression && token.getTokenType() == JavaTokenType.EXCL) {
      QuickFixAction.registerQuickFixAction(highlightInfo,QUICK_FIX_FACTORY.createNegationBroadScopeFix((PsiPrefixExpression)parentExpr));
    }
    return highlightInfo;
  }
  return null;
}
