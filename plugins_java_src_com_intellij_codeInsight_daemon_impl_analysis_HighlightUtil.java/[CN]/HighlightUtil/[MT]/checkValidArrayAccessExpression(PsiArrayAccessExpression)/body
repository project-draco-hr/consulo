{
  final PsiExpression arrayExpression=arrayAccessExpression.getArrayExpression();
  final PsiType arrayExpressionType=arrayExpression.getType();
  if (arrayExpressionType != null && !(arrayExpressionType instanceof PsiArrayType)) {
    final String description=JavaErrorMessages.message("array.type.expected",JavaHighlightUtil.formatType(arrayExpressionType));
    final HighlightInfo info=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(arrayExpression).descriptionAndTooltip(description).create();
    QuickFixAction.registerQuickFixAction(info,QUICK_FIX_FACTORY.createReplaceWithListAccessFix(arrayAccessExpression));
    return info;
  }
  final PsiExpression indexExpression=arrayAccessExpression.getIndexExpression();
  return indexExpression != null ? checkAssignability(PsiType.INT,indexExpression.getType(),indexExpression,indexExpression) : null;
}
