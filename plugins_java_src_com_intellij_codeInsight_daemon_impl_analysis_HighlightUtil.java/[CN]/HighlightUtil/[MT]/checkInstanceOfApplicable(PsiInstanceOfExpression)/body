{
  PsiExpression operand=expression.getOperand();
  PsiTypeElement typeElement=expression.getCheckType();
  if (typeElement == null)   return null;
  PsiType checkType=typeElement.getType();
  PsiType operandType=operand.getType();
  if (operandType == null)   return null;
  if (operandType instanceof PsiLambdaExpressionType) {
    return HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip("Lambda expression is not expected here").create();
  }
  if (operandType instanceof PsiMethodReferenceType) {
    return HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip("Method reference expression is not expected here").create();
  }
  if (TypeConversionUtil.isPrimitiveAndNotNull(operandType) || TypeConversionUtil.isPrimitiveAndNotNull(checkType) || !TypeConversionUtil.areTypesConvertible(operandType,checkType)) {
    String message=JavaErrorMessages.message("inconvertible.type.cast",formatType(operandType),formatType(checkType));
    return HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip(message).create();
  }
  return null;
}
