{
  if (place instanceof PsiReferenceExpression) {
    PsiReferenceExpression expression=(PsiReferenceExpression)place;
    while (true) {
      PsiElement resolved=expression.resolve();
      if (resolved instanceof PsiField) {
        PsiField field=(PsiField)resolved;
        PsiClass aClass=field.getContainingClass();
        if (aClass != null && aClass.hasModifierProperty(PsiModifier.PACKAGE_LOCAL) && !JavaPsiFacade.getInstance(aClass.getProject()).arePackagesTheSame(aClass,place)) {
          return aClass;
        }
      }
      PsiExpression qualifier=expression.getQualifierExpression();
      if (!(qualifier instanceof PsiReferenceExpression))       break;
      expression=(PsiReferenceExpression)qualifier;
    }
  }
  return null;
}
