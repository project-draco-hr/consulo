{
  PsiElement parent=expression.getParent();
  if (parent instanceof PsiVariable) {
    PsiVariable variable=(PsiVariable)parent;
    if (variable.getType() instanceof PsiArrayType)     return null;
  }
 else   if (parent instanceof PsiNewExpression || parent instanceof PsiArrayInitializerExpression) {
    return null;
  }
  String description=JavaErrorMessages.message("array.initializer.not.allowed");
  HighlightInfo info=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip(description).create();
  QuickFixAction.registerQuickFixAction(info,QUICK_FIX_FACTORY.createAddNewArrayExpressionFix(expression));
  return info;
}
