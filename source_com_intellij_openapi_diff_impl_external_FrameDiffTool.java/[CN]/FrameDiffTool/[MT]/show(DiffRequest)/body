{
  Collection hints=request.getHints();
  boolean shouldOpenDialog=shouldOpenDialog(hints);
  if (shouldOpenDialog) {
    DialogBuilder builder=new DialogBuilder(request.getProject());
    DiffPanelImpl diffPanel=createDiffPanelIfShouldShow(request,builder.getWindow());
    if (diffPanel == null)     return;
    builder.setCenterPanel(diffPanel.getComponent());
    builder.addDisposable(diffPanel);
    builder.setPreferedFocusComponent(diffPanel.getPreferredFocusedComponent());
    builder.removeAllActions();
    builder.setTitle(request.getWindowTitle());
    builder.setDimensionServiceKey(request.getGroupKey());
    showDiffDialog(builder,hints);
  }
 else {
    FrameWrapper frameWrapper=new FrameWrapper(request.getGroupKey());
    DiffPanelImpl diffPanel=createDiffPanelIfShouldShow(request,frameWrapper.getFrame());
    if (diffPanel == null)     return;
    frameWrapper.setTitle(request.getWindowTitle());
    DiffUtil.initDiffFrame(frameWrapper,diffPanel);
    frameWrapper.show();
  }
}
