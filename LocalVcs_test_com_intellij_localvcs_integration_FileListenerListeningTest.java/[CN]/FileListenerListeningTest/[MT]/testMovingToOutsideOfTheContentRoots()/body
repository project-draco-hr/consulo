{
  vcs.createDirectory("myRoot",null);
  vcs.createFile("myRoot/file",null,null);
  vcs.apply();
  TestVirtualFile f=new TestVirtualFile("file","content",null);
  TestVirtualFile oldParent=new TestVirtualFile("myRoot",null);
  TestVirtualFile newParent=new TestVirtualFile("anotherRoot",null);
  newParent.addChild(f);
  filter.setFilesNotUnderContentRoot(newParent);
  fireMoved(f,oldParent,newParent);
  assertFalse(vcs.hasEntry("myRoot/file"));
  assertFalse(vcs.hasEntry("anotherRoot/file"));
}
