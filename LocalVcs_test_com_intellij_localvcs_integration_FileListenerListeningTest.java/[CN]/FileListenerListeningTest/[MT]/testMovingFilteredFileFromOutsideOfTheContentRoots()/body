{
  vcs.createDirectory("myRoot");
  TestVirtualFile f=new TestVirtualFile("file","content",-1);
  TestVirtualFile oldParent=new TestVirtualFile("anotherRoot");
  TestVirtualFile newParent=new TestVirtualFile("myRoot");
  newParent.addChild(f);
  filter.setFilesNotUnderContentRoot(oldParent);
  filter.setNotAllowedFiles(f);
  fireMoved(f,oldParent,newParent);
  assertFalse(vcs.hasEntry("myRoot/file"));
}
