{
  vcs.createDirectory("dir1",null);
  vcs.createDirectory("dir2",null);
  vcs.createFile("dir1/file",b("content"),null);
  vcs.apply();
  TestVirtualFile oldParent=new TestVirtualFile("dir1",null);
  TestVirtualFile newParent=new TestVirtualFile("dir2",null);
  TestVirtualFile f=new TestVirtualFile("file",null,null);
  newParent.addChild(f);
  fireMoved(f,oldParent,newParent);
  assertFalse(vcs.hasEntry("dir1/file"));
  Entry e=vcs.findEntry("dir2/file");
  assertNotNull(e);
  assertEquals(c("content"),e.getContent());
}
