{
  final ShapeTransform shaper=shape.path.copy().reset();
  final Insets paintBorder=shape.path.transformInsets(myBorder.getEffectiveBorder());
  int topY=shape.labelPath.getMaxY() + shape.labelPath.deltaY(1);
  int bottomY=topY + paintBorder.top - 2;
  int middleY=topY + (bottomY - topY) / 2;
  final int boundsX=shape.path.getX() + shape.path.deltaX(shape.insets.left);
  final int boundsY=isHideTabs() ? shape.path.getY() + shape.path.deltaY(shape.insets.top) : shape.labelPath.getMaxY() + shape.path.deltaY(1);
  final int boundsHeight=Math.abs(shape.path.getMaxY() - boundsY) - shape.insets.bottom - paintBorder.bottom;
  final int boundsWidth=Math.abs(shape.path.getMaxX() - (shape.insets.left + shape.insets.right));
  if (paintBorder.top > 0) {
    if (isHideTabs()) {
      if (isToDrawBorderIfTabsHidden()) {
        g2d.setColor(borderColor);
        g2d.fill(shaper.reset().doRect(boundsX,boundsY,boundsWidth,1).getShape());
      }
    }
 else {
      Color tabFillColor=getActiveTabFillIn();
      if (tabFillColor == null) {
        tabFillColor=shape.path.transformY1(shape.to,shape.from);
      }
      g2d.setColor(tabFillColor);
      g2d.fill(shaper.reset().doRect(boundsX,topY + shape.path.deltaY(1),boundsWidth,paintBorder.top - 1).getShape());
      if (paintBorder.top > 1) {
        g2d.setColor(borderColor);
        final int topLine=topY + shape.path.deltaY(paintBorder.top - 1);
        g2d.draw(shaper.reset().doRect(boundsX,topLine,boundsWidth - 1,1).getShape());
      }
    }
  }
  g2d.setColor(borderColor);
  g2d.fill(shaper.reset().doRect(boundsX,Math.abs(shape.path.getMaxY() - shape.insets.bottom - paintBorder.bottom),boundsWidth,paintBorder.bottom).getShape());
  g2d.fill(shaper.reset().doRect(boundsX,boundsY,paintBorder.left,boundsHeight).getShape());
  g2d.fill(shaper.reset().doRect(shape.path.getMaxX() - shape.insets.right - paintBorder.right,boundsY,paintBorder.right,boundsHeight).getShape());
}
