{
  try {
    final Max max=computeMaxSize();
    myHeaderFitSize=new Dimension(getSize().width,myHorizontalSide ? Math.max(max.myLabel.height,max.myToolbar.height) : max.myLabel.height);
    if (mySingleRow) {
      layoutSingleRow();
      myLastTableLayout=null;
    }
 else {
      layoutTable();
      myLastSingRowLayout=null;
    }
    if (isStealthModeEffective()) {
      final JBTabsImpl.TabLabel label=myInfo2Label.get(getSelectedInfo());
      final Rectangle bounds=label.getBounds();
      final Insets insets=getLayoutInsets();
      label.setBounds(bounds.x,bounds.y,getWidth() - insets.right - insets.left,bounds.height);
    }
  }
  finally {
    myForcedRelayout=false;
  }
}
