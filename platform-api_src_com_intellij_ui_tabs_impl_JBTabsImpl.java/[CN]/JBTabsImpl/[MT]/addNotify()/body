{
  super.addNotify();
  try {
    if (myActionManager != null && !myListenerAdded) {
      myActionManager.addTimerListener(500,this);
      myListenerAdded=true;
    }
    if (!myTestMode) {
      final IdeGlassPane gp=IdeGlassPaneUtil.find(this);
      if (gp != null) {
        gp.addMouseMotionPreprocessor(myTabActionsAutoHideListener,this);
        myGlassPane=gp;
      }
    }
    if (myProject == null) {
      final Project project=tryToFindProject();
      if (project != null) {
        myProject=project;
        if (myParent == null) {
          myParent=project;
          Disposer.register(myParent,JBTabsImpl.this);
        }
        if (myParent == null) {
          myParent=myProject;
          Disposer.register(myParent,this);
        }
        if (myFocusManager == PassThroughtIdeFocusManager.getInstance()) {
          myFocusManager=IdeFocusManager.getInstance(myProject);
        }
      }
    }
    if (!myWasEverShown) {
      UIUtil.addAwtListener(new AWTEventListener(){
        public void eventDispatched(        final AWTEvent event){
          if (mySingleRowLayout.myMorePopup != null)           return;
          processFocusChange();
        }
      }
,FocusEvent.FOCUS_EVENT_MASK,JBTabsImpl.this);
      new MouseDragHelper(this,this){
        protected void processDrag(        MouseEvent event,        Point dragToScreenPoint){
          JBTabsImpl.this.processDrag(event,dragToScreenPoint);
        }
      }
.start();
    }
  }
  finally {
    myWasEverShown=true;
  }
}
