{
  final Insets border=myBorder.getEffectiveBorder();
  int topY=y + 1;
  int bottomY=y + border.top - 2;
  int middleY=topY + (bottomY - topY) / 2;
  if (border.top > 0) {
    if (isHideTabs()) {
      if (isToDrawBorderIfTabsHidden()) {
        g2d.setColor(borderColor);
        g2d.drawLine(x,y,x + width - 1,y);
      }
    }
 else     if (isStealthModeEffective()) {
      g2d.setColor(borderColor);
      g2d.drawLine(x,y - 1,x + width - 1,y - 1);
    }
 else     if (getActiveTabFillIn() == null) {
      if (border.top > 1) {
        g2d.setColor(Color.white);
        g2d.fillRect(x,topY,width,bottomY - topY);
        g2d.setColor(fillTo);
        g2d.fillRect(x,topY,width,middleY - topY);
        final Color relfectionStartColor=isFocused ? UIUtil.toAlpha(UIUtil.getListSelectionBackground().darker(),125) : UIUtil.toAlpha(borderColor,75);
        g2d.setPaint(new GradientPaint(x,middleY,relfectionStartColor,x,bottomY,UIUtil.toAlpha(Color.white,255)));
        g2d.fillRect(x,middleY,width,bottomY - middleY);
        g2d.setColor(UIUtil.toAlpha(Color.white,100));
        g2d.drawLine(x,topY,x + width - 1,topY);
        g2d.setColor(Color.lightGray);
        g2d.drawLine(x,bottomY,x + width - 1,bottomY);
      }
 else       if (border.top == 1) {
        g2d.setColor(borderColor);
        g2d.drawLine(x,y,x + width - 1,y);
      }
    }
 else {
      g2d.setColor(getActiveTabFillIn());
      g2d.fillRect(x,topY,width,border.top);
      if (border.top > 1) {
        g2d.setColor(borderColor);
        final int topLine=topY + border.top - 2;
        g2d.drawLine(x,topLine,x + width - 1,topLine);
      }
    }
  }
  g2d.setColor(borderColor);
  g2d.fillRect(x,y + height - border.bottom,width,border.bottom);
  g2d.fillRect(x,y,border.left,height);
  g2d.fillRect(x + width - border.right,y,border.right,height);
}
