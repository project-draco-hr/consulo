{
  hasFocus=comboBox.hasFocus();
  final GraphicsConfig config=new GraphicsConfig(g);
  if (!comboBox.isEditable()) {
    Rectangle r=rectangleForCurrentValue();
    paintCurrentValueBackground(g,r,hasFocus);
    paintCurrentValue(g,r,hasFocus);
    g.setColor(ColorUtil.fromHex("939393").darker());
    final int xxx=c.getWidth() - c.getBorder().getBorderInsets(c).right - arrowButton.getWidth();
    g.drawLine(xxx,hasFocus ? 2 : 1,xxx,c.getHeight() - (hasFocus ? 3 : 0));
  }
 else {
    g.setColor(editor.getBackground());
    ((Graphics2D)g).setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    ((Graphics2D)g).setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,RenderingHints.VALUE_STROKE_NORMALIZE);
    g.fillRoundRect(1,1,c.getWidth() - 2,c.getHeight() - 2,5,5);
    g.setColor(ColorUtil.fromHex("939393"));
    final int xxx=editor.getWidth() + c.getBorder().getBorderInsets(c).left;
    g.drawLine(xxx,hasFocus ? 3 : 1,xxx,c.getHeight() - (hasFocus ? 2 : 0));
    editor.repaint();
  }
  config.restore();
}
