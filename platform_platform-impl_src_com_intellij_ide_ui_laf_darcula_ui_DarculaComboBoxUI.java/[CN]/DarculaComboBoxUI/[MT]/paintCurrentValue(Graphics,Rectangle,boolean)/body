{
  ListCellRenderer renderer=comboBox.getRenderer();
  Component c;
  if (hasFocus && !isPopupVisible(comboBox)) {
    c=renderer.getListCellRendererComponent(listBox,comboBox.getSelectedItem(),-1,false,false);
  }
 else {
    c=renderer.getListCellRendererComponent(listBox,comboBox.getSelectedItem(),-1,false,false);
    c.setBackground(UIManager.getColor("ComboBox.background"));
  }
  c.setFont(comboBox.getFont());
  if (hasFocus && !isPopupVisible(comboBox)) {
    c.setForeground(listBox.getForeground());
    c.setBackground(listBox.getBackground());
  }
 else {
    if (comboBox.isEnabled()) {
      c.setForeground(comboBox.getForeground());
      c.setBackground(comboBox.getBackground());
    }
 else {
      c.setForeground(DefaultLookup.getColor(comboBox,this,"ComboBox.disabledForeground",null));
      c.setBackground(DefaultLookup.getColor(comboBox,this,"ComboBox.disabledBackground",null));
    }
  }
  boolean shouldValidate=false;
  if (c instanceof JPanel) {
    shouldValidate=true;
  }
  Rectangle r=new Rectangle(bounds);
  if (myPadding != null) {
    r.x+=myPadding.left;
    r.y+=myPadding.top;
    r.width-=myPadding.left + myPadding.right;
    r.height-=myPadding.top + myPadding.bottom;
  }
  currentValuePane.paintComponent(g,c,comboBox,r.x,r.y,r.width,r.height,shouldValidate);
}
