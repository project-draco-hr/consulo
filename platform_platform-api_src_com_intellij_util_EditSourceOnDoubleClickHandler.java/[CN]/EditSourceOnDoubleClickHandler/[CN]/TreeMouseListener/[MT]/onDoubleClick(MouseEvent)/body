{
  final TreePath path=myTree.getUI() instanceof MacTreeUI ? myTree.getClosestPathForLocation(e.getX(),e.getY()) : myTree.getPathForLocation(e.getX(),e.getY());
  if (path == null)   return false;
  final DataContext dataContext=DataManager.getInstance().getDataContext(myTree);
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null)   return false;
  final TreePath selectionPath=myTree.getSelectionPath();
  if (selectionPath == null)   return false;
  final Object lastPathComponent=selectionPath.getLastPathComponent();
  if (((TreeNode)lastPathComponent).isLeaf() || !expandOnDoubleClick(((TreeNode)lastPathComponent))) {
    processDoubleClick(e,dataContext,(TreeNode)lastPathComponent);
    return true;
  }
  return false;
}
