{
  final TreePath clickPath=myTree.getUI() instanceof WideSelectionTreeUI ? myTree.getClosestPathForLocation(e.getX(),e.getY()) : myTree.getPathForLocation(e.getX(),e.getY());
  if (clickPath == null)   return false;
  final DataContext dataContext=DataManager.getInstance().getDataContext(myTree);
  final Project project=CommonDataKeys.PROJECT.getData(dataContext);
  if (project == null)   return false;
  final TreePath selectionPath=myTree.getSelectionPath();
  if (selectionPath == null || !clickPath.equals(selectionPath))   return false;
  final Object lastPathComponent=selectionPath.getLastPathComponent();
  if (((TreeNode)lastPathComponent).isLeaf() || !expandOnDoubleClick(((TreeNode)lastPathComponent))) {
    processDoubleClick(e,dataContext,(TreeNode)lastPathComponent);
    return true;
  }
  return false;
}
