{
  final Collection<FileEditor> fileEditors=openEditor(descriptor,focusEditor);
  for (  FileEditor fileEditor : fileEditors) {
    if (fileEditor instanceof TextEditor) {
      setSelectedEditor(descriptor.getFile(),TextEditorProvider.getInstance().getEditorTypeId());
      Editor editor=((TextEditor)fileEditor).getEditor();
      PsiFile psiFile=PsiDocumentManager.getInstance(getProject()).getPsiFile(editor.getDocument());
      return focusEditor ? InjectedLanguageUtil.getEditorForInjectedLanguage(editor,psiFile) : editor;
    }
  }
  return null;
}
