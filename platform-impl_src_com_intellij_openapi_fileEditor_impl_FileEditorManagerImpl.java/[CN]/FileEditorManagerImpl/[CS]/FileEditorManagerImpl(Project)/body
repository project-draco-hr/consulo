{
  myProject=project;
  myFileStatusListener=new MyFileStatusListener();
  myEditorPropertyChangeListener=new MyEditorPropertyChangeListener();
  myVirtualFileListener=new MyVirtualFileListener();
  myUISettingsListener=new MyUISettingsListener();
  myListenerList=new MessageListenerList<FileEditorManagerListener>(myProject.getMessageBus(),FileEditorManagerListener.FILE_EDITOR_MANAGER);
  project.getMessageBus().connect().subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    public void beforeEnteringDumbMode(){
      Set<VirtualFile> toClose=new HashSet<VirtualFile>();
      for (      FileEditor editor : getAllEditors()) {
        if (editor.getUserData(DUMB_AWARE) != Boolean.TRUE) {
          ContainerUtil.addIfNotNull(getFile(editor),toClose);
        }
      }
      for (      final VirtualFile file : toClose) {
        closeFile(file);
      }
    }
    public void enteredDumbMode(){
    }
    public void exitDumbMode(){
    }
  }
);
}
