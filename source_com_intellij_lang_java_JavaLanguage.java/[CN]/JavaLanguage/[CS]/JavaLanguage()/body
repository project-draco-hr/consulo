{
  super("JAVA","text/java","application/x-java","text/x-java");
  SyntaxHighlighterFactory.LANGUAGE_FACTORY.addExpicitExtension(this,new SyntaxHighlighterFactory(){
    @NotNull public SyntaxHighlighter getSyntaxHighlighter(    final Project project,    final VirtualFile virtualFile){
      LanguageLevel languageLevel;
      if (project != null && virtualFile != null) {
        final Module module=ProjectRootManager.getInstance(project).getFileIndex().getModuleForFile(virtualFile);
        if (module != null) {
          languageLevel=LanguageLevelUtil.getEffectiveLanguageLevel(module);
        }
 else {
          languageLevel=LanguageLevel.HIGHEST;
        }
      }
 else {
        languageLevel=LanguageLevel.HIGHEST;
      }
      return new JavaFileHighlighter(languageLevel);
    }
  }
);
}
