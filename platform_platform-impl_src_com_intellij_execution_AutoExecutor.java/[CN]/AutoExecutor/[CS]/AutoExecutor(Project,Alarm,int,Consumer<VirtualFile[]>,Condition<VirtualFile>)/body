{
  this.project=project;
  this.alarm=alarm;
  this.delay=delay;
  this.consumer=consumer;
  this.documentChangedFilter=documentChangedFilter;
  listener=new MyDocumentAdapter();
  project.getMessageBus().connect().subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener(){
    @Override public void before(    @NotNull List<? extends VFileEvent> events){
    }
    @Override public void after(    @NotNull List<? extends VFileEvent> events){
      for (      VFileEvent event : events) {
        if (event instanceof VFileDeleteEvent) {
synchronized (changedFiles) {
            changedFiles.remove(event.getFile());
          }
        }
      }
    }
  }
);
}
