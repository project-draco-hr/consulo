{
  ArrayList<VirtualFile> result=new ArrayList<VirtualFile>();
  TreePath[] selectionPaths=myTree.getSelectionPaths();
  if (selectionPaths != null) {
    for (    TreePath selectionPath : selectionPaths) {
      AbstractTreeNode treeNode=(AbstractTreeNode)selectionPath.getLastPathComponent();
      result.addAll(treeNode.getVirtualFiles());
    }
  }
  if (result.isEmpty())   return VirtualFile.EMPTY_ARRAY;
  return result.toArray(new VirtualFile[result.size()]);
}
