{
  ArrayList<VirtualFile> result=new ArrayList<VirtualFile>();
  TreePath[] selectionPaths=myTree.getSelectionPaths();
  if (selectionPaths != null) {
    for (int i=0; i < selectionPaths.length; i++) {
      TreePath selectionPath=selectionPaths[i];
      AbstractTreeNode treeNode=(AbstractTreeNode)selectionPath.getLastPathComponent();
      result.addAll(treeNode.getVirtualFiles());
    }
  }
  if (result.isEmpty())   return VirtualFile.EMPTY_ARRAY;
  return (VirtualFile[])result.toArray(new VirtualFile[result.size()]);
}
