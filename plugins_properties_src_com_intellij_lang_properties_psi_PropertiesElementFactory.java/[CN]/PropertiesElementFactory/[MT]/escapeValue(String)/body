{
  StringBuilder escapedName=new StringBuilder(value.length());
  for (int i=0; i < value.length(); i++) {
    char c=value.charAt(i);
    if (c == '\n' && (i == 0 || value.charAt(i - 1) != '\\') || i == value.length() - 1 && (c == ' ' || c == '\t')) {
      escapedName.append('\\');
    }
    escapedName.append(c);
  }
  return escapedName.toString();
}
