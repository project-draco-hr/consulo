{
  return new FileReferenceSet(text,element,offset,this,true,myEndingSlashNotAllowed){
    @Override protected boolean isSoft(){
      return soft;
    }
    @Override public boolean isAbsolutePathReference(){
      return true;
    }
    @Override public boolean couldBeConvertedTo(    boolean relative){
      return !relative;
    }
    @Override public boolean absoluteUrlNeedsStartSlash(){
      final String s=getPathString();
      return s != null && s.length() > 0 && s.charAt(0) == '/';
    }
    @Override @NotNull public Collection<PsiFileSystemItem> computeDefaultContexts(){
      Set<PsiFileSystemItem> systemItems=new HashSet<PsiFileSystemItem>();
      if (forModules.length > 0) {
        for (        Module forModule : forModules) {
          systemItems.addAll(getRoots(forModule,true));
        }
      }
 else {
        systemItems.addAll(getRoots(ModuleUtil.findModuleForPsiElement(getElement()),true));
      }
      return systemItems;
    }
    @Override public FileReference createFileReference(    final TextRange range,    final int index,    final String text){
      return FilePathReferenceProvider.this.createFileReference(this,range,index,text);
    }
    @Override protected Condition<PsiFileSystemItem> getReferenceCompletionFilter(){
      return new Condition<PsiFileSystemItem>(){
        @Override public boolean value(        final PsiFileSystemItem element){
          return isPsiElementAccepted(element);
        }
      }
;
    }
  }
.getAllReferences();
}
