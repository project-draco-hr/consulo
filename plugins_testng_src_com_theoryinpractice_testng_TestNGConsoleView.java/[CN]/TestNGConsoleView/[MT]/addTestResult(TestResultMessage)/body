{
  if (testNGResults != null) {
    List<Printable> list=null;
    int exceptionMark=0;
    if (result.getResult() == MessageHelper.TEST_STARTED) {
      mark();
    }
 else {
      String stackTrace=result.getStackTrace();
      if (stackTrace != null && stackTrace.length() > 10) {
        exceptionMark=allOutput.size() - mark;
        String trimmed=trimStackTrace(stackTrace);
        List<Printable> printables=getPrintables(result,trimmed,ConsoleViewContentType.ERROR_OUTPUT);
synchronized (allOutput) {
          allOutput.addAll(printables);
        }
      }
      list=getPrintablesSinceMark();
    }
    testNGResults.addTestResult(result,list,exceptionMark);
  }
}
