{
  final DataContext dataContext=event.getDataContext();
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return;
  }
  VirtualFile file=event.getData(PlatformDataKeys.VIRTUAL_FILE);
  VirtualFile repo=file != null ? HgUtil.getHgRootOrNull(project,file) : null;
  List<VirtualFile> repos=HgUtil.getHgRepositories(project);
  if (!repos.isEmpty()) {
    execute(project,repos,repo);
  }
 else {
    VcsBalloonProblemNotifier.showOverChangesView(project,"No Mercurial repositories in the project",MessageType.ERROR);
  }
}
