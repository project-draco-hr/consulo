{
  final DataContext dataContext=event.getDataContext();
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return;
  }
  HgGlobalCommand command=getHgGlobalCommandBuilder(project).build(HgUtil.getHgRepositories(project));
  if (command == null) {
    return;
  }
  try {
    command.execute();
    HgUtil.markDirectoryDirty(project,command.getRepo());
  }
 catch (  HgCommandException e) {
    handleException(project,e);
  }
catch (  InvocationTargetException e) {
    handleException(project,e);
  }
catch (  InterruptedException e) {
    handleException(project,e);
  }
}
