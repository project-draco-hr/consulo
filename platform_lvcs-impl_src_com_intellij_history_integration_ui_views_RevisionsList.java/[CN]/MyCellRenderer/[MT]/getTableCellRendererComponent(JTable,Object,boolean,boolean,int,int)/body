{
  if (value == null)   return myWrapperPanel;
  Revision r=(Revision)value;
  LabelsAndColor labelsAndColor=getLabelsAndColor(r);
  final Period p=((MyModel)table.getModel()).getPeriod(r);
  if (p == null) {
    myPeriodLabel.setVisible(false);
  }
 else {
    myPeriodLabel.setVisible(true);
    myPeriodLabel.setCaption(p.getDisplayString());
  }
  myBorder.set(row == table.getModel().getRowCount() - 1);
  myDateLabel.setText(ensureString(StringUtil.formatDate(r.getTimestamp(),FormatUtil.FORMAT)));
  String text=ensureString(labelsAndColor.titleText);
  if (r.getChangeSetName() != null) {
    text="<html><b>" + text + "</b></html>";
  }
  myTitleLabel.setText(text);
  myFilesNumberLabel.setText(ensureString(labelsAndColor.filesNumberText));
  JComponent orig=(JComponent)myTemplate.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
  Color bg=isSelected ? orig.getBackground() : labelsAndColor.color;
  Color fg=isSelected ? orig.getForeground() : Color.GRAY;
  myItemPanel.setBackground(bg);
  myDateLabel.setForeground(fg);
  myFilesNumberLabel.setForeground(fg);
  myTitleLabel.setForeground(orig.getForeground());
  myWrapperPanel.setBackground(table.getBackground());
  return myWrapperPanel;
}
