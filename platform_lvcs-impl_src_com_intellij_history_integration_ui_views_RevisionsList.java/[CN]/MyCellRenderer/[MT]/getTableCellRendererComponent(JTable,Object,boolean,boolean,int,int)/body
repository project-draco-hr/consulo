{
  Revision r=(Revision)value;
  LabelsAndColor labelsAndColor=getLabelsAndColor(r);
  final Period p=((MyModel)table.getModel()).getPeriod(r);
  if (p == null) {
    myPeriodLabel.setVisible(false);
  }
 else {
    myPeriodLabel.setVisible(true);
    myPeriodLabel.setCaption(p.getDisplayString());
  }
  myBorder.set(table.getGridColor(),p != null,row == table.getModel().getRowCount() - 1);
  myDateLabel.setText(ensureString(FormatUtil.formatTimestamp(r.getTimestamp())));
  myTitleLabel.setText(ensureString(labelsAndColor.titleText));
  myFilesNumberLabel.setText(ensureString(labelsAndColor.filesNumberText));
  JComponent templ=(JComponent)myTemplate.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
  Color bg=isSelected ? templ.getBackground() : labelsAndColor.color;
  Color fg=isSelected ? templ.getForeground() : Color.GRAY;
  myItemPanel.setBackground(bg);
  myDateLabel.setForeground(fg);
  myFilesNumberLabel.setForeground(fg);
  myTitleLabel.setForeground(templ.getForeground());
  myWrapperPanel.setBackground(table.getBackground());
  return myWrapperPanel;
}
