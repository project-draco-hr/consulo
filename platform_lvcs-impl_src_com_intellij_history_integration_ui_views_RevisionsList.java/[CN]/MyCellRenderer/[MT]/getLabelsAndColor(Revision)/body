{
  Color color=null;
  String title=r.getLabel();
  if (title == null) {
    title=r.getChangeSetName();
    if (title != null)     color=PINK;
  }
 else {
    color=BLUE;
  }
  final Pair<List<String>,Integer> affected=r.getAffectedFileNames();
  String filesNumber="";
  if (affected.second > 0) {
    String message=LocalHistoryBundle.message("revisions.table.filesCount",affected.second);
    filesNumber=StringUtil.pluralize(message,affected.second);
  }
  if (title == null) {
    title=StringUtil.join(affected.first,", ");
    if (affected.first.size() < affected.second)     title+="...";
  }
  if (r.getLabelColor() != -1)   color=new Color(r.getLabelColor());
  return new LabelsAndColor(title,filesNumber,color);
}
