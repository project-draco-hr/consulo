{
  myToolTipHandler=toolTipHandler;
  JPanel headersPanel=new JPanel(new BorderLayout());
  headersPanel.setOpaque(false);
  headersPanel.add(myPeriodLabel,BorderLayout.NORTH);
  headersPanel.add(myLabelPanel,BorderLayout.CENTER);
  myLabelContainer.add(myLabelLabel);
  myLabelPanel.setLayout(new AbstractLayoutManager(){
    @Override public Dimension preferredLayoutSize(    Container parent){
      Insets i=parent.getInsets();
      Dimension pref=myLabelContainer.getPreferredSize();
      return new Dimension(pref.width + i.left + i.right,pref.height + i.top + i.bottom);
    }
    @Override public void layoutContainer(    Container parent){
      Insets i=parent.getInsets();
      int pw=parent.getWidth() - i.left - i.right;
      Dimension pref=myLabelContainer.getPreferredSize();
      int w=Math.min(pw,pref.width);
      int h=pref.height;
      int x=i.left + pw - w;
      int y=i.top;
      myLabelContainer.setBounds(x,y,w,h);
    }
  }
);
  myLabelPanel.setOpaque(false);
  myLabelPanel.add(myLabelContainer);
  final JPanel layoutPanel=new JPanel(new BorderLayout());
  layoutPanel.setOpaque(false);
  layoutPanel.add(headersPanel,BorderLayout.NORTH);
  layoutPanel.add(myItemPanel,BorderLayout.CENTER);
  myWrapperPanel.add(layoutPanel);
  myWrapperPanel.setLayout(new AbstractLayoutManager(){
    @Override public Dimension preferredLayoutSize(    Container parent){
      return layoutPanel.getPreferredSize();
    }
    @Override public void layoutContainer(    Container parent){
      Dimension size=parent.getSize();
      Insets i=parent.getInsets();
      Dimension pref=layoutPanel.getPreferredSize();
      if (isToolTipShown) {
        layoutPanel.setBounds(i.left,i.top,Math.max(pref.width,size.width - i.left - i.right),pref.height);
      }
 else {
        layoutPanel.setBounds(i.left,i.top,size.width - i.left - i.right,pref.height);
      }
    }
  }
);
  myItemPanel.setBorder(myBorder);
  myItemPanel.setLayout(new BorderLayout());
  JPanel north=new JPanel(new BorderLayout());
  north.setOpaque(false);
  north.add(myDateLabel,BorderLayout.WEST);
  north.add(myFilesCountLabel,BorderLayout.EAST);
  JPanel south=new JPanel(new BorderLayout());
  south.add(myTitleLabel,BorderLayout.CENTER);
  south.setOpaque(false);
  myItemPanel.add(north,BorderLayout.NORTH);
  myItemPanel.add(south,BorderLayout.SOUTH);
  myLabelLabel.setBorder(new EmptyBorder(0,5,1,5));
  myLabelPanel.setBorder(new MyBorder(new Insets(4,20,3,1)));
  myWrapperPanel.setOpaque(false);
  myItemPanel.setOpaque(true);
  myWrapperPanel.setBackground(table.getBackground());
  Font f=myDateLabel.getFont();
  Font smallFont=f.deriveFont(Math.max(8.f,f.getSize() * 0.8f));
  myDateLabel.setFont(smallFont);
  myFilesCountLabel.setFont(smallFont);
  smallFont=f.deriveFont(Math.max(9.f,f.getSize() * 0.9f));
  myLabelLabel.setFont(smallFont);
  myTitleLabel.setFont(smallFont);
}
