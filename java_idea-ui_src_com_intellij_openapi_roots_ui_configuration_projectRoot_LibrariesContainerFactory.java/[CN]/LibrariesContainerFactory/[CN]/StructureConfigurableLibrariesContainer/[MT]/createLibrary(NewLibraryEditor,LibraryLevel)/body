{
  LibraryTableModifiableModelProvider provider=getProvider(level);
  if (provider == null) {
    LOG.error("cannot create module library in this context");
  }
  LibraryTable.ModifiableModel model=provider.getModifiableModel();
  Library library=model.createLibrary(getUniqueLibraryName(libraryEditor.getName(),model));
  ExistingLibraryEditor createdLibraryEditor=((LibrariesModifiableModel)model).getLibraryEditor(library);
  libraryEditor.copyRoots(createdLibraryEditor);
  return library;
}
