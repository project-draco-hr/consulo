{
  LibraryTableBase.ModifiableModelEx modifiableModel=(LibraryTableBase.ModifiableModelEx)table.getModifiableModel();
  Library library=modifiableModel.createLibrary(getUniqueLibraryName(editor.getName(),modifiableModel),editor.getType());
  final Library.ModifiableModel model=library.getModifiableModel();
  editor.applyRoots(model);
  ((LibraryEx.ModifiableModelEx)model).setProperties(editor.getProperties());
  model.commit();
  modifiableModel.commit();
  return library;
}
