{
  LibraryTableBase.ModifiableModelEx modifiableModel=(LibraryTableBase.ModifiableModelEx)table.getModifiableModel();
  final String name=StringUtil.isEmpty(editor.getName()) ? null : getUniqueLibraryName(editor.getName(),modifiableModel);
  Library library=modifiableModel.createLibrary(name,editor.getType());
  final LibraryEx.ModifiableModelEx model=(LibraryEx.ModifiableModelEx)library.getModifiableModel();
  editor.applyTo(model);
  model.commit();
  modifiableModel.commit();
  return library;
}
