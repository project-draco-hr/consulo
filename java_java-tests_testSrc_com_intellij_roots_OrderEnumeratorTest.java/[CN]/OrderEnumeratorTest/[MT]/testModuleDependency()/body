{
  final Module dep=createModule("dep");
  final VirtualFile srcRoot=addSourceRoot(dep,false);
  final VirtualFile testRoot=addSourceRoot(dep,true);
  final VirtualFile output=setModuleOutput(dep,false);
  final VirtualFile testOutput=setModuleOutput(dep,true);
  addLibraryDependency(dep,createJDomLibrary(),DependencyScope.COMPILE,true);
  addModuleDependency(myModule,dep,DependencyScope.COMPILE,true);
  assertClassRoots(orderEntries(myModule).withoutSdk(),testOutput,output);
  assertClassRoots(orderEntries(myModule).withoutSdk().recursively(),testOutput,output,getJDomJar());
  assertSourceRoots(orderEntries(myModule),srcRoot,testRoot);
  assertSourceRoots(orderEntries(myModule).recursively(),srcRoot,testRoot,getJDomSources());
  assertEnumeratorRoots(orderEntries(myModule).withoutSdk().recursively().classes().withoutSelfModuleOutput(),testOutput,output,getJDomJar());
}
