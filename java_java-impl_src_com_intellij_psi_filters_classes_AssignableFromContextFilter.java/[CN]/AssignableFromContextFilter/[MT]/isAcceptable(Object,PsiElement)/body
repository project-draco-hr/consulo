{
  if (myCurrentContext.get() != context) {
    myCurrentContext=new SoftReference(context);
    PsiElement cachedClass=context;
    while (cachedClass != null && !(cachedClass instanceof PsiClass))     cachedClass=cachedClass.getContext();
    myCachedClass=new SoftReference(cachedClass);
  }
  if (myCachedClass.get() instanceof PsiClass && element instanceof PsiClass) {
    final String qualifiedName=((PsiClass)myCachedClass.get()).getQualifiedName();
    return qualifiedName != null && (qualifiedName.equals(((PsiClass)element).getQualifiedName()) || ((PsiClass)element).isInheritor((PsiClass)myCachedClass.get(),true));
  }
  return false;
}
