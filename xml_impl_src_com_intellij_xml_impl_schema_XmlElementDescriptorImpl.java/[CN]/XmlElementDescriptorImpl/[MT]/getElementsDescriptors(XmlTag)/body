{
  XmlElementDescriptor[] elementsDescriptors=getElementsDescriptors();
  final TypeDescriptor type=getType();
  if (type instanceof ComplexTypeDescriptor) {
    final ComplexTypeDescriptor descriptor=(ComplexTypeDescriptor)type;
    String contextNs;
    if (context != null && (descriptor.canContainTag(context.getLocalName(),contextNs=context.getNamespace()) && (!contextNs.equals(getNS()) || descriptor.hasAnyFromOwnNs()))) {
      final XmlNSDescriptor nsDescriptor=getNSDescriptor();
      if (nsDescriptor != null) {
        elementsDescriptors=ArrayUtil.mergeArrays(elementsDescriptors,nsDescriptor.getRootElementsDescriptors(((XmlFile)context.getContainingFile()).getDocument()),XmlElementDescriptor.class);
      }
    }
  }
  return elementsDescriptors;
}
