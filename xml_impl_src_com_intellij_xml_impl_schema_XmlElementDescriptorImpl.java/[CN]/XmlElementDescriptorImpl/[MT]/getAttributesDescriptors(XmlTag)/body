{
  TypeDescriptor type=getType();
  if (type instanceof ComplexTypeDescriptor) {
    ComplexTypeDescriptor typeDescriptor=(ComplexTypeDescriptor)type;
    XmlAttributeDescriptor[] attributeDescriptors=typeDescriptor.getAttributes();
    if (context != null) {
      final String contextNs=context.getNamespace();
      final XmlDocument doc=PsiTreeUtil.getParentOfType(context,XmlDocument.class);
      for (      String ns : context.knownNamespaces()) {
        if (!contextNs.equals(ns) && ns.length() > 0) {
          if (typeDescriptor.canContainAttribute("any",ns) != ComplexTypeDescriptor.CanContainAttributeType.CanNotContain) {
            final XmlNSDescriptor descriptor=context.getNSDescriptor(ns,true);
            if (descriptor instanceof XmlNSDescriptorImpl) {
              attributeDescriptors=ArrayUtil.mergeArrays(attributeDescriptors,((XmlNSDescriptorImpl)descriptor).getRootAttributeDescriptors(context),XmlAttributeDescriptor.class);
            }
          }
        }
      }
    }
    return attributeDescriptors;
  }
  return XmlAttributeDescriptor.EMPTY;
}
