{
  if (psi instanceof PsiDirectory || psi instanceof PsiDirectoryContainer) {
    return psi;
  }
  final PsiFile file=psi.getContainingFile();
  if (file != null) {
    return file;
  }
  throw new AssertionError("The element should be in a file: " + psi);
}
