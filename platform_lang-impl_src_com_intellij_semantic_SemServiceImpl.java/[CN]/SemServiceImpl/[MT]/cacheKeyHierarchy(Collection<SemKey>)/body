{
  final MultiMap<SemKey,SemKey> result=new MultiMap<SemKey,SemKey>();
  ContainerUtil.process(allKeys,new Processor<SemKey>(){
    public boolean process(    SemKey key){
      result.putValue(key,key);
      for (      SemKey parent : key.getSupers()) {
        result.putValue(parent,key);
        process(parent);
      }
      return true;
    }
  }
);
  for (  final SemKey each : result.keySet()) {
    final List<SemKey> inheritors=new ArrayList<SemKey>(result.get(each));
    Collections.sort(inheritors,KEY_COMPARATOR);
    result.put(each,inheritors);
  }
  return result;
}
