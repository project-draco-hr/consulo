{
  final MultiMap<SemKey,SemKey> result=MultiMap.createSmartList();
  ContainerUtil.process(allKeys,new Processor<SemKey>(){
    @Override public boolean process(    SemKey key){
      result.putValue(key,key);
      for (      SemKey parent : key.getSupers()) {
        result.putValue(parent,key);
        process(parent);
      }
      return true;
    }
  }
);
  for (  final SemKey each : result.keySet()) {
    final List<SemKey> inheritors=new ArrayList<SemKey>(new HashSet<SemKey>(result.get(each)));
    Collections.sort(inheritors,KEY_COMPARATOR);
    result.put(each,inheritors);
  }
  return result;
}
