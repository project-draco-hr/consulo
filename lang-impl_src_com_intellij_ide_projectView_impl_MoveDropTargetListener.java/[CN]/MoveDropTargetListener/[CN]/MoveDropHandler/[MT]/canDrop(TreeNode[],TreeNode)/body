{
  if (targetNode instanceof DefaultMutableTreeNode) {
    final Object userObject=((DefaultMutableTreeNode)targetNode).getUserObject();
    if (userObject instanceof DropTargetNode && ((DropTargetNode)userObject).canDrop(sourceNodes)) {
      return true;
    }
  }
  final PsiElement[] sourceElements=getPsiElements(sourceNodes);
  final PsiElement targetElement=getPsiElement(targetNode);
  return sourceElements.length == 0 || ((targetNode == null || targetElement != null) && fromSameProject(sourceElements,targetElement) && MoveHandler.canMove(sourceElements,targetElement));
}
