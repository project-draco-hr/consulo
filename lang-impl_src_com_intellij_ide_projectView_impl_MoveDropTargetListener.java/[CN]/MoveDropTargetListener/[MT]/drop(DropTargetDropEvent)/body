{
  final TreeNode[] sourceNodes=getSourceNodes(dtde.getTransferable());
  final TreeNode targetNode=getTargetNode(dtde.getLocation());
  final int dropAction=dtde.getDropAction();
  if ((dropAction & DnDConstants.ACTION_COPY_OR_MOVE) == 0 || sourceNodes == null || targetNode == null || !doDrop(sourceNodes,targetNode,dropAction,dtde)) {
    dtde.rejectDrop();
  }
}
