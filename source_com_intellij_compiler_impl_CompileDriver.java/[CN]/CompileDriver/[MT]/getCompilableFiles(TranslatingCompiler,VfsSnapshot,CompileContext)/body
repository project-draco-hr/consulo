{
  final Set<VirtualFile> result=new HashSet<VirtualFile>();
  for (Iterator<String> iterator=snapshot.getUrlsIterator(); iterator.hasNext(); ) {
    final String url=iterator.next();
    final VirtualFile file=snapshot.getFileByUrl(url);
    if (compiler.isCompilableFile(file,context)) {
      result.add(file);
    }
  }
  return result.toArray(new VirtualFile[result.size()]);
}
