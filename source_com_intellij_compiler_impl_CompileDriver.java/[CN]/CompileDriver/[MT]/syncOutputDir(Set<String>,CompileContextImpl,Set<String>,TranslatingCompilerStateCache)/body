{
  boolean wereFilesDeleted=false;
  DeleteHelper deleteHelper=new DeleteHelper(myProject);
  int current=0;
  int total=toDelete.size();
  final DependencyCache dependencyCache=context.getDependencyCache();
  final boolean isTestMode=ApplicationManager.getApplication().isUnitTestMode();
  context.getProgressIndicator().pushState();
  try {
    context.getProgressIndicator().setText("Synchronizing output directory...");
    for (Iterator it=toDelete.iterator(); it.hasNext(); ) {
      final String outputPath=(String)it.next();
      context.getProgressIndicator().setFraction(((double)(++current)) / total);
      if (deleteHelper.delete(outputPath)) {
        wereFilesDeleted=true;
        String qName=cache.getClassName(outputPath);
        if (qName != null) {
          final int id=dependencyCache.getSymbolTable().getId(qName);
          dependencyCache.addTraverseRoot(id);
          if (urlsWithSourceRemoved.contains(outputPath)) {
            dependencyCache.markSourceRemoved(id);
          }
        }
        if (isTestMode) {
          CompilerManagerImpl.addDeletedPath(outputPath);
        }
        cache.remove(outputPath);
      }
    }
    deleteHelper.finish();
    return wereFilesDeleted;
  }
  finally {
    context.getProgressIndicator().popState();
  }
}
