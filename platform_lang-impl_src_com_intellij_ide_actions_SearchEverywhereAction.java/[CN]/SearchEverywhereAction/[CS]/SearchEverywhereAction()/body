{
  myContentPanel=new JPanel(new BorderLayout());
  myContentPanel.setOpaque(false);
  mySearchLabel=new JBLabel(AllIcons.Actions.FindPlain){
{
      enableEvents(AWTEvent.MOUSE_EVENT_MASK);
      enableEvents(AWTEvent.MOUSE_MOTION_EVENT_MASK);
      setToolTipText("<html><body>Search Everywhere<br/>Press <b>" + KeymapUtil.getShortcutText(CustomShortcutSet.fromString("shift SPACE").getShortcuts()[0]) + "</b> to access<br/> - Classes<br/> - Files<br/> - Tool Windows<br/> - Actions<br/> - Settings</body></html>");
    }
  }
;
  mySearchLabel.addMouseListener(new MouseAdapter(){
    @Override public void mousePressed(    MouseEvent e){
      mySearchLabel.setIcon(AllIcons.Actions.FindPlain);
      myContentPanel.remove(mySearchLabel);
      field.getTextEditor().setColumns(SEARCH_FIELD_COLUMNS);
      myContentPanel.add(field,BorderLayout.CENTER);
      myContentPanel.revalidate();
      myContentPanel.repaint();
      IdeFocusManager.findInstanceByComponent(field.getTextEditor()).requestFocus(field.getTextEditor(),true);
    }
    @Override public void mouseEntered(    MouseEvent e){
      mySearchLabel.setIcon(AllIcons.Actions.Find);
    }
    @Override public void mouseExited(    MouseEvent e){
      mySearchLabel.setIcon(AllIcons.Actions.FindPlain);
    }
  }
);
  createSearchField();
  LafManager.getInstance().addLafManagerListener(new LafManagerListener(){
    @Override public void lookAndFeelChanged(    LafManager source){
      createSearchField();
    }
  }
);
  myRenderer=new MyListRenderer();
  myList.setCellRenderer(myRenderer);
  myList.addMouseListener(new MouseAdapter(){
    @Override public void mouseClicked(    MouseEvent e){
      final int i=myList.locationToIndex(e.getPoint());
      if (i != -1) {
        myList.setSelectedIndex(i);
        doNavigate(i);
      }
    }
  }
);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      onFocusLost(field.getTextEditor());
    }
  }
);
}
