{
  DataManager.registerDataProvider(panel,new DataProvider(){
    @Nullable @Override public Object getData(    @NonNls String dataId){
      final Object value=myList.getSelectedValue();
      if (CommonDataKeys.PSI_ELEMENT.is(dataId) && value instanceof PsiElement) {
        return value;
      }
 else       if (CommonDataKeys.VIRTUAL_FILE.is(dataId) && value instanceof VirtualFile) {
        return value;
      }
      return null;
    }
  }
);
}
