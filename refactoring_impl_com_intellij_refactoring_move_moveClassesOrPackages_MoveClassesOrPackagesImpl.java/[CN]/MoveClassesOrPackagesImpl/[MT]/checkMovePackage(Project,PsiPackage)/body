{
  final PsiDirectory[] directories=aPackage.getDirectories();
  final VirtualFile[] virtualFiles=aPackage.occursInPackagePrefixes();
  if (directories.length > 1 || virtualFiles.length > 0) {
    final StringBuffer message=new StringBuffer();
    RenameUtil.buildPackagePrefixChangedMessage(virtualFiles,message,aPackage.getQualifiedName());
    if (directories.length > 1) {
      RenameUtil.buildMultipleDirectoriesInPackageMessage(message,aPackage,directories);
      message.append("\n\n");
      String report=RefactoringBundle.message("all.these.directories.will.be.moved.and.all.references.to.0.will.be.changed",aPackage.getQualifiedName());
      message.append(report);
    }
    message.append("\n");
    message.append(RefactoringBundle.message("do.you.wish.to.continue"));
    int ret=Messages.showYesNoDialog(project,message.toString(),RefactoringBundle.message("warning.title"),Messages.getWarningIcon());
    if (ret != 0) {
      return false;
    }
  }
  return true;
}
