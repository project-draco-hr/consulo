{
  Project project=e.getProject();
  if (project == null) {
    return;
  }
  final MultilinePopupBuilder popupBuilder=new MultilinePopupBuilder(project,myVariants,getPopupText(mySelectedValues));
  JBPopup popup=popupBuilder.createPopup();
  popup.addListener(new JBPopupAdapter(){
    @Override public void onClosed(    LightweightWindowEvent event){
      if (event.isOk()) {
        Collection<String> selectedValues=popupBuilder.getSelectedValues();
        if (selectedValues.isEmpty()) {
          apply(null,ALL,ALL);
        }
 else {
          apply(selectedValues,displayableText(selectedValues),tooltip(selectedValues));
        }
      }
    }
  }
);
  popup.showUnderneathOf(MultipleValueFilterPopupComponent.this);
}
