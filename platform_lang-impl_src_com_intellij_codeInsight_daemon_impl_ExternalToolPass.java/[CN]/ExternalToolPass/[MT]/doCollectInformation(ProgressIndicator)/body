{
  myDocumentChanged=false;
  final FileViewProvider viewProvider=myFile.getViewProvider();
  final Set<Language> relevantLanguages=viewProvider.getLanguages();
  for (  Language language : relevantLanguages) {
    PsiFile psiRoot=viewProvider.getPsi(language);
    if (!HighlightLevelUtil.shouldInspect(psiRoot))     continue;
    final List<ExternalAnnotator> externalAnnotators=ExternalLanguageAnnotators.allForFile(language,psiRoot);
    if (!externalAnnotators.isEmpty()) {
      boolean errorFound=((DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(myProject)).getFileStatusMap().wasErrorFound(myDocument);
      if (errorFound)       return;
      for (      ExternalAnnotator externalAnnotator : externalAnnotators) {
        externalAnnotator.annotate(psiRoot,myAnnotationHolder);
        final Object collectedInfo=externalAnnotator.collectionInformation(psiRoot);
        if (collectedInfo != null) {
          myAnnotator2DataMap.put(externalAnnotator,new MyData(psiRoot,collectedInfo));
        }
      }
    }
  }
}
