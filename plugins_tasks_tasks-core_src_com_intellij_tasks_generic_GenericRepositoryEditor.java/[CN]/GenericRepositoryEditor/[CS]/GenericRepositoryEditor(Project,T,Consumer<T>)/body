{
  super(project,repository,changeListener);
  myTest2Button.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      afterTestConnection(TaskManager.getManager(project).testConnection(repository));
    }
  }
);
  myLoginAnonymouslyJBCheckBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    final ActionEvent e){
      loginUrlEnablingChanged();
    }
  }
);
  myUseHttpAuthenticationCheckBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    final ActionEvent e){
      loginUrlEnablingChanged();
    }
  }
);
switch (myRepository.getResponseType()) {
case XML:
    myXmlRadioButton.setSelected(true);
  myHtmlRadioButton.setSelected(false);
myJsonRadioButton.setSelected(false);
break;
case HTML:
myXmlRadioButton.setSelected(false);
myHtmlRadioButton.setSelected(true);
myJsonRadioButton.setSelected(false);
break;
case JSON:
myXmlRadioButton.setSelected(false);
myHtmlRadioButton.setSelected(false);
myJsonRadioButton.setSelected(true);
break;
}
ActionListener listener=new ActionListener(){
@Override public void actionPerformed(final ActionEvent e){
responseTypeChanged();
}
}
;
myXmlRadioButton.addActionListener(listener);
myHtmlRadioButton.addActionListener(listener);
myJsonRadioButton.addActionListener(listener);
myLoginMethodTypeComboBox.setSelectedItem(myRepository.getLoginMethodType());
myTasksListMethodTypeComboBox.setSelectedItem(myRepository.getTasksListMethodType());
installListener(myLoginMethodTypeComboBox);
installListener(myTasksListMethodTypeComboBox);
installListener(myTasksListURLText.getDocument());
installListener(myLoginURLText.getDocument());
installListener(myTaskPatternText.getDocument());
String useCompletionText=". Use " + KeymapUtil.getFirstKeyboardShortcutText(ActionManager.getInstance().getAction(IdeActions.ACTION_CODE_COMPLETION)) + " for completion.";
myLoginTooltip.setText("<html>Available placeholders: " + SERVER_URL_PLACEHOLDER + ", "+ USERNAME_PLACEHOLDER+ ", "+ PASSWORD_PLACEHOLDER+ useCompletionText+ "</html>");
myTaskListTooltip.setText("<html>Available placeholders: " + SERVER_URL_PLACEHOLDER + ", "+ MAX_COUNT_PLACEHOLDER+ ", "+ QUERY_PLACEHOLDER+ " (use for faster tasks search)"+ useCompletionText+ "</html>");
myTaskPatternTooltip.setText("<html>Task pattern should be a regexp with two matching groups: ({id}.+?) and ({summary}.+?)" + useCompletionText + "</html>");
myTabbedPane.addTab("Additional",myPanel);
myManageTemplateVariablesButton.addActionListener(new ActionListener(){
@Override public void actionPerformed(final ActionEvent e){
final ManageTemplateVariablesDialog dialog=new ManageTemplateVariablesDialog(myManageTemplateVariablesButton);
dialog.setTemplateVariables(myRepository.getTemplateVariables());
if (dialog.showAndGet()) {
myRepository.setTemplateVariables(dialog.getTemplateVariables());
}
}
}
);
myResetToDefaultsButton.addActionListener(new ActionListener(){
@Override public void actionPerformed(final ActionEvent e){
myRepository.resetToDefaults();
reset(myRepository.clone());
}
}
);
loginUrlEnablingChanged();
}
