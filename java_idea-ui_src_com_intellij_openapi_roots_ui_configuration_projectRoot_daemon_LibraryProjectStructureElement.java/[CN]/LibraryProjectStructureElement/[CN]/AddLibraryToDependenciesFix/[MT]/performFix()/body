{
  final Project project=myContext.getProject();
  final ModuleStructureConfigurable moduleStructureConfigurable=ModuleStructureConfigurable.getInstance(project);
  final List<Module> modules=LibraryEditingUtil.getSuitableModules(moduleStructureConfigurable,((LibraryEx)myLibrary).getType());
  if (modules.isEmpty())   return;
  final ChooseModulesDialog dlg=new ChooseModulesDialog(project,modules,ProjectBundle.message("choose.modules.dialog.title"),ProjectBundle.message("choose.modules.dialog.description",myLibrary.getName()));
  dlg.show();
  if (dlg.isOK()) {
    final List<Module> chosenModules=dlg.getChosenElements();
    for (    Module module : chosenModules) {
      moduleStructureConfigurable.addLibraryOrderEntry(module,myLibrary);
    }
  }
}
