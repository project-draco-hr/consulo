{
  LOG.assertTrue(!isDispatchThread());
  final Semaphore semaphore=new Semaphore();
  semaphore.down();
  Runnable runnable1=new Runnable(){
    @Override public void run(){
      try {
        runnable.run();
      }
  finally {
        semaphore.up();
      }
    }
    @NonNls public String toString(){
      return "InvokeAndWait[" + runnable + "]";
    }
  }
;
  invokeLater(runnable1,modalityState);
  semaphore.waitFor();
}
