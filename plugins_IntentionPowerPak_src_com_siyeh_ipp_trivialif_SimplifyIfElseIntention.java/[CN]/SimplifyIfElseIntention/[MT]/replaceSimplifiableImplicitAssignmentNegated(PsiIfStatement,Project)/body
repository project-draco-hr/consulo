{
  final PsiElement prevStatement=PsiTreeUtil.skipSiblingsBackward(statement,new Class[]{PsiWhiteSpace.class});
  final PsiExpression condition=statement.getCondition();
  final String conditionText=BoolUtils.getNegatedExpressionText(condition);
  final PsiStatement thenBranch=statement.getThenBranch();
  final PsiExpressionStatement assignmentStatement=(PsiExpressionStatement)ConditionalUtils.stripBraces(thenBranch);
  final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)assignmentStatement.getExpression();
  final PsiJavaToken operator=assignmentExpression.getOperationSign();
  final String operand=operator.getText();
  final PsiExpression lhs=assignmentExpression.getLExpression();
  final String lhsText=lhs.getText();
  replaceStatement(project,lhsText + operand + conditionText+ ';',statement);
  prevStatement.delete();
}
