{
  super(parent,true);
  if (bundle == null) {
    throw new IllegalArgumentException();
  }
  if (bundleName == null) {
    throw new IllegalArgumentException();
  }
  myBundleName=bundleName;
  setTitle("Chooser Value");
  myPairs=new ArrayList<Pair<String,String>>();
  final List<Property> properties=bundle.getProperties();
  for (  Property property : properties) {
    final String key=property.getKey();
    final String value=property.getValue();
    if (key != null) {
      myPairs.add(new Pair<String,String>(key,value != null ? value : "null"));
    }
  }
  Collections.sort(myPairs,new MyPairComparator());
  final MyTableModel model=new MyTableModel();
  myTable=new Table(model);
  myTable.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  new MySpeedSearch(myTable);
  myCenterPanel=ScrollPaneFactory.createScrollPane(myTable);
  final FontMetrics metrics=myTable.getFontMetrics(myTable.getFont());
  int width=0;
  for (int i=myPairs.size() - 1; i >= 0; i--) {
    final Pair<String,String> pair=myPairs.get(i);
    width=Math.max(width,metrics.stringWidth(pair.getFirst()));
  }
  width+=30;
  width=Math.max(width,metrics.stringWidth(model.getColumnName(0)));
  final TableColumn keyColumn=myTable.getColumnModel().getColumn(0);
  keyColumn.setMaxWidth(width);
  keyColumn.setMinWidth(width);
  int indexToPreselect=-1;
  for (int i=myPairs.size() - 1; i >= 0; i--) {
    final Pair<String,String> pair=myPairs.get(i);
    if (pair.getFirst().equals(keyToPreselect)) {
      indexToPreselect=i;
      break;
    }
  }
  if (indexToPreselect != -1) {
    selectElementAt(indexToPreselect);
  }
  init();
}
