{
  XDebuggerTree tree=getTree();
  XDebugSession session=getSession(tree);
  XExpression[] expressions;
  if (session != null) {
    expressions=((XDebugSessionImpl)session).getSessionData().getWatchExpressions();
  }
 else {
    XDebuggerTreeNode root=tree.getRoot();
    List<? extends WatchNode> current=root instanceof WatchesRootNode ? ((WatchesRootNode)tree.getRoot()).getWatchChildren() : Collections.<WatchNode>emptyList();
    List<XExpression> list=ContainerUtil.newArrayList();
    for (    WatchNode child : current) {
      list.add(child.getExpression());
    }
    expressions=list.toArray(new XExpression[list.size()]);
  }
  return expressions;
}
