{
  setRepositoryPath(new File(myDir,"/repo").getPath());
  updateSettingsXml("<localRepository>" + getRepositoryPath() + "</localRepository>");
  VirtualFile parent=createModulePom("parent","<groupId>test</groupId>" + "<artifactId>parent</artifactId>" + "<packaging>pom</packaging>"+ "<version>1</version>"+ "<dependencyManagement>"+ "  <dependencies>"+ "    <dependency>"+ "      <groupId>junit</groupId>"+ "      <artifactId>junit</artifactId>"+ "      <version>4.0</version>"+ "    </dependency>"+ "  </dependencies>"+ "</dependencyManagement>");
  VirtualFile project=createModulePom("project","<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<parent>"+ "  <groupId>test</groupId>"+ "  <artifactId>parent</artifactId>"+ "  <version>1</version>"+ "</parent>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>junit</groupId>"+ "    <artifactId>junit</artifactId>"+ "  </dependency>"+ "</dependencies>");
  importProjects(parent,project);
  assertModules("parent","project");
  assertModuleLibDeps("project","Maven: junit:junit:4.0");
  myProjectsManager.getEmbeddersManagerInTests().reset();
  myProjectsManager.scheduleResolveInTests(Arrays.asList(myProjectsManager.findProject(parent),myProjectsManager.findProject(project)));
  myProjectsManager.waitForResolvingCompletion();
  assertModuleLibDeps("project","Maven: junit:junit:4.0");
}
