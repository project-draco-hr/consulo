{
  final PsiCallExpression callExpression;
  if (delegate.isConstructor()) {
    PsiElement callStatement=myFactory.createStatementFromText("this();",null);
    callStatement=CodeStyleManager.getInstance(myProject).reformat(callStatement);
    callStatement=delegate.getBody().add(callStatement);
    callExpression=(PsiCallExpression)((PsiExpressionStatement)callStatement).getExpression();
  }
 else {
    if (PsiType.VOID.equals(delegate.getReturnType())) {
      PsiElement callStatement=myFactory.createStatementFromText(myChangeInfo.newName + "();",null);
      callStatement=CodeStyleManager.getInstance(myProject).reformat(callStatement);
      callStatement=delegate.getBody().add(callStatement);
      callExpression=(PsiCallExpression)((PsiExpressionStatement)callStatement).getExpression();
    }
 else {
      PsiElement callStatement=myFactory.createStatementFromText("return " + myChangeInfo.newName + "();",null);
      callStatement=CodeStyleManager.getInstance(myProject).reformat(callStatement);
      callStatement=delegate.getBody().add(callStatement);
      callExpression=(PsiCallExpression)((PsiReturnStatement)callStatement).getReturnValue();
    }
  }
  return callExpression;
}
