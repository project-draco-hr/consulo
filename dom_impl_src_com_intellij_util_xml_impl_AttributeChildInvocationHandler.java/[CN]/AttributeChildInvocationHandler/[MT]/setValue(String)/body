{
  final XmlTag tag=ensureTagExists();
  final String attributeName=getXmlElementName();
  final String namespace=getXmlElementNamespace();
  final String oldValue=StringUtil.unescapeXml(tag.getAttributeValue(attributeName,namespace));
  final String newValue=XmlStringUtil.escapeString(value);
  if (Comparing.equal(oldValue,newValue))   return;
  getManager().runChange(new Runnable(){
    public void run(){
      try {
        XmlAttribute attribute=tag.setAttribute(attributeName,namespace,newValue);
        setXmlElement(attribute);
        getManager().cacheHandler(attribute,AttributeChildInvocationHandler.this);
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
    }
  }
);
  final DomElement proxy=getProxy();
  getManager().fireEvent(oldValue != null ? new ElementChangedEvent(proxy) : new ElementDefinedEvent(proxy));
}
