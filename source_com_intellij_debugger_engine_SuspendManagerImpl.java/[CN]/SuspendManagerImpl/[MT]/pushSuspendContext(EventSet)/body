{
  SuspendContextImpl suspendContext=new SuspendContextImpl(myDebugProcess,set.suspendPolicy(),set.size(),set){
    protected void resumeImpl(){
      if (LOG.isDebugEnabled()) {
        LOG.debug("Start resuming eventSet " + set.toString() + " suspendPolicy = "+ set.suspendPolicy()+ ",size = "+ set.size());
      }
      myDebugProcess.logThreads();
      final ThreadReferenceProxyImpl thread=getThread();
      LOG.assertTrue(thread != null ? thread.isSuspended() : true);
      try {
        set.resume();
      }
 catch (      InternalException e) {
        if (Patches.MAC_RESUME_VM_HACK && e.errorCode() == 13 && set.suspendPolicy() == EventRequest.SUSPEND_ALL) {
          set.resume();
        }
 else {
          LOG.error(e);
        }
      }
      if (LOG.isDebugEnabled()) {
        LOG.debug("Set resumed ");
      }
      myDebugProcess.logThreads();
    }
  }
;
  pushContext(suspendContext);
  return suspendContext;
}
