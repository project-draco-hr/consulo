{
  MavenWorkspaceSettings settings=project.getComponent(MavenWorkspaceSettingsComponent.class).getState();
  settings.generalSettings=getGeneralSettings();
  settings.importingSettings=getImportingSettings();
  settings.downloadingSettings=getDownloadingSettings();
  MavenProjectsManager manager=MavenProjectsManager.getInstance(project);
  manager.setManagedFiles(myFiles);
  manager.setActiveProfiles(mySelectedProfiles);
  manager.setImportedMavenProjectModelManager(myMavenProjectTree);
  List<Module> moduleList=manager.commit(model,modulesProvider);
  enusreRepositoryPathMacro();
  return moduleList;
}
