{
  project.getComponent(MavenWorkspaceSettingsComponent.class).getState().generalSettings=getGeneralSettings();
  project.getComponent(MavenWorkspaceSettingsComponent.class).getState().importingSettings=getImportingSettings();
  project.getComponent(MavenWorkspaceSettingsComponent.class).getState().downloadingSettings=getDownloadingSettings();
  MavenProjectsManager manager=MavenProjectsManager.getInstance(project);
  manager.setManagedFiles(myFiles);
  manager.setActiveProfiles(mySelectedProfiles);
  manager.setImportedMavenProjectModelManager(myMavenProjectTree);
  final List<Module> moduleList=manager.commit(model,modulesProvider);
  enusreRepositoryPathMacro();
  return moduleList;
}
