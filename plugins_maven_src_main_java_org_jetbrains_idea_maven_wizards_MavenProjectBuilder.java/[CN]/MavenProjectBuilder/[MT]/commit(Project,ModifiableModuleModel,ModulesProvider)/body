{
  MavenWorkspaceSettings settings=project.getComponent(MavenWorkspaceSettingsComponent.class).getState();
  settings.generalSettings=getGeneralSettings();
  settings.importingSettings=getImportingSettings();
  settings.downloadingSettings=getDownloadingSettings();
  MavenProjectsManager manager=MavenProjectsManager.getInstance(project);
  manager.setManagedFiles(getParameters().myFiles);
  manager.setActiveProfiles(getParameters().mySelectedProfiles);
  manager.setImportedMavenProjectModelManager(getParameters().myMavenProjectTree);
  return manager.commit(model,modulesProvider);
}
