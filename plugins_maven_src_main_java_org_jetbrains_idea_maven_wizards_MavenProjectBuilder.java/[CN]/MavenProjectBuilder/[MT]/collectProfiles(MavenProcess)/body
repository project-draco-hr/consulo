{
  process.setText(ProjectBundle.message("maven.searching.profiles"));
  Set<String> uniqueProfiles=new LinkedHashSet<String>();
  MavenProjectReader reader=new MavenProjectReader();
  MavenGeneralSettings generalSettings=getGeneralSettings();
  MavenProjectReaderProjectLocator locator=new MavenProjectReaderProjectLocator(){
    public VirtualFile findProjectFile(    MavenId coordinates){
      return null;
    }
  }
;
  for (  VirtualFile f : getParameters().myFiles) {
    MavenProject project=new MavenProject(f);
    process.setText2(ProjectBundle.message("maven.reading.pom",f.getPath()));
    project.read(generalSettings,Collections.EMPTY_LIST,reader,locator);
    uniqueProfiles.addAll(project.getProfilesIds());
  }
  getParameters().myProfiles=new ArrayList<String>(uniqueProfiles);
}
