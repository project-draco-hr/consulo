{
  return ApplicationManager.getApplication().runReadAction(new Computable<Project>(){
    @Override public Project compute(){
      Project result=isUpdate() ? getProjectToUpdate() : null;
      if (result == null || result.isDisposed())       result=ProjectManager.getInstance().getDefaultProject();
      return result;
    }
  }
);
}
