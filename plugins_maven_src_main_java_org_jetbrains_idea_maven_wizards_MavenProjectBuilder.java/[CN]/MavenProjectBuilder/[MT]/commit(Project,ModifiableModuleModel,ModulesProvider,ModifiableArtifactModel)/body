{
  MavenWorkspaceSettings settings=MavenWorkspaceSettingsComponent.getInstance(project).getState();
  settings.generalSettings=getGeneralSettings();
  settings.importingSettings=getImportingSettings();
  MavenProjectsManager manager=MavenProjectsManager.getInstance(project);
  manager.addManagedFilesWithProfiles(MavenUtil.collectFiles(getParameters().mySelectedProjects),getSelectedProfiles());
  manager.waitForReadingCompletion();
  boolean isFromUI=model != null;
  return manager.importProjects(isFromUI ? new MavenUIModifiableModelsProvider(project,model,(ModulesConfigurator)modulesProvider,artifactModel) : new MavenDefaultModifiableModelsProvider(project));
}
