{
  super(uiSettings);
  init();
  myActionsPanel.setLayout(new FlowLayout(FlowLayout.LEFT));
  final JButton button=new JButton("Browse repositories...");
  button.setMnemonic('b');
  button.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final PluginManagerConfigurable configurable=createAvailableConfigurable();
      new SingleConfigurableEditor(myActionsPanel,configurable,ShowSettingsUtilImpl.createDimensionKey(configurable),false).show();
    }
  }
);
  myActionsPanel.add(button);
  final JButton installPluginFromFileSystem=new JButton("Install plugin from disk...");
  installPluginFromFileSystem.setMnemonic('d');
  installPluginFromFileSystem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final FileChooserDescriptor descriptor=new FileChooserDescriptor(true,false,true,true,false,false){
        @Override public boolean isFileSelectable(        VirtualFile file){
          final String extension=file.getExtension();
          return Comparing.strEqual(extension,"jar") || Comparing.strEqual(extension,"zip");
        }
      }
;
      descriptor.setTitle("Choose Plugin File");
      descriptor.setDescription("JAR and ZIP archives are accepted");
      final VirtualFile virtualFile=FileChooser.chooseFile(descriptor,myActionsPanel,null,null);
      if (virtualFile != null) {
        final File file=VfsUtil.virtualToIoFile(virtualFile);
        try {
          final IdeaPluginDescriptorImpl pluginDescriptor=PluginDownloader.loadDescriptionFromJar(file);
          if (pluginDescriptor == null) {
            Messages.showErrorDialog("Fail to load plugin descriptor from file " + file.getName(),CommonBundle.getErrorTitle());
            return;
          }
          final IdeaPluginDescriptor alreadyInstalledPlugin=PluginManager.getPlugin(pluginDescriptor.getPluginId());
          if (alreadyInstalledPlugin != null) {
            final File oldFile=alreadyInstalledPlugin.getPath();
            if (oldFile != null) {
              StartupActionScriptManager.addActionCommand(new StartupActionScriptManager.DeleteCommand(oldFile));
            }
          }
          PluginDownloader.install(file,file.getName(),false);
          ((InstalledPluginsTableModel)pluginsModel).appendOrUpdateDescriptor(pluginDescriptor);
          select(pluginDescriptor);
          checkInstalledPluginDependencies(pluginDescriptor);
          setRequireShutdown(true);
        }
 catch (        IOException ex) {
          Messages.showErrorDialog(ex.getMessage(),CommonBundle.getErrorTitle());
        }
      }
    }
  }
);
  myActionsPanel.add(installPluginFromFileSystem);
}
