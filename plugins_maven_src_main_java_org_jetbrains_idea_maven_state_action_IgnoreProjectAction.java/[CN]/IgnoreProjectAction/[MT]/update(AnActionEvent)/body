{
  final Project project=e.getData(DataKeys.PROJECT);
  final MavenProjectsState projectsState=project != null ? project.getComponent(MavenProjectsState.class) : null;
  final VirtualFile[] files=e.getData(DataKeys.VIRTUAL_FILE_ARRAY);
  final boolean enabled=projectsState != null && files != null && isEnabled(projectsState,files);
  e.getPresentation().setEnabled(enabled);
  e.getPresentation().setText((enabled && projectsState.getIgnoredFlag(files[0])) ? StateBundle.message("maven.ignore.clear") : (enabled && projectsState.isIgnored(files[0])) ? StateBundle.message("maven.ignore.edit") : StateBundle.message("maven.ignore"));
}
