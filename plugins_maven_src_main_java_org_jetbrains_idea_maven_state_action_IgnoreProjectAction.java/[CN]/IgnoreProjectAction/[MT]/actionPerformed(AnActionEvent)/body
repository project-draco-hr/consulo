{
  final Project project=e.getData(DataKeys.PROJECT);
  final MavenProjectsState projectsState=project != null ? project.getComponent(MavenProjectsState.class) : null;
  final VirtualFile[] files=e.getData(DataKeys.VIRTUAL_FILE_ARRAY);
  if (projectsState != null && files != null && isEnabled(projectsState,files)) {
    final boolean flag=projectsState.getIgnoredFlag(files[0]);
    if (flag == projectsState.isIgnored(files[0])) {
      for (      VirtualFile file : files) {
        projectsState.setIgnoredFlag(file,!flag);
      }
    }
 else {
      ShowSettingsUtil.getInstance().editConfigurable(project,new MavenIgnoreConfigurable(projectsState));
    }
  }
}
