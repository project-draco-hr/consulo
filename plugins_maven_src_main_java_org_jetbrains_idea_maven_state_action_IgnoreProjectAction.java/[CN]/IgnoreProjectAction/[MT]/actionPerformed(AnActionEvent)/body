{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final MavenProjectsManager projectsManager=project != null ? MavenProjectsManager.getInstance(project) : null;
  final VirtualFile[] files=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
  if (projectsManager != null && files != null && isEnabled(projectsManager,files)) {
    final boolean flag=projectsManager.getIgnoredFlag(files[0]);
    if (flag == projectsManager.isIgnored(files[0])) {
      for (      VirtualFile file : files) {
        projectsManager.setIgnoredFlag(file,!flag);
      }
    }
 else {
      ShowSettingsUtil.getInstance().editConfigurable(project,new MavenIgnoreConfigurable(projectsManager));
    }
  }
}
