{
  runTransformingCompilers(chunk);
  setPresentableNameFor(chunk);
  final List<OutputDir> outs=new ArrayList<OutputDir>();
  File fileToDelete=getOutputDirsToCompileTo(chunk,outs);
  try {
    for (    final OutputDir outputDir : outs) {
      chunk.setSourcesFilter(outputDir.getKind());
      doCompile(chunk,outputDir.getPath());
    }
  }
  finally {
    if (fileToDelete != null && myCompileContext.getMessageCount(CompilerMessageCategory.ERROR) == 0) {
      FileUtil.asyncDelete(fileToDelete);
    }
  }
}
