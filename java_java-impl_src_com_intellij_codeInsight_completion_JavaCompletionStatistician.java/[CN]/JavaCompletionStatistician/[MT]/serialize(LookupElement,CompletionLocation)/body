{
  final Object o=element.getObject();
  if (o instanceof PsiLocalVariable || o instanceof PsiParameter || o instanceof PsiThisExpression) {
    return StatisticsInfo.EMPTY;
  }
  final ExpectedTypeInfo[] infos=JavaCompletionUtil.EXPECTED_TYPES.getValue(location);
  if (infos != null && infos.length > 0) {
    final boolean primitivesOnly=ContainerUtil.and(infos,new Condition<ExpectedTypeInfo>(){
      public boolean value(      final ExpectedTypeInfo info){
        return info.getType() instanceof PsiPrimitiveType;
      }
    }
);
    if (primitivesOnly) {
      return StatisticsInfo.EMPTY;
    }
  }
  LookupItem item=element.as(LookupItem.CLASS_CONDITION_KEY);
  if (item == null)   return null;
  PsiType qualifierType=JavaCompletionUtil.getQualifierType(item);
  if (qualifierType == null) {
    if (infos != null && infos.length > 0) {
      qualifierType=infos[0].getDefaultType();
    }
  }
  final CompletionType type=location.getCompletionType();
  if (o instanceof PsiMember) {
    final boolean isClass=o instanceof PsiClass;
    if (qualifierType != null) {
      if (type == CompletionType.SMART) {
        String context;
        if (isClass) {
          context=JavaStatisticsManager.getAfterNewKey(qualifierType);
        }
 else {
          context=JavaStatisticsManager.getMemberUseKey1(qualifierType);
        }
        return new StatisticsInfo(context,JavaStatisticsManager.getMemberUseKey2((PsiMember)o));
      }
      if (!isClass && type == CompletionType.BASIC)       return JavaStatisticsManager.createInfo(qualifierType,(PsiMember)o);
      return StatisticsInfo.EMPTY;
    }
    if (isClass) {
      return JavaStatisticsManager.createInfo(qualifierType,(PsiMember)o);
    }
  }
  if (qualifierType != null)   return StatisticsInfo.EMPTY;
  return null;
}
