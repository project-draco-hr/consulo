{
  String groupName=toolWrapper.getGroupDisplayName().isEmpty() ? InspectionProfileEntry.GENERAL_GROUP_NAME : toolWrapper.getGroupDisplayName();
  InspectionTreeNode parentNode=getToolParentNode(groupName,errorLevel,groupedBySeverity);
  InspectionNode toolNode=new InspectionNode(toolWrapper);
  boolean showStructure=myGlobalInspectionContext.getUIOptions().SHOW_STRUCTURE;
  myProvider.appendToolNodeContent(myGlobalInspectionContext,toolNode,parentNode,showStructure);
  InspectionToolPresentation presentation=myGlobalInspectionContext.getPresentation(toolWrapper);
  toolNode=presentation.createToolNode(myGlobalInspectionContext,toolNode,myProvider,parentNode,showStructure);
  ((DefaultInspectionToolPresentation)presentation).myToolNode=toolNode;
  registerActionShortcuts(presentation);
  return toolNode;
}
