{
  final InspectionProfile profile=myInspectionProfile;
  final boolean isGroupedBySeverity=myGlobalInspectionContext.getUIOptions().GROUP_BY_SEVERITY;
  myGroups=new HashMap<HighlightDisplayLevel,Map<String,InspectionGroupNode>>();
  final Map<String,Tools> tools=myGlobalInspectionContext.getTools();
  boolean resultsFound=false;
  for (  Tools currentTools : tools.values()) {
    final InspectionTool defaultTool=(InspectionTool)currentTools.getDefaultState().getTool();
    final HighlightDisplayKey key=HighlightDisplayKey.find(defaultTool.getShortName());
    if (profile != null && !profile.isToolEnabled(key)) {
      break;
    }
    for (    ScopeToolState state : currentTools.getTools()) {
      final InspectionTool tool=(InspectionTool)state.getTool();
      if (myProvider.checkReportedProblems(tool)) {
        addTool(tool,((InspectionProfileImpl)profile).getErrorLevel(key,state.getScope(myProject)),isGroupedBySeverity);
        resultsFound=true;
      }
    }
  }
  return resultsFound;
}
