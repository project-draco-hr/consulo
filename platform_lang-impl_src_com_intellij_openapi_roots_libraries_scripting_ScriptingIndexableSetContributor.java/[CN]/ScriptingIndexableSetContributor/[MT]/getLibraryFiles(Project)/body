{
  final THashSet<VirtualFile> libFiles=new THashSet<VirtualFile>();
  LibraryType libType=getLibraryType();
  if (project != null) {
    LibraryTable libTable=ScriptingLibraryManager.getLibraryTable(project,ScriptingLibraryManager.LibraryLevel.GLOBAL);
    if (libTable != null) {
      for (      Library lib : libTable.getLibraries()) {
        if (lib instanceof LibraryEx && libType.equals(((LibraryEx)lib).getType())) {
          libFiles.addAll(Arrays.asList(lib.getFiles(OrderRootType.SOURCES)));
          libFiles.addAll(Arrays.asList(lib.getFiles(OrderRootType.CLASSES)));
        }
      }
    }
  }
  return libFiles;
}
