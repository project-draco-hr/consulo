{
  Editor editor=EditorFactory.getInstance().createEditor(myDocument,myProject);
  ((EditorMarkupModel)editor.getMarkupModel()).setErrorStripeVisible(true);
  EditorHighlighter highlighter=EditorHighlighterFactory.getInstance().createEditorHighlighter(myFile,EditorColorsManager.getInstance().getGlobalScheme(),myProject);
  ((EditorEx)editor).setHighlighter(highlighter);
  ((EditorEx)editor).setFile(myFile);
  editor.addEditorMouseListener(myEditorMouseListener);
  editor.getCaretModel().addCaretListener(myEditorCaretListener);
  ((EditorEx)editor).addPropertyChangeListener(myEditorPropertyChangeListener);
  ((EditorImpl)editor).setDropHandler(new FileDropHandler());
  TextEditorProvider.putTextEditor(editor,myTextEditor);
  return editor;
}
