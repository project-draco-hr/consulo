{
  ArrayList<LocalInspectionToolWrapper> localTools=new ArrayList<LocalInspectionToolWrapper>();
  myJobDescriptors=new ArrayList<JobDescriptor>();
  for (  InspectionTool tool : tools) {
    if (getCurrentProfile().isToolEnabled(HighlightDisplayKey.find(tool.getShortName()))) {
      if (tool instanceof LocalInspectionToolWrapper) {
        LocalInspectionToolWrapper wrapper=(LocalInspectionToolWrapper)tool;
        localTools.add(wrapper);
        appendJobDescriptor(LOCAL_ANALYSIS);
      }
 else {
        JobDescriptor[] jobDescriptors=tool.getJobDescriptors();
        for (        JobDescriptor jobDescriptor : jobDescriptors) {
          appendJobDescriptor(jobDescriptor);
        }
      }
    }
  }
  BUILD_GRAPH.setTotalAmount(scope.getFileCount());
  LOCAL_ANALYSIS.setTotalAmount(scope.getFileCount());
  return localTools;
}
