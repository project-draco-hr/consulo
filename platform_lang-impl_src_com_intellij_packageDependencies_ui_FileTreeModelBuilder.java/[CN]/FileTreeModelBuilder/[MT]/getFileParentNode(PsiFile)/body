{
  VirtualFile vFile=file.getVirtualFile();
  LOG.assertTrue(vFile != null);
  final VirtualFile containingDirectory=vFile.getParent();
  LOG.assertTrue(containingDirectory != null,"physical: " + file.isPhysical() + ", "+ file.getViewProvider().isPhysical());
  return getModuleDirNode(file.getContainingDirectory(),myFileIndex.getModuleForFile(vFile),null);
}
