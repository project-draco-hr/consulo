{
  super(project,true);
  myProject=project;
  myTargetModule=targetModule;
  myTargetClassNameField=new JTextField(targetClassName);
  setPreferredSize(myTargetClassNameField);
  PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
  mySuperClassFieldCodeFragment=factory.createTypeCodeFragment(superClassName,targetPackage,true);
  Document document=PsiDocumentManager.getInstance(myProject).getDocument(mySuperClassFieldCodeFragment);
  mySuperClassField=new EditorTextField(document,myProject,StdFileTypes.JAVA);
  String targetPackageName=targetPackage != null ? targetPackage.getQualifiedName() : "";
  myTargetPackageField=new ReferenceEditorComboWithBrowseButton(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      PackageChooserDialog chooser=new PackageChooserDialog(CodeInsightBundle.message("dialog.create.class.package.chooser.title"),myProject);
      chooser.selectPackage(myTargetPackageField.getText());
      chooser.show();
      PsiPackage aPackage=chooser.getSelectedPackage();
      if (aPackage != null) {
        myTargetPackageField.setText(aPackage.getQualifiedName());
      }
    }
  }
,targetPackageName,PsiManager.getInstance(myProject),false,RECENTS_KEY);
  init();
  setTitle(title);
}
