{
  final SVNWCClient wcClient=mySvnVcs.createWCClient();
  SVNInfo info=wcClient.doInfo(file,SVNRevision.UNDEFINED);
  if (info != null) {
    if (info.getKind() == SVNNodeKind.FILE) {
      wcClient.doRevert(file,false);
    }
 else {
      if (SVNProperty.SCHEDULE_ADD.equals(info.getSchedule())) {
        wcClient.doRevert(file,true);
      }
 else {
        boolean under17Copy=isUnder17Copy(file,info);
        if (under17Copy) {
          wcClient.doRevert(file,true);
        }
 else {
          mySvnVcs.createUpdateClient().doUpdate(file,SVNRevision.HEAD,true);
        }
      }
    }
  }
 else {
    throw new VcsException("Can not get 'svn info' for " + file.getPath());
  }
}
