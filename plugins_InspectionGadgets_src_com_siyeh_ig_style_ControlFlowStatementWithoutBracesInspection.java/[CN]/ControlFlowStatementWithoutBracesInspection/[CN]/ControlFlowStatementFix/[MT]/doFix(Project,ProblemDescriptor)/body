{
  final PsiElement element=descriptor.getPsiElement();
  final PsiElement parent=element.getParent();
  if (!(parent instanceof PsiStatement)) {
    return;
  }
  final PsiStatement statement=(PsiStatement)parent;
  @NonNls final String elementText=element.getText();
  final PsiStatement statementWithoutBraces;
  if (statement instanceof PsiLoopStatement) {
    final PsiLoopStatement loopStatement=(PsiLoopStatement)statement;
    statementWithoutBraces=loopStatement.getBody();
  }
 else   if (statement instanceof PsiIfStatement) {
    final PsiIfStatement ifStatement=(PsiIfStatement)statement;
    if ("if".equals(elementText)) {
      statementWithoutBraces=ifStatement.getThenBranch();
      final PsiElement[] children=ifStatement.getChildren();
      final StringBuilder newStatementText=new StringBuilder();
      for (      PsiElement child : children) {
        if (child != statementWithoutBraces) {
          newStatementText.append(child.getText());
        }
 else {
          newStatementText.append("{\n");
          newStatementText.append(child.getText());
          newStatementText.append("\n}");
        }
      }
      replaceStatement(ifStatement,newStatementText.toString());
      return;
    }
 else {
      statementWithoutBraces=ifStatement.getElseBranch();
    }
  }
 else {
    return;
  }
  if (statementWithoutBraces == null) {
    return;
  }
  final String newStatementText="{\n" + statementWithoutBraces.getText() + "\n}";
  replaceStatement(statementWithoutBraces,newStatementText);
}
