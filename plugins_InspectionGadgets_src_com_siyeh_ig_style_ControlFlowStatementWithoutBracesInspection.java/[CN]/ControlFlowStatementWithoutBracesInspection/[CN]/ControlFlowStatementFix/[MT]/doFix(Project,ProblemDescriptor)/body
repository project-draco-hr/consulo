{
  final PsiElement element=descriptor.getPsiElement();
  final PsiElement parent=element.getParent();
  if (!(parent instanceof PsiStatement)) {
    return;
  }
  final PsiStatement statement=(PsiStatement)parent;
  @NonNls final String elementText=element.getText();
  final PsiStatement statementWithoutBraces;
  if (statement instanceof PsiLoopStatement) {
    final PsiLoopStatement loopStatement=(PsiLoopStatement)statement;
    statementWithoutBraces=loopStatement.getBody();
  }
 else   if (statement instanceof PsiIfStatement) {
    final PsiIfStatement ifStatement=(PsiIfStatement)statement;
    if ("if".equals(elementText)) {
      statementWithoutBraces=ifStatement.getThenBranch();
      if (statementWithoutBraces == null) {
        return;
      }
      final PsiElement nextSibling=statementWithoutBraces.getNextSibling();
      if (nextSibling instanceof PsiWhiteSpace) {
        nextSibling.delete();
      }
    }
 else {
      statementWithoutBraces=ifStatement.getElseBranch();
    }
  }
 else {
    return;
  }
  if (statementWithoutBraces == null) {
    return;
  }
  final String newStatementText="{\n" + statementWithoutBraces.getText() + "\n}";
  replaceStatement(statementWithoutBraces,newStatementText);
}
