{
  final Ref<Boolean> done=new Ref<Boolean>(false);
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      getBuilder().select(elements,new Runnable(){
        @Override public void run(){
          done.set(true);
        }
      }
,addToSelection);
    }
  }
,new Condition(){
    @Override public boolean value(    Object o){
      return done.get() || (canBeInterrupted && getBuilder().getUi().isCancelledReady());
    }
  }
);
}
