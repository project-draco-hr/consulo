{
  if (lexer.getTokenType() == JavaDocTokenType.DOC_INLINE_TAG_START) {
    LeafElement justABrace=ASTFactory.leaf(JavaDocTokenType.DOC_COMMENT_DATA,myContext.tokenText(lexer));
    CompositeElement tag=ASTFactory.composite(JavaDocElementType.DOC_INLINE_TAG);
    final LeafElement leafElement=ASTFactory.leaf(JavaDocTokenType.DOC_INLINE_TAG_START,myContext.tokenText(lexer));
    tag.rawAddChildren(leafElement);
    lexer.advance();
    if (myBraceScope > 0) {
      myBraceScope++;
      return justABrace;
    }
    if (lexer.getTokenType() != JavaDocTokenType.DOC_TAG_NAME && lexer.getTokenType() != JavaDocTokenType.DOC_COMMENT_BAD_CHARACTER) {
      return justABrace;
    }
    myBraceScope++;
    String inlineTagName="";
    while (true) {
      IElementType tokenType=lexer.getTokenType();
      if (tokenType == JavaDocTokenType.DOC_TAG_NAME) {
        inlineTagName=lexer.getBufferSequence().subSequence(lexer.getTokenStart(),lexer.getTokenEnd()).toString();
      }
      if (tokenType == null || tokenType == JavaDocTokenType.DOC_COMMENT_END)       break;
      TreeElement element=parseDataItem(manager,lexer,inlineTagName,true);
      tag.rawAddChildren(element);
      if (tokenType == JavaDocTokenType.DOC_INLINE_TAG_END) {
        if (myBraceScope > 0)         myBraceScope--;
        if (myBraceScope == 0)         break;
      }
    }
    return tag;
  }
 else   if (TAG_VALUE.contains(lexer.getTokenType())) {
    if (SEE_TAG.equals(tagName) && !isInlineItem) {
      return parseSeeTagValue(lexer);
    }
 else     if (LINK_TAG.equals(tagName) && isInlineItem) {
      return parseSeeTagValue(lexer);
    }
 else {
      if (LanguageLevelProjectExtension.getInstance(manager.getProject()).getLanguageLevel().compareTo(LanguageLevel.JDK_1_4) >= 0 && LINKPLAIN_TAG.equals(tagName) && isInlineItem) {
        return parseSeeTagValue(lexer);
      }
 else       if (!isInlineItem && (THROWS_TAG.equals(tagName) || EXCEPTION_TAG.equals(tagName))) {
        final TreeElement element=parseReferenceOrType(lexer,false);
        lexer.advance();
        final CompositeElement tagValue=ASTFactory.composite(JavaDocTokenType.DOC_TAG_VALUE_TOKEN);
        tagValue.rawAddChildren(element);
        return tagValue;
      }
 else       if (!isInlineItem && tagName != null && tagName.equals(PARAM_TAG)) {
        return parseParamTagValue(lexer);
      }
 else {
        if (LanguageLevelProjectExtension.getInstance(manager.getProject()).getLanguageLevel().compareTo(LanguageLevel.JDK_1_5) >= 0 && VALUE_TAG.equals(tagName) && isInlineItem) {
          return parseSeeTagValue(lexer);
        }
 else {
          return parseSimpleTagValue(lexer);
        }
      }
    }
  }
 else {
    TreeElement token=createTokenElement(lexer);
    lexer.advance();
    return token;
  }
}
