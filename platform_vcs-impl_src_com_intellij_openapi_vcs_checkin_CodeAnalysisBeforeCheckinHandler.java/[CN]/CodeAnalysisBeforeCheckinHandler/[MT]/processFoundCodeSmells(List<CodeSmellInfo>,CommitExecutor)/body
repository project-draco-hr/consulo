{
  int errorCount=collectErrors(codeSmells);
  int warningCount=codeSmells.size() - errorCount;
  String commitButtonText=executor != null ? executor.getActionText() : myCheckinPanel.getCommitActionName();
  if (commitButtonText.endsWith("...")) {
    commitButtonText=commitButtonText.substring(0,commitButtonText.length() - 3);
  }
  final int answer=Messages.showYesNoCancelDialog(myProject,VcsBundle.message("before.commit.files.contain.code.smells.edit.them.confirm.text",errorCount,warningCount),VcsBundle.message("code.smells.error.messages.tab.name"),VcsBundle.message("code.smells.review.button"),commitButtonText,CommonBundle.getCancelButtonText(),UIUtil.getWarningIcon());
  if (answer == 0) {
    CodeSmellDetector.getInstance(myProject).showCodeSmellErrors(codeSmells);
    return ReturnResult.CLOSE_WINDOW;
  }
 else   if (answer == 2 || answer == -1) {
    return ReturnResult.CANCEL;
  }
 else {
    return ReturnResult.COMMIT;
  }
}
