{
  final Application application=ApplicationManager.getApplication();
  if (application != null && application.isUnitTestMode()) {
    return EMPTY_ICON;
  }
  final Image image=ImageLoader.loadFromResource(path,aClass);
  if (image == null || image.getHeight(ourFakeComponent) < 1 || image.getHeight(ourFakeComponent) < 1) {
    return null;
  }
  final Icon icon=getIcon(image);
  if (icon != null && !ImageLoader.isGoodSize(icon)) {
    LOG.error("Invalid icon: " + path);
    return EMPTY_ICON;
  }
  return icon;
}
