{
  myParentPopup=popup;
  DefaultActionGroup actionGroup=new DefaultActionGroup("go.to.file.filter",false);
  ToggleAction action=new ToggleAction("Filter","Filter files by type",AllIcons.General.Filter){
    @Override public boolean isSelected(    final AnActionEvent e){
      return myPopup != null;
    }
    @Override public void setSelected(    final AnActionEvent e,    final boolean state){
      if (state) {
        createPopup();
      }
 else {
        close();
      }
    }
  }
;
  actionGroup.add(action);
  myToolbar=ActionManager.getInstance().createActionToolbar("gotfile.filter",actionGroup,true);
  myToolbar.setLayoutPolicy(ActionToolbar.NOWRAP_LAYOUT_POLICY);
  myToolbar.updateActionsImmediately();
  myToolbar.getComponent().setFocusable(false);
  myToolbar.getComponent().setBorder(null);
  myProject=project;
  myChooser=createChooser(model,filterConfiguration);
  myChooserPanel=createChooserPanel();
  popup.setToolArea(myToolbar.getComponent());
}
