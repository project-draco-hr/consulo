{
  if (myBackground == null && background != null && !myDefaultBackground.equals(background)) {
    addTextIfPossible(startOffset);
    myBackground=background;
    builder.addBackground(background);
  }
 else   if (myBackground != null) {
    Color c=background == null ? myDefaultBackground : background;
    if (!myBackground.equals(c)) {
      addTextIfPossible(startOffset);
      builder.addBackground(c);
      myBackground=c;
    }
  }
}
