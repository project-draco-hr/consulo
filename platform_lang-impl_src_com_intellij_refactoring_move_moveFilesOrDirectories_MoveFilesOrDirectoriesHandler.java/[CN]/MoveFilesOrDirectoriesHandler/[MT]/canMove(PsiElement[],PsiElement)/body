{
  HashSet<String> names=new HashSet<String>();
  for (  PsiElement element : elements) {
    if (element instanceof PsiFile) {
      PsiFile file=(PsiFile)element;
      String name=file.getName();
      if (names.contains(name)) {
        return false;
      }
      names.add(name);
    }
 else     if (!(element instanceof PsiDirectory)) {
      return false;
    }
  }
  PsiElement[] filteredElements=PsiTreeUtil.filterAncestors(elements);
  if (filteredElements.length != elements.length) {
    return false;
  }
  return super.canMove(elements,targetContainer);
}
