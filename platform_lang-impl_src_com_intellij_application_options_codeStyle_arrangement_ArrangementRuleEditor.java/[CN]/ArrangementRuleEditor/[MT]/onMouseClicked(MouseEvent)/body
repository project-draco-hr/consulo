{
  if (myModel == null) {
    return;
  }
  ArrangementAtomMatchNodeComponent clickedComponent=getNodeComponentAt(e.getLocationOnScreen());
  if (clickedComponent == null || !clickedComponent.isEnabled()) {
    return;
  }
  ArrangementAtomMatchCondition chosenCondition=clickedComponent.getMatchCondition();
  boolean remove=myModel.hasCondition(chosenCondition.getValue());
  clickedComponent.setSelected(!remove);
  repaintComponent(clickedComponent);
  if (remove) {
    myModel.removeAndCondition(chosenCondition);
    return;
  }
  Collection<Set<?>> mutexes=myFilter.getMutexes();
  for (  Set<?> mutex : mutexes) {
    if (!mutex.contains(chosenCondition.getValue())) {
      continue;
    }
    for (    Object key : mutex) {
      if (myModel.hasCondition(key)) {
        ArrangementAtomMatchNodeComponent componentToDeselect=myComponents.get(key);
        myModel.replaceCondition(componentToDeselect.getMatchCondition(),chosenCondition);
        for (        ArrangementAtomMatchNodeComponent componentToCheck : myComponents.values()) {
          Object value=componentToCheck.getMatchCondition().getValue();
          if (myModel.hasCondition(value) && !ArrangementConfigUtil.isEnabled(value,myFilter,myModel.getCondition())) {
            myModel.removeAndCondition(componentToCheck.getMatchCondition());
          }
        }
        updateState(myModel);
        return;
      }
    }
  }
  myModel.addAndCondition(chosenCondition);
  updateState(myModel);
}
