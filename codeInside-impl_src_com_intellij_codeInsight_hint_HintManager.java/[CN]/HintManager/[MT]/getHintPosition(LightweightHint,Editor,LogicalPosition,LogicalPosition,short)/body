{
  Point p=_getHintPosition(hint,editor,pos1,pos2,constraint);
  JLayeredPane layeredPane=editor.getComponent().getRootPane().getLayeredPane();
  Dimension hintSize=hint.getComponent().getPreferredSize();
  if (constraint == ABOVE) {
    if (p.y < 0) {
      Point p1=_getHintPosition(hint,editor,pos1,pos2,UNDER);
      if (p1.y + hintSize.height <= layeredPane.getSize().height) {
        return p1;
      }
    }
  }
 else   if (constraint == UNDER) {
    if (p.y + hintSize.height > layeredPane.getSize().height) {
      Point p1=_getHintPosition(hint,editor,pos1,pos2,ABOVE);
      if (p1.y >= 0) {
        return p1;
      }
    }
  }
  return p;
}
