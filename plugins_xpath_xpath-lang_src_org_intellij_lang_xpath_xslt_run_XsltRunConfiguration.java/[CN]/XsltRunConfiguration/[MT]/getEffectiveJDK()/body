{
  if (!XsltRunSettingsEditor.ALLOW_CHOOSING_SDK) {
    return getDefaultSdk();
  }
  if (myJdkChoice == JdkChoice.JDK) {
    return myJdk != null ? SdkTable.getInstance().findSdk(myJdk) : null;
  }
  Sdk jdk=null;
  final Module module=getEffectiveModule();
  if (module != null) {
    jdk=ModuleUtilCore.getSdk(module,JavaModuleExtension.class);
  }
  if (jdk == null || !(jdk.getSdkType() instanceof JavaSdkType)) {
    return getDefaultSdk();
  }
  return jdk;
}
