{
  if (anEntryPoint instanceof RefClass) {
    RefClass refClass=(RefClass)anEntryPoint;
    if (!refClass.isInterface()) {
      anEntryPoint=refClass.getDefaultConstructor();
    }
  }
  if (anEntryPoint == null)   return;
  Set set=myFQNameToSmartEntryPointRef.entrySet();
  Object key=null;
  for (Iterator iterator=set.iterator(); iterator.hasNext(); ) {
    Map.Entry entry=(Map.Entry)iterator.next();
    SmartRefElementPointer value=(SmartRefElementPointer)entry.getValue();
    if (value.getRefElement() == anEntryPoint) {
      key=entry.getKey();
      break;
    }
  }
  if (key != null) {
    myFQNameToSmartEntryPointRef.remove(key);
    ((RefElementImpl)anEntryPoint).setEntry(false);
  }
  if (anEntryPoint.isPermanentEntry() && anEntryPoint.isValid()) {
    final Project project=anEntryPoint.getElement().getProject();
    final EntryPointsManagerImpl entryPointsManager=EntryPointsManagerImpl.getInstance(project);
    if (this != entryPointsManager) {
      entryPointsManager.removeEntryPoint(anEntryPoint);
    }
  }
}
