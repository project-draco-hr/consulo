{
  PsiFileSystemItem psiFile;
  if (!(element instanceof PsiFileSystemItem)) {
    psiFile=element.getContainingFile();
  }
 else {
    psiFile=(PsiFileSystemItem)element;
  }
  if (psiFile == null)   return;
  VirtualFile virtualFile=psiFile.getVirtualFile();
  if (virtualFile == null)   return;
  selectFile(virtualFile,false);
  boolean requestFocus=true;
  if (psiFile instanceof PsiFile) {
    Editor editor=EditorHelper.openInEditor(element);
    if (editor != null) {
      ToolWindowManager.getInstance(myProject).activateEditorComponent();
      requestFocus=false;
    }
  }
  if (requestFocus) {
    selectFile(virtualFile,true);
  }
}
