{
  super(project);
  myDescriptor=descriptor;
  myId=descriptor.getToolWindowId();
  myAutoScrollFromSourceHandler=new MyAutoScrollFromSourceHandler();
  myAutoScrollToSourceHandler=new AutoScrollToSourceHandler(){
    @Override protected boolean isAutoScrollMode(){
      return myAutoScrollToSource;
    }
    @Override protected void setAutoScrollMode(    boolean state){
      myAutoScrollToSource=state;
    }
  }
;
  project.getMessageBus().connect(this).subscribe(ProjectTopics.MODIFICATION_TRACKER,new PsiModificationTracker.Listener(){
    public void modificationCountChanged(){
      if (getTree() != null && getTreeBuilder() != null) {
        updateFromRoot(true);
      }
    }
  }
);
  myComponent=new JPanel(new BorderLayout());
  myComponent.add(createComponent(),BorderLayout.CENTER);
  myComponent.add(createToolbar(),BorderLayout.NORTH);
  DataManager.registerDataProvider(myComponent,this);
  myCopyPasteDelegator=new CopyPasteDelegator(project,myComponent){
    @NotNull @Override protected PsiElement[] getSelectedElements(){
      return MvcProjectViewPane.this.getSelectedPSIElements();
    }
  }
;
  myDeletePSIElementProvider=new DeleteHandler.DefaultDeleteProvider();
}
