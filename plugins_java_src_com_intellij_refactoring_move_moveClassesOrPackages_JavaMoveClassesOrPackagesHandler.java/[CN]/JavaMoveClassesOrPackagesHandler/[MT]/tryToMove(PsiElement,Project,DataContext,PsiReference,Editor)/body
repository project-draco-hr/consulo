{
  if (isPackageOrDirectory(element))   return false;
  if (isReferenceInAnonymousClass(reference))   return false;
  if (!invalid4Move(element)) {
    final PsiElement initialTargetElement=LangDataKeys.TARGET_PSI_ELEMENT.getData(dataContext);
    PsiElement[] adjustedElements=adjustForMove(project,new PsiElement[]{element},initialTargetElement);
    if (adjustedElements == null) {
      return true;
    }
    MoveClassesOrPackagesImpl.doMove(project,adjustedElements,initialTargetElement,null);
    return true;
  }
  return false;
}
