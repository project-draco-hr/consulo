def wsclean(opts, text, blank=True):
    if opts.ignorews:
        text = re.sub('[ \t]+', '', text)
    elif opts.ignorewsamount:
        text = re.sub('[ \t]+', ' ', text)
        text = re.sub('[ \t]+\n', '\n', text)
    if (blank and opts.ignoreblanklines):
        text = re.sub('\n+', '', text)
    return text
