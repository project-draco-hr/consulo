def diffline(revs, a, b, opts):
    parts = ['diff']
    if opts.git:
        parts.append('--git')
    if (revs and (not opts.git)):
        parts.append(' '.join([('-r %s' % rev) for rev in revs]))
    if opts.git:
        parts.append(('a/%s' % a))
        parts.append(('b/%s' % b))
    else:
        parts.append(a)
    return (' '.join(parts) + '\n')
