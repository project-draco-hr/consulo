def copy(self, **kwargs):
    opts = dict(((k, getattr(self, k)) for k in self.defaults))
    opts.update(kwargs)
    return diffopts(**opts)
