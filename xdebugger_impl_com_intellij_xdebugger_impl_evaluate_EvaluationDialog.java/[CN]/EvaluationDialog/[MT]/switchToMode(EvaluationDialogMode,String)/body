{
  if (myMode == mode)   return;
  myMode=mode;
  myInputComponent=createInputComponent(mode,text);
  myInputPanel.removeAll();
  myInputPanel.add(myInputComponent.getComponent(),BorderLayout.CENTER);
  myInputPanel.invalidate();
  setTitle(myInputComponent.getTitle());
  mySwitchModeAction.putValue(Action.NAME,myMode == EvaluationDialogMode.EXPRESSION ? XDebuggerBundle.message("button.text.code.fragment.mode") : XDebuggerBundle.message("button.text.expression.mode"));
  final JComponent preferredFocusedComponent=myInputComponent.getInputEditor().getPreferredFocusedComponent();
  if (preferredFocusedComponent != null) {
    IdeFocusManager.getInstance(mySession.getProject()).requestFocus(preferredFocusedComponent,true);
  }
}
