{
  myProject=project;
  myTitle=title;
  installEditorFactoryListener();
  final EditorFactory editorFactory=EditorFactory.getInstance();
  myHistoryFile=new LightVirtualFile(getTitle() + ".history.txt",FileTypes.PLAIN_TEXT,"");
  myEditorDocument=editorFactory.createDocument("");
  setLanguage(language);
  myConsoleEditor=(EditorEx)editorFactory.createEditor(myEditorDocument,myProject);
  myConsoleEditor.addFocusListener(myFocusListener);
  myCurrentEditor=myConsoleEditor;
  myHistoryViewer=(EditorEx)editorFactory.createViewer(((EditorFactoryImpl)editorFactory).createDocument(true),myProject);
  myUpdateQueue=new MergingUpdateQueue("ConsoleUpdateQueue",300,true,null);
  Disposer.register(this,myUpdateQueue);
  if (initComponents) {
    initComponents();
  }
}
