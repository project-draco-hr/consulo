{
  for (  RangeHighlighter rangeHighlighter : from.getAllHighlighters()) {
    if (!rangeHighlighter.isValid())     continue;
    Object tooltip=rangeHighlighter.getErrorStripeTooltip();
    HighlightInfo highlightInfo=tooltip instanceof HighlightInfo ? (HighlightInfo)tooltip : null;
    if (highlightInfo != null) {
      if (highlightInfo.getSeverity() != HighlightSeverity.INFORMATION)       continue;
      if (highlightInfo.type.getAttributesKey() == EditorColors.IDENTIFIER_UNDER_CARET_ATTRIBUTES)       continue;
    }
    final int localOffset=textRange.getStartOffset();
    final int start=Math.max(rangeHighlighter.getStartOffset(),localOffset) - localOffset;
    final int end=Math.min(rangeHighlighter.getEndOffset(),textRange.getEndOffset()) - localOffset;
    if (start > end)     continue;
    final RangeHighlighter h=to.addRangeHighlighter(start + offset,end + offset,rangeHighlighter.getLayer(),rangeHighlighter.getTextAttributes(),rangeHighlighter.getTargetArea());
    ((RangeHighlighterEx)h).setAfterEndOfLine(((RangeHighlighterEx)rangeHighlighter).isAfterEndOfLine());
  }
}
