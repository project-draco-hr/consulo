{
  setupComponents();
  myPanel.add(myHistoryViewer.getComponent());
  myPanel.add(myConsoleEditor.getComponent());
  DataManager.registerDataProvider(myPanel,new TypeSafeDataProviderAdapter(this));
  myHistoryViewer.getComponent().addComponentListener(new ComponentAdapter(){
    @Override public void componentResized(    ComponentEvent e){
      if (myForceScrollToEnd.compareAndSet(true,false)) {
        scrollHistoryToEnd();
      }
    }
    @Override public void componentShown(    ComponentEvent e){
      componentResized(e);
    }
  }
);
  setPromptInner(myPrompt);
}
