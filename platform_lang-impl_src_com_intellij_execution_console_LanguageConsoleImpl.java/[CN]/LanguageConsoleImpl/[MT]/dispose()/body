{
  super.dispose();
  if (myHistoryViewer.isDisposed())   return;
  myConsoleEditor.getDocument().removeDocumentListener(myDocumentAdapter);
  myHistoryViewer.getDocument().removeDocumentListener(myDocumentAdapter);
  myBusConnection.deliverImmediately();
  Disposer.dispose(myBusConnection);
  EditorFactory editorFactory=EditorFactory.getInstance();
  editorFactory.releaseEditor(myConsoleEditor);
  editorFactory.releaseEditor(myHistoryViewer);
  if (getProject().isOpen()) {
    FileEditorManager editorManager=FileEditorManager.getInstance(getProject());
    if (editorManager.isFileOpen(getVirtualFile())) {
      editorManager.closeFile(getVirtualFile());
    }
  }
}
