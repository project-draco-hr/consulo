{
  AnalysisScope analysisScope=new AnalysisScope(element.getContainingFile());
  Module module=ModuleUtil.findModuleForPsiElement(element);
  String name=module == null ? null : module.getName();
  Project myProject=element.getProject();
  AnalysisUIOptions analysisUIOptions=new AnalysisUIOptions();
  analysisUIOptions.save(storedSettingsBean.analysisUIOptions);
  BaseAnalysisActionDialog dialog=new BaseAnalysisActionDialog(dialogTitle,"Analyze scope",myProject,analysisScope,name,true,analysisUIOptions,element);
  dialog.show();
  if (!dialog.isOK())   return null;
  AnalysisScope scope=dialog.getScope(analysisUIOptions,analysisScope,myProject,module);
  storedSettingsBean.analysisUIOptions.save(analysisUIOptions);
  SliceAnalysisParams params=new SliceAnalysisParams();
  params.scope=scope;
  params.dataFlowToThis=dataFlowToThis;
  return params;
}
