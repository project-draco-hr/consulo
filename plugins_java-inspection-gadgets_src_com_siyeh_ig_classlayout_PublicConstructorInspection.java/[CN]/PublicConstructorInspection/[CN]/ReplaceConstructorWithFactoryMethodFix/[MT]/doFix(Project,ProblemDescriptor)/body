{
  final PsiElement element=PsiTreeUtil.getParentOfType(descriptor.getPsiElement(),PsiClass.class,PsiMethod.class);
  final AsyncResult<DataContext> context=DataManager.getInstance().getDataContextFromFocus();
  context.doWhenDone(new AsyncResult.Handler<DataContext>(){
    @Override public void run(    DataContext dataContext){
      final JavaRefactoringActionHandlerFactory factory=JavaRefactoringActionHandlerFactory.getInstance();
      final RefactoringActionHandler handler=factory.createReplaceConstructorWithFactoryHandler();
      handler.invoke(project,new PsiElement[]{element},dataContext);
    }
  }
);
}
