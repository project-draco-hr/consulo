{
  if (myFirstErrorOffset != Integer.MAX_VALUE) {
    myEditor.getCaretModel().moveToOffset(myFirstErrorOffset);
    reformat(atCaret);
    return;
  }
  reformat(atCaret);
  for (int i=0; i < ourEnterProcessors.size(); i++) {
    EnterProcessor processor=ourEnterProcessors.get(i);
    if (processor.doEnter(myEditor,atCaret,isModified()))     return;
  }
  if (!isModified()) {
    plainEnter();
  }
 else {
    if (myFirstErrorOffset == Integer.MAX_VALUE) {
      myEditor.getCaretModel().moveToOffset(end(atCaret));
    }
 else {
      myEditor.getCaretModel().moveToOffset(myFirstErrorOffset);
    }
  }
}
