{
  myIsPerformanceTestsRun=isPerformanceTestsRun;
  InputStream excludedStream=StringUtil.isEmpty(classFilterName) ? null : getClass().getClassLoader().getResourceAsStream(classFilterName);
  String preconfiguredGroup=System.getProperty(TARGET_TEST_GROUP);
  String testGroupName;
  if (preconfiguredGroup == null || preconfiguredGroup.trim().isEmpty()) {
    testGroupName="";
  }
 else {
    testGroupName=preconfiguredGroup.trim();
  }
  if (excludedStream != null) {
    try {
      myTestClassesFilter=GroupBasedTestClassFilter.createOn(new InputStreamReader(excludedStream),testGroupName);
    }
  finally {
      try {
        excludedStream.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
 else {
    String patterns=System.getProperty(TARGET_TEST_PATTERNS);
    if (patterns != null) {
      myTestClassesFilter=new PatternListTestClassFilter(StringUtil.split(patterns,";"));
    }
 else {
      myTestClassesFilter=TestClassesFilter.ALL_CLASSES;
    }
  }
  System.out.println("Using test group: [" + testGroupName + "]");
}
