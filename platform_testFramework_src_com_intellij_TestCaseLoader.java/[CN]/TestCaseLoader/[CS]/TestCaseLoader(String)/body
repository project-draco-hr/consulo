{
  InputStream excludedStream=getClass().getClassLoader().getResourceAsStream(classFilterName);
  if (excludedStream != null) {
    try {
      myTestClassesFilter=TestClassesFilter.createOn(new InputStreamReader(excludedStream));
    }
  finally {
      try {
        excludedStream.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
    myTestGroupName=System.getProperty("idea.test.group");
  }
 else {
    String patterns=System.getProperty("idea.test.patterns");
    if (patterns != null) {
      myTestClassesFilter=new TestClassesFilter(StringUtil.split(patterns,";"));
    }
 else {
      myTestClassesFilter=TestClassesFilter.EMPTY_CLASSES_FILTER;
    }
    myTestGroupName="";
  }
  try {
    if (Comparing.equal(System.getProperty("idea.fast.only"),"true")) {
      BufferedReader reader=new BufferedReader(new InputStreamReader(getClass().getClassLoader().getResourceAsStream("tests/slowTests.txt")));
      do {
        final String testName=reader.readLine();
        if (testName == null)         break;
        blockedTests.add(testName);
      }
 while (true);
    }
  }
 catch (  IOException e) {
  }
  System.out.println("Using test group: [" + (myTestGroupName == null ? "" : myTestGroupName) + "]");
}
