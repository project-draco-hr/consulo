{
  Charset[] availableCharsets=CharsetToolkit.getAvailableCharsets();
  myEncoding.setModel(new DefaultComboBoxModel(availableCharsets));
  int defaultIndex=Arrays.asList(availableCharsets).indexOf(CharsetToolkit.getDefaultSystemCharset());
  myEncoding.setSelectedIndex(defaultIndex);
  myEncoding.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED) {
        refreshText();
      }
    }
  }
);
}
