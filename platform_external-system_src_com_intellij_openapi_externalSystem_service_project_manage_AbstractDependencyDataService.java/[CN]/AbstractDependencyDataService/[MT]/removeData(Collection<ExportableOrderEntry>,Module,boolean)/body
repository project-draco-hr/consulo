{
  if (toRemove.isEmpty()) {
    return;
  }
  for (  final ExportableOrderEntry dependency : toRemove) {
    ExternalSystemUtil.executeProjectChangeAction(module.getProject(),ProjectSystemId.IDE,toRemove,synchronous,new Runnable(){
      @Override public void run(){
        ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
        final ModifiableRootModel moduleRootModel=moduleRootManager.getModifiableModel();
        try {
          for (          OrderEntry entry : moduleRootModel.getOrderEntries()) {
            if (entry.getPresentableName().equals(dependency.getPresentableName())) {
              moduleRootModel.removeOrderEntry(entry);
              break;
            }
          }
        }
  finally {
          moduleRootModel.commit();
        }
      }
    }
);
  }
}
