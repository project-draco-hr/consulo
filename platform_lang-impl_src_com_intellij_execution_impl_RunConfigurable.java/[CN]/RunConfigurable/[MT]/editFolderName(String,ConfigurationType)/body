{
  return Messages.showInputDialog(myProject,"Enter new folder name","New Folder",null,initialName,new InputValidator(){
    @Override public boolean checkInput(    String inputString){
      List<DefaultMutableTreeNode> folderNodes=new ArrayList<DefaultMutableTreeNode>();
      collectNodesRecursively(getConfigurationTypeNode(type),folderNodes,FOLDER);
      List<String> names=ContainerUtil.map(folderNodes,new Function<DefaultMutableTreeNode,String>(){
        @Override public String fun(        DefaultMutableTreeNode treeNode){
          return (String)treeNode.getUserObject();
        }
      }
);
      return inputString != null && !inputString.isEmpty() && (!names.contains(inputString) || inputString.equals(initialName));
    }
    @Override public boolean canClose(    String inputString){
      return checkInput(inputString);
    }
  }
);
}
