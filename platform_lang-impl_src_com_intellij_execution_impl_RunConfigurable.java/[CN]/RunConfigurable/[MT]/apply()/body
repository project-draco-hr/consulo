{
  updateActiveConfigurationFromSelected();
  final RunManagerImpl manager=getRunManager();
  final ConfigurationType[] types=manager.getConfigurationFactories();
  List<ConfigurationType> configurationTypes=new ArrayList<ConfigurationType>();
  for (int i=0; i < myRoot.getChildCount(); i++) {
    final DefaultMutableTreeNode node=(DefaultMutableTreeNode)myRoot.getChildAt(i);
    if (node.getUserObject() instanceof ConfigurationType) {
      configurationTypes.add((ConfigurationType)node.getUserObject());
    }
  }
  for (  ConfigurationType type : types) {
    if (!configurationTypes.contains(type))     configurationTypes.add(type);
  }
  for (  ConfigurationType configurationType : configurationTypes) {
    applyByType(configurationType);
  }
  String recentsLimit=myRecentsLimit.getText();
  try {
    int i=Integer.parseInt(recentsLimit);
    int oldLimit=manager.getConfig().getRecentsLimit();
    if (oldLimit != i) {
      manager.getConfig().setRecentsLimit(i);
      manager.checkRecentsLimit();
    }
  }
 catch (  NumberFormatException e) {
  }
  manager.getConfig().setRestartRequiresConfirmation(myConfirmation.isSelected());
  for (  Configurable configurable : myStoredComponents.values()) {
    if (configurable.isModified()) {
      configurable.apply();
    }
  }
  manager.saveOrder();
  setModified(false);
}
