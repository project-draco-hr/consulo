{
  final SingleConfigurationConfigurable<RunConfiguration> configuration=getSelectedConfiguration();
  LOG.assertTrue(configuration != null);
  try {
    final DefaultMutableTreeNode typeNode=getSelectedConfigurationTypeNode();
    final RunnerAndConfigurationSettingsImpl settings=configuration.getSnapshot();
    final String copyName=createUniqueName(typeNode);
    settings.setName(copyName);
    final SingleConfigurationConfigurable<RunConfiguration> configurable=createNewConfiguration(settings,typeNode);
    IdeFocusManager.getInstance(myProject).requestFocus(configurable.getNameTextField(),true);
    configurable.getNameTextField().setSelectionStart(0);
    configurable.getNameTextField().setSelectionEnd(copyName.length());
  }
 catch (  ConfigurationException e1) {
    Messages.showErrorDialog(myToolbarComponent,e1.getMessage(),e1.getTitle());
  }
}
