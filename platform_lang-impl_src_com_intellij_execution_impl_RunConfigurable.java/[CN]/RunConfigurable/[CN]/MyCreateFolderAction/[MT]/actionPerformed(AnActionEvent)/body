{
  final ConfigurationType type=getSelectedConfigurationType();
  if (type == null) {
    return;
  }
  DefaultMutableTreeNode typeNode=getSelectedConfigurationTypeNode();
  if (typeNode == null) {
    return;
  }
  String folderName=createUniqueName(typeNode,"New Folder",FOLDER);
  List<DefaultMutableTreeNode> folders=new ArrayList<DefaultMutableTreeNode>();
  collectNodesRecursively(getConfigurationTypeNode(type),folders,FOLDER);
  DefaultMutableTreeNode folderNode=new DefaultMutableTreeNode(folderName);
  myTreeModel.insertNodeInto(folderNode,typeNode,folders.size());
  isFolderCreating=true;
  try {
    TreeUtil.selectNode(myTree,folderNode);
  }
  finally {
    isFolderCreating=false;
  }
}
