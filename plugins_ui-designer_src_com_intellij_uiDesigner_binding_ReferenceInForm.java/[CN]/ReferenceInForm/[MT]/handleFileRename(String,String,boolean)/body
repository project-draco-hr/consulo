{
  final String currentName=getRangeText();
  final String baseName=newElementName.endsWith(extension) ? newElementName.substring(0,newElementName.length() - extension.length()) : newElementName;
  final int slashIndex=currentName.lastIndexOf('/');
  final String extensionInReference=includeExtensionInReference ? extension : "";
  if (slashIndex >= 0) {
    final String prefix=currentName.substring(0,slashIndex);
    return handleElementRenameBase(prefix + "/" + baseName+ extensionInReference);
  }
 else {
    return handleElementRenameBase(baseName + extensionInReference);
  }
}
