{
  if (myTargetClass != null && !GroovyFileType.GROOVY_LANGUAGE.equals(myTargetClass.getLanguage())) {
    return GroovyRefactoringBundle.message("class.language.is.not.groovy");
  }
  String fieldName=getName();
  final JavaPsiFacade facade=JavaPsiFacade.getInstance(myContext.project);
  if ("".equals(fieldName)) {
    return RefactoringBundle.message("no.field.name.specified");
  }
 else   if (!facade.getNameHelper().isIdentifier(fieldName)) {
    return RefactoringMessageUtil.getIncorrectIdentifierMessage(fieldName);
  }
  final String targetClassName=getTargetClassName();
  if (myDefaultTargetClass == null && "".equals(targetClassName)) {
    return GroovyRefactoringBundle.message("target.class.is.not.specified");
  }
  if (myTargetClass instanceof GroovyScriptClass) {
    return GroovyRefactoringBundle.message("target.class.must.not.be.script");
  }
  return null;
}
