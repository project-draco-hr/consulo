{
  TreePath path=e.getPath();
  final DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
  if (!(node.getUserObject() instanceof NodeDescriptor))   return;
  TreePath pathToSelect=null;
  if (isSelectionInside(node)) {
    pathToSelect=new TreePath(node.getPath());
  }
  NodeDescriptor descriptor=(NodeDescriptor)node.getUserObject();
  if (getBuilder().isDisposeOnCollapsing(descriptor)) {
    removeChildren(node);
    addLoadingNode(node);
    if (node.equals(getRootNode())) {
      addSelectionPath(new TreePath(getRootNode().getPath()),true,Condition.FALSE);
    }
 else {
      myTreeModel.reload(node);
    }
  }
  if (pathToSelect != null && myTree.isSelectionEmpty()) {
    addSelectionPath(pathToSelect,true,Condition.FALSE);
  }
}
