{
  dropUpdaterStateIfExternalChange();
  TreePath path=event.getPath();
  final DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
  if (!myUnbuiltNodes.contains(node))   return;
  myUnbuiltNodes.remove(node);
  getBuilder().expandNodeChildren(node);
  runDone(new Runnable(){
    public void run(){
      final Object element=getElementFor(node);
      for (int i=0; i < node.getChildCount(); i++) {
        removeIfLoading(node.getChildAt(i));
      }
      if (node.getChildCount() == 0) {
        addNodeAction(element,new NodeAction(){
          public void onReady(          final DefaultMutableTreeNode node){
            expand(element,null);
          }
        }
);
      }
      processSmartExpand(node);
    }
  }
);
}
