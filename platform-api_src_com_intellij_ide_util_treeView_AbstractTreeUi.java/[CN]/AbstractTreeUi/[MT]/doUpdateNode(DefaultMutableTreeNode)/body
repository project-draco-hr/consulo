{
  if (!(node.getUserObject() instanceof NodeDescriptor))   return;
  NodeDescriptor descriptor=(NodeDescriptor)node.getUserObject();
  Object prevElement=descriptor.getElement();
  if (prevElement == null)   return;
  boolean changes=getBuilder().updateNodeDescriptor(descriptor);
  if (descriptor.getElement() == null) {
    LOG.assertTrue(false,"element == null, updateSubtree should be invoked for parent! builder=" + this + ", prevElement = "+ prevElement+ ", node = "+ node+ "; parentDescriptor="+ descriptor.getParentDescriptor());
  }
  if (changes) {
    updateNodeImageAndPosition(node);
  }
}
