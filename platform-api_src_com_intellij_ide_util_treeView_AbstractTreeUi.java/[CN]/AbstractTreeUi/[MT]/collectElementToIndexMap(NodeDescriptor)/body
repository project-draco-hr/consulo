{
  Map<Object,Integer> elementToIndexMap=new LinkedHashMap<Object,Integer>();
  Object[] children=getTreeStructure().getChildElements(getBuilder().getTreeStructureElement(descriptor));
  int index=0;
  for (  Object child : children) {
    if (!getBuilder().validateNode(child))     continue;
    elementToIndexMap.put(child,Integer.valueOf(index));
    index++;
  }
  return elementToIndexMap;
}
