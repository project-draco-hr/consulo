{
  if (myLoadingParents.contains(getElementFromDescriptor(descriptor)))   return false;
  myLoadingParents.add(getElementFromDescriptor(descriptor));
  if (!isNodeBeingBuilt(node)) {
    LoadingNode loadingNode=new LoadingNode(getLoadingNodeText());
    myTreeModel.insertNodeInto(loadingNode,node,node.getChildCount());
  }
  final Ref<Object[]> children=new Ref<Object[]>();
  Runnable buildRunnable=new Runnable(){
    public void run(){
      if (isReleased())       return;
      update(descriptor,true);
      Object element=getElementFromDescriptor(descriptor);
      if (element == null)       return;
      children.set(getChildrenFor(getBuilder().getTreeStructureElement(descriptor)));
    }
  }
;
  final DefaultMutableTreeNode[] nodeToProcessActions=new DefaultMutableTreeNode[1];
  Runnable updateRunnable=new Runnable(){
    public void run(){
      if (isReleased())       return;
      if (children.get() == null)       return;
      updateNodeChildren(node,pass,children.get(),true);
      myLoadingParents.remove(getElementFromDescriptor(descriptor));
      update(descriptor,false);
      Object element=getElementFromDescriptor(descriptor);
      if (element != null) {
        myUnbuiltNodes.remove(node);
        for (int i=0; i < node.getChildCount(); i++) {
          TreeNode child=node.getChildAt(i);
          if (isLoadingNode(child)) {
            removeIfLoading(child);
            i--;
          }
        }
        nodeToProcessActions[0]=node;
      }
    }
  }
;
  addTaskToWorker(buildRunnable,true,updateRunnable,new Runnable(){
    public void run(){
      if (nodeToProcessActions[0] != null) {
        processNodeActionsIfReady(nodeToProcessActions[0]);
      }
    }
  }
);
  return true;
}
