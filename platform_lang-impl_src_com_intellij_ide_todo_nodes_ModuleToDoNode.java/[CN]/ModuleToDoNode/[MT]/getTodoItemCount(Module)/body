{
  Iterator<PsiFile> iterator=myBuilder.getFiles(val);
  int count=0;
  while (iterator.hasNext()) {
    final PsiFile psiFile=iterator.next();
    count+=ApplicationManager.getApplication().runReadAction(new Computable<Integer>(){
      @Override public Integer compute(){
        return getTreeStructure().getTodoItemCount(psiFile);
      }
    }
);
  }
  return count;
}
