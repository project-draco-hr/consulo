{
  int wireNumber=-1;
  final Collection<WaitingCommit> awaiting=myAwaitingParents.remove(commitI.getHash());
  if (awaiting != null) {
    final List<WaitingCommit> awaitingList=(List<WaitingCommit>)awaiting;
    if (awaitingList.size() > 1) {
      Collections.sort(awaitingList,CommitsComparator.getInstance());
    }
    if (awaitingList.size() > 1) {
      final int[] ends=new int[awaitingList.size()];
      for (int i=0; i < awaitingList.size(); i++) {
        final WaitingCommit commit=awaitingList.get(i);
        ends[i]=commit.myIdx;
      }
      mySkeleton.addWireEvent(rowCount,ends);
    }
    for (    final WaitingCommit commit : awaitingList) {
      final CommitI correspCommitI=commits.get(commit.myIdx);
      commit.parentFound();
      if (commit.isMerge()) {
        mySkeleton.addStartToEvent(commit.myIdx,rowCount);
      }
      final Integer seized=mySeizedWires.get(correspCommitI.getWireNumber());
      if (seized != null && seized == commit.myIdx) {
        if (wireNumber == -1) {
          wireNumber=correspCommitI.getWireNumber();
        }
 else {
          if (commit.allParentsFound()) {
            mySeizedWires.remove(correspCommitI.getWireNumber());
            mySkeleton.parentWireEnds(rowCount,commit.myIdx);
          }
        }
      }
    }
    if (wireNumber == -1) {
      wireNumber=myWireCount++;
    }
  }
 else {
    wireNumber=myWireCount++;
    mySkeleton.wireStarts(rowCount);
  }
  mySeizedWires.put(wireNumber,rowCount);
  commitI.setWireNumber(wireNumber);
  if (parents.isEmpty()) {
    mySkeleton.wireEnds(rowCount);
    mySeizedWires.remove(wireNumber);
  }
 else {
    final WaitingCommit me=new WaitingCommit(rowCount,parents.size());
    for (    AbstractHash parent : parents) {
      myAwaitingParents.putValue(parent,me);
    }
  }
  ++rowCount;
}
