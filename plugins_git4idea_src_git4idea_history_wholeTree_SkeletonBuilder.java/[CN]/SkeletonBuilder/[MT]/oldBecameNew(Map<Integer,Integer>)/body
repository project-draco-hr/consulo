{
  final MultiMap<Integer,WaitingItem> backCopy=new MultiMap<Integer,WaitingItem>();
  backCopy.putAllValues(myBackIndex);
  myBackIndex.clear();
  for (  Map.Entry<Integer,Collection<WaitingItem>> entry : backCopy.entrySet()) {
    Integer key=map.get(entry.getKey());
    Collection<WaitingItem> items=entry.getValue();
    if (key == null) {
      key=entry.getKey();
    }
 else {
      for (      WaitingItem item : items) {
        item.myIdx=key;
      }
    }
    myBackIndex.put(key,items);
  }
  BidirectionalMap<Integer,Integer> copy=new BidirectionalMap<Integer,Integer>();
  copy.putAll(mySeizedWires);
  mySeizedWires.clear();
  for (  Integer oldIdx : copy.values()) {
    List<Integer> wires=copy.getKeysByValue(oldIdx);
    if (wires == null || wires.size() != 1) {
      System.out.println("www");
    }
    assert(wires != null && wires.size() == 1);
    Integer newIdx=map.get(oldIdx);
    newIdx=newIdx == null ? oldIdx : newIdx;
    mySeizedWires.put(wires.get(0),newIdx);
  }
}
