{
  if (editor == null || file == null)   return null;
  PsiElement target=TargetElementUtil.findTargetElement(editor,TargetElementUtilBase.REFERENCED_ELEMENT_ACCEPTED);
  if (target instanceof MavenPsiElementWrapper) {
    return ((MavenPsiElementWrapper)target).getWrappee();
  }
  if (target == null || !(target instanceof XmlTag) || isSchema(target)) {
    target=file.findElementAt(editor.getCaretModel().getOffset());
    if (target == null)     return null;
  }
  target=PsiTreeUtil.getParentOfType(target,XmlTag.class,false);
  if (target == null)   return null;
  if (!MavenDomUtil.isMavenElement(target))   return null;
  return target;
}
