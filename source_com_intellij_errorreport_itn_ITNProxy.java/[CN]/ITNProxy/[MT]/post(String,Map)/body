{
  HttpURLConnection connection=(HttpURLConnection)new URL(url).openConnection();
  connection.setRequestMethod("POST");
  connection.setDoInput(true);
  connection.setDoOutput(true);
  connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
  StringBuffer buffer=new StringBuffer();
  Iterator it=params.keySet().iterator();
  while (it.hasNext()) {
    String name=(String)it.next();
    if (params.containsKey(name) && params.get(name) != null)     buffer.append(name + "=" + URLEncoder.encode((String)params.get(name),ENCODE)+ POST_DELIMETER);
 else     throw new IllegalArgumentException(name);
  }
  connection.setRequestProperty("Content-Length",Integer.toString(buffer.length()));
  connection.getOutputStream().write(buffer.toString().getBytes());
  return connection;
}
