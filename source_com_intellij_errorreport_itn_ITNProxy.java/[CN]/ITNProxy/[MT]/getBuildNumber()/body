{
  HttpURLConnection connection=(HttpURLConnection)new URL(BUILD_NUMBER_URL).openConnection();
  connection.setAllowUserInteraction(true);
  connection.connect();
  int responseCode=connection.getResponseCode();
  int buildNumber=-1;
  if (responseCode == HttpURLConnection.HTTP_OK) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    InputStream is=connection.getInputStream();
    int c;
    while ((c=is.read()) != -1) {
      baos.write(c);
    }
    try {
      buildNumber=Integer.valueOf(baos.toString().trim()).intValue();
    }
 catch (    NumberFormatException ex) {
    }
  }
  connection.disconnect();
switch (responseCode) {
case HttpURLConnection.HTTP_OK:
    break;
default :
  throw new IOException("Connection testing failed with HTTP code " + responseCode);
}
return buildNumber;
}
