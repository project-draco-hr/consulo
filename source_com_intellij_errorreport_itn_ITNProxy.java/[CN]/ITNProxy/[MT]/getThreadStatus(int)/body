{
  HttpURLConnection connection=(HttpURLConnection)new URL(CHECK_THREAD_URL + threadId).openConnection();
  connection.setAllowUserInteraction(true);
  connection.connect();
  int responseCode=connection.getResponseCode();
  String threadStatus="";
  if (responseCode == HttpURLConnection.HTTP_OK) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    InputStream is=connection.getInputStream();
    int c;
    while ((c=is.read()) != -1) {
      baos.write(c);
    }
    String result=baos.toString();
    int startIndex=result.indexOf("state=\"") + 7;
    int endIndex=result.indexOf("\"",startIndex);
    threadStatus=result.substring(startIndex,endIndex);
  }
  connection.disconnect();
switch (responseCode) {
case HttpURLConnection.HTTP_OK:
    break;
default :
  throw new IOException(DiagnosticBundle.message("error.report.connection.failure",responseCode));
}
return threadStatus;
}
