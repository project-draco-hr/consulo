{
  try {
    Method method=KeyEvent.class.getMethod("getExtendedKeyCodeForChar",int.class);
    if (!method.isAccessible()) {
      method.setAccessible(true);
    }
    return (Integer)method.invoke(KeyEvent.class,ch);
  }
 catch (  Exception exception) {
    if (ch >= 'a' && ch <= 'z') {
      ch-=('a' - 'A');
    }
    return ch;
  }
}
