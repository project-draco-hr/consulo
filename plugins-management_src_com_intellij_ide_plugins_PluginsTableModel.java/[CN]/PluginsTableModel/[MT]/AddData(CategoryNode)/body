{
  ArrayList<IdeaPluginDescriptor> newList=new ArrayList<IdeaPluginDescriptor>();
  constructList(root,newList);
  for (  IdeaPluginDescriptor descr : newList) {
    IdeaPluginDescriptor existing=PluginManager.getPlugin(descr.getPluginId());
    if (existing == null) {
      view.add(descr);
      UpdateVersions.put(descr.getPluginId(),descr.getVersion());
    }
 else {
      int state=PluginManagerColumnInfo.compareVersion(descr.getVersion(),existing.getVersion());
      if (state > 0) {
        NewVersions2Plugins.put(existing.getPluginId(),Integer.valueOf(1));
      }
      final String pluginCategory=descr.getCategory();
      if (pluginCategory != null) {
        ((IdeaPluginDescriptorImpl)existing).setCategory(pluginCategory);
      }
      ((IdeaPluginDescriptorImpl)existing).setDownloadsCount(((PluginNode)descr).getDownloads());
    }
  }
  sortByColumn(sortableProvider.getSortColumn());
}
