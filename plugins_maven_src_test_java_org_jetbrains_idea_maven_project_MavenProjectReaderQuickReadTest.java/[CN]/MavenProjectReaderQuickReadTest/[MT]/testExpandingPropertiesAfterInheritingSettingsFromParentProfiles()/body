{
  createProjectPom("<groupId>test</groupId>" + "<artifactId>parent</artifactId>" + "<version>1</version>"+ "<profiles>"+ "  <profile>"+ "    <id>one</id>"+ "    <properties>"+ "      <prop>subDir</prop>"+ "    </properties>"+ "    <build>"+ "      <directory>${basedir}/${prop}/custom</directory>"+ "    </build>"+ "  </profile>"+ "</profiles>");
  VirtualFile module=createModulePom("module","<parent>" + "  <groupId>test</groupId>" + "  <artifactId>parent</artifactId>"+ "  <version>1</version>"+ "</parent>");
  org.apache.maven.project.MavenProject p=readProject(module,"one");
  assertEquals(pathFromBasedir(module.getParent(),"subDir/custom"),FileUtil.toSystemDependentName(p.getBuild().getDirectory()));
}
