{
  for (Iterator<PatchAndVariants> iterator=candidates.iterator(); iterator.hasNext(); ) {
    final PatchAndVariants candidate=iterator.next();
    int maxLines=-100;
    FilePatchInProgress best=null;
    for (    FilePatchInProgress variant : candidate.getVariants()) {
      final int lines=getMatchingLines(variant);
      if (lines > maxLines) {
        maxLines=lines;
        best=variant;
      }
    }
    putSelected(result,candidate.getVariants(),best);
  }
}
