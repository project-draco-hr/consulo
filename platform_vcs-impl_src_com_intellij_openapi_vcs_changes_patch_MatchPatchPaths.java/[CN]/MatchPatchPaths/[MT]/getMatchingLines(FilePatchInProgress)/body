{
  final VirtualFile base=patch.getCurrentBase();
  if (base == null)   return -1;
  String text;
  try {
    if (base.getLength() > ourBigFileBound) {
      text=VfsUtil.loadText(base,ourBigFileBound);
    }
 else {
      text=VfsUtil.loadText(base);
    }
  }
 catch (  IOException e) {
    return 0;
  }
  return new GenericPatchApplier(text,patch.getPatch().getHunks()).weightContextMatch(100,5);
}
