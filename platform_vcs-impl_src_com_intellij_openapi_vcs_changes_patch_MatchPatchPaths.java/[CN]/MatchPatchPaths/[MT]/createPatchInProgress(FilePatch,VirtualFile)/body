{
  return patch instanceof TextFilePatch ? new TextFilePatchInProgress((TextFilePatch)patch,null,dir) : patch instanceof ShelvedBinaryFilePatch ? new BinaryFilePatchInProgress((ShelvedBinaryFilePatch)patch,null,dir) : null;
}
