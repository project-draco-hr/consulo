{
  context.getProgressIndicator().setText(CompilerBundle.message("progress.checking.dependencies"));
  final DependencyCache dependencyCache=context.getDependencyCache();
  final Set<VirtualFile> dependentFiles=new HashSet<VirtualFile>();
  dependencyCache.findDependentFiles(context,new Ref<CacheCorruptedException>(),filter,dependentFiles,compiledWithErrors);
  context.getProgressIndicator().setText(dependentFiles.size() > 0 ? CompilerBundle.message("progress.found.dependent.files",dependentFiles.size()) : "");
  return dependentFiles;
}
