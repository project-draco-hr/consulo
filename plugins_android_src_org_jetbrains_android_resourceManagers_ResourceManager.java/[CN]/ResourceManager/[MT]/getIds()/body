{
  final Project project=myModule.getProject();
  final GlobalSearchScope scope=GlobalSearchScope.allScope(myModule.getProject());
  final FileBasedIndex index=FileBasedIndex.getInstance();
  final Map<VirtualFile,Set<String>> file2ids=new HashMap<VirtualFile,Set<String>>();
  for (  String key : index.getAllKeys(AndroidIdIndex.INDEX_ID,project)) {
    if (!AndroidIdIndex.MARKER.equals(key)) {
      if (index.getValues(AndroidIdIndex.INDEX_ID,key,scope).size() > 0) {
        for (        VirtualFile file : index.getContainingFiles(AndroidIdIndex.INDEX_ID,key,scope)) {
          Set<String> ids=file2ids.get(file);
          if (ids == null) {
            ids=new HashSet<String>();
            file2ids.put(file,ids);
          }
          ids.add(key);
        }
      }
    }
  }
  final Set<String> result=new HashSet<String>();
  for (  VirtualFile resSubdir : getResourceSubdirsToSearchIds()) {
    for (    VirtualFile resFile : resSubdir.getChildren()) {
      final Set<String> ids=file2ids.get(resFile);
      if (ids != null) {
        result.addAll(ids);
      }
    }
  }
  return result;
}
