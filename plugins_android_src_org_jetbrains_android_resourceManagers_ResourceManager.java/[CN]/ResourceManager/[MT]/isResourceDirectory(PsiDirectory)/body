{
  VirtualFile vf=dir.getVirtualFile();
  Module module=ModuleUtil.findModuleForPsiElement(dir);
  if (module != null) {
    AndroidFacet facet=AndroidFacet.getInstance(module);
    return facet != null && facet.getLocalResourceManager().isResourceDir(vf);
  }
  if (!SdkConstants.FD_RES.equals(dir.getName()))   return false;
  dir=dir.getParent();
  if (dir != null) {
    if (dir.findFile(SdkConstants.FN_ANDROID_MANIFEST_XML) != null) {
      return true;
    }
    dir=dir.getParent();
    if (dir != null) {
      if (containsAndroidJar(dir))       return true;
      dir=dir.getParent();
      if (dir != null) {
        return containsAndroidJar(dir);
      }
    }
  }
  return false;
}
