{
  final Collection<VirtualFile> files=FileBasedIndex.getInstance().getContainingFiles(AndroidIdIndex.INDEX_ID,id,GlobalSearchScope.allScope(myModule.getProject()));
  final Set<VirtualFile> fileSet=new HashSet<VirtualFile>(files);
  final PsiManager psiManager=PsiManager.getInstance(myModule.getProject());
  for (  VirtualFile subdir : getResourceSubdirsToSearchIds()) {
    for (    VirtualFile file : subdir.getChildren()) {
      if (fileSet.contains(file)) {
        final PsiFile psiFile=psiManager.findFile(file);
        if (psiFile instanceof XmlFile) {
          psiFile.accept(new XmlRecursiveElementVisitor(){
            @Override public void visitXmlAttributeValue(            XmlAttributeValue attributeValue){
              if (AndroidResourceUtil.isIdDeclaration(attributeValue)) {
                final String idInAttr=AndroidResourceUtil.getResourceNameByReferenceText(attributeValue.getValue());
                if (id.equals(idInAttr)) {
                  targets.add(attributeValue);
                }
              }
            }
          }
);
        }
      }
    }
  }
}
