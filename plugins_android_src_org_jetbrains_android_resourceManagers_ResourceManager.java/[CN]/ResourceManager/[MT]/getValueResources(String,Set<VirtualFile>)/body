{
  final List<ResourceElement> result=new ArrayList<ResourceElement>();
  List<Pair<Resources,VirtualFile>> resourceFiles=getResourceElements(files);
  for (  final Pair<Resources,VirtualFile> pair : resourceFiles) {
    final Resources resources=pair.getFirst();
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      @Override public void run(){
        if (!resources.isValid() || myModule.isDisposed() || myModule.getProject().isDisposed()) {
          return;
        }
        result.addAll(AndroidResourceUtil.getValueResourcesFromElement(resourceType,resources));
      }
    }
);
  }
  return result;
}
