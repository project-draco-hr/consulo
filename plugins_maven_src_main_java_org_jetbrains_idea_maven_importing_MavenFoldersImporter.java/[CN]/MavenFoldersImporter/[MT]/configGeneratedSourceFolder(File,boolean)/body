{
switch (myImportingSettings.getGeneratedSourcesFolder()) {
case GENERATED_SOURCE_FOLDER:
    if (!myModel.hasRegisteredSourceSubfolder(dir)) {
      myModel.addSourceFolder(dir.getPath(),isTestSources);
    }
  break;
case SUBFOLDER:
addAllSubDirsAsSources(dir,isTestSources);
break;
case AUTODETECT:
Collection<JavaModuleSourceRoot> sourceRoots=JavaSourceRootDetectionUtil.suggestRoots(dir);
if (sourceRoots.size() == 1) {
JavaModuleSourceRoot root=sourceRoots.iterator().next();
if (dir.equals(root.getDirectory())) {
if (!myModel.hasRegisteredSourceSubfolder(dir)) {
myModel.addSourceFolder(dir.getPath(),isTestSources);
}
break;
}
}
addAllSubDirsAsSources(dir,isTestSources);
break;
}
}
