{
  DataInputStream stream=(DataInputStream)in;
  final ValueContainerImpl<T> valueContainer=new ValueContainerImpl<T>();
  while (stream.available() > 0) {
    final T value=myExternalizer.read(in);
    final int idCount=in.readInt();
    if (idCount < 0) {
      valueContainer.addValue(-idCount,value);
    }
 else     if (idCount > 0) {
      for (int i=0; i < idCount; i++) {
        valueContainer.addValue(in.readInt(),value);
      }
    }
  }
  return valueContainer;
}
