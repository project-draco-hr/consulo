{
  try {
    final ValueContainerImpl<Value> container=myCache.get(key);
    if (container != null) {
      container.addValue(inputId,value);
    }
 else {
      myMap.appendData(key,new PersistentHashMap.ValueDataAppender(){
        public void append(        final DataOutput out) throws IOException {
          myValueExternalizer.save(out,value);
          DataInputOutputUtil.writeSINT(out,-inputId);
        }
      }
);
    }
  }
 catch (  IOException e) {
    throw new StorageException(e);
  }
}
