{
  final List<String> additionalOptions=new ArrayList<String>();
  StringTokenizer tokenizer=new StringTokenizer(javacSettings.getOptionsString()," ");
  if (versionIndex < 6) {
    isAnnotationProcessing=false;
  }
  if (isAnnotationProcessing) {
    additionalOptions.add("-Xprefer:source");
    additionalOptions.add("-implicit:none");
    additionalOptions.add("-proc:only");
  }
  while (tokenizer.hasMoreTokens()) {
    @NonNls String token=tokenizer.nextToken();
    if (versionIndex == 0) {
      if ("-deprecation".equals(token)) {
        continue;
      }
    }
    if (versionIndex <= 4) {
      if ("-Xlint".equals(token)) {
        continue;
      }
    }
    if (isAnnotationProcessing) {
      if (token.startsWith("-proc:")) {
        continue;
      }
      if (token.startsWith("-implicit:")) {
        continue;
      }
    }
    if (token.startsWith("-J-")) {
      commandLine.add(token.substring("-J".length()));
    }
 else {
      additionalOptions.add(token);
    }
  }
  return additionalOptions;
}
