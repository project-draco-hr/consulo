{
  if (!myInitialized) {
    PsiElement elementInclusiveRange=PsiUtil.getElementInclusiveRange(context.getFile(),new TextRange(context.getDocument().getLineStartOffset(context.getStartLine()),context.getDocument().getLineEndOffset(context.getEndLine())));
    elementInclusiveRange=PsiTreeUtil.getParentOfType(elementInclusiveRange,XmlTag.class,false);
    if (elementInclusiveRange instanceof XmlTag) {
      String tagName=((XmlTag)elementInclusiveRange).getName();
      if (tagName.equalsIgnoreCase("style") && ourStyleCommenter != null) {
        myCommenterToUse=(LineCommenter)ourStyleCommenter.clone();
      }
 else       if (tagName.equalsIgnoreCase("script") && ourScriptCommenter != null) {
        myCommenterToUse=(LineCommenter)ourScriptCommenter.clone();
      }
    }
    if (myCommenterToUse == null) {
      myCommenterToUse=new XmlLineCommenter();
    }
    myInitialized=true;
  }
}
