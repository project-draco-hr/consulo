{
  final Commenter commenter=findCommenter(line);
  if (commenter == null)   return;
  String prefix=commenter.getLineCommentPrefix();
  if (prefix != null) {
    myDocument.insertString(offset,prefix);
  }
 else {
    prefix=commenter.getBlockCommentPrefix();
    String suffix=commenter.getBlockCommentSuffix();
    int endOffset=myDocument.getLineEndOffset(line);
    offset=CharArrayUtil.shiftForward(myDocument.getCharsSequence(),offset," \t");
    endOffset=CharArrayUtil.shiftBackward(myDocument.getCharsSequence(),endOffset," \t");
    myDocument.insertString(endOffset,suffix);
    myDocument.insertString(offset,prefix);
  }
}
