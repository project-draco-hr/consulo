{
  final int count=getConstantSearchesCount();
  if (count > MAX_CONSTANT_SEARCHES) {
    myContext.requestRebuildNextTime("Too many changed compile-time constants, project rebuild scheduled");
    throw new ExitException(ExitStatus.CANCELLED);
  }
  Collection<PsiReference> references=mySearcher.findReferences(psiField,ignoreAccessScope);
  incConstantSearchesCount();
  for (  final PsiReference ref : references) {
    if (!(ref instanceof PsiReferenceExpression)) {
      continue;
    }
    PsiElement e=ref.getElement();
    usages.add(e);
    PsiField ownerField=getOwnerField(e);
    if (ownerField != null) {
      if (ownerField.hasModifierProperty(PsiModifier.FINAL)) {
        PsiExpression initializer=ownerField.getInitializer();
        if (initializer != null && PsiUtil.isConstantExpression(initializer)) {
          addUsages(ownerField,usages,ignoreAccessScope);
        }
      }
    }
  }
}
