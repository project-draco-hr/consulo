{
  return new Runnable(){
    @Override public void run(){
      setInitialOutputContent();
      clearDiffPresentation();
      resetChangeCounters();
      for (int index=0; index < fragments.size(); index++) {
        MergeLineFragment fragment=fragments.get(index);
        TextMergeChange change=new TextMergeChange(fragment,index,TextMergeViewer.this);
        myAllMergeChanges.add(change);
        onChangeAdded(change);
      }
      myInitialScrollHelper.onRediff();
      myContentPanel.repaintDividers();
      myStatusPanel.update();
      getEditor().setViewer(false);
      myInnerDiffWorker.onSettingsChanged();
      myInitialRediffFinished=true;
    }
  }
;
}
