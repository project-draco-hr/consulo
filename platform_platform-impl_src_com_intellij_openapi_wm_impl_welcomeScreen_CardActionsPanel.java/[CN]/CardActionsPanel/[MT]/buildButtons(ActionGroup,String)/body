{
  AnAction[] actions=group.getChildren(null);
  List<Button> buttons=new ArrayList<Button>();
  PresentationFactory factory=new PresentationFactory();
  for (  AnAction action : actions) {
    Presentation presentation=action.getTemplatePresentation();
    if (!USE_ICONS) {
      presentation.setIcon(null);
    }
    if (action instanceof ActionGroup) {
      ActionGroup childGroup=(ActionGroup)action;
      if (childGroup.isPopup()) {
        final String id=String.valueOf(++nCards);
        createCardForGroup(childGroup,id,parentId);
        AnAction activateCard=new AnAction(){
          @Override public void actionPerformed(          AnActionEvent e){
            myLayout.swipe(myContent,id,JBCardLayout.SwipeDirection.FORWARD);
          }
        }
;
        buttons.add(new Button(activateCard,presentation));
      }
 else {
        buttons.addAll(buildButtons(childGroup,parentId));
      }
    }
 else {
      action.update(new AnActionEvent(null,DataManager.getInstance().getDataContext(this),ActionPlaces.WELCOME_SCREEN,presentation,ActionManager.getInstance(),0));
      if (presentation.isVisible()) {
        buttons.add(new Button(action,presentation));
      }
    }
  }
  return buttons;
}
