{
  List<AnAction> renderers=new ArrayList<AnAction>();
  List<NodeRenderer> allRenderers=NodeRendererSettings.getInstance().getAllRenderers();
  boolean anyValueDescriptor=false;
  for (Iterator<NodeRenderer> iterator=allRenderers.iterator(); iterator.hasNext(); ) {
    NodeRenderer nodeRenderer=iterator.next();
    boolean allApp=true;
    for (int i=0; i < nodes.length; i++) {
      DebuggerTreeNodeImpl node=nodes[i];
      NodeDescriptorImpl descriptor=node.getDescriptor();
      if (descriptor instanceof ValueDescriptorImpl) {
        anyValueDescriptor=true;
        ValueDescriptorImpl valueDescriptor=((ValueDescriptorImpl)descriptor);
        if (valueDescriptor.isValueValid() && !nodeRenderer.isApplicable(valueDescriptor.getType())) {
          allApp=false;
          break;
        }
      }
    }
    if (!anyValueDescriptor) {
      return new AnAction[0];
    }
    if (allApp) {
      renderers.add(new RendererAction(nodeRenderer));
    }
  }
  List<AnAction> children=new ArrayList<AnAction>();
  AnAction[] viewAsActions=((DefaultActionGroup)ActionManager.getInstance().getAction(DebuggerActions.REPRESENTATION_LIST)).getChildren(null);
  for (int i=0; i < viewAsActions.length; i++) {
    AnAction viewAsAction=viewAsActions[i];
    if (viewAsAction instanceof AutoRendererAction) {
      if (renderers.size() > 1) {
        viewAsAction.getTemplatePresentation().setVisible(true);
        children.add(viewAsAction);
      }
    }
 else {
      children.add(viewAsAction);
    }
  }
  children.add(Separator.getInstance());
  children.addAll(renderers);
  return children.toArray(new AnAction[children.size()]);
}
