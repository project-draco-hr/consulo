{
  copyRJava();
  List<LineMarkerInfo> markers=collectMarkers("res/layout/layout1.xml");
  assertEquals(5,markers.size());
  boolean fileMarker=false;
  for (  LineMarkerInfo marker : markers) {
    GutterIconNavigationHandler handler=marker.getNavigationHandler();
    PsiElement[] targets;
    if (marker.getElement() instanceof XmlFile) {
      fileMarker=true;
      assertInstanceOf(handler,AndroidResourcesLineMarkerProvider.MyNavigationHandler.class);
      targets=((AndroidResourcesLineMarkerProvider.MyNavigationHandler)handler).getTargets();
    }
 else {
      assertInstanceOf(handler,AndroidResourcesLineMarkerProvider.MyLazyNavigationHandler.class);
      Computable<PsiElement[]> targetProvider=((AndroidResourcesLineMarkerProvider.MyLazyNavigationHandler)handler).getTargetProvider();
      targets=targetProvider.compute();
    }
    assertNotNull(targets);
    assertEquals(1,targets.length);
    for (    PsiElement target : targets) {
      assertInstanceOf(target,PsiField.class);
    }
  }
  assertTrue("LineMarker for file not found",fileMarker);
}
