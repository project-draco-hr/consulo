{
  final MyInputValidator validator=new MyInputValidator(project,directory);
  final MyContentPane contentPane=new MyContentPane();
  final DialogWrapper dialog=new DialogWrapper(project,true){
{
      init();
      setTitle("New Dialog");
    }
    protected JComponent createCenterPanel(){
      return contentPane.getPanel();
    }
    protected void doOKAction(){
      myRecentGenerateOK=contentPane.myChkGenerateOK.isSelected();
      myRecentGenerateCancel=contentPane.myChkGenerateCancel.isSelected();
      myRecentGenerateMain=contentPane.myChkGenerateMain.isSelected();
      final String inputString=contentPane.myTfClassName.getText().trim();
      if (validator.checkInput(inputString) && validator.canClose(inputString)) {
        close(OK_EXIT_CODE);
      }
    }
    public JComponent getPreferredFocusedComponent(){
      return contentPane.myTfClassName;
    }
  }
;
  dialog.show();
  return validator.getCreatedElements();
}
