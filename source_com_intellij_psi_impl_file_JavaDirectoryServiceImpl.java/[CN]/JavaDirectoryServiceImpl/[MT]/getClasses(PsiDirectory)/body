{
  LOG.assertTrue(dir.isValid());
  VirtualFile[] vFiles=dir.getVirtualFile().getChildren();
  ArrayList<PsiClass> classes=new ArrayList<PsiClass>();
  final PsiManager psiManager=dir.getManager();
  for (  VirtualFile vFile : vFiles) {
    PsiFile file=psiManager.findFile(vFile);
    if (file instanceof PsiJavaFile && !PsiUtil.isInJspFile(file)) {
      PsiClass[] fileClasses=((PsiJavaFile)file).getClasses();
      classes.addAll(Arrays.asList(fileClasses));
    }
  }
  return classes.toArray(new PsiClass[classes.size()]);
}
