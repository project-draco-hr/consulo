{
  final PsiMethod[] methodsByName=aClass.findMethodsByName(patternMethod.getName(),checkBases);
  if (methodsByName.length == 0)   return Collections.emptyList();
  final ArrayList<PsiMethod> methods=new ArrayList<PsiMethod>();
  final MethodSignature patternSignature=patternMethod.getSignature(PsiSubstitutor.EMPTY);
  for (  final PsiMethod method : methodsByName) {
    final PsiClass superClass=method.getContainingClass();
    final PsiSubstitutor substitutor;
    if (checkBases && !aClass.equals(superClass)) {
      substitutor=TypeConversionUtil.getSuperClassSubstitutor(superClass,aClass,PsiSubstitutor.EMPTY);
      LOG.assertTrue(substitutor != null);
    }
 else {
      substitutor=PsiSubstitutor.EMPTY;
    }
    final MethodSignature signature=method.getSignature(substitutor);
    if (signature.equals(patternSignature)) {
      methods.add(method);
      if (stopOnFirst) {
        break;
      }
    }
  }
  return methods;
}
