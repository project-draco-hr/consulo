{
  LOG.assertTrue(list != null);
synchronized (map) {
    map.put(ALL,list);
    final Iterator<Pair<T,PsiSubstitutor>> iterator=list.iterator();
    while (iterator.hasNext()) {
      final Pair<T,PsiSubstitutor> info=iterator.next();
      final T element=info.getFirst();
      final String currentName=element.getName();
      List<Pair<T,PsiSubstitutor>> listByName=map.get(currentName);
      if (listByName == null) {
        listByName=new ArrayList<Pair<T,PsiSubstitutor>>(1);
        map.put(currentName,listByName);
      }
      listByName.add(info);
    }
  }
}
