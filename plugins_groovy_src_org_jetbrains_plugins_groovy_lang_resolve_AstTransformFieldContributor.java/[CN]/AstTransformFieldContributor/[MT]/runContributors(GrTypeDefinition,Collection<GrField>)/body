{
  Set<GrTypeDefinition> inProgress=IN_PROGRESS.get();
  if (inProgress == null) {
    inProgress=new HashSet<GrTypeDefinition>();
    IN_PROGRESS.set(inProgress);
  }
  boolean added=inProgress.add(clazz);
  assert added;
  try {
    for (    final AstTransformFieldContributor contributor : EP_NAME.getExtensions()) {
      contributor.getFields(clazz,collector);
    }
  }
  finally {
    inProgress.remove(clazz);
  }
}
