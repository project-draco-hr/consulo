{
  final PsiManager mgr=exp.getManager();
  final PsiElementFactory factory=JavaPsiFacade.getInstance(mgr.getProject()).getElementFactory();
  final PsiExpression newCall;
  try {
    newCall=factory.createExpressionFromText(newExpression,null);
  }
 catch (  IncorrectOperationException e) {
    return;
  }
  final PsiElement insertedElement=exp.replace(newCall);
  final CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(mgr.getProject());
  final PsiElement shortenedElement=JavaCodeStyleManager.getInstance(mgr.getProject()).shortenClassReferences(insertedElement);
  codeStyleManager.reformat(shortenedElement);
}
