{
  final ProjectRootManager projectRootManager=ProjectRootManager.getInstance(project);
  final int contentRootCount=projectRootManager.getContentRoots().length;
  if (contentRootCount == 0) {
    return file.getPath();
  }
  final VirtualFile contentRoot=projectRootManager.getFileIndex().getContentRootForFile(file);
  if (contentRoot == null) {
    return file.getPath();
  }
  final String relativePath=VfsUtilCore.getRelativePath(file,contentRoot,'/');
  if (relativePath == null) {
    return file.getPath();
  }
  final String presentableRelativePath=contentRootCount == 1 ? relativePath : contentRoot.getName() + '/' + relativePath;
  return FileUtil.toSystemDependentName(".../" + presentableRelativePath);
}
