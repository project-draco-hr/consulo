{
  if (path.isEmpty()) {
    try {
      path=new File("").getCanonicalPath();
    }
 catch (    IOException e) {
      return path;
    }
  }
 else   if (SystemInfo.isWindows) {
    if (path.charAt(0) == '/' && !path.startsWith("//")) {
      path=path.substring(1);
    }
    if (path.contains("~")) {
      try {
        path=new File(FileUtil.toSystemDependentName(path)).getCanonicalPath();
      }
 catch (      IOException e) {
        return null;
      }
    }
  }
  File file=new File(path);
  if (!isAbsoluteFileOrDriveLetter(file)) {
    path=file.getAbsolutePath();
  }
  return FileUtil.normalize(path);
}
