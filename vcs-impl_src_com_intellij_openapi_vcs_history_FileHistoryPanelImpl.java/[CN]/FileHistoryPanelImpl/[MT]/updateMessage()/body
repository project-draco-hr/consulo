{
  List selection=getSelection();
  final VcsFileRevision revision;
  if (selection.size() != 1) {
    revision=null;
    myComments.setText("");
    myOriginalComment="";
  }
 else {
    revision=getFirstSelectedRevision();
    final String message=revision.getCommitMessage();
    myOriginalComment=message;
    @NonNls final String text="<html><body>" + IssueLinkHtmlRenderer.formatTextWithLinks(myProject,message) + "</body></html>";
    myComments.setText(text);
    myComments.setCaretPosition(0);
  }
  if (myListener != null) {
    myListener.consume(revision);
  }
}
