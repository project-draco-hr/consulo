{
  if (getVirtualFile() == null) {
    final LocalHistoryAction action=startLocalHistoryAction(revision);
    if (getVirtualParent() != null) {
      ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
        public void run(){
          getVirtualParent().refresh(false,true,new Runnable(){
            public void run(){
              myFilePath.refresh();
              action.finish();
            }
          }
);
        }
      }
,"Refreshing files...",false,myProject);
    }
  }
}
