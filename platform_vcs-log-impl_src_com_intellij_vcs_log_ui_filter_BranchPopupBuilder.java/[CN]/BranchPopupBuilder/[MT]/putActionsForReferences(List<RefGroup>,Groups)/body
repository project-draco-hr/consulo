{
  for (  final RefGroup refGroup : references) {
    if (refGroup instanceof SingletonRefGroup) {
      String name=refGroup.getName();
      if (!actions.singletonGroups.contains(name)) {
        actions.singletonGroups.add(name);
      }
    }
 else     if (refGroup.isExpanded()) {
      addToGroup(refGroup,actions.expandedGroups);
    }
 else {
      addToGroup(refGroup,actions.collapsedGroups);
    }
  }
}
