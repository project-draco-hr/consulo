{
synchronized (mySheduledProjects) {
    for (    MavenProject each : mavenProjects) {
      mySheduledProjects.put(each,forUpdate);
    }
  }
  Update update=new Update(this){
    public void run(){
      List<MavenProject> projectToUpdate;
      List<MavenProject> projectToDelete;
synchronized (mySheduledProjects) {
        projectToUpdate=selectScheduledProjects(true);
        projectToDelete=selectScheduledProjects(false);
        mySheduledProjects.clear();
      }
      MavenKeymapExtension.clearActions(myProject,projectToDelete);
      MavenKeymapExtension.updateActions(myProject,projectToUpdate);
    }
  }
;
  if (isUnitTestMode()) {
    update.run();
    return;
  }
  myUpdateQueue.queue(update);
}
