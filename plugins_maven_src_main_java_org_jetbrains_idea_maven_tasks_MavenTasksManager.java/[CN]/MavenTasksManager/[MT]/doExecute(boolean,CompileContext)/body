{
  List<MavenRunnerParameters> parametersList;
synchronized (this) {
    parametersList=new ArrayList<MavenRunnerParameters>();
    Set<MavenCompilerTask> tasks=before ? myState.beforeCompileTasks : myState.afterCompileTasks;
    for (    MavenCompilerTask each : tasks) {
      VirtualFile file=LocalFileSystem.getInstance().findFileByPath(each.getProjectPath());
      if (file == null)       continue;
      parametersList.add(new MavenRunnerParameters(true,file.getParent().getPath(),Arrays.asList(each.getGoal()),myProjectsManager.getExplicitProfiles()));
    }
  }
  return myRunner.runBatch(parametersList,null,null,TasksBundle.message("maven.tasks.executing"),context.getProgressIndicator());
}
