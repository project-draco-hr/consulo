{
  if (targetElement instanceof PsiDirectory) {
    final PsiDirectory directory=(PsiDirectory)targetElement;
    if (directory.getPackage() != null) {
      final PsiElement[] resolvedElements=resolveToPackages(sourceElements);
      if (resolvedElements != null) {
        new MoveClassesOrPackagesToNewDirectoryDialog(directory,resolvedElements).show();
        return true;
      }
    }
  }
  return false;
}
