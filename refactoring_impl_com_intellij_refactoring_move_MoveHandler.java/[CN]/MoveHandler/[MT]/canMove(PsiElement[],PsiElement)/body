{
  MoveType moveType=getMoveType(elements);
  if (moveType == MoveType.NOT_SUPPORTED) {
    return false;
  }
  if (targetContainer == null) {
    return true;
  }
  if (moveType == MoveType.INNER_TO_UPPER) {
    return targetContainer.equals(MoveInnerImpl.getTargetContainer((PsiClass)elements[0],false));
  }
 else   if (moveType == MoveType.MEMBERS) {
    return targetContainer instanceof PsiClass && !(targetContainer instanceof PsiAnonymousClass);
  }
 else   if (moveType == MoveType.CLASSES || moveType == MoveType.PACKAGES) {
    if (targetContainer instanceof PsiPackage) {
      return true;
    }
    if (targetContainer instanceof PsiDirectory) {
      return ((PsiDirectory)targetContainer).getPackage() != null;
    }
    if (targetContainer instanceof PsiClass) {
      return moveType == MoveType.CLASSES;
    }
    return false;
  }
 else   if (moveType == MoveType.FILES || moveType == MoveType.DIRECTORIES) {
    return targetContainer instanceof PsiDirectory || targetContainer instanceof PsiPackage;
  }
 else {
    return false;
  }
}
