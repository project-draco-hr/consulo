{
  int moveType=getMoveType(elements);
  if (moveType == NOT_SUPPORTED) {
    return false;
  }
  if (targetContainer == null) {
    return true;
  }
  if (moveType == INNER_TO_UPPER) {
    return targetContainer.equals(MoveInnerImpl.getTargetContainer((PsiClass)elements[0],false));
  }
 else   if (moveType == MEMBERS) {
    return targetContainer instanceof PsiClass && !(targetContainer instanceof PsiAnonymousClass);
  }
 else   if (moveType == CLASSES || moveType == PACKAGES) {
    if (targetContainer instanceof PsiPackage) {
      return true;
    }
    if (targetContainer instanceof PsiDirectory) {
      return ((PsiDirectory)targetContainer).getPackage() != null;
    }
    return false;
  }
 else   if (moveType == FILES || moveType == DIRECTORIES) {
    return targetContainer instanceof PsiDirectory;
  }
 else {
    return false;
  }
}
