{
  final Library library=myElement.getLibrary();
  final String name;
  final Icon icon;
  if (myElement.isAnonymous()) {
    final VirtualFile[] files=myParentEditor.getLibraryEditor(library).getFiles(OrderRootType.CLASSES);
    if (files.length > 0) {
      name=files[0].getPresentableUrl();
      icon=LibraryTableEditor.getIconForUrl(files[0].getUrl(),true);
    }
 else {
      final String[] urls=myParentEditor.getLibraryEditor(library).getUrls(OrderRootType.CLASSES);
      if (urls.length > 0) {
        final String url=urls[0];
        name=LibraryTableEditor.getPresentablePath(url).replace('/',File.separatorChar);
        icon=LibraryTableEditor.getIconForUrl(url,false);
      }
 else {
        name="<empty library>";
        icon=Icons.LIBRARY_ICON;
      }
    }
  }
 else {
    name=myParentEditor.getLibraryEditor(library).getName();
    icon=Icons.LIBRARY_ICON;
  }
  final boolean changed=!name.equals(myName) || !icon.equals(myClosedIcon);
  if (changed) {
    myName=name;
    myClosedIcon=myOpenIcon=icon;
  }
  return changed;
}
