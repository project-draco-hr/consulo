{
  final XDebuggerTreeNode root=tree.getRoot();
  for (  final XValueNodeImpl node : getSelectedNodes(tree,XValueNodeImpl.class)) {
    node.getValueContainer().calculateEvaluationExpression().done(new Consumer<XExpression>(){
      @Override public void consume(      XExpression expr){
        final XExpression watchExpression=expr != null ? expr : XExpressionImpl.fromText(node.getName());
        if (watchExpression != null) {
          DebuggerUIUtil.invokeLater(new Runnable(){
            @Override public void run(){
              watchesView.addWatchExpression(watchExpression,node instanceof WatchNode ? root.getIndex(node) + 1 : -1,true);
            }
          }
);
        }
      }
    }
);
  }
}
