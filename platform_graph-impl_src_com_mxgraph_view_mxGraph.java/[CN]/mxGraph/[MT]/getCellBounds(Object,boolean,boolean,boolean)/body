{
  mxRectangle result=null;
  Object[] cells;
  if (includeEdges) {
    Set<Object> allCells=new HashSet<Object>();
    allCells.add(cell);
    Set<Object> edges=new HashSet<Object>(Arrays.asList(getEdges(cell)));
    while (!edges.isEmpty() && !allCells.containsAll(edges)) {
      allCells.addAll(edges);
      Set<Object> tmp=new HashSet<Object>();
      Iterator<Object> it=edges.iterator();
      while (it.hasNext()) {
        Object edge=it.next();
        tmp.addAll(Arrays.asList(getEdges(edge)));
      }
      edges=tmp;
    }
    cells=allCells.toArray();
  }
 else {
    cells=new Object[]{cell};
  }
  if (boundingBox) {
    result=view.getBoundingBox(cells);
  }
 else {
    result=view.getBounds(cells);
  }
  if (includeDescendants) {
    int childCount=model.getChildCount(cell);
    for (int i=0; i < childCount; i++) {
      mxRectangle tmp=getCellBounds(model.getChildAt(cell,i),includeEdges,true,boundingBox);
      if (result != null) {
        result.add(tmp);
      }
 else {
        result=tmp;
      }
    }
  }
  return result;
}
