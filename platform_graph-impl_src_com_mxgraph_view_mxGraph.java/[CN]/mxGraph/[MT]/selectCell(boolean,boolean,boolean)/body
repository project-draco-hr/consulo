{
  Object cell=getSelectionCell();
  if (getSelectionCount() > 1) {
    clearSelection();
  }
  Object parent=(cell != null) ? model.getParent(cell) : getDefaultParent();
  int childCount=model.getChildCount(parent);
  if (cell == null && childCount > 0) {
    Object child=model.getChildAt(parent,0);
    setSelectionCell(child);
  }
 else   if ((cell == null || isParent) && view.getState(parent) != null && model.getGeometry(parent) != null) {
    if (getCurrentRoot() != parent) {
      setSelectionCell(parent);
    }
  }
 else   if (cell != null && isChild) {
    int tmp=model.getChildCount(cell);
    if (tmp > 0) {
      Object child=model.getChildAt(cell,0);
      setSelectionCell(child);
    }
  }
 else   if (childCount > 0) {
    int i=((mxICell)parent).getIndex((mxICell)cell);
    if (isNext) {
      i++;
      setSelectionCell(model.getChildAt(parent,i % childCount));
    }
 else {
      i--;
      int index=(i < 0) ? childCount - 1 : i;
      setSelectionCell(model.getChildAt(parent,index));
    }
  }
}
