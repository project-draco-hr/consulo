{
  if (cells == null) {
    cells=getFoldableCells(getSelectionCells(),collapse);
  }
  model.beginUpdate();
  try {
    cellsFolded(cells,collapse,recurse,checkFoldable);
    fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"cells",cells,"collapse",collapse,"recurse",recurse));
  }
  finally {
    model.endUpdate();
  }
  return cells;
}
