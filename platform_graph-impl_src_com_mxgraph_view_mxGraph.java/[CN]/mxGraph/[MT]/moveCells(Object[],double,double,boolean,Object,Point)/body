{
  if (cells != null && (dx != 0 || dy != 0 || clone || target != null)) {
    model.beginUpdate();
    try {
      if (clone) {
        cells=cloneCells(cells,isCloneInvalidEdges());
        if (target == null) {
          target=getDefaultParent();
        }
      }
      boolean previous=isAllowNegativeCoordinates();
      if (target != null) {
        setAllowNegativeCoordinates(true);
      }
      cellsMoved(cells,dx,dy,!clone && isDisconnectOnMove() && isAllowDanglingEdges(),target == null);
      setAllowNegativeCoordinates(previous);
      if (target != null) {
        Integer index=model.getChildCount(target);
        cellsAdded(cells,target,index,null,null,true);
      }
      fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",cells,"dx",dx,"dy",dy,"clone",clone,"target",target,"location",location));
    }
  finally {
      model.endUpdate();
    }
  }
  return cells;
}
