{
  Collection<Object> terminals=new LinkedHashSet<Object>();
  if (edges != null) {
    for (int i=0; i < edges.length; i++) {
      mxCellState state=view.getState(edges[i]);
      Object source=(state != null) ? state.getVisibleTerminal(true) : view.getVisibleTerminal(edges[i],true);
      Object target=(state != null) ? state.getVisibleTerminal(false) : view.getVisibleTerminal(edges[i],false);
      if (targets && source == terminal && target != null && target != terminal) {
        terminals.add(target);
      }
 else       if (sources && target == terminal && source != null && source != terminal) {
        terminals.add(source);
      }
    }
  }
  return terminals.toArray();
}
