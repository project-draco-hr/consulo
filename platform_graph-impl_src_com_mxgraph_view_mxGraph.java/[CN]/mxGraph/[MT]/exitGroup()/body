{
  Object root=model.getRoot();
  Object current=getCurrentRoot();
  if (current != null) {
    Object next=model.getParent(current);
    while (next != root && !isValidRoot(next) && model.getParent(next) != root) {
      next=model.getParent(next);
    }
    if (next == root || model.getParent(next) == root) {
      view.setCurrentRoot(null);
    }
 else {
      view.setCurrentRoot(next);
    }
    mxCellState state=view.getState(current);
    if (state != null) {
      setSelectionCell(current);
    }
  }
}
