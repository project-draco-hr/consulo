{
  boolean isCollapsed=isCellCollapsed(cell);
  List<Object> edges=new ArrayList<Object>();
  int childCount=model.getChildCount(cell);
  for (int i=0; i < childCount; i++) {
    Object child=model.getChildAt(cell,i);
    if (isCollapsed || !isCellVisible(child)) {
      edges.addAll(Arrays.asList(mxGraphModel.getEdges(model,child,incoming,outgoing,includeLoops)));
    }
  }
  edges.addAll(Arrays.asList(mxGraphModel.getEdges(model,cell,incoming,outgoing,includeLoops)));
  List<Object> result=new ArrayList<Object>(edges.size());
  Iterator<Object> it=edges.iterator();
  while (it.hasNext()) {
    Object edge=it.next();
    mxCellState state=view.getState(edge);
    Object source=(state != null) ? state.getVisibleTerminal(true) : view.getVisibleTerminal(edge,true);
    Object target=(state != null) ? state.getVisibleTerminal(false) : view.getVisibleTerminal(edge,false);
    if ((includeLoops && source == target) || ((source != target) && ((incoming && target == cell && (parent == null || isValidAncestor(source,parent,recurse))) || (outgoing && source == cell && (parent == null || isValidAncestor(target,parent,recurse)))))) {
      result.add(edge);
    }
  }
  return result.toArray();
}
