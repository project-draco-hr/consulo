{
  int startOffsetToUse=initialRange.getStartOffset();
  for (int i=startOffsetToUse - 1; i >= 0; i--) {
    char c=text.charAt(i);
    if (!StringUtil.isWhiteSpace(c)) {
      return null;
    }
 else     if (c == '\n') {
      break;
    }
 else {
      startOffsetToUse=i;
    }
  }
  int endOffsetToUse=initialRange.getEndOffset();
  for (int i=endOffsetToUse; i < text.length(); i++) {
    char c=text.charAt(i);
    if (!StringUtil.isWhiteSpace(c)) {
      return null;
    }
 else     if (c == '\n') {
      endOffsetToUse=i;
      break;
    }
  }
  return TextRange.create(startOffsetToUse,endOffsetToUse);
}
