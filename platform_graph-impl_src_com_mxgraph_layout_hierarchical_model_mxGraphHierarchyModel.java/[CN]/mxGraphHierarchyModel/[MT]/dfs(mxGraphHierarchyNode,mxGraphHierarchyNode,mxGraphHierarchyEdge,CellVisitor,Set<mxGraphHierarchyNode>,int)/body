{
  if (root != null) {
    if (!seen.contains(root)) {
      visitor.visit(parent,root,connectingEdge,layer,0);
      seen.add(root);
      final Object[] outgoingEdges=root.connectsAsSource.toArray();
      for (int i=0; i < outgoingEdges.length; i++) {
        mxGraphHierarchyEdge internalEdge=(mxGraphHierarchyEdge)outgoingEdges[i];
        mxGraphHierarchyNode targetNode=internalEdge.target;
        dfs(root,targetNode,internalEdge,visitor,seen,layer + 1);
      }
    }
 else {
      visitor.visit(parent,root,connectingEdge,layer,1);
    }
  }
}
