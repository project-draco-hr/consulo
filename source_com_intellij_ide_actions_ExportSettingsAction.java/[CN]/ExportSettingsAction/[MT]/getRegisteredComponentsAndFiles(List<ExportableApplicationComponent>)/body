{
  final Class[] interfaces=ApplicationManager.getApplication().getComponentInterfaces();
  Map<File,Set<ExportableApplicationComponent>> fileToComponents=new HashMap<File,Set<ExportableApplicationComponent>>();
  for (int i=0; i < interfaces.length; i++) {
    final Class anInterface=interfaces[i];
    final Object component=ApplicationManager.getApplication().getComponent(anInterface);
    if (component instanceof ExportableApplicationComponent) {
      ExportableApplicationComponent exportable=(ExportableApplicationComponent)component;
      exportableComponents.add(exportable);
      final File[] exportFiles=exportable.getExportFiles();
      for (int j=0; j < exportFiles.length; j++) {
        File exportFile=exportFiles[j];
        Set<ExportableApplicationComponent> componentsTied=fileToComponents.get(exportFile);
        if (componentsTied == null) {
          componentsTied=new HashSet<ExportableApplicationComponent>();
          fileToComponents.put(exportFile,componentsTied);
        }
        componentsTied.add(exportable);
      }
    }
  }
  return fileToComponents;
}
