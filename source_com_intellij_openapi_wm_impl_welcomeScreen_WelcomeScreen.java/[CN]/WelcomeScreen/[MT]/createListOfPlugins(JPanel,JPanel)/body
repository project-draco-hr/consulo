{
  PluginDescriptor[] myInstalledPlugins=PluginManager.getPlugins();
  if (myInstalledPlugins == null || myInstalledPlugins.length == 0) {
    addListItemToPlugins(installedPluginsPanel,"<i>No plugins currently installed.</i>",null,null,null,null);
    addListItemToPlugins(bundledPluginsPanel,"<i>All bundled plugins were uninstalled.</i>",null,null,null,null);
  }
 else {
    final Comparator<PluginDescriptor> pluginsComparator=new Comparator<PluginDescriptor>(){
      public int compare(      final PluginDescriptor o1,      final PluginDescriptor o2){
        return o1.getName().compareTo(o2.getName());
      }
    }
;
    Arrays.sort(myInstalledPlugins,pluginsComparator);
    int embeddedPlugins=0;
    int installedPlugins=0;
    String preinstalledPrefix=PathManager.getPreinstalledPluginsPath();
    for (int i=0; i < myInstalledPlugins.length; i++) {
      PluginDescriptor plugin=myInstalledPlugins[i];
      if (plugin.getPath().getAbsolutePath().startsWith(preinstalledPrefix)) {
        embeddedPlugins++;
        addListItemToPlugins(bundledPluginsPanel,plugin.getName(),plugin.getDescription(),plugin.getVendorLogoPath(),plugin.getPluginClassLoader(),plugin.getUrl());
      }
 else {
        installedPlugins++;
        addListItemToPlugins(installedPluginsPanel,plugin.getName(),plugin.getDescription(),plugin.getVendorLogoPath(),plugin.getPluginClassLoader(),plugin.getUrl());
      }
    }
    if (embeddedPlugins == 0) {
      addListItemToPlugins(bundledPluginsPanel,"<i>All bundled plugins were uninstalled.</i>",null,null,null,null);
    }
    if (installedPlugins == 0) {
      addListItemToPlugins(installedPluginsPanel,"<i>No plugins currently installed.</i>",null,null,null,null);
    }
  }
}
