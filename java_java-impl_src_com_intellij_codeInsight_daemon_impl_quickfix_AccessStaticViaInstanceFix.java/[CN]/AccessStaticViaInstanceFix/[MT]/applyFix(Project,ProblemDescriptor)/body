{
  if (!myExpression.isValid() || !myMember.isValid())   return;
  if (!CodeInsightUtilBase.prepareFileForWrite(myExpression.getContainingFile()))   return;
  PsiClass containingClass=myMember.getContainingClass();
  if (containingClass == null)   return;
  try {
    PsiExpression qualifierExpression=myExpression.getQualifierExpression();
    PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
    if (qualifierExpression != null) {
      PsiElement newQualifier=qualifierExpression.replace(factory.createReferenceExpression(containingClass));
      PsiElement qualifiedWithClassName=myExpression.copy();
      newQualifier.delete();
      if (myExpression.resolve() != myMember) {
        myExpression.replace(qualifiedWithClassName);
      }
    }
    PsiFile containingFile=myMember.getContainingFile();
    if (containingFile != null) {
      UndoUtil.markPsiFileForUndo(containingFile);
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
