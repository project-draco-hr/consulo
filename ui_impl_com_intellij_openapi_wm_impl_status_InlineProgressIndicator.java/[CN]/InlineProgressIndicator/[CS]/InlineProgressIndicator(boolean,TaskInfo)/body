{
  myCompact=compact;
  myInfo=processInfo;
  myCancelButton=new InplaceButton(new IconButton(processInfo.getCancelTooltipText(),IconLoader.getIcon("/process/stop.png"),IconLoader.getIcon("/process/stopHovered.png")){
  }
,new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      cancelRequest();
    }
  }
);
  myCancelButton.setVisible(myInfo.isCancellable());
  myCancelButton.setBorder(new EmptyBorder(2,2,2,2));
  myCancelButton.setOpaque(true);
  myCancelButton.setToolTipText(processInfo.getCancelTooltipText());
  if (myCompact) {
    myComponent.setLayout(new BorderLayout(2,0));
    final JPanel textAndProgress=new JPanel(new BorderLayout());
    myText.setHorizontalAlignment(JLabel.RIGHT);
    textAndProgress.add(myText,BorderLayout.CENTER);
    textAndProgress.add(myProgress,BorderLayout.EAST);
    myComponent.add(textAndProgress,BorderLayout.CENTER);
    myComponent.add(myCancelButton,BorderLayout.EAST);
    myComponent.setToolTipText(processInfo.getTitle() + ". " + IdeBundle.message("progress.text.clickToViewProgressWindow"));
    myProgress.setActive(false);
  }
 else {
    myComponent.setLayout(new BorderLayout());
    myCancelButton.setBorder(new EmptyBorder(0,2,0,0));
    myComponent.add(myCancelButton,BorderLayout.EAST);
    myComponent.add(myText,BorderLayout.NORTH);
    myComponent.add(myProgress,BorderLayout.CENTER);
    myComponent.add(myText2,BorderLayout.SOUTH);
  }
  UIUtil.removeQuaquaVisualMarginsIn(myComponent);
  if (!myCompact) {
    myText.recomputeSize();
    myText2.recomputeSize();
  }
}
