{
  if (file instanceof PsiJavaFile) {
    final PsiImportList newImportList=CodeStyleManager.getInstance(myProject).prepareOptimizeImportsResult(file);
    return new Runnable(){
      public void run(){
        try {
          if (newImportList != null) {
            PsiImportList oldImportList=((PsiJavaFile)file).getImportList();
            if (!ImportHelper.areListsEquivalent(oldImportList,newImportList)) {
              oldImportList.replace(newImportList);
            }
          }
        }
 catch (        IncorrectOperationException e) {
          LOG.error(e);
        }
      }
    }
;
  }
 else {
    return EmptyRunnable.getInstance();
  }
}
