{
  List<E> arranged=new ArrayList<E>();
  Set<E> unprocessed=new LinkedHashSet<E>(entries);
  for (  ArrangementRule rule : rules) {
    for (    E entry : entries) {
      if (entry.canBeMatched() && unprocessed.contains(entry) && rule.getMatcher().isMatched(entry)) {
        arranged.add(entry);
        unprocessed.remove(entry);
      }
    }
  }
  arranged.addAll(unprocessed);
  return arranged;
}
