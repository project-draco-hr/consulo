{
  if (fileOrDir.isDirectory())   return true;
  if (ProjectCoreUtil.isProjectOrWorkspaceFile(fileOrDir))   return true;
  if (projectFileIndex.isInContent(fileOrDir) && (myIncludeTestSource || !projectFileIndex.isInTestSourceContent(fileOrDir)) && !isInGeneratedSources(fileOrDir,psiManager.getProject())) {
    return processFile(fileOrDir,visitor,psiManager,needReadAction);
  }
  return true;
}
