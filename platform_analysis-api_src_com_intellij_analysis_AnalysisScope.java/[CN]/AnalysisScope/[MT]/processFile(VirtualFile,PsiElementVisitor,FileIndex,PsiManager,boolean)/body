{
  if (fileOrDir.isDirectory())   return true;
  if (ProjectCoreUtil.isProjectOrWorkspaceFile(fileOrDir))   return true;
  if (projectFileIndex.isInContent(fileOrDir) && (myIncludeTestSource || !projectFileIndex.isInTestSourceContent(fileOrDir)) && !GeneratedSourcesFilter.isGenerated(psiManager.getProject(),fileOrDir)) {
    return processFile(fileOrDir,visitor,psiManager,needReadAction);
  }
  return true;
}
