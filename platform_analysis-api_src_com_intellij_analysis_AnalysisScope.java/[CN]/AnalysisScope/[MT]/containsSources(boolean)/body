{
  if (myElement != null) {
    final Project project=myElement.getProject();
    final ProjectFileIndex index=ProjectRootManager.getInstance(project).getFileIndex();
    if (myElement instanceof PsiDirectory) {
      final VirtualFile directory=((PsiFileSystemItem)myElement).getVirtualFile();
      if (index.isInSourceContent(directory)) {
        return isTest ? index.isInTestSourceContent(directory) : !index.isInTestSourceContent(directory);
      }
    }
 else     if (myElement instanceof PsiFile) {
      final VirtualFile file=((PsiFileSystemItem)myElement).getVirtualFile();
      if (file != null) {
        return isTest ? index.isInTestSourceContent(file) : !index.isInTestSourceContent(file);
      }
    }
  }
  return true;
}
