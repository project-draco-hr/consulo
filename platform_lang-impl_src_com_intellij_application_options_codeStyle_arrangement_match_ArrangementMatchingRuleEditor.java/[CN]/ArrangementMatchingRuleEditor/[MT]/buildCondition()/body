{
  List<ArrangementMatchCondition> conditions=ContainerUtilRt.newArrayList();
  ArrangementSettingsToken orderType=null;
  for (  ArrangementUiComponent component : myComponents.values()) {
    if (!component.isEnabled() || !component.isSelected()) {
      continue;
    }
    ArrangementSettingsToken token=component.getToken();
    if (token != null && StdArrangementTokenType.ORDER.is(token)) {
      orderType=token;
    }
 else {
      conditions.add(component.getMatchCondition());
    }
  }
  if (!conditions.isEmpty()) {
    if (orderType == null) {
      orderType=StdArrangementTokens.Order.KEEP;
    }
    return Pair.create(ArrangementUtil.combine(conditions.toArray(new ArrangementMatchCondition[conditions.size()])),orderType);
  }
 else {
    return null;
  }
}
