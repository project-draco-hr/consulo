{
  if (FileTypeRegistry.getInstance().isFileIgnored(file)) {
    return;
  }
  if (!file.isWritable()) {
    throw new IncorrectOperationException(PsiBundle.message("cannot.delete.a.read.only.file",file.getPresentableUrl()));
  }
  if (file.isDirectory() && !file.isSymLink()) {
    VirtualFile[] children=file.getChildren();
    for (    VirtualFile aChildren : children) {
      checkDelete(aChildren);
    }
  }
}
