{
  VfsUtilCore.visitChildrenRecursively(file,new VirtualFileVisitor(VirtualFileVisitor.NO_FOLLOW_SYMLINKS){
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      if (FileTypeRegistry.getInstance().isFileIgnored(file)) {
        return false;
      }
      if (!file.isWritable()) {
        throw new IncorrectOperationException(PsiBundle.message("cannot.delete.a.read.only.file",file.getPresentableUrl()));
      }
      return true;
    }
  }
);
}
