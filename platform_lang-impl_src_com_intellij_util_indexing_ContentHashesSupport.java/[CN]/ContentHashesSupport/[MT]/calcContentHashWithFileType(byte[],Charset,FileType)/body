{
  MessageDigest messageDigest=ContentHashesUtil.HASHER_CACHE.getValue();
  Charset defaultCharset=Charset.defaultCharset();
  messageDigest.update(fileType.getName().getBytes(defaultCharset));
  messageDigest.update((byte)0);
  messageDigest.update(String.valueOf(bytes.length).getBytes(defaultCharset));
  messageDigest.update((byte)0);
  messageDigest.update((charset != null ? charset.name() : "null_charset").getBytes(defaultCharset));
  messageDigest.update((byte)0);
  messageDigest.update(bytes,0,bytes.length);
  return messageDigest.digest();
}
