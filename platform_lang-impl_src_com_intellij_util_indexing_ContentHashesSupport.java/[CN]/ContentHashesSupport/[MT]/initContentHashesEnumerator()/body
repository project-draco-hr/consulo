{
  if (ourHashesWithFileType != null)   return;
synchronized (ContentHashesSupport.class) {
    if (ourHashesWithFileType != null)     return;
    ContentHashesUtil.HashEnumerator hashEnumerator=null;
    final File hashEnumeratorFile=new File(IndexInfrastructure.getPersistentIndexRoot(),"hashesWithFileType");
    try {
      hashEnumerator=new ContentHashesUtil.HashEnumerator(hashEnumeratorFile,null);
      FlushingDaemon.everyFiveSeconds(new Runnable(){
        @Override public void run(){
          if (ourHashesWithFileType.isDirty())           ourHashesWithFileType.force();
        }
      }
);
      ourHashesWithFileType=hashEnumerator;
    }
 catch (    IOException ex) {
      IOUtil.deleteAllFilesStartingWith(hashEnumeratorFile);
      throw ex;
    }
  }
}
