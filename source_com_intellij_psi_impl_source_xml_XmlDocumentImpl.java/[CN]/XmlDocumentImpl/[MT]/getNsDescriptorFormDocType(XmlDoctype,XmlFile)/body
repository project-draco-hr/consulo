{
  XmlNSDescriptor descr=null;
  if (doctype.getMarkupDecl() != null) {
    descr=(XmlNSDescriptor)doctype.getMarkupDecl().getMetaData();
    final XmlElementDescriptor[] rootElementsDescriptors=descr.getRootElementsDescriptors(this);
    if (rootElementsDescriptors.length == 0)     descr=null;
  }
  if (doctype.getDtdUri() != null) {
    final XmlFile xmlFile=XmlUtil.findXmlFile(containingFile,doctype.getDtdUri());
    final XmlNSDescriptor descr1=xmlFile == null ? null : (XmlNSDescriptor)xmlFile.getDocument().getMetaData();
    if (descr != null && descr1 != null) {
      descr=new XmlNSDescriptorSequence(new XmlNSDescriptor[]{descr,descr1});
    }
 else     if (descr1 != null) {
      descr=descr1;
    }
  }
  return descr;
}
