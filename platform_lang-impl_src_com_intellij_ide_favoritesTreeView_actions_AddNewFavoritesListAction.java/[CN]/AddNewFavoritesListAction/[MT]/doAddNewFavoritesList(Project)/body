{
  final FavoritesManager favoritesManager=FavoritesManager.getInstance(project);
  final String name=Messages.showInputDialog(project,IdeBundle.message("prompt.input.new.favorites.list.name"),IdeBundle.message("title.add.new.favorites.list"),Messages.getInformationIcon(),getUniqueName(project),new InputValidator(){
    public boolean checkInput(    String inputString){
      return inputString != null && inputString.trim().length() > 0;
    }
    public boolean canClose(    String inputString){
      final boolean isNew=ArrayUtil.find(favoritesManager.getAvailableFavoritesLists(),inputString.trim()) == -1;
      if (!isNew) {
        Messages.showErrorDialog(project,IdeBundle.message("error.favorites.list.already.exists",inputString.trim()),IdeBundle.message("title.unable.to.add.favorites.list"));
        return false;
      }
      return inputString.trim().length() > 0;
    }
  }
);
  if (name == null || name.length() == 0)   return null;
  favoritesManager.createNewList(name);
  return name;
}
