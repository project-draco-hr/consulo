{
  if (isCompatibleCharset(virtualFile,bytes,text,charset) == null) {
    int res=Messages.showDialog("File '" + virtualFile.getName() + "' most likely wasn't stored in the '"+ charset.displayName()+ "' encoding.","Incompatible Encoding: " + charset.displayName(),new String[]{action + " anyway","Cancel"},1,AllIcons.General.WarningDialog);
    if (res != 0)     return false;
  }
  return true;
}
