{
  super(document);
  Charset charset=EncodingManager.getInstance().getEncoding(FileDocumentManager.getInstance().getFile(document),false);
  myCharset=charset == null ? Charset.defaultCharset() : charset;
  myOffset=offset;
  myOldString=oldString == null ? "" : compressCharSequence(oldString,myCharset);
  myNewString=newString == null ? "" : compressCharSequence(newString,myCharset);
  myOldTimeStamp=oldTimeStamp;
  myNewTimeStamp=document.getModificationStamp();
}
