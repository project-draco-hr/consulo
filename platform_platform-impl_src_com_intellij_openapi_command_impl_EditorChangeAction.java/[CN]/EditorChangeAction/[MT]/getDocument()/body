{
  if (myDocument != null)   return myDocument;
  if (!myDocumentFile.isValid()) {
    final VirtualFile file=VirtualFileManager.getInstance().findFileByUrl(myDocumentFile.getUrl());
    if (file != null) {
      return (DocumentEx)FileDocumentManager.getInstance().getDocument(file);
    }
  }
  return (DocumentEx)FileDocumentManager.getInstance().getDocument(myDocumentFile);
}
