{
  int index=indexOfAny(text,"\n\r");
  if (index == -1)   return null;
  if (startsWith(text,index,"\r\n"))   return LineSeparator.CRLF;
  if (text.charAt(index) == '\r')   return LineSeparator.CR;
  if (text.charAt(index) == '\n')   return LineSeparator.LF;
  throw new IllegalStateException();
}
