{
  final StringTokenizer tokenizer=new StringTokenizer(text,tokenizerDelim,leaveOriginalDelims);
  final StringBuilder out=new StringBuilder(text.length());
  boolean toCapitalize=true;
  while (tokenizer.hasMoreTokens()) {
    final String word=tokenizer.nextToken();
    if (!leaveOriginalDelims && out.length() > 0) {
      out.append(' ');
    }
    out.append(toCapitalize ? capitalize(word) : word);
    if (!allWords) {
      toCapitalize=false;
    }
  }
  return out.toString();
}
