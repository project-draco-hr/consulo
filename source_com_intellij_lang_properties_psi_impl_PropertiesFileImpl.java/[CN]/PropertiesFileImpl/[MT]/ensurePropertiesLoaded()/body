{
synchronized (PsiLock.LOCK) {
    if (myPropertiesMap != null) {
      return;
    }
    final ASTNode[] props=getPropertiesList().getChildren(PropertiesElementTypes.PROPERTIES);
    myPropertiesMap=new LinkedHashMap<String,List<Property>>();
    myProperties=new ArrayList<Property>(props.length);
    for (    final ASTNode prop : props) {
      final Property property=(Property)prop.getPsi();
      String key=property.getKey();
      List<Property> list=myPropertiesMap.get(key);
      if (list == null) {
        list=new SmartList<Property>();
        myPropertiesMap.put(key,list);
      }
      list.add(property);
      myProperties.add(property);
    }
  }
}
