{
  VirtualFile virtualFile=getVirtualFile();
  if (!isValid() || virtualFile == null) {
    return ResourceBundleImpl.NULL;
  }
  String baseName=PropertiesUtil.getBaseName(virtualFile);
  PsiDirectory directory=ApplicationManager.getApplication().runReadAction(new Computable<PsiDirectory>(){
    @Nullable public PsiDirectory compute(){
      return getContainingFile().getContainingDirectory();
    }
  }
);
  if (directory == null)   return ResourceBundleImpl.NULL;
  return new ResourceBundleImpl(directory.getVirtualFile(),baseName);
}
