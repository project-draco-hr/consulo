{
  if (context == null)   return Collections.emptySet();
  if (packageName.contains("*")) {
    final Pattern pattern=PatternUtil.fromMask(packageName);
    final Set<PsiJavaPackage> packages=new HashSet<PsiJavaPackage>();
    processSubPackages(context,new Processor<PsiJavaPackage>(){
      @Override public boolean process(      PsiJavaPackage psiPackage){
        String name=psiPackage.getName();
        if (name != null && pattern.matcher(name).matches()) {
          packages.add(psiPackage);
        }
        return true;
      }
    }
);
    return packages;
  }
 else {
    return super.resolvePackageName(context,packageName);
  }
}
