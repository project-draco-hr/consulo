{
  if (myModules.size() == 1) {
    moveClass(project,editor,file,myModules.keySet().iterator().next());
  }
 else {
    LOG.assertTrue(editor != null);
    final JBList list=new JBList(myModules.keySet());
    list.setCellRenderer(new PsiElementListCellRenderer<PsiClass>(){
      @Override public String getElementText(      PsiClass psiClass){
        return psiClass.getQualifiedName();
      }
      @Nullable @Override protected String getContainerText(      PsiClass element,      String name){
        return null;
      }
      @Override protected int getIconFlags(){
        return 0;
      }
    }
);
    JBPopupFactory.getInstance().createListPopupBuilder(list).setTitle("Choose Class to Move").setMovable(false).setResizable(false).setRequestFocus(true).setItemChoosenCallback(new Runnable(){
      public void run(){
        final Object value=list.getSelectedValue();
        if (value instanceof PsiClass) {
          moveClass(project,editor,file,(PsiClass)value);
        }
      }
    }
).createPopup().showInBestPositionFor(editor);
  }
}
