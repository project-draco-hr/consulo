{
  final VirtualFile file=getInstance().getFile(document);
  if (file != null && file.isValid()) {
    return ReadonlyStatusHandler.ensureFilesWritable(project,file);
  }
  if (document.isWritable()) {
    return true;
  }
  document.fireReadOnlyModificationAttempt();
  return false;
}
