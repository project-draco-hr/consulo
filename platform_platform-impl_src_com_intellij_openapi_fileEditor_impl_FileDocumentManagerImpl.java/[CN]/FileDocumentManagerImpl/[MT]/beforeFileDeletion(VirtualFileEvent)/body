{
  if (!event.isFromRefresh()) {
    VirtualFile file=event.getFile();
    if (file.getFileSystem() instanceof TempFileSystem) {
      return;
    }
    VfsUtilCore.visitChildrenRecursively(file,new VirtualFileVisitor(){
      @Override public boolean visitFile(      @NotNull VirtualFile file){
        Document document=getCachedDocument(file);
        if (document != null) {
          removeFromUnsaved(document);
        }
        return true;
      }
    }
);
  }
}
