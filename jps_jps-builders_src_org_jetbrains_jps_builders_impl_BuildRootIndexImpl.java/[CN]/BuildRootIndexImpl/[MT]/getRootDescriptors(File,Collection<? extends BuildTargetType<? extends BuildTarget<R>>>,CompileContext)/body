{
  List<BuildRootDescriptor> descriptors=myRootToDescriptor.get(root);
  List<R> result=new SmartList<R>();
  if (descriptors != null) {
    for (    BuildRootDescriptor descriptor : descriptors) {
      if (types == null || types.contains(descriptor.getTarget().getTargetType())) {
        result.add((R)descriptor);
      }
    }
  }
  if (context != null) {
    final Map<File,BuildRootDescriptor> contextMap=ROOT_DESCRIPTOR_MAP.get(context);
    if (contextMap != null) {
      BuildRootDescriptor descriptor=contextMap.get(root);
      if (descriptor != null && (types == null || types.contains(descriptor.getTarget().getTargetType()))) {
        result.add((R)descriptor);
      }
    }
  }
  return result;
}
