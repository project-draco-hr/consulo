{
  File current=file;
  Collection<R> result=null;
  while (current != null) {
    List<R> descriptors=getRootDescriptors(current,types,context);
    if (!descriptors.isEmpty()) {
      if (result == null) {
        result=descriptors;
      }
 else {
        result=new ArrayList<R>(result);
        result.addAll(descriptors);
      }
    }
    current=FileUtil.getParentFile(current);
  }
  return result != null ? result : Collections.<R>emptyList();
}
