{
  List<R> descriptors=target.computeRootDescriptors(model,index,ignoredFileIndex,dataPaths);
  for (  AdditionalRootsProviderService<?> provider : rootsProviders) {
    if (provider.getTargetTypes().contains(target.getTargetType())) {
      AdditionalRootsProviderService<R> providerService=(AdditionalRootsProviderService<R>)provider;
      final List<R> additionalRoots=providerService.getAdditionalRoots(target,dataPaths);
      if (!additionalRoots.isEmpty()) {
        descriptors=new ArrayList<R>(descriptors);
        descriptors.addAll(additionalRoots);
      }
    }
  }
  for (  BuildRootDescriptor descriptor : descriptors) {
    registerDescriptor(descriptor);
  }
  myRootsByTarget.put(target,descriptors);
}
