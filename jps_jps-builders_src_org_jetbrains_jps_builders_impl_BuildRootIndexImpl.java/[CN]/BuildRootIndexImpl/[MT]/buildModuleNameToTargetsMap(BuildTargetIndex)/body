{
  final Map<String,List<ModuleBuildTarget>> moduleNameToTargetsMap=new HashMap<String,List<ModuleBuildTarget>>();
  for (  JavaModuleBuildTargetType type : JavaModuleBuildTargetType.ALL_TYPES) {
    for (    ModuleBuildTarget target : targetIndex.getAllTargets(type)) {
      final String moduleName=target.getModule().getName();
      List<ModuleBuildTarget> targets=moduleNameToTargetsMap.get(moduleName);
      if (targets == null) {
        targets=new ArrayList<ModuleBuildTarget>();
        moduleNameToTargetsMap.put(moduleName,targets);
      }
      targets.add(target);
    }
  }
  return moduleNameToTargetsMap;
}
