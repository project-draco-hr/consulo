{
  Map<File,BuildRootDescriptor> rootToDescriptorMap=ROOT_DESCRIPTOR_MAP.get(context);
  if (rootToDescriptorMap == null) {
    rootToDescriptorMap=new THashMap<File,BuildRootDescriptor>(FileUtil.FILE_HASHING_STRATEGY);
    ROOT_DESCRIPTOR_MAP.set(context,rootToDescriptorMap);
  }
  Map<BuildTarget<?>,List<? extends BuildRootDescriptor>> targetToRootMap=TEMP_TARGET_ROOTS_MAP.get(context);
  if (targetToRootMap == null) {
    targetToRootMap=new HashMap<BuildTarget<?>,List<? extends BuildRootDescriptor>>();
    TEMP_TARGET_ROOTS_MAP.set(context,targetToRootMap);
  }
  final BuildRootDescriptor d=rootToDescriptorMap.get(root.getRootFile());
  if (d != null) {
    return;
  }
  List<R> targetRoots=(List<R>)targetToRootMap.get(target);
  if (targetRoots == null) {
    targetRoots=new ArrayList<R>();
    targetToRootMap.put(target,targetRoots);
  }
  rootToDescriptorMap.put(root.getRootFile(),root);
  targetRoots.add(root);
}
