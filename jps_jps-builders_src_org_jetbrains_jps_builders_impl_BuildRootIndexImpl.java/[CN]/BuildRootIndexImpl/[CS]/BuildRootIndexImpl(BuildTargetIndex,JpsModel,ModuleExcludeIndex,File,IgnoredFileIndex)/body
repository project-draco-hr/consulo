{
  myRootsByTarget=new HashMap<BuildTarget<?>,List<? extends BuildRootDescriptor>>();
  myRootToDescriptor=new THashMap<File,List<BuildRootDescriptor>>(FileUtil.FILE_HASHING_STRATEGY);
  final Iterable<AdditionalRootsProviderService> rootsProviders=JpsServiceManager.getInstance().getExtensions(AdditionalRootsProviderService.class);
  for (  BuildTargetType<?> targetType : BuilderRegistry.getInstance().getTargetTypes()) {
    for (    BuildTarget<?> target : targetIndex.getAllTargets(targetType)) {
      addRoots(dataStorageRoot,rootsProviders,targetType,target,model,index,ignoredFileIndex);
    }
  }
}
