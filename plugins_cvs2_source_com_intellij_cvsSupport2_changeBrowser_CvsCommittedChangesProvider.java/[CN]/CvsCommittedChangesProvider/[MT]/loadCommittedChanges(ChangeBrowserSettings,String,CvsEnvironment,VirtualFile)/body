{
  if (connectionSettings.isOffline()) {
    return Collections.emptyList();
  }
  final CvsChangeListsBuilder builder=new CvsChangeListsBuilder(module,connectionSettings,myProject,rootFile);
  Date dateTo=settings.getDateBeforeFilter();
  Date dateFrom=settings.getDateAfterFilter();
  if (dateFrom == null) {
    final Calendar calendar=Calendar.getInstance();
    calendar.set(1970,2,2);
    dateFrom=calendar.getTime();
  }
  final List<LogInformationWrapper> log=new ArrayList<LogInformationWrapper>();
  final CvsResult executionResult=runRLogOperation(connectionSettings,module,dateFrom,dateTo,log);
  if (executionResult.isCanceled()) {
    throw new ProcessCanceledException();
  }
 else   if (!executionResult.hasNoErrors()) {
    throw executionResult.composeError();
  }
 else {
    builder.addLogs(log);
    final List<CvsChangeList> versions=builder.getVersions();
    settings.filterChanges(versions);
    return versions;
  }
}
