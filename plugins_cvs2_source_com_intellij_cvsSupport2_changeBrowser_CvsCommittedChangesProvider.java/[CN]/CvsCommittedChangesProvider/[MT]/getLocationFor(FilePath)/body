{
  if (!CvsUtil.fileIsUnderCvs(root.getIOFile())) {
    return null;
  }
  final VirtualFile rootDir=root.isDirectory() ? root.getVirtualFile() : root.getVirtualFileParent();
  final String module=CvsUtil.getModuleName(root);
  final CvsEnvironment connectionSettings=CvsEntriesManager.getInstance().getCvsConnectionSettingsFor(rootDir);
  return new CvsRepositoryLocation(rootDir,connectionSettings,module);
}
