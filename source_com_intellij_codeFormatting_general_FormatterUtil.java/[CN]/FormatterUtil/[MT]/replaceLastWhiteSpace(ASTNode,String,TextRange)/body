{
  LeafElement lastWS=TreeUtil.findLastLeaf(astNode);
  if (lastWS.getElementType() != ElementType.WHITE_SPACE) {
    lastWS=null;
  }
  if (lastWS != null && !lastWS.getTextRange().equals(textRange)) {
    return;
  }
  if (whiteSpace.length() == 0 && lastWS == null) {
    return;
  }
  if (lastWS != null && whiteSpace.length() == 0) {
    lastWS.getTreeParent().removeRange(lastWS,null);
    return;
  }
  LeafElement whiteSpaceElement=Factory.createSingleLeafElement(ElementType.WHITE_SPACE,whiteSpace,0,whiteSpace.length(),SharedImplUtil.findCharTableByTree(astNode),SharedImplUtil.getManagerByTree(astNode));
  if (lastWS == null) {
    astNode.addChild(whiteSpaceElement,null);
  }
 else {
    ASTNode treeParent=lastWS.getTreeParent();
    treeParent.replaceChild(lastWS,whiteSpaceElement);
  }
}
