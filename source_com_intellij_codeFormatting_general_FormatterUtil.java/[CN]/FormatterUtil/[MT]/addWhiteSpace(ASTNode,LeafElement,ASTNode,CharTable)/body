{
  final ASTNode treeParent=treePrev.getTreeParent();
  if (treePrev.getTreePrev() != null && treePrev.getTreePrev().getElementType() == ElementType.XML_TEXT) {
    treePrev.getTreePrev().addChild(whiteSpaceElement);
  }
 else {
    if (isTag(treeParent) && leafAfter.getElementType() == ElementType.XML_START_TAG_START || leafAfter.getElementType() == ElementType.XML_END_TAG_START) {
      CompositeElement xmlTextElement=Factory.createCompositeElement(ElementType.XML_TEXT,charTable,SharedImplUtil.getManagerByTree(treePrev));
      xmlTextElement.addChild(whiteSpaceElement);
      treeParent.addChild(xmlTextElement,treePrev);
    }
 else {
      treeParent.addChild(whiteSpaceElement,treePrev);
    }
  }
}
