{
  if (element == null)   return null;
  ASTNode treePrev=element.getTreePrev();
  if (treePrev != null) {
    ASTNode candidate=getLastChildOf(treePrev);
    if (candidate != null && candidate.getElementType() == type) {
      return candidate;
    }
 else     if (candidate != null && candidate.getTextLength() != 0) {
      return null;
    }
 else {
      return getElementBefore(candidate,type);
    }
  }
 else {
    final ASTNode treeParent=element.getTreeParent();
    if (treeParent == null || treeParent.getTreeParent() == null) {
      return null;
    }
 else {
      return getElementBefore(treeParent,type);
    }
  }
}
