{
  return ApplicationManager.getApplication().runReadAction(new Computable<Editor>(){
    public Editor compute(){
      final EditorFactory editorFactory=EditorFactory.getInstance();
      final Document editorDocument=editorFactory.createDocument("");
      final EditorEx editor=(EditorEx)editorFactory.createViewer(editorDocument,myProject);
      final Highlighter highlighter=new MyHighghlighter();
      editor.setHighlighter(highlighter);
      editor.putUserData(CONSOLE_VIEW_IN_EDITOR_VIEW,ConsoleViewImpl.this);
      final EditorSettings editorSettings=editor.getSettings();
      editorSettings.setLineMarkerAreaShown(false);
      editorSettings.setLineNumbersShown(false);
      editorSettings.setFoldingOutlineShown(false);
      editorSettings.setAdditionalPageAtBottom(false);
      final EditorColorsScheme scheme=editor.getColorsScheme();
      scheme.setColor(EditorColors.BACKGROUND_COLOR,BACKGROUND_COLOR);
      scheme.setColor(EditorColors.READONLY_BACKGROUND_COLOR,BACKGROUND_COLOR);
      scheme.setColor(EditorColors.CARET_ROW_COLOR,null);
      scheme.setColor(EditorColors.RIGHT_MARGIN_COLOR,null);
      editor.addEditorMouseListener(new EditorPopupHandler(){
        public void invokePopup(        final EditorMouseEvent event){
          final MouseEvent mouseEvent=event.getMouseEvent();
          popupInvoked(mouseEvent.getComponent(),mouseEvent.getX(),mouseEvent.getY());
        }
      }
);
      editor.addEditorMouseListener(new EditorMouseAdapter(){
        public void mouseReleased(        final EditorMouseEvent e){
          final MouseEvent mouseEvent=e.getMouseEvent();
          if (!mouseEvent.isPopupTrigger()) {
            navigate(e);
          }
        }
      }
);
      editor.getContentComponent().addMouseMotionListener(new MouseMotionAdapter(){
        public void mouseMoved(        final MouseEvent e){
          final HyperlinkInfo info=getHyperlinkInfoByPoint(e.getPoint());
          if (info != null) {
            editor.getContentComponent().setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
          }
 else {
            editor.getContentComponent().setCursor(Cursor.getPredefinedCursor(Cursor.TEXT_CURSOR));
          }
        }
      }
);
      setEditorUpActions(editor);
      return editor;
    }
  }
);
}
