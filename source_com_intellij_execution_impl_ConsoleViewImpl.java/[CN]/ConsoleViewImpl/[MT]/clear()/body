{
  assertIsDispatchThread();
synchronized (LOCK) {
    myContentSize=0;
    myDeferredOutput.setLength(0);
    myDeferredUserInput.setLength(0);
    if (myEditor != null) {
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          myHyperlinks.clear();
          myEditor.getMarkupModel().removeAllHighlighters();
          myTokens.clear();
          CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
            public void run(){
              myEditor.getDocument().deleteString(0,myEditor.getDocument().getTextLength());
            }
          }
,null,null);
        }
      }
);
    }
  }
}
