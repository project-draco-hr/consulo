{
  if (myEditor != null && myEditor.isModified()) {
    myModified=true;
    myEditor.apply();
  }
  String[] errorString=new String[1];
  if (!canApply(false,errorString)) {
    throw new ConfigurationException(errorString[0]);
  }
  ArrayList<FileTemplate> newModifiedItems=new ArrayList<FileTemplate>();
  FileTemplate[] templates=myTemplatesList.getTemplates();
  for (  FileTemplate template : templates) {
    newModifiedItems.add(template);
  }
  FileTemplateManager templatesManager=FileTemplateManager.getInstance();
  apply(newModifiedItems,myTemplatesList.savedTemplates,TEMPLATE_ID,templatesManager.getAllTemplates());
  newModifiedItems=new ArrayList<FileTemplate>();
  templates=myIncludesList.getTemplates();
  for (  FileTemplate template : templates) {
    newModifiedItems.add(template);
  }
  apply(newModifiedItems,myIncludesList.savedTemplates,PATTERN_ID,templatesManager.getAllPatterns());
  newModifiedItems=new ArrayList<FileTemplate>();
  templates=myCodeTemplatesList.getTemplates();
  for (  FileTemplate template : templates) {
    newModifiedItems.add(template);
  }
  apply(newModifiedItems,myCodeTemplatesList.savedTemplates,CODE_ID,templatesManager.getAllCodeTemplates());
  if (myJ2eeTemplatesList != null) {
    newModifiedItems=new ArrayList<FileTemplate>();
    templates=myJ2eeTemplatesList.getTemplates();
    for (    FileTemplate template : templates) {
      newModifiedItems.add(template);
    }
    apply(newModifiedItems,myJ2eeTemplatesList.savedTemplates,J2EE_ID,templatesManager.getAllJ2eeTemplates());
  }
  FileTemplateManager.getInstance().saveAll();
  if (myEditor != null) {
    myModified=false;
    fireListChanged();
    reset();
  }
}
