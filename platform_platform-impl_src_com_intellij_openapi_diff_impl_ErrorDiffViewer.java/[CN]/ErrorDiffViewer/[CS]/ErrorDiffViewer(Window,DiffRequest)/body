{
  myRequest=request;
  myPanel=new AbstractDataProviderPanel(new BorderLayout(),false){
    @Override public void calcData(    DataKey key,    DataSink sink){
      final Object data=myRequest.getGenericData().get(key.getName());
      if (data != null) {
        sink.put(key,data);
      }
    }
  }
;
  myPanel.setFocusable(true);
  final ActionManager actionManager=ActionManager.getInstance();
  myToolbar=new DiffToolbarComponent(myPanel);
  final DiffRequest.ToolbarAddons addons=new DiffRequest.ToolbarAddons(){
    @Override public void customize(    DiffToolbar toolbar){
      toolbar.addAction(actionManager.getAction("DiffPanel.Toolbar"));
      toolbar.addAction(actionManager.getAction("ContextHelp"));
      toolbar.addSeparator();
    }
  }
;
  myToolbar.resetToolbar(addons);
  final DiffToolbarImpl toolbar=myToolbar.getToolbar();
  myRequest.customizeToolbar(toolbar);
  myPanel.add(myToolbar,BorderLayout.NORTH);
  DiffContent content1=myRequest.getContents()[0];
  DiffContent content2=myRequest.getContents()[1];
  String message;
  if (DiffUtil.oneIsUnknown(content1,content2)) {
    message=DiffBundle.message("diff.can.not.show.unknown");
  }
 else {
    message=DiffBundle.message("diff.can.not.show");
  }
  final JPanel messagePanel=createMessagePanel(message);
  myPanel.add(messagePanel,BorderLayout.CENTER);
  setWindowTitle(window,request.getWindowTitle());
}
