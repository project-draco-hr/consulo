{
  myRoot=this;
  myModuleExtensionWithSdkPanel=new ModuleExtensionWithSdkPanel(myMutableModuleExtension,myClasspathStateUpdater);
  myLanguageLevelComboBox=new ComboBox();
  myLanguageLevelComboBox.setRenderer(new ColoredListCellRendererWrapper<Object>(){
    @Override protected void doCustomize(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      if (value instanceof LanguageLevel) {
        final LanguageLevel languageLevel=(LanguageLevel)value;
        append(languageLevel.getShortText(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
        append(" ");
        append(languageLevel.getDescription(),SimpleTextAttributes.GRAY_ATTRIBUTES);
      }
 else       if (value instanceof Module) {
        setIcon(AllIcons.Nodes.Module);
        append(((Module)value).getName(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
        final JavaModuleExtension extension=ModuleUtilCore.getExtension((Module)value,JavaModuleExtension.class);
        if (extension != null) {
          final LanguageLevel languageLevel=extension.getLanguageLevel();
          append("(" + languageLevel.getShortText() + ")",SimpleTextAttributes.GRAY_ATTRIBUTES);
        }
      }
 else       if (value instanceof String) {
        setIcon(AllIcons.Nodes.Module);
        append((String)value,SimpleTextAttributes.ERROR_BOLD_ATTRIBUTES);
      }
    }
  }
);
  for (  LanguageLevel languageLevel : LanguageLevel.values()) {
    myLanguageLevelComboBox.addItem(languageLevel);
  }
  insertModuleItems();
  final MutableModuleInheritableNamedPointer<LanguageLevel> inheritableLanguageLevel=myMutableModuleExtension.getInheritableLanguageLevel();
  final String moduleName=inheritableLanguageLevel.getModuleName();
  if (moduleName != null) {
    final Module module=inheritableLanguageLevel.getModule();
    if (module != null) {
      myLanguageLevelComboBox.setSelectedItem(module);
    }
 else {
      myLanguageLevelComboBox.addItem(moduleName);
    }
  }
 else {
    myLanguageLevelComboBox.setSelectedItem(inheritableLanguageLevel.get());
  }
  myLanguageLevelComboBox.addItemListener(new ItemListener(){
    @Override public void itemStateChanged(    ItemEvent e){
      final Object selectedItem=myLanguageLevelComboBox.getSelectedItem();
      if (selectedItem instanceof Module) {
        inheritableLanguageLevel.set(((Module)selectedItem).getName(),null);
      }
 else       if (selectedItem instanceof LanguageLevel) {
        inheritableLanguageLevel.set(null,((LanguageLevel)selectedItem).getName());
      }
 else {
        inheritableLanguageLevel.set(selectedItem.toString(),null);
      }
    }
  }
);
}
