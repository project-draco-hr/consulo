{
  final File tempFile=FileUtil.createTempFile("launcher","");
  StringBuilder textBuilder=new StringBuilder("#!/bin/bash\n");
  String homePath=PathManager.getHomePath().replace(" ","\\ ");
  String productName=ApplicationNamesInfo.getInstance().getProductName().toLowerCase();
  if (SystemInfo.isMac) {
    textBuilder.append("cd ").append(homePath).append("/Contents/MacOS/\n");
    textBuilder.append("./").append(productName);
  }
 else {
    textBuilder.append("cd ").append(homePath).append("/bin\n");
    textBuilder.append("./").append(productName).append(".sh");
  }
  textBuilder.append(" $@\n");
  FileUtil.writeToFile(tempFile,textBuilder.toString().getBytes(CharsetToolkit.UTF8_CHARSET));
  if (!tempFile.setExecutable(true)) {
    throw new IOException("Failed to mark the launcher script as executable");
  }
  return tempFile;
}
