{
  myRequestorName=requestor.toString();
  myParentWindow=parent;
  myMustBeShown=mustBeShown;
  if (ApplicationManager.getApplication().isUnitTestMode() || wrongOS())   return;
  register(parent);
  final List<FocusTrackback> stack=getStackForRoot(myRoot);
  if (stack.indexOf(this) == 0) {
    final KeyboardFocusManager manager=KeyboardFocusManager.getCurrentKeyboardFocusManager();
    setFocusOwner(manager.getPermanentFocusOwner());
    if (getFocusOwner() == null) {
      final Window window=manager.getActiveWindow();
      if (window instanceof Provider) {
        setFocusOwner(((Provider)window).getFocusTrackback().getFocusOwner());
      }
    }
  }
 else {
    setFocusOwner(stack.get(0).getFocusOwner());
  }
}
