{
  final Configuration configuration=Configuration.getProjectInstance(project);
  final AbstractTagInjection originalInjection=(AbstractTagInjection)configuration.findExistingInjection(template);
  final XmlTagInjection newInjection=originalInjection == null ? template : new XmlTagInjection().copyFrom(originalInjection);
  if (InjectLanguageAction.doEditConfigurable(project,new XmlTagInjectionConfigurable(newInjection,null,project))) {
    configuration.replaceInjectionsWithUndo(project,Collections.singletonList(newInjection),ContainerUtil.createMaybeSingletonList(originalInjection),Collections.<PsiElement>emptyList());
  }
}
