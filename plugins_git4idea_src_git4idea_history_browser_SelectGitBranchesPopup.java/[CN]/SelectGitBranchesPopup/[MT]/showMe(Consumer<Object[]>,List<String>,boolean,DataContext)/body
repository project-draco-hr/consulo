{
  final JList list=new JList();
  list.setCellRenderer(new BranchListCellRenderer(tags));
  list.setListData(ArrayUtil.toObjectArray(branchesAndTags));
  JBPopupFactory.getInstance().createListPopupBuilder(list).setTitle("Select " + (tags ? "tags" : "branches")).setResizable(true).setDimensionServiceKey("Git.Select branches/tags").setItemChoosenCallback(new Runnable(){
    public void run(){
      selectedBranchConsumer.consume(list.getSelectedValues());
    }
  }
).createPopup().showInBestPositionFor(dc);
}
