{
  Module resolvedModule=null;
  for (  PossibleModuleForFileResolver possibleModuleForFileResolver : PossibleModuleForFileResolver.EP_NAME.getExtensions()) {
    Module temp=possibleModuleForFileResolver.resolve(myProject,event.getFile());
    if (temp != null) {
      resolvedModule=temp;
      break;
    }
  }
  if (resolvedModule == null) {
    return;
  }
  ContentEntryFileListener.LOGGER.assertTrue(resolvedModule.getModuleDirUrl() == null,"We cant add file as content entry is module created as dir based");
  ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(resolvedModule);
  final ModifiableRootModel modifiableModel=moduleRootManager.getModifiableModel();
  for (  ModuleRootLayer moduleRootLayer : modifiableModel.getLayers().values()) {
    ModifiableModuleRootLayer modifiableModuleRootLayer=(ModifiableModuleRootLayer)moduleRootLayer;
    modifiableModuleRootLayer.addContentEntry(event.getFile());
  }
  commitViaDumbService(modifiableModel);
}
