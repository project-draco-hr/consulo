{
  if (myRequestFocusOnLastFocusedComponent && mySelectedInfo != null) {
    if (isMyChildIsFocusedNow()) {
      mySelectedInfo.setLastFocusOwner(getFocusOwner());
    }
  }
  TabInfo oldInfo=mySelectedInfo;
  mySelectedInfo=info;
  final TabInfo newInfo=getSelectedInfo();
  update(false);
  if (oldInfo != newInfo) {
    for (    TabsListener eachListener : myTabListeners) {
      if (eachListener != null) {
        eachListener.selectionChanged(oldInfo,newInfo);
      }
    }
  }
  if (requestFocus) {
    final JComponent toFocus=getToFocus();
    if (myProject != null && toFocus != null) {
      ToolWindowManager.getInstance(myProject).requestFocus(new ActionCallback.Runnable(){
        public ActionCallback run(){
          toFocus.requestFocus();
          return new ActionCallback.Done();
        }
      }
,true);
    }
 else {
      requestFocus();
    }
  }
}
