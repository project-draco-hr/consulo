{
  super.paintComponent(g);
  if (isHideTabs()) {
  }
  final TabInfo selected=getSelectedInfo();
  if (selected == null)   return;
  final JBTabs.TabLabel selectedLabel=myInfo2Label.get(selected);
  if (selectedLabel == null)   return;
  Rectangle selectedTabBounds=selectedLabel.getBounds();
  final GraphicsConfig config=new GraphicsConfig(g);
  config.setAntialiasing(true);
  Graphics2D g2d=(Graphics2D)g;
  int arc=getArcSize();
  final GeneralPath path=new GeneralPath();
  Insets insets=getLayoutInsets();
  final int bottomY=(int)selectedTabBounds.getMaxY();
  final int topY=selectedTabBounds.y;
  int leftX=selectedTabBounds.x;
  int rightX=selectedTabBounds.x + selectedTabBounds.width;
  path.moveTo(insets.left,bottomY);
  path.lineTo(leftX,bottomY);
  path.lineTo(leftX,topY + arc);
  path.quadTo(leftX,topY,leftX + arc,topY);
  int lastX=getWidth() - insets.right - 1;
  if (isStealthModeEffective()) {
    path.lineTo(lastX - arc,topY);
    path.quadTo(lastX,topY,lastX,topY + arc);
    path.lineTo(lastX,bottomY);
  }
 else {
    path.lineTo(rightX - arc,topY);
    path.quadTo(rightX,topY,rightX,topY + arc);
    path.lineTo(rightX,bottomY - arc);
    path.quadTo(rightX,bottomY,rightX + arc,bottomY);
  }
  path.lineTo(lastX,bottomY);
  path.closePath();
  final Color from;
  final Color to;
  final int alpha;
  final boolean paintFocused=myPaintFocus && (myFocused || myActivePopup != null);
  if (paintFocused) {
    from=UIUtil.getFocusedFillColor();
    to=UIUtil.getFocusedFillColor();
  }
 else {
    alpha=150;
    from=UIUtil.toAlpha(UIUtil.getPanelBackgound().brighter(),alpha);
    to=UIUtil.toAlpha(UIUtil.getPanelBackgound(),alpha);
  }
  g2d.setPaint(new GradientPaint(selectedTabBounds.x,topY,from,selectedTabBounds.x,bottomY,to));
  if (!isHideTabs()) {
    g2d.fill(path);
  }
  if (paintFocused) {
    g2d.setColor(UIUtil.getFocusedBoundsColor());
  }
 else {
    g2d.setColor(CaptionPanel.CNT_ACTIVE_COLOR.darker());
  }
  if (!isHideTabs()) {
    g2d.draw(path);
  }
  if (myPaintBorder) {
    if (isHideTabs()) {
      g2d.drawRect(insets.left,insets.top,getWidth() - insets.left - insets.right- 1,getHeight() - insets.bottom - insets.top- 1);
    }
 else {
      g2d.drawRect(insets.left,bottomY,getWidth() - insets.left - insets.right- 1,getHeight() - bottomY - insets.bottom- 1);
    }
  }
  config.restore();
}
