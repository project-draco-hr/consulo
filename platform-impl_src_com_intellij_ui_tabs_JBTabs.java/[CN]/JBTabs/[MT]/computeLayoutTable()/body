{
  final TableLayoutData data=new TableLayoutData();
  final Insets insets=getLayoutInsets();
  data.toFitRec=new Rectangle(insets.left,insets.top,getWidth() - insets.left - insets.right,getHeight() - insets.top - insets.bottom);
  int eachRow=0, eachX=data.toFitRec.x;
  TableRow eachTableRow=new TableRow();
  data.table.add(eachTableRow);
  int selectedRow=-1;
  for (  TabInfo eachInfo : myInfos) {
    final TabLabel eachLabel=myInfo2Label.get(eachInfo);
    final Dimension size=eachLabel.getPreferredSize();
    if (eachX + size.width <= data.toFitRec.getMaxX()) {
      eachTableRow.add(eachInfo);
      if (getSelectedInfo() == eachInfo) {
        selectedRow=eachRow;
      }
      eachX+=size.width;
    }
 else {
      eachTableRow=new TableRow();
      data.table.add(eachTableRow);
      eachRow++;
      eachX=insets.left;
      eachTableRow.add(eachInfo);
      if (getSelectedInfo() == eachInfo) {
        selectedRow=eachRow;
      }
      if (eachX + size.width <= data.toFitRec.getMaxX()) {
        eachX+=size.width;
      }
 else {
        eachTableRow=new TableRow();
        eachRow++;
        eachX=insets.left;
      }
    }
  }
  List<TableRow> toMove=new ArrayList<TableRow>();
  for (int i=selectedRow + 1; i < data.table.size(); i++) {
    toMove.add(data.table.get(i));
  }
  for (  TableRow eachMove : toMove) {
    data.table.remove(eachMove);
    data.table.add(0,eachMove);
  }
  return data;
}
