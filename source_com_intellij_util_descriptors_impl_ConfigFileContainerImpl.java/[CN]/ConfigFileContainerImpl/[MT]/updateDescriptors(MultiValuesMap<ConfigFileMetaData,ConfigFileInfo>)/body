{
  Set<ConfigFile> toDelete=new HashSet<ConfigFile>(myConfigFiles.values());
  for (  Map.Entry<ConfigFileMetaData,Collection<ConfigFileInfo>> entry : descriptorsMap.entrySet()) {
    ConfigFileMetaData metaData=entry.getKey();
    Set<ConfigFileInfo> newDescriptors=new HashSet<ConfigFileInfo>(entry.getValue());
    final Collection<ConfigFile> oldDescriptors=myConfigFiles.get(metaData);
    if (oldDescriptors != null) {
      for (      ConfigFile descriptor : oldDescriptors) {
        if (newDescriptors.contains(descriptor.getInfo())) {
          newDescriptors.remove(descriptor.getInfo());
          toDelete.remove(descriptor);
        }
      }
    }
    for (    ConfigFileInfo configuration : newDescriptors) {
      myConfigFiles.put(metaData,new ConfigFileImpl(this,configuration));
    }
  }
  for (  ConfigFile descriptor : toDelete) {
    myConfigFiles.remove(descriptor.getMetaData(),descriptor);
  }
  myCachedConfigFiles=null;
}
