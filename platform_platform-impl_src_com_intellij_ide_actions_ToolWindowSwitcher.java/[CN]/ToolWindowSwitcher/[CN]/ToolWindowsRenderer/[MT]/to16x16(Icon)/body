{
  if (icon.getIconHeight() == 16 && icon.getIconWidth() == 16)   return icon;
  final int w=Math.min(icon.getIconWidth(),16);
  final int h=Math.min(icon.getIconHeight(),16);
  final BufferedImage image=GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration().createCompatibleImage(16,16,Color.TRANSLUCENT);
  final Graphics2D g=image.createGraphics();
  icon.paintIcon(null,g,0,0);
  g.dispose();
  final BufferedImage img=new BufferedImage(16,16,BufferedImage.TRANSLUCENT);
  final int offX=Math.max((16 - w) / 2,0);
  final int offY=Math.max((16 - h) / 2,0);
  for (int col=0; col < w; col++) {
    for (int row=0; row < h; row++) {
      img.setRGB(col + offX,row + offY,image.getRGB(col,row));
    }
  }
  return new ImageIcon(img);
}
