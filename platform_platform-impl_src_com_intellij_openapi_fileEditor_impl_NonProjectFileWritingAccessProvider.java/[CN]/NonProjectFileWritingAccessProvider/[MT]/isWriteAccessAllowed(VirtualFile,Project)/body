{
  if (isAllAccessAllowed())   return true;
  if (file.isDirectory())   return true;
  if (!(file.getFileSystem() instanceof LocalFileSystem))   return true;
  if (file.getFileSystem() instanceof TempFileSystem)   return true;
  if (ArrayUtil.contains(file,IdeDocumentHistory.getInstance(project).getChangedFiles()))   return true;
  if (!getApp().isUnitTestMode() && FileUtil.isAncestor(new File(FileUtil.getTempDirectory()),VfsUtilCore.virtualToIoFile(file),true)) {
    return true;
  }
  VirtualFile each=file;
  while (each != null) {
    if (ACCESS_ALLOWED.getValue(each).get() > 0)     return true;
    each=each.getParent();
  }
  return isProjectFile(file,project);
}
