{
  if (ApplicationManager.getApplication().isUnitTestMode() || ApplicationManager.getApplication().isHeadlessEnvironment()) {
    doCheckRoots(rootsChanged);
    return;
  }
  myQueue.queue(new Update("root check"){
    public void run(){
      if (myProject.isDisposed())       return;
      doCheckRoots(rootsChanged);
    }
  }
);
}
