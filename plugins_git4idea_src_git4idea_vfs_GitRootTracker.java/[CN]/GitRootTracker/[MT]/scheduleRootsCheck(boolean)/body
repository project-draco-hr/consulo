{
  if (ApplicationManager.getApplication().isUnitTestMode() || ApplicationManager.getApplication().isHeadlessEnvironment()) {
    doCheckRoots(rootsChanged);
    return;
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
synchronized (myCheckRootsLock) {
        if (myProject.isDisposed())         return;
        doCheckRoots(rootsChanged);
      }
    }
  }
);
}
