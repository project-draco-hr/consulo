{
  for (  VirtualFile child : directory.getChildren()) {
    if (child.getName().equals(".git")) {
      if (isRoot || !child.isDirectory())       continue;
      return !rootSet.contains(directory.getPath());
    }
    if (child.isDirectory() && hasUnmappedSubroots(child,false,rootSet)) {
      return true;
    }
  }
  return false;
}
