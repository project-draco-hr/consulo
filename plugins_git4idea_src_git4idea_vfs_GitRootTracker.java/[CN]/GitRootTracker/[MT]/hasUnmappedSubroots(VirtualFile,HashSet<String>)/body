{
  VirtualFile[] children=ApplicationManager.getApplication().runReadAction(new Computable<VirtualFile[]>(){
    public VirtualFile[] compute(){
      return directory.getChildren();
    }
  }
);
  for (  VirtualFile child : children) {
    if (child.getName().equals(".git") || !child.isDirectory()) {
      continue;
    }
    if (child.findChild(".git") != null && !rootSet.contains(child.getPath())) {
      return true;
    }
    if (hasUnmappedSubroots(child,rootSet)) {
      return true;
    }
  }
  return false;
}
