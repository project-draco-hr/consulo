{
  return new TreeConsumer(){
    protected void onTreeAvailable(    final TestProxy test){
      if (myModel != null) {
        Disposer.dispose(myModel);
      }
      if (myConsolePanel == null)       return;
      getPrinter().setCollectOutput(false);
      testingStatus.setInputConsumer(test);
      myModel=new JUnitRunningModel(test,testingStatus,myProperties);
      Disposer.register(JUnitTreeConsoleView.this,myModel);
      myModel.attachTo(outPacketExtractor);
      myConsolePanel.attachToModel(myModel);
      myModel.attachToTree(myConsolePanel.getTreeView());
      myConsolePanel.setModel(myModel);
      testStateUpdater.setRoot(test);
      myModel.onUIBuilt();
      new TreeCollapser().setModel(myModel);
    }
  }
;
}
