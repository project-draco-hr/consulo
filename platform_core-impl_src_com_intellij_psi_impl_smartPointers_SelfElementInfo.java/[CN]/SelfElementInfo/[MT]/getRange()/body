{
  if (myRangeMarker != null) {
    Document document=getDocumentToSynchronize();
    if (document != null) {
      PsiDocumentManagerBase documentManager=myPsiDocManager;
      List<DocumentEvent> events=documentManager.getEventsSinceCommit(document);
      if (!events.isEmpty()) {
        return myMarkerCache.getUpdatedRange(myRangeMarker,documentManager.getLastCommittedDocument(document),events);
      }
    }
    return myRangeMarker.getRange();
  }
  return myPsiRange;
}
