{
  return ApplicationManager.getApplication().runReadAction(new NullableComputable<PsiFile>(){
    @Override public PsiFile compute(){
      if (project.isDisposed())       return null;
      VirtualFile child=restoreVFile(virtualFile);
      if (child == null || !child.isValid())       return null;
      PsiFile file=PsiManager.getInstance(project).findFile(child);
      if (file != null && language != null) {
        return file.getViewProvider().getPsi(language);
      }
      return file;
    }
  }
);
}
