{
  while (expr != null) {
    final PsiElement parent=expr.getParent();
    if (parent != null && scope.containsRange(parent.getContainingFile(),parent.getTextRange())) {
      if (parent instanceof PsiIfStatement) {
        if (((PsiIfStatement)parent).getCondition() != expr)         return true;
      }
 else       if (parent instanceof PsiConditionalExpression) {
        if (((PsiConditionalExpression)parent).getCondition() != expr)         return true;
      }
 else       if (parent instanceof PsiSwitchStatement) {
        if (((PsiSwitchStatement)parent).getExpression() != expr)         return true;
      }
    }
 else {
      return false;
    }
    expr=parent;
  }
  return false;
}
