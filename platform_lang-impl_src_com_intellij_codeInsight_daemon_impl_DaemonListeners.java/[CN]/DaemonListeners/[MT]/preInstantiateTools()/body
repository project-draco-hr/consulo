{
  final InspectionProfileWrapper profile=InspectionProjectProfileManager.getInstance(myProject).getProfileWrapper();
  if (profile == null || profile.areToolsInstantiated())   return;
  Collection<FileEditor> editors=getSelectedEditors();
  for (  FileEditor fe : editors) {
    if (!(fe instanceof TextEditor))     continue;
    Editor editor=((TextEditor)fe).getEditor();
    if (editor.getProject() != myProject)     continue;
    final PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(editor.getDocument());
    if (psiFile == null)     continue;
    ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
      @Override public void run(){
        if (!psiFile.getManager().isDisposed() && !profile.areToolsInstantiated()) {
          try {
            profile.preInstantiateTools(psiFile);
          }
 catch (          Throwable ignored) {
          }
        }
      }
    }
);
    break;
  }
}
