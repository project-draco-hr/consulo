{
  AbstractVcs activeVcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(virtualFile);
  if (activeVcs == null)   return Result.NOT_SURE;
  FilePath path=new FilePathImpl(virtualFile);
  boolean vcsIsThinking=!VcsDirtyScopeManager.getInstance(myProject).whatFilesDirty(Arrays.asList(path)).isEmpty();
  if (vcsIsThinking)   return Result.UNCHANGED;
  FileStatus status=FileStatusManager.getInstance(project).getStatus(virtualFile);
  return status == FileStatus.MODIFIED || status == FileStatus.ADDED ? Result.CHANGED : Result.UNCHANGED;
}
