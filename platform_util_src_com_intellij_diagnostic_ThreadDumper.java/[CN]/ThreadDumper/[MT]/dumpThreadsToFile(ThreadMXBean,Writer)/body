{
  StackTraceElement[] edtStack=null;
  boolean dumpSuccessful=false;
  try {
    ThreadInfo[] threads=sort(threadMXBean.dumpAllThreads(false,false));
    edtStack=dumpThreadInfos(threads,f);
    dumpSuccessful=true;
  }
 catch (  Exception ignored) {
  }
  if (!dumpSuccessful) {
    final long[] threadIds=threadMXBean.getAllThreadIds();
    final ThreadInfo[] threadInfo=sort(threadMXBean.getThreadInfo(threadIds,Integer.MAX_VALUE));
    edtStack=dumpThreadInfos(threadInfo,f);
  }
  return edtStack;
}
