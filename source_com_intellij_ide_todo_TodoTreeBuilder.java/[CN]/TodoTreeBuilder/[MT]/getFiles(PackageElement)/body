{
  final PsiManager psiManager=PsiManager.getInstance(myProject);
  ArrayList<PsiFile> psiFileList=new ArrayList<PsiFile>();
  GlobalSearchScope scope=packageElement.getModule() != null ? GlobalSearchScope.moduleScope(packageElement.getModule()) : GlobalSearchScope.projectScope(myProject);
  final PsiDirectory[] directories=packageElement.getPackage().getDirectories(scope);
  for (  PsiDirectory directory : directories) {
    final VirtualFile directoryFile=directory.getVirtualFile();
    ArrayList<VirtualFile> files=myFileTree.getFiles(directoryFile);
    for (    VirtualFile file : files) {
      if (file.isValid()) {
        PsiFile psiFile=psiManager.findFile(file);
        if (psiFile != null) {
          psiFileList.add(psiFile);
        }
      }
    }
  }
  return psiFileList.iterator();
}
