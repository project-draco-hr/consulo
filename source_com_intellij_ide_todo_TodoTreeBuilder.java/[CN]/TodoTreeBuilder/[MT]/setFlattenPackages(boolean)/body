{
  ArrayList pathsToExpand=new ArrayList();
  ArrayList pathsToSelect=new ArrayList();
  TreeBuilderUtil.storePaths(this,myRootNode,pathsToExpand,pathsToSelect,true);
  myTree.clearSelection();
  TodoTreeStructure todoTreeStructure=getTodoTreeStructure();
  todoTreeStructure.setFlattenPackages(state);
  todoTreeStructure.validateCache();
  updateTree(false);
  TreeBuilderUtil.restorePaths(this,pathsToExpand,pathsToSelect,true);
}
