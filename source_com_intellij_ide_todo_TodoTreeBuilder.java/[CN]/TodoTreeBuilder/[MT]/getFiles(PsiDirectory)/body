{
  ArrayList<VirtualFile> files=myFileTree.getFiles(psiDirectory.getVirtualFile());
  ArrayList<PsiFile> psiFileList=new ArrayList<PsiFile>(files.size());
  PsiManager psiManager=PsiManager.getInstance(myProject);
  for (int i=0; i < files.size(); i++) {
    VirtualFile file=files.get(i);
    if (file.isValid()) {
      PsiFile psiFile=psiManager.findFile(file);
      if (psiFile != null) {
        if (psiFile.getContainingDirectory() == null || psiFile.getContainingDirectory().getPackage() == null) {
          psiFileList.add(psiFile);
        }
      }
    }
  }
  return psiFileList.iterator();
}
