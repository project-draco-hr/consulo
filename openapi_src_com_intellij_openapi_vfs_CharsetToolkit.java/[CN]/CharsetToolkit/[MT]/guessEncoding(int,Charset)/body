{
  Charset charset=guessFromBOM();
  if (charset != null)   return charset;
  GuessedEncoding encoding=guessFromContent(guess_length);
switch (encoding) {
case SEVEN_BIT:
    if (enforce8Bit) {
      return defaultCharset;
    }
 else {
      return Charset.forName("US-ASCII");
    }
case INVALID_UTF8:
  return defaultCharset;
case VALID_UTF8:
return UTF8_CHARSET;
}
return null;
}
