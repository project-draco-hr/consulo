{
  byte[] buffer=new byte[bufferLength];
  fis.read(buffer);
  fis.close();
  CharsetToolkit toolkit=new CharsetToolkit(buffer);
  toolkit.setDefaultCharset(getIDEOptionsCharset());
  toolkit.setEnforce8Bit(true);
  return toolkit.guessEncoding(bufferLength);
}
