{
synchronized (myDocumentToStatusMap) {
    FileStatus status=myDocumentToStatusMap.get(document);
    if (status == null) {
      return PsiDocumentManager.getInstance(myProject).getPsiFile(document);
    }
    if (status.defensivelyMarked) {
      status.dirtyScope=status.localInspectionsDirtyScope=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
      status.defensivelyMarked=false;
    }
    if (part == NORMAL_HIGHLIGHTERS) {
      return status.dirtyScope;
    }
 else     if (part == OVERRIDEN_MARKERS) {
      return status.overridenDirtyScope;
    }
 else     if (part == LOCAL_INSPECTIONS) {
      return status.localInspectionsDirtyScope;
    }
 else {
      LOG.assertTrue(false);
      return null;
    }
  }
}
