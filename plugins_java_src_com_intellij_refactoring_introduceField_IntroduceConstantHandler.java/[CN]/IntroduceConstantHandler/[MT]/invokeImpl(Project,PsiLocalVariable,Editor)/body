{
  final PsiElement parent=localVariable.getParent();
  if (!(parent instanceof PsiDeclarationStatement)) {
    String message=RefactoringBundle.getCannotRefactorMessage(RefactoringBundle.message("error.wrong.caret.position.local.or.expression.name"));
    CommonRefactoringUtil.showErrorHint(project,editor,message,REFACTORING_NAME,getHelpID());
    return false;
  }
  final LocalToFieldHandler localToFieldHandler=new LocalToFieldHandler(project,true){
    @Override protected Settings showRefactoringDialog(    PsiClass aClass,    PsiLocalVariable local,    PsiExpression[] occurences,    boolean isStatic){
      return IntroduceConstantHandler.this.showRefactoringDialog(project,editor,aClass,local.getInitializer(),local.getType(),occurences,local,null);
    }
  }
;
  return localToFieldHandler.convertLocalToField(localVariable,editor);
}
