{
  boolean enabled=false;
  PackageDependenciesNode node=myRightTree.getSelectedNode();
  if (node != null) {
    PsiElement elt=node.getPsiElement();
    if (elt != null) {
      if (elt instanceof PsiFile) {
        enabled=myDependencies.containsKey(elt);
      }
 else       if (elt instanceof PsiPackage) {
        Set<PsiFile> files=myDependencies.keySet();
        String packageName=((PsiPackage)elt).getQualifiedName();
        for (        PsiFile file : files) {
          if (file instanceof PsiJavaFile && Comparing.equal(packageName,((PsiJavaFile)file).getPackageName())) {
            enabled=true;
            break;
          }
        }
      }
    }
  }
  e.getPresentation().setEnabled(enabled);
}
