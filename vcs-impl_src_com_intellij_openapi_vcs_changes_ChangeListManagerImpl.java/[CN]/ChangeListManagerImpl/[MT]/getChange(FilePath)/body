{
  final VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile == null) {
    return null;
  }
synchronized (myDataLock) {
    final String name=myWorker.getListName(virtualFile);
    if (name != null) {
      final LocalChangeList list=myWorker.getCopyByName(name);
      for (      Change change : list.getChanges()) {
        final ContentRevision afterRevision=change.getAfterRevision();
        if (afterRevision != null && afterRevision.getFile().equals(file)) {
          return change;
        }
        final ContentRevision beforeRevision=change.getBeforeRevision();
        if (beforeRevision != null && beforeRevision.getFile().equals(file)) {
          return change;
        }
      }
    }
    return null;
  }
}
