{
  List<VirtualFile> unversionedFiles=myUnversionedFilesHolder.getFiles();
  List<VirtualFile> ignoredFiles=myIgnoredFilesHolder.getFiles();
  for (  VirtualFile file : unversionedFiles) {
    if (isIgnoredFile(file)) {
      myUnversionedFilesHolder.removeFile(file);
      myIgnoredFilesHolder.addFile(file);
    }
  }
  for (  VirtualFile file : ignoredFiles) {
    if (!isIgnoredFile(file)) {
      VcsDirtyScopeManager.getInstance(myProject).fileDirty(file);
    }
  }
  FileStatusManager.getInstance(getProject()).fileStatusesChanged();
  ChangesViewManager.getInstance(myProject).scheduleRefresh();
}
