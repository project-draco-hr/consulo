{
  final Runnable actualUpdate=new Runnable(){
    public void run(){
synchronized (myPendingUpdatesLock) {
        if (myDisposed)         return;
      }
      if ((!myInitialized) || (ProjectLevelVcsManager.getInstance(myProject).isBackgroundVcsOperationRunning())) {
        scheduleUpdate();
        return;
      }
      updateImmediately(updateUnversionedFiles);
    }
  }
;
  LOG.info("schedule: schedule: before");
synchronized (myPendingUpdatesLock) {
    LOG.info("schedule: schedule: after");
    if (myDisposed) {
      if (waiter != null) {
        invokeWaiter(waiter);
      }
      return;
    }
    cancelUpdates();
    if (waiter != null) {
      myWaitingUpdateCompletionQueue.add(waiter);
    }
    myCurrentUpdate=ourUpdateAlarm.schedule(actualUpdate,millis,TimeUnit.MILLISECONDS);
  }
}
