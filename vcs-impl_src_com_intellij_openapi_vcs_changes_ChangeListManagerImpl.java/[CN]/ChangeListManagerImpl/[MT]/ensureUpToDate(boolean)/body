{
  if (!myInitialized)   return true;
  final boolean ok=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator != null) {
        indicator.setText(VcsBundle.message("commit.wait.util.synced.message"));
      }
synchronized (myPendingUpdatesLock) {
        scheduleUpdate(10,true,null);
        waitForUpdateDone(indicator);
      }
    }
  }
,VcsBundle.message("commit.wait.util.synced.title"),canBeCanceled,myProject);
  if (ok) {
    ChangesViewManager.getInstance(myProject).refreshView();
  }
  return ok;
}
