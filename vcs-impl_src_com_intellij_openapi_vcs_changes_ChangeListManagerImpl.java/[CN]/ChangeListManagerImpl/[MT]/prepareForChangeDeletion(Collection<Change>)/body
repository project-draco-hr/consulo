{
  final Map<String,LocalChangeList> lists=new HashMap<String,LocalChangeList>();
  final Map<String,List<Change>> map=new HashMap<String,List<Change>>();
synchronized (myDataLock) {
    for (    Change change : changes) {
      LocalChangeList changeList=getChangeList(change);
      if (changeList == null) {
        changeList=getDefaultChangeList();
      }
      List<Change> list=map.get(changeList.getName());
      if (list == null) {
        list=new ArrayList<Change>();
        map.put(changeList.getName(),list);
        lists.put(changeList.getName(),changeList);
      }
      list.add(change);
    }
  }
  return new Runnable(){
    public void run(){
      final ChangeListListener multicaster=myListeners.getMulticaster();
synchronized (myDataLock) {
        for (        Map.Entry<String,List<Change>> entry : map.entrySet()) {
          final List<Change> changes=entry.getValue();
          for (Iterator<Change> iterator=changes.iterator(); iterator.hasNext(); ) {
            final Change change=iterator.next();
            if (getChangeList(change) != null) {
              iterator.remove();
            }
          }
          multicaster.changesRemoved(changes,lists.get(entry.getKey()));
        }
      }
    }
  }
;
}
