{
  if (identifier.getParent() instanceof PsiVariable) {
    PsiVariable var=(PsiVariable)identifier.getParent();
    if (var.getNameIdentifier().equals(identifier)) {
      CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
      VariableKind variableKind=codeStyleManager.getVariableKind(var);
      SuggestedNameInfo suggestedInfo=codeStyleManager.suggestVariableName(variableKind,null,var.getInitializer(),var.getType());
      if (var instanceof PsiParameter && ((PsiParameter)var).getDeclarationScope() instanceof PsiForeachStatement) {
        final PsiExpression iteratedValue=((PsiForeachStatement)((PsiParameter)var).getDeclarationScope()).getIteratedValue();
        if (iteratedValue instanceof PsiReferenceExpression) {
          final String referenceName=((PsiReferenceExpression)iteratedValue).getReferenceName();
          if (referenceName != null) {
            final Set<String> names=new HashSet<String>(Arrays.asList(suggestedInfo.names));
            names.add(StringUtil.unpluralize(referenceName));
            return names.toArray(new String[names.size()]);
          }
        }
      }
      return suggestedInfo.names;
    }
  }
  return null;
}
