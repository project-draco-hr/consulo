{
  Set<GrTypeDefinition> inProgress=IN_PROGRESS_METHODS.get();
  if (inProgress == null) {
    inProgress=new HashSet<GrTypeDefinition>();
    IN_PROGRESS_METHODS.set(inProgress);
  }
  boolean added=inProgress.add(clazz);
  assert added;
  try {
    for (    final AstTransformContributor contributor : EP_NAME.getExtensions()) {
      contributor.collectMethods(clazz,collector);
    }
  }
  finally {
    inProgress.remove(clazz);
  }
  return collector;
}
