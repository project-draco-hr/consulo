{
  if (!isMine(host))   return false;
  final Configuration configuration=Configuration.getInstance();
  final ArrayList<AbstractTagInjection> injections=collectInjections(host,configuration);
  if (injections.isEmpty())   return false;
  final Project project=host.getProject();
  final AbstractTagInjection injection=injections.get(0);
  final AbstractInjectionPanel panel;
  if (injection instanceof XmlTagInjection) {
    panel=new XmlTagPanel((XmlTagInjection)injection,project);
  }
 else   if (injection instanceof XmlAttributeInjection) {
    panel=new XmlAttributePanel((XmlAttributeInjection)injection,project);
  }
 else {
    throw new AssertionError(injection);
  }
  panel.reset();
  final DialogBuilder builder=new DialogBuilder(project);
  builder.addOkAction();
  builder.addCancelAction();
  builder.setCenterPanel(panel.getComponent());
  builder.setTitle(EditInjectionSettingsAction.EDIT_INJECTION_TITLE);
  builder.setOkOperation(new Runnable(){
    public void run(){
      panel.apply();
      configuration.configurationModified();
      FileContentUtil.reparseFiles(project,Collections.<VirtualFile>emptyList(),true);
      builder.getWindow().dispose();
    }
  }
);
  builder.show();
  return true;
}
