{
  final XmlAttributeInjection result=new XmlAttributeInjection().copyFrom(injection);
  result.getInjectionPlaces().clear();
  final PsiElement parent=attributeValue.getParent();
  if (!(parent instanceof XmlAttribute))   return null;
  final XmlAttribute attribute=(XmlAttribute)parent;
  for (  InjectionPlace place : injection.getInjectionPlaces()) {
    if (place.isEnabled() && place.getElementPattern() != null && place.getElementPattern().accepts(attribute)) {
      final Matcher matcher=Pattern.compile("withLocalName[^\"]*\"([^\"]*)\".*withNamespace[^\"]*\"([^\"]*)\"").matcher(place.getText());
      if (matcher.find()) {
        result.setAttributeName(matcher.group(1));
        result.setAttributeNamespace(matcher.group(2));
        if (matcher.find(matcher.end(2))) {
          result.setTagName(matcher.group(1));
          result.setTagNamespace(matcher.group(2));
        }
      }
    }
  }
  return result;
}
