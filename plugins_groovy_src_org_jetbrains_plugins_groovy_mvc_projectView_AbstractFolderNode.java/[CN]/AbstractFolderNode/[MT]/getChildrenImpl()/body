{
  final PsiDirectory directory=getPsiDirectory();
  if (!directory.isValid()) {
    return Collections.emptyList();
  }
  final List<AbstractTreeNode> children=new ArrayList<AbstractTreeNode>();
  for (  PsiDirectory subDir : directory.getSubdirectories()) {
    children.add(createFolderNode(subDir));
  }
  for (  PsiFile file : directory.getFiles()) {
    processNotDirectoryFile(children,file);
  }
  return children;
}
