{
  final PsiDirectory psiDirectory=getPsiDirectory();
  String text;
  if (psiDirectory == myHiddenParent) {
    text=psiDirectory.getName();
  }
 else {
    StringBuilder sb=new StringBuilder();
    for (PsiDirectory dir=myHiddenParent; dir != psiDirectory; dir=dir.getSubdirectories()[0]) {
      sb.append(dir.getName()).append('.');
    }
    sb.append(psiDirectory.getName());
    text=sb.toString();
  }
  data.setPresentableText(text);
  for (  final IconProvider provider : Extensions.getExtensions(IconProvider.EXTENSION_POINT_NAME)) {
    final Icon openIcon=provider.getIcon(psiDirectory,Iconable.ICON_FLAG_OPEN);
    if (openIcon != null) {
      final Icon closedIcon=provider.getIcon(psiDirectory,Iconable.ICON_FLAG_CLOSED);
      if (closedIcon != null) {
        data.setOpenIcon(openIcon);
        data.setClosedIcon(closedIcon);
        return;
      }
    }
  }
}
