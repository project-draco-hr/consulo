{
  final PsiElement psiElement=extractPsiFromValue();
  if (psiElement == null || !psiElement.isValid()) {
    return false;
  }
  final VirtualFile valueFile=((PsiDirectory)psiElement).getVirtualFile();
  if (!VfsUtil.isAncestor(valueFile,file,false)) {
    return false;
  }
  final Project project=psiElement.getProject();
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  final Module module=fileIndex.getModuleForFile(valueFile);
  if (module == null) {
    return fileIndex.getModuleForFile(file) == null;
  }
  return ModuleRootManager.getInstance(module).getFileIndex().isInContent(file);
}
