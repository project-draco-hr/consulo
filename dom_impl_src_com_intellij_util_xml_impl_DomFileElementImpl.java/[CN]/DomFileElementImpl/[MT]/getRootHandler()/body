{
  r.lock();
  if (myRootHandler == null || myRootHandler.get() == null) {
    r.unlock();
    final XmlTag tag=getRootTag();
    w.lock();
    try {
      if (myRootHandler == null || myRootHandler.get() == null) {
        myRootHandler=new WeakReference<DomRootInvocationHandler>(new DomRootInvocationHandler(myRootElementClass,tag,this,myRootTagName));
      }
    }
  finally {
      w.unlock();
      r.lock();
    }
  }
  final DomRootInvocationHandler rootHandler=myRootHandler.get();
  r.unlock();
  return rootHandler;
}
