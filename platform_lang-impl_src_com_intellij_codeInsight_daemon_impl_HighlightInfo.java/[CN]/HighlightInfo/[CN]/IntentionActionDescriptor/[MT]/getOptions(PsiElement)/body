{
  List<IntentionAction> options=myOptions;
  HighlightDisplayKey key=myKey;
  if (options != null || key == null) {
    return options;
  }
  List<IntentionAction> newOptions=IntentionManager.getInstance().getStandardIntentionOptions(key,element);
  InspectionProfile profile=InspectionProjectProfileManager.getInstance(element.getProject()).getInspectionProfile();
  InspectionProfileEntry tool=profile.getInspectionTool(key.toString(),element);
  if (!(tool instanceof LocalInspectionToolWrapper)) {
    HighlightDisplayKey idkey=HighlightDisplayKey.findById(key.toString());
    if (idkey != null) {
      tool=profile.getInspectionTool(idkey.toString(),element);
    }
  }
  if (tool instanceof LocalInspectionToolWrapper) {
    final LocalInspectionTool localInspectionTool=((LocalInspectionToolWrapper)tool).getTool();
    Class aClass=myAction.getClass();
    if (myAction instanceof QuickFixWrapper) {
      aClass=((QuickFixWrapper)myAction).getFix().getClass();
    }
    newOptions.add(new CleanupInspectionIntention(localInspectionTool,aClass));
    if (localInspectionTool instanceof CustomSuppressableInspectionTool) {
      final IntentionAction[] suppressActions=((CustomSuppressableInspectionTool)localInspectionTool).getSuppressActions(element);
      if (suppressActions != null) {
        newOptions.addAll(Arrays.asList(suppressActions));
      }
    }
  }
synchronized (this) {
    options=myOptions;
    if (options == null) {
      myOptions=options=newOptions;
    }
    myKey=null;
  }
  return options;
}
