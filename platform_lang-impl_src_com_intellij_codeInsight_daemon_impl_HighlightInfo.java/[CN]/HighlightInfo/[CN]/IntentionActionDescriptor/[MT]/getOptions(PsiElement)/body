{
  final HighlightDisplayKey displayKey=myKey;
  if (myOptions == null && displayKey != null) {
    List<IntentionAction> options=IntentionManager.getInstance().getStandardIntentionOptions(displayKey,element);
    InspectionProfile profile=InspectionProjectProfileManager.getInstance(element.getProject()).getInspectionProfile();
    InspectionProfileEntry tool=profile.getInspectionTool(displayKey.toString(),element);
    if (!(tool instanceof LocalInspectionToolWrapper)) {
      HighlightDisplayKey key=HighlightDisplayKey.findById(displayKey.toString());
      if (key != null) {
        tool=profile.getInspectionTool(key.toString(),element);
      }
    }
    if (tool instanceof LocalInspectionToolWrapper) {
      final LocalInspectionTool localInspectionTool=((LocalInspectionToolWrapper)tool).getTool();
      Class aClass=myAction.getClass();
      if (myAction instanceof QuickFixWrapper) {
        aClass=((QuickFixWrapper)myAction).getFix().getClass();
      }
      options.add(new CleanupInspectionIntention(localInspectionTool,aClass));
      if (localInspectionTool instanceof CustomSuppressableInspectionTool) {
        final IntentionAction[] suppressActions=((CustomSuppressableInspectionTool)localInspectionTool).getSuppressActions(element);
        if (suppressActions != null) {
          options.addAll(Arrays.asList(suppressActions));
        }
      }
    }
    myKey=null;
synchronized (this) {
      if (myOptions == null) {
        myOptions=options;
      }
    }
  }
  return myOptions;
}
