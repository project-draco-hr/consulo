{
  if (file instanceof AntFile) {
    final AntProject project=((AntFile)file).getAntProject();
    if (project != null) {
      final AntTarget[] targets=project.getTargets();
      if (targets.length > 0) {
        final HashMap<String,AntTarget> name2Target=new HashMap<String,AntTarget>();
        for (        final AntTarget target : targets) {
          name2Target.put(target.getName(),target);
        }
        final List<ProblemDescriptor> problems=new ArrayList<ProblemDescriptor>();
        final AntTarget[] importedTargets=project.getImportedTargets();
        for (        final AntTarget target : importedTargets) {
          final String name=target.getName();
          final AntTarget t=name2Target.get(name);
          if (t != null) {
            final String duplicatedMessage=AntBundle.message("target.is.duplicated.in.imported.file",name,target.getAntFile().getName());
            problems.add(manager.createProblemDescriptor(t,duplicatedMessage,isOnTheFly,LocalQuickFix.EMPTY_ARRAY,ProblemHighlightType.GENERIC_ERROR_OR_WARNING));
          }
        }
        final int prolemCount=problems.size();
        if (prolemCount > 0) {
          return problems.toArray(new ProblemDescriptor[prolemCount]);
        }
      }
    }
  }
  return null;
}
