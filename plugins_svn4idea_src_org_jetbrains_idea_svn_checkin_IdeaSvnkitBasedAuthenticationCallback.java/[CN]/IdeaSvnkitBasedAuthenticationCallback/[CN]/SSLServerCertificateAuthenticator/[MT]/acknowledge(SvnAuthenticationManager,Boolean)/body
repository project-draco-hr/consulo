{
  if (myTempDirectory != null && myCertificate != null) {
    if (!(myCertificate instanceof X509Certificate)) {
      throw new SVNException(SVNErrorMessage.create(SVNErrorCode.IO_ERROR,"Can not store server certificate: " + myCertificate));
    }
    X509Certificate x509Certificate=(X509Certificate)myCertificate;
    String stored=null;
    try {
      stored=SVNBase64.byteArrayToBase64(x509Certificate.getEncoded());
    }
 catch (    CertificateEncodingException e) {
      throw new SVNException(SVNErrorMessage.create(SVNErrorCode.IO_ERROR,e));
    }
    int failures=SVNSSLUtil.getServerCertificateFailures(x509Certificate,myUrl.getHost());
    storeServerCertificate(myTempDirectory,myCertificateRealm,stored,failures);
    try {
      final String kind=myAuthentication instanceof SVNPasswordAuthentication ? ISVNAuthenticationManager.PASSWORD : ISVNAuthenticationManager.SSL;
      final String realm=myCredentialsRealm == null ? myCertificateRealm : myCredentialsRealm;
      manager.acknowledgeAuthentication(true,kind,realm,null,myAuthentication,myUrl);
    }
 catch (    SvnAuthenticationManager.CredentialsSavedException e) {
      return e.isSuccess();
    }
  }
  return true;
}
