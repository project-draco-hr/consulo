{
  final Change change=getUserObject();
  final FilePath filePath=ChangesUtil.getFilePath(change);
  final String fileName=filePath.getName();
  VirtualFile vFile=filePath.getVirtualFile();
  final Color changeColor=change.getFileStatus().getColor();
  renderer.appendFileName(vFile,fileName,changeColor);
  final String originText=change.getOriginText(myProject);
  if (originText != null) {
    renderer.append(" " + originText,SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
  if (renderer.isShowFlatten()) {
    final File parentFile=filePath.getIOFile().getParentFile();
    if (parentFile != null) {
      renderer.append(" (" + parentFile.getPath() + ")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
    }
    appendSwitched(renderer);
  }
 else   if (getCount() != 1 || getDirectoryCount() != 0) {
    appendSwitched(renderer);
    appendCount(renderer);
  }
 else {
    appendSwitched(renderer);
  }
  if (filePath.isDirectory() || !isLeaf()) {
    renderer.setIcon(expanded ? Icons.DIRECTORY_OPEN_ICON : Icons.DIRECTORY_CLOSED_ICON);
  }
 else {
    renderer.setIcon(filePath.getFileType().getIcon());
  }
}
