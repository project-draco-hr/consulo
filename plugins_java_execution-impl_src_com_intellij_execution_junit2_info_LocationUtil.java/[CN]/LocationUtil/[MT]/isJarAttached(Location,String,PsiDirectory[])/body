{
  final JavaPsiFacade facade=JavaPsiFacade.getInstance(location.getProject());
  boolean testngJarFound=false;
  final Module locationModule=location.getModule();
  if (locationModule != null) {
    testngJarFound=facade.findClass(fqn,GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(locationModule,true)) != null;
  }
 else {
    for (    PsiDirectory directory : directories) {
      final Module module=ModuleUtilCore.findModuleForFile(directory.getVirtualFile(),location.getProject());
      if (module != null) {
        if (facade.findClass(fqn,GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module,true)) != null) {
          testngJarFound=true;
          break;
        }
      }
    }
  }
  return testngJarFound;
}
