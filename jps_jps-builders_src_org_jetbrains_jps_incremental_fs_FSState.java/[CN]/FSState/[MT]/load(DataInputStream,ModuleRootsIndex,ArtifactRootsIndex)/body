{
  BuilderRegistry registry=BuilderRegistry.getInstance();
  int typeCount=in.readInt();
  while (typeCount-- > 0) {
    final String typeId=IOUtil.readString(in);
    int targetCount=in.readInt();
    while (targetCount-- > 0) {
      final String id=IOUtil.readString(in);
      BuildTargetType type=registry.getTargetType(typeId);
      boolean loaded=false;
      if (type != null) {
        BuildTarget target=type.createTarget(id,rootsIndex,artifactRootsIndex);
        if (target != null) {
          getDelta(target).load(in,target,rootsIndex,artifactRootsIndex);
          myInitialScanPerformed.add(target);
          loaded=true;
        }
      }
      if (!loaded) {
        LOG.info("Skipping unknown target (typeId=" + typeId + ", type="+ type+ ", id="+ id+ ")");
        FilesDelta.skip(in);
      }
    }
  }
}
