{
  String hostname="somehost";
  String username="joe";
  String password="joespass";
  File knownHosts=new File("~/.ssh/known_hosts");
  try {
    if (knownHosts.exists())     database.addHostkeys(knownHosts);
    Connection conn=new Connection(hostname);
    conn.connect(new SimpleVerifier(database));
    boolean isAuthenticated=conn.authenticateWithPassword(username,password);
    if (isAuthenticated == false)     throw new IOException("Authentication failed.");
    Session sess=conn.openSession();
    sess.execCommand("uname -a && date && uptime && who");
    InputStream stdout=new StreamGobbler(sess.getStdout());
    BufferedReader br=new BufferedReader(new InputStreamReader(stdout));
    System.out.println("Here is some information about the remote host:");
    while (true) {
      String line=br.readLine();
      if (line == null)       break;
      System.out.println(line);
    }
    sess.close();
    conn.close();
  }
 catch (  IOException e) {
    e.printStackTrace(System.err);
    System.exit(2);
  }
}
