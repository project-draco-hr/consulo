{
  List<TextRange> textRanges=new ArrayList<TextRange>(elements.length);
  for (  PsiElement element : elements) {
    textRanges.add(element.getTextRange());
  }
  if (clearHighlights) {
    clearHighlights(editor,highlightManager,textRanges,attributes);
    return;
  }
  ArrayList<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
  Document document=editor.getDocument();
  highlightManager.addOccurrenceHighlights(editor,elements,attributes,false,highlighters);
  for (int idx=0; idx < highlighters.size(); idx++) {
    RangeHighlighter highlighter=highlighters.get(idx);
    int offset=elements[idx].getTextRange().getStartOffset();
    setLineTextErrorStripeTooltip(document,offset,highlighter);
  }
}
