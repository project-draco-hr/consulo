{
  final List<Object> objects=Collections.nCopies(1000000,null);
  COUNT.set(0);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      boolean success=JobLauncher.getInstance().invokeConcurrentlyUnderProgress(objects,null,true,false,new Processor<Object>(){
        @Override public boolean process(        Object o){
          COUNT.incrementAndGet();
          return true;
        }
      }
);
      assertTrue(success);
      assertEquals(objects.size(),COUNT.get());
    }
  }
);
}
