{
  final VcsAbstractHistorySession[] result=new VcsAbstractHistorySession[1];
  final VcsException[] exc=new VcsException[1];
  try {
    myVcs.getVcsHistoryProvider().reportAppendableHistory(filePath,new VcsAppendableHistorySessionPartner(){
      @Override public void reportCreatedEmptySession(      VcsAbstractHistorySession session){
        result[0]=session;
      }
      @Override public void acceptRevision(      VcsFileRevision revision){
        result[0].appendRevision(revision);
        if (firstNumber.equals(revision.getRevisionNumber()))         throw new ProcessCanceledException();
      }
      @Override public void reportException(      VcsException exception){
        exc[0]=exception;
      }
      @Override public void finished(){
      }
      @Override public void beforeRefresh(){
      }
      @Override public void forceRefresh(){
      }
    }
);
  }
 catch (  ProcessCanceledException e) {
  }
  if (exc[0] != null) {
    throw exc[0];
  }
  return result[0];
}
