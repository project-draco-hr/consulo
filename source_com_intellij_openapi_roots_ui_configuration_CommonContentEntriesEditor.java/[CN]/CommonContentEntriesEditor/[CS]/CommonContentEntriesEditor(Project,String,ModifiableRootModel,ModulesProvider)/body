{
  super(project,model);
  myModuleName=moduleName;
  myModulesProvider=modulesProvider;
  final VirtualFileManagerAdapter fileManagerListener=new VirtualFileManagerAdapter(){
    public void afterRefreshFinish(    boolean asynchonous){
      final Module module=getModule();
      if (module == null || module.isDisposed() || module.getProject().isDisposed())       return;
      for (      final ContentEntry contentEntry : myEntryToEditorMap.keySet()) {
        final ContentEntryEditor editor=myEntryToEditorMap.get(contentEntry);
        if (editor != null) {
          editor.update();
        }
      }
    }
  }
;
  final VirtualFileManagerEx fileManager=((VirtualFileManagerEx)VirtualFileManager.getInstance());
  fileManager.addVirtualFileManagerListener(fileManagerListener);
  registerDisposable(new Disposable(){
    public void dispose(){
      fileManager.removeVirtualFileManagerListener(fileManagerListener);
    }
  }
);
}
