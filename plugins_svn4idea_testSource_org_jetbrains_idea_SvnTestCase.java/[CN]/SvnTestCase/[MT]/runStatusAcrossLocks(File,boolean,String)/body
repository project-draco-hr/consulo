{
  final Processor<ProcessOutput> primitiveVerifier=new Processor<ProcessOutput>(){
    @Override public boolean process(    ProcessOutput output){
      if (sorted) {
        verifySorted(output,stdoutLines);
      }
 else {
        verify(output,stdoutLines);
      }
      return false;
    }
  }
;
  runAndVerifyAcrossLocks(workingDir,new String[]{"status"},new Processor<ProcessOutput>(){
    @Override public boolean process(    ProcessOutput output){
      final List<String> lines=output.getStdoutLines();
      for (      String line : lines) {
        if (line.trim().startsWith("L")) {
          return true;
        }
      }
      primitiveVerifier.process(output);
      return false;
    }
  }
,primitiveVerifier);
}
