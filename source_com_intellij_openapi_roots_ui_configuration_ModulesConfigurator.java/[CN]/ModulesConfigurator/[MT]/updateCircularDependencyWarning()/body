{
  final ProjectRootManagerEx projectRootManagerEx=ProjectRootManagerEx.getInstanceEx(myProject);
  String warningMessage="";
  try {
    List<ModifiableRootModel> modelsToCheck=new ArrayList<ModifiableRootModel>(myModuleEditors.size());
    for (    final ModuleEditor moduleEditor : myModuleEditors) {
      final ModifiableRootModel model=moduleEditor.getModifiableRootModel();
      if (model != null) {
        modelsToCheck.add(model);
      }
    }
    projectRootManagerEx.checkCircularDependency(modelsToCheck.toArray(new ModifiableRootModel[modelsToCheck.size()]),myModuleModel);
  }
 catch (  ModuleCircularDependencyException e) {
    warningMessage="There is a circular dependency between modules\n\"" + e.getModuleName1() + "\" and \""+ e.getModuleName2()+ "\"";
  }
  myWarningLabel.setIcon(warningMessage.length() > 0 ? Messages.getWarningIcon() : null);
  myWarningLabel.setText(warningMessage);
}
