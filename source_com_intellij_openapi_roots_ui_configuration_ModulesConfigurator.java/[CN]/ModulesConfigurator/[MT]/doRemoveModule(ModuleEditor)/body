{
  String question;
  if (myModuleEditors.size() == 1) {
    question=ProjectBundle.message("module.remove.last.confirmation");
  }
 else {
    question=ProjectBundle.message("module.remove.confirmation",selectedEditor.getModule().getName());
  }
  int result=Messages.showYesNoDialog(myProject,question,ProjectBundle.message("module.remove.confirmation.title"),Messages.getQuestionIcon());
  if (result != 0) {
    return;
  }
  myModuleEditors.remove(selectedEditor);
  final Module moduleToRemove=selectedEditor.getModule();
  List<ModifiableRootModel> modifiableRootModels=new ArrayList<ModifiableRootModel>();
  for (  final ModuleEditor moduleEditor : myModuleEditors) {
    if (moduleToRemove.equals(moduleEditor.getModule())) {
      continue;
    }
    final ModifiableRootModel modifiableRootModel=moduleEditor.getModifiableRootModelProxy();
    modifiableRootModels.add(modifiableRootModel);
  }
  final ModifiableRootModel model=selectedEditor.dispose();
  ModuleDeleteProvider.removeModule(moduleToRemove,model,modifiableRootModels,myModuleModel);
  processModuleCountChanged(myModuleEditors.size() + 1,myModuleEditors.size());
}
