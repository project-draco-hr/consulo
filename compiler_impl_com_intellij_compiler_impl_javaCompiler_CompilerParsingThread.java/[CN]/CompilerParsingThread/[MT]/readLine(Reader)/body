{
  boolean first=true;
  StringBuilder buffer=StringBuilderSpinAllocator.alloc();
  try {
    while (true) {
      int c=reader.read();
      if (c == -1)       break;
      first=false;
      if (c == '\n') {
        if (mySkipLF) {
          mySkipLF=false;
          continue;
        }
        break;
      }
 else       if (c == '\r') {
        mySkipLF=true;
        break;
      }
 else {
        mySkipLF=false;
        buffer.append((char)c);
      }
    }
    if (first) {
      return null;
    }
    return buffer.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(buffer);
  }
}
