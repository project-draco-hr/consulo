{
  String mavenProjectDirPath=FileUtil.toSystemIndependentName(mavenProject.getDirectory());
  facet.getConfiguration().init(facet.getModule(),mavenProjectDirPath);
  AndroidMavenProviderImpl.setPathsToDefault(mavenProject,facet.getModule(),facet.getConfiguration());
  final boolean hasApkSources=AndroidMavenProviderImpl.hasApkSourcesDependency(mavenProject);
  AndroidMavenProviderImpl.configureAaptCompilation(mavenProject,facet.getModule(),facet.getConfiguration(),hasApkSources);
  if (AndroidMavenUtil.APKLIB_DEPENDENCY_AND_PACKAGING_TYPE.equals(mavenProject.getPackaging())) {
    facet.getConfiguration().LIBRARY_PROJECT=true;
  }
  if (hasApkSources) {
    reportError("'apksources' dependency is deprecated and can be poorly supported by IDE. " + "It is strongly recommended to use 'apklib' dependency instead.",facet.getModule().getName());
  }
}
