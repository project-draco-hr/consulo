{
  if (predefinedSdkPath != null) {
    final Sdk sdk=doFindOrCreateAndroidPlatform(predefinedSdkPath,apiLevel);
    if (sdk != null) {
      return sdk;
    }
  }
  String sdkPath=System.getenv(AndroidSdkUtils.ANDROID_HOME_ENV);
  LOG.info("android home: " + sdkPath);
  if (sdkPath != null) {
    final Sdk sdk=doFindOrCreateAndroidPlatform(sdkPath,apiLevel);
    if (sdk != null) {
      return sdk;
    }
  }
  final Collection<String> candidates=AndroidSdkUtils.getAndroidSdkPathsFromExistingPlatforms();
  LOG.info("suggested sdks: " + candidates);
  for (  String candidate : candidates) {
    final Sdk sdk=doFindOrCreateAndroidPlatform(candidate,apiLevel);
    if (sdk != null) {
      return sdk;
    }
  }
  return null;
}
