{
  final VirtualFile root=getVirtualFile(createTempDir("contentRoot"));
  PsiTestUtil.addContentRoot(myModule,root);
  final ModifiableRootModel model=ModuleRootManager.getInstance(myModule).getModifiableModel();
  List<FrameworkSupportConfigurable> selectedConfigurables=new ArrayList<FrameworkSupportConfigurable>();
  for (  FrameworkSupportProvider provider : mySelected) {
    final FrameworkSupportConfigurable configurable=myConfigurables.get(provider);
    configurable.addSupport(myModule,model,null);
    selectedConfigurables.add(configurable);
  }
  for (  FrameworkSupportCommunicator communicator : FrameworkSupportCommunicator.EP_NAME.getExtensions()) {
    communicator.onFrameworkSupportAdded(myModule,model,selectedConfigurables,myFrameworkSupportModel);
  }
  model.commit();
}
