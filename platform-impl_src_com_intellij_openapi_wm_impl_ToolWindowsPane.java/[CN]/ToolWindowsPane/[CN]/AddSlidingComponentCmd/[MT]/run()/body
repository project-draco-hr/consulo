{
  try {
    final UISettings uiSettings=UISettings.getInstance();
    if (!myDirtyMode && uiSettings.ANIMATE_WINDOWS && !UISettings.isRemoteDesktopConnected()) {
      final Image topImage=myLayeredPane.getTopImage();
      final Graphics topGraphics=topImage.getGraphics();
      Rectangle bounds;
      try {
        myLayeredPane.add(myComponent,JLayeredPane.PALETTE_LAYER);
        myLayeredPane.moveToFront(myComponent);
        myLayeredPane.setBoundsInPaletteLayer(myComponent,myInfo.getAnchor(),myInfo.getWeight());
        bounds=myComponent.getBounds();
        myComponent.paint(topGraphics);
        myLayeredPane.remove(myComponent);
      }
  finally {
        topGraphics.dispose();
      }
      final Image bottomImage=myLayeredPane.getBottomImage();
      final Graphics bottomGraphics=bottomImage.getGraphics();
      try {
        bottomGraphics.setClip(0,0,bounds.width,bounds.height);
        bottomGraphics.translate(-bounds.x,-bounds.y);
        myLayeredPane.paint(bottomGraphics);
      }
  finally {
        bottomGraphics.dispose();
      }
      final Surface surface=new Surface(topImage,bottomImage,1,myInfo.getAnchor(),uiSettings.ANIMATION_SPEED);
      myLayeredPane.add(surface,JLayeredPane.PALETTE_LAYER);
      surface.setBounds(bounds);
      myLayeredPane.validate();
      myLayeredPane.repaint();
      surface.runMovement();
      myLayeredPane.remove(surface);
      myLayeredPane.add(myComponent,JLayeredPane.PALETTE_LAYER);
    }
 else {
      myLayeredPane.add(myComponent,JLayeredPane.PALETTE_LAYER);
      myLayeredPane.setBoundsInPaletteLayer(myComponent,myInfo.getAnchor(),myInfo.getWeight());
    }
    if (!myDirtyMode) {
      myLayeredPane.validate();
      myLayeredPane.repaint();
    }
  }
  finally {
    finish();
  }
}
