{
  if (isPlatform() || !USE_PROJECT_PROFILE)   return myApplicationProfileManager.getRootProfile();
  if (PROJECT_PROFILE == null || myProfiles.isEmpty()) {
    setProjectProfile(PROJECT_DEFAULT_PROFILE_NAME);
    final Profile projectProfile=myApplicationProfileManager.createProfile();
    projectProfile.copyFrom(myApplicationProfileManager.getRootProfile());
    projectProfile.setLocal(false);
    projectProfile.setName(PROJECT_DEFAULT_PROFILE_NAME);
    myProfiles.put(PROJECT_DEFAULT_PROFILE_NAME,projectProfile);
  }
 else   if (!myProfiles.containsKey(PROJECT_PROFILE)) {
    final String projectProfileAttempt=myProfiles.keySet().iterator().next();
    setProjectProfile(projectProfileAttempt);
  }
  final Profile profile=myProfiles.get(PROJECT_PROFILE);
  profile.setProfileManager(this);
  return profile;
}
