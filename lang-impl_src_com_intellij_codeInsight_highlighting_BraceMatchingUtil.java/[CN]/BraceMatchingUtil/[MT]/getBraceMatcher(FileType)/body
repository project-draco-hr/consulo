{
  BraceMatcher braceMatcher=BRACE_MATCHERS.get(fileType);
  if (braceMatcher == null) {
    if (fileType instanceof LanguageFileType) {
      final Language language=((LanguageFileType)fileType).getLanguage();
      final PairedBraceMatcher matcher=LanguageBraceMatching.INSTANCE.forLanguage(language);
      if (matcher != null) {
        braceMatcher=new PairedBraceMatcherAdapter(matcher,language);
      }
    }
    if (braceMatcher == null)     braceMatcher=ourDefaultBraceMatcher;
    BRACE_MATCHERS.put(fileType,braceMatcher);
  }
  return braceMatcher;
}
