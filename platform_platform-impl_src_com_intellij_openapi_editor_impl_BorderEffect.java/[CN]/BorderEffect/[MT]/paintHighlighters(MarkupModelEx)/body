{
  markupModel.processHighlightsOverlappingWith(myStartOffset,myEndOffset,new Processor<RangeHighlighterEx>(){
    @Override public boolean process(    RangeHighlighterEx rangeHighlighter){
      TextAttributes textAttributes=rangeHighlighter.getTextAttributes();
      if (isBorder(textAttributes) && intersectsRange(rangeHighlighter)) {
        paintBorder(rangeHighlighter,textAttributes);
      }
      return true;
    }
  }
);
}
