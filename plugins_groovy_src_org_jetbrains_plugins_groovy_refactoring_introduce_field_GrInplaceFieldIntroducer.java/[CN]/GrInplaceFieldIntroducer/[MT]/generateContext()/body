{
  final List<RangeMarker> occurrenceMarkers=getOccurrenceMarkers();
  List<PsiElement> occurrences=ContainerUtil.newArrayList();
  for (  RangeMarker marker : occurrenceMarkers) {
    ContainerUtil.addIfNotNull(occurrences,findExpression(marker));
  }
  GrExpression expr=null;
  if (myExpressionRangeMarker != null)   expr=findExpression(myExpressionRangeMarker);
  if (myStringPartRangeMarker != null) {
    expr=findExpressionFromStringPartMarker(myStringPartRangeMarker);
    occurrences.add(expr);
  }
  return new GrIntroduceContextImpl(myContext.getProject(),myContext.getEditor(),expr,null,null,PsiUtilCore.toPsiElementArray(occurrences),myContext.getScope());
}
