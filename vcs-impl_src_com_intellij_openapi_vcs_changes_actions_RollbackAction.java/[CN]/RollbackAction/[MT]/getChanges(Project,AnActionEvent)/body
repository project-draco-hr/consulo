{
  final ChangesCheckHelper helper=new ChangesCheckHelper(project,e);
  if (helper.isChangesSet())   return helper.getChanges();
  final VirtualFile[] virtualFiles=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
  if (virtualFiles != null && virtualFiles.length > 0) {
    List<Change> result=new ArrayList<Change>();
    for (    VirtualFile file : virtualFiles) {
      result.addAll(ChangeListManager.getInstance(project).getChangesIn(file));
    }
    return result.toArray(new Change[result.size()]);
  }
  return null;
}
