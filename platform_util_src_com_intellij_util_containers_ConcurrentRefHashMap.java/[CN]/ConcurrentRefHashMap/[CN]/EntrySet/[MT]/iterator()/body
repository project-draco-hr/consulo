{
  return new Iterator<Map.Entry<K,V>>(){
    private final Iterator<Map.Entry<KeyReference<K,V>,V>> hashIterator=hashEntrySet.iterator();
    private RefEntry<K,V> next;
    @Override public boolean hasNext(){
      while (hashIterator.hasNext()) {
        Map.Entry<KeyReference<K,V>,V> ent=hashIterator.next();
        KeyReference<K,V> wk=ent.getKey();
        K k=null;
        if (wk != null && (k=wk.get()) == null && wk != NULL_KEY) {
          continue;
        }
        next=new RefEntry<K,V>(ent,k);
        return true;
      }
      return false;
    }
    @Override public Map.Entry<K,V> next(){
      if (next == null && !hasNext()) {
        throw new NoSuchElementException();
      }
      RefEntry<K,V> e=next;
      next=null;
      return e;
    }
    @Override public void remove(){
      hashIterator.remove();
    }
  }
;
}
