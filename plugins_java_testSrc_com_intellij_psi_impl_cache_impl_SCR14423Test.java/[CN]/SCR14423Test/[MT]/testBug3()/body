{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      PsiClass psiClass=myJavaFacade.findClass("p.A",GlobalSearchScope.allScope(myProject));
      assertEquals("p.A",psiClass.getQualifiedName());
      assertTrue(psiClass.isValid());
      PsiTestUtil.addExcludedRoot(myModule,myPackDir);
      assertFalse(psiClass.isValid());
      ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
      final ContentEntry content=rootModel.getContentEntries()[0];
      content.removeFolder(content.getFolders(ContentFolderType.EXCLUDED)[0]);
      rootModel.commit();
      psiClass=myJavaFacade.findClass("p.A");
      assertTrue(psiClass.isValid());
    }
  }
);
}
