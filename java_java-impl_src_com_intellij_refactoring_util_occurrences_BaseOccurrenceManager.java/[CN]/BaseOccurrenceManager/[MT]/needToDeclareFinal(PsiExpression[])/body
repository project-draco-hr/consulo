{
  PsiElement scopeToDeclare=null;
  for (  PsiExpression occurrence : occurrences) {
    final PsiElement data=occurrence.getUserData(ElementToWorkOn.PARENT);
    if (scopeToDeclare == null) {
      scopeToDeclare=data != null ? data : occurrence;
    }
 else {
      scopeToDeclare=PsiTreeUtil.findCommonParent(scopeToDeclare,data != null ? data : occurrence);
    }
  }
  if (scopeToDeclare == null) {
    return false;
  }
  for (  PsiExpression occurrence : occurrences) {
    PsiElement parent=occurrence.getUserData(ElementToWorkOn.PARENT);
    if (parent == null)     parent=occurrence;
    while (!parent.equals(scopeToDeclare)) {
      parent=parent.getParent();
      if (parent instanceof PsiClass) {
        return true;
      }
    }
  }
  return false;
}
