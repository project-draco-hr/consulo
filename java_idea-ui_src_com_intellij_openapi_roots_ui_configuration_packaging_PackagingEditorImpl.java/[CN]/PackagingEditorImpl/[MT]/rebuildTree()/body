{
  PackagingTreeState state=PackagingTreeState.saveState(myTree);
  myRoot.removeAllChildren();
  myRootArtifact=myBuilder.createRootArtifact();
  PackagingArtifactNode root=PackagingTreeNodeFactoryOld.createArtifactNode(myRootArtifact,myRoot,null);
  for (  ContainerElement element : getPackagedElements()) {
    myBuilder.createNodes(root,element,null,myTreeParameters);
  }
  myTreeModel.nodeStructureChanged(myRoot);
  TreeUtil.sort(myTreeModel,new Comparator<PackagingTreeNode>(){
    public int compare(    final PackagingTreeNode node1,    final PackagingTreeNode node2){
      double weight1=node1.getWeight();
      double weight2=node2.getWeight();
      if (weight1 < weight2)       return -1;
      if (weight1 > weight2)       return 1;
      return node1.compareTo(node2);
    }
  }
);
  state.restoreState(myTree);
}
