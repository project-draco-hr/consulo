{
  if (ancestor == descendant)   return true;
  r.lock();
  try {
    Map<Class,Boolean> map=ourAssignables.get(ancestor);
    if (map != null) {
      final Boolean aBoolean=map.get(descendant);
      if (aBoolean != null) {
        return aBoolean;
      }
    }
  }
  finally {
    r.unlock();
  }
  w.lock();
  try {
    Map<Class,Boolean> map=ourAssignables.get(ancestor);
    if (map == null) {
      ourAssignables.put(ancestor,map=new THashMap<Class,Boolean>());
    }
    final boolean result=ancestor.isAssignableFrom(descendant);
    map.put(descendant,result);
    return result;
  }
  finally {
    w.unlock();
  }
}
