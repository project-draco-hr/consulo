{
  if (ancestor == descendant)   return true;
  if (CACHE_DISABLED) {
    return ancestor.isAssignableFrom(descendant);
  }
  cacheRead.lock();
  try {
    Map<Class,Boolean> map=ourAssignables.get(ancestor);
    if (map == null) {
      cacheRead.unlock();
      cacheWrite.lock();
      try {
        map=new THashMap<Class,Boolean>();
        ourAssignables.put(ancestor,map);
      }
  finally {
        cacheWrite.unlock();
        cacheRead.lock();
      }
    }
    Boolean result=map.get(descendant);
    if (result != null) {
      return result.booleanValue();
    }
    cacheRead.unlock();
    cacheWrite.lock();
    try {
      result=ancestor.isAssignableFrom(descendant);
      map.put(descendant,result);
      return result.booleanValue();
    }
  finally {
      cacheWrite.unlock();
      cacheRead.lock();
    }
  }
  finally {
    cacheRead.unlock();
  }
}
