{
  final List<PropertiesFile> propertiesFiles=myResourceBundle.getPropertiesFiles();
  for (  PropertiesFile propertiesFile : propertiesFiles) {
    if (!CodeInsightUtil.prepareFileForWrite(propertiesFile))     return false;
  }
  final Ref<Boolean> success=Ref.create(Boolean.TRUE);
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          String baseName=myResourceBundle.getBaseName();
          for (          PropertiesFile propertiesFile : propertiesFiles) {
            final VirtualFile virtualFile=propertiesFile.getVirtualFile();
            final String newName=inputString + virtualFile.getNameWithoutExtension().substring(baseName.length()) + "."+ virtualFile.getExtension();
            try {
              virtualFile.rename(this,newName);
            }
 catch (            final IOException e) {
              ApplicationManager.getApplication().invokeLater(new Runnable(){
                public void run(){
                  String path=FileUtil.toSystemDependentName(virtualFile.getPath());
                  Messages.showErrorDialog(myProject,"Error renaming file '" + path + "' to '"+ newName+ "'\n"+ e.getLocalizedMessage(),"Rename Resource Bundle");
                }
              }
);
              success.set(Boolean.FALSE);
              return;
            }
          }
        }
      }
);
    }
  }
,"Renaming resource bundle " + myResourceBundle.getBaseName(),null);
  return success.get().booleanValue();
}
