{
  final List<PropertiesFile> propertiesFiles=myResourceBundle.getPropertiesFiles(myProject);
  for (  PropertiesFile propertiesFile : propertiesFiles) {
    if (!CodeInsightUtil.prepareFileForWrite(propertiesFile))     return false;
  }
  final Ref<Boolean> success=Ref.create(Boolean.TRUE);
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          String baseName=myResourceBundle.getBaseName();
          for (          PropertiesFile propertiesFile : propertiesFiles) {
            final VirtualFile virtualFile=propertiesFile.getVirtualFile();
            final String newName=inputString + virtualFile.getNameWithoutExtension().substring(baseName.length()) + "."+ virtualFile.getExtension();
            try {
              virtualFile.rename(this,newName);
            }
 catch (            final IOException e) {
              ApplicationManager.getApplication().invokeLater(new Runnable(){
                public void run(){
                  String path=FileUtil.toSystemDependentName(virtualFile.getPath());
                  Messages.showErrorDialog(myProject,PropertiesBundle.message("error.renaming.file.to.file.with.error.error.message",path,newName,e.getLocalizedMessage()),PropertiesBundle.message("rename.resource.bundle.dialog.title"));
                }
              }
);
              success.set(Boolean.FALSE);
              return;
            }
          }
        }
      }
);
    }
  }
,PropertiesBundle.message("renaming.resource.bundle.0",myResourceBundle.getBaseName()),null);
  return success.get().booleanValue();
}
