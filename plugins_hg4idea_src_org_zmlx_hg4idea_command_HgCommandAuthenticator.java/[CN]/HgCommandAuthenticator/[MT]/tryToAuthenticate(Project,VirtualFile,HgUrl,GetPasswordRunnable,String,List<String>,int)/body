{
  HgCommandService service=HgCommandService.getInstance(project);
  UIUtil.invokeAndWaitIfNeeded(runnable);
  if (runnable.isOk()) {
    hgUrl.setUsername(runnable.getUserName());
    hgUrl.setPassword(String.valueOf(runnable.getPassword()));
  }
 else {
    return HgCommandResult.CANCELLED;
  }
  arguments.set(urlArgumentPosition,hgUrl.asString());
  return service.execute(localRepository,command,arguments);
}
