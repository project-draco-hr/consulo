{
  JLayeredPane layeredPane=null;
  try {
    final Component owner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
    if (SwingUtilities.isDescendingFrom(owner,myTextField)) {
      if (myPreviouslyFocusedComponent instanceof JComponent && myPreviouslyFocusedComponent.isShowing()) {
        final JComponent _component=(JComponent)myPreviouslyFocusedComponent;
        LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(_component);
      }
      if (myPreviouslyFocusedComponent != null) {
        myPreviouslyFocusedComponent.requestFocus();
      }
    }
    final JRootPane rootPane=myTextFieldPanel.getRootPane();
    if (rootPane != null) {
      layeredPane=rootPane.getLayeredPane();
      layeredPane.remove(myListScrollPane);
      layeredPane.remove(myTextFieldPanel);
    }
  }
  finally {
    LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(null);
  }
  if (layeredPane != null) {
    layeredPane.validate();
    layeredPane.repaint();
  }
}
