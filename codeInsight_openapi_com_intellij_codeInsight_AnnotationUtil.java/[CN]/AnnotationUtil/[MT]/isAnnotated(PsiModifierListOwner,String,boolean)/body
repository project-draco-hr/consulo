{
  if (listOwner instanceof PsiParameter) {
    PsiAnnotation[] paramAnnotations=((PsiParameter)listOwner).getAnnotations();
    for (    PsiAnnotation annotation : paramAnnotations) {
      if (annotationFQN.equals(annotation.getQualifiedName())) {
        return true;
      }
    }
    return false;
  }
  final PsiModifierList modifierList=listOwner.getModifierList();
  if (modifierList == null) {
    return false;
  }
  PsiAnnotation annotation=modifierList.findAnnotation(annotationFQN);
  if (annotation != null)   return true;
  if (checkHierarchy && listOwner instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)listOwner;
    final PsiMethod[] superMethods=method.findSuperMethods();
    for (    PsiMethod superMethod : superMethods) {
      if (isAnnotated(superMethod,annotationFQN,checkHierarchy))       return true;
    }
  }
  return false;
}
