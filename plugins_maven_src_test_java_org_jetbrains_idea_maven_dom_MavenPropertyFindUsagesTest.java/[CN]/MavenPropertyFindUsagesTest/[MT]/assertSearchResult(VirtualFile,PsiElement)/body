{
  myCodeInsightFixture.configureFromExistingVirtualFile(file);
  PsiElement target=TargetElementUtilBase.findTargetElement(myCodeInsightFixture.getEditor(),TargetElementUtilBase.ELEMENT_NAME_ACCEPTED | TargetElementUtilBase.REFERENCED_ELEMENT_ACCEPTED);
  List<PsiReference> result=new ArrayList<PsiReference>(ReferencesSearch.search(target).findAll());
  List<PsiElement> actualElements=ContainerUtil.map(result,new Function<PsiReference,PsiElement>(){
    public PsiElement fun(    PsiReference psiReference){
      return psiReference.getElement();
    }
  }
);
  assertUnorderedElementsAreEqual(actualElements,expected);
}
