{
  final DataContext dataContext=e.getDataContext();
  final ConfigurationContext context=new ConfigurationContext(dataContext);
  final RunnerAndConfigurationSettings configuration=context.getConfiguration();
  if (configuration == null)   return;
  final Project project=context.getProject();
  final RunManagerImpl runManager=RunManagerImpl.getInstanceImpl(project);
  final RunnerAndConfigurationSettingsImpl template=runManager.getConfigurationTemplate(configuration.getFactory());
  final RunConfiguration templateConfiguration=template.getConfiguration();
  runManager.createStepsBeforeRun(template,configuration.getConfiguration());
  runManager.setCompileMethodBeforeRun(configuration.getConfiguration(),runManager.getCompileMethodBeforeRun(templateConfiguration));
  perform(context);
}
