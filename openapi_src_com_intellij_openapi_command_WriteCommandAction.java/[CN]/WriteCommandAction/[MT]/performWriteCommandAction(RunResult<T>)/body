{
  if (!ensureFilesWritable(myProject,myPsiFiles == null ? Collections.<PsiFile>emptyList() : Arrays.asList(myPsiFiles)))   return;
  final RunResult[] results=new RunResult[]{result};
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    public void run(){
      getApplication().runWriteAction(new Runnable(){
        public void run(){
          results[0].run();
          results[0]=null;
        }
      }
);
    }
  }
,getCommandName(),getGroupID(),getUndoConfirmationPolicy());
}
