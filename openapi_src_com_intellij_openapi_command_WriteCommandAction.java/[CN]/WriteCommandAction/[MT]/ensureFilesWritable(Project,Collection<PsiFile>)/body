{
  if (!psiFiles.isEmpty()) {
    List<VirtualFile> list=new SmartList<VirtualFile>();
    for (    final PsiFile psiFile : psiFiles) {
      if (psiFile == null)       continue;
      final VirtualFile virtualFile=psiFile.getVirtualFile();
      if (virtualFile != null) {
        list.add(virtualFile);
      }
    }
    if (!list.isEmpty()) {
      if (ReadonlyStatusHandler.getInstance(project).ensureFilesWritable(list.toArray(new VirtualFile[list.size()])).hasReadonlyFiles()) {
        return false;
      }
    }
  }
  return true;
}
