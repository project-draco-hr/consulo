{
  ArrayList<VirtualFile> rc=new ArrayList<VirtualFile>();
  for (Enumeration be=myRootNode.children(); be.hasMoreElements(); ) {
    CheckedTreeNode baseFileNode=(CheckedTreeNode)be.nextElement();
    for (Enumeration de=baseFileNode.children(); de.hasMoreElements(); ) {
      CheckedTreeNode dirNode=(CheckedTreeNode)de.nextElement();
      if (dirNode.isChecked()) {
        rc.add((VirtualFile)dirNode.getUserObject());
      }
    }
  }
  return rc;
}
