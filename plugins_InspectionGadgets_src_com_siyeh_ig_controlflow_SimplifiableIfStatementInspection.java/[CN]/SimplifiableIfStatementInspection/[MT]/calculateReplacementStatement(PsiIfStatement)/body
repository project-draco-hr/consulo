{
  PsiStatement thenBranch=statement.getThenBranch();
  thenBranch=ControlFlowUtils.stripBraces(thenBranch);
  if (thenBranch == null) {
    return "";
  }
  PsiStatement elseBranch=statement.getElseBranch();
  elseBranch=ControlFlowUtils.stripBraces(elseBranch);
  if (elseBranch == null) {
    final PsiElement nextStatement=PsiTreeUtil.skipSiblingsForward(statement,PsiWhiteSpace.class);
    if (nextStatement instanceof PsiStatement) {
      elseBranch=(PsiStatement)nextStatement;
    }
  }
  if (elseBranch == null) {
    return "";
  }
  final PsiExpression condition=statement.getCondition();
  if (condition == null) {
    return "";
  }
  if (elseBranch instanceof PsiReturnStatement) {
    final PsiReturnStatement thenReturnStatement=(PsiReturnStatement)thenBranch;
    final PsiExpression thenReturnValue=thenReturnStatement.getReturnValue();
    if (thenReturnValue == null) {
      return "";
    }
    final PsiReturnStatement elseReturnStatement=(PsiReturnStatement)elseBranch;
    final PsiExpression elseReturnValue=elseReturnStatement.getReturnValue();
    if (elseReturnValue == null) {
      return "";
    }
    if (BoolUtils.isTrue(thenReturnValue)) {
      return "return " + condition.getText() + " || "+ elseReturnValue.getText()+ ';';
    }
 else     if (BoolUtils.isFalse(thenReturnValue)) {
      return "return " + BoolUtils.getNegatedExpressionText(condition) + " && "+ elseReturnValue.getText()+ ';';
    }
    if (BoolUtils.isTrue(elseReturnValue)) {
      return "return " + BoolUtils.getNegatedExpressionText(condition) + " || "+ thenReturnValue.getText()+ ';';
    }
 else {
      return "return " + condition.getText() + " && "+ thenReturnValue.getText()+ ';';
    }
  }
  final PsiExpressionStatement thenStatement=(PsiExpressionStatement)thenBranch;
  final PsiExpressionStatement elseStatement=(PsiExpressionStatement)elseBranch;
  final PsiAssignmentExpression thenAssignment=(PsiAssignmentExpression)thenStatement.getExpression();
  final PsiAssignmentExpression elseAssignment=(PsiAssignmentExpression)elseStatement.getExpression();
  final PsiExpression lExpression=thenAssignment.getLExpression();
  final PsiExpression thenRhs=thenAssignment.getRExpression();
  if (thenRhs == null) {
    return "";
  }
  final PsiExpression elseRhs=elseAssignment.getRExpression();
  if (elseRhs == null) {
    return "";
  }
  final PsiJavaToken token=elseAssignment.getOperationSign();
  if (BoolUtils.isTrue(thenRhs)) {
    return lExpression.getText() + ' ' + token.getText()+ ' '+ condition.getText()+ " || "+ elseRhs.getText()+ ';';
  }
 else   if (BoolUtils.isFalse(thenRhs)) {
    return lExpression.getText() + ' ' + token.getText()+ ' '+ BoolUtils.getNegatedExpressionText(condition)+ " && "+ elseRhs.getText()+ ';';
  }
  if (BoolUtils.isTrue(elseRhs)) {
    return lExpression.getText() + ' ' + token.getText()+ ' '+ BoolUtils.getNegatedExpressionText(condition)+ " || "+ thenRhs.getText()+ ';';
  }
 else {
    return lExpression.getText() + ' ' + token.getText()+ ' '+ condition.getText()+ " && "+ thenRhs.getText()+ ';';
  }
}
