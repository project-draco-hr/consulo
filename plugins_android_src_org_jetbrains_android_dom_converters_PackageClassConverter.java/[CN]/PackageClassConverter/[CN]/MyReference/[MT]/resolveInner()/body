{
  final int end=getRangeInElement().getEndOffset();
  final String value=myElement.getText().substring(myStart,end).replace('$','.');
  final JavaPsiFacade facade=JavaPsiFacade.getInstance(myElement.getProject());
  if (!myStartsWithPoint) {
    final PsiElement element=myIsPackage ? facade.findPackage(value) : facade.findClass(value,myModule != null ? myModule.getModuleWithDependenciesAndLibrariesScope(false) : myElement.getResolveScope());
    if (element != null) {
      return element;
    }
  }
  final String relativeName=getRelativeName(value);
  if (relativeName != null) {
    return myIsPackage ? facade.findPackage(relativeName) : facade.findClass(relativeName,myModule != null ? myModule.getModuleWithDependenciesAndLibrariesScope(false) : myElement.getResolveScope());
  }
  return null;
}
