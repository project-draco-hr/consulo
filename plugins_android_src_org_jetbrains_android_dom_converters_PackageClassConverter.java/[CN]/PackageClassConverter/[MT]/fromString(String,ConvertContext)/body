{
  if (s == null)   return null;
  DomElement domElement=context.getInvocationElement();
  Manifest manifest=domElement.getParentOfType(Manifest.class,true);
  if (manifest != null) {
    s=s.replace('$','.');
    String packageName=manifest.getPackage().getValue();
    String className;
    if (s.startsWith(".")) {
      className=packageName + s;
    }
 else {
      className=packageName + "." + s;
    }
    JavaPsiFacade facade=JavaPsiFacade.getInstance(context.getPsiManager().getProject());
    GlobalSearchScope scope=GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(context.getModule());
    PsiClass psiClass=facade.findClass(className,scope);
    if (psiClass == null) {
      psiClass=facade.findClass(s,scope);
    }
    return psiClass;
  }
  return null;
}
