{
  if (s == null)   return null;
  DomElement domElement=context.getInvocationElement();
  Manifest manifest=domElement.getParentOfType(Manifest.class,true);
  s=s.replace('$','.');
  String packageName=manifest != null ? manifest.getPackage().getValue() : null;
  String className=null;
  if (packageName != null) {
    if (s.startsWith(".")) {
      className=packageName + s;
    }
 else {
      className=packageName + "." + s;
    }
  }
  JavaPsiFacade facade=JavaPsiFacade.getInstance(context.getPsiManager().getProject());
  final Module module=context.getModule();
  GlobalSearchScope scope=module != null ? GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module) : context.getInvocationElement().getResolveScope();
  PsiClass psiClass=className != null ? facade.findClass(className,scope) : null;
  if (psiClass == null) {
    psiClass=facade.findClass(s,scope);
  }
  return psiClass;
}
