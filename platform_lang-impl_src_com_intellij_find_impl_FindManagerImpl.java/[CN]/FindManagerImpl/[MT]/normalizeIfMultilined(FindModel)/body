{
  if (findmodel.isMultiline()) {
    final FindModel model=new FindModel();
    model.copyFrom(findmodel);
    final String s=model.getStringToFind();
    String newStringToFind;
    if (findmodel.isRegularExpressions()) {
      newStringToFind=StringUtil.replace(s,"\n","\\n\\s*");
    }
 else {
      newStringToFind=StringUtil.escapeToRegexp(s);
      model.setRegularExpressions(true);
    }
    model.setStringToFind(newStringToFind);
    return model;
  }
  return findmodel;
}
