{
  if (!CvsUtil.fileIsUnderCvs(file))   return false;
  if (!file.isDirectory())   return false;
  if (newParent == null)   return false;
  myComponent.getDeleteHandler().addDeletedRoot(file);
  File newFile=new File(newParent.getPath(),newName);
  newFile.mkdir();
  copyDirectoryStructure(file,newFile);
  myComponent.getAddHandler().addFile(newFile);
  UndoManager.getInstance(myProject).markCommandAsNonUndoable(file);
  return true;
}
