{
  PsiElement oldIdentifier=findChildByRoleAsPsiElement(ChildRole.REFERENCE_NAME);
  if (oldIdentifier == null) {
    oldIdentifier=findChildByRoleAsPsiElement(ChildRole.CLASS_REFERENCE);
  }
  if (oldIdentifier == null) {
    throw new IncorrectOperationException();
  }
  final String oldRefName=oldIdentifier.getText();
  if (PsiKeyword.THIS.equals(oldRefName) || PsiKeyword.SUPER.equals(oldRefName) || PsiKeyword.NEW.equals(oldRefName)|| Comparing.strEqual(oldRefName,newElementName)) {
    return this;
  }
  PsiIdentifier identifier=JavaPsiFacade.getInstance(getProject()).getElementFactory().createIdentifier(newElementName);
  oldIdentifier.replace(identifier);
  return this;
}
