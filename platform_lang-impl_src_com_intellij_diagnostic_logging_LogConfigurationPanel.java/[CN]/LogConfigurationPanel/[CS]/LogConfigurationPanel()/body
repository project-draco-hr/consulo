{
  myModel=new ListTableModel<LogFileOptions>(IS_SHOW,FILE,IS_SKIP_CONTENT);
  myFilesTable=new TableView<LogFileOptions>(myModel);
  myFilesTable.getEmptyText().setText(DiagnosticBundle.message("log.monitor.no.files"));
  final JTableHeader tableHeader=myFilesTable.getTableHeader();
  final FontMetrics fontMetrics=tableHeader.getFontMetrics(tableHeader.getFont());
  int preferredWidth=fontMetrics.stringWidth(IS_SHOW.getName()) + 20;
  setUpColumnWidth(tableHeader,preferredWidth,0);
  preferredWidth=fontMetrics.stringWidth(IS_SKIP_CONTENT.getName()) + 20;
  setUpColumnWidth(tableHeader,preferredWidth,2);
  myFilesTable.setColumnSelectionAllowed(false);
  myFilesTable.setShowGrid(false);
  myFilesTable.setDragEnabled(false);
  myFilesTable.setShowHorizontalLines(false);
  myFilesTable.setShowVerticalLines(false);
  myFilesTable.setIntercellSpacing(new Dimension(0,0));
  myAddButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      ArrayList<LogFileOptions> newList=new ArrayList<LogFileOptions>(myModel.getItems());
      LogFileOptions newOptions=new LogFileOptions("","",true,true,false);
      if (showEditorDialog(newOptions)) {
        newList.add(newOptions);
        myModel.setItems(newList);
        int index=myModel.getRowCount() - 1;
        myModel.fireTableRowsInserted(index,index);
        myFilesTable.setRowSelectionInterval(index,index);
      }
    }
  }
);
  myRemoveButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      TableUtil.stopEditing(myFilesTable);
      final int[] selected=myFilesTable.getSelectedRows();
      if (selected == null || selected.length == 0)       return;
      for (int i=selected.length - 1; i >= 0; i--) {
        myModel.removeRow(selected[i]);
      }
      for (int i=selected.length - 1; i >= 0; i--) {
        int idx=selected[i];
        myModel.fireTableRowsDeleted(idx,idx);
      }
      int selection=selected[0];
      if (selection >= myModel.getRowCount()) {
        selection=myModel.getRowCount() - 1;
      }
      if (selection >= 0) {
        myFilesTable.setRowSelectionInterval(selection,selection);
      }
      myFilesTable.requestFocus();
    }
  }
);
  myRemoveButton.setEnabled(false);
  myFilesTable.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      final boolean enabled=myFilesTable.getSelectedRowCount() >= 1 && !myLog2Predefined.containsKey(myFilesTable.getSelectedObject());
      myRemoveButton.setEnabled(enabled);
      myEditButton.setEnabled(enabled && myFilesTable.getSelectedObject() != null);
    }
  }
);
  myEditButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      final int selectedRow=myFilesTable.getSelectedRow();
      final LogFileOptions selectedOptions=myFilesTable.getSelectedObject();
      showEditorDialog(selectedOptions);
      myModel.fireTableDataChanged();
      myFilesTable.setRowSelectionInterval(selectedRow,selectedRow);
    }
  }
);
  myEditButton.setEnabled(false);
  final JScrollPane scrollPane=ScrollPaneFactory.createScrollPane(myFilesTable);
  scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
  myScrollPanel.add(scrollPane,BorderLayout.CENTER);
  myWholePanel.setPreferredSize(new Dimension(-1,150));
  myOutputFile.addBrowseFolderListener("Choose File to Save Console Output","Console output would be saved to the specified file",null,FileChooserDescriptorFactory.createSingleFileOrFolderDescriptor(),TextComponentAccessor.TEXT_FIELD_WHOLE_TEXT);
  myRedirectOutputCb.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      myOutputFile.setEnabled(myRedirectOutputCb.isSelected());
    }
  }
);
}
