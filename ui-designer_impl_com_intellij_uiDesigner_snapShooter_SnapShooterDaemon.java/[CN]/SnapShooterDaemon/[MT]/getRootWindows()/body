{
  List<Component> result=new ArrayList<Component>();
  for (  Frame frame : Frame.getFrames()) {
    if (frame.getClass().getName().endsWith("SwingUtilities$SharedOwnerFrame"))     continue;
    result.add(frame);
    for (    Window window : frame.getOwnedWindows()) {
      if (window.isVisible()) {
        result.add(window);
      }
    }
  }
  return result;
}
