{
  while (true) {
    String command;
    try {
      command=myCommandQueue.take();
    }
 catch (    InterruptedException e) {
      break;
    }
    if (command.startsWith("R")) {
      break;
    }
    String response="";
    if (command.startsWith("L")) {
      response=doListCommand(command);
    }
 else     if (command.startsWith("X")) {
      response=doSnapshotCommand(command);
    }
    if (response.length() > 0) {
      System.out.println("Sending response: " + response);
      try {
        myResponseQueue.put(response);
      }
 catch (      InterruptedException e) {
        break;
      }
    }
  }
}
