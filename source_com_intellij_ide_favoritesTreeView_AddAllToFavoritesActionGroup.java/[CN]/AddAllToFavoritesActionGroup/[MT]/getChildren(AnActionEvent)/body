{
  if (e == null)   return AnAction.EMPTY_ARRAY;
  final Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  if (project == null) {
    return AnAction.EMPTY_ARRAY;
  }
  final String[] availableFavoritesLists=FavoritesViewImpl.getInstance(project).getAvailableFavoritesLists();
  if (availableFavoritesLists == null)   return AnAction.EMPTY_ARRAY;
  AnAction[] actions=new AnAction[availableFavoritesLists.length + 2];
  int idx=0;
  for (  String favoritesList : availableFavoritesLists) {
    actions[idx++]=new AddAllOpenFilesToFavorites(favoritesList);
  }
  actions[idx++]=Separator.getInstance();
  actions[idx]=new AddAllOpenFilesToNewFavoritesListAction();
  return actions;
}
