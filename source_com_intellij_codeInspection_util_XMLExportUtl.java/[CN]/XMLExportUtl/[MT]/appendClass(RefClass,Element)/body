{
  PsiClass psiClass=(PsiClass)refClass.getElement();
  PsiDocComment psiDocComment=psiClass.getDocComment();
  PsiFile psiFile=psiClass.getContainingFile();
  if (psiFile instanceof PsiJavaFile) {
    String packageName=((PsiJavaFile)psiFile).getPackageName();
    Element packageElement=new Element("package");
    packageElement.addContent(packageName.length() > 0 ? packageName : "<default>");
    parentNode.addContent(packageElement);
  }
  Element classElement=new Element("class");
  if (psiDocComment != null) {
    PsiDocTag[] tags=psiDocComment.getTags();
    for (int i=0; i < tags.length; i++) {
      PsiDocTag tag=tags[i];
      if ("author".equals(tag.getName()) && tag.getValueElement() != null) {
        classElement.setAttribute("author",tag.getValueElement().getText());
      }
    }
  }
  String name=PsiFormatUtil.formatClass(psiClass,PsiFormatUtil.SHOW_NAME);
  Element nameElement=new Element("name");
  nameElement.addContent(name);
  classElement.addContent(nameElement);
  Element displayName=new Element("display_name");
  displayName.addContent(RefUtil.getQualifiedName(refClass));
  classElement.addContent(displayName);
  parentNode.addContent(classElement);
  RefClass topClass=RefUtil.getTopLevelClass(refClass);
  if (topClass != refClass) {
    appendClass(topClass,classElement);
  }
}
