{
  if (block == null)   return 0;
  final BlockWrapper info=getBlockInfo(block);
  if (info.getWhiteSpace().containsLineFeeds()) {
    final Indent indent=getBlockInfo(block).getChildIndent();
    final int offsetBeforeBlock=getOffsetBefore(info);
    return offsetBeforeBlock + getIndent(indent);
  }
  return calculateIndentUnder(block.getParent());
}
