{
  final SpaceProperty spaceProperty=wrapper.getSpaceProperty();
  final WhiteSpace whiteSpace=wrapper.getWhiteSpace();
  whiteSpace.arrangeLineFeeds(spaceProperty);
  if (processWrap(wrapper)) {
    return;
  }
  if (whiteSpace.containsLineFeeds()) {
    onCurrentLineChanged();
  }
  final Block block=wrapper.getBlock();
  if (whiteSpace.containsLineFeeds()) {
    adjustLineIndent(wrapper);
  }
 else {
    whiteSpace.arrangeSpaces(spaceProperty);
  }
  setAlignOffset(wrapper.getAlignment(),getOffsetBefore(block));
  if (wrapper.containsLineFeeds()) {
    onCurrentLineChanged();
  }
  myCurrentBlock=myCurrentBlock.getNextBlock();
}
