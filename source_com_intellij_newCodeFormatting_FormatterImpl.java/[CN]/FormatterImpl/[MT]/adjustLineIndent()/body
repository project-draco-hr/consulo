{
  int alignOffset=getAlignOffset(myCurrentBlock.getAlignment());
  if (alignOffset == -1) {
    final Block block=myCurrentBlock.getBlock();
    Block current=getParentWithTheSameOffset(block);
    final Block candidate=getNearestIndentedParent(block.getParent(),current);
    final int indent=calculateIndentUnder(candidate);
    myCurrentBlock.getWhiteSpace().setSpaces(indent);
  }
 else {
    myCurrentBlock.getWhiteSpace().setSpaces(alignOffset);
  }
}
