{
  PsiManager manager=PsiManager.getInstance(project);
  PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
  statements=SurroundWithUtil.moveDeclarationsOut(container,statements,false);
  if (statements.length == 0) {
    return null;
  }
  @NonNls String text="synchronized(a){\n}";
  PsiSynchronizedStatement synchronizedStatement=(PsiSynchronizedStatement)factory.createStatementFromText(text,null);
  synchronizedStatement=(PsiSynchronizedStatement)codeStyleManager.reformat(synchronizedStatement);
  synchronizedStatement=(PsiSynchronizedStatement)container.addAfter(synchronizedStatement,statements[statements.length - 1]);
  PsiCodeBlock synchronizedBlock=synchronizedStatement.getBody();
  if (synchronizedBlock == null) {
    return null;
  }
  SurroundWithUtil.indentCommentIfNecessary(synchronizedBlock,statements);
  synchronizedBlock.addRange(statements[0],statements[statements.length - 1]);
  container.deleteChildRange(statements[0],statements[statements.length - 1]);
  synchronizedStatement=CodeInsightUtilBase.forcePsiPostprocessAndRestoreElement(synchronizedStatement);
  PsiExpression lockExpression=synchronizedStatement.getLockExpression();
  if (lockExpression == null) {
    return null;
  }
  TextRange range=lockExpression.getTextRange();
  editor.getDocument().deleteString(range.getStartOffset(),range.getEndOffset());
  return new TextRange(range.getStartOffset(),range.getStartOffset());
}
