{
  final Collection<VirtualFile> oldFiles;
synchronized (myMappings) {
    oldFiles=new ArrayList<VirtualFile>(myMappings.keySet());
    myMappings.clear();
    myMappings.putAll(mappings);
    cleanup();
  }
  handleMappingChange(mappings.keySet(),oldFiles,true);
}
