{
  if (type == TokenType.WHITE_SPACE) {
    return new PsiWhiteSpaceImpl(text);
  }
  if (type instanceof IChameleonElementType) {
    return new ChameleonElement(type,text);
  }
  if (type instanceof ILeafElementType) {
    return (LeafElement)((ILeafElementType)type).createLeafNode(text);
  }
  final Language lang=type.getLanguage();
  final ASTFactory factory=LanguageASTFactory.INSTANCE.forLanguage(lang);
  final LeafElement customLeaf=factory.createLeaf(type,text);
  return customLeaf != null ? customLeaf : DEFAULT.createLeaf(type,text);
}
