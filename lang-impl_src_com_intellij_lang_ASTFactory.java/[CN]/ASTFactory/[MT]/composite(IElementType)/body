{
  if (type instanceof ICompositeElementType) {
    return (CompositeElement)((ICompositeElementType)type).createCompositeNode();
  }
  if (type == TokenType.CODE_FRAGMENT) {
    return new CodeFragmentElement();
  }
  final ASTFactory factory=LanguageASTFactory.INSTANCE.forLanguage(type.getLanguage());
  final CompositeElement customComposite=factory.createComposite(type);
  return customComposite != null ? customComposite : DEFAULT.createComposite(type);
}
