{
  if (type == TokenType.WHITE_SPACE) {
    return new PsiWhiteSpaceImpl(fileText,start,end,table);
  }
  if (type instanceof IChameleonElementType) {
    return new ChameleonElement(type,fileText,start,end,table);
  }
  if (type instanceof ILeafElementType) {
    return (LeafElement)((ILeafElementType)type).createLeafNode(fileText,start,end,table);
  }
  final Language lang=type.getLanguage();
  final ASTFactory factory=LanguageASTFactory.INSTANCE.forLanguage(lang);
  final LeafElement customLeaf=factory.createLeaf(type,fileText,start,end,table);
  return customLeaf != null ? customLeaf : DEFAULT.createLeaf(type,fileText,start,end,table);
}
