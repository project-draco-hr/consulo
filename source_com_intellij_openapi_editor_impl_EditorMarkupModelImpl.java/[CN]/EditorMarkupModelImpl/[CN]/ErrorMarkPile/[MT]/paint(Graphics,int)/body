{
  int y=yStart;
  for (int i=0; i < markers.size(); i++) {
    RangeHighlighter mark=markers.get(i);
    int yEndPosition=i == markers.size() - 1 ? yEnd : paintingEndOffsets.get(i);
    final int height=yEndPosition - y;
    final Color color=mark.getErrorStripeMarkColor();
    g.setColor(color);
    int x=1;
    int paintWidth=width;
    if (mark.isThinErrorStripeMark()) {
      paintWidth/=2;
      x+=paintWidth / 2;
    }
    g.fillRect(x,y,paintWidth - 1,height);
    Color brighter=color.brighter();
    Color darker=color.darker();
    g.setColor(brighter);
    g.drawLine(x,y,x,y + height);
    if (i == 0 || markers.get(i - 1).isThinErrorStripeMark() != mark.isThinErrorStripeMark()) {
      g.drawLine(x + 1,y,x + paintWidth - 1,y);
    }
    g.setColor(darker);
    if (i == markers.size() - 1 || markers.get(i + 1).isThinErrorStripeMark() != mark.isThinErrorStripeMark()) {
      g.drawLine(x + 1,y + height,x + paintWidth,y + height);
    }
    g.drawLine(x + paintWidth,y,x + paintWidth,y + height - 1);
    y=yEndPosition;
  }
}
