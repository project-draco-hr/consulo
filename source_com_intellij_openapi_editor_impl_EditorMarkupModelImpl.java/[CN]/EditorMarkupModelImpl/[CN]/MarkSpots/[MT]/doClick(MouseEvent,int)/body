{
  recalcMarkSpots();
  RangeHighlighter marker=getNearestRangeHighlighter(e,width);
  if (marker == null)   return;
  int offset=marker.getStartOffset();
  final Document doc=myEditor.getDocument();
  if (doc.getLineCount() > 0) {
    int lineEnd=doc.getLineEndOffset(doc.getLineNumber(offset));
    myEditor.getCaretModel().moveToOffset(lineEnd);
  }
  myEditor.getCaretModel().moveToOffset(offset);
  myEditor.getSelectionModel().removeSelection();
  ScrollingModel scrollingModel=myEditor.getScrollingModel();
  scrollingModel.disableAnimation();
  scrollingModel.scrollToCaret(ScrollType.CENTER);
  scrollingModel.enableAnimation();
  fireErrorMarkerClicked(marker,e);
}
