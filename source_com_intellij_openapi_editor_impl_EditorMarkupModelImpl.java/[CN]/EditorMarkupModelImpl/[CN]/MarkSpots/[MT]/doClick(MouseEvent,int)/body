{
  MarkSpot nearestSpot=null;
  for (int i=0; i < mySpots.size(); i++) {
    MarkSpot markSpot=mySpots.get(i);
    if (markSpot.near(e,width)) {
      if (nearestSpot == null || Math.abs(nearestSpot.yStart - e.getY()) > Math.abs(markSpot.yStart - e.getY())) {
        nearestSpot=markSpot;
      }
    }
 else {
      if (nearestSpot != null)       break;
    }
  }
  if (nearestSpot == null)   return;
  RangeHighlighter marker=nearestSpot.highlighter;
  int offset=marker.getStartOffset();
  final Document doc=myEditor.getDocument();
  if (doc.getLineCount() > 0) {
    int lineEnd=doc.getLineEndOffset(doc.getLineNumber(offset));
    myEditor.getCaretModel().moveToOffset(lineEnd);
  }
  myEditor.getCaretModel().moveToOffset(offset);
  myEditor.getSelectionModel().removeSelection();
  ScrollingModel scrollingModel=myEditor.getScrollingModel();
  scrollingModel.disableAnimation();
  scrollingModel.scrollToCaret(ScrollType.CENTER);
  scrollingModel.enableAnimation();
  fireErrorMarkerClicked(marker,e);
}
