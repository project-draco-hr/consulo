{
  if (myCachedSortedHighlighters == null) {
    myCachedSortedHighlighters=new ArrayList<RangeHighlighter>();
    RangeHighlighter[] highlighters=getAllHighlighters();
    for (int i=0; i < highlighters.length; i++) {
      if (highlighters[i].getErrorStripeMarkColor() != null) {
        myCachedSortedHighlighters.add(highlighters[i]);
      }
    }
    final MarkupModel docMarkup=getDocument().getMarkupModel(myEditor.myProject);
    if (docMarkup != null) {
      highlighters=docMarkup.getAllHighlighters();
      for (int i=0; i < highlighters.length; i++) {
        if (highlighters[i].getErrorStripeMarkColor() != null) {
          myCachedSortedHighlighters.add(highlighters[i]);
        }
      }
    }
    if (myCachedSortedHighlighters.size() != 0) {
      Collections.sort(myCachedSortedHighlighters,new Comparator(){
        public int compare(        Object o1,        Object o2){
          RangeHighlighter h1=(RangeHighlighter)o1;
          RangeHighlighter h2=(RangeHighlighter)o2;
          return h1.getStartOffset() - h2.getEndOffset();
        }
      }
);
    }
  }
  return myCachedSortedHighlighters;
}
