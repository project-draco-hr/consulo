{
  if (myCachedSortedHighlighters == null) {
    myCachedSortedHighlighters=new ArrayList<RangeHighlighter>();
    RangeHighlighter[] highlighters=getAllHighlighters();
    for (    RangeHighlighter highlighter : highlighters) {
      if (highlighter.getErrorStripeMarkColor() != null) {
        myCachedSortedHighlighters.add(highlighter);
      }
    }
    final MarkupModel docMarkup=getDocument().getMarkupModel(myEditor.myProject);
    if (docMarkup != null) {
      highlighters=docMarkup.getAllHighlighters();
      for (      RangeHighlighter highlighter : highlighters) {
        if (highlighter.getErrorStripeMarkColor() != null) {
          myCachedSortedHighlighters.add(highlighter);
        }
      }
    }
    if (myCachedSortedHighlighters.size() != 0) {
      Collections.sort(myCachedSortedHighlighters,new Comparator<RangeHighlighter>(){
        public int compare(        final RangeHighlighter h1,        final RangeHighlighter h2){
          return h1.getStartOffset() - h2.getStartOffset();
        }
      }
);
    }
  }
  return myCachedSortedHighlighters;
}
