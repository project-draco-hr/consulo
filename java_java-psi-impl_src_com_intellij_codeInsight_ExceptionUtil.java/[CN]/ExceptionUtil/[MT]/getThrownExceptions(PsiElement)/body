{
  if (element instanceof PsiClass) {
    if (element instanceof PsiAnonymousClass) {
      final PsiExpressionList argumentList=((PsiAnonymousClass)element).getArgumentList();
      if (argumentList != null) {
        return getThrownExceptions(argumentList);
      }
    }
    return Collections.emptyList();
  }
 else   if (element instanceof PsiMethodCallExpression) {
    PsiReferenceExpression methodRef=((PsiMethodCallExpression)element).getMethodExpression();
    JavaResolveResult result=methodRef.advancedResolve(false);
    return getExceptionsByMethodAndChildren(element,result);
  }
 else   if (element instanceof PsiNewExpression) {
    JavaResolveResult result=((PsiNewExpression)element).resolveMethodGenerics();
    return getExceptionsByMethodAndChildren(element,result);
  }
 else   if (element instanceof PsiThrowStatement) {
    final PsiExpression expr=((PsiThrowStatement)element).getException();
    if (expr == null)     return Collections.emptyList();
    final List<PsiType> types=getPreciseThrowTypes(expr);
    final List<PsiClassType> classTypes=ContainerUtil.mapNotNull(types,new NullableFunction<PsiType,PsiClassType>(){
      @Override public PsiClassType fun(      PsiType type){
        return type instanceof PsiClassType ? (PsiClassType)type : null;
      }
    }
);
    addExceptions(classTypes,getThrownExceptions(expr));
    return classTypes;
  }
 else   if (element instanceof PsiTryStatement) {
    PsiTryStatement tryStatement=(PsiTryStatement)element;
    final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
    List<PsiClassType> array=new ArrayList<PsiClassType>();
    if (tryBlock != null) {
      List<PsiClassType> exceptions=getThrownExceptions(tryBlock);
      array.addAll(exceptions);
    }
    PsiParameter[] parameters=tryStatement.getCatchBlockParameters();
    for (    PsiParameter parameter : parameters) {
      PsiType exception=parameter.getType();
      for (int j=array.size() - 1; j >= 0; j--) {
        PsiClassType exception1=array.get(j);
        if (exception.isAssignableFrom(exception1)) {
          array.remove(exception1);
        }
      }
    }
    PsiCodeBlock[] catchBlocks=tryStatement.getCatchBlocks();
    for (    PsiCodeBlock catchBlock : catchBlocks) {
      addExceptions(array,getThrownExceptions(catchBlock));
    }
    PsiCodeBlock finallyBlock=tryStatement.getFinallyBlock();
    if (finallyBlock != null) {
      try {
        ControlFlow flow=ControlFlowFactory.getInstance(finallyBlock.getProject()).getControlFlow(finallyBlock,LocalsOrMyInstanceFieldsControlFlowPolicy.getInstance(),false);
        int completionReasons=ControlFlowUtil.getCompletionReasons(flow,0,flow.getSize());
        List<PsiClassType> thrownExceptions=getThrownExceptions(finallyBlock);
        if ((completionReasons & ControlFlowUtil.NORMAL_COMPLETION_REASON) == 0) {
          array=new ArrayList<PsiClassType>(thrownExceptions);
        }
 else {
          addExceptions(array,thrownExceptions);
        }
      }
 catch (      AnalysisCanceledException e) {
      }
    }
    return array;
  }
  return getThrownExceptions(element.getChildren());
}
