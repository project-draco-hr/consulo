{
  if (timed) {
    final Semaphore semaphore=new Semaphore();
    semaphore.down();
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        semaphore.up();
      }
    }
);
    if (!semaphore.waitFor(1000)) {
      return;
    }
  }
  try {
    SwingUtilities.invokeAndWait(runnable);
  }
 catch (  Exception e) {
    LOG.error(e);
  }
}
