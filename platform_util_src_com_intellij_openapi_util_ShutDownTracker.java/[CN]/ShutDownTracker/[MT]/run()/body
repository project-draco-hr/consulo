{
  myIsShutdownHookRunning=true;
  ensureStopperThreadsFinished();
  for (Runnable task=removeLast(myShutdownTasks); task != null; task=removeLast(myShutdownTasks)) {
    try {
      task.run();
    }
 catch (    Throwable e) {
      LOG.error(e);
    }
  }
  for (Thread thread=removeLast(myShutdownThreads); thread != null; thread=removeLast(myShutdownThreads)) {
    thread.start();
    try {
      thread.join();
    }
 catch (    InterruptedException ignored) {
    }
  }
}
