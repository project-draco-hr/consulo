{
  if (!(element instanceof PsiBinaryExpression)) {
    return element instanceof PsiInstanceOfExpression && element.getParent() instanceof PsiBinaryExpression;
  }
  final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)element;
  final IElementType tokenType=binaryExpression.getOperationTokenType();
  final PsiElement parent=element.getParent();
  if (parent instanceof PsiExpression) {
    final PsiExpression expression=(PsiExpression)parent;
    if (needsParentheses(expression,tokenType)) {
      return true;
    }
  }
  final PsiExpression lhs=binaryExpression.getLOperand();
  if (needsParentheses(lhs,tokenType)) {
    return true;
  }
  final PsiExpression rhs=binaryExpression.getROperand();
  return needsParentheses(rhs,tokenType);
}
