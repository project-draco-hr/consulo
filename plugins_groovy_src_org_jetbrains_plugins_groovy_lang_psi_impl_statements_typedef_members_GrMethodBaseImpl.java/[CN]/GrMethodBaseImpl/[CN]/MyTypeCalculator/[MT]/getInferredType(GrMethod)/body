{
  final GrOpenBlock block=method.getBlock();
  if (block == null)   return null;
  if (GroovyPsiManager.getInstance(method.getProject()).isTypeBeingInferred(method)) {
    return null;
  }
  return GroovyPsiManager.getInstance(method.getProject()).inferType(method,new MethodTypeInferencer(block));
}
