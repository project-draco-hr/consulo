{
  for (  String each : modules) {
    ModifiableRootModel model=ModuleRootManager.getInstance(getModule(each)).getModifiableModel();
    model.setSdk(JavaSdkImpl.getMockJdk15("java 1.5"));
    model.commit();
  }
  List<VirtualFile> roots=Arrays.asList(ProjectRootManager.getInstance(myProject).getContentSourceRoots());
  TranslatingCompilerFilesMonitor.getInstance().scanSourceContent(myProject,roots,roots.size());
  CompilerManager.getInstance(myProject).make(new CompileStatusNotification(){
    public void finished(    boolean aborted,    int errors,    int warnings,    CompileContext compileContext){
      assertFalse(aborted);
      assertEquals(0,errors);
      assertEquals(0,warnings);
    }
  }
);
}
