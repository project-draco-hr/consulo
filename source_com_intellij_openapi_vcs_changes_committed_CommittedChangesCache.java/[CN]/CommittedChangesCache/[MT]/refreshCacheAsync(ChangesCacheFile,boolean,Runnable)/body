{
  try {
    if (!initIfEmpty && cache.isEmpty()) {
      return;
    }
  }
 catch (  IOException e) {
    LOG.error(e);
    return;
  }
  final Task.Backgroundable task=new Task.Backgroundable(myProject,"Refreshing VCS history"){
    private boolean hasNewChanges=false;
    public void run(    final ProgressIndicator indicator){
      try {
        final List<CommittedChangeList> list;
        if (initIfEmpty && cache.isEmpty()) {
          list=initCache(cache);
        }
 else {
          list=refreshCache(cache);
        }
        hasNewChanges=(list.size() > 0);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
    public void onSuccess(){
      if (postRunnable != null && hasNewChanges) {
        postRunnable.run();
      }
    }
  }
;
  myTaskQueue.run(task);
}
