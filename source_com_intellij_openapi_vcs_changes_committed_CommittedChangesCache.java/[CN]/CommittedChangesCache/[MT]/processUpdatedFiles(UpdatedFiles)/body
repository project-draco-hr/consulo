{
  final Collection<ChangesCacheFile> caches=getAllCaches();
  for (  final ChangesCacheFile cache : caches) {
    myPendingUpdateCount++;
    final Task.Backgroundable task=new Task.Backgroundable(myProject,"Processing updated files"){
      public void run(      final ProgressIndicator indicator){
        try {
          boolean needRefresh=cache.processUpdatedFiles(updatedFiles);
          if (needRefresh) {
            processUpdatedFilesAfterRefresh(cache,updatedFiles);
          }
 else {
            myPendingUpdateCount--;
            if (myPendingUpdateCount == 0) {
              notifyIncomingChangesUpdated();
            }
          }
        }
 catch (        IOException e) {
          LOG.error(e);
          return;
        }
      }
    }
;
    myTaskQueue.run(task);
  }
}
