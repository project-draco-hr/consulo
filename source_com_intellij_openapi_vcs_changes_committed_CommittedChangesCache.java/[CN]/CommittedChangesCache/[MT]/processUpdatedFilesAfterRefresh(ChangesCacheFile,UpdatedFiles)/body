{
  refreshCacheAsync(cache,false,new Consumer<List<CommittedChangeList>>(){
    public void consume(    final List<CommittedChangeList> committedChangeLists){
      try {
        LOG.info("Processing updated files after refresh in " + cache.getLocation());
        boolean result=true;
        if (committedChangeLists.size() > 0) {
          result=cache.processUpdatedFiles(updatedFiles);
        }
        LOG.info(result ? "Still have unaccounted files" : "No more unaccounted files");
        if (result) {
          cache.refreshIncomingChanges();
        }
        myPendingUpdateCount--;
        if (myPendingUpdateCount == 0) {
          notifyIncomingChangesUpdated();
        }
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
);
}
