{
  List<Module> modules=new ArrayList<Module>(Arrays.asList(getAllModules()));
  Iterator<Module> iterator=modules.iterator();
  Set<String> disabled=getDisabledModules();
  while (iterator.hasNext()) {
    Module module=iterator.next();
    if (disabled.contains(module.getName())) {
      iterator.remove();
    }
  }
  return modules;
}
