{
  List content=e.getContent();
  for (int i=0, contentSize=content.size(); i < contentSize; i++) {
    Object child=content.get(i);
    if (child instanceof Element) {
      Element element=(Element)child;
      substitute(element,caseSensitive,recursively,filter,recursiveFilter);
    }
 else     if (child instanceof Text) {
      Text t=(Text)child;
      if (filter == null || filter.fun(t)) {
        t.setText((recursively || (recursiveFilter != null && recursiveFilter.fun(t))) ? substituteRecursively(t.getText(),caseSensitive) : substitute(t.getText(),caseSensitive));
      }
    }
 else     if (!(child instanceof Comment)) {
      LOG.error("Wrong content: " + child.getClass());
    }
  }
  List attributes=e.getAttributes();
  for (int i=0, attributesSize=attributes.size(); i < attributesSize; i++) {
    Object attribute1=attributes.get(i);
    Attribute attribute=(Attribute)attribute1;
    if (filter == null || filter.fun(attribute)) {
      final String value=(recursively || (recursiveFilter != null && recursiveFilter.fun(attribute))) ? substituteRecursively(attribute.getValue(),caseSensitive) : substitute(attribute.getValue(),caseSensitive);
      attribute.setValue(value);
    }
  }
}
