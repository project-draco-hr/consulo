{
  String fullText=action.getProjectPath();
  if (fullText == null || fullText.length() == 0)   return " ";
  fullText=FileUtil.getLocationRelativeToUserHome(fullText,false);
  try {
    FontMetrics fm=pathLabel.getFontMetrics(pathLabel.getFont());
    int maxWidth=RecentProjectPanel.this.getWidth() - leftOffset;
    if (maxWidth > 0 && fm.stringWidth(fullText) > maxWidth) {
      int left=1;
      int right=1;
      int center=fullText.length() / 2;
      String s=fullText.substring(0,center - left) + "..." + fullText.substring(center + right);
      while (fm.stringWidth(s) > maxWidth) {
        if (left == right) {
          left++;
        }
 else {
          right++;
        }
        if (center - left < 0 || center + right >= fullText.length()) {
          return "";
        }
        s=fullText.substring(0,center - left) + "..." + fullText.substring(center + right);
      }
      return s;
    }
  }
 catch (  Exception e) {
    LOG.error("Path label font: " + pathLabel.getFont());
    LOG.error("Panel width: " + RecentProjectPanel.this.getWidth());
    LOG.error(e);
  }
  return fullText;
}
