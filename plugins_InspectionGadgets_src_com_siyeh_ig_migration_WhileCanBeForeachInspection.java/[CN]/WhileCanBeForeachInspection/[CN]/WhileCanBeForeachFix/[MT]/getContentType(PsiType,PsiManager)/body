{
  if (!(type instanceof PsiClassType)) {
    return null;
  }
  final PsiClassType classType=(PsiClassType)type;
  final PsiType[] parameters=classType.getParameters();
  if (parameters.length == 1) {
    final PsiType parameterType=parameters[0];
    if (parameterType instanceof PsiCapturedWildcardType) {
      final PsiCapturedWildcardType wildcardType=(PsiCapturedWildcardType)parameterType;
      final PsiType bound=wildcardType.getUpperBound();
      if (bound != null) {
        return bound;
      }
    }
 else     if (parameterType != null) {
      return parameterType;
    }
  }
  final GlobalSearchScope scope=type.getResolveScope();
  return PsiType.getJavaLangObject(manager,scope);
}
