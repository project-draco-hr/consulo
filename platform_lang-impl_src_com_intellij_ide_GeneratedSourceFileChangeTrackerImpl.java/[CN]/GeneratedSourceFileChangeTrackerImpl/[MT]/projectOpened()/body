{
  final Update check=new Update("check for changes in generated files"){
    @Override public void run(){
      checkFiles();
    }
  }
;
  EditorFactory.getInstance().getEventMulticaster().addDocumentListener(new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      VirtualFile file=myDocumentManager.getFile(e.getDocument());
      if (file != null) {
        myFilesToCheck.add(file);
        myCheckingQueue.queue(check);
      }
    }
  }
,myProject);
  MessageBusConnection connection=myProject.getMessageBus().connect();
  connection.subscribe(BackgroundTaskByVfsChangeManager.TOPIC,new BackgroundTaskByVfsChangeManager.ListenerAdapter(){
    @Override public void taskChanged(    @NotNull BackgroundTaskByVfsChangeTask task){
      Collections.addAll(myFilesToCheck,task.getGeneratedFiles());
      myCheckingQueue.queue(check);
    }
  }
);
  connection.subscribe(AppTopics.FILE_DOCUMENT_SYNC,new FileDocumentManagerAdapter(){
    @Override public void fileContentReloaded(    VirtualFile file,    @NotNull Document document){
      myFilesToCheck.remove(file);
      if (myEditedGeneratedFiles.remove(file)) {
        myEditorNotifications.updateNotifications(file);
      }
    }
  }
);
  myCheckingQueue.activate();
}
