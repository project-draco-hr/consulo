{
  final GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(context.project);
  final GrMethod method=factory.createMethodFromText("def doCall(){}",block);
  method.setReturnType(block.getReturnType());
  if (block.hasParametersSection()) {
    method.getParameterList().replace(block.getParameterList());
  }
 else {
    final GrParameter[] allParameters=block.getAllParameters();
    LOG.assertTrue(allParameters.length == 1);
    final GrParameter itParameter=allParameters[0];
    final GrParameter parameter=factory.createParameter("it",itParameter.getType().getCanonicalText(),"null",block);
    method.getParameterList().add(parameter);
  }
  ((GroovyFileImpl)method.getContainingFile()).setContextNullable(null);
  return method;
}
