{
  if (initialFile == null) {
    initialFile=myContext.getModule().getModuleFile();
  }
  if (initialFile == null) {
    String p=new File(myContext.getModule().getModuleFilePath()).getParent();
    initialFile=LocalFileSystem.getInstance().findFileByPath(FileUtil.toSystemIndependentName(p));
  }
  return FileChooser.chooseFiles(myContentPanel,new FileChooserDescriptor(chooseManifest,!chooseManifest,false,false,false,chooseMultiple){
    @Override public boolean isFileVisible(    VirtualFile file,    boolean showHiddenFiles){
      if (!super.isFileVisible(file,showHiddenFiles)) {
        return false;
      }
      return file.isDirectory() || !chooseManifest || SdkConstants.FN_ANDROID_MANIFEST_XML.equals(file.getName());
    }
    @Override public void validateSelectedFiles(    VirtualFile[] files) throws Exception {
      for (      VirtualFile file : files) {
        if (!isUnderModuleDir(file)) {
          throw new Exception(AndroidBundle.message("file.must.be.under.module.error",file.getPath()));
        }
      }
    }
  }
,initialFile);
}
