{
  if (initialFile == null) {
    initialFile=myContext.getModule().getModuleFile();
  }
  if (initialFile == null) {
    String p=AndroidRootUtil.getModuleDirPath(myContext.getModule());
    if (p != null) {
      initialFile=LocalFileSystem.getInstance().findFileByPath(p);
    }
  }
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(chooseFile,!chooseFile,false,false,false,chooseMultiple){
    @Override public boolean isFileVisible(    VirtualFile file,    boolean showHiddenFiles){
      if (!super.isFileVisible(file,showHiddenFiles)) {
        return false;
      }
      if (!file.isDirectory() && !chooseFile) {
        return false;
      }
      return filter == null || filter.value(file);
    }
  }
;
  return FileChooser.chooseFiles(descriptor,myContentPanel,myContext.getProject(),initialFile);
}
