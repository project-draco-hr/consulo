def active(func):

    def _active(self, *args, **kwds):
        if (self.count == 0):
            raise error.Abort(_('cannot use transaction when it is already committed/aborted'))
        return func(self, *args, **kwds)
    return _active
