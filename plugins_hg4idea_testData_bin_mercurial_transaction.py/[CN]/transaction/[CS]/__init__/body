def __init__(self, report, opener, journal, after=None, createmode=None):
    self.count = 1
    self.report = report
    self.opener = opener
    self.after = after
    self.entries = []
    self.map = {}
    self.journal = journal
    self._queue = []
    self.file = open(self.journal, 'w')
    if (createmode is not None):
        os.chmod(self.journal, (createmode & 438))
