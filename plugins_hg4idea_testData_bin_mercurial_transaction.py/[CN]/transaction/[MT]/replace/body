@active
def replace(self, file, offset, data=None):
    '\n        replace can only replace already committed entries\n        that are not pending in the queue\n        '
    if (file not in self.map):
        raise KeyError(file)
    index = self.map[file]
    self.entries[index] = (file, offset, data)
    self.file.write(('%s\x00%d\n' % (file, offset)))
    self.file.flush()
