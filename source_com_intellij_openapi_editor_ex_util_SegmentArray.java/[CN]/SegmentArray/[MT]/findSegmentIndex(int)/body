{
  if (mySegmentCount <= 0) {
    if (offset == 0)     return 0;
    throw new IllegalStateException("no segments avaliable");
  }
  if (offset > myEnds[mySegmentCount - 1] || offset < 0) {
    throw new IndexOutOfBoundsException("Wrong offset: " + offset);
  }
  if (offset == myEnds[mySegmentCount - 1])   return mySegmentCount - 1;
  int start=0;
  int end=mySegmentCount - 1;
  while (start < end) {
    int i=(start + end) / 2;
    if (offset < myStarts[i]) {
      end=i - 1;
    }
 else     if (offset >= myEnds[i]) {
      start=i + 1;
    }
 else {
      return i;
    }
  }
  assert(offset >= myStarts[start] && offset < myEnds[start]);
  return start;
}
