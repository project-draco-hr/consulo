{
  myProject=project;
  myCache=ContainerUtil.findInstance(project.getExtensions(PsiShortNamesCache.EP_NAME),GroovyShortNamesCache.class);
  ((PsiManagerEx)PsiManager.getInstance(myProject)).registerRunnableToRunOnAnyChange(new Runnable(){
    public void run(){
      dropTypesCache();
    }
  }
);
  ((PsiManagerEx)PsiManager.getInstance(myProject)).registerRunnableToRunOnChange(new Runnable(){
    public void run(){
      myClassCache.clear();
    }
  }
);
  myTypeInferenceHelper=new TypeInferenceHelper(myProject);
  myProject.getMessageBus().connect().subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootListener(){
    public void beforeRootsChange(    ModuleRootEvent event){
    }
    public void rootsChanged(    ModuleRootEvent event){
      dropTypesCache();
      myClassCache.clear();
    }
  }
);
}
