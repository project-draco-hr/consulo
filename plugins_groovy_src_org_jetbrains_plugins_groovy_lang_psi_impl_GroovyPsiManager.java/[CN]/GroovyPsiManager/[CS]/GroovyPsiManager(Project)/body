{
  myProject=project;
  ((PsiManagerEx)PsiManager.getInstance(myProject)).registerRunnableToRunOnAnyChange(new Runnable(){
    public void run(){
      dropTypesCache();
    }
  }
);
  ((PsiManagerEx)PsiManager.getInstance(myProject)).registerRunnableToRunOnChange(new Runnable(){
    public void run(){
      myClassCache.clear();
    }
  }
);
  final MessageBusConnection connection=myProject.getMessageBus().connect();
  connection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    public void rootsChanged(    ModuleRootEvent event){
      dropTypesCache();
      myClassCache.clear();
    }
  }
);
  connection.subscribe(PowerSaveMode.TOPIC,new PowerSaveMode.Listener(){
    @Override public void powerSaveStateChanged(){
      EditorOptionsPanel.reinitAllEditors();
    }
  }
);
}
