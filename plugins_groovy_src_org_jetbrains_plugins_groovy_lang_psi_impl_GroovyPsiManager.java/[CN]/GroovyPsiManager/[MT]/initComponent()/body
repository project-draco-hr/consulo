{
  myUpdateRunnable=new Runnable(){
    public void run(){
      buildGDK();
    }
  }
;
  StartupManager.getInstance(myProject).registerStartupActivity(myUpdateRunnable);
  ((PsiManagerEx)PsiManager.getInstance(myProject)).registerRunnableToRunOnAnyChange(new Runnable(){
    public void run(){
      myCalculatedTypes.clear();
    }
  }
);
  myRootConnection=myProject.getMessageBus().connect();
  ModuleRootListener moduleRootListener=new ModuleRootListener(){
    public void beforeRootsChange(    ModuleRootEvent event){
    }
    public void rootsChanged(    ModuleRootEvent event){
      final Application application=ApplicationManager.getApplication();
      if (!application.isUnitTestMode()) {
        if (myProject.isInitialized()) {
          application.invokeLater(myUpdateRunnable);
        }
      }
    }
  }
;
  myRootConnection.subscribe(ProjectTopics.PROJECT_ROOTS,moduleRootListener);
}
