{
  final Ref<PackageDependenciesNode> parent=Ref.create();
  VfsUtilCore.visitChildrenRecursively(file,new VirtualFileVisitor(){
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      if (file.isDirectory()) {
        parent.set(null);
      }
 else {
        parent.set(buildFileNode(file,parent.get()));
      }
      return true;
    }
    @Override public void afterChildrenVisited(    @NotNull VirtualFile file){
      if (file.isDirectory()) {
        parent.set(null);
      }
    }
  }
);
}
