{
  super(new BorderLayout());
  myFilter=new TextFieldWithStoredHistory(propertyName);
  myFilter.getTextEditor().addKeyListener(new KeyAdapter(){
    public void keyPressed(    final KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_ENTER) {
        e.consume();
        myFilter.addCurrentTextToHistory();
        filter();
      }
      if (e.getKeyCode() == KeyEvent.VK_ESCAPE && getFilter().length() > 0) {
        myFilter.setText("");
        e.consume();
      }
    }
  }
);
  myFilter.addDocumentListener(new DocumentListener(){
    public void insertUpdate(    DocumentEvent e){
      onChange();
    }
    public void removeUpdate(    DocumentEvent e){
      onChange();
    }
    public void changedUpdate(    DocumentEvent e){
      onChange();
    }
    public void onChange(){
      myUpdateAlarm.cancelAllRequests();
      myUpdateAlarm.addRequest(new Runnable(){
        public void run(){
          onlineFilter();
        }
      }
,100,ModalityState.stateForComponent(myFilter));
    }
  }
);
  myFilter.setHistorySize(historySize);
  add(myFilter,BorderLayout.CENTER);
  DefaultActionGroup group=new DefaultActionGroup();
  group.add(new AnAction(InspectionsBundle.message("inspection.tools.action.filter"),InspectionsBundle.message("inspection.tools.action.filter"),IconLoader.getIcon("/ant/filter.png")){
    public void actionPerformed(    AnActionEvent e){
      myFilter.addCurrentTextToHistory();
      filter();
    }
  }
);
}
