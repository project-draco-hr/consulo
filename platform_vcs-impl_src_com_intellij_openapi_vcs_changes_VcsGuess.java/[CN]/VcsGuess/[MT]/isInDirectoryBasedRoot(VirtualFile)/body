{
  if (file == null)   return false;
  final StorageScheme storageScheme=((ProjectEx)myProject).getStateStore().getStorageScheme();
  if (StorageScheme.DIRECTORY_BASED.equals(storageScheme)) {
    final VirtualFile ideaDir=myProject.getBaseDir().findChild(Project.DIRECTORY_STORE_FOLDER);
    return (ideaDir != null && ideaDir.isValid() && ideaDir.isDirectory() && VfsUtil.isAncestor(ideaDir,file,false));
  }
  return false;
}
