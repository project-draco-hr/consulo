{
  if (name.equals(MavenBuilderState.USE_INTERNAL_JAVA)) {
    return ProjectJdkTable.getInstance().getInternalJdk();
  }
  if (name.equals(MavenBuilderState.USE_JAVA_HOME)) {
    if (StringUtil.isEmptyOrSpaces(JAVA_HOME)) {
      throw new ExecutionException(MessageFormat.format(BuilderBundle.message("maven.java.home.undefined"),name));
    }
    final ProjectJdk jdk=JavaSdk.getInstance().createJdk("",JAVA_HOME);
    if (jdk == null) {
      throw new ExecutionException(MessageFormat.format(BuilderBundle.message("maven.java.home.invalid"),name));
    }
    return jdk;
  }
  for (  ProjectJdk projectJdk : ProjectJdkTable.getInstance().getAllJdks()) {
    if (projectJdk.getName().equals(name)) {
      return projectJdk;
    }
  }
  throw new ExecutionException(MessageFormat.format(BuilderBundle.message("maven.java.not.found"),name));
}
