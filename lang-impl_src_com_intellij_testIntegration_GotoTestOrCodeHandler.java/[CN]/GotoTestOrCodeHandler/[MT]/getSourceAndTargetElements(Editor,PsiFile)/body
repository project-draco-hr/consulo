{
  int offset=editor.getCaretModel().getOffset();
  PsiElement selectedElement=TargetElementUtilBase.getInstance().findTargetElement(editor,ImplementationSearcher.getFlags(),offset);
  Collection<PsiElement> candidates;
  if (TestFinderHelper.isTest(selectedElement)) {
    candidates=TestFinderHelper.findClassesForTest(selectedElement);
  }
 else {
    candidates=TestFinderHelper.findTestsForClass(selectedElement);
  }
  return new Pair<PsiElement,PsiElement[]>(selectedElement,candidates.toArray(new PsiElement[candidates.size()]));
}
