{
  PsiElement selectedElement=PsiUtilBase.getElementAtOffset(file,editor.getCaretModel().getOffset());
  Collection<PsiElement> candidates;
  if (TestFinderHelper.isTest(selectedElement)) {
    candidates=TestFinderHelper.findClassesForTest(selectedElement);
  }
 else {
    candidates=TestFinderHelper.findTestsForClass(selectedElement);
  }
  PsiElement sourceElement=TestFinderHelper.findSourceElement(selectedElement);
  return new Pair<PsiElement,PsiElement[]>(sourceElement,candidates.toArray(new PsiElement[candidates.size()]));
}
