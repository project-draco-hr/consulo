{
  final Project project=DataKeys.PROJECT.getData(dataContext);
  PsiFile file=DataKeys.PSI_FILE.getData(dataContext);
  if (project == null) {
    return false;
  }
  int carret=editor.getCaretModel().getOffset();
  if (carret == 0)   return false;
  PsiElement element=file.findElementAt(carret - 1);
  if (element != null && element.getNode().getElementType() != GspTokenTypesEx.JSCRIPT_BEGIN) {
    return false;
  }
  String text=editor.getDocument().getText();
  if (handleJspLikeScriptlet(editor,text,carret,dataContext)) {
    GspEditorActionUtil.insertSpacesByIndent(editor,project);
    return true;
  }
  return false;
}
