{
  final boolean copyExcluded=myInstructionsBuilder.getRootsIndex().isExcluded(directory);
  SourceFileFilter fileFilter=new SourceFileFilterImpl(filter,myInstructionsBuilder.getRootsIndex(),myInstructionsBuilder.getIgnoredFilePatterns(),copyExcluded);
  addDirectoryCopyInstructions(myInstructionsBuilder.createFileBasedRoot(directory,fileFilter));
}
