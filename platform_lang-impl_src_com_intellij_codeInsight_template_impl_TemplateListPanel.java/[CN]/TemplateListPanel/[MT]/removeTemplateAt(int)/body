{
  JTree tree=myTree;
  TreePath path=tree.getPathForRow(row);
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
  LOG.assertTrue(node.getUserObject() instanceof TemplateImpl);
  TemplateImpl template=(TemplateImpl)node.getUserObject();
  TemplateGroup templateGroup=getTemplateGroup(template.getGroupName());
  if (templateGroup != null) {
    templateGroup.removeElement(template);
  }
  DefaultMutableTreeNode parent=(DefaultMutableTreeNode)node.getParent();
  TreePath treePathToSelect=(parent.getChildAfter(node) != null || parent.getChildCount() == 1 ? tree.getPathForRow(row + 1) : tree.getPathForRow(row - 1));
  DefaultMutableTreeNode toSelect=treePathToSelect != null ? (DefaultMutableTreeNode)treePathToSelect.getLastPathComponent() : null;
  removeNodeFromParent(node);
  if (parent.getChildCount() == 0) {
    myTemplateGroups.remove((TemplateGroup)parent.getUserObject());
    removeNodeFromParent(parent);
  }
  if (toSelect != null) {
    setSelectedNode(toSelect);
  }
}
