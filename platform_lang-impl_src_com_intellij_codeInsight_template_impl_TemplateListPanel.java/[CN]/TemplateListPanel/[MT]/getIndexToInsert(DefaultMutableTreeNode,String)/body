{
  if (parent.getChildCount() == 0)   return 0;
  int res=0;
  for (DefaultMutableTreeNode child=(DefaultMutableTreeNode)parent.getFirstChild(); child != null; child=(DefaultMutableTreeNode)parent.getChildAfter(child)) {
    Object o=child.getUserObject();
    String key1=o instanceof TemplateImpl ? ((TemplateImpl)o).getKey() : ((TemplateGroup)o).getName();
    if (key1.compareToIgnoreCase(key) > 0)     return res;
    res++;
  }
  return res;
}
