{
  TreeNode toSelect=null;
  TreePath[] paths=myTree.getSelectionPaths();
  if (paths == null)   return;
  for (  TreePath path : paths) {
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    Object o=node.getUserObject();
    if (o instanceof TemplateGroup) {
      myTemplateGroups.remove(o);
      removeNodeFromParent(node);
    }
 else     if (o instanceof TemplateImpl) {
      TemplateImpl template=(TemplateImpl)o;
      TemplateGroup templateGroup=getTemplateGroup(template.getGroupName());
      if (templateGroup != null) {
        templateGroup.removeElement(template);
        DefaultMutableTreeNode parent=(DefaultMutableTreeNode)node.getParent();
        if (templateGroup.getElements().isEmpty()) {
          myTemplateGroups.remove(templateGroup);
          removeNodeFromParent(parent);
        }
 else {
          toSelect=parent.getChildAfter(node);
          removeNodeFromParent(node);
        }
      }
    }
  }
  if (toSelect instanceof DefaultMutableTreeNode) {
    setSelectedNode((DefaultMutableTreeNode)toSelect);
  }
}
