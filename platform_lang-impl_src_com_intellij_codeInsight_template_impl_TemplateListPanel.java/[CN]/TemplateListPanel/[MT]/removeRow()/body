{
  int selected=getSelectedIndex();
  TemplateKey templateKey=getTemplateKey(selected);
  if (templateKey != null) {
    removeTemplateAt(selected);
  }
 else {
    TemplateGroup group=getGroup(selected);
    if (group != null) {
      int result=Messages.showOkCancelDialog(this,CodeInsightBundle.message("template.delete.group.confirmation.text"),CodeInsightBundle.message("template.delete.confirmation.title"),Messages.getQuestionIcon());
      if (result != DialogWrapper.OK_EXIT_CODE)       return;
      myTemplateGroups.remove(group);
      removeNodeFromParent((DefaultMutableTreeNode)myTree.getPathForRow(selected).getLastPathComponent());
    }
  }
}
