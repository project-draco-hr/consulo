{
  final T data=prepareDataFromContext(e);
  final Presentation originalPresentation=e.getPresentation();
  if (!forceSyncUpdate(e) && this instanceof DumbAware) {
    final Presentation realPresentation=(Presentation)originalPresentation.clone();
    ourUpdaterService.submit(new Runnable(){
      public void run(){
        performUpdate(realPresentation,data);
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            if (originalPresentation.isVisible() != realPresentation.isVisible()) {
              LOG.error("Async update is not supported for actions that change their visibility." + "Either stop extending AsyncUpdateAction or override forceSyncUpdate() to return true." + "Action class is: "+ AsyncUpdateAction.this.getClass().getName());
            }
            originalPresentation.copyFrom(realPresentation);
          }
        }
);
      }
    }
);
    originalPresentation.setVisible(true);
    originalPresentation.setEnabled(false);
  }
 else {
    performUpdate(originalPresentation,data);
  }
}
