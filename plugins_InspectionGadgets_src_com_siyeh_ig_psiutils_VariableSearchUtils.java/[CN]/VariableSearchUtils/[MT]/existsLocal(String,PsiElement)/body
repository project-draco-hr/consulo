{
  PsiCodeBlock ancestor=PsiTreeUtil.getParentOfType(element,PsiCodeBlock.class);
  while (ancestor != null) {
    final PsiStatement[] statements=ancestor.getStatements();
    for (    final PsiStatement statement : statements) {
      if (statement instanceof PsiDeclarationStatement) {
        final PsiDeclarationStatement decl=(PsiDeclarationStatement)statement;
        final PsiElement[] elements=decl.getDeclaredElements();
        for (        PsiElement element1 : elements) {
          if (!(element1 instanceof PsiLocalVariable)) {
            continue;
          }
          final PsiLocalVariable localVar=(PsiLocalVariable)element1;
          final String localVarName=localVar.getName();
          if (localVarName.equals(varName)) {
            return true;
          }
        }
      }
    }
    ancestor=PsiTreeUtil.getParentOfType(ancestor,PsiCodeBlock.class);
  }
  return false;
}
