{
  PsiCodeBlock ancestor=(PsiCodeBlock)PsiTreeUtil.getParentOfType(element,PsiCodeBlock.class);
  while (ancestor != null) {
    final PsiStatement[] statements=ancestor.getStatements();
    for (int i=0; i < statements.length; i++) {
      final PsiStatement statement=statements[i];
      if (statement instanceof PsiDeclarationStatement) {
        final PsiDeclarationStatement decl=(PsiDeclarationStatement)statement;
        final PsiElement[] elements=decl.getDeclaredElements();
        for (int j=0; j < elements.length; j++) {
          if (!(elements[j] instanceof PsiLocalVariable)) {
            continue;
          }
          final PsiLocalVariable localVar=(PsiLocalVariable)elements[j];
          final String localVarName=localVar.getName();
          if (localVarName.equals(varName)) {
            return true;
          }
        }
      }
    }
    ancestor=(PsiCodeBlock)PsiTreeUtil.getParentOfType(ancestor,PsiCodeBlock.class);
  }
  return false;
}
