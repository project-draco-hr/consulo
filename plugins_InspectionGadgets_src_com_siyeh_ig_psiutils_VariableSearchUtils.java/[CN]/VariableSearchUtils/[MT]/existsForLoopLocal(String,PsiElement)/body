{
  PsiForStatement forLoopAncestor=(PsiForStatement)PsiTreeUtil.getParentOfType(element,PsiForStatement.class);
  while (forLoopAncestor != null) {
    final PsiStatement initialization=forLoopAncestor.getInitialization();
    if (initialization instanceof PsiDeclarationStatement) {
      final PsiDeclarationStatement decl=(PsiDeclarationStatement)initialization;
      final PsiElement[] elements=decl.getDeclaredElements();
      for (int j=0; j < elements.length; j++) {
        final PsiLocalVariable localVar=(PsiLocalVariable)elements[j];
        final String localVarName=localVar.getName();
        if (localVarName.equals(varName)) {
          return true;
        }
      }
    }
    forLoopAncestor=(PsiForStatement)PsiTreeUtil.getParentOfType(forLoopAncestor,PsiForStatement.class);
  }
  return false;
}
