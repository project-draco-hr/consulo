{
  PsiForStatement forLoopAncestor=PsiTreeUtil.getParentOfType(element,PsiForStatement.class);
  while (forLoopAncestor != null) {
    final PsiStatement initialization=forLoopAncestor.getInitialization();
    if (initialization instanceof PsiDeclarationStatement) {
      final PsiDeclarationStatement decl=(PsiDeclarationStatement)initialization;
      final PsiElement[] elements=decl.getDeclaredElements();
      for (      PsiElement element1 : elements) {
        final PsiLocalVariable localVar=(PsiLocalVariable)element1;
        final String localVarName=localVar.getName();
        if (localVarName.equals(varName)) {
          return true;
        }
      }
    }
    forLoopAncestor=PsiTreeUtil.getParentOfType(forLoopAncestor,PsiForStatement.class);
  }
  return false;
}
