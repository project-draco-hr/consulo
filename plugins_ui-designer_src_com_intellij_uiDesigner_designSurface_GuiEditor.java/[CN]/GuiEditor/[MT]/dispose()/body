{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myWhere != null) {
    LOG.error("Already disposed: old trace: ",myWhere);
    LOG.error("Already disposed: new trace: ");
  }
 else {
    myWhere=new Exception();
  }
  final PaletteManager paletteManager=PaletteManager.getInstance(getProject());
  paletteManager.removeKeyListener(myPaletteKeyListener);
  paletteManager.removeDragEventListener(myPaletteDragListener);
  paletteManager.removeSelectionListener(myPaletteSelectionListener);
  myDocument.removeDocumentListener(myDocumentListener);
  PsiManager.getInstance(getProject()).removePsiTreeChangeListener(myPsiTreeChangeListener);
  myPsiTreeChangeListener.dispose();
}
