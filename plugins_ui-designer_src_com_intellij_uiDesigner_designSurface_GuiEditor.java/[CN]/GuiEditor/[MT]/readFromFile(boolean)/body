{
  try {
    ComponentPtr[] selection=null;
    Map<String,String> tabbedPaneSelectedTabs=null;
    if (keepSelection) {
      selection=SelectionState.getSelection(this);
      tabbedPaneSelectedTabs=saveTabbedPaneSelectedTabs();
    }
    Locale oldLocale=null;
    if (myRootContainer != null) {
      oldLocale=myRootContainer.getStringDescriptorLocale();
    }
    final String text=myDocument.getText();
    final ClassLoader classLoader=LoaderFactory.getInstance(myModule.getProject()).getLoader(myFile);
    final LwRootContainer rootContainer=Utils.getRootContainer(text,new CompiledClassPropertiesProvider(classLoader));
    final RadRootContainer container=XmlReader.createRoot(myModule,rootContainer,classLoader,oldLocale);
    setRootContainer(container);
    if (keepSelection) {
      SelectionState.restoreSelection(this,selection);
      restoreTabbedPaneSelectedTabs(tabbedPaneSelectedTabs);
    }
    myInvalid=false;
    myCardLayout.show(this,CARD_VALID);
    refresh();
  }
 catch (  Exception exc) {
    Throwable original=exc;
    while (original instanceof InvocationTargetException) {
      original=original.getCause();
    }
    showInvalidCard(original);
  }
catch (  final LinkageError exc) {
    showInvalidCard(exc);
  }
}
