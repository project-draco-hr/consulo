{
  if (myTemplate == null) {
    return;
  }
  String fileName=null;
  Properties props=myAttrPanel.getProperties();
  if (!myTemplate.isJavaClassTemplate()) {
    fileName=myAttrPanel.getFileName();
    if (fileName.length() == 0) {
      Messages.showMessageDialog(myAttrComponent,IdeBundle.message("error.please.enter.a.file.name"),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      return;
    }
  }
  try {
    PsiElement[] element=new PsiElement[1];
    FileTemplateUtil.createFromTemplate(element,myTemplate,fileName,props,myProject,myDirectory);
    myCreatedElement=element[0];
    super.doOKAction();
  }
 catch (  Exception e) {
    showErrorMessage(myAttrComponent,myTemplate,e);
  }
}
