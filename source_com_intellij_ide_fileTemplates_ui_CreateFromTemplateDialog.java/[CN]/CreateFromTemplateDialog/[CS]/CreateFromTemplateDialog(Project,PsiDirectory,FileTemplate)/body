{
  super(project,true);
  myDirectory=directory;
  myProject=project;
  myTemplate=template;
  setTitle(IdeBundle.message("title.new.from.template",template.getName()));
  PsiPackage aPackage=myDirectory.getPackage();
  String packageName=aPackage == null ? "" : aPackage.getQualifiedName();
  myDefaultProperties=FileTemplateManager.getInstance().getDefaultProperties();
  myDefaultProperties.setProperty(FileTemplateUtil.PACKAGE_ATTR,packageName);
  try {
    myAttrPanel=new CreateFromTemplatePanel(myTemplate.getUnsetAttributes(myDefaultProperties),!myTemplate.isJavaClassTemplate());
  }
 catch (  ParseException e) {
    throw new RuntimeException(IdeBundle.message("error.unable.to.parse.template",myTemplate.getName()),e);
  }
  myAttrComponent=myAttrPanel.getComponent();
  init();
}
