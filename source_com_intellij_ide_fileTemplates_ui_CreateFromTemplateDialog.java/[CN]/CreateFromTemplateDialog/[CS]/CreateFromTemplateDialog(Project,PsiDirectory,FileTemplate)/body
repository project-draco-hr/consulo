{
  super(project,true);
  myDirectory=directory;
  myProject=project;
  myTemplate=template;
  setTitle(IdeBundle.message("title.new.from.template",template.getName()));
  PsiPackage aPackage=myDirectory.getPackage();
  String packageName=aPackage == null ? "" : aPackage.getQualifiedName();
  myDefaultProperties=FileTemplateManager.getInstance().getDefaultProperties();
  myDefaultProperties.setProperty(FileTemplateUtil.PACKAGE_ATTR,packageName);
  String[] unsetAttributes=null;
  try {
    unsetAttributes=myTemplate.getUnsetAttributes(myDefaultProperties);
  }
 catch (  ParseException e) {
    showErrorDialog(e);
  }
  if (unsetAttributes != null) {
    myAttrPanel=new CreateFromTemplatePanel(unsetAttributes,!myTemplate.isJavaClassTemplate());
    myAttrComponent=myAttrPanel.getComponent();
    init();
  }
 else {
    myAttrPanel=null;
    myAttrComponent=null;
  }
}
