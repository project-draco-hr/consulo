{
  final GrExpression condition=expression.getCondition();
  final GrExpression thenBranch=expression.getThenBranch();
  final GrExpression elseBranch=expression.getElseBranch();
  final PsiType type=condition.getType();
  if (type == null || TypesUtil.unboxPrimitiveTypeWrapper(type) == PsiType.BOOLEAN) {
    condition.accept(this);
  }
 else {
    GenerationUtil.invokeMethodByName(condition,"asBoolean",GrExpression.EMPTY_ARRAY,GrNamedArgument.EMPTY_ARRAY,GrClosableBlock.EMPTY_ARRAY,this,expression);
  }
  builder.append("?");
  thenBranch.accept(this);
  builder.append(":");
  elseBranch.accept(this);
}
