{
  if (!context.isInAnonymousContext() && qualifier != null) {
    qualifier.accept(this);
    builder.append('.');
    builder.append(referenceName);
  }
 else   if (getWrappingImplicitClass(referenceExpression) != null) {
    final PsiClass contextClass;
    if ("this".equals(referenceName)) {
      final PsiElement _contextClass=referenceExpression.resolve();
      if (_contextClass instanceof PsiClass) {
        contextClass=(PsiClass)_contextClass;
      }
 else {
        contextClass=null;
      }
      writeThisReference(contextClass,builder,context);
    }
 else {
      contextClass=PsiUtil.getContextClass(referenceExpression);
      writeSuperReference(contextClass,builder,context);
    }
  }
 else {
    builder.append(referenceName);
  }
}
