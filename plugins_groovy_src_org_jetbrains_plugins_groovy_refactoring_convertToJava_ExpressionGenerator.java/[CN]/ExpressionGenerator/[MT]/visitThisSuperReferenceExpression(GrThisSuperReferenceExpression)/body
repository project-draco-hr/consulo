{
  LOG.assertTrue(!(expr.getParent() instanceof GrConstructorInvocation));
  final PsiElement resolved=expr.resolve();
  LOG.assertTrue(resolved instanceof PsiClass);
  final PsiElement firstContainingClass=PsiTreeUtil.getParentOfType(expr,GrClosableBlock.class,PsiClass.class);
  if (expr.getManager().areElementsEquivalent(firstContainingClass,resolved)) {
    builder.append(expr.getReferenceName());
  }
 else {
    builder.append(((PsiClass)resolved).getQualifiedName()).append(".").append(expr.getReferenceName());
  }
}
