{
  if (context.isInAnonymousContext() && expr.getQualifier() == null) {
    builder.append(expr.getReferenceName());
    return;
  }
  final PsiElement resolved=expr.resolve();
  LOG.assertTrue(resolved instanceof PsiClass);
  if (!(resolved instanceof PsiAnonymousClass)) {
    builder.append(((PsiClass)resolved).getQualifiedName()).append('.');
  }
  builder.append(expr.getReferenceName());
}
