{
  if (initializer instanceof GrReferenceExpression) {
    final GrExpression qualifier=((GrReferenceExpression)initializer).getQualifier();
    if (qualifier == null) {
      final PsiElement resolved=((GrReferenceExpression)initializer).resolve();
      if (resolved instanceof GrVariable && GroovyRefactoringUtil.isLocalVariable((GrVariable)resolved)) {
        return ((GrVariable)resolved).getName();
      }
    }
  }
  final String name=suggestVarName(initializer,context);
  final StringBuilder builder=new StringBuilder();
  builder.append("final ");
  writeType(builder,initializer.getType());
  builder.append(' ').append(name).append(" = ");
  initializer.accept(new ExpressionGenerator(builder,context));
  builder.append(';');
  context.myStatements.add(builder.toString());
  return name;
}
