{
  if (type == null) {
    try {
      myLock.acquire();
      return Collections.unmodifiableList(filterNotifications(filter));
    }
  finally {
      myLock.release();
    }
  }
  final List<Notification> filtered;
  try {
    myLock.acquire();
    filtered=filterNotifications(filter);
  }
  finally {
    myLock.release();
  }
  final List<Notification> result=new ArrayList<Notification>();
  for (  final Notification notification : filtered) {
    if (type == notification.getType()) {
      result.add(notification);
    }
  }
  return result;
}
