{
  Project project=configuration.getProject();
  Module module=getModule(configuration);
  parameters.getProgramParametersList().addParametersString(expandPath(configuration.getProgramParameters(),module,project));
  parameters.setWorkingDirectory(getWorkingDir(configuration,project,module));
  parameters.setupEnvs(configuration.getEnvs(),configuration.isPassParentEnvs());
  if (parameters.getEnv() != null) {
    Map<String,String> expanded=new HashMap<String,String>();
    for (    Map.Entry<String,String> each : parameters.getEnv().entrySet()) {
      expanded.put(each.getKey(),expandPath(each.getValue(),module,project));
    }
    parameters.setEnv(expanded);
  }
}
