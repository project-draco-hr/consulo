{
  extension=extension.toLowerCase();
  if (StringUtil.startsWithChar(extension,'.'))   extension=extension.substring(1);
  FileType fileTypeByExtension=myTempExtension2TypeMap.get(extension);
  if (fileTypeByExtension != null && fileTypeByExtension != StdFileTypes.UNKNOWN) {
    return fileTypeByExtension;
  }
  FileType registeredFileType=FileTypeManager.getInstance().getFileTypeByExtension(extension);
  if (registeredFileType != StdFileTypes.UNKNOWN && registeredFileType.isReadOnly()) {
    return registeredFileType;
  }
  if (extension != null) {
    myTempExtension2TypeMap.put(extension,type);
    myExtensions.addExtensionAndSelect(extension);
  }
  myExtensions.myExtensionsList.requestFocus();
  return null;
}
