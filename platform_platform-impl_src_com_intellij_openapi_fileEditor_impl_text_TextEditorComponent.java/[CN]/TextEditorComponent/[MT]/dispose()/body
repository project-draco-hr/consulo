{
  myDocument.removeDocumentListener(myDocumentListener);
  if (!myProject.isDefault()) {
    EditorHistoryManager.getInstance(myProject).updateHistoryEntry(myFile,false);
  }
  disposeEditor();
  myConnection.disconnect();
  myFile.getFileSystem().removeVirtualFileListener(myVirtualFileListener);
}
