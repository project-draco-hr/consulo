{
  Editor editor=EditorFactory.getInstance().createEditor(myDocument,myProject);
  ((EditorMarkupModel)editor.getMarkupModel()).setErrorStripeVisible(true);
  ((EditorEx)editor).getGutterComponentEx().setForceShowRightFreePaintersArea(true);
  EditorHighlighter highlighter=EditorHighlighterFactory.getInstance().createEditorHighlighter(myFile,EditorColorsManager.getInstance().getGlobalScheme(),myProject);
  ((EditorEx)editor).setHighlighter(highlighter);
  ((EditorEx)editor).setFile(myFile);
  ((EditorEx)editor).setContextMenuGroupId(IdeActions.GROUP_EDITOR_POPUP);
  ((EditorImpl)editor).setDropHandler(new FileDropHandler(editor));
  TextEditorProvider.putTextEditor(editor,myTextEditor);
  return editor;
}
