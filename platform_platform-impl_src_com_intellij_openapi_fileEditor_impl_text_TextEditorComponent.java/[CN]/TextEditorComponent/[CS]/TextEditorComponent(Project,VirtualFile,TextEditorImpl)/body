{
  super(new BorderLayout(),textEditor);
  myProject=project;
  myFile=file;
  myTextEditor=textEditor;
  myDocument=FileDocumentManager.getInstance().getDocument(myFile);
  LOG.assertTrue(myDocument != null);
  myDocumentListener=new MyDocumentListener();
  myDocument.addDocumentListener(myDocumentListener);
  myEditor=createEditor();
  add(myEditor.getComponent(),BorderLayout.CENTER);
  myModified=isModifiedImpl();
  myValid=isEditorValidImpl();
  LOG.assertTrue(myValid);
  myVirtualFileListener=new MyVirtualFileListener();
  myFile.getFileSystem().addVirtualFileListener(myVirtualFileListener);
  myConnection=project.getMessageBus().connect();
  myConnection.subscribe(FileTypeManager.TOPIC,new MyFileTypeListener());
  myConnection.subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    @Override public void enteredDumbMode(){
      updateHighlighters();
    }
    @Override public void exitDumbMode(){
      updateHighlighters();
    }
  }
);
}
