{
  final FileReferenceSet set=new FileReferenceSet(value,element,startInElement,null,true){
    @Override protected Condition<PsiFileSystemItem> getReferenceCompletionFilter(){
      return new Condition<PsiFileSystemItem>(){
        @Override public boolean value(        PsiFileSystemItem item){
          if (item instanceof PsiDirectory)           return true;
          final VirtualFile virtualFile=item.getVirtualFile();
          if (virtualFile == null)           return false;
          final FileType fileType=virtualFile.getFileType();
          return ArrayUtilRt.find(acceptedFileTypes,fileType) >= 0;
        }
      }
;
    }
  }
;
  if (value.startsWith("/")) {
    set.addCustomization(FileReferenceSet.DEFAULT_PATH_EVALUATOR_OPTION,FileReferenceSet.ABSOLUTE_TOP_LEVEL);
  }
  return set.getAllReferences();
}
