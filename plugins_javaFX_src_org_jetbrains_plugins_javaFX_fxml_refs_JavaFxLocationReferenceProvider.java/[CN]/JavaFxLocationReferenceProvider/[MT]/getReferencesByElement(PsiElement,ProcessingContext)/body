{
  final String value=((XmlAttributeValue)element).getValue();
  if (value.startsWith("@")) {
    return new FileReferenceSet(value.substring(1),element,2,null,true).getAllReferences();
  }
 else {
    if (mySupportCommaInValue && value.contains(",")) {
      int startIdx=0;
      int endIdx=0;
      List<PsiReference> refs=new ArrayList<PsiReference>();
      while (true) {
        endIdx=value.indexOf(",",startIdx);
        Collections.addAll(refs,collectRefs(element,endIdx >= 0 ? value.substring(startIdx,endIdx) : value.substring(startIdx),startIdx + 1));
        startIdx=endIdx + 1;
        if (endIdx < 0) {
          break;
        }
      }
      return refs.toArray(new PsiReference[refs.size()]);
    }
 else {
      return collectRefs(element,value,1);
    }
  }
}
