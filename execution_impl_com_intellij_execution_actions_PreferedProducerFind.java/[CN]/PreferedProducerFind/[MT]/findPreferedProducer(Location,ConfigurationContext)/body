{
  final ArrayList<RuntimeConfigurationProducer> prototypes=new ArrayList<RuntimeConfigurationProducer>();
  prototypes.addAll(Arrays.asList(JUnitConfigurationProducer.PROTOTYPES));
  prototypes.add(ApplicationConfigurationProducer.PROTOTYPE);
  final ArrayList<RuntimeConfigurationProducer> producers=new ArrayList<RuntimeConfigurationProducer>();
  for (Iterator<RuntimeConfigurationProducer> iterator=prototypes.iterator(); iterator.hasNext(); ) {
    final RuntimeConfigurationProducer prototype=iterator.next();
    final RuntimeConfigurationProducer producer=prototype.createProducer(location,context);
    if (producer.getConfiguration() != null) {
      LOG.assertTrue(producer.getSourceElement() != null,producer.toString());
      producers.add(producer);
    }
  }
  if (producers.size() == 0)   return null;
  Collections.sort(producers,RuntimeConfigurationProducer.COMPARATOR);
  return producers.get(0);
}
