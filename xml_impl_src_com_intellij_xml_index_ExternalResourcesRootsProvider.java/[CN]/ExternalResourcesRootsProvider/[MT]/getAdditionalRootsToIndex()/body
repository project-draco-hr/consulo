{
  ExternalResourceManagerImpl manager=(ExternalResourceManagerImpl)ExternalResourceManagerEx.getInstance();
  List<String> urls=manager.getStandardResources();
  Set<String> dirs=new HashSet<String>(ContainerUtil.map(urls,new Function<String,String>(){
    @Override public String fun(    String s){
      int endIndex=s.lastIndexOf('/');
      return endIndex > 0 ? s.substring(0,endIndex) : s;
    }
  }
));
  HashSet<VirtualFile> roots=new HashSet<VirtualFile>();
  for (  String url : dirs) {
    VirtualFile file=VfsUtil.findRelativeFile(url,null);
    if (file != null) {
      roots.add(file);
    }
  }
  String path=FetchExtResourceAction.getExternalResourcesPath();
  VirtualFile extResources=LocalFileSystem.getInstance().findFileByPath(path);
  ContainerUtil.addIfNotNull(extResources,roots);
  return roots;
}
