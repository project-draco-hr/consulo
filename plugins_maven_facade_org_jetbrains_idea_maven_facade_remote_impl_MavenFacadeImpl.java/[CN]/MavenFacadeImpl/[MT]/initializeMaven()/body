{
  DefaultPlexusContainer container;
  try {
    container=new DefaultPlexusContainer();
  }
 catch (  RuntimeException e) {
    String s="Cannot initialize Maven. Please make sure that your IDEA installation is correct and has no old libraries.";
    throw new RuntimeException(s,e);
  }
  container.setClassWorld(new ClassWorld("plexus.core",Thread.currentThread().getContextClassLoader()));
  try {
    container.initialize();
    container.start();
  }
 catch (  PlexusContainerException e) {
    throw new RuntimeException(e);
  }
  Settings settings=null;
  try {
    MavenSettingsBuilder builder=(MavenSettingsBuilder)container.lookup(MavenSettingsBuilder.ROLE);
    if (settings == null) {
      settings=builder.buildSettings();
    }
  }
 catch (  ComponentLookupException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
catch (  XmlPullParserException e) {
    e.printStackTrace();
  }
  if (settings == null) {
    settings=new Settings();
  }
  settings.setOffline(false);
  settings.setInteractiveMode(false);
  settings.setUsePluginRegistry(false);
  RuntimeInfo runtimeInfo=new RuntimeInfo(settings);
  settings.setRuntimeInfo(runtimeInfo);
  return container;
}
