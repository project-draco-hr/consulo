{
  if (isSelected || !myLogUi.isHighlighterEnabled(Factory.ID))   return VcsCommitStyle.DEFAULT;
  Condition<CommitId> condition=myConditions.get(details.getRoot());
  if (condition == null) {
    VcsLogProvider provider=myLogData.getLogProvider(details.getRoot());
    String currentBranch=provider.getCurrentBranch(details.getRoot());
    if (!HEAD.equals(mySingleFilteredBranch) && currentBranch != null && !(currentBranch.equals(mySingleFilteredBranch))) {
      condition=myLogData.getContainingBranchesGetter().getContainedInBranchCondition(currentBranch,details.getRoot());
      myConditions.put(details.getRoot(),condition);
    }
 else {
      condition=Conditions.alwaysFalse();
    }
  }
  if (condition != null && condition.value(new CommitId(details.getId(),details.getRoot()))) {
    return VcsCommitStyleFactory.background(CURRENT_BRANCH_BG);
  }
  return VcsCommitStyle.DEFAULT;
}
