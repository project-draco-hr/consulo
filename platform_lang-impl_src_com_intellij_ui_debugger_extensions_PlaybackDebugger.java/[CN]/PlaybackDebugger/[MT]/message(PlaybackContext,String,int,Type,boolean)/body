{
  final int depth=context != null ? context.getCurrentStageDepth() : 0;
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      if (!forced && (context != null && context.isDisposed()))       return;
switch (type) {
case message:
        addInfo(text,currentLine,MESSAGE_COLOR,depth);
      break;
case error:
    addInfo(text,currentLine,ERROR_COLOR,depth);
  break;
case code:
addInfo(text,currentLine,CODE_COLOR,depth);
break;
case test:
addInfo(text,currentLine,TEST_COLOR,depth);
break;
}
}
}
);
}
