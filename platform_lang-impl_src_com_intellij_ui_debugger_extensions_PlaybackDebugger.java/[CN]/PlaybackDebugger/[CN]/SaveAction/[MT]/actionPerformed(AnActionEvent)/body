{
  if (pathToFile() == null) {
    VirtualFile[] files=FileChooser.chooseFiles(myComponent,FILE_DESCRIPTOR);
    if (files.length > 0) {
      VirtualFile selectedFile=files[0];
      myState.currentScript=selectedFile.getPresentableUrl();
      myCurrentScript.setText(myState.currentScript);
    }
 else {
      Messages.showErrorDialog("File to save is not selected.","Cannot save script");
      return;
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      save();
    }
  }
);
}
