{
  final File file=getScriptsFile();
  final String choose=file != null ? "Choose another..." : "Choose...";
  JBPopupFactory.getInstance().createListPopup(new BaseListPopupStep<String>("Script Directory",new String[]{file != null ? file.getAbsolutePath() : "Undefined",choose}){
    @Override public PopupStep onChosen(    String selectedValue,    boolean finalChoice){
      if (selectedValue != choose)       return FINAL_CHOICE;
      final VirtualFile[] files=FileChooser.chooseFiles(myComponent,new FileChooserDescriptor(false,true,false,false,false,false));
      if (files.length > 0) {
        String presentableUrl=files[0].getPresentableUrl();
        myScriptsPath.setText(presentableUrl);
        myState.scriptsPath=presentableUrl;
      }
      return FINAL_CHOICE;
    }
  }
).showUnderneathOf(e.getInputEvent().getComponent());
}
