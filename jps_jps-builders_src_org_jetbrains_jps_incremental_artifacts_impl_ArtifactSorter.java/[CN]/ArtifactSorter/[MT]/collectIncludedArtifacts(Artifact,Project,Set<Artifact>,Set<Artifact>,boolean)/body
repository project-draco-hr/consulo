{
  if (!processed.add(artifact)) {
    return;
  }
  if (!withOutputPathOnly || !StringUtil.isEmpty(artifact.getOutputPath())) {
    result.add(artifact);
  }
  processIncludedArtifacts(artifact,project,new Consumer<Artifact>(){
    @Override public void consume(    Artifact included){
      collectIncludedArtifacts(included,project,processed,result,withOutputPathOnly);
    }
  }
);
}
