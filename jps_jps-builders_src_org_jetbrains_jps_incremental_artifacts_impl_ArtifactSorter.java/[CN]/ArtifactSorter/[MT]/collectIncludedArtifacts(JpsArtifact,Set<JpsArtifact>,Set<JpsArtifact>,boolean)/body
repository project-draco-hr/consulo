{
  if (!processed.add(artifact)) {
    return;
  }
  if (!withOutputPathOnly || !StringUtil.isEmpty(artifact.getOutputPath())) {
    result.add(artifact);
  }
  processIncludedArtifacts(artifact,new Consumer<JpsArtifact>(){
    @Override public void consume(    JpsArtifact included){
      collectIncludedArtifacts(included,processed,result,withOutputPathOnly);
    }
  }
);
}
