{
  List<TemplateItem> items=new ArrayList<TemplateItem>();
  List<TemplatesGroup> groups=new ArrayList<TemplatesGroup>(map.keySet());
  Collections.sort(groups,new Comparator<TemplatesGroup>(){
    @Override public int compare(    TemplatesGroup o1,    TemplatesGroup o2){
      if (o1.getName().equals(ProjectTemplatesFactory.OTHER_GROUP))       return 2;
      if (o1.getName().equals(ProjectTemplatesFactory.CUSTOM_GROUP))       return 1;
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  for (  TemplatesGroup group : groups) {
    for (    ProjectTemplate template : map.get(group)) {
      TemplateItem templateItem=new TemplateItem(template,group);
      items.add(templateItem);
    }
  }
  return items;
}
