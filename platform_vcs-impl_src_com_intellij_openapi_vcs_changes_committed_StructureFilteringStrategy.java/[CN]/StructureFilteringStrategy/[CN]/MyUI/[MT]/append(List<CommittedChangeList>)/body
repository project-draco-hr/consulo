{
  final TreeState localState=(myState != null) && myBuilder.isEmpty() ? myState : TreeState.createOn(myStructureTree,(DefaultMutableTreeNode)myStructureTree.getModel().getRoot());
  final Set<FilePath> filePaths=new HashSet<>();
  for (  CommittedChangeList changeList : changeLists) {
    for (    Change change : changeList.getChanges()) {
      final FilePath path=ChangesUtil.getFilePath(change);
      if (path.getParentPath() != null) {
        filePaths.add(path.getParentPath());
      }
    }
  }
  final DefaultTreeModel model=myBuilder.buildModelFromFilePaths(filePaths);
  myStructureTree.setModel(model);
  localState.applyTo(myStructureTree,(DefaultMutableTreeNode)myStructureTree.getModel().getRoot());
  myStructureTree.revalidate();
  myStructureTree.repaint();
  initRenderer();
}
