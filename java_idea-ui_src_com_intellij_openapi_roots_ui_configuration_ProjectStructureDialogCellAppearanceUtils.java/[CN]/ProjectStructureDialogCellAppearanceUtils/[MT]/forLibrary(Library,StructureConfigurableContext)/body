{
  final Icon icon=LibraryPresentationManager.getInstance().getCustomIcon(library,context);
  final boolean invalid=!((LibraryEx)library).getInvalidRootUrls(OrderRootType.CLASSES).isEmpty();
  if (icon != null) {
    final String name=library.getName();
    if (name != null) {
      return OrderEntryCellAppearanceUtils.normalOrRedWaved(name,icon,invalid);
    }
  }
  return OrderEntryCellAppearanceUtils.forLibrary(library,invalid);
}
