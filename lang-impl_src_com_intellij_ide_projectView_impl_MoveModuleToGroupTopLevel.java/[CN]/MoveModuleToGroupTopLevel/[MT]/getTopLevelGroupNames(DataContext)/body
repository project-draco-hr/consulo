{
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  final ModifiableModuleModel model=(ModifiableModuleModel)dataContext.getData(DataConstantsEx.MODIFIABLE_MODULE_MODEL);
  Module[] allModules;
  if (model != null) {
    allModules=model.getModules();
  }
 else {
    allModules=ModuleManager.getInstance(project).getModules();
  }
  Set<String> topLevelGroupNames=new HashSet<String>();
  for (  final Module child : allModules) {
    String[] group;
    if (model != null) {
      group=model.getModuleGroupPath(child);
    }
 else {
      group=ModuleManager.getInstance(project).getModuleGroupPath(child);
    }
    if (group != null) {
      topLevelGroupNames.add(group[0]);
    }
  }
  return topLevelGroupNames;
}
