{
  final BuildRunner buildRunner=new BuildRunner(loader,modulesSet,buildType,artifactsList,Collections.<String>emptyList(),Collections.<String,String>emptyMap());
  final ConsoleMessageHandler messageHandler=new ConsoleMessageHandler();
  try {
    ProjectDescriptor descriptor=buildRunner.load(messageHandler,dataStorageRoot,new BuildFSState(true));
    buildRunner.runBuild(descriptor,CanceledStatus.NULL,null,messageHandler,includeTests);
  }
 catch (  Throwable t) {
    System.err.println("Internal error: " + t.getMessage());
    t.printStackTrace();
  }
}
