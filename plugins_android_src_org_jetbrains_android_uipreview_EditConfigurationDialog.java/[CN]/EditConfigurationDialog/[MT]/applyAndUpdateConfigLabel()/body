{
  try {
    if (myEditDeviceForm.getName().length() == 0) {
      throw new InvalidOptionValueException("specify device name");
    }
    if (myConfigNameField.getText().length() == 0) {
      throw new InvalidOptionValueException("specify configuration name");
    }
    final FolderConfiguration newConfig=new FolderConfiguration();
    for (    ResourceQualifier qualifier : myChosenQualifiersConfig.getQualifiers()) {
      final MyQualifierEditor editor=myEditors.get(qualifier.getShortName());
      if (editor != null) {
        newConfig.addQualifier(editor.apply());
      }
    }
    myActualQualifiersConfig=newConfig;
  }
 catch (  InvalidOptionValueException e) {
    LOG.debug(e);
    myConfigurationTextPane.setText("Error: " + e.getMessage());
    setOKActionEnabled(false);
    return;
  }
 finally {
    myAvailableQualifiersList.repaint();
    myChosenQualifiersList.repaint();
  }
  myConfigurationTextPane.setText("Configuration: " + myActualQualifiersConfig.toDisplayString());
  setOKActionEnabled(true);
}
