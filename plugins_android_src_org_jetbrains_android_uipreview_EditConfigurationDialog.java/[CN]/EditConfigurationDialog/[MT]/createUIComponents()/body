{
  myLeftPanel=new JPanel(new BorderLayout(5,5));
  myAvailableQualifiersList=new JBList();
  myAvailableQualifiersList.setMinimumSize(new Dimension(10,10));
  myLeftPanel.add(new JBLabel(AndroidBundle.message("android.layout.preview.edit.configuration.available.qualifiers.label")),BorderLayout.NORTH);
  myLeftPanel.add(new JBScrollPane(myAvailableQualifiersList,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER),BorderLayout.CENTER);
  myRightPanel=new JPanel(new BorderLayout(5,5));
  myChosenQualifiersList=new JBList();
  myChosenQualifiersList.setMinimumSize(new Dimension(10,10));
  myRightPanel.add(new JBLabel(AndroidBundle.message("android.layout.preview.edit.configuration.choosen.qualifiers.label")),BorderLayout.NORTH);
  myRightPanel.add(new JBScrollPane(myChosenQualifiersList,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER),BorderLayout.CENTER);
  final JPanel buttonsPanel=new JPanel(new VerticalFlowLayout(FlowLayout.CENTER,0,0,true,false));
  myAddQualifierButton=new JButton(">>");
  buttonsPanel.add(myAddQualifierButton);
  myRemoveQualifierButton=new JButton("<<");
  buttonsPanel.add(myRemoveQualifierButton);
  myMiddlePanel=buttonsPanel;
  final int gap=5;
  myListsPanel=new JPanel(new AbstractLayoutManager(){
    @SuppressWarnings("NonPrivateFieldAccessedInSynchronizedContext") @Override public Dimension preferredLayoutSize(    Container target){
synchronized (target.getTreeLock()) {
        final Dimension leftPref=myLeftPanel.getPreferredSize();
        final Dimension rightPref=myRightPanel.getPreferredSize();
        final Dimension middlePref=myMiddlePanel.getPreferredSize();
        final Insets insets=target.getInsets();
        final int width=leftPref.width + middlePref.width + rightPref.width+ insets.left+ insets.right+ gap * 2;
        final int height=Math.max(leftPref.height,Math.max(rightPref.height,middlePref.height)) + insets.top + insets.bottom;
        return new Dimension(width,height);
      }
    }
    @SuppressWarnings("NonPrivateFieldAccessedInSynchronizedContext") @Override public void layoutContainer(    Container target){
synchronized (target.getTreeLock()) {
        final Insets insets=target.getInsets();
        int top=insets.top;
        int bottom=target.getHeight() - insets.bottom;
        int left=insets.left;
        int right=target.getWidth() - insets.right;
        final int middleWidth=myMiddlePanel.getPreferredSize().width + gap * 2;
        final int listWidth=(right - left - middleWidth) / 2;
        final int height=bottom - top;
        myLeftPanel.setSize(listWidth,height);
        myRightPanel.setSize(listWidth,height);
        myMiddlePanel.setSize(middleWidth,height);
        myLeftPanel.setBounds(left,top,listWidth,height);
        myRightPanel.setBounds(right - listWidth,top,listWidth,height);
        myMiddlePanel.setBounds(left + listWidth + gap,top,middleWidth - gap * 2,height);
      }
    }
  }
);
  myListsPanel.add(myLeftPanel);
  myListsPanel.add(myMiddlePanel);
  myListsPanel.add(myRightPanel);
}
