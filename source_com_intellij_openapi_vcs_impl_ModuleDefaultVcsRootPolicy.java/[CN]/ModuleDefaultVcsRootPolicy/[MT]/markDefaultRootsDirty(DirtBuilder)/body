{
  final Module[] modules=ModuleManager.getInstance(myProject).getModules();
  for (  Module module : modules) {
    final VirtualFile[] files=ModuleRootManager.getInstance(module).getContentRoots();
    for (    VirtualFile file : files) {
      builder.addDirtyDirRecursively(new FilePathImpl(file));
    }
  }
  final VirtualFile baseDir=myProject.getBaseDir();
  final ProjectLevelVcsManager plVcsManager=ProjectLevelVcsManager.getInstance(myProject);
  final VcsRoot[] vcsRoots=plVcsManager.getAllVcsRoots();
  for (  VcsRoot root : vcsRoots) {
    if (root.path.equals(baseDir)) {
      builder.addDirtyFile(root);
    }
 else {
      builder.addDirtyDirRecursively(root);
    }
  }
}
