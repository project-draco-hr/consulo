{
  PsiFile file=PsiUtilBase.getPsiFileInEditor(editor,myProject);
  if (file == null)   return false;
  TemplateSettings templateSettings=TemplateSettings.getInstance();
  if (shortcutChar == templateSettings.getDefaultShortcutChar()) {
    for (    final CustomLiveTemplate customLiveTemplate : CustomLiveTemplate.EP_NAME.getExtensions()) {
      final CustomTemplateCallback callback=new CustomTemplateCallback(editor,file);
      callback.fixInitialEditorState();
      String key=customLiveTemplate.computeTemplateKey(callback);
      if (key != null) {
        int offset=callback.getEditor().getCaretModel().getOffset();
        callback.getEditor().getDocument().deleteString(offset - key.length(),offset);
        customLiveTemplate.execute(key,callback,new TemplateInvokationListener(){
          public void finished(          boolean inSeparateEvent){
            callback.finish();
          }
        }
);
        return true;
      }
    }
  }
  return startNonCustomTemplate(templateSettings,file,editor,shortcutChar,processor);
}
