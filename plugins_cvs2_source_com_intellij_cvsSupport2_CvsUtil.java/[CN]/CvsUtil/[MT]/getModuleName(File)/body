{
  boolean isFile=!file.isDirectory();
  File directory=isFile ? file.getAbsoluteFile().getParentFile() : file;
  String result=loadRepositoryFrom(directory);
  if (isFile)   result+="/" + file.getName();
  String repository=CvsEntriesManager.getInstance().getCvsConnectionSettingsFor(directory).getRepository();
  if (result.startsWith("/" + repository))   result=result.substring(repository.length() + 1);
  return result;
}
