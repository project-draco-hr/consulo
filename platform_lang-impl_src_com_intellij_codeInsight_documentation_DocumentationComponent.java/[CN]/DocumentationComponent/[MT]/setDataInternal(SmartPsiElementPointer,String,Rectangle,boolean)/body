{
  myElement=element;
  boolean justShown=false;
  if (!myIsShown && myHint != null) {
    myEditorPane.setText(text);
    applyFontSize();
    myManager.showHint(myHint);
    myIsShown=justShown=true;
  }
  if (!justShown) {
    myEditorPane.setText(text);
    applyFontSize();
  }
  if (!skip) {
    myText=text;
  }
  Document document=myEditorPane.getDocument();
  if (document instanceof HTMLDocument && element != null) {
    VirtualFile virtualFile=element.getVirtualFile();
    VirtualFile directory=virtualFile == null ? null : virtualFile.getParent();
    String path=directory == null ? "" : directory.getPath() + "/";
    try {
      URL url=new URL(URLUtil.FILE_PROTOCOL,null,path);
      ((HTMLDocument)document).setBase(url);
    }
 catch (    MalformedURLException ignored) {
    }
  }
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      myEditorPane.scrollRectToVisible(viewRect);
    }
  }
);
}
