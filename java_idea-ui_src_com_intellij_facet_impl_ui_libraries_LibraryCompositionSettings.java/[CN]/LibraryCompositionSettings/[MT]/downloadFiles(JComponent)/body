{
  final LibraryDownloadDescription downloadDescription=myLibraryDescription.getDownloadDescription();
  if (myDownloadLibraries && downloadDescription != null) {
    LibraryDownloadInfo[] toDownload=mySelectedDownloads.toArray(new LibraryDownloadInfo[mySelectedDownloads.size()]);
    LibraryDownloader downloader=new LibraryDownloader(toDownload,null,parent,getDirectoryForDownloadedLibrariesPath(),myDownloadedLibraryName);
    VirtualFile[] files=downloader.download();
    if (files.length != toDownload.length) {
      return false;
    }
    myNewLibraryEditor=new NewLibraryEditor();
    myNewLibraryEditor.setName(myDownloadedLibraryName);
    for (    VirtualFile file : files) {
      myNewLibraryEditor.addRoot(file,OrderRootType.CLASSES);
    }
  }
  return true;
}
