{
  if (!(obj instanceof PsiClassType))   return false;
  PsiClassType otherClassType=(PsiClassType)obj;
  if (!isValid() || !otherClassType.isValid())   return false;
  if (this == obj)   return true;
  String className=getClassName();
  String otherClassName=otherClassType.getClassName();
  if (!Comparing.equal(className,otherClassName))   return false;
  final ClassResolveResult result=resolveGenerics();
  final ClassResolveResult otherResult=otherClassType.resolveGenerics();
  if (result == otherResult) {
    return true;
  }
  if (result == null || otherResult == null)   return false;
  final PsiClass aClass=result.getElement();
  final PsiClass otherClass=otherResult.getElement();
  if (!areClassesEqual(aClass,otherClass))   return false;
  if (aClass == null)   return true;
  return PsiUtil.equalOnEquivalentClasses(result.getSubstitutor(),aClass,otherResult.getSubstitutor(),otherClass);
}
