{
  if (PsiUtil.isInJspFile(file)) {
    EditorHighlighter highlighter;
    final Document document=PsiDocumentManager.getInstance(file.getProject()).getDocument(file);
    EditorHighlighter cachedEditorHighlighter;
    boolean alreadyInitializedHighlighter=false;
    if (document instanceof DocumentImpl && (cachedEditorHighlighter=((DocumentImpl)document).getEditorHighlighterForCachesBuilding()) != null && IdTableBuilding.checkCanUseCachedEditorHighlighter(file.getText(),cachedEditorHighlighter)) {
      highlighter=cachedEditorHighlighter;
      alreadyInitializedHighlighter=true;
    }
 else {
      highlighter=EditorHighlighterFactory.getInstance().createEditorHighlighter(file.getProject(),file.getVirtualFile());
    }
    return new LexerEditorHighlighterLexer(highlighter,alreadyInitializedHighlighter);
  }
  return null;
}
