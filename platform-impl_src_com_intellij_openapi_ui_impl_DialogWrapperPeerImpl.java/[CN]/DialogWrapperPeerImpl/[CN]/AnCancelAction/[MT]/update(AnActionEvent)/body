{
  Component focusOwner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
  e.getPresentation().setEnabled(false);
  if (focusOwner instanceof JComponent && SpeedSearchBase.hasActiveSpeedSearch((JComponent)focusOwner)) {
    return;
  }
  if (focusOwner instanceof JTree) {
    JTree tree=(JTree)focusOwner;
    if (!tree.isEditing()) {
      e.getPresentation().setEnabled(true);
    }
  }
 else   if (focusOwner instanceof JTable) {
    JTable table=(JTable)focusOwner;
    if (!table.isEditing()) {
      e.getPresentation().setEnabled(true);
    }
  }
}
