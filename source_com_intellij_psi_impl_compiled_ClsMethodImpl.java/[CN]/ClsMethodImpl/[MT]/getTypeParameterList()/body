{
synchronized (PsiLock.LOCK) {
    if (myTypeParameters == null) {
      long repositoryId=getRepositoryId();
      if (repositoryId < 0) {
        if (!parseViaGenericSignature()) {
          myTypeParameters=new ClsTypeParametersListImpl(this,ClsTypeParameterImpl.EMPTY_ARRAY);
        }
      }
 else {
        MethodView methodView=getRepositoryManager().getMethodView();
        int count=methodView.getTypeParametersCount(repositoryId);
        if (count == 0) {
          myTypeParameters=new ClsTypeParametersListImpl(this,ClsTypeParameterImpl.EMPTY_ARRAY);
        }
 else {
          StringBuilder compiledParams=new StringBuilder();
          compiledParams.append('<');
          for (int i=0; i < count; i++) {
            compiledParams.append(methodView.getTypeParameterText(repositoryId,i));
          }
          compiledParams.append('>');
          try {
            final String signature=compiledParams.toString();
            myTypeParameters=GenericSignatureParsing.parseTypeParametersDeclaration(new StringCharacterIterator(signature,0),this,signature);
          }
 catch (          ClsFormatException e) {
            LOG.error(e);
          }
        }
      }
    }
    return myTypeParameters;
  }
}
