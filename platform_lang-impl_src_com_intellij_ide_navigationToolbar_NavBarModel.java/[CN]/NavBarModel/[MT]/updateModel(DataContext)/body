{
  if (LaterInvocator.isInModalContext() || (shouldSkipUpdateFromDataContext && myIsFloatingModeModel))   return;
  PsiElement psiElement=LangDataKeys.PSI_FILE.getData(dataContext);
  if (psiElement == null) {
    psiElement=LangDataKeys.PSI_ELEMENT.getData(dataContext);
  }
  psiElement=normalize(psiElement);
  if (myModel.contains(psiElement) && !myChanged)   return;
  if (psiElement != null && psiElement.isValid()) {
    updateModel(psiElement);
  }
 else {
    if (UISettings.getInstance().SHOW_NAVIGATION_BAR)     return;
    Object moduleOrProject=LangDataKeys.MODULE.getData(dataContext);
    if (moduleOrProject == null) {
      moduleOrProject=LangDataKeys.PROJECT.getData(dataContext);
    }
    if (moduleOrProject != null) {
      setModel(Collections.singletonList(moduleOrProject));
    }
  }
  setChanged(false);
  shouldSkipUpdateFromDataContext=!UISettings.getInstance().SHOW_NAVIGATION_BAR;
}
