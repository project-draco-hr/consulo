{
  final int oldModelSize=size();
  final List<Object> oldModel=new ArrayList<Object>();
  for (int i=0; i < oldModelSize; i++) {
    oldModel.add(getElement(i));
  }
  removeAllElements();
  final Set<VirtualFile> roots=new HashSet<VirtualFile>();
  final ProjectRootManager projectRootManager=ProjectRootManager.getInstance(myProject);
  final ProjectFileIndex projectFileIndex=projectRootManager.getFileIndex();
  for (  VirtualFile root : projectRootManager.getContentRoots()) {
    VirtualFile parent=root.getParent();
    if (parent == null || !projectFileIndex.isInContent(parent)) {
      roots.add(root);
    }
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      traverseToRoot(psiElement,roots);
    }
  }
);
  if (oldModelSize == size()) {
    for (int i=0; i < oldModelSize; i++) {
      if (!Comparing.equal(oldModel.get(i),getElement(i)))       return true;
    }
    return false;
  }
 else {
    return true;
  }
}
