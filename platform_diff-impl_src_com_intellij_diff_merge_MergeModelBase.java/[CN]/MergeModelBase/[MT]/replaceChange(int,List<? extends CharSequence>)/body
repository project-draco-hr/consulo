{
  LOG.assertTrue(isInsideCommand());
  int outputStartLine=getLineStart(index);
  int outputEndLine=getLineEnd(index);
  DiffUtil.applyModification(myDocument,outputStartLine,outputEndLine,newContent);
  if (outputStartLine == outputEndLine) {
    int newOutputEndLine=outputStartLine + newContent.size();
    moveChangesAfterInsertion(index,outputStartLine,newOutputEndLine);
  }
}
