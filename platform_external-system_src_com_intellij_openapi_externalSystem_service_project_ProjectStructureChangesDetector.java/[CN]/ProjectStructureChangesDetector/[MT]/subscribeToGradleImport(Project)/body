{
  MessageBusConnection connection=project.getMessageBus().connect(project);
  connection.subscribe(ProjectEntityChangeListener.TOPIC,new ProjectEntityChangeListener(){
    @Override public void onChangeStart(    @NotNull Object entity,    @NotNull ProjectSystemId externalSystemId){
      myImportCounter.incrementAndGet();
    }
    @Override public void onChangeEnd(    @NotNull Object entity,    @NotNull ProjectSystemId externalSystemId){
      if (myImportCounter.decrementAndGet() <= 0) {
        myUserProjectChangesCalculator.updateCurrentProjectState(project);
        rebuildTreeModel(externalSystemId);
      }
    }
  }
);
}
