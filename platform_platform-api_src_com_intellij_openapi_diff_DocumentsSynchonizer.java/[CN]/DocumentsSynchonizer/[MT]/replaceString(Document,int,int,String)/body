{
  LOG.assertTrue(!myDuringModification);
  try {
    myDuringModification=true;
    CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
      public void run(){
        LOG.assertTrue(endOffset <= document.getTextLength());
        document.replaceString(startOffset,endOffset,newText);
      }
    }
,DiffBundle.message("save.merge.result.command.name"),document);
  }
  finally {
    myDuringModification=false;
  }
}
