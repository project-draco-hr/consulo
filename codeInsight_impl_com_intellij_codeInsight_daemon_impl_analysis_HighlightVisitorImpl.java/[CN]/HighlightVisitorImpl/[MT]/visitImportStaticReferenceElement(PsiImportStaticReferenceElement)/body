{
  String refName=ref.getReferenceName();
  JavaResolveResult[] results=ref.multiResolve(false);
  if (results.length == 0) {
    String description=JavaErrorMessages.message("cannot.resolve.symbol",refName);
    HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.WRONG_REF,ref.getReferenceNameElement(),description);
    myHolder.add(info);
    QuickFixAction.registerQuickFixAction(info,SetupJDKFix.getInstnace());
  }
 else {
    PsiManager manager=ref.getManager();
    for (    JavaResolveResult result : results) {
      PsiElement element=result.getElement();
      if (!(element instanceof PsiModifierListOwner) || !((PsiModifierListOwner)element).hasModifierProperty(PsiModifier.STATIC)) {
        continue;
      }
      @NonNls String messageKey=null;
      if (element instanceof PsiClass) {
        Pair<PsiImportStatement,PsiClass> imported=mySingleImportedClasses.get(refName);
        PsiClass aClass=imported == null ? null : imported.getSecond();
        PsiImportStatement statement=PsiTreeUtil.getParentOfType(ref,PsiImportStatement.class);
        if (aClass != null && !manager.areElementsEquivalent(aClass,element) && !manager.areElementsEquivalent(statement,imported.getFirst())) {
          messageKey="class.is.already.defined.in.single.type.import";
        }
        mySingleImportedClasses.put(refName,Pair.create(statement,(PsiClass)element));
      }
 else       if (element instanceof PsiField) {
        Pair<PsiImportStaticReferenceElement,PsiField> imported=mySingleImportedFields.get(refName);
        PsiField field=imported == null ? null : imported.getSecond();
        if (field != null && !manager.areElementsEquivalent(field,element) && !manager.areElementsEquivalent(ref,imported.getFirst())) {
          messageKey="field.is.already.defined.in.single.type.import";
        }
        mySingleImportedFields.put(refName,Pair.create(ref,(PsiField)element));
      }
 else       if (element instanceof PsiMethod) {
        MethodSignature signature=((PsiMethod)element).getSignature(PsiSubstitutor.EMPTY);
        Pair<PsiImportStaticReferenceElement,PsiMethod> imported=mySingleImportedMethods.get(signature);
        PsiMethod method=imported == null ? null : imported.getSecond();
        if (method != null && !manager.areElementsEquivalent(method,element) && !manager.areElementsEquivalent(imported.getFirst(),ref)) {
          messageKey="method.is.already.defined.in.single.type.import";
        }
        mySingleImportedMethods.put(signature,Pair.create(ref,(PsiMethod)element));
      }
      if (messageKey != null) {
        String description=JavaErrorMessages.message(messageKey,refName);
        myHolder.add(HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,ref,description));
      }
    }
  }
}
