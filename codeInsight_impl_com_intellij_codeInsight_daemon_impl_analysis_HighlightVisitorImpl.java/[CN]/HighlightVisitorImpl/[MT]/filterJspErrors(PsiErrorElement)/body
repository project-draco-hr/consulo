{
  PsiElement nextSibling=element.getNextSibling();
  if (nextSibling == null) {
    final PsiFile containingFile=element.getContainingFile();
    if (PsiUtil.isInJspFile(containingFile)) {
      final JspxFileViewProvider viewProvider=(JspxFileViewProvider)containingFile.getViewProvider();
      nextSibling=viewProvider.findElementAt(element.getTextOffset() + 1,viewProvider.getTemplateDataLanguage());
    }
  }
  while (nextSibling instanceof PsiWhiteSpace) {
    nextSibling=nextSibling.getNextSibling();
  }
  final PsiElement psiElement=nextSibling == null ? null : PsiTreeUtil.findCommonParent(nextSibling,element);
  if ((nextSibling instanceof OuterLanguageElement || nextSibling instanceof JspExpression || nextSibling instanceof ELExpressionHolder) && psiElement != null && !(psiElement instanceof PsiFile)) {
    return true;
  }
  final XmlAttributeValue parentOfType=PsiTreeUtil.getParentOfType(element,XmlAttributeValue.class);
  if (parentOfType != null && parentOfType.getUserData(DO_NOT_VALIDATE_KEY) != null) {
    return true;
  }
  final PsiElement prevLeaf=PsiTreeUtil.prevLeaf(element,true);
  if (prevLeaf instanceof OuterLanguageElement && prevLeaf.getTextRange().getEndOffset() != element.getContainingFile().getTextLength()) {
    return true;
  }
  return element.getParent().getUserData(DO_NOT_VALIDATE_KEY) != null;
}
