{
  if (element instanceof XmlElement) {
    element.accept(myXmlVisitor);
    List<HighlightInfo> result=myXmlVisitor.getResult();
    myHolder.addAll(result);
    myXmlVisitor.clearResult();
  }
  final List<Annotator> result;
synchronized (element.getLanguage()) {
    result=LanguageAnnotators.INSTANCE.allForLanguage(element.getLanguage());
  }
  List<Annotator> annotators=result;
  boolean hasAnnotators=!annotators.isEmpty();
  if (!annotators.isEmpty()) {
    for (int i=0; i < annotators.size(); i++) {
      Annotator annotator=annotators.get(i);
      annotator.annotate(element,myAnnotationHolder);
    }
    hasAnnotators=true;
  }
  if (hasAnnotators) {
    convertAnnotationsToHighlightInfos();
  }
}
