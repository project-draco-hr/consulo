{
  long repositoryId=getRepositoryId();
  if (repositoryId >= 0) {
    PsiParameter[] repositoryParameters=myRepositoryParameters;
    if (repositoryParameters == null) {
      CompositeElement treeElement=getTreeElement();
      if (treeElement != null) {
        return treeElement.countChildren(Constants.PARAMETER_BIT_SET);
      }
 else {
        return getRepositoryManager().getMethodView().getParameterCount(repositoryId);
      }
    }
    return repositoryParameters.length;
  }
 else {
    return calcTreeElement().countChildren(Constants.PARAMETER_BIT_SET);
  }
}
