{
  if (myBlockSavingTheContent) {
    return;
  }
  if (ApplicationManager.getApplication().isUnitTestMode() && myFile != null && StringUtil.startsWithChar(myFile.getPath(),'$')) {
    throw new StateStorageException("It seems like some macros were not expanded for path: " + myFile.getPath());
  }
  LOG.assertTrue(myFile != null);
  myCachedVirtualFile=StorageUtil.save(myFile,getDocumentToSave(),this);
}
