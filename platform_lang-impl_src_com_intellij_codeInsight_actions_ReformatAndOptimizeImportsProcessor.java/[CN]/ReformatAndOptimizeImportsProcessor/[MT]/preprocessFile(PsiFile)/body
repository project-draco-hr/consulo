{
  final Runnable r1=myReformatCodeProcessor.preprocessFile(file);
  final Runnable r2=myOptimizeImportsProcessor.preprocessFile(file);
  return new Runnable(){
    public void run(){
      r1.run();
      CodeStyleManagerImpl.setSequentialProcessingAllowed(false);
      try {
        r2.run();
      }
  finally {
        CodeStyleManagerImpl.setSequentialProcessingAllowed(true);
      }
    }
  }
;
}
