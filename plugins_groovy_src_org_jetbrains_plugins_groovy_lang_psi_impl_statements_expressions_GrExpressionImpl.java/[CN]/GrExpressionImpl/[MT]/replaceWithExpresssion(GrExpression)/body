{
  if (getParent() == null || getParent().getNode() == null || newExpr.getNode() == null) {
    throw new IncorrectOperationException();
  }
  if (getParent() instanceof GrParenthesizedExpr && newExpr instanceof GrReferenceExpression) {
    return ((GrExpression)getParent()).replaceWithExpresssion(newExpr);
  }
  ASTNode parentNode=getParent().getNode();
  ASTNode newNode=newExpr.getNode();
  parentNode.replaceChild(this.getNode(),newNode);
  if (!(newNode.getPsi() instanceof GrExpression)) {
    throw new IncorrectOperationException();
  }
  return ((GrExpression)newNode.getPsi());
}
