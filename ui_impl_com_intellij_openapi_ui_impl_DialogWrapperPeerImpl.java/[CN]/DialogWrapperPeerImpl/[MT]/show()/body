{
  LOG.assertTrue(EventQueue.isDispatchThread(),"Access is allowed from event dispatch thread only");
  final AnCancelAction anCancelAction=new AnCancelAction();
  final JRootPane rootPane=getRootPane();
  anCancelAction.registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0)),rootPane);
  myDisposeActions.add(new Runnable(){
    public void run(){
      anCancelAction.unregisterCustomShortcutSet(rootPane);
    }
  }
);
  if (!myCanBeParent && myWindowManager != null) {
    myWindowManager.doNotSuggestAsParent(myDialog);
  }
  if (myDialog.isModal() && !isProgressDialog()) {
    ((CommandProcessorEx)CommandProcessor.getInstance()).enterModal();
    LaterInvocatorEx.enterModal(myDialog);
  }
  try {
    myDialog.show();
  }
  finally {
    if (myDialog.isModal() && !isProgressDialog()) {
      ((CommandProcessorEx)CommandProcessor.getInstance()).leaveModal();
      LaterInvocatorEx.leaveModal(myDialog);
    }
  }
}
