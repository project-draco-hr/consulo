{
  setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
  addWindowListener(new MyWindowListener());
  addComponentListener(new ComponentAdapter(){
    @SuppressWarnings({"RefusedBequest"}) public void componentResized(    ComponentEvent e){
      final JRootPane pane=getRootPane();
      final Dimension minSize=pane.getMinimumSize();
      final Dimension size=pane.getSize();
      final Dimension winSize=getSize();
      if (minSize.width > size.width) {
        winSize.width+=minSize.width - size.width;
      }
      if (minSize.height > size.height) {
        winSize.height+=minSize.height - size.height;
      }
      if (!winSize.equals(getSize())) {
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            if (isShowing()) {
              setSize(winSize);
            }
          }
        }
);
      }
    }
  }
);
}
