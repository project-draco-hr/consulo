{
  List<PostProjectConfigurationTask> postTasks=new ArrayList<PostProjectConfigurationTask>();
  myModuleModel=model != null ? model : ModuleManager.getInstance(myProject).getModifiableModel();
  myLibrariesProvider=new ProjectLibrariesProvider(myProject);
  mapModulesToMavenProjects();
  deleteObsoleteModules();
  configModules(postTasks,modulesProvider);
  configModuleGroups();
  refreshResolvedArtifacts();
  configSettings();
  removeUnusedProjectLibraries();
  if (model == null)   commit();
  return postTasks;
}
