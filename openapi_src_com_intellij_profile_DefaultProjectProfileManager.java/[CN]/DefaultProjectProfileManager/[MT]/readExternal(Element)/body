{
  DefaultJDOMExternalizer.readExternal(this,element);
  final Element profiles=element.getChild(PROFILES);
  if (profiles != null) {
    for (    Object p : profiles.getChildren(PROFILE)) {
      Element profileElement=(Element)p;
      final Profile profile=myApplicationProfileManager.createProfile();
      profile.setProfileManager(this);
      profile.readExternal(profileElement);
      final String name=profile.getName();
      if (myApplicationProfileManager.getProfile(name) != null) {
        myApplicationProfileManager.deleteProfile(name);
      }
      myProfiles.put(name,profile);
    }
  }
  final Element scopes=element.getChild(SCOPES);
  if (scopes != null) {
    final List children=scopes.getChildren(SCOPE);
    if (children != null) {
      final DependencyValidationManager holder=DependencyValidationManager.getInstance(myProject);
      for (      Object s : children) {
        Element scopeElement=(Element)s;
        final String profile=scopeElement.getAttributeValue(PROFILE);
        if (profile != null && myProfiles.containsKey(profile)) {
          final NamedScope scope=holder.getScope(scopeElement.getAttributeValue(NAME));
          if (scope != null) {
            myScopeToProfileMap.put(scope,profile);
          }
        }
      }
    }
  }
  if (USE_PROJECT_LEVEL_SETTINGS && PROJECT_PROFILE == null) {
    getProjectProfileImpl();
  }
}
