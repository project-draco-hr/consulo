{
  final ProfileManager profileManager=ProfileManager.getProfileManager(myProfileType);
  LOG.assertTrue(profileManager != null);
  final Element profiles=element.getChild(PROFILES);
  if (profiles != null) {
    profileManager.readProfiles(profiles);
  }
  final Element scopes=element.getChild(SCOPES);
  if (scopes != null) {
    final List children=scopes.getChildren(SCOPE);
    if (children != null) {
      for (      Object s : children) {
        Element scopeElement=(Element)s;
        final String profile=scopeElement.getAttributeValue(PROFILE);
        if (profile != null) {
          assignProfileToScope(profile,getProfileScope(scopeElement));
        }
      }
    }
  }
  final Element currentProfile=element.getChild(CURRENT_PROFILE);
  if (currentProfile != null) {
    final String projectProfile=currentProfile.getAttributeValue(PROFILE);
    if (!Comparing.strEqual(profileManager.getRootProfile().getName(),projectProfile)) {
      final Profile profile=profileManager.createProfile();
      profile.readExternal(currentProfile);
      profileManager.addProfile(profile);
      assignProfileToScope(projectProfile,ProfileScopeFactory.getInstance(myProject).getProfileScope());
    }
  }
  DefaultJDOMExternalizer.readExternal(this,element);
}
