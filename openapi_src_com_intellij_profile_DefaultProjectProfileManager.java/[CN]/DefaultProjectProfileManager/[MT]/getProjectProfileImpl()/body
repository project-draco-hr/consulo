{
  if (PROJECT_PROFILE == null || myProfiles.isEmpty()) {
    @NonNls final String projectProfileName="Project Default";
    setProjectProfile(projectProfileName);
    final Profile projectProfile=myApplicationProfileManager.createProfile();
    projectProfile.copyFrom(myApplicationProfileManager.getRootProfile());
    projectProfile.setLocal(false);
    projectProfile.setName(projectProfileName);
    myProfiles.put(projectProfileName,projectProfile);
  }
 else   if (!myProfiles.containsKey(PROJECT_PROFILE)) {
    final String projectProfileAttempt=myProfiles.keySet().iterator().next();
    setProjectProfile(projectProfileAttempt);
  }
  final Profile profile=myProfiles.get(PROJECT_PROFILE);
  profile.setProfileManager(this);
  return profile;
}
