{
  Change c=new CreateFileChange(1,p("file"),"content");
  c.applyTo(root);
  root.doRename(1,"new file");
  root.doChangeFileContent(1,"new content");
  List<Difference> diffs=c.getDifferences(root,root.getEntry(p("new file")));
  assertEquals(1,diffs.size());
  assertTrue(diffs.get(0).isCreated());
  assertEquals("file",diffs.get(0).getOlderEntry().getName());
  assertEquals("content",diffs.get(0).getOlderEntry().getContent());
  assertEquals("new file",diffs.get(0).getCurrentEntry().getName());
  assertEquals("new content",diffs.get(0).getCurrentEntry().getContent());
}
