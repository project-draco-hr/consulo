{
  final VirtualFile dir1=createProjectSubDir("userSourceFolder");
  final VirtualFile dir2=createProjectSubDir("userExcludedFolder");
  importProject("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>");
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      MavenRootModelAdapter adapter=new MavenRootModelAdapter(myProjectsTree.findProject(myProjectPom),getModule("project"),new MavenDefaultModifiableModelsProvider(myProject));
      adapter.addSourceFolder(dir1.getPath(),false);
      adapter.addExcludedFolder(dir2.getPath());
      adapter.getRootModel().commit();
    }
  }
);
  assertSources("project","userSourceFolder");
  assertExcludes("project","target","userExcludedFolder");
  importProject();
  assertSources("project","userSourceFolder");
  assertExcludes("project","target","userExcludedFolder");
  resolveFoldersAndImport();
  assertSources("project","userSourceFolder");
  assertExcludes("project","target","userExcludedFolder");
}
