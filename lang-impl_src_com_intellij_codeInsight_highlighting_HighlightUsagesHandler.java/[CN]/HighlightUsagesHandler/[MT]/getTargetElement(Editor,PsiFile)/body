{
  PsiElement target=TargetElementUtilBase.findTargetElement(editor,TargetElementUtilBase.ELEMENT_NAME_ACCEPTED | TargetElementUtilBase.REFERENCED_ELEMENT_ACCEPTED | TargetElementUtil.NEW_AS_CONSTRUCTOR| TargetElementUtilBase.LOOKUP_ITEM_ACCEPTED);
  if (target == null) {
    int offset=TargetElementUtilBase.adjustOffset(editor.getDocument(),editor.getCaretModel().getOffset());
    PsiElement element=file.findElementAt(offset);
    if (element == null)     return null;
  }
  if (target instanceof PsiCompiledElement)   target=((PsiCompiledElement)target).getMirror();
  return target;
}
