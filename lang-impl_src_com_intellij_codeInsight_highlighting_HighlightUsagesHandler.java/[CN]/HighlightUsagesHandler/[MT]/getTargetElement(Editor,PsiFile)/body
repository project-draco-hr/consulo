{
  PsiElement target=TargetElementUtil.findTargetElement(editor,TargetElementUtil.ELEMENT_NAME_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED | TargetElementUtil.NEW_AS_CONSTRUCTOR| TargetElementUtil.LOOKUP_ITEM_ACCEPTED);
  if (target == null) {
    int offset=TargetElementUtil.adjustOffset(editor.getDocument(),editor.getCaretModel().getOffset());
    PsiElement element=file.findElementAt(offset);
    if (element == null)     return null;
  }
  if (target instanceof PsiCompiledElement)   target=((PsiCompiledElement)target).getMirror();
  return target;
}
