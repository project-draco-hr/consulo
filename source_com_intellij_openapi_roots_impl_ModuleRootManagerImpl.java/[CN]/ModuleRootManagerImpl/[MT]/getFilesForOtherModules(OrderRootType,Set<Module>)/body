{
  VirtualFile[] files=myCachedExportedFiles.get(rootType);
  if (files == null) {
    List<VirtualFile> result=new ArrayList<VirtualFile>();
    if (OrderRootType.SOURCES.equals(rootType) || OrderRootType.COMPILATION_CLASSES.equals(rootType)) {
      myRootModel.addExportedFiles(rootType,result,processed);
      files=result.toArray(new VirtualFile[result.size()]);
    }
 else     if (OrderRootType.JAVADOC.equals(rootType)) {
      files=VirtualFile.EMPTY_ARRAY;
    }
 else     if (OrderRootType.CLASSES.equals(rootType)) {
      myRootModel.addExportedFiles(rootType,result,processed);
      files=result.toArray(new VirtualFile[result.size()]);
    }
 else     if (OrderRootType.CLASSES_AND_OUTPUT.equals(rootType)) {
      files=getFiles(OrderRootType.CLASSES_AND_OUTPUT,processed);
    }
 else {
      LOG.error("Unknown root type: " + rootType);
      return null;
    }
    myCachedExportedFiles.put(rootType,files);
  }
  return files;
}
