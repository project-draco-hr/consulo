{
  RootModelImpl oldModel=myRootModel;
  final VirtualFilePointerListener listener=((ProjectRootManagerImpl)ProjectRootManager.getInstance(myModule.getProject())).getVirtualFilePointerListener();
  myRootModel=new RootModelImpl(myRootModel,this,false,listener,myFilePointerManager,myProjectRootManager);
  oldModel.disposeModel();
  final ArrayList<RootModelComponentBase> components=myRootModel.myComponents;
  for (int i=0; i < components.size(); i++) {
    RootModelComponentBase rootModelComponentBase=components.get(i);
    rootModelComponentBase.moduleAdded();
  }
  isModuleAdded=true;
}
