{
  final PsiJavaFileStubImpl file=new PsiJavaFileStubImpl("do.not.know.yet",true);
  try {
    final ClassReader reader=new ClassReader(bytes);
    final StubBuildingVisitor<VirtualFile> classVisitor=new StubBuildingVisitor<VirtualFile>(vFile,VirtualFileInnerClassStrategy.INSTANCE,file,0);
    try {
      reader.accept(classVisitor,ClassReader.SKIP_FRAMES);
    }
 catch (    OutOfOrderInnerClassException e) {
      return null;
    }
    @SuppressWarnings("unchecked") final PsiClassStub<PsiClass> result=(PsiClassStub<PsiClass>)classVisitor.getResult();
    if (result == null)     return null;
    file.setPackageName(getPackageName(result));
    return file;
  }
 catch (  Exception e) {
    LOG.debug(vFile.getPath(),e);
    throw new ClsFormatException();
  }
}
