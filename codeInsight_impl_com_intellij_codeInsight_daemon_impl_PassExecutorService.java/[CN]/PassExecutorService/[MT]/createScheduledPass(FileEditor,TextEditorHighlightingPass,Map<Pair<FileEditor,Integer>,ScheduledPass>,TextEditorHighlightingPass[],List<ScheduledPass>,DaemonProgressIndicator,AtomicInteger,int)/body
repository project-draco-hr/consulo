{
  int passId=pass.getId();
  Pair<FileEditor,Integer> key=Pair.create(fileEditor,passId);
  ScheduledPass scheduledPass=toBeSubmitted.get(key);
  if (scheduledPass != null)   return scheduledPass;
  scheduledPass=new ScheduledPass(fileEditor,pass,updateProgress,myThreadsToStartCountdown,jobPriority);
  toBeSubmitted.put(key,scheduledPass);
  for (  int predecessorId : pass.getCompletionPredecessorIds()) {
    Pair<FileEditor,Integer> predkey=Pair.create(fileEditor,predecessorId);
    ScheduledPass predecessor=toBeSubmitted.get(predkey);
    if (predecessor == null) {
      TextEditorHighlightingPass textEditorPass=findPassById(predecessorId,textEditorHighlightingPasses);
      predecessor=textEditorPass == null ? null : createScheduledPass(fileEditor,textEditorPass,toBeSubmitted,textEditorHighlightingPasses,freePasses,updateProgress,myThreadsToStartCountdown,jobPriority);
    }
    if (predecessor != null) {
      predecessor.mySuccessorsOnCompletion.add(scheduledPass);
      scheduledPass.myRunningPredecessorsCount.incrementAndGet();
    }
  }
  for (  int predecessorId : pass.getStartingPredecessorIds()) {
    Pair<FileEditor,Integer> predkey=Pair.create(fileEditor,predecessorId);
    ScheduledPass predecessor=toBeSubmitted.get(predkey);
    if (predecessor == null) {
      TextEditorHighlightingPass textEditorPass=findPassById(predecessorId,textEditorHighlightingPasses);
      predecessor=textEditorPass == null ? null : createScheduledPass(fileEditor,textEditorPass,toBeSubmitted,textEditorHighlightingPasses,freePasses,updateProgress,myThreadsToStartCountdown,jobPriority);
    }
    if (predecessor != null) {
      predecessor.mySuccessorsOnSubmit.add(scheduledPass);
      scheduledPass.myRunningPredecessorsCount.incrementAndGet();
    }
  }
  if (scheduledPass.myRunningPredecessorsCount.get() == 0 && !freePasses.contains(scheduledPass)) {
    freePasses.add(scheduledPass);
  }
  return scheduledPass;
}
