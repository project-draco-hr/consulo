{
  final boolean wasCanceled=myUpdateProgress.isCanceled();
  final boolean wasRunning=myUpdateProgress.isRunning();
  final FileEditor editor=pass.myFileEditor;
  if (editor != null && !wasCanceled && wasRunning) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        if (myProject.isDisposed())         return;
        if (editor.getComponent().isDisplayable() || ApplicationManager.getApplication().isUnitTestMode()) {
          pass.myPass.applyInformationToEditor();
          if (editor instanceof TextEditor) {
            LOG.debug("Apply " + pass.myPass);
            ((DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(myProject)).repaintErrorStripeRenderer(((TextEditor)editor).getEditor());
          }
        }
      }
    }
,ModalityState.stateForComponent(editor.getComponent()));
  }
}
