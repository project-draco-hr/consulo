{
  int passId=pass.getId();
  Pair<FileEditor,Integer> key=Pair.create(fileEditor,passId);
  ScheduledPass scheduledPass=toBeSubmitted.get(key);
  if (scheduledPass != null)   return scheduledPass;
  int[] completionPredecessorIds=pass.getCompletionPredecessorIds();
  scheduledPass=new ScheduledPass(fileEditor,pass,updateProgress,myThreadsToStartCountdown,modificationCount);
  toBeSubmitted.put(key,scheduledPass);
  for (  int predecessorId : completionPredecessorIds) {
    Pair<FileEditor,Integer> predkey=Pair.create(fileEditor,predecessorId);
    ScheduledPass predecessor=toBeSubmitted.get(predkey);
    if (predecessor == null) {
      TextEditorHighlightingPass textEditorPass=findPassById(predecessorId,textEditorHighlightingPasses);
      predecessor=textEditorPass == null ? null : createScheduledPass(fileEditor,textEditorPass,toBeSubmitted,textEditorHighlightingPasses,freePasses,updateProgress,myThreadsToStartCountdown,modificationCount);
    }
    if (predecessor != null) {
      predecessor.mySuccessorsOnCompletion.add(scheduledPass);
      scheduledPass.myRunningPredecessorsCount.incrementAndGet();
    }
  }
  int[] startingPredecessorIds=pass.getStartingPredecessorIds();
  for (  int predecessorId : startingPredecessorIds) {
    Pair<FileEditor,Integer> predkey=Pair.create(fileEditor,predecessorId);
    ScheduledPass predecessor=toBeSubmitted.get(predkey);
    if (predecessor == null) {
      TextEditorHighlightingPass textEditorPass=findPassById(predecessorId,textEditorHighlightingPasses);
      predecessor=textEditorPass == null ? null : createScheduledPass(fileEditor,textEditorPass,toBeSubmitted,textEditorHighlightingPasses,freePasses,updateProgress,myThreadsToStartCountdown,modificationCount);
    }
    if (predecessor != null) {
      predecessor.mySuccessorsOnSubmit.add(scheduledPass);
      scheduledPass.myRunningPredecessorsCount.incrementAndGet();
    }
  }
  if (scheduledPass.myRunningPredecessorsCount.get() == 0 && !freePasses.contains(scheduledPass)) {
    freePasses.add(scheduledPass);
  }
  return scheduledPass;
}
