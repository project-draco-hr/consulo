{
  myParentRepo.createFile("d.txt","d");
  myParentRepo.addCommit("empty");
  myParentRepo.createBranch("someotherbranch");
  annotateFirst(first);
  annotateSecond();
  Assert.assertFalse(myFirstClosed);
  Assert.assertFalse(mySecondClosed);
  myRepo.pull();
  myRepo.push();
  myBrotherRepo.pull();
  myBrotherRepo.checkout("master");
  final VirtualFile child=myBrotherRepo.getVFRootDir().findChild("a.txt");
  Assert.assertNotNull(child);
  editFileInCommand(myProject,child,"1\n2+\n3---\n");
  myBrotherRepo.addCommit("brother_commit");
  myBrotherRepo.push();
  Assert.assertFalse(myFirstClosed);
  Assert.assertFalse(mySecondClosed);
  imitInternalUpdate();
  Assert.assertTrue(myFirstClosed);
  Assert.assertFalse(mySecondClosed);
}
