{
  final VirtualFile resFile=findOrCreateResourceFile(facet,fileName,dirName);
  if (resFile == null || !ReadonlyStatusHandler.ensureFilesWritable(facet.getModule().getProject(),resFile)) {
    return null;
  }
  final Resources resources=AndroidUtils.loadDomElement(facet.getModule(),resFile,Resources.class);
  if (resources == null) {
    reportError(facet.getModule().getProject(),AndroidBundle.message("not.resource.file.error",fileName));
    return null;
  }
  final ResourceElement element=AndroidResourceUtil.addValueResource(resourceType.getName(),resources);
  element.getName().setValue(resourceName);
  if (value.length() > 0) {
    element.setStringValue(value);
  }
  return element;
}
