{
  final ThrowableComputable<VcsHistorySession,VcsException> throwableComputable=new ThrowableComputable<VcsHistorySession,VcsException>(){
    public VcsHistorySession compute() throws VcsException {
      final VcsHistorySession sessionFor=myDelegate.createSessionFor(filePath);
      if (backgroundSpecialization != null) {
        backgroundSpecialization.consume(sessionFor);
      }
      return sessionFor;
    }
  }
;
  final VcsBackgroundableActions resultingActionKey=actionKey == null ? VcsBackgroundableActions.CREATE_HISTORY_SESSION : actionKey;
  final Object key=VcsBackgroundableActions.keyFrom(filePath);
  if (silent) {
    VcsBackgroundableComputable.createAndRunSilent(myProject,resultingActionKey,key,VcsBundle.message("loading.file.history.progress"),throwableComputable,continuation);
  }
 else {
    VcsBackgroundableComputable.createAndRun(myProject,resultingActionKey,key,VcsBundle.message("loading.file.history.progress"),VcsBundle.message("message.title.could.not.load.file.history"),throwableComputable,continuation,null);
  }
}
