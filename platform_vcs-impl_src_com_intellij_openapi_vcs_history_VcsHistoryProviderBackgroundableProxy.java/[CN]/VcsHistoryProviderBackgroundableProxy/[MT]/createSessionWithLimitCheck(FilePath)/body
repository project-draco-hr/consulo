{
  final LimitHistoryCheck check=new LimitHistoryCheck(myProject,filePath.getPath());
  final VcsAppendableHistoryPartnerAdapter partner=new VcsAppendableHistoryPartnerAdapter(){
    @Override public void acceptRevision(    VcsFileRevision revision){
      check.checkNumber();
      super.acceptRevision(revision);
    }
  }
;
  try {
    myDelegate.reportAppendableHistory(filePath,partner);
  }
 catch (  ProcessCanceledException e) {
    if (!check.isOver())     throw e;
  }
  return partner.getSession();
}
