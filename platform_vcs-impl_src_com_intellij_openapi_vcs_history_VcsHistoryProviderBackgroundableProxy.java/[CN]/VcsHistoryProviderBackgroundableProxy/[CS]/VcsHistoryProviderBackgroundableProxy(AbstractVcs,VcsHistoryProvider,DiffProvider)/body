{
  myDelegate=delegate;
  myProject=vcs.getProject();
  myConfiguration=VcsConfiguration.getInstance(myProject);
  myCachesHistory=myDelegate instanceof VcsCacheableHistorySessionFactory;
  myDiffProvider=diffProvider;
  myVcsHistoryCache=ProjectLevelVcsManager.getInstance(myProject).getVcsHistoryCache();
  myType=vcs.getType();
  myHistoryComputerFactory=new HistoryComputerFactory(){
    @Override public ThrowableComputable<VcsHistorySession,VcsException> create(    FilePath filePath,    Consumer<VcsHistorySession> consumer,    VcsKey vcsKey){
      if (myCachesHistory) {
        return new CachingHistoryComputer(filePath,consumer,vcsKey);
      }
 else {
        return new SimpleHistoryComputer(filePath,consumer);
      }
    }
  }
;
}
