{
  VcsHistorySession session=null;
  session=getSessionFromCacheWithLastRevisionCheck(myFilePath,myVcsKey);
  if (session == null) {
    session=createSessionWithLimitCheck(myFilePath);
    final FilePath correctedPath=((VcsCacheableHistorySessionFactory<Serializable,VcsAbstractHistorySession>)myDelegate).getUsedFilePath((VcsAbstractHistorySession)session);
    myVcsHistoryCache.put(myFilePath,correctedPath,myVcsKey,(VcsAbstractHistorySession)((VcsAbstractHistorySession)session).copy(),(VcsCacheableHistorySessionFactory<Serializable,VcsAbstractHistorySession>)myDelegate,true);
  }
  if (myConsumer != null) {
    myConsumer.consume(session);
  }
  return session;
}
