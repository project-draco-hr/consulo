{
  myEditorManagerListener=new MyEditorManagerListener();
  myAnActionListener=new MyAnActionListener();
  actionManagerEx.addAnActionListener(myAnActionListener);
  myCaretMoveListener=new CaretAdapter(){
    @Override public void caretPositionChanged(    CaretEvent e){
      hideHints(HIDE_BY_ANY_KEY,false,false);
    }
  }
;
  final MyProjectManagerListener projectManagerListener=new MyProjectManagerListener();
  for (  Project project : projectManager.getOpenProjects()) {
    projectManagerListener.projectOpened(project);
  }
  projectManager.addProjectManagerListener(projectManagerListener);
  myEditorMouseListener=new EditorMouseAdapter(){
    @Override public void mousePressed(    EditorMouseEvent event){
      hideAllHints();
    }
  }
;
  myVisibleAreaListener=new VisibleAreaListener(){
    @Override public void visibleAreaChanged(    VisibleAreaEvent e){
      updateScrollableHints(e);
      if (e.getOldRectangle() == null || e.getOldRectangle().x != e.getNewRectangle().x || e.getOldRectangle().y != e.getNewRectangle().y) {
        hideHints(HIDE_BY_SCROLLING,false,false);
      }
    }
  }
;
  myEditorFocusListener=new FocusAdapter(){
    @Override public void focusLost(    final FocusEvent e){
      myHideAlarm.addRequest(new Runnable(){
        private boolean myNotFocused;
        @Override public void run(){
          boolean notFocused=!JBPopupFactory.getInstance().isChildPopupFocused(e.getComponent());
          if (myNotFocused && notFocused) {
            hideAllHints();
          }
          myNotFocused=notFocused;
        }
      }
,200);
    }
    @Override public void focusGained(    FocusEvent e){
      myHideAlarm.cancelAllRequests();
    }
  }
;
  myEditorDocumentListener=new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent event){
      LOG.assertTrue(SwingUtilities.isEventDispatchThread());
      if (event.getOldLength() == 0 && event.getNewLength() == 0)       return;
      HintInfo[] infos=getHintsStackArray();
      for (      HintInfo info : infos) {
        if ((info.flags & HIDE_BY_TEXT_CHANGE) != 0) {
          if (info.hint.isVisible()) {
            info.hint.hide();
          }
          myHintsStack.remove(info);
        }
      }
      if (myHintsStack.isEmpty()) {
        updateLastEditor(null);
      }
    }
  }
;
}
