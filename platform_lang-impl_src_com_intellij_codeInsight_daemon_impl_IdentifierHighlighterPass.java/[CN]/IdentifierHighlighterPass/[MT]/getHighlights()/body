{
  if (myReadAccessRanges.isEmpty() && myWriteAccessRanges.isEmpty()) {
    return Collections.emptyList();
  }
  Set<Pair<Object,TextRange>> existingMarkupTooltips=new HashSet<Pair<Object,TextRange>>();
  for (  RangeHighlighter highlighter : myEditor.getMarkupModel().getAllHighlighters()) {
    existingMarkupTooltips.add(Pair.create(highlighter.getErrorStripeTooltip(),new TextRange(highlighter.getStartOffset(),highlighter.getEndOffset())));
  }
  List<HighlightInfo> result=new ArrayList<HighlightInfo>(myReadAccessRanges.size() + myWriteAccessRanges.size());
  for (  TextRange range : myReadAccessRanges) {
    ContainerUtil.addIfNotNull(createHighlightInfo(range,HighlightInfoType.ELEMENT_UNDER_CARET_READ,existingMarkupTooltips),result);
  }
  for (  TextRange range : myWriteAccessRanges) {
    ContainerUtil.addIfNotNull(createHighlightInfo(range,HighlightInfoType.ELEMENT_UNDER_CARET_WRITE,existingMarkupTooltips),result);
  }
  return result;
}
