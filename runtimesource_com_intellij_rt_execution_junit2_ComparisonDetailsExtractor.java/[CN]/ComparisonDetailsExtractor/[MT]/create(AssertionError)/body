{
  try {
    String expected=assertion instanceof ComparisonFailure ? (String)EXPECTED_FIELD.get(assertion) : ((org.junit.ComparisonFailure)assertion).getExpected();
    String actual=assertion instanceof ComparisonFailure ? (String)ACTUAL_FIELD.get(assertion) : ((org.junit.ComparisonFailure)assertion).getActual();
    return new ComparisonDetailsExtractor(assertion,expected,actual);
  }
 catch (  Throwable e) {
    return new ExceptionPacketFactory(PoolOfTestStates.FAILED_INDEX,assertion);
  }
}
