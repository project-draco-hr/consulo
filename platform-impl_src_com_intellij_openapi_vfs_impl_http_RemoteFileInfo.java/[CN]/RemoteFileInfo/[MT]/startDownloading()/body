{
  LOG.debug("Downloading requested");
  File localFile;
synchronized (myLock) {
    if (myDownloaded) {
      LOG.debug("File already downloaded: " + myLocalVirtualFile);
      return;
    }
    if (myErrorMessage != null) {
      LOG.debug("Error occured: " + myErrorMessage);
      return;
    }
    if (myLocalFile != null) {
      LOG.debug("Downloading in progress");
      return;
    }
    try {
      myLocalFile=myManager.getStorage().createLocalFile(myUrl);
      LOG.debug("Local file created: " + myLocalFile.getAbsolutePath());
    }
 catch (    IOException e) {
      LOG.info(e);
      errorOccured(VfsBundle.message("cannot.create.local.file",e.getMessage()));
      return;
    }
    myCancelled=false;
    localFile=myLocalFile;
  }
  myContentProvider.saveContent(myUrl,localFile,this);
}
