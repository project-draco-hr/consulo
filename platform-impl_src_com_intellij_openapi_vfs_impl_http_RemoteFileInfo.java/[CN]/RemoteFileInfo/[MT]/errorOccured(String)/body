{
  LOG.debug("Error: " + errorMessage);
  FileDownloadingListener[] listeners;
synchronized (myLock) {
    myLocalVirtualFile=null;
    myErrorMessage=errorMessage;
    listeners=myListeners.toArray(new FileDownloadingListener[myListeners.size()]);
  }
  for (  FileDownloadingListener listener : listeners) {
    listener.errorOccured(errorMessage);
  }
}
