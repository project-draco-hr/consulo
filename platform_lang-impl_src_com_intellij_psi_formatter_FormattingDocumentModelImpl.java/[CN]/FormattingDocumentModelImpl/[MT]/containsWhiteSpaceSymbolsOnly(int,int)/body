{
  WhiteSpaceFormattingStrategy strategy=myWhiteSpaceStrategy;
  if (strategy.check(myDocument.getCharsSequence(),startOffset,endOffset) >= endOffset) {
    return true;
  }
  PsiElement injectedElement=myFile != null ? InjectedLanguageUtil.findElementAtNoCommit(myFile,startOffset) : null;
  if (injectedElement != null) {
    Language injectedLanguage=injectedElement.getLanguage();
    if (!injectedLanguage.equals(myFile.getLanguage())) {
      WhiteSpaceFormattingStrategy localStrategy=WhiteSpaceFormattingStrategyFactory.getStrategy(injectedLanguage);
      if (localStrategy != null) {
        return localStrategy.check(myDocument.getCharsSequence(),startOffset,endOffset) >= endOffset;
      }
    }
  }
  return false;
}
