{
  if (!changedViaPsi) {
    return myWhiteSpaceStrategy.adjustWhiteSpaceIfNecessary(whiteSpaceText,myDocument.getCharsSequence(),startOffset,endOffset,mySettings);
  }
  final PsiElement element=myFile.findElementAt(startOffset);
  if (element == null) {
    return whiteSpaceText;
  }
 else {
    return myWhiteSpaceStrategy.adjustWhiteSpaceIfNecessary(whiteSpaceText,element,startOffset,endOffset,mySettings);
  }
}
