{
  myDocument=document;
  myFile=file;
  if (file != null) {
    Language language=file.getLanguage();
    myWhiteSpaceStrategy=WhiteSpaceFormattingStrategyFactory.getStrategy(language);
  }
 else {
    myWhiteSpaceStrategy=WhiteSpaceFormattingStrategyFactory.getStrategy();
  }
  mySettings=CodeStyleSettingsManager.getSettings(file != null ? file.getProject() : null);
}
