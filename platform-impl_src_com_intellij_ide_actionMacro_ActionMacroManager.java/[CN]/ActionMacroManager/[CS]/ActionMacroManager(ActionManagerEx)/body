{
  myActionManager=actionManagerEx;
  myActionManager.addAnActionListener(new AnActionListener(){
    public void beforeActionPerformed(    AnAction action,    DataContext dataContext,    AnActionEvent event){
      if (myIsRecording) {
        String id=myActionManager.getId(action);
        if (id != null && !"StartStopMacroRecording".equals(id)) {
          myRecordingMacro.appendAction(id);
        }
        myLastActionInputEvent=event.getInputEvent();
      }
    }
    public void beforeEditorTyping(    char c,    DataContext dataContext){
    }
    public void afterActionPerformed(    final AnAction action,    final DataContext dataContext,    AnActionEvent event){
    }
  }
);
  myKeyProcessor=new MyKeyPostpocessor();
  IdeEventQueue.getInstance().addPostprocessor(myKeyProcessor,null);
}
