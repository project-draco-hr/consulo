def _run(self, cmd, *args, **kwargs):
    cmdline = self._cmdline(cmd, *args, **kwargs)
    self.ui.debug(('running: %s\n' % (cmdline,)))
    self.prerun()
    try:
        return util.popen(cmdline)
    finally:
        self.postrun()
