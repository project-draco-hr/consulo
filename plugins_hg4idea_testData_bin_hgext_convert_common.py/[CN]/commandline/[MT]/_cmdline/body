def _cmdline(self, cmd, *args, **kwargs):
    cmdline = ([self.command, cmd] + list(args))
    for (k, v) in kwargs.iteritems():
        if (len(k) == 1):
            cmdline.append(('-' + k))
        else:
            cmdline.append(('--' + k.replace('_', '-')))
        try:
            if (len(k) == 1):
                cmdline.append(('' + v))
            else:
                cmdline[(-1)] += ('=' + v)
        except TypeError:
            pass
    cmdline = [util.shellquote(arg) for arg in cmdline]
    if (not self.ui.debugflag):
        cmdline += ['2>', util.nulldev]
    cmdline += ['<', util.nulldev]
    cmdline = ' '.join(cmdline)
    return cmdline
