def __setitem__(self, key, value):
    if (self.fp is None):
        try:
            self.fp = open(self.path, 'a')
        except IOError as err:
            raise util.Abort((_('could not open map file %r: %s') % (self.path, err.strerror)))
    self.fp.write(('%s %s\n' % (key, value)))
    self.fp.flush()
    super(mapfile, self).__setitem__(key, value)
