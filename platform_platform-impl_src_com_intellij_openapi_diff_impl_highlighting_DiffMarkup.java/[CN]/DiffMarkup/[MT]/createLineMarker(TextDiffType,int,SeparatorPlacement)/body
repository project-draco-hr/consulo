{
  MarkupModel markupModel=getMarkupModel();
  Document document=getDocument();
  if (markupModel == null || document == null || type == null) {
    return null;
  }
  final Color color=getLineSeparatorColorForType(type);
  if (color == null) {
    return null;
  }
  RangeHighlighter marker=markupModel.addLineHighlighter(line,LAYER,null);
  marker.setLineSeparatorColor(color);
  marker.setLineSeparatorPlacement(placement);
  marker.setLineSeparatorRenderer(new LineSeparatorRenderer(){
    @Override public void drawLine(    Graphics g,    int x1,    int x2,    int y){
      DiffUtil.drawDoubleShadowedLine((Graphics2D)g,x1,x2,y,color);
    }
  }
);
  if (type.getType().equals(TextDiffTypeEnum.DELETED)) {
    marker.setErrorStripeMarkColor(color);
  }
  return marker;
}
