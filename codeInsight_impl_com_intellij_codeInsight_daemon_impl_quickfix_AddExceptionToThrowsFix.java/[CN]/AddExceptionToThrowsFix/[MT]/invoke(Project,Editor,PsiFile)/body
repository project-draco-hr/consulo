{
  if (!CodeInsightUtil.prepareFileForWrite(file))   return;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final PsiMethod targetMethod=PsiTreeUtil.getParentOfType(myWrongElement,PsiMethod.class);
  PsiElement element=findElement(myWrongElement,targetMethod);
  LOG.assertTrue(element != null);
  final PsiClassType[] unhandledExceptions=filterInProjectExceptions(ExceptionUtil.getUnhandledExceptions(element),targetMethod);
  addExceptionsToThrowsList(project,targetMethod,unhandledExceptions);
}
