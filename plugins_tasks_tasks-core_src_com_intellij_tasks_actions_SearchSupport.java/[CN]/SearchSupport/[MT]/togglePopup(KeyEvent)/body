{
  final KeyStroke stroke=KeyStroke.getKeyStroke(e.getKeyCode(),e.getModifiers());
  final Object action=((InputMap)UIManager.get("ComboBox.ancestorInputMap")).get(stroke);
  if ("selectNext".equals(action)) {
    if (!isPopupShowing() && myAutoPopup) {
      showPopup(true);
      return true;
    }
 else {
      return false;
    }
  }
 else   if ("togglePopup".equals(action)) {
    if (isPopupShowing()) {
      hideCurrentPopup();
    }
 else {
      showPopup(true);
    }
    return true;
  }
 else {
    final Keymap active=KeymapManager.getInstance().getActiveKeymap();
    final String[] ids=active.getActionIds(stroke);
    if (ids.length > 0 && "CodeCompletion".equals(ids[0])) {
      showPopup(true);
    }
  }
  return false;
}
