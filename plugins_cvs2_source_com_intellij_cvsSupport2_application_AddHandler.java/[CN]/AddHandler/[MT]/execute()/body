{
  for (Iterator each=myAllFiles.iterator(); each.hasNext(); ) {
    VirtualFile file=(VirtualFile)each.next();
    if (!CvsUtil.fileIsUnderCvs(file.getParent())) {
      continue;
    }
 else     if (CvsUtil.fileIsLocallyRemoved(file)) {
      CvsUtil.restoreFile(file);
    }
 else     if (CvsUtil.fileIsUnderCvs(file)) {
      continue;
    }
 else {
      myAddedFiles.add(file);
    }
  }
  if (!myAddedFiles.isEmpty()) {
    if (CvsVcs2.getInstance(myProject).getAddConfirmation().getValue() != VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          if (!myCvsStorageComponent.getIsActive())           return;
          AddFileOrDirectoryAction.createActionToAddNewFileAutomatically().actionPerformed(createDataContext(myAddedFiles));
        }
      }
);
    }
  }
}
