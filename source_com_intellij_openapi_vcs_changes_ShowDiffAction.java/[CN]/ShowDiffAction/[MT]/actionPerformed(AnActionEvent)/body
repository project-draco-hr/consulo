{
  Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  Change[] changes=(Change[])e.getDataContext().getData(DataConstants.CHANGES);
  if (project == null || changes == null)   return;
  int index=0;
  if (changes.length == 1) {
    final Change selectedChange=changes[0];
    ChangeList changeList=ChangeListManager.getInstance(project).getChangeList(selectedChange);
    if (changeList != null) {
      final Collection<Change> changesInList=changeList.getChanges();
      changes=changesInList.toArray(new Change[changesInList.size()]);
      for (int i=0; i < changes.length; i++) {
        if (changes[i] == selectedChange) {
          index=i;
          break;
        }
      }
    }
  }
  showDiffForChange(changes,index,project);
}
