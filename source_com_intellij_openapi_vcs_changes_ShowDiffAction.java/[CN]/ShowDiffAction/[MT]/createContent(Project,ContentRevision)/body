{
  if (revision == null)   return new SimpleContent("");
  if (revision instanceof CurrentContentRevision) {
    final CurrentContentRevision current=(CurrentContentRevision)revision;
    final VirtualFile vFile=current.getVirtualFile();
    return vFile != null ? new FileContent(project,vFile) : new SimpleContent("");
  }
  final String revisionContent=revision.getContent();
  SimpleContent content=revisionContent == null ? new SimpleContent("") : new SimpleContent(revisionContent,revision.getFile().getFileType());
  content.setReadOnly(true);
  return content;
}
