{
  mySelection=FormEditingUtil.getSelectedComponents(editor);
  Collections.sort(mySelection,new Comparator<RadComponent>(){
    public int compare(    final RadComponent o1,    final RadComponent o2){
      if (o1.getParent() == o2.getParent()) {
        int result=o1.getConstraints().getRow() - o2.getConstraints().getRow();
        if (result == 0) {
          result=o1.getConstraints().getColumn() - o2.getConstraints().getColumn();
        }
        return result;
      }
      return 0;
    }
  }
);
  RadComponent componentUnderMouse=null;
  int componentUnderMouseIndex=mySelection.size() == 0 ? -1 : 0;
  if (pnt != null) {
    for (int i=0; i < mySelection.size(); i++) {
      RadComponent c=mySelection.get(i);
      Point aPoint=SwingUtilities.convertPoint(editor.getRootContainer().getDelegee(),pnt,c.getParent().getDelegee());
      if (c.getBounds().contains(aPoint)) {
        aPoint=SwingUtilities.convertPoint(editor.getRootContainer().getDelegee(),pnt,c.getDelegee());
        mySelection.set(i,c.getComponentToDrag(aPoint));
        componentUnderMouseIndex=i;
      }
    }
  }
  fillOriginalConstraints();
  if (componentUnderMouseIndex >= 0) {
    componentUnderMouse=mySelection.get(componentUnderMouseIndex);
    myComponentUnderMouseColumn=myOriginalConstraints[componentUnderMouseIndex].getColumn();
    myComponentUnderMouseRow=myOriginalConstraints[componentUnderMouseIndex].getRow();
  }
  LOG.debug("myComponentUnderMouseColumn=" + myComponentUnderMouseColumn + ", myComponentUnderMouseRow="+ myComponentUnderMouseRow);
  if (mySelection.size() > 1 && componentUnderMouse != null) {
    for (    GridConstraints constraints : myOriginalConstraints) {
      myDragRelativeColumn=Math.max(myDragRelativeColumn,componentUnderMouse.getConstraints().getColumn() - constraints.getColumn());
    }
  }
  for (  RadComponent c : mySelection) {
    JComponent delegee=c.getDelegee();
    if (c == componentUnderMouse && pnt != null) {
      if (delegee.getX() > pnt.x && delegee.getX() + delegee.getWidth() < pnt.x) {
        myDragDeltaX=pnt.x - (delegee.getX() + delegee.getWidth() / 2);
      }
      if (delegee.getY() > pnt.y && delegee.getY() + delegee.getHeight() < pnt.y) {
        myDragDeltaY=pnt.y - (delegee.getY() + delegee.getHeight() / 2);
      }
      myHasDragDelta=true;
    }
  }
}
