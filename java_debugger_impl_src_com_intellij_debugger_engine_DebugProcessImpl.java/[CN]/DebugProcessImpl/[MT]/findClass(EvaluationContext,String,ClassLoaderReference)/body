{
  try {
    DebuggerManagerThreadImpl.assertIsManagerThread();
    ReferenceType result=null;
    final VirtualMachineProxyImpl vmProxy=getVirtualMachineProxy();
    if (vmProxy == null) {
      throw new VMDisconnectedException();
    }
    for (    final ReferenceType refType : vmProxy.classesByName(className)) {
      if (refType.isPrepared() && isVisibleFromClassLoader(classLoader,refType)) {
        result=refType;
        break;
      }
    }
    final EvaluationContextImpl evalContext=(EvaluationContextImpl)evaluationContext;
    if (result == null && evalContext.isAutoLoadClasses()) {
      return loadClass(evalContext,className,classLoader);
    }
    return result;
  }
 catch (  InvocationException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
catch (  ClassNotLoadedException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
catch (  IncompatibleThreadStateException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
catch (  InvalidTypeException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
}
