{
  Location location=JavaExecutionUtil.stepIntoSingleClass(context.getLocation());
  if (location == null)   return false;
  final PsiElement element=location.getPsiElement();
  if (!element.isPhysical())   return false;
  PsiElement currentElement=element;
  PsiMethod method;
  while ((method=findMain(currentElement)) != null) {
    final PsiClass aClass=method.getContainingClass();
    if (ConfigurationUtil.MAIN_CLASS.value(aClass)) {
      sourceElement.set(method);
      setupConfiguration(configuration,aClass,context);
      return true;
    }
    currentElement=method.getParent();
  }
  final PsiClass aClass=ApplicationConfigurationType.getMainClass(element);
  if (aClass == null)   return false;
  sourceElement.set(aClass);
  setupConfiguration(configuration,aClass,context);
  return true;
}
