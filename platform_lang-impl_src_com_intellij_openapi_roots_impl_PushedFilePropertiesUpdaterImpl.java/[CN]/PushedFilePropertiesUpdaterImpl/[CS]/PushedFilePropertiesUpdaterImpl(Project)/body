{
  myProject=project;
  myPushers=Extensions.getExtensions(FilePropertyPusher.EP_NAME);
  myFilePushers=ContainerUtil.findAllAsArray(myPushers,new Condition<FilePropertyPusher>(){
    @Override public boolean value(    FilePropertyPusher pusher){
      return !pusher.pushDirectoriesOnly();
    }
  }
);
  StartupManager.getInstance(project).registerPreStartupActivity(new Runnable(){
    @Override public void run(){
      project.getMessageBus().connect().subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
        @Override public void rootsChanged(        final ModuleRootEvent event){
          for (          FilePropertyPusher pusher : myPushers) {
            pusher.afterRootsChanged(project);
          }
        }
      }
);
    }
  }
);
}
