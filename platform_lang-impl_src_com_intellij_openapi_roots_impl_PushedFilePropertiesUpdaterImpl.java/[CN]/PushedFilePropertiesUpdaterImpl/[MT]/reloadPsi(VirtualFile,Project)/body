{
  final FileManagerImpl fileManager=(FileManagerImpl)((PsiManagerEx)PsiManager.getInstance(project)).getFileManager();
  if (fileManager.findCachedViewProvider(file) != null) {
    Runnable runnable=new Runnable(){
      @Override public void run(){
        WriteAction.run(new ThrowableRunnable<RuntimeException>(){
          @Override public void run() throws RuntimeException {
            fileManager.forceReload(file);
          }
        }
);
      }
    }
;
    if (ApplicationManager.getApplication().isDispatchThread()) {
      runnable.run();
    }
 else {
      TransactionGuard.submitTransaction(project,runnable);
    }
  }
}
