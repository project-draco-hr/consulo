{
  PsiElement selectedElement=getSelectedElement(editor,file);
  PsiElement sourceElement=TestFinderHelper.findSourceElement(selectedElement);
  if (sourceElement == null)   return null;
  List<AdditionalAction> actions=new SmartList<AdditionalAction>();
  Collection<PsiElement> candidates;
  if (TestFinderHelper.isTest(selectedElement)) {
    candidates=TestFinderHelper.findClassesForTest(selectedElement);
  }
 else {
    candidates=TestFinderHelper.findTestsForClass(selectedElement);
    actions.add(new AdditionalAction(){
      @Override public String getText(){
        return "Create New Test...";
      }
      @Override public Icon getIcon(){
        return IconLoader.getIcon("/actions/intentionBulb.png");
      }
      @Override public void execute(){
        final TestCreator creator=LanguageTestCreators.INSTANCE.forLanguage(file.getLanguage());
        if (creator != null)         creator.createTest(file.getProject(),editor,file);
      }
    }
);
  }
  return new GotoData(sourceElement,candidates.toArray(new PsiElement[candidates.size()]),actions);
}
