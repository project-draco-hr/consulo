{
  RadComponent dropTargetComponent=null;
  ComponentDragObject dragObject=null;
  final DraggedComponentList dcl=DraggedComponentList.fromTransferable(dtde.getTransferable());
  if (dcl != null) {
    dragObject=dcl;
  }
 else {
    ComponentItem componentItem=SimpleTransferable.getData(dtde.getTransferable(),ComponentItem.class);
    if (componentItem != null) {
      dragObject=componentItem;
    }
  }
  boolean canDrop=false;
  if (dragObject != null) {
    final TreePath path=getPathForLocation((int)dtde.getLocation().getX(),(int)dtde.getLocation().getY());
    final RadComponent targetComponent=getComponentFromPath(path);
    if (path != null && targetComponent != null) {
      DropLocation dropLocation=targetComponent.getDropLocation(null);
      canDrop=(dropLocation != null) ? dropLocation.canDrop(dragObject) : targetComponent.canDrop(null,dragObject);
      if (canDrop) {
        dropTargetComponent=targetComponent;
        dtde.acceptDrag(dtde.getDropAction());
      }
    }
  }
  if (!canDrop) {
    dtde.rejectDrag();
  }
  setDropTargetComponent(dropTargetComponent);
}
