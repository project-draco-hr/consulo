{
  final DataContext dataContext=event.getDataContext();
  final VirtualFile vFile=PlatformDataKeys.VIRTUAL_FILE.getData(dataContext);
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (vFile == null || project == null) {
    return;
  }
  final EditorWindow window=EditorWindow.DATA_KEY.getData(dataContext);
  if (window != null) {
    final EditorWindow[] siblings=window.findSiblings();
    if (siblings != null && siblings.length == 1) {
      final EditorWithProviderComposite editorComposite=window.getSelectedEditor();
      final HistoryEntry entry=editorComposite.currentStateAsHistoryEntry();
      ((FileEditorManagerImpl)FileEditorManagerEx.getInstanceEx(project)).openFileImpl3(siblings[0],vFile,true,entry,true);
      window.closeFile(vFile);
    }
  }
}
