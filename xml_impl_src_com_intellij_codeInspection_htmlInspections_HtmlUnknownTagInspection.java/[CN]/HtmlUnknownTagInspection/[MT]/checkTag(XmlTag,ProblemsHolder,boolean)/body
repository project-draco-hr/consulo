{
  if (tag.getUserData(DO_NOT_VALIDATE_KEY) == null) {
    final XmlElementDescriptor descriptor=tag.getDescriptor();
    if (tag instanceof HtmlTag && (descriptor instanceof AnyXmlElementDescriptor || descriptor == null)) {
      final String name=tag.getName();
      if (!isCustomValuesEnabled() || !isCustomValue(name)) {
        final AddCustomTagOrAttributeIntentionAction action=new AddCustomTagOrAttributeIntentionAction(getShortName(),name,XmlEntitiesInspection.UNKNOWN_TAG);
        final String message=XmlErrorMessages.message("unknown.html.tag",name);
        final PsiElement startTagName=XmlTagUtil.getStartTagNameElement(tag);
        final PsiElement endTagName=XmlTagUtil.getEndTagNameElement(tag);
        final CreateNSDeclarationIntentionFix declarationIntentionFix=new CreateNSDeclarationIntentionFix(startTagName,"");
        ProblemHighlightType highlightType=tag.getContainingFile().getContext() == null ? ProblemHighlightType.GENERIC_ERROR_OR_WARNING : ProblemHighlightType.INFORMATION;
        holder.registerProblem(startTagName,message,highlightType,action,declarationIntentionFix);
        if (endTagName != null) {
          holder.registerProblem(endTagName,message,highlightType,action,declarationIntentionFix);
        }
      }
    }
  }
}
