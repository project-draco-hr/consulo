{
  if (doctype != null) {
    String docType=doctype.getDtdUri();
    if (docType == null) {
      final String publicId=doctype.getPublicId();
      if (PsiTreeUtil.getParentOfType(doctype,XmlDocument.class) instanceof HtmlDocumentImpl && publicId != null && publicId.indexOf("-//W3C//DTD HTML") != -1) {
        return HTML4_LOOSE_URI;
      }
 else       if (HtmlUtil.isHtml5Doctype(doctype)) {
        docType=doctype.getLanguage() instanceof HTMLLanguage ? Html5SchemaProvider.HTML5_SCHEMA_LOCATION : Html5SchemaProvider.XHTML5_SCHEMA_LOCATION;
      }
    }
    return docType;
  }
  return null;
}
