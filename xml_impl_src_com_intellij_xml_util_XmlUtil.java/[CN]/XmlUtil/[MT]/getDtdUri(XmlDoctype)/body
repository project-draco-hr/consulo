{
  if (doctype != null) {
    String docType=doctype.getDtdUri();
    if (docType == null && PsiTreeUtil.getParentOfType(doctype,XmlDocument.class) instanceof HtmlDocumentImpl) {
      final String publicId=doctype.getPublicId();
      if (publicId != null && publicId.indexOf("-//W3C//DTD HTML") != -1) {
        return HTML4_LOOSE_URI;
      }
      if (publicId == null)       docType=HTML5_SCHEMA_LOCATION;
    }
    return docType;
  }
  return null;
}
