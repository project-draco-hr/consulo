{
  int type=XmlEntityDecl.CONTEXT_GENERIC_XML;
  PsiElement temp=ref;
  while (temp != null) {
    if (temp instanceof XmlAttributeDecl) {
      type=XmlEntityDecl.CONTEXT_ATTRIBUTE_SPEC;
    }
 else     if (temp instanceof XmlElementDecl) {
      type=XmlEntityDecl.CONTEXT_ELEMENT_CONTENT_SPEC;
    }
 else     if (temp instanceof XmlAttlistDecl) {
      type=XmlEntityDecl.CONTEXT_ATTLIST_SPEC;
    }
 else     if (temp instanceof XmlEntityDecl) {
      type=XmlEntityDecl.CONTEXT_ENTITY_DECL_CONTENT;
    }
 else     if (temp instanceof XmlEnumeratedType) {
      type=XmlEntityDecl.CONTEXT_ENUMERATED_TYPE;
    }
 else     if (temp instanceof XmlAttributeValue) {
      type=XmlEntityDecl.CONTEXT_ATTR_VALUE;
    }
 else {
      temp=temp.getContext();
      continue;
    }
    break;
  }
  return type;
}
