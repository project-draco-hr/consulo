{
  XmlElementDescriptor descriptor=tag.getDescriptor();
  if (descriptor instanceof XmlElementDescriptorImpl) {
    final TypeDescriptor type=((XmlElementDescriptorImpl)descriptor).getType(tag);
    if (type instanceof ComplexTypeDescriptor) {
      final XmlTag[] simpleContent=new XmlTag[1];
      processXmlElements(((ComplexTypeDescriptor)type).getDeclaration(),new PsiElementProcessor(){
        public boolean execute(        final PsiElement element){
          if (element instanceof XmlTag) {
            final XmlTag tag=(XmlTag)element;
            @NonNls final String s=((XmlTag)element).getLocalName();
            if ((s.equals(XSD_SIMPLE_CONTENT_TAG) || s.equals("restriction") && "string".equals(findLocalNameByQualifiedName(tag.getAttributeValue("base")))) && tag.getNamespace().equals(XML_SCHEMA_URI)) {
              simpleContent[0]=tag;
              return false;
            }
          }
          return true;
        }
      }
,true);
      return simpleContent[0];
    }
  }
  return null;
}
