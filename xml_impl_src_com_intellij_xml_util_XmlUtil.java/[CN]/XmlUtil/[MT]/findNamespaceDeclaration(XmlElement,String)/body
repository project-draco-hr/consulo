{
  while (!(xmlElement instanceof XmlTag) && xmlElement != null) {
    final PsiElement parent=xmlElement.getParent();
    if (!(parent instanceof XmlElement))     return null;
    xmlElement=(XmlElement)parent;
  }
  if (xmlElement != null) {
    XmlTag tag=(XmlTag)xmlElement;
    while (tag != null) {
      for (      XmlAttribute attribute : tag.getAttributes()) {
        if (attribute.isNamespaceDeclaration() && attribute.getLocalName().equals(nsName)) {
          return attribute;
        }
      }
      tag=tag.getParentTag();
    }
  }
  return null;
}
