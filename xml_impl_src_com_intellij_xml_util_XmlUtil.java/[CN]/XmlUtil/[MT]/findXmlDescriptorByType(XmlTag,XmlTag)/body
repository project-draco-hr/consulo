{
  XmlElementDescriptor elementDescriptor=null;
  String type=xmlTag.getAttributeValue("type",XML_SCHEMA_INSTANCE_URI);
  if (type == null) {
    String ns=xmlTag.getNamespace();
    if (XmlUtil.ourSchemaUrisList.indexOf(ns) >= 0) {
      type=xmlTag.getAttributeValue("type",null);
    }
  }
  if (type != null) {
    final String namespaceByPrefix=findNamespaceByPrefix(findPrefixByQualifiedName(type),xmlTag);
    XmlNSDescriptor typeDecr=xmlTag.getNSDescriptor(namespaceByPrefix,true);
    if (typeDecr == null && namespaceByPrefix.length() == 0 && context != null) {
      typeDecr=context.getNSDescriptor("",true);
    }
    if (typeDecr instanceof XmlNSDescriptorImpl) {
      final XmlNSDescriptorImpl schemaDescriptor=(XmlNSDescriptorImpl)typeDecr;
      elementDescriptor=schemaDescriptor.getDescriptorByType(type,xmlTag);
    }
  }
  return elementDescriptor;
}
