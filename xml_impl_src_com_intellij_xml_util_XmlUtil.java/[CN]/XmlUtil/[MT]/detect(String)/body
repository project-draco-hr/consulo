{
  int index=0;
  index=skipWhiteSpace(index,text);
  if (!StringUtil.startsWith(text,index,XML_PROLOG_START))   return null;
  index+=XML_PROLOG_START.length();
  while (index < text.length()) {
    index=skipWhiteSpace(index,text);
    if (StringUtil.startsWith(text,index,XML_PROLOG_END))     return null;
    if (StringUtil.startsWith(text,index,ENCODING)) {
      index+=ENCODING.length();
      index=skipWhiteSpace(index,text);
      if (index >= text.length() || text.charAt(index) != '=')       continue;
      index++;
      index=skipWhiteSpace(index,text);
      if (index >= text.length())       continue;
      char quote=text.charAt(index);
      if (quote != '\'' && quote != '\"')       continue;
      index++;
      StringBuilder encoding=new StringBuilder();
      while (index < text.length()) {
        char c=text.charAt(index);
        if (c == quote)         return encoding.toString();
        encoding.append(c);
        index++;
      }
    }
    index++;
  }
  return null;
}
