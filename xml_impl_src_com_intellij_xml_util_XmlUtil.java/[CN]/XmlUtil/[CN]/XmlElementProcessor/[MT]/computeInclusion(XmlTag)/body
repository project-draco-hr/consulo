{
  List<Object> deps=new ArrayList<Object>();
  deps.add(xincludeTag.getContainingFile());
  final XmlFile xmlFile=XmlIncludeHandler.resolveXIncludeFile(xincludeTag);
  PsiElement[] result=null;
  if (xmlFile != null) {
    deps.add(xmlFile);
    final XmlDocument document=xmlFile.getDocument();
    if (document != null) {
      XmlTag rootTag=document.getRootTag();
      if (rootTag != null) {
        final XmlTag[] includeTag=extractXpointer(rootTag,xincludeTag);
        result=ContainerUtil.map(includeTag,new Function<XmlTag,PsiElement>(){
          public PsiElement fun(          final XmlTag xmlTag){
            final PsiElement psiElement=PsiUtilBase.copyElementPreservingOriginalLinks(xmlTag,XmlElement.ORIGINAL_ELEMENT);
            psiElement.putUserData(XmlElement.INCLUDING_ELEMENT,xincludeTag.getParentTag());
            psiElement.putUserData(XmlElement.ORIGINAL_ELEMENT,xmlTag);
            return psiElement;
          }
        }
,new PsiElement[includeTag.length]);
      }
    }
  }
  return new CachedValueProvider.Result<PsiElement[]>(result,deps.toArray());
}
