{
  if (myVirtualGridInfo == null) {
    myVirtualGridInfo=new GridInfo();
    GridInfo gridInfo=getGridInfo();
    Rectangle bounds=getBounds();
    myVirtualGridInfo.width=bounds.width;
    myVirtualGridInfo.height=bounds.height;
    int deltaWidth=bounds.width - (gridInfo.vLines.length == 0 ? 0 : gridInfo.width);
    myVirtualGridInfo.vLines=addLineInfo(gridInfo.vLines,deltaWidth);
    int deltaHeight=bounds.height - gridInfo.height;
    myVirtualGridInfo.hLines=addLineInfo(gridInfo.hLines,deltaHeight);
    List<RadComponent> rows=getChildren();
    if (!rows.isEmpty()) {
      int columnSize=Math.max(1,gridInfo.vLines.length - 1);
      RadComponent[][] components=new RadComponent[rows.size()][columnSize];
      myVirtualGridInfo.components=components;
      if (deltaWidth < 2) {
        myVirtualGridInfo.lastColumn=columnSize - 1;
      }
      if (deltaHeight < 2) {
        myVirtualGridInfo.lastRow=rows.size() - 1;
      }
      for (int i=0; i < components.length; i++) {
        RadComponent row=rows.get(i);
        if (RadTableRowLayout.is(row)) {
          int index=0;
          for (          RadComponent column : row.getChildren()) {
            int cellIndex=getCellIndex(column);
            if (cellIndex > index) {
              index=cellIndex;
            }
            int cellSpan=getCellSnap(column);
            for (int j=0; j < cellSpan; j++) {
              components[i][index++]=column;
            }
          }
        }
 else {
          components[i][0]=row;
        }
      }
    }
  }
  return myVirtualGridInfo;
}
