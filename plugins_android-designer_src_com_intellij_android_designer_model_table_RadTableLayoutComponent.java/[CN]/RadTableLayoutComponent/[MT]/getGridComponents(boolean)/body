{
  GridInfo gridInfo=getGridInfo();
  List<RadComponent> rows=getChildren();
  int columnSize=Math.max(1,gridInfo.vLines.length - 1);
  RadComponent[][] components=new RadComponent[rows.size()][columnSize];
  for (int i=0; i < components.length; i++) {
    RadComponent row=rows.get(i);
    if (RadTableRowLayout.is(row)) {
      int index=0;
      for (      RadComponent column : row.getChildren()) {
        int cellIndex=getCellIndex(column);
        if (cellIndex > index) {
          index=cellIndex;
        }
        int cellSpan=getCellSnap(column);
        if (useSpan) {
          for (int j=0; j < cellSpan; j++) {
            components[i][index++]=column;
          }
        }
 else {
          components[i][index]=column;
          index+=cellSpan;
        }
      }
    }
 else {
      components[i][0]=row;
    }
  }
  return components;
}
