{
  final String outputFilePath=FileUtil.toSystemIndependentName(outputFile.getPath());
  for (  File outputRoot : myOutputs) {
    String outputRootPath=FileUtil.toSystemIndependentName(outputRoot.getPath());
    final String relativePath=FileUtil.getRelativePath(outputRootPath,outputFilePath,'/');
    if (relativePath != null && !relativePath.startsWith("..")) {
      myFileGeneratedEvent.add(outputRootPath,relativePath);
    }
  }
  final SourceToOutputMapping mapping=myContext.getProjectDescriptor().dataManager.getSourceToOutputMap(myTarget);
  for (  String sourcePath : sourcePaths) {
    if (myRegisteredSources.add(FileUtil.toSystemIndependentName(sourcePath))) {
      mapping.setOutput(sourcePath,outputFilePath);
    }
 else {
      mapping.appendOutput(sourcePath,outputFilePath);
    }
  }
}
