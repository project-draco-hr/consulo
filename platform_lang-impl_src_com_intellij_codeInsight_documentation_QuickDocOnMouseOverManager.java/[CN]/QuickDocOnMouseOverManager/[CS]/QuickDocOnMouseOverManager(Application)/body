{
  EditorFactory factory=EditorFactory.getInstance();
  if (factory != null) {
    factory.addEditorFactoryListener(new MyEditorFactoryListener(),application);
  }
  ApplicationManager.getApplication().getMessageBus().connect().subscribe(ApplicationActivationListener.TOPIC,new ApplicationActivationListener.Adapter(){
    @Override public void applicationActivated(    IdeFrame ideFrame){
      myApplicationActive=true;
    }
    @Override public void applicationDeactivated(    IdeFrame ideFrame){
      myApplicationActive=false;
      closeQuickDocIfPossible();
    }
  }
);
}
