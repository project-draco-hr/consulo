{
  if (!canMoveTo(position)) {
    return false;
  }
  final PsiFile psiFile=position.getFile();
  final Document document=PsiDocumentManager.getInstance(getProject()).getDocument(psiFile);
  if (document == null) {
    return false;
  }
  final RangeHighlighter newHighlighter=createHighlighter(myProject,document,position.getLine());
  if (newHighlighter == null) {
    return false;
  }
  final RangeHighlighter oldHighlighter=myHighlighter;
  myHighlighter=newHighlighter;
  reload();
  if (!isValid()) {
    document.getMarkupModel(myProject).removeHighlighter(myHighlighter);
    myHighlighter=oldHighlighter;
    reload();
    return false;
  }
  document.getMarkupModel(myProject).removeHighlighter(oldHighlighter);
  DebuggerManagerEx.getInstanceEx(getProject()).getBreakpointManager().fireBreakpointChanged(this);
  updateUI();
  return true;
}
