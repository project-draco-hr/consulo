{
  final XmlAttribute attribute=getAttribute(qname);
  if (attribute != null) {
    if (value == null) {
      deleteChildInternal(attribute.getNode());
      return null;
    }
    attribute.setValue(value);
    return attribute;
  }
 else   if (value == null) {
    return null;
  }
 else {
    PsiElement xmlAttribute=add(JavaPsiFacade.getInstance(getManager().getProject()).getElementFactory().createXmlAttribute(qname,value));
    while (!(xmlAttribute instanceof XmlAttribute))     xmlAttribute=xmlAttribute.getNextSibling();
    return (XmlAttribute)xmlAttribute;
  }
}
