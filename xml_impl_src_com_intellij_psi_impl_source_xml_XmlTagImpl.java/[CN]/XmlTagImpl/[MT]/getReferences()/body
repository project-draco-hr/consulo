{
  ProgressManager.checkCanceled();
  final ASTNode startTagName=XmlChildRole.START_TAG_NAME_FINDER.findChild(this);
  if (startTagName == null)   return PsiReference.EMPTY_ARRAY;
  final ASTNode endTagName=XmlChildRole.CLOSING_TAG_NAME_FINDER.findChild(this);
  List<PsiReference> refs=new ArrayList<PsiReference>();
  final String prefix=getNamespacePrefix();
  if (endTagName != null) {
    if (prefix.length() > 0) {
      refs.add(new SchemaPrefixReference(this,TextRange.from(startTagName.getStartOffset() - this.getStartOffset(),prefix.length()),prefix));
      refs.add(new SchemaPrefixReference(this,TextRange.from(endTagName.getStartOffset() - this.getStartOffset(),prefix.length()),prefix));
    }
    refs.add(TagNameReference.create(this,startTagName,true));
    refs.add(TagNameReference.create(this,endTagName,false));
  }
 else {
    if (prefix.length() > 0) {
      refs.add(new SchemaPrefixReference(this,TextRange.from(startTagName.getStartOffset() - this.getStartOffset(),prefix.length()),prefix));
    }
    refs.add(TagNameReference.create(this,startTagName,true));
  }
  for (  PsiReference ref : ReferenceProvidersRegistry.getReferencesFromProviders(this,XmlTag.class)) {
    refs.add(ref);
  }
  return ContainerUtil.toArray(refs,new PsiReference[refs.size()]);
}
