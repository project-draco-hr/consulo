{
  final PsiElement parent=getParent();
  BidirectionalMap<String,String> map=initNamespaceMaps(parent);
  List<String> known=Collections.emptyList();
  if (map != null) {
    known=new ArrayList<String>(map.values());
  }
  if (parent instanceof XmlTag) {
    if (known.isEmpty())     return ((XmlTag)parent).knownNamespaces();
    known.addAll(Arrays.asList(((XmlTag)parent).knownNamespaces()));
  }
 else {
    final XmlFile xmlFile=XmlExtension.getExtensionByElement(this).getContainingFile(this);
    final XmlTag rootTag=xmlFile.getDocument().getRootTag();
    if (rootTag != this)     known.addAll(Arrays.asList(rootTag.knownNamespaces()));
  }
  return known.toArray(new String[known.size()]);
}
