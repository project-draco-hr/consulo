{
  if (file.getFileType() == JavaClassFileType.INSTANCE)   return null;
  final PsiFile psiFile=PsiManager.getInstance(myProject).findFile(file);
  if (psiFile == null) {
    return null;
  }
  if (psiFile.getLanguage() != JavaLanguage.INSTANCE) {
    return null;
  }
  final Module moduleForPsiElement=ModuleUtilCore.findModuleForPsiElement(psiFile);
  if (moduleForPsiElement == null) {
    return null;
  }
  final JavaModuleExtension extension=ModuleUtilCore.getExtension(moduleForPsiElement,JavaModuleExtension.class);
  if (extension == null) {
    return null;
  }
  if (extension.getInheritableSdk().isNull()) {
    return createPanel(myProject,psiFile);
  }
  return null;
}
