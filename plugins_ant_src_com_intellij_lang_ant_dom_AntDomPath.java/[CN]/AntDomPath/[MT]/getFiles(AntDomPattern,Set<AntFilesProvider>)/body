{
  final List<File> files=new ArrayList<File>();
  final File baseDir=getCanonicalFile(".");
  addLocation(baseDir,files,getLocation().getStringValue());
  final String pathString=getPath().getStringValue();
  if (pathString != null) {
    final PathTokenizer tokenizer=new PathTokenizer(pathString);
    while (tokenizer.hasMoreTokens()) {
      addLocation(baseDir,files,tokenizer.nextToken());
    }
  }
  for (Iterator<AntDomElement> iterator=getAntChildrenIterator(); iterator.hasNext(); ) {
    AntDomElement child=iterator.next();
    if (child instanceof AntFilesProvider) {
      files.addAll(((AntFilesProvider)child).getFiles(processed));
    }
  }
  return files;
}
