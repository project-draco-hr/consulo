{
  if (myLastTimeEditorWasTypedIn + UPDATE_DELAY_AFTER_TYPING > System.currentTimeMillis()) {
    return;
  }
  if (IdeFocusManager.getInstance(null).isFocusBeingTransferred())   return;
  final int lastEventCount=myLastTimePerformed;
  myLastTimePerformed=ActivityTracker.getInstance().getCount();
  boolean transparentOnly=myLastTimePerformed == lastEventCount;
  try {
    HashSet<TimerListener> notified=new HashSet<TimerListener>();
    myTransparentOnlyUpdate=transparentOnly;
    notifyListeners(myTransparentTimerListeners,notified);
    if (transparentOnly) {
      return;
    }
    notifyListeners(myTimerListeners,notified);
  }
  finally {
    myTransparentOnlyUpdate=false;
  }
}
