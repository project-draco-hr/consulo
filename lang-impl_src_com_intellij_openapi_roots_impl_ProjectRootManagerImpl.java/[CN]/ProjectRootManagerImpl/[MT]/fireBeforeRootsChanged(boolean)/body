{
  boolean res=false;
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  if (myRootsChangeCounter == 0) {
    if (myIsRootsChangedOnDemandStartedButNotDemanded) {
      myIsRootsChangedOnDemandStartedButNotDemanded=false;
      myRootsChangeCounter++;
    }
    myProject.getMessageBus().syncPublisher(ProjectTopics.PROJECT_ROOTS).beforeRootsChange(new ModuleRootEventImpl(myProject,filetypes));
    res=true;
  }
  myRootsChangeCounter++;
  return res;
}
