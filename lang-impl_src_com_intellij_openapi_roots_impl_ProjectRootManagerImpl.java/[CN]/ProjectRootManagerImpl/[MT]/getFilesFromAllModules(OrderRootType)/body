{
  List<VirtualFile> result=new ArrayList<VirtualFile>();
  final Module[] modules=getModuleManager().getSortedModules();
  for (  Module module : modules) {
    final VirtualFile[] files=ModuleRootManager.getInstance(module).getFiles(type);
    result.addAll(Arrays.asList(files));
  }
  return result.toArray(new VirtualFile[result.size()]);
}
