{
  if (getBatchSession(false).myBatchLevel == 0 && !myMergedCallStarted) {
    LOG.assertTrue(myRootsChangesDepth == 0,"Merged rootsChanged not allowed inside rootsChanged, rootsChanged level == " + myRootsChangesDepth);
    myMergedCallStarted=true;
    myMergedCallHasRootChange=false;
    try {
      r.run();
    }
  finally {
      if (myMergedCallHasRootChange) {
        LOG.assertTrue(myRootsChangesDepth == 1,"myMergedCallDepth = " + myRootsChangesDepth);
        getBatchSession(false).rootsChanged(true);
      }
      myMergedCallStarted=false;
      myMergedCallHasRootChange=false;
    }
  }
 else {
    r.run();
  }
}
