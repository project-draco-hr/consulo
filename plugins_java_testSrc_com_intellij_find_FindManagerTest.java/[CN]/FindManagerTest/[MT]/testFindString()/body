{
  FindManager findManager=FindManager.getInstance(myProject);
  FindModel findModel=new FindModel();
  findModel.setStringToFind("done");
  findModel.setWholeWordsOnly(false);
  findModel.setFromCursor(false);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  String text="public static class MyClass{\n/*done*/\npublic static void main(){}}";
  FindResult findResult=findManager.findString(text,0,findModel);
  assertTrue(findResult.isStringFound());
  findModel=new FindModel();
  findModel.setStringToFind("done");
  findModel.setWholeWordsOnly(false);
  findModel.setFromCursor(true);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  findResult=findManager.findString(text,40,findModel);
  assertFalse(findResult.isStringFound());
  findModel=new FindModel();
  findModel.setStringToFind("done");
  findModel.setWholeWordsOnly(false);
  findModel.setFromCursor(true);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  findModel.setForward(false);
  findResult=findManager.findString(text,40,findModel);
  assertTrue(findResult.isStringFound());
  findModel=new FindModel();
  findModel.setStringToFind("done");
  findModel.setWholeWordsOnly(true);
  findModel.setFromCursor(false);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  findResult=findManager.findString(text,0,findModel);
  assertTrue(findResult.isStringFound());
  findModel=new FindModel();
  findModel.setStringToFind("don");
  findModel.setWholeWordsOnly(true);
  findModel.setFromCursor(false);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  final FindResult[] findResultArr=new FindResult[1];
  findInNewThread(findModel,findManager,text,0,findResultArr);
  new WaitFor(30 * 1000){
    @Override protected boolean condition(){
      return findResultArr[0] != null;
    }
  }
.assertCompleted();
  assertFalse(findResultArr[0].isStringFound());
}
