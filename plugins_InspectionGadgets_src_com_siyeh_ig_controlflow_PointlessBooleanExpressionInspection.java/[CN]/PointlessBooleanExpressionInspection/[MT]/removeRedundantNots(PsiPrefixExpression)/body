{
  if (!JavaTokenType.EXCL.equals(expression.getOperationTokenType())) {
    return expression;
  }
  final PsiExpression operand=expression.getOperand();
  if (operand == null || !(operand instanceof PsiPrefixExpression)) {
    return expression;
  }
  final PsiPrefixExpression prefixOperand=(PsiPrefixExpression)operand;
  if (!JavaTokenType.EXCL.equals(prefixOperand.getOperationTokenType())) {
    return expression;
  }
  final PsiExpression op=prefixOperand.getOperand();
  return op != null && op instanceof PsiPrefixExpression ? removeRedundantNots((PsiPrefixExpression)op) : op;
}
