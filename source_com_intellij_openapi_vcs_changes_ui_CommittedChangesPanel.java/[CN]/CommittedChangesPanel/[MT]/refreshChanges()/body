{
  final Ref<VcsException> refEx=new Ref<VcsException>();
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      try {
        final List<CommittedChangeList> list;
        if (myRoot == null) {
          list=myProvider.getAllCommittedChanges(mySettings,50);
        }
 else {
          list=myProvider.getCommittedChanges(mySettings,myRoot,myMaxCount);
        }
        myBrowser.setModel(new CommittedChangesTableModel(list,myProvider.getColumns()));
      }
 catch (      VcsException ex) {
        refEx.set(ex);
      }
    }
  }
,"Loading changes",true,myProject);
  if (!refEx.isNull()) {
    LOG.info(refEx.get());
    Messages.showErrorDialog(myProject,"Error refreshing view: " + StringUtil.join(refEx.get().getMessages(),"\n"),"Committed Changes");
  }
}
