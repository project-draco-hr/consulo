{
  if (psiFile == null)   return false;
  final VirtualFile file=psiFile.getVirtualFile();
  final Project project=psiFile.getProject();
  final Editor editor=psiFile.isWritable() ? null : FileEditorManager.getInstance(project).openTextEditor(new OpenFileDescriptor(project,file),true);
  if (!ReadonlyStatusHandler.ensureFilesWritable(project,file)) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        if (editor != null && editor.getComponent().isDisplayable()) {
          HintManager.getInstance().showErrorHint(editor,CodeInsightBundle.message("error.hint.file.is.readonly",file.getPresentableUrl()));
        }
      }
    }
);
    return false;
  }
  return true;
}
