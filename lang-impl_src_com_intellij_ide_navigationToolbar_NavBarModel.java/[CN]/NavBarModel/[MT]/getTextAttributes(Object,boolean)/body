{
  if (!checkValid(object))   return SimpleTextAttributes.REGULAR_ATTRIBUTES;
  if (object instanceof PsiElement) {
    if (!ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
      public Boolean compute(){
        return ((PsiElement)object).isValid();
      }
    }
).booleanValue())     return SimpleTextAttributes.GRAYED_ATTRIBUTES;
    PsiFile psiFile=((PsiElement)object).getContainingFile();
    if (psiFile != null) {
      final VirtualFile virtualFile=psiFile.getVirtualFile();
      return new SimpleTextAttributes(null,selected ? null : FileStatusManager.getInstance(myProject).getStatus(virtualFile).getColor(),Color.red,WolfTheProblemSolver.getInstance(myProject).isProblemFile(virtualFile) ? SimpleTextAttributes.STYLE_WAVED : SimpleTextAttributes.STYLE_PLAIN);
    }
 else {
      return new SimpleTextAttributes(null,null,Color.red,NavBarPanel.wolfHasProblemFilesBeneath((PsiElement)object) ? SimpleTextAttributes.STYLE_WAVED : SimpleTextAttributes.STYLE_PLAIN);
    }
  }
 else   if (object instanceof Module) {
    return new SimpleTextAttributes(null,null,Color.red,WolfTheProblemSolver.getInstance(myProject).hasProblemFilesBeneath((Module)object) ? SimpleTextAttributes.STYLE_WAVED : SimpleTextAttributes.STYLE_PLAIN);
  }
 else   if (object instanceof Project) {
    final Project project=(Project)object;
    final Module[] modules=ApplicationManager.getApplication().runReadAction(new Computable<Module[]>(){
      public Module[] compute(){
        return ModuleManager.getInstance(project).getModules();
      }
    }
);
    for (    Module module : modules) {
      if (WolfTheProblemSolver.getInstance(project).hasProblemFilesBeneath(module)) {
        return new SimpleTextAttributes(null,null,Color.red,SimpleTextAttributes.STYLE_WAVED);
      }
    }
  }
  return SimpleTextAttributes.REGULAR_ATTRIBUTES;
}
