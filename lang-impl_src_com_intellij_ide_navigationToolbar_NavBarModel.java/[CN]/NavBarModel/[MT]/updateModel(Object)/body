{
  if (object instanceof PsiElement) {
    final Object rootElement=size() > 1 ? getElement(1) : null;
    if (rootElement instanceof Module) {
      final Module module=(Module)rootElement;
      removeAllElements();
      addElement(myProject);
      final ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
      addElement(module);
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          traverseToRoot((PsiElement)object,new HashSet<VirtualFile>(Arrays.asList(moduleRootManager.getContentRoots())));
        }
      }
);
    }
 else {
      updateModel((PsiElement)object);
    }
  }
 else   if (object instanceof Module) {
    removeAllElements();
    addElement(myProject);
    addElement(object);
  }
}
