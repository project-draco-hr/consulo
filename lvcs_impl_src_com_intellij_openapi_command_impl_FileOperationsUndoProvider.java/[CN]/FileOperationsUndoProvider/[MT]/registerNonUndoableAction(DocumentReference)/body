{
  if (getUndoManager().undoableActionsForDocumentAreEmpty(r))   return;
  getUndoManager().undoableActionPerformed(new NonUndoableAction(){
    public DocumentReference[] getAffectedDocuments(){
      return new DocumentReference[]{r};
    }
    public boolean isComplex(){
      return true;
    }
  }
);
}
