{
  if (!indexFile.exists()) {
    indexFile.createNewFile();
  }
  final DataOutputStream stream=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(indexFile)));
  try {
    stream.writeInt(map.size());
    final IOException[] _ex=new IOException[]{null};
    map.forEachEntry(new TIntIntProcedure(){
      public boolean execute(      int qName,      int id){
        try {
          stream.writeInt(qName);
          stream.writeInt(id);
        }
 catch (        IOException e) {
          _ex[0]=e;
          return false;
        }
        return true;
      }
    }
);
    if (_ex[0] != null) {
      throw _ex[0];
    }
  }
  finally {
    stream.close();
  }
}
