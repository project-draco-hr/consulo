{
  myTree=new Tree(new DefaultTreeModel(new DefaultMutableTreeNode()));
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  new MyTreeSpeedSearch(myTree);
  myTree.setCellRenderer(new LibraryTreeRenderer());
  final MyTreeSelectionListener treeSelectionListener=new MyTreeSelectionListener();
  myTree.getSelectionModel().addTreeSelectionListener(treeSelectionListener);
  myTreeBuilder=new LibraryTableTreeBuilder(myTree,(DefaultTreeModel)myTree.getModel(),treeStructure);
  myTreePanel.setLayout(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myTree),BorderLayout.CENTER);
  myRemoveButton.addActionListener(new RemoveAction());
  myAttachClassesButton.addActionListener(new AttachClassesAction());
  myAttachJarDirectoriesButton.addActionListener(new AttachJarDirectoriesAction());
  myAttachSourcesButton.addActionListener(new AttachSourcesAction());
  myAttachJavadocsButton.addActionListener(new AttachJavadocAction());
  myAttachUrlJavadocsButton.addActionListener(new AttachUrlJavadocAction());
  myAttachAnnotationsButton.addActionListener(new AttachAnnotationsAction());
  final LibraryTableAttachHandler[] handlers=LibraryTableAttachHandler.EP_NAME.getExtensions();
  final LibraryEditor libraryEditor=getLibraryEditor();
  if (handlers.length == 0 || myProject == null) {
    myAttachMoreButton.setVisible(false);
  }
 else {
    myAttachMoreButton.addActionListener(new AttachMoreAction(handlers,libraryEditor));
    if (handlers.length == 1) {
      myAttachMoreButton.setText(handlers[0].getLongName());
    }
  }
  treeSelectionListener.updateButtons();
  Disposer.register(this,myTreeBuilder);
}
