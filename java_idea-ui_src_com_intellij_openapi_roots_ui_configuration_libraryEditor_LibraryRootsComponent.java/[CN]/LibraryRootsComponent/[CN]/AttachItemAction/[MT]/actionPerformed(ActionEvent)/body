{
  VirtualFile toSelect=getFileToSelect();
  final VirtualFile[] files=myDescriptor.selectFiles(myPanel,toSelect,myContextModule,getLibraryEditor());
  if (files.length == 0)   return;
  final VirtualFile[] attachedFiles=attachFiles(myDescriptor.scanForActualRoots(files,myPanel),myDescriptor.getRootType(),myDescriptor.addAsJarDirectories());
  if (attachedFiles.length > 0) {
    myLastChosen=attachedFiles[0];
  }
  fireLibrariesChanged();
  myTree.requestFocus();
}
