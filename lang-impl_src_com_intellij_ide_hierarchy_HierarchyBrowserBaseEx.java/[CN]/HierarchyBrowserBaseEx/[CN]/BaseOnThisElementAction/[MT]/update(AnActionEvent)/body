{
  final Presentation presentation=event.getPresentation();
  registerCustomShortcutSet(ActionManager.getInstance().getAction(myActionId).getShortcutSet(),null);
  final DataContext dataContext=event.getDataContext();
  final HierarchyBrowserBaseEx browser=(HierarchyBrowserBaseEx)dataContext.getData(myBrowserDataKey);
  if (browser == null) {
    presentation.setVisible(false);
    presentation.setEnabled(false);
    return;
  }
  presentation.setVisible(true);
  final PsiElement selectedElement=browser.getSelectedElement();
  if (selectedElement == null || !browser.isApplicableElement(selectedElement)) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
    return;
  }
  presentation.setEnabled(isEnabled(browser,selectedElement));
  String nonDefaultText=getNonDefaultText(browser,selectedElement);
  if (nonDefaultText != null) {
    presentation.setText(nonDefaultText);
  }
}
