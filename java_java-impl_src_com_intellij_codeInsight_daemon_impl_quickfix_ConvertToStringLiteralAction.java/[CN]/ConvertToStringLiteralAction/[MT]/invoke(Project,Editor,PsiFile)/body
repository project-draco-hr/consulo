{
  final PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  if (element != null && PsiUtil.isJavaToken(element,JavaTokenType.CHARACTER_LITERAL)) {
    final String text=element.getText();
    final int length=text.length();
    if (length > 1 && text.charAt(0) == '\'' && text.charAt(length - 1) == '\'') {
      final StringBuilder sb=new StringBuilder(text);
      sb.replace(0,1,"\"");
      sb.replace(length - 1,length,"\"");
      final PsiExpression expression=JavaPsiFacade.getElementFactory(project).createExpressionFromText(sb.toString(),null);
      final PsiElement literal=expression.getFirstChild();
      if (literal != null && PsiUtil.isJavaToken(literal,JavaTokenType.STRING_LITERAL)) {
        element.replace(literal);
      }
    }
  }
}
