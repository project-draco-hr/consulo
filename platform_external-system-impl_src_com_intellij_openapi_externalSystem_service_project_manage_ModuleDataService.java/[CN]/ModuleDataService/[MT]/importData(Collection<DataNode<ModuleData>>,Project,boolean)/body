{
  if (toImport.isEmpty()) {
    return;
  }
  if (!project.isInitialized()) {
    myAlarm.addRequest(new ImportModulesTask(project,toImport,synchronous),PROJECT_INITIALISATION_DELAY_MS);
    return;
  }
  ExternalSystemApiUtil.executeProjectChangeAction(synchronous,new DisposeAwareProjectChange(project){
    @Override public void execute(){
      final Collection<DataNode<ModuleData>> toCreate=filterExistingModules(toImport,project);
      if (!toCreate.isEmpty()) {
        createModules(toCreate,project);
      }
      for (      DataNode<ModuleData> node : toImport) {
        Module module=ProjectStructureHelper.findIdeModule(node.getData(),project);
        if (module != null) {
          syncPaths(module,node.getData());
        }
      }
    }
  }
);
}
