{
  if (LOG.isDebugEnabled()) {
    String error=buildMessageString(ex);
    LOG.debug("enter: processError(error='" + error + "')");
  }
  myErrorsDetected=true;
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        final VirtualFile file=getFile(ex.getPublicId(),ex.getSystemId());
        myErrorsView.addMessage(problemType == ProblemType.WARNING ? MessageCategory.WARNING : MessageCategory.ERROR,new String[]{ex.getLocalizedMessage()},file,ex.getLineNumber() - 1,ex.getColumnNumber() - 1,null);
      }
    }
);
  }
}
