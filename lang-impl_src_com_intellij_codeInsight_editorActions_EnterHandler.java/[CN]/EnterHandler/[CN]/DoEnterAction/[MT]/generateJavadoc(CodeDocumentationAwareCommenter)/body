{
  CodeInsightSettings settings=CodeInsightSettings.getInstance();
  StringBuffer buffer=new StringBuffer();
  final String docCommentLinePrefix=commenter.getDocumentationCommentLinePrefix();
  if (docCommentLinePrefix == null) {
    return;
  }
  buffer.append(docCommentLinePrefix);
  buffer.append(LINE_SEPARATOR);
  buffer.append(commenter.getDocumentationCommentSuffix());
  PsiComment comment=createComment(buffer,settings);
  if (comment == null) {
    return;
  }
  myOffset=comment.getTextRange().getStartOffset();
  myOffset=CharArrayUtil.shiftForwardUntil(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  myOffset=CharArrayUtil.shiftForward(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  myOffset=CharArrayUtil.shiftForwardUntil(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  removeTrailingSpaces(myDocument,myOffset);
  if (!CodeStyleSettingsManager.getSettings(getProject()).JD_LEADING_ASTERISKS_ARE_ENABLED) {
    LOG.assertTrue(CharArrayUtil.regionMatches(myDocument.getCharsSequence(),myOffset - docCommentLinePrefix.length(),docCommentLinePrefix));
    myDocument.deleteString(myOffset - docCommentLinePrefix.length(),myOffset);
    myOffset--;
  }
 else {
    myDocument.insertString(myOffset," ");
    myOffset++;
  }
  PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
}
