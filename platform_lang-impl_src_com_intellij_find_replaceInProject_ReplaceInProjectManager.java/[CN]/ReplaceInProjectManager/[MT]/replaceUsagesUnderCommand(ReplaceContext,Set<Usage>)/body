{
  if (usagesSet == null) {
    return;
  }
  final List<Usage> usages=new ArrayList<Usage>(usagesSet);
  Collections.sort(usages,UsageViewImpl.USAGE_COMPARATOR);
  if (!ensureUsagesWritable(replaceContext,usages))   return;
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    @Override public void run(){
      final boolean success=replaceUsages(replaceContext,usages);
      final UsageView usageView=replaceContext.getUsageView();
      if (closeUsageViewIfEmpty(usageView,success))       return;
      usageView.getComponent().requestFocus();
    }
  }
,FindBundle.message("find.replace.command"),null);
  replaceContext.invalidateExcludedSetCache();
}
