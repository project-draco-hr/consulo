{
  final Runnable replaceRunnable=new Runnable(){
    @Override public void run(){
      final UsageView usageView=replaceContext.getUsageView();
      final boolean success=doReplace(replaceContext,usageView.getUsages());
      replaceContext.invalidateExcludedSetCache();
      closeUsageViewIfEmpty(usageView,success);
    }
  }
;
  replaceContext.getUsageView().addButtonToLowerPane(replaceRunnable,FindBundle.message("find.replace.all.action"));
  final Runnable replaceSelectedRunnable=new Runnable(){
    @Override public void run(){
      doReplaceSelected(replaceContext);
      replaceContext.invalidateExcludedSetCache();
    }
  }
;
  replaceContext.getUsageView().addButtonToLowerPane(replaceSelectedRunnable,FindBundle.message("find.replace.selected.action"));
}
