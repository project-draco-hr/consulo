{
  if (!ensureUsagesWritable(replaceContext,usages)) {
    return true;
  }
  int replacedCount=0;
  boolean success=true;
  for (  final Usage usage : usages) {
    try {
      if (replaceUsage(usage,replaceContext.getFindModel(),replaceContext.getExcludedSetCached(),false)) {
        replacedCount++;
      }
    }
 catch (    FindManager.MalformedReplacementStringException e) {
      markAsMalformedReplacement(replaceContext,usage);
      success=false;
    }
  }
  replaceContext.getUsageView().removeUsagesBulk(usages);
  reportNumberReplacedOccurrences(myProject,replacedCount);
  return success;
}
