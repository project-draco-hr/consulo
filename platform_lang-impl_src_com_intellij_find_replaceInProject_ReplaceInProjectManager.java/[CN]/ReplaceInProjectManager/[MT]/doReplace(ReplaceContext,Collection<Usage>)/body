{
  boolean success=true;
  int replacedCount=0;
  if (!ensureUsagesWritable(replaceContext,usages)) {
    return true;
  }
  for (  final Usage usage : usages) {
    try {
      if (doReplace(usage,replaceContext.getFindModel(),replaceContext.getExcludedSetCached(),false)) {
        replaceContext.getUsageView().removeUsage(usage);
        replacedCount++;
      }
    }
 catch (    FindManager.MalformedReplacementStringException e) {
      markAsMalformedReplacement(replaceContext,usage);
      success=false;
    }
  }
  reportNumberReplacedOccurrences(myProject,replacedCount);
  return success;
}
