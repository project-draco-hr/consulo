{
synchronized (myLock) {
    TextRange textRange=getUpToDateRange(range);
    final int startOffset=textRange.getStartOffset();
    final int endOffset=Math.min(textRange.getEndOffset() + 1,myUpToDateDocument.getTextLength());
    return myUpToDateDocument.getCharsSequence().subSequence(startOffset,endOffset).toString();
  }
}
