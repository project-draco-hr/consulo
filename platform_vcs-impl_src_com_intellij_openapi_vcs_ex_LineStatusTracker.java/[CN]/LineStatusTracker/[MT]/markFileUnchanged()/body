{
  TransactionGuard.getInstance().submitTransactionLater(myProject,new Runnable(){
    @Override public void run(){
      FileDocumentManager.getInstance().saveDocument(myDocument);
      boolean stillEmpty=!LineStatusTracker.this.isValid() || myRanges.isEmpty();
      if (stillEmpty) {
        myVcsDirtyScopeManager.fileDirty(myVirtualFile);
      }
    }
  }
);
}
