{
  ArrayList<Range> result=new ArrayList<Range>();
  Iterator<Range> iterator=ranges.iterator();
  if (!iterator.hasNext())   return result;
  Range prev=iterator.next();
  while (iterator.hasNext()) {
    Range range=iterator.next();
    if (prev.canBeMergedWith(range)) {
      if (range.getHighlighter() != null) {
        range.getHighlighter().dispose();
      }
      if (prev.getHighlighter() != null) {
        prev.getHighlighter().dispose();
      }
      prev=prev.mergeWith(range,LineStatusTracker.this);
    }
 else {
      result.add(prev);
      prev=range;
    }
  }
  result.add(prev);
  return result;
}
