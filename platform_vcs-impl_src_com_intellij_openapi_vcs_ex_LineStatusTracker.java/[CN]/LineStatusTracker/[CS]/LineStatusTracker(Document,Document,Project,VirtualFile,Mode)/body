{
  myDocument=document;
  myVcsDocument=vcsDocument;
  myProject=project;
  myVirtualFile=virtualFile;
  myApplication=ApplicationManager.getApplication();
  myFileEditorManager=FileEditorManager.getInstance(myProject);
  myVcsDirtyScopeManager=VcsDirtyScopeManager.getInstance(myProject);
  myDocumentListener=new MyDocumentListener();
  myDocument.addDocumentListener(myDocumentListener);
  myApplicationListener=new MyApplicationListener();
  ApplicationManager.getApplication().addApplicationListener(myApplicationListener);
  myMode=mode;
  myRanges=new ArrayList<Range>();
}
