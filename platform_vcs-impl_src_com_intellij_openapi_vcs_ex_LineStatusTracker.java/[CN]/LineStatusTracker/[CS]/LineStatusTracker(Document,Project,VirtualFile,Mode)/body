{
  myDocument=document;
  myProject=project;
  myVirtualFile=virtualFile;
  myMode=mode;
  myApplication=ApplicationManager.getApplication();
  myFileEditorManager=FileEditorManager.getInstance(myProject);
  myVcsDirtyScopeManager=VcsDirtyScopeManager.getInstance(myProject);
  myDocumentListener=new MyDocumentListener();
  myDocument.addDocumentListener(myDocumentListener);
  myApplicationListener=new MyApplicationListener();
  ApplicationManager.getApplication().addApplicationListener(myApplicationListener);
  myRanges=new ArrayList<>();
  myVcsDocument=new DocumentImpl("",true);
  myVcsDocument.putUserData(UndoConstants.DONT_RECORD_UNDO,Boolean.TRUE);
}
