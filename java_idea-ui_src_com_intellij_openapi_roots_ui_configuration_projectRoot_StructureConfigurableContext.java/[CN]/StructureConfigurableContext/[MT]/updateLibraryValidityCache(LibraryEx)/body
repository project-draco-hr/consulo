{
  if (myLibraryPathValidityCache.containsKey(library))   return;
  ValidityLevel level=ValidityLevel.VALID;
  if (!(library.allPathsValid(JavadocOrderRootType.getInstance()) && library.allPathsValid(OrderRootType.SOURCES))) {
    level=ValidityLevel.WARNING;
  }
  if (!library.allPathsValid(OrderRootType.CLASSES)) {
    level=ValidityLevel.ERROR;
  }
  final ValidityLevel finalLevel=level;
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (!myDisposed) {
        myLibraryPathValidityCache.put(library,finalLevel);
        fireOnCacheChanged();
      }
    }
  }
);
}
