{
  GitPushResult pushResult=new GitPushResult(myProject);
  GitCommitsByRepoAndBranch commits=pushInfo.getCommits();
  for (  GitRepository repository : commits.getRepositories()) {
    GitPushRejectedDetector rejectedDetector=new GitPushRejectedDetector();
    GitCommandResult res=Git.push(repository,pushInfo.getPushSpec(),rejectedDetector);
    GitPushRepoResult repoResult;
    if (rejectedDetector.rejected()) {
      Collection<String> rejectedBranches=rejectedDetector.getRejectedBranches();
      Map<GitBranch,GitPushRepoResult.BranchResult> resultMap=new HashMap<GitBranch,GitPushRepoResult.BranchResult>();
      GitCommitsByBranch commitsByBranch=commits.get(repository);
      for (      GitBranch branch : commitsByBranch.getBranches()) {
        resultMap.put(branch,branchInRejected(branch,rejectedBranches) ? GitPushRepoResult.BranchResult.REJECTED : GitPushRepoResult.BranchResult.SUCCESS);
      }
      repoResult=GitPushRepoResult.someRejected(resultMap,res);
    }
 else     if (res.success()) {
      Map<GitBranch,GitPushRepoResult.BranchResult> resultMap=new HashMap<GitBranch,GitPushRepoResult.BranchResult>();
      GitCommitsByBranch commitsByBranch=commits.get(repository);
      for (      GitBranch branch : commitsByBranch.getBranches()) {
        resultMap.put(branch,GitPushRepoResult.BranchResult.SUCCESS);
      }
      repoResult=GitPushRepoResult.success(resultMap,res);
    }
 else {
      Map<GitBranch,GitPushRepoResult.BranchResult> resultMap=new HashMap<GitBranch,GitPushRepoResult.BranchResult>();
      GitCommitsByBranch commitsByBranch=commits.get(repository);
      for (      GitBranch branch : commitsByBranch.getBranches()) {
        resultMap.put(branch,GitPushRepoResult.BranchResult.SUCCESS);
      }
      repoResult=GitPushRepoResult.error(resultMap,res);
    }
    pushResult.append(repository,repoResult);
  }
  return pushResult;
}
