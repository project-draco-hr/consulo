{
  GitPushRejectedDetector rejectedDetector=new GitPushRejectedDetector();
  GitCommandResult res=Git.push(repository,pushSpec,rejectedDetector);
  if (rejectedDetector.rejected()) {
    Collection<String> rejectedBranches=rejectedDetector.getRejectedBranches();
    return GitSimplePushResult.reject(rejectedBranches);
  }
 else   if (res.success()) {
    return GitSimplePushResult.success();
  }
 else {
    return GitSimplePushResult.error(res.getErrorOutputAsHtmlString());
  }
}
