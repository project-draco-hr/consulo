{
  GitPushRejectedDetector rejectedDetector=new GitPushRejectedDetector();
  GitLineHandlerListener progressListener=GitStandardProgressAnalyzer.createListener(myProgressIndicator);
  GitCommandResult res=myGit.push(repository,pushSpec,rejectedDetector,progressListener);
  if (rejectedDetector.rejected()) {
    Collection<String> rejectedBranches=rejectedDetector.getRejectedBranches();
    return GitSimplePushResult.reject(rejectedBranches);
  }
 else   if (res.success()) {
    return GitSimplePushResult.success();
  }
 else {
    return GitSimplePushResult.error(res.getErrorOutputAsHtmlString());
  }
}
