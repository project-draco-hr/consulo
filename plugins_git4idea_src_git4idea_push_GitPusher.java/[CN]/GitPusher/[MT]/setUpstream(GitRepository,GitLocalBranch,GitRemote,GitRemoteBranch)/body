{
  if (!branchTrackingInfoIsSet(repository,source)) {
    Project project=repository.getProject();
    VirtualFile root=repository.getRoot();
    String branchName=source.getName();
    try {
      boolean rebase=getMergeOrRebaseConfig(project,root);
      GitConfigUtil.setValue(project,root,"branch." + branchName + ".remote",remote.getName());
      GitConfigUtil.setValue(project,root,"branch." + branchName + ".merge",GitBranch.REFS_HEADS_PREFIX + dest.getNameForRemoteOperations());
      if (rebase) {
        GitConfigUtil.setValue(project,root,"branch." + branchName + ".rebase","true");
      }
    }
 catch (    VcsException e) {
      LOG.error(String.format("Couldn't set up tracking for source branch %s, target branch %s, remote %s in root %s",source,dest,remote,repository),e);
      Notificator.getInstance(project).notify(GitVcs.NOTIFICATION_GROUP_ID,"","Couldn't set up branch tracking",NotificationType.ERROR);
    }
  }
}
