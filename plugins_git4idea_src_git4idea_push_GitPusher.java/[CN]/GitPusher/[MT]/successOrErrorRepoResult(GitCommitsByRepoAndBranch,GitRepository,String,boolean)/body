{
  GitPushRepoResult repoResult;
  Map<GitBranch,GitPushBranchResult> resultMap=new HashMap<GitBranch,GitPushBranchResult>();
  GitCommitsByBranch commitsByBranch=commits.get(repository);
  for (  GitBranch branch : commitsByBranch.getBranches()) {
    GitPushBranchResult branchResult=success ? successfulResultForBranch(commitsByBranch,branch) : GitPushBranchResult.error();
    resultMap.put(branch,branchResult);
  }
  repoResult=success ? GitPushRepoResult.success(resultMap,output) : GitPushRepoResult.error(resultMap,output);
  return repoResult;
}
