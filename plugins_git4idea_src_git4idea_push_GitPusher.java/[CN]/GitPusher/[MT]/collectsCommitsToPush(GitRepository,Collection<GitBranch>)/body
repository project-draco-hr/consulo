{
  Map<GitBranch,List<GitCommit>> commitsByBranch=new HashMap<GitBranch,List<GitCommit>>();
  for (  GitBranch branch : branches) {
    List<GitCommit> commits=collectCommitsToPushToTrackedBranch(repository,branch);
    if (!commits.isEmpty()) {
      commitsByBranch.put(branch,commits);
    }
  }
  return new GitCommitsByBranch(repository,commitsByBranch);
}
