{
  final AtomicInteger exitCode=new AtomicInteger();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      dialog.show();
      exitCode.set(dialog.getExitCode());
    }
  }
);
  int code=exitCode.get();
  if (code != DialogWrapper.CANCEL_EXIT_CODE) {
    mySettings.setAutoUpdateIfPushRejected(dialog.shouldAutoUpdateInFuture());
  }
  return code;
}
