{
  if (!(refEntity instanceof RefPackage)) {
    return null;
  }
  final RefPackage refPackage=(RefPackage)refEntity;
  final List<RefEntity> children=refPackage.getChildren();
  final Set<RefClass> childClasses=new HashSet<RefClass>();
  for (  RefEntity child : children) {
    if (!(child instanceof RefClass)) {
      continue;
    }
    final PsiClass psiClass=((RefClass)child).getElement();
    if (ClassUtils.isInnerClass(psiClass)) {
      continue;
    }
    childClasses.add((RefClass)child);
  }
  if (childClasses.size() == 0) {
    return null;
  }
  final Set<Set<RefClass>> components=createComponents(refPackage,childClasses);
  if (components.size() == 1) {
    return null;
  }
  final String errorString=InspectionGadgetsBundle.message("disjoint.package.problem.descriptor",refPackage.getQualifiedName(),components.size());
  return new CommonProblemDescriptor[]{inspectionManager.createProblemDescriptor(errorString)};
}
