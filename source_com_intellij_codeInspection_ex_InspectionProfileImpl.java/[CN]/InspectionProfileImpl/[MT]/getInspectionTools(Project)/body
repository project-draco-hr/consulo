{
  if (myBaseProfile != null && myBaseProfile.myTools.isEmpty()) {
    myBaseProfile.getInspectionTools(project);
  }
  if (myTools.isEmpty()) {
    boolean localToolsWereInitialized=true;
    final InspectionTool[] tools=InspectionToolRegistrar.getInstance().createTools(project);
    for (int i=0; i < tools.length; i++) {
      if (!(tools[i] instanceof LocalInspectionToolWrapper)) {
        myTools.put(tools[i].getShortName(),tools[i]);
      }
 else {
        if (!myLocalTools.containsKey(tools[i].getShortName())) {
          localToolsWereInitialized=false;
          myLocalTools.put(tools[i].getShortName(),(LocalInspectionToolWrapper)tools[i]);
        }
      }
    }
    load(!localToolsWereInitialized);
    loadAdditionalSettingsFromBaseProfile();
  }
  ArrayList<InspectionTool> result=new ArrayList<InspectionTool>();
  result.addAll(myLocalTools.values());
  result.addAll(myTools.values());
  return result.toArray(new InspectionTool[result.size()]);
}
