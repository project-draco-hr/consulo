{
  if (myBaseProfile != null) {
    myDisplayLevelMap=new LinkedHashMap<HighlightDisplayKey,ToolState>(myBaseProfile.myDisplayLevelMap);
    myBaseProfile=myBaseProfile.myBaseProfile;
  }
 else {
    boolean toolsWereNotInstantiated=false;
    if (myTools.isEmpty()) {
      getInspectionTools();
      toolsWereNotInstantiated=true;
    }
    myDisplayLevelMap.clear();
    setDefaultErrorLevels();
    final ArrayList<String> toolNames=new ArrayList<String>(myTools.keySet());
    for (Iterator<String> iterator=toolNames.iterator(); iterator.hasNext(); ) {
      final InspectionTool tool=getInspectionTool(iterator.next());
      final HighlightDisplayLevel defaultLevel=tool.getDefaultLevel();
      HighlightDisplayKey key=HighlightDisplayKey.find(tool.getShortName());
      if (key == null) {
        key=HighlightDisplayKey.register(tool.getShortName());
      }
      myDisplayLevelMap.put(key,new ToolState(defaultLevel,tool.isEnabledByDefault()));
    }
    if (toolsWereNotInstantiated) {
      myTools.clear();
    }
  }
  myInitialized=true;
}
