{
  CommandProcessor.getInstance().executeCommand(tracker.getProject(),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          if (!tracker.getDocument().isWritable()) {
            final ReadonlyStatusHandler.OperationStatus operationStatus=ReadonlyStatusHandler.getInstance(tracker.getProject()).ensureFilesWritable(tracker.getVirtualFile());
            if (operationStatus.hasReadonlyFiles())             return;
          }
          task.run();
        }
      }
);
    }
  }
,VcsBundle.message("command.name.rollback.change"),null);
}
