{
  final CodeStyleSettings styleSettings=CodeStyleSettingsManager.getSettings(element.getProject());
  String name=element.getName();
  if (substitutor != null) {
    final PsiTypeParameter[] params=element.getTypeParameters();
    if (params.length > 0) {
      StringBuffer buffer=new StringBuffer();
      buffer.append("<");
      boolean flag=true;
      for (int i=0; i < params.length; i++) {
        final PsiTypeParameter param=params[i];
        final PsiType type=substitutor.substitute(param);
        if (type == null) {
          flag=false;
          break;
        }
        buffer.append(type.getPresentableText());
        if (i < params.length - 1) {
          buffer.append(",");
          if (styleSettings.SPACE_AFTER_COMMA)           buffer.append(" ");
        }
      }
      buffer.append(">");
      if (flag)       name+=buffer;
    }
  }
  return name;
}
