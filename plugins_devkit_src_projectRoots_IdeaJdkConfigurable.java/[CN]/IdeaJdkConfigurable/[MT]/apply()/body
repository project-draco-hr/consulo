{
  if (mySandboxHome.getText() == null || mySandboxHome.getText().length() == 0) {
    throw new ConfigurationException("Please configure the sandbox");
  }
  mySandboxHome.addCurrentTextToHistory();
  Sandbox sandbox=new Sandbox(mySandboxHome.getText());
  final SdkModificator modificator=myIdeaJdk.getSdkModificator();
  modificator.setSdkAdditionalData(sandbox);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      modificator.commitChanges();
    }
  }
);
  myModified=false;
}
