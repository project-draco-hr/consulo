{
  PsiNewExpression arrayCreation=(PsiNewExpression)descriptor.getPsiElement();
  if (!CodeInsightUtil.prepareFileForWrite(arrayCreation.getContainingFile()))   return;
  PsiExpressionList argumentList=(PsiExpressionList)arrayCreation.getParent();
  if (argumentList == null)   return;
  PsiExpression[] args=argumentList.getExpressions();
  PsiArrayInitializerExpression arrayInitializer=arrayCreation.getArrayInitializer();
  try {
    if (arrayInitializer == null) {
      arrayCreation.delete();
      return;
    }
    PsiExpression[] initializers=arrayInitializer.getInitializers();
    if (initializers.length > 0) {
      argumentList.addRange(initializers[0],initializers[initializers.length - 1]);
    }
    args[args.length - 1].delete();
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
