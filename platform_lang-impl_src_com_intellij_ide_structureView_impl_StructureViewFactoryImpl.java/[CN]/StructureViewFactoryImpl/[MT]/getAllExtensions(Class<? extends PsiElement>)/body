{
  Collection<StructureViewExtension> result=myImplExtensions.get(type);
  if (result == null) {
    MultiValuesMap<Class<? extends PsiElement>,StructureViewExtension> map=myExtensions.getValue();
    for (    Class<? extends PsiElement> registeredType : map.keySet()) {
      if (ReflectionUtil.isAssignable(registeredType,type)) {
        final Collection<StructureViewExtension> extensions=map.get(registeredType);
        for (        StructureViewExtension extension : extensions) {
          myImplExtensions.put(type,extension);
        }
      }
    }
    result=myImplExtensions.get(type);
    if (result == null)     return Collections.emptyList();
  }
  return result;
}
