{
  Processor<ComponentItem> processor=new Processor<ComponentItem>(){
    public boolean process(    final ComponentItem selectedValue){
      myLastCreatedComponent=selectedValue;
      editor.getMainProcessor().startInsertProcessor(selectedValue,getCreateLocation(editor,selection));
      return true;
    }
  }
;
  PaletteListPopupStep step=new PaletteListPopupStep(editor,myLastCreatedComponent,processor,UIDesignerBundle.message("create.component.title"));
  final ListPopup listPopup=JBPopupFactory.getInstance().createWizardStep(step);
  if (selection.size() > 0) {
    listPopup.showUnderneathOf(selection.get(0).getDelegee());
  }
 else {
    listPopup.showInCenterOf(editor.getRootContainer().getDelegee());
  }
}
