{
  boolean soft=myDefaultSoft;
  if (element instanceof XmlAttribute) {
    final XmlAttribute xmlAttribute=(XmlAttribute)element;
    if (element.getTextLength() < 2) {
      return PsiReference.EMPTY_ARRAY;
    }
    final XmlTag tag=xmlAttribute.getParent();
    String value=null;
    String bundle=tag.getAttributeValue("bundle");
    if ("key".equals(xmlAttribute.getName())) {
      value=xmlAttribute.getValue();
    }
 else     if ("groupKey".equals(xmlAttribute.getName())) {
      value=xmlAttribute.getValue();
      final String groupBundle=tag.getAttributeValue("groupBundle");
      if (groupBundle != null) {
        bundle=groupBundle;
      }
    }
    if (value != null) {
      return new PsiReference[]{new PropertyReference(value,xmlAttribute.getValueElement(),bundle,soft){
        @Override protected List<PropertiesFile> retrievePropertyFilesByBundleName(        String bundleName,        PsiElement element){
          final Project project=element.getProject();
          return PropertiesReferenceManager.getInstance(project).findPropertiesFiles(GlobalSearchScope.projectScope(project),bundleName,BundleNameEvaluator.DEFAULT);
        }
      }
};
    }
  }
  return PsiReference.EMPTY_ARRAY;
}
