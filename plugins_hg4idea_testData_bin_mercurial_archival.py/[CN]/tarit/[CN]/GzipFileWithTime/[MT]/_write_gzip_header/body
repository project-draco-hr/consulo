def _write_gzip_header(self):
    self.fileobj.write('\x1f\x8b')
    self.fileobj.write('\x08')
    fname = (getattr(self, 'name', None) or self.filename)
    flags = 0
    if fname:
        flags = gzip.FNAME
    self.fileobj.write(chr(flags))
    gzip.write32u(self.fileobj, long(self.timestamp))
    self.fileobj.write('\x02')
    self.fileobj.write('\xff')
    if fname:
        self.fileobj.write((fname + '\x00'))
