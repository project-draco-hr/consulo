{
  myCompileContext=compileContext;
  myOutConsumer=outConsumer;
  myOutputFileSink=sink != null ? sink : new OutputFileConsumer(){
    public void save(    OutputFileObject fileObject){
      throw new RuntimeException("Output sink for compiler was not specified");
    }
  }
;
  StandardJavaFileManager stdManager=null;
  try {
    stdManager=(StandardJavaFileManager)Class.forName("org.jetbrains.jps.incremental.java.OptimizedFileManager").newInstance();
  }
 catch (  Throwable e) {
    compileContext.processMessage(new CompilerMessage("Javac",BuildMessage.Kind.INFO,"Failed to load JPS optimized file manager for javac: " + e.getMessage()));
  }
  if (stdManager != null) {
    myStdManager=stdManager;
  }
 else {
    myStdManager=myCompiler.getStandardFileManager(outConsumer,Locale.US,null);
  }
}
