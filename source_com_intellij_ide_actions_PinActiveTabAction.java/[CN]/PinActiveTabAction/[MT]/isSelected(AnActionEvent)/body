{
  DataContext context=e.getDataContext();
  VirtualFile file=getFile(context);
  if (file != null) {
    final Project project=(Project)context.getData(DataConstants.PROJECT);
    final FileEditorManagerEx fileEditorManager=FileEditorManagerEx.getInstanceEx(project);
    return fileEditorManager.getCurrentWindow().isFilePinned(file);
  }
 else {
    final Content content=getContent(context);
    if (content != null) {
      return content.isPinned();
    }
 else {
      return false;
    }
  }
}
