{
  Project project=(Project)context.getData(DataConstants.PROJECT);
  if (project == null) {
    return null;
  }
  if (!ToolWindowManager.getInstance(project).isEditorComponentActive()) {
    return null;
  }
  FileEditorManagerEx fileEditorManager=FileEditorManagerEx.getInstanceEx(project);
  VirtualFile[] selectedFiles=fileEditorManager.getSelectedFiles();
  if (selectedFiles.length != 0) {
    return selectedFiles[0];
  }
 else {
    return null;
  }
}
