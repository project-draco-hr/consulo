{
  DataContext context=e.getDataContext();
  VirtualFile file=getFile(context);
  if (file != null) {
    EditorWindow editorWindow=getEditorWindow(context);
    if (!editorWindow.isFileOpen(file)) {
      file=editorWindow.getSelectedFile();
      if (file == null)       return;
    }
    editorWindow.setFilePinned(file,state);
  }
 else {
    Content content=getContent(context);
    content.setPinned(state);
  }
}
