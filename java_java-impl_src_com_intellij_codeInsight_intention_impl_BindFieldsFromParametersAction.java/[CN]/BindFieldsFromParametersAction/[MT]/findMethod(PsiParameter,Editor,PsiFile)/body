{
  if (parameter == null) {
    final PsiElement elementAt=file.findElementAt(editor.getCaretModel().getOffset());
    if (elementAt instanceof PsiIdentifier) {
      final PsiElement parent=elementAt.getParent();
      if (parent instanceof PsiMethod) {
        return (PsiMethod)parent;
      }
    }
  }
 else {
    final PsiElement declarationScope=parameter.getDeclarationScope();
    if (declarationScope instanceof PsiMethod) {
      return (PsiMethod)declarationScope;
    }
  }
  return null;
}
