{
  final int id=enumerate(key);
  int valueId=readValueId(id);
  if (valueId == NULL_ID) {
    valueId=myValueStorage.createNewRecord();
    updateValueId(id,valueId);
  }
  final Storage.StorageDataOutput record=myValueStorage.writeStream(valueId);
  try {
    myValueExternalizer.save(record,value);
  }
  finally {
    record.close();
  }
}
