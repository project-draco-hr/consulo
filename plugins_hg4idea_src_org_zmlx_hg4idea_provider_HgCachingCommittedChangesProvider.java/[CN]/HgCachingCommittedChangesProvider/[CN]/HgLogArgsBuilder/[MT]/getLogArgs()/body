{
  StringBuilder args=new StringBuilder();
  Date afterDate=myBrowserSettings.getDateAfter();
  Date beforeDate=myBrowserSettings.getDateBefore();
  Long afterFilter=myBrowserSettings.getChangeAfterFilter();
  Long beforeFilter=myBrowserSettings.getChangeBeforeFilter();
  final SimpleDateFormat dateFormatter=new SimpleDateFormat("yyyy-MM-dd HH:mm");
  String separator=isRunViaBash ? "\"" : "";
  if ((afterFilter != null) && (beforeFilter != null)) {
    args.append(afterFilter).append(":").append(beforeFilter);
  }
 else   if (afterFilter != null) {
    args.append("tip:").append(afterFilter);
  }
 else   if (beforeFilter != null) {
    args.append("reverse(:").append(beforeFilter).append(")");
  }
  if (afterDate != null) {
    if (args.length() > 0) {
      args.append(" and ");
    }
    args.append("date('>").append(dateFormatter.format(afterDate)).append("')");
  }
  if (beforeDate != null) {
    if (args.length() > 0) {
      args.append(" and ");
    }
    args.append("date('<").append(dateFormatter.format(beforeDate)).append("')");
  }
  if (args.length() > 0) {
    List<String> logArgs=new ArrayList<String>();
    logArgs.add("-r");
    logArgs.add(separator + args.toString() + separator);
    return logArgs;
  }
  return Collections.emptyList();
}
