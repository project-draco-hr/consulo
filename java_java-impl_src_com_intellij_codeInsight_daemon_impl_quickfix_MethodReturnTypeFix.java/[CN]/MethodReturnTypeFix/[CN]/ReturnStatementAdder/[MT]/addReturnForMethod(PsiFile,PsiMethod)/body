{
  final PsiModifierList modifiers=method.getModifierList();
  if (modifiers.hasModifierProperty(PsiModifier.ABSTRACT) || method.getBody() == null) {
    return null;
  }
  try {
    final ConvertReturnStatementsVisitor visitor=new ConvertReturnStatementsVisitor(factory,method,myTargetType);
    ControlFlow controlFlow;
    try {
      controlFlow=HighlightControlFlowUtil.getControlFlowNoConstantEvaluate(method.getBody());
    }
 catch (    AnalysisCanceledException e) {
      controlFlow=null;
    }
    PsiReturnStatement returnStatement;
    if (controlFlow != null && ControlFlowUtil.processReturns(controlFlow,visitor)) {
      returnStatement=visitor.getLatestReturn();
    }
 else {
      returnStatement=visitor.createReturnInLastStatement();
    }
    if (method.getContainingFile() != file) {
      UndoUtil.markPsiFileForUndo(file);
    }
    return returnStatement;
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
  return null;
}
