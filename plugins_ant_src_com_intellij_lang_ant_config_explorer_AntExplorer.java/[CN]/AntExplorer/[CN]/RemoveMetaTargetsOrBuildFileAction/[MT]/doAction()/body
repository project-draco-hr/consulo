{
  final TreePath[] paths=myTree.getSelectionPaths();
  if (paths == null) {
    return;
  }
  try {
    if (paths.length == 1) {
      final DefaultMutableTreeNode node=(DefaultMutableTreeNode)paths[0].getLastPathComponent();
      if (node.getUserObject() instanceof AntBuildFileNodeDescriptor) {
        final AntBuildFileNodeDescriptor descriptor=(AntBuildFileNodeDescriptor)node.getUserObject();
        if (descriptor.getBuildFile().equals(getCurrentBuildFile())) {
          removeBuildFile();
          return;
        }
      }
    }
    final AntBuildTarget[] targets=getTargetObjectsFromPaths(paths);
    final AntConfigurationBase antConfiguration=AntConfigurationBase.getInstance(myProject);
    for (    final AntBuildTarget buildTarget : targets) {
      if (buildTarget instanceof MetaTarget) {
        for (        final ExecutionEvent event : antConfiguration.getEventsForTarget(buildTarget)) {
          if (event instanceof ExecuteCompositeTargetEvent) {
            antConfiguration.clearTargetForEvent(event);
          }
        }
      }
    }
  }
  finally {
    myBuilder.queueUpdate();
    myTree.repaint();
  }
}
