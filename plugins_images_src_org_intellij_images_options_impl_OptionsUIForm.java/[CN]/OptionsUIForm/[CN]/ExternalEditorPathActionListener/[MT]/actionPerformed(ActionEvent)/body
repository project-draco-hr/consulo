{
  Application application=ApplicationManager.getApplication();
  application.runWriteAction(new Runnable(){
    public void run(){
      VirtualFile previous=LocalFileSystem.getInstance().refreshAndFindFileByPath(externalEditorPath.getText().replace('\\','/'));
      FileChooserDescriptor fileDescriptor=FileChooserDescriptorFactory.createSingleLocalFileDescriptor();
      fileDescriptor.setShowFileSystemRoots(true);
      fileDescriptor.setTitle(ImagesBundle.message("select.external.executable.title"));
      fileDescriptor.setDescription(ImagesBundle.message("select.external.executable.message"));
      VirtualFile[] virtualFiles=FileChooser.chooseFiles(externalEditorPath,fileDescriptor,previous);
      if (virtualFiles != null && virtualFiles.length > 0) {
        String path=virtualFiles[0].getPath();
        externalEditorPath.setText(path);
      }
    }
  }
);
}
