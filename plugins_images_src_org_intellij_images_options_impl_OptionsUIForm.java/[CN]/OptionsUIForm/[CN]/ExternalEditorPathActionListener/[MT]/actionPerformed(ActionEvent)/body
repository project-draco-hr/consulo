{
  Application application=ApplicationManager.getApplication();
  VirtualFile previous=application.runWriteAction(new Computable<VirtualFile>(){
    public VirtualFile compute(){
      return LocalFileSystem.getInstance().refreshAndFindFileByPath(externalEditorPath.getText().replace('\\','/'));
    }
  }
);
  FileChooserDescriptor fileDescriptor=FileChooserDescriptorFactory.createSingleLocalFileDescriptor();
  fileDescriptor.setShowFileSystemRoots(true);
  fileDescriptor.setTitle(ImagesBundle.message("select.external.executable.title"));
  fileDescriptor.setDescription(ImagesBundle.message("select.external.executable.message"));
  VirtualFile[] virtualFiles=FileChooser.chooseFiles(externalEditorPath,fileDescriptor,previous);
  if (virtualFiles.length > 0) {
    String path=virtualFiles[0].getPath();
    externalEditorPath.setText(path);
  }
}
