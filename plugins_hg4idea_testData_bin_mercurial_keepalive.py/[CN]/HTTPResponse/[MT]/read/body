def read(self, amt=None):
    if (self._rbuf and (not (amt is None))):
        L = len(self._rbuf)
        if (amt > L):
            amt -= L
        else:
            s = self._rbuf[:amt]
            self._rbuf = self._rbuf[amt:]
            return s
    s = (self._rbuf + self._raw_read(amt))
    self._rbuf = ''
    return s
