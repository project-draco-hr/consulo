{
  try {
    myProfilesList=Arrays.asList(profiles);
    myImportProcessor=new MavenImportProcessor(myProject);
    myImportProcessor.createMavenProjectModel(myProject,files,new HashMap<VirtualFile,Module>(),myProfilesList,new Progress());
    myImportProcessor.createMavenToIdeaMapping(myProject);
    myImportProcessor.commit(myProject,myProfilesList);
    if (shouldResolve())     resolveProject();
    myProjectModel=myImportProcessor.getMavenProjectModel();
  }
 catch (  CanceledException e) {
    throw new RuntimeException(e);
  }
}
