{
  File file;
  try {
    file=FileUtil.createTempFile(myDir,"mockJdk",null,false);
    file.mkdirs();
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  String oldValue=System.setProperty("idea.testingFramework.mockJDK",file.getPath());
  Sdk sdk;
  try {
    sdk=JavaSdkImpl.getMockJdk(versionName);
  }
  finally {
    if (oldValue == null) {
      System.clearProperty("idea.testingFramework.mockJDK");
    }
 else {
      System.setProperty("idea.testingFramework.mockJDK",oldValue);
    }
  }
  return sdk;
}
