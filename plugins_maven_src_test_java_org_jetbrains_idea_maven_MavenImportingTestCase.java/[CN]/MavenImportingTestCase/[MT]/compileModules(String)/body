{
  for (  String each : modules) {
    setupJdkForModule(each);
  }
  CompilerWorkspaceConfiguration.getInstance(myProject).CLEAR_OUTPUT_DIRECTORY=true;
  List<VirtualFile> roots=Arrays.asList(ProjectRootManager.getInstance(myProject).getContentRoots());
  TranslatingCompilerFilesMonitor.getInstance().scanSourceContent(myProject,roots,roots.size(),true);
  CompilerManager.getInstance(myProject).make(new CompileStatusNotification(){
    public void finished(    boolean aborted,    int errors,    int warnings,    CompileContext compileContext){
      assertFalse(aborted);
      assertEquals(collectMessages(compileContext,CompilerMessageCategory.ERROR),0,errors);
      assertEquals(collectMessages(compileContext,CompilerMessageCategory.WARNING),0,warnings);
    }
  }
);
}
