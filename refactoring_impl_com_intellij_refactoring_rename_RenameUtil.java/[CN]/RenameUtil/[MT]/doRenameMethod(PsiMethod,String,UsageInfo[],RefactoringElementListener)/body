{
  for (  UsageInfo usage : usages) {
    PsiElement element=usage.getElement();
    if (element == null)     continue;
    if (!(element instanceof PsiMethod)) {
      final PsiReference ref;
      if (usage instanceof MoveRenameUsageInfo) {
        ref=((MoveRenameUsageInfo)usage).reference;
      }
 else {
        ref=element.getReference();
      }
      if (ref != null) {
        ref.handleElementRename(newName);
      }
    }
  }
  method.setName(newName);
  for (  UsageInfo usage : usages) {
    PsiElement element=usage.getElement();
    if (element instanceof PsiMethod) {
      ((PsiMethod)element).setName(newName);
    }
  }
  listener.elementRenamed(method);
}
