{
  PsiWritableMetaData writableMetaData=null;
  if (namedElement instanceof PsiMetaBaseOwner) {
    final PsiMetaDataBase metaData=((PsiMetaBaseOwner)namedElement).getMetaData();
    if (metaData instanceof PsiWritableMetaData) {
      writableMetaData=(PsiWritableMetaData)metaData;
    }
  }
  if (writableMetaData == null && !(namedElement instanceof PsiNamedElement)) {
    LOG.error("Unknown element type");
  }
  for (  UsageInfo usage : usages) {
    rename(usage,newName);
  }
  if (writableMetaData != null) {
    writableMetaData.setName(newName);
  }
 else {
    ((PsiNamedElement)namedElement).setName(newName);
  }
  listener.elementRenamed(namedElement);
}
