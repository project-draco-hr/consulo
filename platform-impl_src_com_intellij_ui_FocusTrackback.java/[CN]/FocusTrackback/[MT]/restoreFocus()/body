{
  if (wrongOS() || myConsumed)   return;
  consume();
  final DataContext context=myParentWindow == null ? DataManager.getInstance().getDataContext() : DataManager.getInstance().getDataContext(myParentWindow);
  final Project project=(Project)context.getData(DataConstants.PROJECT);
  if (project != null && !project.isDisposed()) {
    final IdeFocusManager focusManager=IdeFocusManager.getInstance(project);
    focusManager.requestFocus(new ActionCallback.Runnable(){
      public ActionCallback run(){
        _restoreFocus();
        return new ActionCallback.Done();
      }
      public String toString(){
        return "focus trackback";
      }
    }
,false);
  }
 else {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        _restoreFocus();
      }
    }
);
  }
}
