{
  myLookup=lookup;
  final EditorImpl editor=getEditorImpl();
  editor.setCustomImage(Pair.create(getCaretPoint(),createPreviewImage(text)));
  repaintCaretLine();
  myUninstaller=new Disposable(){
    @Override public void dispose(){
      myLookup.setPreview(null);
      myUninstaller=null;
      editor.setCustomImage(null);
      repaintCaretLine();
    }
  }
;
  myLookup.setPreview(this);
  Disposer.register(myLookup,myUninstaller);
}
