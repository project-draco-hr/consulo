{
  LookupElement item=lookup.getCurrentItem();
  if (item == null) {
    return;
  }
  String text=getPreviewText(lookup,item);
  int prefixLength=lookup.getPrefixLength(item);
  if (prefixLength > text.length()) {
    return;
  }
  FList<TextRange> fragments=LookupCellRenderer.getMatchingFragments(lookup.itemPattern(item).substring(0,prefixLength),text);
  if (fragments == null || fragments.isEmpty()) {
    return;
  }
  ArrayList<TextRange> arrayList=new ArrayList<TextRange>(fragments);
  TextRange last=arrayList.get(arrayList.size() - 1);
  new CompletionPreview(lookup,text,last.getEndOffset());
}
