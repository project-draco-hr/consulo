{
  PsiClass targetClass=findTargetClass(editor,file);
  List<GenerationInfo> members=new ArrayList<GenerationInfo>();
  TestFrameworkDescriptor d=findDescriptor(targetClass);
  final PsiMethod method=TestIntergationUtils.createMethod(targetClass,"test",d.getTestAnnotation());
  final PsiMethod[] result=new PsiMethod[1];
  members.add(new GenerationInfo(){
    @NotNull public PsiMember getPsiMember(){
      return method;
    }
    public void insert(    PsiClass aClass,    PsiElement anchor,    boolean before) throws IncorrectOperationException {
      result[0]=(PsiMethod)GenerateMembersUtil.insert(aClass,method,anchor,before);
    }
  }
);
  int offset=findOffetToInsertMethodTo(editor,file);
  GenerateMembersUtil.insertMembersAtOffset(file,offset,members);
  return CodeInsightUtilBase.forcePsiPostprocessAndRestoreElement(result[0]);
}
