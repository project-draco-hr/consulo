{
  super.visitThrowStatement(statement);
  final PsiExpression exception=statement.getException();
  if (exception == null) {
    return;
  }
  final PsiType exceptionType=exception.getType();
  if (exceptionType == null) {
    return;
  }
  PsiTryStatement containingTryStatement=(PsiTryStatement)PsiTreeUtil.getParentOfType(statement,PsiTryStatement.class);
  while (containingTryStatement != null) {
    final PsiCodeBlock tryBlock=containingTryStatement.getTryBlock();
    if (PsiTreeUtil.isAncestor(tryBlock,statement,true)) {
      final PsiParameter[] catchBlockParameters=containingTryStatement.getCatchBlockParameters();
      for (int i=0; i < catchBlockParameters.length; i++) {
        final PsiParameter parameter=catchBlockParameters[i];
        final PsiType parameterType=parameter.getType();
        if (parameterType.isAssignableFrom(exceptionType)) {
          registerStatementError(statement);
          return;
        }
      }
    }
    containingTryStatement=(PsiTryStatement)PsiTreeUtil.getParentOfType(containingTryStatement,PsiTryStatement.class);
  }
}
