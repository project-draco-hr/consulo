{
  myApplication=application;
  myStateStorageManager=new StateStorageManagerImpl(pathMacroManager.createTrackingSubstitutor(),"application"){
    protected String getOldStorageFilename(    Object component,    final String componentName,    final StateStorageOperation operation){
      final String fileName;
      if (component instanceof NamedJDOMExternalizable) {
        fileName="$" + APP_CONFIG_STORAGE_MACRO + "$/"+ ((NamedJDOMExternalizable)component).getExternalFileName()+ XML_EXTENSION;
      }
 else {
        fileName=DEFAULT_STORAGE_SPEC;
      }
      return fileName;
    }
  }
;
  myDefaultsStateStorage=new DefaultsStateStorage(null);
}
