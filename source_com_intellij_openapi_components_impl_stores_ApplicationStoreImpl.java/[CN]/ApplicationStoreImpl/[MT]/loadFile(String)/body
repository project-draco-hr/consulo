{
  Document document=JDOMUtil.loadDocument(new File(filePath));
  if (document == null) {
    throw new InvalidDataException();
  }
  Element root=document.getRootElement();
  if (root == null || !APPLICATION_ELEMENT.equals(root.getName())) {
    throw new InvalidDataException();
  }
  final List<String> additionalFiles=new ArrayList<String>();
  List children=root.getChildren(ELEMENT_COMPONENT);
  for (  final Object aChildren : children) {
    Element element=(Element)aChildren;
    String name=element.getAttributeValue(ATTRIBUTE_NAME);
    if (name == null || name.length() == 0) {
      String className=element.getAttributeValue(ATTRIBUTE_CLASS);
      if (className == null) {
        throw new InvalidDataException();
      }
      name=className.substring(className.lastIndexOf('.') + 1);
    }
    convertComponents(root,filePath,additionalFiles);
    addConfiguration(name,element);
  }
  for (  String additionalPath : additionalFiles) {
    loadFile(additionalPath);
  }
}
