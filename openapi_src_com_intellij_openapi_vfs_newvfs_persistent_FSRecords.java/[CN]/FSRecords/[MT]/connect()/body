{
  myRecords=new MappedFile(myRecordsFile,20 * 1024);
  myNames=new PersistentStringEnumerator(myNamesFile);
  myAttributes=new PagedMemoryMappedFile(myAttributesFile);
  if (myRecords.length() == 0) {
    cleanRecord(0);
    cleanRecord(1);
    setCurrentVersion();
  }
  if (getVersion() != VERSION) {
    throw new IOException("FS repository version mismatch");
  }
  if (myRecords.getInt(HEADER_CONNECTION_STATUS_OFFSET) != SAFELY_CLOSED_MAGIC) {
    throw new IOException("FS repostiory wasn't safely shut down");
  }
  myRecords.putInt(HEADER_CONNECTION_STATUS_OFFSET,CONNECTED_MAGIC);
}
