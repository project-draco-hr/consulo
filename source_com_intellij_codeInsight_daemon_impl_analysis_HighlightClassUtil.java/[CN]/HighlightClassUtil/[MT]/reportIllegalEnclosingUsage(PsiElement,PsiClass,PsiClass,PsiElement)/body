{
  if (!PsiTreeUtil.isAncestor(outerClass,place,false)) {
    String description=MessageFormat.format("''{0}'' is not an enclosing class",new Object[]{outerClass == null ? "" : HighlightUtil.formatClass(outerClass)});
    return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,elementToHighlight,description);
  }
  final PsiModifierListOwner staticParent=PsiUtil.getEnclosingStaticElement(place,outerClass);
  if (staticParent != null && staticParent.hasModifierProperty(PsiModifier.STATIC)) {
    String description=MessageFormat.format(REFERENCED_FROM_STATIC_CONTEXT,new Object[]{outerClass == null ? "" : HighlightUtil.formatClass(outerClass) + ".this"});
    final HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,elementToHighlight,description);
    QuickFixAction.registerQuickFixAction(highlightInfo,new ModifierFix(staticParent,PsiModifier.STATIC,false));
    if (aClass != null && HighlightUtil.getIncompatibleModifier(PsiModifier.STATIC,aClass.getModifierList()) == null) {
      QuickFixAction.registerQuickFixAction(highlightInfo,new ModifierFix(aClass,PsiModifier.STATIC,true));
    }
    return highlightInfo;
  }
  return null;
}
