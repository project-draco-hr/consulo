{
  PsiFile file=aClass.getContainingFile();
  if (!(file instanceof PsiJavaFile))   return null;
  PsiJavaFile javaFile=(PsiJavaFile)file;
  if (aClass.getParent() != javaFile)   return null;
  PsiImportStatementBase[] importStatements=javaFile.getImportList().getAllImportStatements();
  for (  PsiImportStatementBase importStatement : importStatements) {
    if (importStatement.isOnDemand())     continue;
    PsiElement resolved=importStatement.resolve();
    if (resolved instanceof PsiClass && Comparing.equal(aClass.getName(),((PsiClass)resolved).getName(),true)) {
      String description=MessageFormat.format("''{0}'' is already defined in this compilation unit",new Object[]{HighlightUtil.formatClass(aClass)});
      return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,elementToHighlight,description);
    }
  }
  return null;
}
