{
  Unsafe unsafe=null;
  Class uc=Unsafe.class;
  try {
    Field[] fields=uc.getDeclaredFields();
    for (    Field field : fields) {
      if (field.getName().equals("theUnsafe")) {
        field.setAccessible(true);
        unsafe=(Unsafe)field.get(uc);
        break;
      }
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  if (unsafe == null) {
    throw new RuntimeException("Could not find 'theUnsafe' field in the " + uc);
  }
  return unsafe;
}
