{
  UIComponent component=new UIComponent();
  component.setType(getClass().getName());
  component.setId(myId);
  Map<String,Serializable> map=new HashMap<String,Serializable>();
  getState(map);
  if (!map.isEmpty()) {
    component.setVariables(map);
  }
  List<UIComponent.Child> children=new SmartList<UIComponent.Child>();
  initChildren(children);
  if (!children.isEmpty()) {
    component.setChildren(children);
  }
  return component;
}
