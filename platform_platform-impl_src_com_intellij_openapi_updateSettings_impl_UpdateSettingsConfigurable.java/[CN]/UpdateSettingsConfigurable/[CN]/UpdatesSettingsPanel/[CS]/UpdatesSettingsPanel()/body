{
  final ApplicationInfo appInfo=ApplicationInfo.getInstance();
  final String majorVersion=appInfo.getMajorVersion();
  String versionNumber="";
  if (majorVersion != null && majorVersion.trim().length() > 0) {
    final String minorVersion=appInfo.getMinorVersion();
    if (minorVersion != null && minorVersion.trim().length() > 0) {
      versionNumber=majorVersion + "." + minorVersion;
    }
 else {
      versionNumber=majorVersion + ".0";
    }
  }
  myVersionNumber.setText(appInfo.getVersionName() + " " + versionNumber);
  myBuildNumber.setText(appInfo.getBuild().asString());
  myBtnCheckNow.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      CheckForUpdateAction.actionPerformed(false,UpdateSettingsConfigurable.this,getSelectedChannelId());
      updateLastCheckedLabel();
    }
  }
);
  myBtnCheckNow.setEnabled(myCheckNowEnabled);
  LabelTextReplacingUtil.replaceText(myPanel);
  myUrlsList.getEmptyText().setText(IdeBundle.message("update.no.update.hosts"));
  myUrlsList.setModel(new DefaultListModel());
  myUrlsList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  myUrlsList.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    final ListSelectionEvent e){
      myDeleteButton.setEnabled(ListUtil.canRemoveSelectedItems(myUrlsList));
      myEditButton.setEnabled(ListUtil.canRemoveSelectedItems(myUrlsList));
    }
  }
);
  myAddButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final HostMessages.InputHostDialog dlg=new HostMessages.InputHostDialog(myPanel,IdeBundle.message("update.plugin.host.url.message"),IdeBundle.message("update.add.new.plugin.host.title"),Messages.getQuestionIcon(),"",new NonEmptyInputValidator());
      dlg.show();
      final String input=dlg.getInputString();
      if (input != null) {
        ((DefaultListModel)myUrlsList.getModel()).addElement(input);
      }
    }
  }
);
  myEditButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final HostMessages.InputHostDialog dlg=new HostMessages.InputHostDialog(myPanel,IdeBundle.message("update.plugin.host.url.message"),IdeBundle.message("update.edit.plugin.host.title"),Messages.getQuestionIcon(),(String)myUrlsList.getSelectedValue(),new InputValidator(){
        public boolean checkInput(        final String inputString){
          return inputString.length() > 0;
        }
        public boolean canClose(        final String inputString){
          return checkInput(inputString);
        }
      }
);
      dlg.show();
      final String input=dlg.getInputString();
      if (input != null) {
        ((DefaultListModel)myUrlsList.getModel()).set(myUrlsList.getSelectedIndex(),input);
      }
    }
  }
);
  myDeleteButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      ListUtil.removeSelectedItems(myUrlsList);
    }
  }
);
  myEditButton.setEnabled(false);
  myDeleteButton.setEnabled(false);
  final UpdateSettings settings=UpdateSettings.getInstance();
  final String toSelect=settings.getSelectedChannelId() != null ? settings.getSelectedChannelId() : settings.getAppDefaultChannelId();
  List<String> toShow=settings.getKnownChannelsIds();
  if (toShow == null || toShow.size() == 0) {
    UpdateChecker.checkForUpdates();
    toShow=settings.getKnownChannelsIds();
  }
  if (toShow == null) {
    toShow=new ArrayList<String>();
  }
  if (!toShow.contains(toSelect)) {
    toShow.add(toSelect);
  }
  updateChannelsBox.setModel(new CollectionComboBoxModel(toShow,toSelect));
}
