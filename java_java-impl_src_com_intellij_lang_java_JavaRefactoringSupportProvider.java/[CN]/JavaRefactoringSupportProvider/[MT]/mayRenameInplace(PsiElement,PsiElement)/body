{
  if (!(elementToRename instanceof PsiVariable))   return false;
  if (nameSuggestionContext != null && nameSuggestionContext.getContainingFile() != elementToRename.getContainingFile())   return false;
  if (!(elementToRename instanceof PsiLocalVariable) && !(elementToRename instanceof PsiParameter))   return false;
  SearchScope useScope=elementToRename.getUseScope();
  if (!(useScope instanceof LocalSearchScope))   return false;
  PsiElement[] scopeElements=((LocalSearchScope)useScope).getScope();
  if (scopeElements.length > 1)   return false;
  PsiFile containingFile=elementToRename.getContainingFile();
  return PsiTreeUtil.isAncestor(containingFile,scopeElements[0],false);
}
