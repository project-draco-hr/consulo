{
  super(table);
  ListSelectionListener l=new ListSelectionListener(){
    @Override public void valueChanged(    ListSelectionEvent e){
      if (e.getValueIsAdjusting())       return;
      updateSelection(table);
    }
  }
;
  table.getSelectionModel().addListSelectionListener(l);
  table.getColumnModel().getSelectionModel().addListSelectionListener(l);
  final TableModelListener modelListener=new TableModelListener(){
    @Override public void tableChanged(    TableModelEvent e){
      updateSelection(table);
    }
  }
;
  table.getModel().addTableModelListener(modelListener);
  table.addPropertyChangeListener("model",new PropertyChangeListener(){
    @Override public void propertyChange(    PropertyChangeEvent evt){
      updateSelection(table);
      if (evt.getOldValue() != null) {
        ((TableModel)evt.getOldValue()).removeTableModelListener(modelListener);
      }
      if (evt.getNewValue() != null) {
        ((TableModel)evt.getNewValue()).addTableModelListener(modelListener);
      }
    }
  }
);
}
