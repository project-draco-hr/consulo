{
  if (myMap == null) {
    return;
  }
  try {
    FileUtil.createParentDirs(myStoreFile);
    final DataOutputStream outStream=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(myStoreFile)));
    try {
      outStream.writeInt(CompilerConfigurationImpl.DEPENDENCY_FORMAT_VERSION);
      final Iterator<String> keysIterator=myMap.keySet().iterator();
      outStream.writeInt(myMap.size());
      while (keysIterator.hasNext()) {
        final String key=keysIterator.next();
        final T value=myMap.get(key);
        CompilerIOUtil.writeString(key,outStream);
        write(value,outStream);
      }
      myIsDirty=false;
    }
  finally {
      outStream.close();
    }
  }
 catch (  IOException e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(e);
    }
    if (!ApplicationManager.getApplication().isUnitTestMode()) {
      final String message=CompilerBundle.message("error.saving.data.to.file",myStoreFile.getPath(),e.getMessage());
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          Messages.showMessageDialog(message,CommonBundle.getWarningTitle(),Messages.getWarningIcon());
        }
      }
);
    }
  }
}
