{
  if (e instanceof RunCanceledByUserException) {
    return;
  }
  String message=ExecutionBundle.message("error.running.configuration.with.error.error.message",runProfile.getName(),e.getMessage());
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    LOG.assertTrue(false,message);
  }
 else {
    if (message.contains("87") && e instanceof ProcessNotCreatedException && ((ProcessNotCreatedException)e).getCommandLine().getCommandLineString().length() > 1024 * 32) {
      if (Messages.showYesNoDialog(project,message + "\nCommand line is too long. In order to reduce its length classpath file can be used. Would you like to enable classpath file mode for all run configurations of your project?",ExecutionBundle.message("run.error.message.title"),Messages.getErrorIcon()) == DialogWrapper.OK_EXIT_CODE) {
        PropertiesComponent.getInstance(project).setValue("dynamic.classpath","true");
      }
    }
 else {
      Messages.showErrorDialog(project,message,ExecutionBundle.message("run.error.message.title"));
    }
  }
}
