{
  if (module == null) {
    return;
  }
  final JavaParameters tmp=new JavaParameters();
  tmp.configureByModule(module,isTests ? JavaParameters.CLASSES_AND_TESTS : JavaParameters.CLASSES_ONLY);
  if (tmp.getClassPath().getVirtualFiles().isEmpty()) {
    return;
  }
  Set<VirtualFile> core=new HashSet<VirtualFile>(params.getClassPath().getVirtualFiles());
  PathsList nonCore=new PathsList();
  for (  VirtualFile virtualFile : tmp.getClassPath().getVirtualFiles()) {
    if (allowDuplication || !core.contains(virtualFile)) {
      nonCore.add(virtualFile);
    }
  }
  final String cp=nonCore.getPathsString();
  if (!StringUtil.isEmptyOrSpaces(cp)) {
    params.getProgramParametersList().add("--classpath");
    params.getProgramParametersList().add(cp);
  }
}
