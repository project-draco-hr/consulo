{
  if (element == myRoot) {
    return;
  }
  if (element instanceof GroupingElement) {
    GroupingElement groupingElement=(GroupingElement)element;
    removeGroup(groupingElement.getName());
    final VirtualFile virtualFile=groupingElement.getFile();
    if (virtualFile != null) {
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        @Override public void run(){
          final PsiFile psiFile=virtualFile.isValid() ? PsiManager.getInstance(myProject).findFile(virtualFile) : null;
          if (psiFile != null) {
            DaemonCodeAnalyzer.getInstance(myProject).restart(psiFile);
          }
        }
      }
);
    }
  }
 else   if (element instanceof NavigatableMessageElement) {
    final NavigatableMessageElement navElement=(NavigatableMessageElement)element;
    final GroupingElement parent=navElement.getParent();
    if (parent != null) {
synchronized (myLock) {
        final List<NavigatableMessageElement> groupMessages=myGroupNameToMessagesMap.get(parent.getName());
        if (groupMessages != null) {
          groupMessages.remove(navElement);
        }
      }
    }
  }
 else {
synchronized (myLock) {
      final List<ErrorTreeElement> simples=mySimpleMessages.get(element.getKind());
      if (simples != null) {
        simples.remove(element);
      }
    }
  }
}
