{
  final PsiElement parent=getParent();
  final PsiAnnotation[] annotations=getAnnotations();
  final boolean separateAnnotations=parent instanceof PsiClass || parent instanceof PsiMethod || parent instanceof PsiField;
  for (int i=0; i < annotations.length; i++) {
    appendText(annotations[i],indentLevel,buffer,separateAnnotations ? NEXT_LINE : " ");
  }
  final boolean isClass=parent instanceof PsiClass;
  final boolean isInterface=isClass && ((PsiClass)parent).isInterface();
  final boolean isEnum=isClass && ((PsiClass)parent).isEnum();
  final boolean isInterfaceClass=isClass && parent.getParent() instanceof PsiClass && ((PsiClass)parent.getParent()).isInterface();
  final boolean isMethod=parent instanceof PsiMethod;
  final boolean isInterfaceMethod=isMethod && parent.getParent() instanceof PsiClass && ((PsiClass)parent.getParent()).isInterface();
  final boolean isField=parent instanceof PsiField;
  final boolean isInterfaceField=isField && parent.getParent() instanceof PsiClass && ((PsiClass)parent.getParent()).isInterface();
  final boolean isEnumConstant=parent instanceof PsiEnumConstant;
  if (hasModifierProperty(PsiModifier.PUBLIC) && !isInterfaceMethod && !isInterfaceField&& !isInterfaceClass&& !isEnumConstant) {
    buffer.append(PsiModifier.PUBLIC).append(' ');
  }
  if (hasModifierProperty(PsiModifier.PROTECTED)) {
    buffer.append(PsiModifier.PROTECTED).append(' ');
  }
  if (hasModifierProperty(PsiModifier.PRIVATE)) {
    buffer.append(PsiModifier.PRIVATE).append(' ');
  }
  if (hasModifierProperty(PsiModifier.STATIC) && !isInterfaceField && !isEnumConstant) {
    buffer.append(PsiModifier.STATIC).append(' ');
  }
  if (hasModifierProperty(PsiModifier.ABSTRACT) && !isInterface && !isInterfaceMethod) {
    buffer.append(PsiModifier.ABSTRACT).append(' ');
  }
  if (hasModifierProperty(PsiModifier.FINAL) && !isEnum && !isInterfaceField&& !isEnumConstant) {
    buffer.append(PsiModifier.FINAL).append(' ');
  }
  if (hasModifierProperty(PsiModifier.NATIVE)) {
    buffer.append(PsiModifier.NATIVE).append(' ');
  }
  if (hasModifierProperty(PsiModifier.SYNCHRONIZED)) {
    buffer.append(PsiModifier.SYNCHRONIZED).append(' ');
  }
  if (hasModifierProperty(PsiModifier.TRANSIENT)) {
    buffer.append(PsiModifier.TRANSIENT).append(' ');
  }
  if (hasModifierProperty(PsiModifier.VOLATILE)) {
    buffer.append(PsiModifier.VOLATILE).append(' ');
  }
  if (hasModifierProperty(PsiModifier.STRICTFP)) {
    buffer.append(PsiModifier.STRICTFP).append(' ');
  }
  if (hasModifierProperty(PsiModifier.DEFAULT)) {
    buffer.append(PsiModifier.DEFAULT).append(' ');
  }
}
