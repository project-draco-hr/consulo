{
  if (!isShowing()) {
    return;
  }
  final Runtime runtime=Runtime.getRuntime();
  final long total=runtime.totalMemory() / MEGABYTE;
  final long used=total - runtime.freeMemory() / MEGABYTE;
  if (total != myLastTotal || used != myLastUsed) {
    myLastTotal=total;
    myLastUsed=used;
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        myBufferedImage=null;
        repaint();
      }
    }
);
    setToolTipText(UIBundle.message("memory.usage.panel.statistics.message",total,used));
  }
}
