{
  final Transformation transform=new Transformation();
  final Loader loader=new StreamLoader(DefaultBundledDictionariesProvider.class.getResourceAsStream(name),name);
  IdeaTestUtil.assertTiming("Dictionary load depends on words count. Approximate word count: " + wordCount + ".",times.get(name),new Runnable(){
    public void run(){
      dictionary=CompressedDictionary.create(loader,transform);
    }
  }
);
  final Set<String> wordsToStoreAndCheck=createWordSets(name,50000,1).getFirst();
  IdeaTestUtil.assertTiming("Invoke 'contains'  " + wordsToStoreAndCheck.size() + " times",2000,new Runnable(){
    public void run(){
      for (      String s : wordsToStoreAndCheck) {
        assertTrue(dictionary.contains(s));
      }
    }
  }
);
}
