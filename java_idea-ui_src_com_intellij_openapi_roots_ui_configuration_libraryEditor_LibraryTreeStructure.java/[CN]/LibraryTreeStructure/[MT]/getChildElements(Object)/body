{
  if (element == myRootElement) {
    ArrayList<LibraryTableTreeContentElement> elements=new ArrayList<LibraryTableTreeContentElement>(3);
    final Library library=myRootElement.getLibrary();
    final LibraryEditor parentEditor=myParentEditor.getLibraryEditor(library);
    for (    OrderRootType type : OrderRootType.getAllTypes()) {
      final String[] urls=parentEditor.getUrls(type);
      if (urls.length > 0) {
        elements.add(OrderRootTypeUIFactory.FACTORY.getByKey(type).createElement(myRootElement));
      }
    }
    return elements.toArray();
  }
  if (element instanceof LibraryTableTreeContentElement) {
    final LibraryTableTreeContentElement contentElement=(LibraryTableTreeContentElement)element;
    final LibraryTableTreeContentElement parentElement=contentElement.getParent();
    if (parentElement instanceof LibraryElement) {
      return buildItems(contentElement,((LibraryElement)parentElement).getLibrary(),contentElement.getOrderRootType());
    }
  }
  return ArrayUtil.EMPTY_OBJECT_ARRAY;
}
