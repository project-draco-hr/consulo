{
  getDomManager().registerFileDescription(new DomFileDescription(MyElement.class,"xxx"){
    @Override public boolean isMyFile(    @NotNull final XmlFile file,    @Nullable final Module module){
      return file.getText().contains("foo");
    }
  }
,getTestRootDisposable());
  final XmlFile file=(XmlFile)createFile("xxx.xml","<xxx zzz=\"foo\"><boy/><boy/><xxx/>");
  final MyElement boy=getDomManager().getFileElement(file,MyElement.class).getRootElement().getBoys().get(0);
  new WriteCommandAction(getProject()){
    @Override protected void run(    Result result) throws Throwable {
      file.getDocument().getRootTag().setAttribute("zzz","bar");
    }
  }
.execute();
  assertFalse(getDomManager().isDomFile(file));
  assertFalse(boy.isValid());
}
