{
  BugLog.getInstance().assertTrue(isSetLock() || isResetLock(),"Nothing specified");
  final ICvsFiles cvsFiles;
  try {
    cvsFiles=scanFileSystem(clientEnvironment);
  }
 catch (  IOException ex) {
    throw new IOCommandException(ex);
  }
  final Requests requests=new Requests(CommandRequest.ADMIN,clientEnvironment);
  requests.addArgumentRequest(isSetLock(),"-l");
  requests.addArgumentRequest(isResetLock(),"-u");
  addFileRequests(cvsFiles,requests,clientEnvironment);
  requests.addLocalPathDirectoryRequest();
  addArgumentRequests(requests);
  final IRequestsProgressHandler requestsProgressHandler=FileStateRequestsProgressHandler.create(progressViewer,cvsFiles);
  return requestProcessor.processRequests(requests,requestsProgressHandler);
}
