{
  if (project == null) {
    if (create && myMarkupModel == null) {
      myMarkupModel=new MarkupModelImpl(this);
    }
    return myMarkupModel;
  }
  if (DocumentMarkupModelManager.getInstance(project).isDisposed()) {
    return new EmptyMarkupModel(this);
  }
  MarkupModel model=myProjectToMarkupModelMap.get(project);
  if (create && model == null) {
    model=new MarkupModelImpl(this);
    myProjectToMarkupModelMap.put(project,model);
    DocumentMarkupModelManager.getInstance(project).registerDocument(this);
  }
  return model;
}
