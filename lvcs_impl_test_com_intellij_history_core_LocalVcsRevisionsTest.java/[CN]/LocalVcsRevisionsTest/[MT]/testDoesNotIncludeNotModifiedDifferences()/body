{
  vcs.beginChangeSet();
  vcs.createDirectory("dir1");
  vcs.createDirectory("dir1/dir2");
  vcs.createDirectory("dir1/dir3");
  long timestamp1=-1;
  vcs.createFile("dir1/dir2/file",cf(""),timestamp1,false);
  vcs.endChangeSet(null);
  long timestamp=-1;
  vcs.createFile("dir1/dir3/file",null,timestamp,false);
  List<Revision> rr=vcs.getRevisionsFor("dir1");
  Revision recent=rr.get(0);
  Revision prev=rr.get(1);
  List<Difference> dd=prev.getDifferencesWith(recent);
  assertEquals(1,dd.size());
  Difference d=dd.get(0);
  assertNull(d.getLeft());
  assertEquals("dir1/dir3/file",d.getRight().getPath());
}
