{
  JPanel pane=new JPanel(new GridBagLayout());
  pane.setBorder(IdeBorderFactory.createTitledBorder(ToolsBundle.message("tools.tool.group"),true));
  GridBagConstraints constr;
  constr=new GridBagConstraints();
  constr.gridx=0;
  constr.gridy=0;
  constr.insets=new Insets(0,0,0,10);
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  pane.add(new JLabel(ToolsBundle.message("tools.program.label")),constr);
  FixedSizeButton browseCommandButton=new FixedSizeButton(myTfCommand);
  browseCommandButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      FileChooserDescriptor descriptor=FileChooserDescriptorFactory.createSingleFileOrExecutableAppDescriptor();
      VirtualFile file=FileChooser.chooseFile(descriptor,myProject,null);
      if (file != null) {
        myTfCommand.setText(file.getPresentableUrl());
        String workingDirectory=myTfCommandWorkingDirectory.getText();
        if (workingDirectory == null || workingDirectory.length() == 0) {
          VirtualFile parent=file.getParent();
          if (parent != null && parent.isDirectory()) {
            myTfCommandWorkingDirectory.setText(parent.getPresentableUrl());
          }
        }
      }
    }
  }
);
  JPanel _pane0=new JPanel(new BorderLayout());
  _pane0.add(myTfCommand,BorderLayout.CENTER);
  _pane0.add(browseCommandButton,BorderLayout.EAST);
  TextFieldWithBrowseButton.MyDoClickAction.addTo(browseCommandButton,myTfCommand);
  constr=new GridBagConstraints();
  constr.gridx=1;
  constr.gridy=0;
  constr.insets=new Insets(0,0,0,10);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  constr.weightx=1.0;
  pane.add(_pane0,constr);
  constr=new GridBagConstraints();
  constr.gridx=2;
  constr.gridy=0;
  constr.insets=new Insets(0,0,0,0);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  myInsertCommandMacroButton=new JButton(ToolsBundle.message("tools.insert.macro.button"));
  pane.add(myInsertCommandMacroButton,constr);
  constr=new GridBagConstraints();
  constr.gridx=0;
  constr.gridy=1;
  constr.insets=new Insets(5,0,0,10);
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  pane.add(new JLabel(ToolsBundle.message("tools.parameters.label")),constr);
  constr=new GridBagConstraints();
  constr.gridx=1;
  constr.gridy=1;
  constr.insets=new Insets(5,0,0,10);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  constr.weightx=1.0;
  pane.add(myParametersField,constr);
  constr=new GridBagConstraints();
  constr.gridx=2;
  constr.gridy=1;
  constr.insets=new Insets(5,0,0,0);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  myInsertParametersMacroButton=new JButton(ToolsBundle.message("tools.insert.macro.button.a"));
  pane.add(myInsertParametersMacroButton,constr);
  constr=new GridBagConstraints();
  constr.gridx=0;
  constr.gridy=2;
  constr.insets=new Insets(5,0,0,10);
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  pane.add(new JLabel(ToolsBundle.message("tools.working.directory.label")),constr);
  FixedSizeButton browseDirectoryButton=new FixedSizeButton(myTfCommandWorkingDirectory);
  TextFieldWithBrowseButton.MyDoClickAction.addTo(browseDirectoryButton,myTfCommandWorkingDirectory);
  browseDirectoryButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      FileChooserDescriptor descriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
      VirtualFile file=FileChooser.chooseFile(descriptor,myProject,null);
      if (file != null) {
        myTfCommandWorkingDirectory.setText(file.getPresentableUrl());
      }
    }
  }
);
  JPanel _pane1=new JPanel(new BorderLayout());
  _pane1.add(myTfCommandWorkingDirectory,BorderLayout.CENTER);
  _pane1.add(browseDirectoryButton,BorderLayout.EAST);
  constr=new GridBagConstraints();
  constr.gridx=1;
  constr.gridy=2;
  constr.gridwidth=1;
  constr.insets=new Insets(5,0,0,10);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.WEST;
  constr.weightx=1.0;
  pane.add(_pane1,constr);
  constr=new GridBagConstraints();
  constr.gridx=2;
  constr.gridy=2;
  constr.insets=new Insets(5,0,0,0);
  constr.fill=GridBagConstraints.HORIZONTAL;
  constr.anchor=GridBagConstraints.BASELINE_LEADING;
  myInsertWorkingDirectoryMacroButton=new JButton(ToolsBundle.message("tools.insert.macro.button.c"));
  pane.add(myInsertWorkingDirectoryMacroButton,constr);
  constr=new GridBagConstraints();
  constr.gridy=3;
  constr.fill=GridBagConstraints.BASELINE_LEADING;
  constr.weighty=1.0;
  pane.add(new JLabel(),constr);
  return pane;
}
