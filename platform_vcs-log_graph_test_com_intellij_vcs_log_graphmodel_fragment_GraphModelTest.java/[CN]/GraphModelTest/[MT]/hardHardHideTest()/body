{
  Set<String> startNodes=new HashSet<String>();
  FragmentManager fragmentManager=hardGraph.getFragmentManager();
  fragmentManager.showAll();
  startNodes.add("a3");
  startNodes.add("a9");
  startNodes.add("a10");
  setVisibleBranches(hardGraph,startNodes);
  fragmentManager.changeVisibility(getRelateFragment(hardGraph,0));
  assertEquals("first hide","a3|-|-a3:a8:HIDE_FRAGMENT:a3|-COMMIT_NODE|-a3|-0\n" + "a8|-a3:a8:HIDE_FRAGMENT:a3|-a8:a11:USUAL:a2#a6|-COMMIT_NODE|-a2#a6|-1\n" + "a11|-a8:a11:USUAL:a2#a6|-a11:a11:USUAL:a2#a11|-EDGE_NODE|-a2#a11|-2\n"+ "   a9|-|-a9:a11:USUAL:a9|-COMMIT_NODE|-a9|-2\n"+ "a10|-|-a10:a13:USUAL:a10|-COMMIT_NODE|-a10|-3\n"+ "   a11|-a11:a11:USUAL:a2#a11 a9:a11:USUAL:a9|-a11:a11:USUAL:a2#a11|-EDGE_NODE|-a2#a11|-3\n"+ "a11|-a11:a11:USUAL:a2#a11|-a11:a12:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-4\n"+ "a12|-a11:a12:USUAL:a2#a11|-a12:a15:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-5\n"+ "a13|-a10:a13:USUAL:a10|-a13:a14:USUAL:a10|-COMMIT_NODE|-a10|-6\n"+ "a14|-a13:a14:USUAL:a10|-a14:a15:USUAL:a10|-COMMIT_NODE|-a10|-7\n"+ "a15|-a12:a15:USUAL:a2#a11 a14:a15:USUAL:a10|-a15:a16:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-8\n"+ "a16|-a15:a16:USUAL:a2#a11|-a16:a17:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-9\n"+ "a17|-a16:a17:USUAL:a2#a11|-|-COMMIT_NODE|-a2#a11|-10",toStr(hardGraph.getGraph()));
  startNodes.remove("a9");
  setVisibleBranches(hardGraph,startNodes);
  fragmentManager.changeVisibility(getRelateFragment(hardGraph,4));
  assertEquals("second hide","a3|-|-a3:a12:HIDE_FRAGMENT:a3|-COMMIT_NODE|-a3|-0\n" + "a10|-|-a10:a13:USUAL:a10|-COMMIT_NODE|-a10|-1\n" + "a12|-a3:a12:HIDE_FRAGMENT:a3|-a12:a15:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-2\n"+ "a13|-a10:a13:USUAL:a10|-a13:a14:USUAL:a10|-COMMIT_NODE|-a10|-3\n"+ "a14|-a13:a14:USUAL:a10|-a14:a15:USUAL:a10|-COMMIT_NODE|-a10|-4\n"+ "a15|-a12:a15:USUAL:a2#a11 a14:a15:USUAL:a10|-a15:a16:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-5\n"+ "a16|-a15:a16:USUAL:a2#a11|-a16:a17:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-6\n"+ "a17|-a16:a17:USUAL:a2#a11|-|-COMMIT_NODE|-a2#a11|-7",toStr(hardGraph.getGraph()));
  startNodes.remove("a10");
  setVisibleBranches(hardGraph,startNodes);
  fragmentManager.changeVisibility(getRelateFragment(hardGraph,2));
  assertEquals("last hide","a3|-|-a3:a17:HIDE_FRAGMENT:a3|-COMMIT_NODE|-a3|-0\n" + "a17|-a3:a17:HIDE_FRAGMENT:a3|-|-COMMIT_NODE|-a2#a11|-1",toStr(hardGraph.getGraph()));
  startNodes.clear();
  startNodes.add("a0");
  setVisibleBranches(hardGraph,startNodes);
  assertEquals("show a0","a0|-|-a0:a1:USUAL:a0|-COMMIT_NODE|-a0|-0\n" + "a1|-a0:a1:USUAL:a0|-a1:a2:USUAL:a0|-COMMIT_NODE|-a0|-1\n" + "a2|-a1:a2:USUAL:a0|-a2:a11:USUAL:a2#a11 a2:a6:USUAL:a2#a6|-COMMIT_NODE|-a0|-2\n"+ "a6|-a2:a6:USUAL:a2#a6|-a6:a7:USUAL:a2#a6|-COMMIT_NODE|-a2#a6|-3\n"+ "a7|-a6:a7:USUAL:a2#a6|-a7:a8:USUAL:a2#a6|-COMMIT_NODE|-a2#a6|-4\n"+ "a8|-a7:a8:USUAL:a2#a6|-a8:a11:USUAL:a2#a6|-COMMIT_NODE|-a2#a6|-5\n"+ "a11|-a2:a11:USUAL:a2#a11 a8:a11:USUAL:a2#a6|-a11:a11:USUAL:a2#a11|-EDGE_NODE|-a2#a11|-6\n"+ "a11|-a11:a11:USUAL:a2#a11|-a11:a11:USUAL:a2#a11|-EDGE_NODE|-a2#a11|-7\n"+ "a11|-a11:a11:USUAL:a2#a11|-a11:a12:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-8\n"+ "a12|-a11:a12:USUAL:a2#a11|-a12:a15:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-9\n"+ "a15|-a12:a15:USUAL:a2#a11|-a15:a16:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-10\n"+ "a16|-a15:a16:USUAL:a2#a11|-a16:a17:USUAL:a2#a11|-COMMIT_NODE|-a2#a11|-11\n"+ "a17|-a16:a17:USUAL:a2#a11|-|-COMMIT_NODE|-a2#a11|-12",toStr(hardGraph.getGraph()));
  fragmentManager.showAll();
}
