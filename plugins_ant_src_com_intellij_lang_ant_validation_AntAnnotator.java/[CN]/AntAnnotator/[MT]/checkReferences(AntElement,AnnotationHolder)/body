{
  final PsiReference[] refs=element.getReferences();
  for (  final PsiReference ref : refs) {
    if (ref instanceof AntReference) {
      final AntReference antRef=(AntReference)ref;
      if (!antRef.shouldBeSkippedByAnnotator() && ref.resolve() == null) {
        if (antRef instanceof AntPropertyReference && isReferencedPropertyUsedInCondition((AntPropertyReference)antRef,AntTarget.ConditionalAttribute.IF)) {
          continue;
        }
        final TextRange absoluteRange=ref.getRangeInElement().shiftRight(ref.getElement().getTextRange().getStartOffset());
        final Annotation annotation=holder.createErrorAnnotation(absoluteRange,antRef.getUnresolvedMessagePattern());
        annotation.setHighlightType(ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
        final IntentionAction[] intentionActions=antRef.getFixes();
        for (        final IntentionAction action : intentionActions) {
          annotation.registerFix(action);
        }
      }
    }
  }
}
