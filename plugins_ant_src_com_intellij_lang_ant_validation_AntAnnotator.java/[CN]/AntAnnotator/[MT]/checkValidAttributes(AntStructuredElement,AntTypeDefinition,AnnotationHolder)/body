{
  final XmlTag sourceElement=se.getSourceElement();
  for (  final XmlAttribute attr : sourceElement.getAttributes()) {
    @NonNls final String name=attr.getName();
    if (name.startsWith("xmlns"))     continue;
    final AntAttributeType type=def.getAttributeType(name);
    final PsiElement attrName=attr.getFirstChild();
    if (attrName != null) {
      if (type == null) {
        if (!isSuccessorOfUndefinedElement(se)) {
          holder.createErrorAnnotation(attrName,AntBundle.message("attribute.is.not.allowed.here",name));
        }
      }
 else {
        if (type == AntAttributeType.INTEGER) {
          try {
            Integer.parseInt(se.computeAttributeValue(attr.getValue()));
          }
 catch (          NumberFormatException e) {
            holder.createErrorAnnotation(attrName,AntBundle.message("integer.attribute.has.invalid.value",name));
          }
        }
      }
    }
  }
}
