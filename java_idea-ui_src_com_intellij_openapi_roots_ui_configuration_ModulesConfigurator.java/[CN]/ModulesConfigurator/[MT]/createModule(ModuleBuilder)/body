{
  final Exception[] ex=new Exception[]{null};
  final Module module=ApplicationManager.getApplication().runWriteAction(new Computable<Module>(){
    @SuppressWarnings({"ConstantConditions"}) public Module compute(){
      try {
        return builder.createModule(myModuleModel);
      }
 catch (      Exception e) {
        ex[0]=e;
        return null;
      }
    }
  }
);
  if (ex[0] != null) {
    Messages.showErrorDialog(ProjectBundle.message("module.add.error.message",ex[0].getMessage()),ProjectBundle.message("module.add.error.title"));
  }
  return module;
}
