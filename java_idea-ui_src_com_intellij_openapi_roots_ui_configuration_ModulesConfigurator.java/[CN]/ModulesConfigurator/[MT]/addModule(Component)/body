{
  if (myProject.isDefault())   return null;
  final ProjectBuilder builder=runModuleWizard(parent);
  if (builder != null) {
    final List<Module> modules=new ArrayList<Module>();
    final List<Module> commitedModules;
    if (builder instanceof ProjectImportBuilder<?>) {
      final ModifiableArtifactModel artifactModel=ProjectStructureConfigurable.getInstance(myProject).getArtifactsStructureConfigurable().getModifiableArtifactModel();
      commitedModules=((ProjectImportBuilder<?>)builder).commit(myProject,myModuleModel,this,artifactModel);
    }
 else {
      commitedModules=builder.commit(myProject,myModuleModel,this);
    }
    if (commitedModules != null) {
      modules.addAll(commitedModules);
    }
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        for (        Module module : modules) {
          getOrCreateModuleEditor(module);
        }
      }
    }
);
    return modules;
  }
  return null;
}
