{
  if (myTBuilt)   return;
  myInvT=(Node[])new Object[myGraph.getNodes().size()];
  mySCCs=new LinkedList<Pair<Integer,Integer>>();
  int currT=0;
  int size=myGraph.getNodes().size();
  myNodeToTNumber=new HashMap<Node,Integer>(size);
  for (int i=0; i < size; i++) {
    Node v=myInvN[i];
    if (!myNodeToTNumber.containsKey(v)) {
      final Set<Node> region=region(v);
      mySCCs.addLast(new Pair<Integer,Integer>(new Integer(currT),new Integer(region.size())));
      myNodeToTNumber.put(v,new Integer(currT));
      myInvT[currT++]=v;
      for (Iterator<Node> iterator=region.iterator(); iterator.hasNext(); ) {
        Node w=iterator.next();
        if (w != v) {
          myNodeToTNumber.put(w,new Integer(currT));
          myInvT[currT++]=w;
        }
      }
    }
  }
  myTBuilt=true;
}
