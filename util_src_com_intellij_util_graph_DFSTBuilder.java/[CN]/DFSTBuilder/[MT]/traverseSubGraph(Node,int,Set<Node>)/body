{
  if (!processed.contains(node)) {
    processed.add(node);
    for (Iterator<Node> it=myGraph.getOut(node); it.hasNext(); ) {
      nNumber=traverseSubGraph(it.next(),nNumber,processed);
    }
    nNumber--;
    myNodeToNNumber.put(node,Integer.valueOf(nNumber));
    myInvN[nNumber]=node;
    if (myBackEdge == null) {
      for (Iterator<Node> it=myGraph.getIn(node); it.hasNext(); ) {
        Node prev=it.next();
        Integer prevNumber=myNodeToNNumber.get(prev);
        if (prevNumber != null && prevNumber.intValue() > nNumber) {
          myBackEdge=new Pair<Node,Node>(node,prev);
          break;
        }
      }
    }
  }
  return nNumber;
}
