{
  if (element == null) {
    return ContainerUtil.emptyList();
  }
  PsiElementProcessor.CollectElements<T> processor=new PsiElementProcessor.CollectElements<T>(){
    @Override public boolean execute(    @NotNull T each){
      if (each == element)       return true;
      if (instanceOf(each,classes)) {
        return super.execute(each);
      }
      return true;
    }
  }
;
  processElements(element,processor);
  return processor.getCollection();
}
