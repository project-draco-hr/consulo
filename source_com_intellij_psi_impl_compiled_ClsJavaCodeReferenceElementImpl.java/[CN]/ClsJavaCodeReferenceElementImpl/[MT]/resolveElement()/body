{
  PsiElement element=getParent();
  while (!(element instanceof PsiClass) || element instanceof PsiTypeParameter) {
    if (element instanceof PsiMethod) {
      final PsiMethod method=(PsiMethod)element;
      final PsiTypeParameterList list=method.getTypeParameterList();
      if (list != null) {
        final PsiTypeParameter[] parameters=list.getTypeParameters();
        for (int i=0; parameters != null && i < parameters.length; i++) {
          final PsiTypeParameter parameter=parameters[i];
          if (parameter.getName().equals(myQualifiedName))           return parameter;
        }
      }
    }
    element=element.getParent();
  }
  Iterator<PsiTypeParameter> it=PsiUtil.typeParametersIterator((PsiClass)element);
  while (it.hasNext()) {
    PsiTypeParameter parameter=it.next();
    if (parameter.getName().equals(myQualifiedName))     return parameter;
  }
  return getManager().findClass(myQualifiedName,GlobalSearchScope.allScope(getProject()));
}
