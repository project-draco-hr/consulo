{
  Module module=getValue();
  if (module == null) {
    return Collections.emptyList();
  }
  ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
  ModuleFileIndex moduleFileIndex=rootManager.getFileIndex();
  final VirtualFile[] contentRoots=rootManager.getContentRoots();
  final List<AbstractTreeNode> children=new ArrayList<AbstractTreeNode>(contentRoots.length + 1);
  final PsiManager psiManager=PsiManager.getInstance(getProject());
  for (  final VirtualFile contentRoot : contentRoots) {
    LOG.assertTrue(contentRoot.isDirectory());
    if (!moduleFileIndex.isInContent(contentRoot))     continue;
    final PsiDirectory psiDirectory=psiManager.findDirectory(contentRoot);
    LOG.assertTrue(psiDirectory != null);
    PsiDirectoryNode directoryNode=new PsiDirectoryNode(getProject(),psiDirectory,getSettings());
    children.add(directoryNode);
  }
  return children;
}
