{
  Module module=getValue();
  if (module == null) {
    return Collections.emptyList();
  }
  ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
  ModuleFileIndex moduleFileIndex=rootManager.getFileIndex();
  final VirtualFile[] contentRoots=rootManager.getContentRoots();
  final List<AbstractTreeNode> children=new ArrayList<AbstractTreeNode>(contentRoots.length + 1);
  final PsiManager psiManager=PsiManager.getInstance(getProject());
  for (  final VirtualFile contentRoot : contentRoots) {
    if (!moduleFileIndex.isInContent(contentRoot))     continue;
    AbstractTreeNode child;
    if (contentRoot.isDirectory()) {
      PsiDirectory directory=psiManager.findDirectory(contentRoot);
      LOG.assertTrue(directory != null);
      child=new PsiDirectoryNode(getProject(),directory,getSettings());
    }
 else {
      PsiFile file=psiManager.findFile(contentRoot);
      LOG.assertTrue(file != null);
      child=new PsiFileNode(getProject(),file,getSettings());
    }
    children.add(child);
  }
  return children;
}
