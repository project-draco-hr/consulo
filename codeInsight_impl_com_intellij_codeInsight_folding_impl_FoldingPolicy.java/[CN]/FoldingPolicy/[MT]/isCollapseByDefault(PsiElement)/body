{
  final Language lang=element.getLanguage();
  final FoldingBuilder foldingBuilder=lang.getFoldingBuilder();
  if (foldingBuilder != null) {
    return foldingBuilder.isCollapsedByDefault(element.getNode());
  }
  CodeFoldingSettings settings=CodeFoldingSettings.getInstance();
  if (element instanceof PsiImportList) {
    return settings.isCollapseImports();
  }
 else   if (element instanceof PsiMethod || element instanceof PsiClassInitializer) {
    if (!settings.isCollapseAccessors() && !settings.isCollapseMethods()) {
      return false;
    }
    if (element instanceof PsiMethod && isSimplePropertyAccessor((PsiMethod)element)) {
      return settings.isCollapseAccessors();
    }
    return settings.isCollapseMethods();
  }
 else   if (element instanceof PsiAnonymousClass) {
    return settings.isCollapseAnonymousClasses();
  }
 else   if (element instanceof PsiClass) {
    return !(element.getParent() instanceof PsiFile) && settings.isCollapseInnerClasses();
  }
 else   if (element instanceof PsiDocComment) {
    return settings.isCollapseJavadocs();
  }
 else   if (element instanceof PsiJavaFile) {
    return settings.isCollapseFileHeader();
  }
 else   if (element instanceof PsiAnnotation) {
    return settings.isCollapseAnnotations();
  }
 else {
    LOG.error("Unknown element:" + element);
    return false;
  }
}
