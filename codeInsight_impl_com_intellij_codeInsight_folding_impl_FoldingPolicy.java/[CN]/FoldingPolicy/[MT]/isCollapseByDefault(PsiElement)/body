{
  final Language lang=element.getLanguage();
  if (lang != null) {
    final FoldingBuilder foldingBuilder=lang.getFoldingBuilder();
    if (foldingBuilder != null) {
      return foldingBuilder.isCollapsedByDefault(element.getNode());
    }
  }
  CodeFoldingSettings settings=CodeFoldingSettings.getInstance();
  if (element instanceof PsiImportList) {
    return settings.isCollapseImports();
  }
 else   if (element instanceof PsiMethod || element instanceof PsiClassInitializer) {
    if (element instanceof PsiMethod && isSimplePropertyAccessor((PsiMethod)element)) {
      return settings.isCollapseAccessors();
    }
    if (element instanceof PsiMethod && CodeGenerator.SETUP_METHOD_NAME.equals(((PsiMethod)element).getName()) || element instanceof PsiClassInitializer && isGeneratedUIInitializer((PsiClassInitializer)element)) {
      return true;
    }
    return settings.isCollapseMethods();
  }
 else   if (element instanceof PsiAnonymousClass) {
    return settings.isCollapseAnonymousClasses();
  }
 else   if (element instanceof PsiClass) {
    return element.getParent() instanceof PsiFile ? false : settings.isCollapseInnerClasses();
  }
 else   if (element instanceof PsiDocComment) {
    return settings.isCollapseJavadocs();
  }
 else   if (element instanceof PsiJavaFile) {
    return settings.isCollapseFileHeader();
  }
 else {
    LOG.error("Unknown element:" + element);
    return false;
  }
}
