{
  if (parameters.getCompletionType() != CompletionType.BASIC || parameters.getInvocationCount() != 1 || !JavaCompletionContributor.mayStartClassName(result,false) || !JavaCompletionContributor.isClassNamePossible(parameters.getPosition())) {
    return;
  }
  final Ref<Boolean> empty=Ref.create(true);
  result.runRemainingContributors(parameters,new Consumer<CompletionResult>(){
    public void consume(    final CompletionResult lookupElement){
      empty.set(false);
      result.passResult(lookupElement);
    }
  }
);
  if (empty.get()) {
    JavaClassNameCompletionContributor.addAllClasses(parameters,JavaCompletionSorting.addJavaSorting(parameters,result),new Consumer<LookupElement>(){
      @Override public void consume(      LookupElement element){
        JavaPsiClassReferenceElement classElement=element.as(JavaPsiClassReferenceElement.CLASS_CONDITION_KEY);
        if (classElement != null) {
          classElement.setAutoCompletionPolicy(AutoCompletionPolicy.NEVER_AUTOCOMPLETE);
        }
        result.addElement(element);
      }
    }
);
  }
}
