{
  String prefix=super.findPrefix(insertedElement,offset);
  boolean searchForEntities=insertedElement instanceof XmlToken && (((XmlToken)insertedElement).getTokenType() == XmlTokenType.XML_DATA_CHARACTERS || ((XmlToken)insertedElement).getTokenType() == XmlTokenType.XML_ATTRIBUTE_VALUE_TOKEN);
  if (searchForEntities) {
    if (prefix.startsWith("&")) {
      prefix=prefix.substring(1);
    }
 else     if (prefix.contains("&")) {
      prefix=prefix.substring(prefix.indexOf("&") + 1);
    }
  }
  return prefix;
}
