{
  final String classToBind=editor.getRootContainer().getClassToBind();
  if (classToBind != null) {
    final PsiClass aClass=FormEditingUtil.findClassToBind(editor.getModule(),classToBind);
    if (aClass != null && aClass.findFieldByName(insertedComponent.getBinding(),true) == null) {
      if (!CodeInsightUtil.preparePsiElementForWrite(aClass)) {
        return;
      }
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          CreateFieldFix.runImpl(editor.getProject(),editor.getRootContainer(),aClass,insertedComponent.getComponentClassName(),insertedComponent.getBinding(),false,null);
        }
      }
);
    }
  }
}
