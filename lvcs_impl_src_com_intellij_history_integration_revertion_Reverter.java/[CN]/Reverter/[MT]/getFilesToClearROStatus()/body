{
  final Set<VirtualFile> files=new HashSet<VirtualFile>();
  myVcs.accept(selective(new ChangeVisitor(){
    @Override public void visit(    StructuralChange c){
      for (      IdPath p : c.getAffectedIdPaths()) {
        Entry e=myRoot.findEntry(p);
        if (e == null)         continue;
        files.addAll(myGateway.getAllFilesFrom(e.getPath()));
      }
    }
  }
));
  return new ArrayList<VirtualFile>(files);
}
