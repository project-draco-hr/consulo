{
  final ModuleFileIndex idx=ModuleRootManager.getInstance(module).getFileIndex();
  final VirtualFile[] roots=ModuleRootManager.getInstance(module).getContentRoots();
  for (  VirtualFile root : roots) {
    idx.iterateContentUnderDirectory(root,new ContentIterator(){
      public boolean processFile(      final VirtualFile dir){
        if (dir.isDirectory()) {
          final PsiDirectory psiDir=PsiManager.getInstance(myProject).findDirectory(dir);
          if (psiDir != null) {
            findFiles(files,psiDir,false);
          }
        }
        return true;
      }
    }
);
  }
}
