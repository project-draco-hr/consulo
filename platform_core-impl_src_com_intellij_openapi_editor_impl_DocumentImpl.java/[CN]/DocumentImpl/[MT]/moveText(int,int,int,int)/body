{
  assertBounds(srcStart,srcEnd);
  assertBounds(dstStart,dstEnd);
  if (srcStart == dstStart && srcEnd == dstEnd) {
    return;
  }
  CharSequence replacement=getCharsSequence().subSequence(srcStart,srcEnd);
  if (srcEnd <= dstStart || srcStart >= dstEnd) {
    replaceString(dstStart,dstEnd,replacement);
    int shift=0;
    if (dstStart < srcStart) {
      shift=(dstEnd - dstStart) - (srcEnd - srcStart);
    }
    deleteString(srcStart + shift,srcEnd + shift);
    return;
  }
  if (dstStart <= srcStart && dstEnd <= srcEnd) {
    if (dstEnd < srcEnd) {
      deleteString(dstEnd,srcEnd);
    }
    replaceString(dstStart,dstEnd,replacement);
  }
 else   if ((dstStart <= srcStart && dstEnd > srcEnd) || (dstStart > srcStart && dstEnd <= srcEnd)) {
    replaceString(dstStart,dstEnd,replacement);
  }
 else {
    replaceString(dstStart,dstEnd,replacement);
    deleteString(srcStart,dstStart);
  }
}
