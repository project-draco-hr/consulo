{
  try {
    if (LOG.isDebugEnabled())     LOG.debug(event.toString());
synchronized (myLineSetLock) {
      LineSet lineSet=myLineSet;
      if (lineSet != null) {
        lineSet.changedUpdate(event);
      }
    }
    setModificationStamp(newModificationStamp);
    if (!ShutDownTracker.isShutdownHookRunning()) {
      DocumentListener[] listeners=getCachedListeners();
      for (      DocumentListener listener : listeners) {
        try {
          listener.documentChanged(event);
        }
 catch (        Throwable e) {
          LOG.error(e);
        }
      }
    }
  }
  finally {
    myEventsHandling=false;
  }
}
