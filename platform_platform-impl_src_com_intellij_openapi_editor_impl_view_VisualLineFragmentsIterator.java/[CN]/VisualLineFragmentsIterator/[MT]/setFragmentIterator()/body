{
  mySegmentEndOffset=getCurrentFoldRegionStartOffset();
  if (mySegmentEndOffset > mySegmentStartOffset) {
    int line=myDocument.getLineNumber(mySegmentStartOffset);
    mySegmentEndOffset=Math.min(myNextWrapOffset,Math.min(mySegmentEndOffset,myDocument.getLineEndOffset(line)));
    int lineStartOffset=myDocument.getLineStartOffset(line);
    myFragmentIterator=myView.getTextLayoutCache().getLineLayout(line).getFragmentsInVisualOrder(myView,line,myCurrentX,myCurrentVisualColumn,mySegmentStartOffset - lineStartOffset,mySegmentEndOffset - lineStartOffset,myQuickEvaluationListener);
  }
}
