{
  mySegmentEndOffset=getCurrentFoldRegionStartOffset();
  if (mySegmentEndOffset > mySegmentStartOffset) {
    int line=myDocument.getLineNumber(mySegmentStartOffset);
    mySegmentEndOffset=Math.min(myNextWrapOffset,Math.min(mySegmentEndOffset,myDocument.getLineEndOffset(line)));
    int lineStartOffset=myDocument.getLineStartOffset(line);
    myFragmentIterator=myView.getLineLayout(line).getFragmentsInVisualOrder(myCurrentX,myCurrentVisualColumn,mySegmentStartOffset - lineStartOffset,mySegmentEndOffset - lineStartOffset).iterator();
  }
}
