{
  final CodeStyleManager codeStyleManager=myClass.getManager().getCodeStyleManager();
  String localName=codeStyleManager.suggestUniqueVariableName(baseName,myNewExpression,true);
  try {
    final PsiDeclarationStatement declaration=myElementFactory.createVariableDeclarationStatement(localName,type,initializer);
    PsiVariable variable=(PsiVariable)declaration.getDeclaredElements()[0];
    variable.getModifierList().setModifierProperty(PsiModifier.FINAL,true);
    myNewStatement.getParent().addBefore(declaration,myNewStatement);
    return variable;
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
    return null;
  }
}
