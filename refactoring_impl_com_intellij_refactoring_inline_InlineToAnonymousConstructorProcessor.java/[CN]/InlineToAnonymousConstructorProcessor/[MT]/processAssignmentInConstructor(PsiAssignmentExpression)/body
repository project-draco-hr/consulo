{
  if (expression.getLExpression() instanceof PsiReferenceExpression) {
    PsiReferenceExpression lExpr=(PsiReferenceExpression)expression.getLExpression();
    final PsiExpression rExpr=expression.getRExpression();
    if (rExpr == null)     return true;
    final PsiElement psiElement=lExpr.resolve();
    if (psiElement instanceof PsiField) {
      PsiField field=(PsiField)psiElement;
      if (myClass.getManager().areElementsEquivalent(field.getContainingClass(),myClass)) {
        FieldInfo info=getNewFieldInfo(field);
        Object constantValue=myClass.getManager().getConstantEvaluationHelper().computeConstantExpression(rExpr);
        final boolean isConstantInitializer=constantValue != null || ourNullPattern.accepts(rExpr);
        if (!isConstantInitializer) {
          final List<PsiReferenceExpression> localVarRefs=new ArrayList<PsiReferenceExpression>();
          final PsiExpression initializer;
          try {
            initializer=replaceParameterReferences((PsiExpression)rExpr.copy(),localVarRefs);
          }
 catch (          IncorrectOperationException e) {
            LOG.error(e);
            return true;
          }
          if (!localVarRefs.isEmpty()) {
            return false;
          }
          info.initializer=initializer;
          info.generateLocal=true;
        }
 else {
          info.initializer=(PsiExpression)rExpr.copy();
        }
      }
    }
 else     if (psiElement instanceof PsiVariable) {
      try {
        replaceParameterReferences((PsiExpression)rExpr.copy(),new ArrayList<PsiReferenceExpression>());
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
    }
  }
  return true;
}
