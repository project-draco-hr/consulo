{
  final ProxySelector aDefault=ProxySelector.getDefault();
  if (ourInstance != aDefault) {
    if (ourWrong != aDefault) {
      LOG.error("ProxySelector.setDefault() was changed to [" + aDefault.toString() + "] - other than com.intellij.util.proxy.CommonProxy.ourInstance.\n"+ "This will make some "+ ApplicationNamesInfo.getInstance().getProductName()+ " network calls fail.\n"+ "Instead, methods of com.intellij.util.proxy.CommonProxy should be used for proxying.");
      ourWrong=aDefault;
    }
    ProxySelector.setDefault(ourInstance);
    ourInstance.ensureAuthenticator();
  }
  assertSystemPropertiesSet();
}
