{
  final List<SmartPsiElementPointer<? extends PsiElement>> pointers=myIdMap.get(id);
  if (pointers == null || pointers.size() == 0) {
    return Collections.emptyList();
  }
  final List<PsiElement> result=new ArrayList<PsiElement>();
  for (  SmartPsiElementPointer<? extends PsiElement> pointer : pointers) {
    final PsiElement element=pointer.getElement();
    if (element != null) {
      result.add(element);
    }
 else     if (recreateMapIfCannotResolve) {
      myIdMap=createIdMap();
      return doFindIdDeclarations(id,false);
    }
  }
  return result;
}
