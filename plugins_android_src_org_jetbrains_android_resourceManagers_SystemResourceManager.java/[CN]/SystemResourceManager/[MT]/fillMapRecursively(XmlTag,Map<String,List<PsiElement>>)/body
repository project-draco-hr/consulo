{
  XmlAttribute idAttr=tag.getAttribute("id",SdkConstants.NS_RESOURCES);
  if (idAttr != null) {
    XmlAttributeValue idAttrValue=idAttr.getValueElement();
    if (idAttrValue != null) {
      if (AndroidResourceUtil.isIdDeclaration(idAttrValue)) {
        String id=AndroidResourceUtil.getResourceNameByReferenceText(idAttrValue.getValue());
        if (id != null) {
          List<PsiElement> list=result.get(id);
          if (list == null) {
            list=new ArrayList<PsiElement>();
            result.put(id,list);
          }
          list.add(idAttrValue);
        }
      }
    }
  }
  for (  XmlTag subtag : tag.getSubTags()) {
    fillMapRecursively(subtag,result);
  }
}
