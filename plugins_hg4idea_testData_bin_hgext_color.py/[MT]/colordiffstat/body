def colordiffstat(orig, s):
    lines = s.split('\n')
    for (i, line) in enumerate(lines):
        if (line and (line[(-1)] in '+-')):
            (name, graph) = line.rsplit(' ', 1)
            graph = graph.replace('-', render_effects('-', _diff_effects['deleted']))
            graph = graph.replace('+', render_effects('+', _diff_effects['inserted']))
            lines[i] = ' '.join([name, graph])
    orig('\n'.join(lines))
