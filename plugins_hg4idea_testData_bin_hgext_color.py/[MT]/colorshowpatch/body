def colorshowpatch(orig, self, node):
    'wrap cmdutil.changeset_printer.showpatch with colored output'
    oldwrite = extensions.wrapfunction(self.ui, 'write', colorwrap)
    try:
        orig(self, node)
    finally:
        self.ui.write = oldwrite
