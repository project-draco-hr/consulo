{
  final List<LocalChangeList> changeListList=myWorker.getListsCopy();
  for (  LocalChangeList list : changeListList) {
    Element listNode=new Element(NODE_LIST);
    element.addContent(listNode);
    if (list.isDefault()) {
      listNode.setAttribute(ATT_DEFAULT,ATT_VALUE_TRUE);
    }
    if (list.isReadOnly()) {
      listNode.setAttribute(ATT_READONLY,ATT_VALUE_TRUE);
    }
    listNode.setAttribute(ATT_ID,list.getId());
    listNode.setAttribute(ATT_NAME,list.getName());
    String comment=list.getComment();
    if (comment != null) {
      listNode.setAttribute(ATT_COMMENT,comment);
    }
    List<Change> changes=new ArrayList<>(list.getChanges());
    Collections.sort(changes,new ChangeComparator());
    for (    Change change : changes) {
      writeChange(listNode,change);
    }
  }
  final IgnoredFileBean[] filesToIgnore=myIgnoredIdeaLevel.getFilesToIgnore();
  for (  IgnoredFileBean bean : filesToIgnore) {
    Element fileNode=new Element(NODE_IGNORED);
    element.addContent(fileNode);
    String path=bean.getPath();
    if (path != null) {
      fileNode.setAttribute("path",path);
    }
    String mask=bean.getMask();
    if (mask != null) {
      fileNode.setAttribute("mask",mask);
    }
  }
  Set<String> manuallyRemovedFromIgnored=myIgnoredIdeaLevel.getDirectoriesManuallyRemovedFromIgnored();
  if (!manuallyRemovedFromIgnored.isEmpty()) {
    Element list=new Element(MANUALLY_REMOVED_FROM_IGNORED);
    for (    String path : manuallyRemovedFromIgnored) {
      list.addContent(new Element(DIRECTORY_TAG).setAttribute(ATT_PATH,path));
    }
    element.addContent(list);
  }
}
