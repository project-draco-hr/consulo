{
  LibraryTable libraryTable=getLibraryTable(myProject,libraryLevel);
  if (libraryTable == null)   return null;
  LibraryTable.ModifiableModel libTableModel=libraryTable.getModifiableModel();
  if (libTableModel instanceof LibraryTableBase.ModifiableModelEx) {
    Library library=((LibraryTableBase.ModifiableModelEx)libTableModel).createLibrary(libName,myLibraryType);
    if (library != null) {
      Library.ModifiableModel libModel=library.getModifiableModel();
      libModel.addRoot(sourceUrl,OrderRootType.SOURCES);
      if (docUrl != null && docUrl.trim().length() > 0) {
        libModel.addRoot(docUrl,OrderRootType.DOCUMENTATION);
      }
      libModel.commit();
      libTableModel.commit();
      return library;
    }
  }
  return null;
}
