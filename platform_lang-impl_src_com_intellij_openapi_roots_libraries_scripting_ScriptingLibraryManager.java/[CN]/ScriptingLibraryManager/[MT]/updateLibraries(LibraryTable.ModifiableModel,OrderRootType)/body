{
  for (  Library library : libTableModel.getLibraries()) {
    ScriptingLibraryTable.LibraryModel scriptingLibModel=myLibTable.getLibraryByName(library.getName());
    if (scriptingLibModel == null) {
      libTableModel.removeLibrary(library);
    }
 else {
      Library.ModifiableModel libModel=library.getModifiableModel();
      for (      VirtualFile libRoot : libModel.getFiles(rootType)) {
        libModel.removeRoot(libRoot.getUrl(),rootType);
      }
      for (      VirtualFile newRoot : scriptingLibModel.getFiles(rootType)) {
        libModel.addRoot(newRoot,rootType);
      }
      libModel.commit();
    }
  }
  for (  ScriptingLibraryTable.LibraryModel scriptingLibModel : myLibTable.getLibraries()) {
    Library library=libTableModel.getLibraryByName(scriptingLibModel.getName());
    if (library == null && libTableModel instanceof LibraryTableBase.ModifiableModelEx) {
      library=((LibraryTableBase.ModifiableModelEx)libTableModel).createLibrary(scriptingLibModel.getName(),myLibraryType);
      Library.ModifiableModel libModel=library.getModifiableModel();
      for (      VirtualFile newRoot : scriptingLibModel.getFiles(rootType)) {
        libModel.addRoot(newRoot,rootType);
      }
      libModel.commit();
    }
  }
}
