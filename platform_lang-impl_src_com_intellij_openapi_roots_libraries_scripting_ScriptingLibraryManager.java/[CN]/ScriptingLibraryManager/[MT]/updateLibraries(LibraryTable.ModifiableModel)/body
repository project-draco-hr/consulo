{
  final OrderRootType docRootType=OrderRootType.DOCUMENTATION;
  for (  Library library : libTableModel.getLibraries()) {
    ScriptingLibraryTable.LibraryModel scriptingLibModel=myLibTable.getLibraryByName(library.getName());
    if (scriptingLibModel == null) {
      libTableModel.removeLibrary(library);
    }
 else {
      Library.ModifiableModel libModel=library.getModifiableModel();
      removeRoots(libModel,OrderRootType.CLASSES);
      removeRoots(libModel,OrderRootType.SOURCES);
      for (      String docUrl : libModel.getUrls(OrderRootType.DOCUMENTATION)) {
        libModel.removeRoot(docUrl,docRootType);
      }
      addAllRoots(libModel,scriptingLibModel);
      libModel.commit();
    }
  }
  for (  ScriptingLibraryTable.LibraryModel scriptingLibModel : myLibTable.getLibraries()) {
    Library library=libTableModel.getLibraryByName(scriptingLibModel.getName());
    if (library == null && libTableModel instanceof LibraryTableBase.ModifiableModelEx) {
      library=((LibraryTableBase.ModifiableModelEx)libTableModel).createLibrary(scriptingLibModel.getName(),myLibraryType);
      Library.ModifiableModel libModel=library.getModifiableModel();
      addAllRoots(libModel,scriptingLibModel);
      libModel.commit();
    }
  }
}
