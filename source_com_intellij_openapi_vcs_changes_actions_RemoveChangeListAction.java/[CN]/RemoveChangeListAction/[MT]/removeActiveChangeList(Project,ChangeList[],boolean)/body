{
  List<LocalChangeList> remainingLists=new ArrayList<LocalChangeList>(ChangeListManager.getInstance(project).getChangeLists());
  remainingLists.removeAll(Arrays.asList(lists));
  String[] names=new String[remainingLists.size()];
  for (int i=0; i < remainingLists.size(); i++) {
    names[i]=remainingLists.get(i).getName();
  }
  int nameIndex=Messages.showChooseDialog(project,empty ? VcsBundle.message("changes.remove.active.empty.prompt") : VcsBundle.message("changes.remove.active.prompt"),VcsBundle.message("changes.remove.active.title"),Messages.getQuestionIcon(),names,names[0]);
  if (nameIndex < 0)   return;
  ChangeListManager.getInstance(project).setDefaultChangeList(remainingLists.get(nameIndex));
  for (  ChangeList list : lists) {
    final ChangeListManager changeListManager=ChangeListManager.getInstance(project);
    changeListManager.removeChangeList(changeListManager.findChangeList(list.getName()));
  }
}
