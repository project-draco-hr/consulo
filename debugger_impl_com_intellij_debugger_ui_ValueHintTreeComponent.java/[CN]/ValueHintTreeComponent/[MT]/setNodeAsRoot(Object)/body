{
  if (node instanceof DebuggerTreeNodeImpl) {
    myValueHint.shiftLocation();
    final DebuggerTreeNodeImpl debuggerTreeNode=(DebuggerTreeNodeImpl)node;
    final DebuggerContextImpl context=(DebuggerManagerEx.getInstanceEx(myValueHint.getProject())).getContext();
    context.getDebugProcess().getManagerThread().invokeLater(new DebuggerContextCommandImpl(context){
      public void threadAction(){
        try {
          final NodeDescriptorImpl descriptor=debuggerTreeNode.getDescriptor();
          final TextWithImports evaluationText=DebuggerTreeNodeExpression.createEvaluationText(debuggerTreeNode,context);
          final String title=evaluationText.getText();
          addToHistory(Pair.create(descriptor,title));
          myTree.setInspectDescriptor(descriptor);
          myValueHint.showTreePopup(myTree,context,title,ValueHintTreeComponent.this);
        }
 catch (        final EvaluateException e1) {
          LOG.debug(e1);
        }
      }
    }
);
  }
}
