{
  FileUtilRt.createParentDirs(file);
  boolean deleteFile=true;
  try {
    OutputStream out=new FileOutputStream(file);
    try {
      NetUtils.copyStreamContent(indicator,getInputStream(),out,getConnection().getContentLength());
      deleteFile=false;
    }
 catch (    IOException e) {
      throw new IOException(createErrorMessage(e,this,false),e);
    }
 finally {
      out.close();
    }
  }
  finally {
    if (deleteFile) {
      FileUtilRt.delete(file);
    }
  }
  return file;
}
