{
  LOG.assertTrue(ApplicationManager.getApplication() == null || ApplicationManager.getApplication().isUnitTestMode() || !ApplicationManager.getApplication().isReadAccessAllowed(),"Network shouldn't be accessed in EDT or inside read action");
  ClassLoader contextLoader=Thread.currentThread().getContextClassLoader();
  if (Patches.JDK_BUG_ID_8032832 && !UrlClassLoader.isRegisteredAsParallelCapable(contextLoader)) {
    try (URLClassLoader cl=new URLClassLoader(new URL[0],contextLoader)){
      Thread.currentThread().setContextClassLoader(cl);
      return doProcess(builder,processor);
    }
  finally {
      Thread.currentThread().setContextClassLoader(contextLoader);
    }
  }
 else {
    return doProcess(builder,processor);
  }
}
