{
  Function<Edge,Integer> endPosition=createEndPositionFunction(visibleRowIndex);
  List<ShortEdge> result=new ArrayList<ShortEdge>();
  List<GraphElement> visibleElements=getSortedVisibleElementsInRow(visibleRowIndex);
  for (int startPosition=0; startPosition < visibleElements.size(); startPosition++) {
    GraphElement element=visibleElements.get(startPosition);
    if (element instanceof Node) {
      Node node=(Node)element;
      for (      Edge edge : node.getDownEdges()) {
        int endPos=endPosition.fun(edge);
        if (endPos != -1)         result.add(new ShortEdge(edge,startPosition,endPos));
      }
    }
    if (element instanceof Edge) {
      Edge edge=(Edge)element;
      int endPos=endPosition.fun(edge);
      if (endPos != -1)       result.add(new ShortEdge(edge,startPosition,endPos));
    }
  }
  return result;
}
