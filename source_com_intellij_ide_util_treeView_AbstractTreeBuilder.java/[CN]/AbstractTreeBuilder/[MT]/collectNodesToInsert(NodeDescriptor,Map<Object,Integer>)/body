{
  ArrayList<TreeNode> nodesToInsert=new ArrayList<TreeNode>();
  for (  Object child : elementToIndexMap.keySet()) {
    Integer index=elementToIndexMap.get(child);
    final NodeDescriptor childDescr=myTreeStructure.createDescriptor(child,descriptor);
    if (childDescr == null) {
      LOG.error("childDescr == null, treeStructure = " + myTreeStructure + ", child = "+ child);
      continue;
    }
    childDescr.setIndex(index);
    childDescr.update();
    if (childDescr.getElement() == null) {
      LOG.error("childDescr.getElement() == null, child = " + child + ", builder = "+ this);
      continue;
    }
    final DefaultMutableTreeNode childNode=new DefaultMutableTreeNode(childDescr);
    nodesToInsert.add(childNode);
    createMapping(child,childNode);
  }
  return nodesToInsert;
}
