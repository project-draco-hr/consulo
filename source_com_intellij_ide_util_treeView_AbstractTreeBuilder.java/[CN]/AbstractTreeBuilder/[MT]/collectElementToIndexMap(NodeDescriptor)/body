{
  Map<Object,Integer> elementToIndexMap=new LinkedHashMap<Object,Integer>();
  Object[] children=myTreeStructure.getChildElements(descriptor.getElement());
  int index=0;
  for (  Object child : children) {
    if (child instanceof ProjectViewNode) {
      final ProjectViewNode projectViewNode=((ProjectViewNode)child);
      projectViewNode.update();
      if (projectViewNode.getValue() == null)       continue;
    }
    elementToIndexMap.put(child,index);
    index++;
  }
  return elementToIndexMap;
}
