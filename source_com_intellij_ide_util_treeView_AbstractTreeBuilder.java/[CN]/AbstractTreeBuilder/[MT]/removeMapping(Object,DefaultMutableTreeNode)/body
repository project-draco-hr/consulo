{
  final Object value=myElementToNodeMap.get(element);
  if (value == null) {
    return;
  }
  if (value instanceof DefaultMutableTreeNode) {
    if (value.equals(node)) {
      myElementToNodeMap.remove(element);
    }
  }
 else {
    List<DefaultMutableTreeNode> nodes=(List<DefaultMutableTreeNode>)value;
    final boolean reallyRemoved=nodes.remove(node);
    if (reallyRemoved) {
      if (nodes.size() == 0) {
        myElementToNodeMap.remove(element);
      }
    }
  }
}
