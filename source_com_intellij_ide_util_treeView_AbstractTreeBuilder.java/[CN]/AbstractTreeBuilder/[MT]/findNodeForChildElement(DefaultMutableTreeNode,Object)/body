{
  final Object value=myElementToNodeMap.get(element);
  if (value == null) {
    return null;
  }
  if (value instanceof DefaultMutableTreeNode) {
    final DefaultMutableTreeNode elementNode=(DefaultMutableTreeNode)value;
    return parentNode.equals(elementNode.getParent()) ? elementNode : null;
  }
  final List<DefaultMutableTreeNode> allNodesForElement=(List<DefaultMutableTreeNode>)value;
  for (Iterator<DefaultMutableTreeNode> it=allNodesForElement.iterator(); it.hasNext(); ) {
    final DefaultMutableTreeNode elementNode=it.next();
    if (parentNode.equals(elementNode.getParent())) {
      return elementNode;
    }
  }
  return null;
}
