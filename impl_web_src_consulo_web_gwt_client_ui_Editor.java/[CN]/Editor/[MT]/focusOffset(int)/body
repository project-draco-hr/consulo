{
  myLastCaretOffset=offset;
  for (  EditorSegmentBuilder.Fragment fragment : myBuilder.getFragments()) {
    if (fragment.range.containsRange(offset,offset)) {
      fragment.widget.getElement().focus();
      fragment.widget.getElement().scrollIntoView();
      set(fragment.widget.getElement());
      Widget parent=fragment.widget.getParent();
      if (parent instanceof CodeLinePanel) {
        changeLine(parent);
      }
      break;
    }
  }
}
