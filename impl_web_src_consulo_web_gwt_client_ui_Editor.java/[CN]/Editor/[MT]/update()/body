{
  String s=myBuilder.toHtmlAsText();
  Grid grid=new Grid(myLineCount + 1,2);
  grid.setWidth("100%");
  grid.getColumnFormatter().addStyleName(0,"editorLineColumn");
  grid.getColumnFormatter().addStyleName(1,"editorCodeColumn");
  for (int i=0; i < myLineCount; i++) {
    final HorizontalPanel panel=new HorizontalPanel();
    panel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
    panel.setWidth("100%");
    panel.setHeight("100%");
    InlineHTML lineSpan=new InlineHTML(String.valueOf(i + 1));
    lineSpan.addStyleName("editorLine");
    lineSpan.addStyleName("editorGutterLine" + i);
    panel.add(lineSpan);
    HTMLTable.CellFormatter cellFormatter=grid.getCellFormatter();
    cellFormatter.addStyleName(i,0,"noselectable");
    cellFormatter.addStyleName(i,0,"editorLineRow");
    grid.setWidget(i,0,panel);
  }
  String[] split=s.split("\n");
  for (int i=0; i < split.length; i++) {
    final String line=split[i];
    final InlineHTML lineSpan=new InlineHTML(line);
    lineSpan.setWidth("100%");
    lineSpan.addStyleName("editorLine");
    lineSpan.addStyleName("editorCodeLine" + i);
    grid.setWidget(i,1,lineSpan);
    grid.getCellFormatter().setWordWrap(i,1,false);
  }
  CustomScrollPanel scrollPanel=new CustomScrollPanel(grid);
  scrollPanel.setAlwaysShowScrollBars(true);
  scrollPanel.setHeight("100%");
  scrollPanel.setWidth("100%");
  DockPanel panel=new DockPanel();
  panel.add(grid,DockPanel.CENTER);
  VerticalPanel markerPanel=new VerticalPanel();
  markerPanel.add(new HTML("1"));
  markerPanel.add(new HTML("2"));
  markerPanel.add(new HTML("3"));
  markerPanel.setWidth("16px");
  markerPanel.setHeight("100%");
  panel.add(markerPanel,DockPanel.EAST);
  myPanel.setWidget(panel);
}
