{
  final VcsFileSystem vcsFileSystem=((VcsFileSystem)getFileSystem());
  try {
    myFileRevision.loadContent();
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        vcsFileSystem.fireBeforeContentsChange(this,VcsVirtualFile.this);
      }
    }
);
    myModificationStamp++;
    setRevision(myFileRevision.getRevisionNumber().asString());
    myContent=myFileRevision.getContent();
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        vcsFileSystem.fireContentsChanged(this,VcsVirtualFile.this,0);
      }
    }
);
  }
 catch (  VcsException e) {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        vcsFileSystem.fireBeforeFileDeletion(this,VcsVirtualFile.this);
      }
    }
);
    myContent=new byte[0];
    setRevision("0");
    Messages.showMessageDialog("Could not load content for file " + getPresentableUrl() + ": "+ e.getLocalizedMessage(),"Could Not Load Content",Messages.getInformationIcon());
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        vcsFileSystem.fireFileDeleted(this,VcsVirtualFile.this,getName(),false,getParent());
      }
    }
);
  }
catch (  ProcessCanceledException ex) {
    myContent=null;
  }
}
