{
  ToolWindow window=ToolWindowManager.getInstance(getProject()).getToolWindow(ToolWindowId.PROJECT_VIEW);
  window.activate(null);
  window.getActivation().doWhenDone(new Runnable(){
    public void run(){
      final ProjectView projectView=ProjectView.getInstance(getProject());
      projectView.changeView(PackageViewPane.ID);
      final PsiDirectory[] directories=getDirectories();
      final VirtualFile firstDir=directories[0].getVirtualFile();
      final boolean isLibraryRoot=ProjectRootsUtil.isLibraryRoot(firstDir,getProject());
      final Module module=ProjectRootManager.getInstance(getProject()).getFileIndex().getModuleForFile(firstDir);
      final PackageElement packageElement=new PackageElement(module,PsiPackageImpl.this,isLibraryRoot);
      projectView.getProjectViewPaneById(PackageViewPane.ID).select(packageElement,firstDir,requestFocus);
    }
  }
);
}
