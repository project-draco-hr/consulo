{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  final String oldQualifedName=myQualifiedName;
  final boolean anyChanged=changePackagePrefixes(oldQualifedName,newQualifiedName);
  if (anyChanged) {
    UndoManager.getInstance(myManager.getProject()).undoableActionPerformed(new GlobalUndoableAction(){
      public void undo(){
        changePackagePrefixes(newQualifiedName,oldQualifedName);
      }
      public void redo(){
        changePackagePrefixes(oldQualifedName,newQualifiedName);
      }
    }
);
  }
}
