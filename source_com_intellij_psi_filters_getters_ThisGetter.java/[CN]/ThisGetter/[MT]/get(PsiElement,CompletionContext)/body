{
  boolean first=true;
  final List<PsiExpression> expressions=new ArrayList<PsiExpression>();
  final PsiElementFactory factory=context.getManager().getElementFactory();
  while (context != null) {
    if (context instanceof PsiClass) {
      final String expressionText;
      if (first) {
        first=false;
        expressionText=PsiKeyword.THIS;
      }
 else       expressionText=((PsiClass)context).getName() + "." + PsiKeyword.THIS;
      try {
        expressions.add(factory.createExpressionFromText(expressionText,context));
      }
 catch (      IncorrectOperationException ioe) {
      }
    }
    if (context instanceof PsiModifierListOwner) {
      if (((PsiModifierListOwner)context).hasModifierProperty(PsiModifier.STATIC))       break;
    }
    context=context.getContext();
  }
  return expressions.toArray();
}
