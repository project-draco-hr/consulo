{
  final WriteExternalException[] exception=new WriteExternalException[1];
  PsiDocumentManager.getInstance(myProject).commitAndRunReadAction(new Runnable(){
    public void run(){
      try {
        removeInvalidBreakpoints();
        writeBreakpointCategory(parentNode,LINE_BREAKPOINTS);
        Element group=writeBreakpointCategory(parentNode,EXCEPTION_BREAKPOINTS);
        Element anyBreakpointNode=new Element("breakpoint_any");
        group.addContent(anyBreakpointNode);
        myAnyExceptionBreakpoint.writeExternal(anyBreakpointNode);
        writeBreakpointCategory(parentNode,FIELD_BREAKPOINTS);
        writeBreakpointCategory(parentNode,METHOD_BREAKPOINTS);
      }
 catch (      WriteExternalException e) {
        exception[0]=e;
      }
    }
  }
);
  if (exception[0] != null)   throw exception[0];
}
