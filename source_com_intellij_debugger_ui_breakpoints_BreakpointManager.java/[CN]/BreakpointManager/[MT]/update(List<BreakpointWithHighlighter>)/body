{
  final TIntHashSet intHash=new TIntHashSet();
  for (Iterator<BreakpointWithHighlighter> iterator=breakpoints.iterator(); iterator.hasNext(); ) {
    BreakpointWithHighlighter breakpoint=iterator.next();
    SourcePosition sourcePosition=breakpoint.getSourcePosition();
    breakpoint.reload();
    if (breakpoint.isValid()) {
      final int oldLine=sourcePosition.getLine();
      final int line=breakpoint.getSourcePosition().getLine();
      if (line != oldLine) {
        fireBreakpointChanged(breakpoint);
      }
      if (intHash.contains(breakpoint.getLineIndex())) {
        remove(breakpoint);
      }
 else {
        intHash.add(breakpoint.getLineIndex());
      }
    }
 else {
      remove(breakpoint);
    }
  }
}
