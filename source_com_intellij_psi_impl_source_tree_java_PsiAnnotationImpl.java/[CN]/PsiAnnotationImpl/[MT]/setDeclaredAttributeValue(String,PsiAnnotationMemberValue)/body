{
  final PsiAnnotationMemberValue existing=findDeclaredAttributeValue(attributeName);
  if (value == null) {
    if (existing == null) {
      return;
    }
    existing.getParent().delete();
  }
 else {
    if (existing != null) {
      ((PsiNameValuePair)existing.getParent()).setValue(value);
    }
 else {
      final PsiNameValuePair[] attributes=getParameterList().getAttributes();
      if (attributes.length == 1 && attributes[0].getName() == null) {
        attributes[0].replace(createNameValuePair(attributes[0].getValue(),DEFAULT_REFERENCED_METHOD_NAME + "="));
      }
      boolean allowNoName=attributes.length == 0 && "value".equals(attributeName);
      final String namePrefix;
      if (allowNoName) {
        namePrefix="";
      }
 else {
        namePrefix=attributeName + "=";
      }
      getParameterList().addBefore(createNameValuePair(value,namePrefix),null);
    }
  }
}
