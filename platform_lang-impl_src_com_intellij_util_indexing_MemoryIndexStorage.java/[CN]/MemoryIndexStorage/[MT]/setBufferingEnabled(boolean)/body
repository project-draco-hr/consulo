{
  w.lock();
  try {
    final boolean wasEnabled=myBufferingEnabled;
    myBufferingEnabled=enabled;
    if (wasEnabled && !enabled) {
      myMap.clear();
    }
    if (wasEnabled != enabled) {
      for (      BufferingStateListener listener : myListeners) {
        listener.bufferingStateChanged(enabled);
      }
    }
  }
  finally {
    w.unlock();
  }
}
