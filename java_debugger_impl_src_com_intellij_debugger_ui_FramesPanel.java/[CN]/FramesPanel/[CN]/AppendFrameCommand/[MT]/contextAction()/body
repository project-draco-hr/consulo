{
  final StackFrameDescriptorImpl descriptor=new StackFrameDescriptorImpl(myFrame,myTracker);
  descriptor.setContext(myEvaluationContext);
  descriptor.updateRepresentation(myEvaluationContext,DescriptorLabelListener.DUMMY_LISTENER);
  final Project project=getProject();
  DebuggerInvocationUtil.swingInvokeLater(project,new Runnable(){
    public void run(){
      try {
        myFramesListener.setEnabled(false);
synchronized (myFramesList) {
          final DefaultListModel model=myFramesList.getModel();
          if (model.isEmpty() || myFramesLastUpdateTime < myTimestamp) {
            myFramesLastUpdateTime=myTimestamp;
            model.clear();
            for (int idx=0; idx < myTotalFramesCount; idx++) {
              final String label="<frame " + idx + ">";
              model.addElement(new Object(){
                public String toString(){
                  return label;
                }
              }
);
            }
          }
          if (myTimestamp != myFramesLastUpdateTime) {
            return;
          }
          final int actualIndex=myCounter.getActualIndex(myIndexToInsert);
          model.removeElementAt(actualIndex);
          boolean shouldHide=!myShowLibraryFrames && !myIsContextFrame && myIndexToInsert != 0 && (descriptor.isSynthetic() || descriptor.isInLibraryContent());
          if (shouldHide) {
            myCounter.markHidden(myIndexToInsert);
          }
 else {
            model.insertElementAt(descriptor,actualIndex);
            if (myIsContextFrame) {
              myFramesList.setSelectedIndex(actualIndex);
            }
          }
        }
      }
  finally {
        myFramesListener.setEnabled(true);
      }
    }
  }
);
}
