{
  super(project,stateManager);
  myStateManager=stateManager;
  setLayout(new BorderLayout());
  myThreadsCombo=new ComboBoxWithWidePopup();
  myThreadsCombo.setRenderer(new DebuggerComboBoxRenderer(myThreadsCombo.getRenderer()));
  myThreadsListener=new ThreadsListener();
  myThreadsCombo.addItemListener(myThreadsListener);
  myFramesList=new FramesList(project);
  myFramesListener=new FramesListener();
  myFramesList.addListSelectionListener(myFramesListener);
  myFramesList.addMouseListener(new MouseAdapter(){
    public void mousePressed(    final MouseEvent e){
      int index=myFramesList.locationToIndex(e.getPoint());
      if (index >= 0 && myFramesList.isSelectedIndex(index)) {
        processListValue(myFramesList.getModel().getElementAt(index));
      }
    }
  }
);
  registerThreadsPopupMenu(myFramesList);
  setBorder(null);
  final ActionToolbar toolbar=createToolbar();
  Wrapper threads=new Wrapper();
  threads.add(toolbar.getComponent(),BorderLayout.EAST);
  threads.add(myThreadsCombo,BorderLayout.CENTER);
  add(threads,BorderLayout.NORTH);
  add(ScrollPaneFactory.createScrollPane(myFramesList),BorderLayout.CENTER);
}
