{
  PsiExpression qualifier=refExpression.getQualifierExpression();
  if (qualifier == null) {
    return true;
  }
  if (qualifier instanceof PsiThisExpression || qualifier instanceof PsiSuperExpression) {
    final PsiJavaCodeReferenceElement thisQualifier=((PsiQualifiedExpression)qualifier).getQualifier();
    if (thisQualifier == null)     return true;
    final PsiClass innerMostClass=PsiTreeUtil.getParentOfType(refExpression,PsiClass.class);
    if (innerMostClass == thisQualifier.resolve()) {
      return true;
    }
  }
  return false;
}
