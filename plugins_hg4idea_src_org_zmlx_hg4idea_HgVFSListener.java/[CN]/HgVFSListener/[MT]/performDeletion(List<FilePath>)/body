{
  (new Task.ConditionalModal(myProject,HgVcsMessages.message("hg4idea.remove.progress"),false,VcsConfiguration.getInstance(myProject).getAddRemoveOption()){
    @Override public void run(    @NotNull ProgressIndicator aProgressIndicator){
      final ArrayList<HgFile> deletes=new ArrayList<HgFile>();
      for (      FilePath file : filesToDelete) {
        if (file.isDirectory()) {
          continue;
        }
        deletes.add(new HgFile(VcsUtil.getVcsRootFor(myProject,file),file));
      }
      if (!deletes.isEmpty()) {
        new HgRemoveCommand(myProject).execute(deletes);
      }
      for (      HgFile file : deletes) {
        dirtyScopeManager.fileDirty(file.toFilePath());
      }
    }
  }
).queue();
}
