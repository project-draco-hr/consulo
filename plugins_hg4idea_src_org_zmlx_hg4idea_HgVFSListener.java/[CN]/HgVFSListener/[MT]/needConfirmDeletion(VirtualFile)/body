{
  final FilePath filePath=VcsUtil.getFilePath(file.getPath());
  final VirtualFile repo=HgUtil.getHgRootOrNull(myProject,filePath);
  if (repo == null) {
    return super.needConfirmDeletion(file);
  }
  final HgFile hgFile=new HgFile(repo,filePath);
  final HgLogCommand logCommand=new HgLogCommand(myProject);
  logCommand.setLogFile(true);
  logCommand.setFollowCopies(false);
  logCommand.setIncludeRemoved(true);
  final List<HgFileRevision> localRevisions=logCommand.execute(hgFile,-1,true);
  if (localRevisions == null || localRevisions.isEmpty() || localRevisions.get(0).getDeletedFiles().contains(hgFile.getRelativePath())) {
    return VcsDeleteType.SILENT;
  }
  return VcsDeleteType.CONFIRM;
}
