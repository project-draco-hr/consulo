{
  final List<FilePath> filesToDelete=new ArrayList<FilePath>(myDeletedWithoutConfirmFiles);
  final List<FilePath> deletedFiles=new ArrayList<FilePath>(myDeletedFiles);
  myDeletedWithoutConfirmFiles.clear();
  myDeletedFiles.clear();
  final List<FilePath> unversionedFilePaths=new ArrayList<FilePath>();
  for (  VirtualFile vf : ChangeListManagerImpl.getInstanceImpl(myProject).getUnversionedFiles()) {
    unversionedFilePaths.add(VcsUtil.getFilePath(vf.getPath()));
  }
  for (Iterator<FilePath> iter=filesToDelete.iterator(); iter.hasNext(); ) {
    if (unversionedFilePaths.contains(iter.next())) {
      iter.remove();
    }
  }
  for (Iterator<FilePath> iter=deletedFiles.iterator(); iter.hasNext(); ) {
    if (unversionedFilePaths.contains(iter.next())) {
      iter.remove();
    }
  }
  if (myRemoveOption.getValue() != VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY) {
    if (myRemoveOption.getValue() == VcsShowConfirmationOption.Value.DO_ACTION_SILENTLY || deletedFiles.isEmpty()) {
      filesToDelete.addAll(deletedFiles);
    }
 else {
      Collection<FilePath> filePaths=selectFilePathsToDelete(deletedFiles);
      if (filePaths != null) {
        filesToDelete.addAll(filePaths);
      }
    }
  }
  performDeletion(filesToDelete);
}
