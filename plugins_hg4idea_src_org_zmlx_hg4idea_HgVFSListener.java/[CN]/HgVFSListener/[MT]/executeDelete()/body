{
  final List<FilePath> filesToDelete=new ArrayList<FilePath>(myDeletedWithoutConfirmFiles);
  final List<FilePath> deletedFiles=new ArrayList<FilePath>(myDeletedFiles);
  myDeletedWithoutConfirmFiles.clear();
  myDeletedFiles.clear();
  final ChangeListManagerImpl changeListManager=ChangeListManagerImpl.getInstanceImpl(myProject);
  skipUnversionedAndNotUnderHg(changeListManager,filesToDelete);
  skipUnversionedAndNotUnderHg(changeListManager,deletedFiles);
  if (myRemoveOption.getValue() != VcsShowConfirmationOption.Value.DO_NOTHING_SILENTLY) {
    if (myRemoveOption.getValue() == VcsShowConfirmationOption.Value.DO_ACTION_SILENTLY || deletedFiles.isEmpty()) {
      filesToDelete.addAll(deletedFiles);
    }
 else {
      Collection<FilePath> filePaths=selectFilePathsToDelete(deletedFiles);
      if (filePaths != null) {
        filesToDelete.addAll(filePaths);
      }
    }
  }
  if (!filesToDelete.isEmpty()) {
    performDeletion(filesToDelete);
  }
}
