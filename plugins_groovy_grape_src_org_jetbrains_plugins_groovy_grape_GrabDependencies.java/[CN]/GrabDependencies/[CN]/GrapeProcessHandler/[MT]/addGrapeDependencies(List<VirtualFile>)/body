{
  final ModifiableRootModel model=ModuleRootManager.getInstance(myModule).getModifiableModel();
  final LibraryTable.ModifiableModel tableModel=model.getModuleLibraryTable().getModifiableModel();
  for (  VirtualFile jar : jars) {
    final VirtualFile jarRoot=JarFileSystem.getInstance().getJarRootForLocalFile(jar);
    if (jarRoot != null) {
      final String libName="Grab:" + jar.getName();
      final Library existing=tableModel.getLibraryByName(libName);
      if (existing != null) {
        tableModel.removeLibrary(existing);
      }
      final Library.ModifiableModel libModel=tableModel.createLibrary(libName).getModifiableModel();
      libModel.addRoot(jarRoot,OrderRootType.CLASSES);
      libModel.commit();
    }
  }
  tableModel.commit();
  model.commit();
}
