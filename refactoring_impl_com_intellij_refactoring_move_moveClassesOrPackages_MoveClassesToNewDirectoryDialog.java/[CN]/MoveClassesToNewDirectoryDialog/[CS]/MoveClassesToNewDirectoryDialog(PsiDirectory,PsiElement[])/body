{
  super(false);
  myDirectory=directory;
  myElementsToMove=elementsToMove;
  myDestDirectoryField.setText(directory.getVirtualFile().getPath());
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(false,true,false,false,false,false);
  myDestDirectoryField.getButton().addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final VirtualFile[] files=FileChooser.chooseFiles(myDirectory.getProject(),descriptor,directory.getVirtualFile());
      if (files != null && files.length == 1) {
        myDestDirectoryField.setText(files[0].getPath());
      }
    }
  }
);
  init();
}
