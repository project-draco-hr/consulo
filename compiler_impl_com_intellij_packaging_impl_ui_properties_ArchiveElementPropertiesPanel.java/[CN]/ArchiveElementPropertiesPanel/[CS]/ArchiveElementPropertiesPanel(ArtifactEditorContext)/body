{
  super(context);
  myMainClassField.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final Project project=context.getProject();
      final TreeClassChooserFactory chooserFactory=TreeClassChooserFactory.getInstance(project);
      final GlobalSearchScope searchScope=GlobalSearchScope.allScope(project);
      final PsiClass aClass=JavaPsiFacade.getInstance(project).findClass(myMainClassField.getText(),searchScope);
      final TreeClassChooser chooser=chooserFactory.createWithInnerClassesScopeChooser("Select Main Class",searchScope,new MainClassFilter(),aClass);
      chooser.showDialog();
      final PsiClass selected=chooser.getSelectedClass();
      if (selected != null) {
        myMainClassField.setText(selected.getQualifiedName());
      }
    }
  }
);
  initClasspathField();
}
