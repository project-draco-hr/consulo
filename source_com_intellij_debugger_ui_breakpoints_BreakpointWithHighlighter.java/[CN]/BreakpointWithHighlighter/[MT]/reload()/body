{
  LOG.assertTrue(SwingUtilities.isEventDispatchThread());
  if (getHighlighter().isValid()) {
    PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(getHighlighter().getDocument());
    if (psiFile != null) {
      mySourcePosition=SourcePosition.createFromOffset(psiFile,getHighlighter().getStartOffset());
      long modificationStamp=mySourcePosition.getFile().getModificationStamp();
      if (modificationStamp != myTimeStamp) {
        reload(psiFile);
      }
      return;
    }
  }
  mySourcePosition=null;
}
