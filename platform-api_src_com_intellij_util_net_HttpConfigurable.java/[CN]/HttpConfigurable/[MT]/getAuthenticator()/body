{
  return new Authenticator(){
    protected PasswordAuthentication getPasswordAuthentication(){
      if (PROXY_AUTHENTICATION && !KEEP_PROXY_PASSWORD) {
        Runnable runnable=new Runnable(){
          public void run(){
            AuthenticationDialog dlg=new AuthenticationDialog(getRequestingHost(),getRequestingPrompt());
            dlg.show();
          }
        }
;
        if (SwingUtilities.isEventDispatchThread()) {
          runnable.run();
        }
 else {
          try {
            SwingUtilities.invokeAndWait(runnable);
          }
 catch (          Exception e) {
          }
        }
      }
      return new PasswordAuthentication(PROXY_LOGIN,getPlainProxyPassword().toCharArray());
    }
  }
;
}
