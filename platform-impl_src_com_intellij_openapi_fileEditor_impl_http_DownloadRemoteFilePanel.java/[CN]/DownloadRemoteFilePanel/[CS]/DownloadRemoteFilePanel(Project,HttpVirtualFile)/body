{
  myProject=project;
  myVirtualFile=virtualFile;
  myErrorLabel.setIcon(ERROR_ICON);
  myProgressUpdatesQueue=new MergingUpdateQueue("downloading progress updates",300,false,myMainPanel);
  final RemoteFileInfo remoteFileInfo=virtualFile.getFileInfo();
  myCancelButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      remoteFileInfo.cancelDownloading();
    }
  }
);
  myDownloadingListener=new MyDownloadingListener();
  myTryAgainButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      showCard(DOWNLOADING_CARD);
      remoteFileInfo.restartDownloading(myDownloadingListener);
    }
  }
);
  myChangeProxySettingsButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      new HTTPProxySettingsDialog().show();
    }
  }
);
  showCard(DOWNLOADING_CARD);
  remoteFileInfo.startDownloading(myDownloadingListener);
}
