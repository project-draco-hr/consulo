{
  if (!toProcessPsiEvent())   return;
  final PsiFile psiFile=event.getFile();
  if (psiFile == null || psiFile.getNode() == null)   return;
  final Document document=getCachedDocument(psiFile,force);
  if (document == null)   return;
  if (myPsiDocumentManager.isUncommited(document)) {
    throw new IllegalStateException("Attempt to modify PSI for non-committed Document!");
  }
}
