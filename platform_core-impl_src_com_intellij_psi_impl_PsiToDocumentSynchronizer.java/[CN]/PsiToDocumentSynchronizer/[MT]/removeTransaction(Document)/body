{
  Pair<DocumentChangeTransaction,Integer> pair=myTransactionsMap.get(doc);
  if (pair == null)   return null;
  int nestedCount=pair.getSecond().intValue();
  if (nestedCount > 0) {
    pair=Pair.create(pair.getFirst(),nestedCount - 1);
    myTransactionsMap.put(doc,pair);
    return null;
  }
  myTransactionsMap.remove(doc);
  return pair.getFirst();
}
