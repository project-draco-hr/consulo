{
  final List<PackagingSourceItem> items=new ArrayList<PackagingSourceItem>();
  final ModuleRootModel rootModel=editorContext.getModulesProvider().getRootModel(module);
  List<Library> libraries=new ArrayList<Library>();
  for (  OrderEntry orderEntry : rootModel.getOrderEntries()) {
    if (orderEntry instanceof LibraryOrderEntry) {
      final LibraryOrderEntry libraryEntry=(LibraryOrderEntry)orderEntry;
      final Library library=libraryEntry.getLibrary();
      final DependencyScope scope=libraryEntry.getScope();
      if (library != null && scope.isForProductionRuntime()) {
        libraries.add(library);
      }
    }
  }
  for (  Module toAdd : getNotAddedModules(editorContext,artifact,module)) {
    items.add(new ModuleOutputSourceItem(toAdd));
  }
  for (  Library library : getNotAddedLibraries(editorContext,artifact,libraries)) {
    items.add(new LibrarySourceItem(library));
  }
  return items;
}
