{
  if (!CodeInsightUtilBase.prepareFileForWrite(myXmlToken.getContainingFile())) {
    return;
  }
  new WriteCommandAction(project){
    protected void run(    final Result result) throws Throwable {
      XmlToken tagEndStart=myXmlToken;
      while (tagEndStart.getTokenType() != XmlTokenType.XML_END_TAG_START) {
        final PsiElement prevSibling=tagEndStart.getPrevSibling();
        if (!(prevSibling instanceof XmlToken))         break;
        tagEndStart=(XmlToken)prevSibling;
      }
      final PsiElement parent=tagEndStart.getParent();
      parent.deleteChildRange(tagEndStart,parent.getLastChild());
    }
  }
.execute();
}
