{
  final PsiElement element=descriptor.getPsiElement();
  if (!element.isValid() || !(element instanceof XmlToken))   return;
  if (!CodeInsightUtilBase.prepareFileForWrite(element.getContainingFile()))   return;
  new WriteCommandAction(project){
    protected void run(    final Result result) throws Throwable {
      final XmlToken endNameToken=(XmlToken)element;
      final PsiElement tagElement=endNameToken.getParent();
      if (!(tagElement instanceof XmlTag))       return;
      final ASTNode astNode=tagElement.getNode();
      final ASTNode endTagStart=XmlChildRole.CLOSING_TAG_START_FINDER.findChild(astNode);
      tagElement.deleteChildRange(endTagStart.getPsi(),tagElement.getLastChild());
    }
  }
.execute();
}
