{
  if (element != null) {
    final PackageSet packageSet=getCurrentScope().getValue();
    final PsiFile psiFile=element.getContainingFile();
    if (packageSet == null)     return;
    final VirtualFile virtualFile=psiFile != null ? psiFile.getVirtualFile() : (element instanceof PsiDirectory ? ((PsiDirectory)element).getVirtualFile() : null);
    if (virtualFile != null) {
      final ProjectView projectView=ProjectView.getInstance(myProject);
      final NamedScopesHolder holder=NamedScopesHolder.getHolder(myProject,CURRENT_SCOPE_NAME,myDependencyValidationManager);
      if (packageSet instanceof PackageSetBase && !((PackageSetBase)packageSet).contains(virtualFile,holder) || psiFile != null && !packageSet.contains(psiFile,holder)) {
        projectView.changeView(ProjectViewPane.ID);
      }
      projectView.select(element,virtualFile,false);
    }
    Editor editor=EditorHelper.openInEditor(element);
    if (editor != null) {
      ToolWindowManager.getInstance(myProject).activateEditorComponent();
    }
  }
}
