{
  final NamedScope scope=getCurrentScope();
  final PsiElement element=event.getNewChild();
  final PsiFile psiFile=event.getFile();
  if (psiFile != null && !isInjected(psiFile)) {
    if (psiFile.getLanguage() == psiFile.getViewProvider().getBaseLanguage()) {
      queueUpdate(new Runnable(){
        @Override public void run(){
          processRenamed(scope,psiFile);
        }
      }
,false);
    }
  }
 else   if (element instanceof PsiDirectory && element.isValid()) {
    queueRefreshScope(scope,(PsiDirectory)element);
  }
}
