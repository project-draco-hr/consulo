{
  final Runnable runnable=new Runnable(){
    @Override public void run(){
      myUpdateQueue.queue(new Update("Select"){
        public void run(){
          if (myProject.isDisposed())           return;
          PackageDependenciesNode node=myBuilder.findNode(file,element);
          if (node != null && node.getPsiElement() != element) {
            final TreePath path=new TreePath(node.getPath());
            if (myTree.isCollapsed(path)) {
              myTree.expandPath(path);
              myTree.makeVisible(path);
            }
          }
          node=myBuilder.findNode(file,element);
          if (node != null) {
            TreeUtil.selectPath(myTree,new TreePath(node.getPath()));
            if (requestFocus) {
              myTree.requestFocus();
            }
          }
        }
      }
);
    }
  }
;
  if (myActionCallback == null || ApplicationManager.getApplication().isUnitTestMode()) {
    runnable.run();
  }
 else {
    myActionCallback.doWhenDone(runnable);
  }
}
