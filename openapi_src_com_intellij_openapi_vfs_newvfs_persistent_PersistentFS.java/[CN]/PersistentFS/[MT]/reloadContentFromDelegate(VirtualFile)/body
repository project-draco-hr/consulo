{
  final DataInputStream currentContent=FILE_CONTENT.readAttribute(file);
  if (currentContent != null) {
    try {
      currentContent.close();
      InputStream is=null;
      OutputStream os=null;
      try {
        is=myDelegate.getInputStream(file);
        os=new BufferedOutputStream(FILE_CONTENT.writeAttribute(file));
        FileUtil.copy(is,os);
      }
  finally {
        if (is != null)         is.close();
        if (os != null)         os.close();
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
