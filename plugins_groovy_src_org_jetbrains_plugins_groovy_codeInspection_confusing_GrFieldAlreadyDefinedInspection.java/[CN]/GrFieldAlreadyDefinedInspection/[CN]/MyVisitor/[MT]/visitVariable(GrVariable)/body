{
  super.visitVariable(variable);
  if (variable instanceof GrField)   return;
  GroovyPsiElement duplicate=ResolveUtil.resolveExistingElement(variable,new GroovyAnnotator.DuplicateVariablesProcessor(variable),GrVariable.class,GrReferenceExpression.class);
  if (duplicate == null && variable instanceof GrParameter) {
    final PsiElement parent=variable.getParent().getParent();
    if (parent instanceof GrClosableBlock) {
      duplicate=ResolveUtil.resolveExistingElement((GrClosableBlock)parent,new GroovyAnnotator.DuplicateVariablesProcessor(variable),GrVariable.class,GrReferenceExpression.class);
    }
  }
  if (duplicate instanceof GrField) {
    registerError(variable.getNameIdentifierGroovy(),variable.getName());
  }
}
