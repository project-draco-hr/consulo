{
  final PsiElement position=params.getPosition();
  final GrExpression expression=PsiTreeUtil.getParentOfType(position,GrExpression.class);
  if (expression != null) {
    return GroovyExpectedTypesProvider.getInstance(position.getProject()).getExpectedTypes(expression,true,params.getCompletionType() == CompletionType.SMART);
  }
  return null;
}
