{
  if (!myProjectRootManager.getFileIndex().isInContent(file))   return 0;
  int result=0;
  if (file == null || !file.isDirectory())   return result;
  if (file.findChild(CvsUtil.CVS) == null)   return result;
  result+=1;
  VirtualFile[] children=file.getChildren();
  if (children == null)   return result;
  for (int i=0; i < children.length; i++) {
    VirtualFile child=children[i];
    if (child.getName() == CvsUtil.CVS)     continue;
    result+=calcVirtualFilesUnderCvsIn(child);
  }
  return result;
}
