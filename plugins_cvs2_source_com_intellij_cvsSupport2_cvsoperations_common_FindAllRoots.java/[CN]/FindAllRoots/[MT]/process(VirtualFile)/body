{
  if (!myProjectRootManager.getFileIndex().isInContent(root))   return;
  setText2(CvsVfsUtil.getPresentablePathFor(root));
  myProcessedFiles++;
  setFraction();
  VirtualFile[] children=root.getChildren();
  if (children == null)   return;
  CvsEnvironment parentEnv=myManager.getCvsConnectionSettingsFor(root);
  if (!parentEnv.isValid())   return;
  myManager.cacheCvsAdminInfoIn(root);
  myRepositories.add(CvsVfsUtil.getFileFor(root));
  for (  VirtualFile child : children) {
    if (!child.isDirectory())     continue;
    if (!myProjectRootManager.getFileIndex().isInContent(child))     continue;
    CvsEnvironment childEnv=myManager.getCvsConnectionSettingsFor(child);
    if (!childEnv.isValid())     continue;
    if (!childEnv.equals(parentEnv)) {
      myResult.add(child);
    }
    process(child);
  }
}
