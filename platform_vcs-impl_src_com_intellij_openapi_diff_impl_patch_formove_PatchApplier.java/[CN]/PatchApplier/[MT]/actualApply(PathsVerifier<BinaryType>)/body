{
  final List<Pair<VirtualFile,ApplyTextFilePatch>> textPatches=verifier.getTextPatches();
  final ApplyPatchContext context=new ApplyPatchContext(myBaseDirectory,0,true,true);
  ApplyPatchStatus status=null;
  try {
    status=applyList(textPatches,context,status);
    if (myCustomForBinaries == null) {
      status=applyList(verifier.getBinaryPatches(),context,status);
    }
 else {
      final List<Pair<VirtualFile,ApplyFilePatchBase<BinaryType>>> binaryPatches=verifier.getBinaryPatches();
      ApplyPatchStatus patchStatus=myCustomForBinaries.apply(binaryPatches);
      final List<FilePatch> appliedPatches=myCustomForBinaries.getAppliedPatches();
      moveForCustomBinaries(binaryPatches,appliedPatches);
      status=ApplyPatchStatus.and(status,patchStatus);
      myRemainingPatches.removeAll(appliedPatches);
    }
  }
 catch (  IOException e) {
    showError(myProject,e.getMessage(),true);
    return ApplyPatchStatus.FAILURE;
  }
  return status;
}
