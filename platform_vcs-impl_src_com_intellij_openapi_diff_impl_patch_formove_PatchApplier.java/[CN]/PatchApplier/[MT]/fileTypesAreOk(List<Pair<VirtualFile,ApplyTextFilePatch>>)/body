{
  for (  Pair<VirtualFile,ApplyTextFilePatch> textPatch : textPatches) {
    final VirtualFile file=textPatch.getFirst();
    if (!file.isDirectory()) {
      FileType fileType=file.getFileType();
      if (fileType == FileTypes.UNKNOWN) {
        fileType=FileTypeChooser.associateFileType(file.getPresentableName());
        if (fileType == null) {
          showError(myProject,"Cannot apply patch. File " + file.getPresentableName() + " type not defined.",true);
          return false;
        }
      }
    }
  }
  return true;
}
