{
  if (group.isEmpty())   return ApplyPatchStatus.SUCCESS;
  final Project project=group.iterator().next().myProject;
  ApplyPatchStatus result=ApplicationManager.getApplication().runWriteAction(new Computable<ApplyPatchStatus>(){
    public ApplyPatchStatus compute(){
      final Ref<ApplyPatchStatus> refStatus=new Ref<ApplyPatchStatus>(null);
      CommandProcessor.getInstance().executeCommand(project,new Runnable(){
        public void run(){
          for (          PatchApplier applier : group) {
            refStatus.set(ApplyPatchStatus.and(refStatus.get(),applier.executeWritable()));
          }
        }
      }
,VcsBundle.message("patch.apply.command"),null);
      return refStatus.get();
    }
  }
);
  result=result == null ? ApplyPatchStatus.FAILURE : result;
  for (  PatchApplier applier : group) {
    applier.refreshFiles();
  }
  showApplyStatus(project,result);
  return result;
}
