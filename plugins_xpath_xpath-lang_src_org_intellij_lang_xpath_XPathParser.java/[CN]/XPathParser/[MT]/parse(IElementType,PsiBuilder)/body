{
  builder.setDebugMode(DBG_MODE);
  final PsiBuilder.Marker rootMarker=builder.mark();
  if (!builder.eof()) {
    boolean avt=false;
    if (builder.getTokenType() == XPathTokenTypes.LBRACE) {
      builder.advanceLexer();
      avt=true;
    }
    if (!parseExpr(builder)) {
      builder.error("XPath expression expected");
    }
    if (avt) {
      checkMatches(builder,XPathTokenTypes.RBRACE,"'}' expected");
    }
    consumeBadTokens(builder,TokenSet.EMPTY);
  }
  rootMarker.done(root);
  return builder.getTreeBuilt();
}
