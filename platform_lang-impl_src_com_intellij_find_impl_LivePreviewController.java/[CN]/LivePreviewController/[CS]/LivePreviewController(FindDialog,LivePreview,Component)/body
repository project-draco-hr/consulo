{
  myFindDialog=findDialog;
  myLivePreview=livePreview;
  myLivePreview.setDelegate(this);
  myWatcher.register(toWatch);
  myWatcher.addUserActivityListener(this);
  myFindDialog.getWindow().addWindowFocusListener(new WindowFocusListener(){
    @Override public void windowGainedFocus(    WindowEvent windowEvent){
      myLivePreview.update();
    }
    @Override public void windowLostFocus(    WindowEvent windowEvent){
    }
  }
);
  JComponent contentPane=(JComponent)findDialog.getContentPane();
  new AnAction(){
    @Override public void actionPerformed(    AnActionEvent e){
      myLivePreview.nextOccurrence();
    }
  }
.registerCustomShortcutSet(KeyEvent.VK_F3,0,contentPane);
  new AnAction(){
    @Override public void actionPerformed(    AnActionEvent e){
      myLivePreview.prevOccurrence();
    }
  }
.registerCustomShortcutSet(KeyEvent.VK_F3,KeyEvent.SHIFT_MASK,contentPane);
}
