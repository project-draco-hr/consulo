{
  if (noFilters) {
    myCurrentComparator=CommitIComparator.getInstance();
    myNavigation=new HashMap<VirtualFile,TreeNavigationImpl>();
    mySkeletonBuilder=new HashMap<VirtualFile,SkeletonBuilder>();
    myAdditions=new HashMap<VirtualFile,Integer>();
    myOrder=new ArrayList<VirtualFile>(myRootsHolder.getRoots());
    Collections.sort(myOrder,FilePathComparator.getInstance());
    for (    VirtualFile vf : myOrder) {
      final TreeNavigationImpl navigation=new TreeNavigationImpl(myCommitIdxInterval,myNumEventsInGroup);
      final SkeletonBuilder skeletonBuilder=new SkeletonBuilder(navigation);
      myNavigation.put(vf,navigation);
      mySkeletonBuilder.put(vf,skeletonBuilder);
      myAdditions.put(vf,0);
      myRepoIdxMap.put(vf,new TreeSet<Integer>());
      myRunningRepoIdxs.put(vf,0);
      myIdxMap.clear();
    }
    for (    VirtualFile virtualFile : myOrder) {
      if (!myTreeHighlighter.containsKey(virtualFile)) {
        myTreeHighlighter.put(virtualFile,new TreeHighlighter(this,virtualFile,-1));
      }
    }
    for (Iterator<VirtualFile> iterator=myTreeHighlighter.keySet().iterator(); iterator.hasNext(); ) {
      VirtualFile root=iterator.next();
      if (!myOrder.contains(root)) {
        iterator.remove();
      }
 else {
        final TreeHighlighter highlighter=myTreeHighlighter.get(root);
        highlighter.setPoint(highlighter.getPoint());
      }
    }
  }
 else {
    myCurrentComparator=CommitIReorderingInsideOneRepoComparator.getInstance();
    myAdditions=null;
    mySkeletonBuilder=null;
    myNavigation=null;
    myOrder=null;
    myTreeHighlighter.clear();
  }
  myLines=new BigArray<CommitI>(10);
  myCutCount=-1;
}
