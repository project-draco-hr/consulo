{
  final VirtualFile root=getCommitAt(idx).selectRepository(myRootsHolder.getRoots());
  final List<InnerIdx> keysByValue=myIdxMap.getKeysByValue(idx);
  if (keysByValue == null) {
    return -1;
  }
 else {
    for (    InnerIdx innerIdx : keysByValue) {
      if (innerIdx.getRoot().equals(root)) {
        if (innerIdx.getInsideRepoIdx() == 0)         return -1;
        return myIdxMap.get(new InnerIdx(root,innerIdx.getInsideRepoIdx() - 1));
      }
    }
  }
  return -1;
}
