{
  processed.add(this);
  try {
    final AntFilesProvider referenced=getReferencedProvider();
    if (referenced != null) {
      return referenced.getFiles(processed);
    }
    return getFiles(getPattern(),processed);
  }
  finally {
    processed.remove(this);
  }
}
