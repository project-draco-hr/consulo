{
  ConfigImportSettings settings=getConfigImportSettings();
  File oldConfigDir=findOldConfigDir(newConfigPath,settings.getCustomPathsSelector());
  do {
    ImportOldConfigsPanel dialog=new ImportOldConfigsPanel(oldConfigDir,settings);
    dialog.setModalityType(Dialog.ModalityType.TOOLKIT_MODAL);
    AppUIUtil.updateWindowIcon(dialog);
    dialog.setVisible(true);
    if (dialog.isImportEnabled()) {
      File instHome=dialog.getSelectedFile();
      oldConfigDir=getOldConfigDir(instHome,settings);
      if (!validateOldConfigDir(instHome,oldConfigDir,settings))       continue;
      doImport(newConfigPath,oldConfigDir);
      settings.importFinished(newConfigPath);
      System.setProperty(CONFIG_IMPORTED_IN_CURRENT_SESSION_KEY,Boolean.TRUE.toString());
    }
    break;
  }
 while (true);
}
