{
  if (oldInstallHome == null)   return null;
  if (new File(oldInstallHome,OPTIONS_XML).exists()) {
    return oldInstallHome;
  }
  if (new File(oldInstallHome,CONFIG_RELATED_PATH + OPTIONS_XML).exists()) {
    return new File(oldInstallHome,CONFIG_RELATED_PATH);
  }
  int oldBuildNumber=getBuildNumber(oldInstallHome);
  if (oldBuildNumber != -1 && oldBuildNumber <= 600) {
    return new File(oldInstallHome,"config");
  }
  final File[] launchFileCandidates=getLaunchFilesCandidates(oldInstallHome,settings);
  for (  File candidate : launchFileCandidates) {
    if (candidate.exists()) {
      String configDir=PathManager.substituteVars(getPropertyFromLaxFile(candidate,PathManager.PROPERTY_CONFIG_PATH),oldInstallHome.getPath());
      if (configDir != null) {
        File probableConfig=new File(configDir);
        if (probableConfig.exists())         return probableConfig;
      }
    }
  }
  for (  File candidate : launchFileCandidates) {
    if (candidate.exists()) {
      final String pathsSelector=getPropertyFromLaxFile(candidate,PathManager.PROPERTY_PATHS_SELECTOR);
      if (pathsSelector != null) {
        final String configDir=PathManager.getDefaultConfigPathFor(pathsSelector);
        final File probableConfig=new File(configDir);
        if (probableConfig.exists()) {
          return probableConfig;
        }
      }
    }
  }
  return null;
}
