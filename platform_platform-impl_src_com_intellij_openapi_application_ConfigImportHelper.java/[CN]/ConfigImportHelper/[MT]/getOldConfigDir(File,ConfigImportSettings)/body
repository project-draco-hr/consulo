{
  if (oldInstallHome == null)   return null;
  if (new File(oldInstallHome,OPTIONS_XML).exists()) {
    return oldInstallHome;
  }
  if (new File(oldInstallHome,CONFIG_RELATED_PATH + OPTIONS_XML).exists()) {
    return new File(oldInstallHome,CONFIG_RELATED_PATH);
  }
  int oldBuildNumber=getBuildNumber(oldInstallHome);
  if (oldBuildNumber != -1 && oldBuildNumber <= 600) {
    return new File(oldInstallHome,"config");
  }
  File[] launchFileCandidates=getLaunchFilesCandidates(oldInstallHome);
  for (  File file : launchFileCandidates) {
    if (file.exists()) {
      String configDir=PathManager.substituteVars(getConfigFromLaxFile(file),oldInstallHome.getPath());
      if (configDir != null) {
        File probableConfig=new File(configDir);
        if (probableConfig.exists())         return probableConfig;
        String attempt2=settings.fixConfigDir(configDir);
        if (attempt2 != null && !configDir.equals(attempt2)) {
          probableConfig=new File(attempt2);
          if (probableConfig.exists())           return probableConfig;
        }
      }
    }
  }
  return null;
}
