{
  T[] result=myExtensionsCache;
  if (result == null) {
synchronized (this) {
      result=myExtensionsCache;
      if (result == null) {
        processAdapters();
        Class<T> extensionClass=getExtensionClass();
        @SuppressWarnings("unchecked") T[] a=(T[])Array.newInstance(extensionClass,myExtensions.size());
        result=myExtensions.toArray(a);
        for (int i=result.length - 1; i >= 0; i--) {
          T extension=result[i];
          if (extension == null) {
            LOG.error(" null extension: " + myExtensions + ";\n"+ " getExtensionClass(): "+ extensionClass+ ";\n");
          }
          if (i > 0 && extension == result[i - 1]) {
            LOG.error("Duplicate extension found: " + extension + "; "+ " Result:      "+ Arrays.toString(result)+ ";\n"+ " extensions: "+ myExtensions+ ";\n"+ " getExtensionClass(): "+ extensionClass+ ";\n"+ " size:"+ myExtensions.size()+ ";"+ result.length);
          }
        }
        myExtensionsCache=result;
      }
    }
  }
  return result;
}
