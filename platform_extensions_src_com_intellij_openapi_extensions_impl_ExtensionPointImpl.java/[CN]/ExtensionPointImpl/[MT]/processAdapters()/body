{
  int totalSize=myExtensionAdapters.size() + myLoadedAdapters.size();
  if (totalSize != 0) {
    List<ExtensionComponentAdapter> allAdapters=new ArrayList<ExtensionComponentAdapter>(totalSize);
    allAdapters.addAll(myExtensionAdapters);
    allAdapters.addAll(myLoadedAdapters);
    myExtensions.clear();
    ExtensionComponentAdapter[] loadedAdapters=myLoadedAdapters.isEmpty() ? ExtensionComponentAdapter.EMPTY_ARRAY : myLoadedAdapters.toArray(new ExtensionComponentAdapter[myLoadedAdapters.size()]);
    myLoadedAdapters.clear();
    ExtensionComponentAdapter[] adapters=allAdapters.toArray(new ExtensionComponentAdapter[myExtensionAdapters.size()]);
    LoadingOrder.sort(adapters);
    for (    ExtensionComponentAdapter adapter : adapters) {
      T extension=(T)adapter.getExtension();
      assertClass(extension.getClass());
      internalRegisterExtension(extension,adapter,myExtensions.size(),ArrayUtilRt.find(loadedAdapters,adapter) == -1);
    }
    myExtensionAdapters.clear();
  }
}
