{
  final PsiIdentifier identifier=statement.getLabelIdentifier();
  if (identifier == null)   return null;
  final String text=identifier.getText();
  PsiElement element=statement;
  while (element != null) {
    if (element instanceof PsiMethod || element instanceof PsiClass)     break;
    if (element instanceof PsiLabeledStatement && element != statement && ((PsiLabeledStatement)element).getLabelIdentifier() != null && Comparing.equal(((PsiLabeledStatement)element).getLabelIdentifier().getText(),text)) {
      String description=MessageFormat.format("Label ''{0}'' already in use",new Object[]{text});
      return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,identifier,description);
    }
    element=element.getParent();
  }
  return null;
}
