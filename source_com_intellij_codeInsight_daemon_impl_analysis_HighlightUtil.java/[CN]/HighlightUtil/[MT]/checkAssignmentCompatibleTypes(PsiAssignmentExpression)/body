{
  if (assignment.getOperationSign() == null || !"=".equals(assignment.getOperationSign().getText()))   return null;
  PsiExpression lExpr=assignment.getLExpression();
  final PsiExpression rExpr=assignment.getRExpression();
  if (rExpr == null)   return null;
  final PsiType lType=lExpr.getType();
  final PsiType rType=rExpr.getType();
  if (rType == null)   return null;
  final HighlightInfo highlightInfo=checkAssignability(lType,rType,rExpr,assignment);
  if (highlightInfo != null) {
    PsiVariable leftVar=null;
    if (lExpr instanceof PsiReferenceExpression) {
      final PsiElement element=((PsiReferenceExpression)lExpr).resolve();
      if (element instanceof PsiVariable) {
        leftVar=(PsiVariable)element;
      }
    }
    if (leftVar != null) {
      QuickFixAction.registerQuickFixAction(highlightInfo,new VariableTypeFix(leftVar,rType));
    }
  }
  return highlightInfo;
}
