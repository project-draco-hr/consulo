{
  if (expr instanceof PsiSuperExpression && !(expr.getParent() instanceof PsiReferenceExpression)) {
    return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,expr.getTextRange().getEndOffset(),expr.getTextRange().getEndOffset() + 1,"'.' expected");
  }
  final PsiClass aClass=qualifier == null ? null : (PsiClass)qualifier.resolve();
  if (aClass != null && aClass.isInterface()) {
    return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,qualifier,HighlightClassUtil.CLASS_EXPECTED);
  }
  PsiType type=expr.getType();
  if (type == null)   return null;
  PsiClass referencedClass=PsiUtil.resolveClassInType(type);
  if (referencedClass == null)   return null;
  if (HighlightClassUtil.hasEnclosingInstanceInScope(referencedClass,expr))   return null;
  return HighlightClassUtil.reportIllegalEnclosingUsage(expr,null,aClass,expr);
}
