{
  if (myDefinition != null) {
    if (!myDefinitionCloned) {
      myDefinitionCloned=true;
      myDefinition=myDefinition.clone();
    }
    myDefinition.registerNestedTask(definition.getClassName());
    if (myTaskIdToClassMap == null) {
      myTaskIdToClassMap=new HashMap<String,String>();
    }
    myTaskIdToClassMap.put(namespace + name,definition.getClassName());
    getAntProject().registerCustomTask(name,namespace,definition);
  }
}
