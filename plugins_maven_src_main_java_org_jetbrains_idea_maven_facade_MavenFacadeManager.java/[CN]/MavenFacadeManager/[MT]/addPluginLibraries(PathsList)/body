{
  File pluginFileOrDir=new File(PathUtil.getJarPathForClass(this.getClass()));
  File libDir;
  if (pluginFileOrDir.isDirectory()) {
    classPath.add(new File(pluginFileOrDir.getParent(),"maven-facade-api"));
    classPath.add(new File(pluginFileOrDir.getParent(),"maven-facade-impl"));
    File luceneLib=new File(PathUtil.getJarPathForClass(Query.class));
    libDir=new File(luceneLib.getParentFile().getParentFile().getParentFile(),"facade-impl/lib");
  }
 else {
    libDir=pluginFileOrDir;
  }
  MavenLog.LOG.assertTrue(libDir.exists() && libDir.isDirectory(),"Maven Facade libraries dir not found: " + libDir);
  File[] files=libDir.listFiles();
  for (  File jar : files) {
    if (jar.isFile() && jar.getName().endsWith(".jar") && !jar.equals(pluginFileOrDir)) {
      classPath.add(jar.getPath());
    }
  }
}
