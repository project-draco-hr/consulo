{
  final Object element=getElementFor(toExpand);
  if (element == null)   return;
  addNodeAction(element,new NodeAction(){
    public void onReady(    final DefaultMutableTreeNode node){
      if (expandIndex < 0) {
        onDone.run();
        return;
      }
      final DefaultMutableTreeNode nextNode=getNodeForElement(kidsToExpand.get(expandIndex));
      if (nextNode != null) {
        processExpand(nextNode,kidsToExpand,expandIndex - 1,onDone);
      }
 else {
        onDone.run();
      }
    }
  }
);
  expand(toExpand);
}
