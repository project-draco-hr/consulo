{
  ArrayList<TreeNode> nodesToInsert=new ArrayList<TreeNode>();
  for (  Map.Entry<Object,Integer> entry : elementToIndexMap.entrySet()) {
    Object child=entry.getKey();
    Integer index=entry.getValue();
    final NodeDescriptor childDescr=myTreeStructure.createDescriptor(child,descriptor);
    if (childDescr == null) {
      LOG.error("childDescr == null, treeStructure = " + myTreeStructure + ", child = "+ child);
      continue;
    }
    childDescr.setIndex(index.intValue());
    updateNodeDescriptor(childDescr);
    if (childDescr.getElement() == null) {
      LOG.error("childDescr.getElement() == null, child = " + child + ", builder = "+ this);
      continue;
    }
    final DefaultMutableTreeNode childNode=createChildNode(childDescr);
    nodesToInsert.add(childNode);
    createMapping(childDescr.getElement(),childNode);
  }
  return nodesToInsert;
}
