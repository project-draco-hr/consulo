{
  myTree=tree;
  myTreeModel=treeModel;
  myRootNode=(DefaultMutableTreeNode)treeModel.getRoot();
  myTreeStructure=treeStructure;
  myNodeDescriptorComparator=comparator;
  myExpansionListener=new MyExpansionListener();
  myTree.addTreeExpansionListener(myExpansionListener);
  myUpdater=createUpdater();
  myProgress=createProgressIndicator();
  Disposer.register(this,myUpdater);
  new UiNotifyConnector(tree,new Activatable(){
    public void showNotify(){
      if (myWasEverShown && myUpdateFromRootRequested) {
        updateFromRoot();
      }
      myWasEverShown=true;
    }
    public void hideNotify(){
      if (!myWasEverShown)       return;
      if (!myBackgroundableNodeActions.isEmpty()) {
        cancelBackgroundLoading();
        myUpdateFromRootRequested=true;
      }
    }
  }
);
}
