{
  String newMethodName=myChangeInfo.getNewName();
  try {
    PsiMethod prototype;
    final PsiMethod method=myChangeInfo.getMethod();
    if (!GroovyFileType.GROOVY_LANGUAGE.equals(method.getLanguage()))     return;
    PsiManager manager=PsiManager.getInstance(method.getProject());
    GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(manager.getProject());
    final CanonicalTypes.Type returnType=myChangeInfo.getNewReturnType();
    if (returnType != null) {
      prototype=factory.createMethodFromText("",newMethodName,returnType.getTypeText(),ArrayUtil.EMPTY_STRING_ARRAY);
    }
 else {
      prototype=factory.createConstructorFromText(newMethodName,ArrayUtil.EMPTY_STRING_ARRAY,ArrayUtil.EMPTY_STRING_ARRAY,"");
    }
    JavaParameterInfo[] parameters=myChangeInfo.getNewParameters();
    for (    JavaParameterInfo info : parameters) {
      PsiParameter param=factory.createParameter(info.getName(),info.getTypeText(),(GroovyPsiElement)method);
      prototype.getParameterList().add(param);
    }
    ConflictsUtil.checkMethodConflicts(method.getContainingClass(),method,prototype,conflicts);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
