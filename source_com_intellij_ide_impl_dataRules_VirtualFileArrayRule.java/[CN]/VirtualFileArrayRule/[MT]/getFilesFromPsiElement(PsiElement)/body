{
  if (elem instanceof PsiFile) {
    VirtualFile virtualFile=((PsiFile)elem).getVirtualFile();
    return virtualFile != null ? new VirtualFile[]{virtualFile} : null;
  }
 else   if (elem instanceof PsiDirectory) {
    return new VirtualFile[]{((PsiDirectory)elem).getVirtualFile()};
  }
 else {
    PsiFile file=elem.getContainingFile();
    return file != null && file.getVirtualFile() != null ? new VirtualFile[]{file.getVirtualFile()} : null;
  }
}
