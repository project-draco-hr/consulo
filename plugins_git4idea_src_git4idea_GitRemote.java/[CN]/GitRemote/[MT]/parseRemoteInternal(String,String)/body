{
  StringScanner in=new StringScanner(output);
  if (!in.tryConsume("* ")) {
    throw new IllegalStateException("Unexpected format for 'git remote show'");
  }
  String nameLine=in.line();
  if (!nameLine.endsWith(name)) {
    throw new IllegalStateException("Name line of 'git remote show' ends with wrong name: " + nameLine);
  }
  String fetch=null;
  String push=null;
  if (in.tryConsume(SHOW_URL_PREFIX)) {
    fetch=in.line();
    push=fetch;
  }
 else   if (in.tryConsume(SHOW_FETCH_URL_PREFIX)) {
    fetch=in.line();
    if (in.tryConsume(SHOW_PUSH_URL_PREFIX)) {
      push=in.line();
    }
 else {
      push=fetch;
    }
  }
 else {
    throw new IllegalStateException("Unexpected format for 'git remote show':\n" + output);
  }
  return new GitRemote(name,fetch,push);
}
