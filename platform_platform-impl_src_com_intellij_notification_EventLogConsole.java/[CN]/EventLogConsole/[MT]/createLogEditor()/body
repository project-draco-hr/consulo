{
  Project project=myProjectModel.getProject();
  final Editor editor=ConsoleViewUtil.setupConsoleEditor(project,false,false);
  Disposer.register(myProjectModel,new Disposable(){
    @Override public void dispose(){
      EditorFactory.getInstance().releaseEditor(editor);
    }
  }
);
  ((EditorMarkupModel)editor.getMarkupModel()).setErrorStripeVisible(true);
  final ClearLog clearLog=new ClearLog();
  clearLog.registerCustomShortcutSet(ActionManager.getInstance().getAction(IdeActions.CONSOLE_CLEAR_ALL).getShortcutSet(),editor.getContentComponent());
  editor.addEditorMouseListener(new EditorPopupHandler(){
    public void invokePopup(    final EditorMouseEvent event){
      final ActionManager actionManager=ActionManager.getInstance();
      final ActionPopupMenu menu=actionManager.createActionPopupMenu(ActionPlaces.UNKNOWN,createPopupActions(actionManager,clearLog));
      final MouseEvent mouseEvent=event.getMouseEvent();
      menu.getComponent().show(mouseEvent.getComponent(),mouseEvent.getX(),mouseEvent.getY());
    }
  }
);
  return editor;
}
