{
  Document document=editor.getDocument();
  int startOffset=document.getTextLength();
  Point dateStartPoint=editor.logicalPositionToXY(editor.offsetToLogicalPosition(startDateOffset));
  Point dateEndPoint=editor.logicalPositionToXY(editor.offsetToLogicalPosition(startOffset));
  int width=dateEndPoint.x - dateStartPoint.x;
  document.insertString(startOffset,"\n");
  Point startPoint=editor.logicalPositionToXY(editor.offsetToLogicalPosition(startOffset + 1));
  for (int count=1; ; count++) {
    document.insertString(startOffset + count,"\t");
    Point endPoint=editor.logicalPositionToXY(editor.offsetToLogicalPosition(document.getTextLength()));
    int tabWidth=endPoint.x - startPoint.x;
    if (width <= tabWidth) {
      document.deleteString(startOffset,document.getTextLength());
      return count;
    }
  }
}
