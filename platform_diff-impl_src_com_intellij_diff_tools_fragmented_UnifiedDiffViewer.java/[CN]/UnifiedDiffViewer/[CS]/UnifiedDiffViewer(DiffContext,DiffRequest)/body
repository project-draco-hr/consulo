{
  super(context,(ContentDiffRequest)request);
  myPrevNextDifferenceIterable=new MyPrevNextDifferenceIterable();
  myStatusPanel=new MyStatusPanel();
  myForceReadOnlyFlags=TextDiffViewerUtil.checkForceReadOnly(myContext,myRequest);
  boolean leftEditable=isEditable(Side.LEFT,false);
  boolean rightEditable=isEditable(Side.RIGHT,false);
  if (leftEditable && !rightEditable)   myMasterSide=Side.LEFT;
  if (!leftEditable && rightEditable)   myMasterSide=Side.RIGHT;
  myDocument=EditorFactory.getInstance().createDocument("");
  myEditor=DiffUtil.createEditor(myDocument,myProject,true,true);
  List<JComponent> titles=DiffUtil.createTextTitles(myRequest,ContainerUtil.list(myEditor,myEditor));
  UnifiedContentPanel contentPanel=new UnifiedContentPanel(titles,myEditor);
  myPanel=new UnifiedDiffPanel(myProject,contentPanel,this,myContext);
  myFoldingModel=new MyFoldingModel(myEditor,this);
  myEditorSettingsAction=new SetEditorSettingsAction(getTextSettings(),getEditors());
  myEditorSettingsAction.applyDefaults();
  new MyOpenInEditorWithMouseAction().register(getEditors());
  TextDiffViewerUtil.checkDifferentDocuments(myRequest);
  DiffUtil.registerAction(new ReplaceSelectedChangesAction(Side.LEFT,true),myPanel);
  DiffUtil.registerAction(new AppendSelectedChangesAction(Side.LEFT,true),myPanel);
  DiffUtil.registerAction(new ReplaceSelectedChangesAction(Side.RIGHT,true),myPanel);
  DiffUtil.registerAction(new AppendSelectedChangesAction(Side.RIGHT,true),myPanel);
}
