{
  if (myChangedBlockData == null)   return Collections.emptyList();
  final BitSet lines=DiffUtil.getSelectedLines(myEditor);
  List<UnifiedDiffChange> changes=myChangedBlockData.getDiffChanges();
  List<UnifiedDiffChange> affectedChanges=new ArrayList<>();
  for (int i=changes.size() - 1; i >= 0; i--) {
    UnifiedDiffChange change=changes.get(i);
    int line1=change.getLine1();
    int line2=change.getLine2();
    if (DiffUtil.isSelectedByLine(lines,line1,line2)) {
      affectedChanges.add(change);
    }
  }
  return affectedChanges;
}
