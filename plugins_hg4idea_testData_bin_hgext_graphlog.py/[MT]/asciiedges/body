def asciiedges(seen, rev, parents):
    'adds edge info to changelog DAG walk suitable for ascii()'
    if (rev not in seen):
        seen.append(rev)
    nodeidx = seen.index(rev)
    knownparents = []
    newparents = []
    for parent in parents:
        if (parent in seen):
            knownparents.append(parent)
        else:
            newparents.append(parent)
    ncols = len(seen)
    seen[nodeidx:(nodeidx + 1)] = newparents
    edges = [(nodeidx, seen.index(p)) for p in knownparents]
    if (len(newparents) > 0):
        edges.append((nodeidx, nodeidx))
    if (len(newparents) > 1):
        edges.append((nodeidx, (nodeidx + 1)))
    nmorecols = (len(seen) - ncols)
    return (nodeidx, edges, ncols, nmorecols)
