def graphlog(ui, repo, path=None, **opts):
    'show revision history alongside an ASCII revision graph\n\n    Print a revision history alongside a revision graph drawn with\n    ASCII characters.\n\n    Nodes printed as an @ character are parents of the working\n    directory.\n    '
    check_unsupported_flags(opts)
    limit = cmdutil.loglimit(opts)
    (start, stop) = get_revs(repo, opts['rev'])
    if (start == nullrev):
        return
    if path:
        path = util.canonpath(repo.root, os.getcwd(), path)
    if path:
        revdag = graphmod.filerevs(repo, path, start, stop, limit)
    else:
        if (limit is not None):
            stop = max(stop, ((start - limit) + 1))
        revdag = graphmod.revisions(repo, start, stop)
    displayer = show_changeset(ui, repo, opts, buffered=True)
    showparents = [ctx.node() for ctx in repo[None].parents()]
    generate(ui, revdag, displayer, showparents, asciiedges)
