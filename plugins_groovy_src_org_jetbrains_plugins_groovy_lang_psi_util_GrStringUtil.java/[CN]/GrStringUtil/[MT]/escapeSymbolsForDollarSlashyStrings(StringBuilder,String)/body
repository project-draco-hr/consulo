{
  final int length=str.length();
  for (int idx=0; idx < length; idx++) {
    char ch=str.charAt(idx);
switch (ch) {
case '/':
      if (idx + 1 < length && str.charAt(idx + 1) == '$') {
        appendUnicode(buffer,'/');
        appendUnicode(buffer,'$');
        break;
      }
default :
    if (Character.isISOControl(ch)) {
      appendUnicode(buffer,ch);
    }
 else {
      buffer.append(ch);
    }
}
}
}
