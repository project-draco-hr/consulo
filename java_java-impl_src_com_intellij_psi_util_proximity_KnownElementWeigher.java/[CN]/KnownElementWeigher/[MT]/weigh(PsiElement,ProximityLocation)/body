{
  for (  ForcedElementWeigher weigher : Extensions.getExtensions(ForcedElementWeigher.EP_NAME)) {
    final Comparable weigh=weigher.getForcedWeigh(element);
    if (weigh != null)     return weigh;
  }
  Project project=location.getProject();
  if (project == null || !SdkOrLibraryWeigher.isJdkElement(element,project)) {
    return 0;
  }
  if (element instanceof PsiClass) {
    return getJdkClassProximity((PsiClass)element);
  }
  if (element instanceof PsiMethod) {
    final PsiMethod method=(PsiMethod)element;
    final PsiClass containingClass=method.getContainingClass();
    if (containingClass != null) {
      String methodName=method.getName();
      if ("finalize".equals(methodName) || "registerNatives".equals(methodName) || "getClass".equals(methodName)|| methodName.startsWith("wait")|| methodName.startsWith("notify")) {
        if (CommonClassNames.JAVA_LANG_OBJECT.equals(containingClass.getQualifiedName())) {
          return -1;
        }
      }
      if ("subSequence".equals(methodName)) {
        if (CommonClassNames.JAVA_LANG_STRING.equals(containingClass.getQualifiedName())) {
          return -1;
        }
      }
      if (CommonClassNames.JAVA_LANG_OBJECT.equals(containingClass.getQualifiedName())) {
        return 0;
      }
      return getJdkClassProximity(method.getContainingClass());
    }
  }
  if (element instanceof PsiField) {
    return getJdkClassProximity(((PsiField)element).getContainingClass());
  }
  return 0;
}
