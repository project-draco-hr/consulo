{
  final String s=getText();
  if (s != null && s.equals("/")) {
    return ArrayUtil.EMPTY_OBJECT_ARRAY;
  }
  try {
    final List ret=new ArrayList();
    final List<Class> allowedClasses=new ArrayList<Class>();
    allowedClasses.add(PsiFile.class);
    for (    final FileReferenceHelper helper : getHelpers()) {
      allowedClasses.add(helper.getDirectoryClass());
    }
    final List<PsiConflictResolver> resolvers=Arrays.<PsiConflictResolver>asList(new DuplicateConflictResolver());
    final PsiElementProcessor<PsiFileSystemItem> processor=createChildrenProcessor(myFileReferenceSet.createProcessor(ret,allowedClasses,resolvers));
    for (    PsiFileSystemItem context : getContexts()) {
      for (      final PsiElement child : context.getChildren()) {
        if (child instanceof PsiFileSystemItem) {
          processor.execute((PsiFileSystemItem)child);
        }
      }
    }
    return ret.toArray();
  }
 catch (  ProcessorRegistry.IncompatibleReferenceTypeException e) {
    LOG.error(e);
    return ArrayUtil.EMPTY_OBJECT_ARRAY;
  }
}
