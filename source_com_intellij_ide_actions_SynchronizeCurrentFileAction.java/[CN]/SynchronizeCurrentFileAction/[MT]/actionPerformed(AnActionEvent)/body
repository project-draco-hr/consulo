{
  final VirtualFile[] files=getFiles(e);
  for (  VirtualFile file : files) {
    if (file.isDirectory()) {
      final int response=Messages.showYesNoDialog(getProject(e),IdeBundle.message("prompt.recursively.synchronize.directory"),IdeBundle.message("title.synchronize.files"),Messages.getQuestionIcon());
      if (response == 1) {
        return;
      }
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      for (int i=0; i < files.length; i++) {
        final VirtualFile file=files[i];
        file.refresh(false,true);
      }
    }
  }
);
  final FileStatusManager statusManager=FileStatusManager.getInstance(getProject(e));
  for (  VirtualFile file : files) {
    statusManager.fileStatusChanged(file);
  }
}
