{
  while (true) {
    if (element instanceof PsiFile)     break;
    if (isTopLevelClass(element))     break;
    element=element.getParent();
  }
  if (element instanceof PsiAspectFile) {
    PsiAspect[] aspects=((PsiAspectFile)element).getAspects();
    if (aspects.length > 0) {
      element=aspects[0];
    }
  }
 else   if (element instanceof PsiJavaFile) {
    PsiClass[] classes=((PsiJavaFile)element).getClasses();
    if (classes.length > 0) {
      element=classes[0];
    }
  }
  final ProjectView projectView=ProjectView.getInstance(myProject);
  final PsiElement _element1=element.getOriginalElement();
  ToolWindowManager windowManager=ToolWindowManager.getInstance(myProject);
  final Runnable runnable=new Runnable(){
    public void run(){
      if (requestFocus) {
        projectView.changeView(getMinorViewId());
      }
      projectView.selectPsiElement(_element1,requestFocus);
    }
  }
;
  if (requestFocus) {
    windowManager.getToolWindow(ToolWindowId.PROJECT_VIEW).activate(runnable);
  }
 else {
    runnable.run();
  }
}
