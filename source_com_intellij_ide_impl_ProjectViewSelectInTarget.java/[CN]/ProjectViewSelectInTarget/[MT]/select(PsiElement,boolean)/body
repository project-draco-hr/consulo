{
  while (true) {
    if (element instanceof PsiFile) {
      break;
    }
    if (isTopLevelClass(element)) {
      break;
    }
    element=element.getParent();
  }
  if (element instanceof PsiJavaFile) {
    PsiClass[] classes=((PsiJavaFile)element).getClasses();
    if (classes.length > 0 && isTopLevelClass(classes[0])) {
      element=classes[0];
    }
  }
  final PsiElement originalElement=element.getOriginalElement();
  final VirtualFile virtualFile=PsiUtil.getVirtualFile(originalElement);
  select(originalElement,virtualFile,requestFocus);
}
