{
  if (!templatesShown.get()) {
    templatesShown.set(true);
    for (    final TemplateImpl possible : templates) {
      result.addElement(new LiveTemplateLookupElementImpl(possible,false));
    }
    for (    Map.Entry<String,Collection<CustomLiveTemplateLookupElement>> entry : customTemplates.entrySet()) {
      Collection<CustomLiveTemplateLookupElement> value=entry.getValue();
      if (!value.isEmpty()) {
        result.withPrefixMatcher(entry.getKey()).addAllElements(value);
      }
    }
  }
}
