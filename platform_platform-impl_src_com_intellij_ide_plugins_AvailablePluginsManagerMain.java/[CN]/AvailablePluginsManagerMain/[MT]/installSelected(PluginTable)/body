{
  IdeaPluginDescriptor[] selection=pluginTable.getSelectedObjects();
  if (selection != null) {
    boolean enabled=true;
    for (    IdeaPluginDescriptor descr : selection) {
      if (descr instanceof PluginNode) {
        enabled&=!PluginManagerColumnInfo.isDownloaded((PluginNode)descr);
        if (((PluginNode)descr).getStatus() == PluginNode.STATUS_INSTALLED) {
          enabled&=InstalledPluginsTableModel.hasNewerVersion(descr.getPluginId());
        }
      }
 else       if (descr instanceof IdeaPluginDescriptorImpl) {
        PluginId id=descr.getPluginId();
        enabled&=InstalledPluginsTableModel.hasNewerVersion(id);
      }
    }
    if (enabled) {
      new InstallPluginAction(this,installed).install(new Runnable(){
        @Override public void run(){
          UIUtil.invokeLaterIfNeeded(new Runnable(){
            @Override public void run(){
              refresh();
            }
          }
);
        }
      }
);
    }
    return true;
  }
  return false;
}
