{
  final File localRepository=getLocalRepository();
  if (localRepository == null) {
    return new ArrayList<PluginPluginInfo>();
  }
  final VirtualFile repoDir=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    public VirtualFile compute(){
      return LocalFileSystem.getInstance().refreshAndFindFileByPath(localRepository.getPath());
    }
  }
);
  FileChooserDescriptor descriptor=new FileChooserDescriptor(false,false,true,true,false,true);
  VirtualFile[] pluginFiles=FileChooser.chooseFiles(myProject,descriptor,repoDir);
  Collection<PluginPluginInfo> pluginDocuments=new ArrayList<PluginPluginInfo>();
  for (  VirtualFile pluginFile : pluginFiles) {
    PluginPluginInfo mavenPluginDocument=createPluginDocument(pluginFile.getPath(),true);
    if (mavenPluginDocument != null) {
      pluginDocuments.add(mavenPluginDocument);
    }
  }
  return pluginDocuments;
}
