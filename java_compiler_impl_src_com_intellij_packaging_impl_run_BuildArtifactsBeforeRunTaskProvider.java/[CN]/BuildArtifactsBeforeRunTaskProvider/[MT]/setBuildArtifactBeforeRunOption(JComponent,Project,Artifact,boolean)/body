{
  final DataContext dataContext=DataManager.getInstance().getDataContext(runConfigurationEditorComponent);
  final ConfigurationSettingsEditorWrapper editor=ConfigurationSettingsEditorWrapper.CONFIGURATION_EDITOR_KEY.getData(dataContext);
  if (editor != null) {
    List<BeforeRunTask> tasks=editor.getStepsBeforeLaunch();
    List<BuildArtifactsBeforeRunTask> myTasks=new ArrayList<BuildArtifactsBeforeRunTask>();
    for (    BeforeRunTask task : tasks) {
      if (task instanceof BuildArtifactsBeforeRunTask) {
        myTasks.add((BuildArtifactsBeforeRunTask)task);
      }
    }
    if (enable && myTasks.isEmpty()) {
      BuildArtifactsBeforeRunTask task=new BuildArtifactsBeforeRunTask(project);
      task.addArtifact(artifact);
      task.setEnabled(true);
      editor.addBeforeLaunchStep(task);
    }
 else {
      for (      BuildArtifactsBeforeRunTask task : myTasks) {
        if (enable) {
          task.addArtifact(artifact);
          task.setEnabled(true);
        }
 else {
          task.removeArtifact(artifact);
          if (task.getArtifactPointers().isEmpty()) {
            task.setEnabled(false);
          }
        }
      }
    }
  }
}
