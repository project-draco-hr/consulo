{
  PsiElement e=element.getFirstChild();
  PsiWhiteSpace lastWS=null;
  for (; ; e=e.getNextSibling()) {
    if (e instanceof PsiWhiteSpace) {
      lastWS=(PsiWhiteSpace)e;
    }
 else     if (e instanceof PsiComment) {
      lastWS=null;
    }
 else {
      break;
    }
  }
  e=lastWS == null ? element.getPrevSibling() : lastWS;
  if (!(e instanceof PsiWhiteSpace))   return "";
  PsiWhiteSpace ws=(PsiWhiteSpace)e;
  String t=ws.getText();
  int l=t.length();
  int i=l;
  while (--i >= 0) {
    char ch=t.charAt(i);
    if (ch == '\n' || ch == '\r')     break;
  }
  if (i < 0)   return t;
  i++;
  if (i == l)   return "";
  return t.substring(i);
}
