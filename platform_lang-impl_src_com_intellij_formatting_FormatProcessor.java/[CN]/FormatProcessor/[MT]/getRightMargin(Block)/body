{
  Language language=null;
  if (rootBlock instanceof ASTBlock) {
    ASTNode node=((ASTBlock)rootBlock).getNode();
    if (node != null) {
      PsiElement psiElement=node.getPsi();
      if (psiElement.isValid()) {
        PsiFile psiFile=psiElement.getContainingFile();
        if (psiFile != null) {
          language=psiFile.getViewProvider().getBaseLanguage();
        }
      }
    }
  }
  return mySettings.getRightMargin(language);
}
