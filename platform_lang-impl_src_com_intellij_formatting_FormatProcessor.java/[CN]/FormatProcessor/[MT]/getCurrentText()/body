{
  StringBuilder result=new StringBuilder();
  for (LeafBlockWrapper block=myFirstTokenBlock; block != null; block=block.getNextBlock()) {
    result.append(block.getWhiteSpace().generateWhiteSpace(getIndentOptionsToUse(block,myDefaultIndentOption)));
    result.append(myDocument.getCharsSequence().subSequence(block.getStartOffset(),block.getEndOffset()));
  }
  return result.toString();
}
