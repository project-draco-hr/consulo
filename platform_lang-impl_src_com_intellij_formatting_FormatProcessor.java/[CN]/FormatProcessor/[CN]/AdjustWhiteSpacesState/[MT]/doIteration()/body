{
  LeafBlockWrapper blockToProcess=myCurrentBlock;
  processToken();
  if (blockToProcess != null) {
    myProgressIndicator.afterProcessingBlock(blockToProcess);
  }
  if (myCurrentBlock != null) {
    return;
  }
  if (myAlignAgain.isEmpty()) {
    setDone(true);
  }
 else {
    myAlignAgain.clear();
    myCurrentBlock=myFirstTokenBlock;
  }
}
