{
  if (isDone()) {
    return;
  }
  setDone(myWrapper.iteration());
  if (!isDone()) {
    return;
  }
  myInfos=myWrapper.getBlockToInfoMap();
  myRootBlockWrapper=myWrapper.getRootBlockWrapper();
  myFirstTokenBlock=myWrapper.getFirstTokenBlock();
  myLastTokenBlock=myWrapper.getLastTokenBlock();
  myCurrentBlock=myFirstTokenBlock;
  myTextRangeToWrapper=buildTextRangeToInfoMap(myFirstTokenBlock);
  int lastBlockOffset=getLastBlock().getEndOffset();
  myLastWhiteSpace=new WhiteSpace(lastBlockOffset,false);
  myLastWhiteSpace.append(Math.max(lastBlockOffset,myWrapper.getEndOffset()),myModel,myDefaultIndentOption);
  myAlignmentsInsideRangesToModify=myWrapper.getAlignmentsInsideRangeToModify();
}
