{
  myProgressCallback=callback;
  myDefaultIndentOption=options.myIndentOptions;
  mySettings=options.mySettings;
  myDocument=model.getDocument();
  myReformatContext=options.myReformatContext;
  myCurrentState=new WrapBlocksState(block,model,options.myAffectedRanges,options.myInterestingOffset);
  myRightMargin=getRightMargin(block);
}
