{
  if (myIsCollected) {
    if (myIsFailed) {
      throw new IllegalStateException("The method should not be called after after exception has been thrown.");
    }
 else {
      return;
    }
  }
  myIsCollected=true;
  updateIndex();
  collectUnmergedAndUnversioned();
  collectDiffChanges();
  myIsFailed=false;
}
