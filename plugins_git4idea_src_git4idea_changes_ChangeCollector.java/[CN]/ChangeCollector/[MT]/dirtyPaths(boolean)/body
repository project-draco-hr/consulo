{
  final List<String> allPaths=new ArrayList<String>();
  for (  FilePath p : myDirtyScope.getRecursivelyDirtyDirectories()) {
    addToPaths(p,allPaths);
  }
  for (  FilePath p : myDirtyScope.getDirtyFilesNoExpand()) {
    addToPaths(p,allPaths);
  }
  if (includeChanges) {
    try {
      for (      Change c : myChangeListManager.getChangesIn(myVcsRoot)) {
switch (c.getType()) {
case NEW:
case DELETED:
case MOVED:
          if (c.getAfterRevision() != null) {
            addToPaths(c.getAfterRevision().getFile(),allPaths);
          }
        if (c.getBeforeRevision() != null) {
          addToPaths(c.getBeforeRevision().getFile(),allPaths);
        }
case MODIFICATION:
default :
    }
  }
}
 catch (Exception t) {
}
}
removeCommonParents(allPaths);
final List<FilePath> paths=new ArrayList<FilePath>(allPaths.size());
for (String p : allPaths) {
final File file=new File(p);
paths.add(new FilePathImpl(file,file.isDirectory()));
}
return paths;
}
