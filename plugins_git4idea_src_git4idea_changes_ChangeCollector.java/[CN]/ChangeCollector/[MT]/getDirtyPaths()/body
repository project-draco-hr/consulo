{
  final Set<FilePath> paths=new THashSet<FilePath>();
  final FilePath rootPath=VcsUtil.getFilePath(myVcsRoot.getPath(),true);
  boolean allRepositoryDirty=false;
  for (  FilePath p : myDirtyScope.getRecursivelyDirtyDirectories()) {
    if (addToPaths(rootPath,paths,p)) {
      allRepositoryDirty=true;
      break;
    }
  }
  if (allRepositoryDirty) {
    return Collections.singleton(rootPath);
  }
  for (  FilePath p : myDirtyScope.getDirtyFilesNoExpand()) {
    if (addToPaths(rootPath,paths,p)) {
      allRepositoryDirty=true;
      break;
    }
  }
  if (allRepositoryDirty) {
    return Collections.singleton(rootPath);
  }
  return paths;
}
