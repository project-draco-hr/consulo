{
  AutoPopupController.getInstance(project).autoPopupMemberLookup(editor,new Condition<PsiFile>(){
    @Override public boolean value(    final PsiFile file){
      int offset=editor.getCaretModel().getOffset();
      PsiElement lastElement=file.findElementAt(offset - 1);
      if (lastElement == null) {
        return false;
      }
      final PsiElement prevSibling=PsiTreeUtil.prevVisibleLeaf(lastElement);
      if (prevSibling == null || ".".equals(prevSibling.getText()))       return false;
      PsiElement parent=prevSibling;
      do {
        parent=parent.getParent();
      }
 while (parent instanceof PsiJavaCodeReferenceElement || parent instanceof PsiTypeElement);
      if (parent instanceof PsiParameterList || parent instanceof PsiParameter)       return false;
      if (!".".equals(lastElement.getText()) && !"#".equals(lastElement.getText())) {
        return JavaClassReferenceCompletionContributor.findJavaClassReference(file,offset - 1) != null;
      }
 else {
        final PsiElement element=file.findElementAt(offset);
        return element == null || !"#".equals(lastElement.getText()) || new SuperParentFilter(new ClassFilter(PsiDocComment.class)).isAcceptable(element,element.getParent());
      }
    }
  }
);
}
