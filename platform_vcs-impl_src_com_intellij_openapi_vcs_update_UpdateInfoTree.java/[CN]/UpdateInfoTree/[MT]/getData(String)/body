{
  if (myTreeBrowser != null && myTreeBrowser.isVisible()) {
    return null;
  }
  if (CommonDataKeys.NAVIGATABLE.is(dataId)) {
    if (mySelectedFile == null || !mySelectedFile.isValid())     return null;
    return new OpenFileDescriptor(myProject,mySelectedFile);
  }
 else   if (CommonDataKeys.VIRTUAL_FILE_ARRAY.is(dataId)) {
    return getVirtualFileArray();
  }
 else   if (VcsDataKeys.IO_FILE_ARRAY.is(dataId)) {
    return getFileArray();
  }
 else   if (PlatformDataKeys.TREE_EXPANDER.is(dataId)) {
    if (myGroupByChangeList) {
      return myTreeBrowser != null ? myTreeBrowser.getTreeExpander() : null;
    }
 else {
      return myTreeExpander;
    }
  }
 else   if (VcsDataKeys.UPDATE_VIEW_SELECTED_PATH.is(dataId)) {
    return mySelectedUrl;
  }
 else   if (VcsDataKeys.UPDATE_VIEW_FILES_ITERABLE.is(dataId)) {
    return myTreeIterable;
  }
 else   if (VcsDataKeys.LABEL_BEFORE.is(dataId)) {
    return myBefore;
  }
 else   if (VcsDataKeys.LABEL_AFTER.is(dataId)) {
    return myAfter;
  }
  return super.getData(dataId);
}
