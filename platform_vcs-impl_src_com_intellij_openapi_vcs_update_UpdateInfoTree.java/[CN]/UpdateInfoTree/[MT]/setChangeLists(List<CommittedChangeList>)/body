{
  final boolean hasEmptyCaches=CommittedChangesCache.getInstance(myProject).hasEmptyCaches();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      if (myLoadingChangeListsLabel != null) {
        remove(myLoadingChangeListsLabel);
        myLoadingChangeListsLabel=null;
      }
      myCommittedChangeLists=receivedChanges;
      myTreeBrowser.setItems(myCommittedChangeLists,CommittedChangesBrowserUseCase.UPDATE);
      if (hasEmptyCaches) {
        final StatusText statusText=myTreeBrowser.getEmptyText();
        statusText.clear();
        statusText.appendText("Click ").appendText("Refresh",SimpleTextAttributes.LINK_ATTRIBUTES,new ActionListener(){
          @Override public void actionPerformed(          final ActionEvent e){
            RefreshIncomingChangesAction.doRefresh(myProject);
          }
        }
).appendText(" to initialize repository changes cache");
      }
    }
  }
,myProject.getDisposed());
}
