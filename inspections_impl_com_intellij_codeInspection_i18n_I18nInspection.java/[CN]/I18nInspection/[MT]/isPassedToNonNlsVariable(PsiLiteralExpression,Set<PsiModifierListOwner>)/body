{
  PsiExpression toplevel=I18nUtil.getToplevelExpression(expression);
  PsiVariable var=null;
  if (toplevel instanceof PsiAssignmentExpression) {
    PsiExpression lExpression=((PsiAssignmentExpression)toplevel).getLExpression();
    while (lExpression instanceof PsiArrayAccessExpression) {
      lExpression=((PsiArrayAccessExpression)lExpression).getArrayExpression();
    }
    if (lExpression instanceof PsiReferenceExpression) {
      final PsiElement resolved=((PsiReferenceExpression)lExpression).resolve();
      if (resolved instanceof PsiVariable)       var=(PsiVariable)resolved;
    }
  }
  if (var == null) {
    PsiElement parent=toplevel.getParent();
    if (parent instanceof PsiVariable && toplevel.equals(((PsiVariable)parent).getInitializer())) {
      var=(PsiVariable)parent;
    }
  }
  if (var != null) {
    if (annotatedAsNonNls(var)) {
      return true;
    }
    if (ignoreAssignedToConstants && var.getModifierList().hasModifierProperty(PsiModifier.STATIC) && var.getModifierList().hasModifierProperty(PsiModifier.FINAL)) {
      return true;
    }
    nonNlsTargets.add(var);
  }
  return false;
}
