{
  final ModifiableRootModel rootModel=myClasspathPanel.getRootModel();
  Set<Module> addedModules=new HashSet<Module>(Arrays.asList(rootModel.getModuleDependencies(true)));
  addedModules.add(rootModel.getModule());
  final Module[] modules=myClasspathPanel.getModuleConfigurationState().getModulesProvider().getModules();
  final List<Module> elements=new ArrayList<Module>();
  for (  final Module module : modules) {
    if (!addedModules.contains(module)) {
      elements.add(module);
    }
  }
  return elements;
}
