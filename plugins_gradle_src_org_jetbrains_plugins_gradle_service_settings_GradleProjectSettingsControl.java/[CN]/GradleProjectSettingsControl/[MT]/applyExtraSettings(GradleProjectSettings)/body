{
  String gradleHomePath=myGradleHomePathField.getText();
  if (myGradleHomeModifiedByUser) {
    if (StringUtil.isEmpty(gradleHomePath)) {
      settings.setGradleHome(null);
    }
 else {
      settings.setGradleHome(gradleHomePath);
    }
  }
 else {
    settings.setGradleHome(getInitialSettings().getGradleHome());
  }
  if (myUseLocalDistributionButton.isSelected()) {
    if (StringUtil.isEmpty(gradleHomePath)) {
      myGradleHomeSettingType=LocationSettingType.UNKNOWN;
    }
 else     if (!myInstallationManager.isGradleSdkHome(new File(gradleHomePath))) {
      myGradleHomeSettingType=LocationSettingType.EXPLICIT_INCORRECT;
      new DelayedBalloonInfo(MessageType.ERROR,myGradleHomeSettingType,0).run();
      return GradleBundle.message("gradle.home.setting.type.explicit.incorrect");
    }
  }
  settings.setPreferLocalInstallationToWrapper(myUseLocalDistributionButton.isSelected());
  return null;
}
