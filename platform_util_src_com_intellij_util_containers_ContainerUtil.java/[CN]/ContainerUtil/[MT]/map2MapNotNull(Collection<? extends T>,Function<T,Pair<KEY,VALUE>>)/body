{
  final Map<KEY,VALUE> set=new THashMap<KEY,VALUE>(collection.size());
  for (  T t : collection) {
    Pair<KEY,VALUE> pair=mapper.fun(t);
    if (pair != null) {
      set.put(pair.first,pair.second);
    }
  }
  return set;
}
