{
  if (collection.isEmpty())   return Collections.emptySet();
  Set<V> set=new HashSet<V>(collection.size());
  for (  T t : collection) {
    V value=mapper.fun(t);
    if (value != null) {
      set.add(value);
    }
  }
  return set.isEmpty() ? Collections.<V>emptySet() : set;
}
