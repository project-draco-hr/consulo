{
  final AsyncPromise<T> promise=new AsyncPromise<T>();
  asyncResult.doWhenDone(new Consumer<T>(){
    @Override public void consume(    T result){
      promise.setResult(result);
    }
  }
).doWhenRejected(new Consumer<String>(){
    @Override public void consume(    String error){
      promise.setError(createError(error));
    }
  }
);
  return promise;
}
