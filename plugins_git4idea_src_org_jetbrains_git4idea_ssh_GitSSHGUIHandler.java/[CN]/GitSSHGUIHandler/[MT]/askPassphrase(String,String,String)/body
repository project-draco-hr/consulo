{
  final String[] rc=new String[1];
  try {
    EventQueue.invokeAndWait(new Runnable(){
      public void run(){
        showError(lastError);
        PasswordPromptDialog dialog=new PasswordPromptDialog(GitBundle.message("ssh.askPassphrase.message",keyPath,username),GitBundle.getString("ssh.ask.passphrase.title"),"");
        dialog.show();
        if (dialog.isOK()) {
          rc[0]=dialog.getPassword();
        }
      }
    }
);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException("dialog failed",e);
  }
catch (  InvocationTargetException e) {
    throw new RuntimeException("dialog failed",e);
  }
  return rc[0];
}
