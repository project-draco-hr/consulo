{
  super(editorSearchComponent);
  myTextField=textField;
  getTemplatePresentation().setIcon(AllIcons.Actions.Search);
  final String s=getTextField() == getEditorSearchComponent().getSearchField() ? "Search" : "Replace";
  getTemplatePresentation().setDescription(s + " history");
  getTemplatePresentation().setText(s + " History");
  ArrayList<Shortcut> shortcuts=new ArrayList<Shortcut>();
  if (getTextField() == getEditorSearchComponent().getSearchField()) {
    ContainerUtil.addAll(shortcuts,ActionManager.getInstance().getAction("IncrementalSearch").getShortcutSet().getShortcuts());
  }
  shortcuts.add(new KeyboardShortcut(KeyStroke.getKeyStroke(KeyEvent.VK_H,InputEvent.CTRL_DOWN_MASK),null));
  registerCustomShortcutSet(new CustomShortcutSet(shortcuts.toArray(new Shortcut[shortcuts.size()])),getTextField());
  if (!editorSearchComponent.getFindModel().isMultiline()) {
    getTextField().registerKeyboardAction(new ActionListener(){
      @Override public void actionPerformed(      ActionEvent actionEvent){
        if (getTextField().getText().isEmpty()) {
          getEditorSearchComponent().showHistory(false,getTextField());
        }
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_DOWN,0),JComponent.WHEN_FOCUSED);
  }
}
