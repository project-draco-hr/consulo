{
  final AntStructuredElement element=getElement();
  final String id=getCanonicalRepresentationText();
  AntElement refId=element.getElementByRefId(id);
  if (refId == null) {
    for (    final AntFile file : element.getAntProject().getImportedFiles()) {
      final AntProject importedProject=file.getAntProject();
      importedProject.getChildren();
      refId=importedProject.getElementByRefId(id);
      if (refId != null)       break;
    }
  }
  if (refId == null) {
    final AntTarget target=PsiTreeUtil.getParentOfType(element,AntTarget.class);
    if (target != null) {
      final Set<PsiElement> targetStack=PsiElementSetSpinAllocator.alloc();
      try {
        refId=resolveTargetRefId(target,id,targetStack);
      }
  finally {
        PsiElementSetSpinAllocator.dispose(targetStack);
      }
    }
  }
  return refId;
}
