{
  if (elementsDepthStack.contains(project))   return;
  elementsDepthStack.add(project);
  try {
    for (    final String id : project.getRefIds()) {
      final AntElement refElement=project.getElementByRefId(id);
      if (refElement != null) {
        variants.add(refElement);
      }
    }
    for (    final AntFile file : project.getImportedFiles()) {
      getVariants(file.getAntProject(),variants,elementsDepthStack);
    }
  }
  finally {
    elementsDepthStack.remove(project);
  }
}
