{
  if (elementsDepthStack.contains(project))   return null;
  elementsDepthStack.add(project);
  try {
    AntElement refId=project.getElementByRefId(id);
    if (refId == null) {
      for (      final AntFile file : project.getImportedFiles()) {
        refId=resolve(id,file.getAntProject(),elementsDepthStack);
        if (refId != null)         break;
      }
    }
    return refId;
  }
  finally {
    elementsDepthStack.remove(project);
  }
}
