{
  Breakpoint[] breakpoints=getSelectedBreakpoints();
  if (breakpoints == null || breakpoints.length == 0) {
    return null;
  }
  Breakpoint br=breakpoints[0];
  int line;
  Document doc;
  if (br instanceof BreakpointWithHighlighter) {
    BreakpointWithHighlighter breakpoint=(BreakpointWithHighlighter)br;
    doc=breakpoint.getDocument();
    line=breakpoint.getLineIndex();
  }
 else {
    return null;
  }
  if (line < 0 || line >= doc.getLineCount()) {
    return null;
  }
  int offset=doc.getLineStartOffset(line);
  if (br instanceof FieldBreakpoint) {
    PsiField field=((FieldBreakpoint)br).getPsiField();
    if (field != null) {
      offset=field.getTextOffset();
    }
  }
  VirtualFile vFile=FileDocumentManager.getInstance().getFile(doc);
  if (vFile == null || !vFile.isValid()) {
    return null;
  }
  return new OpenFileDescriptor(project,vFile,offset);
}
