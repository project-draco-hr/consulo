{
  DomElement element=DomUtil.getDomElement(descriptor.getPsiElement());
  if (!(element instanceof ExtensionPoint)) {
    return;
  }
  ExtensionPoint extensionPoint=(ExtensionPoint)element;
  List<PsiField> fields=ExtensionPointBeanClassInspection.collectMissingWithTags(extensionPoint);
  PsiElement navTarget=null;
  for (  PsiField field : fields) {
    String attributeName=PluginFieldNameConverter.getAttributeAnnotationValue(field);
    if (attributeName == null) {
      attributeName=field.getName();
    }
    if (attributeName.equals("forClass")) {
      continue;
    }
    With with=extensionPoint.addWith();
    with.getAttribute().setStringValue(attributeName);
    String epName=extensionPoint.getName().getStringValue();
    String className="";
    if (epName != null) {
      PsiClass[] classesByName=PsiShortNamesCache.getInstance(project).getClassesByName(StringUtil.capitalize(epName),ProjectScope.getAllScope(project));
      if (classesByName.length == 1) {
        className=classesByName[0].getQualifiedName();
      }
    }
    with.getImplements().setStringValue(className);
    if (navTarget == null) {
      navTarget=with.getImplements().getXmlAttributeValue();
    }
  }
  if (navTarget != null) {
    PsiNavigateUtil.navigate(navTarget);
  }
}
