{
  ApplicationManager.getApplication().assertIsDispatchThread();
  LOG.assertTrue(!isRunning());
  LOG.assertTrue(!myStoppedAlready);
  IdeEventQueue.getInstance().flushQueue();
  IdeEventQueue.getInstance().pumpEventsForHierarchy(myDialog.myPanel,new Condition<AWTEvent>(){
    public boolean value(    final AWTEvent object){
      return myStared && !isRunning();
    }
  }
);
}
