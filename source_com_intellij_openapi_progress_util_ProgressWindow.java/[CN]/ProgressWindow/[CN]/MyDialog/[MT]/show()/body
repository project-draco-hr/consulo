{
  if (ApplicationManager.getApplication().isHeadlessEnvironment())   return;
  if (myParentWindow == null)   return;
  if (myPopup != null) {
    myPopup.dispose();
  }
  if (myParentWindow instanceof Frame) {
    myPopup=new JDialog((Frame)myParentWindow,true);
  }
 else {
    myPopup=new JDialog((Dialog)myParentWindow,true);
  }
  myPopup.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
  myPopup.setContentPane(myPanel);
  myPopup.setUndecorated(true);
  myPopup.pack();
  myPopup.setLocationRelativeTo(myParentWindow);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      myCancelButton.requestFocus();
    }
  }
);
  myPopup.setVisible(true);
}
