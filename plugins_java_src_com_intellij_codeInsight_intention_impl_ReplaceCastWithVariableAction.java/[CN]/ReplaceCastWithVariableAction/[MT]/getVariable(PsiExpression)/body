{
  final PsiElement parent=occurrence.getParent();
  if (parent instanceof PsiLocalVariable) {
    return (PsiLocalVariable)parent;
  }
  if (parent instanceof PsiAssignmentExpression) {
    final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)parent;
    if (assignmentExpression.getLExpression() instanceof PsiReferenceExpression) {
      final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)assignmentExpression.getLExpression();
      final PsiElement resolved=referenceExpression.resolve();
      if (resolved instanceof PsiLocalVariable) {
        return (PsiLocalVariable)resolved;
      }
    }
  }
  return null;
}
