{
  myFacetListener=new MyFacetManagerAdapter();
  messageBus.connect().subscribe(ProjectTopics.MODULES,new ModuleAdapter(){
    @Override public void moduleAdded(    Project project,    Module module){
      onModuleAdded(module);
    }
    @Override public void beforeModuleRemoved(    final Project project,    final Module module){
      Facet[] allFacets=FacetManager.getInstance(module).getAllFacets();
      for (      Facet facet : allFacets) {
        onFacetRemoved(facet,true);
      }
    }
    @Override public void moduleRemoved(    Project project,    Module module){
      onModuleRemoved(module);
    }
  }
);
}
