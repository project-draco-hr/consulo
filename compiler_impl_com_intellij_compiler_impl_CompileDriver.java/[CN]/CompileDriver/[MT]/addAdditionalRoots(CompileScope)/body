{
  CompileScope scope=originalScope;
  for (  final Pair<Compiler,Module> pair : myGenerationCompilerModuleToOutputDirMap.keySet()) {
    final VirtualFile outputDir=myGenerationCompilerModuleToOutputDirMap.get(pair);
    scope=new CompositeScope(scope,new FileSetCompileScope(new VirtualFile[]{outputDir},new Module[]{pair.getSecond()}));
  }
  CompileScope additionalJ2eeScope=DeploymentUtil.getInstance().getOutOfSourceJ2eeCompileScope(scope);
  if (additionalJ2eeScope != null) {
    scope=new CompositeScope(scope,additionalJ2eeScope);
  }
  return scope;
}
