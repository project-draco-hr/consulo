{
  progress.checkCanceled();
  final File[] files=directory.listFiles();
  boolean isEmpty=true;
  if (files == null) {
    isEmpty=false;
  }
 else {
    for (    File file : files) {
      if (outputDirectories.contains(file)) {
        isEmpty=false;
      }
 else {
        if (doPrune(progress,file,outputDirectories)) {
          deleteFile(file);
        }
 else {
          isEmpty=false;
        }
      }
    }
  }
  return isEmpty;
}
