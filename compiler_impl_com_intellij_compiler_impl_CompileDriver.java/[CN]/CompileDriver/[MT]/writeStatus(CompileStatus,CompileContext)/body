{
  final File statusFile=new File(myCachesDirectoryPath,VERSION_FILE_NAME);
  final File lockFile=getLockFile();
  try {
    FileUtil.createParentDirs(statusFile);
    statusFile.createNewFile();
    DataOutputStream out=new DataOutputStream(new FileOutputStream(statusFile));
    try {
      out.writeInt(status.CACHE_FORMAT_VERSION);
    }
  finally {
      out.close();
    }
    if (status.COMPILATION_IN_PROGRESS) {
      FileUtil.createParentDirs(lockFile);
      lockFile.createNewFile();
    }
 else {
      deleteFile(lockFile);
    }
  }
 catch (  IOException e) {
    context.addMessage(CompilerMessageCategory.ERROR,CompilerBundle.message("compiler.error.exception",e.getMessage()),null,-1,-1);
  }
}
