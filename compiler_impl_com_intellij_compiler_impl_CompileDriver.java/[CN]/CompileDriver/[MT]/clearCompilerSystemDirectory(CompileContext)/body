{
  final File[] children=new File(myCachesDirectoryPath).listFiles();
  if (children != null) {
    for (    final File child : children) {
      final boolean deleteOk=FileUtil.delete(child);
      if (!deleteOk) {
        context.addMessage(CompilerMessageCategory.ERROR,CompilerBundle.message("compiler.error.failed.to.delete",child.getPath()),null,-1,-1);
      }
    }
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      for (      Pair<Compiler,Module> pair : myGenerationCompilerModuleToOutputDirMap.keySet()) {
        final VirtualFile dir=myGenerationCompilerModuleToOutputDirMap.get(pair);
        final File[] files=VfsUtil.virtualToIoFile(dir).listFiles();
        if (files != null) {
          for (          final File file : files) {
            final boolean deleteOk=FileUtil.delete(file);
            if (!deleteOk) {
              context.addMessage(CompilerMessageCategory.ERROR,CompilerBundle.message("compiler.error.failed.to.delete",file.getPath()),null,-1,-1);
            }
          }
        }
      }
    }
  }
);
}
