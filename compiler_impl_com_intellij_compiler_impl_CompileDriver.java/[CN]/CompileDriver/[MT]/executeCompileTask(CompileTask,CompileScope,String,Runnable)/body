{
  final WolfTheProblemSolver.ProblemUpdateTransaction update=WolfTheProblemSolver.getInstance(myProject).startUpdatingProblemsInScope(scope);
  final CompilerProgressIndicator indicator=new CompilerProgressIndicator(myProject,CompilerWorkspaceConfiguration.getInstance(myProject).COMPILE_IN_BACKGROUND,contentName,update);
  final CompileContextImpl compileContext=new CompileContextImpl(myProject,indicator,scope,null,this,false);
  FileDocumentManager.getInstance().saveAllDocuments();
  new Thread("Compile Task Thread"){
    public void run(){
synchronized (CompilerManager.getInstance(myProject)) {
        ProgressManager.getInstance().runProcess(new Runnable(){
          public void run(){
            try {
              task.execute(compileContext);
            }
 catch (            ProcessCanceledException ex) {
            }
 finally {
              if (onTaskFinished != null) {
                onTaskFinished.run();
              }
              update.commit();
            }
          }
        }
,compileContext.getProgressIndicator());
      }
    }
  }
.start();
}
