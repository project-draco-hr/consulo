{
  final CompilerManager manager=CompilerManager.getInstance(myProject);
  final ProgressIndicator progressIndicator=context.getProgressIndicator();
  try {
    final boolean[] result={true};
    runInContext(context,beforeTasks ? CompilerBundle.message("progress.executing.precompile.tasks") : CompilerBundle.message("progress.executing.postcompile.tasks"),new ThrowableRunnable<RuntimeException>(){
      public void run(){
        CompileTask[] tasks=beforeTasks ? manager.getBeforeTasks() : manager.getAfterTasks();
        for (        CompileTask task : tasks) {
          if (!task.execute(context)) {
            result[0]=false;
            return;
          }
        }
      }
    }
);
    return result[0];
  }
  finally {
    WindowManager.getInstance().getStatusBar(myProject).setInfo("");
    if (progressIndicator instanceof CompilerTask) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          ((CompilerTask)progressIndicator).showCompilerContent();
        }
      }
);
    }
  }
}
