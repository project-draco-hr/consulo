{
  Object cache=myCompilerToCacheMap.get(compiler);
  if (cache == null) {
    cache=new StateCache<ValidityState>(myCachesDirectoryPath + File.separator + getCompilerIdString(compiler)+ "_timestamp.dat"){
      public ValidityState read(      DataInputStream stream) throws IOException {
        return compiler.createValidityState(stream);
      }
      public void write(      ValidityState validityState,      DataOutputStream stream) throws IOException {
        validityState.save(stream);
      }
    }
;
    myCompilerToCacheMap.put(compiler,cache);
  }
  return (StateCache<ValidityState>)cache;
}
