{
  String nameToSelect=null;
  final int maxModulesToShow=10;
  final StringBuilder names=StringBuilderSpinAllocator.alloc();
  final String message;
  try {
    for (    String name : modules.size() > maxModulesToShow ? modules.subList(0,maxModulesToShow) : modules) {
      if (nameToSelect == null) {
        nameToSelect=name;
      }
      if (names.length() > 0) {
        names.append(",\n");
      }
      names.append("\"");
      names.append(name);
      names.append("\"");
    }
    if (modules.size() > maxModulesToShow) {
      names.append(",\n...");
    }
    message=CompilerBundle.message(resourceId,modules.size(),names.toString());
  }
  finally {
    StringBuilderSpinAllocator.dispose(names);
  }
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    LOG.error(message);
  }
  Messages.showMessageDialog(myProject,message,CommonBundle.getErrorTitle(),Messages.getErrorIcon());
  showConfigurationDialog(nameToSelect,tabNameToSelect);
}
