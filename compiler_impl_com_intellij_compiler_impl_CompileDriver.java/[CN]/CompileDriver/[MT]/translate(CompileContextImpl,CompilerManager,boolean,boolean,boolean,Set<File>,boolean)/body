{
  boolean didSomething=false;
  final TranslatingCompiler[] translators=compilerManager.getCompilers(TranslatingCompiler.class);
  final VfsSnapshot snapshot=ApplicationManager.getApplication().runReadAction(new Computable<VfsSnapshot>(){
    public VfsSnapshot compute(){
      return new VfsSnapshot(context.getCompileScope().getFiles(null,true));
    }
  }
);
  for (  final TranslatingCompiler translator : translators) {
    if (context.getProgressIndicator().isCanceled()) {
      throw new ExitException(ExitStatus.CANCELLED);
    }
    final boolean compiledSomething=compileSources(context,snapshot,translator,forceCompile,isRebuild,trackDependencies,outputDirectories,onlyCheckStatus);
    dropDependencyCache(context);
    dropInternalCache(translator);
    if (context.getMessageCount(CompilerMessageCategory.ERROR) > 0) {
      throw new ExitException(ExitStatus.ERRORS);
    }
    didSomething|=compiledSomething;
  }
  return didSomething;
}
