{
  final CompilerConfiguration compilerConfiguration=CompilerConfiguration.getInstance(myProject);
  for (  VirtualFile file : context.getCompileScope().getFiles(null,true)) {
    if (compiler.isCompilableFile(file,context)) {
      if (!forceCompile && compilerConfiguration.isExcludedFromCompilation(file)) {
        continue;
      }
      final String url=file.getUrl();
      if (forceCompile || file.getTimeStamp() != cache.getSourceTimestamp(url)) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("File is out-of-date: " + url + "; current timestamp = "+ file.getTimeStamp()+ "; stored timestamp = "+ cache.getSourceTimestamp(url));
        }
        toCompile.add(file);
      }
    }
  }
}
