{
  File[] children=directory.listFiles();
  if (children == null)   return;
  for (  File child : children) {
    String name=child.getName();
    if (child.isDirectory()) {
      if (recurse && SourceVersion.isIdentifier(name)) {
        collectFromDirectory(directory,fileKinds,recurse,result);
      }
    }
 else {
      if (isValidFile(name,fileKinds)) {
        JavaFileObject fe=getRegularFile(child);
        result.append(fe);
      }
    }
  }
}
