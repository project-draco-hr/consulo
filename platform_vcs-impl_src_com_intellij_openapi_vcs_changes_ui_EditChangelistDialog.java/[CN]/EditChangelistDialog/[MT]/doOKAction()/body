{
  String oldName=myList.getName();
  String oldComment=myList.getComment();
  if (!Comparing.equal(oldName,myPanel.getChangeListName()) && ChangeListManager.getInstance(myProject).findChangeList(myPanel.getChangeListName()) != null) {
    Messages.showErrorDialog(myPanel.getContent(),VcsBundle.message("changes.dialog.editchangelist.error.already.exists",myPanel.getChangeListName()),VcsBundle.message("changes.dialog.editchangelist.title"));
    return;
  }
  if (!Comparing.equal(oldName,myPanel.getChangeListName(),true) || !Comparing.equal(oldComment,myPanel.getDescription(),true)) {
    final ChangeListManager clManager=ChangeListManager.getInstance(myProject);
    final String newName=myPanel.getChangeListName();
    if (!myList.getName().equals(newName)) {
      clManager.editName(myList.getName(),newName);
    }
    final String newDescription=myPanel.getDescription();
    if (!myList.getComment().equals(newDescription)) {
      clManager.editComment(myList.getName(),newDescription);
    }
  }
  if (!myList.isDefault() && myPanel.getMakeActiveCheckBox().isSelected()) {
    ChangeListManager.getInstance(myProject).setDefaultChangeList(myList);
  }
  myPanel.changelistCreatedOrChanged(myList);
  super.doOKAction();
}
