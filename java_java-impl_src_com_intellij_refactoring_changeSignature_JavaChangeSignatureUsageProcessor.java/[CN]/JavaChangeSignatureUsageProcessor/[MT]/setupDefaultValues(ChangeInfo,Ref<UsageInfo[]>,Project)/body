{
  if (!(changeInfo instanceof JavaChangeInfo))   return;
  for (  UsageInfo usageInfo : refUsages.get()) {
    if (usageInfo instanceof MethodCallUsageInfo) {
      MethodCallUsageInfo methodCallUsageInfo=(MethodCallUsageInfo)usageInfo;
      if (methodCallUsageInfo.isToChangeArguments()) {
        final boolean needDefaultValue=needDefaultValue(changeInfo,RefactoringUtil.getEnclosingMethod(methodCallUsageInfo.getElement()));
        if (needDefaultValue) {
          final ParameterInfo[] parameters=changeInfo.getNewParameters();
          for (          ParameterInfo parameter : parameters) {
            final String defaultValue=parameter.getDefaultValue();
            if (defaultValue == null && parameter.getOldIndex() == -1) {
              ((ParameterInfoImpl)parameter).setDefaultValue("");
              if (!ApplicationManager.getApplication().isUnitTestMode()) {
                final DefaultValueChooser chooser=new DefaultValueChooser(project,parameter.getName());
                chooser.show();
                if (chooser.isOK()) {
                  if (chooser.feelLucky()) {
                    parameter.setUseAnySingleVariable(true);
                  }
 else {
                    ((ParameterInfoImpl)parameter).setDefaultValue(chooser.getDefaultValue());
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
