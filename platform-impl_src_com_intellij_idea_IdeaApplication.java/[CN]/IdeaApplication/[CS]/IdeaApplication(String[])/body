{
  LOG.assertTrue(ourInstance == null);
  ourInstance=this;
  myArgs=args;
  boolean isInternal=Boolean.valueOf(System.getProperty(IDEA_IS_INTERNAL_PROPERTY)).booleanValue();
  if (Main.isHeadless(args)) {
    System.setProperty("java.awt.headless",Boolean.TRUE.toString());
  }
  if (Main.isCommandLine(args)) {
    new CommandLineApplication(isInternal,false,Main.isHeadless(args),"componentSets/IdeaComponents");
  }
 else {
    System.setProperty("sun.awt.noerasebackground","true");
    final String platformPrefix=System.getProperty("idea.platform.prefix");
    @NonNls final String componentsDescriptor=platformPrefix != null ? "componentSets/" + platformPrefix + "Components" : "componentSets/IdeaComponents";
    ApplicationManagerEx.createApplication(componentsDescriptor,isInternal,false,false,false,"idea");
  }
  myStarter=getStarter();
  myStarter.premain(args);
}
