{
  ClassReferenceScanner referenceScanner=new ClassReferenceScanner(aClass){
    public PsiReference[] findReferences(){
      ArrayList<PsiReference> result=new ArrayList<PsiReference>();
      for (int j=0; j < usages.length; j++) {
        UsageInfo usage=usages[j];
        if (usage instanceof MoveRenameUsageInfo && ((MoveRenameUsageInfo)usage).referencedElement == aClass) {
          final PsiReference reference=((MoveRenameUsageInfo)usage).reference;
          if (reference != null) {
            result.add(reference);
          }
        }
      }
      return result.toArray(new PsiReference[result.size()]);
    }
  }
;
  referenceScanner.processReferences(new ClassInstanceScanner(aClass,instanceReferenceVisitor));
}
