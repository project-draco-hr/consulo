{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final Component component=e.getData(PlatformDataKeys.CONTEXT_COMPONENT);
  FeatureUsageTracker.getInstance().triggerFeatureUsed("navigation.popup.action");
  final GotoActionModel model=new GotoActionModel(project,component);
  final GotoActionCallback<Object> callback=new GotoActionCallback<Object>(){
    @Override public void elementChosen(    ChooseByNamePopup popup,    final Object element){
      if (element instanceof OptionDescription) {
        ShowSettingsUtilImpl.showSettingsDialog(project,((OptionDescription)element).getConfigurableId(),popup.getEnteredText());
      }
 else {
        final AnAction action=(AnAction)((Map.Entry)element).getKey();
        if (action != null) {
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            public void run(){
              if (component == null || !component.isShowing()) {
                return;
              }
              final Presentation presentation=(Presentation)action.getTemplatePresentation().clone();
              final DataContext context=DataManager.getInstance().getDataContext(component);
              final AnActionEvent event=new AnActionEvent(e.getInputEvent(),context,e.getPlace(),presentation,ActionManager.getInstance(),e.getModifiers());
              if (ActionUtil.lastUpdateAndCheckDumb(action,event,true)) {
                if (action instanceof ActionGroup) {
                  JBPopupFactory.getInstance().createActionGroupPopup(presentation.getText(),(ActionGroup)action,context,JBPopupFactory.ActionSelectionAid.SPEEDSEARCH,false).showInBestPositionFor(context);
                }
 else {
                  action.actionPerformed(event);
                }
              }
            }
          }
,ModalityState.NON_MODAL);
        }
      }
    }
  }
;
  Pair<String,Integer> start=getInitialText(false,e);
  showNavigationPopup(callback,null,ChooseByNamePopup.createPopup(project,model,new DefaultChooseByNameItemProvider(null){
    @Override protected void sortNamesList(    String namePattern,    List<String> namesList){
    }
  }
,start.first,false,start.second));
}
