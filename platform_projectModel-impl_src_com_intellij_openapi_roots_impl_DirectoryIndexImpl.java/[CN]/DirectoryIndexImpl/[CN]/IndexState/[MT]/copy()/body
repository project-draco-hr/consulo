{
  final IndexState copy=new IndexState();
  myExcludeRootsMap.forEachEntry(new TIntObjectProcedure<Set<String>>(){
    @Override public boolean execute(    int id,    Set<String> urls){
      copy.myExcludeRootsMap.put(id,new THashSet<String>(urls));
      return true;
    }
  }
);
  copy.myProjectExcludeRoots.addAll(myProjectExcludeRoots.toArray());
  myDirToInfoMap.forEachEntry(new TIntObjectProcedure<DirectoryInfo>(){
    @Override public boolean execute(    int id,    DirectoryInfo info){
      copy.myDirToInfoMap.put(id,info);
      return true;
    }
  }
);
  myPackageNameToDirsMap.forEachEntry(new TObjectIntProcedure<String>(){
    @Override public boolean execute(    String name,    int id){
      copy.myPackageNameToDirsMap.put(name,id);
      return true;
    }
  }
);
  copy.multiDirPackages.clear();
  copy.multiDirPackages.addAll(multiDirPackages);
  myDirToPackageName.forEachEntry(new TIntObjectProcedure<String>(){
    @Override public boolean execute(    int id,    String name){
      copy.myDirToPackageName.put(id,name);
      return true;
    }
  }
);
  return copy;
}
