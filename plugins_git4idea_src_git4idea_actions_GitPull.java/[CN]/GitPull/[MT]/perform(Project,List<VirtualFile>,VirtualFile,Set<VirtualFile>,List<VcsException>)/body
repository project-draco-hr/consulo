{
  GitPullDialog dialog=new GitPullDialog(project,gitRoots,defaultRoot);
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  Label beforeLabel=LocalHistory.getInstance().putSystemLabel(project,"Before update");
  GitLineHandler h=dialog.pullHandler();
  final VirtualFile root=dialog.gitRoot();
  affectedRoots.add(root);
  GitRevisionNumber currentRev=GitRevisionNumber.resolve(project,root,"HEAD");
  try {
    GitHandlerUtil.doSynchronously(h,GitBundle.message("pulling.title",dialog.getRemote()),h.printableCommandLine());
  }
  finally {
    exceptions.addAll(h.errors());
  }
  if (exceptions.size() != 0) {
    return;
  }
  GitMergeUtil.showUpdates(this,project,exceptions,root,currentRev,beforeLabel,getActionName(),ActionInfo.UPDATE);
}
