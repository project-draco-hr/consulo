{
  GitPullDialog dialog=new GitPullDialog(project,gitRoots,defaultRoot);
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  GitLineHandler h=dialog.pullHandler();
  final VirtualFile root=dialog.gitRoot();
  affectedRoots.add(root);
  GitRevisionNumber currentRev=GitRevisionNumber.resolve(project,root,"HEAD");
  try {
    GitHandlerUtil.doSynchronously(h,GitBundle.message("pulling.title",dialog.getRemote()),h.printCommandLine());
  }
  finally {
    exceptions.addAll(h.errors());
  }
  if (exceptions.size() != 0) {
    return;
  }
  final UpdatedFiles files=UpdatedFiles.create();
  MergeChangeCollector collector=new MergeChangeCollector(project,root,currentRev,files);
  collector.collect(exceptions);
  if (exceptions.size() != 0) {
    return;
  }
  ProjectLevelVcsManagerEx manager=(ProjectLevelVcsManagerEx)ProjectLevelVcsManager.getInstance(project);
  GitVcs vcs=GitVcs.getInstance(project);
  manager.showUpdateProjectInfo(files,getActionName(vcs),ActionInfo.UPDATE);
}
