{
  TextChunk[] text=getPresentation().getText();
  for (  TextChunk textChunk : text) {
    treeCellRenderer.append(textChunk.getText(),SimpleTextAttributes.fromTextAttributes(textChunk.getAttributes()));
  }
  PsiElement element=getElement();
  PsiMethod method;
  PsiClass aClass;
  while (true) {
    method=PsiTreeUtil.getParentOfType(element,PsiMethod.class);
    aClass=method == null ? PsiTreeUtil.getParentOfType(element,PsiClass.class) : method.getContainingClass();
    if (aClass instanceof PsiAnonymousClass) {
      element=aClass;
    }
 else {
      break;
    }
  }
  String location=method != null ? PsiFormatUtil.formatMethod(method,PsiSubstitutor.EMPTY,PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_PARAMETERS | PsiFormatUtil.SHOW_CONTAINING_CLASS,PsiFormatUtil.SHOW_TYPE,2) : aClass != null ? PsiFormatUtil.formatClass(aClass,PsiFormatUtil.SHOW_NAME) : null;
  if (location != null) {
    treeCellRenderer.append(" in " + location,SimpleTextAttributes.GRAY_ATTRIBUTES);
  }
}
