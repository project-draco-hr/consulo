{
  if (SystemInfo.isUnix && System.getProperty("jna.nosys") == null && System.getProperty("jna.nounpack") == null) {
    System.setProperty("jna.nosys","true");
    System.setProperty("jna.nounpack","false");
  }
  final int[] restartCode={Restarter.getRestartCode()};
  Runnable restart=new Runnable(){
    @Override public void run(){
      if (restartCode[0] == 0) {
        try {
          if (Restarter.restart())           restartCode[0]=1;
        }
 catch (        Throwable ignore) {
        }
      }
    }
  }
;
  if (installPatch(restart)) {
    if (restartCode[0] == 0) {
      try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
      }
 catch (      Throwable ignore) {
      }
      String msg="Patch has been applied successfully, please restart application.";
      JOptionPane.showMessageDialog(null,msg,"Update",JOptionPane.INFORMATION_MESSAGE);
    }
    System.exit(restartCode[0]);
    return;
  }
  isHeadless=isHeadless(args);
  if (isHeadless) {
    System.setProperty("java.awt.headless",Boolean.TRUE.toString());
  }
 else   if (GraphicsEnvironment.isHeadless()) {
    throw new HeadlessException("Unable to detect graphics environment");
  }
  Bootstrap.main(args,Main.class.getName() + "Impl","start");
}
