{
  if (SystemInfo.isUnix && System.getProperty("jna.nosys") == null && System.getProperty("jna.nounpack") == null) {
    System.setProperty("jna.nosys","true");
    System.setProperty("jna.nounpack","false");
  }
  Restarter.isSupported();
  if (installPatch()) {
    boolean restarted=false;
    int restartCode=0;
    try {
      restarted=Restarter.restart();
      restartCode=Restarter.getRestartCode();
    }
 catch (    Throwable e) {
      e.printStackTrace();
    }
    if (!restarted && restartCode == 0) {
      try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
      }
 catch (      Exception ignore) {
      }
      String msg="The application cannot start right away since some critical files have been changed.\nPlease restart it manually.";
      JOptionPane.showMessageDialog(null,msg,"Update",JOptionPane.INFORMATION_MESSAGE);
    }
    final int finalRestartCode=restartCode;
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        System.exit(finalRestartCode);
      }
    }
);
    return;
  }
  isHeadless=isHeadless(args);
  if (isHeadless) {
    System.setProperty("java.awt.headless",Boolean.TRUE.toString());
  }
 else   if (GraphicsEnvironment.isHeadless()) {
    throw new HeadlessException("Unable to detect graphics environment");
  }
  Bootstrap.main(args,Main.class.getName() + "Impl","start");
}
