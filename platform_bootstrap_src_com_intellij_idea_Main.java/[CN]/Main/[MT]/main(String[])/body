{
  if (installPatch()) {
    boolean restarted=false;
    try {
      restarted=Restarter.restart();
    }
 catch (    Restarter.CannotRestartException e) {
      e.printStackTrace();
    }
    final int restartCode=Restarter.getRestartCode();
    if (!restarted && restartCode == 0) {
      try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
      }
 catch (      Exception ignore) {
      }
      JOptionPane.showMessageDialog(null,"The application cannot start right away since some critical files have been changed.\n" + "Please restart it manually.","Update",JOptionPane.INFORMATION_MESSAGE);
    }
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        System.exit(restartCode);
      }
    }
);
    return;
  }
  isHeadless=isHeadless(args);
  if (isHeadless) {
    System.setProperty("java.awt.headless",Boolean.TRUE.toString());
  }
 else   if (GraphicsEnvironment.isHeadless()) {
    throw new HeadlessException("Unable to detect graphics environment");
  }
  Bootstrap.main(args,Main.class.getName() + "Impl","start");
}
