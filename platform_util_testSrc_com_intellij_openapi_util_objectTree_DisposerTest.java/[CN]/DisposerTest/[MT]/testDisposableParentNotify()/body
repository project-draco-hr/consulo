{
  MyParentDisposable root=new MyParentDisposable("root");
  Disposer.register(root,myFolder1);
  MyParentDisposable sub=new MyParentDisposable("subFolder");
  Disposer.register(myFolder1,sub);
  Disposer.register(sub,myLeaf1);
  Disposer.dispose(root);
  @NonNls ArrayList<String> expected=new ArrayList<String>();
  expected.add("beforeDispose: root");
  expected.add("beforeDispose: subFolder");
  expected.add("dispose: leaf1");
  expected.add("dispose: subFolder");
  expected.add("dispose: folder1");
  expected.add("dispose: root");
  assertEquals(toString(expected),toString(myDisposeActions));
}
