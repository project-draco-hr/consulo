{
  if (buffer == null || buffer.length < len) {
    buffer=new byte[len];
  }
  int length=in.read(buffer,0,len);
  for (int i=0; i < length; i++) {
    cbuf[off + i]=(char)(0xFF & buffer[i]);
  }
  return length;
}
