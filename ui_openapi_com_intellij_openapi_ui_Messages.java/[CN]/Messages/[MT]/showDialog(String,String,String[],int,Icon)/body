{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return ourTestImplementation.show(message);
  }
 else {
    if (ApplicationManager.getApplication().isUnitTestMode())     throw new RuntimeException(message);
    MessageDialog dialog=new MessageDialog(message,title,options,defaultOptionIndex,icon);
    dialog.show();
    return dialog.getExitCode();
  }
}
