{
  ArrayList<Object> list=new ArrayList<Object>();
  for (  WeakReference modalEntity : myModalEntities) {
    Object entity=modalEntity.get();
    if (entity == null)     continue;
    list.add(entity);
  }
  list.add(anEntity);
  return new ModalityStateEx(list.toArray());
}
