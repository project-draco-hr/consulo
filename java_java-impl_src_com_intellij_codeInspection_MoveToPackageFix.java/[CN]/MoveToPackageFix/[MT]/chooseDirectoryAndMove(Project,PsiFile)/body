{
  try {
    PsiDirectory directory=MoveClassesOrPackagesUtil.chooseDestinationPackage(project,myTargetPackage,myFile.getContainingDirectory());
    if (directory == null) {
      return;
    }
    String error=RefactoringMessageUtil.checkCanCreateFile(directory,myFile.getName());
    if (error != null) {
      Messages.showMessageDialog(project,error,CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      return;
    }
    new MoveClassesOrPackagesProcessor(project,((PsiJavaFile)myFile).getClasses(),new SingleSourceRootMoveDestination(PackageWrapper.create(JavaDirectoryService.getInstance().getPackage(directory)),directory),false,false,null).run();
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
