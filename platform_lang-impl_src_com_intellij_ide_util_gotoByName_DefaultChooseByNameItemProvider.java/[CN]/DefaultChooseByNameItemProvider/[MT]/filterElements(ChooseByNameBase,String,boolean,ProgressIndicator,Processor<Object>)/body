{
  String namePattern=getNamePattern(base,pattern);
  String qualifierPattern=getQualifierPattern(base,pattern);
  ChooseByNameModel model=base.getModel();
  boolean empty=namePattern.isEmpty() || namePattern.equals("@") && model instanceof GotoClassModel2;
  if (empty && !base.canShowListForEmptyPattern())   return true;
  Set<String> names=new THashSet<String>(Arrays.asList(base.getNames(everywhere)));
  if (base.isSearchInAnyPlace() && !namePattern.trim().isEmpty()) {
    String middleMatchPattern="*" + namePattern + (namePattern.endsWith(" ") ? "" : "*");
    Integer elementsConsumed=consumeElements(base,everywhere,indicator,consumer,namePattern,qualifierPattern,names,NameUtil.MatchingCaseSensitivity.ALL,false);
    if (elementsConsumed == null)     return false;
    if (elementsConsumed == 0) {
      elementsConsumed=consumeElements(base,everywhere,indicator,consumer,namePattern,qualifierPattern,names,NameUtil.MatchingCaseSensitivity.NONE,false);
      if (elementsConsumed == null)       return false;
    }
    elementsConsumed=consumeElements(base,everywhere,indicator,consumer,middleMatchPattern,qualifierPattern,names,NameUtil.MatchingCaseSensitivity.NONE,elementsConsumed > 0);
    return elementsConsumed != null;
  }
 else {
    Integer elementsConsumed=consumeElements(base,everywhere,indicator,consumer,namePattern,qualifierPattern,names,NameUtil.MatchingCaseSensitivity.NONE,false);
    return elementsConsumed != null;
  }
}
