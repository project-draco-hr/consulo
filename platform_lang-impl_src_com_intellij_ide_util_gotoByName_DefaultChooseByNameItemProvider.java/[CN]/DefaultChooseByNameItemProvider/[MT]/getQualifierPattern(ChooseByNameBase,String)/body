{
  pattern=base.transformPattern(pattern);
  final String[] separators=base.getModel().getSeparators();
  int lastSeparatorOccurrence=0;
  for (  String separator : separators) {
    int idx=pattern.lastIndexOf(separator);
    if (idx == pattern.length() - 1) {
      idx=pattern.lastIndexOf(separator,idx - 1);
    }
    lastSeparatorOccurrence=Math.max(lastSeparatorOccurrence,idx);
  }
  return pattern.substring(0,lastSeparatorOccurrence);
}
