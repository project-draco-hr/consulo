{
  VirtualFile[] roots=ProjectRootManager.getInstance(myProject).getContentSourceRoots();
  if (roots.length == 0)   return null;
  String packageName=getPackageName();
  PackageWrapper targetPackage=new PackageWrapper(PsiManager.getInstance(myProject),packageName);
  VirtualFile selectedRoot;
  if (roots.length == 1) {
    selectedRoot=roots[0];
  }
 else {
    PsiDirectory defaultDir=chooseDefaultDirectory(packageName);
    selectedRoot=MoveClassesOrPackagesUtil.chooseSourceRoot(targetPackage,roots,defaultDir);
    if (selectedRoot == null)     return null;
  }
  return RefactoringUtil.createPackageDirectoryInSourceRoot(targetPackage,selectedRoot);
}
