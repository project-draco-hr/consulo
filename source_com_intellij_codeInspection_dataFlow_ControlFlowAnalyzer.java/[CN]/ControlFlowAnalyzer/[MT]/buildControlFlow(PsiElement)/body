{
  if (codeFragment == null)   return null;
  myRuntimeException=PsiType.getJavaLangRuntimeException(codeFragment.getManager(),codeFragment.getResolveScope());
  myFields=new HashSet<DfaVariableValue>();
  myCatchStack=new Stack<CatchDescriptor>();
  myPassNumber=1;
  myPass1Flow=new ControlFlow();
  myCurrentFlow=myPass1Flow;
  try {
    codeFragment.accept(this);
  }
 catch (  CantAnalyzeException e) {
    return null;
  }
  myPassNumber=2;
  myPass2Flow=new ControlFlow();
  myCurrentFlow=myPass2Flow;
  codeFragment.accept(this);
  myPass2Flow.setFields(myFields.toArray(new DfaVariableValue[myFields.size()]));
  return myPass2Flow;
}
