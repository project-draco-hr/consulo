{
  startElement(statement);
  PsiCodeBlock finallyBlock=statement.getFinallyBlock();
  if (finallyBlock != null) {
    myCatchStack.push(new CatchDescriptor(finallyBlock));
  }
  int catchesPushCount=0;
  PsiCatchSection[] sections=statement.getCatchSections();
  for (int i=0; i < sections.length; i++) {
    PsiCodeBlock catchBlock=sections[i].getCatchBlock();
    PsiParameter parameter=sections[i].getParameter();
    if (parameter != null && catchBlock != null && parameter.getType() instanceof PsiClassType && !ExceptionUtil.isUncheckedException((PsiClassType)parameter.getType())) {
      myCatchStack.push(new CatchDescriptor(parameter,catchBlock));
      catchesPushCount++;
    }
 else {
      throw new CantAnalyzeException();
    }
  }
  int endOffset=finallyBlock == null ? getEndOffset(statement) : getStartOffset(finallyBlock) - 2;
  PsiCodeBlock tryBlock=statement.getTryBlock();
  if (tryBlock != null) {
    tryBlock.accept(this);
  }
  for (int i=0; i < catchesPushCount; i++)   myCatchStack.pop();
  addInstruction(new GotoInstruction(endOffset));
  for (int i=0; i < sections.length; i++) {
    sections[i].accept(this);
    addInstruction(new GotoInstruction(endOffset));
  }
  if (finallyBlock != null) {
    myCatchStack.pop();
    addInstruction(new GosubInstruction(getStartOffset(finallyBlock)));
    addInstruction(new GotoInstruction(getEndOffset(statement)));
    finallyBlock.accept(this);
    addInstruction(new ReturnFromSubInstruction());
  }
  finishElement(statement);
}
