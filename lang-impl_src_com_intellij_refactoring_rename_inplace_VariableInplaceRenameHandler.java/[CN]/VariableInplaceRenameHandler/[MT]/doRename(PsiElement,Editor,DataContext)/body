{
  if (!isAvailableOnDataContext(dataContext)) {
    LOG.error("Recursive invokation");
    RenameHandlerRegistry.getInstance().getRenameHandler(dataContext).invoke(elementToRename.getProject(),editor,elementToRename.getContainingFile(),dataContext);
    return;
  }
  final boolean startedRename=new VariableInplaceRenamer((PsiNameIdentifierOwner)elementToRename,editor).performInplaceRename();
  if (!startedRename) {
    try {
      ourPreventInlineRenameFlag.set(Boolean.TRUE);
      RenameHandlerRegistry.getInstance().getRenameHandler(dataContext).invoke(elementToRename.getProject(),editor,elementToRename.getContainingFile(),dataContext);
    }
  finally {
      ourPreventInlineRenameFlag.set(null);
    }
  }
}
