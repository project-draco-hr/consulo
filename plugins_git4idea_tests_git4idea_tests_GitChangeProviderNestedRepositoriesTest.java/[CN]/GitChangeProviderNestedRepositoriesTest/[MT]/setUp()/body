{
  final File repoRoot=myRepo.getRootDir();
  myChildRepoDir=new File(repoRoot,"child");
  myChildRepoDir.mkdir();
  myChildRepo=GitTestRepository.init(myChildRepoDir);
  myChildRepo.setName(MAIN_USER_NAME,MAIN_USER_EMAIL);
  LocalFileSystem.getInstance().refreshAndFindFileByIoFile(myChildRepo.getRootDir());
  myChildRepo.refresh();
  myChildFiles=GitTestUtil.createFileStructure(myProject,myChildRepo,"in1.txt","in2.txt","dirr/inin1.txt","dirr/inin2.txt");
  myChildRepo.addCommit();
  myChildRepo.refresh();
  myVcsManager=ProjectLevelVcsManager.getInstance(myProject);
  myVcsManager.setDirectoryMappings(Arrays.asList(new VcsDirectoryMapping(myRepo.getRootDir().getPath(),GitVcs.getKey().getName()),new VcsDirectoryMapping(myChildRepo.getRootDir().getPath(),GitVcs.getKey().getName())));
  myChangeListManager=ChangeListManager.getInstance(myProject);
  myDirtyScopeManager=VcsDirtyScopeManager.getInstance(myProject);
}
