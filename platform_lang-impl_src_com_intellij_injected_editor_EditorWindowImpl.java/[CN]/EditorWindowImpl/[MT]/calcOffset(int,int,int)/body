{
  if (myDocumentWindow.getTextLength() == 0)   return 0;
  int end=myDocumentWindow.getLineEndOffset(lineNumber);
  int x=getDocument().getLineNumber(lineStartOffset) == 0 ? getPrefixTextWidthInPixels() : 0;
  if (col <= 0) {
    return lineStartOffset;
  }
  int result=EditorUtil.calcSoftWrapUnawareOffset(this,myDocumentWindow.getCharsSequence(),lineStartOffset,end,col,EditorUtil.getTabSize(myDelegate),x,new int[]{0},null);
  if (result >= 0) {
    return result;
  }
  return end;
}
