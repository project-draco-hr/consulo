{
  try {
    int myStartLine=event.translateLineViaDiffStrict(linesCols.myStartLine);
    Document document=event.getDocument();
    if (myStartLine < 0 || myStartLine >= document.getLineCount()) {
      return null;
    }
    int start=document.getLineStartOffset(myStartLine) + linesCols.myStartColumn;
    if (start >= document.getTextLength())     return null;
    int myEndLine=event.translateLineViaDiffStrict(linesCols.myEndLine);
    if (myEndLine < 0 || myEndLine >= document.getLineCount()) {
      return null;
    }
    int end=document.getLineStartOffset(myEndLine) + linesCols.myEndColumn;
    if (end > document.getTextLength() || end < start)     return null;
    if (end > event.getDocument().getTextLength() || myEndLine < myStartLine || myStartLine == myEndLine && linesCols.myEndColumn < linesCols.myStartColumn || event.getDocument().getLineCount() < myEndLine) {
      return null;
    }
    return Pair.create(new TextRange(start,end),new LinesCols(myStartLine,linesCols.myStartColumn,myEndLine,linesCols.myEndColumn));
  }
 catch (  FilesTooBigForDiffException e) {
    return null;
  }
}
