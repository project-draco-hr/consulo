{
  try {
    final ComponentStoreImpl.SaveSessionImpl session=createSaveSession();
    try {
      session.commit();
    }
 catch (    Throwable e) {
      PluginId pluginId=IdeErrorsDialog.findPluginId(e);
      if (pluginId != null) {
        throw new PluginException(e,pluginId);
      }
      session.reset();
      LOG.info(e);
      IOException ioException=new IOException(e.getMessage());
      ioException.initCause(e);
      throw ioException;
    }
    mySession=session;
    return mySession;
  }
 catch (  StateStorage.StateStorageException e) {
    LOG.info(e);
    throw new IOException(e.getMessage());
  }
}
