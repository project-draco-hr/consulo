{
  getLogger().assertTrue(newFilePaths.length == newFileDocuments.length);
  ArrayList<String> writtenFilesPaths=new ArrayList<String>();
  for (  String newFilePath : newFilePaths) {
    File file=new File(newFilePath);
    if (file.exists() && !file.canWrite()) {
      throw new IOException("File \"" + newFilePath + "\" is not writeable");
    }
  }
  for (  File file : oldFiles) {
    if (file.exists() && !file.canWrite()) {
      throw new IOException("File \"" + file.getAbsolutePath() + "\" is not writeable");
    }
  }
  for (int i=0; i < newFilePaths.length; i++) {
    String newFilePath=newFilePaths[i];
    writeDocument(newFileDocuments[i],newFilePath,lineSeparator);
    writtenFilesPaths.add(newFilePath);
  }
  outer:   for (  File oldFile : oldFiles) {
    String oldFilePath=oldFile.getAbsolutePath();
    for (    final String writtenFilesPath : writtenFilesPaths) {
      if (oldFilePath.equals(writtenFilesPath)) {
        continue outer;
      }
    }
    boolean result=oldFile.delete();
    if (!result) {
      throw new IOException("File \"" + oldFilePath + "\" was not deleted");
    }
  }
}
