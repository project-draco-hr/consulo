{
  if (d1.hasRootElement() != d2.hasRootElement())   return false;
  if (!d1.hasRootElement())   return true;
  CharArrayWriter w1=new CharArrayWriter();
  CharArrayWriter w2=new CharArrayWriter();
  try {
    writeDocument(d1,w1,"\n");
    writeDocument(d2,w2,"\n");
  }
 catch (  IOException e) {
    getLogger().error(e);
  }
  return w1.size() == w2.size() && w1.toString().equals(w2.toString());
}
