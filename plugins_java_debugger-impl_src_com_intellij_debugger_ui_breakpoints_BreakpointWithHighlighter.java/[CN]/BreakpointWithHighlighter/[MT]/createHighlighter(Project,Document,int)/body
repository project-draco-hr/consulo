{
  if (lineIndex < 0 || lineIndex >= document.getLineCount()) {
    return null;
  }
  EditorColorsScheme scheme=EditorColorsManager.getInstance().getGlobalScheme();
  TextAttributes attributes=scheme.getAttributes(DebuggerColors.BREAKPOINT_ATTRIBUTES);
  RangeHighlighter highlighter=((MarkupModelEx)DocumentMarkupModel.forDocument(document,project,true)).addPersistentLineHighlighter(lineIndex,DebuggerColors.BREAKPOINT_HIGHLIGHTER_LAYER,attributes);
  if (!highlighter.isValid()) {
    return null;
  }
  highlighter.putUserData(DebuggerColors.BREAKPOINT_HIGHLIGHTER_KEY,Boolean.TRUE);
  highlighter.setErrorStripeTooltip(DebuggerBundle.message("breakpoint.tooltip.text",lineIndex + 1));
  return highlighter;
}
