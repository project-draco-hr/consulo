{
  if (strict) {
    return myFile2ConfigurationCache.containsKey(file) ? file : null;
  }
  VirtualFile candidate=null;
  for (  VirtualFile colored : myFile2ConfigurationCache.keySet()) {
    if (colored.isValid()) {
      if (VfsUtil.isAncestor(colored,file,false)) {
        if (candidate == null) {
          candidate=colored;
        }
 else {
          candidate=VfsUtil.isAncestor(candidate,colored,false) ? colored : candidate;
        }
      }
    }
  }
  return candidate;
}
