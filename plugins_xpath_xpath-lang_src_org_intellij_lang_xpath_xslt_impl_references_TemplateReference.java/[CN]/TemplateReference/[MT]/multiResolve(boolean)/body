{
  final PsiElement element=resolve();
  if (element != null) {
    return new ResolveResult[]{new PsiElementResolveResult(element)};
  }
  final XmlFile xmlFile=(XmlFile)getElement().getContainingFile();
  if (xmlFile != null) {
    final List<PsiElementResolveResult> targets=new SmartList<PsiElementResolveResult>();
    XsltIncludeIndex.processBackwardDependencies(xmlFile,new Processor<XmlFile>(){
      public boolean process(      XmlFile xmlFile){
        final PsiElement e=ResolveUtil.resolve(new NamedTemplateMatcher(xmlFile.getDocument(),myName));
        if (e != null) {
          targets.add(new PsiElementResolveResult(e));
        }
        return true;
      }
    }
);
    return targets.toArray(new ResolveResult[targets.size()]);
  }
 else {
    return ResolveResult.EMPTY_ARRAY;
  }
}
