{
  List<Object> newMembersList=new ArrayList<Object>();
  boolean before=true;
  CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(aClass.getProject());
  for (int i=0; i < memberPrototypes.length; i++) {
    if (memberPrototypes[i] instanceof PsiElement) {
      PsiElement prototype=(PsiElement)memberPrototypes[i];
      PsiElement newMember=insert(aClass,prototype,anchor,before);
      newMember=codeStyleManager.shortenClassReferences(newMember);
      newMembersList.add(newMember);
      anchor=newMember;
      before=false;
    }
 else     if (memberPrototypes[i] instanceof TemplateGenerationInfo) {
      TemplateGenerationInfo info=(TemplateGenerationInfo)memberPrototypes[i];
      info.element=insert(aClass,info.element,anchor,before);
      newMembersList.add(info);
      anchor=info.element;
      before=false;
    }
  }
  return newMembersList.toArray();
}
