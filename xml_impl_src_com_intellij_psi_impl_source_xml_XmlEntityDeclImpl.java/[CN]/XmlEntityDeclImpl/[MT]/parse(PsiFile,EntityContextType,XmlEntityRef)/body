{
  PsiElement dep=XmlElement.DEPENDING_ELEMENT.get(getParent());
  PsiElement dependsOnElement=getValueElement(dep instanceof PsiFile ? (PsiFile)dep : baseFile);
  String value=null;
  if (dependsOnElement instanceof XmlAttributeValue) {
    XmlAttributeValue attributeValue=(XmlAttributeValue)dependsOnElement;
    value=attributeValue.getValue();
  }
 else   if (dependsOnElement instanceof PsiFile) {
    PsiFile file=(PsiFile)dependsOnElement;
    value=file.getText();
  }
  if (value == null)   return null;
  Set<String> names=null;
  if (context == EntityContextType.GENERIC_XML) {
    names=new HashSet<String>();
    PsiElement parent=originalElement;
    while (parent != null) {
      if (parent instanceof XmlTag) {
        names.add(((XmlTag)parent).getName());
      }
      parent=parent.getParent();
    }
  }
  OldXmlParser oldXmlParser=new OldXmlParser(value,XML_ELEMENT_DECL,context,SharedImplUtil.findCharTableByTree(this),getManager(),names,originalElement);
  PsiElement generated=oldXmlParser.parse().getPsi().getFirstChild();
  if (context == EntityContextType.ELEMENT_CONTENT_SPEC) {
    generated=generated.getFirstChild();
  }
  setDependsOnElement(generated,dependsOnElement);
  return setOriginalElement(generated,originalElement);
}
