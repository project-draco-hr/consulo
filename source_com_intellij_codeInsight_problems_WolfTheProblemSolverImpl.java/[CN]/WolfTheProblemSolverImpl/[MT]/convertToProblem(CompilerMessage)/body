{
  VirtualFile virtualFile=message.getVirtualFile();
  if (virtualFile == null) {
    Navigatable navigatable=message.getNavigatable();
    if (navigatable instanceof OpenFileDescriptor) {
      virtualFile=((OpenFileDescriptor)navigatable).getFile();
    }
  }
  if (virtualFile == null)   return null;
  HighlightInfo info=ApplicationManager.getApplication().runReadAction(new Computable<HighlightInfo>(){
    public HighlightInfo compute(){
      return HighlightInfo.createHighlightInfo(convertToHighlightInfoType(message),getTextRange(message),message.getMessage());
    }
  }
);
  return new ProblemImpl(virtualFile,info);
}
