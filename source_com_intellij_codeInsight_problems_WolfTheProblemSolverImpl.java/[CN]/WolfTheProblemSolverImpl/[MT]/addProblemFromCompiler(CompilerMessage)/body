{
  if (message.getCategory() != CompilerMessageCategory.ERROR)   return;
  VirtualFile virtualFile=message.getVirtualFile();
  if (virtualFile == null) {
    Navigatable navigatable=message.getNavigatable();
    if (navigatable instanceof OpenFileDescriptor) {
      virtualFile=((OpenFileDescriptor)navigatable).getFile();
    }
  }
  LOG.assertTrue(virtualFile != null);
  HighlightInfo info=HighlightInfo.createHighlightInfo(convertToHighlightInfoType(message),getTextRange(message),message.getMessage());
  addProblem(new Problem(virtualFile,info));
}
