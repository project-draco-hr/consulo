{
  if (1 == 1)   return;
  myUpdateProblemsAlarm.addRequest(new Runnable(){
    public void run(){
      for (      VirtualFile file : myBackedProblems.keySet()) {
        Collection<Problem> problems=myBackedProblems.get(file);
        for (        Problem problem : problems) {
          if (!isProblemInScope(problem,myCompileScope)) {
            addProblem(problem);
          }
        }
      }
      Set<VirtualFile> added=new THashSet<VirtualFile>();
      added.addAll(myProblems.keySet());
      added.removeAll(myBackedProblems.keySet());
      Set<VirtualFile> removed=new THashSet<VirtualFile>();
      removed.addAll(myBackedProblems.keySet());
      removed.removeAll(myProblems.keySet());
      new ProblemsUpdater(myProject).updateProblems(added,removed);
      myBackedProblems=null;
      myCompileScope=null;
    }
  }
,0);
}
