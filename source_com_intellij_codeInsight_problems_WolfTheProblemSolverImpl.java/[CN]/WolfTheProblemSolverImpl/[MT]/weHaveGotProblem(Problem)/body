{
  VirtualFile virtualFile=problem == null ? null : problem.getVirtualFile();
  if (virtualFile == null || !ProjectRootManager.getInstance(myProject).getFileIndex().isJavaSourceFile(virtualFile))   return;
synchronized (myProblems) {
    Collection<Problem> storedProblems=myProblems.get(virtualFile);
    if (storedProblems == null) {
      storedProblems=new SmartList<Problem>();
      myProblems.put(virtualFile,storedProblems);
      fireProblemListeners.problemsChanged(Collections.singletonList(virtualFile),Collections.<VirtualFile>emptyList());
    }
    storedProblems.add(problem);
    myCheckingQueue.addIfAbsent(virtualFile);
  }
}
