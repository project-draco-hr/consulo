{
  final PsiCodeBlock body=statement.getBody();
  if (body == null) {
    return;
  }
  final Set<PsiLocalVariable> variablesInPreviousBranches=new HashSet<PsiLocalVariable>(5);
  final Set<PsiLocalVariable> variablesInCurrentBranch=new HashSet<PsiLocalVariable>(5);
  final PsiStatement[] statements=body.getStatements();
  final LocalVariableAccessVisitor visitor=new LocalVariableAccessVisitor(variablesInPreviousBranches);
  for (  final PsiStatement child : statements) {
    if (child instanceof PsiDeclarationStatement) {
      final PsiDeclarationStatement declarationStatement=(PsiDeclarationStatement)child;
      final PsiElement[] declaredElements=declarationStatement.getDeclaredElements();
      for (      final PsiElement declaredElement : declaredElements) {
        if (declaredElement instanceof PsiLocalVariable) {
          final PsiLocalVariable localVariable=(PsiLocalVariable)declaredElement;
          variablesInCurrentBranch.add(localVariable);
        }
      }
    }
 else     if (child instanceof PsiBreakStatement) {
      variablesInPreviousBranches.addAll(variablesInCurrentBranch);
      variablesInCurrentBranch.clear();
    }
    child.accept(visitor);
  }
}
