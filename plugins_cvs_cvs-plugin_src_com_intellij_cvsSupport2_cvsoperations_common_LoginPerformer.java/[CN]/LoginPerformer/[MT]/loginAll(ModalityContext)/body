{
  for (  T root : myRoots) {
    final Project project=getProject(root);
    final CvsLoginWorker worker=root.getLoginWorker(executor,project);
    final Ref<Boolean> promptResult=new Ref<Boolean>();
    final Runnable prompt=new Runnable(){
      public void run(){
        promptResult.set(worker.promptForPassword());
      }
    }
;
    while (true) {
      final ThreeState state=worker.silentLogin(myForceCheck);
      if (ThreeState.YES.equals(state))       break;
      if (ThreeState.NO.equals(state))       return false;
      executor.runInDispatchThread(prompt,project);
      if (!Boolean.TRUE.equals(promptResult.get())) {
        worker.goOffline();
        myExceptionConsumer.consume(new CvsException("Authentication canceled",root.getCvsRootAsString()));
        return false;
      }
      myForceCheck=true;
    }
  }
  return true;
}
