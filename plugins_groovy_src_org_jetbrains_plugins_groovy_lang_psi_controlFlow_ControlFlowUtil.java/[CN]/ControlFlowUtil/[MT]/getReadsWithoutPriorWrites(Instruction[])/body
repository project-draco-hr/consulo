{
  List<Instruction> result=new ArrayList<Instruction>();
  Set<String> written=new HashSet<String>();
  boolean[] visited=new boolean[flow.length];
  for (int i=0; i < visited.length; i++)   visited[i]=false;
  CallEnvironment env=new CallEnvironment.DepthFirstCallEnvironment();
  for (int i=0; i < flow.length; i++) {
    if (!visited[i]) {
      doVisitForReadsBeforeWrites(flow[i],flow,env,written,result,visited);
    }
  }
  return result.toArray(new Instruction[result.size()]);
}
