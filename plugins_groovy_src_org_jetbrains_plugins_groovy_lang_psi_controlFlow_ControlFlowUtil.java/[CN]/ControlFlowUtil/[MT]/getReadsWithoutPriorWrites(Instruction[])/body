{
  List<ReadWriteVariableInstruction> result=new ArrayList<ReadWriteVariableInstruction>();
  TObjectIntHashMap<String> namesIndex=buildNamesIndex(flow);
  ArrayList<TIntHashSet> definitelyAssigned=new ArrayList<TIntHashSet>();
  for (int i=0; i < flow.length; i++)   definitelyAssigned.add(null);
  CallEnvironment env=new CallEnvironment.DepthFirstCallEnvironment();
  int[] postorder=postorder(flow);
  findReadsBeforeWrites(flow,definitelyAssigned,result,env,namesIndex,postorder);
  return result.toArray(new ReadWriteVariableInstruction[result.size()]);
}
