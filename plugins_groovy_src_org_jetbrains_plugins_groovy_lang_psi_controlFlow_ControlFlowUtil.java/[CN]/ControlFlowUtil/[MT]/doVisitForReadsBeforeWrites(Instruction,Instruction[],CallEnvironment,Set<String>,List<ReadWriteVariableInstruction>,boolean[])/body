{
  visited[curr.num()]=true;
  if (curr instanceof ReadWriteVariableInstruction) {
    ReadWriteVariableInstruction readWriteInsn=(ReadWriteVariableInstruction)curr;
    String name=readWriteInsn.getVariableName();
    if (!readWriteInsn.isWrite() && !written.contains(name)) {
      result.add(readWriteInsn);
    }
    written.add(name);
  }
  for (  Instruction succ : curr.succ(env)) {
    if (!visited[succ.num()]) {
      doVisitForReadsBeforeWrites(succ,flow,env,written,result,visited);
    }
  }
}
