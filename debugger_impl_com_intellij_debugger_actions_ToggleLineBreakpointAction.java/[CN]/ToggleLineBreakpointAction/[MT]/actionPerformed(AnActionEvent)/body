{
  final Project project=e.getData(DataKeys.PROJECT);
  if (project == null) {
    return;
  }
  PlaceInDocument place=getPlace(e);
  if (place == null) {
    return;
  }
  DebuggerManagerEx debugManager=DebuggerManagerEx.getInstanceEx(project);
  if (debugManager == null) {
    return;
  }
  BreakpointManager manager=debugManager.getBreakpointManager();
  final Breakpoint breakpoint=manager.findBreakpoint(place.getDocument(),place.getOffset(),LineBreakpoint.CATEGORY);
  if (breakpoint == null) {
    int line=place.getDocument().getLineNumber(place.getOffset());
    LineBreakpoint lineBreakpoint=manager.addLineBreakpoint(place.getDocument(),line);
    if (lineBreakpoint != null) {
      RequestManagerImpl.createRequests(lineBreakpoint);
    }
  }
 else {
    manager.removeBreakpoint(breakpoint);
  }
}
