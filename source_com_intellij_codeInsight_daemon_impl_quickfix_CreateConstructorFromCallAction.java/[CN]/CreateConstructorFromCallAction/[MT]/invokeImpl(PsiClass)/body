{
  final PsiManager psiManager=myConstructorCall.getManager();
  final Project project=psiManager.getProject();
  final PsiElementFactory elementFactory=psiManager.getElementFactory();
  try {
    PsiMethod constructor=elementFactory.createConstructor();
    constructor=(PsiMethod)targetClass.add(constructor);
    TemplateBuilder templateBuilder=new TemplateBuilder(constructor);
    CreateFromUsageUtils.setupMethodParameters(constructor,templateBuilder,myConstructorCall.getArgumentList(),getTargetSubstitutor(myConstructorCall));
    CreateClassFromNewAction.setupSuperCall(targetClass,constructor,templateBuilder);
    getReferenceElement(myConstructorCall).bindToElement(targetClass);
    final Template template=templateBuilder.buildTemplate();
    final Editor editor=positionCursor(project,targetClass.getContainingFile(),targetClass);
    final TextRange textRange=constructor.getTextRange();
    editor.getDocument().deleteString(textRange.getStartOffset(),textRange.getEndOffset());
    editor.getCaretModel().moveToOffset(textRange.getStartOffset());
    startTemplate(editor,template,project);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
