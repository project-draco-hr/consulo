{
  super.paintComponent(g);
  final Graphics2D g2d=(Graphics2D)g;
  Point pointTarget=SwingUtilities.convertPoint(myLayeredPane,myBalloon.myTargetPoint,this);
  Rectangle shapeBounds=myContent.getBounds();
  final int shadowSize=myBalloon.getShadowBorderSize();
  if (shadowSize > 0) {
    if (myShadow == null) {
      initComponentImage(pointTarget,shapeBounds);
      myShadow=ShadowBorderPainter.createShadow(myImage,0,0,false,shadowSize / 2);
    }
  }
  if (myImage == null && myAlpha != -1) {
    initComponentImage(pointTarget,shapeBounds);
  }
  if (myImage != null && myAlpha != -1) {
    g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,myAlpha));
    g2d.drawImage(myImage,0,0,null);
  }
 else {
    if (myShadow != null) {
      g.drawImage(myShadow.getImage(),myShadow.getX(),myShadow.getY(),null);
    }
    myBalloon.myPosition.paintComponent(myBalloon,shapeBounds,(Graphics2D)g,pointTarget,this);
  }
}
