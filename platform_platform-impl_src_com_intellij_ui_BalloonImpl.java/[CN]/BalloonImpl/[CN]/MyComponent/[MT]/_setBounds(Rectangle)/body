{
  Rectangle currentBounds=getBounds();
  if (currentBounds.width != bounds.width || currentBounds.height != bounds.height) {
    invalidateShadowImage();
  }
  super.setBounds(bounds);
  if (myCloseRec.getParent() == null && getParent() != null) {
    myLayeredPane.add(myCloseRec);
    myLayeredPane.setLayer(myCloseRec,JLayeredPane.DRAG_LAYER);
  }
  if (isVisible() && myCloseRec.isVisible()) {
    Rectangle lpBounds=SwingUtilities.convertRectangle(getParent(),bounds,myLayeredPane);
    lpBounds=myPosition.getPointlessContentRec(lpBounds,myBalloon.getPointerLength(myPosition));
    int iconWidth=AllIcons.General.BalloonClose.getIconWidth();
    int iconHeight=AllIcons.General.BalloonClose.getIconHeight();
    Rectangle r=new Rectangle(lpBounds.x + lpBounds.width - iconWidth + (int)(iconWidth * 0.3),lpBounds.y - (int)(iconHeight * 0.3),iconWidth,iconHeight);
    r.y+=getShadowBorderSize();
    r.x-=getShadowBorderSize();
    myCloseRec.setBounds(r);
  }
  if (isVisible()) {
    revalidate();
    repaint();
  }
}
