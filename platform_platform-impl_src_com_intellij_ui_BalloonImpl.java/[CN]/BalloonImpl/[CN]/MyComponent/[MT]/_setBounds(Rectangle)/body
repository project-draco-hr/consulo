{
  Rectangle currentBounds=getBounds();
  if (currentBounds.width != bounds.width || currentBounds.height != bounds.height) {
    invalidateShadowImage();
  }
  super.setBounds(bounds);
  if (getParent() != null) {
    if (myActionButtons == null) {
      myActionButtons=myActionProvider.createActions();
    }
    for (    ActionButton button : myActionButtons) {
      if (button.getParent() == null) {
        myLayeredPane.add(button);
        myLayeredPane.setLayer(button,JLayeredPane.DRAG_LAYER);
      }
    }
  }
  if (isVisible()) {
    Rectangle lpBounds=SwingUtilities.convertRectangle(getParent(),bounds,myLayeredPane);
    lpBounds=myPosition.getPointlessContentRec(lpBounds,myBalloon.myShadowBorderProvider == null ? myBalloon.getPointerLength(myPosition) : 0);
    myActionProvider.layout(lpBounds);
  }
  if (isVisible()) {
    revalidate();
    repaint();
  }
}
