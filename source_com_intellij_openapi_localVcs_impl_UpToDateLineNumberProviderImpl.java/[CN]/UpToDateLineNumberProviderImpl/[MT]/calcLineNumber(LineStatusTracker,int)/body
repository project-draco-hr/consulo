{
  if (tracker == null)   return -1;
  List ranges=tracker.getRanges();
  int result=currentNumber;
  for (Iterator each=ranges.iterator(); each.hasNext(); ) {
    Range range=(Range)each.next();
    int startOffset=range.getOffset1();
    int endOffset=range.getOffset2();
    if ((startOffset <= currentNumber) && (endOffset > currentNumber)) {
      return ABSENT_LINE_NUMBER;
    }
    if (endOffset > currentNumber)     return result;
    int currentRangeLength=endOffset - startOffset;
    result+=range.getUpToDateRangeLength() - currentRangeLength;
  }
  return result;
}
