{
  List<CompactCommit> compactedHashes=ContainerUtil.map(commits,new Function<TimedVcsCommit,CompactCommit>(){
    @Override public CompactCommit fun(    final TimedVcsCommit commit){
      return commit instanceof CompactCommit ? (CompactCommit)commit : new CompactCommit(commit);
    }
  }
);
  myHashMap.flush();
  return compactedHashes;
}
