{
  runInBackground(new ThrowableConsumer<ProgressIndicator,VcsException>(){
    @Override public void consume(    ProgressIndicator indicator) throws VcsException {
      Consumer<DataPack> success=new Consumer<DataPack>(){
        @Override public void consume(        DataPack dataPack){
          onSuccess.consume(dataPack);
        }
      }
;
      if (myLogData.isFullLogReady()) {
        smartRefresh(indicator,success);
      }
 else {
        loadFromVcs(mySettings.getRecentCommitsCount(),indicator,success);
      }
    }
  }
,"Refreshing history...");
}
