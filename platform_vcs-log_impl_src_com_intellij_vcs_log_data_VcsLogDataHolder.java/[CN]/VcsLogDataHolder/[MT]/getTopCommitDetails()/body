{
  final Collection<TimedVcsCommit> topCommits=getTopCommits();
  final AtomicBoolean errorDetailsAttached=new AtomicBoolean();
  return ContainerUtil.mapNotNull(topCommits,new Function<TimedVcsCommit,VcsFullCommitDetails>(){
    @Nullable @Override public VcsFullCommitDetails fun(    TimedVcsCommit commit){
      Hash hash=commit.getHash();
      VcsFullCommitDetails details=myTopCommitsDetailsCache.get(hash);
      if (details != null) {
        return details;
      }
      String errorMessage="No details were stored for commit " + hash;
      if (!errorDetailsAttached.get()) {
        errorDetailsAttached.set(true);
      }
      return null;
    }
  }
);
}
