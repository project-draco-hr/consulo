{
  Document hostDocument=myEditorDelegate.getDocument();
  int rangeLine=hostDocument.getLineNumber(myRange.getStartOffset());
  int hostLineNumber=hostDocument.getLineNumber(myDelegate.getOffset());
  int line=hostLineNumber - rangeLine;
  int hostLineOffset=hostDocument.getLineStartOffset(hostLineNumber);
  return new LogicalPosition(line,Math.max(0,myDelegate.getOffset() - hostLineOffset));
}
