{
  JPanel panel=new JPanel();
  panel.setLayout(new GridBagLayout());
  GridBagConstraints gb=new GridBagConstraints();
  gb.insets=new Insets(2,2,2,2);
  gb.weightx=1;
  gb.weighty=0;
  gb.gridwidth=3;
  gb.gridheight=1;
  gb.gridx=0;
  gb.gridy=0;
  gb.anchor=GridBagConstraints.WEST;
  gb.fill=GridBagConstraints.HORIZONTAL;
  JLabel label=new JLabel(SvnBundle.message("label.ssh.authentication.realm",myRealm));
  panel.add(label,gb);
  gb.gridy+=1;
  gb.gridwidth=1;
  gb.weightx=0;
  gb.fill=GridBagConstraints.NONE;
  label=new JLabel(SvnBundle.message("label.ssh.user.name"));
  panel.add(label,gb);
  gb.gridx=1;
  gb.gridwidth=2;
  gb.weightx=1;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myUserNameText=new JTextField();
  panel.add(myUserNameText,gb);
  DialogUtil.registerMnemonic(label,myUserNameText);
  if (myUserName != null) {
    myUserNameText.setText(myUserName);
  }
  myUserNameText.selectAll();
  myUserNameText.getDocument().addDocumentListener(this);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=3;
  myPasswordButton=new JRadioButton(SvnBundle.message("radio.ssh.authentication.with.password"));
  DialogUtil.registerMnemonic(myPasswordButton);
  panel.add(myPasswordButton,gb);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myPasswordLabel=new JLabel(SvnBundle.message("label.ssh.password"));
  panel.add(myPasswordLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myPasswordText=new JPasswordField();
  panel.add(myPasswordText,gb);
  DialogUtil.registerMnemonic(myPasswordLabel,myPasswordText);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=3;
  myKeyButton=new JRadioButton(SvnBundle.message("radio.ssh.authentication.private.key"));
  DialogUtil.registerMnemonic(myKeyButton);
  panel.add(myKeyButton,gb);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myKeyFileLabel=new JLabel(SvnBundle.message("label.ssh.key.file"));
  panel.add(myKeyFileLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myKeyFileText=new TextFieldWithBrowseButton(this);
  myKeyFileText.setEditable(false);
  panel.add(myKeyFileText,gb);
  DialogUtil.registerMnemonic(myKeyFileLabel,myKeyFileText);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myPassphraseLabel=new JLabel(SvnBundle.message("label.ssh.passphrase"));
  panel.add(myPassphraseLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myPassphraseText=new JPasswordField(30);
  panel.add(myPassphraseText,gb);
  myPassphraseText.getDocument().addDocumentListener(this);
  DialogUtil.registerMnemonic(myPassphraseLabel,myPassphraseText);
  ButtonGroup group=new ButtonGroup();
  group.add(myPasswordButton);
  group.add(myKeyButton);
  group.setSelected(myPasswordButton.getModel(),true);
  group.setSelected(myPasswordButton.getModel(),false);
  gb.gridy+=1;
  gb.gridx=0;
  gb.gridwidth=3;
  gb.weightx=1;
  gb.anchor=GridBagConstraints.WEST;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myAllowSaveCheckBox=new JCheckBox(SvnBundle.message("checkbox.ssh.keep.for.current.session"));
  DialogUtil.registerMnemonic(myAllowSaveCheckBox);
  panel.add(myAllowSaveCheckBox,gb);
  gb.gridy+=1;
  panel.add(new JSeparator(),gb);
  gb.gridy+=1;
  gb.weighty=1;
  panel.add(new JLabel(),gb);
  myAllowSaveCheckBox.setSelected(!myAllowSave);
  myAllowSaveCheckBox.setEnabled(myAllowSave);
  myKeyButton.addActionListener(this);
  myPasswordButton.addActionListener(this);
  updateFields();
  updateOKButton();
  return panel;
}
