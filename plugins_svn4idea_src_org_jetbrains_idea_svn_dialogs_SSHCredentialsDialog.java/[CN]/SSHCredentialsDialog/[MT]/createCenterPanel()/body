{
  JPanel panel=new JPanel();
  panel.setLayout(new GridBagLayout());
  GridBagConstraints gb=new GridBagConstraints();
  gb.insets=new Insets(2,2,2,2);
  gb.weightx=1;
  gb.weighty=0;
  gb.gridwidth=3;
  gb.gridheight=1;
  gb.gridx=0;
  gb.gridy=0;
  gb.anchor=GridBagConstraints.WEST;
  gb.fill=GridBagConstraints.HORIZONTAL;
  JLabel label=new JLabel(SvnBundle.message("label.ssh.authentication.realm",myRealm));
  panel.add(label,gb);
  gb.gridy+=1;
  gb.gridwidth=1;
  gb.weightx=0;
  gb.fill=GridBagConstraints.NONE;
  label=new JLabel(SvnBundle.message("label.ssh.user.name"));
  panel.add(label,gb);
  gb.gridx=1;
  gb.gridwidth=2;
  gb.weightx=1;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myUserNameText=new JTextField();
  panel.add(myUserNameText,gb);
  label.setLabelFor(myUserNameText);
  if (myUserName != null) {
    myUserNameText.setText(myUserName);
  }
  myUserNameText.selectAll();
  myUserNameText.getDocument().addDocumentListener(this);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=3;
  myPasswordButton=new JRadioButton(SvnBundle.message("radio.ssh.authentication.with.password"));
  panel.add(myPasswordButton,gb);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myPasswordLabel=new JLabel(SvnBundle.message("label.ssh.password"));
  panel.add(myPasswordLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myPasswordText=new JPasswordField();
  panel.add(myPasswordText,gb);
  myPasswordLabel.setLabelFor(myPasswordText);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=3;
  myKeyButton=new JRadioButton(SvnBundle.message("radio.ssh.authentication.private.key"));
  panel.add(myKeyButton,gb);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myKeyFileLabel=new JLabel(SvnBundle.message("label.ssh.key.file"));
  panel.add(myKeyFileLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myKeyFileText=new TextFieldWithBrowseButton(this);
  myKeyFileText.setEditable(false);
  panel.add(myKeyFileText,gb);
  myKeyFileLabel.setLabelFor(myKeyFileText);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myPassphraseLabel=new JLabel(SvnBundle.message("label.ssh.passphrase"));
  panel.add(myPassphraseLabel,gb);
  gb.gridx=1;
  gb.weightx=1;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myPassphraseText=new JPasswordField(30);
  panel.add(myPassphraseText,gb);
  myPassphraseText.getDocument().addDocumentListener(this);
  myPassphraseText.addFocusListener(new FocusAdapter(){
    @Override public void focusLost(    FocusEvent e){
      checkKeyFile();
      updateOKButton();
    }
  }
);
  myPassphraseLabel.setLabelFor(myPassphraseText);
  gb.gridy+=1;
  gb.weightx=0;
  gb.gridx=0;
  gb.gridwidth=1;
  gb.fill=GridBagConstraints.NONE;
  gb.gridwidth=1;
  myPortLabel=new JLabel(SvnBundle.message("label.ssh.port"));
  panel.add(myPortLabel,gb);
  gb.gridx=1;
  gb.weightx=0;
  gb.gridwidth=2;
  gb.fill=GridBagConstraints.NONE;
  myPortField=new JTextField();
  myPortField.setColumns(6);
  panel.add(myPortField,gb);
  myPortLabel.setLabelFor(myPortField);
  myPortField.setText("22");
  myPortField.setMinimumSize(myPortField.getPreferredSize());
  myPortField.getDocument().addDocumentListener(this);
  ButtonGroup group=new ButtonGroup();
  group.add(myPasswordButton);
  group.add(myKeyButton);
  group.setSelected(myPasswordButton.getModel(),true);
  group.setSelected(myPasswordButton.getModel(),false);
  gb.gridy+=1;
  gb.gridx=0;
  gb.gridwidth=3;
  gb.weightx=1;
  gb.anchor=GridBagConstraints.WEST;
  gb.fill=GridBagConstraints.HORIZONTAL;
  myAllowSaveCheckBox=new JCheckBox(SvnBundle.message("checkbox.ssh.keep.for.current.session"));
  panel.add(myAllowSaveCheckBox,gb);
  if (!myAllowSave) {
    gb.gridy+=1;
    final JLabel cannotSaveLabel=new JLabel(SvnBundle.message("svn.cannot.save.credentials.store-auth-creds"));
    cannotSaveLabel.setForeground(UIUtil.getInactiveTextColor());
    panel.add(cannotSaveLabel,gb);
  }
  gb.gridy+=1;
  panel.add(new JSeparator(),gb);
  gb.gridy+=1;
  gb.weighty=1;
  panel.add(new JLabel(),gb);
  myAllowSaveCheckBox.setSelected(false);
  myAllowSaveCheckBox.setEnabled(myAllowSave);
  myKeyButton.addActionListener(this);
  myPasswordButton.addActionListener(this);
  updateFields();
  updateOKButton();
  return panel;
}
