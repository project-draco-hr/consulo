{
  if (!myListIsUpToDate) {
    return null;
  }
  if (dataId.equals(DataConstants.PSI_ELEMENT)) {
    Object element=getChosenElement();
    if (element instanceof PsiElement) {
      return element;
    }
    if (element instanceof DataProvider) {
      return ((DataProvider)element).getData(dataId);
    }
  }
 else   if (dataId.equals(DataConstants.PSI_ELEMENT_ARRAY)) {
    final List<Object> chosenElements=getChosenElements();
    if (chosenElements != null) {
      List<PsiElement> result=new ArrayList<PsiElement>();
      for (      Object element : chosenElements) {
        if (element instanceof PsiElement) {
          result.add((PsiElement)element);
        }
      }
      return result.toArray(new PsiElement[result.size()]);
    }
  }
 else   if (dataId.equals(DataConstants.DOMINANT_HINT_AREA_RECTANGLE)) {
    return getBounds();
  }
  return null;
}
