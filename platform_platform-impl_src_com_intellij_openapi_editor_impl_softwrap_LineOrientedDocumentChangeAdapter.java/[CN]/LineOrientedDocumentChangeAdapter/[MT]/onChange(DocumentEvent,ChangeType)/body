{
  Document document=event.getDocument();
  int startLine=document.getLineNumber(normalize(event.getDocument(),event.getOffset()));
  int endLine=document.getLineNumber(normalize(event.getDocument(),Math.max(event.getOffset() + event.getNewLength(),event.getOffset() + event.getOldLength())));
  int symbolsDifference=event.getNewLength() - event.getOldLength();
switch (type) {
case AFTER:
    beforeDocumentChange(startLine,endLine,symbolsDifference);
  break;
case BEFORE:
afterDocumentChange(startLine,endLine,symbolsDifference);
break;
default :
throw new IllegalStateException("Unsupported event change type: " + type);
}
}
