{
  IElementType tokenType=getToken(iterator);
  String name=null;
  if (tokenType == XmlTokenType.XML_START_TAG_START) {
{
      boolean wasWhiteSpace=false;
      iterator.advance();
      IElementType tokenType1=(!iterator.atEnd() ? getToken(iterator) : null);
      if (tokenType1 == JavaTokenType.WHITE_SPACE || tokenType1 == JspTokenType.JSP_WHITE_SPACE) {
        wasWhiteSpace=true;
        iterator.advance();
        tokenType1=(!iterator.atEnd() ? getToken(iterator) : null);
      }
      if (tokenType1 == XmlTokenType.XML_TAG_NAME || tokenType1 == XmlTokenType.XML_NAME) {
        name=fileText.subSequence(iterator.getStart(),iterator.getEnd()).toString();
      }
      if (wasWhiteSpace)       iterator.retreat();
      iterator.retreat();
    }
  }
 else   if (tokenType == XmlTokenType.XML_TAG_END || tokenType == XmlTokenType.XML_EMPTY_ELEMENT_END) {
{
      int count=0;
      while (true) {
        iterator.retreat();
        count++;
        if (iterator.atEnd())         break;
        IElementType tokenType1=getToken(iterator);
        if (tokenType1 == XmlTokenType.XML_NAME) {
          iterator.retreat();
          tokenType1=getToken(iterator);
          if (tokenType1 == JavaTokenType.WHITE_SPACE || tokenType1 == JspTokenType.JSP_WHITE_SPACE) {
            iterator.retreat();
            tokenType1=getToken(iterator);
            iterator.advance();
          }
          iterator.advance();
          if (tokenType1 == XmlTokenType.XML_START_TAG_START || tokenType1 == XmlTokenType.XML_END_TAG_START) {
            name=fileText.subSequence(iterator.getStart(),iterator.getEnd()).toString();
            break;
          }
        }
 else         if (tokenType1 == XmlTokenType.XML_TAG_NAME) {
          name=fileText.subSequence(iterator.getStart(),iterator.getEnd()).toString();
          break;
        }
      }
      for (int i=0; i < count; i++) {
        iterator.advance();
      }
    }
  }
  return name;
}
