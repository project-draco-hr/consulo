{
  GitRootDetectInfo detectInfo=new GitRootDetector(myProject,myPlatformFacade).detect();
  ArrayList<VirtualFile> roots=new ArrayList<VirtualFile>();
  if (hasProjectMapping()) {
    roots.addAll(detectInfo.getRoots());
  }
  HashSet<VirtualFile> listed=new HashSet<VirtualFile>();
  for (  VirtualFile f : result) {
    VirtualFile r=GitUtil.gitRootOrNull(f);
    if (r != null && listed.add(r)) {
      roots.add(r);
    }
  }
  return roots;
}
