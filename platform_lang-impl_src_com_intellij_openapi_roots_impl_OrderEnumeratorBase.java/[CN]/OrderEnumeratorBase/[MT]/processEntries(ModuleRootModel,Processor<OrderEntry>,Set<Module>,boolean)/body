{
  if (processed != null && !processed.add(rootModel.getModule()))   return;
  for (  OrderEntry entry : rootModel.getOrderEntries()) {
    if (myWithoutJdk && entry instanceof JdkOrderEntry || myWithoutLibraries && entry instanceof LibraryOrderEntry || myWithoutDepModules && entry instanceof ModuleOrderEntry || myWithoutThisModuleContent && entry instanceof ModuleSourceOrderEntry)     continue;
    if (entry instanceof ExportableOrderEntry) {
      ExportableOrderEntry exportableEntry=(ExportableOrderEntry)entry;
      final DependencyScope scope=exportableEntry.getScope();
      if (myCompileOnly && !scope.isForProductionCompile() && !scope.isForTestCompile())       continue;
      if (myRuntimeOnly && !scope.isForProductionRuntime() && !scope.isForTestRuntime())       continue;
      if (myProductionOnly) {
        if (!scope.isForProductionCompile() && !scope.isForProductionRuntime() || myCompileOnly && !scope.isForProductionCompile() || myRuntimeOnly && !scope.isForProductionRuntime())         continue;
      }
      if (!exportableEntry.isExported()) {
        if (myExportedOnly)         continue;
        if (myRecursivelyExportedOnly && !firstLevel)         continue;
      }
    }
    if (myCondition != null && !myCondition.value(entry))     continue;
    if (myRecursively && entry instanceof ModuleOrderEntry) {
      ModuleOrderEntry moduleOrderEntry=(ModuleOrderEntry)entry;
      final Module module=moduleOrderEntry.getModule();
      if (module != null) {
        boolean processRecursively=true;
        if (myCustomHandlers != null) {
          for (          OrderEnumerationHandler handler : myCustomHandlers) {
            if (!handler.shouldProcessRecursively(moduleOrderEntry)) {
              processRecursively=false;
              break;
            }
          }
        }
        if (processRecursively) {
          processEntries(getRootModel(module),processor,processed,false);
          continue;
        }
      }
    }
    if (!processor.process(entry)) {
      return;
    }
  }
}
