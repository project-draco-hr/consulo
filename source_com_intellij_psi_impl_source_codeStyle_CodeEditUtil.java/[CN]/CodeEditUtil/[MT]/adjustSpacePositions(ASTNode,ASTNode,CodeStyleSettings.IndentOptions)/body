{
  ASTNode elementBeforeNext=TreeUtil.prevLeaf(nextElement);
  if (prevElement != null && isWS(prevElement) && isWS(elementBeforeNext) && prevElement != elementBeforeNext) {
    replaceTwoSpacesWithOne(elementBeforeNext,prevElement,options);
  }
  elementBeforeNext=TreeUtil.prevLeaf(nextElement);
  if (isInvalidWhiteSpace(elementBeforeNext)) {
    replaceInvalidWhiteSpace(elementBeforeNext);
  }
  elementBeforeNext=TreeUtil.prevLeaf(nextElement);
  if (elementBeforeNext != null && isWS(elementBeforeNext) && elementBeforeNext.getTextRange().getStartOffset() == 0) {
    final IndentInfo info=createInfo(elementBeforeNext.getText(),options);
    if (info.getLineFeeds() > 0) {
      final String text=new IndentInfo(0,info.getIndentSpaces(),info.getSpaces()).generateNewWhiteSpace(options);
      replace(elementBeforeNext,text);
    }
  }
}
