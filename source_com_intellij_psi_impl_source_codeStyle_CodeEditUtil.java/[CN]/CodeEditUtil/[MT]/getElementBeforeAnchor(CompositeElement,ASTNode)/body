{
  if (anchorBefore != null) {
    return TreeUtil.prevLeaf(anchorBefore);
  }
  final ASTNode lastChild=parent.getLastChildNode();
  if (lastChild != null) {
    if (lastChild.getTextLength() > 0) {
      return lastChild;
    }
 else {
      return TreeUtil.prevLeaf(lastChild);
    }
  }
 else {
    return TreeUtil.prevLeaf(parent);
  }
}
