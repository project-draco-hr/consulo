{
  LOG.assertTrue(first != null);
  ASTNode lastChild=last != null ? last.getTreeNext() : null;
  if (FormatterEx.getInstanceEx().isDisabled()) {
    parent.addChildren(first,lastChild,anchorBefore);
    return (TreeElement)first;
  }
 else {
    checkAllWhiteSpaces(parent);
    return addChildrenAndAdjustWhiteSpaces(first,lastChild,anchorBefore,parent);
  }
}
