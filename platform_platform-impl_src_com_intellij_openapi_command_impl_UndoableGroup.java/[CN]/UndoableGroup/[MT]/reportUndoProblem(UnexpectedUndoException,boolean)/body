{
  String title;
  String message;
  if (isUndo) {
    title=CommonBundle.message("cannot.undo.dialog.title");
    message=CommonBundle.message("cannot.undo.message");
  }
 else {
    title=CommonBundle.message("cannot.redo.dialog.title");
    message=CommonBundle.message("cannot.redo.message");
  }
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    if (e.getMessage() != null) {
      message+=".\n" + e.getMessage();
    }
    Messages.showMessageDialog(myProject,message,title,Messages.getErrorIcon());
  }
 else {
    LOG.error(e);
  }
}
