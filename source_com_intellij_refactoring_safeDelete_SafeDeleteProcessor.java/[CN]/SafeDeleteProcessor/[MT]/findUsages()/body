{
  ArrayList<UsageInfo> usages=new ArrayList<UsageInfo>();
  for (  PsiElement element : myElements) {
    if (element instanceof PsiClass) {
      findClassUsages((PsiClass)element,usages);
      if (element instanceof PsiTypeParameter) {
        findTypeParameterExternalUsages(((PsiTypeParameter)element),usages);
      }
    }
 else     if (element instanceof PsiMethod) {
      findMethodUsages((PsiMethod)element,usages);
    }
 else     if (element instanceof PsiField) {
      findFieldUsages((PsiField)element,usages);
    }
 else     if (element instanceof PsiFile) {
      findFileUsages((PsiFile)element,usages);
    }
 else     if (element instanceof PsiNamedElement) {
      findGenericElementUsages(element,usages);
    }
  }
  final UsageInfo[] result=usages.toArray(new UsageInfo[usages.size()]);
  return UsageViewUtil.removeDuplicatedUsages(result);
}
