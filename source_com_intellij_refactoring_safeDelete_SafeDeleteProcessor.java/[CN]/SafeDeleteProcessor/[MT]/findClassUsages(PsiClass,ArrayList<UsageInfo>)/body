{
  final boolean justPrivates=containsOnlyPrivates(psiClass);
  PsiManager manager=psiClass.getManager();
  GlobalSearchScope projectScope=GlobalSearchScope.projectScope(myProject);
  final PsiReference[] references=manager.getSearchHelper().findReferences(psiClass,projectScope,false);
  for (  PsiReference reference : references) {
    final PsiElement element=reference.getElement();
    if (!isInside(element,myElements)) {
      PsiElement parent=element.getParent();
      if (parent instanceof PsiReferenceList) {
        final PsiElement pparent=parent.getParent();
        if (pparent instanceof PsiClass) {
          final PsiClass inheritor=((PsiClass)pparent);
          if (justPrivates) {
            if (parent.equals(inheritor.getExtendsList()) || parent.equals(inheritor.getImplementsList())) {
              usages.add(new SafeDeleteExtendsClassUsageInfo((PsiJavaCodeReferenceElement)element,psiClass,inheritor));
              continue;
            }
          }
        }
      }
      usages.add(new SafeDeleteReferenceSimpleDeleteUsageInfo(parent,psiClass,parent instanceof PsiImportStatement));
    }
  }
  addNonCodeUsages(psiClass,usages,myInsideDeletedElements);
}
