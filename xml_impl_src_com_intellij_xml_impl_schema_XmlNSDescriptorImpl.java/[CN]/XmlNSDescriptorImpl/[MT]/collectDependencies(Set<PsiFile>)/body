{
  if (myTag == null)   return;
  XmlTag[] tags=myTag.getSubTags();
  visited.add(myTag.getContainingFile());
  for (  final XmlTag tag : tags) {
    if (equalsToSchemaName(tag,INCLUDE_TAG_NAME) || equalsToSchemaName(tag,IMPORT_TAG_NAME)) {
      final XmlAttribute schemaLocation=tag.getAttribute("schemaLocation",tag.getNamespace());
      if (schemaLocation != null) {
        final XmlFile xmlFile=XmlUtil.findNamespace(myFile,schemaLocation.getValue());
        if (xmlFile != null) {
          visited.add(xmlFile);
        }
      }
    }
 else     if (equalsToSchemaName(tag,REDEFINE_TAG_NAME)) {
      final XmlFile file=getRedefinedElementDescriptorFile(tag);
      if (file != null) {
        visited.add(file);
      }
    }
  }
  final String schemaLocationDeclaration=myTag.getAttributeValue("schemaLocation",XmlUtil.XML_SCHEMA_INSTANCE_URI);
  if (schemaLocationDeclaration != null) {
    final StringTokenizer tokenizer=new StringTokenizer(schemaLocationDeclaration);
    while (tokenizer.hasMoreTokens()) {
      final String uri=tokenizer.nextToken();
      if (tokenizer.hasMoreTokens()) {
        PsiFile resourceLocation=ExternalResourceManager.getInstance().getResourceLocation(tokenizer.nextToken(),myFile,null);
        if (resourceLocation == null && uri != null)         resourceLocation=ExternalResourceManager.getInstance().getResourceLocation(uri,myFile,null);
        if (resourceLocation != null) {
          visited.add(resourceLocation);
        }
      }
    }
  }
}
