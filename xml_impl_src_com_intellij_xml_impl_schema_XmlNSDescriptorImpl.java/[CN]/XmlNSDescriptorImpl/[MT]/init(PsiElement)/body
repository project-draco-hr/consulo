{
  myFile=(XmlFile)element.getContainingFile();
  if (element instanceof XmlTag) {
    myTag=(XmlTag)element;
  }
 else {
    final XmlDocument document=myFile.getDocument();
    if (document != null) {
      myTag=document.getRootTag();
    }
  }
  if (myTag != null) {
    myTargetNamespace=myTag.getAttributeValue("targetNamespace");
  }
  final THashSet<PsiFile> dependenciesSet=new THashSet<PsiFile>();
  final Set<PsiFile> redefineProcessingSet=myRedefinedDescriptorsInProcessing.get();
  if (redefineProcessingSet != null) {
    dependenciesSet.addAll(redefineProcessingSet);
  }
  collectDependencies(myTag,myFile,dependenciesSet);
  dependencies=ArrayUtil.toObjectArray(dependenciesSet);
}
