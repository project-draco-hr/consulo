{
  List<XmlElementDescriptor> result=new ArrayList<XmlElementDescriptor>();
  if (mySubstitutions == null) {
    mySubstitutions=new HashMap<String,List<XmlTag>>();
    XmlTag[] tags=myTag.getSubTags();
    for (    XmlTag tag : tags) {
      if (equalsToSchemaName(tag,ELEMENT_TAG_NAME)) {
        final String substAttr=tag.getAttributeValue("substitutionGroup");
        if (substAttr != null) {
          String substLocalName=XmlUtil.findLocalNameByQualifiedName(substAttr);
          List<XmlTag> list=mySubstitutions.get(substLocalName);
          if (list == null) {
            list=new LinkedList<XmlTag>();
            mySubstitutions.put(substLocalName,list);
          }
          list.add(tag);
        }
      }
    }
  }
  List<XmlTag> substitutions=mySubstitutions.get(localName);
  if (substitutions == null)   return XmlElementDescriptor.EMPTY_ARRAY;
  for (  XmlTag tag : substitutions) {
    final String substAttr=tag.getAttributeValue("substitutionGroup");
    if (substAttr != null && checkElementNameEquivalence(localName,namespace,substAttr,tag)) {
      result.add(createElementDescriptor(tag));
    }
  }
  return result.toArray(new XmlElementDescriptor[result.size()]);
}
