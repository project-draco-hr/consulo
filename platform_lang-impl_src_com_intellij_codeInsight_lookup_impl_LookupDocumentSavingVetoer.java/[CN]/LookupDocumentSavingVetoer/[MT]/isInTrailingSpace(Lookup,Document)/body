{
  Editor editor=InjectedLanguageUtil.getTopLevelEditor(lookup.getEditor());
  if (editor.getDocument() != document) {
    return false;
  }
  int caret=editor.getCaretModel().getOffset();
  if (caret <= 0 || caret >= document.getTextLength()) {
    return false;
  }
  CharSequence seq=document.getCharsSequence();
  if (seq.charAt(caret) == '\n' && Character.isWhitespace(seq.charAt(caret - 1))) {
    return true;
  }
  return false;
}
