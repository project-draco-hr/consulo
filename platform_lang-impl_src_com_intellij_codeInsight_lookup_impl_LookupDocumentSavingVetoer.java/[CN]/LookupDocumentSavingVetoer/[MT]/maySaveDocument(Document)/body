{
  if (ApplicationManager.getApplication().isDisposed()) {
    return true;
  }
  final EditorSettingsExternalizable settings=EditorSettingsExternalizable.getInstance();
  if (settings == null || EditorSettingsExternalizable.STRIP_TRAILING_SPACES_NONE.equals(settings.getStripTrailingSpaces())) {
    return true;
  }
  for (  Project project : ProjectManager.getInstance().getOpenProjects()) {
    if (!project.isInitialized() || project.isDisposed()) {
      continue;
    }
    LookupEx lookup=LookupManager.getInstance(project).getActiveLookup();
    if (lookup != null && isInTrailingSpace(lookup,document)) {
      return false;
    }
  }
  return true;
}
