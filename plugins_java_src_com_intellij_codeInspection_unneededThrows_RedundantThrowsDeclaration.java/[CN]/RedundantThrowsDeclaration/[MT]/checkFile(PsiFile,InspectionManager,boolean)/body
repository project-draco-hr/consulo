{
  final Set<ProblemDescriptor> problems=new HashSet<ProblemDescriptor>();
  file.accept(new JavaRecursiveElementWalkingVisitor(){
    @Override public void visitReferenceElement(    PsiJavaCodeReferenceElement reference){
      final ProblemDescriptor descriptor=checkExceptionsNeverThrown(reference,manager,isOnTheFly);
      if (descriptor != null) {
        problems.add(descriptor);
      }
    }
  }
);
  return problems.isEmpty() ? null : problems.toArray(new ProblemDescriptor[problems.size()]);
}
