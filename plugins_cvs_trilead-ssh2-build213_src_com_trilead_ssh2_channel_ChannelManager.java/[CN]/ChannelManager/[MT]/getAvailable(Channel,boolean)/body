{
synchronized (c) {
    int avail;
    if (extended)     avail=c.stderrWritepos - c.stderrReadpos;
 else     avail=c.stdoutWritepos - c.stdoutReadpos;
    return ((avail > 0) ? avail : (c.EOF ? -1 : 0));
  }
}
