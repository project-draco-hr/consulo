{
  if (log.isEnabled())   log.log(50,"Closing all channels");
  Vector channel_copy;
synchronized (channels) {
    channel_copy=(Vector)channels.clone();
  }
  for (int i=0; i < channel_copy.size(); i++) {
    Channel c=(Channel)channel_copy.elementAt(i);
    try {
      closeChannel(c,"Closing all channels",true);
    }
 catch (    IOException e) {
    }
  }
}
