{
  if (hexFakeCookie == null)   throw new IllegalStateException("hexFakeCookie may not be null");
synchronized (x11_magic_cookies) {
    x11_magic_cookies.remove(hexFakeCookie);
  }
  if (killChannels == false)   return;
  if (log.isEnabled())   log.log(50,"Closing all X11 channels for the given fake cookie");
  Vector channel_copy;
synchronized (channels) {
    channel_copy=(Vector)channels.clone();
  }
  for (int i=0; i < channel_copy.size(); i++) {
    Channel c=(Channel)channel_copy.elementAt(i);
synchronized (c) {
      if (hexFakeCookie.equals(c.hexX11FakeCookie) == false)       continue;
    }
    try {
      closeChannel(c,"Closing X11 channel since the corresponding session is closing",true);
    }
 catch (    IOException e) {
    }
  }
}
