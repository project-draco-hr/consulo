{
synchronized (channels) {
    globalSuccessCounter=globalFailedCounter=0;
  }
  PacketGlobalTrileadPing pgtp=new PacketGlobalTrileadPing();
  tm.sendMessage(pgtp.getPayload());
  if (log.isEnabled())   log.log(50,"Sending SSH_MSG_GLOBAL_REQUEST 'trilead-ping'.");
  try {
    if (waitForGlobalRequestResult() == true)     throw new IOException("Your server is alive - but buggy. " + "It replied with SSH_MSG_REQUEST_SUCCESS when it actually should not.");
  }
 catch (  IOException e) {
    throw (IOException)new IOException("The ping request failed.").initCause(e);
  }
}
