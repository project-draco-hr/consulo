{
  PacketChannelTrileadPing pctp;
synchronized (c) {
    if (c.state != Channel.STATE_OPEN)     throw new IOException("Cannot ping this channel (" + c.getReasonClosed() + ")");
    pctp=new PacketChannelTrileadPing(c.remoteID);
    c.successCounter=c.failedCounter=0;
  }
synchronized (c.channelSendLock) {
    if (c.closeMessageSent)     throw new IOException("Cannot ping this channel (" + c.getReasonClosed() + ")");
    tm.sendMessage(pctp.getPayload());
  }
  try {
    if (waitForChannelRequestResult(c) == true)     throw new IOException("Your server is alive - but buggy. " + "It replied with SSH_MSG_SESSION_SUCCESS when it actually should not.");
  }
 catch (  IOException e) {
    throw (IOException)new IOException("The ping request failed.").initCause(e);
  }
}
