{
  if (element instanceof PsiReferenceExpression) {
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)element;
    if (element.equals(firstReference) && isLeftSideOfSimpleAssignment(referenceExpression)) {
      final PsiType type=firstReference.getType();
      if (type != null) {
        out.append(type.getCanonicalText());
        out.append(' ');
        out.append(newName);
        return true;
      }
    }
    final String text=element.getText();
    if (text.equals(originalName)) {
      out.append(newName);
      return false;
    }
  }
  final PsiElement[] children=element.getChildren();
  if (children.length == 0) {
    final String text=element.getText();
    out.append(text);
  }
 else {
    boolean result=false;
    for (    final PsiElement child : children) {
      if (result) {
        out.append(child.getText());
      }
 else {
        result=replaceVariableName(child,firstReference,newName,originalName,out);
      }
    }
    return result;
  }
  return false;
}
