{
  List<VirtualFile> filesToDisplay=ContainerUtil.sorted(files,shorten ? FILE_BY_NAME_COMPARATOR : FILE_BY_PATH_COMPARATOR);
  if (files.size() > 10) {
    filesToDisplay=filesToDisplay.subList(0,10);
  }
  String tooltip=StringUtil.join(filesToDisplay,new Function<VirtualFile,String>(){
    @Override public String fun(    VirtualFile file){
      return shorten ? file.getName() : file.getPresentableUrl();
    }
  }
,"\n");
  if (files.size() > 10) {
    tooltip+="\n...";
  }
  return tooltip;
}
