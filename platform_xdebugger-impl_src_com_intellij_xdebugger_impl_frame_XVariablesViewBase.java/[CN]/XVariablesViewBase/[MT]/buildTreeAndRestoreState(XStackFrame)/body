{
  XSourcePosition position=stackFrame.getSourcePosition();
  XDebuggerTree tree=getTree();
  tree.setSourcePosition(position);
  createNewRootNode(stackFrame);
  final Project project=tree.getProject();
  project.putUserData(XVariablesView.DEBUG_VARIABLES,new XVariablesView.InlineVariablesInfo());
  project.putUserData(XVariablesView.DEBUG_VARIABLES_TIMESTAMPS,new ObjectLongHashMap<>());
  Object newEqualityObject=stackFrame.getEqualityObject();
  if (myFrameEqualityObject != null && newEqualityObject != null && myFrameEqualityObject.equals(newEqualityObject) && myTreeState != null) {
    disposeTreeRestorer();
    myTreeRestorer=myTreeState.restoreState(tree);
  }
  if (position != null && Registry.is("debugger.valueTooltipAutoShowOnSelection")) {
    registerInlineEvaluator(stackFrame,position,project);
  }
}
