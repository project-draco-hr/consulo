{
  if (!Registry.is("debugger.valueTooltipAutoShowOnSelection")) {
    return;
  }
  final String text=myEditor.getDocument().getText(e.getNewRange());
  if (!StringUtil.isEmpty(text) && !(text.contains("exec(") || text.contains("++") || text.contains("--")|| text.contains("="))) {
    final XDebugSession session=getSession(getTree());
    if (session == null)     return;
    XDebuggerEvaluator evaluator=myStackFrame.getEvaluator();
    if (evaluator == null)     return;
    TextRange range=e.getNewRange();
    ExpressionInfo info=new ExpressionInfo(range);
    int offset=range.getStartOffset();
    LogicalPosition pos=myEditor.offsetToLogicalPosition(offset);
    Point point=myEditor.logicalPositionToXY(pos);
    new XValueHint(myProject,myEditor,point,ValueHintType.MOUSE_OVER_HINT,info,evaluator,session).invokeHint();
  }
}
