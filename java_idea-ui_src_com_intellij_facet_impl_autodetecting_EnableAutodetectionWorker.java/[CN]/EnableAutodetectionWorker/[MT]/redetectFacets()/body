{
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      for (      FacetType<?,?> type : myModulesToProcess.keySet()) {
        detectFacetsInModules(type,myModulesToProcess.get(type));
      }
      myModulesToProcess.clear();
      for (      FacetType<?,?> type : myFilesToProcess.keySet()) {
        detectFacetsInFiles(type,myFilesToProcess.get(type));
      }
      myFilesToProcess.clear();
    }
  }
,ProjectBundle.message("progress.text.detecting.facets"),false,myProject);
  myFacetAutodetectingManager.getDetectedFacetManager().showDetectedFacetsDialog();
}
