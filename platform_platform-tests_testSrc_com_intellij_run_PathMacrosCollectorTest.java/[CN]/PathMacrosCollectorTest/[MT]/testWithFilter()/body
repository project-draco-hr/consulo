{
  Element root=new Element("root");
  final Element testTag=new Element("test");
  testTag.setAttribute("path","$MACRO$");
  testTag.setAttribute("ignore","$PATH$");
  root.addContent(testTag);
  final Set<String> macros=PathMacrosCollectorImpl.getMacroNames(root,null,new PathMacrosImpl());
  assertEquals(2,macros.size());
  assertTrue(macros.contains("MACRO"));
  assertTrue(macros.contains("PATH"));
  final Set<String> filtered=PathMacrosCollectorImpl.getMacroNames(root,new PathMacroFilter(){
    @Override public boolean skipPathMacros(    Attribute attribute){
      return "ignore".equals(attribute.getName());
    }
  }
,new PathMacrosImpl());
  assertEquals(1,filtered.size());
  assertTrue(macros.contains("MACRO"));
}
