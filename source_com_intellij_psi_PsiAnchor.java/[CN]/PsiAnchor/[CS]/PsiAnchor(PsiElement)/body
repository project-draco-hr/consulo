{
  if (element instanceof PsiCompiledElement || element instanceof PsiMember) {
    myElement=element;
  }
 else {
    myElement=null;
    final PsiFile[] psiRoots=element.getContainingFile().getPsiRoots();
    for (int i=0; i < psiRoots.length; i++) {
      PsiFile root=psiRoots[i];
      if (PsiUtil.isUnderPsiRoot(root,element)) {
        myFile=root;
        break;
      }
    }
    LOG.assertTrue(myFile != null);
    myClass=element.getClass();
    TextRange textRange=element.getTextRange();
    if (textRange != null) {
      myStartOffset=textRange.getStartOffset();
      myEndOffset=textRange.getEndOffset();
    }
  }
}
