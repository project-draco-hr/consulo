{
  LOG.assertTrue(element.isValid());
  if (element instanceof PsiCompiledElement || element instanceof PsiMember) {
    myElement=element;
  }
 else {
    myElement=null;
    myFile=element.getContainingFile();
    final PsiFile[] psiRoots=myFile.getPsiRoots();
    for (int i=0; i < psiRoots.length; i++) {
      PsiFile root=psiRoots[i];
      if (PsiUtil.isUnderPsiRoot(root,element)) {
        myRootIndex=i;
        break;
      }
    }
    LOG.assertTrue(myRootIndex >= 0);
    myClass=element.getClass();
    TextRange textRange=element.getTextRange();
    if (textRange != null) {
      myStartOffset=textRange.getStartOffset();
      myEndOffset=textRange.getEndOffset();
    }
  }
}
