{
  final String filePath="/refactoring/moveInstanceMethod/" + getTestName(false) + ".java";
  configureByFile(filePath);
  final PsiElement targetElement=TargetElementUtil.findTargetElement(getEditor(),TargetElementUtil.ELEMENT_NAME_ACCEPTED);
  assertTrue("<caret> is not on method name",targetElement instanceof PsiMethod);
  PsiMethod method=(PsiMethod)targetElement;
  String suggestedName=MoveInstanceMethodHandler.suggestParameterNameForThisClass(method.getContainingClass());
  final PsiVariable targetVariable=isTargetParameter ? ((PsiVariable)method.getParameterList().getParameters()[targetIndex]) : method.getContainingClass().getFields()[targetIndex];
  new MoveInstanceMethodProcessor(getProject(),method,targetVariable,null,suggestedName).testRun();
  checkResultByFile(filePath + ".after");
}
