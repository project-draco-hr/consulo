{
  VirtualFile f=root.createChildData(null,"file.java");
  f.setBinaryContent(new byte[]{0});
  setDocumentTextFor(f,new byte[]{1});
  assertEquals(0,getVcsContentOf(f)[0]);
  LocalVcsAction a=getVcsComponent().startAction("label");
  assertEquals(1,getVcsContentOf(f)[0]);
  setDocumentTextFor(f,new byte[]{2});
  a.finish();
  assertEquals(2,getVcsContentOf(f)[0]);
  List<Label> l=getVcs().getLabelsFor(f.getPath());
  assertEquals("label",l.get(0).getName());
  assertNull(l.get(1).getName());
}
