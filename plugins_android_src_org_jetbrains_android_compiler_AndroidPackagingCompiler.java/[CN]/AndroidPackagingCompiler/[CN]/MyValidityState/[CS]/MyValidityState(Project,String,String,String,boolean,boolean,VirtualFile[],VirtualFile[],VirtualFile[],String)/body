{
  myResourceTimestamps.put(FileUtil.toSystemIndependentName(resPackagePath),new File(resPackagePath).lastModified());
  myResourceTimestamps.put(FileUtil.toSystemIndependentName(classesDexPath),new File(classesDexPath).lastModified());
  myApkPath=apkPath;
  myGenerateUnsignedApk=generateUnsignedApk;
  myReleaseBuild=releaseBuild;
  myCustomKeystorePath=customKeystorePath != null ? customKeystorePath : "";
  final HashSet<File> resourcesFromSourceRoot=new HashSet<File>();
  for (  VirtualFile sourceRoot : sourceRoots) {
    AndroidApkBuilder.collectStandardSourceFolderResources(new File(sourceRoot.getPath()),resourcesFromSourceRoot,new ExcludedSourcesFilter(project));
  }
  for (  File resource : resourcesFromSourceRoot) {
    myResourceTimestamps.put(FileUtil.toSystemIndependentName(resource.getPath()),resource.lastModified());
  }
  for (  VirtualFile externalLib : externalLibs) {
    myResourceTimestamps.put(externalLib.getPath(),externalLib.getTimeStamp());
  }
  ArrayList<File> nativeLibs=new ArrayList<File>();
  for (  VirtualFile nativeLibFolder : nativeLibFolders) {
    for (    VirtualFile child : nativeLibFolder.getChildren()) {
      AndroidApkBuilder.collectNativeLibraries(new File(child.getPath()),nativeLibs,!releaseBuild);
    }
  }
  for (  File nativeLib : nativeLibs) {
    myResourceTimestamps.put(FileUtil.toSystemIndependentName(nativeLib.getPath()),nativeLib.lastModified());
  }
}
