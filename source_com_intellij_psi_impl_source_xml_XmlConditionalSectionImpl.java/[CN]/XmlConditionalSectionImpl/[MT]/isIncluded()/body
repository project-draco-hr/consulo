{
  ASTNode child=findChildByType(XML_CONDITIONAL_SECTION_START);
  if (child != null) {
    child=child.getTreeNext();
    if (child != null && child.getElementType() == WHITE_SPACE) {
      child=child.getTreeNext();
    }
    if (child != null) {
      IElementType elementType=child.getElementType();
      if (elementType == XML_CONDITIONAL_INCLUDE)       return true;
      if (elementType == XML_CONDITIONAL_IGNORE)       return false;
      if (elementType == XML_ENTITY_REF) {
        XmlEntityRef xmlEntityRef=(XmlEntityRef)child.getPsi();
        PsiElement originalElement=getUserData(ORIGINAL_ELEMENT);
        PsiFile targetFile=(originalElement != null) ? originalElement.getContainingFile() : null;
        final String text=xmlEntityRef.getText();
        String name=text.substring(1,text.length() - 1);
        PsiElement psiElement=targetFile != null ? XmlEntityRefImpl.getCachedEntity(targetFile,name) : null;
        if (psiElement == null) {
          psiElement=XmlEntityRefImpl.getCachedEntity(getContainingFile(),name);
        }
        if (psiElement instanceof XmlEntityDecl) {
          final XmlEntityDecl decl=(XmlEntityDecl)psiElement;
          if (decl.isInternalReference()) {
            for (ASTNode e=decl.getNode().getFirstChildNode(); e != null; e=e.getTreeNext()) {
              if (e.getElementType() == ElementType.XML_ATTRIBUTE_VALUE) {
                return StringUtil.stripQuotesAroundValue(e.getText()).equals("INCLUDE");
              }
            }
          }
        }
      }
    }
  }
  return false;
}
