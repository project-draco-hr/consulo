{
  final String nullityPath="/codeInsight/nullityinferrer";
  final VirtualFile aLib=LocalFileSystem.getInstance().findFileByPath(getTestDataPath() + nullityPath + "/lib/annotations.jar");
  if (aLib != null) {
    final VirtualFile file=JarFileSystem.getInstance().getJarRootForLocalFile(aLib);
    if (file != null) {
      ModuleRootModificationUtil.addModuleLibrary(myModule,file.getUrl());
    }
  }
  configureByFile(nullityPath + "/before" + getTestName(false)+ ".java");
  final NullityInferrer nullityInferrer=new NullityInferrer(annotateLocalVariables,getProject());
  nullityInferrer.collect(getFile());
  nullityInferrer.apply(getProject());
  checkResultByFile(nullityPath + "/after" + getTestName(false)+ ".java");
}
