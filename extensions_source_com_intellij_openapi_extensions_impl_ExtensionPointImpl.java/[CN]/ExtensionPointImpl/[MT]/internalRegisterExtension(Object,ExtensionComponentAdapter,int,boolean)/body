{
  myExtensionsCache=null;
  if (myExtensions.contains(extension)) {
    myLogger.error("Extension was already added: " + extension);
  }
 else {
    myExtensions.add(index,extension);
    myLoadedAdapters.add(index,adapter);
    if (runNotifications) {
      if (extension instanceof Extension) {
        Extension o=(Extension)extension;
        try {
          o.extensionAdded(this);
        }
 catch (        Throwable e) {
          myLogger.error(e);
        }
      }
      notifyListenersOnAdd(extension,adapter.getPluginDescriptor());
    }
  }
}
