{
  if (children.isEmpty()) {
    if (type != DType.SEPARATOR && !"".equals(settings.getFilter())) {
      if (!settings.getFilterPattern().matcher(getName()).matches()) {
        myVisible=false;
        return;
      }
    }
switch (type) {
case SOURCE:
      myVisible=settings.showNewOnSource;
    break;
case TARGET:
  myVisible=settings.showNewOnTarget;
break;
case SEPARATOR:
myVisible=true;
break;
case CHANGED:
myVisible=settings.showDifferent;
break;
case EQUAL:
myVisible=settings.showEqual;
break;
}
}
 else {
myVisible=false;
for (DTree child : children.values()) {
child.updateVisibility(settings);
myVisible=myVisible || child.isVisible();
}
}
}
