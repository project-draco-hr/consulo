{
  if (myPackageName != null) {
    CommandProcessor.getInstance().executeCommand(facet.getModule().getProject(),new ExternalChangeAction(){
      public void run(){
        Runnable action=new Runnable(){
          public void run(){
            PsiDirectory packageDir=createPackageIfPossible(sourceDir,myPackageName);
            if (packageDir == null)             return;
            final Manifest manifest=facet.getManifest();
            if (manifest != null) {
              manifest.getPackage().setValue(myPackageName);
              final Project project=facet.getModule().getProject();
              StartupManager.getInstance(project).runWhenProjectIsInitialized(new Runnable(){
                public void run(){
                  FileDocumentManager.getInstance().saveAllDocuments();
                }
              }
);
              assignApplicationName(facet);
              final AndroidPlatform platform=AndroidPlatform.parse(mySdk);
              if (platform != null) {
                configureManifest(facet,platform.getTarget());
              }
            }
          }
        }
;
        ApplicationManager.getApplication().runWriteAction(action);
      }
    }
,AndroidBundle.message("build.android.module.process.title"),null);
  }
}
