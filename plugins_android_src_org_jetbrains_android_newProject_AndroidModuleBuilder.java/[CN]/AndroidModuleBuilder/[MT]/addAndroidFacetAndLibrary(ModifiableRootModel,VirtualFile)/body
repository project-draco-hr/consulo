{
  Module module=rootModel.getModule();
  final FacetManager facetManager=FacetManager.getInstance(module);
  ModifiableFacetModel model=facetManager.createModifiableModel();
  AndroidFacet facet=facetManager.createFacet(AndroidFacet.getFacetType(),"Android",null);
  AndroidFacetConfiguration configuration=facet.getConfiguration();
  configuration.init(module,contentRoot);
  configuration.setAndroidPlatform(myPlatform);
  if (myProjectType == ProjectType.LIBRARY) {
    configuration.LIBRARY_PROJECT=true;
  }
  model.addFacet(facet);
  if (configuration.ADD_ANDROID_LIBRARY) {
    LibraryOrderEntry libraryEntry=rootModel.addLibraryEntry(myPlatform.getLibrary());
    libraryEntry.setScope(DependencyScope.PROVIDED);
  }
  model.commit();
  return facet;
}
