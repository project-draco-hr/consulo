{
  final List<CodeSmellInfo> result=new ArrayList<CodeSmellInfo>();
  DaemonCodeAnalyzerImpl codeAnalyzer=(DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(myProject);
  List<HighlightInfo> infos=codeAnalyzer.runMainPasses(psiFile,document,progress);
  collectErrorsAndWarnings(infos,result,document);
  return result;
}
