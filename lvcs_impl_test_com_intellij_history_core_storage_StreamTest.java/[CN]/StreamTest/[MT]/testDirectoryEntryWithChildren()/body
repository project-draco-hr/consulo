{
  Entry dir=new DirectoryEntry(1,"");
  Entry subDir=new DirectoryEntry(2,"");
  dir.addChild(subDir);
  subDir.addChild(new FileEntry(3,"a",new UnavailableContent(),-1,false));
  subDir.addChild(new FileEntry(4,"b",new UnavailableContent(),-1,false));
  os.writeEntry(dir);
  Entry result=is.readEntry();
  List<Entry> children=result.getChildren();
  assertEquals(1,children.size());
  Entry e=children.get(0);
  assertEquals(DirectoryEntry.class,e.getClass());
  assertEquals(2,e.getId());
  assertSame(result,e.getParent());
  children=e.getChildren();
  assertEquals(2,children.size());
  assertEquals(FileEntry.class,children.get(0).getClass());
  assertEquals(3,children.get(0).getId());
  assertSame(e,children.get(0).getParent());
  assertEquals(FileEntry.class,children.get(1).getClass());
  assertEquals(4,children.get(1).getId());
  assertSame(e,children.get(1).getParent());
}
