{
  final Set<Module> modules=getNodes();
  final OrderedSet<VirtualFile> cpFiles=new OrderedSet<VirtualFile>(TObjectHashingStrategy.CANONICAL);
  final OrderedSet<VirtualFile> jdkFiles=new OrderedSet<VirtualFile>(TObjectHashingStrategy.CANONICAL);
  for (  final Module module : modules) {
    OrderEnumerator enumerator=OrderEnumerator.orderEntries(module).compileOnly().satisfying(new BeforeJdkOrderEntryCondition());
    if ((mySourcesFilter & TEST_SOURCES) == 0) {
      enumerator=enumerator.productionOnly();
    }
    cpFiles.addAll(enumerator.recursively().exportedOnly().getClassesRoots());
    jdkFiles.addAll(OrderEnumerator.orderEntries(module).sdkOnly().getClassesRoots());
  }
  cpFiles.addAll(jdkFiles);
  return cpFiles;
}
