{
  final Set<Module> modules=getNodes();
  final OrderedSet<VirtualFile> cpFiles=new OrderedSet<VirtualFile>(TObjectHashingStrategy.CANONICAL);
  final OrderedSet<VirtualFile> jdkFiles=new OrderedSet<VirtualFile>(TObjectHashingStrategy.CANONICAL);
  for (  final Module module : modules) {
    final OrderEntry[] orderEntries=ModuleRootManager.getInstance(module).getOrderEntries();
    for (    OrderEntry orderEntry : orderEntries) {
      if (orderEntry instanceof JdkOrderEntry) {
        jdkFiles.addAll(Arrays.asList(orderEntry.getFiles(OrderRootType.CLASSES)));
        break;
      }
 else {
        if ((mySourcesFilter & TEST_SOURCES) == 0) {
          cpFiles.addAll(Arrays.asList(orderEntry.getFiles(OrderRootType.PRODUCTION_COMPILATION_CLASSES)));
        }
 else {
          cpFiles.addAll(Arrays.asList(orderEntry.getFiles(OrderRootType.COMPILATION_CLASSES)));
        }
      }
    }
  }
  cpFiles.addAll(jdkFiles);
  return cpFiles;
}
