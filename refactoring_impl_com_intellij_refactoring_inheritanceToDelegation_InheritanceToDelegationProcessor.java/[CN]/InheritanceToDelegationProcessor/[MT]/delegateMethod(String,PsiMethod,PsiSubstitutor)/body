{
  substitutor=GenerateMembersUtil.correctSubstitutor(method,substitutor);
  PsiMethod methodToAdd=GenerateMembersUtil.substituteGenericMethod(method,substitutor);
  final PsiModifierList modifierList=methodToAdd.getModifierList();
  modifierList.setModifierProperty(PsiModifier.ABSTRACT,false);
  if (AnnotationUtil.isAnnotated(method,AnnotationUtil.NULLABLE,false)) {
    modifierList.addAfter(myFactory.createAnnotationFromText("@" + AnnotationUtil.NULLABLE,methodToAdd),null);
  }
 else   if (AnnotationUtil.isAnnotated(method,AnnotationUtil.NOT_NULL,false)) {
    modifierList.addAfter(myFactory.createAnnotationFromText("@" + AnnotationUtil.NOT_NULL,methodToAdd),null);
  }
  final String delegationBody=getDelegationBody(methodToAdd,delegationTarget);
  PsiCodeBlock newBody=myFactory.createCodeBlockFromText(delegationBody,method);
  PsiCodeBlock oldBody=methodToAdd.getBody();
  if (oldBody != null) {
    oldBody.replace(newBody);
  }
 else {
    methodToAdd.addBefore(newBody,null);
  }
  if (methodToAdd.getDocComment() != null)   methodToAdd.getDocComment().delete();
  methodToAdd=(PsiMethod)CodeStyleManager.getInstance(myProject).reformat(methodToAdd);
  methodToAdd=(PsiMethod)CodeStyleManager.getInstance(myProject).shortenClassReferences(methodToAdd);
  return methodToAdd;
}
