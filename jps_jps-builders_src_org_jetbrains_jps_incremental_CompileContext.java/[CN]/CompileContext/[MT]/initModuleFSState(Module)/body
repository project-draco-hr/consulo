{
  final HashSet<File> currentFiles=new HashSet<File>();
  markDirtyFiles(module,myTsStorage,false,isCompilingTests() ? DirtyMarkScope.TESTS : DirtyMarkScope.PRODUCTION,currentFiles);
  final SourceToOutputMapping sourceToOutputMap=getDataManager().getSourceToOutputMap(module.getName(),isCompilingTests());
  for (final Iterator<String> it=sourceToOutputMap.getKeysIterator(); it.hasNext(); ) {
    final String path=it.next();
    final File file=new File(path);
    if (!currentFiles.contains(file)) {
      myProjectDescriptor.fsState.registerDeleted(module.getName(),file,isCompilingTests(),myTsStorage);
    }
  }
}
