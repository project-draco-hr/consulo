{
  final Map<PluginId,IdeaPluginDescriptor> idToDescriptorMap=new HashMap<PluginId,IdeaPluginDescriptor>();
  for (  final IdeaPluginDescriptor descriptor : descriptors) {
    idToDescriptorMap.put(descriptor.getPluginId(),descriptor);
  }
  myIdToNumberMap.put(PluginId.getId(PluginManagerCore.CORE_PLUGIN_ID),0);
  final Stack<PluginId> visited=new Stack<PluginId>();
  for (int idx=0; idx < descriptors.length && myIdToNumberMap.size() != descriptors.length; idx++) {
    assignNumbers(descriptors[idx].getPluginId(),idToDescriptorMap,visited);
    visited.clear();
  }
}
