{
  ExecutionResult executionResult=createExecutionResult(session);
  myConsole=executionResult.getExecutionConsole();
  myUi.addContent(createFramesContent(session),0,PlaceInGrid.left,false);
  myUi.addContent(createVariablesContent(session),0,PlaceInGrid.center,false);
  myUi.addContent(createWatchesContent(session,sessionData),0,PlaceInGrid.right,false);
  final Content consoleContent=createConsoleContent();
  myUi.addContent(consoleContent,1,PlaceInGrid.bottom,false);
  if (myConsole instanceof ObservableConsoleView) {
    ObservableConsoleView observable=(ObservableConsoleView)myConsole;
    observable.addChangeListener(new ObservableConsoleView.ChangeListener(){
      public void contentAdded(      final Collection<ConsoleViewContentType> types){
        if (types.contains(ConsoleViewContentType.ERROR_OUTPUT) || types.contains(ConsoleViewContentType.SYSTEM_OUTPUT)) {
          consoleContent.fireAlert();
        }
      }
    }
,consoleContent);
  }
  session.getDebugProcess().registerAdditionalContent(myUi);
  myRunContentDescriptor=new RunContentDescriptor(myConsole,executionResult.getProcessHandler(),myUi.getComponent(),getSessionName());
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return myRunContentDescriptor;
  }
  DefaultActionGroup group=new DefaultActionGroup();
  final Executor executor=DefaultDebugExecutor.getDebugExecutorInstance();
  if (runner != null && environment != null) {
    RestartAction restarAction=new RestartAction(executor,runner,myRunContentDescriptor.getProcessHandler(),XDebuggerUIConstants.DEBUG_AGAIN_ICON,myRunContentDescriptor,environment);
    group.add(restarAction);
    restarAction.registerShortcut(myUi.getComponent());
  }
  addActionToGroup(group,XDebuggerActions.RESUME);
  addActionToGroup(group,XDebuggerActions.PAUSE);
  addActionToGroup(group,IdeActions.ACTION_STOP_PROGRAM);
  group.addSeparator();
  addActionToGroup(group,XDebuggerActions.VIEW_BREAKPOINTS);
  addActionToGroup(group,XDebuggerActions.MUTE_BREAKPOINTS);
  group.addSeparator();
  group.addSeparator();
  group.add(myUi.getOptions().getLayoutActions());
  group.addSeparator();
  group.add(PinToolwindowTabAction.getPinAction());
  group.add(new CloseAction(executor,myRunContentDescriptor,getProject()));
  group.add(new ContextHelpAction(executor.getHelpId()));
  myUi.getOptions().setLeftToolbar(group,ActionPlaces.DEBUGGER_TOOLBAR);
  if (environment != null) {
    final RunProfile runConfiguration=environment.getRunProfile();
    registerFileMatcher(runConfiguration);
    initLogConsoles(runConfiguration,myRunContentDescriptor.getProcessHandler());
  }
  rebuildViews();
  return myRunContentDescriptor;
}
