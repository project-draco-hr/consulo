{
  if (newFacets.isEmpty()) {
    return;
  }
  boolean showNotification=true;
  HashMap<DetectedFacetInfo<Module>,List<VirtualFile>> filesMap=getFilesMap(newFacets);
  if (!filesMap.isEmpty() && showNotification) {
    final Set<DetectedFacetInfo<Module>> detectedFacetInfos=filesMap.keySet();
    final FacetDetectedNotification notification;
    if (filesMap.size() == 1) {
      final DetectedFacetInfo<Module> facetInfo=detectedFacetInfos.iterator().next();
      final List<VirtualFile> files=filesMap.get(facetInfo);
      notification=createSingleFacetDetectedNotification(facetInfo,VfsUtil.toVirtualFileArray(files));
    }
 else {
      notification=createSeveralFacetsDetectedNotification(filesMap.keySet());
    }
    myNotifications.add(notification);
    Notifications.Bus.notify(notification,myProject);
  }
 else {
    myPendingNewFacets.addAll(newFacets);
  }
}
