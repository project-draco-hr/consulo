{
  if (!(file instanceof XmlFile)) {
    return ProblemDescriptor.EMPTY_ARRAY;
  }
  AndroidFacet facet=AndroidFacet.getInstance(file);
  if (facet == null) {
    return ProblemDescriptor.EMPTY_ARRAY;
  }
  if (AndroidUnknownAttributeInspection.isMyFile(facet,file)) {
    final String resourceType=facet.getLocalResourceManager().getFileResourceType(file);
    if (ResourceType.XML.getName().equals(resourceType)) {
      final XmlTag rootTag=((XmlFile)file).getRootTag();
      if (rootTag == null || !AndroidXmlResourcesUtil.isSupportedRootTag(facet,rootTag.getName())) {
        return ProblemDescriptor.EMPTY_ARRAY;
      }
    }
    MyVisitor visitor=new MyVisitor(manager,isOnTheFly);
    file.accept(visitor);
    return visitor.myResult.toArray(new ProblemDescriptor[visitor.myResult.size()]);
  }
  return ProblemDescriptor.EMPTY_ARRAY;
}
