{
  String url=virtualFile.getPresentableUrl();
  if (project == null) {
    return url;
  }
 else {
    final VirtualFile projectFile=project.getProjectFile();
    if (projectFile != null) {
      final String projectHomeUrl=projectFile.getParent().getPresentableUrl();
      if (url.startsWith(projectHomeUrl)) {
        final String cont=url.substring(projectHomeUrl.length());
        if (cont.length() == 0)         return null;
        url="..." + cont;
      }
    }
  }
  return url;
}
