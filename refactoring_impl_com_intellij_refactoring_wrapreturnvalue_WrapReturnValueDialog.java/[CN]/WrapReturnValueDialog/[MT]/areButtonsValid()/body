{
  final Project project=sourceMethod.getProject();
  final PsiNameHelper nameHelper=JavaPsiFacade.getInstance(project).getNameHelper();
  if (useExistingClassButton.isSelected()) {
    return myFieldsCombo.getSelectedItem() != null && existingClassField.getText().length() != 0;
  }
  if (myCreateInnerClassButton.isSelected()) {
    final String innerClassName=getInnerClassName().trim();
    return nameHelper.isIdentifier(innerClassName) && sourceMethod.getContainingClass().findInnerClassByName(innerClassName,false) == null;
  }
  final String packageName=getPackageName();
  if (packageName.length() == 0 || PackageNameUtil.containsNonIdentifier(nameHelper,packageName)) {
    return false;
  }
  final String className=getClassName();
  return !(className.length() == 0 || !nameHelper.isIdentifier(className));
}
