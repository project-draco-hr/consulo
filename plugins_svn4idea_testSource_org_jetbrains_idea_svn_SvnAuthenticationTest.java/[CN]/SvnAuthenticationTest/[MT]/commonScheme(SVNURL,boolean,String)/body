{
  String kind=null;
  final String actualRealm=realm == null ? "realm" : realm;
  final String protocol=url.getProtocol();
  if (username) {
    kind=ISVNAuthenticationManager.USERNAME;
  }
 else   if ("svn+ssh".equals(protocol)) {
    kind=ISVNAuthenticationManager.SSH;
  }
 else   if ("http".equals(protocol)) {
    kind=ISVNAuthenticationManager.PASSWORD;
  }
 else   if ("https".equals(protocol)) {
    kind=ISVNAuthenticationManager.SSL;
  }
 else   if ("file".equals(protocol)) {
    kind=ISVNAuthenticationManager.USERNAME;
  }
  SVNAuthentication authentication=null;
  try {
    authentication=myAuthenticationManager.getFirstAuthentication(kind,actualRealm,url);
    while (!passwordSpecified(authentication)) {
      authentication=myAuthenticationManager.getNextAuthentication(kind,actualRealm,url);
    }
  }
  finally {
    myAuthenticationManager.acknowledgeAuthentication(authentication != null,kind,actualRealm,null,authentication);
  }
}
