{
  vcs.createDirectory("dir");
  fireRefreshStarted();
  fireCreated(new TestVirtualFile("dir/f1",null,-1));
  assertFalse(vcs.hasEntry("dir/f1"));
  updateAndFireRefreshFinished();
  assertTrue(vcs.hasEntry("dir/f1"));
  fireRefreshStarted();
  fireCreated(new TestVirtualFile("dir/f2",null,-1));
  assertFalse(vcs.hasEntry("dir/f2"));
  updateAndFireRefreshFinished();
  List<Revision> rr=vcs.getRevisionsFor("dir");
  assertEquals(3,rr.size());
  assertEquals("External change",rr.get(0).getCauseChangeName());
  assertEquals("External change",rr.get(1).getCauseChangeName());
}
