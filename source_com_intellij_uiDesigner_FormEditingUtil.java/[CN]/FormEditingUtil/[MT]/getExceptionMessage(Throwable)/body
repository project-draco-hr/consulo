{
  if (ex instanceof RuntimeException) {
    final Throwable cause=ex.getCause();
    if (cause != null && cause != ex) {
      return getExceptionMessage(cause);
    }
  }
 else   if (ex instanceof InvocationTargetException) {
    final Throwable target=((InvocationTargetException)ex).getTargetException();
    if (target != null && target != ex) {
      return getExceptionMessage(target);
    }
  }
  String message=ex.getMessage();
  if (ex instanceof ClassNotFoundException) {
    message=message != null ? UIDesignerBundle.message("error.class.not.found.N",message) : UIDesignerBundle.message("error.class.not.found");
  }
 else   if (ex instanceof NoClassDefFoundError) {
    message=message != null ? UIDesignerBundle.message("error.required.class.not.found.N",message) : UIDesignerBundle.message("error.required.class.not.found");
  }
  return message;
}
