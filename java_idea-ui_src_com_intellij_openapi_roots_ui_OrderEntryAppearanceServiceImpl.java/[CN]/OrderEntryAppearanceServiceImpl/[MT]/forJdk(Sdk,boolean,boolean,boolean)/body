{
  if (jdk == null) {
    return FileAppearanceService.getInstance().forInvalidUrl(NO_JDK);
  }
  String name=jdk.getName();
  CompositeAppearance appearance=new CompositeAppearance();
  appearance.setIcon(jdk.getSdkType().getIcon());
  VirtualFile homeDirectory=jdk.getHomeDirectory();
  SimpleTextAttributes attributes=getTextAttributes(homeDirectory != null && homeDirectory.isValid(),selected);
  CompositeAppearance.DequeEnd ending=appearance.getEnding();
  ending.addText(name,attributes);
  if (showVersion) {
    String versionString=jdk.getVersionString();
    if (versionString != null && !versionString.equals(name)) {
      SimpleTextAttributes textAttributes=isInComboBox ? SimpleTextAttributes.SYNTHETIC_ATTRIBUTES : SimpleTextAttributes.GRAY_ATTRIBUTES;
      ending.addComment(versionString,textAttributes);
    }
  }
  return ending.getAppearance();
}
