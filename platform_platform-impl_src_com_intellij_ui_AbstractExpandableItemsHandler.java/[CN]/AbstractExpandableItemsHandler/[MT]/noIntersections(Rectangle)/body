{
  Window owner=SwingUtilities.getWindowAncestor(myComponent);
  Window popup=SwingUtilities.getWindowAncestor(myTipComponent);
  Window focus=WindowManagerEx.getInstanceEx().getMostRecentFocusedWindow();
  if (focus == owner.getOwner()) {
    focus=null;
  }
  boolean focused=SystemInfo.isWindows || owner.isFocused();
  for (  Window other : owner.getOwnedWindows()) {
    if (!focused && !SystemInfo.isWindows) {
      focused=other.isFocused();
    }
    if (popup != other && other.isVisible() && bounds.x + 10 >= other.getX() && bounds.intersects(other.getBounds())) {
      return false;
    }
    if (focus == other) {
      focus=null;
    }
  }
  return focused && (focus == owner || focus == null || !owner.getBounds().intersects(focus.getBounds()));
}
