def __init__(self, ui, path):
    self.path = path
    self.caps = None
    self.handler = None
    (scheme, netloc, urlpath, query, frag) = urlparse.urlsplit(path)
    if (query or frag):
        raise util.Abort((_('unsupported URL component: "%s"') % (query or frag)))
    (self._url, authinfo) = url.getauthinfo(path)
    self.ui = ui
    self.ui.debug(('using %s\n' % self._url))
    self.urlopener = url.opener(ui, authinfo)
