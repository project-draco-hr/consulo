{
  Lexer lexer=new JavaLexer(LanguageLevel.JDK_1_3);
  lexer.start(text);
  skipWhiteSpaceAndComments(lexer);
  if (lexer.getTokenType() != JavaTokenType.PACKAGE_KEYWORD)   return "";
  lexer.advance();
  skipWhiteSpaceAndComments(lexer);
  StringBuilder buffer=new StringBuilder();
  while (true) {
    if (lexer.getTokenType() != JavaTokenType.IDENTIFIER)     break;
    buffer.append(text,lexer.getTokenStart(),lexer.getTokenEnd() - lexer.getTokenStart());
    lexer.advance();
    skipWhiteSpaceAndComments(lexer);
    if (lexer.getTokenType() != JavaTokenType.DOT)     break;
    buffer.append('.');
    lexer.advance();
    skipWhiteSpaceAndComments(lexer);
  }
  String packageName=buffer.toString();
  if (packageName.length() == 0 || StringUtil.endsWithChar(packageName,'.'))   return null;
  return packageName;
}
