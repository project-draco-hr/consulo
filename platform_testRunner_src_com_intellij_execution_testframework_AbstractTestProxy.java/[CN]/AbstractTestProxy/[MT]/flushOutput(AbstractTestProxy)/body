{
  testProxy.flush();
  AbstractTestProxy parent=testProxy.getParent();
  while (parent != null) {
    final List<? extends AbstractTestProxy> children=parent.getChildren();
    if (!testProxy.isInProgress() && testProxy.equals(children.get(children.size() - 1))) {
      parent.flush();
    }
 else {
      break;
    }
    testProxy=parent;
    parent=parent.getParent();
  }
}
