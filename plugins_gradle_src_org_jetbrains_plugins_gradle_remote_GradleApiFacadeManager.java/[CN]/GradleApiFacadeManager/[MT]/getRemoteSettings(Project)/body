{
  File gradleHome=myGradleInstallationManager.getGradleHome(project);
  boolean useWrapper=true;
  if (project != null) {
    useWrapper=!GradleSettings.getInstance(project).isPreferLocalInstallationToWrapper();
  }
  String localGradlePath=null;
  if (gradleHome != null) {
    try {
      localGradlePath=gradleHome.getCanonicalPath();
    }
 catch (    IOException e) {
      localGradlePath=gradleHome.getAbsolutePath();
    }
  }
  final String serviceDirectory;
  if (project == null) {
    serviceDirectory=null;
  }
 else {
    serviceDirectory=GradleSettings.getInstance(project).getServiceDirectoryPath();
  }
  RemoteGradleProcessSettings result=new RemoteGradleProcessSettings(localGradlePath,serviceDirectory,useWrapper);
  int ttl=SystemProperties.getIntProperty(REMOTE_PROCESS_TTL_IN_MS_KEY,DEFAULT_REMOTE_PROCESS_TTL_MS);
  result.setTtlInMs(ttl);
  GradleJavaHelper javaHelper=new GradleJavaHelper();
  result.setJavaHome(javaHelper.getJdkHome(project));
  return result;
}
