{
  final HighlightInfo[] infos=doHighlighting();
  final int offset=getEditor().getCaretModel().getOffset();
  final List<IntentionAction> availableActions=new ArrayList<IntentionAction>();
  for (int i=0; infos != null && i < infos.length; i++) {
    HighlightInfo info=infos[i];
    final int startOffset=info.fixStartOffset;
    final int endOffset=info.fixEndOffset;
    if (startOffset <= offset && offset <= endOffset && info.quickFixActionRanges != null) {
      for (int j=0; j < info.quickFixActionRanges.size(); j++) {
        Pair<IntentionAction,TextRange> pair=info.quickFixActionRanges.get(j);
        IntentionAction action=pair.first;
        TextRange range=pair.second;
        if (range.getStartOffset() <= offset && offset <= range.getEndOffset() && action.isAvailable(getProject(),getEditor(),getFile())) {
          availableActions.add(action);
        }
      }
    }
  }
  return availableActions;
}
