{
  super(project,true);
  myModuleCreation=virtualFile != null;
  setTitle(myModuleCreation ? IdeBundle.message("title.add.module") : IdeBundle.message("title.new.project"));
  DListItem root=DListItem.builder().withItems(DListItem.builder().withName("Java").withIcon(AllIcons.Nodes.Static).withItems(DListItem.builder().withName("Hello World").withIcon(AllIcons.Nodes.Class)),DListItem.builder().withName("C#").withIcon(AllIcons.Nodes.TypeAlias).withItems(DListItem.builder().withName("ASP").withIcon(AllIcons.Nodes.Artifact)),DListItem.builder().withName("Empty").withIcon(AllIcons.FileTypes.Text)).create();
  mySplitter=new JBSplitter(0.3f);
  mySplitter.setSplitterProportionKey("#CreateProjectOrModuleDialog.Splitter");
  DListWithChildren list=new DListWithChildren();
  list.select(root);
  mySplitter.setFirstComponent(new JBScrollPane(list));
  final JPanel panel=new JPanel(new VerticalFlowLayout());
  myNameField=new JTextField();
  myLocationField=new TextFieldWithBrowseButton();
  panel.add(LabeledComponent.create(myNameField,"Name").setLabelLocation(BorderLayout.WEST));
  if (virtualFile != null) {
    myNameField.setText(virtualFile.getName());
  }
 else {
    panel.add(LabeledComponent.create(myLocationField,"Path").setLabelLocation(BorderLayout.WEST));
    new LocationNameFieldsBinding(project,myLocationField,myNameField,ProjectUtil.getBaseDir(),"Select Directory");
  }
  panel.add(new SeparatorComponent());
  final JPanel nullPanel=new JPanel(new BorderLayout());
  mySplitter.setSecondComponent(nullPanel);
  list.setConsumer(new Consumer<DListItem>(){
    @Override public void consume(    DListItem dListItem){
      if (dListItem != null) {
        mySplitter.setSecondComponent(panel);
      }
 else {
        mySplitter.setSecondComponent(nullPanel);
      }
      mySplitter.invalidate();
    }
  }
);
  setSize(800,600);
  init();
}
