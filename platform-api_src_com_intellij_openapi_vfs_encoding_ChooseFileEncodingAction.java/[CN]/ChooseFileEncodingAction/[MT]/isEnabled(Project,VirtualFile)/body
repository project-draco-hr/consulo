{
  if (project == null)   return false;
  boolean enabled=true;
  if (virtualFile != null) {
    Charset charset=encodingFromContent(project,virtualFile);
    if (charset != null) {
      enabled=false;
    }
 else     if (!virtualFile.isDirectory()) {
      FileType fileType=FileTypeManager.getInstance().getFileTypeByFile(virtualFile);
      if (fileType.isBinary() || fileType == StdFileTypes.GUI_DESIGNER_FORM || fileType == StdFileTypes.IDEA_MODULE || fileType == StdFileTypes.IDEA_PROJECT || fileType == StdFileTypes.IDEA_WORKSPACE || fileType == StdFileTypes.PATCH) {
        enabled=false;
      }
    }
  }
  return enabled;
}
