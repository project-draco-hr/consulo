{
  myProject=project;
  myPlatformFacade=platformFacade;
  myGit=git;
  Map<VirtualFile,List<VirtualFile>> filesByRoots=sortFilesByRoots(files);
  boolean shouldWarn=false;
  Collection<VirtualFile> rootsWithIncorrectAutoCrlf=getRootsWithIncorrectAutoCrlf(filesByRoots);
  if (!rootsWithIncorrectAutoCrlf.isEmpty()) {
    Map<VirtualFile,Collection<VirtualFile>> crlfFilesByRoots=findFilesWithCrlf(filesByRoots,rootsWithIncorrectAutoCrlf);
    if (!crlfFilesByRoots.isEmpty()) {
      Map<VirtualFile,Collection<VirtualFile>> crlfFilesWithoutAttrsByRoots=findFilesWithoutAttrs(crlfFilesByRoots);
      shouldWarn=!crlfFilesWithoutAttrsByRoots.isEmpty();
    }
  }
  myShouldWarn=shouldWarn;
}
