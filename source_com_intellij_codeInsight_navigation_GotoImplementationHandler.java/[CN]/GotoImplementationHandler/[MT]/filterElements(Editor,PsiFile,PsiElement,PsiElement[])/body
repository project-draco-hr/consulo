{
  if (targetElements.length <= 1)   return targetElements;
  Project project=file.getProject();
  ResultsFilter filter=createFilter(project,editor,file,element);
  ArrayList<PsiElement> result=new ArrayList<PsiElement>();
  for (int i=0; i < targetElements.length; i++) {
    PsiElement targetElement=targetElements[i];
    if (targetElement instanceof PsiClass && filter.acceptClass(((PsiClass)targetElement))) {
      result.add(targetElement);
    }
 else     if (targetElement instanceof PsiMethod && filter.acceptMethod(((PsiMethod)targetElement))) {
      result.add(targetElement);
    }
  }
  if (result.size() == targetElements.length) {
    return targetElements;
  }
 else {
    return result.toArray(new PsiElement[result.size()]);
  }
}
