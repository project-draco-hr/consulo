{
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  if (!fileIndex.isIgnored(file)) {
    String relPath=VfsUtil.getRelativePath(file,sourceRoot,'/');
    if (relPath != null && MavenUtil.isIncluded(relPath,includes,excludes)) {
      if (processor.process(file,resOutputDir + "/" + relPath)) {
        return true;
      }
    }
  }
  if (file.isDirectory()) {
    for (    VirtualFile child : file.getChildren()) {
      if (processResources(project,sourceRoot,child,includes,excludes,resOutputDir,processor)) {
        return true;
      }
    }
  }
  return false;
}
