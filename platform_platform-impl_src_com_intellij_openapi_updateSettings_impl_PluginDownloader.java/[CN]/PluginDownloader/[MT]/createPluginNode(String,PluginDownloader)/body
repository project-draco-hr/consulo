{
  if (downloader.getDescriptor() instanceof PluginNode) {
    return (PluginNode)downloader.getDescriptor();
  }
  final VirtualFile pluginFile=findPluginFile(downloader.myPluginUrl,host);
  if (pluginFile != null) {
    final PluginNode node=new PluginNode(PluginId.getId(downloader.getPluginId()));
    node.setName(downloader.getPluginName());
    node.setVersion(downloader.getPluginVersion());
    node.setRepositoryName(host);
    node.setDownloadUrl(pluginFile.getUrl());
    node.addDependency(downloader.getDepends());
    node.addOptionalDependency(downloader.getOptionalDepends());
    node.setDescription(downloader.getDescription());
    return node;
  }
  return null;
}
