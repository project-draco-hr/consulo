{
  LOG.assertTrue(myFile != null);
  if (myOldFile != null) {
    StartupActionScriptManager.ActionCommand deleteOld=new StartupActionScriptManager.DeleteCommand(myOldFile);
    StartupActionScriptManager.addActionCommand(deleteOld);
  }
  if (myFile.getName().endsWith(".jar")) {
    StartupActionScriptManager.ActionCommand copyPlugin=new StartupActionScriptManager.CopyCommand(myFile,new File(PathManager.getPluginsPath() + File.separator + myFile.getName()));
    StartupActionScriptManager.addActionCommand(copyPlugin);
  }
 else {
    String unzipPath;
    if (ZipUtil.isZipContainsFolder(myFile)) {
      unzipPath=PathManager.getPluginsPath();
    }
 else {
      unzipPath=PathManager.getPluginsPath() + File.separator + getPluginName();
    }
    StartupActionScriptManager.ActionCommand unzip=new StartupActionScriptManager.UnzipCommand(myFile,new File(unzipPath));
    StartupActionScriptManager.addActionCommand(unzip);
  }
  StartupActionScriptManager.ActionCommand deleteTemp=new StartupActionScriptManager.DeleteCommand(myFile);
  StartupActionScriptManager.addActionCommand(deleteTemp);
}
