{
  myFile.putUserData(HAS_ERROR_ELEMENT,myHasErrorElement);
  ProperTextRange range=new ProperTextRange(myStartOffset,myEndOffset);
  Collection<HighlightInfo> infos=myInjectedPsiHighlights.get(range);
  if (infos == null) {
    infos=new ArrayList<HighlightInfo>(myHighlights.size());
    myInjectedPsiHighlights.put(range,infos);
  }
  infos.addAll(myHighlights);
  UpdateHighlightersUtil.setHighlightersToEditor(myProject,myDocument,myInjectedPsiHighlights,Pass.UPDATE_ALL);
  if (myUpdateAll) {
    reportErrorsToWolf();
  }
}
