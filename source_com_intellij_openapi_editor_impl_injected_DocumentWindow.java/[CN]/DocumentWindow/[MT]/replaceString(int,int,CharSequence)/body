{
  if (startOffset < myPrefix.length() || startOffset > getTextLength() - mySuffix.length() || endOffset < myPrefix.length() || endOffset > getTextLength() - mySuffix.length()) {
    LOG.assertTrue(s.equals(getText().substring(startOffset,endOffset)));
    return;
  }
  if (isOneLine()) {
    s=StringUtil.replace(s.toString(),"\n","");
  }
  myDelegate.replaceString(injectedToHost(startOffset),injectedToHost(endOffset),s);
}
