{
  if (line < myPrefixLineCount) {
    return myDelegate.getLineNumber(myHostRanges[0].getStartOffset());
  }
  int lineCount=getLineCount();
  if (line > lineCount - mySuffixLineCount) {
    return lineCount;
  }
  int offset=getLineStartOffset(line);
  int hostOffset=injectedToHost(offset);
  return myDelegate.getLineNumber(hostOffset);
}
