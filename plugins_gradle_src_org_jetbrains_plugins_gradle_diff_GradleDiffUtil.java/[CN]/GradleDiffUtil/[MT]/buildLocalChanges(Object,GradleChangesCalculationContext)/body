{
  if (entity instanceof GradleEntity) {
    buildLocalChanges((GradleEntity)entity,context);
  }
 else {
    GradleUtil.dispatch(entity,new IdeEntityVisitor(){
      @Override public void visit(      @NotNull Project project){
      }
      @Override public void visit(      @NotNull Module module){
        context.register(new GradleModulePresenceChange(null,module));
        for (        ModuleAwareContentRoot contentRoot : context.getPlatformFacade().getContentRoots(module)) {
          visit(contentRoot);
        }
        for (        OrderEntry entry : context.getPlatformFacade().getOrderEntries(module)) {
          GradleUtil.dispatch(entry,this);
        }
      }
      @Override public void visit(      @NotNull ModuleAwareContentRoot contentRoot){
        context.register(new GradleContentRootPresenceChange(null,contentRoot));
      }
      @Override public void visit(      @NotNull LibraryOrderEntry libraryDependency){
        context.register(new GradleLibraryDependencyPresenceChange(null,libraryDependency));
      }
      @Override public void visit(      @NotNull ModuleOrderEntry moduleDependency){
        final Module module=moduleDependency.getModule();
        if (module != null) {
          context.register(new GradleModuleDependencyPresenceChange(null,moduleDependency));
        }
      }
      @Override public void visit(      @NotNull Library library){
        for (        VirtualFile file : library.getFiles(OrderRootType.CLASSES)) {
          GradleJarId jarId=new GradleJarId(context.getPlatformFacade().getLocalFileSystemPath(file),LibraryPathType.BINARY,new GradleLibraryId(GradleEntityOwner.IDE,GradleUtil.getLibraryName(library)));
          context.register(new GradleJarPresenceChange(null,jarId));
        }
      }
    }
);
  }
}
