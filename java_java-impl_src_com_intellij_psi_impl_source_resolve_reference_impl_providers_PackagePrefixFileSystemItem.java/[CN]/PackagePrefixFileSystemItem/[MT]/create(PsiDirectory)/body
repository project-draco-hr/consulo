{
  final ArrayList<PsiPackage> packages=new ArrayList<PsiPackage>();
  for (PsiPackage cur=JavaDirectoryService.getInstance().getPackage(directory); cur != null; cur=cur.getParentPackage()) {
    packages.add(0,cur);
  }
  return new PackagePrefixFileSystemItem(directory,0,packages.toArray(new PsiPackage[packages.size()]));
}
