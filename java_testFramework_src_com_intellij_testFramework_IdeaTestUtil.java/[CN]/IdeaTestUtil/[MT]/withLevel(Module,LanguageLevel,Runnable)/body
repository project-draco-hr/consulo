{
  final LanguageLevelProjectExtension projectExt=LanguageLevelProjectExtension.getInstance(module.getProject());
  final LanguageLevelModuleExtension moduleExt=LanguageLevelModuleExtension.getInstance(module);
  final LanguageLevel projectLevel=projectExt.getLanguageLevel();
  final LanguageLevel moduleLevel=moduleExt.getLanguageLevel();
  try {
    projectExt.setLanguageLevel(level);
    setModuleLanguageLevel(level,moduleExt);
    r.run();
  }
  finally {
    setModuleLanguageLevel(moduleLevel,moduleExt);
    projectExt.setLanguageLevel(projectLevel);
  }
}
