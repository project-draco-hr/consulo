{
  final AntConfigurationBase antConfig=AntConfigurationBase.getInstance(getManager().getProject());
  final XmlElement xmlElement=getXmlElement();
  if (xmlElement == null) {
    return getAntProject();
  }
  PsiFile containingFile=xmlElement.getContainingFile();
  if (containingFile != null) {
    containingFile=containingFile.getOriginalFile();
  }
  if (!(containingFile instanceof XmlFile)) {
    return getAntProject();
  }
  final XmlFile contextFile=antConfig.getEffectiveContextFile(((XmlFile)containingFile));
  if (contextFile == null) {
    return getAntProject();
  }
  return AntSupport.getAntDomProject(contextFile);
}
