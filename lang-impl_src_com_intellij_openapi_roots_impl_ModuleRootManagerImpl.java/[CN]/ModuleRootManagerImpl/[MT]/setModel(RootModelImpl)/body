{
  if (myRootModel != rootModel) {
    myRootModel.disposeModel();
  }
  if (!isModuleAdded) {
    myRootModel=rootModel;
  }
 else {
    final VirtualFilePointerListener listener=((ProjectRootManagerImpl)ProjectRootManager.getInstance(myModule.getProject())).getVirtualFilePointerListener();
    myRootModel=new RootModelImpl(rootModel,this,false,new RootConfigurationAccessor(),listener,myFilePointerManager,myProjectRootManager);
    rootModel.disposeModel();
  }
}
