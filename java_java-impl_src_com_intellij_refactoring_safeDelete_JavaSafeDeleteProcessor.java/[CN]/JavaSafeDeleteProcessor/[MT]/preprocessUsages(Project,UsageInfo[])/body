{
  ArrayList<UsageInfo> result=new ArrayList<UsageInfo>();
  ArrayList<UsageInfo> overridingMethods=new ArrayList<UsageInfo>();
  for (  UsageInfo usage : usages) {
    if (usage.isNonCodeUsage) {
      result.add(usage);
    }
 else     if (usage instanceof SafeDeleteOverridingMethodUsageInfo) {
      overridingMethods.add(usage);
    }
 else {
      result.add(usage);
    }
  }
  if (!overridingMethods.isEmpty()) {
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      result.addAll(overridingMethods);
    }
 else {
      OverridingMethodsDialog dialog=new OverridingMethodsDialog(project,overridingMethods);
      dialog.show();
      if (!dialog.isOK())       return null;
      result.addAll(dialog.getSelected());
    }
  }
  return result.toArray(new UsageInfo[result.size()]);
}
