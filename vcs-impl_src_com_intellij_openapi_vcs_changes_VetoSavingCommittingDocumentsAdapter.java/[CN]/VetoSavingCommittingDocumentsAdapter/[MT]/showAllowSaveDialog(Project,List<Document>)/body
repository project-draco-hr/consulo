{
  StringBuilder messageBuilder=new StringBuilder("The following " + (documentsToWarn.size() == 1 ? "file is" : "files are") + " currently being committed to the VCS. "+ "Saving now could cause inconsistent data to be committed.\n");
  for (  Document document : documentsToWarn) {
    final VirtualFile file=myFileDocumentManager.getFile(document);
    messageBuilder.append(FileUtil.toSystemDependentName(file.getPath())).append("\n");
  }
  messageBuilder.append("Save the ").append(documentsToWarn.size() == 1 ? "file" : "files").append(" now?");
  int rc=Messages.showDialog(project,messageBuilder.toString(),"Save Files During Commit",new String[]{"Save Now","Postpone Save"},0,Messages.getQuestionIcon());
  return rc == 0;
}
