{
  if (!myExpression.isValid() || !myExpectedType.isValid())   return;
  final GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(project);
  final GrSafeCastExpression cast=(GrSafeCastExpression)factory.createExpressionFromText("foo as String");
  final GrTypeElement typeElement=factory.createTypeElement(myExpectedType);
  cast.getOperand().replace(myExpression);
  cast.getCastTypeElement().replace(typeElement);
  final GrExpression replaced=myExpression.replaceWithExpression(cast,true);
  GrReferenceAdjuster.shortenReferences(replaced);
}
