{
  Document hostDocument=document instanceof DocumentWindow ? ((DocumentWindow)document).getDelegate() : document;
  EditorImpl editor=new EditorImpl(hostDocument,isViewer,project);
  myEditors.add(editor);
  myEditorEventMulticaster.registerEditor(editor);
  myEditorFactoryEventDispatcher.getMulticaster().editorCreated(new EditorFactoryEvent(this,editor));
  if (LOG.isDebugEnabled()) {
    LOG.debug("number of Editors after create: " + myEditors.size());
  }
  return editor;
}
