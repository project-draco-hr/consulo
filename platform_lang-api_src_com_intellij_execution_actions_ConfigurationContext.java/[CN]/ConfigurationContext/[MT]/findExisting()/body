{
  if (myLocation == null) {
    return null;
  }
  final Set<ConfigurationType> types=new HashSet<ConfigurationType>();
  if (myRuntimeConfiguration != null) {
    types.add(myRuntimeConfiguration.getType());
  }
 else {
    final List<RuntimeConfigurationProducer> producers=PreferedProducerFind.findPreferredProducers(myLocation,this,true);
    if (producers == null)     return null;
    for (    RuntimeConfigurationProducer producer : producers) {
      types.add(producer.createProducer(myLocation,this).getConfigurationType());
    }
  }
  for (  ConfigurationType type : types) {
    if (!(type instanceof LocatableConfigurationType))     continue;
    final LocatableConfigurationType factoryLocatable=(LocatableConfigurationType)type;
    final RunnerAndConfigurationSettings[] configurations=getRunManager().getConfigurationSettings(type);
    for (    final RunnerAndConfigurationSettings existingConfiguration : configurations) {
      if (factoryLocatable.isConfigurationByLocation(existingConfiguration.getConfiguration(),myLocation)) {
        return existingConfiguration;
      }
    }
  }
  return null;
}
