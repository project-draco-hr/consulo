{
  for (  final AutomaticRenamer automaticVariableRenamer : myRenamers) {
    if (!automaticVariableRenamer.hasAnythingToRename())     continue;
    final AutomaticRenamingDialog dialog=new AutomaticRenamingDialog(myProject,automaticVariableRenamer);
    dialog.show();
    if (!dialog.isOK())     return false;
  }
  for (  final AutomaticRenamer renamer : myRenamers) {
    final List<? extends PsiNamedElement> variables=renamer.getElements();
    for (    final PsiNamedElement variable : variables) {
      final String newName=renamer.getNewName(variable);
      if (newName != null) {
        addElement(variable,newName);
      }
    }
  }
  Runnable runnable=new Runnable(){
    public void run(){
      for (      final AutomaticRenamer renamer : myRenamers) {
        renamer.findUsages(variableUsages,mySearchInComments,mySearchTextOccurrences);
      }
    }
  }
;
  return ProgressManager.getInstance().runProcessWithProgressSynchronously(runnable,RefactoringBundle.message("searching.for.variables"),true,myProject);
}
