{
  final PsiExpression expression=(PsiExpression)element;
  final PsiManager psiManager=expression.getManager();
  final PsiConstantEvaluationHelper helper=JavaPsiFacade.getInstance(psiManager.getProject()).getConstantEvaluationHelper();
  final Object value=helper.computeConstantExpression(expression);
  @NonNls final String newExpression;
  if (value instanceof String) {
    final String string=(String)value;
    newExpression='"' + StringUtil.escapeStringCharacters(string) + '"';
  }
 else   if (value instanceof Character) {
    newExpression='\'' + StringUtil.escapeStringCharacters(value.toString()) + '\'';
  }
 else   if (value instanceof Long) {
    newExpression=value.toString() + 'L';
  }
 else   if (value == null) {
    newExpression="null";
  }
 else {
    newExpression=String.valueOf(value);
  }
  replaceExpression(newExpression,expression);
}
