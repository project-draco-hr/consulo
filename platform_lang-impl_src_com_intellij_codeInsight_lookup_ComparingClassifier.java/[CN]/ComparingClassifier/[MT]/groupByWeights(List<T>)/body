{
  TreeMap<Comparable,List<T>> map=new TreeMap<Comparable,List<T>>();
  for (  T t : source) {
    final Comparable weight=myWeights.get(t);
    if (weight == null) {
      throw new AssertionError(myName + "; " + myWeights.containsKey(t)+ "; element="+ t);
    }
    List<T> list=map.get(weight);
    if (list == null) {
      map.put(weight,list=new SmartList<T>());
    }
    list.add(t);
  }
  return map;
}
