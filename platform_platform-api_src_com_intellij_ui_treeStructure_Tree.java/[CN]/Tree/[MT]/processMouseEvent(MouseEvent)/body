{
  MouseEvent e2=e;
  if (SystemInfo.isMac) {
    if (SwingUtilities.isLeftMouseButton(e) && e.isControlDown() && e.getID() == MouseEvent.MOUSE_PRESSED) {
      int modifiers=e.getModifiers() & ~(InputEvent.CTRL_MASK | InputEvent.BUTTON1_MASK) | InputEvent.BUTTON3_MASK;
      e2=new MouseEvent(e.getComponent(),e.getID(),e.getWhen(),modifiers,e.getX(),e.getY(),e.getClickCount(),true,MouseEvent.BUTTON3);
    }
  }
 else   if (UIUtil.isUnderNimbusLookAndFeel() || UIUtil.isUnderGTKLookAndFeel()) {
    if (SwingUtilities.isLeftMouseButton(e) && (e.getID() == MouseEvent.MOUSE_PRESSED || e.getID() == MouseEvent.MOUSE_CLICKED)) {
      final TreePath path=getClosestPathForLocation(e.getX(),e.getY());
      if (path != null) {
        final Rectangle bounds=getPathBounds(path);
        if (bounds != null && e.getY() > bounds.y && e.getY() < bounds.y + bounds.height && (e.getX() >= bounds.x + bounds.width || e.getX() < bounds.x && !isLocationInExpandControl(path,e.getX(),e.getY()))) {
          int newX=bounds.x + bounds.width - 2;
          e2=new MouseEvent(e.getComponent(),e.getID(),e.getWhen(),e.getModifiers(),newX,e.getY(),e.getClickCount(),e.isPopupTrigger(),e.getButton());
        }
      }
    }
  }
  super.processMouseEvent(e2);
}
