{
  final Rectangle visible=getVisibleRect();
  boolean canHoldSelection=false;
  TreePath[] paths=getSelectionModel().getSelectionPaths();
  if (paths != null) {
    for (    TreePath each : paths) {
      final Rectangle selection=getPathBounds(each);
      if (selection != null && (g.getClipBounds().intersects(selection) || g.getClipBounds().contains(selection))) {
        if (myBusy && myBusyIcon != null) {
          Rectangle busyIconBounds=myBusyIcon.getBounds();
          if (selection.contains(busyIconBounds) || selection.intersects(busyIconBounds)) {
            canHoldSelection=false;
            break;
          }
 else {
            canHoldSelection=true;
          }
        }
 else {
          canHoldSelection=true;
        }
      }
    }
  }
  if (canHoldSelection) {
    if (!AbstractTreeBuilder.isToPaintSelection(this)) {
      mySelectionModel.holdSelection();
    }
  }
  try {
    super.paint(g);
    if (!visible.equals(myLastVisibleRec)) {
      updateBusyIconLocation();
    }
    myLastVisibleRec=visible;
  }
  finally {
    mySelectionModel.unholdSelection();
  }
}
