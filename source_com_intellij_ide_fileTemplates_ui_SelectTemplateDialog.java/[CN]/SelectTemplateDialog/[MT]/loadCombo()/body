{
  DefaultComboBoxModel model=new DefaultComboBoxModel();
  FileTemplate[] allTemplates=FileTemplateManager.getInstance().getAllTemplates();
  PsiDirectory[] dirs={myDirectory};
  for (int i=0; i < allTemplates.length; i++) {
    FileTemplate template=allTemplates[i];
    if (FileTemplateUtil.canCreateFromTemplate(dirs,template)) {
      model.addElement(template);
    }
  }
  if (myCbxTemplates == null) {
    myCbxTemplates=new JComboBox(model);
  }
 else {
    Object selected=myCbxTemplates.getSelectedItem();
    myCbxTemplates.setModel(model);
    if (selected != null) {
      myCbxTemplates.setSelectedItem(selected);
    }
  }
}
