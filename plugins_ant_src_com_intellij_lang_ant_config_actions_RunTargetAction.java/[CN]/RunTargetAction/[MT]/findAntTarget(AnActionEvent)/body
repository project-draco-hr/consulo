{
  final DataContext dataContext=e.getDataContext();
  final Editor editor=PlatformDataKeys.EDITOR.getData(dataContext);
  final Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null || editor == null)   return null;
  final VirtualFile file=PlatformDataKeys.VIRTUAL_FILE.getData(dataContext);
  if (file == null)   return null;
  final PsiFile psiFile=PsiManager.getInstance(project).findFile(file);
  if (!(psiFile instanceof XmlFile))   return null;
  final AntBuildFileBase antFile=AntConfigurationBase.getInstance(project).getAntBuildFile(psiFile);
  if (antFile == null)   return null;
  final XmlFile xmlFile=(XmlFile)psiFile;
  PsiElement at=xmlFile.findElementAt(editor.getCaretModel().getOffset());
  while (at != null && !(at instanceof XmlTag))   at=at.getParent();
  if (at == null)   return null;
  DomElement dom=AntSupport.getAntDomElement((XmlTag)at);
  while (dom != null && !(dom instanceof AntDomTarget))   dom=dom.getParent();
  final AntDomTarget tar=(AntDomTarget)dom;
  if (tar == null)   return null;
  return Pair.create(antFile,tar);
}
