{
  Lock lock=myVfsLock.readLock();
  lock.lock();
  try {
    Set<String> paths=myFilesToRefresh.get(externalSystemId);
    while (paths == null) {
      myFilesToRefresh.putIfAbsent(externalSystemId,ContainerUtilRt.<String>newHashSet());
      paths=myFilesToRefresh.get(externalSystemId);
    }
    paths.add(path);
  }
  finally {
    lock.unlock();
  }
}
