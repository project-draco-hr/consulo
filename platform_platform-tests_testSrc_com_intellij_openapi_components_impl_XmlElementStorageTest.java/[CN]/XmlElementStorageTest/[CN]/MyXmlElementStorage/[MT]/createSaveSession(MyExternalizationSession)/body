{
  return new MySaveSession(externalizationSession){
    @Override protected void doSave() throws StateStorageException {
      mySavedDocument=(Document)getDocumentToSave().clone();
    }
    @Override public Collection<IFile> getStorageFilesToSave() throws StateStorageException {
      return needsSave() ? getAllStorageFiles() : Collections.<IFile>emptyList();
    }
    @Override public List<IFile> getAllStorageFiles(){
      throw new UnsupportedOperationException("Method getAllStorageFiles not implemented in " + getClass());
    }
  }
;
}
