{
  MyXmlElementStorage storage=new MyXmlElementStorage(tag("root",tag("component",attr("name","test"),tag("foo"))),myParentDisposable);
  Element newState=tag("component",attr("name","test"),tag("bar"));
  StateStorage.ExternalizationSession externalizationSession=storage.startExternalization();
  externalizationSession.setState(this,"test",newState,null);
  storage.startSave(externalizationSession).save();
  assertNotNull(storage.mySavedElement);
  assertNotNull(storage.mySavedElement.getChild("component").getChild("bar"));
  assertNull(storage.mySavedElement.getChild("component").getChild("foo"));
}
