{
  LOG.assertTrue(ourInstance == null);
  ourInstance=this;
  myArgs=args;
  boolean isInternal=Boolean.getBoolean(ApplicationProperties.IDEA_IS_INTERNAL);
  boolean isUnitTest=Boolean.getBoolean(ApplicationProperties.CONSULO_IN_UNIT_TEST);
  boolean asWebApp=Boolean.getBoolean(ApplicationProperties.CONSULO_AS_WEB_APP);
  boolean headless=Main.isHeadless();
  patchSystem(headless);
  myStarter=createStarter(isUnitTest,asWebApp);
  myStarter.createApplication(isInternal,isUnitTest,headless,isUnitTest,args);
  myStarter.premain(args);
}
