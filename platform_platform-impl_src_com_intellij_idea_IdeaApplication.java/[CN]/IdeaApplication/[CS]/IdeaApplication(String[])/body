{
  LOG.assertTrue(ourInstance == null);
  ourInstance=this;
  myArgs=args;
  boolean isInternal=Boolean.getBoolean(ApplicationProperties.IDEA_IS_INTERNAL);
  boolean isUnitTest=Boolean.getBoolean(ApplicationProperties.CONSULO_IN_UNIT_TEST);
  boolean headless=Main.isHeadless();
  patchSystem(headless);
  myStarter=createStarter(isUnitTest);
  Splash splash=myStarter.createSplash(myArgs);
  ApplicationManagerEx.createApplication(isInternal,isUnitTest,headless,isUnitTest,ApplicationManagerEx.IDEA_APPLICATION,splash);
  myStarter.premain(args);
}
