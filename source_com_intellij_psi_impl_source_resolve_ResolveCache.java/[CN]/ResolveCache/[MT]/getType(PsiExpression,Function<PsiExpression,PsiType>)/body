{
  PsiType type;
  boolean isNewCall;
synchronized (PsiLock.LOCK) {
    isNewCall=!myCaclulatedlTypes.containsKey(call);
  }
  if (isNewCall) {
    type=f.fun(call);
synchronized (PsiLock.LOCK) {
      myCaclulatedlTypes.put(call,type);
    }
  }
 else {
synchronized (PsiLock.LOCK) {
      type=myCaclulatedlTypes.get(call);
    }
  }
  return type;
}
