{
  MapPair<K,V> pair=myManager.getUserData(key);
  if (pair == null) {
    pair=myManager.putUserDataIfAbsent(key,new MapPair<K,V>());
    final MapPair<K,V> _pair=pair;
    myManager.registerRunnableToRunOnChange(new Runnable(){
      public void run(){
        myClearCount.incrementAndGet();
        _pair.physicalMap.clear();
      }
    }
);
    myManager.registerRunnableToRunOnAnyChange(new Runnable(){
      public void run(){
        myClearCount.incrementAndGet();
        _pair.nonPhysicalMap.clear();
      }
    }
);
  }
  return forPhysical ? pair.physicalMap : pair.nonPhysicalMap;
}
