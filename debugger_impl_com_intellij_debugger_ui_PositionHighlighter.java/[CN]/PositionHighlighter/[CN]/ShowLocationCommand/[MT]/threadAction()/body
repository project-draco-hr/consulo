{
  final SourcePosition contextPosition=myContext.getSourcePosition();
  if (contextPosition == null) {
    return;
  }
  boolean isExecutionPoint=false;
  try {
    StackFrameProxyImpl frameProxy=myContext.getFrameProxy();
    final ThreadReferenceProxyImpl thread=getSuspendContext().getThread();
    isExecutionPoint=thread != null && frameProxy.equals(thread.frame(0));
  }
 catch (  Throwable th) {
    LOG.debug(th);
  }
  final List<Pair<Breakpoint,Event>> events=DebuggerUtilsEx.getEventDescriptors(getSuspendContext());
  final SourcePosition position=ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
    public SourcePosition compute(){
      Document document=PsiDocumentManager.getInstance(myProject).getDocument(contextPosition.getFile());
      if (document != null) {
        if (contextPosition.getLine() < 0 || contextPosition.getLine() >= document.getLineCount()) {
          return SourcePosition.createFromLine(contextPosition.getFile(),0);
        }
      }
      return contextPosition;
    }
  }
);
  if (isExecutionPoint) {
    DebuggerInvocationUtil.invokeLater(myProject,new Runnable(){
      public void run(){
        final SourcePosition highlightPosition=getHighlightPosition(events,position);
        showExecutionPoint(highlightPosition,events);
      }
    }
);
  }
 else {
    DebuggerInvocationUtil.invokeLater(myProject,new Runnable(){
      public void run(){
        showSelection(position);
      }
    }
);
  }
}
