{
  TextRange dirtyTextRange=FileStatusMap.getDirtyTextRange(editor,Pass.UPDATE_ALL);
  if (dirtyTextRange == null)   return null;
  TextRange visibleRange=calculateVisibleRange(editor);
  TextRange textRange=dirtyTextRange.intersection(visibleRange);
  if (textRange == null || textRange.isEmpty() || textRange.equals(dirtyTextRange)) {
    return null;
  }
  return textRange;
}
