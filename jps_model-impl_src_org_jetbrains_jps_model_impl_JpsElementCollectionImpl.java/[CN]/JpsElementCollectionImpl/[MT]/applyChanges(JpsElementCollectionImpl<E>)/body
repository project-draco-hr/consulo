{
  Set<E> toRemove=new LinkedHashSet<E>(myElements);
  List<E> toAdd=new ArrayList<E>();
  final Map<E,E> copyToOriginal=modified.myCopyToOriginal;
  for (  E element : modified.myElements) {
    final E original=copyToOriginal != null ? copyToOriginal.get(element) : null;
    if (original != null) {
      ((BulkModificationSupport<E>)original.getBulkModificationSupport()).applyChanges(element);
      toRemove.remove(original);
    }
 else {
      final E copy=(E)element.getBulkModificationSupport().createCopy(myModel,getEventDispatcher(),myParent);
      toAdd.add(copy);
    }
  }
  for (  E e : toRemove) {
    removeChild(e);
  }
  for (  E e : toAdd) {
    addChild(e);
  }
}
