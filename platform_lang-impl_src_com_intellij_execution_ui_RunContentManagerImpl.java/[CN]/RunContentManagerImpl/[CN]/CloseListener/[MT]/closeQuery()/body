{
  final RunContentDescriptor descriptor=getRunContentDescriptorByContent(myContent);
  if (descriptor == null) {
    return true;
  }
  final ProcessHandler processHandler=descriptor.getProcessHandler();
  if (processHandler == null || processHandler.isProcessTerminated() || processHandler.isProcessTerminating()) {
    return true;
  }
  final boolean destroyProcess;
  if (processHandler.isSilentlyDestroyOnClose() || Boolean.TRUE.equals(processHandler.getUserData(ProcessHandler.SILENTLY_DESTROY_ON_CLOSE))) {
    destroyProcess=true;
  }
 else {
    final boolean useDefault=Boolean.TRUE.equals(processHandler.getUserData(ALWAYS_USE_DEFAULT_STOPPING_BEHAVIOUR_KEY));
    final TerminateRemoteProcessDialog.TerminateOption option=new TerminateRemoteProcessDialog.TerminateOption(processHandler.detachIsDefault(),useDefault);
    final int rc=TerminateRemoteProcessDialog.show(myProject,descriptor.getDisplayName(),option);
    if (rc != DialogWrapper.OK_EXIT_CODE)     return false;
    destroyProcess=!option.isToBeShown();
  }
  if (destroyProcess) {
    processHandler.destroyProcess();
  }
 else {
    processHandler.detachProcess();
  }
  waitForProcess(descriptor);
  return true;
}
