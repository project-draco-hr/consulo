{
  if (value.length() == 0) {
    if (component.isCustomCreateRequired()) {
      throw new Exception(UIDesignerBundle.message("error.custom.create.binding.required"));
    }
    checkRemoveUnusedField(component);
    component.setBinding(null);
    component.setCustomCreate(false);
    return;
  }
  final RadRootContainer root=(RadRootContainer)FormEditingUtil.getRoot(component);
  if (!FormEditingUtil.isBindingUnique(component,value,root)) {
    throw new Exception("binding is not unique");
  }
  final String oldBinding=getValue(component);
  component.setBinding(value);
  component.setDefaultBinding(false);
  final String classToBind=root.getClassToBind();
  if (classToBind == null) {
    return;
  }
  final PsiClass aClass=PsiManager.getInstance(myProject).findClass(classToBind,GlobalSearchScope.allScope(myProject));
  if (aClass == null) {
    return;
  }
  if (oldBinding == null) {
    if (aClass.findFieldByName(value,true) == null) {
      CreateFieldFix.runImpl(myProject,root,aClass,component.getComponentClassName(),value,false);
    }
    return;
  }
  final PsiField oldField=aClass.findFieldByName(oldBinding,true);
  if (oldField == null) {
    return;
  }
  if (aClass.findFieldByName(value,true) != null) {
    return;
  }
  if (!isFieldUnreferenced(oldField)) {
    final int option=Messages.showYesNoDialog(myProject,MessageFormat.format(UIDesignerBundle.message("message.rename.field"),oldBinding,value),UIDesignerBundle.message("title.rename"),Messages.getQuestionIcon());
    if (option != 0) {
      return;
    }
  }
  GuiEditor editor=UIDesignerToolWindowManager.getInstance(myProject).getActiveFormEditor();
  if (editor != null) {
    editor.refreshAndSave(false);
  }
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  if (!CommonRefactoringUtil.checkReadOnlyStatus(myProject,aClass)) {
    return;
  }
  final RenameProcessor processor=new RenameProcessor(myProject,oldField,value,true,true);
  processor.run();
}
