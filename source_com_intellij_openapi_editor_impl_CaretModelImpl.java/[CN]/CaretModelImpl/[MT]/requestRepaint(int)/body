{
  int newY=myEditor.visibleLineNumberToYPosition(myVisibleCaret.line);
  int lineHeight=myEditor.getLineHeight();
  Rectangle visibleRect=myEditor.getScrollingModel().getVisibleArea();
  if (Math.abs(newY - oldY) <= 2 * lineHeight) {
    int minY=Math.min(oldY,newY);
    int maxY=Math.max(oldY + lineHeight,newY + lineHeight);
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,minY,myEditor.getScrollPane().getHorizontalScrollBar().getValue() + visibleRect.width,maxY - minY);
  }
 else {
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,oldY,myEditor.getScrollPane().getHorizontalScrollBar().getValue() + visibleRect.width,2 * lineHeight);
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,newY,myEditor.getScrollPane().getHorizontalScrollBar().getValue() + visibleRect.width,2 * lineHeight);
  }
}
