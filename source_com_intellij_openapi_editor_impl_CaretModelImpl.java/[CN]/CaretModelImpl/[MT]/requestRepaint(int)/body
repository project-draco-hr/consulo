{
  int newY=myEditor.visibleLineNumberToYPosition(myVisibleCaret.line);
  int lineHeight=myEditor.getLineHeight();
  Rectangle visibleRect=myEditor.getScrollingModel().getVisibleArea();
  int updateWidth=myEditor.getScrollPane().getHorizontalScrollBar().getValue() + visibleRect.width;
  if (Math.abs(newY - oldY) <= 2 * lineHeight) {
    int minY=Math.min(oldY,newY);
    int maxY=Math.max(oldY + lineHeight,newY + lineHeight);
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,minY,updateWidth,maxY - minY);
  }
 else {
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,oldY,updateWidth,2 * lineHeight);
    ((EditorComponentImpl)myEditor.getContentComponent()).repaintEditorComponent(0,newY,updateWidth,2 * lineHeight);
  }
}
