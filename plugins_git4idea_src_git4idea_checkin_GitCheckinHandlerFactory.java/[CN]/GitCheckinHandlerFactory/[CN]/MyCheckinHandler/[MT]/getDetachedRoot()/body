{
  GitRepositoryManager repositoryManager=GitUtil.getRepositoryManager(myPanel.getProject());
  if (repositoryManager == null) {
    return null;
  }
  for (  VirtualFile root : myPanel.getRoots()) {
    GitRepository repository=repositoryManager.getRepositoryForRoot(root);
    if (repository == null) {
      continue;
    }
    if (!repository.isOnBranch()) {
      return new DetachedRoot(root,repository.isRebaseInProgress());
    }
  }
  return null;
}
