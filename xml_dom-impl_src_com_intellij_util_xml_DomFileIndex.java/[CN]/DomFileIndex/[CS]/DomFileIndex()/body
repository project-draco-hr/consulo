{
  myDataIndexer=new DataIndexer<String,Void,FileContent>(){
    @Override @NotNull public Map<String,Void> map(    final FileContent inputData){
      final Set<String> namespaces=new THashSet<String>();
      final XmlFileHeader header=NanoXmlUtil.parseHeader(new UnsyncByteArrayInputStream(inputData.getContent()));
      ContainerUtil.addIfNotNull(header.getPublicId(),namespaces);
      ContainerUtil.addIfNotNull(header.getSystemId(),namespaces);
      ContainerUtil.addIfNotNull(header.getRootTagNamespace(),namespaces);
      final String tagName=header.getRootTagLocalName();
      if (StringUtil.isNotEmpty(tagName)) {
        final THashMap<String,Void> result=new THashMap<String,Void>();
        final DomApplicationComponent component=DomApplicationComponent.getInstance();
        for (        final DomFileDescription description : component.getFileDescriptions(tagName)) {
          final String[] strings=description.getAllPossibleRootTagNamespaces();
          if (strings.length == 0 || ContainerUtil.intersects(Arrays.asList(strings),namespaces)) {
            result.put(description.getRootElementClass().getName(),null);
          }
        }
        for (        final DomFileDescription description : component.getAcceptingOtherRootTagNameDescriptions()) {
          final String[] strings=description.getAllPossibleRootTagNamespaces();
          if (strings.length == 0 || ContainerUtil.intersects(Arrays.asList(strings),namespaces)) {
            result.put(description.getRootElementClass().getName(),null);
          }
        }
        return result;
      }
      return Collections.emptyMap();
    }
  }
;
}
