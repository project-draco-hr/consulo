{
  TextRange textRange=FileStatusMap.getDirtyTextRange(editor,Pass.UPDATE_ALL);
  if (textRange == null) {
    Long lastStamp=file.getUserData(LAST_POST_PASS_TIMESTAMP);
    long currentStamp=PsiModificationTracker.SERVICE.getInstance(myProject).getModificationCount();
    if (lastStamp != null && lastStamp == currentStamp || !ProblemHighlightFilter.shouldHighlightFile(file)) {
      return null;
    }
  }
  return new PostHighlightingPass(myProject,file,editor,editor.getDocument());
}
