{
  final TreePath[] paths=myTree.getSelectionModel().getSelectionPaths();
  int count=0;
  final List<ChangesBrowserNode> nodes=new ArrayList<>();
  for (  final TreePath path : paths) {
    final ChangesBrowserNode node=(ChangesBrowserNode)path.getLastPathComponent();
    if (!node.isLeaf()) {
      nodes.add(node);
      count+=node.getCount();
    }
  }
  for (  TreePath path : paths) {
    final ChangesBrowserNode element=(ChangesBrowserNode)path.getLastPathComponent();
    boolean child=false;
    for (    final ChangesBrowserNode node : nodes) {
      if (node.isNodeChild(element)) {
        child=true;
        break;
      }
    }
    if (!child) {
      if (element.isLeaf())       count++;
    }
 else     if (!element.isLeaf()) {
      count-=element.getCount();
    }
  }
  return count;
}
