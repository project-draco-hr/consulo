{
  myImportProcessor=null;
  myProfiles=new ArrayList<String>(profiles);
  ProgressManager.getInstance().run(new Task.Modal(null,ProjectBundle.message("maven.scanning.projects"),true){
    public void run(    ProgressIndicator indicator){
      myImportProcessor=new MavenImportProcessor(getProjectToUpdate(),preferences);
      myImportProcessor.createMavenProjectModel(new HashMap<VirtualFile,Module>(),myFiles,myProfiles);
      indicator.setText2("");
    }
    public void onCancel(){
      myImportProcessor=null;
    }
  }
);
  return myImportProcessor != null;
}
