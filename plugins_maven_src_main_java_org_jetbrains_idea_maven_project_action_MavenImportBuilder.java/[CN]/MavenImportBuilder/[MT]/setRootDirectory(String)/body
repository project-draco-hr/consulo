{
  myFiles=null;
  myProfiles=null;
  myImportProcessor=null;
  importRoot=FileFinder.refreshRecursively(root);
  if (getImportRoot() != null) {
    ProgressManager.getInstance().run(new Task.Modal(null,ProjectBundle.message("maven.scanning.projects"),true){
      public void run(      ProgressIndicator indicator){
        indicator.setText(ProjectBundle.message("maven.locating.files"));
        myFiles=FileFinder.findFilesByName(getImportRoot().getChildren(),MavenEnv.POM_FILE,new ArrayList<VirtualFile>(),null,indicator,getImporterPreferences().isLookForNested());
        myProfiles=collectProfiles(myFiles);
        if (myProfiles.isEmpty()) {
          createImportProcessor();
        }
        indicator.setText2("");
      }
      public void onCancel(){
        myFiles=null;
        myProfiles=null;
        myImportProcessor=null;
      }
    }
);
  }
  return myFiles != null;
}
