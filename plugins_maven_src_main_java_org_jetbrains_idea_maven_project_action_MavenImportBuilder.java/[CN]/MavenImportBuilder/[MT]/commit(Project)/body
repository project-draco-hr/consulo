{
  project.getComponent(MavenWorkspaceSettingsComponent.class).getState().myImporterSettings=getImporterPreferences();
  project.getComponent(MavenWorkspaceSettingsComponent.class).getState().myArtifactSettings=getArtifactPreferences();
  project.getComponent(MavenCore.class).loadState(myCoreSettings);
  MavenProjectsManager manager=MavenProjectsManager.getInstance(project);
  manager.setOriginalFiles(myFiles);
  if (!myFilesWithProfiles.isEmpty()) {
    for (    Map.Entry<VirtualFile,Set<String>> each : myFilesWithProfiles.entrySet()) {
      manager.setActiveProfiles(each.getKey(),each.getValue());
    }
  }
  manager.setImportedMavenProject(myMavenProjectModel);
  manager.commit();
  enusreRepositoryPathMacro();
}
