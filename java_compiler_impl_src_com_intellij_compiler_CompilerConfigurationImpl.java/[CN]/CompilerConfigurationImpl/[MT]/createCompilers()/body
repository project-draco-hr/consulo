{
  JAVAC_EXTERNAL_BACKEND=new JavacCompiler(myProject);
  myRegisteredCompilers.add(JAVAC_EXTERNAL_BACKEND);
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    final BackendCompiler JIKES_BACKEND=new JikesCompiler(myProject);
    myRegisteredCompilers.add(JIKES_BACKEND);
    if (EclipseCompiler.isInitialized()) {
      final EclipseCompiler eclipse=new EclipseCompiler(myProject);
      myRegisteredCompilers.add(eclipse);
    }
    if (ApplicationManagerEx.getApplicationEx().isInternal()) {
      try {
        final EclipseEmbeddedCompiler eclipseEmbedded=new EclipseEmbeddedCompiler(myProject);
        myRegisteredCompilers.add(eclipseEmbedded);
      }
 catch (      NoClassDefFoundError e) {
      }
    }
    try {
      CompilerAPICompiler inProcessJavaCompiler=new CompilerAPICompiler(myProject);
      myRegisteredCompilers.add(inProcessJavaCompiler);
    }
 catch (    NoClassDefFoundError e) {
    }
  }
  final BackendCompiler[] compilers=Extensions.getExtensions(BackendCompiler.EP_NAME,myProject);
  final Set<FileType> types=new HashSet<FileType>();
  for (  BackendCompiler compiler : compilers) {
    myRegisteredCompilers.add(compiler);
    types.addAll(compiler.getCompilableFileTypes());
  }
  final CompilerManager compilerManager=CompilerManager.getInstance(myProject);
  for (  FileType type : types) {
    compilerManager.addCompilableFileType(type);
  }
  myDefaultJavaCompiler=JAVAC_EXTERNAL_BACKEND;
  for (  BackendCompiler compiler : myRegisteredCompilers) {
    if (compiler.getId().equals(DEFAULT_COMPILER)) {
      myDefaultJavaCompiler=compiler;
      break;
    }
  }
  DEFAULT_COMPILER=myDefaultJavaCompiler.getId();
}
