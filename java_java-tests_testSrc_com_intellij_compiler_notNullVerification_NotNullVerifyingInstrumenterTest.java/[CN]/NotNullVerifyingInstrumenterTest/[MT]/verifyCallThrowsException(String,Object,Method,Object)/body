{
  String exceptionText=null;
  try {
    method.invoke(instance,args);
  }
 catch (  InvocationTargetException ex) {
    Throwable cause=ex.getCause();
    if (cause instanceof IllegalStateException) {
      exceptionText=cause.getMessage();
    }
  }
  assertEquals(expectedError,exceptionText);
}
