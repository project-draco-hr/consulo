{
  Icon icon=null;
  int logicalIndex=table.convertColumnIndexToModel(column);
  if ((logicalIndex) >= myModel.getColumnInfos().length) {
    setText("");
    return this;
  }
  final ColumnInfo columnInfo=myModel.getColumnInfos()[logicalIndex];
  String labelString=columnInfo.getName();
  if (myModel.isSortable() && columnInfo.isSortable() && myModel.getSortedColumnIndex() == logicalIndex) {
    labelString="<html><b>" + labelString + "</b></html>";
    if (myModel.getSortingType() == SortableColumnModel.SORT_ASCENDING) {
      icon=IconLoader.getIcon("/actions/sortAsc.png");
    }
    if (myModel.getSortingType() == SortableColumnModel.SORT_DESCENDING) {
      icon=IconLoader.getIcon("/actions/sortDesc.png");
    }
  }
  setText(labelString);
  setIcon(icon);
  setToolTipText(columnInfo.getTooltipText());
  final boolean hasError=columnInfo.hasError();
  JTableHeader header=table.getTableHeader();
  final Color foreground=hasError ? Color.RED : header.getForeground();
  setForeground(foreground);
  myLabel.setForeground(foreground);
  setBackground(header.getBackground());
  myLabel.setFont(header.getFont());
  setBorder(myBorder);
  return this;
}
