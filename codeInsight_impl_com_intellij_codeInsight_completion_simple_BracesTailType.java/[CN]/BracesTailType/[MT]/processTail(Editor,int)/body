{
  CodeStyleSettings styleSettings=CodeStyleSettingsManager.getSettings(editor.getProject());
  if (isSpaceBeforeLBrace(styleSettings,editor,tailOffset)) {
    tailOffset=insertChar(editor,tailOffset,' ');
  }
  tailOffset=insertChar(editor,tailOffset,'{');
  if (EnterAfterUnmatchedBraceHandler.isAfterUnmatchedLBrace(editor,tailOffset,StdFileTypes.JAVA)) {
    new EnterHandler(EditorActionManager.getInstance().getActionHandler(IdeActions.ACTION_EDITOR_ENTER)).executeWriteAction(editor,DataManager.getInstance().getDataContext(editor.getContentComponent()));
    return editor.getCaretModel().getOffset();
  }
  return tailOffset;
}
