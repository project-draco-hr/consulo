{
  super(project,true);
  myProject=project;
  myShowDirectoryField=!doClone;
  myShowNewNameField=elements.length == 1;
  if (doClone && elements.length != 1) {
    throw new IllegalArgumentException("wrong number of elements to clone: " + elements.length);
  }
  setTitle(doClone ? "Clone" : "Copy");
  init();
  if (elements.length == 1) {
    String text;
    if (elements[0] instanceof PsiFile) {
      PsiFile file=(PsiFile)elements[0];
      text=(doClone ? "Clone file " : "Copy file ") + file.getVirtualFile().getPresentableUrl();
      myNewNameField.setText(file.getName());
    }
 else {
      PsiDirectory directory=(PsiDirectory)elements[0];
      text=(doClone ? "Clone directory" : "Copy directory ") + directory.getVirtualFile().getPresentableUrl();
      myNewNameField.setText(directory.getName());
    }
    myInformationLabel.setText(text);
  }
 else {
    myInformationLabel.setText((elements[0] instanceof PsiFile) ? "Copy specified files" : "Copy specified directories");
  }
  if (myShowDirectoryField) {
    myTargetDirectoryField.setText(defaultTargetDirectory == null ? "" : defaultTargetDirectory.getVirtualFile().getPresentableUrl());
  }
  validateOKButton();
}
