{
  SAXParser parser=SAXParserFactory.newInstance().newSAXParser();
  FileOutputStream fos=null;
  ProgressStream ps=null;
  try {
    fos=new FileOutputStream(temp,false);
    ps=new ProgressStream(is,pi);
    byte[] buffer=new byte[1024];
    do {
      int size=ps.read(buffer);
      if (size == -1)       break;
      fos.write(buffer,0,size);
    }
 while (true);
    fos.close();
    parser.parse(temp,handler);
  }
  finally {
    if (fos != null) {
      fos.close();
    }
    if (ps != null) {
      ps.close();
    }
  }
}
