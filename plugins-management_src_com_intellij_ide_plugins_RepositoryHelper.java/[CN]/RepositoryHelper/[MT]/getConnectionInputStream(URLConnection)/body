{
  final ProgressIndicator pi=ProgressManager.getInstance().getProgressIndicator();
  pi.setText(IdeBundle.message("progress.connecting"));
  InputStreamGetter getter=new InputStreamGetter(connection);
  final Thread thread=new Thread(getter,"InputStreamGetter");
  thread.start();
  while (!pi.isCanceled()) {
    try {
      thread.join(50);
      if (!thread.isAlive())       break;
    }
 catch (    InterruptedException e) {
      return null;
    }
  }
  return getter.getIs();
}
