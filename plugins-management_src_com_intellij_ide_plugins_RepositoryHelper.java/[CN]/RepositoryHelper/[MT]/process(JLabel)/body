{
  ArrayList<IdeaPluginDescriptor> plugins=null;
  try {
    String buildNumber=extractBuildNumber();
    @NonNls String url=getListUrl() + "?build=" + buildNumber;
    setLabelText(label,IdeBundle.message("progress.connecting.to.plugin.manager",getRepositoryHost()));
    HttpConfigurable.getInstance().prepareURL(getRepositoryHost());
{
      RepositoryContentHandler handler=new RepositoryContentHandler();
      HttpURLConnection connection=(HttpURLConnection)new URL(url).openConnection();
      setLabelText(label,IdeBundle.message("progress.waiting.for.reply.from.plugin.manager",getRepositoryHost()));
      InputStream is=getConnectionInputStream(connection);
      if (is != null) {
        setLabelText(label,IdeBundle.message("progress.downloading.list.of.plugins"));
        File temp=createLocalPluginsDescriptions();
        readPluginsStream(temp,is,handler);
        plugins=handler.getPluginsList();
      }
    }
  }
 catch (  RuntimeException e) {
    e.printStackTrace();
    if (e.getCause() == null || !(e.getCause() instanceof InterruptedException)) {
    }
  }
  return plugins;
}
