{
  myTree=tree;
  myTree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      if (myFrozen)       return;
      mySelectionPath=new ArrayList<TreePath>();
      TreePath[] paths=myTree.getSelectionPaths();
      if (paths != null) {
        for (int i=0; i < paths.length; i++) {
          mySelectionPath.add(paths[i]);
        }
      }
    }
  }
);
  myTree.addTreeExpansionListener(new TreeExpansionListener(){
    public void treeExpanded(    TreeExpansionEvent event){
      if (myFrozen)       return;
      TreePath path=event.getPath();
      if (path != null) {
        myExpandedPaths.add(path);
      }
    }
    public void treeCollapsed(    TreeExpansionEvent event){
      if (myFrozen)       return;
      TreePath path=event.getPath();
      if (path != null) {
        TreePath[] allPaths=myExpandedPaths.toArray(new TreePath[myExpandedPaths.size()]);
        for (int i=0; i < allPaths.length; i++) {
          TreePath treePath=allPaths[i];
          if (treePath.equals(path) || path.isDescendant(treePath)) {
            myExpandedPaths.remove(treePath);
          }
        }
      }
    }
  }
);
}
