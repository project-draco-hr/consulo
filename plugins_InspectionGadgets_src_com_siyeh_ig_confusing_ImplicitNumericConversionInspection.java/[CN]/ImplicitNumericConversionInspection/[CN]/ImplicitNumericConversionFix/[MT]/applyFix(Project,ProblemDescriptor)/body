{
  if (ReadonlyStatusHandler.getInstance(project).ensureFilesWritable(new VirtualFile[]{descriptor.getPsiElement().getContainingFile().getVirtualFile()}).hasReadonlyFiles())   return;
  final PsiExpression expression=(PsiExpression)descriptor.getPsiElement();
  final PsiType expectedType=ExpectedTypeUtils.findExpectedType(expression);
  if (isConvertible(expression,expectedType)) {
    final String newExpression=convertExpression(expression,expectedType);
    replaceExpression(project,expression,newExpression);
  }
 else {
    final String newExpression;
    if (ParenthesesUtils.getPrecendence(expression) <= ParenthesesUtils.TYPE_CAST_PRECEDENCE) {
      newExpression='(' + expectedType.getPresentableText() + ')'+ expression.getText();
    }
 else {
      newExpression='(' + expectedType.getPresentableText() + ")("+ expression.getText()+ ')';
    }
    replaceExpression(project,expression,newExpression);
  }
}
