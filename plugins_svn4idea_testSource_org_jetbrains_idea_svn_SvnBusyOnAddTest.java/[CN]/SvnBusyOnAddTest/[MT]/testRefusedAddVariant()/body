{
  SVNWCDb db=new SVNWCDb();
  final File ioFile=new File(myWorkingCopyRoot,filename);
  ioFile.createNewFile();
  SVNWCContext context=null;
  try {
    db.open(ISVNWCDb.SVNWCDbOpenMode.ReadWrite,new DefaultSVNOptions(),true,true);
    context=new SVNWCContext(db,new ISVNEventHandler(){
      @Override public void handleEvent(      SVNEvent event,      double progress) throws SVNException {
      }
      @Override public void checkCancelled() throws SVNCancelException {
      }
    }
);
    File file=context.acquireWriteLock(myWorkingCopyRoot,false,true);
    boolean failed=false;
    try {
      SVNWCClient client=new SVNWCClient((ISVNRepositoryPool)null,new DefaultSVNOptions());
      client.doAdd(ioFile,true,false,false,true);
    }
 catch (    SVNException e) {
      Assert.assertEquals(155004,e.getErrorMessage().getErrorCode().getCode());
      failed=true;
    }
    Assert.assertTrue(failed);
    SVNStatusClient readClient=new SVNStatusClient((ISVNRepositoryPool)null,new DefaultSVNOptions());
    readClient.doStatus(ioFile,false);
  }
  finally {
    if (context != null) {
      context.releaseWriteLock(myWorkingCopyRoot);
    }
    ioFile.delete();
    db.close();
  }
}
