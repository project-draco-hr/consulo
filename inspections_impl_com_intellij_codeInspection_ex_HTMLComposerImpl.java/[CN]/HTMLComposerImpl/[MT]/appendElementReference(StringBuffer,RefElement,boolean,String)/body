{
  if (refElement instanceof RefImplicitConstructor) {
    buf.append(InspectionsBundle.message("inspection.export.results.implicit.constructor"));
    refElement=((RefImplicitConstructor)refElement).getOwnerClass();
  }
  buf.append(CODE_OPENING);
  if (refElement instanceof RefField) {
    RefField field=(RefField)refElement;
    PsiField psiField=field.getElement();
    buf.append(psiField.getType().getPresentableText());
    buf.append(NBSP);
  }
 else   if (refElement instanceof RefMethod) {
    RefMethod method=(RefMethod)refElement;
    PsiMethod psiMethod=(PsiMethod)method.getElement();
    PsiType returnType=psiMethod.getReturnType();
    if (returnType != null) {
      buf.append(returnType.getPresentableText());
      buf.append(NBSP);
    }
  }
  buf.append(A_HREF_OPENING);
  if (myExporter == null) {
    buf.append(((RefElementImpl)refElement).getURL());
  }
 else {
    buf.append(myExporter.getURL(refElement));
  }
  if (frameName != null) {
    @NonNls final String target="\" target=\"";
    buf.append(target);
    buf.append(frameName);
  }
  buf.append("\">");
  if (refElement instanceof RefClass && ((RefClass)refElement).isAnonymous()) {
    buf.append(InspectionsBundle.message("inspection.reference.anonymous"));
  }
 else   if (refElement.isSyntheticJSP()) {
    buf.append(XmlStringUtil.escapeString(refElement.getName()));
  }
 else   if (refElement instanceof RefMethod) {
    PsiMethod psiMethod=(PsiMethod)refElement.getElement();
    buf.append(psiMethod.getName());
  }
 else {
    buf.append(refElement.getName());
  }
  buf.append(A_CLOSING);
  if (refElement instanceof RefMethod) {
    PsiMethod psiMethod=(PsiMethod)refElement.getElement();
    appendMethodParameters(buf,psiMethod,false);
  }
  buf.append(CODE_CLOSING);
  if (refElement instanceof RefClass && ((RefClass)refElement).isAnonymous()) {
    buf.append(" ");
    buf.append(InspectionsBundle.message("inspection.export.results.anonymous.ref.in.owner"));
    buf.append(" ");
    appendElementReference(buf,((RefElement)refElement.getOwner()),isPackageIncluded);
  }
 else   if (isPackageIncluded) {
    @NonNls final String color="color:#808080\">";
    buf.append(" ").append(CODE_OPENING).append(FONT_OPENING).append(color).append("(");
    appendQualifiedName(buf,refElement.getOwner());
    buf.append(")").append(FONT_CLOSING).append(CODE_CLOSING);
  }
}
