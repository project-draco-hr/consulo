{
  super.visitConditionalExpression(expression);
  GrExpression condition=expression.getCondition();
  final GrExpression thenBranch=expression.getThenBranch();
  final GrExpression elseBranch=expression.getElseBranch();
  if (condition == null || thenBranch == null || elseBranch == null) {
    return;
  }
  if (SideEffectChecker.mayHaveSideEffects(condition)) {
    return;
  }
  condition=deparenthesizeExpression(condition);
  if (!(condition instanceof GrBinaryExpression)) {
    return;
  }
  final GrBinaryExpression binaryCondition=(GrBinaryExpression)condition;
  if (isInequality(binaryCondition)) {
    final GrExpression lhs=binaryCondition.getLeftOperand();
    final GrExpression rhs=binaryCondition.getRightOperand();
    if (isNull(lhs) && EquivalenceChecker.expressionsAreEquivalent(rhs,thenBranch) || isNull(rhs) && EquivalenceChecker.expressionsAreEquivalent(lhs,thenBranch)) {
      registerError(expression);
    }
  }
 else   if (isEquality(binaryCondition)) {
    final GrExpression lhs=binaryCondition.getLeftOperand();
    final GrExpression rhs=binaryCondition.getRightOperand();
    if (isNull(lhs) && EquivalenceChecker.expressionsAreEquivalent(rhs,elseBranch) || isNull(rhs) && EquivalenceChecker.expressionsAreEquivalent(lhs,elseBranch)) {
      registerError(expression);
    }
  }
}
