{
  final PsiElement parent=getElement().getParent();
  LOG.assertTrue(parent instanceof PsiReferenceList);
  final PsiClass refClass=getReferencedElement();
  final PsiReferenceList extendsList=refClass.getExtendsList();
  if (extendsList != null) {
    final PsiJavaCodeReferenceElement[] referenceElements=extendsList.getReferenceElements();
    final PsiReferenceList listToAddExtends=refClass.isInterface() == myExtendingClass.isInterface() ? myExtendingClass.getExtendsList() : myExtendingClass.getImplementsList();
    for (int i=0; i < referenceElements.length; i++) {
      listToAddExtends.add(referenceElements[i]);
    }
  }
  final PsiReferenceList implementsList=refClass.getImplementsList();
  if (implementsList != null) {
    final PsiJavaCodeReferenceElement[] referenceElements=implementsList.getReferenceElements();
    for (int i=0; i < referenceElements.length; i++) {
      myExtendingClass.getImplementsList().add(referenceElements[i]);
    }
  }
  getElement().delete();
}
