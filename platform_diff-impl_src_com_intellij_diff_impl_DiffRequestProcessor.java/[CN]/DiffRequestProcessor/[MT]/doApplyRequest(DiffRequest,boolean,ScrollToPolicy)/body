{
  if (!force && request == myActiveRequest)   return;
  request.putUserData(DiffUserDataKeysEx.SCROLL_TO_CHANGE,scrollToChangePolicy);
  boolean hadFocus=isFocused();
  myState.destroy();
  myToolbarStatusPanel.setContent(null);
  myToolbarPanel.setContent(null);
  myContentPanel.setContent(null);
  myMainPanel.putClientProperty(AnAction.ourClientProperty,null);
  myActiveRequest.onAssigned(false);
  myActiveRequest=request;
  myActiveRequest.onAssigned(true);
  try {
    myState=createState();
    myState.init();
  }
 catch (  Throwable e) {
    LOG.error(e);
    myState=new ErrorState(new ErrorDiffRequest("Error: can't show diff"),getFittedTool());
    myState.init();
  }
  if (hadFocus)   requestFocusInternal();
}
