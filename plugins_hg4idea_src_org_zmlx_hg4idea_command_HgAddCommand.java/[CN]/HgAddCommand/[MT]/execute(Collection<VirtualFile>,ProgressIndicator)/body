{
  final Map<VirtualFile,Collection<VirtualFile>> sorted=HgUtil.sortByHgRoots(myProject,files);
  for (  Map.Entry<VirtualFile,Collection<VirtualFile>> entry : sorted.entrySet()) {
    if (indicator != null) {
      if (indicator.isCanceled()) {
        return;
      }
      indicator.setFraction(0);
      indicator.setText2("Adding files to " + entry.getKey().getPresentableUrl());
    }
    addFiles(entry.getKey(),entry.getValue(),indicator);
  }
}
