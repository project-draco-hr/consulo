{
  final Project project=aClass.getProject();
  final boolean isAbstract=method.hasModifierProperty(PsiModifier.ABSTRACT);
  String templName=isAbstract ? JavaTemplateUtil.TEMPLATE_IMPLEMENTED_METHOD_BODY : JavaTemplateUtil.TEMPLATE_OVERRIDDEN_METHOD_BODY;
  final FileTemplate template=FileTemplateManager.getInstance().getCodeTemplate(templName);
  final GrMethod result=createOverrideImplementMethodSignature(project,method,substitutor,aClass);
  PsiModifierList modifierList=result.getModifierList();
  modifierList.setModifierProperty(PsiModifier.ABSTRACT,false);
  modifierList.setModifierProperty(PsiModifier.NATIVE,false);
  setupOverridingMethodBody(project,method,result,template,substitutor);
  if (OverrideImplementUtil.isInsertOverride(method,aClass)) {
    result.getModifierList().addAnnotation(JAVA_LANG_OVERRIDE);
  }
  return result;
}
