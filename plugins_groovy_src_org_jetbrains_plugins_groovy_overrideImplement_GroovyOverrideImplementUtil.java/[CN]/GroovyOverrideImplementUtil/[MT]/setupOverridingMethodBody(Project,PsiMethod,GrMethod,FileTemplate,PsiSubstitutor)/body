{
  final PsiType returnType=substitutor.substitute(method.getReturnType());
  String returnTypeText="";
  if (returnType != null) {
    returnTypeText=returnType.getPresentableText();
  }
  Properties properties=new Properties();
  properties.setProperty(FileTemplate.ATTRIBUTE_RETURN_TYPE,returnTypeText);
  properties.setProperty(FileTemplate.ATTRIBUTE_DEFAULT_RETURN_VALUE,PsiTypesUtil.getDefaultValueOfType(returnType));
  properties.setProperty(FileTemplate.ATTRIBUTE_CALL_SUPER,callSuper(method,result));
  FileTemplateUtil.setClassAndMethodNameProperties(properties,method.getContainingClass(),result);
  try {
    String bodyText=template.getText(properties);
    final GrCodeBlock newBody=GroovyElementFactory.getInstance(project).createMetodBodyFormText("\n" + bodyText + "\n");
    result.getNode().replaceChild(result.getBlock().getNode(),newBody.getNode());
  }
 catch (  IOException e) {
    LOG.error(e);
  }
}
