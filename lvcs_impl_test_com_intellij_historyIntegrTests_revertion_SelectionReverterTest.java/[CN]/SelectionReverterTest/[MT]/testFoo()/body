{
  String before="public class Bar {\n" + "  public String foo() {\n" + "    return \"old\";\n"+ "  }\n"+ "}\n";
  String after="public class NewBar {\n" + "  public String foo() {\n" + "    return \"new\";\n"+ "  }\n"+ "  public abstract bar();\n"+ "}\n";
  f.setBinaryContent(before.getBytes());
  f.setBinaryContent(after.getBytes());
  revertToPreviousRevision(2,2);
  String expected="public class NewBar {\n" + "  public String foo() {\n" + "    return \"old\";\n"+ "  }\n"+ "  public abstract bar();\n"+ "}\n";
  assertEquals(expected,new String(f.contentsToByteArray()));
}
