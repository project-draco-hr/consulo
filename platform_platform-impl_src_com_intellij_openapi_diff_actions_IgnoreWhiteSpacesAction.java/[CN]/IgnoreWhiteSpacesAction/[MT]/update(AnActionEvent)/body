{
  super.update(e);
  Presentation presentation=e.getPresentation();
  DiffPanelEx diffPanel=DiffPanelImpl.fromDataContext(e.getDataContext());
  if (diffPanel != null && diffPanel.getComponent().isDisplayable()) {
    AnAction action=myActions.get(diffPanel.getComparisonPolicy());
    Presentation templatePresentation=action.getTemplatePresentation();
    presentation.setIcon(templatePresentation.getIcon());
    presentation.setText(templatePresentation.getText());
    presentation.setEnabled(true);
  }
 else {
    presentation.setIcon(null);
    presentation.setText(DiffBundle.message("ignore.whitespace.action.not.available.action.name"));
    presentation.setEnabled(false);
  }
}
