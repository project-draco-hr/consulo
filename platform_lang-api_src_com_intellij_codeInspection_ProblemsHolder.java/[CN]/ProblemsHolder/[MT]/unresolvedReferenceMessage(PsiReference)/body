{
  String message;
  if (reference instanceof EmptyResolveMessageProvider) {
    String pattern=((EmptyResolveMessageProvider)reference).getUnresolvedMessagePattern();
    try {
      message=BundleBase.format(pattern,reference.getCanonicalText());
    }
 catch (    IllegalArgumentException ex) {
      message=pattern;
      LOG.info(pattern);
    }
  }
 else {
    message=CodeInsightBundle.message("error.cannot.resolve.default.message",reference.getCanonicalText());
  }
  return message;
}
