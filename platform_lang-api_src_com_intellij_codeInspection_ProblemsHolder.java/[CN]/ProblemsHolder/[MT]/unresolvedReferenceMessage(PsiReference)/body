{
  String message;
  if (reference instanceof EmptyResolveMessageProvider) {
    String pattern=((EmptyResolveMessageProvider)reference).getUnresolvedMessagePattern();
    message=pattern.contains("{0}") ? MessageFormat.format(pattern,reference.getCanonicalText()) : pattern;
  }
 else {
    message=CodeInsightBundle.message("error.cannot.resolve.default.message",reference.getCanonicalText());
  }
  return message;
}
