{
  for (  final PsiDirectory directory : psiDirectories) {
    final PsiFile[] psiFiles=ApplicationManager.getApplication().runReadAction(new Computable<PsiFile[]>(){
      @Override @NotNull public PsiFile[] compute(){
        return directory.getFiles();
      }
    }
);
    for (    PsiFile file : psiFiles) {
      result.add(profileManager.getProfileName());
    }
    processDirectories(ApplicationManager.getApplication().runReadAction(new Computable<PsiDirectory[]>(){
      @Override @NotNull public PsiDirectory[] compute(){
        return directory.getSubdirectories();
      }
    }
),result,profileManager);
  }
}
