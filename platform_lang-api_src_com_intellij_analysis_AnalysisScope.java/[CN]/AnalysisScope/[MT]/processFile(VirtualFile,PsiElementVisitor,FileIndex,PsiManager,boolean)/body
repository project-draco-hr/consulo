{
  if (fileOrDir.isDirectory())   return true;
  if (ProjectUtil.isProjectOrWorkspaceFile(fileOrDir))   return true;
  if (projectFileIndex.isInContent(fileOrDir) && (myIncludeTestSource || !projectFileIndex.isInTestSourceContent(fileOrDir))) {
    return processFile(fileOrDir,visitor,psiManager,needReadAction);
  }
  return true;
}
