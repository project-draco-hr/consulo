{
  super.visitReferenceExpression(refExpr);
  GroovyResolveResult resolveResult=refExpr.advancedResolve();
  PsiElement resolved=resolveResult.getElement();
  if (resolved != null) {
    if (isDeclarationAssignment(refExpr) || resolved instanceof PsiPackage)     return;
  }
 else {
    GrExpression qualifier=refExpr.getQualifierExpression();
    if (qualifier == null && isDeclarationAssignment(refExpr))     return;
  }
  if (resolved == null) {
    PsiElement refNameElement=refExpr.getReferenceNameElement();
    registerError(refNameElement == null ? refExpr : refNameElement);
  }
}
