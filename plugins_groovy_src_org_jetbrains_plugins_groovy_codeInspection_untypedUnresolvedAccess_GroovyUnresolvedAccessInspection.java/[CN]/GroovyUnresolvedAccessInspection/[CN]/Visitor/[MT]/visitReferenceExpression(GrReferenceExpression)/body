{
  super.visitReferenceExpression(refExpr);
  PsiElement resolved=refExpr.advancedResolve().getElement();
  if (resolved != null)   return;
  GrExpression qualifier=refExpr.getQualifierExpression();
  if (qualifier == null && isDeclarationAssignment(refExpr))   return;
  PsiElement parent=refExpr.getParent();
  if (!(parent instanceof GrCall) && ResolveUtil.isKeyOfMap(refExpr))   return;
  if (!GroovyAnnotator.shouldHighlightAsUnresolved(refExpr))   return;
  if (qualifier != null && isBuilderInvocation(refExpr))   return;
  PsiElement refNameElement=refExpr.getReferenceNameElement();
  registerError(refNameElement == null ? refExpr : refNameElement);
}
