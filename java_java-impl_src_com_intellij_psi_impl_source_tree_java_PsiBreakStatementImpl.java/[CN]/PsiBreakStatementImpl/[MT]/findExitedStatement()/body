{
  PsiIdentifier label=getLabelIdentifier();
  if (label == null) {
    for (ASTNode parent=getTreeParent(); parent != null; parent=parent.getTreeParent()) {
      IElementType i=parent.getElementType();
      if (i == FOR_STATEMENT || i == WHILE_STATEMENT || i == DO_WHILE_STATEMENT || i == SWITCH_STATEMENT || i == FOREACH_STATEMENT) {
        return (PsiStatement)SourceTreeToPsiMap.treeElementToPsi(parent);
      }
 else       if (i == METHOD || i == CLASS_INITIALIZER) {
        return null;
      }
    }
  }
 else {
    String labelName=label.getText();
    for (CompositeElement parent=getTreeParent(); parent != null; parent=parent.getTreeParent()) {
      if (parent.getElementType() == LABELED_STATEMENT) {
        ASTNode statementLabel=parent.findChildByRole(ChildRole.LABEL_NAME);
        if (statementLabel.getText().equals(labelName)) {
          return ((PsiLabeledStatement)SourceTreeToPsiMap.treeElementToPsi(parent)).getStatement();
        }
      }
      if (parent.getElementType() == METHOD || parent.getElementType() == CLASS_INITIALIZER)       return null;
    }
  }
  return null;
}
