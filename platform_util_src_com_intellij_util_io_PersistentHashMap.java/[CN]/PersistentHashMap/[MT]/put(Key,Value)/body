{
synchronized (ourLock) {
    markDirty(true);
    myAppendCache.remove(key);
    final int id=enumerate(key);
    final AppendStream record=new AppendStream();
    myValueExternalizer.save(record,value);
    final ByteSequence bytes=record.getInternalBuffer();
    HeaderRecord header=readValueId(id);
    myGarbageSize+=header.size;
    header.size=bytes.getLength();
    header.address=myValueStorage.appendBytes(bytes,0);
    updateValueId(id,header);
  }
}
