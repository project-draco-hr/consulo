{
  JPanel panel=new JPanel();
  panel.setLayout(new GridBagLayout());
  panel.setBorder(IdeBorderFactory.createRoundedBorder());
  myNameLabel=new JLabel();
  panel.add(myNameLabel,new GridBagConstraints(0,0,2,1,1,0,GridBagConstraints.WEST,GridBagConstraints.HORIZONTAL,new Insets(4,8,4,8),0,0));
  panel.add(new JLabel(RefactoringBundle.message("move.files.to.directory.label")),new GridBagConstraints(0,1,1,1,0,0,GridBagConstraints.WEST,GridBagConstraints.HORIZONTAL,new Insets(4,8,4,8),0,0));
  myTargetDirectoryField=new ComponentWithBrowseButton<TextFieldWithStoredHistory>(new TextFieldWithStoredHistory(RECENT_KEYS),null);
  final FileChooserDescriptor descriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
  myTargetDirectoryField.addBrowseFolderListener(RefactoringBundle.message("select.target.directory"),RefactoringBundle.message("the.file.will.be.moved.to.this.directory"),myProject,descriptor,TextComponentAccessor.TEXT_FIELD_WITH_STORED_HISTORY_WHOLE_TEXT);
  final TextFieldWithStoredHistory textFieldWithStoredHistory=myTargetDirectoryField.getChildComponent();
  FileChooserFactory.getInstance().installFileCompletion(textFieldWithStoredHistory.getTextEditor(),descriptor,true,getDisposable());
  myTargetDirectoryField.setTextFieldPreferredWidth(60);
  panel.add(myTargetDirectoryField,new GridBagConstraints(1,1,1,1,1,0,GridBagConstraints.WEST,GridBagConstraints.HORIZONTAL,new Insets(4,0,4,8),0,0));
  textFieldWithStoredHistory.addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      validateOKButton();
    }
  }
);
  Disposer.register(getDisposable(),myTargetDirectoryField);
  return panel;
}
