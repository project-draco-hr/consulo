{
  String name=myNamePathComponent.getNameValue();
  if (name.length() == 0) {
    final ApplicationInfo info=ApplicationManager.getApplication().getComponent(ApplicationInfo.class);
    throw new ConfigurationException(IdeBundle.message("prompt.new.project.file.name",info.getVersionName(),myWizardContext.getPresentationName()));
  }
  final String projectFileDirectory=getProjectFileDirectory();
  if (projectFileDirectory.length() == 0) {
    throw new ConfigurationException(IdeBundle.message("prompt.enter.project.file.location",myWizardContext.getPresentationName()));
  }
  final boolean shouldPromptCreation=myNamePathComponent.isPathChangedByUser();
  if (!ProjectWizardUtil.createDirectoryIfNotExists(IdeBundle.message("directory.project.file.directory",myWizardContext.getPresentationName()),projectFileDirectory,shouldPromptCreation)) {
    return false;
  }
  boolean shouldContinue=true;
  final String path=myWizardContext.isCreatingNewProject() && myWizardContext.getProjectStorageFormat() == DIRECTORY_BASED ? getProjectFileDirectory() + "/" + Project.DIRECTORY_STORE_FOLDER : getProjectFilePath();
  final File projectFile=new File(path);
  if (projectFile.exists()) {
    final String title=myWizardContext.isCreatingNewProject() ? IdeBundle.message("title.new.project") : IdeBundle.message("title.add.module");
    final String message=myWizardContext.isCreatingNewProject() && myWizardContext.getProjectStorageFormat() == DIRECTORY_BASED ? IdeBundle.message("prompt.overwrite.project.folder",Project.DIRECTORY_STORE_FOLDER,projectFile.getParentFile().getAbsolutePath()) : IdeBundle.message("prompt.overwrite.project.file",projectFile.getAbsolutePath(),myWizardContext.getPresentationName());
    int answer=Messages.showYesNoDialog(message,title,Messages.getQuestionIcon());
    shouldContinue=answer == 0;
  }
  return shouldContinue;
}
