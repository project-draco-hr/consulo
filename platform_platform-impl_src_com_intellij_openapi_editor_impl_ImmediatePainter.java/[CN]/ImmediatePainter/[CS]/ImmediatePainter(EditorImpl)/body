{
  myEditor=editor;
  AnActionListener.Adapter actionListener=new AnActionListener.Adapter(){
    @Override public void beforeActionPerformed(    AnAction action,    DataContext dataContext,    AnActionEvent event){
      if (isZeroLatencyTypingEnabled() && IMMEDIATE_EDITING_ACTIONS.contains(action.getClass()) && !(action.getClass() == PasteAction.class && getSelectionModel().hasSelection())) {
        myImmediateEditingInProgress=true;
      }
    }
    @Override public void afterActionPerformed(    AnAction action,    DataContext dataContext,    AnActionEvent event){
      if (isZeroLatencyTypingEnabled()) {
        myImmediateEditingInProgress=false;
      }
    }
  }
;
  ActionManager.getInstance().addAnActionListener(actionListener,editor.getDisposable());
}
