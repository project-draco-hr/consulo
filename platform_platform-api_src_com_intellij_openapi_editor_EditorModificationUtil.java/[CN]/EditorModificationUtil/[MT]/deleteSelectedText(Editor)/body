{
  SelectionModel selectionModel=editor.getSelectionModel();
  if (selectionModel.hasBlockSelection())   deleteBlockSelection(editor);
  if (!selectionModel.hasSelection())   return;
  int selectionStart=selectionModel.getSelectionStart();
  int selectionEnd=selectionModel.getSelectionEnd();
  VisualPosition selectionStartPosition=selectionModel.getSelectionStartPosition();
  if (editor.isColumnMode() && editor.getCaretModel().supportsMultipleCarets() && selectionStartPosition != null) {
    editor.getCaretModel().moveToVisualPosition(selectionStartPosition);
  }
 else {
    editor.getCaretModel().moveToOffset(selectionStart);
  }
  selectionModel.removeSelection();
  editor.getDocument().deleteString(selectionStart,selectionEnd);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
}
