{
  final EditorWithProviderComposite[] editors=getManager().getEditorComposites(file);
  LOG.assertTrue(editors != null);
  final EditorWithProviderComposite editor=findFileComposite(file);
  getManager().disposeComposite(editor);
  if (myTabbedPane != null) {
    final int componentIndex=findComponentIndex(editor.getComponent());
    if (componentIndex >= 0) {
      final int indexToSelect=calcIndexToSelect(file,componentIndex);
      if (indexToSelect >= 0) {
        myTabbedPane.setSelectedIndex(indexToSelect);
      }
      myTabbedPane.removeTabAt(componentIndex);
    }
    if (unsplit && getTabCount() == 0) {
      unsplit();
    }
  }
 else {
    myPanel.removeAll();
  }
  myPanel.revalidate();
  if (editors.length == 1) {
    getManager().closeFile(file);
  }
}
