{
  LOG.assertTrue(file != null);
  final ArrayList<Icon> icons=new ArrayList<Icon>(6);
  icons.add(IconUtil.getIcon(file,0,getManager().myProject));
  if (!file.isWritable()) {
    icons.add(FileEditorManagerImpl.LOCKED_ICON);
  }
  final EditorComposite composite=findFileComposite(file);
  if (composite != null && composite.isPinned()) {
    icons.add(IconLoader.getIcon("/nodes/tabPin.png"));
  }
  if (UISettings.getInstance().MARK_MODIFIED_TABS_WITH_ASTERISK) {
    if (composite != null && composite.isModified()) {
      icons.add(FileEditorManagerImpl.MODIFIED_ICON);
    }
 else {
      icons.add(FileEditorManagerImpl.GAP_ICON);
    }
  }
  final LayeredIcon result=new LayeredIcon(icons.size());
  for (int i=icons.size() - 1; i >= 0; i--) {
    result.setIcon(icons.get(i),i);
  }
  return result;
}
