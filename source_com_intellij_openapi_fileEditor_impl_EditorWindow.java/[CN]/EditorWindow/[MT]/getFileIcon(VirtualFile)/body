{
  LOG.assertTrue(file != null);
  Icon icon=IconUtil.getIcon(file,Iconable.ICON_FLAG_READ_STATUS,getManager().myProject);
  List<Icon> icons=Collections.singletonList(icon);
  final EditorComposite composite=findFileComposite(file);
  if (composite != null && composite.isPinned()) {
    icons=new ArrayList<Icon>(6);
    icons.add(icon);
    icons.add(IconLoader.getIcon("/nodes/tabPin.png"));
  }
  if (UISettings.getInstance().MARK_MODIFIED_TABS_WITH_ASTERISK) {
    if (icons.size() == 1)     icons=new ArrayList<Icon>(6);
    icons.add(icon);
    if (composite != null && composite.isModified()) {
      icons.add(MODIFIED_ICON);
    }
 else {
      icons.add(GAP_ICON);
    }
  }
  if (icons.size() == 1)   return icons.get(0);
  final LayeredIcon result=new LayeredIcon(icons.size());
  for (int i=icons.size() - 1; i >= 0; i--) {
    result.setIcon(icons.get(i),i);
  }
  return result;
}
