{
  String text=getText().substring(PREFIX.length()).trim();
  int textDelim=text.indexOf(" ");
  final String codes;
  if (textDelim >= 0) {
    codes=text.substring(0,textDelim);
  }
 else {
    codes=text;
  }
  String unicode;
  if (codes.length() + 1 < text.length()) {
    unicode=text.substring(textDelim + 1);
  }
 else {
    unicode="";
  }
  final ActionCallback result=new ActionCallback();
  TypingTarget typingTarget=findTarget();
  if (typingTarget != null) {
    typingTarget.type(unicode).doWhenDone(new Runnable(){
      public void run(){
        result.setDone();
      }
    }
).doWhenRejected(new Runnable(){
      public void run(){
        typeCodes(cb,robot,codes).notify(result);
      }
    }
);
  }
 else {
    typeCodes(cb,robot,codes).notify(result);
  }
  return result;
}
