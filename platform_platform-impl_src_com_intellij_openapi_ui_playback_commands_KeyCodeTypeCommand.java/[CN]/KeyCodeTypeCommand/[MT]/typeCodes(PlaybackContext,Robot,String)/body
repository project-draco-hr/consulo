{
  final ActionCallback result=new ActionCallback();
  Runnable runnable=new Runnable(){
    public void run(){
      String[] pairs=codes.split(CODE_DELIMITER);
      for (      String eachPair : pairs) {
        try {
          String[] splits=eachPair.split(MODIFIER_DELIMITER);
          Integer code=Integer.valueOf(splits[0]);
          Integer modifier=Integer.valueOf(splits[1]);
          type(robot,code.intValue(),modifier.intValue());
        }
 catch (        NumberFormatException e) {
          dumpError(context,"Invalid code: " + eachPair);
          result.setRejected();
          return;
        }
      }
      result.setDone();
    }
  }
;
  if (SwingUtilities.isEventDispatchThread()) {
    ApplicationManager.getApplication().executeOnPooledThread(runnable);
  }
 else {
    runnable.run();
  }
  return result;
}
