{
  final PsiElement psiChild=getFirstChild();
  if (psiChild == null)   return EMPTY_ARRAY;
  List<PsiElement> result=new ArrayList<PsiElement>();
  ASTNode childNode=psiChild.getNode();
  while (childNode != null) {
    if (childNode instanceof ChameleonElement) {
      childNode=((TreeElement)childNode).getTransformedFirstOrSelf();
      if (childNode == null)       break;
    }
    if (childNode instanceof CompositeElement) {
      result.add(childNode.getPsi());
    }
    childNode=childNode.getTreeNext();
  }
  return result.toArray(new PsiElement[result.size()]);
}
