{
  TableCellRenderer renderer=getColumnInfo(column).getRenderer(getRowElement(row));
  final TableCellRenderer baseRenderer=renderer == null ? super.getCellRenderer(row,column) : renderer;
  return new TableCellRenderer(){
    public Component getTableCellRendererComponent(    JTable table,    Object value,    boolean isSelected,    boolean hasFocus,    int row,    int column){
      final JComponent rendererComponent=(JComponent)baseRenderer.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
      if (isSelected) {
        rendererComponent.setBackground(table.getSelectionBackground());
        rendererComponent.setForeground(table.getSelectionForeground());
      }
 else {
        rendererComponent.setBackground(table.getBackground());
        rendererComponent.setForeground(table.getForeground());
      }
      rendererComponent.setOpaque(isSelected);
      return rendererComponent;
    }
  }
;
}
