{
  if (file.isDirectory() && myChooseFolders) {
    return file;
  }
  boolean isJar=FileTypeManager.getInstance().getFileTypeByFile(file) == StdFileTypes.ARCHIVE;
  if (!isJar) {
    return acceptAsGeneralFile(file) ? file : null;
  }
  if (myChooseJarsAsFiles) {
    return file;
  }
  if (!acceptAsJarFile(file)) {
    return null;
  }
  String path=file.getPath();
  return JarFileSystem.getInstance().findFileByPath(path + JarFileSystem.JAR_SEPARATOR);
}
