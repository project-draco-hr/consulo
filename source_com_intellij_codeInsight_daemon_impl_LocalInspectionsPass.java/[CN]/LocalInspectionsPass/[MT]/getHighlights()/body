{
  final ArrayList<HighlightInfo> highlights=new ArrayList<HighlightInfo>();
  for (int i=0; i < myDescriptors.size(); i++) {
    ProblemDescriptor problemDescriptor=myDescriptors.get(i);
    final String message=renderDescriptionMessage(problemDescriptor);
    final PsiElement psiElement=problemDescriptor.getPsiElement();
    final HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.WARNING,psiElement,message,message);
    highlights.add(highlightInfo);
    if (problemDescriptor.getFix() != null) {
      QuickFixAction.registerQuickFixAction(highlightInfo,new QuickFixWrapper(problemDescriptor));
    }
    final LocalInspectionTool tool=myTools.get(i);
    QuickFixAction.registerQuickFixAction(highlightInfo,new AddNoInspectionCommentAction(tool,psiElement));
    QuickFixAction.registerQuickFixAction(highlightInfo,new AddNoInspectionDocTagAction(tool,psiElement));
    QuickFixAction.registerQuickFixAction(highlightInfo,new SwitchOffToolAction(tool));
  }
  return highlights.toArray(new HighlightInfo[highlights.size()]);
}
