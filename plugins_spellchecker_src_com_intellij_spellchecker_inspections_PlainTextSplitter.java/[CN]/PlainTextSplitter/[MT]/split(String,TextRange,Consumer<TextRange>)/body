{
  if (text == null || StringUtil.isEmpty(text)) {
    return;
  }
  if (Verifier.checkCharacterData(range.substring(text)) != null) {
    return;
  }
  List<TextRange> toCheck;
  if (text.indexOf('@') > 0) {
    toCheck=excludeByPattern(text,range,MAIL,0);
  }
 else   if (text.indexOf(':') > 0) {
    toCheck=excludeByPattern(text,range,URL,0);
  }
 else {
    toCheck=Collections.singletonList(range);
  }
  final TextSplitter ws=SplitterFactory.getInstance().getTextSplitterNew();
  for (  TextRange r : toCheck) {
    checkCancelled();
    ws.split(text,r,consumer);
  }
}
