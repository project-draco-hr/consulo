{
  int skipCount=0;
  File parentFile=file;
  while (true) {
    parentFile=parentFile.getParentFile();
    if (parentFile == null) {
      return null;
    }
    if (".".equals(parentFile.getName())) {
      continue;
    }
    if ("..".equals(parentFile.getName())) {
      skipCount++;
      continue;
    }
    if (skipCount > 0) {
      skipCount--;
      continue;
    }
    return parentFile;
  }
}
