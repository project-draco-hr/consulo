{
  String ancestorPath=toCanonicalPath(ancestor);
  String filePath=toCanonicalPath(descendant);
  if (ancestorPath == null || filePath == null) {
    return false;
  }
  boolean startsWith=SystemInfo.isFileSystemCaseSensitive ? StringUtil.startsWith(filePath,ancestorPath) : StringUtil.startsWithIgnoreCase(filePath,ancestorPath);
  if (!startsWith) {
    return false;
  }
  return filePath.length() > ancestorPath.length() && filePath.charAt(ancestorPath.length()) == '/' || !strict && filePath.length() == ancestorPath.length();
}
