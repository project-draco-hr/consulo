{
  final File tempDir=new File(getTempDirectory());
  boolean isSameDrive=true;
  if (SystemInfo.isWindows) {
    String tempDirDrive=tempDir.getAbsolutePath().substring(0,2);
    String fileDrive=file.getAbsolutePath().substring(0,2);
    isSameDrive=tempDirDrive.equalsIgnoreCase(fileDrive);
  }
  if (isSameDrive) {
    final String originalFileName=file.getName();
    File tempFile=getTempFile(originalFileName,tempDir);
    if (file.renameTo(tempFile)) {
      return tempFile;
    }
  }
  delete(file);
  return null;
}
