{
  Project project=file.getProject();
  final PsiManager psiManager=PsiManager.getInstance(project);
  final PsiFile[] psiFiles=ContainerUtil.map2Array(files,PsiFile.class,new NullableFunction<VirtualFile,PsiFile>(){
    public PsiFile fun(    VirtualFile file){
      return psiManager.findFile(file);
    }
  }
);
  for (  final PsiFile psiFile : psiFiles) {
    final FileType type=file.getFileType();
    if (type == XmlFileType.INSTANCE && isRngFile(psiFile)) {
      if (!processor.execute((XmlFile)psiFile)) {
        return false;
      }
    }
 else     if (type == RncFileType.getInstance()) {
      if (!processor.execute((XmlFile)psiFile)) {
        return false;
      }
    }
  }
  return true;
}
