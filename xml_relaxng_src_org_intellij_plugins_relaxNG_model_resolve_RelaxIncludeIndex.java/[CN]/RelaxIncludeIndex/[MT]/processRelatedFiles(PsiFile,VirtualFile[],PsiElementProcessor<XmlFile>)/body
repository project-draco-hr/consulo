{
  Project project=file.getProject();
  final PsiManager psiManager=PsiManager.getInstance(project);
  final PsiFile[] psiFiles=ContainerUtil.map2Array(files,PsiFile.class,new NullableFunction<VirtualFile,PsiFile>(){
    public PsiFile fun(    VirtualFile file){
      return psiManager.findFile(file);
    }
  }
);
  for (  final PsiFile psiFile : psiFiles) {
    if (!processFile(psiFile,processor)) {
      return false;
    }
  }
  return true;
}
