{
  super(new BorderLayout());
  add(myWholePanel,BorderLayout.CENTER);
  copyDialogCaption(myProgramParameters);
  copyDialogCaption(myVMParameters);
  final JComboBox comboBox=myWorkingDirectoryCombo.getComponent().getChildComponent();
  comboBox.setEditable(true);
  comboBox.setModel(new DefaultComboBoxModel(new String[]{"$MODULE_DIR$"}));
  myWorkingDirectoryCombo.getComponent().addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      FileChooserDescriptor fileChooserDescriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
      fileChooserDescriptor.setTitle(ExecutionBundle.message("select.working.directory.message"));
      fileChooserDescriptor.putUserData(LangDataKeys.MODULE_CONTEXT,myModule);
      VirtualFile[] files=FileChooser.chooseFiles(myWorkingDirectoryCombo,fileChooserDescriptor);
      if (files.length != 0) {
        setText(RunJavaConfiguration.WORKING_DIRECTORY_PROPERTY,files[0].getPresentableUrl());
      }
    }
  }
);
  myFields[RunJavaConfiguration.PROGRAM_PARAMETERS_PROPERTY]=myProgramParameters;
  myFields[RunJavaConfiguration.VM_PARAMETERS_PROPERTY]=myVMParameters;
  myFields[RunJavaConfiguration.WORKING_DIRECTORY_PROPERTY]=myWorkingDirectoryCombo;
}
