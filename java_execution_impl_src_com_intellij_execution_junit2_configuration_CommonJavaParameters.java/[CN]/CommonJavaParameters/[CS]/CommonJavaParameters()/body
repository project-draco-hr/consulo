{
  super(new BorderLayout());
  add(myWholePanel,BorderLayout.CENTER);
  copyDialogCaption(myProgramParameters);
  copyDialogCaption(myVMParameters);
  myWorkingDirectory.getComponent().addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      FileChooserDescriptor fileChooserDescriptor=FileChooserDescriptorFactory.createSingleFolderDescriptor();
      fileChooserDescriptor.setTitle(ExecutionBundle.message("select.working.directory.message"));
      fileChooserDescriptor.putUserData(LangDataKeys.MODULE_CONTEXT,myModule);
      VirtualFile[] files=FileChooser.chooseFiles(myWorkingDirectory,fileChooserDescriptor);
      if (files.length != 0) {
        setText(RunJavaConfiguration.WORKING_DIRECTORY_PROPERTY,files[0].getPresentableUrl());
      }
    }
  }
);
  myFields[RunJavaConfiguration.PROGRAM_PARAMETERS_PROPERTY]=myProgramParameters;
  myFields[RunJavaConfiguration.VM_PARAMETERS_PROPERTY]=myVMParameters;
  myFields[RunJavaConfiguration.WORKING_DIRECTORY_PROPERTY]=myWorkingDirectory;
  myUseModuleDirectoryAsCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final boolean selected=((JCheckBox)e.getSource()).isSelected();
      myWorkingDirectory.getComponent().setEnabled(!selected);
    }
  }
);
}
