{
  final Set<String> existingTargetNames=StringSetSpinAllocator.alloc();
  try {
    final AntDomElement antDom=AntSupport.getInvocationAntDomElement(context);
    if (antDom == null) {
      return ArrayUtil.EMPTY_OBJECT_ARRAY;
    }
    final AntDomProject project=antDom.getAntProject();
    if (existingDeps != null) {
      final List<AntDomTarget> domTargetList=existingDeps.getValue();
      if (domTargetList != null && domTargetList.size() > 0) {
        for (        AntDomTarget target : domTargetList) {
          existingTargetNames.add(target.getName().getStringValue());
        }
      }
    }
    final List<Object> result=new ArrayList<Object>();
    final List<AntDomTarget> allTargets=project.getDeclaredTargets();
    for (    AntDomTarget target : allTargets) {
      final String targetName=target.getName().getStringValue();
      if (targetName != null && !existingTargetNames.contains(targetName)) {
        result.add(LookupElementBuilder.create(target,targetName));
      }
    }
    return result.toArray(new Object[result.size()]);
  }
  finally {
    StringSetSpinAllocator.dispose(existingTargetNames);
  }
}
