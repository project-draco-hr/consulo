{
  final Boolean haveSelectedChanges=e.getData(VcsDataKeys.HAVE_SELECTED_CHANGES);
  ChangeList[] changeLists=e.getData(VcsDataKeys.CHANGE_LISTS);
  final String presetMessage=e.getData(VcsDataKeys.PRESET_COMMIT_MESSAGE);
  e.getPresentation().setEnabled(Boolean.TRUE.equals(haveSelectedChanges) && ((changeLists == null || changeLists.length == 1)) || (presetMessage != null));
}
