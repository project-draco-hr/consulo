{
  if (!(refWhat instanceof RefField))   return;
  if (!(refFrom instanceof RefMethod) || !((RefMethod)refFrom).isConstructor() || ((PsiField)refWhat.getElement()).hasInitializer()) {
    if (!referencedFromClassInitializer && forWriting) {
      ((RefFieldImpl)refWhat).setFlag(false,CAN_BE_FINAL_MASK);
    }
  }
}
