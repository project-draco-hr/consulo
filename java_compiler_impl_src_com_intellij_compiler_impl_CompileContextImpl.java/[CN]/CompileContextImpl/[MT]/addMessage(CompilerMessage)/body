{
  Collection<CompilerMessage> messages=myMessages.get(msg.getCategory());
  if (messages == null) {
    messages=new LinkedHashSet<CompilerMessage>();
    myMessages.put(msg.getCategory(),messages);
  }
  if (messages.add(msg)) {
    myTask.addMessage(msg);
  }
  if (myShouldUpdateProblemsView && msg.getCategory() == CompilerMessageCategory.ERROR) {
    ProblemsViewImpl.SERVICE.getInstance(myProject).addMessage(msg,mySessionId);
  }
}
