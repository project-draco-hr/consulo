{
  if (url == null) {
    return null;
  }
  final VirtualFileManager fileManager=VirtualFileManager.getInstance();
  return ApplicationManager.getApplication().runReadAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      final VirtualFile file=fileManager.findFileByUrl(url);
      if (file != null) {
        for (        final Map.Entry<VirtualFile,Pair<SourceGeneratingCompiler,Module>> entry : myOutputRootToSourceGeneratorMap.entrySet()) {
          final VirtualFile root=entry.getKey();
          if (VfsUtil.isAncestor(root,file,false)) {
            final Pair<SourceGeneratingCompiler,Module> pair=entry.getValue();
            final VirtualFile presentableFile=pair.getFirst().getPresentableFile(CompileContextImpl.this,pair.getSecond(),root,file);
            return presentableFile != null ? presentableFile : file;
          }
        }
      }
      return file;
    }
  }
);
}
