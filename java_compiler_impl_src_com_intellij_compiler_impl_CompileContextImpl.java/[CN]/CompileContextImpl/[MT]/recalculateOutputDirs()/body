{
  final Module[] allModules=ModuleManager.getInstance(myProject).getModules();
  final Set<VirtualFile> allDirs=new OrderedSet<VirtualFile>((TObjectHashingStrategy<VirtualFile>)TObjectHashingStrategy.CANONICAL);
  final Set<VirtualFile> testOutputDirs=new java.util.HashSet<VirtualFile>();
  final Set<VirtualFile> productionOutputDirs=new java.util.HashSet<VirtualFile>();
  for (  Module module : allModules) {
    final CompilerModuleExtension manager=CompilerModuleExtension.getInstance(module);
    final VirtualFile output=manager.getCompilerOutputPath();
    if (output != null && output.isValid()) {
      allDirs.add(output);
      productionOutputDirs.add(output);
    }
    final VirtualFile testsOutput=manager.getCompilerOutputPathForTests();
    if (testsOutput != null && testsOutput.isValid()) {
      allDirs.add(testsOutput);
      testOutputDirs.add(testsOutput);
    }
  }
  myOutputDirectories=VfsUtil.toVirtualFileArray(allDirs);
  testOutputDirs.removeAll(productionOutputDirs);
  myTestOutputDirectories=Collections.unmodifiableSet(testOutputDirs);
}
