{
  AddFieldBreakpointDialog dialog=new AddFieldBreakpointDialog(myProject){
    protected boolean validateData(){
      String className=getClassName();
      if (className.length() == 0) {
        Messages.showMessageDialog(myProject,DebuggerBundle.message("error.field.breakpoint.class.name.not.specified"),DebuggerBundle.message("add.field.breakpoint.dialog.title"),Messages.getErrorIcon());
        return false;
      }
      String fieldName=getFieldName();
      if (fieldName.length() == 0) {
        Messages.showMessageDialog(myProject,DebuggerBundle.message("error.field.breakpoint.field.name.not.specified"),DebuggerBundle.message("add.field.breakpoint.dialog.title"),Messages.getErrorIcon());
        return false;
      }
      PsiClass psiClass=PsiManager.getInstance(myProject).findClass(className,GlobalSearchScope.allScope(myProject));
      if (psiClass != null) {
        PsiFile psiFile=psiClass.getContainingFile();
        Document document=PsiDocumentManager.getInstance(myProject).getDocument(psiFile);
        if (document != null) {
          PsiField field=psiClass.findFieldByName(fieldName,true);
          if (field != null) {
            int line=document.getLineNumber(field.getTextOffset());
            FieldBreakpoint fieldBreakpoint=DebuggerManagerEx.getInstanceEx(myProject).getBreakpointManager().addFieldBreakpoint(document,line,fieldName);
            if (fieldBreakpoint != null) {
              getPanel().addBreakpoint(fieldBreakpoint);
              return true;
            }
          }
 else {
            Messages.showMessageDialog(myProject,DebuggerBundle.message("error.field.breakpoint.field.not.found",className,fieldName,fieldName),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
          }
        }
      }
 else {
        Messages.showMessageDialog(myProject,DebuggerBundle.message("error.field.breakpoint.class.sources.not.found",className,fieldName,className),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      }
      return false;
    }
  }
;
  dialog.show();
}
