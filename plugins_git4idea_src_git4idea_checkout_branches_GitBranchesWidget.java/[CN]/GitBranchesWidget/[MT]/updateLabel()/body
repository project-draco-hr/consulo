{
  cancelPopup();
  final GitBranchConfigurations.SpecialStatus status=myConfigurations.getSpecialStatus();
  String t;
  myPopupEnabled=false;
switch (status) {
case CHECKOUT_IN_PROGRESS:
    t="Checkout in progress...";
  break;
case MERGING:
t="Merging...";
break;
case REBASING:
t="Rebasing...";
break;
case NON_GIT:
t="Non-Git project";
break;
case SUBMODULES:
t="Submodules unsupported";
break;
case NORMAL:
GitBranchConfiguration current;
try {
current=myConfigurations.getCurrentConfiguration();
}
 catch (VcsException e) {
current=null;
}
if (current == null) {
t="Detection in progress";
}
 else {
myPopupEnabled=true;
t=current.getName();
}
break;
default :
t="Unknown status: " + status;
}
setForeground(myPopupEnabled ? myDefaultForeground : Color.RED);
setText(t);
}
