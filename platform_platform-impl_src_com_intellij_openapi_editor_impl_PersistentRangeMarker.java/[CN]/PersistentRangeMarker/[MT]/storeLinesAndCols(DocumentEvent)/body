{
  int startOffset=getStartOffset();
  if (startOffset <= myDocument.getTextLength()) {
    myStartLine=myDocument.getLineNumber(startOffset);
    myStartColumn=startOffset - myDocument.getLineStartOffset(myStartLine);
    if (myStartColumn < 0) {
      invalidate(e);
    }
  }
 else {
    invalidate(e);
  }
  int endOffset=getEndOffset();
  if (endOffset <= myDocument.getTextLength()) {
    myEndLine=myDocument.getLineNumber(endOffset);
    myEndColumn=endOffset - myDocument.getLineStartOffset(myEndLine);
    if (myEndColumn < 0) {
      invalidate(e);
    }
  }
 else {
    invalidate(e);
  }
}
