{
  if (element.getChild(ANY_NODES_ELEMENT_NAME) != null) {
    return;
  }
  final Object[] children=treeStructure.getChildElements(descriptor);
  final List<Element> expectedChildren=new ArrayList<Element>(element.getChildren(NODE_ELEMENT_NAME));
  assertEquals("Children of " + descriptor.getHighlightedText().getText(),expectedChildren.size(),children.length);
  for (  Object child : children) {
    ((HierarchyNodeDescriptor)child).update();
  }
  Arrays.sort(children,new Comparator<Object>(){
    public int compare(    final Object first,    final Object second){
      return ((HierarchyNodeDescriptor)first).getHighlightedText().getText().compareTo(((HierarchyNodeDescriptor)second).getHighlightedText().getText());
    }
  }
);
  Collections.sort(expectedChildren,new Comparator<Element>(){
    public int compare(    final Element first,    final Element second){
      return first.getAttributeValue(TEXT_ATTR_NAME).compareTo(second.getAttributeValue(TEXT_ATTR_NAME));
    }
  }
);
  final Iterator<Element> iterator=expectedChildren.iterator();
  for (  Object child : children) {
    checkNodeDescriptorRecursively(treeStructure,((HierarchyNodeDescriptor)child),iterator.next());
  }
}
