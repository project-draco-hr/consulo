{
  try {
    if (existing == null)     return Pair.create(specified,toBytes(text,specified));
    if (specified == null || specified.equals(existing))     return Pair.create(specified,toBytes(text,existing));
    if (existing == null)     return Pair.create(specified,toBytes(text,specified));
    if (specified == null || specified.equals(existing))     return Pair.create(specified,toBytes(text,existing));
    byte[] out=isSupported(specified,text);
    if (out != null)     return Pair.create(specified,out);
    out=isSupported(existing,text);
    if (out != null)     return Pair.create(existing,out);
    return Pair.create(specified,toBytes(text,specified));
  }
 catch (  RuntimeException e) {
    return Pair.create(Charset.defaultCharset(),toBytes(text,null));
  }
}
