{
  try {
    if (file.isDirectory() || file.isSpecialFile() || file.getLength() == 0)     return UnknownFileType.INSTANCE;
    if (SingleRootFileViewProvider.isTooLarge(file))     return UnknownFileType.INSTANCE;
    byte[] bytes=file.contentsToByteArray();
    Trinity<Charset,CharsetToolkit.GuessedEncoding,byte[]> guessed=guessFromContent(file,bytes);
    if (guessed == null)     return UnknownFileType.INSTANCE;
    file.setBOM(guessed.third);
    if (guessed.first != null) {
      return PlainTextFileType.INSTANCE;
    }
    CharsetToolkit.GuessedEncoding guess=guessed.second;
    return guess == null || guess == CharsetToolkit.GuessedEncoding.INVALID_UTF8 ? UnknownFileType.INSTANCE : PlainTextFileType.INSTANCE;
  }
 catch (  FileNotFoundException e) {
    return UnknownFileType.INSTANCE;
  }
catch (  IOException e) {
    LOG.error(e);
    return UnknownFileType.INSTANCE;
  }
}
