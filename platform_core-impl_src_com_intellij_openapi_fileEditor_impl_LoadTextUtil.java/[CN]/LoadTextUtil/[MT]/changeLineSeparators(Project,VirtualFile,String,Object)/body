{
  CharSequence currentText=getTextByBinaryPresentation(file.contentsToByteArray(),file,true,false);
  String currentSeparator=detectLineSeparator(file,false);
  if (newSeparator.equals(currentSeparator)) {
    return;
  }
  String newText=StringUtil.convertLineSeparators(currentText.toString(),newSeparator);
  file.putUserData(DETECTED_LINE_SEPARATOR_KEY,newSeparator);
  write(project,file,requestor,newText,-1);
}
