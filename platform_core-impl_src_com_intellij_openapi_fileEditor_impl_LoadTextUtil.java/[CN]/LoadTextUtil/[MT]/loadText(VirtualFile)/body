{
  if (file instanceof LightVirtualFile) {
    return ((LightVirtualFile)file).getContent();
  }
  if (file.isDirectory()) {
    throw new AssertionError("'" + file.getPresentableUrl() + "' is directory");
  }
  final FileType fileType=file.getFileType();
  if (fileType.isBinary()) {
    final BinaryFileDecompiler decompiler=BinaryFileTypeDecompilers.INSTANCE.forFileType(fileType);
    if (decompiler != null) {
      CharSequence text=decompiler.decompile(file);
      StringUtil.assertValidSeparators(text);
      return text;
    }
    throw new IllegalArgumentException("Attempt to load text for binary file, that doesn't have decompiler plugged in: " + file.getPresentableUrl());
  }
  try {
    byte[] bytes=file.contentsToByteArray();
    return getTextByBinaryPresentation(bytes,file);
  }
 catch (  IOException e) {
    return ArrayUtil.EMPTY_CHAR_SEQUENCE;
  }
}
