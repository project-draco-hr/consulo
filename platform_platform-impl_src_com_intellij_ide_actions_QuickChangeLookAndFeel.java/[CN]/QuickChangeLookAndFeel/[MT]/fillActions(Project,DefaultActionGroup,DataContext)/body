{
  final LafManager manager=LafManager.getInstance();
  final UIManager.LookAndFeelInfo[] lfs=manager.getInstalledLookAndFeels();
  final UIManager.LookAndFeelInfo current=manager.getCurrentLookAndFeel();
  for (  final UIManager.LookAndFeelInfo lf : lfs) {
    group.add(new DumbAwareAction(lf.getName(),"",lf == current ? ourCurrentAction : ourNotCurrentAction){
      public void actionPerformed(      AnActionEvent e){
        final UIManager.LookAndFeelInfo cur=manager.getCurrentLookAndFeel();
        if (cur == lf)         return;
        boolean needUninstall=UIUtil.isUnderDarcula();
        manager.setCurrentLookAndFeel(lf);
        manager.updateUI();
        if (UIUtil.isUnderDarcula()) {
          DarculaInstaller.install();
        }
 else         if (needUninstall) {
          DarculaInstaller.uninstall();
        }
      }
    }
);
  }
}
