{
  StringBuilder messageBuilder=new StringBuilder("The following " + (documentsToWarn.size() == 1 ? "file is" : "files are") + " currently being committed to the VCS. "+ "Saving now could cause inconsistent data to be committed.\n");
  for (  Document document : documentsToWarn.keySet()) {
    final VirtualFile file=myFileDocumentManager.getFile(document);
    messageBuilder.append(FileUtil.toSystemDependentName(file.getPath())).append("\n");
  }
  messageBuilder.append("Save the ").append(documentsToWarn.size() == 1 ? "file" : "files").append(" now?");
  Project project=documentsToWarn.values().iterator().next();
  int rc=Messages.showOkCancelDialog(project,messageBuilder.toString(),"Save Files During Commit","Save Now","Postpone Save",Messages.getQuestionIcon());
  return rc == 0;
}
