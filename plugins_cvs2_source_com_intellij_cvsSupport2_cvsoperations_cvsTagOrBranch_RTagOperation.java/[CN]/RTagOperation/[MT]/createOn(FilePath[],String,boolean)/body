{
  Map<CvsEnvironment,List<File>> envToFiles=new HashMap<CvsEnvironment,List<File>>();
  for (  FilePath file : files) {
    CvsConnectionSettings cvsConnectionSettings=CvsUtil.getCvsConnectionSettings(file);
    if (!envToFiles.containsKey(cvsConnectionSettings))     envToFiles.put(cvsConnectionSettings,new ArrayList<File>());
    envToFiles.get(cvsConnectionSettings).add(file.getIOFile());
  }
  ArrayList<RTagOperation> result=new ArrayList<RTagOperation>();
  for (  CvsEnvironment cvsEnvironment : envToFiles.keySet()) {
    RTagOperation rTagOperation=new RTagOperation(cvsEnvironment,tagName,overrideExisting);
    result.add(rTagOperation);
    List<File> iofiles=envToFiles.get(cvsEnvironment);
    for (    File file : iofiles) {
      rTagOperation.addFile(file);
    }
  }
  return result.toArray(new RTagOperation[result.size()]);
}
