{
  int index=qName.indexOf('$');
  if (index >= 0) {
    qName=qName.substring(0,index);
  }
  if (SystemInfo.isFileSystemCaseSensitive) {
    return qName;
  }
  final int dotIndex=qName.lastIndexOf('.');
  final StringBuilder builder=StringBuilderSpinAllocator.alloc();
  try {
    builder.append(qName);
    for (int idx=0; idx < dotIndex; idx++) {
      builder.setCharAt(idx,Character.toLowerCase(builder.charAt(idx)));
    }
    return builder.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(builder);
  }
}
