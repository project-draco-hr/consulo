{
  final Presentation presentation=event.getPresentation();
  registerCustomShortcutSet(ActionManager.getInstance().getAction(IdeActions.ACTION_METHOD_HIERARCHY).getShortcutSet(),null);
  final DataContext dataContext=event.getDataContext();
  final MethodHierarchyBrowser browser=(MethodHierarchyBrowser)dataContext.getData(METHOD_HIERARCHY_BROWSER_DATA_CONSTANT);
  if (browser == null) {
    presentation.setVisible(false);
    presentation.setEnabled(false);
    return;
  }
  final PsiElement selectedElement=browser.getSelectedElement();
  if (!(selectedElement instanceof PsiMethod)) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
    return;
  }
  presentation.setVisible(true);
  final PsiMethod method=(PsiMethod)selectedElement;
  if (!method.equals(browser.mySmartPsiElementPointer.getElement()) && method.isValid()) {
    presentation.setEnabled(true);
  }
 else {
    presentation.setEnabled(false);
  }
}
