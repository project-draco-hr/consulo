{
  final Tree tree=new Tree(new DefaultTreeModel(new DefaultMutableTreeNode("")));
  tree.getSelectionModel().setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
  tree.setToggleClickCount(-1);
  tree.setCellRenderer(new HierarchyNodeRenderer());
  tree.putClientProperty("JTree.lineStyle","Angled");
  ActionGroup group=(ActionGroup)ActionManager.getInstance().getAction(IdeActions.GROUP_METHOD_HIERARCHY_POPUP);
  PopupHandler.installPopupHandler(tree,group,ActionPlaces.METHOD_HIERARCHY_VIEW_POPUP,ActionManager.getInstance());
  EditSourceOnDoubleClickHandler.install(tree);
  myRefreshAction.registerShortcutOn(tree);
  myRunOnDisposeList.add(new Runnable(){
    public void run(){
      myRefreshAction.unregisterCustomShortcutSet(tree);
    }
  }
);
  final BaseOnThisMethodAction baseOnThisMethodAction=new BaseOnThisMethodAction();
  baseOnThisMethodAction.registerCustomShortcutSet(ActionManager.getInstance().getAction(IdeActions.ACTION_METHOD_HIERARCHY).getShortcutSet(),tree);
  new TreeSpeedSearch(tree);
  TreeUtil.installActions(tree);
  TreeToolTipHandler.install(tree);
  myAutoScrollToSourceHandler.install(tree);
  return tree;
}
