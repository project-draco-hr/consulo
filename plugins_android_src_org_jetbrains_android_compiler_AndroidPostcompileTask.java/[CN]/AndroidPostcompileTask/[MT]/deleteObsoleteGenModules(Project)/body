{
  final Set<Module> toDelete=new HashSet<Module>();
  for (  Module module : ModuleManager.getInstance(project).getModules()) {
    if (AndroidCompileUtil.isGenModule(module)) {
      final Module baseModule=AndroidCompileUtil.getBaseModuleByGenModule(module);
      if (baseModule == null) {
        toDelete.add(module);
      }
    }
  }
  if (toDelete.size() == 0) {
    return;
  }
  final ModifiableModuleModel model=ModuleManager.getInstance(project).getModifiableModel();
  for (  Module module : toDelete) {
    model.disposeModule(module);
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      model.commit();
    }
  }
);
}
