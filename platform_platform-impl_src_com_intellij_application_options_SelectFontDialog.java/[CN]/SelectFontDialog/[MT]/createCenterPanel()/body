{
  myShowMonospacedCheckbox=new JCheckBox(ApplicationBundle.message("checkbox.show.only.monospaced.fonts"));
  final boolean useOnlyMonospacedFonts=EditorColorsManager.getInstance().isUseOnlyMonospacedFonts();
  myFontList=new JBList();
  new ListSpeedSearch(myFontList);
  myFontList.setModel(new DefaultListModel());
  fillList(useOnlyMonospacedFonts);
  new DoubleClickListener(){
    @Override protected boolean onDoubleClick(    MouseEvent e){
      doOKAction();
      return true;
    }
  }
.installOn(myFontList);
  myFontList.setCellRenderer(new MyListCellRenderer());
  myShowMonospacedCheckbox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      boolean onlyMonospaced=myShowMonospacedCheckbox.isSelected();
      EditorColorsManager.getInstance().setUseOnlyMonospacedFonts(onlyMonospaced);
      String selection=(String)myFontList.getSelectedValue();
      fillList(onlyMonospaced);
      if (selection != null) {
        myFontList.setSelectedValue(selection,true);
        myFontList.ensureIndexIsVisible(myFontList.getSelectedIndex());
      }
    }
  }
);
  JPanel panel=new JPanel(new BorderLayout());
  panel.add(myShowMonospacedCheckbox,BorderLayout.NORTH);
  panel.add(ScrollPaneFactory.createScrollPane(myFontList),BorderLayout.CENTER);
  myShowMonospacedCheckbox.setSelected(useOnlyMonospacedFonts);
  myFontList.addListSelectionListener(new ListSelectionListener(){
    @Override public void valueChanged(    ListSelectionEvent e){
      setOKActionEnabled(myFontList.getSelectedValue() != null);
    }
  }
);
  return panel;
}
