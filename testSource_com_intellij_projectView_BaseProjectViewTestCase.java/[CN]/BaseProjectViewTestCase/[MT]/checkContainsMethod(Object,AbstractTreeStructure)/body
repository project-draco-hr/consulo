{
  MultiValuesMap<VirtualFile,AbstractTreeNode> map=new MultiValuesMap<VirtualFile,AbstractTreeNode>();
  collect((AbstractTreeNode)rootElement,map,structure);
  Iterator<VirtualFile> files=map.keySet().iterator();
  while (files.hasNext()) {
    VirtualFile eachFile=files.next();
    Collection<AbstractTreeNode> nodes=map.values();
    for (Iterator<AbstractTreeNode> iterator=nodes.iterator(); iterator.hasNext(); ) {
      ProjectViewNode eachNode=(ProjectViewNode)iterator.next();
      boolean actual=eachNode.contains(eachFile);
      boolean expected=map.get(eachFile).contains(eachNode);
      if (actual != expected) {
        assertTrue("file=" + eachFile + " node="+ eachNode.getTestPresentation()+ " expected:"+ expected,false);
      }
    }
  }
}
