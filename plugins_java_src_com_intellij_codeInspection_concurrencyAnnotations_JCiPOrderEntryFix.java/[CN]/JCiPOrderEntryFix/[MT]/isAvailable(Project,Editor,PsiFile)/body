{
  if (!(file instanceof PsiJavaFile))   return false;
  final PsiReference reference=TargetElementUtil.findReference(editor);
  if (!(reference instanceof PsiJavaCodeReferenceElement))   return false;
  if (reference.resolve() != null)   return false;
  @NonNls final String referenceName=((PsiJavaCodeReferenceElement)reference).getReferenceName();
  if (referenceName == null)   return false;
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  final VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile == null)   return false;
  if (fileIndex.getModuleForFile(virtualFile) == null)   return false;
  if (!(((PsiJavaCodeReferenceElement)reference).getParent() instanceof PsiAnnotation && PsiUtil.isLanguageLevel5OrHigher(((PsiJavaCodeReferenceElement)reference))))   return false;
  if (!JCiPUtil.isJCiPAnnotation(referenceName))   return false;
  return true;
}
