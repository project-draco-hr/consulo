{
  final ProjectEx project=(ProjectEx)myManager.getProject();
  if (project.isDummy() || project.isDefault())   return null;
  ApplicationManager.getApplication().assertReadAccessAllowed();
  if (vFile == null) {
    LOG.assertTrue(false);
    return null;
  }
  LOG.assertTrue(vFile.isValid());
  dispatchPendingEvents();
synchronized (PsiLock.LOCK) {
    PsiFile psiFile=myVFileToPsiFileMap.get(vFile);
    if (psiFile != null)     return psiFile;
    psiFile=createPsiFile(vFile,vFile.getName());
    if (psiFile == null)     return null;
    myVFileToPsiFileMap.put(vFile,psiFile);
    return psiFile;
  }
}
