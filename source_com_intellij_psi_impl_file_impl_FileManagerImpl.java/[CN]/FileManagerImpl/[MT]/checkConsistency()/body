{
  Map<VirtualFile,PsiFile> fileToPsiFileMap=myVFileToPsiFileMap;
  myVFileToPsiFileMap=new WeakValueHashMap<VirtualFile,PsiFile>();
  for (Iterator<VirtualFile> iterator=fileToPsiFileMap.keySet().iterator(); iterator.hasNext(); ) {
    VirtualFile vFile=iterator.next();
    PsiFile psiFile=fileToPsiFileMap.get(vFile);
    LOG.assertTrue(vFile.isValid());
    PsiFile psiFile1=findFile(vFile);
    LOG.assertTrue(psiFile1 != null,vFile.toString());
    if (psiFile != null) {
      LOG.assertTrue(psiFile1.getClass().equals(psiFile.getClass()));
    }
    VirtualFile parent=vFile.getParent();
    LOG.assertTrue(myVFileToPsiDirMap.containsKey(parent));
  }
  com.intellij.util.containers.HashMap<VirtualFile,PsiDirectory> fileToPsiDirMap=myVFileToPsiDirMap;
  myVFileToPsiDirMap=new com.intellij.util.containers.HashMap<VirtualFile,PsiDirectory>();
  for (Iterator<VirtualFile> iterator=fileToPsiDirMap.keySet().iterator(); iterator.hasNext(); ) {
    VirtualFile vFile=iterator.next();
    LOG.assertTrue(vFile.isValid());
    PsiDirectory psiDir1=findDirectory(vFile);
    LOG.assertTrue(psiDir1 != null);
    VirtualFile parent=vFile.getParent();
    if (parent != null) {
      LOG.assertTrue(myVFileToPsiDirMap.containsKey(parent));
    }
  }
}
