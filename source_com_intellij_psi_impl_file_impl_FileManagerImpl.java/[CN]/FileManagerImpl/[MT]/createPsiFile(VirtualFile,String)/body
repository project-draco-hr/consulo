{
  if (vFile.isDirectory())   return null;
  if (myFileTypeManager.isFileIgnored(name))   return null;
  VirtualFile parent=vFile.getParent();
  if (parent == null)   return null;
  PsiDirectory psiDir=findDirectory(parent);
  if (psiDir == null)   return null;
  FileType fileType=myFileTypeManager.getFileTypeByFileName(name);
  PsiFile psiFile=fileType.createPsiFile(vFile,myManager.getProject());
  if (psiFile == null) {
    if (fileType instanceof JavaClassFileType)     return null;
    if (fileType.isBinary()) {
      psiFile=new PsiBinaryFileImpl(myManager,vFile);
    }
 else {
      psiFile=new PsiPlainTextFileImpl(myManager,vFile);
    }
  }
  return psiFile;
}
