{
  bus.connect().subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener(){
    public void before(    final List<? extends VFileEvent> events){
    }
    public void after(    final List<? extends VFileEvent> events){
      for (      VFileEvent event : events) {
        if (event.getFileSystem() instanceof LocalFileSystem) {
          final String path=event.getPath();
          List<String> jarPaths=new ArrayList<String>();
          r.lock();
          try {
            jarPaths.addAll(myHandlers.keySet());
          }
  finally {
            r.unlock();
          }
          for (          String jarPath : jarPaths) {
            if (FileUtil.startsWith(jarPath.substring(0,jarPath.length() - JAR_SEPARATOR.length()),path,SystemInfo.isFileSystemCaseSensitive)) {
              markDirty(jarPath);
            }
          }
        }
      }
    }
  }
);
}
