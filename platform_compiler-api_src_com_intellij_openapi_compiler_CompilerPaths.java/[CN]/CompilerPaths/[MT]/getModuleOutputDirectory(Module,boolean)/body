{
  final CompilerPathsManager manager=CompilerPathsManager.getInstance(module.getProject());
  VirtualFile outPath;
  if (forTestClasses) {
    final VirtualFile path=manager.getCompilerOutput(module,ContentFolderType.TEST);
    if (path != null) {
      outPath=path;
    }
 else {
      outPath=manager.getCompilerOutput(module,ContentFolderType.PRODUCTION);
    }
  }
 else {
    outPath=manager.getCompilerOutput(module,ContentFolderType.PRODUCTION);
  }
  if (outPath == null) {
    return null;
  }
  if (!outPath.isValid()) {
    LOG.info("Requested output path for module " + module.getName() + " is not valid");
    return null;
  }
  return outPath;
}
