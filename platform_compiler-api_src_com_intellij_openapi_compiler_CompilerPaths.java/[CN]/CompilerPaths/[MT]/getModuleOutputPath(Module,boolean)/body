{
  final String outPathUrl;
  final Application application=ApplicationManager.getApplication();
  final CompilerPathsManager pathsManager=CompilerPathsManager.getInstance(module.getProject());
  if (application.isDispatchThread()) {
    outPathUrl=pathsManager.getCompilerOutputUrl(module,forTestClasses ? ContentFolderType.TEST : ContentFolderType.PRODUCTION);
  }
 else {
    outPathUrl=application.runReadAction(new Computable<String>(){
      @Override public String compute(){
        return pathsManager.getCompilerOutputUrl(module,forTestClasses ? ContentFolderType.TEST : ContentFolderType.PRODUCTION);
      }
    }
);
  }
  return outPathUrl != null ? VirtualFileManager.extractPath(outPathUrl) : null;
}
