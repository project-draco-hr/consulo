{
  final String generatedCompilerDirectoryPath=getGeneratedDataDirectory(module.getProject(),compiler).getPath();
  String moduleHash=null;
  String moduleDirPath=module.getModuleDirPath();
  if (moduleDirPath != null) {
    moduleHash=Integer.toHexString(moduleDirPath.hashCode());
  }
 else {
    moduleHash=module.getProject().getLocationHash();
  }
  final String moduleDir=module.getName().replaceAll("\\s+","_") + "." + moduleHash;
  return generatedCompilerDirectoryPath.replace(File.separatorChar,'/') + "/" + moduleDir+ "/"+ (forTestSources ? "test" : "production");
}
