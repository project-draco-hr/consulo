{
  SmartList<PsiFileSystemItem> result=new SmartList<PsiFileSystemItem>();
  processFilesByName(name,includeDirs,new CommonProcessors.CollectProcessor<PsiFileSystemItem>(result),scope,null);
  if (includeDirs) {
    return ArrayUtil.toObjectArray(result,PsiFileSystemItem.class);
  }
  return result.toArray(new PsiFile[result.size()]);
}
