{
  if (myOldProblemElements == null)   return null;
  final HashMap<String,Set<RefEntity>> oldContents=new HashMap<String,Set<RefEntity>>();
  final Set<RefEntity> elements=myOldProblemElements.keySet();
  for (  RefEntity element : elements) {
    String packageName=RefJavaUtil.getInstance().getPackageName(element);
    final Set<RefEntity> collection=myPackageContents.get(packageName);
    if (collection != null) {
      final Set<RefEntity> currentElements=new HashSet<RefEntity>(collection);
      if (contains(element,currentElements))       continue;
    }
    Set<RefEntity> oldContent=oldContents.get(packageName);
    if (oldContent == null) {
      oldContent=new HashSet<RefEntity>();
      oldContents.put(packageName,oldContent);
    }
    oldContent.add(element);
  }
  return oldContents;
}
