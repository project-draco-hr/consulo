{
  final GlobalInspectionContextImpl context=getContext();
  if (context != null && context.getUIOptions().SHOW_DIFF_WITH_PREVIOUS_RUN) {
    if (myOldProblemElements != null) {
      final Set<CommonProblemDescriptor> allAvailable=new HashSet<CommonProblemDescriptor>();
      for (      CommonProblemDescriptor[] descriptors : myOldProblemElements.values()) {
        if (descriptors != null) {
          allAvailable.addAll(Arrays.asList(descriptors));
        }
      }
      final boolean old=contains(descriptor,allAvailable);
      final boolean current=contains(descriptor,getProblemToElements().keySet());
      return calcStatus(old,current);
    }
  }
  return FileStatus.NOT_CHANGED;
}
