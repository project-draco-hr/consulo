def branchmap(self):
    d = self.call('branchmap')
    try:
        branchmap = {}
        for branchpart in d.splitlines():
            branchheads = branchpart.split(' ')
            branchname = urllib.unquote(branchheads[0])
            try:
                branchname.decode('utf-8')
            except UnicodeDecodeError:
                branchname = encoding.fromlocal(branchname)
            branchheads = [bin(x) for x in branchheads[1:]]
            branchmap[branchname] = branchheads
        return branchmap
    except:
        raise error.ResponseError(_('unexpected response:'), d)
