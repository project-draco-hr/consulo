{
  DiffViewerBase viewer=ObjectUtils.tryCast(e.getData(DiffDataKeys.DIFF_VIEWER),DiffViewerBase.class);
  if (viewer == null)   return null;
  if (viewer.getProject() == null)   return null;
  if (viewer.isDisposed())   return null;
  Editor editor=e.getData(CommonDataKeys.EDITOR);
  if (editor == null)   return null;
  ViewerAnnotator annotator=getAnnotator(viewer);
  if (annotator == null)   return null;
  Side side=annotator.getCurrentSide(viewer,editor);
  if (side == null)   return null;
  return new EventData(viewer,editor,annotator,side);
}
