{
  final Object obj=myLookupItem.getObject();
  if (!(obj instanceof PsiClass) || !((PsiClass)obj).isAnnotationType())   return false;
  final Document document=myEditor.getDocument();
  PsiDocumentManager.getInstance(myFile.getProject()).commitDocument(document);
  PsiElement elementAt=myFile.findElementAt(myContext.getStartOffset());
  final PsiElement parentElement=elementAt != null ? elementAt.getParent() : null;
  PsiElement parent=PsiTreeUtil.getParentOfType(elementAt,PsiModifierListOwner.class,PsiCodeBlock.class,PsiComment.class);
  if (parent == null && parentElement instanceof PsiErrorElement) {
    PsiElement nextElement=parentElement.getNextSibling();
    if (nextElement instanceof PsiWhiteSpace)     nextElement=nextElement.getNextSibling();
    if (nextElement instanceof PsiClass)     parent=nextElement;
  }
  return parent instanceof PsiModifierListOwner;
}
