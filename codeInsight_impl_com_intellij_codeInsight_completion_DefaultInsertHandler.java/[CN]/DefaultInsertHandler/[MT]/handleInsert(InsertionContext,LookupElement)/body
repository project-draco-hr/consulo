{
  super.handleInsert(context,item);
  if (item instanceof LookupItem && ((LookupItem)item).getAttribute(JavaCompletionUtil.QUALIFIER_PREFIX_ATTRIBUTE) != null) {
    FeatureUsageTracker.getInstance().triggerFeatureUsed(JavaCompletionFeatures.SECOND_SMART_COMPLETION_CHAIN);
  }
  if (!(item instanceof SimpleLookupItem) && item instanceof LookupItem) {
    if (((LookupItem)item).getObject() instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)((LookupItem)item).getObject();
      LookupItem<PsiMethod> simpleItem=LookupElementFactoryImpl.getInstance().createLookupElement(method,item.getLookupString());
      final InsertHandler handler=new PsiMethodInsertHandler(method){
        @Override protected TailType getTailType(        final LookupItem item,        final Editor editor,        final char completionChar){
          if (completionChar == '!')           return ((LookupItem)item).getTailType();
          if (completionChar == '(') {
            final PsiMethod psiMethod=(PsiMethod)item.getObject();
            return psiMethod.getParameterList().getParameters().length > 0 || psiMethod.getReturnType() != PsiType.VOID ? TailType.NONE : TailType.SEMICOLON;
          }
          if (completionChar == Lookup.COMPLETE_STATEMENT_SELECT_CHAR)           return TailType.SMART_COMPLETION;
          return null;
        }
      }
;
      simpleItem.setInsertHandler(handler);
      simpleItem.copyAttributes((LookupItem)item);
      simpleItem.handleInsert(context);
      return;
    }
  }
  handleInsertInner(context,(LookupItem)item,context.getCompletionChar());
}
