{
  final CharSequence chars=document.getCharsSequence();
  final int length=chars.length();
  final RangeMarker toDelete;
  if (endOffset < length && Character.isJavaIdentifierPart(chars.charAt(endOffset))) {
    document.insertString(endOffset," ");
    toDelete=document.createRangeMarker(endOffset,endOffset + 1);
  }
 else   if (endOffset >= length) {
    toDelete=document.createRangeMarker(length - 1,length - 1);
  }
 else {
    toDelete=document.createRangeMarker(endOffset,endOffset);
  }
  toDelete.setGreedyToLeft(true);
  toDelete.setGreedyToRight(true);
  return toDelete;
}
