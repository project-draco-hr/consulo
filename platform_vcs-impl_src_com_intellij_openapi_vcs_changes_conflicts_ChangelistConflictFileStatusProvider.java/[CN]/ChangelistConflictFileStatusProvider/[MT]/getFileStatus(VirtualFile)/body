{
  ChangelistConflictTracker.Options options=myConflictTracker.getOptions();
  if (!options.TRACKING_ENABLED) {
    return null;
  }
  boolean conflict=myConflictTracker.hasConflict(virtualFile);
  if (conflict && options.HIGHLIGHT_CONFLICTS) {
    return CHANGELIST_CONFLICT;
  }
 else   if (options.HIGHLIGHT_NON_ACTIVE_CHANGELIST) {
    FileStatus status=myChangeListManager.getStatus(virtualFile);
    if (status == FileStatus.MODIFIED || status == FileStatus.ADDED) {
      if (!myConflictTracker.isWritingAllowed(virtualFile)) {
        return status == FileStatus.MODIFIED ? MODIFIED_OUTSIDE : ADDED_OUTSIDE;
      }
    }
  }
  return null;
}
