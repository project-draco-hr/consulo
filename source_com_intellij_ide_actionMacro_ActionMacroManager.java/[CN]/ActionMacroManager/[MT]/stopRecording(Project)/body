{
  LOG.assertTrue(myIsRecording);
  myIsRecording=false;
  String macroName;
  do {
    macroName=Messages.showInputDialog(project,"Enter macro name. Leave blank if macro is temporary.","Enter Macro Name",Messages.getQuestionIcon());
    if (macroName == null) {
      myRecordingMacro=null;
      return;
    }
    if ("".equals(macroName))     macroName=null;
  }
 while (macroName != null && !checkCanCreateMacro(macroName));
  myLastMacro=myRecordingMacro;
  addRecordedMacroWithName(macroName);
  registerActions();
}
