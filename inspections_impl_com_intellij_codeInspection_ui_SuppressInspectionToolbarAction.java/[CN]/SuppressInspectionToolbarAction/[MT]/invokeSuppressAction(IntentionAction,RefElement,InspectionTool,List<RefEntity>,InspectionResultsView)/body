{
  final InspectionManagerEx managerEx=(InspectionManagerEx)InspectionManagerEx.getInstance(view.getProject());
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          PsiDocumentManager.getInstance(view.getProject()).commitAllDocuments();
          CommandProcessor.getInstance().executeCommand(view.getProject(),new Runnable(){
            public void run(){
              ApplicationManager.getApplication().runWriteAction(new Runnable(){
                public void run(){
                  try {
                    action.invoke(view.getProject(),null,element.getElement().getContainingFile());
                    for (                    RefEntity refElement : elementsToSuppress) {
                      tool.ignoreElement(refElement);
                      if (refElement instanceof RefElement) {
                        final Set<GlobalInspectionContextImpl> globalInspectionContexts=managerEx.getRunningContexts();
                        for (                        GlobalInspectionContextImpl context : globalInspectionContexts) {
                          context.ignoreElement(tool,((RefElement)refElement).getElement());
                          context.refreshViews();
                        }
                      }
                    }
                    view.updateView(false);
                  }
 catch (                  IncorrectOperationException e1) {
                    LOG.error(e1);
                  }
                }
              }
);
            }
          }
,action.getText(),null);
        }
      }
);
    }
  }
);
}
