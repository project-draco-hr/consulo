{
  final HighlightDisplayKey key=HighlightDisplayKey.find(tool.getShortName());
  if (key != null) {
    final PsiElement psiElement=refElement.getElement();
    if (psiElement != null && psiElement.isValid()) {
      final IntentionAction action=SuppressInspectionToolbarAction.getCorrectIntentionAction(tool,key.getID(),descriptor,psiElement);
      final PsiFile file=psiElement.getContainingFile();
      if (action.isAvailable(view.getProject(),null,file)) {
        return new AnAction(action.getText()){
          public void actionPerformed(          AnActionEvent e){
            final List<RefEntity> elementsToSuppress=new ArrayList<RefEntity>();
            InspectionResultsView.traverseRefElements((InspectionTreeNode)view.getTree().getSelectionPath().getLastPathComponent(),elementsToSuppress);
            invokeSuppressAction(action,refElement,tool,elementsToSuppress,view);
          }
        }
;
      }
    }
  }
  return null;
}
