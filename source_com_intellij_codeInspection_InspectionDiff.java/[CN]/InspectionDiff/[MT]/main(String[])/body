{
  if (args.length != 3 && args.length != 2) {
    System.out.println("Required parameters: <old_file> <new_file> [<delta_file_name>]");
  }
  String oldPath=args[0];
  String newPath=args[1];
  String outPath=args.length == 3 ? args[2] : null;
  try {
    InputStream oldStream=new BufferedInputStream(new FileInputStream(oldPath));
    InputStream newStream=new BufferedInputStream(new FileInputStream(newPath));
    Document oldDoc=JDOMUtil.loadDocument(oldStream);
    Document newDoc=JDOMUtil.loadDocument(newStream);
    OutputStream outStream=System.out;
    if (outPath != null) {
      outStream=new BufferedOutputStream(new FileOutputStream(outPath));
    }
    Document delta=createDelta(oldDoc,newDoc);
    JDOMUtil.writeDocument(delta,outStream,"\n");
  }
 catch (  Exception e) {
    System.out.println(e);
    e.printStackTrace();
  }
}
