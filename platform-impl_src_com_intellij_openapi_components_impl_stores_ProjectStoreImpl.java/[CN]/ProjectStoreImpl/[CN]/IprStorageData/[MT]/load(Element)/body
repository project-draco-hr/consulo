{
  final String v=root.getAttributeValue(VERSION_OPTION);
  originalVersion=v != null ? Integer.parseInt(v) : 0;
  if (originalVersion != ProjectManagerImpl.CURRENT_FORMAT_VERSION) {
    convert(root,originalVersion);
  }
  final Set<String> usedMacros1=new HashSet<String>(Arrays.asList(readUsedMacros(root)));
  final boolean macrosOk=ProjectMacrosUtil.checkMacros(myProject,usedMacros1);
  if (!macrosOk) {
    throw new IOException(ProjectBundle.message("project.load.undefined.path.variables.error"));
  }
  final Element usedMacros=root.getChild(USED_MACROS_ELEMENT_NAME);
  if (usedMacros != null) {
    for (    Element e : JDOMUtil.getElements(usedMacros)) {
      myUsedMacros.add(e.getAttributeValue(NAME_ATTR));
    }
  }
  super.load(root);
}
