{
  VcsRevisionNumber revision=e.getData(VcsDataKeys.VCS_REVISION_NUMBER);
  if (revision == null) {
    VcsFileRevision fileRevision=e.getData(VcsDataKeys.VCS_FILE_REVISION);
    if (fileRevision != null) {
      revision=fileRevision.getRevisionNumber();
    }
  }
  if (revision == null) {
    return;
  }
  String rev=revision instanceof ShortVcsRevisionNumber ? ((ShortVcsRevisionNumber)revision).toShortString() : revision.asString();
  CopyPasteManager.getInstance().setContents(new StringSelection(rev));
}
