{
  if (event instanceof VFileCreateEvent || event instanceof VFileDeleteEvent || event instanceof VFileMoveEvent) {
    VirtualFile file=event.getFile();
    if (notIgnored(file)) {
      return Collections.singleton(file);
    }
 else {
      return Collections.emptyList();
    }
  }
 else   if (event instanceof VFileCopyEvent) {
    ArrayList<VirtualFile> affectedFiles=new ArrayList<VirtualFile>(2);
    VirtualFile oldFile=event.getFile();
    if (notIgnored(oldFile)) {
      affectedFiles.add(oldFile);
    }
    VFileCopyEvent copyEvent=(VFileCopyEvent)event;
    VirtualFile newFile=copyEvent.getNewParent().findChild(copyEvent.getNewChildName());
    if (notIgnored(newFile)) {
      affectedFiles.add(newFile);
    }
    return affectedFiles;
  }
 else {
    return Collections.emptyList();
  }
}
