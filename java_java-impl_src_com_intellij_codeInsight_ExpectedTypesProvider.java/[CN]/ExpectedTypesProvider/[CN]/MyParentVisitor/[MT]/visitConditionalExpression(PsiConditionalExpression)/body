{
  if (myExpr.equals(expr.getCondition())) {
    if (myForCompletion) {
      myExpr=expr;
      myExpr.getParent().accept(this);
      return;
    }
    ExpectedTypeInfo info=createInfoImpl(PsiType.BOOLEAN,ExpectedTypeInfo.TYPE_STRICTLY,PsiType.BOOLEAN,TailType.NONE);
    myResult=new ExpectedTypeInfo[]{info};
  }
 else   if (myExpr.equals(expr.getThenExpression())) {
    ExpectedTypeInfo[] types=getExpectedTypes(expr,myForCompletion);
    for (    ExpectedTypeInfo info : types) {
      ExpectedTypeInfoImpl infoImpl=(ExpectedTypeInfoImpl)info;
      infoImpl.setInsertExplicitTypeParams(true);
      infoImpl.myTailType=TailType.COND_EXPR_COLON;
    }
    myResult=types;
  }
 else {
    if (!myExpr.equals(expr.getElseExpression())) {
      LOG.error(Arrays.asList(expr.getChildren()) + "; " + myExpr);
    }
    myResult=getExpectedTypes(expr,myForCompletion);
    for (    ExpectedTypeInfo info : myResult) {
      ((ExpectedTypeInfoImpl)info).setInsertExplicitTypeParams(true);
    }
  }
}
