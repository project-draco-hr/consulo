{
  final PsiMethod method;
  final PsiType type;
  final PsiLambdaExpression lambdaExpression=PsiTreeUtil.getParentOfType(statement,PsiLambdaExpression.class);
  if (lambdaExpression != null) {
    final PsiType functionalInterfaceType=lambdaExpression.getFunctionalInterfaceType();
    method=LambdaUtil.getFunctionalInterfaceMethod(functionalInterfaceType);
    type=LambdaUtil.getFunctionalInterfaceReturnType(functionalInterfaceType);
  }
 else {
    method=PsiTreeUtil.getParentOfType(statement,PsiMethod.class);
    type=method != null ? method.getReturnType() : null;
  }
  if (method != null) {
    visitMethodReturnType(method,type);
  }
}
