{
  PsiMethod method=GenerateMembersUtil.substituteGenericMethod(methodCandidate.getElement(),methodCandidate.getSubstitutor());
  clearMethod(method);
  clearModifiers(method);
  @NonNls StringBuffer call=new StringBuffer();
  PsiModifierList modifierList=null;
  if (method.getReturnType() != PsiType.VOID) {
    call.append("return ");
  }
  if (target instanceof PsiField) {
    PsiField field=(PsiField)target;
    modifierList=field.getModifierList();
    final String name=field.getName();
    final PsiParameter[] parameters=method.getParameterList().getParameters();
    for (    PsiParameter parameter : parameters) {
      if (name.equals(parameter.getName())) {
        call.append("this.");
        break;
      }
    }
    call.append(name);
    call.append(".");
  }
 else   if (target instanceof PsiMethod) {
    PsiMethod m=(PsiMethod)target;
    modifierList=m.getModifierList();
    call.append(m.getName());
    call.append("().");
  }
  call.append(method.getName());
  call.append("(");
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  for (int j=0; j < parameters.length; j++) {
    PsiParameter parameter=parameters[j];
    if (j > 0)     call.append(",");
    call.append(parameter.getName());
  }
  call.append(");");
  final PsiManager psiManager=method.getManager();
  PsiStatement stmt=JavaPsiFacade.getInstance(psiManager.getProject()).getElementFactory().createStatementFromText(call.toString(),method);
  stmt=(PsiStatement)CodeStyleManager.getInstance(psiManager.getProject()).reformat(stmt);
  method.getBody().add(stmt);
  if (modifierList != null && modifierList.hasModifierProperty(PsiModifier.STATIC)) {
    PsiUtil.setModifierProperty(method,PsiModifier.STATIC,true);
  }
  PsiUtil.setModifierProperty(method,PsiModifier.PUBLIC,true);
  final Project project=method.getProject();
  for (  PsiAnnotation annotation : methodCandidate.getElement().getModifierList().getAnnotations()) {
    annotate(method,project,annotation.getQualifiedName());
  }
  final PsiClass targetClass=((PsiMember)target).getContainingClass();
  LOG.assertTrue(targetClass != null);
  final PsiMethod[] methods=targetClass.findMethodsBySignature(method,true);
  boolean insertOverride=false;
  for (  PsiMethod superMethod : methods) {
    if (OverrideImplementUtil.isInsertOverride(superMethod,targetClass)) {
      insertOverride=true;
      break;
    }
  }
  if (insertOverride) {
    annotate(method,project,Override.class.getName());
  }
  return new PsiGenerationInfo<PsiMethod>(method);
}
