{
  if (ASSERT_THREADING) {
    PsiElement wrapper=myWrapper;
    FileElement fileElement=null;
    PsiFile psiFile=null;
    boolean ok=ApplicationManager.getApplication().isWriteAccessAllowed() || Thread.holdsLock(START_OFFSET_LOCK) || (fileElement=TreeUtil.getFileElement(this)) == null || wrapper != null && !wrapper.isPhysical() || (psiFile=(PsiFile)fileElement.getPsi()) == null || psiFile instanceof DummyHolder || psiFile.getViewProvider() instanceof FreeThreadedFileViewProvider || !psiFile.isPhysical();
    if (!ok) {
      LOG.error("Threading assertion. " + " Under write: " + ApplicationManager.getApplication().isWriteAccessAllowed() + "; Thread.holdsLock(START_OFFSET_LOCK): "+ Thread.holdsLock(START_OFFSET_LOCK)+ "; Thread.holdsLock(PsiLock.LOCK): "+ Thread.holdsLock(PsiLock.LOCK)+ "; wrapper: "+ wrapper+ "; wrapper.isPhysical(): "+ (wrapper != null && wrapper.isPhysical())+ "; fileElement: "+ fileElement+ "; psiFile: "+ psiFile+ "; psiFile.getViewProvider(): "+ (psiFile == null ? null : psiFile.getViewProvider())+ "; psiFile.isPhysical(): "+ (psiFile != null && psiFile.isPhysical()));
    }
  }
  myCachedLength=NOT_CACHED;
  myModificationsCount++;
  myHC=-1;
  clearRelativeOffsets(rawFirstChild());
}
