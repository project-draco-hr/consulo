{
  final int[] result=new int[]{0};
  acceptTree(new RecursiveTreeElementWalkingVisitor(false){
    @Override protected void visitNode(    final TreeElement element){
      if (element instanceof LeafElement || TreeUtil.isCollapsedChameleon(element)) {
        result[0]+=element.getNotCachedLength();
      }
      super.visitNode(element);
    }
  }
);
  return result[0];
}
