{
  ASTNode anchorBefore;
  if (anchor != null) {
    anchorBefore=before.booleanValue() ? anchor : anchor.getTreeNext();
  }
 else {
    anchorBefore=before == null || before.booleanValue() ? null : getFirstChildNode();
  }
  return (TreeElement)CodeEditUtil.addChildren(this,first,last,anchorBefore);
}
