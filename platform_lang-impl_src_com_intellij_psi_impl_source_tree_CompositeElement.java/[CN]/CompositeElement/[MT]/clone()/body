{
  CompositeElement clone=(CompositeElement)super.clone();
synchronized (PsiLock.LOCK) {
    clone.clearCaches();
    clone.firstChild=null;
    clone.lastChild=null;
    clone.myModificationsCount=0;
    clone.myWrapper=null;
    for (ASTNode child=rawFirstChild(); child != null; child=child.getTreeNext()) {
      clone.rawAddChildren((TreeElement)child.clone());
    }
  }
  return clone;
}
