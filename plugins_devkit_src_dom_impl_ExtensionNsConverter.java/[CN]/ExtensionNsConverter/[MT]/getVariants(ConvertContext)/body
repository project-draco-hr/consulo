{
  final IdeaPlugin ideaPlugin=context.getInvocationElement().getParentOfType(IdeaPlugin.class,true);
  if (ideaPlugin == null)   return Collections.emptyList();
  final Collection<String> dependencies=ExtensionDomExtender.getDependencies(ideaPlugin);
  final List<IdeaPlugin> depPlugins=new ArrayList<IdeaPlugin>();
  for (  IdeaPlugin plugin : IdeaPluginConverter.collectAllVisiblePlugins(context.getFile())) {
    final String value=plugin.getPluginId();
    if (value != null && dependencies.contains(value)) {
      depPlugins.add(plugin);
    }
  }
  return depPlugins;
}
