def load_state(repo):
    state = {'good': [], 'bad': [], 'skip': [], }
    if os.path.exists(repo.join('bisect.state')):
        for l in repo.opener('bisect.state'):
            (kind, node) = l[:(-1)].split()
            node = repo.lookup(node)
            if (kind not in state):
                raise util.Abort((_('unknown bisect kind %s') % kind))
            state[kind].append(node)
    return state
