{
  for (int i=0; i < myDelegateGraph.nodesCount() - 1; i++) {
    if (myVisibleNodes.get(i)) {
      int nearlyUp=Integer.MIN_VALUE;
      int maxAdjNumber=Integer.MIN_VALUE;
      for (      int upNode : myDelegateGraph.getUpNodes(i)) {
        if (myVisibleNodes.get(upNode))         maxAdjNumber=Math.max(maxAdjNumber,myNumbers[upNode]);
 else         nearlyUp=Math.max(nearlyUp,myNumbers[upNode]);
      }
      if (nearlyUp == maxAdjNumber || nearlyUp == Integer.MIN_VALUE) {
        myNumbers[i]=maxAdjNumber;
      }
 else {
        putEdge(i,nearlyUp);
        myNumbers[i]=nearlyUp;
      }
    }
 else {
      int nearlyUp=Integer.MIN_VALUE;
      for (      int upNode : myDelegateGraph.getUpNodes(i)) {
        if (myVisibleNodes.get(upNode))         nearlyUp=Math.max(nearlyUp,upNode);
 else         nearlyUp=Math.max(nearlyUp,myNumbers[upNode]);
      }
      myNumbers[i]=nearlyUp;
    }
  }
}
