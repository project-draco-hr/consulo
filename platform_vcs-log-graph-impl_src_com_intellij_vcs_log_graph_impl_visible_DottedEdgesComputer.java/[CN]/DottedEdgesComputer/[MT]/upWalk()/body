{
  for (int i=myDelegateGraph.nodesCount() - 1; i >= 0; i--) {
    if (myVisibleNodes.get(i)) {
      int nearlyDown=Integer.MAX_VALUE;
      int minAdjNumber=Integer.MAX_VALUE;
      for (      int downNode : myDelegateGraph.getDownNodes(i)) {
        if (downNode == LinearGraph.NOT_LOAD_COMMIT)         continue;
        if (myVisibleNodes.get(downNode))         minAdjNumber=Math.min(minAdjNumber,myNumbers[downNode]);
 else         nearlyDown=Math.min(nearlyDown,myNumbers[downNode]);
      }
      if (nearlyDown == minAdjNumber || nearlyDown == Integer.MAX_VALUE) {
        myNumbers[i]=minAdjNumber;
      }
 else {
        putEdge(i,nearlyDown);
        myNumbers[i]=nearlyDown;
      }
    }
 else {
      int nearlyDown=Integer.MAX_VALUE;
      for (      int downNode : myDelegateGraph.getDownNodes(i)) {
        if (downNode == LinearGraph.NOT_LOAD_COMMIT)         continue;
        if (myVisibleNodes.get(downNode))         nearlyDown=Math.min(nearlyDown,downNode);
 else         nearlyDown=Math.min(nearlyDown,myNumbers[downNode]);
      }
      myNumbers[i]=nearlyDown;
    }
  }
}
