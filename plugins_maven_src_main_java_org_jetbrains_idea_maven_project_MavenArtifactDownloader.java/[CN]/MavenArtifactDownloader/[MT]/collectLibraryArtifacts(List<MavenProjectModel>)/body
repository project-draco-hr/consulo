{
  Map<MavenId,Set<ArtifactRepository>> result=new TreeMap<MavenId,Set<ArtifactRepository>>();
  for (  MavenProjectModel each : mavenProjects) {
    Collection<Artifact> artifacts=each.getDependencies();
    List remoteRepositories=each.getMavenProject().getRemoteArtifactRepositories();
    for (    Artifact artifact : artifacts) {
      if (artifact.getType().equalsIgnoreCase(MavenConstants.JAR_TYPE) && !artifact.getScope().equalsIgnoreCase(Artifact.SCOPE_SYSTEM)) {
        MavenId id=new MavenId(artifact);
        if (!isExistingProject(artifact,mavenProjects)) {
          Set<ArtifactRepository> repos=result.get(id);
          if (repos == null) {
            repos=new HashSet<ArtifactRepository>();
            result.put(id,repos);
          }
          repos.addAll(remoteRepositories);
        }
      }
    }
  }
  return result;
}
