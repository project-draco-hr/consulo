{
  List<File> downloadedFiles=new ArrayList<File>();
  try {
    Map<MavenId,Set<MavenRemoteRepository>> artifacts=collectArtifactsToDownload();
    download(downloadSources,downloadJavadoc,artifacts,downloadedFiles);
  }
  finally {
    scheduleFilesRefresh(downloadedFiles);
  }
}
