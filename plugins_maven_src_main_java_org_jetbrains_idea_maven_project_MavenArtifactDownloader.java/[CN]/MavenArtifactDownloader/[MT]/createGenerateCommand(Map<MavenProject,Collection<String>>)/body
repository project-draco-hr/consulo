{
  final List<MavenBuildParameters> commands=new ArrayList<MavenBuildParameters>();
  final List<String> goals=Arrays.asList(generateGoals);
  final Set<String> modulePaths=new HashSet<String>();
  for (  Map.Entry<MavenProject,Collection<String>> entry : projects.entrySet()) {
    ProjectUtil.collectAbsoluteModulePaths(entry.getKey(),entry.getValue(),modulePaths);
  }
  for (  Map.Entry<MavenProject,Collection<String>> entry : projects.entrySet()) {
    final File file=entry.getKey().getFile();
    if (!modulePaths.contains(FileUtil.toSystemIndependentName(file.getParent()))) {
      commands.add(new MavenBuildParameters(file.getPath(),goals,entry.getValue()));
    }
  }
  return commands;
}
