{
  if (myEditor.isStickySelection()) {
    return;
  }
  myEditor.getCaretModel().doWithCaretMerging(new Runnable(){
    public void run(){
      validateContext(true);
      myEditor.getSelectionModel().removeBlockSelection();
      int caretOffset=getOffset();
      MyRangeMarker marker=mySelectionMarker;
      if (marker != null) {
        int startOffset=marker.getStartOffset();
        int endOffset=marker.getEndOffset();
        marker.release();
        mySelectionMarker=null;
        myStartVirtualOffset=0;
        myEndVirtualOffset=0;
        myEditor.getSelectionModel().fireSelectionChanged(startOffset,endOffset,caretOffset,caretOffset);
      }
    }
  }
);
}
