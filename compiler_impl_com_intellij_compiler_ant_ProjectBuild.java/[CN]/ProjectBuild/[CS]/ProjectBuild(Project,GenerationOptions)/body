{
  myProject=project;
  myAntProject=new AntProject(BuildProperties.getProjectBuildFileName(myProject),BuildProperties.DEFAULT_TARGET);
  myAntProject.add(new BuildProperties(myProject,genOptions),1);
  final StringBuffer alltargetNames=new StringBuffer();
  alltargetNames.append(BuildProperties.TARGET_INIT);
  alltargetNames.append(", ");
  alltargetNames.append(BuildProperties.TARGET_CLEAN);
  final ModuleChunk[] chunks=genOptions.getModuleChunks();
  if (chunks.length > 0) {
    myAntProject.add(new Comment(CompilerBundle.message("generated.ant.build.modules.section.title")),1);
    for (    final ModuleChunk chunk : chunks) {
      myAntProject.add(createModuleBuildGenerator(chunk,genOptions),1);
      if (alltargetNames.length() > 0) {
        alltargetNames.append(", ");
      }
      final String chunkName=chunk.getName();
      if (chunk.isJ2EE()) {
        alltargetNames.append(BuildProperties.getJ2EEBuildTargetName(chunkName));
      }
 else {
        alltargetNames.append(BuildProperties.getCompileTargetName(chunkName));
      }
    }
  }
  final Target initTarget=new Target(BuildProperties.TARGET_INIT,null,CompilerBundle.message("generated.ant.build.initialization.section.title"),null);
  initTarget.add(new Comment(CompilerBundle.message("generated.ant.build.initialization.section.comment")));
  myAntProject.add(initTarget,1);
  myAntProject.add(new CleanProject(genOptions),1);
  myAntProject.add(new Target(BuildProperties.TARGET_ALL,alltargetNames.toString(),CompilerBundle.message("generated.ant.build.build.all.target.name"),null),1);
}
