{
  myProject=project;
  myAntProject=new AntProject(BuildProperties.getProjectBuildFileName(myProject),BuildProperties.DEFAULT_TARGET);
  myAntProject.add(new BuildPropertiesImpl(myProject,genOptions),1);
  final StringBuilder alltargetNames=new StringBuilder();
  alltargetNames.append(BuildProperties.TARGET_INIT);
  alltargetNames.append(", ");
  alltargetNames.append(BuildProperties.TARGET_CLEAN);
  final ModuleChunk[] chunks=genOptions.getModuleChunks();
  if (chunks.length > 0) {
    myAntProject.add(new Comment(CompilerBundle.message("generated.ant.build.modules.section.title")),1);
    for (    final ModuleChunk chunk : chunks) {
      myAntProject.add(createModuleBuildGenerator(chunk,genOptions),1);
      final String[] targets=ChunkBuildExtension.getAllTargets(chunk);
      for (      String target : targets) {
        if (alltargetNames.length() > 0) {
          alltargetNames.append(", ");
        }
        alltargetNames.append(target);
      }
    }
  }
  final Target initTarget=new Target(BuildProperties.TARGET_INIT,null,CompilerBundle.message("generated.ant.build.initialization.section.title"),null);
  initTarget.add(new Comment(CompilerBundle.message("generated.ant.build.initialization.section.comment")));
  myAntProject.add(initTarget,1);
  myAntProject.add(new CleanProject(genOptions),1);
  myAntProject.add(new Target(BuildProperties.TARGET_ALL,alltargetNames.toString(),CompilerBundle.message("generated.ant.build.build.all.target.name"),null),1);
}
