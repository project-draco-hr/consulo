{
  Set<VirtualFile> readOnlyFiles=new THashSet<VirtualFile>();
  for (  RefEntity refElement : refElements) {
    PsiElement psiElement=refElement instanceof RefElement ? ((RefElement)refElement).getElement() : null;
    if (psiElement == null || psiElement.getContainingFile() == null)     continue;
    readOnlyFiles.add(psiElement.getContainingFile().getVirtualFile());
  }
  return readOnlyFiles;
}
