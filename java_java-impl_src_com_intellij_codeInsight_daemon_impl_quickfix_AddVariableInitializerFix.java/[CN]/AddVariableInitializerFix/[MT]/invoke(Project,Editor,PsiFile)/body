{
  if (!FileModificationService.getInstance().prepareFileForWrite(myVariable.getContainingFile()))   return;
  String initializerText=suggestInitializer();
  PsiElementFactory factory=JavaPsiFacade.getInstance(myVariable.getProject()).getElementFactory();
  PsiExpression initializer=factory.createExpressionFromText(initializerText,myVariable);
  if (myVariable instanceof PsiLocalVariable) {
    ((PsiLocalVariable)myVariable).setInitializer(initializer);
  }
 else   if (myVariable instanceof PsiField) {
    ((PsiField)myVariable).setInitializer(initializer);
  }
 else {
    LOG.error("Unknown variable type: " + myVariable);
  }
  PsiVariable var=CodeInsightUtilBase.forcePsiPostprocessAndRestoreElement(myVariable);
  TextRange range=var.getInitializer().getTextRange();
  int offset=range.getStartOffset();
  editor.getCaretModel().moveToOffset(offset);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  editor.getSelectionModel().setSelection(range.getStartOffset(),range.getEndOffset());
}
