{
  if (!((OrderEntryBaseImpl)orderEntry1).sameType(orderEntry2))   return false;
  if (orderEntry1 instanceof JdkOrderEntry) {
    if (!(orderEntry2 instanceof JdkOrderEntry))     return false;
    if (orderEntry1 instanceof InheritedJdkOrderEntry && orderEntry2 instanceof ModuleJdkOrderEntry) {
      return false;
    }
    if (orderEntry2 instanceof InheritedJdkOrderEntry && orderEntry1 instanceof ModuleJdkOrderEntry) {
      return false;
    }
    if (orderEntry1 instanceof ModuleJdkOrderEntry && orderEntry2 instanceof ModuleJdkOrderEntry) {
      String name1=((ModuleJdkOrderEntry)orderEntry1).getJdkName();
      String name2=((ModuleJdkOrderEntry)orderEntry2).getJdkName();
      if (!name1.equals(name2)) {
        return false;
      }
    }
  }
  if (orderEntry1 instanceof ExportableOrderEntry) {
    if (!(((ExportableOrderEntry)orderEntry1).isExported() == ((ExportableOrderEntry)orderEntry2).isExported())) {
      return false;
    }
  }
  if (orderEntry1 instanceof ModuleOrderEntry) {
    LOG.assertTrue(orderEntry2 instanceof ModuleOrderEntryImpl);
    final String name1=((ModuleOrderEntryImpl)orderEntry1).getModuleName();
    final String name2=((ModuleOrderEntryImpl)orderEntry2).getModuleName();
    return Comparing.equal(name1,name2);
  }
  if (orderEntry1 instanceof LibraryOrderEntry) {
    LOG.assertTrue(orderEntry2 instanceof LibraryOrderEntry);
    LibraryOrderEntry libraryOrderEntry1=(LibraryOrderEntry)orderEntry1;
    LibraryOrderEntry libraryOrderEntry2=(LibraryOrderEntry)orderEntry2;
    boolean equal=Comparing.equal(libraryOrderEntry1.getLibraryName(),libraryOrderEntry2.getLibraryName()) && Comparing.equal(libraryOrderEntry1.getLibraryLevel(),libraryOrderEntry2.getLibraryLevel());
    if (!equal)     return false;
  }
  final OrderRootType[] allTypes=OrderRootType.ALL_TYPES;
  for (int i=0; i < allTypes.length; i++) {
    OrderRootType type=allTypes[i];
    final String[] orderedRootUrls1=orderEntry1.getUrls(type);
    final String[] orderedRootUrls2=orderEntry2.getUrls(type);
    if (!Arrays.equals(orderedRootUrls1,orderedRootUrls2)) {
      return false;
    }
  }
  return true;
}
