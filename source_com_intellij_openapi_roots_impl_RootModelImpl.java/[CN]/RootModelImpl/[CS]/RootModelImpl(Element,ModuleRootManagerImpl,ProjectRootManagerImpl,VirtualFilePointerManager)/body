{
  myProjectRootManager=projectRootManager;
  myFilePointerManager=filePointerManager;
  myModuleRootManager=moduleRootManager;
  myModuleLibraryTable=new ModuleLibraryTable(this,myProjectRootManager,myFilePointerManager);
  myVirtualFilePointerListener=null;
  final List contentChildren=element.getChildren(ContentEntryImpl.ELEMENT_NAME);
  for (  Object aContentChildren : contentChildren) {
    Element child=(Element)aContentChildren;
    ContentEntryImpl contentEntry=new ContentEntryImpl(child,this);
    myContent.add(contentEntry);
  }
  final List orderElements=element.getChildren(OrderEntryFactory.ORDER_ENTRY_ELEMENT_NAME);
  boolean moduleSourceAdded=false;
  for (  Object orderElement : orderElements) {
    Element child=(Element)orderElement;
    final OrderEntry orderEntry=OrderEntryFactory.createOrderEntryByElement(child,this,myProjectRootManager,myFilePointerManager);
    if (orderEntry instanceof ModuleSourceOrderEntry) {
      if (moduleSourceAdded)       continue;
      moduleSourceAdded=true;
    }
    myOrderEntries.add(orderEntry);
  }
  if (!moduleSourceAdded) {
    myOrderEntries.add(new ModuleSourceOrderEntryImpl(this));
  }
  myExcludeExploded=element.getChild(EXCLUDE_EXPLODED_TAG) != null;
  myExplodedDirectoryPointer=getOutputPathValue(element,EXPLODED_TAG,true);
  myExplodedDirectory=getOutputPathValue(element,EXCLUDE_EXPLODED_TAG);
  myWritable=false;
  myOrderEntryProperties=new OrderEntryProperties();
  final Element propertiesChild=element.getChild(PROPERTIES_CHILD_NAME);
  if (propertiesChild != null) {
    myOrderEntryProperties.readExternal(propertiesChild);
  }
  for (  OrderRootType orderRootType : OrderRootType.getAllTypes()) {
    String paths=orderRootType.getModulePathsName();
    if (paths != null) {
      final Element pathsElement=element.getChild(paths);
      if (pathsElement != null) {
        VirtualFilePointerContainer container=myFilePointerManager.createContainer(myVirtualFilePointerFactory);
        myOrderRootPointerContainers.put(orderRootType,container);
        container.readExternal(pathsElement,ROOT_ELEMENT);
      }
    }
  }
  for (  ModuleExtension extension : Extensions.getExtensions(ModuleExtension.EP_NAME,moduleRootManager.getModule())) {
    extension.readExternal(element);
    myExtensions.add(extension.getModifiableModel(false));
  }
}
