{
  if (!(psiClass instanceof PsiTypeParameter)) {
    presentation.setIcon(DefaultLookupItemRenderer.getRawIcon(item,presentation.isReal()));
  }
  final boolean bold=item.getAttribute(LookupItem.HIGHLIGHTED_ATTR) != null;
  boolean strikeout=JavaElementLookupRenderer.isToStrikeout(item);
  presentation.setItemText(getName(psiClass,item,diamond));
  presentation.setStrikeout(strikeout);
  presentation.setItemTextBold(bold);
  String tailText=StringUtil.notNullize((String)item.getAttribute(LookupItem.TAIL_TEXT_ATTR));
  PsiSubstitutor substitutor=(PsiSubstitutor)item.getAttribute(LookupItem.SUBSTITUTOR);
  if (item instanceof PsiTypeLookupItem) {
    if (((PsiTypeLookupItem)item).isIndicateAnonymous() && (psiClass.isInterface() || psiClass.hasModifierProperty(PsiModifier.ABSTRACT)) || ((PsiTypeLookupItem)item).isAddArrayInitializer()) {
      tailText="{...}" + tailText;
    }
  }
  if (substitutor == null && !diamond && psiClass.getTypeParameters().length > 0) {
    tailText="<" + StringUtil.join(psiClass.getTypeParameters(),new Function<PsiTypeParameter,String>(){
      @Override public String fun(      PsiTypeParameter psiTypeParameter){
        return psiTypeParameter.getName();
      }
    }
,"," + (showSpaceAfterComma(psiClass) ? " " : "")) + ">"+ tailText;
  }
  presentation.setTailText(tailText,true);
}
