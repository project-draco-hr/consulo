{
  final PsiFileImpl psiFile=cloneImpl(myFileElement);
  final DummyHolderViewProvider dummyHolderViewProvider=new DummyHolderViewProvider(getManager());
  myViewProvider=dummyHolderViewProvider;
  dummyHolderViewProvider.setDummyHolder((DummyHolder)psiFile);
  final FileElement treeClone=(FileElement)calcTreeElement().clone();
  psiFile.setTreeElementPointer(treeClone);
  psiFile.myOriginalFile=isPhysical() ? this : myOriginalFile;
  treeClone.setPsi(psiFile);
  return psiFile;
}
