{
  if (powerSupplyKitHasBeenInitialized)   return;
  NotificationsConfiguration.getNotificationsConfiguration().register(POWER_SUPPLY_GROUP_ID,NotificationDisplayType.STICKY_BALLOON,false);
  final NotificationType type=NotificationType.INFORMATION;
  final NotificationListener listener=new NotificationListener(){
    @Override public void hyperlinkUpdate(    @NotNull Notification notification,    @NotNull HyperlinkEvent event){
      if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        final String description=event.getDescription();
        if ("doNotShow".equals(description)) {
          NotificationsConfiguration.getNotificationsConfiguration().changeSettings(POWER_SUPPLY_GROUP_ID,NotificationDisplayType.NONE,false,false);
          notification.expire();
        }
        if ("automatically".equals(description)) {
          automaticallySwitchInPowerSaveModeOnUnpluggedCordEvent=true;
        }
      }
    }
  }
;
  final String automaticPowerSafeModeSwitchMessage="We have noticed that your computer power cord is disconnected. " + "On unplugging your power cord we can <a href=\"automatically\">automatically</a> switch " + "your Mac Book in a <b>Power Save</b> mode . This can extend your battery life."+ " <a href=\"doNotShow\">Do no show</a> this message anymore";
  final Notification automaticPowerSafeModeSwitchNotification=new Notification(POWER_SUPPLY_GROUP_ID,"Automatically enable <b>Power Save</b> mode",automaticPowerSafeModeSwitchMessage,type,listener);
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().getMessageBus().syncPublisher(Notifications.TOPIC).notify(automaticPowerSafeModeSwitchNotification);
    }
  }
);
  powerSupplyKitHasBeenInitialized=true;
}
