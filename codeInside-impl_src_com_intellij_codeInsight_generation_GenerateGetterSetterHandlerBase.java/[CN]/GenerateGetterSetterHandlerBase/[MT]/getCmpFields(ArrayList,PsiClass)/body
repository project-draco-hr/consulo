{
  final EjbClassRole classRole=J2EERolesUtil.getEjbRole(psiClass);
  if (classRole == null)   return;
  if (classRole.getType() != EjbClassRole.EJB_CLASS_ROLE_EJB_CLASS)   return;
  final Ejb ejb=classRole.getEjb();
  if (!(ejb instanceof EntityBean))   return;
  EntityBean bean=(EntityBean)ejb;
  if (bean.getPersistenceType() != EntityBean.PERSISTENCE_TYPE_CONTAINER)   return;
  if (bean.getCmpVersion() != EntityBean.CMP_VERSION_2X)   return;
  ObjectsList<CmpField> cmpFields=bean.getCmpFields();
  for (int i=0; i < cmpFields.size(); i++) {
    CmpField field=cmpFields.get(i);
    if (generateMemberPrototypes(psiClass,field).length > 0) {
      list.add(field);
    }
  }
}
