{
  Node upNode;
  int downVisibleIndex;
  if (element instanceof Node) {
    upNode=(Node)element;
    downVisibleIndex=upNode.getVisibleNodeIndex();
  }
 else {
    Edge edge=(Edge)element;
    upNode=myMutableGraph.getNode(edge.getUpNodeVisibleIndex());
    downVisibleIndex=edge.getDownNodeVisibleIndex();
  }
  for (int i=0; i < MAX_SEARCH_SIZE; i++) {
    GraphFragment graphFragment=getDownFragment(upNode.getVisibleNodeIndex());
    if (graphFragment != null && graphFragment.downVisibleNodeIndex >= downVisibleIndex)     return graphFragment;
    if (upNode.getUpEdges().size() != 1) {
      break;
    }
    upNode=myMutableGraph.getNode(upNode.getUpEdges().get(0).getUpNodeVisibleIndex());
  }
  return null;
}
