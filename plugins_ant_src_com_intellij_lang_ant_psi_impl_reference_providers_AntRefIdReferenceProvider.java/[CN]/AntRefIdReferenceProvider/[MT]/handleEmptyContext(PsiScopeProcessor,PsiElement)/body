{
  AntElement element=(AntElement)position;
  while (true) {
    element=element.getAntParent();
    if (element == null) {
      return;
    }
    if (element instanceof AntStructuredElement) {
      AntStructuredElement se=(AntStructuredElement)element;
      final String[] refids=se.getRefIds();
      if (refids.length > 0) {
        for (        String refid : refids) {
          if (!processor.execute(se.getElementByRefId(refid),PsiSubstitutor.EMPTY))           return;
        }
      }
    }
  }
}
