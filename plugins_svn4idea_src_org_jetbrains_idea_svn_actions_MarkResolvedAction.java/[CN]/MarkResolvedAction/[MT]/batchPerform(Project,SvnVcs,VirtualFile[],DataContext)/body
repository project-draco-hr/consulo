{
  SvnVcs vcs=SvnVcs.getInstance(project);
  ApplicationManager.getApplication().saveAll();
  Collection<String> paths=collectResolvablePaths(vcs,files);
  if (paths.isEmpty()) {
    Messages.showInfoMessage(project,SvnBundle.message("message.text.no.conflicts.found"),SvnBundle.message("message.title.no.conflicts.found"));
    return;
  }
  String[] pathsArray=ArrayUtil.toStringArray(paths);
  SelectFilesDialog dialog=new SelectFilesDialog(project,SvnBundle.message("label.select.files.and.directories.to.mark.resolved"),SvnBundle.message("dialog.title.mark.resolved"),SvnBundle.message("action.name.mark.resolved"),pathsArray,"vcs.subversion.resolve");
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  pathsArray=dialog.getSelectedPaths();
  try {
    SVNWCClient wcClient=vcs.createWCClient();
    for (    String path : pathsArray) {
      File ioFile=new File(path);
      wcClient.doResolve(ioFile,SVNDepth.EMPTY,SVNConflictChoice.MERGED);
    }
  }
 catch (  SVNException e) {
    throw new VcsException(e);
  }
 finally {
    for (    VirtualFile file : files) {
      VcsDirtyScopeManager.getInstance(project).fileDirty(file);
      file.refresh(true,false);
      if (file.getParent() != null) {
        file.getParent().refresh(true,false);
      }
    }
  }
}
