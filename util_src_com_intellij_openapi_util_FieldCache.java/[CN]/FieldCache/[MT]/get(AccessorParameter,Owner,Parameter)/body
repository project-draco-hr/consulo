{
  T result;
  r.lock();
  result=getValue(owner,a);
  if (result == null) {
    r.unlock();
    w.lock();
    try {
      result=getValue(owner,a);
      if (result == null) {
        result=compute(owner,p);
        putValue(result,owner,a);
      }
    }
  finally {
      w.unlock();
    }
  }
 else {
    r.unlock();
  }
  return result;
}
