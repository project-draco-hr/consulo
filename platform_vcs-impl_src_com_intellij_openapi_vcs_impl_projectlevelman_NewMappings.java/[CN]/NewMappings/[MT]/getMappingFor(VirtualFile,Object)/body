{
  String path=file.getPath();
synchronized (myLock) {
    for (int i=mySortedMappings.length - 1; i >= 0; --i) {
      final VcsDirectoryMapping mapping=mySortedMappings[i];
      final String systemIndependPath=FileUtil.toSystemIndependentName((file.isDirectory() && (!path.endsWith("/"))) ? (path + "/") : path);
      if (fileMatchesMapping(file,matchContext,systemIndependPath,mapping)) {
        return mapping;
      }
    }
    return null;
  }
}
