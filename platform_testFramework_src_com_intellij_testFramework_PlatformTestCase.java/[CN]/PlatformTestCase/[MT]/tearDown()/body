{
  LightPlatformTestCase.doTearDown(getProject(),ourApplication,false);
  try {
    checkForSettingsDamage();
    InjectedLanguageManagerImpl injectedLanguageManager=null;
    if (myProject != null) {
      injectedLanguageManager=(InjectedLanguageManagerImpl)InjectedLanguageManager.getInstance(getProject());
    }
    try {
      disposeProject();
      if (injectedLanguageManager != null) {
        injectedLanguageManager.checkInjectorsAreDisposed();
      }
      for (      final File fileToDelete : myFilesToDelete) {
        delete(fileToDelete);
      }
      LocalFileSystem.getInstance().refreshIoFiles(myFilesToDelete);
      if (!myAssertionsInTestDetected) {
        if (IdeaLogger.ourErrorsOccurred != null) {
          throw IdeaLogger.ourErrorsOccurred;
        }
        assertNull("Logger errors occurred in " + getFullName(),IdeaLogger.ourErrorsOccurred);
      }
    }
  finally {
      ourTestCase=null;
    }
    super.tearDown();
    myEditorListenerTracker.checkListenersLeak();
    myThreadTracker.checkLeak();
    LightPlatformTestCase.checkEditorsReleased();
  }
  finally {
    myProjectManager=null;
    myProject=null;
    myModule=null;
    myFilesToDelete.clear();
    myEditorListenerTracker=null;
    myThreadTracker=null;
  }
}
