{
  LightPlatformTestCase.doTearDown(getProject(),ourApplication,false);
  try {
    checkForSettingsDamage();
    try {
      disposeProject();
      for (      final File fileToDelete : myFilesToDelete) {
        delete(fileToDelete);
      }
      FileUtil.asyncDelete(new File(myTempDirPath));
      setTmpDir(ourOriginalTempDir);
      if (!myAssertionsInTestDetected) {
        if (IdeaLogger.ourErrorsOccurred != null) {
          throw IdeaLogger.ourErrorsOccurred;
        }
        assertNull("Logger errors occurred in " + getFullName(),IdeaLogger.ourErrorsOccurred);
      }
    }
  finally {
      ourTestCase=null;
    }
    super.tearDown();
    myEditorListenerTracker.checkListenersLeak();
    myThreadTracker.checkLeak();
    LightPlatformTestCase.checkEditorsReleased();
  }
  finally {
    myProjectManager=null;
    myProject=null;
    myModule=null;
    myFilesToDelete.clear();
  }
}
