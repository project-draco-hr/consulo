{
  LightPlatformTestCase.doTearDown(getProject(),ourApplication,true);
  try {
    checkForSettingsDamage();
    try {
      disposeProject();
      for (      final File fileToDelete : myFilesToDelete) {
        delete(fileToDelete);
      }
      LocalFileSystem.getInstance().refreshIoFiles(myFilesToDelete);
      FileUtil.asyncDelete(new File(myTempDirPath));
      setTmpDir(ourOriginalTempDir);
      Throwable fromThreadGroup=MY_THREAD_GROUP.popThrowable();
      if (fromThreadGroup != null) {
        throw new RuntimeException(fromThreadGroup);
      }
      if (!myAssertionsInTestDetected) {
        if (IdeaLogger.ourErrorsOccurred != null) {
          throw IdeaLogger.ourErrorsOccurred;
        }
        assertTrue("Logger errors occurred in " + getFullName(),IdeaLogger.ourErrorsOccurred == null);
      }
    }
  finally {
      ourTestCase=null;
    }
    super.tearDown();
    myEditorListenerTracker.checkListenersLeak();
    myThreadTracker.checkLeak();
  }
  finally {
    myProjectManager=null;
    myProject=null;
    myModule=null;
    myFilesToDelete.clear();
  }
}
