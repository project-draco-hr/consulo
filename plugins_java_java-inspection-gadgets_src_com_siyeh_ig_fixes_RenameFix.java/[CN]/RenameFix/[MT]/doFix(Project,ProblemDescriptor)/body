{
  final PsiElement nameIdentifier=descriptor.getPsiElement();
  final PsiElement elementToRename=nameIdentifier.getParent();
  if (m_targetName == null) {
    final AsyncResult<DataContext> contextFromFocus=DataManager.getInstance().getDataContextFromFocus();
    contextFromFocus.doWhenDone(new AsyncResult.Handler<DataContext>(){
      @Override public void run(      DataContext context){
        final RenameHandler renameHandler=RenameHandlerRegistry.getInstance().getRenameHandler(context);
        if (renameHandler == null) {
          return;
        }
        renameHandler.invoke(project,new PsiElement[]{elementToRename},context);
      }
    }
);
  }
 else {
    final RefactoringFactory factory=RefactoringFactory.getInstance(project);
    final RenameRefactoring renameRefactoring=factory.createRename(elementToRename,m_targetName,m_searchInStrings,m_searchInNonJavaFiles);
    renameRefactoring.run();
  }
}
