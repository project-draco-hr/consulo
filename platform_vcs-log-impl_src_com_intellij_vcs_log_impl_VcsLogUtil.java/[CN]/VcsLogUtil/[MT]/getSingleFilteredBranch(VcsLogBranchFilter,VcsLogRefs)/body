{
  String branchName=null;
  Set<VirtualFile> checkedRoots=ContainerUtil.newHashSet();
  for (  VcsRef branch : refs.getBranches()) {
    if (!filter.matches(branch.getName()))     continue;
    if (branchName == null) {
      branchName=branch.getName();
    }
 else     if (!branch.getName().equals(branchName)) {
      return null;
    }
    if (checkedRoots.contains(branch.getRoot()))     return null;
    checkedRoots.add(branch.getRoot());
  }
  return branchName;
}
