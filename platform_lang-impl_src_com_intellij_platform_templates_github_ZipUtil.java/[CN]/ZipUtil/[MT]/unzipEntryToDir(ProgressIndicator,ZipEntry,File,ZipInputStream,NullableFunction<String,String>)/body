{
  String relativeExtractPath=createRelativeExtractPath(zipEntry);
  if (pathConvertor != null) {
    relativeExtractPath=pathConvertor.fun(relativeExtractPath);
    if (relativeExtractPath == null) {
      return;
    }
  }
  File child=new File(extractToDir,relativeExtractPath);
  File dir=zipEntry.isDirectory() ? child : child.getParentFile();
  if (!dir.exists() && !dir.mkdirs()) {
    throw new IOException("Unable to create dir: '" + dir + "'!");
  }
  if (zipEntry.isDirectory()) {
    return;
  }
  if (progress != null) {
    progress.setText("Extracting " + relativeExtractPath + " ...");
  }
  FileOutputStream fileOutputStream=new FileOutputStream(child);
  try {
    FileUtil.copy(stream,fileOutputStream);
  }
  finally {
    fileOutputStream.close();
  }
  LOG.info("Extract: " + relativeExtractPath);
}
