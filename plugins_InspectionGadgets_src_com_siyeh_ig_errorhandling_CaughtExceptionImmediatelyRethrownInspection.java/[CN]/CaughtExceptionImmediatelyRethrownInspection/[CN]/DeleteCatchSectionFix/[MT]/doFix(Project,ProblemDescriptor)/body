{
  final PsiElement element=descriptor.getPsiElement();
  final PsiElement parent=element.getParent();
  if (!(parent instanceof PsiParameter)) {
    return;
  }
  final PsiParameter parameter=(PsiParameter)parent;
  final PsiElement grandParent=parameter.getParent();
  if (!(grandParent instanceof PsiCatchSection)) {
    return;
  }
  final PsiCatchSection catchSection=(PsiCatchSection)grandParent;
  final PsiTryStatement tryStatement=catchSection.getTryStatement();
  final boolean removeTryCatch=tryStatement.getCatchSections().length == 1 && tryStatement.getFinallyBlock() == null;
  if (removeTryCatch) {
    final PsiCodeBlock codeBlock=tryStatement.getTryBlock();
    if (codeBlock == null) {
      return;
    }
    final PsiStatement[] statements=codeBlock.getStatements();
    if (statements.length == 0) {
      tryStatement.delete();
    }
    final PsiStatement firstStatement=statements[0];
    final PsiElement containingElement=tryStatement.getParent();
    final boolean keepBlock;
    if (containingElement instanceof PsiCodeBlock) {
      final PsiCodeBlock parentBlock=(PsiCodeBlock)containingElement;
      keepBlock=VariableSearchUtils.containsConflictingDeclarations(codeBlock,parentBlock);
    }
 else {
      keepBlock=true;
    }
    if (keepBlock) {
      final PsiManager manager=element.getManager();
      final PsiElementFactory factory=manager.getElementFactory();
      final PsiBlockStatement resultStatement=(PsiBlockStatement)factory.createStatementFromText("{}",element);
      final PsiCodeBlock resultBlock=resultStatement.getCodeBlock();
      for (      PsiStatement statement : statements) {
        resultBlock.add(statement);
      }
      tryStatement.replace(resultStatement);
    }
 else {
      for (int i=1; i < statements.length; i++) {
        containingElement.addAfter(statements[i],tryStatement);
      }
      tryStatement.replace(firstStatement);
    }
  }
 else {
    catchSection.delete();
  }
}
