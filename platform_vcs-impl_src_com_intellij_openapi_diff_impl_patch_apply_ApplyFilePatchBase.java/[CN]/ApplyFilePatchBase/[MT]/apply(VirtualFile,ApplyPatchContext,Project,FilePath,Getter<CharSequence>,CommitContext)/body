{
  if (LOG.isDebugEnabled()) {
    LOG.debug("apply patch called for : " + fileToPatch.getPath());
  }
  context.addAffectedFile(getTarget(fileToPatch));
  if (myPatch.isNewFile()) {
    applyCreate(fileToPatch,commitContext);
  }
 else   if (myPatch.isDeletedFile()) {
    FileEditorManagerImpl.getInstance(project).closeFile(fileToPatch);
    fileToPatch.delete(this);
  }
 else {
    return applyChange(project,fileToPatch,pathBeforeRename,baseContents);
  }
  return SUCCESS;
}
