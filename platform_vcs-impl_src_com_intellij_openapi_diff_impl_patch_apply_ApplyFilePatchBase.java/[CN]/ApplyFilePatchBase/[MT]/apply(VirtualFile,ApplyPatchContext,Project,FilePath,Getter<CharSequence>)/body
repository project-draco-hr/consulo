{
  context.addAffectedFile(getTarget(fileToPatch));
  if (myPatch.isNewFile()) {
    applyCreate(fileToPatch);
  }
 else   if (myPatch.isDeletedFile()) {
    FileEditorManagerImpl.getInstance(project).closeFile(fileToPatch);
    fileToPatch.delete(this);
  }
 else {
    return applyChange(project,fileToPatch,pathBeforeRename,baseContents);
  }
  return SUCCESS;
}
