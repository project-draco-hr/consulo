{
  super(project,false);
  myProject=project;
  ChangeListEditHandler handler;
  for (  ChangeList changelist : changelists) {
    handler=((LocalChangeListImpl)changelist).getEditHandler();
    if (handler != null) {
      break;
    }
  }
  myPanel=new ChangeListChooserPanel(myProject,new NullableConsumer<String>(){
    public void consume(    final @Nullable String errorMessage){
      setOKActionEnabled(errorMessage == null);
      setErrorText(errorMessage);
    }
  }
);
  myPanel.init();
  myPanel.setChangeLists(changelists);
  myPanel.setDefaultSelection(changelists.size() <= 1 && onlyOneListInProject() ? null : defaultSelection);
  setTitle(title);
  if (defaultName != null) {
    myPanel.setDefaultName(defaultName);
  }
  init();
}
