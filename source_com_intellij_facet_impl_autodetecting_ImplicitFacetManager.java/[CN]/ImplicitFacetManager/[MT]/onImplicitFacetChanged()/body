{
  if (!myUIInitialized)   return;
  final List<Facet> implicitFacets=getImplicitFacets();
  if (!Comparing.haveEqualElements(myImplicitFacets,implicitFacets)) {
    final Set<Facet> newFacets=new HashSet<Facet>(implicitFacets);
    newFacets.removeAll(myImplicitFacets);
    if (!ApplicationManager.getApplication().isHeadlessEnvironment()) {
      Runnable runnable=new Runnable(){
        public void run(){
          myPendingNewFacets.addAll(newFacets);
          queueNotificationPopup();
          if (!myImplicitFacets.isEmpty() && implicitFacets.isEmpty()) {
            myAttentionComponent.stopBlinking();
          }
          if (myImplicitFacets.isEmpty() && !implicitFacets.isEmpty()) {
            myAttentionComponent.startBlinking();
          }
        }
      }
;
      if (ApplicationManager.getApplication().isDispatchThread()) {
        runnable.run();
      }
 else {
        ApplicationManager.getApplication().invokeLater(runnable);
      }
    }
    myImplicitFacets=implicitFacets;
  }
}
