{
  if (element instanceof LazyValueResourceElementWrapper) {
    element=((LazyValueResourceElementWrapper)element).computeElement();
    if (element == null) {
      return false;
    }
  }
  final ResolveResult[] results=multiResolve(false);
  final PsiFile psiFile=element.getContainingFile();
  final VirtualFile vFile=psiFile != null ? psiFile.getVirtualFile() : null;
  boolean log=element instanceof XmlAttributeValue || element instanceof LazyValueResourceElementWrapper;
  for (  ResolveResult result : results) {
    final PsiElement target=result.getElement();
    if (log) {
      System.out.println("resolved to " + target);
    }
    if (element.getManager().areElementsEquivalent(target,element)) {
      if (log) {
        System.out.println("equivalent");
      }
      return true;
    }
 else     if (log) {
      System.out.println("non-equivalent");
    }
    if (target instanceof LazyValueResourceElementWrapper && vFile != null) {
      final ValueResourceInfo info=((LazyValueResourceElementWrapper)target).getResourceInfo();
      if (log) {
        System.out.println("lazy computed to " + info);
        System.out.println(vFile + "; class: " + vFile.getClass().getCanonicalName());
        System.out.println(info.getContainingFile() + "; class: " + info.getContainingFile().getClass().getCanonicalName());
        System.out.println(vFile.equals(info.getContainingFile()));
      }
      if (info.getContainingFile().equals(vFile)) {
        final XmlAttributeValue realTarget=info.computeXmlElement();
        if (log) {
          System.out.println("computed element " + element + "; text: "+ element.getText());
        }
        if (element.getManager().areElementsEquivalent(realTarget,element)) {
          if (log) {
            System.out.println("equivalent");
          }
          return true;
        }
 else         if (log) {
          System.out.println("non-equivalent");
        }
      }
    }
  }
  return false;
}
