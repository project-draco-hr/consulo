{
  if (assertion instanceof KnownException)   return ((KnownException)assertion).getPacketFactory();
  if (!(assertion instanceof ComparisonFailure))   return new ExceptionPacketFactory(PoolOfTestStates.FAILED_INDEX,assertion);
  return ComparisonDetailsExtractor.create((ComparisonFailure)assertion);
}
