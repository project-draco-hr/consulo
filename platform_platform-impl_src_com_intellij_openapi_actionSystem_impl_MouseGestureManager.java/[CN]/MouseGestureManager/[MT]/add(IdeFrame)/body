{
  if (!Registry.is("actionSystem.mouseGesturesEnabled"))   return;
  if (SystemInfo.isMacOSSnowLeopard) {
    try {
      if (myListeners.containsKey(frame)) {
        remove(frame);
      }
      GestureAdapter listener=new GestureAdapter(){
        double magnification=0;
        @Override public void gestureBegan(        GesturePhaseEvent event){
          activateTrackpad();
          magnification=0;
        }
        @Override public void gestureEnded(        GesturePhaseEvent event){
          activateTrackpad();
          if (magnification != 0) {
            processMagnification(frame,magnification);
            magnification=0;
          }
        }
        @Override public void swipedLeft(        SwipeEvent event){
          activateTrackpad();
          processLeftSwipe(frame);
        }
        @Override public void swipedRight(        SwipeEvent event){
          activateTrackpad();
          processRightSwipe(frame);
        }
        @Override public void magnify(        MagnificationEvent event){
          activateTrackpad();
          magnification+=event.getMagnification();
        }
      }
;
      GestureUtilities.addGestureListenerTo(frame.getComponent(),listener);
      myListeners.put(frame,listener);
    }
 catch (    Throwable e) {
      LOG.debug(e);
    }
  }
}
