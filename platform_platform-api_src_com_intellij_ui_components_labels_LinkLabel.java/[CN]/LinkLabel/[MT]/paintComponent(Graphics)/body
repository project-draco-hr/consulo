{
  super.paintComponent(g);
  final Border border=getBorder();
  int shiftX=0;
  int shiftY=0;
  if (border != null) {
    shiftX=border.getBorderInsets(this).left;
    shiftY=border.getBorderInsets(this).top;
  }
  setForeground(getTextColor());
  super.paintComponent(g);
  if (getText() != null) {
    g.setColor(getTextColor());
    int x=myIconWidth;
    int y=getTextBaseLine();
    if (myUnderline) {
      int k=1;
      if (getFont().getSize() > 11) {
        k+=(getFont().getSize() - 11);
      }
      y+=k;
      int lineY=y + shiftY;
      if (lineY >= getSize().height) {
        lineY=getSize().height - 1;
      }
      if (getHorizontalAlignment() == LEFT) {
        UIUtil.drawLine(g,x + shiftX,lineY,x + getFontMetrics(getFont()).stringWidth(getText()) + shiftX,lineY);
      }
 else {
        UIUtil.drawLine(g,getWidth() - 1 - getFontMetrics(getFont()).stringWidth(getText()) + shiftX,lineY,getWidth() - 1 + shiftX,lineY);
      }
    }
    if (myPaintDefaultIcon) {
      int endX=myIconWidth + getFontMetrics(getFont()).stringWidth(getText());
      int endY=getHeight() / 2 - AllIcons.Ide.Link.getIconHeight() / 2 + 1;
      AllIcons.Ide.Link.paintIcon(this,g,endX + shiftX + DEFAULT_ICON_GAP,endY);
    }
  }
}
