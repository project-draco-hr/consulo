{
  if (MouseEvent.MOUSE_PRESSED == e.getID()) {
    final MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
    menuSelectionManager.clearSelectedPath();
    myWindow.setAsCurrentWindow(true);
    myLastClickedIndex=-1;
  }
  if (e.isPopupTrigger()) {
    myTabbedPanePopupHandler.invokePopup(e.getComponent(),e.getX(),e.getY());
    return;
  }
  if (!e.isShiftDown() && (MouseEvent.BUTTON1_MASK & e.getModifiers()) > 0) {
    if (MouseEvent.MOUSE_PRESSED == e.getID()) {
      myLastClickedIndex=getTabIndexAt(e.getX(),e.getY());
    }
    if (MouseEvent.MOUSE_RELEASED == e.getID()) {
      if (myLastClickedIndex != -1) {
        if (e.getClickCount() == 1) {
          setSelectedIndex(myLastClickedIndex);
        }
 else         if (e.getClickCount() == 2) {
          HideAllToolWindowsAction.performAction(myProject);
        }
 else {
          super.processMouseEvent(e);
        }
      }
 else {
        super.processMouseEvent(e);
      }
    }
 else {
      if (myLastClickedIndex == -1) {
        super.processMouseEvent(e);
      }
    }
  }
 else   if (e.isShiftDown() && (MouseEvent.BUTTON1_MASK & e.getModifiers()) > 0) {
    if (MouseEvent.MOUSE_RELEASED == e.getID()) {
      final VirtualFile file=getFileAt(e.getX(),e.getY());
      if (file != null) {
        myWindow.closeFile(file);
      }
    }
  }
 else   if ((MouseEvent.BUTTON2_MASK & e.getModifiers()) > 0) {
    if (MouseEvent.MOUSE_RELEASED == e.getID()) {
      final VirtualFile file=getFileAt(e.getX(),e.getY());
      if (file != null) {
        myWindow.closeFile(file);
      }
    }
  }
 else   if ((MouseEvent.BUTTON3_MASK & e.getModifiers()) > 0 && SystemInfo.isWindows) {
  }
 else {
    super.processMouseEvent(e);
  }
}
