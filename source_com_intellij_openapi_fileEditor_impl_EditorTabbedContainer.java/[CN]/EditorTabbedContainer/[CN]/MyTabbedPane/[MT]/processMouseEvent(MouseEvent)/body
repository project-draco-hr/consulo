{
  if (MouseEvent.MOUSE_PRESSED == e.getID()) {
    final MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
    menuSelectionManager.clearSelectedPath();
    myWindow.setAsCurrentWindow(true);
  }
  if (e.isPopupTrigger()) {
    myTabbedPanePopupHandler.invokePopup(e.getComponent(),e.getX(),e.getY());
    return;
  }
  if (!e.isShiftDown() && (MouseEvent.BUTTON1_MASK & e.getModifiers()) > 0) {
    final int index=getTabIndexAt(e.getX(),e.getY());
    if (MouseEvent.MOUSE_RELEASED == e.getID() || MouseEvent.MOUSE_PRESSED == e.getID()) {
      if (index != -1) {
        setSelectedIndex(index);
      }
 else {
        super.processMouseEvent(e);
      }
    }
 else {
      if (index == -1) {
        super.processMouseEvent(e);
      }
    }
  }
 else   if (e.isShiftDown() && (MouseEvent.BUTTON1_MASK & e.getModifiers()) > 0) {
    if (MouseEvent.MOUSE_RELEASED == e.getID()) {
      final VirtualFile file=getFileAt(e.getX(),e.getY());
      if (file != null) {
        myWindow.closeFile(file);
      }
    }
  }
 else   if ((MouseEvent.BUTTON2_MASK & e.getModifiers()) > 0) {
    if (MouseEvent.MOUSE_RELEASED == e.getID()) {
      final VirtualFile file=getFileAt(e.getX(),e.getY());
      if (file != null) {
        myWindow.closeFile(file);
      }
    }
  }
 else   if ((MouseEvent.BUTTON3_MASK & e.getModifiers()) > 0 && SystemInfo.isWindows) {
  }
 else {
    super.processMouseEvent(e);
  }
}
