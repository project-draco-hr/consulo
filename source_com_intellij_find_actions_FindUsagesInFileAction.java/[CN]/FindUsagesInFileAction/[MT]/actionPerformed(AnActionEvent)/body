{
  DataContext dataContext=e.getDataContext();
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (project == null) {
    return;
  }
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  UsageTarget[] usageTargets=(UsageTarget[])dataContext.getData(UsageView.USAGE_TARGETS);
  if (usageTargets != null) {
    FileEditor fileEditor=(FileEditor)dataContext.getData(DataConstants.FILE_EDITOR);
    if (fileEditor != null) {
      usageTargets[0].findUsagesInEditor(fileEditor);
    }
  }
 else {
    Messages.showMessageDialog(project,FindBundle.message("find.no.usages.at.cursor.error"),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
  }
}
