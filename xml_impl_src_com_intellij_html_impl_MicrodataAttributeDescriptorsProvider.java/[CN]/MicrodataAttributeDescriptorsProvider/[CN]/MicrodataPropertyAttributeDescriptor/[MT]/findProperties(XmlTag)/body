{
  final XmlAttribute typeAttribute=tag.getAttribute(ITEM_TYPE);
  if (typeAttribute != null) {
    final XmlAttributeValue valueElement=typeAttribute.getValueElement();
    final PsiReference[] references=valueElement != null ? valueElement.getReferences() : PsiReference.EMPTY_ARRAY;
    List<String> result=new ArrayList<String>();
    for (    PsiReference reference : references) {
      final PsiElement target=reference != null ? reference.resolve() : null;
      if (target instanceof PsiFile) {
        result.addAll(extractProperties((PsiFile)target,StringUtil.stripQuotesAroundValue(reference.getCanonicalText())));
      }
    }
    return ArrayUtil.toStringArray(result);
  }
  return ArrayUtil.EMPTY_STRING_ARRAY;
}
