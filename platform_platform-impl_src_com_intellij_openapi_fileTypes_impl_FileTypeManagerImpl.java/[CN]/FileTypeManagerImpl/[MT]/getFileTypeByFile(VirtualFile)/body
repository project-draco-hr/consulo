{
  final FileType assignedFileType=file instanceof LightVirtualFile ? ((LightVirtualFile)file).getAssignedFileType() : null;
  if (assignedFileType != null)   return assignedFileType;
  for (int i=0, size=mySpecialFileTypes.size(); i < size; i++) {
    final FileTypeIdentifiableByVirtualFile fileType=mySpecialFileTypes.get(i);
    if (fileType.isMyFileType(file))     return fileType;
  }
  return getFileTypeByFileName(file.getName());
}
