{
  FileType type=null;
  Element element=typeElement.getChild(AbstractFileType.ELEMENT_HIGHLIGHTING);
  if (element != null) {
    final SyntaxTable table=AbstractFileType.readSyntaxTable(element);
    if (table != null) {
      if (info == null) {
        type=new AbstractFileType(table);
        ((AbstractFileType)type).getExternalInfo().setCurrentFileName(fileName);
      }
 else {
        type=new ImportedFileType(table,info);
        ((ImportedFileType)type).readOriginalMatchers(typeElement);
      }
      ((AbstractFileType)type).initSupport();
      return type;
    }
  }
  for (  CustomFileTypeFactory factory : Extensions.getExtensions(CustomFileTypeFactory.EP_NAME)) {
    type=factory.createFileType(typeElement);
    if (type != null) {
      break;
    }
  }
  if (type == null) {
    type=new UserBinaryFileType();
  }
  return type;
}
