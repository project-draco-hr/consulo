{
  mySchemesManager.addNewScheme(fileType,true);
  for (  FileNameMatcher matcher : matchers) {
    myPatternsTable.addAssociation(matcher,fileType);
    myInitialAssociations.addAssociation(matcher,fileType);
  }
  if (fileType instanceof FileTypeIdentifiableByVirtualFile) {
    mySpecialFileTypes.add((FileTypeIdentifiableByVirtualFile)fileType);
  }
  for (  FileNameMatcher matcher : new THashSet<FileNameMatcher>(myUnresolvedMappings.keySet())) {
    String name=myUnresolvedMappings.get(matcher);
    if (Comparing.equal(name,fileType.getName())) {
      myPatternsTable.addAssociation(matcher,fileType);
      myUnresolvedMappings.remove(matcher);
    }
  }
  for (  FileNameMatcher matcher : new THashSet<FileNameMatcher>(myUnresolvedRemovedMappings.keySet())) {
    String name=myUnresolvedRemovedMappings.get(matcher);
    if (Comparing.equal(name,fileType.getName())) {
      removeAssociation(fileType,matcher,false);
      myUnresolvedRemovedMappings.remove(matcher);
    }
  }
}
