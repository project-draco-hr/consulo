{
  for (  FileNameMatcher matcher : new THashSet<FileNameMatcher>(myUnresolvedMappings.keySet())) {
    String name=myUnresolvedMappings.get(matcher);
    if (Comparing.equal(name,fileType.getName())) {
      myPatternsTable.addAssociation(matcher,fileType);
      myUnresolvedMappings.remove(matcher);
    }
  }
  for (  FileNameMatcher matcher : new THashSet<FileNameMatcher>(myUnresolvedRemovedMappings.keySet())) {
    Trinity<String,String,Boolean> trinity=myUnresolvedRemovedMappings.get(matcher);
    if (Comparing.equal(trinity.getFirst(),fileType.getName())) {
      if (trinity.getSecond() == null || PlainTextFileType.INSTANCE.getName().equals(trinity.getSecond())) {
        myRemovedMappings.put(matcher,Pair.create(fileType,trinity.getThird()));
      }
      removeAssociation(fileType,matcher,false);
      myUnresolvedRemovedMappings.remove(matcher);
    }
  }
}
