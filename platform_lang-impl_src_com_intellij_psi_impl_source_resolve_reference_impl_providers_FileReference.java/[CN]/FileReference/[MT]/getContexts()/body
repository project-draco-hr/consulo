{
  final FileReference contextRef=getContextReference();
  if (contextRef == null) {
    Collection<PsiFileSystemItem> defaultContexts=myFileReferenceSet.getDefaultContexts();
    for (    PsiFileSystemItem context : defaultContexts) {
      LOG.assertTrue(context != null,myFileReferenceSet.getClass() + " provided a null context");
    }
    return defaultContexts;
  }
  ResolveResult[] resolveResults=contextRef.multiResolve(false);
  ArrayList<PsiFileSystemItem> result=new ArrayList<PsiFileSystemItem>();
  for (  ResolveResult resolveResult : resolveResults) {
    if (resolveResult.getElement() != null) {
      result.add((PsiFileSystemItem)resolveResult.getElement());
    }
  }
  return result;
}
