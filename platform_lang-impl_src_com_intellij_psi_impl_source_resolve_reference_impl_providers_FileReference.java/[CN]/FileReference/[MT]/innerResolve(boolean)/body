{
  final String referenceText=getText();
  if (referenceText.isEmpty() && myIndex == 0) {
    return new ResolveResult[]{new PsiElementResolveResult(getElement().getContainingFile())};
  }
  final Collection<PsiFileSystemItem> contexts=getContexts();
  final Collection<ResolveResult> result=new THashSet<ResolveResult>();
  for (  final PsiFileSystemItem context : contexts) {
    if (context != null) {
      innerResolveInContext(referenceText,context,result,caseSensitive);
    }
  }
  if (contexts.size() == 0 && isAllowedEmptyPath(referenceText)) {
    result.add(new PsiElementResolveResult(getElement().getContainingFile()));
  }
  final int resultCount=result.size();
  return resultCount > 0 ? result.toArray(new ResolveResult[resultCount]) : ResolveResult.EMPTY_ARRAY;
}
