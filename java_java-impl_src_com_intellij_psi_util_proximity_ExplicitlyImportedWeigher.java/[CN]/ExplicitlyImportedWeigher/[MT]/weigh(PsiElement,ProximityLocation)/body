{
  if (element instanceof PsiClass) {
    final String qname=((PsiClass)element).getQualifiedName();
    if (qname != null) {
      final PsiJavaFile psiJavaFile=PsiTreeUtil.getContextOfType(location.getPosition(),PsiJavaFile.class,false);
      if (psiJavaFile != null) {
        final PsiImportList importList=psiJavaFile.getImportList();
        if (importList != null) {
          for (          final PsiImportStatement importStatement : importList.getImportStatements()) {
            final boolean onDemand=importStatement.isOnDemand();
            final String imported=importStatement.getQualifiedName();
            if (onDemand && qname.startsWith(imported + ".") || !onDemand && qname.equals(imported)) {
              return true;
            }
          }
        }
      }
    }
  }
  return false;
}
