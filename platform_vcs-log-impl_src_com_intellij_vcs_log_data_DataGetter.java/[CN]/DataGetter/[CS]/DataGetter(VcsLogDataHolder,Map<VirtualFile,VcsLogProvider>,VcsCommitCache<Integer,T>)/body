{
  myDataHolder=dataHolder;
  myLogProviders=logProviders;
  myCache=cache;
  Disposer.register(dataHolder,this);
  myLoader=new SequentialLimitedLifoExecutor<TaskDescriptor>(this,MAX_LOADING_TASKS,new ThrowableConsumer<TaskDescriptor,VcsException>(){
    @Override public void consume(    TaskDescriptor task) throws VcsException {
      preLoadCommitData(task.myCommits);
      UIUtil.invokeAndWaitIfNeeded(new Runnable(){
        @Override public void run(){
          for (          Runnable loadingFinishedListener : myLoadingFinishedListeners) {
            loadingFinishedListener.run();
          }
        }
      }
);
    }
  }
);
}
