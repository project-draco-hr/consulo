{
  if (!CodeInsightUtil.prepareFileForWrite(myMethod.getContainingFile()))   return;
  try {
    PsiMethod method=myMethod;
    if (myFixWholeHierarchy) {
      method=PsiSuperMethodUtil.findDeepestSuperMethod(myMethod);
      if (method == null)       method=myMethod;
    }
    ChangeSignatureProcessor processor=new ChangeSignatureProcessor(project,method,false,null,method.getName(),method.getReturnType(),getNewParametersInfo(),BaseRefactoringProcessor.EMPTY_CALLBACK);
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      processor.testRun();
    }
 else {
      processor.run(null);
    }
    QuickFixAction.spoilDocument(project,file);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
