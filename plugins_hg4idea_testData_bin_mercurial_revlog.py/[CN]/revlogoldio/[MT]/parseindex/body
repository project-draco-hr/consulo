def parseindex(self, fp, data, inline):
    s = self.size
    index = []
    nodemap = {nullid: nullrev, }
    n = off = 0
    if (len(data) == _prereadsize):
        data += fp.read()
    l = len(data)
    while ((off + s) <= l):
        cur = data[off:(off + s)]
        off += s
        e = _unpack(indexformatv0, cur)
        e2 = (offset_type(e[0], 0), e[1], (-1), e[2], e[3], nodemap.get(e[4], nullrev), nodemap.get(e[5], nullrev), e[6])
        index.append(e2)
        nodemap[e[6]] = n
        n += 1
    return (index, nodemap, None)
