{
  RecentsManager.getInstance(myProject).registerRecentEntry(RECENTS_KEY,myTargetPackageField.getText());
  RecentsManager.getInstance(myProject).registerRecentEntry(RECENT_SUPERS_KEY,mySuperClassField.getText());
  String errorMessage;
  try {
    myTargetDirectory=selectTargetDirectory();
    if (myTargetDirectory == null)     return;
    errorMessage=RefactoringMessageUtil.checkCanCreateClass(myTargetDirectory,getClassName());
  }
 catch (  IncorrectOperationException e) {
    errorMessage=e.getMessage();
  }
  if (errorMessage != null) {
    Messages.showMessageDialog(myProject,errorMessage,CommonBundle.getErrorTitle(),Messages.getErrorIcon());
  }
  saveDefaultLibraryName();
  saveShowInheritedMembersStatus();
  super.doOKAction();
}
