{
  final VirtualFile[] files=getFiles(e);
  final Project project=getProject(e);
  for (  VirtualFile file : files) {
    if (file.isDirectory()) {
      final int response=Messages.showYesNoDialog(project,IdeBundle.message("prompt.recursively.synchronize.directory"),IdeBundle.message("title.synchronize.files"),Messages.getQuestionIcon());
      if (response == 1) {
        return;
      }
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      for (      final VirtualFile file : files) {
        file.refresh(false,true);
      }
    }
  }
);
  final FileStatusManager statusManager=FileStatusManager.getInstance(project);
  for (  VirtualFile file : files) {
    statusManager.fileStatusChanged(file);
  }
}
