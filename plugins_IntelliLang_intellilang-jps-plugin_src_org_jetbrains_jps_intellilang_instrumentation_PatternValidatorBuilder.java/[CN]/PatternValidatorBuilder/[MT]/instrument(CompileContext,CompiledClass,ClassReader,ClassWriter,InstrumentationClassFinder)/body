{
  final JpsIntelliLangConfiguration config=JpsIntelliLangExtensionService.getInstance().getConfiguration(context.getProjectDescriptor().getModel().getGlobal());
  final PatternInstrumenter instrumenter=new PatternInstrumenter(config.getPatternAnnotationClass(),writer,config.getInstrumentationType(),finder);
  try {
    reader.accept(instrumenter,0);
    if (instrumenter.instrumented()) {
      return new BinaryContent(writer.toByteArray());
    }
  }
 catch (  InstrumentationException e) {
    context.processMessage(new CompilerMessage(getPresentableName(),BuildMessage.Kind.ERROR,e.getMessage()));
  }
  return null;
}
