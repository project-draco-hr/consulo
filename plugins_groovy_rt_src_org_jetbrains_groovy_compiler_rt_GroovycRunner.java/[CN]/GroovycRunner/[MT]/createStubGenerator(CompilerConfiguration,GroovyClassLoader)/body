{
  JavaAwareCompilationUnit unit=new JavaAwareCompilationUnit(config,classLoader){
    public void gotoPhase(    int phase) throws CompilationFailedException {
      if (phase == Phases.SEMANTIC_ANALYSIS) {
        System.out.println(PRESENTABLE_MESSAGE + "Generating Groovy stubs...");
        try {
          Field field=JavaAwareCompilationUnit.class.getDeclaredField("javaSources");
          field.setAccessible(true);
          LinkedList javaSources=(LinkedList)field.get(this);
          javaSources.clear();
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
 else       if (phase <= Phases.ALL) {
        System.out.println(PRESENTABLE_MESSAGE + "Groovy stub generator: " + getPhaseDescription());
      }
      super.gotoPhase(phase);
    }
  }
;
  unit.addSources(new String[]{"SomeClass.java"});
  return unit;
}
