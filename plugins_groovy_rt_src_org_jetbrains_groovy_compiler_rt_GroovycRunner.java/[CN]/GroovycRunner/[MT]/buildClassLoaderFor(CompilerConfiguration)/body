{
  return (GroovyClassLoader)AccessController.doPrivileged(new PrivilegedAction(){
    public Object run(){
      URLClassLoader urlClassLoader=new URLClassLoader(GroovyCompilerUtil.convertClasspathToUrls(compilerConfiguration));
      return new GroovyClassLoader(urlClassLoader,compilerConfiguration){
        public Class loadClass(        String name,        boolean lookupScriptFiles,        boolean preferClassOverScript) throws ClassNotFoundException, CompilationFailedException {
          try {
            return super.loadClass(name,lookupScriptFiles,preferClassOverScript);
          }
 catch (          NoClassDefFoundError e) {
            final String ncdfe=e.getMessage();
            throw new RuntimeException("Groovyc error: " + ncdfe + " class not found while resolving class "+ name+ "; try compiling "+ ncdfe+ " explicitly",e);
          }
catch (          LinkageError e) {
            throw new RuntimeException("Problem loading class " + name,e);
          }
        }
      }
;
    }
  }
);
}
