{
  MultiMap<VirtualFile,VirtualFile> grouped=MultiMap.create();
  for (  VirtualFile file : files) {
    VirtualFile root=findBestRoot(file,roots);
    if (root != null) {
      grouped.putValue(root,file);
    }
  }
  return grouped;
}
