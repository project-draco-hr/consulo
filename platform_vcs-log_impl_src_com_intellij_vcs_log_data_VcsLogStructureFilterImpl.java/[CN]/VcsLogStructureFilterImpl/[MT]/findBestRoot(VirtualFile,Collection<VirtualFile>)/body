{
  VirtualFile candidate=null;
  for (  VirtualFile root : roots) {
    if (VfsUtilCore.isAncestor(root,file,false)) {
      if (candidate == null || VfsUtilCore.isAncestor(candidate,root,true)) {
        candidate=root;
      }
    }
  }
  return candidate;
}
