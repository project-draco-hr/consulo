{
  if (psiElement instanceof PsiDoWhileStatement) {
    final Document doc=editor.getDocument();
    final PsiDoWhileStatement stmt=(PsiDoWhileStatement)psiElement;
    if (stmt.getBody() == null || !(stmt.getBody() instanceof PsiBlockStatement) && stmt.getWhileKeyword() == null) {
      final int startOffset=stmt.getTextRange().getStartOffset();
      doc.replaceString(startOffset,startOffset + "do".length(),"do {} while()");
      return;
    }
    if (stmt.getCondition() == null) {
      if (stmt.getWhileKeyword() == null) {
        final int endOffset=stmt.getTextRange().getEndOffset();
        doc.insertString(endOffset,"while()");
      }
 else       if (stmt.getLParenth() == null || stmt.getRParenth() == null) {
        final TextRange whileRange=stmt.getWhileKeyword().getTextRange();
        doc.replaceString(whileRange.getStartOffset(),whileRange.getEndOffset(),"while()");
      }
 else {
        processor.registerUnresolvedError(stmt.getLParenth().getTextRange().getEndOffset());
      }
    }
  }
}
