{
  ExeReader reader=new ExeReader(myTemplate.getName());
  RandomAccessFile stream=new RandomAccessFile(myTemplate,"r");
  reader.read(stream);
  stream.close();
  SectionReader sectionReader=reader.getSectionReader(".rsrc");
  ResourceSectionReader resourceReader=(ResourceSectionReader)sectionReader.getMember(".rsrc");
  DirectoryEntry root=resourceReader.getRoot();
  DirectoryEntry subDir=root.findSubDir("IRD6");
  DirectoryEntry ird7=subDir.findSubDir("IRD7");
  RawResource rawResource=ird7.getRawResource(0);
  Bin.Bytes bytes=rawResource.getBytes();
  StringTable srtingTable=new StringTable(bytes.getBytes());
  if (myBmp != null) {
    srtingTable.setString(0,"splash");
  }
  srtingTable.setString(1,"alive");
  srtingTable.setString(2,"" + mySplashTimeout);
  if (myJreBundlePath != null) {
    srtingTable.setString(3,myJreBundlePath);
  }
  if (myVmParameters != null) {
    srtingTable.setString(4,myVmParameters);
  }
  if (myStartJar != null) {
    srtingTable.setString(5,myStartJar);
  }
  srtingTable.setString(6,"waitForWindow");
  if (myWorkDir != null) {
    srtingTable.setString(7,myWorkDir);
  }
  if (myJavaVersion != null) {
    StringBuffer buffer=new StringBuffer(myJavaVersion.length());
    for (int i=0; i < myJavaVersion.length(); ++i) {
      char ch=myJavaVersion.charAt(i);
      if (Character.isDigit(ch) || ch == '.') {
        buffer.append(ch);
      }
    }
    srtingTable.setString(8,buffer.toString());
  }
  if (mySearchJdkOnly) {
    srtingTable.setString(9,"SearchJdkOnly");
  }
  byte[] a=srtingTable.getBytes();
  rawResource.setBytes(a);
  if (myIcon != null) {
    IconResourceInjector iconInjector=new IconResourceInjector();
    iconInjector.injectIcon(myIcon,root,"IRD101");
  }
  if (myBmp != null) {
    PictureResourceInjector bmpInjector=new PictureResourceInjector();
    bmpInjector.inject(myBmp,root,"IRD104");
  }
  DirectoryEntry viDir=root.findSubDir("IRD16").findSubDir("IRD1");
  Bin.Bytes viBytes=viDir.getRawResource(0).getBytes();
  ByteArrayInputStream bytesStream=new ByteArrayInputStream(viBytes.getBytes());
  VersionInfoReader viReader=new VersionInfoReader();
  viReader.read(new DataInputStream(bytesStream));
  reader.resetOffsets(0);
  myExePath.getParentFile().mkdirs();
  myExePath.createNewFile();
  RandomAccessFile exeStream=new RandomAccessFile(myExePath,"rw");
  reader.write(exeStream);
  exeStream.close();
}
