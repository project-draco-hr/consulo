{
  if (!myIsMovable)   return;
  final PsiExpression qualifier;
  if (referenceElement instanceof PsiReferenceExpression) {
    qualifier=((PsiReferenceExpression)referenceElement).getQualifierExpression();
  }
 else {
    qualifier=null;
  }
  if (qualifier == null || qualifier instanceof PsiThisExpression || qualifier instanceof PsiSuperExpression) {
    final PsiElement resolved=referenceElement.resolve();
    if (!(resolved instanceof PsiParameter)) {
      PsiClass containingClass=null;
      if (resolved instanceof PsiClass && ((PsiClass)resolved).hasModifierProperty(PsiModifier.STATIC)) {
        return;
      }
      if (resolved instanceof PsiMember && !((PsiMember)resolved).hasModifierProperty(PsiModifier.STATIC)) {
        containingClass=((PsiMember)resolved).getContainingClass();
      }
      myIsMovable=containingClass != null && InheritanceUtil.isInheritorOrSelf(myTargetSuperClass,containingClass,true);
    }
  }
 else {
    qualifier.accept(this);
  }
}
