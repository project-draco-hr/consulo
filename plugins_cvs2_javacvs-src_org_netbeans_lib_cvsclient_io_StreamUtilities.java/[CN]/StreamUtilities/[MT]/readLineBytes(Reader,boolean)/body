{
  final ByteArrayOutputStream output=new ByteArrayOutputStream();
  for (; ; ) {
    int value=reader.read();
    if (ignoreNegative) {
      if (value < 0) {
        if (output.size() == 0) {
          continue;
        }
        break;
      }
    }
    if ((char)value == '\n') {
      break;
    }
    output.write(value);
  }
  output.close();
  return output.toByteArray();
}
