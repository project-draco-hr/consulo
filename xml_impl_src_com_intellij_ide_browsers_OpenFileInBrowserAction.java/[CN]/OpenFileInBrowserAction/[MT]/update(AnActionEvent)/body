{
  final DataContext dataContext=e.getDataContext();
  final PsiFile file=LangDataKeys.PSI_FILE.getData(dataContext);
  final Presentation presentation=e.getPresentation();
  if (file != null) {
    presentation.setVisible(true);
    presentation.setText(XmlBundle.message("action.OpenInBrowser.text"));
    presentation.setDescription(XmlBundle.message("action.open.file.in.browser.description"));
    final WebBrowserUrlProvider browserUrlProvider=WebBrowserUrlProviders.getProvider(file);
    presentation.setEnabled(browserUrlProvider != null);
    if (browserUrlProvider != null) {
      final String actionText=browserUrlProvider.getOpenInBrowserActionText(file);
      if (actionText != null) {
        presentation.setText(actionText);
      }
      final String description=browserUrlProvider.getOpenInBrowserActionDescription(file);
      if (description != null) {
        presentation.setDescription(description);
      }
    }
    if (ActionPlaces.isPopupPlace(e.getPlace())) {
      presentation.setVisible(presentation.isEnabled());
    }
  }
 else {
    presentation.setVisible(false);
    presentation.setEnabled(false);
  }
}
