{
  final PsiExpression condition=statement.getCondition();
  final List<PsiExpression> possibleCaseExpressions=determinePossibleCaseExpressions(condition);
  if (possibleCaseExpressions == null) {
    return null;
  }
  for (  Object possibleCaseExpression : possibleCaseExpressions) {
    final PsiExpression caseExp=(PsiExpression)possibleCaseExpression;
    if (!SideEffectChecker.mayHaveSideEffects(caseExp)) {
      PsiIfStatement statementToCheck=statement;
      while (true) {
        final PsiExpression caseCondition=statementToCheck.getCondition();
        if (canBeMadeIntoCase(caseCondition,caseExp)) {
          final PsiStatement elseBranch=statementToCheck.getElseBranch();
          if (elseBranch == null || !(elseBranch instanceof PsiIfStatement)) {
            return caseExp;
          }
          statementToCheck=(PsiIfStatement)elseBranch;
        }
 else {
          break;
        }
      }
    }
  }
  return null;
}
