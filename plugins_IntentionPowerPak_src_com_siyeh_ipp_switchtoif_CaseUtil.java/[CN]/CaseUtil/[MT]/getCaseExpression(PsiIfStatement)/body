{
  final PsiExpression condition=statement.getCondition();
  final LanguageLevel languageLevel=PsiUtil.getLanguageLevel(statement);
  final boolean stringSwitch=languageLevel.compareTo(LanguageLevel.JDK_1_7) >= 0;
  final PsiExpression possibleCaseExpression=determinePossibleCaseExpressions(condition,stringSwitch);
  if (possibleCaseExpression == null) {
    return null;
  }
  if (SideEffectChecker.mayHaveSideEffects(possibleCaseExpression)) {
    return null;
  }
  while (true) {
    final PsiExpression caseCondition=statement.getCondition();
    if (!canBeMadeIntoCase(caseCondition,possibleCaseExpression,stringSwitch)) {
      break;
    }
    final PsiStatement elseBranch=statement.getElseBranch();
    if (!(elseBranch instanceof PsiIfStatement)) {
      return possibleCaseExpression;
    }
    statement=(PsiIfStatement)elseBranch;
  }
  return null;
}
