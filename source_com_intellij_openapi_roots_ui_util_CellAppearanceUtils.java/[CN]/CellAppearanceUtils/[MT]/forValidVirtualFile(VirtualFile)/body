{
  final VirtualFileSystem fileSystem=virtualFile.getFileSystem();
  if (fileSystem.getProtocol().equals(JarFileSystem.PROTOCOL)) {
    return new JarSubfileCellAppearance(virtualFile);
  }
  if (fileSystem instanceof HttpFileSystem) {
    return new HttpUrlCellAppearance(virtualFile);
  }
  if (virtualFile.isDirectory()) {
    return SimpleTextCellAppearance.normal(virtualFile.getPresentableUrl(),FOLDER_ICON);
  }
  return new ValidFileCellAppearance(virtualFile);
}
