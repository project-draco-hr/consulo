{
  if (pattern.length() == 0 || pattern.equals("*")) {
    pattern="^/(.*)$";
  }
 else {
    pattern=pattern.replace(".","/");
    int lastDot=pattern.lastIndexOf("/");
    String packagePattern=lastDot == -1 ? "" : (pattern.substring(0,lastDot) + "/");
    String classNamePattern=lastDot == -1 ? pattern : pattern.substring(lastDot + 1);
    packagePattern=packagePattern.replaceAll("\\*",".*?");
    classNamePattern=classNamePattern.replaceAll("\\*","[^/]*?");
    pattern=packagePattern + classNamePattern;
    pattern=".*?/" + pattern;
    pattern="^(" + pattern + ")$";
  }
  Pattern p;
  try {
    p=Pattern.compile(pattern,Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);
  }
 catch (  PatternSyntaxException e) {
    return Collections.emptyList();
  }
  Map<String,MavenClassSearchResult> result=new THashMap<String,MavenClassSearchResult>();
  for (  ArtifactInfo each : infos) {
    if (each.classNames == null)     continue;
    Matcher matcher=p.matcher(each.classNames);
    while (matcher.find()) {
      String classFQName=matcher.group(1);
      classFQName=classFQName.replace("/",".");
      if (classFQName.startsWith("."))       classFQName=classFQName.substring(1);
      String key=makeKey(classFQName,each);
      MavenClassSearchResult classResult=result.get(key);
      if (classResult == null) {
        classResult=new MavenClassSearchResult();
        int pos=classFQName.lastIndexOf(".");
        if (pos == -1) {
          classResult.packageName="default package";
          classResult.className=classFQName;
        }
 else {
          classResult.packageName=classFQName.substring(0,pos);
          classResult.className=classFQName.substring(pos + 1);
        }
        result.put(key,classResult);
      }
      classResult.versions.add(each);
      if (result.size() > maxResult)       break;
    }
  }
  return result.values();
}
