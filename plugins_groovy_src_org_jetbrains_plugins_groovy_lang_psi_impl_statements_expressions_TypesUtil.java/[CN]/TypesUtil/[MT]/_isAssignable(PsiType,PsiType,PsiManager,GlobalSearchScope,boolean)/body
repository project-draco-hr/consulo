{
  if (lType == null || rType == null) {
    return false;
  }
  if (rType == PsiType.NULL && lType instanceof PsiPrimitiveType)   return false;
  if (allowConversion) {
    if (isNumericType(lType)) {
      if (isNumericType(rType) || rType == PsiType.NULL)       return true;
    }
 else     if (isClassType(lType,JAVA_LANG_STRING)) {
      return true;
    }
 else     if (lType instanceof PsiArrayType) {
      PsiType lComponentType=((PsiArrayType)lType).getComponentType();
      PsiType rComponentType=ClosureParameterEnhancer.findTypeForIteration(rType,manager,scope);
      if (rComponentType != null && isAssignable(lComponentType,rComponentType,manager,scope,true)) {
        return true;
      }
    }
  }
  rType=boxPrimitiveType(rType,manager,scope);
  lType=boxPrimitiveType(lType,manager,scope);
  if (unboxPrimitiveTypeWrapper(lType) == PsiType.CHAR && (isClassType(rType,GROOVY_LANG_GSTRING) || isClassType(rType,JAVA_LANG_STRING))) {
    return true;
  }
  return lType.isAssignableFrom(rType);
}
