{
  if (type == null)   return null;
  GlobalSearchScope resolveScope=expression.getResolveScope();
  PsiManager manager=expression.getManager();
  type=substitutor.substitute(type);
  type=boxPrimitiveType(type,manager,resolveScope);
  if (type == null)   return null;
  return PsiImplUtil.normalizeWildcardTypeByPosition(type,expression);
}
