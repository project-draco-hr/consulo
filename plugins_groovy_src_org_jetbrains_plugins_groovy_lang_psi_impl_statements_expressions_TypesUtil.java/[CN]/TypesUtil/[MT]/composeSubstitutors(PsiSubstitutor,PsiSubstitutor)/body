{
  final Map<PsiTypeParameter,PsiType> map=s1.getSubstitutionMap();
  Map<PsiTypeParameter,PsiType> result=new THashMap<PsiTypeParameter,PsiType>(map.size());
  for (  PsiTypeParameter parameter : map.keySet()) {
    result.put(parameter,s2.substitute(map.get(parameter)));
  }
  final Map<PsiTypeParameter,PsiType> map2=s2.getSubstitutionMap();
  for (  PsiTypeParameter parameter : map2.keySet()) {
    if (!result.containsKey(parameter)) {
      result.put(parameter,map2.get(parameter));
    }
  }
  return PsiSubstitutorImpl.createSubstitutor(result);
}
