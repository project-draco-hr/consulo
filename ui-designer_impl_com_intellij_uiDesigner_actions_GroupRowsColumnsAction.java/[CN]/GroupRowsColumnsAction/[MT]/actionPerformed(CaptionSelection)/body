{
  FormLayout layout=(FormLayout)selection.getContainer().getLayout();
  int[][] oldGroups=selection.isRow() ? layout.getRowGroups() : layout.getColumnGroups();
  int[][] newGroups=new int[oldGroups.length + 1][];
  System.arraycopy(oldGroups,0,newGroups,0,oldGroups.length);
  newGroups[oldGroups.length]=new int[selection.getSelection().length];
  int[] indices=selection.getSelection();
  for (int i=0; i < indices.length; i++) {
    newGroups[oldGroups.length][i]=indices[i] + 1;
  }
  if (selection.isRow()) {
    layout.setRowGroups(newGroups);
  }
 else {
    layout.setColumnGroups(newGroups);
  }
}
