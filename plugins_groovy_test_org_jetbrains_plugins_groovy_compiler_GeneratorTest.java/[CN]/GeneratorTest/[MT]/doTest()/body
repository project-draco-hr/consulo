{
  final String relTestPath=getTestName(true) + ".test";
  final List<String> data=TestUtils.readInput(getTestDataPath() + "/" + relTestPath);
  final StringBuffer buffer=new StringBuffer();
  final String testName=StringUtil.trimEnd(relTestPath,".test");
  PsiFile psiFile=TestUtils.createPseudoPhysicalFile(getProject(),testName + ".groovy",data.get(0));
  final Map<String,String> map=new GroovyToJavaGenerator(getProject(),Arrays.asList(psiFile.getViewProvider().getVirtualFile()),false).generateStubs((GroovyFile)psiFile);
  for (  String stubText : map.values()) {
    buffer.append(stubText);
    buffer.append("\n");
    buffer.append("---");
    buffer.append("\n");
  }
  assertEquals(data.get(1).trim(),buffer.toString().trim());
}
