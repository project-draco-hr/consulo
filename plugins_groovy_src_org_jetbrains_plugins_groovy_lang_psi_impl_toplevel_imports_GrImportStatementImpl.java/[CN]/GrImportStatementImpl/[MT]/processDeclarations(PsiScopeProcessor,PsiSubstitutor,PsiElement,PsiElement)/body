{
  if (isOnDemand()) {
    GrTypeOrPackageReferenceElement ref=getImportReference();
    if (ref != null) {
      String qName=PsiUtil.getQualifiedReferenceText(ref);
      if (qName != null) {
        PsiPackage aPackage=getManager().findPackage(qName);
        if (aPackage != null) {
          if (!aPackage.processDeclarations(processor,substitutor,lastParent,place))           return false;
        }
      }
    }
  }
 else {
    String name=getImportedName();
    if (name != null) {
      NameHint nameHint=processor.getHint(NameHint.class);
      if (nameHint == null || name.equals(nameHint.getName())) {
        GrTypeOrPackageReferenceElement ref=getImportReference();
        if (ref != null) {
          String qName=PsiUtil.getQualifiedReferenceText(ref);
          if (qName != null) {
            PsiClass clazz=getManager().findClass(qName,getResolveScope());
            if (clazz != null && !processor.execute(clazz,substitutor))             return false;
          }
        }
      }
    }
  }
  return true;
}
