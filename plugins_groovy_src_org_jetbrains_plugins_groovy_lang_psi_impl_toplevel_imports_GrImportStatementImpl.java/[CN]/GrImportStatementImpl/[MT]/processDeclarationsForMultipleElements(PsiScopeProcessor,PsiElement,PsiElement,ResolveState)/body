{
  GrCodeReferenceElement ref=getImportReference();
  if (ref == null)   return true;
  if (isStatic()) {
    final PsiElement resolved=ref.resolve();
    if (resolved instanceof PsiClass) {
      state=state.put(ResolverProcessor.RESOLVE_CONTEXT,this);
      final PsiClass clazz=(PsiClass)resolved;
      if (!processAllMembers(processor,clazz,state))       return false;
    }
  }
 else {
    String qName=PsiUtil.getQualifiedReferenceText(ref);
    if (qName != null) {
      PsiJavaPackage aPackage=JavaPsiFacade.getInstance(getProject()).findPackage(qName);
      if (aPackage != null && !((GroovyFile)getContainingFile()).getPackageName().equals(aPackage.getQualifiedName())) {
        state=state.put(ResolverProcessor.RESOLVE_CONTEXT,this);
        if (!aPackage.processDeclarations(processor,state,lastParent,place))         return false;
      }
    }
  }
  return true;
}
