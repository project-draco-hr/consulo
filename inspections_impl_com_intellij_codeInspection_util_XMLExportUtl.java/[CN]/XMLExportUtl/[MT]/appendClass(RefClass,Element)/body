{
  PsiClass psiClass=refClass.getElement();
  PsiDocComment psiDocComment=psiClass.getDocComment();
  PsiFile psiFile=psiClass.getContainingFile();
  if (psiFile instanceof PsiJavaFile) {
    String packageName=((PsiJavaFile)psiFile).getPackageName();
    Element packageElement=new Element("package");
    packageElement.addContent(packageName.length() > 0 ? packageName : InspectionsBundle.message("inspection.export.results.default"));
    parentNode.addContent(packageElement);
  }
  Element classElement=new Element("class");
  if (psiDocComment != null) {
    PsiDocTag[] tags=psiDocComment.getTags();
    for (    PsiDocTag tag : tags) {
      if ("author".equals(tag.getName()) && tag.getValueElement() != null) {
        classElement.setAttribute("author",tag.getValueElement().getText());
      }
    }
  }
  String name=PsiFormatUtil.formatClass(psiClass,PsiFormatUtil.SHOW_NAME);
  Element nameElement=new Element("name");
  nameElement.addContent(name);
  classElement.addContent(nameElement);
  Element displayName=new Element("display_name");
  final RefUtil refUtil=RefUtil.getInstance();
  displayName.addContent(refUtil.getQualifiedName(refClass));
  classElement.addContent(displayName);
  parentNode.addContent(classElement);
  RefClass topClass=refUtil.getTopLevelClass(refClass);
  if (topClass != refClass) {
    appendClass(topClass,classElement);
  }
}
