{
  IdeFocusManager instance=null;
  if (context != null) {
    instance=getInstanceSafe(PlatformDataKeys.PROJECT.getData(context));
  }
  if (instance == null) {
    instance=findByComponent(KeyboardFocusManager.getCurrentKeyboardFocusManager().getActiveWindow());
  }
  if (instance == null) {
    instance=PassThroughtIdeFocusManager.getInstance();
  }
  return instance;
}
