{
  final DirDiffTableModel model=new DirDiffTableModel(myProject,dir1,dir2,settings);
  if (settings.showInFrame) {
    DirDiffFrame frame=new DirDiffFrame(myProject,model);
    setWindowListener(onWindowClose,frame.getFrame());
    frame.show();
  }
 else {
    DirDiffDialog dirDiffDialog=new DirDiffDialog(myProject,model);
    if (myProject == null || myProject.isDefault() || isFromModalDialog(myProject)) {
      dirDiffDialog.setModal(true);
    }
    setWindowListener(onWindowClose,dirDiffDialog.getOwner());
    dirDiffDialog.show();
  }
}
