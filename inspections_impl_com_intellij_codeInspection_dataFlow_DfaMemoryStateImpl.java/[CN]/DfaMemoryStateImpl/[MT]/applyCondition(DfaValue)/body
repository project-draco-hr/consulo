{
  if (dfaCond instanceof DfaUnknownValue)   return true;
  if (dfaCond instanceof DfaUnboxedValue) {
    DfaVariableValue dfaVar=((DfaUnboxedValue)dfaCond).getVariable();
    boolean isNegated=dfaVar.isNegated();
    DfaVariableValue dfaNormalVar=isNegated ? (DfaVariableValue)dfaVar.createNegated() : dfaVar;
    DfaConstValue dfaTrue=myFactory.getConstFactory().getTrue();
    final DfaValue boxedTrue=myFactory.getBoxedFactory().createBoxed(dfaTrue);
    DfaRelationValue dfaEqualsTrue=myFactory.getRelationFactory().create(dfaNormalVar,boxedTrue,"==",isNegated);
    return applyCondition(dfaEqualsTrue);
  }
  if (dfaCond instanceof DfaVariableValue) {
    DfaVariableValue dfaVar=(DfaVariableValue)dfaCond;
    boolean isNegated=dfaVar.isNegated();
    DfaVariableValue dfaNormalVar=isNegated ? (DfaVariableValue)dfaVar.createNegated() : dfaVar;
    DfaConstValue dfaTrue=myFactory.getConstFactory().getTrue();
    DfaRelationValue dfaEqualsTrue=myFactory.getRelationFactory().create(dfaNormalVar,dfaTrue,"==",isNegated);
    return applyCondition(dfaEqualsTrue);
  }
  if (dfaCond instanceof DfaConstValue) {
    return dfaCond == myFactory.getConstFactory().getTrue() || dfaCond != myFactory.getConstFactory().getFalse();
  }
  if (!(dfaCond instanceof DfaRelationValue))   return true;
  DfaRelationValue dfaRelation=(DfaRelationValue)dfaCond;
  DfaValue dfaLeft=dfaRelation.getLeftOperand();
  DfaValue dfaRight=dfaRelation.getRightOperand();
  if (dfaRight == null || dfaLeft == null)   return false;
  boolean isNegated=dfaRelation.isNegated();
  if (dfaLeft instanceof DfaNotNullValue && dfaRight == myFactory.getConstFactory().getNull()) {
    return isNegated;
  }
  if (dfaRight instanceof DfaTypeValue) {
    if (dfaLeft instanceof DfaVariableValue) {
      DfaVariableState varState=getVariableState((DfaVariableValue)dfaLeft);
      DfaVariableValue dfaVar=(DfaVariableValue)dfaLeft;
      if (isNegated) {
        return varState.addNotInstanceofValue((DfaTypeValue)dfaRight) || applyCondition(compareToNull(dfaVar,false));
      }
      return applyCondition(compareToNull(dfaVar,true)) && varState.setInstanceofValue((DfaTypeValue)dfaRight);
    }
    return true;
  }
  if (dfaRight == myFactory.getConstFactory().getNull() && dfaLeft instanceof DfaVariableValue) {
    final DfaVariableState varState=getVariableState((DfaVariableValue)dfaLeft);
    if (varState.isNotNull())     return isNegated;
    varState.setNullable(true);
  }
  if (dfaLeft instanceof DfaUnknownValue || dfaRight instanceof DfaUnknownValue)   return true;
  boolean result=applyRelation(dfaLeft,dfaRight,isNegated);
  if (dfaRight instanceof DfaConstValue) {
    Object constVal=((DfaConstValue)dfaRight).getValue();
    if (constVal instanceof Boolean) {
      boolean neg=!((Boolean)constVal).booleanValue();
      DfaConstValue negVal=myFactory.getConstFactory().createFromValue(Boolean.valueOf(neg),PsiType.BOOLEAN);
      result&=applyRelation(dfaLeft,negVal,!isNegated);
    }
  }
  if (dfaLeft instanceof DfaVariableValue) {
    PsiVariable psiVariable=((DfaVariableValue)dfaLeft).getPsiVariable();
    if (TypeConversionUtil.isPrimitiveWrapper(psiVariable.getType()) && (!isNegated || dfaRight instanceof DfaConstValue || dfaRight instanceof DfaBoxedValue && ((DfaBoxedValue)dfaRight).getWrappedValue() instanceof DfaConstValue)) {
      dfaLeft=myFactory.getBoxedFactory().createUnboxed(dfaLeft);
      dfaRight=myFactory.getBoxedFactory().createUnboxed(dfaRight);
      if (dfaLeft != null && dfaRight != null) {
        result&=applyRelation(dfaLeft,dfaRight,isNegated);
      }
    }
 else     if (TypeConversionUtil.isPrimitiveAndNotNull(psiVariable.getType())) {
      dfaLeft=myFactory.getBoxedFactory().createBoxed(dfaLeft);
      dfaRight=myFactory.getBoxedFactory().createBoxed(dfaRight);
      if (dfaLeft != null && dfaRight != null) {
        result&=applyRelation(dfaLeft,dfaRight,isNegated);
      }
    }
  }
  return result;
}
