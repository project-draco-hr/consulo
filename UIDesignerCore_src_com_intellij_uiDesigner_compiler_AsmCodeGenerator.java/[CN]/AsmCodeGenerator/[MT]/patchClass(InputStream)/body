{
  myClassToBind=myRootContainer.getClassToBind();
  if (myClassToBind == null) {
    myWarnings.add(new FormErrorInfo(null,"No class to bind specified"));
    return null;
  }
  if (myRootContainer.getComponentCount() != 1) {
    myErrors.add(new FormErrorInfo(null,"There should be only one component at the top level"));
    return null;
  }
  String nonEmptyPanel=Utils.findNotEmptyPanelWithXYLayout(myRootContainer.getComponent(0));
  if (nonEmptyPanel != null) {
    myErrors.add(new FormErrorInfo(nonEmptyPanel,"There are non empty panels with XY layout. Please lay them out in a grid."));
    return null;
  }
  if ("GridBagLayout".equals(myRootContainer.getLayoutManager())) {
    myLayoutCodeGenerator=new GridBagLayoutCodeGenerator();
  }
 else {
    myLayoutCodeGenerator=new GridLayoutCodeGenerator();
  }
  ClassReader reader;
  try {
    reader=new ClassReader(classStream);
  }
 catch (  IOException e) {
    myErrors.add(new FormErrorInfo(null,"Error reading class data stream"));
    return null;
  }
  ClassWriter cw=new ClassWriter(true);
  reader.accept(new FormClassVisitor(cw),false);
  myPatchedData=cw.toByteArray();
  return myPatchedData;
}
