{
  myClassToBind=myRootContainer.getClassToBind();
  if (myClassToBind == null) {
    myWarnings.add("No class to bind specified");
    return null;
  }
  if (myRootContainer.getComponentCount() != 1) {
    myErrors.add("There should be only one component at the top level");
    return null;
  }
  if (containsNotEmptyPanelsWithXYLayout((LwComponent)myRootContainer.getComponent(0))) {
    myErrors.add("There are non empty panels with XY layout. Please lay them out in a grid.");
    return null;
  }
  if ("GridBagLayout".equals(myRootContainer.getLayoutManager())) {
    myLayoutCodeGenerator=new GridBagLayoutCodeGenerator();
  }
 else {
    myLayoutCodeGenerator=new GridLayoutCodeGenerator();
  }
  ClassReader reader=null;
  try {
    reader=new ClassReader(classStream);
  }
 catch (  IOException e) {
    myErrors.add("Error reading class data stream");
    return null;
  }
  ClassWriter cw=new ClassWriter(true);
  reader.accept(new FormClassVisitor(cw),false);
  myPatchedData=cw.toByteArray();
  return myPatchedData;
}
