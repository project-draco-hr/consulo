{
  if (location == null) {
    if (isXY() || dragObject.getComponentCount() > 1) {
      return false;
    }
    return getComponentAtGrid(0,0) == null;
  }
  if (isXY()) {
    return true;
  }
 else   if (isGrid()) {
    final GridLayoutManager gridLayout=(GridLayoutManager)getLayout();
    final int row=gridLayout.getRowAt(location.y);
    final int column=gridLayout.getColumnAt(location.x);
    if (row == -1 || column == -1) {
      return false;
    }
    for (int c=column; c < column + dragObject.getComponentCount(); c++) {
      if (c >= gridLayout.getColumnCount() || getComponentAtGrid(row,c) != null) {
        return false;
      }
    }
    return true;
  }
 else {
    throw new IllegalStateException("unknown layout:" + getLayout());
  }
}
