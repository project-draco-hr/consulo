{
  if (file instanceof PsiCompiledElement)   return null;
  Project project=file.getProject();
  if (InjectedLanguageManager.getInstance(project).isInjectedFragment(file))   return null;
  final PsiDocumentManager documentManager=PsiDocumentManager.getInstance(project);
  FileViewProvider provider=file.getViewProvider();
  for (  Language language : provider.getLanguages()) {
    PsiElement element=provider.findElementAt(offset,language);
    if (element == null) {
      continue;
    }
    PsiElement injected=findInside(element,file,offset,documentManager);
    if (injected != null)     return injected;
  }
  return null;
}
