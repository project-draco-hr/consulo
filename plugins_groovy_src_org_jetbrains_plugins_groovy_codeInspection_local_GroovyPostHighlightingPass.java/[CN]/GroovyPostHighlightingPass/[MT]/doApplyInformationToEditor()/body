{
  AnnotationHolder annotationHolder=new AnnotationHolderImpl(new AnnotationSession(myFile));
  List<HighlightInfo> infos=new ArrayList<HighlightInfo>(myUnusedDeclarations);
  for (  GrImportStatement unusedImport : myUnusedImports) {
    Annotation annotation=annotationHolder.createWarningAnnotation(unusedImport,GroovyInspectionBundle.message("unused.import"));
    annotation.setHighlightType(ProblemHighlightType.LIKE_UNUSED_SYMBOL);
    annotation.registerFix(createUnusedImportIntention());
    infos.add(HighlightInfo.fromAnnotation(annotation));
  }
  UpdateHighlightersUtil.setHighlightersToEditor(myProject,myDocument,0,myFile.getTextLength(),infos,getColorsScheme(),getId());
  final Runnable optimize=myOptimizeRunnable;
  if (optimize != null && timeToOptimizeImports()) {
    PostHighlightingPass.invokeOnTheFlyImportOptimizer(new Runnable(){
      @Override public void run(){
        optimize.run();
      }
    }
,myFile,myEditor);
  }
}
