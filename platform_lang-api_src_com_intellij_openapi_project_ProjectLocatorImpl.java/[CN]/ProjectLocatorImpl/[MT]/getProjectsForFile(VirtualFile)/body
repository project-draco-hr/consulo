{
  final Collection<Project> result=new HashSet<Project>();
  final ProjectManager projectManager=ProjectManager.getInstance();
  if (projectManager == null || file == null) {
    return result;
  }
  final Project[] openProjects=projectManager.getOpenProjects();
  if (openProjects.length == 0) {
    return result;
  }
  for (  Project project : openProjects) {
    if (project.isInitialized() && !project.isDisposed() && ProjectRootManager.getInstance(project).getFileIndex().isInContent(file)) {
      result.add(project);
    }
  }
  return result;
}
