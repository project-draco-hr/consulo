{
  expression=ParenthesesUtils.stripParentheses(expression);
  if (expression == null) {
    return null;
  }
  if (!plusOne) {
    return expression.getText();
  }
  if (expression instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)expression;
    final IElementType tokenType=binaryExpression.getOperationTokenType();
    if (tokenType == JavaTokenType.MINUS) {
      final PsiExpression rhs=binaryExpression.getROperand();
      if (ExpressionUtils.isOne(rhs)) {
        return binaryExpression.getLOperand().getText();
      }
    }
  }
  final int precedence=ParenthesesUtils.getPrecedence(expression);
  if (precedence > ParenthesesUtils.ADDITIVE_PRECEDENCE) {
    return '(' + expression.getText() + ")+1";
  }
 else {
    return expression.getText() + "+1";
  }
}
