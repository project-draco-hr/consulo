{
  for (int lastIndex=0; lastIndex < savedLog.size(); lastIndex++) {
    TimedVcsCommit commit=savedLog.get(lastIndex);
    if (lastIndex > BOUND_SAVED_LOG)     throw new IllegalStateException(ILLEGAL_DATA_RELOAD_ALL);
    boolean isGreen=currentGreen.contains(commit.getHash());
    if (isGreen) {
      currentRed.remove(commit.getHash());
      currentGreen.addAll(commit.getParents());
    }
 else {
      markRealRedNode(commit.getHash());
      currentRed.addAll(commit.getParents());
    }
    if (currentRed.isEmpty())     return lastIndex + 1;
  }
  throw new IllegalStateException(ILLEGAL_DATA_RELOAD_ALL);
}
