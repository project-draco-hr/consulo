{
  assertTrue(file.isValid());
  file.getTimeStamp();
  new WriteCommandAction.Simple(project){
    @Override protected void run() throws Throwable {
      try {
        final long newTs=Math.max(System.currentTimeMillis(),file.getTimeStamp() + 1100);
        file.setBinaryContent(newContent.getBytes(),-1,newTs);
        final File file1=new File(file.getPath());
        FileUtil.writeToFile(file1,newContent.getBytes());
        file.refresh(false,false);
        assertTrue(file1 + " / " + newTs,file1.setLastModified(newTs));
      }
 catch (      IOException ex) {
        throw new RuntimeException(ex);
      }
    }
  }
.execute();
}
