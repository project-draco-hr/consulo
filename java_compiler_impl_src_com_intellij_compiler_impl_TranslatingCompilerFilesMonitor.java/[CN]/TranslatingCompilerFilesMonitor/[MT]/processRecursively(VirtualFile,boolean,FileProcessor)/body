{
  if (!(file.getFileSystem() instanceof LocalFileSystem)) {
    return;
  }
  VfsUtilCore.visitChildrenRecursively(file,new VirtualFileVisitor(){
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      if (!file.isDirectory()) {
        processor.execute(file);
      }
      return true;
    }
    @Nullable @Override public Iterable<VirtualFile> getChildrenIterable(    @NotNull VirtualFile file){
      return file.isDirectory() && dbOnly ? ((NewVirtualFile)file).iterInDbChildren() : null;
    }
  }
);
}
