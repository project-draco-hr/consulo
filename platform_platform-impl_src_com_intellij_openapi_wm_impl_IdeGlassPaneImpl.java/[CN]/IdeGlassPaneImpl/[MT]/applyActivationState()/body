{
  boolean wasVisible=isVisible();
  if (wasVisible != myPaintingActive) {
    setVisible(myPaintingActive);
  }
  IdeEventQueue queue=IdeEventQueue.getInstance();
  if (!queue.containsDispatcher(this) && (myPreprocessorActive || isVisible())) {
    queue.addDispatcher(this,null);
  }
 else   if (queue.containsDispatcher(this) && !myPreprocessorActive && !isVisible()) {
    queue.removeDispatcher(this);
  }
  if (wasVisible != isVisible()) {
    revalidate();
    repaint();
  }
}
