{
  boolean wasVisible=isVisible();
  boolean hasWork=getPainters().hasPainters() || getComponentCount() > 0;
  if (wasVisible != hasWork) {
    setVisible(hasWork);
  }
  IdeEventQueue queue=IdeEventQueue.getInstance();
  if (!queue.containsDispatcher(this) && (myPreprocessorActive || isVisible())) {
    queue.addDispatcher(this,null);
  }
 else   if (queue.containsDispatcher(this) && !myPreprocessorActive && !isVisible()) {
    queue.removeDispatcher(this);
  }
  if (wasVisible != isVisible()) {
    revalidate();
    repaint();
  }
}
