{
  if (myPainters.isEmpty())   return;
  Graphics2D g2d=(Graphics2D)g;
  for (  Painter painter : myPainters) {
    final Rectangle clip=g.getClipBounds();
    final Component component=myPainter2Component.get(painter);
    if (component.getParent() == null)     continue;
    final Rectangle componentBounds=SwingUtilities.convertRectangle(component.getParent(),component.getBounds(),this);
    if (!painter.needsRepaint()) {
      continue;
    }
    if (clip.contains(componentBounds) || clip.intersects(componentBounds)) {
      final Point targetPoint=SwingUtilities.convertPoint(this,0,0,component);
      final Rectangle targetRect=new Rectangle(targetPoint,component.getSize());
      g2d.translate(-targetRect.x,-targetRect.y);
      painter.paint(component,g2d);
      g2d.translate(targetRect.x,targetRect.y);
    }
  }
}
