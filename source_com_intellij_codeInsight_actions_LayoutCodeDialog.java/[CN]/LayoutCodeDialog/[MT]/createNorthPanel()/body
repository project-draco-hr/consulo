{
  JPanel panel=new JPanel(new GridBagLayout());
  panel.setBorder(BorderFactory.createEmptyBorder(4,8,8,0));
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.gridy=0;
  gbConstraints.gridx=0;
  gbConstraints.gridwidth=3;
  gbConstraints.gridheight=1;
  gbConstraints.weightx=1;
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.insets=new Insets(0,0,0,0);
  myRbFile=new JRadioButton("File" + (myFile != null ? " '" + myFile.getVirtualFile().getPresentableUrl() + "'" : ""));
  myRbFile.setMnemonic('F');
  panel.add(myRbFile,gbConstraints);
  myRbSelectedText=new JRadioButton("Selected text");
  myRbSelectedText.setMnemonic('S');
  if (myTextSelected != null) {
    gbConstraints.gridy++;
    gbConstraints.insets=new Insets(0,0,0,0);
    panel.add(myRbSelectedText,gbConstraints);
  }
  myRbDirectory=new JRadioButton("All files in directory " + myDirectory.getVirtualFile().getPresentableUrl());
  myRbDirectory.setMnemonic('A');
  gbConstraints.gridy++;
  gbConstraints.insets=new Insets(0,0,0,0);
  panel.add(myRbDirectory,gbConstraints);
  myCbIncludeSubdirs=new JCheckBox("Include subdirectories");
  myCbIncludeSubdirs.setMnemonic('I');
  if (myDirectory.getSubdirectories().length > 0) {
    gbConstraints.gridy++;
    gbConstraints.insets=new Insets(0,20,0,0);
    panel.add(myCbIncludeSubdirs,gbConstraints);
  }
  myCbOptimizeImports=new JCheckBox("Optimize imports");
  myCbOptimizeImports.setMnemonic('O');
  if (myTextSelected != null) {
    gbConstraints.gridy++;
    gbConstraints.insets=new Insets(0,0,0,0);
    panel.add(myCbOptimizeImports,gbConstraints);
  }
  ButtonGroup buttonGroup=new ButtonGroup();
  buttonGroup.add(myRbFile);
  buttonGroup.add(myRbSelectedText);
  buttonGroup.add(myRbDirectory);
  myRbFile.setEnabled(myFile != null);
  myRbSelectedText.setEnabled(myTextSelected == Boolean.TRUE);
  return panel;
}
