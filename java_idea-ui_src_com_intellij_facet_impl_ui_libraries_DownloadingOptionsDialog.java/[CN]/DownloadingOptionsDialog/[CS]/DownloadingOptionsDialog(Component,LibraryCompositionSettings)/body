{
  super(parent,true);
  setTitle("Downloading Options");
  mySettings=settings;
  myDownloadDescription=settings.getLibraryDescription().getDownloadDescription();
  final List<LibraryDownloadInfo> downloads=myDownloadDescription.getDownloads();
  myFilesList.setModel(new CollectionListModel(ContainerUtil.map2Array(downloads,JCheckBox.class,new Function<LibraryDownloadInfo,JCheckBox>(){
    @Override public JCheckBox fun(    LibraryDownloadInfo libraryInfo){
      return new JCheckBox(libraryInfo.getFileNamePrefix(),mySettings.getSelectedDownloads().contains(libraryInfo));
    }
  }
)));
  myFilesToDownloadLabel.setLabelFor(myFilesList);
  myDirectoryField.addBrowseFolderListener(ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.title"),ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.description"),null,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  myCopyDownloadedFilesToLabel.setLabelFor(myDirectoryField);
  myDirectoryField.setText(settings.getDirectoryForDownloadedLibrariesPath());
  myDownloadSourcesCheckBox.setSelected(settings.isDownloadSources());
  myDownloadJavadocsCheckBox.setSelected(settings.isDownloadJavadocs());
  myNameAndLevelPanel=new LibraryNameAndLevelPanel(settings.getDownloadedLibraryName(),settings.getLibraryLevel());
  myNameWrappingPanel.add(myNameAndLevelPanel.getPanel());
  init();
}
