{
  super(parent,true);
  setTitle("Downloading Options");
  mySettings=settings;
  myFilesList.setModel(new CollectionListModel(ContainerUtil.map2Array(settings.getLibraryInfos(),new Function<LibraryInfo,Object>(){
    @Override public Object fun(    LibraryInfo libraryInfo){
      return new JCheckBox(libraryInfo.getName(),libraryInfo.isSelected());
    }
  }
)));
  myFilesToDownloadLabel.setLabelFor(myFilesList);
  myDirectoryField.addBrowseFolderListener(ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.title"),ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.description"),null,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  myCopyDownloadedFilesToLabel.setLabelFor(myDirectoryField);
  myDirectoryField.setText(settings.getDirectoryForDownloadedLibrariesPath());
  myDownloadSourcesCheckBox.setSelected(settings.isDownloadSources());
  myDownloadJavadocsCheckBox.setSelected(settings.isDownloadJavadocs());
  myNameAndLevelPanel=new LibraryNameAndLevelPanel(settings.getDownloadedLibraryName(),settings.getLibraryLevel());
  myNameWrappingPanel.add(myNameAndLevelPanel.getPanel());
  init();
}
