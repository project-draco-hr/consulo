{
  super(parent,true);
  setTitle("Downloading Options");
  myLibraryType=settings.getLibraryType();
  LOG.assertTrue(!versions.isEmpty());
  if (showNameAndLevel) {
    myNameAndLevelPanel=new LibraryNameAndLevelPanel(settings.getLibraryName(),settings.getLibraryLevel());
    myNameWrappingPanel.add(myNameAndLevelPanel.getPanel());
  }
 else {
    myNameAndLevelPanel=null;
  }
  for (  FrameworkLibraryVersion version : versions) {
    myVersionComboBox.addItem(version);
  }
  myVersionComboBox.setRenderer(new ListCellRendererWrapper<FrameworkLibraryVersion>(myVersionComboBox){
    @Override public void customize(    JList list,    FrameworkLibraryVersion value,    int index,    boolean selected,    boolean hasFocus){
      setText(value.getVersionString());
    }
  }
);
  myVersionComboBox.setSelectedItem(settings.getVersion());
  myVersionPanel.setVisible(versions.size() > 1);
  onVersionChanged(settings.getSelectedDownloads());
  myVersionComboBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      onVersionChanged(null);
    }
  }
);
  myFilesToDownloadLabel.setLabelFor(myFilesList);
  myDirectoryField.addBrowseFolderListener(ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.title"),ProjectBundle.message("file.chooser.directory.for.downloaded.libraries.description"),null,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  myCopyDownloadedFilesToLabel.setLabelFor(myDirectoryField);
  myDirectoryField.setText(FileUtil.toSystemDependentName(settings.getDirectoryForDownloadedLibrariesPath()));
  myDownloadSourcesCheckBox.setVisible(false);
  myDownloadJavadocsCheckBox.setVisible(false);
  myDownloadSourcesCheckBox.setSelected(settings.isDownloadSources());
  myDownloadJavadocsCheckBox.setSelected(settings.isDownloadJavaDocs());
  init();
}
