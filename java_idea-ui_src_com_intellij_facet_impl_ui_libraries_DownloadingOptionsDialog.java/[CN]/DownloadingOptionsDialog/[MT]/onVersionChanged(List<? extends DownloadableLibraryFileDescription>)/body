{
  final FrameworkLibraryVersion version=getSelectedVersion();
  if (Comparing.equal(myLastSelectedVersion,version))   return;
  if (version != null) {
    final List<? extends DownloadableLibraryFileDescription> downloads=version.getFiles();
    myFilesList.setModel(new CollectionListModel<JCheckBox>(ContainerUtil.map2Array(downloads,JCheckBox.class,new Function<DownloadableLibraryFileDescription,JCheckBox>(){
      @Override public JCheckBox fun(      DownloadableLibraryFileDescription description){
        final boolean selected=selectedFiles != null ? selectedFiles.contains(description) : !description.isOptional();
        return new JCheckBox(description.getPresentableFileName(),selected);
      }
    }
)));
    if (myNameAndLevelPanel != null) {
      myNameAndLevelPanel.setDefaultName(version.getDefaultLibraryName());
    }
  }
  updateSourcesAndJavadocCheckboxes();
  myLastSelectedVersion=version;
}
