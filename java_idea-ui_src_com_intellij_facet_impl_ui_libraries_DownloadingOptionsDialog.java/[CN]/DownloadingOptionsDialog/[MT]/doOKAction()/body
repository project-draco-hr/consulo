{
  mySettings.setDownloadedLibraryName(myNameAndLevelPanel.getLibraryName());
  mySettings.setLibraryLevel(myNameAndLevelPanel.getLibraryLevel());
  mySettings.setDirectoryForDownloadedLibrariesPath(myDirectoryField.getText());
  List<LibraryDownloadInfo> selected=new ArrayList<LibraryDownloadInfo>();
  List<LibraryDownloadInfo> downloads=mySettings.getLibraryDescription().getDownloads();
  for (int i=0; i < downloads.size(); i++) {
    if (myFilesList.isItemSelected(i)) {
      selected.add(downloads.get(i));
    }
  }
  mySettings.setSelectedDownloads(selected);
  mySettings.setDownloadSources(myDownloadSourcesCheckBox.isSelected());
  mySettings.setDownloadJavadocs(myDownloadJavadocsCheckBox.isSelected());
  super.doOKAction();
}
