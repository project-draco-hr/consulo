{
  final FileViewProvider viewProvider=element.getContainingFile().getViewProvider();
  if (!(viewProvider.getClass() == myTemplateFileViewProviderClass)) {
    return true;
  }
  final Language parentLanguage=element.getParent().getLanguage();
  final Language javaScript=Language.findLanguageByID("JavaScript");
  final Language css=Language.findLanguageByID("CSS");
  if (javaScript != null && parentLanguage.is(javaScript) || css != null && parentLanguage.is(css)) {
    final PsiElement next=viewProvider.findElementAt(element.getTextOffset() + 1,viewProvider.getBaseLanguage());
    if (next != null && next.getNode().getElementType() == myTemplateExpressionStart) {
      return false;
    }
  }
  return true;
}
