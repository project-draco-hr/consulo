{
  myDestinations=new SmartList<Pair<String,Long>>();
  final Set<String> paths=StringSetSpinAllocator.alloc();
  try {
    for (    DestinationInfo info : destinationInfos) {
      final VirtualFile outputFile=info.getOutputFile();
      long timestamp=outputFile != null ? outputFile.getTimeStamp() : -1;
      final String path=info.getOutputPath();
      myDestinations.add(Pair.create(path,timestamp));
      paths.add(path);
    }
    if (!sourceFileModified && oldState != null) {
      for (      Pair<String,Long> pair : oldState.myDestinations) {
        if (!paths.contains(pair.getFirst())) {
          myDestinations.add(pair);
        }
      }
    }
  }
  finally {
    StringSetSpinAllocator.dispose(paths);
  }
}
