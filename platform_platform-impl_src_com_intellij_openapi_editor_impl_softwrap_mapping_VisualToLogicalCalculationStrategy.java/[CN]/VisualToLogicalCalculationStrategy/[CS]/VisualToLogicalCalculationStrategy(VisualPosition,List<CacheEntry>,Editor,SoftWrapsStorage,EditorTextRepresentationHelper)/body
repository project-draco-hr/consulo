{
  super(new Computable<Pair<CacheEntry,LogicalPosition>>(){
    @Override public Pair<CacheEntry,LogicalPosition> compute(){
      SEARCH_KEY.visualLine=targetVisual.line;
      int i=Collections.binarySearch(cache,SEARCH_KEY);
      if (i >= 0) {
        CacheEntry cacheEntry=cache.get(i);
        LogicalPosition eager=null;
        if (targetVisual.column == 0) {
          eager=cacheEntry.buildStartLineContext().buildLogicalPosition();
        }
        return new Pair<CacheEntry,LogicalPosition>(cacheEntry,eager);
      }
      throw new IllegalStateException(String.format("Can't map visual position (%s) to logical. Reason: no cached information information about target visual line is found. " + "Registered entries: %s",targetVisual,cache));
    }
  }
,editor,storage,representationHelper);
  myTargetVisual=targetVisual;
}
