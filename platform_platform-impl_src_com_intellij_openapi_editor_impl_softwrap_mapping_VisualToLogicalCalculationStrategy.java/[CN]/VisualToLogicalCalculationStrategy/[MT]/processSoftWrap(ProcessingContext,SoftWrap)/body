{
  if (getCacheEntry().startOffset == softWrap.getStart()) {
    if (myTargetVisual.column <= softWrap.getIndentInColumns()) {
      ProcessingContext resultingContext=getCacheEntry().buildStartLineContext();
      resultingContext.visualColumn=myTargetVisual.column;
      resultingContext.softWrapColumnDiff+=myTargetVisual.column;
      return resultingContext.buildLogicalPosition();
    }
 else {
      context.visualColumn=softWrap.getIndentInColumns();
      context.softWrapColumnDiff+=softWrap.getIndentInColumns();
      return null;
    }
  }
  ProcessingContext targetContext=getCacheEntry().buildEndLineContext();
  targetContext.softWrapColumnDiff+=myTargetVisual.column - targetContext.visualColumn;
  targetContext.visualColumn=myTargetVisual.column;
  return targetContext.buildLogicalPosition();
}
