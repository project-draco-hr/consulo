{
  LOG.assertTrue(isSameType(fragment1,fragment2));
  if (!fragment1.isOneSide()) {
    String unitedText1=fragment1.getText1() + fragment2.getText1();
    String unitedText2=fragment1.getText2() + fragment2.getText2();
    LOG.assertTrue(fragment1.isEqual() == fragment2.isEqual());
    return fragment1.isEqual() ? DiffFragment.unchanged(unitedText1,unitedText2) : new DiffFragment(unitedText1,unitedText2);
  }
  FragmentSide side=FragmentSide.chooseSide(fragment1);
  return side.createFragment(side.getText(fragment1) + side.getText(fragment2),null,fragment1.isModified());
}
