{
  boolean showChooser=super.appendAdditionalElement(stringUsages);
  PsiNamedElement variable=getVariable();
  if (variable != null) {
    RenamePsiElementProcessor processor=RenamePsiElementProcessor.forElement(variable);
    final PsiElement substituted=processor.substituteElementToRename(variable,myEditor);
    if (substituted != null) {
      appendAdditionalElement(stringUsages,variable,substituted);
      processor=RenamePsiElementProcessor.forElement(substituted);
      final HashMap<PsiElement,String> allRenames=new HashMap<PsiElement,String>();
      processor.prepareRenaming(substituted,"",allRenames,new LocalSearchScope(variable.getContainingFile()));
      for (      PsiElement element : allRenames.keySet()) {
        appendAdditionalElement(stringUsages,variable,element);
      }
    }
  }
  return showChooser;
}
