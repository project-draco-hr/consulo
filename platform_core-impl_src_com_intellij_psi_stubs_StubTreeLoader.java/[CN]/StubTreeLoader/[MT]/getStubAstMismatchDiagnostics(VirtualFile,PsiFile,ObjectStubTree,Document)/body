{
  String msg="";
  msg+="\n file=" + psiFile;
  msg+=", file.class=" + psiFile.getClass();
  msg+=", file.lang=" + psiFile.getLanguage();
  msg+=", modStamp=" + psiFile.getModificationStamp();
  if (!(psiFile instanceof PsiCompiledElement)) {
    String text=psiFile.getText();
    PsiFile fromText=PsiFileFactory.getInstance(psiFile.getProject()).createFileFromText(psiFile.getName(),psiFile.getFileType(),text);
    if (fromText.getLanguage().equals(psiFile.getLanguage())) {
      boolean consistent=DebugUtil.psiToString(psiFile,true).equals(DebugUtil.psiToString(fromText,true));
      if (consistent) {
        msg+="\n tree consistent";
      }
 else {
        msg+="\n AST INCONSISTENT, perhaps after incremental reparse; " + fromText;
      }
    }
  }
  msg+="\n stub debugInfo=" + stubTree.getDebugInfo();
  msg+="\n document before=" + prevCachedDocument;
  ObjectStubTree latestIndexedStub=readFromVFile(psiFile.getProject(),file);
  msg+="\nlatestIndexedStub=" + latestIndexedStub;
  if (latestIndexedStub != null) {
    msg+="\n   same size=" + (stubTree.getPlainList().size() == latestIndexedStub.getPlainList().size());
    msg+="\n   debugInfo=" + latestIndexedStub.getDebugInfo();
  }
  FileViewProvider viewProvider=psiFile.getViewProvider();
  msg+="\n viewProvider=" + viewProvider;
  msg+="\n viewProvider stamp: " + viewProvider.getModificationStamp();
  msg+="; file stamp: " + file.getModificationStamp();
  msg+="; file modCount: " + file.getModificationCount();
  msg+="; file length: " + file.getLength();
  Document document=FileDocumentManager.getInstance().getCachedDocument(file);
  if (document != null) {
    msg+="\n doc saved: " + !FileDocumentManager.getInstance().isDocumentUnsaved(document);
    msg+="; doc stamp: " + document.getModificationStamp();
    msg+="; doc size: " + document.getTextLength();
    msg+="; committed: " + PsiDocumentManager.getInstance(psiFile.getProject()).isCommitted(document);
  }
  return msg;
}
