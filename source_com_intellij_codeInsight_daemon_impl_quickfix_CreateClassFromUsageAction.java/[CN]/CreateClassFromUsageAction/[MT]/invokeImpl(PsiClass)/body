{
  if (CreateFromUsageUtils.isValidReference(myRefElement,true)) {
    return;
  }
  String superClassName=null;
  if (myRefElement.getParent().getParent() instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)myRefElement.getParent().getParent();
    if (method.getThrowsList() == myRefElement.getParent()) {
      superClassName="java.lang.Exception";
    }
  }
  final PsiClass aClass=CreateFromUsageUtils.createClass(myRefElement,myCreateInterface,superClassName);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      if (aClass == null)       return;
      try {
        myRefElement.bindToElement(aClass);
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      OpenFileDescriptor descriptor=new OpenFileDescriptor(myRefElement.getProject(),aClass.getContainingFile().getVirtualFile(),aClass.getTextOffset());
      FileEditorManager.getInstance(aClass.getProject()).openTextEditor(descriptor,true);
    }
  }
);
}
