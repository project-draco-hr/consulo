{
  final FilePath filePath=new FilePathImpl(file);
  final VcsRevisionNumber currentRevisionNumber=GitHistoryUtils.getCurrentRevision(project,filePath,currentBranch);
  final VcsRevisionNumber compareRevisionNumber=GitHistoryUtils.getCurrentRevision(project,filePath,compareBranch);
  if (currentRevisionNumber == null || compareRevisionNumber == null) {
    throw new VcsException("Null revision number. Current: [" + currentRevisionNumber + "], compare: ["+ compareRevisionNumber+ "]");
  }
  final VcsFileRevision compareRevision=new GitFileRevision(project,filePath,(GitRevisionNumber)compareRevisionNumber);
  VcsHistoryUtil.showDiff(project,filePath,new CurrentRevision(file,currentRevisionNumber),compareRevision,((GitRevisionNumber)currentRevisionNumber).getShortRev() + " on " + currentBranch,((GitRevisionNumber)compareRevisionNumber).getShortRev() + " on " + compareBranch);
}
