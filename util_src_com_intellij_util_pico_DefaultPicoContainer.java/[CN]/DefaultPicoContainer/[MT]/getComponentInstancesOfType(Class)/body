{
  if (componentType == null) {
    return Collections.EMPTY_LIST;
  }
  Map adapterToInstanceMap=new HashMap();
  for (Iterator iterator=componentAdapters.iterator(); iterator.hasNext(); ) {
    ComponentAdapter componentAdapter=(ComponentAdapter)iterator.next();
    if (componentType.isAssignableFrom(componentAdapter.getComponentImplementation())) {
      Object componentInstance=getInstance(componentAdapter);
      adapterToInstanceMap.put(componentAdapter,componentInstance);
      addOrderedComponentAdapter(componentAdapter);
    }
  }
  List result=new ArrayList();
  for (Iterator iterator=orderedComponentAdapters.iterator(); iterator.hasNext(); ) {
    Object componentAdapter=iterator.next();
    final Object componentInstance=adapterToInstanceMap.get(componentAdapter);
    if (componentInstance != null) {
      result.add(componentInstance);
    }
  }
  return result;
}
