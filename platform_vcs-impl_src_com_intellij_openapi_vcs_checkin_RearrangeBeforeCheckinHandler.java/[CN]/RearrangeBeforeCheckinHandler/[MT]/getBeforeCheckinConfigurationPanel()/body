{
  final JCheckBox rearrangeBox=new NonFocusableCheckBox(VcsBundle.message("checkbox.checkin.options.rearrange.code"));
  CheckinHandlerUtil.disableWhenDumb(myProject,rearrangeBox,"Impossible until indices are up-to-date");
  return new RefreshableOnComponent(){
    @Override public JComponent getComponent(){
      final JPanel panel=new JPanel(new GridLayout(1,0));
      panel.add(rearrangeBox);
      return panel;
    }
    @Override public void refresh(){
    }
    @Override public void saveState(){
      getSettings().REARRANGE_BEFORE_PROJECT_COMMIT=rearrangeBox.isSelected();
    }
    @Override public void restoreState(){
      rearrangeBox.setSelected(getSettings().REARRANGE_BEFORE_PROJECT_COMMIT);
    }
  }
;
}
