{
  if (element.getAnnotation(Stubbed.class) != null || element.getChildDescription().isStubbed()) {
    XmlElement xmlElement=element.getXmlElement();
    AbstractDomChildrenDescription description=element.getChildDescription();
    String nsKey=description instanceof DomChildrenDescription ? ((DomChildrenDescription)description).getXmlName().getNamespaceKey() : "";
    if (xmlElement instanceof XmlTag) {
      ElementStub old=myRoot;
      myRoot=new ElementStub(myRoot,StringRef.fromString(((XmlTag)xmlElement).getName()),StringRef.fromNullableString(nsKey),description instanceof CustomDomChildrenDescription);
      List<DomElement> children=DomUtil.getDefinedChildren(element,true,true);
      for (      DomElement child : children) {
        visitDomElement(child);
      }
      if (old != null) {
        myRoot=old;
      }
    }
 else     if (xmlElement instanceof XmlAttribute) {
      new AttributeStub(myRoot,StringRef.fromString(((XmlAttribute)xmlElement).getLocalName()),StringRef.fromNullableString(nsKey),((XmlAttribute)xmlElement).getValue());
    }
  }
}
