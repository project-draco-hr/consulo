{
  Project project=dependency.getOwnerModule().getProject();
  ExternalSystemApiUtil.executeProjectChangeAction(project,ProjectSystemId.IDE,dependency,synchronous,new Runnable(){
    @Override public void run(){
      doForDependency(dependency,new Consumer<ExportableOrderEntry>(){
        @Override public void consume(        ExportableOrderEntry entry){
          entry.setScope(scope);
        }
      }
);
    }
  }
);
}
