{
  final XmlTag tag=getTagByInjectedFile(file);
  final XmlTag parentTag=tag == null ? null : tag.getParentTag();
  final String parentTagName=parentTag == null ? null : parentTag.getName();
  final String name=tag == null ? null : tag.getName();
  if ("place".equals(name) && "injection".equals(parentTagName) && parentTag != null) {
    return new CachedValueProvider<List<PsiElement>>(){
      @Override public Result<List<PsiElement>> compute(){
        final XmlTag tag=getTagByInjectedFile(file);
        final XmlTag parentTag=tag == null ? null : tag.getParentTag();
        if (parentTag == null)         return Result.create(Collections.<PsiElement>emptyList(),file);
        return new Result<List<PsiElement>>(getRootsByClassNames(file,parentTag.getAttributeValue("injector-id")),parentTag.getContainingFile());
      }
    }
;
  }
 else   if ("pattern".equals(name) && parentTag != null) {
    return new CachedValueProvider<List<PsiElement>>(){
      @Override public Result<List<PsiElement>> compute(){
        final XmlTag tag=getTagByInjectedFile(file);
        if (tag == null)         return Result.create(Collections.<PsiElement>emptyList(),file);
        return new Result<List<PsiElement>>(getRootsByClassNames(file,tag.getAttributeValue("type")),tag.getContainingFile());
      }
    }
;
  }
 else   return null;
}
