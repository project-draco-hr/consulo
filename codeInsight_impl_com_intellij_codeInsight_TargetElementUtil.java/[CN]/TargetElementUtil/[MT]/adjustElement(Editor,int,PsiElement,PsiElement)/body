{
  if (element != null) {
    if (element instanceof PsiAnonymousClass) {
      return ((PsiAnonymousClass)element).getBaseClassType().resolve();
    }
    return element;
  }
  if (contextElement == null)   return null;
  final PsiElement parent=contextElement.getParent();
  if (parent instanceof XmlText || parent instanceof XmlAttributeValue) {
    return TargetElementUtilBase.getInstance().findTargetElement(editor,flags,parent.getParent().getTextRange().getStartOffset() + 1);
  }
 else   if (parent instanceof XmlTag || parent instanceof XmlAttribute) {
    return TargetElementUtilBase.getInstance().findTargetElement(editor,flags,parent.getTextRange().getStartOffset() + 1);
  }
  return null;
}
