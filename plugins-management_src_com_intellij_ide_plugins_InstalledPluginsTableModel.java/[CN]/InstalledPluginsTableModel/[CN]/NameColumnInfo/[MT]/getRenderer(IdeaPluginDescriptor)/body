{
  final DefaultTableCellRenderer cellRenderer=(DefaultTableCellRenderer)super.getRenderer(ideaPluginDescriptor);
  if (cellRenderer != null && ideaPluginDescriptor != null) {
    final IdeaPluginDescriptorImpl descriptor=(IdeaPluginDescriptorImpl)ideaPluginDescriptor;
    if (descriptor.isDeleted()) {
      cellRenderer.setIcon(IconLoader.getIcon("/actions/clean.png"));
    }
 else     if (hasNewerVersion(ideaPluginDescriptor.getPluginId())) {
      cellRenderer.setIcon(IconLoader.getIcon("/nodes/pluginobsolete.png"));
    }
 else {
      cellRenderer.setIcon(IconLoader.getIcon("/nodes/plugin.png"));
    }
    final Boolean enabled=myEnabled.get(ideaPluginDescriptor.getPluginId());
    if (enabled != null && enabled.booleanValue()) {
      PluginManager.checkDependants(ideaPluginDescriptor,new Function<PluginId,IdeaPluginDescriptor>(){
        @Nullable public IdeaPluginDescriptor fun(        final PluginId pluginId){
          return PluginManager.getPlugin(pluginId);
        }
      }
,new Condition<PluginId>(){
        public boolean value(        final PluginId pluginId){
          final Boolean enabled=myEnabled.get(pluginId);
          if (enabled == null || !enabled.booleanValue()) {
            cellRenderer.setForeground(Color.red);
            final IdeaPluginDescriptor plugin=PluginManager.getPlugin(pluginId);
            cellRenderer.setToolTipText(IdeBundle.message("plugin.manager.tooltip.warning",plugin != null ? plugin.getName() : pluginId.getIdString()));
            return false;
          }
          return true;
        }
      }
);
    }
    if (PluginManager.isIncompatible(ideaPluginDescriptor)) {
      cellRenderer.setToolTipText(IdeBundle.message("plugin.manager.incompatible.tooltip.warning",ApplicationNamesInfo.getInstance().getFullProductName()));
      cellRenderer.setForeground(Color.red);
    }
  }
  return cellRenderer;
}
