{
  RuleInstance hri=new HeaderRule().createRuleInstance();
  myResultRuleInstances.add(hri);
  prioritizedRuleInstances.add(hri);
  for (  Rule rule : myRules) {
    RuleInstance instance=rule.createRuleInstance();
    myResultRuleInstances.add(instance);
    boolean inserted=false;
    for (int i=prioritizedRuleInstances.size() - 1; i >= 0; i--) {
      RuleInstance entry=(prioritizedRuleInstances.get(i));
      if (rule.getPriority() <= entry.getRule().getPriority()) {
        prioritizedRuleInstances.add(i + 1,instance);
        inserted=true;
        break;
      }
    }
    if (!inserted) {
      prioritizedRuleInstances.add(0,instance);
    }
  }
  RuleInstance defaultRuleInstance=new DefaultRule().createRuleInstance();
  myResultRuleInstances.add(defaultRuleInstance);
  prioritizedRuleInstances.add(defaultRuleInstance);
  RuleInstance tri=new TrailerRule().createRuleInstance();
  myResultRuleInstances.add(tri);
  prioritizedRuleInstances.add(tri);
}
