{
  final List<RuleInstance> prioritizedRuleInstances=new ArrayList<RuleInstance>();
  buildRuleInstanceLists(prioritizedRuleInstances);
  for (  ClassContentsEntry entry : myEntries) {
    if (entry instanceof ClassEntry) {
      ((ClassEntry)entry).rearrangeContents();
    }
  }
  matchPrioritizedRules(prioritizedRuleInstances);
  rearrangeRelatedItems(myEntries,myResultRuleInstances);
  if (myNestingLevel <= 1 || mySettings.isRearrangeInnerClasses()) {
    determineEmittedComments();
  }
  return myResultRuleInstances;
}
