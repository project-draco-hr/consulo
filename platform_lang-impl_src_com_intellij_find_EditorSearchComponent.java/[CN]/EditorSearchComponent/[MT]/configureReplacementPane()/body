{
  myReplacementPane=createLeadPane();
  myReplaceField=createTextField(myReplacementPane);
  DocumentListener replaceFieldListener=new DocumentListener(){
    @Override public void insertUpdate(    javax.swing.event.DocumentEvent documentEvent){
      replaceFieldDocumentChanged();
    }
    @Override public void removeUpdate(    javax.swing.event.DocumentEvent documentEvent){
      replaceFieldDocumentChanged();
    }
    @Override public void changedUpdate(    javax.swing.event.DocumentEvent documentEvent){
      replaceFieldDocumentChanged();
    }
  }
;
  myReplaceField.getDocument().addDocumentListener(replaceFieldListener);
  new ReplaceOnEnterAction(this,myReplaceField);
  myReplaceField.setText(myFindModel.getStringToReplace());
  add(myReplacementPane,BorderLayout.SOUTH);
  myReplaceButton=new JButton("Replace");
  myReplaceButton.setFocusable(false);
  myReplaceButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      replaceCurrent();
    }
  }
);
  myReplaceButton.setMnemonic('p');
  myReplaceAllButton=new JButton("Replace all");
  myReplaceAllButton.setFocusable(false);
  myReplaceAllButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      myLivePreviewController.performReplaceAll();
    }
  }
);
  myReplaceAllButton.setMnemonic('a');
  myExcludeButton=new JButton("");
  myExcludeButton.setFocusable(false);
  myExcludeButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      myLivePreviewController.exclude();
    }
  }
);
  myExcludeButton.setMnemonic('l');
  ActionGroup actionsGroup=new DefaultActionGroup(new ShowHistoryAction(myReplaceField,this));
  final ActionToolbar tb=ActionManager.getInstance().createActionToolbar("ReplaceBar",actionsGroup,true);
  tb.setLayoutPolicy(ActionToolbar.AUTO_LAYOUT_POLICY);
  final JComponent tbComponent=tb.getComponent();
  tbComponent.setOpaque(false);
  tbComponent.setBorder(null);
  myReplacementPane.add(tbComponent);
  myReplacementPane.add(myReplaceButton);
  myReplacementPane.add(myReplaceAllButton);
  myReplacementPane.add(myExcludeButton);
  setSmallerFontAndOpaque(myReplaceButton);
  setSmallerFontAndOpaque(myReplaceAllButton);
  setSmallerFontAndOpaque(myExcludeButton);
  Utils.setSmallerFont(myReplaceField);
  myReplaceField.putClientProperty("AuxEditorComponent",Boolean.TRUE);
  new VariantsCompletionAction(this,myReplaceField);
  new NextOccurrenceAction(this,myReplaceField);
  new PrevOccurrenceAction(this,myReplaceField);
}
