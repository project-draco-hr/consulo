{
  DefaultActionGroup actionGroup=new DefaultActionGroup("search bar",false);
  actionGroup.add(new ShowHistoryAction(mySearchFieldGetter,this));
  actionGroup.add(new PrevOccurrenceAction(this,mySearchFieldGetter));
  actionGroup.add(new NextOccurrenceAction(this,mySearchFieldGetter));
  actionGroup.add(new FindAllAction(this));
  actionGroup.add(new ToggleMultiline(this));
  actionGroup.add(new ToggleMatchCase(this));
  actionGroup.add(new ToggleRegex(this));
  myMatchInfoLabel=new JLabel();
  myClickToHighlightLabel=new LinkLabel("Click to highlight",null,new LinkListener(){
    @Override public void linkSelected(    LinkLabel aSource,    Object aLinkData){
      setMatchesLimit(Integer.MAX_VALUE);
      updateResults(true);
    }
  }
);
  myClickToHighlightLabel.setVisible(false);
  myActionsToolbar=ActionManager.getInstance().createActionToolbar(ActionPlaces.EDITOR_TOOLBAR,actionGroup,true);
  myActionsToolbar.setSecondaryActionsTooltip("More Options(" + ShowMoreOptions.SHORT_CUT + ")");
  actionGroup.addAction(new ToggleWholeWordsOnlyAction(this));
  if (secondaryActionsAvailable()) {
    actionGroup.addAction(new ToggleInCommentsAction(this)).setAsSecondary(true);
    actionGroup.addAction(new ToggleInLiteralsOnlyAction(this)).setAsSecondary(true);
  }
  actionGroup.addAction(new TogglePreserveCaseAction(this));
  actionGroup.addAction(new ToggleSelectionOnlyAction(this));
class MyCustomComponentDoNothingAction extends AnAction implements CustomComponentAction {
    private final JComponent c;
    MyCustomComponentDoNothingAction(    JComponent c){
      this.c=c;
      c.setBorder(IdeBorderFactory.createEmptyBorder(new Insets(0,10,0,0)));
    }
    @Override public void actionPerformed(    AnActionEvent e){
    }
    @Override public JComponent createCustomComponent(    Presentation presentation){
      return c;
    }
  }
  actionGroup.add(new MyCustomComponentDoNothingAction(myMatchInfoLabel));
  actionGroup.add(new MyCustomComponentDoNothingAction(myClickToHighlightLabel));
  myActionsToolbar.setLayoutPolicy(ActionToolbar.AUTO_LAYOUT_POLICY);
  myToolbarComponent=myActionsToolbar.getComponent();
  myToolbarComponent.setBorder(null);
  myToolbarComponent.setOpaque(false);
}
