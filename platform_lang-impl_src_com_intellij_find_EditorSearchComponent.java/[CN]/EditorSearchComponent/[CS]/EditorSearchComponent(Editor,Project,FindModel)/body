{
  super(new BorderLayout(0,0));
  myFindModel=findModel;
  GRADIENT_C1=getBackground();
  GRADIENT_C2=new Color(Math.max(0,GRADIENT_C1.getRed() - 0x18),Math.max(0,GRADIENT_C1.getGreen() - 0x18),Math.max(0,GRADIENT_C1.getBlue() - 0x18));
  myProject=project;
  myEditor=editor;
  mySearchResults=new SearchResults(myEditor,myProject);
  myDefaultBackground=new JTextField().getBackground();
  configureLeadPanel();
  new SwitchToFind(this);
  new SwitchToReplace(this);
  myFindModel.addObserver(new FindModel.FindModelObserver(){
    @Override public void findModelChanged(    FindModel findModel){
      String stringToFind=myFindModel.getStringToFind();
      if (!wholeWordsApplicable(stringToFind)) {
        myFindModel.setWholeWordsOnly(false);
      }
      updateUIWithFindModel();
      updateResults(true);
      syncFindModels(FindManager.getInstance(myProject).getFindInFileModel(),myFindModel);
    }
  }
);
  updateUIWithFindModel();
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    initLivePreview();
  }
}
