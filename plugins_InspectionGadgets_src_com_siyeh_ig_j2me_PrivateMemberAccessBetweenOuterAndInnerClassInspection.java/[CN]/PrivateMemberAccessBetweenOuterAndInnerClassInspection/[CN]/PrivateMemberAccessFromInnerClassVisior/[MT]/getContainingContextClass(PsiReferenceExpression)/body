{
  final PsiClass aClass=ClassUtils.getContainingClass(expression);
  if (aClass instanceof PsiAnonymousClass) {
    final PsiAnonymousClass anonymousClass=(PsiAnonymousClass)aClass;
    final PsiExpressionList args=anonymousClass.getArgumentList();
    if (args != null && PsiTreeUtil.isAncestor(args,expression,true)) {
      return ClassUtils.getContainingClass(aClass);
    }
  }
  return aClass;
}
