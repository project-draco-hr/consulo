{
  try {
    final TimestampStorage tsStorage=context.getBuildDataManager().getTimestampStorage(BUILDER_NAME);
    final List<File> files=new ArrayList<File>();
    final List<File> forms=new ArrayList<File>();
    context.processFiles(chunk,new FileProcessor(){
      public boolean apply(      Module module,      File file,      String sourceRoot) throws Exception {
        if (JAVA_SOURCES_FILTER.accept(file)) {
          if (isFileDirty(file,context,tsStorage)) {
            files.add(file);
          }
        }
 else         if (FORM_SOURCES_FILTER.accept(file)) {
          if (isFileDirty(file,context,tsStorage)) {
            forms.add(file);
          }
        }
        return true;
      }
    }
);
    return compile(context,chunk,files,forms);
  }
 catch (  Exception e) {
    throw new ProjectBuildException(e.getMessage(),e);
  }
}
