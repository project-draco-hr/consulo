{
  final CompilerMessage.Kind kind;
switch (diagnostic.getKind()) {
case ERROR:
    kind=BuildMessage.Kind.ERROR;
  myErrorCount++;
break;
case MANDATORY_WARNING:
case WARNING:
kind=BuildMessage.Kind.WARNING;
myWarningCount++;
break;
default :
kind=BuildMessage.Kind.INFO;
}
final String srcPath;
final JavaFileObject source=diagnostic.getSource();
if (source != null) {
srcPath=FileUtil.toSystemIndependentName(new File(source.toUri()).getPath());
}
 else {
srcPath=null;
}
myContext.processMessage(new CompilerMessage(JAVAC_COMPILER_NAME,kind,diagnostic.getMessage(Locale.US),srcPath,diagnostic.getStartPosition(),diagnostic.getEndPosition(),diagnostic.getPosition(),diagnostic.getLineNumber(),diagnostic.getColumnNumber()));
}
