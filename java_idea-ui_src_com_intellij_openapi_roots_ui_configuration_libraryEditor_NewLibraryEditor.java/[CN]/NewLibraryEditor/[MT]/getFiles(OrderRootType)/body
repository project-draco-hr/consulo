{
  List<VirtualFile> result=new ArrayList<VirtualFile>();
  for (  LightFilePointer pointer : myRoots.get(rootType)) {
    final VirtualFile file=pointer.getFile();
    if (file == null) {
      continue;
    }
    if (file.isDirectory()) {
      final Boolean recursively=myJarDirectories.get(file.getUrl());
      if (recursively != null) {
        LibraryImpl.collectJarFiles(file,result,recursively);
        continue;
      }
    }
    result.add(file);
  }
  return VfsUtil.toVirtualFileArray(result);
}
