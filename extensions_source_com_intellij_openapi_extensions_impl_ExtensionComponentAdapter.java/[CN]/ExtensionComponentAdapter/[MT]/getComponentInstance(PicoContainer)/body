{
  if (myComponentInstance == null) {
    if (!Element.class.equals(getComponentImplementation())) {
      Object componentInstance=getDelegate().getComponentInstance(container);
      final CompositeClassLoader classLoader=new CompositeClassLoader();
      if (myPluginDescriptor.getPluginClassLoader() != null) {
        classLoader.add(myPluginDescriptor.getPluginClassLoader());
      }
      XStream xStream=new XStream();
      xStream.setClassLoader(classLoader);
      if (componentInstance instanceof ReaderConfigurator) {
        ReaderConfigurator readerConfigurator=(ReaderConfigurator)componentInstance;
        readerConfigurator.configureReader(xStream);
      }
      Annotations.configureAliases(xStream,componentInstance.getClass());
      xStream.alias(myExtensionElement.getName(),componentInstance.getClass());
      myComponentInstance=xStream.unmarshal(new JDomReader(myExtensionElement),componentInstance);
    }
 else {
      myComponentInstance=myExtensionElement;
    }
    if (myComponentInstance instanceof PluginAware) {
      PluginAware pluginAware=(PluginAware)myComponentInstance;
      pluginAware.setPluginDescriptor(myPluginDescriptor);
    }
  }
  return myComponentInstance;
}
