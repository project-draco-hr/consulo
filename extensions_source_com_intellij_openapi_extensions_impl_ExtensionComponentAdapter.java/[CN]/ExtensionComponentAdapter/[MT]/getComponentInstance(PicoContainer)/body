{
  if (myComponentInstance == null) {
    if (!Element.class.equals(getComponentImplementation())) {
      final CompositeClassLoader classLoader=new CompositeClassLoader();
      if (myPluginDescriptor.getPluginClassLoader() != null) {
        classLoader.add(myPluginDescriptor.getPluginClassLoader());
      }
      XStream xStream=new XStream(new PropertyReflectionProvider(),new DefaultClassMapper(classLoader),new XppDriver());
      xStream.registerConverter(new ElementConverter());
      Object componentInstance=super.getComponentInstance(container);
      if (componentInstance instanceof ReaderConfigurator) {
        ReaderConfigurator readerConfigurator=(ReaderConfigurator)componentInstance;
        readerConfigurator.configureReader(xStream);
      }
      xStream.alias(myExtensionElement.getName(),componentInstance.getClass());
      myComponentInstance=xStream.unmarshal(new JDomExtensionsReader(myExtensionElement),componentInstance);
    }
 else {
      myComponentInstance=myExtensionElement;
    }
    if (myComponentInstance instanceof PluginAware) {
      PluginAware pluginAware=(PluginAware)myComponentInstance;
      pluginAware.setPluginDescriptor(myPluginDescriptor);
    }
  }
  return myComponentInstance;
}
