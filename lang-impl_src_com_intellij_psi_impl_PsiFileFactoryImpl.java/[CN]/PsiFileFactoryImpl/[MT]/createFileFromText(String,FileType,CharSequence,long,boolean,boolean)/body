{
  final LightVirtualFile virtualFile=new LightVirtualFile(name,fileType,text,modificationStamp);
  if (fileType instanceof LanguageFileType) {
    final PsiFile file=trySetupPsiForFile(false,virtualFile,((LanguageFileType)fileType).getLanguage(),physical,markAsCopy);
    if (file != null)     return file;
  }
  final SingleRootFileViewProvider singleRootFileViewProvider=new SingleRootFileViewProvider(myManager,virtualFile,physical);
  final PsiPlainTextFileImpl plainTextFile=new PsiPlainTextFileImpl(singleRootFileViewProvider);
  if (markAsCopy)   CodeEditUtil.setNodeGenerated(plainTextFile.getNode(),true);
  return plainTextFile;
}
