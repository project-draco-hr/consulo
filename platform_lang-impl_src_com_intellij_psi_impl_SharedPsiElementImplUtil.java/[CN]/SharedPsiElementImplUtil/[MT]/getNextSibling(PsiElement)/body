{
  if (element instanceof PsiFile) {
    final FileViewProvider viewProvider=((PsiFile)element).getViewProvider();
    element=viewProvider.getPsi(viewProvider.getBaseLanguage());
  }
  if (element == null)   return null;
  final PsiElement parent=element.getParent();
  if (parent == null)   return null;
  final PsiElement[] children=parent.getChildren();
  final int index=getChildIndex(children,element);
  return 0 <= index && index < children.length - 1 ? children[index + 1] : null;
}
