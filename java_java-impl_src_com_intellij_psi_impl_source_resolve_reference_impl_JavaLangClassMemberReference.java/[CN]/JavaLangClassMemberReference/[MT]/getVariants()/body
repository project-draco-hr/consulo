{
  final Type type=getType();
  final PsiClass psiClass=getPsiClass();
  if (psiClass != null && type != null) {
    if (type == Type.DECLARED_FIELD) {
      return psiClass.getFields();
    }
 else     if (type == Type.DECLARED_METHOD) {
      final List<LookupElementBuilder> elements=new ArrayList<LookupElementBuilder>();
      for (      PsiMethod method : psiClass.getMethods()) {
        elements.add(JavaLookupElementBuilder.forMethod(method,PsiSubstitutor.EMPTY).setInsertHandler(this));
      }
      return elements.toArray();
    }
  }
  return EMPTY_ARRAY;
}
