def addmargins(blocks):
    'Adds empty blocks for vertical spacing.\n\n    This groups bullets, options, and definitions together with no vertical\n    space between them, and adds an empty block between all other blocks.\n    '
    i = 1
    while (i < len(blocks)):
        if ((blocks[i]['type'] == blocks[(i - 1)]['type']) and (blocks[i]['type'] in ('bullet', 'option', 'field', 'definition'))):
            i += 1
        else:
            blocks.insert(i, dict(lines=[''], indent=0, type='margin'))
            i += 2
    return blocks
