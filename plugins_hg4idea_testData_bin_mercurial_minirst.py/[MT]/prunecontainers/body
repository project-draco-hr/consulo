def prunecontainers(blocks, keep):
    "Prune unwanted containers.\n\n    The blocks must have a 'type' field, i.e., they should have been\n    run through findliteralblocks first.\n    "
    pruned = []
    i = 0
    while ((i + 1) < len(blocks)):
        if ((blocks[i]['type'] == 'paragraph') and blocks[i]['lines'][0].startswith('.. container::')):
            indent = blocks[i]['indent']
            adjustment = (blocks[(i + 1)]['indent'] - indent)
            containertype = blocks[i]['lines'][0][15:]
            prune = (containertype not in keep)
            if prune:
                pruned.append(containertype)
            del blocks[i]
            j = i
            while ((j < len(blocks)) and (blocks[j]['indent'] > indent)):
                if prune:
                    del blocks[j]
                    i -= 1
                else:
                    blocks[j]['indent'] -= adjustment
                    j += 1
        i += 1
    return (blocks, pruned)
