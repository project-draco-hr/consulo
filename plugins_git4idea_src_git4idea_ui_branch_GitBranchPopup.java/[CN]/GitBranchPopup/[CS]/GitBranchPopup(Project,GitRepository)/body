{
  myProject=project;
  myCurrentRepository=currentRepository;
  myRepositoryManager=GitRepositoryManager.getInstance(project);
  myVcs=GitVcs.getInstance(project);
  myVcsSettings=GitVcsSettings.getInstance(myProject);
  myMultiRootBranchConfig=new GitMultiRootBranchConfig(myRepositoryManager.getRepositories());
  String title=createPopupTitle(currentRepository);
  myPopup=(ListPopupImpl)JBPopupFactory.getInstance().createActionGroupPopup(title,createActions(),SimpleDataContext.getProjectContext(project),JBPopupFactory.ActionSelectionAid.SPEEDSEARCH,true);
  initBranchSyncPolicyIfNotInitialized();
  setCurrentBranchInfo();
  warnThatBranchesDivergedIfNeeded();
}
