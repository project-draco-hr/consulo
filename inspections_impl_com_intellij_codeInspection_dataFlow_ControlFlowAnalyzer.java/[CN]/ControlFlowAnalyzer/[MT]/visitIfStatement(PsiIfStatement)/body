{
  startElement(statement);
  PsiExpression condition=statement.getCondition();
  PsiStatement thenStatement=statement.getThenBranch();
  PsiStatement elseStatement=statement.getElseBranch();
  int offset=elseStatement != null ? getStartOffset(elseStatement) : getEndOffset(statement);
  if (condition != null) {
    condition.accept(this);
    generateBoxingUnboxingInstructionFor(condition,PsiType.BOOLEAN);
    addInstruction(myInstructionFactory.createConditionalGotoInstruction(offset,true,condition));
  }
  if (thenStatement != null) {
    thenStatement.accept(this);
  }
  if (elseStatement != null) {
    offset=getEndOffset(statement);
    Instruction instruction=new GotoInstruction(offset);
    addInstruction(instruction);
    elseStatement.accept(this);
  }
  finishElement(statement);
}
