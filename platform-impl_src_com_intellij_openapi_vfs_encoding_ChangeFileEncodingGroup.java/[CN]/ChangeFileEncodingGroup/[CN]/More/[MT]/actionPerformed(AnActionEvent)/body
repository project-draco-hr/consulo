{
  final DefaultActionGroup group=new DefaultActionGroup();
  Charset[] charsets=CharsetToolkit.getAvailableCharsets();
  for (  Charset charset : charsets) {
    group.add(new ChangeFileEncodingTo(myVirtualFile,charset));
  }
  ChooseEncodingDialog dialog=new ChooseEncodingDialog(charsets,myVirtualFile.getCharset(),myVirtualFile);
  dialog.show();
  Charset charset=dialog.getChosen();
  if (dialog.isOK() && charset != null) {
    EncodingManager.getInstance().setEncoding(myVirtualFile,charset);
  }
}
