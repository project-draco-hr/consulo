{
  ComboBoxButton button=(ComboBoxButton)e.getPresentation().getClientProperty(CUSTOM_COMPONENT_PROPERTY);
  if (button == null) {
    Component contextComponent=e.getData(PlatformDataKeys.CONTEXT_COMPONENT);
    JRootPane rootPane=UIUtil.getParentOfType(JRootPane.class,contextComponent);
    if (rootPane != null) {
      button=(ComboBoxButton)JBSwingUtilities.uiTraverser().bfsTraversal(rootPane).filter(new Condition<Component>(){
        @Override public boolean value(        Component component){
          return component instanceof ComboBoxButton && ((ComboBoxButton)component).getMyAction() == ComboBoxAction.this;
        }
      }
).first();
    }
    if (button == null)     return;
  }
  if (!button.isShowing())   return;
  button.showPopup();
}
