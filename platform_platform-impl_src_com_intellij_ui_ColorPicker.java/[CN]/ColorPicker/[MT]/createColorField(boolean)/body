{
  final NumberDocument doc=new NumberDocument(hex);
  int lafFix=UIUtil.isUnderWindowsLookAndFeel() || UIUtil.isUnderDarcula() ? 1 : 0;
  UIManager.LookAndFeelInfo info=LafManager.getInstance().getCurrentLookAndFeel();
  if (info != null && (info.getName().startsWith("IDEA") || info.getName().equals("Windows Classic")))   lafFix=1;
  final JTextField field=new JTextField(doc,"",(hex ? 5 : 2) + lafFix);
  field.setSize(50,-1);
  doc.setSource(field);
  field.getDocument().addDocumentListener(this);
  field.addFocusListener(new FocusAdapter(){
    @Override public void focusGained(    final FocusEvent e){
      field.selectAll();
    }
  }
);
  return field;
}
