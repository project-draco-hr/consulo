{
  super(project,editor,point,type,expressionInfo.getTextRange());
  myEvaluator=evaluator;
  myDebugSession=session;
  myExpression=XDebuggerEvaluateActionHandler.getExpressionText(expressionInfo,editor.getDocument());
  myValueName=XDebuggerEvaluateActionHandler.getDisplayText(expressionInfo,editor.getDocument());
  myExpressionInfo=expressionInfo;
  VirtualFile file;
  ConsoleView consoleView=ConsoleViewImpl.CONSOLE_VIEW_IN_EDITOR_VIEW.get(editor);
  if (consoleView instanceof LanguageConsoleView) {
    LanguageConsoleImpl console=((LanguageConsoleView)consoleView).getConsole();
    file=console.getHistoryViewer() == editor ? console.getVirtualFile() : null;
  }
 else {
    file=FileDocumentManager.getInstance().getFile(editor.getDocument());
  }
  myExpressionPosition=file != null ? XDebuggerUtil.getInstance().createPositionByOffset(file,expressionInfo.getTextRange().getStartOffset()) : null;
}
