{
  myEvaluator.evaluate(myExpression,new XEvaluationCallbackBase(){
    @Override public void evaluated(    @NotNull final XValue result){
      result.computePresentation(new XValueNodePresentationConfigurator.ConfigurableXValueNodeImpl(){
        private XFullValueEvaluator myFullValueEvaluator;
        @Override public void applyPresentation(        @Nullable Icon icon,        @NotNull XValuePresentation valuePresenter,        boolean hasChildren){
          if (isHintHidden()) {
            return;
          }
          SimpleColoredText text=new SimpleColoredText();
          text.append(myValueName,XDebuggerUIConstants.VALUE_NAME_ATTRIBUTES);
          XValueNodeImpl.buildText(valuePresenter,text);
          if (!hasChildren) {
            SimpleColoredComponent component=HintUtil.createInformationComponent();
            text.appendToComponent(component);
            if (myFullValueEvaluator != null) {
              component.append(myFullValueEvaluator.getLinkText(),XDebuggerTreeNodeHyperlink.TEXT_ATTRIBUTES,new Consumer<MouseEvent>(){
                @Override public void consume(                MouseEvent event){
                  DebuggerUIUtil.showValuePopup(myFullValueEvaluator,event,getProject(),getEditor());
                }
              }
);
              LinkMouseListenerBase.installSingleTagOn(component);
            }
            showHint(component);
          }
 else           if (getType() == ValueHintType.MOUSE_CLICK_HINT) {
            showTree(result);
          }
 else {
            JComponent component=createExpandableHintComponent(text,new Runnable(){
              @Override public void run(){
                showTree(result);
              }
            }
);
            showHint(component);
          }
        }
        @Override public void setFullValueEvaluator(        @NotNull XFullValueEvaluator fullValueEvaluator){
          myFullValueEvaluator=fullValueEvaluator;
        }
        @Override public boolean isObsolete(){
          return isHintHidden();
        }
      }
,XValuePlace.TOOLTIP);
    }
    @Override public void errorOccurred(    @NotNull final String errorMessage){
      LOG.debug("Cannot evaluate '" + myExpression + "':"+ errorMessage);
    }
  }
,myExpressionPosition);
}
