{
  List<VirtualFile> readOnlyFiles=new ArrayList<VirtualFile>();
  List<VirtualFile> updatedFiles=new ArrayList<VirtualFile>();
  for (int i=0; i < files.length; i++) {
    VirtualFile file=files[i];
    if (file.exists()) {
      if (!file.isWritable()) {
        readOnlyFiles.add(file);
      }
      if (modificationStamps[i] != file.getModificationStamp()) {
        updatedFiles.add(file);
      }
    }
  }
  return new OperationStatus(readOnlyFiles.isEmpty() ? VirtualFile.EMPTY_ARRAY : readOnlyFiles.toArray(new VirtualFile[readOnlyFiles.size()]),updatedFiles.isEmpty() ? VirtualFile.EMPTY_ARRAY : updatedFiles.toArray(new VirtualFile[updatedFiles.size()]));
}
