{
  final AndroidDebugBridge bridge=myFacet.getDebugBridge();
  IDevice[] devices=bridge != null ? getFilteredDevices(bridge) : EMPTY_DEVICE_ARRAY;
  if (!Arrays.equals(myOldDevices,devices)) {
    myOldDevices=devices;
    final IDevice[] selectedDevices=getSelectedDevices();
    final TIntArrayList selectedRows=new TIntArrayList();
    for (int i=0; i < devices.length; i++) {
      if (ArrayUtil.indexOf(selectedDevices,devices[i]) >= 0) {
        selectedRows.add(i);
      }
    }
    myProcessSelectionFlag=false;
    myDeviceTable.setModel(new MyDeviceTableModel(devices));
    if (selectedRows.size() == 0 && devices.length > 0) {
      myDeviceTable.getSelectionModel().setSelectionInterval(0,0);
    }
    for (    int selectedRow : selectedRows.toNativeArray()) {
      if (selectedRow < devices.length) {
        myDeviceTable.getSelectionModel().addSelectionInterval(selectedRow,selectedRow);
      }
    }
    fireSelectedDevicesChanged();
    myProcessSelectionFlag=true;
  }
}
