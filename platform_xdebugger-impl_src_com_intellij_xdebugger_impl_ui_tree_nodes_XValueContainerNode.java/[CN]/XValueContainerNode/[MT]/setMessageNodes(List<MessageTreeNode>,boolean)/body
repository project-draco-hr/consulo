{
  myCachedAllChildren=null;
  List<MessageTreeNode> allMessageChildren=ContainerUtil.concat(myMessageChildren != null ? myMessageChildren : Collections.<MessageTreeNode>emptyList(),myTemporaryMessageChildren != null ? myTemporaryMessageChildren : Collections.<MessageTreeNode>emptyList());
  final int[] indices=getNodesIndices(allMessageChildren);
  final TreeNode[] nodes=getChildNodes(indices);
  myMessageChildren=null;
  myTemporaryMessageChildren=null;
  fireNodesRemoved(indices,nodes);
  if (!temporary) {
    myMessageChildren=messages;
  }
 else {
    myTemporaryMessageChildren=messages;
  }
  myCachedAllChildren=null;
  fireNodesInserted(messages);
}
