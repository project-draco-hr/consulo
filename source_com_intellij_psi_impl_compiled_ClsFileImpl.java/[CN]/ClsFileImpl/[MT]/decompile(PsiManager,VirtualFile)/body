{
  final FileViewProvider provider=((PsiManagerImpl)manager).getFileManager().findViewProvider(file);
  ClsFileImpl psiFile=null;
  if (provider != null) {
    psiFile=(ClsFileImpl)provider.getPsi(provider.getBaseLanguage());
  }
  if (psiFile == null) {
    psiFile=new ClsFileImpl((PsiManagerImpl)manager,new SingleRootFileViewProvider(manager,file),true);
  }
  StringBuffer buffer=new StringBuffer();
  psiFile.appendMirrorText(0,buffer);
  return buffer.toString();
}
