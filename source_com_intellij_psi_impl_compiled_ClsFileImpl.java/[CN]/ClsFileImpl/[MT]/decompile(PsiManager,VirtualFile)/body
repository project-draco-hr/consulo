{
  final FileViewProvider provider=((PsiManagerImpl)manager).getFileManager().findCachedViewProvider(file);
  final ClsFileImpl psiFile;
  if (provider != null) {
    psiFile=(ClsFileImpl)provider.getPsi(provider.getBaseLanguage());
  }
 else {
    psiFile=new ClsFileImpl((PsiManagerImpl)manager,new SingleRootFileViewProvider(manager,file),true);
  }
  StringBuffer buffer=new StringBuffer();
  psiFile.appendMirrorText(0,buffer);
  return buffer.toString();
}
