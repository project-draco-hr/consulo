{
  try {
    final BytePointer ptr=new BytePointer(classFileData.getData(),6);
    int majorVersion=ClsUtil.readU2(ptr);
    if (majorVersion < MAX_CLASS_FILE_MAJOR_VERSION) {
      final int attributesOffset=classFileData.getOffsetOfAttributesSection();
      final BytePointer attrPtr=classFileData.findAttribute(attributesOffset,"net.sourceforge.Retroweaver");
      if (attrPtr != null) {
        ptr.offset+=4;
        majorVersion=ClsUtil.readU2(ptr);
      }
    }
    return calcLanguageLevelBasedOnVersion(majorVersion);
  }
 catch (  ClsFormatException e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(e);
    }
    return defaultLanguageLevel;
  }
}
