{
  long id=getRepositoryId();
  if (myClass == null) {
    if (id >= 0 && !myContentsUnloaded) {
      long[] classIds=getRepositoryManager().getFileView().getClasses(id);
      LOG.assertTrue(classIds.length == 1,"Wrong number of compiled classes in repository: " + classIds.length);
      myClass=(ClsClassImpl)getRepositoryElementsManager().findOrCreatePsiElementById(classIds[0]);
    }
 else {
      byte[] bytes=null;
      if (myContent != null) {
        try {
          bytes=myContent.getBytes();
        }
 catch (        IOException e) {
        }
      }
      final ClassFileData fileData=bytes != null ? new ClassFileData(bytes,getVirtualFile()) : new ClassFileData(getVirtualFile());
      myClass=new ClsClassImpl(myManager,this,fileData);
      myContentsUnloaded=false;
    }
  }
  return new PsiClass[]{myClass};
}
