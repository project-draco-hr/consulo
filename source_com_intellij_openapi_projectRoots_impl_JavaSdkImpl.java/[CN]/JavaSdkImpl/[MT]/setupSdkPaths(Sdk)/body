{
  final File jdkHome=new File(sdk.getHomePath());
  VirtualFile[] classes=findClasses(jdkHome,false);
  VirtualFile sources=findSources(jdkHome);
  VirtualFile docs=findDocs(jdkHome,"docs/api");
  final SdkModificator sdkModificator=sdk.getSdkModificator();
  for (  VirtualFile aClass : classes) {
    sdkModificator.addRoot(aClass,ProjectRootType.CLASS);
  }
  if (sources != null) {
    sdkModificator.addRoot(sources,ProjectRootType.SOURCE);
  }
  if (docs != null) {
    sdkModificator.addRoot(docs,ProjectRootType.JAVADOC);
  }
 else   if (SystemInfo.isMac) {
    VirtualFile commonDocs=findDocs(jdkHome,"docs");
    if (commonDocs == null) {
      commonDocs=findInJar(new File(jdkHome,"docs.jar"),"doc/api");
    }
    if (commonDocs != null) {
      sdkModificator.addRoot(commonDocs,ProjectRootType.JAVADOC);
    }
    VirtualFile appleDocs=findDocs(jdkHome,"appledocs");
    if (appleDocs == null) {
      appleDocs=findInJar(new File(jdkHome,"appledocs.jar"),"appledoc/api");
    }
    if (appleDocs != null) {
      sdkModificator.addRoot(appleDocs,ProjectRootType.JAVADOC);
    }
  }
  sdkModificator.commitChanges();
}
