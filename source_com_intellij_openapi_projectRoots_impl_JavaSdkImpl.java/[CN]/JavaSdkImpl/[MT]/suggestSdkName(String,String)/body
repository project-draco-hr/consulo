{
  final String suggestedName;
  if (currentSdkName != null && currentSdkName.length() > 0) {
    final Matcher matcher=myVersionStringPattern.matcher(currentSdkName);
    final boolean replaceNameWithVersion=matcher.matches();
    if (replaceNameWithVersion) {
      final String versionString=getVersionString(sdkHome);
      suggestedName=versionString == null ? currentSdkName : matcher.replaceFirst("$1" + versionString + "$3");
    }
 else {
      suggestedName=currentSdkName;
    }
  }
 else {
    String versionString=getVersionString(sdkHome);
    if (versionString != null) {
      if (versionString.startsWith(JAVA_VERSION_PREFIX)) {
        versionString=versionString.substring(JAVA_VERSION_PREFIX.length());
        if (versionString.startsWith("\"") && versionString.endsWith("\"")) {
          versionString=versionString.substring(1,versionString.length() - 1);
        }
        int dotIdx=versionString.indexOf('.');
        if (dotIdx > 0) {
          try {
            int major=Integer.parseInt(versionString.substring(0,dotIdx));
            int minorDot=versionString.indexOf('.',dotIdx + 1);
            if (minorDot > 0) {
              int minor=Integer.parseInt(versionString.substring(dotIdx + 1,minorDot));
              versionString=String.valueOf(major) + "." + String.valueOf(minor);
            }
          }
 catch (          NumberFormatException e) {
          }
        }
      }
      suggestedName=versionString;
    }
 else {
      suggestedName=ProjectBundle.message("sdk.java.unknown.name");
    }
  }
  return suggestedName;
}
