{
  String versionString;
  if (myCachedVersionStrings.containsKey(sdkHome)) {
    return myCachedVersionStrings.get(sdkHome);
  }
 else {
    versionString=getVersionStringImpl(sdkHome);
  }
  if (versionString != null && versionString.length() == 0) {
    versionString=null;
  }
  if (versionString == null) {
    if (ApplicationManager.getApplication().isHeadlessEnvironment()) {
      System.err.println(ProjectBundle.message("sdk.java.corrupt.error",sdkHome));
      System.exit(1);
    }
 else {
      Messages.showMessageDialog(ProjectBundle.message("sdk.java.corrupt.error",sdkHome),ProjectBundle.message("sdk.java.corrupt.title"),Messages.getErrorIcon());
    }
  }
 else {
    myCachedVersionStrings.put(sdkHome,versionString);
  }
  return versionString;
}
