{
  if (psiElement instanceof PsiJavaFile) {
    final PsiJavaFile psiJavaFile=(PsiJavaFile)psiElement;
    if (psiJavaFile.getViewProvider().getBaseLanguage() == StdLanguages.JAVA) {
      final PsiClass[] psiClasses=psiJavaFile.getClasses();
      if (psiClasses.length == 1) {
        return psiClasses[0];
      }
    }
  }
  if (psiElement instanceof PsiClass)   return psiElement;
  final PsiFile containingFile=psiElement.getContainingFile();
  if (containingFile != null)   return containingFile;
  return psiElement.isPhysical() ? psiElement : null;
}
