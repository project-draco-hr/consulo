{
  super.update(e);
  if (e.getPresentation().isEnabled() && (getModel().getSourceDir() instanceof BackgroundOperatingDiffElement || getModel().getTargetDir() instanceof BackgroundOperatingDiffElement)) {
    List<DirDiffElement> elements=mySelectedOnly ? getModel().getSelectedElements() : getModel().getElements();
synchronized (elements) {
      for (      DirDiffElement dirDiffElement : elements) {
        if ((dirDiffElement.getSource() == null || dirDiffElement.getSource().isOperationsEnabled()) && (dirDiffElement.getTarget() == null || dirDiffElement.getTarget().isOperationsEnabled())) {
          e.getPresentation().setEnabled(true);
          return;
        }
      }
    }
    e.getPresentation().setEnabled(false);
  }
}
