{
  LOG.debug("update for: " + s);
  final VirtualFile vf=myLfs.refreshAndFindFileByIoFile(new File(s));
  final ItemLatestState state;
  final DiffProvider diffProvider=myVcsRoot.vcs.getDiffProvider();
  if (vf == null) {
    state=diffProvider.getLastRevision(FilePathImpl.createForDeletedFile(new File(s),false));
  }
 else {
    state=diffProvider.getLastRevision(vf);
  }
  final VcsRevisionNumber newNumber=((state != null) && state.isItemExists()) ? state.getNumber() : UNKNOWN;
  final Pair<VcsRoot,VcsRevisionNumber> oldPair;
synchronized (myLock) {
    oldPair=myData.get(s);
    myData.put(s,new Pair<VcsRoot,VcsRevisionNumber>(myVcsRoot,newNumber));
  }
  if ((oldPair == null) || (oldPair != null) && (oldPair.getSecond().compareTo(newNumber) != 0)) {
    LOG.debug("refresh triggered by " + s);
    myVcsRoot.vcs.getProject().getMessageBus().syncPublisher(REMOTE_VERSION_CHANGED).run();
  }
}
