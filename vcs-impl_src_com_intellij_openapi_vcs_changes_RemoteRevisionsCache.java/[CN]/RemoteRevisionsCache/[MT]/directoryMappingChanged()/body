{
synchronized (myLock) {
    for (    Map.Entry<String,Pair<VcsRoot,VcsRevisionNumber>> entry : myData.entrySet()) {
      final String key=entry.getKey();
      final VcsRoot storedVcsRoot=entry.getValue().getFirst();
      final VirtualFile vf=myLfs.refreshAndFindFileByIoFile(new File(key));
      final AbstractVcs newVcs=(vf == null) ? null : myVcsManager.getVcsFor(vf);
      final VirtualFile newRoot=getRootForPath(key);
      final VcsRoot newVcsRoot=new VcsRoot(newVcs,newRoot);
      if (newVcs == null) {
        myData.remove(key);
        getQueue(storedVcsRoot).forceRemove(key);
      }
 else       if (!storedVcsRoot.equals(newVcsRoot)) {
        switchVcs(storedVcsRoot,newVcsRoot,key);
      }
    }
  }
}
