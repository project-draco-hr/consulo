{
  @NonNls final String protocol=url.getProtocol();
  try {
    if (protocol.equals("jar")) {
      return openJarStream(url);
    }
    return url.openStream();
  }
 catch (  FileNotFoundException ex) {
    if (protocol.equals("file") || protocol.equals("jar")) {
      String file=url.getFile();
      if (file.startsWith("/")) {
        InputStream resourceStream=URLUtil.class.getResourceAsStream(file);
        if (resourceStream != null)         return resourceStream;
      }
    }
    throw ex;
  }
}
