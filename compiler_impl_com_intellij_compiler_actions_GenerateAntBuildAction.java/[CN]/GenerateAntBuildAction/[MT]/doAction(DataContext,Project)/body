{
  ((CompilerConfigurationImpl)CompilerConfiguration.getInstance(project)).convertPatterns();
  final GenerateAntBuildDialog dialog=new GenerateAntBuildDialog(project);
  dialog.show();
  if (dialog.isOK()) {
    final String[] names=dialog.getRepresentativeModuleNames();
    final GenerationOptionsImpl genOptions=new GenerationOptionsImpl(project,dialog.isGenerateSingleFileBuild(),dialog.isFormsCompilationEnabled(),dialog.isBackupFiles(),dialog.isForceTargetJdk(),dialog.isRuntimeClasspathInlined(),dialog.isIdeaHomeGenerated(),names);
    if (!validateGenOptions(project,genOptions)) {
      return;
    }
    generate(project,genOptions);
  }
}
