{
  if (modifiedToOriginal.isEmpty()) {
    return items;
  }
  @SuppressWarnings("unchecked") final ColumnInfo<T,Object>[] columns=getColumnInfos();
  modifiedToOriginal.forEachEntry(new TObjectObjectProcedure<T,T>(){
    @Override public boolean execute(    T newItem,    @Nullable T oldItem){
      if (oldItem == null) {
        return true;
      }
      for (      ColumnInfo<T,Object> column : columns) {
        if (column.isCellEditable(newItem)) {
          column.setValue(oldItem,column.valueOf(newItem));
        }
      }
      if (editor.itemEditor instanceof DialogItemEditor) {
        ((DialogItemEditor<T>)editor.itemEditor).applyEdited(oldItem,newItem);
      }
      items.set(ContainerUtil.indexOfIdentity(items,newItem),oldItem);
      return true;
    }
  }
);
  modifiedToOriginal.clear();
  return items;
}
