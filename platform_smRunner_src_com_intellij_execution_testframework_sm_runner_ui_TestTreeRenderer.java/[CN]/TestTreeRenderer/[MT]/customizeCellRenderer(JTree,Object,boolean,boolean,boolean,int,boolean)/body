{
  myRow=row;
  myDurationWidth=-1;
  final DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  final Object userObj=node.getUserObject();
  if (userObj instanceof SMTRunnerNodeDescriptor) {
    final SMTRunnerNodeDescriptor desc=(SMTRunnerNodeDescriptor)userObj;
    final SMTestProxy testProxy=desc.getElement();
    if (testProxy instanceof SMTestProxy.SMRootTestProxy) {
      SMTestProxy.SMRootTestProxy rootTestProxy=(SMTestProxy.SMRootTestProxy)testProxy;
      if (node.isLeaf()) {
        TestsPresentationUtil.formatRootNodeWithoutChildren(rootTestProxy,this);
      }
 else {
        TestsPresentationUtil.formatRootNodeWithChildren(rootTestProxy,this);
      }
      if (myAdditionalRootFormatter != null) {
        myAdditionalRootFormatter.format(rootTestProxy,this);
      }
    }
 else {
      TestsPresentationUtil.formatTestProxy(testProxy,this);
    }
    if (TestConsoleProperties.SHOW_INLINE_STATISTICS.value(myConsoleProperties)) {
      String durationString=testProxy.getDurationString(myConsoleProperties);
      if (durationString != null) {
        durationString="  " + durationString;
        myDurationWidth=getFontMetrics(getFont()).stringWidth(durationString);
        if (((TestTreeView)myTree).isExpandableHandlerVisibleForCurrentRow(myRow)) {
          append(durationString);
        }
      }
    }
    return;
  }
  final String text=node.toString();
  append(text != null ? text : SPACE_STRING,SimpleTextAttributes.GRAYED_ATTRIBUTES);
}
