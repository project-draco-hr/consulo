{
  final List<URL> urls=new ArrayList<URL>();
  final String baseDir=computeAttributeValue(BASEDIR_ANT_REFERENCE);
  final String classpath=getClassPath();
  if (classpath != null) {
    final PathTokenizer tokenizer=new PathTokenizer(classpath);
    while (tokenizer.hasMoreTokens()) {
      addUrl(baseDir,urls,tokenizer.nextToken());
    }
  }
  final List<File> files=new ArrayList<File>();
  final HashSet<AntFilesProvider> processed=new HashSet<AntFilesProvider>();
  for (  PsiReference reference : getReferences()) {
    ProgressManager.checkCanceled();
    if (reference instanceof AntRefIdReference) {
      final PsiElement resolved=reference.resolve();
      if (resolved instanceof AntFilesProvider) {
        files.addAll(((AntFilesProvider)resolved).getFiles(processed));
      }
    }
  }
  for (  AntElement antElement : getChildren()) {
    ProgressManager.checkCanceled();
    if (antElement instanceof AntFilesProvider) {
      files.addAll(((AntFilesProvider)antElement).getFiles(processed));
    }
  }
  for (  File file : files) {
    try {
      urls.add(toLocalURL(file));
    }
 catch (    MalformedURLException e) {
    }
  }
  return urls;
}
