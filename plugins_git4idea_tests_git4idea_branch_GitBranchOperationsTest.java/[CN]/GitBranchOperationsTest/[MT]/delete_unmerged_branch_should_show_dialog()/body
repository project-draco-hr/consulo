{
  prepareBranchWithCommit("unmerged_branch",myUltimate,myCommunity,myContrib);
  final AtomicBoolean dialogShown=new AtomicBoolean();
  myDialogManager.registerDialogHandler(GitBranchIsNotFullyMergedDialog.class,new TestDialogHandler<GitBranchIsNotFullyMergedDialog>(){
    @Override public int handleDialog(    GitBranchIsNotFullyMergedDialog dialog){
      dialogShown.set(true);
      return DialogWrapper.CANCEL_EXIT_CODE;
    }
  }
);
  doDeleteBranch("unmerged_branch");
  assertTrue(dialogShown.get());
}
