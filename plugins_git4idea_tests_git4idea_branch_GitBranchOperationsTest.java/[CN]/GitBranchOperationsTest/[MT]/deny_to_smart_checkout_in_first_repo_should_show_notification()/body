{
  prepareLocalChangesAndBranchWithSameModifiedFilesWithoutConflicts(myUltimate);
  branch(myCommunity,"feature");
  branch(myContrib,"feature");
  myDialogManager.registerDialogHandler(GitWouldBeOverwrittenByCheckoutDialog.class,new TestDialogHandler<GitWouldBeOverwrittenByCheckoutDialog>(){
    @Override public int handleDialog(    GitWouldBeOverwrittenByCheckoutDialog dialog){
      return DialogWrapper.CANCEL_EXIT_CODE;
    }
  }
);
  doCheckout("feature",null);
  assertNotify(NotificationType.ERROR,"Couldn't checkout feature",stripHtmlAndBreaks("Local changes would be overwritten by checkout." + "Stash or commit them before checking out a branch."));
  assertBranch("master");
}
