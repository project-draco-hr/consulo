{
  if (selected == null)   return null;
  for (  AbstractTreeNode selectedElement : selected) {
    Object element=selectedElement.getValue();
    if (DataConstants.VIRTUAL_FILE.equals(dataName)) {
      if (element instanceof ResourceBundle) {
        return new ResourceBundleAsVirtualFile((ResourceBundle)element);
      }
    }
    if (DataConstants.PSI_ELEMENT_ARRAY.equals(dataName)) {
      if (element instanceof ResourceBundle) {
        List<PropertiesFile> propertiesFiles=((ResourceBundle)element).getPropertiesFiles(myProject);
        return propertiesFiles.toArray(PsiElement.EMPTY_ARRAY);
      }
    }
    if (DataConstants.DELETE_ELEMENT_PROVIDER.equals(dataName)) {
      if (element instanceof ResourceBundle) {
        return new ResourceBundleDeleteProvider((ResourceBundle)element);
      }
    }
  }
  if (DataConstantsEx.RESOURCE_BUNDLE_ARRAY.equals(dataName)) {
    final List<ResourceBundle> selectedElements=new ArrayList<ResourceBundle>();
    for (    AbstractTreeNode node : selected) {
      final Object value=node.getValue();
      if (value instanceof ResourceBundle) {
        selectedElements.add((ResourceBundle)value);
      }
    }
    return selectedElements.isEmpty() ? null : selectedElements.toArray(new ResourceBundle[selectedElements.size()]);
  }
  return null;
}
