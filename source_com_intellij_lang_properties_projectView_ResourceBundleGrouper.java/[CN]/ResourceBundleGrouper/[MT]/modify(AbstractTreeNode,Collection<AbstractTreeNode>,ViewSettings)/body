{
  if (parent instanceof ResourceBundleNode)   return children;
  List<AbstractTreeNode> result=new ArrayList<AbstractTreeNode>();
  Set<ResourceBundle> resourceBundles=new THashSet<ResourceBundle>();
  for (  final AbstractTreeNode child : children) {
    Object f=child.getValue();
    if (f instanceof PropertiesFile) {
      PropertiesFile propertiesFile=(PropertiesFile)f;
      ResourceBundle resourceBundle=propertiesFile.getResourceBundle();
      if (resourceBundle.getPropertiesFiles(myProject).size() != 1) {
        if (resourceBundles.add(resourceBundle)) {
          result.add(new ResourceBundleNode(propertiesFile.getProject(),resourceBundle,settings));
        }
        continue;
      }
    }
    result.add(child);
  }
  return result;
}
