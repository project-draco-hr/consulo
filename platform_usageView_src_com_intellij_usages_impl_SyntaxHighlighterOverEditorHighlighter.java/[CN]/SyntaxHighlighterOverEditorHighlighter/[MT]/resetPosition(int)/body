{
  if (lexer instanceof LexerEditorHighlighterLexer) {
    ((LexerEditorHighlighterLexer)lexer).resetPosition(startOffset);
    HighlighterIterator iterator=((LexerEditorHighlighterLexer)lexer).getHighlighterIterator();
    if (iterator instanceof LayeredHighlighterIterator) {
      layeredHighlighterIterator=(LayeredHighlighterIterator)iterator;
    }
 else {
      layeredHighlighterIterator=null;
    }
  }
 else {
    CharSequence text=lexer.getBufferSequence();
    lexer.start(text,startOffset,text.length());
  }
}
