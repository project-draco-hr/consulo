{
  myEditor.getActiveDecorationLayer().removeFeedback();
  final int dropX=dropPoint.x;
  final int dropY=dropPoint.y;
  final int componentCount=dcl.getComponents().size();
  GridLocation location=GridInsertProcessor.getGridInsertLocation(myEditor,dropX,dropY,dcl.getDragRelativeColumn(),componentCount);
  if (isDropOnChild(dcl,location)) {
    setDraggingState(dcl,false);
    return false;
  }
  if (location != null && !location.canDrop(componentCount)) {
    location=null;
  }
  if (!FormEditingUtil.canDrop(myEditor,dropX,dropY,componentCount) && (location == null || location.getMode() == GridInsertMode.InCell)) {
    setDraggingState(dcl,false);
    return false;
  }
  if (!myEditor.ensureEditable()) {
    setDraggingState(dcl,false);
    return false;
  }
  List<RadComponent> droppedComponents;
  RadContainer[] originalParents=dcl.getOriginalParents();
  cancelDrag();
  if (dropAction == DnDConstants.ACTION_COPY) {
    setDraggingState(dcl,false);
    droppedComponents=myDraggedComponentsCopy;
    if (droppedComponents == null) {
      return false;
    }
  }
 else {
    for (int i=0; i < dcl.getComponents().size(); i++) {
      originalParents[i].removeComponent(dcl.getComponents().get(i));
    }
    droppedComponents=dcl.getComponents();
  }
  final int[] dx=new int[componentCount];
  final int[] dy=new int[componentCount];
  for (int i=0; i < componentCount; i++) {
    final RadComponent component=myDraggedComponentsCopy.get(i);
    dx[i]=component.getX() - dropX;
    dy[i]=component.getY() - dropY;
  }
  final RadComponent[] components=droppedComponents.toArray(new RadComponent[componentCount]);
  final GridConstraints[] originalConstraints=dcl.getOriginalConstraints();
  if (location != null) {
    location.processDrop(myEditor,components,originalConstraints,dx,dy);
  }
  if (dropAction == DnDConstants.ACTION_COPY) {
    FormEditingUtil.clearSelection(myEditor.getRootContainer());
    for (    RadComponent component : droppedComponents) {
      component.setSelected(true);
      InsertComponentProcessor.createBindingWhenDrop(myEditor,component);
    }
  }
 else {
    setDraggingState(dcl,false);
  }
  for (int i=0; i < originalConstraints.length; i++) {
    if (originalParents[i].isGrid()) {
      FormEditingUtil.deleteEmptyGridCells(originalParents[i],originalConstraints[i]);
    }
  }
  return true;
}
