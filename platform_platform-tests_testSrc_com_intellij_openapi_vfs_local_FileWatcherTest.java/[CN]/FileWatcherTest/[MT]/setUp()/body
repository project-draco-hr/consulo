{
  LOG.debug("================== setting up " + getName() + " ==================");
  super.setUp();
  myFileSystem=LocalFileSystem.getInstance();
  assertNotNull(myFileSystem);
  myWatcher=((LocalFileSystemImpl)myFileSystem).getFileWatcher();
  assertNotNull(myWatcher);
  assertFalse(myWatcher.isOperational());
  myWatcher.startup(myNotifier);
  assertTrue(myWatcher.isOperational());
  myAlarm=new Alarm(Alarm.ThreadToUse.POOLED_THREAD,getProject());
  myTimeout=NATIVE_PROCESS_DELAY;
  myConnection=ApplicationManager.getApplication().getMessageBus().connect();
  myConnection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener.Adapter(){
    @Override public void after(    @NotNull List<? extends VFileEvent> events){
synchronized (myEvents) {
        myEvents.addAll(events);
      }
    }
  }
);
  LOG=FileWatcher.getLog();
  LOG.debug("================== setting up " + getName() + " ==================");
}
