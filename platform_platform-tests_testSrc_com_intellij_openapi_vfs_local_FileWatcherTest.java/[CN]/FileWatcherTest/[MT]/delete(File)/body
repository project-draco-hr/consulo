{
  final VirtualFile vFile=myFileSystem.findFileByIoFile(file);
  if (vFile != null) {
    @SuppressWarnings("deprecation") final AccessToken token=ApplicationManager.getApplication().acquireWriteActionLock(getClass());
    try {
      vFile.delete(this);
    }
  finally {
      token.finish();
    }
  }
  if (file.exists()) {
    FileUtil.delete(file);
  }
}
