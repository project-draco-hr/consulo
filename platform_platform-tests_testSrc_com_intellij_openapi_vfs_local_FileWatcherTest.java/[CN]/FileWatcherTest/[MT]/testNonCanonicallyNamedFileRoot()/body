{
  if (SystemInfo.isFileSystemCaseSensitive) {
    System.out.println("Ignored: case-insensitive FS required");
    return;
  }
  final File file=FileUtil.createTempFile("test.",".txt");
  refresh(file);
  final String watchRoot=file.getAbsolutePath().toUpperCase(Locale.US);
  final LocalFileSystem.WatchRequest request=watch(new File(watchRoot));
  try {
    FileUtil.writeToFile(file,"new content");
    assertEvent(VFileContentChangeEvent.class,file.getAbsolutePath());
    FileUtil.delete(file);
    assertEvent(VFileDeleteEvent.class,file.getAbsolutePath());
    FileUtil.writeToFile(file,"re-creation");
    assertEvent(VFileCreateEvent.class,file.getAbsolutePath());
  }
  finally {
    myFileSystem.removeWatchedRoot(request);
    delete(file);
  }
}
