{
  File topDir=createTestDir("top");
  File watchedFile1=createTestFile(topDir,"test.txt");
  File sub1Dir=createTestDir(topDir,"sub1");
  File unwatchedFile=createTestFile(sub1Dir,"test.txt");
  File sub2Dir=createTestDir(topDir,"sub2");
  File sub2subDir=createTestDir(sub2Dir,"sub");
  File watchedFile2=createTestFile(sub2subDir,"test.txt");
  refresh(topDir);
  LocalFileSystem.WatchRequest topRequest=watch(topDir,false);
  LocalFileSystem.WatchRequest subRequest=watch(sub2Dir);
  try {
    myAccept=true;
    FileUtil.writeToFile(watchedFile1,"new content");
    FileUtil.writeToFile(watchedFile2,"new content");
    FileUtil.writeToFile(unwatchedFile,"new content");
    assertEvent(VFileContentChangeEvent.class,watchedFile1.getAbsolutePath(),watchedFile2.getAbsolutePath());
  }
  finally {
    unwatch(subRequest,topRequest);
    delete(topDir);
  }
}
