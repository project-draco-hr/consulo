{
  File file=createTestFile("test.txt");
  refresh(file);
  LocalFileSystem.WatchRequest request=watch(file);
  try {
    myAccept=true;
    FileUtil.writeToFile(file,"new content");
    assertEvent(VFileContentChangeEvent.class,file.getAbsolutePath());
    myAccept=true;
    FileUtil.delete(file);
    assertEvent(VFileDeleteEvent.class,file.getAbsolutePath());
    if (!SystemInfo.isLinux) {
      myAccept=true;
      FileUtil.writeToFile(file,"re-creation");
      assertEvent(VFileCreateEvent.class,file.getAbsolutePath());
    }
  }
  finally {
    unwatch(request);
    delete(file);
  }
}
