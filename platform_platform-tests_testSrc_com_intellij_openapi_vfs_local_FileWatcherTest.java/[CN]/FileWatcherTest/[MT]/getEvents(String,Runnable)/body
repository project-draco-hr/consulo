{
  LOG.debug("** waiting for " + msg + "...");
  myAccept=true;
  if (action != null) {
    action.run();
  }
  int timeout=myTimeout;
  try {
synchronized (myWaiter) {
      myWaiter.wait(timeout);
    }
  }
 catch (  InterruptedException e) {
    LOG.warn(e);
  }
  LOG.debug("** waited for " + timeout);
  myFileSystem.refresh(false);
  ArrayList<VFileEvent> result;
synchronized (myEvents) {
    result=new ArrayList<VFileEvent>(myEvents);
    myEvents.clear();
  }
  LOG.debug("** events: " + result.size());
  return result;
}
