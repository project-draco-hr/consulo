{
  File rootDir=createTestDir("root");
  File topDir=createTestDir(rootDir,"top");
  File file1=createTestFile(topDir,"file1.txt","abc");
  File file2=createTestFile(topDir,"file2.txt","123");
  refresh(topDir);
  LocalFileSystem.WatchRequest request=watch(rootDir);
  try {
    myAccept=true;
    assertTrue(FileUtil.delete(topDir));
    assertTrue(topDir.mkdir());
    TimeoutUtil.sleep(100);
    assertTrue(file1.createNewFile());
    assertTrue(file2.createNewFile());
    assertEvent(VFileContentChangeEvent.class,file1.getPath(),file2.getPath());
  }
  finally {
    unwatch(request);
    delete(topDir);
  }
}
