{
  if (element instanceof LibraryLink) {
    final LibraryLink libraryLink=(LibraryLink)element;
    @NonNls String jarSuffix=".jar";
    if ((method == PackagingMethod.COPY_FILES_AND_LINK_VIA_MANIFEST || method == PackagingMethod.COPY_FILES) && libraryLink.getUrls().size() == 1 && LibraryLink.MODULE_LEVEL.equals(libraryLink.getLevel()) && path.endsWith(jarSuffix)) {
      int index=path.lastIndexOf('/');
      if (index >= 0) {
        return path.substring(0,index);
      }
 else {
        return "";
      }
    }
  }
  return path;
}
