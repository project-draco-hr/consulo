{
  addElement(new Object(),myWeakArray);
  myWeakArray.add(new Object());
  addElement(new Object(),myWeakArray);
  myWeakArray.add(new Object());
  addElement(new Object(),myWeakArray);
  Iterator iterator=myWeakList.iterator();
  Assert.assertSame(myHolder.get(0),iterator.next());
  while (myHolder.get(1) != iterator.next())   ;
  gc();
  Assert.assertEquals(4,myWeakArray.getAliveCount());
  iterator.remove();
  gc();
  Assert.assertEquals(3,myWeakArray.getAliveCount());
  iterator.next();
  gc();
  Assert.assertEquals(2,myWeakArray.getAliveCount());
  Assert.assertSame(myHolder.get(2),iterator.next());
  Assert.assertFalse(iterator.hasNext());
  myHolder.remove(1);
  checkSameNotNulls(myWeakArray);
  myWeakArray.compress(-1);
  checkSameElements(myWeakArray);
}
