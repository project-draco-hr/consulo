{
  final List<String> args=new LinkedList<String>();
  args.add("--template");
  args.add(HgChangesetUtil.makeTemplate("{rev}","{node|short}"));
  if (revision != null) {
    args.add("-r");
    args.add(revision.getChangeset());
  }
  if (file != null) {
    args.add(HgUtil.getOriginalFileName(file,ChangeListManager.getInstance(myProject)).getPath());
  }
  final HgCommandExecutor executor=new HgCommandExecutor(myProject);
  executor.setSilent(silent);
  final HgCommandResult result=executor.executeInCurrentThread(repo,command,args);
  if (result == null) {
    return new ArrayList<HgRevisionNumber>(0);
  }
  final List<String> lines=Arrays.asList(result.getRawOutput().split(HgChangesetUtil.CHANGESET_SEPARATOR));
  final List<HgRevisionNumber> revisions=new ArrayList<HgRevisionNumber>(lines.size());
  for (  String line : lines) {
    final String[] parts=StringUtils.split(line,HgChangesetUtil.ITEM_SEPARATOR);
    revisions.add(HgRevisionNumber.getInstance(parts[0],parts[1]));
  }
  return revisions;
}
