{
  HgCommandService commandService=HgCommandService.getInstance(project);
  HgCommandResult result=commandService.execute(repo,"identify",Arrays.asList("--num","--id"));
  if (result == null) {
    return null;
  }
  final List<String> lines=result.getOutputLines();
  if (lines != null && !lines.isEmpty()) {
    String[] parts=StringUtils.split(lines.get(0),' ');
    if (parts.length >= 2) {
      return HgRevisionNumber.getInstance(parts[1],parts[0]);
    }
  }
  return null;
}
