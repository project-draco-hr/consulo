{
  Set<VirtualFilePointer> cachedFiles=myCachedFiles.get(type);
  if (cachedFiles == null) {
    cachedFiles=new LinkedHashSet<VirtualFilePointer>();
    final Iterator<OrderEntry> orderIterator=myRootModel.getOrderIterator();
    while (orderIterator.hasNext()) {
      OrderEntry entry=orderIterator.next();
      final String[] urls;
      if (entry instanceof ModuleOrderEntryImpl) {
        List<String> list=((ModuleOrderEntryImpl)entry).getUrls(type,processed);
        urls=ArrayUtil.toStringArray(list);
      }
 else {
        urls=entry.getUrls(type);
      }
      final VirtualFilePointerManager virtualFilePointerManager=VirtualFilePointerManager.getInstance();
      for (      String url : urls) {
        if (url != null) {
          cachedFiles.add(virtualFilePointerManager.create(url,getModule(),null));
        }
      }
    }
    myCachedFiles.put(type,cachedFiles);
  }
  return VfsUtil.toVirtualFileArray(OrderRootsCache.convertPointersToFiles(cachedFiles));
}
