{
  Set<VirtualFilePointer> files=myCachedExportedFiles.get(rootType);
  if (files == null) {
    files=new LinkedHashSet<VirtualFilePointer>();
    List<String> result=new ArrayList<String>();
    if (OrderRootType.SOURCES.equals(rootType) || OrderRootType.COMPILATION_CLASSES.equals(rootType) || OrderRootType.PRODUCTION_COMPILATION_CLASSES.equals(rootType)) {
      myRootModel.addExportedUrs(rootType,result,processed);
    }
 else     if (OrderRootType.CLASSES.equals(rootType)) {
      myRootModel.addExportedUrs(rootType,result,processed);
    }
 else     if (OrderRootType.CLASSES_AND_OUTPUT.equals(rootType)) {
      return getFiles(OrderRootType.CLASSES_AND_OUTPUT,processed);
    }
 else     if (rootType.collectFromDependentModules()) {
      return getFiles(rootType,processed);
    }
 else {
      return VirtualFile.EMPTY_ARRAY;
    }
    final VirtualFilePointerManager pointerManager=VirtualFilePointerManager.getInstance();
    for (    String url : result) {
      if (url != null) {
        files.add(pointerManager.create(url,getModule(),null));
      }
    }
    myCachedExportedFiles.put(rootType,files);
  }
  return convertPointers(files);
}
