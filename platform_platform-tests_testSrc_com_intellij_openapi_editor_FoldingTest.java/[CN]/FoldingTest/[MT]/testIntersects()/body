{
  @NonNls DocumentImpl doc=new DocumentImpl("I don't know what you mean by `glory,'\" Alice said" + "Humpty Dumpty smiled contemptuously. \"Of course you don't -- till I tell you. I meant `there's a nice knock-down argument for you!'" + "But glory doesn't mean `a nice knock-down argument,'\" Alice objected."+ "When I use a word,\" Humpty Dumpty said, in a rather scornful tone, \"it means just what I choose it to mean -- neither more nor less."+ "The question is,\" said Alice, \"whether you can make words mean so many different things."+ "The question is,\" said Humpty Dumpty, \"which is to be master -- that's all.");
  Editor editor=EditorFactory.getInstance().createEditor(doc);
  try {
    final FoldingModel model=editor.getFoldingModel();
    model.runBatchFoldingOperation(new Runnable(){
      @Override public void run(){
        FoldRegion region=model.addFoldRegion(5,10,".");
        assertNotNull(region);
        region=model.addFoldRegion(7,11,".");
        assertNull(region);
        region=model.addFoldRegion(20,30,".");
        assertNotNull(region);
        region=model.addFoldRegion(9,12,".");
        assertNull(region);
        region=model.addFoldRegion(7,10,".");
        assertNotNull(region);
        region=model.addFoldRegion(7,10,".");
        assertNull(region);
        region=model.addFoldRegion(5,30,".");
        assertNotNull(region);
      }
    }
);
  }
  finally {
    EditorFactory.getInstance().releaseEditor(editor);
  }
}
