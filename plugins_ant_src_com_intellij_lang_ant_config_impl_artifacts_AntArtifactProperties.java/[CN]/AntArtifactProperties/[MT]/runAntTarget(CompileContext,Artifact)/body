{
  if (myExtensionProperties.myEnabled) {
    final Project project=compileContext.getProject();
    final AntBuildTarget target=findTarget(AntConfiguration.getInstance(project));
    if (target != null) {
      final DataContext dataContext=SimpleDataContext.getProjectContext(project);
      List<BuildFileProperty> properties=getAllProperties(artifact);
      final boolean success=AntConfigurationImpl.executeTargetSynchronously(dataContext,target,properties);
      if (!success) {
        compileContext.addMessage(CompilerMessageCategory.ERROR,"Cannot build artifact '" + artifact.getName() + "': ant target '"+ target.getDisplayName()+ "' failed with error",null,-1,-1);
      }
    }
  }
}
