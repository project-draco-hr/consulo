{
  final PsiMethod method=(PsiMethod)result.getElement();
  if (method == null)   return null;
  boolean is15OrHigher=languageLevel.compareTo(LanguageLevel.JDK_1_5) >= 0;
  final PsiType getClassReturnType=PsiTypesUtil.patchMethodGetClassReturnType(call,methodExpression,method,new Condition<IElementType>(){
    @Override public boolean value(    IElementType type){
      return type != JavaElementType.CLASS;
    }
  }
,languageLevel);
  if (getClassReturnType != null) {
    return getClassReturnType;
  }
  PsiType ret=method.getReturnType();
  if (ret == null)   return null;
  if (ret instanceof PsiClassType) {
    ret=((PsiClassType)ret).setLanguageLevel(languageLevel);
  }
  if (is15OrHigher) {
    return captureReturnType(call,method,ret,result.getSubstitutor());
  }
  return TypeConversionUtil.erasure(ret);
}
