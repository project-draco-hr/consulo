{
  final SingleConfigurationConfigurable<RunConfiguration> configuration=getSelectedConfiguration();
  try {
    final DefaultMutableTreeNode typeNode=getSelectedConfigurationTypeNode();
    final RunnerAndConfigurationSettingsImpl settings=configuration.getSnapshot();
    settings.setName(createUniqueName(typeNode));
    final RunManagerConfig managerConfig=getRunManager().getConfig();
    final ConfigurationSettingsEditorWrapper settingsEditorWrapper=(ConfigurationSettingsEditorWrapper)configuration.getEditor();
    managerConfig.setCompileMethodBeforeRunning(settings.getConfiguration(),settingsEditorWrapper.getCompileMethodBeforeRunning());
    managerConfig.setStoreProjectConfiguration(settings.getConfiguration(),settingsEditorWrapper.isStoreProjectConfiguration());
    createNewConfiguration(settings,typeNode);
  }
 catch (  ConfigurationException e1) {
    Messages.showErrorDialog(myToolbarComponent,e1.getMessage(),e1.getTitle());
  }
}
