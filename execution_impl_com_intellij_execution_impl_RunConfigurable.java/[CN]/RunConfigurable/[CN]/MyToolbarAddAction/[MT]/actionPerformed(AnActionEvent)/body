{
  final ConfigurationType type=getSelectedType();
  final ConfigurationFactory[] configurationFactories=type.getConfigurationFactories();
  if (configurationFactories.length > 1) {
    final DefaultActionGroup group=new DefaultActionGroup();
    for (    ConfigurationFactory factory : configurationFactories) {
      group.add(new MyAddAction(factory));
    }
    JBPopupFactory.getInstance().createActionGroupPopup(ExecutionBundle.message("add.new.run.configuration.action.name",getSelectedType().getDisplayName()),group,e.getDataContext(),JBPopupFactory.ActionSelectionAid.NUMBERING,false).showUnderneathOf(myToolbarComponent);
  }
 else {
    new MyAddAction(configurationFactories[0]).actionPerformed(e);
  }
}
