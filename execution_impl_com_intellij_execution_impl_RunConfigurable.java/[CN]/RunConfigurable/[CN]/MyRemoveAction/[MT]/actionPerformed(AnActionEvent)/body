{
  final DefaultMutableTreeNode typeNode=getSelectedConfigurationTypeNode();
  final DefaultMutableTreeNode child=(DefaultMutableTreeNode)myTree.getSelectionPath().getLastPathComponent();
  ((SingleConfigurationConfigurable)child.getUserObject()).disposeUIResources();
  int index=typeNode.getIndex(child);
  typeNode.remove(child);
  if (typeNode.getChildCount() > 0) {
    ((DefaultTreeModel)myTree.getModel()).reload(typeNode);
    TreeUtil.selectInTree((DefaultMutableTreeNode)(index < typeNode.getChildCount() ? typeNode.getChildAt(index) : typeNode.getChildAt(index - 1)),true,myTree);
  }
 else {
    index=myRoot.getIndex(typeNode);
    myRoot.remove(typeNode);
    ((DefaultTreeModel)myTree.getModel()).reload();
    if (myRoot.getChildCount() > 0) {
      final TreeNode treeNode=index < myRoot.getChildCount() ? myRoot.getChildAt(index) : myRoot.getChildAt(index - 1);
      TreeUtil.selectInTree((DefaultMutableTreeNode)treeNode.getChildAt(0),true,myTree);
    }
 else {
      mySelectedConfigurable=null;
      drawPressAddButtonMessage(null);
    }
  }
}
