{
  DefaultMutableTreeNode typeNode=getConfigurationTypeNode(type);
  final RunManagerImpl manager=getRunManager();
  final ArrayList<SingleConfigurationConfigurable> stableConfigurations=new ArrayList<SingleConfigurationConfigurable>();
  SingleConfigurationConfigurable tempConfiguration=null;
  if (typeNode != null) {
    for (int i=0; i < typeNode.getChildCount(); i++) {
      final SingleConfigurationConfigurable configurable=((SingleConfigurationConfigurable)((DefaultMutableTreeNode)typeNode.getChildAt(i)).getUserObject());
      if (manager.isTemporary((RunnerAndConfigurationSettingsImpl)configurable.getSettings())) {
        tempConfiguration=configurable;
      }
 else {
        stableConfigurations.add(configurable);
      }
    }
  }
  for (  SingleConfigurationConfigurable configurable : stableConfigurations) {
    applyConfiguration(typeNode,configurable);
  }
  if (tempConfiguration != null) {
    applyConfiguration(typeNode,tempConfiguration);
  }
  manager.removeConfigurations(type);
  for (  final SingleConfigurationConfigurable<RunConfiguration> stableConfiguration : stableConfigurations) {
    final ConfigurationSettingsEditorWrapper settingsEditorWrapper=((ConfigurationSettingsEditorWrapper)stableConfiguration.getEditor());
    manager.addConfiguration(stableConfiguration.getSettings(),settingsEditorWrapper.isStoreProjectConfiguration(),settingsEditorWrapper.getStepsBeforeLaunch());
  }
  if (tempConfiguration != null) {
    manager.setTemporaryConfiguration((RunnerAndConfigurationSettingsImpl)tempConfiguration.getSettings());
  }
}
