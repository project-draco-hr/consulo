{
  if (element.equals(elementToReplace)) {
    final String replacementText=(replacementExpression == null) ? "" : replacementExpression.getText();
    out.append(replacementText);
    return;
  }
  final PsiElement[] children=element.getChildren();
  if (children.length == 0) {
    out.append(element.getText());
    return;
  }
  for (  PsiElement child : children) {
    appendElementText(child,elementToReplace,replacementExpression,out);
  }
}
