{
  if (ReadonlyStatusHandler.getInstance(project).ensureFilesWritable(new VirtualFile[]{file.getVirtualFile()}).hasReadonlyFiles())   return;
  final PsiElement element=findMatchingElement(file,editor);
  if (element instanceof PsiReturnStatement) {
    replaceConditionalReturn(element,project);
  }
 else   if (element instanceof PsiDeclarationStatement) {
    replaceConditionalDeclaration(element);
  }
 else {
    replaceConditionalAssignment(element,project);
  }
}
