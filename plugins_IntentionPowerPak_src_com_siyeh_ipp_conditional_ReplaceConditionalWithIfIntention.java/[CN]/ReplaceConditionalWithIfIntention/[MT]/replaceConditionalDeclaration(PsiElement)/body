{
  final PsiManager mgr=element.getManager();
  final PsiElementFactory factory=mgr.getElementFactory();
  final PsiDeclarationStatement statement=(PsiDeclarationStatement)element;
  final PsiVariable var=(PsiVariable)statement.getDeclaredElements()[0];
  final PsiConditionalExpression rhs=(PsiConditionalExpression)var.getInitializer();
  final String lhsText=var.getName();
  final String str=statement.getText();
  final int equalsIndex=str.indexOf((int)'=');
  final String declarationString=str.substring(0,equalsIndex) + ';';
  final PsiExpression condition=rhs.getCondition();
  final PsiExpression thenExpression=rhs.getThenExpression();
  final PsiExpression elseExpression=rhs.getElseExpression();
  final String ifStatementString="if(" + condition.getText() + ')'+ '{'+ lhsText+ '='+ thenExpression.getText()+ ';'+ '}'+ "else"+ '{'+ lhsText+ '='+ elseExpression.getText()+ ';'+ '}';
  final PsiStatement declarationStatement=factory.createStatementFromText(declarationString,null);
  final PsiStatement ifStatement=factory.createStatementFromText(ifStatementString,null);
  PsiElement ifElement=statement.replace(ifStatement);
  final CodeStyleManager styleManager=mgr.getCodeStyleManager();
  ifElement=styleManager.reformat(ifElement);
  final PsiElement parent=ifElement.getParent();
  final PsiElement declarationElement=parent.addBefore(declarationStatement,ifElement);
  styleManager.reformat(declarationElement);
  styleManager.reformat(parent);
}
