{
  try {
    for (    ToolsImpl toolList : profile.myTools.values()) {
      final ToolsImpl tools=myTools.get(toolList.getShortName());
      final ScopeToolState defaultState=toolList.getDefaultState();
      tools.setDefaultState(copyToolSettings(defaultState.getTool()),defaultState.isEnabled(),defaultState.getLevel());
      tools.removeAllScopes();
      tools.setEnabled(toolList.isEnabled());
      final List<ScopeToolState> nonDefaultToolStates=toolList.getNonDefaultTools();
      if (nonDefaultToolStates != null) {
        for (        ScopeToolState state : nonDefaultToolStates) {
          final InspectionToolWrapper toolWrapper=copyToolSettings(state.getTool());
          final NamedScope scope=state.getScope(project);
          if (scope != null) {
            tools.addTool(scope,toolWrapper,state.isEnabled(),state.getLevel());
          }
 else {
            tools.addTool(state.getScopeName(),toolWrapper,state.isEnabled(),state.getLevel());
          }
        }
      }
    }
  }
 catch (  WriteExternalException e) {
    LOG.error(e);
  }
catch (  InvalidDataException e) {
    LOG.error(e);
  }
}
