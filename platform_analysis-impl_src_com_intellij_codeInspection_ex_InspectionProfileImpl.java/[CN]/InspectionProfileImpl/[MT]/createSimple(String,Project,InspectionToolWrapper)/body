{
  InspectionToolRegistrar registrar=new InspectionToolRegistrar(){
    @NotNull @Override public List<InspectionToolWrapper> createTools(){
      return Arrays.asList(toolWrappers);
    }
  }
;
  InspectionProfileImpl profile=new InspectionProfileImpl(name,registrar,InspectionProfileManager.getInstance());
  boolean init=INIT_INSPECTIONS;
  try {
    INIT_INSPECTIONS=true;
    profile.initialize(project);
  }
  finally {
    INIT_INSPECTIONS=init;
  }
  for (  InspectionToolWrapper toolWrapper : toolWrappers) {
    profile.enableTool(toolWrapper.getShortName(),project);
  }
  return profile;
}
