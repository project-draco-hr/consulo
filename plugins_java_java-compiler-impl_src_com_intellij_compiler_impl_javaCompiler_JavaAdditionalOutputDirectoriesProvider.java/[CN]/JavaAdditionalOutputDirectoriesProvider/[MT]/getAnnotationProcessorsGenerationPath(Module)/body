{
  final AnnotationProcessingConfiguration config=JavaCompilerConfiguration.getInstance(module.getProject()).getAnnotationProcessingConfiguration(module);
  final String sourceDirName=config.getGeneratedSourcesDirectoryName(false);
  if (config.isOutputRelativeToContentRoot()) {
    final String[] roots=ModuleRootManager.getInstance(module).getContentRootUrls();
    if (roots.length == 0) {
      return null;
    }
    if (roots.length > 1) {
      Arrays.sort(roots,CompilerPaths.URLS_COMPARATOR);
    }
    return StringUtil.isEmpty(sourceDirName) ? VirtualFileManager.extractPath(roots[0]) : VirtualFileManager.extractPath(roots[0]) + "/" + sourceDirName;
  }
  final String path=CompilerPaths.getModuleOutputPath(module,false);
  if (path == null) {
    return null;
  }
  return StringUtil.isEmpty(sourceDirName) ? path : path + "/" + sourceDirName;
}
