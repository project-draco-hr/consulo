{
  ASTNode newFirst=null;
  ASTNode child=first;
  while (child != null) {
    if (child instanceof ChameleonElement) {
      ASTNode next=child.getTreeNext();
      child=ChameleonTransforming.transform((ChameleonElement)child);
      if (child == null) {
        child=next;
      }
      continue;
    }
    if (newFirst == null)     newFirst=child;
    child=child.getTreeNext();
  }
  return (TreeElement)newFirst;
}
