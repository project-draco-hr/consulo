{
  InspectionConfigTreeNode parent=null;
  final InspectionConfigTreeNode[] nodes=myTree.getSelectedNodes(InspectionConfigTreeNode.class,null);
  for (  InspectionConfigTreeNode node : nodes) {
    final Descriptor descriptor=node.getDescriptor();
    LOG.assertTrue(descriptor != null);
    parent=(InspectionConfigTreeNode)node.getParent();
    final HighlightDisplayKey key=descriptor.getKey();
    if (parent.getChildCount() <= 2) {
      getSelectedProfile().removeAllScopes(key.toString(),e.getProject());
      parent.removeAllChildren();
      parent.setInspectionNode(true);
      parent.setByDefault(true);
    }
 else {
      getSelectedProfile().removeScope(key.toString(),parent.getIndex(node),e.getProject());
      node.removeFromParent();
    }
    ((DefaultTreeModel)myTree.getModel()).reload(parent);
  }
  if (parent != null) {
    myTree.setSelectionPath(new TreePath(parent.getPath()));
  }
  myTree.revalidate();
}
