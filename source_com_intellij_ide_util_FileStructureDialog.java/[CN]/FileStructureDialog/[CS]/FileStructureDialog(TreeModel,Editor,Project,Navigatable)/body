{
  super(project,true);
  myProject=project;
  myEditor=editor;
  myNavigatable=navigatable;
  myTreeModel=structureViewModel;
  PsiFile psiFile=PsiDocumentManager.getInstance(project).getPsiFile(myEditor.getDocument());
  final PsiElement elementAtCursor=getElementAtCursor(psiFile);
  init();
  if (elementAtCursor != null) {
    if (elementAtCursor instanceof PsiClass) {
      myCommanderPanel.getBuilder().enterElement(elementAtCursor,((PsiClass)elementAtCursor).getContainingFile().getVirtualFile());
    }
 else {
      myCommanderPanel.getBuilder().selectElement(elementAtCursor);
    }
  }
  AnAction editSourceAction=ActionManager.getInstance().getAction(IdeActions.ACTION_EDIT_SOURCE);
  editSourceAction.registerCustomShortcutSet(editSourceAction.getShortcutSet(),myCommanderPanel);
}
