{
  super(project,true);
  myProject=project;
  myEditor=editor;
  myNavigatable=navigatable;
  myTreeModel=structureViewModel;
  myAuxDisposable=auxDisposable;
  PsiFile psiFile=getPsiFile(project);
  final PsiElement psiElement=getCurrentElement(psiFile);
  init();
  if (psiElement != null) {
    if (psiElement instanceof PsiClass) {
      myCommanderPanel.getBuilder().enterElement(psiElement,psiElement.getContainingFile().getVirtualFile());
    }
 else {
      myCommanderPanel.getBuilder().selectElement(psiElement,PsiUtil.getVirtualFile(psiElement));
    }
  }
  Disposer.register(myDisposable,myAuxDisposable);
}
