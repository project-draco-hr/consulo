{
  for (  Object o : root.getChildren(IdeaXml.TEST_FOLDER_TAG)) {
    final String url=((Element)o).getAttributeValue(IdeaXml.URL_ATTR);
    JpsModuleSourceRoot folderToBeTest=null;
    for (    JpsModuleSourceRoot folder : model.getSourceRoots()) {
      if (Comparing.strEqual(folder.getUrl(),url)) {
        folderToBeTest=folder;
        break;
      }
    }
    if (folderToBeTest != null) {
      model.removeSourceRoot(folderToBeTest.getUrl(),JavaSourceRootType.SOURCE);
    }
    model.addSourceRoot(url,JavaSourceRootType.TEST_SOURCE);
  }
  for (  Object o : root.getChildren(IdeaXml.EXCLUDE_FOLDER_TAG)) {
    final String excludeUrl=((Element)o).getAttributeValue(IdeaXml.URL_ATTR);
    if (FileUtil.isAncestor(new File(contentUrl),new File(excludeUrl),false)) {
      model.getExcludeRootsList().addUrl(excludeUrl);
    }
  }
  for (  Object o : root.getChildren(IdeaXml.PACKAGE_PREFIX_TAG)) {
    Element ppElement=(Element)o;
    final String prefix=ppElement.getAttributeValue(IdeaXml.PACKAGE_PREFIX_VALUE_ATTR);
    final String url=ppElement.getAttributeValue(IdeaXml.URL_ATTR);
    for (    JpsModuleSourceRoot sourceRoot : model.getSourceRoots()) {
      if (Comparing.strEqual(sourceRoot.getUrl(),url)) {
        ((JpsSimpleElement)sourceRoot.getProperties()).setData(new JavaSourceRootProperties(prefix));
        break;
      }
    }
  }
}
