{
  final StatisticsManager manager=StatisticsManager.getInstance();
  manager.incUseCount(CompletionService.STATISTICS_KEY,item,myLocation);
  final LookupImpl lookupImpl=(LookupImpl)lookup;
  final ListModel model=lookupImpl.getList().getModel();
  final int count=Math.min(lookupImpl.getPreferredItemsCount(),lookupImpl.getList().getSelectedIndex());
  for (int i=0; i < count; i++) {
    final LookupElement element=(LookupElement)model.getElementAt(i);
    StatisticsInfo info=StatisticsManager.serialize(CompletionService.STATISTICS_KEY,element,myLocation);
    if (info != null && info != StatisticsInfo.EMPTY && manager.getUseCount(info) == 0) {
      manager.incUseCount(new StatisticsInfo(composeContextWithValue(info),item == element ? SELECTED : IGNORED));
    }
  }
}
