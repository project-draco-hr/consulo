{
  super(project,true);
  setTitle("Git Branch Configuration Changed");
  myBranches=branches;
  VirtualFile baseDir=project.getBaseDir();
  myBaseFile=baseDir == null ? null : new File(baseDir.getPath());
  myTable.setModel(new DescriptorTableModel());
  myNameTextField.setText(config.getName());
  myNewAction=new DialogWrapperExitAction("New Configuration",NEW_CONFIGURATION);
  final DocumentAdapter l=new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      String text=myNameTextField.getText().trim();
      if (text.length() == 0) {
        setError("Empty configuration name is not allowed.");
      }
 else       if (text.equals(config.getName())) {
        setError(null);
        myNewAction.setEnabled(false);
      }
 else       if (names.contains(text)) {
        setError("There is another configuration with the same name");
      }
 else {
        setError(null);
      }
    }
    private void setError(    String s){
      setErrorText(s);
      setOKActionEnabled(s == null);
      myNewAction.setEnabled(s == null);
    }
  }
;
  myNameTextField.getDocument().addDocumentListener(l);
  l.changedUpdate(null);
  setOKButtonText("Update");
  init();
}
