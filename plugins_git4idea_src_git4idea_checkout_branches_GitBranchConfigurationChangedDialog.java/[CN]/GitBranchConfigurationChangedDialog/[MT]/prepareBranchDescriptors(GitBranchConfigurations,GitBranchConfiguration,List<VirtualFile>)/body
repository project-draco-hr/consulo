{
  List<BranchDescriptor> rc=new ArrayList<BranchDescriptor>();
  Map<String,String> map=config.getReferences();
  for (  VirtualFile root : roots) {
    BranchDescriptor d=new BranchDescriptor();
    d.root=root;
    d.actualRef=settings.describeRoot(root);
    d.storedRef=map.remove(root.getPath());
    rc.add(d);
  }
  for (  Map.Entry<String,String> m : map.entrySet()) {
    BranchDescriptor d=new BranchDescriptor();
    d.storedRoot=m.getKey();
    d.storedRef=m.getValue();
    rc.add(d);
  }
  return rc;
}
