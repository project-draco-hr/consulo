{
  expect(fi.isInContent((VirtualFile)anyObject())).andStubReturn(true);
  replay(fi);
  expect(tm.getFileTypeByFile(f1)).andStubReturn(nonBinary);
  expect(tm.getFileTypeByFile(f2)).andStubReturn(binary);
  replay(tm);
  FileFilter f=new FileFilter(fi,tm);
  assertTrue(f.isAllowedAndUnderContentRoot(f1));
  assertFalse(f.isAllowedAndUnderContentRoot(f2));
  assertTrue(f.isUnderContentRoot(f1));
  assertTrue(f.isUnderContentRoot(f2));
}
