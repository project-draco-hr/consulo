{
  VirtualFile big=new TestVirtualFile(null,null,null,100L * 1024L);
  VirtualFile small=new TestVirtualFile(null,null,null,99L * 1024L);
  VirtualFile dir=new TestVirtualFile(null,null);
  expect(fi.isInContent((VirtualFile)anyObject())).andStubReturn(true);
  replay(fi);
  expect(tm.getFileTypeByFile((VirtualFile)anyObject())).andStubReturn(nonBinary);
  replay(tm);
  FileFilter f=new FileFilter(fi,tm);
  assertFalse(f.isFileAllowed(big));
  assertTrue(f.isFileAllowed(small));
  assertTrue(f.isFileAllowed(dir));
}
