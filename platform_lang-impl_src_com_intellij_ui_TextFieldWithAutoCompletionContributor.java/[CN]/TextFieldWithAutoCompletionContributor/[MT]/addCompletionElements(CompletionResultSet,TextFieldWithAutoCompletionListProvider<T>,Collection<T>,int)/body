{
  final AutoCompletionPolicy completionPolicy=ApplicationManager.getApplication().isUnitTestMode() ? AutoCompletionPolicy.ALWAYS_AUTOCOMPLETE : AutoCompletionPolicy.NEVER_AUTOCOMPLETE;
  int grouping=index;
  for (  final T item : items) {
    LookupElementBuilder builder=listProvider.createLookupBuilder(item);
    result.addElement(PrioritizedLookupElement.withGrouping(builder.withAutoCompletionPolicy(completionPolicy),grouping--));
  }
}
