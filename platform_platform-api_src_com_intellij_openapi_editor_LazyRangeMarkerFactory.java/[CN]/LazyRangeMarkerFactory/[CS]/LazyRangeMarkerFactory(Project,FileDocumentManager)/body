{
  super(project);
  EditorFactory.getInstance().getEventMulticaster().addDocumentListener(new DocumentAdapter(){
    public void beforeDocumentChange(    DocumentEvent e){
      List<LazyMarker> markers=myMarkers.toStrongList();
      List<LazyMarker> markersToRemove=new ArrayList<LazyMarker>();
      for (      final LazyMarker marker : markers) {
        final VirtualFile docFile=fileDocumentManager.getFile(e.getDocument());
        if (marker.getFile() == docFile) {
          marker.ensureDelegate();
          markersToRemove.add(marker);
        }
      }
      myMarkers.removeAll(markersToRemove);
    }
  }
,project);
}
