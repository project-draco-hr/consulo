{
  return ApplicationManager.getApplication().runReadAction(new Computable<RangeMarker>(){
    @Override public RangeMarker compute(){
      FileDocumentManager fdm=FileDocumentManager.getInstance();
      final Document document=fdm.getCachedDocument(file);
      if (document != null) {
        final int offset=calculateOffset(myProject,file,document,line,column);
        return document.createRangeMarker(offset,offset,persistent);
      }
      final LazyMarker marker=new LineColumnLazyMarker(file,line,column);
      addToLazyMarkersList(marker,file);
      return marker;
    }
  }
);
}
