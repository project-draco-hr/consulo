{
  final boolean[] success=new boolean[]{false};
  final Runnable accessor=new Runnable(){
    public void run(){
      try {
        for (int i=0; i < 3; i++) {
          try {
            Toolkit.getDefaultToolkit().getSystemClipboard().setContents(content,CopyPasteManagerEx.this);
          }
 catch (          IllegalStateException e) {
            try {
              Thread.sleep(50);
            }
 catch (            InterruptedException e1) {
            }
            continue;
          }
          break;
        }
        success[0]=true;
      }
  finally {
        Thread.interrupted();
      }
    }
  }
;
  if (Patches.SUN_BUG_ID_4818143) {
    Future<?> accessorFuture=ApplicationManager.getApplication().executeOnPooledThread(accessor);
    try {
      accessorFuture.get(DELAY_UNTIL_ABORT_CLIPBOARD_ACCESS,TimeUnit.MILLISECONDS);
    }
 catch (    Exception e) {
    }
    if (!success[0]) {
      showWorkaroundMessage();
      accessorFuture.cancel(true);
    }
  }
 else {
    accessor.run();
  }
}
