{
  if (document.getLanguage() == StdLanguages.DTD) {
    final List<XmlElementDecl> decls=new ArrayList<XmlElementDecl>(3);
    XmlUtil.processXmlElements(document,new PsiElementProcessor(){
      public boolean execute(      final PsiElement element){
        if (element instanceof XmlElementDecl)         decls.add((XmlElementDecl)element);
        return true;
      }
    }
,false);
    XmlUtil.doDuplicationCheckForElements(decls.toArray(new XmlElementDecl[decls.size()]),new HashMap<String,XmlElementDecl>(decls.size()),XML_ELEMENT_DECL_PROVIDER,host);
    return;
  }
  ExternalDocumentValidator.doValidation(document,host);
}
