{
  final JavaParameters params=new JavaParameters();
  params.setWorkingDirectory(parameters.getWorkingDirFile());
  params.setJdk(getJdk(runnerSettings.getJreName()));
  final String mavenHome=resolveMavenHome(coreSettings);
  for (  String parameter : createVMParameters(new ArrayList<String>(),mavenHome,runnerSettings)) {
    params.getVMParametersList().add(parameter);
  }
  for (  String path : getMavenClasspathEntries(mavenHome)) {
    params.getClassPath().add(path);
  }
  params.setMainClass(MAVEN_LAUNCHER_CLASS);
  for (  String parameter : createMavenParameters(new ArrayList<String>(),coreSettings,runnerSettings,parameters)) {
    params.getProgramParametersList().add(parameter);
  }
  return params;
}
