{
  final Position p=(Position)position;
  myBaseLexer.restore(p.getBasePosition());
  final LexerPosition templatePos=p.getTemplatePosition();
  if (templatePos != null && templatePos.getOffset() < myTemplateLexer.getBufferEnd()) {
    myTemplateLexer.restore(templatePos);
  }
 else {
    setupTemplateToken();
  }
}
