{
  if (root instanceof Splitter) {
    if (proportions.size() <= index)     return index;
    ((Splitter)root).setProportion(proportions.get(index++).floatValue());
  }
  if (root instanceof Container) {
    Component[] children=((Container)root).getComponents();
    for (int i=0; i < children.length; i++) {
      Component child=children[i];
      index=restoreSplitterProportions(child,index);
    }
  }
  return index;
}
