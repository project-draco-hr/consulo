{
  try {
    final Method getValueMethod=GenericValue.class.getMethod("getValue");
    final Method setValueMethod=findMethod(GenericValue.class,"setValue");
    final Method getStringMethod=GenericValue.class.getMethod("getStringValue");
    final Method setStringMethod=findMethod(GenericValue.class,"setStringValue");
    if (aClass.equals(boolean.class) || aClass.equals(Boolean.class)) {
      return new BooleanControl(element,getValueMethod,setValueMethod);
    }
 else     if (aClass.equals(String.class)) {
      return new StringControl(element,getValueMethod,setValueMethod);
    }
 else     if (aClass.equals(PsiClass.class)) {
      return new PsiClassControl(element,getStringMethod,setStringMethod);
    }
 else     if (Enum.class.isAssignableFrom(aClass)) {
      return new EnumControl(element,aClass,getStringMethod,setStringMethod);
    }
    throw new IllegalArgumentException("Not supported: " + aClass);
  }
 catch (  NoSuchMethodException e) {
    throw new RuntimeException(e);
  }
}
