{
  int rowYOffset=yOffset;
  for (int i=idxFrom; i < event.getCommitIdx(); i++) {
    final CommitI commitAt=myModel.getCommitAt(i);
    if (commitAt == null)     continue;
    final int commitWire=myModel.getCorrectedWire(commitAt);
    for (    Integer wire : wires) {
      verticalLine(g,selected,wiresGroups,grey,rowYOffset,i,wire,wireModificationSet,wire == commitWire);
    }
    rowYOffset+=myRowHeight;
  }
  final CommitI commitAt1=myModel.getCommitAt(event.getCommitIdx());
  final int eventWire=commitAt1 == null ? -1 : myModel.getCorrectedWire(commitAt1);
  final Set<Integer> skip=new HashSet<Integer>();
  final int finalRowYOffset=rowYOffset;
  Runnable drawEventRowLines=new Runnable(){
    public void run(){
      for (      Integer wire : wires) {
        if (skip.contains(wire))         continue;
        verticalLine(g,selected,wiresGroups,grey,finalRowYOffset,event.getCommitIdx(),wire,wireModificationSet,wire == eventWire);
      }
    }
  }
;
  if (commitAt1 == null) {
    drawEventRowLines.run();
    return;
  }
  g.setColor(getConnectorColor(g,selected,event.getCommitIdx(),eventWire,grey));
  int eventStartXPoint=startPoint(eventWire,wiresGroups) + ourLineWidth / 2;
  if (event.isStart() && event.isEnd()) {
    return;
  }
  if (event.isStart()) {
    skip.add(eventWire);
    doubleLine(g,eventStartXPoint,rowYOffset + myRowHeight / 2,eventStartXPoint,rowYOffset + myRowHeight);
  }
  if (event.isEnd()) {
    skip.add(eventWire);
    doubleLine(g,eventStartXPoint,rowYOffset,eventStartXPoint,rowYOffset + myRowHeight / 2);
  }
  final int[] commitsStarts=event.getCommitsStarts();
  final int[] wireEnds=event.getWireEnds();
  if (wireEnds != null) {
    for (    int end : wireEnds) {
      if (end == -1)       continue;
      final int wire=myModel.getCorrectedWire(myModel.getCommitAt(end));
      skip.add(wire);
    }
  }
  drawEventRowLines.run();
  if (commitsStarts != null) {
    for (    int commitsStart : commitsStarts) {
      if (commitsStart == -1)       continue;
      final CommitI commitAt=myModel.getCommitAt(commitsStart);
      final int wire=myModel.getCorrectedWire(commitAt);
      int startXPoint=startPoint(wire,wiresGroups) + ourLineWidth / 2;
      g.setColor(getConnectorColor(g,selected,event.getCommitIdx(),eventWire,grey));
      doubleLine(g,startXPoint,rowYOffset + myRowHeight,eventStartXPoint,rowYOffset + myRowHeight / 2);
    }
  }
  if (wireEnds != null) {
    for (    int end : wireEnds) {
      if (end == -1)       continue;
      final int wire=myModel.getCorrectedWire(myModel.getCommitAt(end));
      int startXPoint=startPoint(wire,wiresGroups) + ourLineWidth / 2;
      g.setColor(getConnectorColor(g,selected,event.getCommitIdx(),wire,grey));
      doubleLine(g,startXPoint,rowYOffset,eventStartXPoint,rowYOffset + myRowHeight / 2);
    }
  }
}
