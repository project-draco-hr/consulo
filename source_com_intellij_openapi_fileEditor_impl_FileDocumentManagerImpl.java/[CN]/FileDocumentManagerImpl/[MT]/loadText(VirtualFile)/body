{
  if (file.isDirectory())   return null;
  final FileType fileType=FileTypeManager.getInstance().getFileTypeByFile(file);
  if (fileType.equals(StdFileTypes.CLASS)) {
    return new CharArrayCharSequence(decompile(file));
  }
  if (fileType.isBinary())   return null;
  final String[] detectedLineSeparator=new String[1];
  final CharSequence result=LoadTextUtil.loadText(file,detectedLineSeparator);
  file.putUserData(DETECTED_LINE_SEPARATOR_KEY,detectedLineSeparator[0]);
  return result;
}
