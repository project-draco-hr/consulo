{
  if (myUnsavedDocuments.isEmpty())   return;
  HashSet<Document> failedToSave=new HashSet<Document>();
  while (true) {
    final Document[] unsavedDocuments=getUnsavedDocuments();
    int count=0;
    for (int i=0; i < unsavedDocuments.length; i++) {
      Document document=unsavedDocuments[i];
      if (failedToSave.contains(document))       continue;
      saveDocument(document);
      count++;
      if (myUnsavedDocuments.contains(document)) {
        failedToSave.add(document);
      }
    }
    if (count == 0)     break;
  }
}
