{
  List<Module> result=new WriteAction<List<Module>>(){
    protected void run(    Result<List<Module>> result) throws Throwable {
      Set<MavenProject> projectsToImport;
synchronized (myImportingQueueProjects) {
        projectsToImport=new THashSet<MavenProject>(myImportingQueueProjects);
        myImportingQueueProjects.clear();
      }
      MavenProjectImporter importer=new MavenProjectImporter(myProject,myProjectsTree,getFileToModuleMapping(),projectsToImport,moduleModelsProvider,getImportingSettings());
      schedulePostImportTasts(importer.importProject());
      result.setResult(importer.getCreatedModules());
    }
  }
.execute().getResultObject();
  VirtualFileManager.getInstance().refresh(isNormalProject());
  return result;
}
