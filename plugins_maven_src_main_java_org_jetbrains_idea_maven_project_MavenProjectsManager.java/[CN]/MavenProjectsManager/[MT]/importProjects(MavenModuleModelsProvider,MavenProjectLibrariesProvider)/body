{
  List<Module> result=new WriteAction<List<Module>>(){
    protected void run(    Result<List<Module>> result) throws Throwable {
      Set<MavenProject> projectsToImport;
synchronized (myProjectsToImport) {
        projectsToImport=new THashSet<MavenProject>(myProjectsToImport);
        myProjectsToImport.clear();
      }
      MavenProjectImporter importer=new MavenProjectImporter(myProject,myProjectsTree,getFileToModuleMapping(),projectsToImport,moduleModelsProvider,librariesProvider,getImportingSettings());
      long before=System.currentTimeMillis();
      schedulePostImportTasts(importer.importProject());
      long after=System.currentTimeMillis();
      System.out.println("imported in : " + (after - before) + "ms");
      result.setResult(importer.getCreatedModules());
    }
  }
.execute().getResultObject();
  VirtualFileManager.getInstance().refresh(isNormalProject());
  myImportingQueue.restartTimer();
  return result;
}
