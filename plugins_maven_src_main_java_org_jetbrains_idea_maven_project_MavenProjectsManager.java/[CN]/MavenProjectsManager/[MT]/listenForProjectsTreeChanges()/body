{
  myProjectsTree.addListener(new MavenProjectsTree.ListenerAdapter(){
    @Override public void projectsIgnoredStateChanged(    List<MavenProject> ignored,    List<MavenProject> unignored){
      scheduleImport();
    }
    @Override public void projectsUpdated(    List<MavenProject> updated,    List<MavenProject> deleted){
      System.out.println("updated: " + updated);
      myEmbeddersManager.clearCaches();
      unscheduleAllTasks(deleted);
      Set<MavenProject> toResolve=new THashSet<MavenProject>(updated);
      for (      MavenProject each : ContainerUtil.concat(updated,deleted)) {
        toResolve.addAll(myProjectsTree.getDependentProjects(each));
      }
      scheduleResolve(new ArrayList<MavenProject>(toResolve));
      Set<MavenProject> toImport=new THashSet<MavenProject>(updated);
      for (      MavenProject each : updated) {
        toImport.addAll(myProjectsTree.getDependentProjects(each));
      }
      scheduleImport(toImport);
    }
    @Override public void projectResolved(    MavenProject project,    org.apache.maven.project.MavenProject nativeMavenProject){
      System.out.println("resolved: " + project);
      if (project.hasUnresolvedPlugins()) {
        schedulePluginsResolving(project,nativeMavenProject);
      }
      scheduleImport(project);
    }
    @Override public void foldersResolved(    MavenProject project){
      System.out.println("folders: " + project);
      scheduleImport(project);
    }
  }
);
}
