{
  myProjectsTree.addListener(new MavenProjectsTree.ListenerAdapter(){
    @Override public void projectsIgnoredStateChanged(    List<MavenProject> ignored,    List<MavenProject> unignored,    boolean fromImport){
      if (!fromImport)       scheduleImport();
    }
    @Override public void projectsUpdated(    List<Pair<MavenProject,MavenProjectChanges>> updated,    List<MavenProject> deleted){
      myEmbeddersManager.clearCaches();
      unscheduleAllTasks(deleted);
      List<MavenProject> updatedProject=MavenUtil.collectFirsts(updated);
      Set<MavenProject> toResolve=new THashSet<MavenProject>(updatedProject);
      for (      MavenProject each : ContainerUtil.concat(updatedProject,deleted)) {
        toResolve.addAll(myProjectsTree.getDependentProjects(each));
      }
      Iterator<MavenProject> it=toResolve.iterator();
      while (it.hasNext()) {
        MavenProject each=it.next();
        if (each.hasErrors())         it.remove();
      }
      scheduleImport(updated);
      scheduleResolve(toResolve);
    }
    @Override public void projectResolved(    Pair<MavenProject,MavenProjectChanges> projectWithChanges,    org.apache.maven.project.MavenProject nativeMavenProject){
      MavenProject project=projectWithChanges.first;
      if (project.hasErrors())       return;
      if (project.hasUnresolvedPlugins()) {
        schedulePluginsResolving(project,nativeMavenProject);
      }
      scheduleImport(projectWithChanges);
    }
    @Override public void foldersResolved(    Pair<MavenProject,MavenProjectChanges> projectWithChanges){
      if (projectWithChanges.first.hasErrors())       return;
      scheduleImport(projectWithChanges);
    }
  }
);
}
