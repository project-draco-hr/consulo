{
  List<AnAction> actions=ContainerUtil.newArrayList();
  if (everywhere) {
    for (    String id : ((ActionManagerImpl)myActionManager).getActionIds()) {
      ProgressManager.checkCanceled();
      ContainerUtil.addIfNotNull(actions,myActionManager.getAction(id));
    }
  }
 else {
    actions.addAll(myModel.myActionGroups.keySet());
  }
  List<ActionWrapper> actionWrappers=ContainerUtil.newArrayList();
  for (  AnAction action : actions) {
    ProgressManager.checkCanceled();
    MatchMode mode=myModel.actionMatches(pattern,action);
    if (mode != MatchMode.NONE) {
      actionWrappers.add(new ActionWrapper(action,myModel.myActionGroups.get(action),mode,dataContext));
    }
  }
  return processItems(pattern,actionWrappers,consumer);
}
