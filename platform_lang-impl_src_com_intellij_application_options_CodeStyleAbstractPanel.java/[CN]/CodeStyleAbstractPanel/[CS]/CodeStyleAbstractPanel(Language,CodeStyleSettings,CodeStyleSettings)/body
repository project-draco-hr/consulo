{
  Disposer.register(this,myDiffCalculator);
  myCurrentSettings=currentSettings;
  mySettings=settings;
  myDefaultLanguage=defaultLanguage;
  myEditor=createEditor();
  if (myEditor != null) {
    myUpdateAlarm.setActivationComponent(myEditor.getComponent());
  }
  myUserActivityWatcher.addUserActivityListener(new UserActivityListener(){
    @Override public void stateChanged(){
      somethingChanged();
    }
  }
);
  updatePreview(true);
}
