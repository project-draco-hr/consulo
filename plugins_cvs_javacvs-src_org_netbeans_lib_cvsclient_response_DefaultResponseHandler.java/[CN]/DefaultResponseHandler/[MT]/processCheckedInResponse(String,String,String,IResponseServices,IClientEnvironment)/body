{
  final FileObject fileObject=clientEnvironment.getCvsFileSystem().getFileObject(relativeLocalDirectory,repositoryFilePath);
  final Entry entry=Entry.createEntryForLine(entryLine);
  if (entry.isAddedFile() || entry.isRemoved()) {
    entry.setDummyTimestamp();
  }
 else {
    final File file=clientEnvironment.getCvsFileSystem().getLocalFileSystem().getFile(fileObject);
    final String mode=responseServices.getNextFileMode();
    final boolean readOnly=mode != null && FileUtils.isReadOnlyMode(mode);
    clientEnvironment.getFileReadOnlyHandler().setFileReadOnly(file,readOnly);
    final Date date=new Date(file.lastModified());
    entry.parseConflictString(Entry.getLastModifiedDateFormatter().format(date));
  }
  clientEnvironment.getAdminWriter().setEntry(fileObject.getParent(),entry,clientEnvironment.getCvsFileSystem());
  responseServices.getEventSender().notifyEntryListeners(fileObject,entry);
}
