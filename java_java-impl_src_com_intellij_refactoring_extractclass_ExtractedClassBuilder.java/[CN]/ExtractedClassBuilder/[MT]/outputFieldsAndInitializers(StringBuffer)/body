{
  final List<PsiClassInitializer> remainingInitializers=new ArrayList<PsiClassInitializer>(initializers);
  for (  final PsiField field : fields) {
    final Iterator<PsiClassInitializer> initializersIterator=remainingInitializers.iterator();
    final int fieldOffset=field.getTextRange().getStartOffset();
    while (initializersIterator.hasNext()) {
      final PsiClassInitializer initializer=initializersIterator.next();
      if (initializer.getTextRange().getStartOffset() < fieldOffset) {
        outputMutatedInitializer(out,initializer);
        initializersIterator.remove();
      }
    }
    outputField(field,out);
    if (myFieldsNeedingGetter != null && myFieldsNeedingGetter.contains(field)) {
      out.append(PropertyUtil.generateGetterPrototype(field).getText());
      out.append("\n");
    }
    if (myFieldsNeedingSetters != null && myFieldsNeedingSetters.contains(field)) {
      out.append(PropertyUtil.generateSetterPrototype(field).getText());
      out.append("\n");
    }
  }
  for (  PsiClassInitializer initializer : remainingInitializers) {
    outputMutatedInitializer(out,initializer);
  }
}
