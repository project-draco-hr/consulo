{
  if (child.getElementType() == ElementType.LBRACE) {
    if (!result.isEmpty()) {
      final ArrayList<Block> subBlock=new ArrayList<Block>(result);
      result.clear();
      result.add(new SynteticCodeBlock(subBlock,null,mySettings,null,null));
    }
    child=createBlockFrom(result,child,ElementType.LBRACE,ElementType.RBRACE);
  }
 else   if (isStatement(child)) {
    createBlockFrom(result,child,null,null);
  }
 else   if (child.getElementType() == ElementType.LPARENTH && myNode.getElementType() == ElementType.EXPRESSION_LIST) {
    final Wrap wrap=Formatter.getInstance().createWrap(getWrapType(mySettings.CALL_PARAMETERS_WRAP),false);
    child=createSynteticBlock(result,child,ElementType.LPARENTH,ElementType.RPARENTH,Formatter.getInstance().getNoneIndent(),Formatter.getInstance().createContinuationIndent(),WrappingStrategy.createDoNotWrapCommaStrategy(wrap),AlignmentStrategy.createDoNotAlingCommaStrategy(createAlignment(mySettings.ALIGN_MULTILINE_PARAMETERS_IN_CALLS,null)));
  }
 else   if (child.getElementType() == ElementType.LPARENTH && myNode.getElementType() == ElementType.PARAMETER_LIST) {
    final Wrap wrap=Formatter.getInstance().createWrap(getWrapType(mySettings.METHOD_PARAMETERS_WRAP),false);
    child=createSynteticBlock(result,child,ElementType.LPARENTH,ElementType.RPARENTH,Formatter.getInstance().getNoneIndent(),Formatter.getInstance().createContinuationIndent(),WrappingStrategy.createDoNotWrapCommaStrategy(wrap),AlignmentStrategy.createDoNotAlingCommaStrategy(createAlignment(mySettings.ALIGN_MULTILINE_PARAMETERS,null)));
  }
 else   if (child.getElementType() == ElementType.LPARENTH && myNode.getElementType() == ElementType.PARENTH_EXPRESSION) {
    child=createSynteticBlock(result,child,ElementType.LPARENTH,ElementType.RPARENTH,Formatter.getInstance().getNoneIndent(),Formatter.getInstance().createContinuationIndent(),WrappingStrategy.DO_NOT_WRAP,AlignmentStrategy.createDoNotAlingCommaStrategy(createAlignment(mySettings.ALIGN_MULTILINE_PARENTHESIZED_EXPRESSION,null)));
  }
 else {
    Indent indent=null;
    if (shouldShift(child)) {
      indent=Formatter.getInstance().createNormalIndent();
    }
    final Block block=createJavaBlock(child,mySettings,indent,arrangeChildWrap(child,defaultWrap),arrangeChildAlignment(child,defaultAlignment));
    if (block instanceof AbstractJavaBlock) {
      final AbstractJavaBlock javaBlock=((AbstractJavaBlock)block);
      if (myNode.getElementType() == ElementType.METHOD_CALL_EXPRESSION && child.getElementType() == ElementType.REFERENCE_EXPRESSION) {
        javaBlock.setReservedWrap(getReservedWrap());
      }
 else       if (myNode.getElementType() == ElementType.REFERENCE_EXPRESSION && child.getElementType() == ElementType.METHOD_CALL_EXPRESSION) {
        javaBlock.setReservedWrap(getReservedWrap());
      }
 else       if (myNode.getElementType() == ElementType.BINARY_EXPRESSION) {
        javaBlock.setReservedWrap(defaultWrap);
      }
    }
    result.add(block);
  }
  return child;
}
