{
  if (myAlternateValue != null) {
    String result=myAlternateValue;
    if (mySeparatorCommentPrecedes) {
      LOG.debug("emitAllElements: separator comment precedes " + myName + "; original value="+ myAlternateValue.replaceAll("\n","#"));
      result=myAlternateValue.replaceFirst("\n[ \t\n]*\n","\n");
      LOG.debug("emitAllElements: resulting value=" + myAlternateValue.replaceAll("\n","#"));
    }
    buffer.append(result);
  }
 else {
    PsiElement curr=myStart;
    while (curr != null && curr != myEnd) {
      if (curr == myEnd.getParent()) {
        curr=curr.getFirstChild();
      }
 else {
        emitElement(curr,buffer,document);
        curr=curr.getNextSibling();
      }
    }
    if (curr == myEnd && myEnd != null) {
      emitElement(myEnd,buffer,document);
    }
  }
}
