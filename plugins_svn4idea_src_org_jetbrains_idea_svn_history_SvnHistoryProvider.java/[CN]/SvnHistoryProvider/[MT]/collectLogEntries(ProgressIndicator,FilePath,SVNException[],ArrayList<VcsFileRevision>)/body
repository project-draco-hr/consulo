{
  SVNWCClient wcClient=myVcs.createWCClient();
  SVNInfo info=wcClient.doInfo(new File(file.getIOFile().getAbsolutePath()),SVNRevision.WORKING);
  if (info == null) {
    exception[0]=new SVNException(SVNErrorMessage.create(SVNErrorCode.UNKNOWN,"File ''{0}'' is not under version control",file.getIOFile()));
    return;
  }
  final String url=info.getURL() == null ? null : info.getURL().toString();
  String relativeUrl=url;
  final String root=info.getRepositoryRootURL().toString();
  if (url != null && url.startsWith(root)) {
    relativeUrl=url.substring(root.length());
  }
  if (indicator != null) {
    indicator.setText2(SvnBundle.message("progress.text2.changes.establishing.connection",url));
  }
  final SVNRevision pegRevision=info.getRevision();
  SVNLogClient client=myVcs.createLogClient();
  client.doLog(new File[]{new File(file.getIOFile().getAbsolutePath())},SVNRevision.HEAD,SVNRevision.create(1),false,true,0,new MyLogEntryHandler(url,pegRevision,relativeUrl,result));
}
