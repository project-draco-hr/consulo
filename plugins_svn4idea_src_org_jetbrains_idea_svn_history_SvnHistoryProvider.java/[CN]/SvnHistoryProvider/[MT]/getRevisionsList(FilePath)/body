{
  final SVNException[] exception=new SVNException[1];
  final ArrayList<VcsFileRevision> result=new ArrayList<VcsFileRevision>();
  Runnable command=new Runnable(){
    public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator != null) {
        indicator.setText(SvnBundle.message("progress.text2.collecting.history",file.getName()));
      }
      try {
        if (myURL == null) {
          collectLogEntries(indicator,file,exception,result);
        }
 else {
          collectLogEntries2(indicator,result);
        }
      }
 catch (      SVNException e) {
        exception[0]=e;
      }
    }
  }
;
  if (ApplicationManager.getApplication().isDispatchThread()) {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(command,SvnBundle.message("progress.title.revisions.history"),false,myVcs.getProject());
  }
 else {
    command.run();
  }
  if (exception[0] != null) {
    throw new VcsException(exception[0]);
  }
  return result;
}
