{
  final String url=file.getPath().replace('\\','/');
  if (indicator != null) {
    indicator.setText2(SvnBundle.message("progress.text2.changes.establishing.connection",url));
  }
  SVNWCClient wcClient=myVcs.createWCClient();
  final SVNURL svnurl=SVNURL.parseURIEncoded(url);
  SVNInfo info=wcClient.doInfo(svnurl,SVNRevision.UNDEFINED,SVNRevision.HEAD);
  final String root=info.getRepositoryRootURL().toString();
  String relativeUrl=url;
  if (url.startsWith(root)) {
    relativeUrl=url.substring(root.length());
  }
  SVNLogClient client=myVcs.createLogClient();
  final boolean supports15=SvnUtil.checkRepositoryVersion15(myVcs,root);
  supports15Ref.set(supports15);
  client.doLog(svnurl,new String[]{},SVNRevision.UNDEFINED,SVNRevision.HEAD,SVNRevision.create(1),false,true,supports15,0,null,new RepositoryLogEntryHandler(myVcs,url,SVNRevision.UNDEFINED,relativeUrl,result,info.getRepositoryRootURL()));
}
