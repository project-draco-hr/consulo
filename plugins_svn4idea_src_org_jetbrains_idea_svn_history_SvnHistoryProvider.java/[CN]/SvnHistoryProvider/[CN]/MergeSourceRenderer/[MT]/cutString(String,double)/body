{
  final FontMetrics m=getFontMetrics(getFont());
  final Graphics g=getGraphics();
  if (m.getStringBounds(text,g).getWidth() < value)   return text;
  final String dots="...";
  final double dotsWidth=m.getStringBounds(dots,g).getWidth();
  if (dotsWidth >= value) {
    return dots;
  }
  for (int i=1; i < text.length(); i++) {
    if ((m.getStringBounds(text,0,i,g).getWidth() + dotsWidth) >= value) {
      if (i < 2)       return dots;
      return text.substring(0,i - 1) + dots;
    }
  }
  return text;
}
