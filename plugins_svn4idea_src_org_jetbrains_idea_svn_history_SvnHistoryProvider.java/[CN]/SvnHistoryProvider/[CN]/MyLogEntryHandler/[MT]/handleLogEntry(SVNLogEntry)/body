{
  if (myIndicator != null) {
    if (myIndicator.isCanceled()) {
      SVNErrorManager.cancel(SvnBundle.message("exception.text.update.operation.cancelled"));
    }
    myIndicator.setText2(SvnBundle.message("progress.text2.revision.processed",logEntry.getRevision()));
  }
  String copyPath=null;
  SVNLogEntryPath entryPath=(SVNLogEntryPath)logEntry.getChangedPaths().get(myLastPath);
  if (entryPath != null) {
    copyPath=entryPath.getCopyPath();
  }
 else {
    String path=SVNPathUtil.removeTail(myLastPath);
    while (path.length() > 0) {
      entryPath=(SVNLogEntryPath)logEntry.getChangedPaths().get(path);
      if (entryPath != null) {
        String relativePath=myLastPath.substring(entryPath.getPath().length());
        copyPath=entryPath.getCopyPath() + relativePath;
        break;
      }
      path=SVNPathUtil.removeTail(path);
    }
  }
  if (copyPath != null) {
    myLastPath=copyPath;
  }
  addResultRevision(logEntry,copyPath);
}
