{
  int end=prevEnd + diagLength;
  int prevDiagonal=tDiagonal + myMaxY;
  if (!afterVertical)   end++;
  if (afterVertical)   prevDiagonal++;
 else   prevDiagonal--;
  int x=end - 1;
  int y=x - tDiagonal;
  if (x == -1 || y == -1 || x >= myMaxX || y >= myMaxY)   return end;
  myPrevPathKey[tDiagonal + myMaxY]=myPathsMatrix.encodeStep(x,y,diagLength,afterVertical,myPrevPathKey[prevDiagonal]);
  return end;
}
