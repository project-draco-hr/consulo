{
  addElement(new Object(),myWeakArray);
  myWeakArray.add(new Object());
  addElement(new Object(),myWeakArray);
  myWeakArray.add(new Object());
  addElement(new Object(),myWeakArray);
  Iterator<Object> iterator=myWeakList.iterator();
  assertSame(myHolder.get(0),iterator.next());
  while (myHolder.get(1) != iterator.next())   ;
  gc();
  assertTrue(4 <= myWeakArray.getAliveCount());
  iterator.remove();
  gc();
  assertTrue(3 <= myWeakArray.getAliveCount());
  iterator.next();
  gc();
  assertTrue(2 <= myWeakArray.getAliveCount());
  assertSame(myHolder.get(2),iterator.next());
  assertFalse(iterator.hasNext());
  myHolder.remove(1);
  checkSameNotNulls(myWeakArray);
  myWeakArray.compress(-1);
  checkSameElements(myWeakArray);
}
