{
  if (f == PsiSubstitutor.EMPTY) {
    return g;
  }
  PsiSubstitutor subst=PsiSubstitutor.EMPTY;
  Set<PsiTypeParameter> base=g.getSubstitutionMap().keySet();
  for (Iterator<PsiTypeParameter> i=base.iterator(); i.hasNext(); ) {
    PsiTypeParameter p=i.next();
    PsiType type=g.substitute(p);
    subst=subst.put(p,type == null ? null : f.substitute(type));
  }
  return subst;
}
