{
  final MultiValuesMap<VirtualFile,Artifact> result=new MultiValuesMap<VirtualFile,Artifact>();
  final ArtifactManager artifactManager=ArtifactManager.getInstance(myProject);
  for (  final Artifact artifact : artifactManager.getArtifacts()) {
    ArtifactUtil.processFileOrDirectoryCopyElements(artifact,new PackagingElementProcessor<FileOrDirectoryCopyPackagingElement<?>>(){
      @Override public boolean process(      @NotNull FileOrDirectoryCopyPackagingElement<?> element,      @NotNull PackagingElementPath path){
        final VirtualFile root=element.findFile();
        if (root != null) {
          result.put(root,artifact);
        }
        return true;
      }
    }
,artifactManager.getResolvingContext(),true);
  }
  return result;
}
