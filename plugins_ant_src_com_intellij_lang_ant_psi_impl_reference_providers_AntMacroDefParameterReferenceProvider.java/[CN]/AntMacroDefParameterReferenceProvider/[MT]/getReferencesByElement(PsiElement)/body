{
  if (!(element instanceof AntStructuredElement)) {
    return PsiReference.EMPTY_ARRAY;
  }
  AntStructuredElement antElement=(AntStructuredElement)element;
  AntAllTasksContainer sequential=PsiTreeUtil.getParentOfType(element,AntAllTasksContainer.class);
  if (sequential == null) {
    return PsiReference.EMPTY_ARRAY;
  }
  AntMacroDef macrodef=PsiTreeUtil.getParentOfType(sequential,AntMacroDef.class);
  if (macrodef == null) {
    return PsiReference.EMPTY_ARRAY;
  }
  final List<PsiReference> refs=new ArrayList<PsiReference>();
  for (  XmlAttribute attr : antElement.getSourceElement().getAttributes()) {
    getXmlElementReferences(attr.getValueElement(),refs,antElement);
  }
  getXmlElementReferences(antElement.getSourceElement(),refs,antElement);
  return (refs.size() > 0) ? refs.toArray(new PsiReference[refs.size()]) : PsiReference.EMPTY_ARRAY;
}
