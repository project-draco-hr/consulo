{
  return new AbstractAddGroup(ProjectBundle.message("add.new.header.text")){
    @NotNull public AnAction[] getChildren(    @Nullable final AnActionEvent e){
      AnAction module=new AddModuleAction();
      ArrayList<AnAction> result=new ArrayList<AnAction>();
      result.add(module);
      final Collection<AnAction> actions=AddFacetToModuleAction.createAddFrameworkActions(myFacetEditorFacade,myProject);
      if (!actions.isEmpty()) {
        result.add(new Separator(ProjectBundle.message("add.group.framework.separator")));
        result.addAll(actions);
      }
      final NullableComputable<MyNode> selectedNodeRetriever=new NullableComputable<MyNode>(){
        public MyNode compute(){
          final TreePath selectionPath=myTree.getSelectionPath();
          final Object lastPathComponent=selectionPath == null ? null : selectionPath.getLastPathComponent();
          if (lastPathComponent instanceof MyNode) {
            return (MyNode)lastPathComponent;
          }
          return null;
        }
      }
;
      Collection<AnAction> actionsFromExtensions=new ArrayList<AnAction>();
      for (      final ModuleStructureExtension extension : ModuleStructureExtension.EP_NAME.getExtensions()) {
        actionsFromExtensions.addAll(extension.createAddActions(selectedNodeRetriever,TREE_UPDATER,myProject,myRoot));
      }
      if (!actionsFromExtensions.isEmpty() && !result.isEmpty()) {
        result.add(new Separator());
      }
      result.addAll(actionsFromExtensions);
      return result.toArray(new AnAction[result.size()]);
    }
  }
;
}
