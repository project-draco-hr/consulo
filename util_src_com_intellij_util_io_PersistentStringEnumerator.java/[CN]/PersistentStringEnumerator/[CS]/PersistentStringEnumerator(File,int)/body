{
  myStorage=new MappedFile(file,initialSize);
  if (myStorage.length() == 0) {
    myStorage.writeInt(DIRTY_MAGIC);
    allocVector();
  }
 else   if (myStorage.getInt(0) != CORRECTLY_CLOSED_MAGIC) {
    myStorage.close();
    throw new CorruptedException(file);
  }
 else {
    myStorage.putInt(0,DIRTY_MAGIC);
  }
}
