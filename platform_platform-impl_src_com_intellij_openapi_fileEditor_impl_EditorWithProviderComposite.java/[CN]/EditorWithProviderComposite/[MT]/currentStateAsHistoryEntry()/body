{
  final FileEditor[] editors=getEditors();
  final FileEditorState[] states=new FileEditorState[editors.length];
  for (int j=0; j < states.length; j++) {
    states[j]=editors[j].getState(FileEditorStateLevel.FULL);
    LOG.assertTrue(states[j] != null);
  }
  final int selectedProviderIndex=ArrayUtil.find(editors,getSelectedEditor());
  LOG.assertTrue(selectedProviderIndex != -1);
  final FileEditorProvider[] providers=getProviders();
  return new HistoryEntry(getFile(),providers,states,providers[selectedProviderIndex]);
}
