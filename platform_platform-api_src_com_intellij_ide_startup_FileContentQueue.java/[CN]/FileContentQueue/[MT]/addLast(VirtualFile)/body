{
  ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  FileContent content=new FileContent(file);
  if (file.isValid()) {
    try {
      final long contentLength=content.getLength();
      if (contentLength < SIZE_THRESHOLD) {
synchronized (this) {
          while (myTotalSize > SIZE_THRESHOLD) {
            if (indicator != null)             indicator.checkCanceled();
            wait(300);
          }
          myTotalSize+=contentLength;
        }
        content.getBytes();
      }
    }
 catch (    IOException e) {
      content.setEmptyContent();
    }
catch (    ProcessCanceledException e) {
      throw e;
    }
catch (    InterruptedException e) {
      return;
    }
catch (    Throwable e) {
      LOG.error(e);
    }
  }
 else {
    content.setEmptyContent();
  }
  put(content);
}
