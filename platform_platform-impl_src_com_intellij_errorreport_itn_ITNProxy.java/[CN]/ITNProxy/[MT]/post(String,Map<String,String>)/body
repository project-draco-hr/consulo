{
  HttpURLConnection connection=(HttpURLConnection)new URL(url).openConnection();
  connection.setReadTimeout(10 * 1000);
  connection.setConnectTimeout(10 * 1000);
  connection.setRequestMethod(HTTP_POST);
  connection.setDoInput(true);
  connection.setDoOutput(true);
  connection.setRequestProperty(HTTP_CONTENT_TYPE,HTTP_WWW_FORM);
  StringBuffer buffer=new StringBuffer();
  for (  String name : params.keySet()) {
    if (params.containsKey(name) && params.get(name) != null)     buffer.append(name + "=" + URLEncoder.encode(params.get(name),ENCODE)+ POST_DELIMETER);
 else     throw new IllegalArgumentException(name);
  }
  connection.setRequestProperty(HTTP_CONTENT_LENGTH,Integer.toString(buffer.length()));
  connection.getOutputStream().write(buffer.toString().getBytes());
  return connection;
}
