{
  String libraryName=makeLibraryName(artifact);
  Library library=getLibraryTable().getLibraryByName(libraryName);
  if (library == null) {
    library=getLibraryTable().createLibrary(libraryName);
    Library.ModifiableModel libraryModel=library.getModifiableModel();
    String artifactPath=artifact.getFile().getPath();
    setUrl(libraryModel,getUrl(artifactPath,null),OrderRootType.CLASSES);
    setUrl(libraryModel,getUrl(artifactPath,MavenConstants.SOURCES_CLASSIFIER),OrderRootType.SOURCES);
    setUrl(libraryModel,getUrl(artifactPath,MavenConstants.JAVADOC_CLASSIFIER),JavadocOrderRootType.getInstance());
    libraryModel.commit();
  }
  myRootModel.addLibraryEntry(library).setExported(isExportable);
  removeOldLibraryDependency(artifact);
}
