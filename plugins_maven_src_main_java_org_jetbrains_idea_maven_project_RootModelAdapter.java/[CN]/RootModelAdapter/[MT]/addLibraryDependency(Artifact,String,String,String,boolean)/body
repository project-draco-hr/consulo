{
  String libraryName=makeLibraryName(artifact);
  Library library=getLibraryTable().getLibraryByName(libraryName);
  if (library == null) {
    library=getLibraryTable().createLibrary(libraryName);
    Library.ModifiableModel libraryModel=library.getModifiableModel();
    setUrl(libraryModel,urlClasses,OrderRootType.CLASSES);
    setUrl(libraryModel,urlSources,OrderRootType.SOURCES);
    setUrl(libraryModel,urlJavadoc,JavadocOrderRootType.getInstance());
    libraryModel.commit();
  }
  myRootModel.addLibraryEntry(library).setExported(isExportable);
  removeOldLibraryDependency(artifact);
}
