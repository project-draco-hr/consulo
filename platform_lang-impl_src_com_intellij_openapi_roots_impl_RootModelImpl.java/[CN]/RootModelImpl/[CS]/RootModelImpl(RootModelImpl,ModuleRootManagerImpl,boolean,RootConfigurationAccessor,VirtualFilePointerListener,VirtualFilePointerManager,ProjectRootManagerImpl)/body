{
  myFilePointerManager=filePointerManager;
  myModuleRootManager=moduleRootManager;
  myProjectRootManager=projectRootManager;
  myModuleLibraryTable=new ModuleLibraryTable(this,myProjectRootManager);
  myWritable=writable;
  myConfigurationAccessor=rootConfigurationAccessor;
  LOG.assertTrue(!writable || virtualFilePointerListener == null);
  myVirtualFilePointerListener=virtualFilePointerListener;
  setExplodedFrom(rootModel,virtualFilePointerListener,filePointerManager);
  final Set<ContentEntry> thatContent=rootModel.myContent;
  for (  ContentEntry contentEntry : thatContent) {
    if (contentEntry instanceof ClonableContentEntry) {
      myContent.add(((ClonableContentEntry)contentEntry).cloneEntry(this));
    }
  }
  setOrderEntriesFrom(rootModel);
  copyContainersFrom(rootModel);
  for (  ModuleExtension extension : rootModel.myExtensions) {
    ModuleExtension model=extension.getModifiableModel(writable);
    Disposer.register(myDisposable,model);
    myExtensions.add(model);
  }
}
