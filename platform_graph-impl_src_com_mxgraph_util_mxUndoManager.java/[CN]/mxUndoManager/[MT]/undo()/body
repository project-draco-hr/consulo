{
  while (indexOfNextAdd > 0) {
    mxUndoableEdit edit=history.get(--indexOfNextAdd);
    edit.undo();
    if (edit.isSignificant()) {
      fireEvent(new mxEventObject(mxEvent.UNDO,"edit",edit));
      break;
    }
  }
}
