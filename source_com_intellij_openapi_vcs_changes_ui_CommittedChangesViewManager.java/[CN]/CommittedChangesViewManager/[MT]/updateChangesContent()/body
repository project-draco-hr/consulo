{
  final AbstractVcs[] vcss=myVcsManager.getAllActiveVcss();
  List<AbstractVcs> vcsWithProviders=new ArrayList<AbstractVcs>();
  for (  AbstractVcs vcs : vcss) {
    if (vcs.getCommittedChangesProvider() != null) {
      vcsWithProviders.add(vcs);
    }
  }
  CommittedChangesProvider oldProvider=myProvider;
  if (vcsWithProviders.size() == 0) {
    myProvider=null;
  }
 else   if (vcsWithProviders.size() == 1) {
    myProvider=vcsWithProviders.get(0).getCommittedChangesProvider();
  }
 else {
    myProvider=new CompositeCommittedChangesProvider(vcsWithProviders.toArray(new AbstractVcs[vcsWithProviders.size()]));
  }
  if (myProvider == null) {
    if (myContent != null) {
      myContentManager.removeContent(myContent);
    }
    myContent=null;
  }
 else {
    if (myContent == null) {
      if (myComponent == null) {
        myComponent=new CommittedChangesPanel(myProject,myProvider,myProvider.createDefaultSettings());
      }
 else {
        myComponent.setProvider(myProvider);
      }
      myContent=PeerFactory.getInstance().getContentFactory().createContent(myComponent,"Committed",false);
      myContent.setCloseable(false);
      myContentManager.addContent(myContent);
    }
  }
}
