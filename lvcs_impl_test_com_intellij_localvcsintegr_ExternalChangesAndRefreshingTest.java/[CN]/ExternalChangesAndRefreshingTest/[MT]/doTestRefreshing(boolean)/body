{
  String path1=createFileExternally("f1.java");
  String path2=createFileExternally("f2.java");
  assertFalse(hasVcsEntry(path1));
  assertFalse(hasVcsEntry(path2));
  final Semaphore s=new Semaphore(1);
  s.acquire();
  refreshVFS(async,new Runnable(){
    public void run(){
      s.release();
    }
  }
);
  s.acquire();
  assertTrue(hasVcsEntry(path1));
  assertTrue(hasVcsEntry(path2));
  assertEquals(2,getVcsRevisionsFor(root).size());
}
