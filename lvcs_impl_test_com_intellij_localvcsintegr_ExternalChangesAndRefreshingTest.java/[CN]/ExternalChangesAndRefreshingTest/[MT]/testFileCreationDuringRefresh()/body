{
  final String path=createFileExternally("f.java");
  changeFileExternally(path,"content");
  final String[] content=new String[1];
  VirtualFileListener l=new VirtualFileAdapter(){
    @Override public void fileCreated(    VirtualFileEvent e){
      try {
        if (!e.getFile().getPath().equals(path))         return;
        content[0]=new String(e.getFile().contentsToByteArray());
      }
 catch (      IOException ex) {
        throw new RuntimeException(ex);
      }
    }
  }
;
  addFileListenerDuring(l,new Callable(){
    public Object call() throws Exception {
      refreshVFS();
      return null;
    }
  }
);
  assertEquals("content",content[0]);
}
