{
  PsiElement parent=ref.getParent();
  HighlightInfo highlightInfo=null;
  if (parent instanceof PsiNewExpression && !PsiUtilCore.hasErrorElementChild(parent)) {
    if (((PsiNewExpression)parent).getType() instanceof PsiArrayType)     return null;
    if (resolved instanceof PsiClass) {
      highlightInfo=checkInstantiationOfAbstractClass((PsiClass)resolved,ref);
    }
  }
 else   if (parent instanceof PsiAnonymousClass && parent.getParent() instanceof PsiNewExpression && !PsiUtilCore.hasErrorElementChild(parent.getParent())) {
    PsiAnonymousClass aClass=(PsiAnonymousClass)parent;
    highlightInfo=checkClassWithAbstractMethods(aClass,ref.getTextRange());
  }
  return highlightInfo;
}
