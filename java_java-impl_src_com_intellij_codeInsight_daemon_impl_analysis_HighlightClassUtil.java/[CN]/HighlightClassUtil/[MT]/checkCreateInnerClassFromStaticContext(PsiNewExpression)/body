{
  PsiType type=expression.getType();
  PsiExpression qualifier=expression.getQualifier();
  if (type == null || type instanceof PsiArrayType || type instanceof PsiPrimitiveType)   return null;
  PsiClass aClass=PsiUtil.resolveClassInType(type);
  if (aClass == null)   return null;
  if (aClass instanceof PsiAnonymousClass) {
    aClass=((PsiAnonymousClass)aClass).getBaseClassType().resolve();
    if (aClass == null)     return null;
  }
  return checkCreateInnerClassFromStaticContext(expression,qualifier,aClass);
}
