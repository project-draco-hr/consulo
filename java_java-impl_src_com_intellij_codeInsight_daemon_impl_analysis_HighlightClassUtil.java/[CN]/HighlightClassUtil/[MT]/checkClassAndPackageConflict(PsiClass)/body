{
  String name=aClass.getQualifiedName();
  if (CommonClassNames.DEFAULT_PACKAGE.equals(name)) {
    String message=JavaErrorMessages.message("class.clashes.with.package",name);
    TextRange range=HighlightNamesUtil.getClassDeclarationTextRange(aClass);
    return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,range,message);
  }
  PsiElement file=aClass.getParent();
  if (file instanceof PsiJavaFile && !((PsiJavaFile)file).getPackageName().isEmpty()) {
    PsiElement directory=file.getParent();
    if (directory instanceof PsiDirectory) {
      String simpleName=aClass.getName();
      PsiDirectory subDirectory=((PsiDirectory)directory).findSubdirectory(simpleName);
      if (subDirectory != null && simpleName.equals(subDirectory.getName())) {
        String message=JavaErrorMessages.message("class.clashes.with.package",name);
        TextRange range=HighlightNamesUtil.getClassDeclarationTextRange(aClass);
        return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,range,message);
      }
    }
  }
  return null;
}
