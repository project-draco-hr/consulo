{
  PsiElement parent=ref.getParent();
  HighlightInfo highlightInfo=null;
  if (parent instanceof PsiNewExpression && !PsiUtilBase.hasErrorElementChild(parent)) {
    if (((PsiNewExpression)parent).getType() instanceof PsiArrayType)     return null;
    PsiElement refElement=ref.resolve();
    if (refElement instanceof PsiClass) {
      highlightInfo=checkInstantiationOfAbstractClass((PsiClass)refElement,ref);
    }
  }
 else   if (parent instanceof PsiAnonymousClass && parent.getParent() instanceof PsiNewExpression && !PsiUtilBase.hasErrorElementChild(parent.getParent())) {
    PsiAnonymousClass aClass=(PsiAnonymousClass)parent;
    highlightInfo=checkClassWithAbstractMethods(aClass,ref.getTextRange());
  }
  return highlightInfo;
}
