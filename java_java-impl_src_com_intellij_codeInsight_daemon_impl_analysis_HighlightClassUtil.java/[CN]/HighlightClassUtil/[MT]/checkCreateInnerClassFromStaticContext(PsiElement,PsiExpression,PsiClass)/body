{
  if (!PsiUtil.isInnerClass(aClass))   return null;
  PsiClass outerClass=aClass.getContainingClass();
  if (outerClass == null)   return null;
  PsiElement placeToSearchEnclosingFrom;
  if (qualifier != null) {
    PsiType qtype=qualifier.getType();
    placeToSearchEnclosingFrom=PsiUtil.resolveClassInType(qtype);
  }
 else {
    placeToSearchEnclosingFrom=element;
  }
  if (outerClass instanceof JspClass || hasEnclosingInstanceInScope(outerClass,placeToSearchEnclosingFrom,true))   return null;
  return reportIllegalEnclosingUsage(placeToSearchEnclosingFrom,aClass,outerClass,element);
}
