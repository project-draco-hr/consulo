{
  final int srcFileId=getFileId(srcFile);
  final SourceFileInfo srcInfo=preloadedInfo != null ? preloadedInfo : loadSourceInfo(srcFile);
  if (projects.size() > 0) {
    ScheduleOutputsForDeletionProc deletionProc=null;
    boolean isDirty=false;
    for (    String projectId : projects) {
      final boolean alreadyMarked;
synchronized (mySourcesToRecompile) {
        TIntHashSet set=mySourcesToRecompile.get(projectId);
        if (set == null) {
          set=new TIntHashSet();
          mySourcesToRecompile.put(projectId,set);
        }
        alreadyMarked=!set.add(srcFileId);
      }
      if (!alreadyMarked && srcInfo != null) {
        isDirty=true;
        srcInfo.updateTimestamp(projectId,-1L);
        srcInfo.processOutputPaths(projectId,deletionProc != null ? deletionProc : (deletionProc=new ScheduleOutputsForDeletionProc(srcFile.getUrl())));
      }
    }
    if (isDirty) {
      saveSourceInfo(srcFile,srcInfo);
    }
  }
}
