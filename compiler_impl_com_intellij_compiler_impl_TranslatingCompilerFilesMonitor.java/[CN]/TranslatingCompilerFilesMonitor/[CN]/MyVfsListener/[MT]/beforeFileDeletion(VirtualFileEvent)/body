{
  processRecursively(event.getFile(),new FileProcessor(){
    public void execute(    final VirtualFile file){
      final String filePath=file.getPath();
      final OutputFileInfo outputInfo=loadOutputInfo(file);
      if (outputInfo != null) {
        final String srcPath=outputInfo.getSourceFilePath();
        final VirtualFile srcFile=LocalFileSystem.getInstance().findFileByPath(srcPath);
        if (srcFile != null) {
          final SourceFileInfo srcInfo=loadSourceInfo(srcFile);
          if (srcInfo != null) {
            for (            String projectId : srcInfo.getProjectIds()) {
              if (srcInfo.isAssociated(projectId,filePath)) {
                addSourceForRecompilation(Collections.singletonList(projectId),srcFile,srcInfo);
                break;
              }
            }
          }
        }
synchronized (myOutputsToDelete) {
          myOutputsToDelete.remove(filePath);
        }
      }
      final SourceFileInfo srcInfo=loadSourceInfo(file);
      if (srcInfo != null) {
        final Collection<String> projects=srcInfo.getProjectIds();
        if (projects.size() > 0) {
          final ScheduleOutputsForDeletionProc deletionProc=new ScheduleOutputsForDeletionProc(file.getUrl());
          for (          String projectId : projects) {
            srcInfo.processOutputPaths(projectId,deletionProc);
            removeSourceForRecompilation(projectId,getFileId(file));
          }
        }
      }
    }
  }
);
}
