{
  final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  for (  Module module : ModuleManager.getInstance(project).getModules()) {
    final AndroidFacet facet=AndroidFacet.getInstance(module);
    if (facet != null) {
      ApplicationManager.getApplication().invokeAndWait(new Runnable(){
        @Override public void run(){
          AndroidCompileUtil.createGenModulesAndSourceRoots(facet);
        }
      }
,indicator != null ? indicator.getModalityState() : ModalityState.NON_MODAL);
    }
  }
}
