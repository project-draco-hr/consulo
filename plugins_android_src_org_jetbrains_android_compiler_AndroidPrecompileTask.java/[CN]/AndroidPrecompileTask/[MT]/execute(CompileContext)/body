{
  final Project project=context.getProject();
  if (!ProjectFacetManager.getInstance(project).hasFacets(AndroidFacet.ID)) {
    return true;
  }
  BuildManager.forceModelLoading(context);
  createGenModulesAndSourceRoots(project);
  if (!CompilerWorkspaceConfiguration.getInstance(project).useOutOfProcessBuild()) {
    return prepareForCompilation(context);
  }
  return true;
}
