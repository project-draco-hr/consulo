{
  myDeletedFiles=new HashSet<FilePath>();
  myCreatedFiles=new HashSet<FilePath>();
  myReplacedFiles=new HashSet<FilePath>();
  boolean hadChanges=!list.isEmpty();
  for (  IncomingChangeListData data : list) {
    debug("Checking incoming changelist " + data.changeList.getNumber());
    boolean updated=false;
    boolean anyChangeFound=false;
    for (    Change change : data.changeList.getChanges()) {
      if (data.accountedChanges.contains(change))       continue;
      final ContentRevision revision=(change.getAfterRevision() == null) ? change.getBeforeRevision() : change.getAfterRevision();
      final IncomingChangeState state=new IncomingChangeState(change,revision.getRevisionNumber().asString());
      final boolean changeFound=processIncomingChange(change,data,incomingFiles,state);
      state.logSelf();
      if (changeFound) {
        data.accountedChanges.add(change);
      }
 else {
        anyChangeFound=true;
      }
      updated|=changeFound;
    }
    if (updated || !anyChangeFound) {
      myAnyChanges=true;
      saveIncoming(data,!anyChangeFound);
    }
  }
  return myAnyChanges || hadChanges;
}
