{
  if (Comparing.equal(current.getValue(),element))   return current;
  if (current instanceof ProjectViewNode && !(((ProjectViewNode)current).contains(file)))   return null;
  final DefaultMutableTreeNode currentNode=getNodeForElement(current);
  boolean expanded=currentNode == null ? false : getTree().isExpanded(new TreePath(currentNode.getPath()));
  List<AbstractTreeNode> kids=getOrBuildChildren(current);
  for (int i=0; i < kids.size(); i++) {
    AbstractTreeNode node=kids.get(i);
    AbstractTreeNode result=select(node,file,element);
    if (result != null) {
      return result;
    }
 else {
      if (!expanded) {
        hideChildrenFor(node);
      }
    }
  }
  return null;
}
