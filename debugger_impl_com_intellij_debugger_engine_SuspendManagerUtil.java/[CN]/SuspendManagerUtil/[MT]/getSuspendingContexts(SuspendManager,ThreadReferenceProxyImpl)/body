{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  Set<ThreadReferenceProxyImpl> contextThreads=new HashSet<ThreadReferenceProxyImpl>();
  Set<SuspendContextImpl> result=new HashSet<SuspendContextImpl>();
  for (Iterator<SuspendContextImpl> iterator=suspendManager.getEventContexts().iterator(); iterator.hasNext(); ) {
    final SuspendContextImpl suspendContext=iterator.next();
    if (suspendContext.suspends(thread)) {
      ThreadReferenceProxyImpl contextThread=suspendContext.getThread();
      if (contextThreads.contains(contextThread)) {
        LOG.assertTrue(false,suspendContext.toString());
      }
      contextThreads.add(contextThread);
      result.add(suspendContext);
    }
  }
  return result;
}
