{
  final VirtualFile virtualFile=e.getData(PlatformDataKeys.VIRTUAL_FILE);
  LOG.assertTrue(virtualFile != null);
  final String path=virtualFile.getPath();
  final JavaFxSettings settings=JavaFxSettings.getInstance();
  String pathToSceneBuilder=settings.getPathToSceneBuilder();
  if (StringUtil.isEmptyOrSpaces(settings.getPathToSceneBuilder())) {
    final VirtualFile sceneBuilderFile=FileChooser.chooseFile(JavaFxSettingsConfigurable.createSceneBuilderDescriptor(),e.getProject(),null);
    if (sceneBuilderFile == null)     return;
    pathToSceneBuilder=sceneBuilderFile.getPath();
    settings.setPathToSceneBuilder(FileUtil.toSystemIndependentName(pathToSceneBuilder));
  }
  if (SystemInfo.isMac) {
    pathToSceneBuilder+="/Contents/MacOS/JavaAppLauncher";
  }
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  try {
    commandLine.setExePath(FileUtil.toSystemDependentName(pathToSceneBuilder));
    commandLine.addParameter(path);
    commandLine.createProcess();
  }
 catch (  ExecutionException ex) {
    Messages.showErrorDialog("Failed to start SceneBuilder: " + commandLine.getCommandLineString(),CommonBundle.getErrorTitle());
  }
}
