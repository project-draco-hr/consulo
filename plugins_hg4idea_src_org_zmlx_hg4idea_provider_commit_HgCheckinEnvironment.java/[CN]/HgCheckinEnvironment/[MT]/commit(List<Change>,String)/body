{
  List<VcsException> exceptions=new LinkedList<VcsException>();
  for (  Map.Entry<VirtualFile,List<HgFile>> entry : getFilesByRepository(changes).entrySet()) {
    HgCommitCommand command=new HgCommitCommand(project,entry.getKey(),preparedComment);
    command.setFiles(entry.getValue());
    try {
      command.execute();
    }
 catch (    HgCommandException e) {
      exceptions.add(new VcsException(e));
    }
  }
  return exceptions;
}
