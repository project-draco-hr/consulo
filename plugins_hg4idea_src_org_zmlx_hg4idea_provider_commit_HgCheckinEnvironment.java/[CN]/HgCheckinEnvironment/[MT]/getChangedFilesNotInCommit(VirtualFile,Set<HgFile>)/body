{
  List<HgRevisionNumber> parents=new HgWorkingCopyRevisionsCommand(project).parents(repo);
  HgStatusCommand statusCommand=new HgStatusCommand(project);
  statusCommand.setBaseRevision(parents.get(0));
  statusCommand.setIncludeUnknown(false);
  statusCommand.setIncludeIgnored(false);
  Set<HgChange> allChangedFilesInRepo=statusCommand.execute(repo);
  Set<HgFile> filesNotIncluded=new HashSet<HgFile>();
  for (  HgChange change : allChangedFilesInRepo) {
    HgFile beforeFile=change.beforeFile();
    HgFile afterFile=change.afterFile();
    if (!selectedFiles.contains(beforeFile)) {
      filesNotIncluded.add(beforeFile);
    }
 else     if (!selectedFiles.contains(afterFile)) {
      filesNotIncluded.add(afterFile);
    }
  }
  return filesNotIncluded;
}
