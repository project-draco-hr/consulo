{
  GitRootDetectInfo detectInfo=new GitRootDetector(myProject,myPlatformFacade).detect();
  if (!mySettings.SHOW_VCS_ERROR_NOTIFICATIONS) {
    return detectInfo;
  }
  Collection<VcsRootError> errors=scan(detectInfo);
  if (errors.isEmpty()) {
synchronized (NOTIFICATION_LOCK) {
      expireNotification();
    }
    return detectInfo;
  }
  Collection<String> unregisteredRoots=getUnregisteredRoots(errors);
  Collection<String> invalidRoots=getInvalidRoots(errors);
  String title=makeTitle(unregisteredRoots,invalidRoots);
  String description=makeDescription(unregisteredRoots,invalidRoots);
synchronized (NOTIFICATION_LOCK) {
    expireNotification();
    myNotification=createNotification(IMPORTANT_ERROR_NOTIFICATION,title,description,ERROR,new MyNotificationListener(myProject,mySettings,myPlatformFacade));
    myPlatformFacade.getNotificator(myProject).notify(myNotification);
  }
  return detectInfo;
}
