{
  return ApplicationManager.getApplication().runReadAction(new Computable<CompletionVariant[]>(){
    public CompletionVariant[] compute(){
      CompletionVariant[] variants=HtmlCompletionData.super.findVariants(position,file);
      if (ourStyleCompletionData != null && isStyleContext(position)) {
        final CompletionVariant[] styleVariants=ourStyleCompletionData.findVariants(position,file);
        variants=ArrayUtil.mergeArrays(variants,styleVariants,CompletionVariant.class);
      }
      if (ourScriptCompletionData != null && isScriptContext(position)) {
        final CompletionVariant[] scriptVariants=ourScriptCompletionData.findVariants(position,file);
        variants=ArrayUtil.mergeArrays(variants,scriptVariants,CompletionVariant.class);
      }
      return variants;
    }
  }
);
}
