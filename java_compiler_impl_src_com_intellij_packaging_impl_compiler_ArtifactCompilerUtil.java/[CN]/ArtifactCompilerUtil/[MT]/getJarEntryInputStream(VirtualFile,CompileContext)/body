{
  final String fullPath=sourceFile.getPath();
  final int jarEnd=fullPath.indexOf(JarFileSystem.JAR_SEPARATOR);
  LOG.assertTrue(jarEnd != -1,fullPath);
  String pathInJar=fullPath.substring(jarEnd + JarFileSystem.JAR_SEPARATOR.length());
  String jarPath=fullPath.substring(0,jarEnd);
  final ZipFile jarFile=new ZipFile(new File(FileUtil.toSystemDependentName(jarPath)));
  final ZipEntry entry=jarFile.getEntry(pathInJar);
  if (entry == null) {
    context.addMessage(CompilerMessageCategory.ERROR,"Cannot extract '" + pathInJar + "' from '"+ jarFile.getName()+ "': entry not found",null,-1,-1);
    return null;
  }
  return new BufferedInputStream(jarFile.getInputStream(entry)){
    @Override public void close() throws IOException {
      super.close();
      jarFile.close();
    }
  }
;
}
