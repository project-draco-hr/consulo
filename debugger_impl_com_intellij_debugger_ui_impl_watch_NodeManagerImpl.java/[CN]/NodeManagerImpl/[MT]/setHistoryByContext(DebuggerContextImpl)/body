{
  myHistories.put(myThreadId,getCurrentHistoryTree());
  final long contextThreadId=context.getThreadProxy().uniqueID();
  final DescriptorTree historyTree=myHistories.get(contextThreadId);
  final DescriptorTree descriptorTree=(historyTree != null) ? historyTree : new DescriptorTree(true);
  deriveHistoryTree(descriptorTree,context);
  myThreadId=contextThreadId;
}
