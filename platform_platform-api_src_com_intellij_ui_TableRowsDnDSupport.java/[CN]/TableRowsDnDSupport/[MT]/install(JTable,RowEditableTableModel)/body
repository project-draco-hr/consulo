{
  table.setDragEnabled(true);
  DnDSupport.createBuilder(table).setBeanProvider(new Function<DnDActionInfo,DnDDragStartBean>(){
    @Override public DnDDragStartBean fun(    DnDActionInfo info){
      final Point p=info.getPoint();
      final TableCellEditor cellEditor=table.getCellEditor();
      if (cellEditor != null) {
        cellEditor.stopCellEditing();
      }
      return new DnDDragStartBean(Integer.valueOf(table.rowAtPoint(p)));
    }
  }
).setDropHandler(new DnDDropHandler(){
    @Override public void drop(    DnDEvent event){
      final Object o=event.getAttachedObject();
      final Point p=event.getPoint();
      if (o instanceof Integer) {
        final int oldIndex=((Integer)o).intValue();
        final int newIndex=table.rowAtPoint(p);
        model.exchangeRows(oldIndex,newIndex);
      }
    }
  }
).install();
}
