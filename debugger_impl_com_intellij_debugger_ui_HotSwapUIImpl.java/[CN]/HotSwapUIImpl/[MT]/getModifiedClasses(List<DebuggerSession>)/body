{
  final Ref<HashMap<DebuggerSession,HashMap<String,HotSwapFile>>> classes=Ref.create(null);
  final HotSwapProgressImpl[] swapProgress=new HotSwapProgressImpl[1];
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    public void run(){
      swapProgress[0]=new HotSwapProgressImpl(myProject);
    }
  }
,ApplicationManager.getApplication().getDefaultModalityState());
  ProgressManager.getInstance().runProcess(new Runnable(){
    public void run(){
      classes.set(HotSwapManager.getModifiedClasses(sessions,swapProgress[0]));
      swapProgress[0].finished();
    }
  }
,swapProgress[0].getProgressIndicator());
  return classes.get();
}
