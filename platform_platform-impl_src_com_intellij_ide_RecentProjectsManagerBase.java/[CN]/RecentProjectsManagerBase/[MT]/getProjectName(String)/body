{
  final File file=new File(path);
  if (file.isDirectory()) {
    final File nameFile=new File(new File(path,Project.DIRECTORY_STORE_FOLDER),".name");
    if (nameFile.exists()) {
      try {
        final BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream(nameFile),"UTF-8"));
        try {
          final String name=in.readLine();
          if (name != null && name.length() > 0)           return name.trim();
        }
  finally {
          in.close();
        }
      }
 catch (      IOException ignored) {
      }
    }
    return file.getName();
  }
 else {
    return FileUtil.getNameWithoutExtension(file.getName());
  }
}
