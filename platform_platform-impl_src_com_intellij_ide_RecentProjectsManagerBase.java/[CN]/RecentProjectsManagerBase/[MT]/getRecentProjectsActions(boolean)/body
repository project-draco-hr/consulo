{
  validateRecentProjects();
  Project[] openProjects=ProjectManager.getInstance().getOpenProjects();
  ArrayList<AnAction> actions=new ArrayList<AnAction>();
  outer:   for (  String recentPath : myState.recentPaths) {
    for (    Project openProject : openProjects) {
      if (recentPath.equals(getProjectPath(openProject))) {
        continue outer;
      }
    }
    actions.add(new ReopenProjectAction(recentPath));
  }
  if (actions.size() == 0) {
    return new AnAction[0];
  }
  ArrayList<AnAction> list=new ArrayList<AnAction>();
  for (  AnAction action : actions) {
    list.add(action);
  }
  if (addClearListItem) {
    AnAction clearListAction=new AnAction(IdeBundle.message("action.clear.list")){
      public void actionPerformed(      AnActionEvent e){
        final int rc=Messages.showOkCancelDialog(e.getData(PlatformDataKeys.PROJECT),"Would you like to clear the list of recent projects?","Clear Recent Projects List",Messages.getQuestionIcon());
        if (rc == 0) {
          myState.recentPaths.clear();
        }
      }
    }
;
    list.add(Separator.getInstance());
    list.add(clearListAction);
  }
  return list.toArray(new AnAction[list.size()]);
}
