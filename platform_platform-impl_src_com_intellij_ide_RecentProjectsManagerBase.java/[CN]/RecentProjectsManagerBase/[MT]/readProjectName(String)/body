{
  final File file=new File(path);
  if (file.isDirectory()) {
    final File nameFile=new File(new File(path,Project.DIRECTORY_STORE_FOLDER),ProjectImpl.NAME_FILE);
    if (nameFile.exists()) {
      try {
        final BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream(nameFile),CharsetToolkit.UTF8_CHARSET));
        try {
          String name=in.readLine();
          if (!StringUtil.isEmpty(name)) {
            return name.trim();
          }
        }
  finally {
          in.close();
        }
      }
 catch (      IOException ignored) {
      }
    }
    return file.getName();
  }
 else {
    return FileUtilRt.getNameWithoutExtension(file.getName());
  }
}
