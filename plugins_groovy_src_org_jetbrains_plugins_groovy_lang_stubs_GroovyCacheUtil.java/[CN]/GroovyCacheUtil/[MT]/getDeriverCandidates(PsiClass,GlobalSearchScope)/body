{
  final String name=clazz.getName();
  if (name == null)   return GrTypeDefinition.EMPTY_ARRAY;
  final ArrayList<PsiClass> inheritors=new ArrayList<PsiClass>();
  final Collection<GrReferenceList> refLists=StubIndex.getInstance().get(GrDirectInheritorsIndex.KEY,name,clazz.getProject(),scope);
  for (  GrReferenceList list : refLists) {
    final PsiElement parent=list.getParent();
    if (parent instanceof GrTypeDefinition) {
      inheritors.add(GrClassSubstitutor.getSubstitutedClass(((GrTypeDefinition)parent)));
    }
  }
  final Collection<GrAnonymousClassDefinition> classes=StubIndex.getInstance().get(GrAnonymousClassIndex.KEY,name,clazz.getProject(),scope);
  for (  GrAnonymousClassDefinition aClass : classes) {
    inheritors.add(aClass);
  }
  return inheritors.toArray(new PsiClass[inheritors.size()]);
}
