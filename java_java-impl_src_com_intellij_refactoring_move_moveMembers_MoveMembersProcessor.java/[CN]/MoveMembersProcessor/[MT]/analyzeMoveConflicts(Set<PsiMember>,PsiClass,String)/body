{
  final LinkedHashMap<PsiElement,String> conflicts=new LinkedHashMap<PsiElement,String>();
  for (  final PsiMember member : membersToMove) {
    if (member instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)member;
      if (hasMethod(targetClass,method)) {
        String message=RefactoringBundle.message("0.already.exists.in.the.target.class",RefactoringUIUtil.getDescription(method,false));
        message=CommonRefactoringUtil.capitalize(message);
        conflicts.put(method,message);
      }
    }
 else     if (member instanceof PsiField) {
      PsiField field=(PsiField)member;
      if (hasField(targetClass,field)) {
        String message=RefactoringBundle.message("0.already.exists.in.the.target.class",RefactoringUIUtil.getDescription(field,false));
        message=CommonRefactoringUtil.capitalize(message);
        conflicts.put(field,message);
      }
    }
  }
  return analyzeAccessibilityConflicts(membersToMove,targetClass,conflicts,newVisibility);
}
