{
  final Map<String,String> map=new HashMap<String,String>();
  for (int idx=0; idx < chunks.length; idx++) {
    final ModuleChunk chunk=chunks[idx];
    final String outputPathRef=BuildProperties.propertyRef(BuildProperties.getOutputPathProperty(chunk.getName()));
    final String testsOutputPathRef=BuildProperties.propertyRef(BuildProperties.getOutputPathForTestsProperty(chunk.getName()));
    final Module[] modules=chunk.getModules();
    for (int i=0; i < modules.length; i++) {
      final Module module=modules[i];
      final ModuleRootManager rootManager=ModuleRootManager.getInstance(module);
      final String outputPathUrl=rootManager.getCompilerOutputPathUrl();
      if (outputPathUrl != null) {
        map.put(outputPathUrl,outputPathRef);
      }
      final String outputPathForTestsUrl=rootManager.getCompilerOutputPathForTestsUrl();
      if (outputPathForTestsUrl != null) {
        if (outputPathUrl == null || !outputPathForTestsUrl.equals(outputPathUrl)) {
          map.put(outputPathForTestsUrl,testsOutputPathRef);
        }
      }
    }
  }
  return map;
}
