{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  ApplicationManager.getApplication().assertIsDispatchThread();
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  if (settings.AUTO_POPUP_PARAMETER_INFO) {
    PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(editor.getDocument());
    if (file == null)     return;
    final PsiFile injectedFile=PsiDocumentManager.getInstance(myProject).getPsiFile(InjectedLanguageUtil.getEditorForInjectedLanguage(editor,file).getDocument());
    if (injectedFile == null)     return;
    final Runnable request=new Runnable(){
      public void run(){
        PsiDocumentManager.getInstance(myProject).commitAllDocuments();
        int lbraceOffset=editor.getCaretModel().getOffset() - 1;
        new ShowParameterInfoHandler().invoke(myProject,editor,injectedFile,lbraceOffset,highlightedMethod);
      }
    }
;
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        myAlarm.addRequest(request,settings.PARAMETER_INFO_DELAY);
      }
    }
);
  }
}
