{
  final MyItem root=new MyItem(myProject,rootPath,depth,myPartner.createStatusClient(),false);
  myQueue.add(root);
  while (!myQueue.isEmpty()) {
    myPartner.checkCanceled();
    final MyItem item=myQueue.removeFirst();
    final FilePath path=item.getPath();
    final File ioFile=path.getIOFile();
    if (!ioFile.exists())     continue;
    if (path.isDirectory()) {
      myHandler.setCurrentItem(item);
      try {
        final SvnStatusClientI client=item.getClient(ioFile);
        client.doStatus(ioFile,SVNRevision.WORKING,item.getDepth(),false,false,true,true,myHandler,null);
        myHandler.checkIfCopyRootWasReported(null,ioFile);
      }
 catch (      SVNException e) {
        handleStatusException(item,path,e);
      }
    }
 else {
      try {
        final SVNStatus status=item.getClient().doStatus(ioFile,false,false);
        myReceiver.process(path,status);
      }
 catch (      SVNException e) {
        handleStatusException(item,path,e);
      }
    }
  }
}
