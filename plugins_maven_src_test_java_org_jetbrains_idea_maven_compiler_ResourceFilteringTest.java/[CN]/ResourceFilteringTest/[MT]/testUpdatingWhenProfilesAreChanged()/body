{
  createProjectSubFile("resources/file.properties","value=${foo}");
  createProjectPom("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<profiles>"+ "  <profile>"+ "    <id>one</id>"+ "    <properties>"+ "      <foo>val1</foo>"+ "    </properties>"+ "  </profile>"+ "  <profile>"+ "    <id>two</id>"+ "    <properties>"+ "      <foo>val2</foo>"+ "    </properties>"+ "  </profile>"+ "</profiles>"+ "<build>"+ "  <resources>"+ "    <resource>"+ "      <directory>resources</directory>"+ "      <filtering>true</filtering>"+ "    </resource>"+ "  </resources>"+ "</build>");
  importProjectWithProfiles("one");
  compileModules("project");
  assertResult("target/classes/file.properties","value=val1");
  myProjectsManager.setActiveProfiles(Arrays.asList("two"));
  scheduleResolveAll();
  resolveDependenciesAndImport();
  compileModules("project");
  assertResult("target/classes/file.properties","value=val2");
}
