{
  final VirtualFile vf=ChangesUtil.findValidParentUnderReadAction(file);
  if (vf == null) {
    return null;
  }
  final VcsRoot[] vcsRoots=myVcsManager.getAllVcsRoots();
  VirtualFile rootCandidate=null;
  for (  VcsRoot root : vcsRoots) {
    if (VfsUtil.isAncestor(root.path,vf,false) && rootsToSave.contains(root.path)) {
      if (rootCandidate == null || VfsUtil.isAncestor(rootCandidate,root.path,true)) {
        rootCandidate=root.path;
      }
    }
  }
  return rootCandidate;
}
