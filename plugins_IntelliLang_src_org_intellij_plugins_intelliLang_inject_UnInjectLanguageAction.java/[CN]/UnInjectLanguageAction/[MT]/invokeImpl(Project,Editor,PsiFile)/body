{
  final PsiLanguageInjectionHost host=findInjectionHost(editor,file);
  if (host == null)   return;
  try {
    if (defaultFunctionalityWorked(host))     return;
    for (    LanguageInjectionSupport support : Extensions.getExtensions(LanguageInjectionSupport.EP_NAME)) {
      if (support.removeInjectionInPlace(host))       return;
    }
    TemporaryPlacesRegistry.getInstance(project).removeHostWithUndo(project,host);
  }
  finally {
    FileContentUtil.reparseFiles(project,Collections.<VirtualFile>emptyList(),true);
  }
}
