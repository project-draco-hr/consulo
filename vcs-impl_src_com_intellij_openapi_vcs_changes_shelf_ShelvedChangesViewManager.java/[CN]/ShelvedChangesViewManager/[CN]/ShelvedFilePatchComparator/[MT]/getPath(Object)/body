{
  String path=null;
  if (patch instanceof ShelvedBinaryFile) {
    final ShelvedBinaryFile binaryFile=(ShelvedBinaryFile)patch;
    path=binaryFile.BEFORE_PATH;
    path=(path == null) ? binaryFile.AFTER_PATH : path;
  }
 else   if (patch instanceof ShelvedChange) {
    final ShelvedChange shelvedChange=(ShelvedChange)patch;
    path=shelvedChange.getBeforePath().replace('/',File.separatorChar);
  }
  if (path == null) {
    return null;
  }
  final int pos=path.lastIndexOf(File.separatorChar);
  return (pos >= 0) ? path.substring(pos + 1) : path;
}
