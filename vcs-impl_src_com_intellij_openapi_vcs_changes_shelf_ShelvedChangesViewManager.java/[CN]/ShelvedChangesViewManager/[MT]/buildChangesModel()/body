{
  myRoot=new DefaultMutableTreeNode(ROOT_NODE_VALUE);
  DefaultTreeModel model=new DefaultTreeModel(myRoot);
  final List<ShelvedChangeList> changeLists=myShelveChangesManager.getShelvedChangeLists();
  myMoveRenameInfo.clear();
  for (  ShelvedChangeList changeList : changeLists) {
    DefaultMutableTreeNode node=new DefaultMutableTreeNode(changeList);
    model.insertNodeInto(node,myRoot,myRoot.getChildCount());
    List<ShelvedChange> changes=changeList.getChanges();
    for (    ShelvedChange change : changes) {
      DefaultMutableTreeNode pathNode=new DefaultMutableTreeNode(change);
      putMovedMessage(change.getBeforePath(),change.getAfterPath());
      model.insertNodeInto(pathNode,node,node.getChildCount());
    }
    List<ShelvedBinaryFile> binaryFiles=changeList.getBinaryFiles();
    for (    ShelvedBinaryFile file : binaryFiles) {
      DefaultMutableTreeNode pathNode=new DefaultMutableTreeNode(file);
      putMovedMessage(file.BEFORE_PATH,file.AFTER_PATH);
      model.insertNodeInto(pathNode,node,node.getChildCount());
    }
  }
  return model;
}
