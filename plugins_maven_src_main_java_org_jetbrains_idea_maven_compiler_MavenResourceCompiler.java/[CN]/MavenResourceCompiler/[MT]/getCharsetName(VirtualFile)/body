{
  EncodingManager manager=EncodingManager.getInstance();
  Charset charset;
  if (StdFileTypes.PROPERTIES.equals(sourceFile.getFileType())) {
    charset=manager.getDefaultCharsetForPropertiesFiles(sourceFile);
  }
 else {
    charset=manager.getEncoding(sourceFile,true);
  }
  if (charset == null)   charset=manager.getDefaultCharset();
  return charset.name();
}
