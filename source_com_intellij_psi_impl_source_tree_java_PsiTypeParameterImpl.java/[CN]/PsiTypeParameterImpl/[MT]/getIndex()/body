{
  long repositoryId=getRepositoryId();
  if (repositoryId >= 0) {
    return super.getIndex();
  }
 else {
    int ret=0;
    PsiElement element=getPrevSibling();
    while (element != null) {
      if (element instanceof PsiTypeParameter)       ret++;
      element=element.getPrevSibling();
    }
    return ret;
  }
}
