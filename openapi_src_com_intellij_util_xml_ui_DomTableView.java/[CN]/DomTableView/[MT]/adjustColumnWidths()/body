{
  final ColumnInfo[] columnInfos=myTableModel.getColumnInfos();
  for (int i=0; i < columnInfos.length; i++) {
    ColumnInfo columnInfo=columnInfos[i];
    final TableColumn column=myTable.getColumnModel().getColumn(i);
    int width=-1;
    for (int j=0; j < myTableModel.getRowCount(); j++) {
      Object t=myTableModel.getItems().get(j);
      final Component component=myTable.getCellRenderer(j,i).getTableCellRendererComponent(myTable,columnInfo.valueOf(t),false,false,j,i);
      final int prefWidth=component.getPreferredSize().width;
      if (prefWidth > width) {
        width=prefWidth;
      }
    }
    if (width > 0) {
      column.setPreferredWidth(width);
    }
  }
}
