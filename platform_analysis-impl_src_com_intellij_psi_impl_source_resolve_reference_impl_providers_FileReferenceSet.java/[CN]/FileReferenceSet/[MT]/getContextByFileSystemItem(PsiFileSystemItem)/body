{
  VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile != null) {
    final FileReferenceHelper[] helpers=FileReferenceHelperRegistrar.getHelpers();
    final ArrayList<PsiFileSystemItem> list=new ArrayList<>();
    final Project project=file.getProject();
    for (    FileReferenceHelper helper : helpers) {
      if (helper.isMine(project,virtualFile)) {
        if (!list.isEmpty() && helper.isFallback()) {
          continue;
        }
        list.addAll(helper.getContexts(project,virtualFile));
      }
    }
    if (!list.isEmpty()) {
      return list;
    }
    return getParentDirectoryContext();
  }
  return Collections.emptyList();
}
