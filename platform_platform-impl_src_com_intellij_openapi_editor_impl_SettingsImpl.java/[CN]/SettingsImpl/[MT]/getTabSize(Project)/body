{
  if (myTabSize != null)   return myTabSize.intValue();
  if (myCachedTabSize != null)   return myCachedTabSize.intValue();
  int tabSize;
  if (project == null || project.isDisposed()) {
    tabSize=CodeStyleSettingsManager.getSettings(null).getTabSize(null);
  }
 else {
    PsiFile file=getPsiFile(project);
    if (myEditor != null && myEditor.isViewer()) {
      FileType fileType=file != null ? file.getFileType() : null;
      tabSize=CodeStyleSettingsManager.getSettings(project).getIndentOptions(fileType).TAB_SIZE;
    }
 else {
      tabSize=CodeStyleSettingsManager.getSettings(project).getIndentOptionsByFile(file).TAB_SIZE;
    }
  }
  myCachedTabSize=Integer.valueOf(tabSize);
  return tabSize;
}
