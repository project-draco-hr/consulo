{
  if (myChoosenOne != -1) {
    return myReferences.get(myChoosenOne);
  }
  boolean flag=false;
  myChoosenOne=0;
  boolean strict=false;
  for (int i=0; i < myReferences.size(); i++) {
    final PsiReference reference=myReferences.get(i);
    if (reference.isSoft() && flag)     continue;
    if (!reference.isSoft() && !flag) {
      myChoosenOne=i;
      flag=true;
      continue;
    }
    if (reference.resolve() != null) {
      myChoosenOne=i;
      strict=true;
    }
    if (!strict) {
      final TextRange rangeInElement1=reference.getRangeInElement();
      final TextRange rangeInElement2=myReferences.get(myChoosenOne).getRangeInElement();
      if (rangeInElement1.getStartOffset() >= rangeInElement2.getStartOffset() && rangeInElement1.getEndOffset() <= rangeInElement2.getEndOffset()) {
        myChoosenOne=i;
      }
    }
  }
  return myReferences.get(myChoosenOne);
}
