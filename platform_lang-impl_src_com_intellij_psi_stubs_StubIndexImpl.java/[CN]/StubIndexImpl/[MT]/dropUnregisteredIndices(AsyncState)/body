{
  if (ApplicationManager.getApplication().isDisposed()) {
    return;
  }
  final Set<String> indicesToDrop=new HashSet<>(myPreviouslyRegistered != null ? myPreviouslyRegistered.registeredIndices : Collections.emptyList());
  for (  ID<?,?> key : state.myIndices.keySet()) {
    indicesToDrop.remove(key.toString());
  }
  if (!indicesToDrop.isEmpty()) {
    LOG.info("Dropping indices:" + StringUtil.join(indicesToDrop,","));
    for (    String s : indicesToDrop) {
      FileUtil.delete(IndexInfrastructure.getIndexRootDir(StubIndexKey.createIndexKey(s)));
    }
  }
}
