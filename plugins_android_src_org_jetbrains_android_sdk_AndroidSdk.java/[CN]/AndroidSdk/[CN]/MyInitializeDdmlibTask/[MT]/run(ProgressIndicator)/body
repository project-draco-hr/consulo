{
  indicator.setIndeterminate(true);
synchronized (myLock) {
    final long startTime=System.currentTimeMillis();
    final long timeout=8000;
    while (!myFinished && !myCanceled && !indicator.isCanceled()) {
      long wastedTime=System.currentTimeMillis() - startTime;
      if (wastedTime >= timeout) {
        break;
      }
      try {
        myLock.wait(Math.min(timeout - wastedTime,500));
      }
 catch (      InterruptedException e) {
        break;
      }
    }
  }
}
