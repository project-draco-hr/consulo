{
  int caretY=editor.getCaretModel().getVisualPosition().line * editor.getLineHeight();
  int viewAreaPosition=editor.getScrollingModel().getVisibleAreaOnScrollingFinished().y;
  return caretY - viewAreaPosition;
}
