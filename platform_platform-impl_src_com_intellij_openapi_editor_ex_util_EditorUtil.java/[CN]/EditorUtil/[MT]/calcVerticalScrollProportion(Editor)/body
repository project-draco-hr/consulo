{
  Rectangle viewArea=editor.getScrollingModel().getVisibleAreaOnScrollingFinished();
  if (viewArea.height == 0) {
    return 0;
  }
  LogicalPosition pos=editor.getCaretModel().getLogicalPosition();
  Point location=editor.logicalPositionToXY(pos);
  return (location.y - viewArea.y) / (float)viewArea.height;
}
