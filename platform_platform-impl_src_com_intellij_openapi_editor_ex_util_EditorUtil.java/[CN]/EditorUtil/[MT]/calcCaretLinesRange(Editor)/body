{
  VisualPosition caret=editor.getCaretModel().getVisualPosition();
  int visualLine=caret.line;
  LogicalPosition lineStart=editor.visualToLogicalPosition(new VisualPosition(visualLine,0));
  while (lineStart.softWrapLinesOnCurrentLogicalLine > 0) {
    lineStart=editor.visualToLogicalPosition(new VisualPosition(--visualLine,0));
  }
  visualLine=caret.line + 1;
  LogicalPosition nextLineStart=editor.visualToLogicalPosition(new VisualPosition(caret.line + 1,0));
  while (nextLineStart.line == lineStart.line) {
    nextLineStart=editor.visualToLogicalPosition(new VisualPosition(++visualLine,0));
  }
  return new Pair<LogicalPosition,LogicalPosition>(lineStart,nextLineStart);
}
