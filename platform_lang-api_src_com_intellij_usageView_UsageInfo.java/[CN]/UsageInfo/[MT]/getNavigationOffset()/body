{
  if (mySmartPointer instanceof SmartPsiFileRange) {
    final Segment range=mySmartPointer.getRange();
    if (range != null) {
      return range.getStartOffset();
    }
  }
  PsiElement element=getElement();
  if (element == null)   return -1;
  TextRange range=element.getTextRange();
  TextRange rangeInElement=getRangeInElement();
  if (rangeInElement == null)   return -1;
  return range.getStartOffset() + rangeInElement.getStartOffset();
}
