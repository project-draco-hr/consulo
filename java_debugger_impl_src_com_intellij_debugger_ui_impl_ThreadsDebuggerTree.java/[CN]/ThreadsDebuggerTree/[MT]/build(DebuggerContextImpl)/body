{
  DebuggerSession debuggerSession=context.getDebuggerSession();
  final RefreshThreadsTreeCommand command=new RefreshThreadsTreeCommand(debuggerSession);
  final int state=debuggerSession.getState();
  if (ApplicationManager.getApplication().isUnitTestMode() || state == DebuggerSession.STATE_PAUSED || state == DebuggerSession.STATE_RUNNING) {
    showMessage(MessageDescriptor.EVALUATING);
    context.getDebugProcess().getManagerThread().schedule(command);
  }
 else {
    showMessage(debuggerSession.getStateDescription());
  }
}
