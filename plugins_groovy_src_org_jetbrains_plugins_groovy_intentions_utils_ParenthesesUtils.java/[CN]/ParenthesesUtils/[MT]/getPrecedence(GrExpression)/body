{
  if (expression instanceof GrLiteral) {
    return LITERAL_PRECEDENCE;
  }
  if (expression instanceof GrReferenceExpression) {
    final GrReferenceExpression referenceExpression=(GrReferenceExpression)expression;
    return referenceExpression.getQualifierExpression() == null ? LITERAL_PRECEDENCE : METHOD_CALL_PRECEDENCE;
  }
  if (expression instanceof GrMethodCallExpression) {
    return METHOD_CALL_PRECEDENCE;
  }
  if (expression instanceof GrTypeCastExpression || expression instanceof GrNewExpression) {
    return TYPE_CAST_PRECEDENCE;
  }
  if (expression instanceof GrUnaryExpression) {
    return ((GrUnaryExpression)expression).isPostfix() ? POSTFIX_PRECEDENCE : PREFIX_PRECEDENCE;
  }
  if (expression instanceof GrBinaryExpression) {
    final IElementType sign=((GrBinaryExpression)expression).getOperationTokenType();
    return precedenceForBinaryOperator(sign);
  }
  if (expression instanceof GrConditionalExpression) {
    return CONDITIONAL_PRECEDENCE;
  }
  if (expression instanceof GrAssignmentExpression) {
    return ASSIGNMENT_PRECEDENCE;
  }
  if (expression instanceof GrParenthesizedExpression) {
    return PARENTHESIZED_PRECEDENCE;
  }
  if (expression instanceof GrInstanceOfExpression) {
    return INSTANCEOF_PRECEDENCE;
  }
  return -1;
}
