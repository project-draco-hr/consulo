{
  port=5000;
  int counter=0;
  IOException exception=null;
  ServerSocket socket=null;
  while (counter++ < 10) {
    try {
      socket=new ServerSocket(port);
      break;
    }
 catch (    IOException ex) {
      exception=ex;
      port=5000 + (int)(Math.random() * 5000);
    }
 finally {
      if (socket != null) {
        try {
          socket.close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
  if (socket == null) {
    throw new ExecutionException("Unable to bind to port " + port,exception);
  }
}
