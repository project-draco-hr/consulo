{
  VirtualFile repo=repositorySelector.getRepository();
  HgResolveCommand command=new HgResolveCommand(project);
  command.list(repo,new Consumer<Map<HgFile,HgResolveStatusEnum>>(){
    @Override public void consume(    Map<HgFile,HgResolveStatusEnum> status){
      DefaultListModel model=new DefaultListModel();
      for (      Map.Entry<HgFile,HgResolveStatusEnum> entry : status.entrySet()) {
        if (entry.getValue() == HgResolveStatusEnum.UNRESOLVED) {
          model.addElement(entry.getKey().getRelativePath());
        }
      }
      setOKActionEnabled(!model.isEmpty());
      if (model.isEmpty()) {
        model.addElement("No conflicts to resolve");
      }
      conflictsList.setModel(model);
    }
  }
);
}
