{
  if (nameIdentifier != null) {
    final TextRange range=nameIdentifier.getTextRange().shiftRight(PsiUtilBase.findInjectedElementOffsetInRealDocument(nameIdentifier));
    if (contains(range,offset))     return nameIdentifier;
  }
  for (  PsiReference ref : refs) {
    final PsiElement element=ref.getElement();
    final TextRange range=element.getTextRange().shiftRight(PsiUtilBase.findInjectedElementOffsetInRealDocument(ref.getElement()));
    if (contains(range,offset))     return element;
  }
  LOG.assertTrue(false);
  return null;
}
