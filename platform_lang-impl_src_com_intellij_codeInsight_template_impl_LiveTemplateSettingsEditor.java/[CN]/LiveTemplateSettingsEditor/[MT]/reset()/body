{
  myKeyField.setText(myTemplate.getKey());
  myDescription.setText(myTemplate.getDescription());
  if (myTemplate.getShortcutChar() == TemplateSettings.DEFAULT_CHAR) {
    myExpandByCombo.setSelectedItem(myDefaultShortcutItem);
  }
 else   if (myTemplate.getShortcutChar() == TemplateSettings.TAB_CHAR) {
    myExpandByCombo.setSelectedItem(TAB);
  }
 else   if (myTemplate.getShortcutChar() == TemplateSettings.ENTER_CHAR) {
    myExpandByCombo.setSelectedItem(ENTER);
  }
 else {
    myExpandByCombo.setSelectedItem(SPACE);
  }
  CommandProcessor.getInstance().executeCommand(null,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          final Document document=myTemplateEditor.getDocument();
          document.replaceString(0,document.getTextLength(),myTemplate.getString());
        }
      }
);
    }
  }
,"",null);
  Set<String> groups=new TreeSet<String>();
  SchemesManager<TemplateGroup,TemplateGroup> schemesManager=TemplateSettings.getInstance().getSchemesManager();
  for (  TemplateGroup group : myTemplateGroups) {
    if (!schemesManager.isShared(group)) {
      groups.add(group.getName());
    }
  }
  for (  final Object group : groups) {
    String groupName=(String)group;
    myGroupCombo.addItem(groupName);
  }
  myGroupCombo.setSelectedItem(myTemplate.getGroupName());
  myCbReformat.setSelected(myTemplate.isToReformat());
  for (  TemplateOptionalProcessor processor : myCbOptionalProcessorMap.keySet()) {
    JCheckBox cb=myCbOptionalProcessorMap.get(processor);
    cb.setSelected(myOptions.get(processor).booleanValue());
  }
  myExpandByCombo.setEnabled(!isEnabledInStaticContextOnly());
  updateHighlighter();
  validateOKButton();
  validateEditVariablesButton();
}
