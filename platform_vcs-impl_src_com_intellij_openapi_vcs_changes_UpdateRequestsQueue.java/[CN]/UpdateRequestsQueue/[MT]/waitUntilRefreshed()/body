{
  while (true) {
    final Semaphore semaphore=new Semaphore();
synchronized (myLock) {
      if (!myRequestSubmitted && !myRequestRunning) {
        return;
      }
      if (!myRequestRunning) {
        myFuture.set(myExecutor.submit(new MyRunnable()));
      }
      semaphore.down();
      myWaitingUpdateCompletionSemaphores.add(semaphore);
    }
    if (!semaphore.waitFor(100 * 1000)) {
      LOG.error("Too long VCS update");
      return;
    }
  }
}
