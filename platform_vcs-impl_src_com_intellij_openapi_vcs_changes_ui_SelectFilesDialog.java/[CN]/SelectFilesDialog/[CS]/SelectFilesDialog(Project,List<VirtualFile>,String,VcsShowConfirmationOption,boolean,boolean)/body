{
  super(project,false,confirmationOption,prompt,showDoNotAskOption);
  myFileList=new ChangesTreeList<VirtualFile>(project,originalFiles,selectableFiles,true,null,null){
    protected DefaultTreeModel buildTreeModel(    final List<VirtualFile> changes,    ChangeNodeDecorator changeNodeDecorator){
      return new TreeModelBuilder(project,false).buildModelFromFiles(changes);
    }
    protected List<VirtualFile> getSelectedObjects(    final ChangesBrowserNode node){
      return node.getAllFilesUnder();
    }
    protected VirtualFile getLeadSelectedObject(    final ChangesBrowserNode node){
      final Object o=node.getUserObject();
      if (o instanceof VirtualFile) {
        return (VirtualFile)o;
      }
      return null;
    }
  }
;
  myFileList.setChangesToDisplay(originalFiles);
  init();
}
