{
  super.visitConditionalExpression(expression);
  GrExpression condition=expression.getCondition();
  final GrExpression thenBranch=expression.getThenBranch();
  final GrExpression elseBranch=expression.getElseBranch();
  if (thenBranch == null || elseBranch == null) {
    return;
  }
  if (SideEffectChecker.mayHaveSideEffects(condition)) {
    return;
  }
  condition=(GrExpression)PsiUtil.skipParentheses(condition,false);
  if (!(condition instanceof GrBinaryExpression)) {
    return;
  }
  final GrBinaryExpression binaryCondition=(GrBinaryExpression)condition;
  final GrExpression lhs=binaryCondition.getLeftOperand();
  final GrExpression rhs=binaryCondition.getRightOperand();
  if (isInequality(binaryCondition) && isNull(elseBranch)) {
    if (isNull(lhs) && isCallTargeting(thenBranch,rhs) || isNull(rhs) && isCallTargeting(thenBranch,lhs)) {
      registerError(expression);
    }
  }
  if (isEquality(binaryCondition) && isNull(thenBranch)) {
    if (isNull(lhs) && isCallTargeting(elseBranch,rhs) || isNull(rhs) && isCallTargeting(elseBranch,lhs)) {
      registerError(expression);
    }
  }
}
