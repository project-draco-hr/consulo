{
  if (module2NatureNames.size() == 0) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      StartupManager.getInstance(project).runWhenProjectIsInitialized(new Runnable(){
        @Override public void run(){
          for (          EclipseNatureImporter importer : EclipseNatureImporter.EP_NAME.getExtensions()) {
            final String importerNatureName=importer.getNatureName();
            final List<Module> modulesToImport=new ArrayList<Module>();
            for (            Map.Entry<Module,Set<String>> entry : module2NatureNames.entrySet()) {
              final Module module=entry.getKey();
              final Set<String> natureNames=entry.getValue();
              if (natureNames.contains(importerNatureName)) {
                modulesToImport.add(module);
              }
            }
            if (modulesToImport.size() > 0) {
              importer.doImport(project,modulesToImport);
            }
          }
        }
      }
);
    }
  }
);
}
