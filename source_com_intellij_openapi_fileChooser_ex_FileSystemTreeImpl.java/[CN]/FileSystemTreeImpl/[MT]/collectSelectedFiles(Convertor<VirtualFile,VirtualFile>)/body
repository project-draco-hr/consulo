{
  TreePath[] paths=myTree.getSelectionPaths();
  if (paths == null)   return VirtualFile.EMPTY_ARRAY;
  ArrayList<VirtualFile> files=new ArrayList<VirtualFile>(paths.length);
  for (  TreePath path : paths) {
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    if (!(node.getUserObject() instanceof FileNodeDescriptor))     return VirtualFile.EMPTY_ARRAY;
    FileNodeDescriptor descriptor=(FileNodeDescriptor)node.getUserObject();
    VirtualFile file=fileConvertor.convert(descriptor.getElement().getFile());
    if (file != null && file.isValid())     files.add(file);
  }
  return files.toArray(new VirtualFile[files.size()]);
}
