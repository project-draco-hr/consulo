{
  Project project=e.getProject();
  if (project == null) {
    return;
  }
  Filter filter=myFilterModel.getFilter();
  final MultilinePopupBuilder popupBuilder=new MultilinePopupBuilder(project,myVariants,getPopupText(getTextValues(filter)),supportsNegativeValues());
  JBPopup popup=popupBuilder.createPopup();
  popup.addListener(new JBPopupAdapter(){
    @Override public void onClosed(    LightweightWindowEvent event){
      if (event.isOk()) {
        Collection<String> selectedValues=popupBuilder.getSelectedValues();
        if (selectedValues.isEmpty()) {
          myFilterModel.setFilter(null);
        }
 else {
          myFilterModel.setFilter(createFilter(selectedValues));
          rememberValuesInSettings(selectedValues);
        }
      }
    }
  }
);
  popup.showUnderneathOf(MultipleValueFilterPopupComponent.this);
}
