{
  List<Runnable> runnables=new ArrayList<Runnable>();
  Set<ImportOptimizer> optimizers=new HashSet<ImportOptimizer>();
  for (  PsiFile psiFile : file.getViewProvider().getAllFiles()) {
    ImportOptimizer optimizer=forLanguage(psiFile.getLanguage());
    if (optimizer != null && optimizer.supports(psiFile) && optimizers.add(optimizer)) {
      runnables.add(optimizer.processFile(psiFile));
    }
  }
  return runnables;
}
