{
  final DialogBuilder b=new DialogBuilder(myProject);
  JComponent createPatchPanel=p.getPanel();
  b.setPreferredFocusComponent(IdeFocusTraversalPolicy.getPreferredFocusedComponent(createPatchPanel));
  b.setTitle(message("create.patch.dialog.title"));
  b.setCenterPanel(createPatchPanel);
  p.installOkEnabledListener(new Consumer<Boolean>(){
    public void consume(    final Boolean aBoolean){
      b.setOkActionEnabled(aBoolean);
    }
  }
);
  return b.show() == DialogWrapper.OK_EXIT_CODE;
}
