{
  try {
    if (!myModel.canPerformCreatePatch()) {
      myGateway.showError(message("message.cannot.create.patch.because.of.unavailable.content"));
      return;
    }
    CreatePatchConfigurationPanel p=new CreatePatchConfigurationPanel();
    p.setFileName(getDefaultPatchFile());
    if (!showAsDialog(p))     return;
    myModel.createPatch(p.getFileName(),p.isReversePatch());
    close(0);
  }
 catch (  VcsException e) {
    myGateway.showError(message("message.error.during.create.patch",e));
  }
catch (  IOException e) {
    myGateway.showError(message("message.error.during.create.patch",e));
  }
}
