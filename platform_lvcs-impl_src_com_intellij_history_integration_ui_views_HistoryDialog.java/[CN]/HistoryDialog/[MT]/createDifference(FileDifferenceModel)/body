{
  final SimpleDiffRequest r=new SimpleDiffRequest(myProject,m.getTitle());
  new Task.Modal(myProject,message("message.processing.revisions"),false){
    public void run(    @NotNull final ProgressIndicator i){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        @Override public void run(){
          RevisionProcessingProgressAdapter p=new RevisionProcessingProgressAdapter(i);
          p.processingLeftRevision();
          DiffContent left=m.getLeftDiffContent(p);
          p.processingRightRevision();
          DiffContent right=m.getRightDiffContent(p);
          r.setContents(left,right);
          r.setContentTitles(m.getLeftTitle(p),m.getRightTitle(p));
        }
      }
);
    }
  }
.queue();
  return r;
}
