{
  JPanel root=new JPanel(new BorderLayout());
  ExcludingTraversalPolicy traversalPolicy=new ExcludingTraversalPolicy();
  root.setFocusTraversalPolicy(traversalPolicy);
  root.setFocusTraversalPolicyProvider(true);
  Pair<JComponent,Dimension> diffAndToolbarSize=createDiffPanel(root,traversalPolicy);
  myDiffView=new MyDiffContainer(diffAndToolbarSize.first);
  Disposer.register(this,myDiffView);
  JComponent revisionsSide=createRevisionsSide(diffAndToolbarSize.second);
  if (showRevisionsList()) {
    mySplitter=new Splitter(false,0.3f);
    mySplitter.setFirstComponent(revisionsSide);
    mySplitter.setSecondComponent(myDiffView);
    restoreSplitterProportion();
    root.add(mySplitter);
    setDiffBorder(IdeBorderFactory.createSimpleBorder(1,1,0,0));
  }
 else {
    setDiffBorder(IdeBorderFactory.createSimpleBorder(1,0,1,0));
    root.add(myDiffView);
  }
  return root;
}
