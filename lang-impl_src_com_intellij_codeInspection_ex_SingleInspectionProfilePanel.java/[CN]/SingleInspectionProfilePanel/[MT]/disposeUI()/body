{
  if (mySelectedProfile != null && getSavedProfile() != null) {
    ModifiableModel profile=mySelectedProfile.getParentProfile().getModifiableModel();
    ((InspectionProfileImpl)profile).getExpandedNodes().saveVisibleState(myTree);
    try {
      profile.save();
    }
 catch (    IOException e) {
      LOG.error(e);
    }
    profile.getProfileManager().updateProfile(profile);
  }
  myAlarm.cancelAllRequests();
  myProfileFilter.dispose();
  mySelectedProfile=null;
}
