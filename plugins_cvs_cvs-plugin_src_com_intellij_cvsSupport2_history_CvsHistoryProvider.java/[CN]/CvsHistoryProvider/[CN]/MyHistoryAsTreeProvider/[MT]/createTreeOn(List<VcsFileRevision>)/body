{
  Collections.sort(allRevisions,VcsFileRevisionComparator.INSTANCE);
  final List<TreeItem<VcsFileRevision>> result=new ArrayList<TreeItem<VcsFileRevision>>();
  TreeItem<VcsFileRevision> prevRevision=null;
  for (  final VcsFileRevision sortedRevision : allRevisions) {
    final CvsFileRevisionImpl cvsFileRevision=(CvsFileRevisionImpl)sortedRevision;
    final TreeItem<VcsFileRevision> treeItem=new TreeItem<VcsFileRevision>(cvsFileRevision);
    final TreeItem<VcsFileRevision> commonParent=getCommonParent(prevRevision,treeItem);
    if (commonParent != null) {
      commonParent.addChild(treeItem);
    }
 else {
      result.add(treeItem);
    }
    prevRevision=treeItem;
  }
  return result;
}
