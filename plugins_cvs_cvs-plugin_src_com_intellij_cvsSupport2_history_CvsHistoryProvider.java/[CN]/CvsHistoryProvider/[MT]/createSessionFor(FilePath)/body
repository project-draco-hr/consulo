{
  final List<VcsFileRevision> fileRevisionList=createRevisions(filePath);
  if (fileRevisionList == null)   return null;
  return new VcsAbstractHistorySession(fileRevisionList){
    @Nullable public VcsRevisionNumber calcCurrentRevisionNumber(){
      return getCurrentRevision(filePath);
    }
    @Override public synchronized boolean shouldBeRefreshed(){
      if (!CvsEntriesManager.getInstance().isActive()) {
        return false;
      }
      return super.shouldBeRefreshed();
    }
    public boolean isContentAvailable(    final VcsFileRevision revision){
      if (revision instanceof CvsFileRevision) {
        final CvsFileRevision cvsFileRevision=(CvsFileRevision)revision;
        return !cvsFileRevision.getState().equals(CvsChangeList.DEAD_STATE);
      }
      return super.isContentAvailable(revision);
    }
    public HistoryAsTreeProvider getHistoryAsTreeProvider(){
      return MyHistoryAsTreeProvider.getInstance();
    }
  }
;
}
