{
  myHandler.setProgressIndicator(ProgressManager.getInstance().getProgressIndicator());
  myResolveWorker=new ResolveWorker(myInfo.isUnderProjectRoot(),myProject);
  BlockReloadingUtil.block();
  myProjectLevelVcsManager.startBackgroundVcsOperation();
  try {
    myRecentlyUpdatedFiles=UpdatedFiles.create();
    myHandler.setUpdatedFiles(myRecentlyUpdatedFiles);
    indicatorOnStart();
    while (true) {
      doMerge();
      RefreshVFsSynchronously.updateAllChanged(myRecentlyUpdatedFiles);
      indicator.setText(VcsBundle.message("progress.text.updating.done"));
      if (myResolveWorker.needsInteraction(myRecentlyUpdatedFiles) || (!myMerger.hasNext()) || (!myExceptions.isEmpty())|| UpdatedFilesReverseSide.containErrors(myRecentlyUpdatedFiles)) {
        break;
      }
      accomulate();
    }
  }
  finally {
    myProjectLevelVcsManager.stopBackgroundVcsOperation();
  }
}
