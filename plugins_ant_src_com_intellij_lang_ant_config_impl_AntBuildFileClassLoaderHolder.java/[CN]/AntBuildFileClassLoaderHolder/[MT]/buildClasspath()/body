{
  final ArrayList<File> files=new ArrayList<File>();
  for (  final AntClasspathEntry entry : AntBuildFileImpl.ADDITIONAL_CLASSPATH.get(myOptions)) {
    entry.addFilesTo(files);
  }
  final AntInstallation antInstallation=AntBuildFileImpl.RUN_WITH_ANT.get(myOptions);
  final ClassLoader parentLoader=(antInstallation != null) ? antInstallation.getClassLoader() : null;
  if (parentLoader != null && files.size() == 0) {
    return parentLoader;
  }
  final List<URL> urls=new ArrayList<URL>(files.size());
  for (  File file : files) {
    try {
      urls.add(file.toURI().toURL());
    }
 catch (    MalformedURLException e) {
      LOG.debug(e);
    }
  }
  return new UrlClassLoader(urls,parentLoader,false,false);
}
