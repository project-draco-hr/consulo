{
  PsiUtil.checkIsIdentifier(myManager,name);
  if (PsiType.NULL.equals(type)) {
    throw new IncorrectOperationException("Cannot create field with type \"null\".");
  }
  final PsiJavaFile aFile=createDummyJavaFile(join("class _Dummy_ { private ",type.getCanonicalText()," ",name,"; }"));
  final PsiField field=aFile.getClasses()[0].getFields()[0];
  JavaCodeStyleManager.getInstance(myManager.getProject()).shortenClassReferences(field);
  return (PsiField)CodeStyleManager.getInstance(myManager.getProject()).reformat(field);
}
