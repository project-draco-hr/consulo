{
  PsiUtil.checkIsIdentifier(myManager,name);
  if (PsiType.NULL.equals(returnType)) {
    throw new IncorrectOperationException("Cannot create method with type \"null\".");
  }
  final PsiJavaFile aFile=createDummyJavaFile(join("class _Dummy_ { public " + returnType.getCanonicalText()," ",name,"() {} }"));
  final PsiMethod method=aFile.getClasses()[0].getMethods()[0];
  JavaCodeStyleManager.getInstance(myManager.getProject()).shortenClassReferences(method);
  return (PsiMethod)CodeStyleManager.getInstance(myManager.getProject()).reformat(method);
}
