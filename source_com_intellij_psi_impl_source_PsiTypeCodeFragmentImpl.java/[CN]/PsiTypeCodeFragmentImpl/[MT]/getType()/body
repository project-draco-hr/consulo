{
class SyntaxError extends RuntimeException {
  }
  try {
    accept(new PsiRecursiveElementWalkingVisitor(){
      @Override public void visitErrorElement(      PsiErrorElement element){
        throw new SyntaxError();
      }
    }
);
  }
 catch (  SyntaxError e) {
    throw new TypeSyntaxException();
  }
  PsiElement child=getFirstChild();
  while (child != null && !(child instanceof PsiTypeElement)) {
    child=child.getNextSibling();
  }
  PsiTypeElement typeElement=(PsiTypeElement)child;
  if (typeElement == null) {
    throw new NoTypeException();
  }
  PsiType type=typeElement.getType();
  PsiElement sibling=typeElement.getNextSibling();
  while (sibling instanceof PsiWhiteSpace) {
    sibling=sibling.getNextSibling();
  }
  if (sibling instanceof PsiJavaToken && "...".equals(sibling.getText())) {
    if (myAllowEllipsis)     return new PsiEllipsisType(type);
 else     throw new TypeSyntaxException();
  }
 else {
    return type;
  }
}
