{
  List<TextRange> result=super.select(e,editorText,cursorOffset,editor);
  if (ourStyleSelectioner != null) {
    List<TextRange> o=ourStyleSelectioner.select(e,editorText,cursorOffset,editor);
    if (o != null)     result.addAll(o);
  }
  final PsiElement parent=e.getParent();
  if (parent instanceof XmlComment) {
    result.addAll(SelectWordUtil.expandToWholeLine(editorText,parent.getTextRange(),true));
  }
  PsiFile psiFile=e.getContainingFile();
  FileType fileType=FileTypeManager.getInstance().getFileTypeByFile(psiFile.getVirtualFile());
  EditorHighlighter highlighter=HighlighterFactory.createHighlighter(e.getProject(),psiFile.getVirtualFile());
  highlighter.setText(editorText);
  HighlighterIterator i=highlighter.createIterator(cursorOffset);
  if (i.atEnd())   return result;
  final IElementType tokenType=i.getTokenType();
  if (tokenType == XmlTokenType.XML_ATTRIBUTE_VALUE_TOKEN || tokenType == XmlTokenType.XML_CHAR_ENTITY_REF || tokenType == XmlTokenType.XML_ENTITY_REF_TOKEN || tokenType == XmlTokenType.XML_NAME) {
    addAttributeSelection(result,i);
  }
  addTagSelection(editorText,cursorOffset,fileType,highlighter,result);
  return result;
}
