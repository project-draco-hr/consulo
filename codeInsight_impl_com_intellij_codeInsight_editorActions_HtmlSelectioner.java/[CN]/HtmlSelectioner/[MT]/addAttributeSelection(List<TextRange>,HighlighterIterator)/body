{
  result.add(new TextRange(i.getStart(),i.getEnd()));
  if (i.getTokenType() == XmlTokenType.XML_ATTRIBUTE_VALUE_TOKEN) {
    boolean hasQuotes=true;
    i.retreat();
    if (!i.atEnd()) {
      final IElementType tokenType=i.getTokenType();
      if (tokenType != XmlTokenType.XML_ATTRIBUTE_VALUE_START_DELIMITER) {
        hasQuotes=false;
      }
    }
    i.advance();
    i.advance();
    if (!i.atEnd()) {
      final IElementType tokenType=i.getTokenType();
      if (tokenType != XmlTokenType.XML_ATTRIBUTE_VALUE_END_DELIMITER) {
        hasQuotes=false;
      }
    }
    i.retreat();
    if (hasQuotes)     result.add(new TextRange(i.getStart() - 1,i.getEnd() + 1));
  }
  while (!i.atEnd() && i.getTokenType() != XmlTokenType.XML_NAME) {
    i.retreat();
  }
  if (i.atEnd())   return;
  i.retreat();
  IElementType tokenType=i.getTokenType();
  i.advance();
  if (tokenType == XmlTokenType.XML_START_TAG_START) {
    return;
  }
  int start=i.getStart();
  while (!i.atEnd() && i.getTokenType() != XmlTokenType.XML_ATTRIBUTE_VALUE_TOKEN && i.getTokenType() != XmlTokenType.XML_ATTRIBUTE_VALUE_END_DELIMITER) {
    i.advance();
  }
  if (i.atEnd())   return;
  int end=i.getEnd();
  if (i.getTokenType() != XmlTokenType.XML_ATTRIBUTE_VALUE_END_DELIMITER)   i.advance();
  if (!i.atEnd() && i.getTokenType() == XmlTokenType.XML_ATTRIBUTE_VALUE_END_DELIMITER) {
    end=i.getEnd();
  }
  result.add(new TextRange(start,end));
}
