{
  myRunning=false;
  if (myFile == null || myDocumentModificationStampBefore < 0) {
    return;
  }
  FileEditor editor=FileEditorManager.getInstance(myProject).getSelectedEditor(myFile);
  if (editor == null) {
    return;
  }
  UndoManager manager=UndoManager.getInstance(myProject);
  while (manager.isUndoAvailable(editor) && myDocument.getModificationStamp() != myDocumentModificationStampBefore) {
    manager.undo(editor);
  }
}
