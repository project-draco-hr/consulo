{
  Map<DfaValue,Collection<DfaMemoryStateImpl>> statesByValue=ContainerUtil.newHashMap();
  for (  DfaValue value : distincts.get(var)) {
    List<DfaMemoryStateImpl> compatible=ContainerUtil.filter(statesByEq.get(createPair(var,value)),new Condition<DfaMemoryStateImpl>(){
      @Override public boolean value(      DfaMemoryStateImpl state2){
        return seemCompatible(state,state2,var) && areVarStatesEqualModuloNullability(state,state2,var);
      }
    }
);
    if (compatible.isEmpty()) {
      return null;
    }
    statesByValue.put(value,compatible);
  }
  return statesByValue;
}
