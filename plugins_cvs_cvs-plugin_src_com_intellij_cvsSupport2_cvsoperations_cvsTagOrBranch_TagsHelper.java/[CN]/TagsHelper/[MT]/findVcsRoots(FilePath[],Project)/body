{
  if (files.length == 0) {
    return Collections.emptyList();
  }
  final Collection<FilePath> roots=new HashSet<FilePath>();
  final Set<VirtualFile> seen=new HashSet<VirtualFile>();
  for (  FilePath filePath : files) {
    final VirtualFile root=ProjectLevelVcsManager.getInstance(project).getVcsRootFor(filePath);
    if (root == null || !seen.add(root)) {
      continue;
    }
    roots.add(VcsContextFactory.SERVICE.getInstance().createFilePathOn(root));
  }
  return roots;
}
