{
  super("XHTML","text/xhtml","application/xhtml+xml");
  myFormattingModelBuilder=new FormattingModelBuilder(){
    @NotNull public FormattingModel createModel(    final PsiElement element,    final CodeStyleSettings settings){
      final PsiFile psiFile=element.getContainingFile();
      final FormattingDocumentModelImpl documentModel=FormattingDocumentModelImpl.createOn(psiFile);
      return new PsiBasedFormattingModel(psiFile,new XmlBlock(SourceTreeToPsiMap.psiElementToTree(psiFile),null,null,new HtmlPolicy(settings,documentModel),null,null),documentModel);
    }
  }
;
  SyntaxHighlighterFactory.LANGUAGE_FACTORY.addExpicitExtension(this,new SingleLazyInstanceSyntaxHighlighterFactory(){
    @NotNull protected SyntaxHighlighter createHighlighter(){
      return new XmlFileHighlighter(false,true);
    }
  }
);
}
