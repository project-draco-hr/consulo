{
  if (myBaseDir != null && ExcludedFileIndex.getInstance(myProject).isValidAncestor(myBaseDir,file)) {
    return myBaseDir;
  }
  final VirtualFile contentRoot=ProjectRootManager.getInstance(myProject).getFileIndex().getContentRootForFile(file);
  if (contentRoot != null) {
    return contentRoot;
  }
  return null;
}
