{
  int cnt=0;
  int newIndex=-1;
  final List<Change> changeList=new ArrayList<Change>();
  for (  Change change : changes) {
    if (!directoryOrBinary(change)) {
      changeList.add(change);
      if ((newIndex == -1) && selectionChecker.fun(change)) {
        newIndex=cnt;
      }
      ++cnt;
    }
  }
  if (changeList.isEmpty()) {
    return;
  }
  if (newIndex < 0) {
    newIndex=0;
  }
  showDiffImpl(project,ObjectsConvertor.convert(changeList,new Convertor<Change,DiffRequestPresentable>(){
    public ChangeDiffRequestPresentable convert(    Change o){
      return new ChangeDiffRequestPresentable(project,o);
    }
  }
),newIndex,actionsFactory,showFrame);
}
