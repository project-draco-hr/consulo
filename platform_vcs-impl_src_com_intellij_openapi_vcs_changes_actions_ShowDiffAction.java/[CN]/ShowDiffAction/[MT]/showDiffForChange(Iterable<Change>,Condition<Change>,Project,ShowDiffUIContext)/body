{
  int newIndex=-1;
  ChangeForDiffConvertor convertor=new ChangeForDiffConvertor(project,true);
  final List<DiffRequestPresentable> changeList=ContainerUtil.newArrayList();
  for (  Change change : changes) {
    if (!directoryOrBinary(change)) {
      DiffRequestPresentable presentable=convertor.convert(change);
      if (presentable != null) {
        if ((newIndex == -1) && selectionChecker.value(change)) {
          newIndex=changeList.size();
        }
        changeList.add(presentable);
      }
    }
  }
  if (changeList.isEmpty()) {
    return;
  }
  if (newIndex < 0) {
    newIndex=0;
  }
  showDiffImpl(project,changeList,newIndex,context);
}
