{
  if (!myComboBox.isEditable())   return;
  boolean focusOwner=myEditor != null && myEditor.getEditorComponent().isFocusOwner();
  int offset=0;
  TextWithImports oldItem=null;
  if (focusOwner) {
    offset=myEditor.getEditor().getCaretModel().getOffset();
    oldItem=(TextWithImports)myEditor.getItem();
  }
  myEditor=new MyEditorComboBoxEditor(getProject(),myFactory.getFileType());
  myComboBox.setEditor(myEditor);
  myComboBox.setRenderer(new EditorComboBoxRenderer(myEditor));
  myComboBox.setMaximumRowCount(MAX_ROWS);
  myEditor.setItem(item);
  if (focusOwner) {
    myEditor.getEditorComponent().requestFocus();
    if (oldItem.equals(item)) {
      myEditor.getEditor().getCaretModel().moveToOffset(offset);
    }
  }
}
