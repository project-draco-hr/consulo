{
  DataContext dataContext=e.getDataContext();
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  final Editor editor=(Editor)dataContext.getData(DataConstants.EDITOR);
  if (editor == null)   return;
  final PsiFile psiFile=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (psiFile == null)   return;
  int res=Messages.showOkCancelDialog(project,"Reload \"" + psiFile.getVirtualFile().getPresentableUrl() + "\" from disk and lose all changes?","Reload File",Messages.getWarningIcon());
  if (res != 0)   return;
  CommandProcessor.getInstance().executeCommand(project,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          PsiManager.getInstance(project).reloadFromDisk(psiFile);
          CommandProcessor.getInstance().markCurrentCommandAsComplex(project);
        }
      }
);
    }
  }
,"Reload from Disk",null);
}
