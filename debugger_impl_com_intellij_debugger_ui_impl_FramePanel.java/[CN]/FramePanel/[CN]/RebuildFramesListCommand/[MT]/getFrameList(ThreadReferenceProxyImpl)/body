{
  try {
    if (!getSuspendContext().getDebugProcess().getSuspendManager().isSuspended(thread)) {
      return Collections.emptyList();
    }
  }
 catch (  ObjectCollectedException e) {
    return Collections.emptyList();
  }
  List<StackFrameProxyImpl> frames;
  try {
    frames=thread.frames();
  }
 catch (  EvaluateException e) {
    frames=new ArrayList<StackFrameProxyImpl>();
  }
  final List<StackFrameDescriptorImpl> frameItems=new ArrayList<StackFrameDescriptorImpl>(frames.size());
  EvaluationContextImpl evaluationContext=getDebuggerContext().createEvaluationContext();
  final MethodsTracker tracker=new MethodsTracker();
  for (  StackFrameProxyImpl stackFrameProxy : frames) {
    StackFrameDescriptorImpl descriptor=new StackFrameDescriptorImpl(stackFrameProxy,tracker);
    descriptor.setContext(evaluationContext);
    descriptor.updateRepresentation(evaluationContext,DescriptorLabelListener.DUMMY_LISTENER);
    frameItems.add(descriptor);
  }
  return frameItems;
}
