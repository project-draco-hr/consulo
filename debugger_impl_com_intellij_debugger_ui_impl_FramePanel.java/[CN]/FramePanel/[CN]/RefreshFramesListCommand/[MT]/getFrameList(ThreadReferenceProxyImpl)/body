{
  if (!getSuspendContext().getDebugProcess().getSuspendManager().isSuspended(thread)) {
    return Collections.<StackFrameDescriptorImpl>emptyList();
  }
  java.util.List<StackFrameProxyImpl> frames;
  try {
    frames=thread.frames();
  }
 catch (  EvaluateException e) {
    frames=new ArrayList<StackFrameProxyImpl>();
  }
  final java.util.List<StackFrameDescriptorImpl> frameItems=new ArrayList<StackFrameDescriptorImpl>(frames.size());
  EvaluationContextImpl evaluationContext=getDebuggerContext().createEvaluationContext();
  for (Iterator<StackFrameProxyImpl> iterator=frames.iterator(); iterator.hasNext(); ) {
    StackFrameProxyImpl stackFrameProxy=iterator.next();
    StackFrameDescriptorImpl descriptor=new StackFrameDescriptorImpl(stackFrameProxy);
    descriptor.setContext(evaluationContext);
    descriptor.updateRepresentation(evaluationContext,DescriptorLabelListener.DUMMY_LISTENER);
    frameItems.add(descriptor);
  }
  return frameItems;
}
