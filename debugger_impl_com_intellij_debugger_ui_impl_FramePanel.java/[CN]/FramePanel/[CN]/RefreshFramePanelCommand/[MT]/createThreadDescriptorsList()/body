{
  final List<ThreadReferenceProxyImpl> threads=new ArrayList<ThreadReferenceProxyImpl>(getSuspendContext().getDebugProcess().getVirtualMachineProxy().allThreads());
  Collections.sort(threads,ThreadReferenceProxyImpl.ourComparator);
  final List<ThreadDescriptorImpl> descriptors=new ArrayList<ThreadDescriptorImpl>(threads.size());
  EvaluationContextImpl evaluationContext=getDebuggerContext().createEvaluationContext();
  for (  ThreadReferenceProxyImpl thread : threads) {
    ThreadDescriptorImpl threadDescriptor=new ThreadDescriptorImpl(thread);
    threadDescriptor.setContext(evaluationContext);
    threadDescriptor.updateRepresentation(evaluationContext,DescriptorLabelListener.DUMMY_LISTENER);
    descriptors.add(threadDescriptor);
  }
  return descriptors;
}
