{
  final ProjectRootManagerImpl projectRootManager=ProjectRootManagerImpl.getInstanceImpl(myProject);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      final LanguageLevel newLevel=(LanguageLevel)myLanguageLevelCombo.getSelectedItem();
      LanguageLevelProjectExtension.getInstance(myProject).setLanguageLevel(newLevel);
      ((ProjectEx)myProject).setSavePathsRelative(myRbRelativePaths.isSelected());
      try {
        myProjectJdkConfigurable.apply();
      }
 catch (      ConfigurationException e) {
      }
      String canonicalPath=myProjectCompilerOutput.getText();
      if (canonicalPath != null && canonicalPath.length() > 0) {
        try {
          canonicalPath=FileUtil.resolveShortWindowsName(canonicalPath);
        }
 catch (        IOException e) {
        }
        canonicalPath=FileUtil.toSystemIndependentName(canonicalPath);
        projectRootManager.setCompilerOutputUrl(VfsUtil.pathToUrl(canonicalPath));
      }
 else {
        projectRootManager.setCompilerOutputPointer(null);
      }
    }
  }
);
}
