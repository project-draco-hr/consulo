{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (areAssertionsEnabled() && !myWritingAllowed && !myErrorReported) {
    String message="Write access is allowed from write-safe contexts only. " + "Please ensure you're using invokeLater/invokeAndWait with a correct modality state (not \"any\"). " + "See TransactionGuard documentation for details."+ "\n  current modality=" + ModalityState.current() + "\n  known modalities="+ myWriteSafeModalities;
    LOG.error(message);
    myErrorReported=true;
  }
}
