{
  myTypes=types;
  myTypesToForceBuild=new HashSet<BuildTargetType<?>>();
  boolean forceBuildAllModuleBasedTargets=false;
  for (  BuildTargetType<?> type : typesToForceBuild) {
    myTypesToForceBuild.add(type);
    forceBuildAllModuleBasedTargets|=type instanceof JavaModuleBuildTargetType;
  }
  if (forceBuildAllModuleBasedTargets) {
    for (    BuildTargetType<?> targetType : TargetTypeRegistry.getInstance().getTargetTypes()) {
      if (targetType instanceof ModuleBasedBuildTargetType<?>) {
        myTypesToForceBuild.add(targetType);
      }
    }
  }
  myTargets=targets;
  myFiles=files;
}
