{
  vcs.createDirectory("dir");
  long timestamp=-1;
  vcs.createFile("dir/f",null,timestamp,false);
  assertEquals(2,vcs.getRevisionsFor("dir").size());
  d.beforeRefreshStart(false);
  vcs.createDirectory("dir/dir1");
  long timestamp3=-1;
  vcs.createFile("dir/f1",null,timestamp3,false);
  CacheUpdaterHelper.performUpdate(d);
  vcs.createDirectory("dir/dir2");
  long timestamp1=-1;
  vcs.createFile("dir/f2",null,timestamp1,false);
  CacheUpdaterHelper.performUpdate(d);
  d.afterRefreshFinish(false);
  assertEquals(3,vcs.getRevisionsFor("dir").size());
  long timestamp2=-1;
  vcs.createFile("dir/f3",null,timestamp2,false);
  assertEquals(4,vcs.getRevisionsFor("dir").size());
}
