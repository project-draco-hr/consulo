{
  vcs.createDirectory("dir");
  vcs.createFile("dir/f",null,-1);
  assertEquals(2,vcs.getRevisionsFor("dir").size());
  d.beforeRefreshStart(false);
  vcs.createDirectory("dir/dir1");
  vcs.createFile("dir/f1",null,-1);
  CacheUpdaterHelper.performUpdate(d);
  vcs.createDirectory("dir/dir2");
  vcs.createFile("dir/f2",null,-1);
  CacheUpdaterHelper.performUpdate(d);
  d.afterRefreshFinish(false);
  assertEquals(3,vcs.getRevisionsFor("dir").size());
  vcs.createFile("dir/f3",null,-1);
  assertEquals(4,vcs.getRevisionsFor("dir").size());
}
