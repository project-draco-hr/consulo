{
  long timestamp=-1;
  vcs.createFile("f1",cf("old"),timestamp,false);
  fireRefreshStarted();
  fireContentChanged(testFile("f1","new"));
  fireCreated(testFile("f2",""));
  d.afterRefreshFinish(false);
  assertEquals(c("old"),vcs.getEntry("f1").getContent());
  assertFalse(vcs.hasEntry("f2"));
  CacheUpdaterHelper.performUpdate(d);
  assertEquals(c("new"),vcs.getEntry("f1").getContent());
  assertTrue(vcs.hasEntry("f2"));
}
