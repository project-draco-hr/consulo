{
  final ID colorSpace=invoke("NSColorSpace","genericRGBColorSpace");
  final ID colorInSpace=invoke(color,"colorUsingColorSpace:",colorSpace);
  final long red=invoke(colorInSpace,"redComponent").longValue();
  final long green=invoke(colorInSpace,"greenComponent").longValue();
  final long blue=invoke(colorInSpace,"blueComponent").longValue();
  final long alpha=invoke(colorInSpace,"alphaComponent").longValue();
  final double realAlpha=alpha != 0 && (int)((alpha >> 52) & 0x7ffL) == 0 ? 1.0 : Double.longBitsToDouble(alpha);
  return new Color((float)Double.longBitsToDouble(red),(float)Double.longBitsToDouble(green),(float)Double.longBitsToDouble(blue),(float)realAlpha);
}
