{
  final Collection<TemplateImpl> templates=getTemplates(key);
  List<TemplateImpl> candidates=new ArrayList<TemplateImpl>();
  for (  TemplateImpl template : templates) {
    if (template.isDeactivated()) {
      continue;
    }
    if (shortcutChar != null && getShortcutChar(template) != shortcutChar) {
      continue;
    }
    if (hasArgument && !template.hasArgument()) {
      continue;
    }
    candidates.add(template);
  }
  return candidates;
}
