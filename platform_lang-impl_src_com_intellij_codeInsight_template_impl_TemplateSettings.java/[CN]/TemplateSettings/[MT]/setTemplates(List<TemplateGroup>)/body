{
  myTemplates.clear();
  myDeletedTemplates.clear();
  for (  TemplateImpl template : myDefaultTemplates.values()) {
    myDeletedTemplates.add(TemplateKey.keyOf(template));
  }
  mySchemesManager.clearAllSchemes();
  myMaxKeyLength=0;
  for (  TemplateGroup group : newGroups) {
    if (!group.isEmpty()) {
      mySchemesManager.addNewScheme(group,true);
      for (      TemplateImpl template : group.getElements()) {
        clearPreviouslyRegistered(template);
        addTemplateImpl(template);
      }
    }
  }
}
