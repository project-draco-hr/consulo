{
  final DefaultListModel model=new DefaultListModel();
  for (  final VcsFileRevision revision : revisions) {
    model.addElement(revision);
  }
  final JList list=new JList(model);
  list.setCellRenderer(new VcsRevisionListCellRenderer());
  Runnable runnable=new Runnable(){
    public void run(){
      int index=list.getSelectedIndex();
      if (index == -1 || index >= list.getModel().getSize()) {
        return;
      }
      VcsFileRevision revision=(VcsFileRevision)list.getSelectedValue();
      AbstractShowDiffAction.showDiff(vcs.getDiffProvider(),revision.getRevisionNumber(),file,project);
    }
  }
;
  if (list.getModel().getSize() == 0) {
    list.clearSelection();
  }
  new ListSpeedSearch(list);
  new PopupChooserBuilder(list).setSouthComponent(createCommentsPanel(list)).setTitle(VcsBundle.message("lookup.title.vcs.file.revisions")).setItemChoosenCallback(runnable).createPopup().showCenteredInCurrentWindow(project);
}
