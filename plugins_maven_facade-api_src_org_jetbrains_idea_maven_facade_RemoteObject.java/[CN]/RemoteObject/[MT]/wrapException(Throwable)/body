{
  boolean foreignException=false;
  Throwable each=ex;
  while (each != null) {
    String name=each.getClass().getName();
    if (!name.startsWith("java") && !name.startsWith(RemoteObject.class.getPackage().getName())) {
      foreignException=true;
      break;
    }
    each=each.getCause();
  }
  if (foreignException) {
    Throwable wrapper=new Throwable(ex.toString());
    wrapper.setStackTrace(ex.getStackTrace());
    ex=wrapper;
  }
  return ex;
}
