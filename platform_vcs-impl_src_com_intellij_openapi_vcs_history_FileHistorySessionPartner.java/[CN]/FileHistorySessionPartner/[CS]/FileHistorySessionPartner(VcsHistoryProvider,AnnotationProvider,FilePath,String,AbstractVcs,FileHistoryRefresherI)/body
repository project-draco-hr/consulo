{
  myVcsHistoryProvider=vcsHistoryProvider;
  myAnnotationProvider=annotationProvider;
  myPath=path;
  myLimitHistoryCheck=new LimitHistoryCheck(vcs.getProject(),path.getPath());
  myRepositoryPath=repositoryPath;
  myVcs=vcs;
  myRefresherI=refresherI;
  Consumer<List<VcsFileRevision>> sessionRefresher=new Consumer<List<VcsFileRevision>>(){
    @Override public void consume(    List<VcsFileRevision> vcsFileRevisions){
      mySession.getRevisionList().addAll(vcsFileRevisions);
      final VcsHistorySession copy=mySession.copyWithCachedRevision();
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          ensureHistoryPanelCreated().getHistoryPanelRefresh().consume(copy);
        }
      }
);
    }
  }
;
  myBuffer=new BufferedListConsumer<VcsFileRevision>(5,sessionRefresher,1000){
    @Override protected void invokeConsumer(    @NotNull Runnable consumerRunnable){
      consumerRunnable.run();
    }
  }
;
}
