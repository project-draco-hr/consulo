{
  if (mySession != null && session != null && mySession.getRevisionList().equals(session.getRevisionList()))   return;
  mySession=session;
  if (mySession != null) {
    mySession.shouldBeRefreshed();
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      final VcsHistorySession copy=mySession.copyWithCachedRevision();
      if (myFileHistoryPanel == null) {
        myFileHistoryPanel=createFileHistoryPanel(copy);
        createOrSelectContentIfNeeded();
      }
 else {
        myFileHistoryPanel.getHistoryPanelRefresh().consume(copy);
      }
    }
  }
);
}
