{
  final ArrayList<UsageInfo> extractedUsages=new ArrayList<UsageInfo>(usages.length);
  for (  UsageInfo usage : usages) {
    LOG.assertTrue(usage instanceof MoveRenameUsageInfo);
    if (usage.getReference() instanceof LightElement) {
      continue;
    }
    MoveRenameUsageInfo usageInfo=(MoveRenameUsageInfo)usage;
    if (usage instanceof RelatedUsageInfo) {
      if (((RelatedUsageInfo)usage).getRelatedElement() == element) {
        extractedUsages.add(usageInfo);
      }
    }
 else {
      PsiElement referenced=usageInfo.getReferencedElement();
      if (element.equals(referenced) || referenced != null && element == referenced.getNavigationElement()) {
        extractedUsages.add(usageInfo);
      }
    }
  }
  return extractedUsages.toArray(new UsageInfo[extractedUsages.size()]);
}
