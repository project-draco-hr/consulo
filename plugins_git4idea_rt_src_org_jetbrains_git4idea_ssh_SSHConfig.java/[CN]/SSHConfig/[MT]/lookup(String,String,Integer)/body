{
  final Host rc=new Host();
  entriesLoop:   for (  HostEntry e : myEntries) {
    for (    Pattern p : e.myNegative) {
      if (p.matcher(host).matches()) {
        continue entriesLoop;
      }
    }
    if (e.myExactPositive.contains(host)) {
      Host.merge(e.myHost,rc,rc);
      continue;
    }
    for (    Pattern p : e.myPositive) {
      if (p.matcher(host).matches()) {
        Host.merge(rc,e.myHost,rc);
      }
    }
  }
  if (user != null) {
    rc.myUser=user;
  }
  if (port != null) {
    rc.myPort=port;
  }
  if (rc.myHostName == null) {
    rc.myHostName=host;
  }
  rc.setDefaults();
  return rc;
}
