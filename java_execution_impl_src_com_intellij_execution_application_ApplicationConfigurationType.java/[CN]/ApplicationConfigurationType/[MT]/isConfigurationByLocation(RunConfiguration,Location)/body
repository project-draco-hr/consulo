{
  final PsiClass aClass=getMainClass(location.getPsiElement());
  if (aClass == null) {
    return false;
  }
  if (Comparing.equal(JavaExecutionUtil.getRuntimeQualifiedName(aClass),((ApplicationConfiguration)configuration).MAIN_CLASS_NAME)) {
    if (Comparing.equal(location.getModule(),((ApplicationConfiguration)configuration).getConfigurationModule().getModule())) {
      return true;
    }
    final Module configurationModule=((ApplicationConfiguration)configuration).getConfigurationModule().getModule();
    if (Comparing.equal(location.getModule(),configurationModule))     return true;
    final Module predefinedModule=((ApplicationConfiguration)((RunManagerImpl)RunManagerEx.getInstanceEx(location.getProject())).getConfigurationTemplate(myFactory).getConfiguration()).getConfigurationModule().getModule();
    return Comparing.equal(predefinedModule,configurationModule);
  }
  return false;
}
