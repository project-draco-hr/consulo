{
  myProcessedFiles=new HashSet<VirtualFile>();
  for (  File root : roots) {
    VirtualFile virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(root);
    if (virtualFile == null)     continue;
    collectSuitableFiles(virtualFile);
  }
  List<DetectedFrameworkDescription> result=new ArrayList<DetectedFrameworkDescription>();
  for (  FrameworkDetectorData data : myDetectorsByFileType.values()) {
    result.addAll(data.myDetector.detect(data.mySuitableFiles,myContext));
  }
  return result;
}
