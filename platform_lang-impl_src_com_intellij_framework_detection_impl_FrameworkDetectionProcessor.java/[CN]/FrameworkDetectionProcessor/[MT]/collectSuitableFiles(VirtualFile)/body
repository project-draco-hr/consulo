{
  if (myProgressIndicator.isCanceled())   return;
  if (file.isDirectory()) {
    file.getChildren();
    file.refresh(false,false);
    VirtualFile[] children=file.getChildren();
    for (    VirtualFile child : children) {
      collectSuitableFiles(child);
    }
    return;
  }
  final FileType fileType=file.getFileType();
  if (myDetectorsByFileType.containsKey(fileType)) {
    return;
  }
  myProgressIndicator.setText2(file.getPresentableUrl());
  FileContent fileContent=new FileContent(file);
  for (  FrameworkDetectorData detector : myDetectorsByFileType.get(fileType)) {
    if (detector.myFilePattern.accepts(fileContent)) {
      detector.mySuitableFiles.add(file);
    }
  }
}
