{
  final byte flags=PsiMethodStubImpl.packFlags(psi.isConstructor(),psi instanceof PsiAnnotationMethod,psi.isVarArgs(),psi.isDeprecated());
  String defValueText=null;
  if (psi instanceof PsiAnnotationMethod) {
    PsiAnnotationMemberValue defaultValue=((PsiAnnotationMethod)psi).getDefaultValue();
    if (defaultValue != null) {
      defValueText=defaultValue.getText();
    }
  }
  return new PsiMethodStubImpl(parentStub,psi.getName(),TypeInfo.create(psi.getReturnType(),psi.getReturnTypeElement()),flags,defValueText);
}
