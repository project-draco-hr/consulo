{
  return new Processor<PsiReference>(){
    public boolean process(    final PsiReference reference){
      final Object[] variants=reference.getVariants();
      if (variants != null) {
        for (        final Object variant : variants) {
          if (!processor.process(CompletionData.objectToLookupItem(variant)))           return false;
        }
      }
      return true;
    }
  }
;
}
