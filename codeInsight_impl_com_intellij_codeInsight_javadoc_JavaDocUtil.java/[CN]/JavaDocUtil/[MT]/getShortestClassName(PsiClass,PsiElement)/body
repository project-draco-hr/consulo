{
  String shortName=aClass.getName();
  PsiClass containingClass=aClass.getContainingClass();
  while (containingClass != null) {
    shortName=containingClass.getName() + "." + shortName;
    containingClass=aClass.getContainingClass();
  }
  LOG.assertTrue(shortName != null);
  String qName=aClass.getQualifiedName();
  if (qName == null)   return shortName;
  final PsiManager manager=aClass.getManager();
  return manager.areElementsEquivalent(aClass,manager.getResolveHelper().resolveReferencedClass(shortName,context)) ? shortName : qName;
}
