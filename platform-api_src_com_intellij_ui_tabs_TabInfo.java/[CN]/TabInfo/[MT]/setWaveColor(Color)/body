{
  if (myWaveColor == null && color == null)   return this;
  if (myWaveColor != null && myWaveColor.equals(color))   return this;
  myWaveColor=color;
  final SimpleTextAttributes[] attrs=myText.getAttributes().toArray(new SimpleTextAttributes[myText.getAttributes().size()]);
  final String[] texts=myText.getTexts().toArray(new String[myText.getTexts().size()]);
  clearText(false);
  for (int i=0; i < attrs.length; i++) {
    SimpleTextAttributes each=attrs[i];
    int style=each.getStyle();
    if (color == null) {
      style&=(~SimpleTextAttributes.STYLE_WAVED);
    }
 else {
      style|=SimpleTextAttributes.STYLE_WAVED;
    }
    final SimpleTextAttributes newStyle=each.derive(style,null,null,myWaveColor);
    append(texts[i],newStyle);
  }
  return this;
}
