{
  GitCommand command=new GitCommand(project,settings,GitUtil.getVcsRoot(project,filePath));
  List<VcsFileRevision> revisions=command.log(filePath);
  final FilePath path=filePath;
  return new VcsHistorySession(revisions){
    @Nullable protected VcsRevisionNumber calcCurrentRevisionNumber(){
      GitCommand command=new GitCommand(project,settings,GitUtil.getVcsRoot(project,path));
      try {
        return command.getCurrenFileRevision(path);
      }
 catch (      VcsException e) {
        if (log.isDebugEnabled()) {
          log.debug("Unable to retrieve the current revision number",e);
        }
        return null;
      }
    }
  }
;
}
