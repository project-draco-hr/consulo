{
  final AtomicBoolean commitSucceeded=new AtomicBoolean();
  myPlatformFacade.invokeAndWait(new Runnable(){
    @Override public void run(){
      cancelCherryPick(repository);
      List<Change> changes=commit.getCommit().getChanges();
      CherryPickCommitExecutor executor=new CherryPickCommitExecutor(myProject,myPlatformFacade,changes,commitMessage);
      boolean commitNotCancelled=myPlatformFacade.getVcsHelper(myProject).commitChanges(changes,changeList,commitMessage,executor);
      boolean success=commitNotCancelled && !executor.hasCommitFailed();
      if (success) {
        commit.setActualSubject(getSubjectFromCommitMessage(executor.getActualCommitMessage()));
      }
      commitSucceeded.set(success);
    }
  }
,ModalityState.NON_MODAL);
  return commitSucceeded.get();
}
