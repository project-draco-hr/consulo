{
  if (!checkAndScheduleFileTypeChange(parent,child,childAttributes)) {
    boolean upToDateIsDirectory=childAttributes.isDirectory();
    if (myIsRecursive || !upToDateIsDirectory) {
      myRefreshQueue.addLast(pair((NewVirtualFile)child,childAttributes));
    }
  }
}
