{
  Config config=GenerateToStringContext.getConfig();
  PsiField[] filteredFields=GenerateToStringUtils.filterAvailableFields(clazz,config.getFilterPattern());
  if (logger.isDebugEnabled())   logger.debug("Number of fields after filtering: " + filteredFields.length);
  PsiMethod[] filteredMethods;
  if (config.enableMethods) {
    filteredMethods=GenerateToStringUtils.filterAvailableMethods(clazz,config.getFilterPattern());
    if (logger.isDebugEnabled())     logger.debug("Number of methods after filtering: " + filteredMethods.length);
  }
 else {
    filteredMethods=PsiMethod.EMPTY_ARRAY;
  }
  return GenerateToStringUtils.combineToClassMemberList(filteredFields,filteredMethods);
}
