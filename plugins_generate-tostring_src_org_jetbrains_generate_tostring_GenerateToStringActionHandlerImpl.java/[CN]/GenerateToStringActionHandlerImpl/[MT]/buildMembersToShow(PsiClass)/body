{
  Project project=clazz.getProject();
  PsiAdapter psi=PsiAdapterFactory.getPsiAdapter();
  Config config=GenerateToStringContext.getConfig();
  PsiField[] filteredFields=GenerateToStringUtils.filterAvailableFields(project,psi,clazz,config.getFilterPattern());
  if (logger.isDebugEnabled())   logger.debug("Number of fields after filtering: " + filteredFields.length);
  if (logger.isDebugEnabled())   logger.debug("Number of fields after filtering: " + filteredFields.length);
  PsiMethod[] filteredMethods=new PsiMethod[0];
  if (config.enableMethods) {
    filteredMethods=GenerateToStringUtils.filterAvailableMethods(psi,clazz,config.getFilterPattern());
    if (logger.isDebugEnabled())     logger.debug("Number of methods after filtering: " + filteredMethods.length);
  }
  return GenerateToStringUtils.combineToClassMemberList(filteredFields,filteredMethods);
}
