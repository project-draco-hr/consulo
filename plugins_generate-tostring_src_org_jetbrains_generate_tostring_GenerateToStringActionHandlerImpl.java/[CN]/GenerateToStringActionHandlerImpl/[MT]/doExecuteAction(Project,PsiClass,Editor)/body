{
  logger.debug("+++ doExecuteAction - START +++");
  if (logger.isDebugEnabled()) {
    logger.debug("Current project " + project.getName());
  }
  PsiElementClassMember[] dialogMembers=buildMembersToShow(clazz);
  final MemberChooserBuilder<PsiElementClassMember> builder=new MemberChooserBuilder<PsiElementClassMember>(project);
  final MemberChooserHeaderPanel header=new MemberChooserHeaderPanel(clazz);
  builder.setHeaderPanel(header);
  boolean isJdk15Enabled=PsiUtil.isLanguageLevel5OrHigher(clazz);
  builder.overrideAnnotationVisible(isJdk15Enabled);
  builder.setTitle(calcCurrentTitle());
  final MemberChooser dialog=builder.createBuilder(dialogMembers);
  dialog.setCopyJavadocVisible(false);
  dialog.selectElements(dialogMembers);
  header.setChooser(dialog);
  logger.debug("Displaying member chooser dialog");
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      dialog.show();
      if (MemberChooser.OK_EXIT_CODE == dialog.getExitCode()) {
        Collection<PsiMember> selectedMembers=GenerateToStringUtils.convertClassMembersToPsiMembers(dialog.getSelectedElements());
        final TemplateResource template=header.getSelectedTemplate();
        TemplatesManager.getInstance().setDefaultTemplate(template);
        if (template.isValidTemplate()) {
          GenerateToStringWorker.executeGenerateActionLater(clazz,editor,selectedMembers,template,dialog.isInsertOverrideAnnotation());
        }
 else {
          Messages.showWarningDialog("The template chosen is invalid.","Broken Template");
        }
      }
    }
  }
);
  logger.debug("+++ doExecuteAction - END +++");
}
