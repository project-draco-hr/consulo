{
  for (int j=0; j < parent.getChildCount(); j++) {
    final TreeNode child=parent.getChildAt(j);
    if (!(child instanceof DefaultMutableTreeNode))     continue;
    final DefaultMutableTreeNode childNode=(DefaultMutableTreeNode)child;
    final Object userObject=childNode.getUserObject();
    if (pathElement.matchedWithByObject(userObject))     return childNode;
  }
  for (int j=0; j < parent.getChildCount(); j++) {
    final TreeNode child=parent.getChildAt(j);
    if (!(child instanceof DefaultMutableTreeNode))     continue;
    final DefaultMutableTreeNode childNode=(DefaultMutableTreeNode)child;
    final Object userObject=childNode.getUserObject();
    if (!(userObject instanceof NodeDescriptor))     continue;
    final NodeDescriptor nodeDescriptor=(NodeDescriptor)userObject;
    if (pathElement.matchedWith(nodeDescriptor))     return childNode;
  }
  if (parent.getChildCount() > 0) {
    int index=pathElement.myItemIndex;
    if (index >= parent.getChildCount()) {
      index=parent.getChildCount() - 1;
    }
    index=Math.max(0,index);
    final TreeNode child=parent.getChildAt(index);
    if (child instanceof DefaultMutableTreeNode) {
      return (DefaultMutableTreeNode)child;
    }
  }
  return null;
}
