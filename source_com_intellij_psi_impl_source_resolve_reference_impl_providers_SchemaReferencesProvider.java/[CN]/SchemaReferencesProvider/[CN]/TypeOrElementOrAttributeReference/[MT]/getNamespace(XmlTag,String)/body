{
  final String namespaceByPrefix=tag.getNamespaceByPrefix(XmlUtil.findPrefixByQualifiedName(text));
  if (namespaceByPrefix.length() > 0)   return namespaceByPrefix;
  final XmlTag rootTag=((XmlFile)tag.getContainingFile()).getDocument().getRootTag();
  if (rootTag != null && "schema".equals(rootTag.getLocalName()) && XmlUtil.ourSchemaUrisList.indexOf(rootTag.getNamespace()) != -1) {
    final String targetNS=rootTag.getAttributeValue(TARGET_NAMESPACE);
    if (targetNS != null)     return targetNS;
  }
  return namespaceByPrefix;
}
