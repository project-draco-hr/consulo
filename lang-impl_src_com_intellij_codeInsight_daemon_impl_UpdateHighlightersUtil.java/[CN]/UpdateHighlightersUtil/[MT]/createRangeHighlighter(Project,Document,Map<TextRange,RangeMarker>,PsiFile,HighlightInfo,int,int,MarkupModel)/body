{
  HighlightSeverity severity=info.getSeverity();
  int layer;
  if (severity == HighlightSeverity.WARNING) {
    layer=HighlighterLayer.WARNING;
  }
 else   if (SeverityRegistrar.getInstance(project).compare(severity,HighlightSeverity.ERROR) >= 0) {
    layer=HighlighterLayer.ERROR;
  }
 else {
    layer=HighlighterLayer.ADDITIONAL_SYNTAX;
  }
  RangeHighlighterEx highlighter=(RangeHighlighterEx)markup.addRangeHighlighter(infoStartOffset,infoEndOffset,layer,info.getTextAttributes(psiFile),HighlighterTargetArea.EXACT_RANGE);
  info.highlighter=highlighter;
  highlighter.setAfterEndOfLine(info.isAfterEndOfLine);
  highlighter.setErrorStripeMarkColor(info.getErrorStripeMarkColor(psiFile));
  highlighter.setErrorStripeTooltip(info);
  highlighter.setGutterIconRenderer(info.getGutterIconRenderer());
}
