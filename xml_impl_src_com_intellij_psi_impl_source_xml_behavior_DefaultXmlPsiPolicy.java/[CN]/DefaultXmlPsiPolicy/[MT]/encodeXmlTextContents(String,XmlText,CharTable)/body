{
  boolean wsChars=false;
  final FileElement dummyParent=new DummyHolder(text.getManager(),null,table).getTreeElement();
  int fragmentStart=0;
  for (int i=0; i < displayText.length(); i++) {
    if (wsChars != Character.isWhitespace(displayText.charAt(i))) {
      final ASTNode next=createNextToken(fragmentStart,i,wsChars,dummyParent,displayText);
      if (next != null) {
        TreeUtil.addChildren(dummyParent,(TreeElement)next);
        fragmentStart=i;
      }
      wsChars=Character.isWhitespace(displayText.charAt(i));
    }
  }
  final ASTNode next=createNextToken(fragmentStart,displayText.length(),wsChars,dummyParent,displayText);
  if (next != null)   TreeUtil.addChildren(dummyParent,(TreeElement)next);
  dummyParent.acceptTree(new GeneratedMarkerVisitor());
  return dummyParent.getFirstChildNode();
}
