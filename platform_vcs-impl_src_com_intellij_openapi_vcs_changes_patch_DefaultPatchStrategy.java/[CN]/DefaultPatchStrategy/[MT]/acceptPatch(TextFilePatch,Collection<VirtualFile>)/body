{
  FilePatchInProgress longest=null;
  for (  VirtualFile file : foundByName) {
    final FilePatchInProgress current=processMatch(patch,file);
    if ((current != null) && ((longest == null) || (longest.getCurrentStrip() > current.getCurrentStrip()))) {
      longest=current;
    }
  }
  if (longest != null) {
    registerFolderDecision(longest.getPatch().getBeforeName(),longest.getBase());
    myResult.add(longest);
  }
 else {
    myResult.add(new FilePatchInProgress(patch,null,myBaseDir));
  }
}
