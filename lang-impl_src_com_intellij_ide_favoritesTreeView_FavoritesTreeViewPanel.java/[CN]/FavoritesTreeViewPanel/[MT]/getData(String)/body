{
  if (DataConstants.PROJECT.equals(dataId)) {
    return myProject;
  }
  if (DataConstants.NAVIGATABLE.equals(dataId)) {
    final FavoritesTreeNodeDescriptor[] selectedNodeDescriptors=getSelectedNodeDescriptors();
    return selectedNodeDescriptors.length == 1 ? selectedNodeDescriptors[0].getElement() : null;
  }
  if (DataConstants.NAVIGATABLE_ARRAY.equals(dataId)) {
    final List<Navigatable> selectedElements=getSelectedElements(Navigatable.class);
    return selectedElements.toArray(new Navigatable[selectedElements.size()]);
  }
  if (DataConstants.CUT_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCutProvider();
  }
  if (DataConstants.COPY_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCopyProvider();
  }
  if (DataConstants.PASTE_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getPasteProvider();
  }
  if (DataConstants.HELP_ID.equals(dataId)) {
    return myHelpId;
  }
  if (DataConstants.PSI_ELEMENT.equals(dataId)) {
    Object[] elements=getSelectedNodeElements();
    if (elements == null || elements.length != 1) {
      return null;
    }
    final PsiElement psiElement;
    if (elements[0] instanceof SmartPsiElementPointer) {
      psiElement=((SmartPsiElementPointer)elements[0]).getElement();
    }
 else     if (elements[0] instanceof PsiElement) {
      psiElement=(PsiElement)elements[0];
    }
 else     if (elements[0] instanceof PackageElement) {
      psiElement=((PackageElement)elements[0]).getPackage();
    }
 else {
      return null;
    }
    return psiElement != null && psiElement.isValid() ? psiElement : null;
  }
  if (DataConstants.PSI_ELEMENT_ARRAY.equals(dataId)) {
    final PsiElement[] elements=getSelectedPsiElements();
    if (elements == null) {
      return null;
    }
    ArrayList<PsiElement> result=new ArrayList<PsiElement>();
    for (    PsiElement element : elements) {
      if (element.isValid()) {
        result.add(element);
      }
    }
    return result.isEmpty() ? null : result.toArray(new PsiElement[result.size()]);
  }
  if (DataConstants.IDE_VIEW.equals(dataId)) {
    return myIdeView;
  }
  if (DataConstantsEx.TARGET_PSI_ELEMENT.equals(dataId)) {
    return null;
  }
  if (DataConstants.MODULE_CONTEXT.equals(dataId)) {
    Module[] selected=getSelectedModules();
    return selected != null && selected.length == 1 ? selected[0] : null;
  }
  if (DataConstants.MODULE_CONTEXT_ARRAY.equals(dataId)) {
    return getSelectedModules();
  }
  if (DataConstants.DELETE_ELEMENT_PROVIDER.equals(dataId)) {
    final Object[] elements=getSelectedNodeElements();
    return elements != null && elements.length >= 1 && elements[0] instanceof Module ? myDeleteModuleProvider : myDeletePSIElementProvider;
  }
  if (DataConstantsEx.MODULE_GROUP_ARRAY.equals(dataId)) {
    final List<ModuleGroup> selectedElements=getSelectedElements(ModuleGroup.class);
    return selectedElements.isEmpty() ? null : selectedElements.toArray(new ModuleGroup[selectedElements.size()]);
  }
  if (DataConstantsEx.LIBRARY_GROUP_ARRAY.equals(dataId)) {
    final List<LibraryGroupElement> selectedElements=getSelectedElements(LibraryGroupElement.class);
    return selectedElements.isEmpty() ? null : selectedElements.toArray(new LibraryGroupElement[selectedElements.size()]);
  }
  if (DataConstantsEx.NAMED_LIBRARY_ARRAY.equals(dataId)) {
    final List<NamedLibraryElement> selectedElements=getSelectedElements(NamedLibraryElement.class);
    return selectedElements.isEmpty() ? null : selectedElements.toArray(new NamedLibraryElement[selectedElements.size()]);
  }
  if (CONTEXT_FAVORITES_ROOTS.equals(dataId)) {
    List<FavoritesTreeNodeDescriptor> result=new ArrayList<FavoritesTreeNodeDescriptor>();
    FavoritesTreeNodeDescriptor[] selectedNodeDescriptors=getSelectedNodeDescriptors();
    for (    FavoritesTreeNodeDescriptor selectedNodeDescriptor : selectedNodeDescriptors) {
      FavoritesTreeNodeDescriptor root=selectedNodeDescriptor.getFavoritesRoot();
      if (root != null && !(root.getElement().getValue() instanceof String)) {
        result.add(root);
      }
    }
    return result.toArray(new FavoritesTreeNodeDescriptor[result.size()]);
  }
  if (FAVORITES_LIST_NAME.equals(dataId)) {
    return myListName;
  }
  FavoritesTreeNodeDescriptor[] descriptors=getSelectedNodeDescriptors();
  if (descriptors.length > 0) {
    List<AbstractTreeNode> nodes=new ArrayList<AbstractTreeNode>();
    for (    FavoritesTreeNodeDescriptor descriptor : descriptors) {
      nodes.add(descriptor.getElement());
    }
    return myFavoritesTreeStructure.getDataFromProviders(nodes,dataId);
  }
  return null;
}
