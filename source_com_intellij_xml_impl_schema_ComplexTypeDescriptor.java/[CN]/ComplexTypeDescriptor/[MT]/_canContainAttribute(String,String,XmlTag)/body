{
  if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"anyAttribute")) {
    String ns=tag.getAttributeValue("namespace");
    if ("##other".equals(ns)) {
      return !namespace.equals(myDocumentDescriptor.getDefaultNamespace());
    }
    return true;
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"attributeGroup")) {
    String ref=tag.getAttributeValue("ref");
    if (ref != null) {
      XmlTag groupTag=myDocumentDescriptor.findGroup(ref);
      if (groupTag != null) {
        if (_canContainAttribute(name,namespace,groupTag))         return true;
      }
    }
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"restriction") || XmlNSDescriptorImpl.equalsToSchemaName(tag,"extension")) {
    String base=tag.getAttributeValue("base");
    if (base != null) {
      TypeDescriptor descriptor=myDocumentDescriptor.findTypeDescriptor(myDocumentDescriptor.myFile.getDocument().getRootTag(),base);
      if (descriptor instanceof ComplexTypeDescriptor) {
        ComplexTypeDescriptor complexTypeDescriptor=(ComplexTypeDescriptor)descriptor;
        if (complexTypeDescriptor.canContainAttribute(name,namespace))         return true;
      }
    }
  }
  XmlTag[] subTags=tag.getSubTags();
  for (int i=0; i < subTags.length; i++) {
    XmlTag subTag=subTags[i];
    if (_canContainAttribute(name,namespace,subTag))     return true;
  }
  return false;
}
