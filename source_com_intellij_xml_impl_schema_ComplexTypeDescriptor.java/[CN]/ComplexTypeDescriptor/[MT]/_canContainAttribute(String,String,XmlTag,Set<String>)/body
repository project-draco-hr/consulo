{
  if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"anyAttribute")) {
    String ns=tag.getAttributeValue("namespace");
    if ("##other".equals(ns)) {
      return !namespace.equals(myDocumentDescriptor.getDefaultNamespace());
    }
    return true;
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"attributeGroup")) {
    String ref=tag.getAttributeValue("ref");
    if (ref != null && !visited.contains(ref)) {
      visited.add(ref);
      XmlTag groupTag=myDocumentDescriptor.findGroup(ref);
      if (groupTag != null) {
        if (_canContainAttribute(name,namespace,groupTag,visited))         return true;
      }
    }
  }
 else   if (XmlNSDescriptorImpl.equalsToSchemaName(tag,"restriction") || XmlNSDescriptorImpl.equalsToSchemaName(tag,"extension")) {
    String base=tag.getAttributeValue("base");
    if (base != null && !visited.contains(base)) {
      visited.add(base);
      TypeDescriptor descriptor=myDocumentDescriptor.findTypeDescriptor(myDocumentDescriptor.myFile.getDocument().getRootTag(),base);
      if (descriptor instanceof ComplexTypeDescriptor) {
        ComplexTypeDescriptor complexTypeDescriptor=(ComplexTypeDescriptor)descriptor;
        if (complexTypeDescriptor._canContainAttribute(name,namespace,complexTypeDescriptor.getDeclaration(),visited))         return true;
      }
    }
  }
  XmlTag[] subTags=tag.getSubTags();
  for (int i=0; i < subTags.length; i++) {
    XmlTag subTag=subTags[i];
    if (_canContainAttribute(name,namespace,subTag,visited))     return true;
  }
  return false;
}
