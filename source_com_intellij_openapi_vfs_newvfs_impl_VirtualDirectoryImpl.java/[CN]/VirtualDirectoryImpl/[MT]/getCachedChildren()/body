{
  final Map<String,VirtualFile> map=asMap();
  if (map != null) {
    Set<VirtualFile> files=new THashSet<VirtualFile>(map.values());
    files.remove(NullVirtualFile.INSTANCE);
    return files;
  }
  final VirtualFile[] a=asArray();
  if (a != null)   return Arrays.asList(a);
  return Collections.emptyList();
}
