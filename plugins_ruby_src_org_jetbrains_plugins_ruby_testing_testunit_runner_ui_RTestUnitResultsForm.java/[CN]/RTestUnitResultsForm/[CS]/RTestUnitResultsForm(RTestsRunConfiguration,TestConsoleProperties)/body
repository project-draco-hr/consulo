{
  myConsoleProperties=consoleProperties;
  myRunConfiguration=runConfiguration;
  final Project project=runConfiguration.getProject();
  myProject=project;
  myLogFilesManager=new LogFilesManager(project,this);
  myTestsRootNode=new RTestUnitTestProxy("[root]",true);
  tree.attachToModel(this);
  final RTestUnitTreeStructure structure=new RTestUnitTreeStructure(project,myTestsRootNode);
  myTreeBuilder=new RTestUnitTreeBuilder(tree,structure);
  myAnimator=new MyAnimator(myTreeBuilder);
  splitterProportions.externalizeFromDimensionService(RTEST_UNIT_SPLITTER_PROPERTY);
  final Container container=splitPane.getParent();
  GuiUtils.replaceJSplitPaneWithIDEASplitter(splitPane);
  final Splitter splitter=(Splitter)container.getComponent(0);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      splitterProportions.restoreSplitterProportions(container);
      splitter.addPropertyChangeListener(new PropertyChangeListener(){
        public void propertyChange(        final PropertyChangeEvent evt){
          if (evt.getPropertyName().equals(Splitter.PROP_PROPORTION)) {
            splitterProportions.saveSplitterProportions(container);
            splitterProportions.externalizeToDimensionService(RTEST_UNIT_SPLITTER_PROPERTY);
          }
        }
      }
);
    }
  }
);
  Disposer.register(this,new Disposable(){
    public void dispose(){
      splitter.dispose();
    }
  }
);
}
