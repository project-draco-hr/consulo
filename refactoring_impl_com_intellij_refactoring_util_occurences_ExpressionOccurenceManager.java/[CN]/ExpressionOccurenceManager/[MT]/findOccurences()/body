{
  if ("null".equals(myMainOccurence.getText())) {
    return defaultOccurences();
  }
  if (myFilter != null && !myFilter.isOK(myMainOccurence)) {
    return defaultOccurences();
  }
  final PsiExpression[] expressionOccurrences=CodeInsightUtil.findExpressionOccurrences(myScope,myMainOccurence);
  final PsiClass scopeClass=PsiTreeUtil.getNonStrictParentOfType(myScope,PsiClass.class);
  if (myMaintainStaticContext && expressionOccurrences.length > 1 && !RefactoringUtil.isInStaticContext(myMainOccurence,scopeClass)) {
    final ArrayList<PsiExpression> expressions=new ArrayList<PsiExpression>(Arrays.asList(expressionOccurrences));
    for (Iterator<PsiExpression> iterator=expressions.iterator(); iterator.hasNext(); ) {
      final PsiExpression expression=iterator.next();
      if (RefactoringUtil.isInStaticContext(expression,scopeClass)) {
        iterator.remove();
      }
    }
    return expressions.toArray(new PsiExpression[expressions.size()]);
  }
 else {
    return expressionOccurrences;
  }
}
