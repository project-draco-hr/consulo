{
  RangeHighlighter highlighter=editor.getMarkupModel().addRangeHighlighter(startOffset,endOffset,HighlighterLayer.SELECTION - 1,attributes,HighlighterTargetArea.EXACT_RANGE);
  HighlightInfo info=new HighlightInfo(editor instanceof EditorWindow ? ((EditorWindow)editor).getDelegate() : editor,flags);
  Map<RangeHighlighter,HighlightInfo> map=getHighlightInfoMap(editor,true);
  map.put(highlighter,info);
  return highlighter;
}
