{
  final int client_version=3;
  if (debug != null)   debug.println("Sending SSH_FXP_INIT (" + client_version + ")...");
  TypesWriter tw=new TypesWriter();
  tw.writeUINT32(client_version);
  sendMessage(Packet.SSH_FXP_INIT,0,tw.getBytes());
  if (debug != null)   debug.println("Waiting for SSH_FXP_VERSION...");
  TypesReader tr=new TypesReader(receiveMessage(34000));
  int type=tr.readByte();
  if (type != Packet.SSH_FXP_VERSION) {
    throw new IOException("The server did not send a SSH_FXP_VERSION packet (got " + type + ")");
  }
  protocol_version=tr.readUINT32();
  if (debug != null)   debug.println("SSH_FXP_VERSION: protocol_version = " + protocol_version);
  if (protocol_version != 3)   throw new IOException("Server version " + protocol_version + " is currently not supported");
  while (tr.remain() != 0) {
    String name=tr.readString();
    byte[] value=tr.readByteString();
    server_extensions.put(name,value);
    if (debug != null)     debug.println("SSH_FXP_VERSION: extension: " + name + " = '"+ expandString(value,0,value.length)+ "'");
  }
}
