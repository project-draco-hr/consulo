{
  final List<Module> parents=ModuleManager.getInstance(module.getProject()).getModuleDependentModules(module);
  ArrayList<Module> modules=new ArrayList<Module>();
  for (int i=0; i < parents.size(); i++) {
    Module parent=parents.get(i);
    if (expectedModuleType.equals(parent.getModuleType())) {
      modules.add(parent);
    }
  }
  return modules;
}
