{
  final VirtualFile child=prepareDirectoriesForRename();
  renameFileInCommand(child,"newchild");
  final ChangeListManager changeListManager=ChangeListManager.getInstance(myProject);
  changeListManager.ensureUpToDate(false);
  final Change change=changeListManager.getChange(myWorkingCopyDir.findChild("newchild"));
  Assert.assertNotNull(change);
  SvnVcs.getInstance(myProject).getRollbackEnvironment().rollbackChanges(Collections.singletonList(change));
  Assert.assertFalse(new File(myWorkingCopyDir.getPath(),"newchild").exists());
  Assert.assertTrue(new File(myWorkingCopyDir.getPath(),"child").exists());
}
