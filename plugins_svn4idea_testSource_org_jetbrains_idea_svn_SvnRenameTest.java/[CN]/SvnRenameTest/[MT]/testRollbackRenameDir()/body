{
  final VirtualFile child=prepareDirectoriesForRename();
  renameFileInCommand(child,"newchild");
  final ChangeListManager changeListManager=ChangeListManager.getInstance(myProject);
  changeListManager.ensureUpToDate(false);
  final Change change=changeListManager.getChange(myWorkingCopyDir.findChild("newchild"));
  Assert.assertNotNull(change);
  final List<VcsException> exceptions=new ArrayList<VcsException>();
  SvnVcs.getInstance(myProject).getRollbackEnvironment().rollbackChanges(Collections.singletonList(change),exceptions,RollbackProgressListener.EMPTY);
  Assert.assertTrue(exceptions.isEmpty());
  Assert.assertFalse(new File(myWorkingCopyDir.getPath(),"newchild").exists());
  Assert.assertTrue(new File(myWorkingCopyDir.getPath(),"child").exists());
}
