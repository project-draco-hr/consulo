{
  myOldComponent=oldComponent;
  myNewComponent=newComponent;
  newComponent.setMetaModel(newModel);
  if (newLayout != null) {
    newComponent.setLayout(newLayout);
  }
  if (newComponent != oldComponent) {
    RadComponent parent=oldComponent.getParent();
    newComponent.setParent(parent);
    List<RadComponent> parentChildren=parent.getChildren();
    parentChildren.set(parentChildren.indexOf(oldComponent),newComponent);
    newComponent.setTag(oldComponent.getTag());
    convertChildren();
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      convertTag();
      myNewComponent.getTag().setName(myNewComponent.getMetaModel().getTag());
    }
  }
);
  PropertyParser propertyParser=newComponent.getRoot().getClientProperty(PropertyParser.KEY);
  propertyParser.load(newComponent);
  loadChildProperties(propertyParser);
}
