{
  if (tasks.isEmpty() && descriptors.isEmpty())   return Pair.create(Collections.<HandlerItem>emptyList(),null);
  ArrayList<HandlerItem> items=new ArrayList<HandlerItem>(tasks.size() + descriptors.size());
  HandlerItem selected=null;
  for (  RunContentDescriptor descriptor : descriptors) {
    final ProcessHandler handler=descriptor.getProcessHandler();
    if (handler != null) {
      HandlerItem item=new HandlerItem(descriptor.getDisplayName(),descriptor.getIcon(),false){
        @Override void stop(){
          stopProcess(handler);
        }
      }
;
      items.add(item);
      if (handler == activeProcessHandler)       selected=item;
    }
  }
  boolean hasSeparator=true;
  for (  final Pair<TaskInfo,ProgressIndicator> eachPair : tasks) {
    items.add(new HandlerItem(eachPair.first.getTitle(),AllIcons.Process.Step_passive,hasSeparator){
      @Override void stop(){
        eachPair.second.cancel();
      }
    }
);
    hasSeparator=false;
  }
  return Pair.<List<HandlerItem>,HandlerItem>create(items,selected);
}
