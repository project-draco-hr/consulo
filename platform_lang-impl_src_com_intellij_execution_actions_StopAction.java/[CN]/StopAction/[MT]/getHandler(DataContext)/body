{
  final RunContentDescriptor contentDescriptor=RunContentManager.RUN_CONTENT_DESCRIPTOR.getData(dataContext);
  final ProcessHandler processHandler;
  if (contentDescriptor != null) {
    processHandler=contentDescriptor.getProcessHandler();
  }
 else {
    final Project project=CommonDataKeys.PROJECT.getData(dataContext);
    final RunContentDescriptor selectedContent=project == null ? null : ExecutionManager.getInstance(project).getContentManager().getSelectedContent();
    processHandler=selectedContent == null ? null : selectedContent.getProcessHandler();
  }
  return processHandler;
}
