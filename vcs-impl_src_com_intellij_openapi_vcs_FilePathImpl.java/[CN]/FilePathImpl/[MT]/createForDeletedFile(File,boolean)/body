{
  LocalFileSystem lfs=LocalFileSystem.getInstance();
  File parentFile=selectedFile.getParentFile();
  if (parentFile == null) {
    return new FilePathImpl(selectedFile,isDirectory);
  }
  VirtualFile virtualFileParent=lfs.findFileByIoFile(parentFile);
  if (virtualFileParent != null) {
    return new FilePathImpl(virtualFileParent,selectedFile.getName(),isDirectory,true);
  }
 else {
    return new FilePathImpl(selectedFile,isDirectory);
  }
}
