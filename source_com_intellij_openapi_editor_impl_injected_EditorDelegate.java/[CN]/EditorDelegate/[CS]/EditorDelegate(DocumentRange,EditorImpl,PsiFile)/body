{
  myDocument=document;
  myDelegate=delegate;
  myInjectedFile=injectedFile;
  myCaretModelDelegate=new CaretModelDelegate(myDelegate.getCaretModel(),this);
  mySelectionModelDelegate=new SelectionModelDelegate(myDelegate,myDocument,this);
  myMarkupModelDelegate=new MarkupModelDelegate((EditorMarkupModelImpl)myDelegate.getMarkupModel(),myDocument);
  disposeInvalidEditors();
  allEditors.add(this);
}
