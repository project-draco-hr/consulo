{
  final VirtualFile vFile=getVirtualFile();
  if (vFile != null && vFile.isValid()) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        final Document doc=FileDocumentManager.getInstance().getCachedDocument(vFile);
        if (doc != null) {
          FileDocumentManager.getInstance().saveDocument(doc);
        }
      }
    }
,ModalityState.NON_MODAL);
    FileBasedIndex.getInstance().requestReindex(vFile);
  }
}
