{
  final PsiFile containingFile=context.getContainingFile();
  if (containingFile == null || (containingFile.getFileType() != StdFileTypes.XML && containingFile.getFileType() != StdFileTypes.XHTML)) {
    return;
  }
  final Project project=context.getProject();
  SoftReference<ExternalDocumentValidator> validatorReference=project.getUserData(validatorInstanceKey);
  ExternalDocumentValidator validator=validatorReference != null ? validatorReference.get() : null;
  if (validator == null) {
    validator=new ExternalDocumentValidator();
    project.putUserData(validatorInstanceKey,new SoftReference<ExternalDocumentValidator>(validator));
  }
  validator.runJaxpValidation((XmlElement)context,host);
}
