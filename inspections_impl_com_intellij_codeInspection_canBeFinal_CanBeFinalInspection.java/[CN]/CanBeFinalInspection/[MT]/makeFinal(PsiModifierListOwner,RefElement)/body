{
  try {
    if (psiElement instanceof PsiVariable) {
      ((PsiVariable)psiElement).normalizeDeclaration();
    }
    final PsiModifierList modifierList=psiElement.getModifierList();
    LOG.assertTrue(modifierList != null);
    modifierList.setModifierProperty(PsiModifier.FINAL,true);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
  RefUtil.getInstance().setIsFinal(refElement,true);
}
