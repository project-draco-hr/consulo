{
  if (userObject instanceof RefElement) {
    final RefElement refElement=(RefElement)userObject;
    final PsiElement psiElement=refElement.getElement();
    if (psiElement != null) {
      Document document=PsiDocumentManager.getInstance(psiElement.getProject()).getDocument(psiElement.getContainingFile());
      if (document != null) {
        return descriptor.getLine() - document.getLineNumber(psiElement.getTextOffset()) - 1;
      }
    }
  }
  return -1;
}
