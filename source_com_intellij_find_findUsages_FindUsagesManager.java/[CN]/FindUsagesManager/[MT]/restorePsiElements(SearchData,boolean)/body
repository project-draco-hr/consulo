{
  if (searchData == null)   return null;
  SmartPsiElementPointer[] lastSearchElements=searchData.myElements;
  if (lastSearchElements == null)   return null;
  List<PsiElement> elements=new ArrayList<PsiElement>();
  for (  SmartPsiElementPointer pointer : lastSearchElements) {
    PsiElement element=pointer.getElement();
    if (element != null)     elements.add(element);
  }
  if (elements.isEmpty() && showErrorMessage) {
    Messages.showMessageDialog(myProject,FindBundle.message("find.searched.elements.have.been.changed.error"),FindBundle.message("cannot.search.for.usages.title"),Messages.getInformationIcon());
    return PsiElement.EMPTY_ARRAY;
  }
  return elements.toArray(new PsiElement[elements.size()]);
}
