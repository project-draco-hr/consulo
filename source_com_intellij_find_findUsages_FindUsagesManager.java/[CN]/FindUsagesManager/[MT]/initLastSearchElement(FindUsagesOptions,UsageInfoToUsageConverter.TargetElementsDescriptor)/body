{
  final PsiElement[] primaryElements=descriptor.getPrimaryElements();
  final PsiElement[] additionalElements=descriptor.getAdditionalElements();
  List<PsiElement> allElements=new ArrayList<PsiElement>(primaryElements.length + additionalElements.length);
  allElements.addAll(Arrays.asList(primaryElements));
  allElements.addAll(Arrays.asList(additionalElements));
  myLastSearchData.myLastSearchElements=new SmartPsiElementPointer[allElements.size()];
  int idx=0;
  for (Iterator it=allElements.iterator(); it.hasNext(); ) {
    final PsiElement psiElement=(PsiElement)it.next();
    myLastSearchData.myLastSearchElements[idx++]=SmartPointerManager.getInstance(myProject).createSmartPsiElementPointer(psiElement);
  }
  myLastSearchData.myLastOptions=findUsagesOptions;
}
