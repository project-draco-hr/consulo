{
  myEditor=editor;
  myCaretListener=new CaretListener(){
    public void caretPositionChanged(    CaretEvent e){
      if (Comparing.equal(e.getEditor(),myEditor)) {
        fireCaretPositionChanged();
      }
    }
    private void fireCaretPositionChanged(){
      final FileEditorPositionListener[] listeners=myListeners.toArray(new FileEditorPositionListener[myListeners.size()]);
      for (int i=0; i < listeners.length; i++) {
        listeners[i].onCurrentElementChanged();
      }
    }
  }
;
  EditorFactory.getInstance().getEventMulticaster().addCaretListener(myCaretListener);
}
