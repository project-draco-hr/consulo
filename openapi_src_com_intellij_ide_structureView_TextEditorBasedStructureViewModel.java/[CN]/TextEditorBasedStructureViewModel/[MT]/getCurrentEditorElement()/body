{
  if (myEditor == null)   return null;
  final int offset=myEditor.getCaretModel().getOffset();
  FileViewProvider viewProvider=getPsiFile().getViewProvider();
  PsiElement element=viewProvider.findElementAt(offset,getPsiFile().getLanguage());
  while (element != null && !(element instanceof PsiFile)) {
    if (isSuitable(element))     return element;
    element=element.getParent();
  }
  return null;
}
