{
  myThemeManager=new ThemeManager(this);
  myThemeManager.loadThemes(new Runnable(){
    @Override public void run(){
      List<ThemeData> themes=myThemeManager.getThemes();
      ThemeData newTheme=null;
      String themeName=myProfile.getTheme();
      if (themeName != null) {
        for (        ThemeData theme : themes) {
          if (themeName.equals(theme.getName())) {
            newTheme=theme;
            break;
          }
        }
        if (newTheme == null) {
          System.out.println("Theme: " + themeName + " not found");
        }
      }
      if (newTheme == null && !themes.isEmpty()) {
        for (        ThemeData theme : themes) {
          if (theme != ThemeManager.FRAMEWORK && theme != ThemeManager.PROJECT) {
            newTheme=theme;
            break;
          }
        }
      }
      myThemeAction.setItems(themes,newTheme);
      updateTheme(newTheme);
      myRefreshAction.run();
    }
  }
);
}
