{
  myProfile.setDevice(wrapper == null ? null : wrapper.getName());
  List<State> configurations;
  if (wrapper == null || wrapper.getDevice() == null) {
    configurations=Collections.emptyList();
  }
 else {
    configurations=wrapper.getDevice().getAllStates();
    if (configurations == null) {
      configurations=Collections.emptyList();
    }
  }
  State newConfiguration=null;
  if (configurationName != null) {
    for (    State configuration : configurations) {
      if (configurationName.equals(configuration.getName())) {
        newConfiguration=configuration;
        break;
      }
    }
  }
  if (newConfiguration == null && !configurations.isEmpty()) {
    newConfiguration=configurations.get(0);
  }
  myDeviceConfigurationAction.setItems(configurations,newConfiguration);
  updateDeviceConfiguration(newConfiguration);
}
