{
  final String moduleName=dynamicProperty.getModuleName();
  Document document=loadModuleDynXML(moduleName);
  Element rootElement=document.getRootElement();
  final String dynPropertyElement=findConcreateDynamicProperty(rootElement,dynamicProperty.getTypeQualifiedName(),dynamicProperty.getPropertyName());
  if (dynPropertyElement == null) {
    final Element dynPropertyTypeElement=findDynamicPropertyTypeElement(rootElement,dynamicProperty.getTypeQualifiedName());
    if (dynPropertyTypeElement == null) {
      rootElement.addContent(new DynamicPropertyXMLElementBase(dynamicProperty));
    }
 else {
      dynPropertyTypeElement.addContent(new DynamicPropertyNameElement(dynamicProperty.getPropertyName()));
    }
  }
  FileWriter writer=null;
  try {
    writer=new FileWriter(myPathsToXmls.get(ModuleManager.getInstance(getProject()).findModuleByName(moduleName)));
    JDOMUtil.writeElement(rootElement,writer,"\n");
  }
 catch (  IOException e) {
  }
 finally {
    try {
      if (writer != null) {
        writer.flush();
        writer.close();
      }
    }
 catch (    IOException e) {
    }
  }
  return dynamicProperty;
}
