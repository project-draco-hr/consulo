{
  final String moduleName=dynamicProperty.getModuleName();
  Document document=loadModuleDynXML(moduleName);
  Element rootElement=document.getRootElement();
  final String dynPropertyElement=findConcreateDynamicProperty(rootElement,dynamicProperty.getContainingClassQualifiedName(),dynamicProperty.getPropertyName());
  if (dynPropertyElement == null) {
    final Element dynPropertyTypeElement=findDynamicPropertyClassElement(rootElement,dynamicProperty.getContainingClassQualifiedName());
    if (dynPropertyTypeElement == null) {
      rootElement.addContent(new DPContainigClassElement(dynamicProperty));
    }
 else {
      dynPropertyTypeElement.addContent(new DPPropertyElement(dynamicProperty));
    }
  }
  FileWriter writer=null;
  final File filePath=myPathsToXmls.get(ModuleManager.getInstance(getProject()).findModuleByName(moduleName));
  try {
    writer=new FileWriter(filePath);
    JDOMUtil.writeElement(rootElement,writer,"\n");
  }
 catch (  IOException e) {
    LOG.error("File " + filePath + " cannot be written.");
  }
 finally {
    try {
      if (writer != null) {
        writer.flush();
        writer.close();
      }
    }
 catch (    IOException e) {
      LOG.error("FileWriter for file " + filePath + " cannot be close.");
    }
  }
  return dynamicProperty;
}
