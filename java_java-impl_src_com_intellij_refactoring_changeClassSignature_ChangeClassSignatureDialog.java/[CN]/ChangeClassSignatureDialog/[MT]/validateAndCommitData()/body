{
  for (  final TypeParameterInfo info : myTypeParameterInfos) {
    if (!info.isForExistingParameter() && !JavaPsiFacade.getInstance(myClass.getProject()).getNameHelper().isIdentifier(info.getNewName())) {
      return RefactoringBundle.message("error.wrong.name.input",info.getNewName());
    }
  }
  LOG.assertTrue(myTypeCodeFragments.size() == myTypeParameterInfos.size());
  for (int i=0; i < myTypeCodeFragments.size(); i++) {
    final PsiTypeCodeFragment codeFragment=myTypeCodeFragments.get(i);
    TypeParameterInfo info=myTypeParameterInfos.get(i);
    if (info.getOldParameterIndex() >= 0)     continue;
    PsiType type;
    try {
      type=codeFragment.getType();
      if (type instanceof PsiPrimitiveType) {
        return "Type parameter can't be primitive";
      }
    }
 catch (    PsiTypeCodeFragment.TypeSyntaxException e) {
      return RefactoringBundle.message("changeClassSignature.bad.default.value",codeFragment.getText(),info.getNewName());
    }
catch (    PsiTypeCodeFragment.NoTypeException e) {
      return RefactoringBundle.message("changeSignature.no.type.for.parameter",info.getNewName());
    }
    info.setDefaultValue(type);
  }
  return null;
}
