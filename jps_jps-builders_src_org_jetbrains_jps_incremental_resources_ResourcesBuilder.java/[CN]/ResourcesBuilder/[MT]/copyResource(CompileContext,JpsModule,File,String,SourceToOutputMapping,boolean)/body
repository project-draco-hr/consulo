{
  final String outputRootUrl=JpsJavaExtensionService.getInstance().getOutputUrl(module,tests);
  if (outputRootUrl == null) {
    return;
  }
  final String relativePath=FileUtil.getRelativePath(sourceRoot,FileUtil.toSystemIndependentName(file.getPath()),'/');
  final String prefix=JpsJavaExtensionService.getInstance().getSourcePrefix(module,JpsPathUtil.pathToUrl(sourceRoot));
  final StringBuilder targetPath=new StringBuilder();
  targetPath.append(JpsPathUtil.urlToPath(outputRootUrl));
  if (prefix != null && prefix.length() > 0) {
    targetPath.append('/').append(prefix.replace('.','/'));
  }
  targetPath.append('/').append(relativePath);
  final String outputPath=targetPath.toString();
  FileUtil.copyContent(file,new File(outputPath));
  try {
    outputToSourceMapping.setOutput(file.getPath(),outputPath);
  }
 catch (  Exception e) {
    context.processMessage(new CompilerMessage(BUILDER_NAME,e));
  }
}
