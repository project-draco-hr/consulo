{
  final ModuleBuildTarget target=rd.getTarget();
  final String outputRootUrl=JpsJavaExtensionService.getInstance().getOutputUrl(target.getModule(),target.isTests());
  if (outputRootUrl == null) {
    return;
  }
  String rootPath=FileUtil.toSystemIndependentName(rd.root.getAbsolutePath());
  final String relativePath=FileUtil.getRelativePath(rootPath,FileUtil.toSystemIndependentName(file.getPath()),'/');
  final String prefix=rd.getPackagePrefix();
  final StringBuilder targetPath=new StringBuilder();
  targetPath.append(JpsPathUtil.urlToPath(outputRootUrl));
  if (prefix.length() > 0) {
    targetPath.append('/').append(prefix.replace('.','/'));
  }
  targetPath.append('/').append(relativePath);
  final String outputPath=targetPath.toString();
  FileUtil.copyContent(file,new File(outputPath));
  try {
    outputConsumer.registerOutputFile(target,outputPath,Collections.singletonList(file.getPath()));
  }
 catch (  Exception e) {
    context.processMessage(new CompilerMessage(BUILDER_NAME,e));
  }
}
