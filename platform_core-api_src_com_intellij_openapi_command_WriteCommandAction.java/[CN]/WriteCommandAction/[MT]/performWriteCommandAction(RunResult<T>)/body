{
  if (!FileModificationService.getInstance().preparePsiElementsForWrite(Arrays.asList(myPsiFiles)))   return;
  final RunResult[] results={result};
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    @Override public void run(){
      AccessToken token=getApplication().acquireWriteActionLock(WriteCommandAction.this.getClass());
      try {
        results[0].run();
        results[0]=null;
      }
  finally {
        token.finish();
      }
    }
  }
,getCommandName(),getGroupID(),getUndoConfirmationPolicy());
}
