{
  final PsiClass containingClass=method.getContainingClass();
  if (containingClass instanceof PsiAnonymousClass) {
    return containingClass;
  }
  final PsiClass superClass=containingClass.getSuperClass();
  if (superClass == null) {
    return containingClass;
  }
  final boolean isContainingClassesMethod=MethodHierarchyUtil.findBaseMethodInClass(method,superClass,true) != null;
  if (!isContainingClassesMethod) {
    for (    final PsiClass anInterface : containingClass.getInterfaces()) {
      if (MethodHierarchyUtil.findBaseMethodInClass(method,anInterface,true) != null) {
        return anInterface;
      }
    }
  }
  return containingClass;
}
