{
  unregisterRootChangesListener();
  if (myLocalHistoryActionListsner != null) {
    LocalHistory.removeActionListener(myProject,myLocalHistoryActionListsner);
  }
  if (myCommandListener != null) {
    myCommandProcessor.removeCommandListener(myCommandListener);
    myDocumentEditingUndoProvider.dispose();
    myMerger.dispose();
    myFileOperationUndoProvider.dispose();
  }
  if (myBeforeFileDeletionListener != null) {
    myVirtualFileManager.removeVirtualFileListener(myBeforeFileDeletionListener);
  }
  myProject=null;
}
