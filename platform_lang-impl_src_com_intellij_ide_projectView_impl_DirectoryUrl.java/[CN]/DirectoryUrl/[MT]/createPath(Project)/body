{
  if (moduleName != null) {
    final Module module=ApplicationManager.getApplication().runReadAction(new Computable<Module>(){
      @Nullable @Override public Module compute(){
        return ModuleManager.getInstance(project).findModuleByName(moduleName);
      }
    }
);
    if (module == null)     return null;
  }
  final VirtualFileManager virtualFileManager=VirtualFileManager.getInstance();
  final VirtualFile file=virtualFileManager.findFileByUrl(url);
  if (file == null)   return null;
  final PsiDirectory directory=ApplicationManager.getApplication().runReadAction(new Computable<PsiDirectory>(){
    @Nullable @Override public PsiDirectory compute(){
      return PsiManager.getInstance(project).findDirectory(file);
    }
  }
);
  if (directory == null)   return null;
  return new Object[]{directory};
}
