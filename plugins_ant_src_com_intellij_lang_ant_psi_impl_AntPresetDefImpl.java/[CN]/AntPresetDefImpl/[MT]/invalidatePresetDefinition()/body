{
  myPresetDefinition=null;
  if (!hasNameElement())   return;
  final String thisClassName=createPresetDefClassName(getName());
  final AntStructuredElementImpl extented=PsiTreeUtil.getChildOfType(this,AntStructuredElementImpl.class);
  final AntTypeId typeId=new AntTypeId(getName());
  if (extented != null) {
    final AntTypeDefinitionImpl extentedDef=(AntTypeDefinitionImpl)extented.getTypeDefinition();
    if (extentedDef != null) {
      myPresetDefinition=new AntTypeDefinitionImpl(typeId,thisClassName,extentedDef.isTask(),false,extentedDef.getAttributesMap(),extentedDef.getNestedElementsMap(),this);
    }
  }
  if (myPresetDefinition == null) {
    myPresetDefinition=new AntTypeDefinitionImpl(typeId,thisClassName,false,false,new HashMap<String,AntAttributeType>(),new HashMap<AntTypeId,String>(),this);
  }
  final AntStructuredElement parent=getAntProject();
  if (parent != null) {
    parent.registerCustomType(myPresetDefinition);
  }
}
