{
  final GrovySDKComboBox.DefaultGroovySDKComboBoxItem selectedItem=(GrovySDKComboBox.DefaultGroovySDKComboBoxItem)myComboBox.getSelectedItem();
  final Module module=myEditorContext.getModule();
  final Project project=facet.getModule().getProject();
  if (module != null) {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        GroovySDK sdk=null;
        if (selectedItem instanceof GrovySDKComboBox.GroovySDKPointerItem) {
          GrovySDKComboBox.GroovySDKPointerItem pointerItem=(GrovySDKComboBox.GroovySDKPointerItem)selectedItem;
          String name=pointerItem.getName();
          String path=pointerItem.getPath();
          Library library=GroovyConfigUtils.createGroovyLibrary(path,name,project);
          if (library != null) {
            sdk=new GroovySDK(library);
          }
        }
 else {
          sdk=selectedItem.getGroovySDK();
        }
        GroovyConfigUtils.updateGroovyLibInModule(module,sdk);
        for (int i=0; i < myComboBox.getItemCount(); i++) {
          Object item=myComboBox.getItemAt(i);
          if (item != selectedItem && item instanceof GrovySDKComboBox.GroovySDKPointerItem) {
            GrovySDKComboBox.GroovySDKPointerItem pointerItem=(GrovySDKComboBox.GroovySDKPointerItem)item;
            String name=pointerItem.getName();
            String path=pointerItem.getPath();
            GroovyConfigUtils.createGroovyLibrary(path,name,project);
          }
        }
      }
    }
);
  }
  isSdkChanged=false;
}
