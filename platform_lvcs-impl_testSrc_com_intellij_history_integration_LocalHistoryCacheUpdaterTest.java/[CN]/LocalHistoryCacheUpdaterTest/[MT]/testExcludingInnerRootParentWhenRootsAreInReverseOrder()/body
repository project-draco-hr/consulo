{
  vcs.createDirectory("outer");
  vcs.createDirectory("outer/dir");
  vcs.createDirectory("outer/dir/inner");
  TestVirtualFile outer=new TestVirtualFile("outer");
  TestVirtualFile dir=new TestVirtualFile("dir");
  TestVirtualFile inner=new TestVirtualFile("inner");
  outer.addChild(dir);
  dir.addChild(inner);
  filter.setFilesNotUnderContentRoot(dir);
  updateWith(inner,outer);
  assertEquals(2,vcs.getRoots().size());
  assertEquals("outer",vcs.getRoots().get(0).getPath());
  assertEquals("outer/dir/inner",vcs.getRoots().get(1).getPath());
  assertFalse(vcs.hasEntry("outer/dir"));
}
