{
  saveAll();
  ChangeListManager changes=ChangeListManager.getInstance(project);
  for (  VirtualFile file : affectedFiles) {
    Change change=changes.getChange(file);
    if (change != null && change.getFileStatus() != FileStatus.MERGED_WITH_CONFLICTS) {
      File f=new File(file.getPath());
      exceptions.add(new VcsException(GitBundle.message("merge.is.not.needed",f.getAbsolutePath())));
      return true;
    }
  }
  AbstractVcsHelper.getInstance(project).showMergeDialog(Arrays.asList(affectedFiles),vcs.getMergeProvider());
  return false;
}
