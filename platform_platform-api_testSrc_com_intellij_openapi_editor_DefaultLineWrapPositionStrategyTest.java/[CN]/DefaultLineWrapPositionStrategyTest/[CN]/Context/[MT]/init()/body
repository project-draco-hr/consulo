{
  tmpWrapIndex=rawDocument.indexOf(WRAP_MARKER);
  tmpEdgeIndex=rawDocument.indexOf(EDGE_MARKER);
  if (tmpWrapIndex >= 0 && tmpEdgeIndex >= 0) {
    if (tmpWrapIndex < tmpEdgeIndex) {
      processWrap();
      processMaxPreferredIndex();
    }
 else {
      processMaxPreferredIndex();
      processWrap();
    }
  }
 else {
    if (tmpWrapIndex >= 0) {
      processWrap();
    }
    if (tmpEdgeIndex >= 0) {
      processMaxPreferredIndex();
    }
  }
  buffer.append(rawDocument.substring(index));
  document=buffer.toString();
  if (edgeIndex <= 0) {
    edgeIndex=document.length();
  }
}
