{
  buffer.append(rawDocument.substring(index,preferredIndex));
  index=preferredIndex + MAX_PREFERRED_MARKER.length();
  if (rawDocument.indexOf(MAX_PREFERRED_MARKER,index) >= 0) {
    throw new IllegalArgumentException(String.format("More than one max preferred offset is found at the document '%s'",rawDocument));
  }
}
