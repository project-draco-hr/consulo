{
  if (CONFIGURE_MESSAGE.equals(selectedValue)) {
    return doFinalStep(new Runnable(){
      public void run(){
        BranchConfigurationDialog.configureBranches(myProject,myVcsRoot,true);
      }
    }
);
  }
 else   if (myTrunkString.equals(selectedValue)) {
    return doFinalStep(new Runnable(){
      public void run(){
        myCallback.branchSelected(myProject,myConfiguration,myConfiguration.getTrunkUrl(),-1);
      }
    }
);
  }
 else   if (!myTopLevel || selectedValue.equals(myConfiguration.getTrunkUrl())) {
    return doFinalStep(new Runnable(){
      public void run(){
        myCallback.branchSelected(myProject,myConfiguration,selectedValue,-1);
      }
    }
);
  }
 else {
    showBranchPopup(selectedValue);
  }
  return FINAL_CHOICE;
}
