{
  final VirtualFile vcsRoot=ProjectLevelVcsManager.getInstance(project).getVcsRootFor(virtualFile);
  final SvnBranchConfiguration configuration;
  try {
    configuration=SvnBranchConfigurationManager.getInstance(project).get(vcsRoot);
  }
 catch (  VcsException e1) {
    Messages.showErrorDialog(project,SvnBundle.message("compare.with.branch.configuration.error",e1.getMessage()),SvnBundle.message("compare.with.branch.error.title"));
    return;
  }
  BranchBasesPopupStep step=new BranchBasesPopupStep(project,virtualFile,vcsRoot,configuration,callback);
  JBPopupFactory.getInstance().createListPopup(step).showCenteredInCurrentWindow(project);
}
