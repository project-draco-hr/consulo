{
  String[] suggestedNames=getSuggestedNames();
  myNameSuggestionsField=new NameSuggestionsField(suggestedNames,myProject,FileTypes.PLAIN_TEXT,myEditor);
  if (myPsiElement instanceof PsiFile && myEditor == null) {
    myNameSuggestionsField.selectNameWithoutExtension();
  }
  myNameChangedListener=new NameSuggestionsField.DataChanged(){
    public void dataChanged(){
      validateButtons();
    }
  }
;
  myNameSuggestionsField.addDataChangedListener(myNameChangedListener);
  myNameSuggestionsField.getComponent().registerKeyboardAction(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      completeVariable(myNameSuggestionsField.getEditor());
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,InputEvent.CTRL_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
}
