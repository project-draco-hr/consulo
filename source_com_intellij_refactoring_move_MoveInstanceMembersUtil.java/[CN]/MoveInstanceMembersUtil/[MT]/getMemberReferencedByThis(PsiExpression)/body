{
  if (expression instanceof PsiReferenceExpression) {
    final PsiExpression qualifier=((PsiReferenceExpression)expression).getQualifierExpression();
    if (qualifier == null || qualifier instanceof PsiThisExpression) {
      final PsiElement resolved=((PsiReferenceExpression)expression).resolve();
      if (resolved instanceof PsiMember && !((PsiMember)resolved).hasModifierProperty(PsiModifier.STATIC)) {
        return (PsiMember)resolved;
      }
    }
  }
 else   if (expression instanceof PsiNewExpression) {
    final PsiNewExpression newExpression=(PsiNewExpression)expression;
    final PsiExpression qualifier=newExpression.getQualifier();
    if (qualifier == null || qualifier instanceof PsiThisExpression) {
      PsiJavaCodeReferenceElement classReference=newExpression.getClassReference();
      if (classReference == null) {
        final PsiAnonymousClass anonymousClass=newExpression.getAnonymousClass();
        if (anonymousClass != null) {
          classReference=anonymousClass.getBaseClassReference();
        }
      }
      if (classReference != null) {
        final PsiClass resolved=(PsiClass)classReference.resolve();
        if (resolved != null && !resolved.hasModifierProperty(PsiModifier.STATIC)) {
          return resolved;
        }
      }
    }
  }
  return null;
}
