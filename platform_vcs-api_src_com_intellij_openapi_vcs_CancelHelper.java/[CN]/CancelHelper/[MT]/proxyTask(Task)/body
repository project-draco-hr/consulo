{
  if (task instanceof Task.Backgroundable) {
    return new Task.Backgroundable(task.getProject(),task.getTitle(),task.isCancellable()){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        runTask(indicator,task);
      }
      public void onCancel(){
        task.onCancel();
      }
      public void onSuccess(){
        task.onSuccess();
      }
      public String getProcessId(){
        return task.getProcessId();
      }
      @Nullable public NotificationInfo getNotificationInfo(){
        return task.getNotificationInfo();
      }
      @Nullable public NotificationInfo notifyFinished(){
        return task.notifyFinished();
      }
      public boolean isHeadless(){
        return task.isHeadless();
      }
    }
;
  }
 else {
    return new Task(task.getProject(),task.getTitle(),task.isCancellable()){
      @Override public boolean isModal(){
        return task.isModal();
      }
      @Override public void onCancel(){
        task.onCancel();
      }
      @Override public void onSuccess(){
        task.onSuccess();
      }
      @Override public String getProcessId(){
        return task.getProcessId();
      }
      @Override public NotificationInfo getNotificationInfo(){
        return task.getNotificationInfo();
      }
      @Override public NotificationInfo notifyFinished(){
        return task.notifyFinished();
      }
      @Override public boolean isHeadless(){
        return task.isHeadless();
      }
      @Override public void run(      @NotNull ProgressIndicator indicator){
        runTask(indicator,task);
      }
    }
;
  }
}
