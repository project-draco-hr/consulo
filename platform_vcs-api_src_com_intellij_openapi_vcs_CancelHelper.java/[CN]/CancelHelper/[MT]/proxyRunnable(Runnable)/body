{
  return new Runnable(){
    @Override public void run(){
      ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator == null) {
        runnable.run();
        return;
      }
      try {
synchronized (myLock) {
          myMap.put(indicator,Thread.currentThread());
        }
        runnable.run();
      }
  finally {
synchronized (myLock) {
          myInterrupted.remove(Thread.currentThread());
          myMap.remove(indicator);
        }
      }
    }
  }
;
}
