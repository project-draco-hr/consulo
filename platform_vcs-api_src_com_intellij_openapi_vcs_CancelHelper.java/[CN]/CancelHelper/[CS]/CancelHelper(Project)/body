{
  myMap=new HashMap<ProgressIndicator,Thread>();
  myLock=new Object();
  myInterrupted=new HashSet<Thread>();
  myConnection=project.getMessageBus().connect(project);
  myConnection.subscribe(ProgressManager.CANCEL_CALLED,new Runnable(){
    @Override public void run(){
synchronized (myLock) {
        for (        Map.Entry<ProgressIndicator,Thread> entry : myMap.entrySet()) {
          if (entry.getKey().isCanceled()) {
            myInterrupted.add(entry.getValue());
          }
        }
      }
    }
  }
);
}
