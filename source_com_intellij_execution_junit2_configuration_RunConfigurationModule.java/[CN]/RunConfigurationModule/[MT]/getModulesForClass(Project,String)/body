{
  if (project.isDefault())   return Arrays.asList(ModuleManager.getInstance(project).getModules());
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final PsiClass[] possibleClasses=PsiManager.getInstance(project).findClasses(className,GlobalSearchScope.projectScope(project));
  final HashSet<Module> modules=CollectUtil.SKIP_NULLS.toSet(possibleClasses,ConvertingIterator.composition(ExecutionUtil.FILE_OF_CLASS,ExecutionUtil.fileToModule(project)));
  if (modules.isEmpty()) {
    return Arrays.asList(ModuleManager.getInstance(project).getModules());
  }
 else {
    return ExecutionUtil.collectModulesDependsOn(modules);
  }
}
