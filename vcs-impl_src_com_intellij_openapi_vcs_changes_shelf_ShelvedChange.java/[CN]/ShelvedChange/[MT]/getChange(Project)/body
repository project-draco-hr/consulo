{
  if (myChange == null) {
    ContentRevision beforeRevision=null;
    ContentRevision afterRevision=null;
    File baseDir=new File(project.getBaseDir().getPath());
    File file=getAbsolutePath(baseDir,myBeforePath);
    final FilePathImpl beforePath=new FilePathImpl(file,false);
    beforePath.refresh();
    if (myFileStatus != FileStatus.ADDED) {
      beforeRevision=new CurrentContentRevision(beforePath){
        @NotNull public VcsRevisionNumber getRevisionNumber(){
          return new TextRevisionNumber(VcsBundle.message("local.version.title"));
        }
      }
;
    }
    if (myFileStatus != FileStatus.DELETED) {
      final FilePathImpl afterPath=new FilePathImpl(getAbsolutePath(baseDir,myAfterPath),false);
      afterRevision=new PatchedContentRevision(beforePath,afterPath);
    }
    myChange=new Change(beforeRevision,afterRevision,myFileStatus);
  }
  return myChange;
}
