{
  if (elem instanceof PsiClass) {
    return new RefClassImpl((PsiClass)elem,myRefManager);
  }
 else   if (elem instanceof PsiMethod) {
    final PsiMethod method=(PsiMethod)elem;
    final RefElement ref=myRefManager.getReference(method.getContainingClass(),true);
    if (ref instanceof RefClass) {
      return new RefMethodImpl((RefClass)ref,method,myRefManager);
    }
  }
 else   if (elem instanceof PsiField) {
    final PsiField field=(PsiField)elem;
    final RefElement ref=myRefManager.getReference(field.getContainingClass(),true);
    if (ref instanceof RefClass) {
      return new RefFieldImpl((RefClass)ref,field,myRefManager);
    }
  }
 else   if (elem instanceof PsiJavaFile) {
    return new RefJavaFileImpl((PsiJavaFile)elem,myRefManager);
  }
  return null;
}
