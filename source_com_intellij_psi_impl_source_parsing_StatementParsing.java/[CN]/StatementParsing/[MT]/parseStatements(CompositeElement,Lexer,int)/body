{
  while (lexer.getTokenType() != null) {
    TreeElement statement=parseStatement(lexer);
    if (statement != null) {
      TreeUtil.addChildren(elementToAdd,statement);
      continue;
    }
    IElementType tokenType=lexer.getTokenType();
    TreeElement tokenElement=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
    lexer.advance();
    if (tokenType == RBRACE) {
      Label:       if (rbraceMode == RBRACE_IS_ERROR) {
      }
 else       if (rbraceMode == RBRACE_IS_END) {
        TreeUtil.addChildren(elementToAdd,tokenElement);
        return;
      }
 else       if (rbraceMode == LAST_RBRACE_IS_END) {
        if (lexer.getTokenType() == null) {
          TreeUtil.addChildren(elementToAdd,tokenElement);
          return;
        }
 else {
          break Label;
        }
      }
 else {
        LOG.assertTrue(false);
      }
    }
    String error;
    if (tokenType == ELSE_KEYWORD) {
      error="'else' without 'if'";
    }
 else     if (tokenType == CATCH_KEYWORD) {
      error="'catch' without 'try'";
    }
 else     if (tokenType == FINAL_KEYWORD) {
      error="'finally' without 'try'";
    }
 else {
      error="Unexpected token";
    }
    CompositeElement errorElement=Factory.createErrorElement(error);
    TreeUtil.addChildren(errorElement,tokenElement);
    TreeUtil.addChildren(elementToAdd,errorElement);
  }
}
