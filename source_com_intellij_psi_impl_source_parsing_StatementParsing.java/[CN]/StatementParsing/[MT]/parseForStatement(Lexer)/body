{
  LOG.assertTrue(lexer.getTokenType() == FOR_KEYWORD);
  final TreeElement forKeyword=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
  lexer.advance();
  if (lexer.getTokenType() != LPARENTH) {
    CompositeElement errorForElement=ASTFactory.composite(FOR_STATEMENT);
    TreeUtil.addChildren(errorForElement,forKeyword);
    TreeUtil.addChildren(errorForElement,Factory.createErrorElement(JavaErrorMessages.message("expected.lparen")));
    return errorForElement;
  }
  final TreeElement lparenth=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
  lexer.advance();
  final LexerPosition afterLParenth=lexer.getCurrentPosition();
  final TreeElement parameter=myContext.getDeclarationParsing().parseParameter(lexer,false);
  if (parameter == null || parameter.getElementType() != PARAMETER || lexer.getTokenType() != COLON) {
    lexer.restore(afterLParenth);
    return parseForLoopFromInitialization(forKeyword,lparenth,lexer);
  }
 else {
    return parseForEachFromColon(forKeyword,lparenth,parameter,lexer);
  }
}
