{
  PsiExpression lOperand=getLOperands(expression,token);
  PsiExpression rOperand=getROperands(expression,token);
  PsiIfStatement secondIf=(PsiIfStatement)ifStatement.copy();
  PsiStatement elseBranch=ifStatement.getElseBranch();
  if (elseBranch != null) {
    elseBranch=(PsiStatement)elseBranch.copy();
  }
  ifStatement.getCondition().replace(RefactoringUtil.unparenthesizeExpression(lOperand));
  secondIf.getCondition().replace(RefactoringUtil.unparenthesizeExpression(rOperand));
  ifStatement.setElseBranch(secondIf);
  if (elseBranch != null) {
    secondIf.setElseBranch(elseBranch);
  }
  int offset1=ifStatement.getCondition().getTextOffset();
  editor.getCaretModel().moveToOffset(offset1);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  editor.getSelectionModel().removeSelection();
}
