{
  if (element instanceof PsiDirectory) {
    return JavaDirectoryService.getInstance().getLanguageLevel((PsiDirectory)element);
  }
  PsiFile file=element.getContainingFile();
  if (file instanceof PsiJavaFile) {
    return ((PsiJavaFile)file).getLanguageLevel();
  }
  if (file != null) {
    PsiElement context=file.getContext();
    if (context != null) {
      return getLanguageLevel(context);
    }
  }
  return getLanguageLevel(element.getProject());
}
