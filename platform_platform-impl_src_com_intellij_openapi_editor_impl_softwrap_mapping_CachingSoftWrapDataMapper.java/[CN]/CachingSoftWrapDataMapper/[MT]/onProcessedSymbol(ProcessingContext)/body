{
switch (context.symbol) {
case '\n':
    onLineFeed(context);
  break;
case '\t':
onTabulation(context);
break;
default :
onNonLineFeedSymbol(context);
break;
}
int documentLength=myEditor.getDocument().getTextLength();
if (documentLength > 0 && context.offset >= documentLength - 1 && context.symbol != '\n') {
CacheEntry cacheEntry=getCacheEntryForVisualLine(context.visualLine);
cacheEntry.endLogicalColumn=context.logicalColumn + context.symbolWidthInColumns - 1;
cacheEntry.endVisualColumn=context.visualColumn + context.symbolWidthInColumns - 1;
}
}
