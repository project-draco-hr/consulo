{
  CacheEntry cacheEntry=getCacheEntryForVisualLine(visualLine);
  int tabIndex=0;
  for (; tabIndex < cacheEntry.getTabData().size(); tabIndex++) {
    if (cacheEntry.getTabData().get(tabIndex).offset >= offset) {
      break;
    }
  }
  if (tabIndex < cacheEntry.getTabData().size() - 1) {
    cacheEntry.getTabData().subList(tabIndex,cacheEntry.getTabData().size()).clear();
  }
  cacheEntry.getFoldingData().retainEntries(new TIntObjectProcedure<FoldingData>(){
    @Override public boolean execute(    int foldStartOffset,    FoldingData data){
      return foldStartOffset < offset;
    }
  }
);
}
