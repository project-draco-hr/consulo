{
  myBeforeChangeState.updateByDocumentOffsets(startOffset,endOffset);
  if (!myBeforeChangeState.valid) {
    return;
  }
  myNotAffectedByUpdateTailCacheEntries.clear();
  myNotAffectedByUpdateTailCacheEntries.addAll(myCache.subList(myBeforeChangeState.endCacheEntryIndex + 1,myCache.size()));
  myCache.subList(myBeforeChangeState.startCacheEntryIndex + 1,myCache.size()).clear();
  for (  CacheEntry entry : myNotAffectedByUpdateTailCacheEntries) {
    entry.locked=true;
  }
  myCache.get(myBeforeChangeState.startCacheEntryIndex).collapse();
}
