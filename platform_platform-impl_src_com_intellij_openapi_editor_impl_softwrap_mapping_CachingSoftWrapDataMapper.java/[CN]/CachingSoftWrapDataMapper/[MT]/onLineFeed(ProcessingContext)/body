{
  CacheEntry cacheEntry=getCacheEntryForVisualLine(context.visualLine);
  cacheEntry.setLineEndPosition(context);
  cacheEntry=getCacheEntryForVisualLine(context.visualLine + 1);
  ProcessingContext newLineContext=context.clone();
  newLineContext.onNewLine();
  newLineContext.offset++;
  cacheEntry.setLineStartPosition(newLineContext,context.visualLine + 1);
  cacheEntry.setLineEndPosition(newLineContext);
}
