{
  int startOffset=event.getStartOffset();
  if (!isNewRendering()) {
    int startIndex=MappingUtil.getCacheEntryIndexForOffset(startOffset,myEditor.getDocument(),myCache);
    if (startIndex < 0) {
      startIndex=-startIndex - 1;
    }
    myAffectedByUpdateCacheEntries.clear();
    if (startIndex < myCache.size()) {
      List<CacheEntry> affectedEntries=myCache.subList(startIndex,myCache.size());
      myAffectedByUpdateCacheEntries.addAll(affectedEntries);
      affectedEntries.clear();
    }
  }
  myAffectedByUpdateSoftWraps.clear();
  myAffectedByUpdateSoftWraps.addAll(myStorage.removeStartingFrom(startOffset + 1));
}
