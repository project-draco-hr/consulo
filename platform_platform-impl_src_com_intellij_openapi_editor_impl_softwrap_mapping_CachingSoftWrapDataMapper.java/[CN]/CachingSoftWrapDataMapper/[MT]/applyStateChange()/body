{
  int visualLinesDiff=myAfterChangeState.visualLines - myBeforeChangeState.visualLines;
  int logicalLinesDiff=myAfterChangeState.logicalLines - myBeforeChangeState.logicalLines;
  int softWrappedLinesDiff=myAfterChangeState.softWrapLines - myBeforeChangeState.softWrapLines;
  int foldedLinesDiff=myAfterChangeState.foldedLines - myBeforeChangeState.foldedLines;
  int i=MappingUtil.getCacheEntryIndexForOffset(myAfterChangeState.endOffset,myEditor.getDocument(),myCache) + 1;
  for (; i < myCache.size(); i++) {
    CacheEntry cacheEntry=myCache.get(i);
    cacheEntry.visualLine+=visualLinesDiff;
    cacheEntry.startLogicalLine+=logicalLinesDiff;
    cacheEntry.endLogicalLine+=logicalLinesDiff;
    cacheEntry.startSoftWrapLinesBefore+=softWrappedLinesDiff;
    cacheEntry.endSoftWrapLinesBefore+=softWrappedLinesDiff;
    cacheEntry.startFoldedLines+=foldedLinesDiff;
    cacheEntry.endFoldedLines+=foldedLinesDiff;
  }
}
