{
switch (position.symbol) {
case '\n':
    onLineFeed(position);
  break;
case '\t':
onTabulation(position);
break;
default :
onNonLineFeedSymbol(position);
break;
}
int documentLength=myEditor.getDocument().getTextLength();
if (documentLength > 0 && position.offset >= documentLength - 1 && position.symbol != '\n') {
CacheEntry cacheEntry=getCacheEntryForVisualLine(position.visualLine);
cacheEntry.endLogicalColumn+=position.symbolWidthInColumns;
cacheEntry.endVisualColumn+=position.symbolWidthInColumns;
cacheEntry.endOffset++;
}
}
