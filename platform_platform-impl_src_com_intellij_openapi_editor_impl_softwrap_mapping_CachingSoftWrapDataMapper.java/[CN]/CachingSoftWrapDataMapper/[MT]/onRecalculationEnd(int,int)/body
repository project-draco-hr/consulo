{
  if (!myBeforeChangeState.valid) {
    return;
  }
  int endIndex=myCache.size() - 2;
  myAfterChangeState.updateByCacheIndices(myBeforeChangeState.startCacheEntryIndex,endIndex);
  myCache.subList(myAfterChangeState.endCacheEntryIndex + 1,myCache.size()).clear();
  myCache.addAll(myNotAffectedByUpdateTailCacheEntries);
  for (  CacheEntry entry : myNotAffectedByUpdateTailCacheEntries) {
    entry.locked=false;
  }
  applyStateChange();
}
