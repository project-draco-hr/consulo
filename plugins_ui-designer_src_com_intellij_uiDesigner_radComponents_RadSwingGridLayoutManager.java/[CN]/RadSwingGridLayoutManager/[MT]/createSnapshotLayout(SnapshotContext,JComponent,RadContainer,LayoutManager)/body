{
  GridLayout gridLayout=(GridLayout)layout;
  int ncomponents=parent.getComponentCount();
  int nrows=gridLayout.getRows();
  int ncols=gridLayout.getColumns();
  if (nrows > 0) {
    ncols=(ncomponents + nrows - 1) / nrows;
  }
 else {
    nrows=(ncomponents + ncols - 1) / ncols;
  }
  container.setLayout(new GridLayoutManager(nrows,ncols,new Insets(0,0,0,0),gridLayout.getHgap(),gridLayout.getVgap(),true,true));
}
