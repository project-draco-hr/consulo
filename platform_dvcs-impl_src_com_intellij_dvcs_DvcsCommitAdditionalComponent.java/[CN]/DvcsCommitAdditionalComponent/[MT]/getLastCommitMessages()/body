{
  Map<VirtualFile,String> messagesForRoots=new HashMap<VirtualFile,String>();
  Collection<VirtualFile> roots=myCheckinPanel.getRoots();
  final Ref<VcsException> exception=Ref.create();
  for (  VirtualFile root : roots) {
    String message=getLastCommitMessage(root);
    messagesForRoots.put(root,message);
  }
  if (!exception.isNull()) {
    throw exception.get();
  }
  return messagesForRoots;
}
