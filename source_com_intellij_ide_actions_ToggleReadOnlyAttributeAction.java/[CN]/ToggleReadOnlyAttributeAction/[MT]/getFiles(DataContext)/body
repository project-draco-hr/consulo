{
  ArrayList<VirtualFile> filesList=new ArrayList<VirtualFile>();
  VirtualFile[] files=(VirtualFile[])dataContext.getData(DataConstants.VIRTUAL_FILE_ARRAY);
  for (int i=0; files != null && i < files.length; i++) {
    VirtualFile file=files[i];
    if (file.getFileSystem() instanceof LocalFileSystem) {
      filesList.add(file);
    }
  }
  return filesList.toArray(new VirtualFile[filesList.size()]);
}
