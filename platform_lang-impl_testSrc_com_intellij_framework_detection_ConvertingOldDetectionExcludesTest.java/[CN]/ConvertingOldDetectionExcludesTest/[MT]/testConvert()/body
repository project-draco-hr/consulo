{
  final DisabledAutodetectionInfo state=new DisabledAutodetectionInfo();
  final VirtualFile file=myTempFiles.createVFile("my-file",".xml");
  state.getElements().add(new DisabledAutodetectionByTypeElement(FRAMEWORK_ID,myModule.getName(),file.getUrl(),false));
  getOldConfiguration().loadState(state);
  getNewConfiguration().addExcludedFramework(new FrameworkType("my-framework-2","",null));
  assertNull(getOldConfiguration().getState());
  final ExcludesConfigurationState newState=getNewConfiguration().getState();
  assertNotNull(newState);
  assertEquals(FRAMEWORK_ID,assertOneElement(newState.getFiles()).getFrameworkType());
  assertEquals("my-framework-2",assertOneElement(newState.getFrameworkTypes()));
}
