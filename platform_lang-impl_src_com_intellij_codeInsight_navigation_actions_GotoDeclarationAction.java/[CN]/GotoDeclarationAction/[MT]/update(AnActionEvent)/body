{
  final InputEvent inputEvent=event.getInputEvent();
  if (inputEvent instanceof MouseEvent) {
    final MouseEvent mouseEvent=(MouseEvent)inputEvent;
    final Point point=mouseEvent.getPoint();
    final Component componentAt=SwingUtilities.getDeepestComponentAt(inputEvent.getComponent(),point.x,point.y);
    if (componentAt instanceof EditorGutterComponentEx) {
      event.getPresentation().setEnabled(false);
      return;
    }
  }
  for (  GotoDeclarationHandler handler : Extensions.getExtensions(GotoDeclarationHandler.EP_NAME)) {
    try {
      final String text=handler.getActionText(event.getDataContext());
      if (text != null) {
        Presentation presentation=event.getPresentation();
        presentation.setText(text);
        break;
      }
    }
 catch (    AbstractMethodError e) {
      LOG.error(handler.toString(),e);
    }
  }
  super.update(event);
}
