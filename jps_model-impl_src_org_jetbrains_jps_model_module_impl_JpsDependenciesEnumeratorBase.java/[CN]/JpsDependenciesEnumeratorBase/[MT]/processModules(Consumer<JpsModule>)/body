{
  processDependencies(new Processor<JpsDependencyElement>(){
    @Override public boolean process(    JpsDependencyElement dependencyElement){
      if (myRecursively && dependencyElement instanceof JpsModuleSourceDependency) {
        consumer.consume(dependencyElement.getContainingModule());
      }
 else       if (!myRecursively && dependencyElement instanceof JpsModuleDependency) {
        JpsModule module=((JpsModuleDependency)dependencyElement).getModule();
        if (module != null) {
          consumer.consume(module);
        }
      }
      return true;
    }
  }
);
}
