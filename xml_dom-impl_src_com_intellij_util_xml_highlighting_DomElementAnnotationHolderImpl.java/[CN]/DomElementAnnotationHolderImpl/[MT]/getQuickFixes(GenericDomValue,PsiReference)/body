{
  final List<LocalQuickFix> result=new SmartList<LocalQuickFix>();
  final Converter converter=WrappingConverter.getDeepestConverter(element.getConverter(),element);
  if (converter instanceof ResolvingConverter) {
    final ResolvingConverter resolvingConverter=(ResolvingConverter)converter;
    ContainerUtil.addAll(result,resolvingConverter.getQuickFixes(new ConvertContextImpl(DomManagerImpl.getDomInvocationHandler(element))));
  }
  if (reference instanceof LocalQuickFixProvider) {
    final LocalQuickFix[] localQuickFixes=((LocalQuickFixProvider)reference).getQuickFixes();
    if (localQuickFixes != null) {
      ContainerUtil.addAll(result,localQuickFixes);
    }
  }
  return result.isEmpty() ? LocalQuickFix.EMPTY_ARRAY : result.toArray(new LocalQuickFix[result.size()]);
}
