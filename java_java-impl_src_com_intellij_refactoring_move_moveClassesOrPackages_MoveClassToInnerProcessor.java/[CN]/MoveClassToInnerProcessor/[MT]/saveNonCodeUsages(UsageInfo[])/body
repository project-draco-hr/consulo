{
  for (  PsiClass classToMove : myClassesToMove) {
    for (    UsageInfo usageInfo : usages) {
      if (usageInfo instanceof NonCodeUsageInfo) {
        final NonCodeUsageInfo nonCodeUsage=(NonCodeUsageInfo)usageInfo;
        PsiElement element=nonCodeUsage.getElement();
        if (element != null && PsiTreeUtil.isAncestor(classToMove,element,false)) {
          List<NonCodeUsageInfo> list=element.getCopyableUserData(ourNonCodeUsageKey);
          if (list == null) {
            list=new ArrayList<NonCodeUsageInfo>();
            element.putCopyableUserData(ourNonCodeUsageKey,list);
          }
          list.add(nonCodeUsage);
        }
      }
    }
  }
}
