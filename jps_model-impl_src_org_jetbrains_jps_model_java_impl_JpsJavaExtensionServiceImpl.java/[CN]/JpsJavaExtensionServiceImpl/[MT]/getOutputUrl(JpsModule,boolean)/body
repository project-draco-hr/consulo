{
  final JpsJavaModuleExtension extension=getModuleExtension(module);
  if (extension == null)   return null;
  if (extension.isInheritOutput()) {
    JpsJavaProjectExtension projectExtension=getProjectExtension(module.getProject());
    if (projectExtension == null)     return null;
    final String url=projectExtension.getOutputUrl();
    if (url == null)     return null;
    return url + "/" + (forTests ? "test" : "production")+ "/"+ module.getName();
  }
  return forTests ? extension.getTestOutputUrl() : extension.getOutputUrl();
}
