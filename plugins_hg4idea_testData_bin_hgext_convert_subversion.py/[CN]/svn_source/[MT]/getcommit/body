def getcommit(self, rev):
    if (rev not in self.commits):
        (uuid, module, revnum) = self.revsplit(rev)
        self.module = module
        self.reparent(module)
        stop = self.lastrevs.get(module, 0)
        if (revnum < stop):
            stop = (revnum + 1)
        self._fetch_revisions(revnum, stop)
    commit = self.commits[rev]
    del self.commits[rev]
    return commit
