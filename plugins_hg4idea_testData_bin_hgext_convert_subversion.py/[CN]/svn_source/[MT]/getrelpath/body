def getrelpath(self, path, module=None):
    if (module is None):
        module = self.module
    if path.startswith(module):
        relative = path.rstrip('/')[len(module):]
        if relative.startswith('/'):
            return relative[1:]
        elif (relative == ''):
            return relative
    self.ui.debug(('%r is not under %r, ignoring\n' % (path, module)))
    return None
