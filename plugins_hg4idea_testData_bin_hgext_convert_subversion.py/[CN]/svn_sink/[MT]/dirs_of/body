def dirs_of(self, files):
    dirs = set()
    for f in files:
        if os.path.isdir(self.wjoin(f)):
            dirs.add(f)
        for i in strutil.rfindall(f, '/'):
            dirs.add(f[:i])
    return dirs
