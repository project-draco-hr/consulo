def issvnurl(ui, url):
    try:
        (proto, path) = url.split('://', 1)
        if (proto == 'file'):
            path = urllib.url2pathname(path)
    except ValueError:
        proto = 'file'
        path = os.path.abspath(url)
    if (proto == 'file'):
        path = path.replace(os.sep, '/')
    check = protomap.get(proto, (lambda *args: False))
    while ('/' in path):
        if check(ui, path, proto):
            return True
        path = path.rsplit('/', 1)[0]
    return False
