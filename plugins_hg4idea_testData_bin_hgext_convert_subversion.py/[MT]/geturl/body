def geturl(path):
    try:
        return svn.client.url_from_path(svn.core.svn_path_canonicalize(path))
    except SubversionException:
        pass
    if os.path.isdir(path):
        path = os.path.normpath(os.path.abspath(path))
        if (os.name == 'nt'):
            path = ('/' + util.normpath(path))
        path = encoding.tolocal(path)
        return ('file://%s' % urllib.quote(path))
    return path
