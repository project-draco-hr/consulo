{
  myResultHandler.startDocument();
  Map<String,Integer> counts=new HashMap<String,Integer>();
  for (  AbstractTestProxy node : myTestRoot.getAllTests()) {
    if (!node.isLeaf())     continue;
    String status=getStatusString(node);
    increment(counts,status);
    increment(counts,"total");
  }
  Map<String,String> runAttrs=new HashMap<String,String>();
  runAttrs.put(ATTR_NAME,myRuntimeConfiguration.getName());
  Integer duration=myTestRoot.getDuration();
  if (duration != null) {
    runAttrs.put(ATTR_DURATION,String.valueOf(duration));
  }
  startElement(ELEM_RUN,runAttrs);
  for (  Map.Entry<String,Integer> entry : counts.entrySet()) {
    Map<String,String> a=new HashMap<String,String>();
    a.put(ATTR_NAME,entry.getKey());
    a.put(ATTR_VALUE,String.valueOf(entry.getValue()));
    startElement(ELEM_COUNT,a);
    endElement(ELEM_COUNT);
  }
  if (myTestRoot.shouldSkipRootNodeForExport()) {
    for (    AbstractTestProxy node : myTestRoot.getChildren()) {
      processNode(node);
    }
  }
 else {
    processNode(myTestRoot);
  }
  endElement(ELEM_RUN);
  myResultHandler.endDocument();
}
