{
  String versionString=jdk.getVersionString();
  if (versionString == null)   return;
  ProjectRootManagerEx rootManager=ProjectRootManagerEx.getInstanceEx(project);
  rootManager.setProjectSdk(jdk);
  LanguageLevel level=LanguageLevelUtil.getDefaultLanguageLevel(versionString);
  LanguageLevelProjectExtension ext=LanguageLevelProjectExtension.getInstance(project);
  if (level.compareTo(ext.getLanguageLevel()) < 0) {
    ext.setLanguageLevel(level);
  }
}
