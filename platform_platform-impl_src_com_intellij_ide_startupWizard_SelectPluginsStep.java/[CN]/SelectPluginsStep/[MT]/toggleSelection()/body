{
  final IdeaPluginDescriptor descriptor=getSelectedPlugin();
  if (descriptor == null || myModel.isForceEnable(descriptor))   return;
  boolean willDisable=!myModel.isDisabledPlugin(descriptor);
  final Object[] selection=myPluginsList.getSelectedValues();
  for (  Object o : selection) {
    IdeaPluginDescriptor desc=(IdeaPluginDescriptor)o;
    if (!willDisable) {
      myModel.setPluginEnabledWithDependencies(desc);
    }
 else {
      myModel.setPluginDisabledWithDependents(desc);
    }
  }
  myPluginsList.repaint();
}
