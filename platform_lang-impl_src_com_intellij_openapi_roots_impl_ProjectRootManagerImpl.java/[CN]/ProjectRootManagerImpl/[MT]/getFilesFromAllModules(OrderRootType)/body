{
  final List<VirtualFile> result=new ArrayList<VirtualFile>();
  for (  Module module : getModuleManager().getSortedModules()) {
    final VirtualFile[] files=ModuleRootManager.getInstance(module).getFiles(type);
    ContainerUtil.addAll(result,files);
  }
  return VfsUtil.toVirtualFileArray(result);
}
