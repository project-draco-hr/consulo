{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  new Task.Backgroundable(project,"Test Process",true){
    public void run(    @NotNull final ProgressIndicator indicator){
      try {
        Thread.currentThread().sleep(6000);
        countTo(1000,new Count(){
          public void onCount(          int each){
            indicator.setText("Found: " + each / 20 + 1);
            if (each / 10.0 == Math.round(each / 10.0)) {
              indicator.setText(null);
            }
            indicator.setFraction(each / 1000.0);
            try {
              Thread.currentThread().sleep(100);
            }
 catch (            InterruptedException e1) {
              e1.printStackTrace();
            }
            indicator.checkCanceled();
            indicator.setText2("bla bla bla");
          }
        }
);
        indicator.stop();
      }
 catch (      ProcessCanceledException e1) {
        try {
          Thread.currentThread().sleep(10000);
          indicator.stop();
        }
 catch (        InterruptedException e2) {
          e2.printStackTrace();
        }
        return;
      }
catch (      InterruptedException e1) {
        e1.printStackTrace();
      }
    }
  }
.queue();
}
