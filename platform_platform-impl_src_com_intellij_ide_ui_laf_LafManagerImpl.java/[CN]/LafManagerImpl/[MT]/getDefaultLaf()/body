{
  final String systemLafClassName=UIManager.getSystemLookAndFeelClassName();
  if (SystemInfo.isMac) {
    UIManager.LookAndFeelInfo laf=findLaf(systemLafClassName);
    LOG.assertTrue(laf != null);
    return laf;
  }
  final String defaultLafName=StartupUtil.getDefaultLAF();
  if (defaultLafName != null) {
    UIManager.LookAndFeelInfo defaultLaf=findLaf(defaultLafName);
    if (defaultLaf != null) {
      return defaultLaf;
    }
  }
  UIManager.LookAndFeelInfo ideaLaf=findLaf(IdeaLookAndFeelInfo.CLASS_NAME);
  if (ideaLaf != null) {
    return ideaLaf;
  }
  throw new IllegalStateException("No default look&feel found");
}
