{
  val modifiableRootModel=myModuleEditor.getModifiableRootModelProxy();
  String copyName=myCopy ? modifiableRootModel.getCurrentLayerName() : null;
  String newName=Messages.showInputDialog(modifiableRootModel.getModule().getProject(),"Name","Enter Name",Messages.getQuestionIcon(),copyName,new InputValidator(){
    @Override public boolean checkInput(    String s){
      return modifiableRootModel.findLayerByName(s) == null;
    }
    @Override public boolean canClose(    String s){
      return true;
    }
  }
);
  if (newName != null) {
    modifiableRootModel.addLayer(newName,copyName,true);
    modifiableRootModel.addContentEntry(modifiableRootModel.getModule().getModuleDirUrl());
  }
}
