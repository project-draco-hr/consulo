{
  return ApplicationManager.getApplication().runReadAction(new NullableComputable<PositionManager>(){
    @Override public PositionManager compute(){
      if (JavaPsiFacade.getInstance(process.getProject()).findPackage("com.springsource.loaded") != null) {
        return new SpringLoadedPositionManager(process);
      }
      return null;
    }
  }
);
}
