{
  atomic(new Runnable(){
    @Override public void run(){
      if (isDisabled() || check && !getContext().myUpdatedProviders.contains(viewProvider))       return;
      try {
        disablePostprocessFormattingInside(new Runnable(){
          @Override public void run(){
            doPostponedFormattingInner(viewProvider);
          }
        }
);
      }
  finally {
        getContext().myUpdatedProviders.remove(viewProvider);
        getContext().myReformatElements.remove(viewProvider);
        viewProvider.putUserData(REFORMAT_ORIGINATOR,null);
      }
    }
  }
);
}
