{
  if (isViewProviderLocked(viewProvider)) {
    throw new RuntimeException("Document is locked by write PSI operations. Use PsiDocumentManager.doPostponedOperationsAndUnblockDocument() to commit PSI changes to the document.");
  }
  postponedFormatting(viewProvider);
}
