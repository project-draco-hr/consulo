{
  if (isActive()) {
    boolean changes=false;
    if (!isVisible()) {
      setVisible(true);
      changes=true;
    }
    Icon icon=UISettings.getInstance().HIDE_TOOL_STRIPES ? AllIcons.General.TbShown : AllIcons.General.TbHidden;
    if (icon != getIcon()) {
      setIcon(icon);
      changes=true;
    }
    Set<Integer> vks=ToolWindowManagerImpl.getActivateToolWindowVKs();
    String text="Click to show or hide the tool window bars";
    if (vks.size() == 1) {
      Integer stroke=vks.iterator().next();
      String keystrokeText=KeymapUtil.getKeystrokeText(KeyStroke.getKeyStroke(stroke.intValue(),0));
      text+=".\nDouble-press and hold " + keystrokeText + " to show tool window bars when hidden.";
    }
    if (!text.equals(getToolTipText())) {
      setToolTipText(text);
      changes=true;
    }
    if (changes) {
      revalidate();
      repaint();
    }
  }
 else {
    setVisible(false);
    setToolTipText(null);
  }
}
