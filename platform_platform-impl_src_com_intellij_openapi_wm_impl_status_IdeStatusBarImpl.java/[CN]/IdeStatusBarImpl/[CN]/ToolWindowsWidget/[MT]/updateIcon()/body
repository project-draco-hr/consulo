{
  if (isActive()) {
    boolean changes=false;
    if (!isVisible()) {
      setVisible(true);
      changes=true;
    }
    Icon icon=UISettings.getInstance().HIDE_TOOL_STRIPES ? HIDDEN : SHOWN;
    if (icon != getIcon()) {
      setIcon(icon);
      changes=true;
    }
    Set<Integer> vks=ToolWindowManagerImpl.getActivateToolWindowVKs();
    String text="Click to show/hide tool windows side bars";
    if (vks.size() == 1) {
      Integer stroke=vks.iterator().next();
      String keystrokeText=KeymapUtil.getKeystrokeText(KeyStroke.getKeyStroke(stroke.intValue(),0));
      text+=".\nUse double click of " + keystrokeText + " to popup them when hidden";
    }
    if (!text.equals(getToolTipText())) {
      setToolTipText(text);
      changes=true;
    }
    if (changes) {
      revalidate();
      repaint();
    }
  }
 else {
    setVisible(false);
    setToolTipText(null);
  }
}
