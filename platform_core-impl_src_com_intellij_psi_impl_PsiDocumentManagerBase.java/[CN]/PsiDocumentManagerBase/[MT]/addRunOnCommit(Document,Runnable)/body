{
synchronized (ACTION_AFTER_COMMIT) {
    List<Runnable> list=document.getUserData(ACTION_AFTER_COMMIT);
    if (list == null) {
      document.putUserData(ACTION_AFTER_COMMIT,list=new SmartList<Runnable>());
    }
    list.add(action);
  }
}
