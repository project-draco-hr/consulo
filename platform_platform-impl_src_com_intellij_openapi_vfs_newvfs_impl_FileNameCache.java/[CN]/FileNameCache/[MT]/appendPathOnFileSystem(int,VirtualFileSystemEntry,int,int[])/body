{
  IntObjectLinkedMap.MapEntry<CharSequence> entry=getEntry(nameId);
  CharSequence o=entry.value;
  int nameLength=o.length();
  boolean appendSlash=SystemInfo.isWindows && parent == null && nameLength == 2 && o.charAt(1) == ':';
  char[] chars;
  if (parent != null) {
    chars=parent.appendPathOnFileSystem(accumulatedPathLength + 1 + nameLength,positionRef);
    if (positionRef[0] > 0 && chars[positionRef[0] - 1] != '/') {
      chars[positionRef[0]++]='/';
    }
  }
 else {
    int rootPathLength=accumulatedPathLength + nameLength;
    if (appendSlash)     ++rootPathLength;
    chars=new char[rootPathLength];
  }
  positionRef[0]=VirtualFileSystemEntry.copyString(chars,positionRef[0],o);
  if (appendSlash) {
    chars[positionRef[0]++]='/';
  }
  return chars;
}
