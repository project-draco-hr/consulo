{
  Presentation presentation=e.getPresentation();
  DataContext dataContext=e.getDataContext();
  VirtualFile file=PlatformDataKeys.VIRTUAL_FILE.getData(dataContext);
  Project project=CommonDataKeys.PROJECT.getData(dataContext);
  boolean haveSmthToDo;
  if (project == null || file == null || file.isDirectory()) {
    haveSmthToDo=false;
  }
 else {
    haveSmthToDo=FileTypeManager.getInstance().getFileTypeByFileName(file.getName()) == UnknownFileType.INSTANCE;
  }
  presentation.setVisible(haveSmthToDo || ActionPlaces.MAIN_MENU.equals(e.getPlace()));
  presentation.setEnabled(haveSmthToDo);
}
