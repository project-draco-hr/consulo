{
  SwingUtilities.layoutCompoundLabel(menuItem,fontmetrics,text,icon,verticalAlignment,horizontalAlignment,verticalTextPosition,horizontalTextPosition,viewRect,iconRect,textRect,textIconGap);
  if (keyStrokeText == null || "".equals(keyStrokeText)) {
    acceleratorRect.width=acceleratorRect.height=0;
  }
 else {
    acceleratorRect.width=SwingUtilities.computeStringWidth(fontmetrics1,keyStrokeText);
    acceleratorRect.height=fontmetrics1.getHeight();
  }
  if (useCheckAndArrow()) {
    if (checkIcon != null) {
      checkIconRect.width=checkIcon.getIconWidth();
      checkIconRect.height=checkIcon.getIconHeight();
    }
 else {
      checkIconRect.width=checkIconRect.height=0;
    }
    if (arrowIcon != null) {
      arrowIconRect.width=arrowIcon.getIconWidth();
      arrowIconRect.height=arrowIcon.getIconHeight();
    }
 else {
      arrowIconRect.width=arrowIconRect.height=0;
    }
    textRect.x+=myMaxGutterIconWidth;
    iconRect.x+=myMaxGutterIconWidth;
  }
  textRect.x+=menuItemGap;
  iconRect.x+=menuItemGap;
  Rectangle labelRect=iconRect.union(textRect);
  acceleratorRect.x+=viewRect.width - arrowIconRect.width - menuItemGap- acceleratorRect.width;
  acceleratorRect.y=(viewRect.y + viewRect.height / 2) - acceleratorRect.height / 2;
  if (useCheckAndArrow()) {
    arrowIconRect.x+=viewRect.width - arrowIconRect.width;
    arrowIconRect.y=(viewRect.y + labelRect.height / 2) - arrowIconRect.height / 2;
    if (checkIcon != null) {
      checkIconRect.y=(viewRect.y + labelRect.height / 2) - checkIconRect.height / 2;
      checkIconRect.x+=(viewRect.x + myMaxGutterIconWidth / 2) - checkIcon.getIconWidth() / 2;
      a=viewRect.x;
      e=(viewRect.y + labelRect.height / 2) - myMaxGutterIconWidth / 2;
      k=viewRect.x + myMaxGutterIconWidth + 2;
    }
 else {
      checkIconRect.x=checkIconRect.y=0;
    }
  }
  return text;
}
