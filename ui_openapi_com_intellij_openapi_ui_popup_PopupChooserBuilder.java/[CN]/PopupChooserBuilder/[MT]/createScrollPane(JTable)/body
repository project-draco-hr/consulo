{
  if (table instanceof TreeTable) {
    TreeUtil.expandAll(((TreeTable)table).getTree());
  }
  JScrollPane scrollPane=new JScrollPane(table);
  scrollPane.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
  if (table.getSelectedRow() == -1) {
    table.getSelectionModel().setSelectionInterval(0,0);
  }
  if (table.getRowCount() >= 20) {
    scrollPane.getViewport().setPreferredSize(new Dimension(table.getPreferredScrollableViewportSize().width,300));
  }
 else {
    scrollPane.getViewport().setPreferredSize(table.getPreferredSize());
  }
  table.addMouseMotionListener(new MouseMotionAdapter(){
    public void mouseMoved(    MouseEvent e){
      int index=table.rowAtPoint(e.getPoint());
      table.getSelectionModel().setSelectionInterval(index,index);
    }
  }
);
  return scrollPane;
}
