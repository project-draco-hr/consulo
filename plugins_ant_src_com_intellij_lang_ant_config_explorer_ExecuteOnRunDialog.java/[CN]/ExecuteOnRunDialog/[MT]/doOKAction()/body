{
  final AntConfigurationBase antConfiguration=AntConfigurationBase.getInstance(myProject);
  for (  final ExecutionEvent event : antConfiguration.getEventsForTarget(myTarget)) {
    if (event instanceof ExecuteBeforeRunEvent) {
      antConfiguration.clearTargetForEvent(event);
    }
  }
  Enumeration nodes=myRoot.depthFirstEnumeration();
  while (nodes.hasMoreElements()) {
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)nodes.nextElement();
    Descriptor descriptor=(Descriptor)node.getUserObject();
    if (!descriptor.isChecked())     continue;
    if (descriptor instanceof ConfigurationTypeDescriptor) {
      ConfigurationTypeDescriptor configurationTypeDescriptor=(ConfigurationTypeDescriptor)descriptor;
      ExecuteBeforeRunEvent event=new ExecuteBeforeRunEvent(configurationTypeDescriptor.getConfigurationFactory());
      antConfiguration.setTargetForEvent(myFile,myTarget.getName(),event);
    }
 else     if (descriptor instanceof ConfigurationDescriptor) {
      ConfigurationDescriptor configurationDescriptor=(ConfigurationDescriptor)descriptor;
      ExecuteBeforeRunEvent event=new ExecuteBeforeRunEvent(configurationDescriptor.getConfiguration());
      antConfiguration.setTargetForEvent(myFile,myTarget.getName(),event);
    }
  }
  close(OK_EXIT_CODE);
}
