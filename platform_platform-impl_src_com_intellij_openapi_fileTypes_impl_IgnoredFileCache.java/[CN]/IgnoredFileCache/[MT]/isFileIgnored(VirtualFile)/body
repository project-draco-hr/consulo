{
  if (!myEnableCache || !(file instanceof NewVirtualFile)) {
    return isFileIgnoredNoCache(file);
  }
  int id=((NewVirtualFile)file).getId();
  if (id < 0) {
    return isFileIgnoredNoCache(file);
  }
synchronized (myCheckedIds) {
    if (myCheckedIds.get(id)) {
      return myIgnoredIds.contains(id);
    }
  }
  boolean result=isFileIgnoredNoCache(file);
  ;
synchronized (myCheckedIds) {
    myCheckedIds.set(id);
    if (result) {
      myIgnoredIds.add(id);
    }
 else {
      myIgnoredIds.remove(id);
    }
  }
  return result;
}
