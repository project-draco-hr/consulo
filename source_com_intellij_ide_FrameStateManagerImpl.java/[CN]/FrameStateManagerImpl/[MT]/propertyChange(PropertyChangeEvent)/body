{
  KeyboardFocusManager focusManager=(KeyboardFocusManager)e.getSource();
  Window activeWindow=focusManager.getActiveWindow();
  if (activeWindow != null) {
    mySyncAlarm.cancelAllRequests();
    if (myShouldSynchronize) {
      myShouldSynchronize=false;
      fireActivationEvent();
    }
  }
 else {
    myShouldSynchronize=true;
    mySyncAlarm.cancelAllRequests();
    mySyncAlarm.addRequest(new Runnable(){
      public void run(){
        fireDeactivationEvent();
      }
    }
,200);
  }
}
