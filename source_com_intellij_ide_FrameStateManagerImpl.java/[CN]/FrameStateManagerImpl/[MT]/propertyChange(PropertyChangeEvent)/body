{
  final KeyboardFocusManager focusManager=(KeyboardFocusManager)e.getSource();
  Window activeWindow=focusManager.getActiveWindow();
  if (activeWindow != null) {
    mySyncAlarm.cancelAllRequests();
    if (myShouldSynchronize) {
      myShouldSynchronize=false;
      fireActivationEvent();
    }
  }
 else {
    mySyncAlarm.cancelAllRequests();
    mySyncAlarm.addRequest(new Runnable(){
      public void run(){
        if (focusManager.getActiveWindow() == null) {
          myShouldSynchronize=true;
          fireDeactivationEvent();
        }
      }
    }
,200);
  }
}
