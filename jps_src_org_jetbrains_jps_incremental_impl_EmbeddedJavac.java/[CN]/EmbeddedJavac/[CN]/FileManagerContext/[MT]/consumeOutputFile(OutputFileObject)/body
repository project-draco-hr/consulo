{
  myTaskRunner.submit(new Runnable(){
    public void run(){
      try {
        for (        ClassPostProcessor processor : myClassProcessors) {
          processor.process(cls);
        }
      }
  finally {
        mySequentialTaskExecutor.submit(new Runnable(){
          public void run(){
            try {
              final File file=cls.getFile();
              final OutputFileObject.Content content=cls.getContent();
              if (content != null) {
                writeToFile(file,content.getBuffer(),content.getOffset(),content.getLength(),false);
              }
 else {
                myOutConsumer.report(new PlainMessageDiagnostic(Diagnostic.Kind.ERROR,"Missing content for file " + file));
              }
            }
 catch (            IOException e) {
              myOutConsumer.report(new PlainMessageDiagnostic(Diagnostic.Kind.ERROR,e.getMessage()));
            }
          }
        }
);
      }
    }
  }
);
}
