{
  Integer messageNumber=blockedDocumentRoots.get(documentRoot);
  EventQueue theQueue=documentRoot.getToolkit().getSystemEventQueue();
  do {
    try {
      AWTEvent event=theQueue.getNextEvent();
      boolean eventOk=true;
      if (event instanceof InputEvent) {
        final Object s=event.getSource();
        if (s instanceof Component) {
          Component c=(Component)s;
          Window w=findDocumentRoot(c);
          if (w == documentRoot) {
            eventOk=false;
            ((InputEvent)event).consume();
          }
        }
      }
      if (eventOk) {
        Class<?>[] paramString=new Class<?>[1];
        paramString[0]=AWTEvent.class;
        Method method=theQueue.getClass().getDeclaredMethod("dispatchEvent",paramString);
        method.setAccessible(true);
        method.invoke(theQueue,event);
      }
    }
 catch (    MacMessageException mme) {
      throw mme;
    }
catch (    Throwable e) {
      LOG.error(e);
    }
  }
 while (isBlockedDocumentRoot(documentRoot,messageNumber));
}
