{
  final String name=getNameValue();
  if (name.length() == 0) {
    final ApplicationInfo info=ApplicationManager.getApplication().getComponent(ApplicationInfo.class);
    throw new ConfigurationException(IdeBundle.message("prompt.new.project.file.name",info.getVersionName(),context.getPresentationName()));
  }
  final String projectFileDirectory=getPath();
  if (projectFileDirectory.length() == 0) {
    throw new ConfigurationException(IdeBundle.message("prompt.enter.project.file.location",context.getPresentationName()));
  }
  final boolean shouldPromptCreation=isPathChangedByUser();
  if (!ProjectWizardUtil.createDirectoryIfNotExists(IdeBundle.message("directory.project.file.directory",context.getPresentationName()),projectFileDirectory,shouldPromptCreation)) {
    return false;
  }
  final File file=new File(projectFileDirectory);
  if (file.exists() && !file.canWrite()) {
    throw new ConfigurationException(String.format("Directory '%s' is not writable!\nPlease choose another project location.",projectFileDirectory));
  }
  boolean shouldContinue=true;
  final File projectDir=new File(getPath(),Project.DIRECTORY_STORE_FOLDER);
  if (projectDir.exists()) {
    int answer=Messages.showYesNoDialog(IdeBundle.message("prompt.overwrite.project.folder",projectDir.getAbsolutePath(),context.getPresentationName()),IdeBundle.message("title.file.already.exists"),Messages.getQuestionIcon());
    shouldContinue=(answer == Messages.YES);
  }
  return shouldContinue;
}
