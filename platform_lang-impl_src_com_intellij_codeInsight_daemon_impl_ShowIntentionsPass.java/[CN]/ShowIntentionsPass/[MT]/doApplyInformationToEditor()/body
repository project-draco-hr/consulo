{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (!myEditor.getContentComponent().hasFocus())   return;
  LogicalPosition caretPos=myEditor.getCaretModel().getLogicalPosition();
  Rectangle visibleArea=myEditor.getScrollingModel().getVisibleArea();
  Point xy=myEditor.logicalPositionToXY(caretPos);
  if (!visibleArea.contains(xy))   return;
  TemplateState state=TemplateManagerImpl.getTemplateState(myEditor);
  if (myShowBulb && (state == null || state.isFinished()) && !HintManager.getInstance().hasShownHintsThatWillHideByOtherHint()) {
    IntentionHintComponent hintComponent=IntentionHintComponent.showIntentionHint(myProject,myFile,myEditor,myIntentionsInfo,false);
    if (myHasToRecreate) {
      hintComponent.recreate();
    }
    ((DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(myProject)).setLastIntentionHint(hintComponent);
  }
}
