{
  try {
    if (action instanceof PsiElementBaseIntentionAction) {
      if (!inProject || !((PsiElementBaseIntentionAction)action).isAvailable(project,editor,psiElement))       return false;
    }
 else     if (!action.isAvailable(project,editor,psiFile)) {
      return false;
    }
  }
 catch (  IndexNotReadyException e) {
    return false;
  }
  return true;
}
