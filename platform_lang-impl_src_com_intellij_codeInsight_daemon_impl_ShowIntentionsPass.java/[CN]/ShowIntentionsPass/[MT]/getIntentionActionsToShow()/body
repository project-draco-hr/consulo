{
  if (LookupManager.getInstance(myProject).getActiveLookup() != null)   return;
  getActionsToShow(myEditor,myFile,myIntentionsInfo,myPassIdToShowIntentionsFor);
  if (myFile instanceof IntentionFilterOwner) {
    final IntentionFilterOwner.IntentionActionsFilter actionsFilter=((IntentionFilterOwner)myFile).getIntentionActionsFilter();
    if (actionsFilter == null)     return;
    if (actionsFilter != IntentionFilterOwner.IntentionActionsFilter.EVERYTHING_AVAILABLE) {
      myIntentionsInfo.filterActions(actionsFilter);
    }
  }
  if (myIntentionsInfo.isEmpty()) {
    return;
  }
  myShowBulb=!myIntentionsInfo.guttersToShow.isEmpty();
  if (!myShowBulb) {
    for (    HighlightInfo.IntentionActionDescriptor descriptor : ContainerUtil.concat(myIntentionsInfo.errorFixesToShow,myIntentionsInfo.inspectionFixesToShow,myIntentionsInfo.intentionsToShow)) {
      final IntentionAction action=descriptor.getAction();
      if (IntentionManagerSettings.getInstance().isShowLightBulb(action)) {
        myShowBulb=true;
        break;
      }
    }
  }
}
