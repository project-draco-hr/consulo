{
  myExpectedInfos=ApplicationManager.getApplication().runReadAction(new Computable<ExpectedTypeInfo[]>(){
    public ExpectedTypeInfo[] compute(){
      final PsiExpression expr=PsiTreeUtil.getContextOfType(parameters.getPosition(),PsiExpression.class,true);
      return expr != null ? ExpectedTypesProvider.getInstance(parameters.getPosition().getProject()).getExpectedTypes(expr,true) : null;
    }
  }
);
  myHandler=handler;
}
