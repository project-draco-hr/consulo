{
  if (!softWrapAware) {
    return;
  }
  try {
    if (!myDirty) {
      for (      FoldRegionInfo info : myDeferredFoldRegions) {
        FoldRegion outerRegion=myEditor.getFoldingModel().getCollapsedRegionAtOffset(info.start);
        if (outerRegion != null && outerRegion != info.region && outerRegion.getStartOffset() <= info.start && outerRegion.getEndOffset() >= info.end) {
          continue;
        }
        myApplianceManager.onFoldRegionStateChange(info.start,info.end);
      }
    }
  }
  finally {
    myDeferredFoldRegions.clear();
  }
  myApplianceManager.onFoldProcessingEnd();
}
