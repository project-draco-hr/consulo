{
  if (!isSoftWrappingEnabled()) {
    return false;
  }
  LogicalPosition logical=myEditor.visualToLogicalPosition(visual);
  int offset=myEditor.logicalPositionToOffset(logical);
  if (offset <= 0) {
    return false;
  }
  TextChange softWrap=getSoftWrap(offset);
  if (softWrap == null) {
    return false;
  }
  VisualPosition visualAfterSoftWrap=myEditor.offsetToVisualPosition(offset);
  if (visualAfterSoftWrap.line == visual.line && visualAfterSoftWrap.column <= visual.column) {
    return false;
  }
  VisualPosition visualBeforeSoftWrap=myEditor.offsetToVisualPosition(offset - 1);
  int columnOffset=0;
  LogicalPosition logLineStart=myEditor.visualToLogicalPosition(new VisualPosition(visualBeforeSoftWrap.line,0));
  if (logLineStart.softWrapLinesOnCurrentLogicalLine > 0) {
    int offsetLineStart=myEditor.logicalPositionToOffset(logLineStart);
    softWrap=getSoftWrap(offsetLineStart);
    if (softWrap != null) {
      columnOffset=getSoftWrapIndentWidthInColumns(softWrap);
    }
  }
  int width=EditorUtil.textWidthInColumns(myEditor,myEditor.getDocument().getCharsSequence(),offset - 1,offset,columnOffset);
  int softWrapStartColumn=visualBeforeSoftWrap.column + width;
  return visual.line > visualBeforeSoftWrap.line || visual.column >= softWrapStartColumn;
}
