{
  CaretModel caretModel=myEditor.getCaretModel();
  VisualPosition visualCaretPosition=caretModel.getVisualPosition();
  if (!isInsideSoftWrap(visualCaretPosition)) {
    return;
  }
  int offset=caretModel.getOffset();
  TextChangeImpl softWrap=myStorage.getSoftWrap(offset);
  if (softWrap == null) {
    return;
  }
  myDocumentChangeManager.makeHardWrap(softWrap);
  caretModel.moveToVisualPosition(visualCaretPosition);
}
