{
  try {
    task.run(true);
  }
 catch (  Throwable e) {
    if (Boolean.getBoolean(DEBUG_PROPERTY_NAME)) {
      String info="";
      if (myEditor instanceof EditorImpl) {
        info=((EditorImpl)myEditor).dumpState();
      }
      LOG.error(String.format("Unexpected exception occurred during performing '%s'",task),e,info);
    }
    myEditor.getFoldingModel().rebuild();
    myDataMapper.release();
    myApplianceManager.reset();
    myStorage.removeAll();
    myApplianceManager.recalculateIfNecessary();
    try {
      task.run(true);
    }
 catch (    Throwable e1) {
      String info="";
      if (myEditor instanceof EditorImpl) {
        info=((EditorImpl)myEditor).dumpState();
      }
      LOG.error(String.format("Can't perform %s even with complete soft wraps cache re-parsing",task),e1,info);
      myEditor.getSettings().setUseSoftWraps(false);
      task.run(false);
    }
  }
}
