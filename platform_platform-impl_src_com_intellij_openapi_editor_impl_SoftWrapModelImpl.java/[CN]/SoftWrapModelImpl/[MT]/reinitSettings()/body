{
  boolean softWrapsUsedBefore=myUseSoftWraps;
  EditorSettings settings=myEditor.getSettings();
  myUseSoftWraps=settings.isUseSoftWraps();
  int tabWidthBefore=myTabWidth;
  myTabWidth=getCurrentTabWidth();
  boolean fontsChanged=false;
  if (!myFontPreferences.equals(myEditor.getColorsScheme().getFontPreferences()) && myEditorTextRepresentationHelper instanceof DefaultEditorTextRepresentationHelper) {
    fontsChanged=true;
    myFontPreferences=myEditor.getColorsScheme().getFontPreferences();
    ((DefaultEditorTextRepresentationHelper)myEditorTextRepresentationHelper).clearSymbolWidthCache();
  }
  if ((myUseSoftWraps ^ softWrapsUsedBefore) || (tabWidthBefore >= 0 && myTabWidth != tabWidthBefore) || fontsChanged) {
    myApplianceManager.reset();
    myDeferredFoldRegions.clear();
    myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
  }
}
