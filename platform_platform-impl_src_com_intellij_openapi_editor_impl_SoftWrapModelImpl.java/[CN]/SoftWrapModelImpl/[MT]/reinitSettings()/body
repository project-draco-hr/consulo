{
  boolean softWrapsUsedBefore=myUseSoftWraps;
  EditorSettings settings=myEditor.getSettings();
  myUseSoftWraps=settings.isUseSoftWraps();
  if (myUseSoftWraps && (!softWrapsUsedBefore || settings.getAdditionalColumnsCount() > 0)) {
    myApplianceManager.reset();
    myDeferredFoldRegions.clear();
    myAdditionalColumnsCount=settings.getAdditionalColumnsCount();
    settings.setAdditionalColumnsCount(0);
    myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
  }
 else   if (!myUseSoftWraps && softWrapsUsedBefore) {
    settings.setAdditionalColumnsCount(myAdditionalColumnsCount);
    myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
  }
}
