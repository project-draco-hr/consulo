{
  boolean softWrapsUsedBefore=myUseSoftWraps;
  EditorSettings settings=myEditor.getSettings();
  myUseSoftWraps=settings.isUseSoftWraps();
  int tabWidthBefore=myTabWidth;
  myTabWidth=getCurrentTabWidth();
  if ((myUseSoftWraps && (!softWrapsUsedBefore || settings.getAdditionalColumnsCount() > 0)) || (tabWidthBefore >= 0 && myTabWidth != tabWidthBefore)) {
    myApplianceManager.reset();
    myDeferredFoldRegions.clear();
    myAdditionalColumnsCount=settings.getAdditionalColumnsCount();
    settings.setAdditionalColumnsCount(0);
  }
 else   if (!myUseSoftWraps && softWrapsUsedBefore) {
    settings.setAdditionalColumnsCount(myAdditionalColumnsCount);
  }
  myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
}
