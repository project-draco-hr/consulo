{
  if (!myUseSoftWraps || myEditor.isOneLineMode() || myEditor.isPurePaintingMode()) {
    return false;
  }
  Application application=ApplicationManager.getApplication();
  Thread lastEdt=myLastEdt.get();
  Thread currentThread=Thread.currentThread();
  if (lastEdt != currentThread) {
    if (application.isDispatchThread()) {
      myLastEdt=new SoftReference<Thread>(currentThread);
    }
 else {
      myLastEdt=new SoftReference<Thread>(null);
      return false;
    }
  }
  if (application.isUnitTestMode())   return true;
  Rectangle visibleArea=myEditor.getScrollingModel().getVisibleArea();
  return visibleArea.width > 0 && visibleArea.height > 0;
}
