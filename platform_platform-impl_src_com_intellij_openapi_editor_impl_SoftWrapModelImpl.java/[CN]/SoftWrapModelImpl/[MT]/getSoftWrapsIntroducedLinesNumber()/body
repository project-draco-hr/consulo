{
  if (!isSoftWrappingEnabled()) {
    return 0;
  }
  int result=0;
  FoldingModel foldingModel=myEditor.getFoldingModel();
  for (  TextChange softWrap : myStorage.getSoftWraps()) {
    if (!foldingModel.isOffsetCollapsed(softWrap.getStart())) {
      result+=StringUtil.countNewLines(softWrap.getText());
    }
  }
  return result;
}
