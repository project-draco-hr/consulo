{
  if (element instanceof GrReferenceExpression && element != patternExpression && !PsiUtil.isLValue((GroovyPsiElement)element)) {
    final GrReferenceExpression refExpr=(GrReferenceExpression)element;
    final String refName=refExpr.getReferenceName();
    if (refName != null && refExpr.resolve() == null) {
      final GrExpression hisQualifier=refExpr.getQualifierExpression();
      if (hisQualifier != null && patternQualifier != null) {
        if (PsiEquivalenceUtil.areElementsEquivalent(hisQualifier,patternQualifier)) {
          result.add(refName);
        }
      }
 else       if (hisQualifier == null && patternQualifier == null) {
        result.add(refName);
      }
    }
  }
  for (PsiElement child=element.getFirstChild(); child != null; child=child.getNextSibling()) {
    addVariantsWithSameQualifier(child,patternExpression,patternQualifier,result);
  }
}
