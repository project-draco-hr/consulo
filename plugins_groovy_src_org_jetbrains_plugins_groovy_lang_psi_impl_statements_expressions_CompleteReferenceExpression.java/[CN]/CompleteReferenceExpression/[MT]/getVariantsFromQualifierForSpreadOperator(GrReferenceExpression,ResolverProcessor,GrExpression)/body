{
  PsiType qualifierType=qualifier.getType();
  if (qualifierType instanceof PsiClassType) {
    PsiClassType.ClassResolveResult result=((PsiClassType)qualifierType).resolveGenerics();
    PsiClass clazz=result.getElement();
    if (clazz != null) {
      PsiClass listClass=refExpr.getManager().findClass("java.util.List",refExpr.getResolveScope());
      if (listClass != null && listClass.getTypeParameters().length == 1) {
        PsiSubstitutor substitutor=TypeConversionUtil.getClassSubstitutor(clazz,listClass,result.getSubstitutor());
        if (substitutor != null) {
          PsiType componentType=substitutor.substitute(listClass.getTypeParameters()[0]);
          if (componentType != null) {
            getVariantsFromQualifierType(refExpr,processor,componentType,refExpr.getProject());
          }
        }
      }
    }
  }
 else   if (qualifierType instanceof PsiArrayType) {
    getVariantsFromQualifierType(refExpr,processor,((PsiArrayType)qualifierType).getComponentType(),refExpr.getProject());
  }
}
