{
  if (element instanceof GrReferenceExpression) {
    final GrReferenceExpression refExpr=(GrReferenceExpression)element;
    final String refName=refExpr.getReferenceName();
    if (refName != null) {
      final GrExpression hisQualifier=refExpr.getQualifierExpression();
      if (hisQualifier == null || hisQualifier == pattern)       return;
      if (PsiEquivalenceUtil.areElementsEquivalent(hisQualifier,pattern)) {
        result.add(refName);
      }
    }
  }
  for (PsiElement child=element.getFirstChild(); child != null; child=child.getNextSibling()) {
    addVariantsWithSameQualifier(child,pattern,result);
  }
}
