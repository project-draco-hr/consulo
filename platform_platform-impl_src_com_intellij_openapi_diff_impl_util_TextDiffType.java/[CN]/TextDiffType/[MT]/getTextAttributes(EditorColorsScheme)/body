{
  TextAttributes originalAttrs=scheme.getAttributes(myAttributesKey);
  if (originalAttrs == null) {
    return null;
  }
  TextAttributes overridingAttributes=new TextAttributes();
  if (!myApplied) {
    overridingAttributes.setBackgroundColor(getMiddle(originalAttrs.getBackgroundColor(),scheme.getDefaultBackground()));
  }
 else {
    overridingAttributes.setBackgroundColor(scheme.getDefaultBackground());
  }
  return TextAttributes.merge(originalAttrs,overridingAttributes);
}
