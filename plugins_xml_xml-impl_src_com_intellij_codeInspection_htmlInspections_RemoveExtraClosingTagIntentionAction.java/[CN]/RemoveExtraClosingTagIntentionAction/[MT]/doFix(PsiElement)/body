{
  final XmlToken endNameToken=(XmlToken)element;
  final PsiElement tagElement=endNameToken.getParent();
  if (!(tagElement instanceof XmlTag) && !(tagElement instanceof PsiErrorElement))   return;
  if (tagElement instanceof PsiErrorElement) {
    tagElement.delete();
  }
 else {
    final ASTNode astNode=tagElement.getNode();
    if (astNode != null) {
      final ASTNode endTagStart=XmlChildRole.CLOSING_TAG_START_FINDER.findChild(astNode);
      if (endTagStart != null) {
        final Document document=PsiDocumentManager.getInstance(element.getProject()).getDocument(tagElement.getContainingFile());
        if (document != null) {
          document.deleteString(endTagStart.getStartOffset(),tagElement.getLastChild().getTextRange().getEndOffset());
        }
      }
    }
  }
}
