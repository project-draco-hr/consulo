{
  if (image instanceof JBHiDPIScaledImage) {
    final Graphics2D newG=(Graphics2D)g.create(x,y,image.getWidth(observer),image.getHeight(observer));
    newG.scale(0.5,0.5);
    Image img=((JBHiDPIScaledImage)image).getDelegate();
    if (img == null) {
      img=image;
    }
    newG.drawImage(img,0,0,observer);
    newG.scale(1,1);
    newG.dispose();
  }
 else {
    g.drawImage(image,x,y,observer);
  }
}
