{
  if (SwingUtilities.isEventDispatchThread()) {
    runnable.run();
  }
 else {
    final Ref<Throwable> ref=new Ref<Throwable>();
    SwingUtilities.invokeAndWait(new Runnable(){
      @Override public void run(){
        try {
          runnable.run();
        }
 catch (        Throwable throwable) {
          ref.set(throwable);
        }
      }
    }
);
    if (!ref.isNull())     throw ref.get();
  }
}
