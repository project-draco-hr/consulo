{
  super.installKeyboardActions();
  tree.getInputMap().put(KeyStroke.getKeyStroke("pressed LEFT"),"collapse_or_move_up");
  tree.getInputMap().put(KeyStroke.getKeyStroke("pressed RIGHT"),"expand");
  tree.getActionMap().put("collapse_or_move_up",new AbstractAction(){
    public void actionPerformed(    final ActionEvent e){
      final Object source=e.getSource();
      if (source instanceof JTree) {
        JTree tree=(JTree)source;
        int selectionRow=tree.getLeadSelectionRow();
        if (selectionRow == -1)         return;
        if (isLeaf(selectionRow) || tree.isCollapsed(selectionRow)) {
          final TreePath parentPath=tree.getPathForRow(selectionRow).getParentPath();
          if (parentPath != null) {
            if (parentPath.getParentPath() != null || tree.isRootVisible()) {
              final int parentRow=tree.getRowForPath(parentPath);
              tree.scrollRowToVisible(parentRow);
              tree.setSelectionInterval(parentRow,parentRow);
            }
          }
        }
 else {
          tree.collapseRow(selectionRow);
        }
      }
    }
  }
);
}
