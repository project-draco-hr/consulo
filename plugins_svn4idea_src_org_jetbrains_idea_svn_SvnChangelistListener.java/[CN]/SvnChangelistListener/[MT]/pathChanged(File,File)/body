{
  final Map<File,String> oldMappings=new HashMap<File,String>();
  try {
    myClient.doGetChangeLists(from,null,SVNDepth.INFINITY,new ISVNChangelistHandler(){
      public void handle(      final File path,      final String changelistName){
        oldMappings.put(path,changelistName);
      }
    }
);
  }
 catch (  SVNException e) {
    LOG.info(e);
  }
  for (  Map.Entry<File,String> entry : oldMappings.entrySet()) {
    final File file=entry.getKey();
    try {
      myClient.doRemoveFromChangelist(new File[]{file},SVNDepth.EMPTY,null);
    }
 catch (    SVNException e) {
      LOG.info(e);
      if ((!SVNErrorCode.WC_NOT_DIRECTORY.equals(e.getErrorMessage().getErrorCode()) && (!SVNErrorCode.WC_NOT_FILE.equals(e.getErrorMessage().getErrorCode())))) {
        throw e;
      }
    }
    final String relativePath=file.getAbsolutePath().substring(from.getAbsolutePath().length());
    final File newPath=new File(to,relativePath);
    try {
      myClient.doAddToChangelist(new File[]{newPath},SVNDepth.EMPTY,entry.getValue(),null);
    }
 catch (    SVNException e) {
      LOG.info(e);
      if ((!SVNErrorCode.WC_NOT_DIRECTORY.equals(e.getErrorMessage().getErrorCode()) && (!SVNErrorCode.WC_NOT_FILE.equals(e.getErrorMessage().getErrorCode())))) {
        throw e;
      }
    }
  }
}
