{
  final OutputToGeneralTestEventsConverter outputConsumer=new OutputToGeneralTestEventsConverter();
  final GeneralToSMTRunnerEventsConvertor eventsProcessor=new GeneralToSMTRunnerEventsConvertor(resultsViewer.getTestsRootNode());
  final SMTRunnerUIActionsHandler uiActionsHandler=new SMTRunnerUIActionsHandler(consoleProperties);
  outputConsumer.addProcessor(eventsProcessor);
  eventsProcessor.addEventsListener(resultsViewer);
  resultsViewer.addEventsListener(uiActionsHandler);
  eventsProcessor.addEventsListener(statisticsPane.createTestEventsListener());
  processHandler.addProcessListener(new ProcessAdapter(){
    @Override public void processTerminated(    final ProcessEvent event){
      Disposer.dispose(eventsProcessor);
      Disposer.dispose(outputConsumer);
    }
    @Override public void startNotified(    final ProcessEvent event){
      eventsProcessor.onStartTesting();
    }
    @Override public void processWillTerminate(    ProcessEvent event,    boolean willBeDestroyed){
      outputConsumer.flushBufferBeforeTerminating();
      eventsProcessor.onFinishTesting();
    }
    @Override public void onTextAvailable(    final ProcessEvent event,    final Key outputType){
      outputConsumer.process(event.getText(),outputType);
    }
  }
);
  return processHandler;
}
