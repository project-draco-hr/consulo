{
  final TreeMap<String,Element> map=Maps.newTreeMap();
  final List<Element> elements=configuration.getCopyableUserData(RUN_EXTENSIONS);
  if (elements != null) {
    for (    Element el : elements) {
      final String name=el.getAttributeValue(getIdAttrName());
      map.put(name,(Element)el.clone());
    }
  }
  for (  T extension : getApplicableExtensions(configuration)) {
    Element el=new Element(getExtensionRootAttr());
    el.setAttribute(getIdAttrName(),extension.getSerializationId());
    extension.writeExternal(configuration,el);
    map.put(extension.getSerializationId(),el);
  }
  for (  Element val : map.values()) {
    parentNode.addContent(val);
  }
}
