{
  ApplicationManager.getApplication().assertIsDispatchThread();
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final int offset=editor.getCaretModel().getOffset();
  final PsiElement psiElement=file.findElementAt(offset);
  if (psiElement == null)   return;
  final ShowParameterInfoContext context=new ShowParameterInfoContext(editor,project,file,offset,lbraceOffset);
  context.setHighlightedElement(highlightedElement);
  final Language language=psiElement.getLanguage();
  ParameterInfoHandler[] handlers=getHandlers(language,file.getViewProvider().getBaseLanguage());
  if (handlers == null)   handlers=new ParameterInfoHandler[0];
  Lookup lookup=LookupManager.getInstance(project).getActiveLookup();
  if (lookup != null) {
    LookupElement item=lookup.getCurrentItem();
    if (item != null) {
      for (      ParameterInfoHandler handler : handlers) {
        if (handler.couldShowInLookup()) {
          final Object[] items=handler.getParametersForLookup(item,context);
          if (items != null && items.length > 0)           showLookupEditorHint(items,editor,project,handler);
          return;
        }
      }
    }
    return;
  }
  for (  ParameterInfoHandler handler : handlers) {
    Object element=handler.findElementForParameterInfo(context);
    if (element != null) {
      handler.showParameterInfo(element,context);
    }
  }
}
