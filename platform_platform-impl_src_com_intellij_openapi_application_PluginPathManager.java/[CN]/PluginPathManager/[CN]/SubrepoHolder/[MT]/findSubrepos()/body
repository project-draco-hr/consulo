{
  List<File> result=new ArrayList<File>();
  File[] subdirs=new File(PathManager.getHomePath()).listFiles();
  if (subdirs == null)   return result;
  Arrays.sort(subdirs,new Comparator<File>(){
    @Override public int compare(    File file,    File file2){
      return FileUtil.compareFiles(file,file2);
    }
  }
);
  for (  File subdir : subdirs) {
    if (new File(subdir,".git").exists()) {
      File pluginsDir=new File(subdir,"plugins");
      if (pluginsDir.exists()) {
        result.add(pluginsDir);
      }
 else {
        result.add(subdir);
      }
    }
  }
  return result;
}
