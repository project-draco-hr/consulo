{
  if (stateStorage != null) {
    if (stateStorage instanceof FileBasedStorage) {
      String filePath=((FileBasedStorage)stateStorage).getFilePath();
      if (myPathToStorage.containsKey(filePath)) {
        StateStorage existing=myPathToStorage.get(filePath);
        myStorages.put(key,existing);
      }
 else {
        myPathToStorage.put(filePath,stateStorage);
        myStorages.put(key,stateStorage);
      }
    }
 else {
      myStorages.put(key,stateStorage);
    }
  }
}
