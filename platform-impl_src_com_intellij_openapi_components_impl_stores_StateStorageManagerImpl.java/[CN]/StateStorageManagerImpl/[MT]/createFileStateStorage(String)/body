{
  String expandedFile=expandMacroses(fileSpec);
  if (expandedFile == null) {
    myStorages.put(fileSpec,null);
    return null;
  }
  return new FileBasedStorage(getMacroSubstitutor(fileSpec),this,expandedFile,fileSpec,myRootTagName,this,myPicoContainer,ComponentRoamingManager.getInstance()){
    @NotNull protected StorageData createStorageData(){
      return StateStorageManagerImpl.this.createStorageData(fileSpec);
    }
  }
;
}
