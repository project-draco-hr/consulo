def proxy_open(self, req, proxy, type_):
    host = req.get_host().split(':')[0]
    if (host in self.no_list):
        return None
    baseclass = req.__class__


    class _request(baseclass):

        def add_header(self, key, val):
            if (key.lower() == 'proxy-authorization'):
                val = val.strip()
            return baseclass.add_header(self, key, val)
    req.__class__ = _request
    return urllib2.ProxyHandler.proxy_open(self, req, proxy, type_)
