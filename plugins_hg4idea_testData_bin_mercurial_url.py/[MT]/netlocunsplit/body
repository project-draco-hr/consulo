def netlocunsplit(host, port, user=None, passwd=None):
    'turn host, port, user, passwd into [user[:passwd]@]host[:port].'
    if port:
        hostport = ((host + ':') + port)
    else:
        hostport = host
    if user:
        quote = (lambda s: urllib.quote(s, safe=''))
        if passwd:
            userpass = ((quote(user) + ':') + quote(passwd))
        else:
            userpass = quote(user)
        return ((userpass + '@') + hostport)
    return hostport
