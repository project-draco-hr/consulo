{
  VirtualFile[] children=fromDirectory.getChildren();
  if (children.length > 0) {
    final FileTypeManager typeManager=FileTypeManager.getInstance();
    for (    VirtualFile child : children) {
      if (child.isDirectory()) {
        addRecursively(container,child,fileType);
      }
 else {
        if (fileType == null || fileType.equals(child.getFileType())) {
          container.add(child);
        }
      }
    }
  }
}
