{
  if (type instanceof PsiClassType) {
    return manager.getElementFactory().createType(((PsiClassType)type).resolve());
  }
 else   if (type instanceof PsiArrayType) {
    final PsiType componentType=normalizeType(((PsiArrayType)type).getComponentType(),manager);
    final int dimension=type.getArrayDimensions();
    type=componentType;
    for (int i=0; i < dimension; i++) {
      type=new PsiArrayType(type);
    }
    return type;
  }
  return type;
}
