{
  List<RefEntity> children=refElement.getChildren();
  if (children != null) {
    RefElement[] refElements=children.toArray(new RefElement[children.size()]);
    for (    RefElement refChild : refElements) {
      removeRefElement(refChild,deletedRefs);
    }
  }
  ((RefManagerImpl)refElement.getRefManager()).removeReference(refElement);
  ((RefElementImpl)refElement).referenceRemoved();
  if (!deletedRefs.contains(refElement))   deletedRefs.add(refElement);
}
