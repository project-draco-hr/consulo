{
  if (psiElement == null)   return false;
  if (psiElement instanceof PsiCompiledElement)   return false;
  if (psiElement.getContainingFile() == null)   return false;
  for (  RefManagerExtension extension : myExtensions.values()) {
    if (!extension.belongsToScope(psiElement))     return false;
  }
  final Boolean inProject=ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      return psiElement != null && psiElement.isValid() && psiElement.getManager().isInProject(psiElement);
    }
  }
);
  return inProject.booleanValue() && (getScope() == null || getScope().contains(psiElement));
}
