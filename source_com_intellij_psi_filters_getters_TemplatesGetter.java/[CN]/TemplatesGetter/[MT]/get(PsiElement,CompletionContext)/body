{
  final List result=new ArrayList();
  final TemplateSettings templateSettings=TemplateSettings.getInstance();
  final TemplateImpl[] templates=templateSettings.getTemplates();
  for (int i=0; i < templates.length; i++) {
    final TemplateImpl template=templates[i];
    if (template.isDeactivated())     continue;
    final TemplateContext templateContext=template.getTemplateContext();
    if (!templateContext.isInContext(TemplateContext.COMPLETION_CONTEXT)) {
      continue;
    }
    result.add(template);
  }
  return result.toArray();
}
