{
  final List result=new ArrayList();
  final TemplateSettings templateSettings=TemplateSettings.getInstance();
  final TemplateImpl[] templates=templateSettings.getTemplates();
  for (  final TemplateImpl template : templates) {
    if (template.isDeactivated())     continue;
    final TemplateContext templateContext=template.getTemplateContext();
    if (!templateContext.isEnabled(new SmartCompletionContextType())) {
      continue;
    }
    result.add(template);
  }
  return result.toArray();
}
