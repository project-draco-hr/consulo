{
  final List<HighlightInfo> foundInfoList=new SmartList<HighlightInfo>();
  processHighlightsNearOffset(document,myProject,minSeverity,offset,includeFixRange,new Processor<HighlightInfo>(){
    @Override public boolean process(    @NotNull HighlightInfo info){
      if (!foundInfoList.isEmpty()) {
        HighlightInfo foundInfo=foundInfoList.get(0);
        int compare=foundInfo.getSeverity().compareTo(info.getSeverity());
        if (compare < 0) {
          foundInfoList.clear();
        }
 else         if (compare > 0) {
          return true;
        }
      }
      foundInfoList.add(info);
      return true;
    }
  }
);
  if (foundInfoList.isEmpty())   return null;
  if (foundInfoList.size() == 1)   return foundInfoList.get(0);
  return new HighlightInfoComposite(foundInfoList);
}
