{
  return new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().assertIsDispatchThread();
      if (myDisposed || !myProject.isInitialized() || PowerSaveMode.isEnabled()) {
        return;
      }
      if (HeavyProcessLatch.INSTANCE.isRunning()) {
        HeavyProcessLatch.INSTANCE.executeOutOfHeavyProcess(new Runnable(){
          @Override public void run(){
            myAlarm.addRequest(myUpdateRunnable,Math.max(mySettings.AUTOREPARSE_DELAY,100),ModalityState.NON_MODAL);
          }
        }
);
        return;
      }
      Editor activeEditor=FileEditorManager.getInstance(myProject).getSelectedTextEditor();
      if (activeEditor == null) {
        submitPassesRunnable.run();
      }
 else {
        ((PsiDocumentManagerBase)myPsiDocumentManager).cancelAndRunWhenAllCommitted("start daemon when all committed",submitPassesRunnable);
      }
    }
    @Override public String toString(){
      return "Daemon update runnable";
    }
  }
;
}
