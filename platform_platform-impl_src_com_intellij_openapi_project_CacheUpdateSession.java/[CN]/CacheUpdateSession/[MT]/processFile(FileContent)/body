{
  VirtualFile file=content.getVirtualFile();
  boolean isValid=file.isValid() && !file.isDirectory();
  Throwable exception=null;
  while (true) {
    Pair<CacheUpdater,Collection<VirtualFile>> pair=getPair(file);
    if (pair == null)     break;
    CacheUpdater eachUpdater=pair.getFirst();
    Collection<VirtualFile> eachFiles=pair.getSecond();
    try {
      if (isValid && exception == null) {
        eachUpdater.processFile(content);
      }
    }
 catch (    ProcessCanceledException e) {
      throw e;
    }
catch (    Throwable e) {
      exception=e;
    }
    removeFile(file,eachUpdater,eachFiles);
  }
  if (exception instanceof RuntimeException)   throw (RuntimeException)exception;
  if (exception instanceof Error)   throw (Error)exception;
  if (exception != null)   throw new RuntimeException(exception);
}
