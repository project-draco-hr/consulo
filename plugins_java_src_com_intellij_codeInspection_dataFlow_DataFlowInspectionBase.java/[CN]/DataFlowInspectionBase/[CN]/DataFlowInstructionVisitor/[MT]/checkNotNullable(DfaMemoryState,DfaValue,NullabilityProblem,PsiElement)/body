{
  boolean ok=super.checkNotNullable(state,value,problem,anchor);
  if (!ok && anchor != null) {
    myProblems.putValue(problem,anchor);
  }
  Pair<NullabilityProblem,PsiElement> key=Pair.create(problem,anchor);
  StateInfo info=myStateInfos.get(key);
  if (info == null) {
    myStateInfos.put(key,info=new StateInfo());
  }
  if (state.isEphemeral() && !ok) {
    info.ephemeralNpe=true;
  }
 else   if (!state.isEphemeral()) {
    if (ok)     info.normalOk=true;
 else     info.normalNpe=true;
  }
  return ok;
}
