{
  ProjectManager.getInstance().addProjectManagerListener(new ProjectManagerAdapter(){
    public void projectOpened(    final Project project){
      final MessageBusConnection connect=project.getMessageBus().connect(project);
      connect.subscribe(ExecutionManager.EXECUTION_TOPIC,new ExecutionAdapter(){
        public void processStartScheduled(        String executorId,        ExecutionEnvironment env){
          myInProgress.add(createExecutionId(executorId,env,project));
        }
        public void processNotStarted(        String executorId,        @NotNull ExecutionEnvironment env){
          myInProgress.remove(createExecutionId(executorId,env,project));
        }
        public void processStarted(        String executorId,        @NotNull ExecutionEnvironment env,        @NotNull ProcessHandler handler){
          myInProgress.remove(createExecutionId(executorId,env,project));
        }
      }
);
    }
    @Override public void projectClosed(    final Project project){
synchronized (myInProgress) {
        for (Iterator<Trinity<Project,String,String>> it=myInProgress.iterator(); it.hasNext(); ) {
          final Trinity<Project,String,String> trinity=it.next();
          if (project.equals(trinity.first)) {
            it.remove();
          }
        }
      }
    }
  }
);
  final Executor[] executors=Extensions.getExtensions(Executor.EXECUTOR_EXTENSION_NAME);
  for (  Executor executor : executors) {
    initExecutor(executor);
  }
}
