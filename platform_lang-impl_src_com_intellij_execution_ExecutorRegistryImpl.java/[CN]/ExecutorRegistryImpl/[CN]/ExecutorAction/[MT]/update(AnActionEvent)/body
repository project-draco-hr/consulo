{
  super.update(e);
  final Presentation presentation=e.getPresentation();
  final Project project=PlatformDataKeys.PROJECT.getData(e.getDataContext());
  if (project == null || !project.isInitialized() || project.isDisposed() || DumbService.getInstance(project).isDumb()) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
    return;
  }
  final RunnerAndConfigurationSettings selectedConfiguration=getConfiguration(project);
  boolean enabled=false;
  String text;
  if (selectedConfiguration != null) {
    final ProgramRunner runner=RunnerRegistry.getInstance().getRunner(myExecutor.getId(),selectedConfiguration.getConfiguration());
    enabled=runner != null && !isStarting(project,myExecutor.getId(),runner.getRunnerId());
    if (enabled) {
      presentation.setDescription(myExecutor.getDescription());
    }
    text=getTemplatePresentation().getTextWithMnemonic() + " '" + StringUtil.first(selectedConfiguration.getName(),30,true)+ "'";
  }
 else {
    text=getTemplatePresentation().getTextWithMnemonic();
  }
  presentation.setEnabled(enabled);
  presentation.setVisible(enabled);
  presentation.setText(text);
}
