{
  Element e=new Element(TAG);
  element.addContent(e);
  e.setAttribute("file",myFile.getUrl());
  Iterator i=myProvider2State.entrySet().iterator();
  while (i.hasNext()) {
    Map.Entry entry=(Map.Entry)i.next();
    FileEditorProvider provider=(FileEditorProvider)entry.getKey();
    Element providerElement=new Element("provider");
    if (provider.equals(mySelectedProvider)) {
      providerElement.setAttribute("selected",Boolean.TRUE.toString());
    }
    providerElement.setAttribute("editor-type-id",provider.getEditorTypeId());
    Element stateElement=new Element("state");
    providerElement.addContent(stateElement);
    provider.writeState((FileEditorState)entry.getValue(),project,stateElement);
    e.addContent(providerElement);
  }
  return e;
}
