{
  Element e=new Element(TAG);
  element.addContent(e);
  e.setAttribute(FILE_ATTR,myFile.getUrl());
  Iterator i=myProvider2State.entrySet().iterator();
  while (i.hasNext()) {
    Map.Entry entry=(Map.Entry)i.next();
    FileEditorProvider provider=(FileEditorProvider)entry.getKey();
    Element providerElement=new Element(PROVIDER_ATTR);
    if (provider.equals(mySelectedProvider)) {
      providerElement.setAttribute(SELECTED_ATTR_VALUE,Boolean.TRUE.toString());
    }
    providerElement.setAttribute(EDITOR_TYPE_ID_ATTR,provider.getEditorTypeId());
    Element stateElement=new Element(STATE_ELEMENT);
    providerElement.addContent(stateElement);
    provider.writeState((FileEditorState)entry.getValue(),project,stateElement);
    e.addContent(providerElement);
  }
  return e;
}
