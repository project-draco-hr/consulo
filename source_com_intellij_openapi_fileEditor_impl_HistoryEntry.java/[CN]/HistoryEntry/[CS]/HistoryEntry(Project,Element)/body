{
  if (!e.getName().equals(TAG)) {
    throw new IllegalArgumentException("unexpected tag: " + e);
  }
  String url=e.getAttributeValue("file");
  VirtualFile file=VirtualFileManager.getInstance().findFileByUrl(url);
  if (file == null) {
    throw new InvalidDataException();
  }
  myFile=file;
  myProvider2State=new HashMap();
  List providers=e.getChildren("provider");
  for (Iterator iterator=providers.iterator(); iterator.hasNext(); ) {
    Element _e=(Element)iterator.next();
    String typeId=_e.getAttributeValue("editor-type-id");
    FileEditorProvider provider=FileEditorProviderManager.getInstance().getProvider(typeId);
    if (provider == null) {
      continue;
    }
    if ("true".equals(_e.getAttributeValue("selected"))) {
      mySelectedProvider=provider;
    }
    Element stateElement=_e.getChild("state");
    if (stateElement == null) {
      throw new InvalidDataException();
    }
    FileEditorState state=provider.readState(stateElement,project,file);
    putState(provider,state);
  }
}
