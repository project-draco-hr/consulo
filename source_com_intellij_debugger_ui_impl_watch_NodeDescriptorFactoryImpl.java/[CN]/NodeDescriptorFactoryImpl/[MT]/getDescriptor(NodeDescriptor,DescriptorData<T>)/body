{
  T descriptor=data.createDescriptor(myProject);
  T oldDescriptor=findDescriptor(parent,descriptor,data);
  if (oldDescriptor != null && oldDescriptor.getClass() == descriptor.getClass()) {
    descriptor.setAncestor(oldDescriptor);
  }
 else {
    T displayDescriptor=findDisplayDescriptor(parent,descriptor,data.getDisplayKey());
    if (displayDescriptor != null) {
      descriptor.displayAs(displayDescriptor);
    }
  }
  myCurrentHistoryTree.addChild(parent,descriptor);
  return descriptor;
}
