{
  if (clearHighlights) {
    clearHighlights(editor,highlightManager,textRanges,attributes);
    return;
  }
  ArrayList<RangeHighlighter> highlighters=new ArrayList<>();
  for (  TextRange range : textRanges) {
    highlightManager.addRangeHighlight(editor,range.getStartOffset(),range.getEndOffset(),attributes,false,highlighters);
  }
  for (  RangeHighlighter highlighter : highlighters) {
    String tooltip=getLineTextErrorStripeTooltip(editor.getDocument(),highlighter.getStartOffset(),true);
    highlighter.setErrorStripeTooltip(tooltip);
  }
}
