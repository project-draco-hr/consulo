{
  HighlightManager highlightManager=HighlightManager.getInstance(project);
  EditorColorsManager manager=EditorColorsManager.getInstance();
  TextAttributes attributes=manager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
  TextAttributes writeAttributes=manager.getGlobalScheme().getAttributes(EditorColors.WRITE_SEARCH_RESULT_ATTRIBUTES);
  setupFindModel(project);
  ReadWriteAccessDetector detector=ReadWriteAccessDetector.findDetector(element);
  if (detector != null) {
    List<PsiReference> readRefs=new ArrayList<>();
    List<PsiReference> writeRefs=new ArrayList<>();
    for (    PsiReference ref : refs) {
      if (detector.getReferenceAccess(element,ref) == ReadWriteAccessDetector.Access.Read) {
        readRefs.add(ref);
      }
 else {
        writeRefs.add(ref);
      }
    }
    doHighlightRefs(highlightManager,editor,readRefs,attributes,clearHighlights);
    doHighlightRefs(highlightManager,editor,writeRefs,writeAttributes,clearHighlights);
  }
 else {
    doHighlightRefs(highlightManager,editor,refs,attributes,clearHighlights);
  }
  TextRange range=getNameIdentifierRange(file,element);
  if (range != null) {
    TextAttributes nameAttributes=attributes;
    if (detector != null && detector.isDeclarationWriteAccess(element)) {
      nameAttributes=writeAttributes;
    }
    highlightRanges(highlightManager,editor,nameAttributes,clearHighlights,Arrays.asList(range));
  }
}
