{
  s=s.apply(cs(new CreateDirectoryChange(p("dir1")),new CreateDirectoryChange(p("dir1/dir2")),new CreateFileChange(p("dir1/dir2/file"),null)));
  s=s.apply(cs(new RenameChange(p("dir1/dir2"),"new dir")));
  assertTrue(s.hasEntry(p("dir1/new dir")));
  assertTrue(s.hasEntry(p("dir1/new dir/file")));
  assertFalse(s.hasEntry(p("dir1/dir2")));
  s=s.revert();
  assertTrue(s.hasEntry(p("dir1/dir2")));
  assertTrue(s.hasEntry(p("dir1/dir2/file")));
  assertFalse(s.hasEntry(p("dir1/new dir")));
}
