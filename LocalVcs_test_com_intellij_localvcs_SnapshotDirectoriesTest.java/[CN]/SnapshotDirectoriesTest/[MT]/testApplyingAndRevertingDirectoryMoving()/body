{
  s=s.apply(cs(new CreateDirectoryChange(p("root1")),new CreateDirectoryChange(p("root2")),new CreateDirectoryChange(p("root1/dir")),new CreateFileChange(p("root1/dir/file"),null)));
  s=s.apply(cs(new MoveChange(p("root1/dir"),p("root2"))));
  assertTrue(s.hasEntry(p("root2/dir")));
  assertTrue(s.hasEntry(p("root2/dir/file")));
  assertFalse(s.hasEntry(p("root1/dir")));
  s=s.revert();
  assertTrue(s.hasEntry(p("root1/dir")));
  assertTrue(s.hasEntry(p("root1/dir/file")));
  assertFalse(s.hasEntry(p("root2/dir")));
}
