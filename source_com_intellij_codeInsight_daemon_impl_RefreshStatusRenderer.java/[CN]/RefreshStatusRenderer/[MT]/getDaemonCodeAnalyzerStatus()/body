{
  DaemonCodeAnalyzerStatus status=new DaemonCodeAnalyzerStatus();
  if (myFile == null || !myHighlighter.isHighlightingAvailable(myFile))   return null;
  ArrayList<String> noInspectionRoots=new ArrayList<String>();
  ArrayList<String> noHighlightingRoots=new ArrayList<String>();
  final PsiFile[] roots=myFile.getPsiRoots();
  for (  PsiFile file : roots) {
    if (!HighlightUtil.isRootHighlighted(file)) {
      noHighlightingRoots.add(file.getLanguage().getID());
    }
 else     if (!HighlightUtil.isRootInspected(file)) {
      noInspectionRoots.add(file.getLanguage().getID());
    }
  }
  status.noInspectionRoots=noInspectionRoots.isEmpty() ? null : noInspectionRoots.toArray(new String[noInspectionRoots.size()]);
  status.noHighlightingRoots=noHighlightingRoots.isEmpty() ? null : noHighlightingRoots.toArray(new String[noHighlightingRoots.size()]);
  status.rootsNumber=roots.length == 1 ? 1 : roots.length - 1;
  if (myHighlighter.isErrorAnalyzingFinished(myFile)) {
    status.errorAnalyzingFinished=true;
    HighlightInfo[] infos=DaemonCodeAnalyzerImpl.getHighlights(myDocument,HighlightSeverity.WARNING,myProject);
    status.warningErrorCount=infos.length;
    infos=DaemonCodeAnalyzerImpl.getHighlights(myDocument,HighlightSeverity.ERROR,myProject);
    status.errorCount=infos.length;
    status.inspectionFinished=myHighlighter.isInspectionCompleted(myFile);
  }
  return status;
}
