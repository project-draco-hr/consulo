{
  if (element != null) {
    PsiFile file=element.getContainingFile();
    VirtualFile vfile=file == null ? null : file.getVirtualFile();
    if (vfile == null) {
      label.setText("");
      label.setIcon(null);
      return;
    }
    final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(element.getProject()).getFileIndex();
    final Module module=fileIndex.getModuleForFile(vfile);
    if (module != null) {
      label.setText(module.getName());
      label.setIcon(module.getModuleType().getNodeIcon(false));
    }
 else {
      final OrderEntry[] entries=fileIndex.getOrderEntriesForFile(vfile);
      OrderEntry entry=null;
      for (int i=0; i < entries.length; i++) {
        OrderEntry order=entries[i];
        if (order instanceof LibraryOrderEntry || order instanceof JdkOrderEntry) {
          entry=order;
          break;
        }
      }
      if (entry != null) {
        label.setText(entry.getPresentableName());
        label.setIcon(LIB_ICON_CLOSED);
      }
    }
  }
}
