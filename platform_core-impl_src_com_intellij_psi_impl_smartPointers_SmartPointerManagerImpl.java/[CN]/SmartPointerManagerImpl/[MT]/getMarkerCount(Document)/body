{
synchronized (lock) {
    VirtualFile file=FileDocumentManager.getInstance().getFile(document);
    return file == null ? 0 : getMarkerCache(file).getMarkerCount();
  }
}
