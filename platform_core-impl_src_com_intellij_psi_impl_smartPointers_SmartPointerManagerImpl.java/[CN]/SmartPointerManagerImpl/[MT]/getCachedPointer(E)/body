{
  Reference<SmartPsiElementPointerImpl> data=element.getUserData(CACHED_SMART_POINTER_KEY);
  SmartPsiElementPointerImpl cachedPointer=SoftReference.dereference(data);
  if (cachedPointer != null) {
    PsiElement cachedElement=cachedPointer.getElement();
    if (cachedElement == null || cachedElement != element) {
      return null;
    }
  }
  return cachedPointer;
}
