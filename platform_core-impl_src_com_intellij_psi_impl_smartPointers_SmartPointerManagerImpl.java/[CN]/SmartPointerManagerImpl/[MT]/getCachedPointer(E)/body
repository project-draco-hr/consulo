{
  Reference<SmartPointerEx> data=element.getUserData(CACHED_SMART_POINTER_KEY);
  SmartPointerEx cachedPointer=SoftReference.dereference(data);
  if (cachedPointer != null) {
    PsiElement cachedElement=cachedPointer.getCachedElement();
    if (cachedElement != null && cachedElement != element) {
      return null;
    }
  }
  return cachedPointer;
}
