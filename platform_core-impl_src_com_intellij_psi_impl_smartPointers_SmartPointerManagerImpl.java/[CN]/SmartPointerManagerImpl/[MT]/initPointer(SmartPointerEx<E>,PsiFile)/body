{
  if (containingFile == null)   return;
synchronized (lock) {
    List<SmartPointerEx> pointers=getPointers(containingFile);
    if (pointers == null) {
      pointers=new UnsafeWeakList<SmartPointerEx>();
      containingFile.putUserData(SMART_POINTERS_IN_PSI_FILE_KEY,pointers);
    }
    pointers.add(pointer);
    if (areBeltsFastened(containingFile)) {
      pointer.fastenBelt(0,null);
    }
  }
}
