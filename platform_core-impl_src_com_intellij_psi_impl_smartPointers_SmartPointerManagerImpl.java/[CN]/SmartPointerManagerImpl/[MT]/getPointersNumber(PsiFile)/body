{
synchronized (lock) {
    List<SmartPointerEx> pointers=getPointers(containingFile.getViewProvider().getVirtualFile());
    return pointers == null ? 0 : ((UnsafeWeakList)pointers).toStrongList().size();
  }
}
