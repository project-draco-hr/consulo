{
  final Map<File,Set<File>> toRecompile=isTestRoot ? myTestsToRecompile : mySourcesToRecompile;
  Set<File> files;
synchronized (toRecompile) {
    files=toRecompile.get(root);
    if (files == null) {
      files=new HashSet<File>();
      toRecompile.put(root,files);
    }
  }
  final boolean added=files.add(file);
  if (added) {
    final Set<String> deleted=isTestRoot ? myDeletedTests : myDeletedProduction;
    deleted.remove(FileUtil.toCanonicalPath(file.getPath()));
  }
  return added;
}
