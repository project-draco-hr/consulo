{
  String testRoots=System.getProperty("test.roots");
  if (testRoots != null) {
    System.out.println("Collecting tests from roots specified by test.roots property: " + testRoots);
    return testRoots.split(";");
  }
  final String[] roots=ExternalClasspathClassLoader.getRoots();
  if (roots != null) {
    System.out.println("Collecting tests from roots specified by classpath.file property: " + roots);
    return roots;
  }
 else {
    final ClassLoader loader=TestAll.class.getClassLoader();
    if (loader instanceof URLClassLoader) {
      final URL[] urls=((URLClassLoader)loader).getURLs();
      final String[] urlsStrings=new String[urls.length];
      for (int i=0; i < urls.length; i++) {
        try {
          urlsStrings[i]=urls[i].toURI().toString();
        }
 catch (        URISyntaxException e) {
          e.printStackTrace();
        }
      }
      System.out.println("Collecting tests from classloader: " + urlsStrings);
      return urlsStrings;
    }
    return System.getProperty("java.class.path").split(File.pathSeparator);
  }
}
