{
  final RepositoryTreeNode node=getSelectedNode();
  if (node == null)   return null;
  SVNDirEntry entry=node.getSVNDirEntry();
  if (entry == null || entry.getKind() != SVNNodeKind.FILE) {
    return null;
  }
  String name=entry.getName();
  FileTypeManager manager=FileTypeManager.getInstance();
  if (entry.getName().lastIndexOf('.') > 0 && !manager.getFileTypeByFileName(name).isBinary()) {
    SVNURL url=node.getURL();
    final SvnFileRevision revision=new SvnFileRevision(myVCS,SVNRevision.UNDEFINED,SVNRevision.HEAD,url.toString(),entry.getAuthor(),entry.getDate(),null,null,null);
    return new VcsVirtualFile(node.getSVNDirEntry().getName(),revision,VcsFileSystem.getInstance());
  }
 else {
    return null;
  }
}
