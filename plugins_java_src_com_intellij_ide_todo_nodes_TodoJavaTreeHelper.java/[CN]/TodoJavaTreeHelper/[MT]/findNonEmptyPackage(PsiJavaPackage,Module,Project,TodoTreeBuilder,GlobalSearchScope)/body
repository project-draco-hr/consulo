{
  if (!isPackageEmpty(new PackageElement(module,rootPackage,false),builder,project)) {
    return rootPackage;
  }
  final PsiJavaPackage[] subPackages=rootPackage.getSubPackages(scope);
  PsiJavaPackage suggestedNonEmptyPackage=null;
  int count=0;
  for (  PsiJavaPackage aPackage : subPackages) {
    if (!isPackageEmpty(new PackageElement(module,aPackage,false),builder,project)) {
      if (++count > 1)       return rootPackage;
      suggestedNonEmptyPackage=aPackage;
    }
  }
  for (  PsiJavaPackage aPackage : subPackages) {
    if (aPackage != suggestedNonEmptyPackage) {
      PsiJavaPackage subPackage=findNonEmptyPackage(aPackage,module,project,builder,scope);
      if (subPackage != null) {
        if (count > 0) {
          return rootPackage;
        }
 else {
          count++;
          suggestedNonEmptyPackage=subPackage;
        }
      }
    }
  }
  return suggestedNonEmptyPackage;
}
