{
  final XmlAttribute attribute=PsiTreeUtil.getParentOfType(element,XmlAttribute.class);
  if (attribute == null) {
    return null;
  }
  final XmlTag tag=attribute.getParent();
  final String localName=tag.getLocalName();
  final String attributeLocalName=attribute.getLocalName();
  if (REF_ATTR_NAME.equals(attributeLocalName) || SUBSTITUTION_GROUP_ATTR_NAME.equals(attributeLocalName)) {
    if (localName.equals(GROUP_TAG_NAME)) {
      return ReferenceType.GroupReference;
    }
 else     if (localName.equals(ATTRIBUTE_GROUP_TAG_NAME)) {
      return ReferenceType.AttributeGroupReference;
    }
 else     if (ELEMENT_TAG_NAME.equals(localName)) {
      return ReferenceType.ElementReference;
    }
 else     if (ATTRIBUTE_TAG_NAME.equals(localName)) {
      return ReferenceType.AttributeReference;
    }
  }
 else   if (TYPE_ATTR_NAME.equals(attributeLocalName) || BASE_ATTR_NAME.equals(attributeLocalName) || MEMBER_TYPES_ATTR_NAME.equals(attributeLocalName)|| ITEM_TYPE_ATTR_NAME.equals(attributeLocalName)) {
    return ReferenceType.TypeReference;
  }
  return null;
}
