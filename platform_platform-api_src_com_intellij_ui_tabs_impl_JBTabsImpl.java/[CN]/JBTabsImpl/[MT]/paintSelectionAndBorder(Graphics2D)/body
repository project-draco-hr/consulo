{
  if (mySelectedInfo == null)   return;
  final ShapeInfo shapeInfo=computeSelectedLabelShape();
  if (!isHideTabs()) {
    g2d.setColor(getBackground());
    g2d.fill(shapeInfo.fillPath.getShape());
  }
  final int alpha;
  int paintTopY=shapeInfo.labelTopY;
  int paintBottomY=shapeInfo.labelBottomY;
  final boolean paintFocused=myPaintFocus && (myFocused || myActivePopup != null);
  Color bgPreFill=null;
  if (paintFocused) {
    final Color bgColor=getActiveTabColor(getActiveTabFillIn());
    if (bgColor == null) {
      shapeInfo.from=UIUtil.getFocusedFillColor();
      shapeInfo.to=UIUtil.getFocusedFillColor();
    }
 else {
      bgPreFill=bgColor;
      alpha=255;
      paintBottomY=shapeInfo.labelTopY + shapeInfo.labelPath.deltaY(getArcSize() - 2);
      shapeInfo.from=UIUtil.toAlpha(UIUtil.getFocusedFillColor(),alpha);
      shapeInfo.to=UIUtil.toAlpha(getActiveTabFillIn(),alpha);
    }
  }
 else {
    final Color bgColor=getActiveTabColor(getActiveTabFillIn());
    if (isPaintFocus()) {
      if (bgColor == null) {
        alpha=150;
        shapeInfo.from=UIUtil.toAlpha(UIUtil.getPanelBackground().brighter(),alpha);
        shapeInfo.to=UIUtil.toAlpha(UIUtil.getPanelBackground(),alpha);
      }
 else {
        alpha=255;
        shapeInfo.from=UIUtil.toAlpha(bgColor,alpha);
        shapeInfo.to=UIUtil.toAlpha(bgColor,alpha);
      }
    }
 else {
      alpha=255;
      final Color tabColor=getActiveTabColor(null);
      shapeInfo.from=UIUtil.toAlpha(tabColor == null ? Color.white : tabColor,alpha);
      shapeInfo.to=UIUtil.toAlpha(tabColor == null ? Color.white : tabColor,alpha);
    }
  }
  if (!isHideTabs()) {
    if (bgPreFill != null) {
      g2d.setColor(bgPreFill);
      g2d.fill(shapeInfo.fillPath.getShape());
    }
    final Line2D.Float gradientLine=shapeInfo.fillPath.transformLine(shapeInfo.fillPath.getX(),paintTopY,shapeInfo.fillPath.getX(),paintBottomY);
    g2d.setPaint(new GradientPaint((float)gradientLine.getX1(),(float)gradientLine.getY1(),shapeInfo.fillPath.transformY1(shapeInfo.from,shapeInfo.to),(float)gradientLine.getX2(),(float)gradientLine.getY2(),shapeInfo.fillPath.transformY1(shapeInfo.to,shapeInfo.from)));
    g2d.fill(shapeInfo.fillPath.getShape());
  }
  final Color tabColor=getActiveTabColor(null);
  Color borderColor=tabColor == null ? UIUtil.getBoundsColor(paintFocused) : tabColor.darker();
  g2d.setColor(borderColor);
  if (!isHideTabs()) {
    g2d.draw(shapeInfo.path.getShape());
  }
  paintBorder(g2d,shapeInfo,borderColor);
}
