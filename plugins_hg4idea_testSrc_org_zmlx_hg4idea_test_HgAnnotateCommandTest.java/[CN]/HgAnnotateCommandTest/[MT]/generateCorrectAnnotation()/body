{
  final File etalonFile=new File(myAnnotateDataDir,"etalon");
  File outputFile=new File(myOutputsDir,"hg_1.9.0");
  String output=FileUtil.loadFile(outputFile);
  String[] split=output.split("(\n|\r|\r\n)");
  List<HgAnnotationLine> annotationLines=new ArrayList<HgAnnotationLine>(split.length);
  Pattern pattern=Pattern.compile("\\s*(.+)\\s+(\\d+)\\s+([a-fA-F0-9]+)\\s+(\\d{4}-\\d{2}-\\d{2}):\\s*(\\d+): ?(.*)");
  for (  String line : split) {
    Matcher matcher=pattern.matcher(line);
    if (!matcher.matches()) {
      fail("Couldn't parse line [ " + line + " ]");
    }
    String user=matcher.group(1);
    String shortRev=matcher.group(2);
    String fullRev=matcher.group(3);
    String date=matcher.group(4);
    String lineNum=matcher.group(5);
    String content=matcher.group(6);
    annotationLines.add(new HgAnnotationLine(user,HgRevisionNumber.getInstance(shortRev,fullRev),date,Integer.parseInt(lineNum),content));
  }
  XStream xStream=new XStream();
  FileWriter writer=new FileWriter(etalonFile);
  try {
    xStream.toXML(annotationLines,writer);
  }
  finally {
    writer.close();
  }
}
