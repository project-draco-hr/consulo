{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    myReplacementPreviewText=replacementPreviewText;
    return;
  }
  ReplacementView replacementView=new ReplacementView(replacementPreviewText);
  BalloonBuilder balloonBuilder=JBPopupFactory.getInstance().createBalloonBuilder(replacementView);
  balloonBuilder.setFadeoutTime(0);
  balloonBuilder.setFillColor(IdeTooltipManager.GRAPHITE_COLOR);
  balloonBuilder.setAnimationCycle(0);
  balloonBuilder.setHideOnClickOutside(false);
  balloonBuilder.setHideOnKeyOutside(false);
  balloonBuilder.setHideOnAction(false);
  balloonBuilder.setCloseButtonEnabled(true);
  myReplacementBalloon=balloonBuilder.createBalloon();
  myReplacementBalloon.show(new ReplacementBalloonPositionTracker(editor),Balloon.Position.above);
}
