{
  if (mySearchResults.getEditor() == null)   return;
  if (mySearchResults.getMatchesCount() >= mySearchResults.getMatchesLimit())   return;
  for (  LiveOccurrence o : mySearchResults.getOccurrences()) {
    for (    TextRange textRange : o.getSecondaryRanges()) {
      highlightRange(textRange,OTHER_TARGETS_ATTRIBUTES,myHighlighters);
    }
    final TextRange range=o.getPrimaryRange();
    TextAttributes attributes=EditorColorsManager.getInstance().getGlobalScheme().getAttributes(EditorColors.TEXT_SEARCH_RESULT_ATTRIBUTES);
    if (mySearchResults.isExcluded(o)) {
      highlightRange(range,strikout(attributes),myHighlighters);
    }
 else {
      highlightRange(range,attributes,myHighlighters);
    }
  }
  updateInSelectionHighlighters();
  if (!myListeningSelection) {
    mySearchResults.getEditor().getSelectionModel().addSelectionListener(this);
    myListeningSelection=true;
  }
}
