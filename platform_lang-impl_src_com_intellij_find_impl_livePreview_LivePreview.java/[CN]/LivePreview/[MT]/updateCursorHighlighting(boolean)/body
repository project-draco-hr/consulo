{
  hideBalloon();
  if (myCursorHighlighter != null) {
    HighlightManager.getInstance(mySearchResults.getProject()).removeSegmentHighlighter(mySearchResults.getEditor(),myCursorHighlighter);
    myCursorHighlighter=null;
  }
  FindResult cursor=mySearchResults.getCursor();
  Editor editor=mySearchResults.getEditor();
  if (cursor != null) {
    Set<RangeHighlighter> dummy=new HashSet<RangeHighlighter>();
    highlightRange(cursor,new TextAttributes(null,null,Color.BLACK,EffectType.ROUNDED_BOX,0),dummy);
    if (!dummy.isEmpty()) {
      myCursorHighlighter=dummy.iterator().next();
    }
    if (!SearchResults.insideVisibleArea(editor,cursor) && scroll) {
      editor.getScrollingModel().scrollTo(editor.offsetToLogicalPosition(cursor.getStartOffset()),ScrollType.CENTER);
      editor.getScrollingModel().runActionOnScrollingFinished(new Runnable(){
        @Override public void run(){
          showReplacementPreview();
        }
      }
);
    }
 else {
      showReplacementPreview();
    }
  }
}
