{
  if (project == null) {
    project=ProjectManager.getInstance().getDefaultProject();
  }
  final Project tempProject=project;
  List<ConfigurableEP<Configurable>> configurableEPs=new ArrayList<ConfigurableEP<Configurable>>();
  Collections.addAll(configurableEPs,ApplicationManager.getApplication().getExtensions(Configurable.APPLICATION_CONFIGURABLE));
  Collections.addAll(configurableEPs,project.getExtensions(Configurable.PROJECT_CONFIGURABLE));
  List<Configurable> result=ConfigurableExtensionPointUtil.buildConfigurablesList(configurableEPs,new Condition<Configurable>(){
    @Override public boolean value(    final Configurable configurable){
      return !tempProject.isDefault() || !ConfigurableWrapper.isNonDefaultProject(configurable);
    }
  }
);
  return ContainerUtil.toArray(result,Configurable.ARRAY_FACTORY);
}
