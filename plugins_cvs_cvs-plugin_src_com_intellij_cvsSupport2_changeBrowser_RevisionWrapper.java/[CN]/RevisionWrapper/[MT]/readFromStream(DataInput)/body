{
  final String file=stream.readUTF();
  final String number=stream.readUTF();
  final Revision revision=new Revision(number);
  final long time=stream.readLong();
  revision.setDate(new Date(time));
  revision.setAuthor(stream.readUTF());
  revision.setState(stream.readUTF());
  final String lines=stream.readUTF();
  if (lines.length() > 0) {
    revision.setLines(lines);
  }
  revision.setMessage(stream.readUTF());
  final String branches=stream.readUTF();
  if (branches.length() > 0) {
    revision.setBranches(branches);
  }
  final String branch=stream.readUTF();
  return new RevisionWrapper(file,revision,branch.length() > 0 ? branch : null);
}
