{
  GlobalSearchScope scope=myLibraryScopes.get(modulesLibraryIsUsedIn);
  if (scope != null) {
    return scope;
  }
  GlobalSearchScope newScope=modulesLibraryIsUsedIn.isEmpty() ? new LibrariesOnlyScope(GlobalSearchScope.allScope(myProject)) : new LibraryRuntimeClasspathScope(myProject,modulesLibraryIsUsedIn);
  return ConcurrencyUtil.cacheOrGet(myLibraryScopes,modulesLibraryIsUsedIn,newScope);
}
