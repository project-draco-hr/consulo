{
  Insets i=b.getInsets();
  viewRect.x=i.left;
  viewRect.y=i.top;
  viewRect.width=width - (i.right + viewRect.x);
  viewRect.height=height - (i.bottom + viewRect.y);
  textRect.x=textRect.y=textRect.width=textRect.height=0;
  iconRect.x=iconRect.y=iconRect.width=iconRect.height=0;
  return SwingUtilities.layoutCompoundLabel(b,fm,b.getText(),b.getIcon(),b.getVerticalAlignment(),b.getHorizontalAlignment(),b.getVerticalTextPosition(),b.getHorizontalTextPosition(),viewRect,iconRect,textRect,b.getText() == null ? 0 : b.getIconTextGap());
}
