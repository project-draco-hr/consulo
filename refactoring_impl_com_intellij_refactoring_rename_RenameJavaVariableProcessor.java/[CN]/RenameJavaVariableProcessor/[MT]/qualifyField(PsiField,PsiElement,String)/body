{
  PsiManager psiManager=occurence.getManager();
  PsiElementFactory factory=JavaPsiFacade.getInstance(psiManager.getProject()).getElementFactory();
  if (field.hasModifierProperty(PsiModifier.STATIC)) {
    PsiReferenceExpression qualified=(PsiReferenceExpression)factory.createExpressionFromText("a." + newName,null);
    qualified=(PsiReferenceExpression)CodeStyleManager.getInstance(psiManager.getProject()).reformat(qualified);
    qualified.getQualifierExpression().replace(factory.createReferenceExpression(field.getContainingClass()));
    occurence.replace(qualified);
  }
 else {
    PsiReferenceExpression qualified=createQualifiedFieldReference(field,occurence);
    qualified=(PsiReferenceExpression)CodeStyleManager.getInstance(psiManager.getProject()).reformat(qualified);
    occurence.replace(qualified);
  }
}
