{
  final PsiElement element=(PsiElement)param;
  PsiFile hostPsiFile=element.getContainingFile();
  if (hostPsiFile == null)   return null;
  FileViewProvider viewProvider=hostPsiFile.getViewProvider();
  final VirtualFile hostVirtualFile=viewProvider.getVirtualFile();
  final DocumentEx hostDocument=(DocumentEx)viewProvider.getDocument();
  if (hostDocument == null)   return null;
  PsiManager psiManager=viewProvider.getManager();
  final Project project=psiManager.getProject();
  InjectedLanguageManagerImpl injectedManager=InjectedLanguageManagerImpl.getInstanceImpl(project);
  if (injectedManager == null)   return null;
  final Places result=doCompute(element,hostVirtualFile,hostDocument,project,injectedManager,psiManager);
  if (result == null)   return null;
  return new CachedValueProvider.Result<Places>(result,PsiModificationTracker.MODIFICATION_COUNT,hostDocument);
}
