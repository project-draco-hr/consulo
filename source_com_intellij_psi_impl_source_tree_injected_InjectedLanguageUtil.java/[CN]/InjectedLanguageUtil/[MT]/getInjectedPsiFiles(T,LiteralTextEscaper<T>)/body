{
  if (!host.isPhysical()) {
    CachedValueProvider.Result<List<Pair<PsiElement,TextRange>>> result=new InjectedPsiProvider<T>(host,textEscaper).compute();
    return result == null ? null : result.getValue();
  }
  CachedValue<List<Pair<PsiElement,TextRange>>> cachedPsi=host.getUserData(INJECTED_PSI);
  if (cachedPsi == null) {
    InjectedPsiProvider<T> provider=new InjectedPsiProvider<T>(host,textEscaper);
    cachedPsi=host.getManager().getCachedValuesManager().createCachedValue(provider,false);
    host.putUserData(INJECTED_PSI,cachedPsi);
  }
  return cachedPsi.getValue();
}
