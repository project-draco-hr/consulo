def dir(self, relpath):
    '\n        Returns the directory contained at the relative path relpath.\n        Creates the intermediate directories if necessary.\n        '
    if (not relpath):
        return self
    l = relpath.split('/')
    ret = self
    while l:
        next = l.pop(0)
        try:
            ret = ret.dirs[next]
        except KeyError:
            d = directory(join(ret.path, next))
            ret.dirs[next] = d
            ret = d
    return ret
