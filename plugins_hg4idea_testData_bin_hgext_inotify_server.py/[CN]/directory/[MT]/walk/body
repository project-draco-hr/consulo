def walk(self, states, visited=None):
    '\n        yield (filename, status) pairs for items in the trees\n        that have status in states.\n        filenames are relative to the repo root\n        '
    for (file, st) in self.files.iteritems():
        if (st in states):
            yield (join(self.path, file), st)
    for dir in self.dirs.itervalues():
        if (visited is not None):
            visited.add(dir.path)
        for e in dir.walk(states):
            yield e
