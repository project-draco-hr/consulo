def lookup(self, states, path, visited):
    '\n        yield root-relative filenames that match path, and whose\n        status are in states:\n        * if path is a file, yield path\n        * if path is a directory, yield directory files\n        * if path is not tracked, yield nothing\n        '
    if (path[(-1)] == '/'):
        path = path[:(-1)]
    paths = path.split('/')
    last = paths.pop()
    tree = self
    try:
        for dir in paths:
            tree = tree.dirs[dir]
    except KeyError:
        visited.add(tree.path)
        return
    try:
        target = tree.dirs[last]
        visited.add(target.path)
        for (file, st) in target.walk(states, visited):
            yield file
    except KeyError:
        try:
            if (tree.files[last] in states):
                visited.add(tree.path)
                yield path
        except KeyError:
            pass
