def check_deleted(self, key):
    nuke = []
    for (wfn, ignore) in self.statustrees[key].walk(key):
        if (wfn not in self.dirstate):
            nuke.append(wfn)
    for wfn in nuke:
        (root, fn) = split(wfn)
        del self.statustrees[key].dir(root).files[fn]
        del self.tree.dir(root).files[fn]
