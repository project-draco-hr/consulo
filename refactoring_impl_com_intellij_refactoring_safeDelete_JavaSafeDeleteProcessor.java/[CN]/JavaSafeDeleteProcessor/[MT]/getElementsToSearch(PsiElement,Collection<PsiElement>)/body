{
  Project project=element.getProject();
  if (element instanceof PsiMethod) {
    final PsiMethod[] methods=SuperMethodWarningUtil.checkSuperMethods((PsiMethod)element,RefactoringBundle.message("to.delete.with.usage.search"),allElementsToDelete);
    if (methods.length == 0)     return null;
    return Arrays.asList(methods);
  }
 else   if (element instanceof PsiParameter && ((PsiParameter)element).getDeclarationScope() instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)((PsiParameter)element).getDeclarationScope();
    final Set<PsiParameter> parametersToDelete=new com.intellij.util.containers.HashSet<PsiParameter>();
    parametersToDelete.add((PsiParameter)element);
    final int parameterIndex=method.getParameterList().getParameterIndex((PsiParameter)element);
    SuperMethodsSearch.search(method,null,true,false).forEach(new Processor<MethodSignatureBackedByPsiMethod>(){
      public boolean process(      MethodSignatureBackedByPsiMethod signature){
        parametersToDelete.add(signature.getMethod().getParameterList().getParameters()[parameterIndex]);
        return true;
      }
    }
);
    OverridingMethodsSearch.search(method).forEach(new Processor<PsiMethod>(){
      public boolean process(      PsiMethod overrider){
        parametersToDelete.add(overrider.getParameterList().getParameters()[parameterIndex]);
        return true;
      }
    }
);
    if (parametersToDelete.size() > 1) {
      String message=RefactoringBundle.message("0.is.a.part.of.method.hierarchy.do.you.want.to.delete.multiple.parameters",UsageViewUtil.getLongName(method));
      if (Messages.showYesNoDialog(project,message,SafeDeleteHandler.REFACTORING_NAME,Messages.getQuestionIcon()) != DialogWrapper.OK_EXIT_CODE)       return null;
    }
    return parametersToDelete;
  }
 else {
    return Collections.singletonList(element);
  }
}
