{
  final NewVirtualFile cached=myIdToDirCache.get(id);
  if (cached != null) {
    return cached;
  }
  NewVirtualFile result=doFindFile(id);
  if (result != null && result.isDirectory()) {
    NewVirtualFile old=myIdToDirCache.putIfAbsent(id,result);
    if (old != null)     result=old;
  }
  return result;
}
