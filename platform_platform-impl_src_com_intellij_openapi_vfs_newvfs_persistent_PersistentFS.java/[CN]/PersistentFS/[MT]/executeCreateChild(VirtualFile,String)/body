{
  final NewVirtualFileSystem delegate=getDelegate(parent);
  VirtualFile fakeFile=new FakeVirtualFile(parent,name);
  if (delegate.exists(fakeFile)) {
    final int parentId=getFileId(parent);
    int childId=FSRecords.createRecord();
    copyRecordFromDelegateFS(childId,parentId,fakeFile,delegate);
    appendIdToParentList(parentId,childId);
    final VirtualDirectoryImpl dir=(VirtualDirectoryImpl)parent;
    dir.addChild(dir.createChild(name,childId));
  }
}
