{
  if (id == parentId) {
    LOG.error("Cyclic parent-child relations for file: " + file);
    return;
  }
  String name=file.getName();
  if (name.length() == 0) {
    if (areChildrenLoaded(id))     return;
  }
  boolean isDirectory=delegate.isDirectory(file);
  int flags=(isDirectory ? IS_DIRECTORY_FLAG : 0) | (delegate.isWritable(file) ? 0 : IS_READ_ONLY);
  myRecords.saveRecord(id,parentId,name,delegate.getTimeStamp(file),flags,isDirectory ? -1L : delegate.getLength(file));
}
