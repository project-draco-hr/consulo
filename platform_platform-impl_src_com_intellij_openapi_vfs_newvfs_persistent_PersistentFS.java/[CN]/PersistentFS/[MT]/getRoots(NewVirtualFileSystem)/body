{
  List<VirtualFile> roots=new ArrayList<VirtualFile>();
synchronized (LOCK) {
    for (    NewVirtualFile root : myRoots.values()) {
      if (root.getFileSystem() == fs) {
        roots.add(root);
      }
    }
  }
  return roots.toArray(new VirtualFile[roots.size()]);
}
