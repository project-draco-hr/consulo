{
  final VirtualFile canonicalFile=file.getCanonicalFile();
  if (canonicalFile == null)   return 0;
  final int id=getFileId(canonicalFile);
  long len=FSRecords.getLength(id);
  if (len == -1) {
    len=(int)getDelegate(canonicalFile).getLength(canonicalFile);
    FSRecords.setLength(id,len);
  }
  return len;
}
