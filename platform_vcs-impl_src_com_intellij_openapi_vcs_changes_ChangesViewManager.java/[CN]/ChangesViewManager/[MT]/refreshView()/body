{
  if (myDisposed || !myProject.isInitialized() || ApplicationManager.getApplication().isUnitTestMode())   return;
  if (!ProjectLevelVcsManager.getInstance(myProject).hasActiveVcss())   return;
  ChangeListManagerImpl changeListManager=ChangeListManagerImpl.getInstanceImpl(myProject);
  final Pair<Integer,Integer> unv=changeListManager.getUnversionedFilesSize();
  final boolean manyUnversioned=unv.getFirst() > UNVERSIONED_MAX_SIZE;
  final Trinity<List<VirtualFile>,Integer,Integer> unversionedPair=new Trinity<List<VirtualFile>,Integer,Integer>(manyUnversioned ? Collections.<VirtualFile>emptyList() : changeListManager.getUnversionedFiles(),unv.getFirst(),unv.getSecond());
  if (LOG.isDebugEnabled()) {
    LOG.debug("refresh view, unversioned collections size: " + unversionedPair.getFirst().size() + " unv size passed: "+ unversionedPair.getSecond()+ " dirs: "+ unversionedPair.getThird());
  }
  myView.updateModel(changeListManager.getChangeListsCopy(),unversionedPair,changeListManager.getDeletedFiles(),changeListManager.getModifiedWithoutEditing(),changeListManager.getSwitchedFilesMap(),changeListManager.getSwitchedRoots(),SHOW_IGNORED_MODE ? changeListManager.getIgnoredFiles() : null,changeListManager.getLockedFolders(),changeListManager.getLogicallyLockedFolders());
}
