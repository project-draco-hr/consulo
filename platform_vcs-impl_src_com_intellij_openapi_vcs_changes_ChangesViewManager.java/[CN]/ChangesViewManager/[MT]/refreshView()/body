{
  if (myDisposed || !myProject.isInitialized() || ApplicationManager.getApplication().isUnitTestMode())   return;
  if (!ProjectLevelVcsManager.getInstance(myProject).hasActiveVcss())   return;
  ChangeListManagerImpl changeListManager=ChangeListManagerImpl.getInstanceImpl(myProject);
  myView.updateModel(new TreeModelBuilder(myProject,myView.isShowFlatten()).set(changeListManager.getChangeListsCopy(),changeListManager.getDeletedFiles(),changeListManager.getModifiedWithoutEditing(),changeListManager.getSwitchedFilesMap(),changeListManager.getSwitchedRoots(),myState.myShowIgnored ? changeListManager.getIgnoredFiles() : null,changeListManager.getLockedFolders(),changeListManager.getLogicallyLockedFolders()).setUnversioned(changeListManager.getUnversionedFiles(),changeListManager.getUnversionedFilesSize()).build());
  changeDetails();
}
