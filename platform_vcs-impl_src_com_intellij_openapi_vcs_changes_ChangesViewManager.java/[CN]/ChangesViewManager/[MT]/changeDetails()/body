{
  if (!myDetailsOn) {
    mySplitter.setSecondComponent(null);
  }
 else {
    final Change[] selectedChanges=myView.getSelectedChanges();
    if (selectedChanges.length == 0) {
      mySplitter.setSecondComponent(myNothingSelected);
    }
 else {
      Pair<JPanel,Disposable> details=null;
      FilePath filePath=null;
      for (      Change change : selectedChanges) {
        if (change.getBeforeRevision() instanceof FakeRevision || change.getAfterRevision() instanceof FakeRevision) {
          mySplitter.setSecondComponent(myNotLoadedYet);
          mySplitter.revalidate();
          mySplitter.repaint();
          return;
        }
        filePath=ChangesUtil.getFilePath(change);
        details=myDetailsCache.get(filePath);
        if (details != null)         break;
        details=myVcsChangeDetailsManager.getPanel(change);
        if (details != null) {
          myDetailsCache.put(filePath,details);
          break;
        }
      }
      final JPanel panel;
      if (details == null) {
        panel=myNoDetailsPanel;
      }
 else {
        myDetailsFilePath=filePath;
        panel=details.getFirst();
      }
      mySplitter.setSecondComponent(panel);
    }
  }
  mySplitter.revalidate();
  mySplitter.repaint();
}
