{
  myProject=project;
  myContentManager=contentManager;
  myVcsChangeDetailsManager=vcsChangeDetailsManager;
  myView=new ChangesListView(project);
  myNoDetailsPanel=UIVcsUtil.errorPanel("No details available",false);
  myNothingSelected=UIVcsUtil.errorPanel("Nothing selected",false);
  myNotLoadedYet=UIVcsUtil.errorPanel("Changes content is not loaded yet",false);
  Disposer.register(project,myView);
  myRepaintAlarm=new Alarm(Alarm.ThreadToUse.SWING_THREAD,project);
  myFileListener=new MyFileListener();
  myDocumentListener=new MyDocumentListener();
  myDetailsCache=new SLRUMap<FilePath,Pair<JPanel,Disposable>>(10,10){
    @Override protected void onDropFromCache(    FilePath key,    Pair<JPanel,Disposable> value){
      if (value.getSecond() != null) {
        Disposer.dispose(value.getSecond());
      }
    }
  }
;
  myDetailsUpdater=new ZipperUpdater(300,Alarm.ThreadToUse.SWING_THREAD,myProject);
  myUpdateDetails=new Runnable(){
    @Override public void run(){
      changeDetails();
    }
  }
;
}
