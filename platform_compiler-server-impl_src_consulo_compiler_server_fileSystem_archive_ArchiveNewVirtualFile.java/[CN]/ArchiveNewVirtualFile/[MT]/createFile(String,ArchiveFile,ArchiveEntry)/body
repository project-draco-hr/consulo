{
  ChildArchiveNewVirtualDirectory parentDir=null;
  int lastIndex=name.lastIndexOf("/");
  if (lastIndex != -1) {
    String parentDirName=name.substring(0,lastIndex);
    parentDir=(ChildArchiveNewVirtualDirectory)findFileByRelativePath(parentDirName);
    if (parentDir == null) {
      parentDir=createDirs(parentDirName);
    }
    ArchiveNewVirtualFile.LOGGER.assertTrue(parentDir != null,"Parent dir for: " + name + ", url file: "+ getUrl()+ " is not created, parent: "+ parentDirName);
  }
  ChildArchiveNewVirtualFile file=new ChildArchiveNewVirtualFile(this,parentDir,name.substring(lastIndex + 1,name.length()),myFileSystem,jarFile,next);
  if (parentDir != null) {
    parentDir.myChilds.add(file);
  }
 else {
    myChilds.add(file);
  }
}
