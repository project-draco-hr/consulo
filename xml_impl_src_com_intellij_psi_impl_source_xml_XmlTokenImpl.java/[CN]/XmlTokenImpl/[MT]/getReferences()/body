{
  final IElementType elementType=getElementType();
  if (elementType == XmlTokenType.XML_DATA_CHARACTERS || elementType == XmlTokenType.XML_CHAR_ENTITY_REF) {
    return ReferenceProvidersRegistry.getReferencesFromProviders(this,XmlToken.class);
  }
 else   if (elementType == XmlTokenType.XML_NAME && getParent() instanceof PsiErrorElement) {
    final PsiElement element=getPrevSibling();
    if (element instanceof XmlToken && ((XmlToken)element).getTokenType() == XmlTokenType.XML_END_TAG_START) {
      return new PsiReference[]{TagNameReference.create(this,getNode(),false)};
    }
  }
  return super.getReferences();
}
