{
  PsiType returnType=method.getReturnType();
  PsiClass aClass=method.getContainingClass();
  List<HierarchicalMethodSignature> superSignatures=method.getHierarchicalMethodSignature().getSuperSignatures();
  FileTemplate template;
  try {
    PsiMethod templateMethod=method.getManager().getElementFactory().createMethod("x",returnType);
    template=setupMethodBody(superSignatures,templateMethod,aClass,false);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
    return null;
  }
  final ReplaceWithFileTemplateFix replaceWithFileTemplateFix=new ReplaceWithFileTemplateFix(){
    public void applyFix(    @NotNull Project project,    @NotNull ProblemDescriptor descriptor){
      PsiType returnType=method.getReturnType();
      if (method.isConstructor() || returnType == null)       return;
      PsiCodeBlock body=method.getBody();
      if (body == null)       return;
      PsiClass aClass=method.getContainingClass();
      if (aClass == null)       return;
      List<HierarchicalMethodSignature> superSignatures=method.getHierarchicalMethodSignature().getSuperSignatures();
      try {
        PsiMethod templateMethod=method.getManager().getElementFactory().createMethod("x",returnType);
        setupMethodBody(superSignatures,templateMethod,aClass,false);
        PsiElement newBody=method.getBody().replace(templateMethod.getBody());
        CodeStyleManager.getInstance(project).reformat(newBody);
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
    }
  }
;
  LocalQuickFix editFileTemplateFix=DefaultFileTemplateUsageInspection.createEditFileTemplateFix(template,replaceWithFileTemplateFix);
  if (template.isDefault()) {
    return new LocalQuickFix[]{editFileTemplateFix};
  }
  return new LocalQuickFix[]{replaceWithFileTemplateFix,editFileTemplateFix};
}
