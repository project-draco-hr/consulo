{
  if (!(element instanceof MutableLookupElement))   return null;
  final Object o=((MutableLookupElement)element).getObject();
  if (o instanceof PsiLocalVariable || o instanceof PsiParameter || o instanceof PsiThisExpression) {
    return StatisticsInfo.EMPTY;
  }
  PsiType qualifierType=JavaCompletionUtil.getQualifierType((LookupItem)element);
  if (qualifierType == null) {
    final ExpectedTypeInfo[] infos=JavaCompletionUtil.EXPECTED_TYPES.getValue(location);
    if (infos != null && infos.length > 0) {
      qualifierType=infos[0].getDefaultType();
    }
  }
  final CompletionType type=location.getCompletionType();
  if (o instanceof PsiMember) {
    final boolean isClass=o instanceof PsiClass;
    if (qualifierType != null) {
      if (type == CompletionType.SMART)       return JavaStatisticsManager.createInfo(qualifierType,(PsiMember)o);
      if (!isClass && type == CompletionType.BASIC)       return JavaStatisticsManager.createInfo(qualifierType,(PsiMember)o);
      return StatisticsInfo.EMPTY;
    }
    if (type == CompletionType.CLASS_NAME && isClass) {
      final String qualifiedName=((PsiClass)o).getQualifiedName();
      if (qualifiedName != null) {
        final String prefixCapitals=StringUtil.capitalsOnly(element.getPrefixMatcher().getPrefix());
        return new StatisticsInfo(CLASS_NAME_COMPLETION_PREFIX + prefixCapitals,qualifiedName);
      }
    }
  }
  if (qualifierType != null)   return StatisticsInfo.EMPTY;
  return null;
}
