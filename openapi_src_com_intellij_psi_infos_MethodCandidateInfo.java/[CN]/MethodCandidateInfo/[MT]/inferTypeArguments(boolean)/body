{
  PsiMethod method=getElement();
  PsiSubstitutor partialSubstitutor=mySubstitutor;
  PsiExpression[] arguments=myArgumentList == null ? PsiExpression.EMPTY_ARRAY : myArgumentList.getExpressions();
  PsiTypeParameter[] typeParameters=method.getTypeParameters();
  if (!method.hasModifierProperty(PsiModifier.STATIC) && PsiUtil.isRawSubstitutor(method.getContainingClass(),partialSubstitutor)) {
    return createRawSubstitutor(partialSubstitutor,typeParameters);
  }
  PsiResolveHelper helper=method.getManager().getResolveHelper();
  return helper.inferTypeArguments(typeParameters,method.getParameterList().getParameters(),arguments,partialSubstitutor,myArgumentList.getParent(),forCompletion);
}
