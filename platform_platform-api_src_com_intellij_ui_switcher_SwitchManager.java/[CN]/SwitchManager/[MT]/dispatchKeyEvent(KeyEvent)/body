{
  if (!myQa.isEnabled())   return false;
  if (mySession != null && !mySession.isFinished())   return false;
  Component c=e.getComponent();
  Component frame=UIUtil.findUltimateParent(c);
  if (frame instanceof IdeFrame) {
    if (((IdeFrame)frame).getProject() != myProject)     return false;
  }
  if (e.getID() != KeyEvent.KEY_PRESSED) {
    if (myWaitingForAutoInitSession) {
      cancelWaitingForAutoInit();
    }
    return false;
  }
  if (myQa.getModiferCodes().contains(e.getKeyCode())) {
    if (areAllModifiersPressed(e.getModifiers(),myQa.getModiferCodes())) {
      myWaitingForAutoInitSession=true;
      myAutoInitSessionEvent=e;
      myInitSessionAlarm.addRequest(new Runnable(){
        public void run(){
          IdeFocusManager.getInstance(myProject).doWhenFocusSettlesDown(new Runnable(){
            public void run(){
              if (myWaitingForAutoInitSession) {
                tryToInitSessionFromFocus(null,false);
              }
            }
          }
);
        }
      }
,Registry.intValue("actionSystem.keyGestureHoldTime"));
    }
  }
 else {
    if (myWaitingForAutoInitSession) {
      cancelWaitingForAutoInit();
    }
  }
  return false;
}
