{
  ProgressManager progressManager=ProgressManager.getInstance();
  for (int i=start; i < references.length; ++i) {
    PsiReference reference=references[i];
    ProgressManager.checkCanceled();
    if (reference == null) {
      continue;
    }
    if (!reference.isSoft()) {
      if (hasBadResolve(reference)) {
        String description=getErrorDescription(reference);
        final int startOffset=reference.getElement().getTextRange().getStartOffset();
        final TextRange referenceRange=reference.getRangeInElement();
        if (referenceRange.getStartOffset() > referenceRange.getEndOffset()) {
          LOG.error("Reference range start offset > end offset:  " + reference + ", start offset: "+ referenceRange.getStartOffset()+ ", end offset: "+ referenceRange.getEndOffset());
        }
        HighlightInfo info=HighlightInfo.createHighlightInfo(getTagProblemInfoType(PsiTreeUtil.getParentOfType(value,XmlTag.class)),startOffset + referenceRange.getStartOffset(),startOffset + referenceRange.getEndOffset(),description);
        addToResults(info);
        if (reference instanceof QuickFixProvider)         ((QuickFixProvider)reference).registerQuickfix(info,reference);
      }
    }
  }
}
