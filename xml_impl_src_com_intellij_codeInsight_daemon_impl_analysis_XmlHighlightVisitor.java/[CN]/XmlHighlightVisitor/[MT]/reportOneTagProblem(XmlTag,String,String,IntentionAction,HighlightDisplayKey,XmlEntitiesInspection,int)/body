{
  boolean htmlTag=false;
  if (tag instanceof HtmlTag) {
    htmlTag=true;
    if (isAdditionallyDeclared(inspection.getAdditionalEntries(type),name))     return;
  }
  final InspectionProfile profile=InspectionProjectProfileManager.getInstance(tag.getProject()).getInspectionProfile();
  final IntentionAction intentionAction=inspection.getIntentionAction(name,type);
  if (htmlTag && profile.isToolEnabled(key,tag)) {
    addElementsForTagWithManyQuickFixes(tag,localizedMessage,SeverityRegistrar.getInstance(tag.getProject()).getHighlightInfoTypeBySeverity(profile.getErrorLevel(key,tag).getSeverity()),intentionAction,basicIntention);
  }
 else   if (!htmlTag) {
    addElementsForTag(tag,localizedMessage,HighlightInfoType.ERROR,basicIntention);
  }
}
