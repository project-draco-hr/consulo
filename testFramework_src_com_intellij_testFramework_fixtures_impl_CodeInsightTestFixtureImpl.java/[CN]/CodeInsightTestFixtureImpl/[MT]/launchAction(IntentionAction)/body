{
  new WriteCommandAction(myProjectFixture.getProject()){
    protected void run(    final Result result) throws Exception {
      action.invoke(getProject(),getEditor(),getFile());
    }
  }
.execute().throwException();
}
