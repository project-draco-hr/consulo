{
  final List<Trinity<PsiFile,Editor,ExpectedHighlightingData>> datas=ContainerUtil.map2List(files,new Function<VirtualFile,Trinity<PsiFile,Editor,ExpectedHighlightingData>>(){
    public Trinity<PsiFile,Editor,ExpectedHighlightingData> fun(    final VirtualFile file){
      final PsiFile psiFile=myPsiManager.findFile(file);
      assertNotNull(psiFile);
      final Document document=PsiDocumentManager.getInstance(getProject()).getDocument(psiFile);
      assertNotNull(document);
      return Trinity.create(psiFile,createEditor(file),new ExpectedHighlightingData(document,checkWarnings,checkWeakWarnings,checkInfos,psiFile));
    }
  }
);
  for (  Trinity<PsiFile,Editor,ExpectedHighlightingData> trinity : datas) {
    myEditor=trinity.second;
    myFile=trinity.first;
    collectAndCheckHighlightings(trinity.third,duration);
  }
}
