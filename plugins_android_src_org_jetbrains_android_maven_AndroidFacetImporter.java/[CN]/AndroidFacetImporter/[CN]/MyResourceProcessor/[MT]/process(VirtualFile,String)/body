{
  if (!myDirectory && resource.isDirectory()) {
    return false;
  }
  if (outputPath.endsWith("/")) {
    outputPath=outputPath.substring(0,outputPath.length() - 1);
  }
  if (FileUtil.pathsEqual(outputPath,myResourceOutputPath)) {
    myResult=resource;
    return true;
  }
  if (myDirectory) {
    if (outputPath.toLowerCase().startsWith(myResourceOutputPath.toLowerCase())) {
      final String parentPath=outputPath.substring(0,myResourceOutputPath.length());
      if (FileUtil.pathsEqual(parentPath,myResourceOutputPath)) {
        if (resource.isDirectory()) {
          final VirtualFile parent=resource.getParent();
          if (parent != null) {
            myResult=parent;
            return true;
          }
        }
 else {
          final VirtualFile parent=resource.getParent();
          final VirtualFile gp=parent != null ? parent.getParent() : null;
          if (gp != null) {
            myResult=gp;
            return true;
          }
        }
      }
    }
    return false;
  }
  return false;
}
