{
  Module module=facet.getModule();
  String modulePath=module.getModuleFilePath();
  String moduleDirPath=FileUtil.toSystemIndependentName(new File(modulePath).getParent());
  AndroidFacetConfiguration configuration=facet.getConfiguration();
  String resFolderRelPath=getPathFromConfig(module,project,moduleDirPath,"resourceDirectory",true,true);
  if (resFolderRelPath != null) {
    configuration.RES_FOLDER_RELATIVE_PATH='/' + resFolderRelPath;
  }
  Element resourceOverlayDirectories=getConfig(project,"resourceOverlayDirectories");
  if (resourceOverlayDirectories != null) {
    List<String> dirs=new ArrayList<String>();
    for (    Object child : resourceOverlayDirectories.getChildren()) {
      String dir=((Element)child).getTextTrim();
      if (dir != null && dir.length() > 0) {
        String relativePath=getRelativePath(moduleDirPath,makePath(project,dir));
        if (relativePath != null && relativePath.length() > 0) {
          dirs.add('/' + relativePath);
        }
      }
    }
    if (dirs.size() > 0) {
      configuration.RES_OVERLAY_FOLDERS=ArrayUtil.toStringArray(dirs);
    }
  }
 else {
    String resOverlayFolderRelPath=getPathFromConfig(module,project,moduleDirPath,"resourceOverlayDirectory",true,true);
    if (resOverlayFolderRelPath != null) {
      configuration.RES_OVERLAY_FOLDERS=new String[]{'/' + resOverlayFolderRelPath};
    }
  }
  String resFolderForCompilerRelPath=getPathFromConfig(module,project,moduleDirPath,"resourceDirectory",false,true);
  if (resFolderForCompilerRelPath != null && !resFolderForCompilerRelPath.equals(resFolderRelPath)) {
    if (!configuration.USE_CUSTOM_APK_RESOURCE_FOLDER) {
      configuration.USE_CUSTOM_APK_RESOURCE_FOLDER=true;
      configuration.CUSTOM_APK_RESOURCE_FOLDER='/' + resFolderForCompilerRelPath;
    }
    configuration.RUN_PROCESS_RESOURCES_MAVEN_TASK=true;
  }
  String assetsFolderRelPath=getPathFromConfig(module,project,moduleDirPath,"assetsDirectory",false,true);
  if (assetsFolderRelPath != null) {
    configuration.ASSETS_FOLDER_RELATIVE_PATH='/' + assetsFolderRelPath;
  }
  String manifestFileRelPath=getPathFromConfig(module,project,moduleDirPath,"androidManifestFile",true,false);
  if (manifestFileRelPath != null) {
    configuration.MANIFEST_FILE_RELATIVE_PATH='/' + manifestFileRelPath;
  }
  String manifestFileForCompilerRelPath=getPathFromConfig(module,project,moduleDirPath,"androidManifestFile",false,false);
  if (manifestFileForCompilerRelPath != null && !manifestFileForCompilerRelPath.equals(manifestFileRelPath)) {
    configuration.USE_CUSTOM_COMPILER_MANIFEST=true;
    configuration.CUSTOM_COMPILER_MANIFEST='/' + manifestFileForCompilerRelPath;
    configuration.RUN_PROCESS_RESOURCES_MAVEN_TASK=true;
  }
  String nativeLibsFolderRelPath=getPathFromConfig(module,project,moduleDirPath,"nativeLibrariesDirectory",false,true);
  if (nativeLibsFolderRelPath != null) {
    configuration.LIBS_FOLDER_RELATIVE_PATH='/' + nativeLibsFolderRelPath;
  }
}
