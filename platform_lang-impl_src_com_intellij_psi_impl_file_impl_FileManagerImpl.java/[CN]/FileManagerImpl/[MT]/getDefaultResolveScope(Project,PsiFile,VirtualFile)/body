{
  return CachedValuesManager.getManager(project).getCachedValue(psiFile,new CachedValueProvider<GlobalSearchScope>(){
    @Override public Result<GlobalSearchScope> compute(){
      GlobalSearchScope scope=getInherentResolveScope(vFile);
      for (      ResolveScopeEnlarger enlarger : ResolveScopeEnlarger.EP_NAME.getExtensions()) {
        final SearchScope extra=enlarger.getAdditionalResolveScope(vFile,project);
        if (extra != null) {
          scope=scope.union(extra);
        }
      }
      return Result.create(scope,PsiModificationTracker.MODIFICATION_COUNT,ProjectRootManager.getInstance(project));
    }
  }
);
}
