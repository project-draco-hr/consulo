{
  myFileTypeManager=fileTypeManager;
  myManager=manager;
  myConnection=manager.getProject().getMessageBus().connect();
  myFileDocumentManager=fileDocumentManager;
  myProjectRootManager=projectRootManager;
  myConnection.subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    public void enteredDumbMode(){
      recalcAllViewProviders();
    }
    public void exitDumbMode(){
      recalcAllViewProviders();
    }
  }
);
  manager.registerRunnableToRunOnChange(new Runnable(){
    @Override public void run(){
      myDefaultResolveScopesCache.clear();
    }
  }
);
}
