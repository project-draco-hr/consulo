{
  for (  ProjectRootType type : ProjectRootType.ALL_TYPES) {
    read(element,type);
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      myFiles=new VirtualFile[ProjectRootType.ALL_TYPES.length][];
      for (int i=0; i < myFiles.length; i++) {
        CompositeProjectRoot root=myRoots[i];
        if (myNoCopyJars) {
          setNoCopyJars(root);
        }
        myFiles[i]=root.getVirtualFiles();
      }
    }
  }
);
  for (  ProjectRootType type : ProjectRootType.ALL_TYPES) {
    final VirtualFile[] newRoots=getRootFiles(type);
    final VirtualFile[] oldRoots=VirtualFile.EMPTY_ARRAY;
    if (!Comparing.equal(oldRoots,newRoots)) {
      fireRootsChanged(oldRoots,newRoots,type);
    }
  }
}
