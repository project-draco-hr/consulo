{
  for (int i=0; i < ProjectRootType.ALL_TYPES.length; i++) {
    read(element,ProjectRootType.ALL_TYPES[i]);
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      myFiles=new VirtualFile[ProjectRootType.ALL_TYPES.length][];
      for (int i=0; i < myFiles.length; i++) {
        CompositeProjectRoot root=myRoots[i];
        if (myNoCopyJars) {
          setNoCopyJars(root);
        }
        myFiles[i]=root.getVirtualFiles();
      }
    }
  }
);
  for (int i=0; i < ProjectRootType.ALL_TYPES.length; i++) {
    final VirtualFile[] newRoots=getRootFiles(ProjectRootType.ALL_TYPES[i]);
    final VirtualFile[] oldRoots=VirtualFile.EMPTY_ARRAY;
    if (!Comparing.equal(oldRoots,newRoots)) {
      fireRootsChanged(oldRoots,newRoots,ProjectRootType.ALL_TYPES[i]);
    }
  }
}
