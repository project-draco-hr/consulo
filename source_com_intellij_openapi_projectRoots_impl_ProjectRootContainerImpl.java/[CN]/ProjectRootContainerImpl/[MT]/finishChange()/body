{
  LOG.assertTrue(myInsideChange);
  VirtualFile[][] oldRoots=new VirtualFile[ProjectRootType.ALL_TYPES.length][];
  for (int i=0; i < oldRoots.length; i++) {
    oldRoots[i]=myFiles[i];
  }
  for (int i=0; i < ProjectRootType.ALL_TYPES.length; i++) {
    final VirtualFile[] roots=myRoots[i].getVirtualFiles();
    final boolean same=Comparing.equal(roots,oldRoots[i]);
    myFiles[i]=myRoots[i].getVirtualFiles();
    if (!same) {
      fireRootsChanged(oldRoots[i],myFiles[i],ProjectRootType.ALL_TYPES[i]);
    }
  }
  myInsideChange=false;
}
