{
  final Object object=aEvent.getAttachedObject();
  if (object instanceof PackagingElementDraggingObject) {
    final PackagingElementDraggingObject draggingObject=(PackagingElementDraggingObject)object;
    final PackagingElementNode<?> targetNode=draggingObject.getTargetNode();
    final CompositePackagingElement<?> targetElement=draggingObject.getTargetElement();
    if (targetElement == null || targetNode == null)     return;
    CompositePackagingElement<?> target=(CompositePackagingElement<?>)ensureRootIsWritable().fun(targetElement);
    if (target == null) {
      return;
    }
    List<PackagingElement<?>> toSelect=new ArrayList<PackagingElement<?>>();
    for (    PackagingSourceItem item : draggingObject.getSourceItems()) {
      final List<? extends PackagingElement<?>> elements=item.createElements();
      toSelect.addAll(elements);
      target.addChildren(elements);
    }
    updateAndSelect(targetNode,toSelect);
    myArtifactsEditor.getSourceItemsTree().rebuildTree();
  }
}
