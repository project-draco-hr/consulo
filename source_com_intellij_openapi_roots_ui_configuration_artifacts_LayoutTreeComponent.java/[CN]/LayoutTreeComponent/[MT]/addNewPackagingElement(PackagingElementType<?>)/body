{
  final PackagingElementNode<?> parentNode=getParentNode(myTree.getSelection());
  final PackagingElement<?> element=parentNode.getElementIfSingle();
  if (!checkCanAdd(type,element,parentNode))   return;
  ensureRootIsWritable();
  CompositePackagingElement<?> parent=element instanceof CompositePackagingElement<?> ? (CompositePackagingElement<?>)element : getArtifact().getRootElement();
  final List<? extends PackagingElement<?>> children=type.createWithDialog(myContext,getArtifact(),parent);
  for (  PackagingElement<?> child : children) {
    parent.addOrFindChild(child);
  }
  updateAndSelect(parentNode,children);
}
