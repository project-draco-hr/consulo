{
  myArtifactsEditor=artifactsEditor;
  mySubstitutionParameters=substitutionParameters;
  myContext=context;
  myOriginalArtifact=originalArtifact;
  myTree=new LayoutTree(myArtifactsEditor);
  myTreeStructure=new LayoutTreeStructure();
  myBuilder=new SimpleTreeBuilder(myTree,myTree.getBuilderModel(),myTreeStructure,getComparator());
  Disposer.register(this,myTree);
  Disposer.register(this,myBuilder);
  myTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      updatePropertiesPanel();
    }
  }
);
  createPropertiesPanel();
  myTreePanel=new JPanel(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myTree),BorderLayout.CENTER);
  myTreePanel.add(myPropertiesPanelWrapper,BorderLayout.SOUTH);
  DnDManager.getInstance().registerTarget(this,myTree);
}
