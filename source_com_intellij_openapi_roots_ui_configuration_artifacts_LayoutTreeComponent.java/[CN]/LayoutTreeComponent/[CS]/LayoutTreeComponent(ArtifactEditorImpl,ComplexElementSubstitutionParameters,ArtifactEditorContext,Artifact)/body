{
  myArtifactsEditor=artifactsEditor;
  mySubstitutionParameters=substitutionParameters;
  myContext=context;
  myOriginalArtifact=originalArtifact;
  myTree=new LayoutTree(myArtifactsEditor);
  myBuilder=new SimpleTreeBuilder(myTree,myTree.getBuilderModel(),new LayoutTreeStructure(),new WeightBasedComparator(true));
  Disposer.register(this,myTree);
  Disposer.register(this,myBuilder);
  myTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      updatePropertiesPanel();
    }
  }
);
  myPropertiesPanel=createPropertiesPanel();
  myTreePanel=new JPanel(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myTree),BorderLayout.CENTER);
  myTreePanel.add(myPropertiesPanel,BorderLayout.SOUTH);
  DnDManager.getInstance().registerTarget(this,myTree);
}
