{
  if (myPopup != null) {
    if (visible) {
      myPopup.show();
      final Window window=getPopupWindow();
      if (window != null && myRestoreWindowSize != null) {
        window.setSize(myRestoreWindowSize);
        myRestoreWindowSize=null;
      }
    }
 else {
      final Window window=getPopupWindow();
      if (window != null) {
        myRestoreWindowSize=window.getSize();
        window.setVisible(true);
      }
    }
  }
}
