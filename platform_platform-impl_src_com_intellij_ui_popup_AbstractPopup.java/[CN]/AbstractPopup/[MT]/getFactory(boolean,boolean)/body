{
  boolean noFocus=!myFocusable || !myRequestFocus;
  boolean cannotBeDialog=noFocus && SystemInfo.isLinux;
  if (!cannotBeDialog && (isPersistent() || forceDialog)) {
    return new PopupComponent.Factory.Dialog();
  }
 else   if (forceHeavyweight || !SystemInfo.isWindows) {
    return new PopupComponent.Factory.AwtHeavyweight();
  }
 else {
    return new PopupComponent.Factory.AwtDefault();
  }
}
