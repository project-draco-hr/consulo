{
  boolean noFocus=!myFocusable || !myRequestFocus;
  boolean cannotBeDialog=noFocus && SystemInfo.isLinux;
  if (!cannotBeDialog && (isPersistent() || forceDialog)) {
    return new PopupComponent.Factory.Dialog();
  }
  if (forceHeavyweight) {
    return new PopupComponent.Factory.AwtHeavyweight();
  }
  return new PopupComponent.Factory.AwtDefault();
}
