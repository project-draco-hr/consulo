{
  if (isPersistent() || forceDialog) {
    return new PopupComponent.Factory.Dialog();
  }
 else   if (forceHeavyweight || !SystemInfo.isWindows) {
    return new PopupComponent.Factory.AwtHeavyweight();
  }
 else {
    return new PopupComponent.Factory.AwtDefault();
  }
}
