{
  boolean thereIsCanceledIndicator=!threadsUnderCanceledIndicator.isEmpty();
  if (thereIsCanceledIndicator) {
    final ProgressIndicator progress=getProgressIndicator();
    if (progress != null) {
      try {
        progress.checkCanceled();
      }
 catch (      ProcessCanceledException e) {
        if (DISABLED) {
          return;
        }
        if (Thread.holdsLock(PsiLock.LOCK)) {
          ourLockedCheckCounter++;
          if (ourLockedCheckCounter > 10) {
            ourLockedCheckCounter=0;
          }
        }
 else {
          ourLockedCheckCounter=0;
          throw e;
        }
      }
    }
  }
}
