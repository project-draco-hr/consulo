{
  final AtomicReference<T> result=new AtomicReference<T>();
  final AtomicReference<Throwable> exception=new AtomicReference<Throwable>();
  runProcessWithProgressSynchronously(new Task.Modal(project,progressTitle,canBeCanceled){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      try {
        T compute=process.compute();
        result.set(compute);
      }
 catch (      Throwable t) {
        exception.set(t);
      }
    }
  }
,null);
  Throwable t=exception.get();
  if (t != null) {
    if (t instanceof Error)     throw (Error)t;
    if (t instanceof RuntimeException)     throw (RuntimeException)t;
    @SuppressWarnings("unchecked") E e=(E)t;
    throw e;
  }
  return result.get();
}
