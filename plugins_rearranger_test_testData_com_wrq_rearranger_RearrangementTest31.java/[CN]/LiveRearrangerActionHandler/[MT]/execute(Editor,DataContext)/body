{
  if (editor == null) {
    return;
  }
  final Project project=(Project)context.getData(DataConstants.PROJECT);
  logger.debug("project=" + project);
  logger.debug("editor=" + editor);
  final Document document=editor.getDocument();
  final CaretModel caret=editor.getCaretModel();
  int cursorOffset=caret.getOffset();
  final PsiFile psiFile=getFile(editor,context);
  if (!psiFile.getName().endsWith(".java")) {
    logger.debug("not a .java file -- skipping " + psiFile.getName());
    return;
  }
  if (!psiFile.isWritable()) {
    logger.debug("not a writable .java file -- skipping " + psiFile.getName());
    return;
  }
  logger.debug("inProgress=" + inProgress);
  if (inProgress) {
    return;
  }
  setInProgress(true);
  buildLiveRearrangerData(project,document,psiFile,cursorOffset);
}
