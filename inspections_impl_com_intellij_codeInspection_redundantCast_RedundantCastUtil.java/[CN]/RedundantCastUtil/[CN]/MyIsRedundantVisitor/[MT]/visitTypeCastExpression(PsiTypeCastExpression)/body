{
  PsiExpression operand=typeCast.getOperand();
  if (operand == null)   return;
  PsiElement expr=PsiUtil.deparenthesizeExpression(operand);
  if (expr instanceof PsiTypeCastExpression) {
    PsiTypeElement typeElement=((PsiTypeCastExpression)expr).getCastType();
    if (typeElement == null)     return;
    PsiType castType=typeElement.getType();
    if (!(castType instanceof PsiPrimitiveType)) {
      addToResults((PsiTypeCastExpression)expr);
    }
  }
 else {
    PsiElement parent=typeCast.getParent();
    if (parent instanceof PsiConditionalExpression) {
      if (typeCast.getManager().getEffectiveLanguageLevel().compareTo(LanguageLevel.JDK_1_5) < 0) {
        if (!Comparing.equal(operand.getType(),((PsiConditionalExpression)parent).getType()))         return;
      }
    }
    processAlreadyHasTypeCast(typeCast);
  }
}
