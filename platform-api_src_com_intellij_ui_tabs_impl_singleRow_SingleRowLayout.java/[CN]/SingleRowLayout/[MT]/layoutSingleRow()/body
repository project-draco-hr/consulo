{
  SingleRowPassInfo data=new SingleRowPassInfo(this);
  final TabInfo selected=myTabs.getSelectedInfo();
  final JBTabsImpl.Toolbar selectedToolbar=myTabs.myInfo2Toolbar.get(selected);
  final boolean layoutLabels=checkLayoutLabels();
  if (!layoutLabels) {
    data=myLastSingRowLayout;
  }
  data.insets=myTabs.getLayoutInsets();
  data.hToolbar=selectedToolbar != null && myTabs.myHorizontalSide && !selectedToolbar.isEmpty() ? selectedToolbar : null;
  data.vToolbar=selectedToolbar != null && !myTabs.myHorizontalSide && !selectedToolbar.isEmpty() ? selectedToolbar : null;
  myTabs.resetLayout(layoutLabels || myTabs.isHideTabs());
  if (layoutLabels && !myTabs.isHideTabs()) {
    data.position=getStrategy().getStartPosition(data);
    recomputeToLayout(data);
    layoutLabelsAndGhosts(data);
    if (data.toDrop.size() > 0) {
      data.moreRect=getStrategy().getMoreRect(data);
    }
  }
  if (selected != null) {
    data.comp=selected.getComponent();
    getStrategy().layoutComp(data);
  }
  if (data.toLayout.size() > 0 && myTabs.myVisibleInfos.size() > 0) {
    final int left=myTabs.myVisibleInfos.indexOf(data.toLayout.get(0));
    final int right=myTabs.myVisibleInfos.indexOf(data.toLayout.get(data.toLayout.size() - 1));
    myMoreIcon.setPaintedIcons(left > 0,right < myTabs.myVisibleInfos.size() - 1);
  }
 else {
    myMoreIcon.setPaintedIcons(false,false);
  }
  myLastSingRowLayout=data;
  return data;
}
