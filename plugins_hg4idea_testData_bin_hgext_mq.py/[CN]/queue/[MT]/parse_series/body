def parse_series(self):
    self.series = []
    self.series_guards = []
    for l in self.full_series:
        h = l.find('#')
        if (h == (-1)):
            patch = l
            comment = ''
        elif (h == 0):
            continue
        else:
            patch = l[:h]
            comment = l[h:]
        patch = patch.strip()
        if patch:
            if (patch in self.series):
                raise util.Abort((_('%s appears more than once in %s') % (patch, self.join(self.series_path))))
            self.series.append(patch)
            self.series_guards.append(self.guard_re.findall(comment))
