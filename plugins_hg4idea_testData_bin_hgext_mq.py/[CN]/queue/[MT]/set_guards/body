def set_guards(self, idx, guards):
    for g in guards:
        if (len(g) < 2):
            raise util.Abort((_('guard %r too short') % g))
        if (g[0] not in '-+'):
            raise util.Abort((_('guard %r starts with invalid char') % g))
        bad = self.check_guard(g[1:])
        if bad:
            raise util.Abort(bad)
    drop = self.guard_re.sub('', self.full_series[idx])
    self.full_series[idx] = (drop + ''.join([(' #' + g) for g in guards]))
    self.parse_series()
    self.series_dirty = True
