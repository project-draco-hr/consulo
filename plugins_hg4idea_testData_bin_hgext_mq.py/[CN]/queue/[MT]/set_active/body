def set_active(self, guards):
    for guard in guards:
        bad = self.check_guard(guard)
        if bad:
            raise util.Abort(bad)
    guards = sorted(set(guards))
    self.ui.debug(('active guards: %s\n' % ' '.join(guards)))
    self.active_guards = guards
    self.guards_dirty = True
