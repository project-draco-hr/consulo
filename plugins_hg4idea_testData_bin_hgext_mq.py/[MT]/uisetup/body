def uisetup(ui):
    mqopt = [('', 'mq', None, _('operate on patch repository'))]
    extensions.wrapcommand(commands.table, 'import', mqimport)
    entry = extensions.wrapcommand(commands.table, 'init', mqinit)
    entry[1].extend(mqopt)
    norepo = commands.norepo.split(' ')
    for cmd in commands.table.keys():
        cmd = cmdutil.parsealiases(cmd)[0]
        if (cmd in norepo):
            continue
        entry = extensions.wrapcommand(commands.table, cmd, mqcommand)
        entry[1].extend(mqopt)
