def restore(ui, repo, rev, **opts):
    'restore the queue state saved by a revision (DEPRECATED)\n\n    This command is deprecated, use rebase --mq instead.'
    rev = repo.lookup(rev)
    q = repo.mq
    q.restore(repo, rev, delete=opts['delete'], qupdate=opts['update'])
    q.save_dirty()
    return 0
