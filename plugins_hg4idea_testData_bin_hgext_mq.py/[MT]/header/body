def header(ui, repo, patch=None):
    'print the header of the topmost or specified patch'
    q = repo.mq
    if patch:
        patch = q.lookup(patch)
    else:
        if (not q.applied):
            ui.write(_('no patches applied\n'))
            return 1
        patch = q.lookup('qtip')
    ph = patchheader(q.join(patch), q.plainmode)
    ui.write(('\n'.join(ph.message) + '\n'))
