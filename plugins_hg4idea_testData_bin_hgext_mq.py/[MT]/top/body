def top(ui, repo, **opts):
    'print the name of the current patch'
    q = repo.mq
    t = ((q.applied and q.series_end(True)) or 0)
    if t:
        return q.qseries(repo, start=(t - 1), length=1, status='A', summary=opts.get('summary'))
    else:
        ui.write(_('no patches applied\n'))
        return 1
