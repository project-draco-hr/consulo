{
  boolean changesDetected=(myChanges.size() != myChangesBeforeUpdate.size());
  Change[] newChanges=myChanges.toArray(new Change[myChanges.size()]);
  for (int i=0; i < newChanges.length; i++) {
    Change oldChange=findOldChange(newChanges[i]);
    if (oldChange != null) {
      newChanges[i]=oldChange;
    }
 else {
      changesDetected=true;
    }
  }
  myChanges=new HashSet<Change>(Arrays.asList(newChanges));
  myOutdatedChanges=null;
  myReadChangesCache=null;
  myIsInUpdate=false;
  return changesDetected;
}
