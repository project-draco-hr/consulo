{
  final List<FilePath> result=new ArrayList<FilePath>();
  final Processor<VirtualFile> processor=new Processor<VirtualFile>(){
    public boolean process(    VirtualFile file){
      final boolean underCvs=CvsUtil.fileIsUnderCvs(file);
      if (underCvs) {
        result.add(new FilePathImpl(file));
      }
      return !underCvs;
    }
  }
;
  for (  FilePath root : roots) {
    final VirtualFile vf=root.getVirtualFile();
    if (vf == null)     continue;
    VfsUtil.processFilesRecursively(vf,processor);
  }
  return result.toArray(new FilePath[result.size()]);
}
