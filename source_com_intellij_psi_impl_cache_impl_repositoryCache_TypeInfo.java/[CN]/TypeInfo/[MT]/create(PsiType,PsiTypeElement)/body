{
  final boolean isEllipsis=type instanceof PsiEllipsisType;
  int arrayCount=type.getArrayDimensions();
  while (typeElement.getFirstChild() instanceof PsiTypeElement) {
    typeElement=(PsiTypeElement)typeElement.getFirstChild();
  }
  String text=typeElement instanceof PsiCompiledElement ? ((ClsTypeElementImpl)typeElement).getCanonicalText() : typeElement.getText();
  TypeInfo result=new TypeInfo();
  result.text=text;
  result.arrayCount=(byte)arrayCount;
  result.isEllipsis=isEllipsis;
  return result;
}
