{
  final Semaphore targetDone=new Semaphore();
  final Ref<Boolean> result=new Ref<Boolean>(false);
  try {
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      @Override public void run(){
        targetDone.down();
        boolean runToolResult=ToolAction.runTool(myToolActionId,context,null,executionId,new ProcessAdapter(){
          @Override public void processTerminated(          ProcessEvent event){
            result.set(event.getExitCode() == 0);
            targetDone.up();
          }
        }
);
        if (!runToolResult) {
          result.set(false);
          targetDone.up();
        }
      }
    }
,ModalityState.NON_MODAL);
  }
 catch (  Exception e) {
    LOG.error(e);
    return false;
  }
  targetDone.waitFor();
  return result.get();
}
