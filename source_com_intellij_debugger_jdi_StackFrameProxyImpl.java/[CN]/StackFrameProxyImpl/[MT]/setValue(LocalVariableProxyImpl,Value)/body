{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  try {
    final LocalVariable variable=localVariable.getVariable();
    final StackFrame stackFrame=getStackFrame();
    stackFrame.setValue(variable,(value instanceof ObjectReference) ? ObjectReferenceCachingProxy.unwrap(((ObjectReference)value)) : value);
    if (myAllValues != null) {
      myAllValues.put(variable,stackFrame.getValue(variable));
    }
  }
 catch (  InvalidStackFrameException e) {
    clearCaches();
    setValue(localVariable,value);
  }
}
