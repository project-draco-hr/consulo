{
  if (info.isUseAnySingleVariable()) {
    final PsiResolveHelper resolveHelper=JavaPsiFacade.getInstance(list.getProject()).getResolveHelper();
    final PsiType type=info.getTypeWrapper().getType(changeInfo.getMethod(),list.getManager());
    final VariablesProcessor processor=new VariablesProcessor(false){
      protected boolean check(      PsiVariable var,      ResolveState state){
        if (var instanceof PsiField && !resolveHelper.isAccessible((PsiField)var,list,null))         return false;
        if (var instanceof GrVariable && GroovyRefactoringUtil.isLocalVariable(var) && list.getTextRange().getStartOffset() <= var.getTextRange().getStartOffset()) {
          return false;
        }
        if (PsiTreeUtil.isAncestor(var,list,false))         return false;
        final PsiType _type=var instanceof GrVariable ? ((GrVariable)var).getTypeGroovy() : var.getType();
        final PsiType varType=state.get(PsiSubstitutor.KEY).substitute(_type);
        return type.isAssignableFrom(varType);
      }
      public boolean execute(      PsiElement pe,      ResolveState state){
        super.execute(pe,state);
        return size() < 2;
      }
    }
;
    ResolveUtil.treeWalkUp(list,processor,false);
    if (processor.size() == 1) {
      final PsiVariable result=processor.getResult(0);
      return factory.createExpressionFromText(result.getName(),list);
    }
    if (processor.size() == 0) {
      final PsiClass parentClass=PsiTreeUtil.getParentOfType(list,PsiClass.class);
      if (parentClass != null) {
        PsiClass containingClass=parentClass;
        final Set<PsiClass> containingClasses=new HashSet<PsiClass>();
        final PsiElementFactory jfactory=JavaPsiFacade.getElementFactory(list.getProject());
        while (containingClass != null) {
          if (type.isAssignableFrom(jfactory.createType(containingClass,PsiSubstitutor.EMPTY))) {
            containingClasses.add(containingClass);
          }
          containingClass=PsiTreeUtil.getParentOfType(containingClass,PsiClass.class);
        }
        if (containingClasses.size() == 1) {
          return factory.createThisExpression(parentClass.getManager(),containingClasses.contains(parentClass) ? null : containingClasses.iterator().next());
        }
      }
    }
  }
  final String value=info.getDefaultValue();
  return !StringUtil.isEmpty(value) ? factory.createExpressionFromText(value,list) : null;
}
