{
  final Module contextModule=ModuleUtil.findModuleForPsiElement(exp);
  if (contextModule == null) {
    return;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(contextModule);
  if (facet == null) {
    return;
  }
  final Manifest manifest=facet.getManifest();
  if (manifest == null) {
    return;
  }
  final String aPackage=manifest.getPackage().getValue();
  if (aPackage == null) {
    return;
  }
  final PsiFile contextFile=exp.getContainingFile();
  if (contextFile == null) {
    return;
  }
  Pair<String,String> pair=AndroidResourceUtil.getReferredResourceField(facet,exp);
  if (pair == null) {
    final PsiElement parent=exp.getParent();
    if (parent instanceof PsiReferenceExpression) {
      pair=AndroidResourceUtil.getReferredResourceField(facet,(PsiReferenceExpression)parent);
    }
  }
  if (pair == null) {
    return;
  }
  final String resClassName=pair.getFirst();
  final String resFieldName=pair.getSecond();
  ResourceType resourceType=ResourceType.getEnum(resClassName);
  if (AndroidResourceUtil.ALL_VALUE_RESOURCE_TYPES.contains(resourceType)) {
    registrar.register(new CreateValueResourceQuickFix(facet,resourceType,resFieldName,contextFile,true));
  }
  if (AndroidResourceUtil.XML_FILE_RESOURCE_TYPES.contains(resourceType)) {
    registrar.register(new CreateFileResourceQuickFix(facet,resourceType,resFieldName,contextFile,true));
  }
}
