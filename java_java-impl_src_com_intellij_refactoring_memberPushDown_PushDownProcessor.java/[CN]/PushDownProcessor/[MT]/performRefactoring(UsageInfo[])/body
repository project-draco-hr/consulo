{
  try {
    encodeRefs();
    if (myCreateClassDlg != null) {
      final PsiClass psiClass=CreateSubclassAction.createSubclass(myClass,myCreateClassDlg.getTargetDirectory(),myCreateClassDlg.getClassName());
      if (psiClass != null) {
        pushDownToClass(psiClass);
      }
    }
    for (    UsageInfo usage : usages) {
      if (usage.getElement() instanceof PsiClass) {
        final PsiClass targetClass=(PsiClass)usage.getElement();
        pushDownToClass(targetClass);
      }
    }
    removeFromTargetClass();
  }
 catch (  IncorrectOperationException e) {
    LOG.assertTrue(false);
  }
}
