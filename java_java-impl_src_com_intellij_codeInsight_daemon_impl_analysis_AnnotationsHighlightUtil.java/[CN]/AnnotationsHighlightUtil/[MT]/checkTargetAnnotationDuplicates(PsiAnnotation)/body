{
  PsiJavaCodeReferenceElement nameRef=annotation.getNameReferenceElement();
  if (nameRef == null)   return null;
  PsiElement resolved=nameRef.resolve();
  if (!(resolved instanceof PsiClass) || !CommonClassNames.TARGET_ANNOTATION_FQ_NAME.equals(((PsiClass)resolved).getQualifiedName()))   return null;
  PsiNameValuePair[] attributes=annotation.getParameterList().getAttributes();
  if (attributes.length < 1)   return null;
  PsiAnnotationMemberValue value=attributes[0].getValue();
  if (!(value instanceof PsiArrayInitializerMemberValue))   return null;
  PsiAnnotationMemberValue[] arrayInitializers=((PsiArrayInitializerMemberValue)value).getInitializers();
  Set<PsiElement> targets=new HashSet<PsiElement>();
  for (  PsiAnnotationMemberValue initializer : arrayInitializers) {
    if (initializer instanceof PsiReferenceExpression) {
      PsiElement target=((PsiReferenceExpression)initializer).resolve();
      if (target != null) {
        if (targets.contains(target)) {
          return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,initializer,JavaErrorMessages.message("repeated.annotation.target"));
        }
        targets.add(target);
      }
    }
  }
  return null;
}
