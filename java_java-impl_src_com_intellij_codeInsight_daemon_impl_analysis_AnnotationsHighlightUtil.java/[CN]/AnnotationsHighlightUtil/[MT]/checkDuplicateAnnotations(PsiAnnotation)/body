{
  PsiAnnotationOwner owner=annotationToCheck.getOwner();
  if (owner == null)   return null;
  PsiJavaCodeReferenceElement element=annotationToCheck.getNameReferenceElement();
  if (element == null)   return null;
  PsiElement resolved=element.resolve();
  if (!(resolved instanceof PsiClass))   return null;
  for (  PsiAnnotation annotation : owner.getAnnotations()) {
    if (annotation == annotationToCheck)     continue;
    PsiJavaCodeReferenceElement nameRef=annotation.getNameReferenceElement();
    if (nameRef == null)     continue;
    PsiElement aClass=nameRef.resolve();
    if (resolved.equals(aClass)) {
      String description=JavaErrorMessages.message("annotation.duplicate.annotation");
      return HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(element).descriptionAndTooltip(description).create();
    }
  }
  return null;
}
