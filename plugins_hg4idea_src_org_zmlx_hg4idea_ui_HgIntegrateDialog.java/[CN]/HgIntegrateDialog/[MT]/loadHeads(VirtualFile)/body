{
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      final List<HgRevisionNumber> heads=new HgHeadsCommand(project,root).execute();
      if (heads.size() != 2) {
        disableOtherHeadsChoice();
        return;
      }
      HgRevisionNumber currentParent=new HgWorkingCopyRevisionsCommand(project).identify(root).getFirst();
      for (Iterator<HgRevisionNumber> it=heads.iterator(); it.hasNext(); ) {
        final HgRevisionNumber rev=it.next();
        if (rev.getRevisionNumber().equals(currentParent.getRevisionNumber())) {
          it.remove();
        }
      }
      if (heads.size() == 1) {
        UIUtil.invokeLaterIfNeeded(new Runnable(){
          @Override public void run(){
            otherHeadRadioButton.setVisible(true);
            otherHeadLabel.setVisible(true);
            otherHead=heads.get(0);
            otherHeadLabel.setText(HgVcsMessages.message("hg4idea.integrate.other.head",otherHead.asString()));
          }
        }
);
      }
 else {
        disableOtherHeadsChoice();
      }
    }
  }
);
}
