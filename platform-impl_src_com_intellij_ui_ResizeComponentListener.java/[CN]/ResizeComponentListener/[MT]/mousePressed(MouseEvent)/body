{
  final Window popupWindow=SwingUtilities.windowForComponent(myComponent);
  if (popupWindow != null) {
    myStartPoint=new RelativePoint(e).getScreenPoint();
    myDirection=getDirection(myStartPoint,popupWindow.getBounds());
    if (myDirection == Cursor.DEFAULT_CURSOR) {
      myStartPoint=null;
    }
 else {
      if (!SystemInfo.isMac) {
        myComponent.setBorder(BorderFactory.createMatteBorder(2,2,2,2,Color.black.brighter()));
      }
      UIUtil.setEnabled(myComponent,false,true);
    }
  }
}
