{
  final ApplicationEx app=(ApplicationEx)ApplicationManager.getApplication();
  if (app == null || app.isHeadlessEnvironment() || !app.isInternal())   return;
  if (!SwingUtilities.isEventDispatchThread() && c.isShowing()) {
    Exception exception=new Exception();
    boolean repaint=false;
    boolean fromSwing=false;
    StackTraceElement[] stackTrace=exception.getStackTrace();
    for (    StackTraceElement st : stackTrace) {
      if (repaint && st.getClassName().startsWith("javax.swing.")) {
        fromSwing=true;
      }
      if ("repaint".equals(st.getMethodName())) {
        repaint=true;
      }
    }
    if (repaint && !fromSwing) {
      return;
    }
    LOG.warn("Access to realized UI components should be done only from AWT event dispatch thread, revalidate() and repaint() is ok from any thread",exception);
  }
}
