{
  if (status.isSwitched() || parentStatus == FileStatus.SWITCHED) {
    final VirtualFile virtualFile=filePath.getVirtualFile();
    if (virtualFile == null)     return;
    final String switchUrl=status.getURL().toString();
    final VirtualFile vcsRoot=ProjectLevelVcsManager.getInstance(myVcs.getProject()).getVcsRootFor(virtualFile);
    LOG.assertTrue(vcsRoot != null,"couldn't find VCS root for virtual file " + virtualFile);
    String baseUrl=null;
    try {
      baseUrl=myBranchConfigurationManager.get(vcsRoot).getBaseName(switchUrl);
    }
 catch (    VcsException e) {
      LOG.error(e);
    }
    builder.processSwitchedFile(virtualFile,baseUrl == null ? switchUrl : baseUrl,true);
  }
}
