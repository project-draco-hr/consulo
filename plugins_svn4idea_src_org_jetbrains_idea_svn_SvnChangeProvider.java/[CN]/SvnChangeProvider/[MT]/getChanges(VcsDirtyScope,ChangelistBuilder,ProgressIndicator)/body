{
  try {
    final SvnChangeProviderContext context=new SvnChangeProviderContext(myVcs,builder,progress);
    for (    FilePath path : dirtyScope.getRecursivelyDirtyDirectories()) {
      processFile(path,context,null,true,context.getClient());
    }
    for (    FilePath path : dirtyScope.getDirtyFiles()) {
      FileStatus status=getParentStatus(context,path);
      processFile(path,context,status,false,context.getClient());
    }
    for (    SvnChangedFile copiedFile : context.getCopiedFiles()) {
      if (context.isCanceled()) {
        throw new ProcessCanceledException();
      }
      processCopiedFile(copiedFile,builder,context);
    }
    for (    SvnChangedFile deletedFile : context.getDeletedFiles()) {
      if (context.isCanceled()) {
        throw new ProcessCanceledException();
      }
      processStatus(deletedFile.getFilePath(),deletedFile.getStatus(),builder,null);
    }
  }
 catch (  SVNException e) {
    throw new VcsException(e);
  }
}
