{
  inputString=StringUtil.convertLineSeparators(inputString);
  expected=StringUtil.convertLineSeparators(expected);
  final String result=FileTemplateUtil.mergeTemplate(properties,inputString,false);
  assertEquals(expected,result);
  List attrs=Arrays.asList(FileTemplateUtil.calculateAttributes(inputString,new Properties(),false));
  assertTrue(properties.size() <= attrs.size());
  Enumeration e=properties.propertyNames();
  while (e.hasMoreElements()) {
    String s=(String)e.nextElement();
    assertTrue("Attribute '" + s + "' not found in properties",attrs.contains(s));
  }
}
