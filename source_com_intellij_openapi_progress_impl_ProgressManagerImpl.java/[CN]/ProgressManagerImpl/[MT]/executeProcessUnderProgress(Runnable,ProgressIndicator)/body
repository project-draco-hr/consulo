{
  Thread currentThread=Thread.currentThread();
  ProgressIndicator oldIndicator;
  if (progress == null) {
    oldIndicator=myThreadToIndicatorMap.remove(currentThread);
  }
 else {
    oldIndicator=myThreadToIndicatorMap.put(currentThread,progress);
  }
  try {
    process.run();
  }
  finally {
    if (oldIndicator == null) {
      myThreadToIndicatorMap.remove(currentThread);
    }
 else {
      myThreadToIndicatorMap.put(currentThread,oldIndicator);
    }
  }
}
