{
  myProgress.setText("Rolling back...");
  for (  VirtualFile root : startedRoots) {
    myProgress.setText2(root.getPath());
    startedRoots.add(root);
    GitLineHandler h=new GitLineHandler(myProject,root,GitCommand.CHECKOUT);
    h.setNoSSH(true);
    h.addParameters("-f",myDescribedRoots.get(root));
    Collection<VcsException> exceptions=GitHandlerUtil.doSynchronouslyWithExceptions(h,myProgress,h.printableCommandLine());
    myExceptions.addAll(exceptions);
  }
  ArrayList<VirtualFile> newRoots=new ArrayList<VirtualFile>();
  loop:   for (  VirtualFile root : startedRoots) {
    for (    VirtualFile other : startedRoots) {
      if (other != root && VfsUtil.isAncestor(other,root,true)) {
        continue loop;
      }
    }
    newRoots.add(root);
  }
  for (  VirtualFile root : newRoots) {
    root.refresh(false,true);
  }
  myProgress.setText2("");
}
