{
  final JComboBox combo=getComboBox();
  myProject=project;
  addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      NamedScope scope=(NamedScope)combo.getSelectedItem();
      ScopeChooserDialog dlg=new ScopeChooserDialog(myProject,DependencyValidationManager.getInstance(project));
      if (scope != null) {
        dlg.setSelectedScope(scope.getName());
      }
      dlg.show();
      rebuild();
      selectScope(dlg.getSelectedScope());
    }
  }
);
  combo.setRenderer(new DefaultListCellRenderer(){
    public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      super.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      setText(value == null ? "" : ((NamedScope)value).getName());
      return this;
    }
  }
);
  rebuild();
  selectScope(preselect);
}
