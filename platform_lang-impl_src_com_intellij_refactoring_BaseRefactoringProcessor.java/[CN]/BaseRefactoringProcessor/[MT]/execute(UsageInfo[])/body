{
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    @Override public void run(){
      Collection<UsageInfo> usageInfos=new LinkedHashSet<UsageInfo>(Arrays.asList(usages));
      doRefactoring(usageInfos);
      if (isGlobalUndoAction())       CommandProcessor.getInstance().markCurrentCommandAsGlobal(myProject);
    }
  }
,getCommandName(),null,getUndoConfirmationPolicy());
}
