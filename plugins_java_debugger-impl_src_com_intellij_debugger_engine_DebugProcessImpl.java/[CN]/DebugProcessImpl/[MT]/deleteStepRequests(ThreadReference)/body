{
  EventRequestManager requestManager=getVirtualMachineProxy().eventRequestManager();
  List<StepRequest> stepRequests=requestManager.stepRequests();
  if (!stepRequests.isEmpty()) {
    final List<StepRequest> toDelete=new ArrayList<StepRequest>(stepRequests.size());
    for (    final StepRequest request : stepRequests) {
      ThreadReference threadReference=request.thread();
      if (threadReference.status() != ThreadReference.THREAD_STATUS_UNKNOWN && (stepThread == null || stepThread.equals(threadReference))) {
        toDelete.add(request);
      }
    }
    requestManager.deleteEventRequests(toDelete);
  }
}
