{
  VirtualFile ourVirtualFile=getVirtualFile();
  if (ourVirtualFile == null) {
    return super.getChildrenImpl();
  }
  BackgroundTaskByVfsChangeManager vfsChangeManager=BackgroundTaskByVfsChangeManager.getInstance(getProject());
  BackgroundTaskByVfsChangeTask task=vfsChangeManager.getTask(ourVirtualFile);
  if (task == null) {
    return super.getChildrenImpl();
  }
  VirtualFile[] generatedFiles=task.getGeneratedFiles();
  if (generatedFiles.length == 0) {
    return super.getChildrenImpl();
  }
  PsiFile[] psiFiles=PsiUtilBase.virtualToPsiFiles(generatedFiles,myProject);
  List<AbstractTreeNode> newChildren=new ArrayList<AbstractTreeNode>(psiFiles.length);
  for (  PsiFile psiFile : psiFiles) {
    newChildren.add(new PsiFileNode(getProject(),psiFile,getSettings()));
  }
  return newChildren;
}
