{
  if (myRunnable == null)   return;
  final PasswordSafeImpl passwordSafe=(PasswordSafeImpl)PasswordSafe.getInstance();
  if (passwordSafe.getSettings().getProviderType().equals(PasswordSafeSettings.ProviderType.DO_NOT_STORE)) {
    return;
  }
  final String key=keyForUrlAndLogin(myRunnable.getURL(),myRunnable.getUserName());
  final PasswordSafeProvider provider=myRunnable.isRememberPassword() ? passwordSafe.getMasterKeyProvider() : passwordSafe.getMemoryProvider();
  try {
    provider.storePassword(myProject,HgCommandAuthenticator.class,key,myRunnable.getPassword());
    final HgVcs vcs=HgVcs.getInstance(myProject);
    if (vcs != null) {
      vcs.getGlobalSettings().addRememberedUrl(myRunnable.getURL(),myRunnable.getUserName());
    }
  }
 catch (  PasswordSafeException e) {
    LOG.info("Couldn't store the password for key [" + key + "]",e);
  }
}
