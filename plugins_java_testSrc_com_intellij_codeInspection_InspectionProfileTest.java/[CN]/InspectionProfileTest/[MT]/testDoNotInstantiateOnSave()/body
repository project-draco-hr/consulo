{
  InspectionProfileImpl profile=new InspectionProfileImpl("profile");
  profile.setBaseProfile(InspectionProfileImpl.getDefaultProfile());
  assertEquals(0,countInitializedTools(profile));
  InspectionToolWrapper[] toolWrappers=profile.getInspectionTools(null);
  assertTrue(toolWrappers.length > 0);
  InspectionToolWrapper toolWrapper=profile.getInspectionTool(new DataFlowInspection().getShortName(),getProject());
  assertNotNull(toolWrapper);
  String id=toolWrapper.getShortName();
  System.out.println(id);
  if (profile.isToolEnabled(HighlightDisplayKey.findById(id))) {
    profile.disableTool(id,getProject());
  }
 else {
    profile.enableTool(id,getProject());
  }
  assertEquals(0,countInitializedTools(profile));
  profile.writeExternal(new Element("profile"));
  List<InspectionToolWrapper> initializedTools=getInitializedTools(profile);
  if (initializedTools.size() != 1) {
    for (    InspectionToolWrapper initializedTool : initializedTools) {
      System.out.println(initializedTool.getShortName());
    }
    fail();
  }
}
