{
  if (project == null || virtualFile == null) {
    return LanguageLevel.HIGHEST;
  }
  final Module moduleForPsiElement=ModuleUtilCore.findModuleForFile(virtualFile,project);
  if (moduleForPsiElement == null) {
    return LanguageLevel.HIGHEST;
  }
  final JavaModuleExtension extension=ModuleUtilCore.getExtension(moduleForPsiElement,JavaModuleExtension.class);
  if (extension == null) {
    return LanguageLevel.HIGHEST;
  }
  return extension.getLanguageLevel();
}
