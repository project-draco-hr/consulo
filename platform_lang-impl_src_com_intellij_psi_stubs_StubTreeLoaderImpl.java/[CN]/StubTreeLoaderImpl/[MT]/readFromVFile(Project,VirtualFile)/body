{
  if (DumbService.getInstance(project).isDumb()) {
    return null;
  }
  final int id=Math.abs(FileBasedIndex.getFileId(vFile));
  if (id <= 0) {
    return null;
  }
  final List<SerializedStubTree> datas=FileBasedIndex.getInstance().getValues(StubUpdatingIndex.INDEX_ID,id,GlobalSearchScope.fileScope(project,vFile));
  final int size=datas.size();
  if (size == 1) {
    Stub stub;
    try {
      stub=datas.get(0).getStub(false);
    }
 catch (    SerializerNotFoundException e) {
      return processError(vFile,"No stub serializer: " + vFile.getPresentableUrl() + ": "+ e.getMessage(),e);
    }
    return stub instanceof PsiFileStub ? new StubTree((PsiFileStub)stub) : new ObjectStubTree((ObjectStubBase)stub,true);
  }
 else   if (size != 0) {
    return processError(vFile,"Twin stubs: " + vFile.getPresentableUrl() + " has "+ size+ " stub versions. Should only have one. id="+ id,null);
  }
  return null;
}
