{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          for (          final Module module : modules) {
            GradleUtil.executeProjectChangeAction(module.getProject(),module,new Runnable(){
              @Override public void run(){
                ModuleManager moduleManager=ModuleManager.getInstance(module.getProject());
                String path=module.getModuleFilePath();
                moduleManager.disposeModule(module);
                File file=new File(path);
                if (file.isFile()) {
                  boolean success=file.delete();
                  if (!success) {
                    GradleLog.LOG.warn("Can't remove module file at '" + path + "'");
                  }
                }
              }
            }
);
          }
        }
      }
);
    }
  }
);
}
