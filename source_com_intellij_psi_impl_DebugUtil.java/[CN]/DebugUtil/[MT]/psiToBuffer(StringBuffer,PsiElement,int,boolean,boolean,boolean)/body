{
  if (skipWhiteSpaces && root instanceof PsiWhiteSpace)   return;
  for (int i=0; i < indent; i++) {
    buffer.append(' ');
  }
  final String rootStr=root.toString();
  buffer.append(rootStr);
  PsiElement child=root.getFirstChild();
  if (child == null) {
    String text=root.getText();
    text=StringUtil.replace(text,"\n","\\n");
    text=StringUtil.replace(text,"\r","\\r");
    text=StringUtil.replace(text,"\t","\\t");
    buffer.append("('");
    buffer.append(text);
    buffer.append("')");
  }
  if (showRanges)   buffer.append(root.getTextRange());
  buffer.append("\n");
  while (child != null) {
    psiToBuffer(buffer,child,indent + 2,skipWhiteSpaces,showChildrenRanges,showChildrenRanges);
    child=child.getNextSibling();
  }
}
