{
  try {
    try {
      return Class.forName(className).newInstance();
    }
 catch (    ClassNotFoundException e) {
      for (      IdeaPluginDescriptor descriptor : PluginManager.getPlugins()) {
        try {
          return descriptor.getPluginClassLoader().loadClass(className).newInstance();
        }
 catch (        ClassNotFoundException ignored) {
        }
      }
      throw new RuntimeException("Class not found: " + className);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
