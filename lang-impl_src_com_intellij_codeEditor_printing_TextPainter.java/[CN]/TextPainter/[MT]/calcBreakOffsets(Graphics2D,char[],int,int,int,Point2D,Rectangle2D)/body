{
  IntArrayList breakOffsets=new IntArrayList();
  int nextOffset=offset;
  double x=position.getX();
  while (true) {
    int prevOffset=nextOffset;
    nextOffset=calcWordBreakOffset(g,text,nextOffset,endOffset,x,clip);
    if (nextOffset == offset || nextOffset == prevOffset && colNumber == 0) {
      nextOffset=calcCharBreakOffset(g,text,nextOffset,endOffset,x,clip);
      if (nextOffset == prevOffset) {
        return breakOffsets;
      }
    }
    if (nextOffset >= endOffset) {
      break;
    }
    breakOffsets.add(nextOffset);
    colNumber=0;
    x=0;
  }
  return breakOffsets;
}
