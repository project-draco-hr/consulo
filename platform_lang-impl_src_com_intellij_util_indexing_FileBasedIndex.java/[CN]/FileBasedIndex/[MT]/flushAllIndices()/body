{
  if (flushRunning || HeavyProcessLatch.INSTANCE.isRunning())   return;
  flushRunning=true;
  try {
    IndexingStamp.flushCache();
    for (    ID<?,?> indexId : new ArrayList<ID<?,?>>(myIndices.keySet())) {
      if (HeavyProcessLatch.INSTANCE.isRunning()) {
        return;
      }
      try {
        final UpdatableIndex<?,?,FileContent> index=getIndex(indexId);
        if (index != null) {
          index.flush();
        }
      }
 catch (      StorageException e) {
        LOG.info(e);
        requestRebuild(indexId);
      }
    }
  }
  finally {
    flushRunning=false;
  }
}
