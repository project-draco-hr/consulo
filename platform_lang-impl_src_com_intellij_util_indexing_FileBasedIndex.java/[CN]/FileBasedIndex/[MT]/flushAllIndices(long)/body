{
  if (HeavyProcessLatch.INSTANCE.isRunning()) {
    return;
  }
  IndexingStamp.flushCache();
  for (  ID<?,?> indexId : new ArrayList<ID<?,?>>(myIndices.keySet())) {
    if (HeavyProcessLatch.INSTANCE.isRunning() || modCount != myLocalModCount) {
      return;
    }
    try {
      final UpdatableIndex<?,?,FileContent> index=getIndex(indexId);
      if (index != null) {
        index.flush();
      }
    }
 catch (    StorageException e) {
      LOG.info(e);
      requestRebuild(indexId);
    }
  }
  if (!HeavyProcessLatch.INSTANCE.isRunning() && modCount == myLocalModCount) {
    SerializationManager.getInstance().flushNameStorage();
  }
}
