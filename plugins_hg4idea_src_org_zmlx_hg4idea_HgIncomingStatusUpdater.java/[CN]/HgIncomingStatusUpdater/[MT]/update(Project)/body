{
  if (!projectSettings.isCheckIncoming()) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      new Task.Backgroundable(project,"Checking Incoming Changesets",true){
        public void run(        @NotNull ProgressIndicator indicator){
          HgIncomingCommand command=new HgIncomingCommand(project);
          VcsRoot[] roots=ProjectLevelVcsManager.getInstance(project).getAllVcsRoots();
          List<HgFileRevision> changesets=new LinkedList<HgFileRevision>();
          for (          VcsRoot root : roots) {
            HgFile hgFile=new HgFile(root.path,new File("."));
            changesets.addAll(command.execute(hgFile,LIMIT - changesets.size()));
          }
          status.setChanges(changesets.size(),new IncomingChangesetFormatter(changesets));
        }
      }
.queue();
    }
  }
);
}
