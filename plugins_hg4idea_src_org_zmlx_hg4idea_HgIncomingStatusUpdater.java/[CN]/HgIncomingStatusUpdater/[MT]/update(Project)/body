{
  if (!projectSettings.isCheckIncoming()) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      new Task.Backgroundable(project,"Checking Incoming Changesets",true){
        public void run(        @NotNull ProgressIndicator indicator){
          HgIncomingCommand command=new HgIncomingCommand(project);
          VcsRoot[] roots=ProjectLevelVcsManager.getInstance(project).getAllVcsRoots();
          List<HgRevisionNumber> changesets=new LinkedList<HgRevisionNumber>();
          for (          VcsRoot root : roots) {
            changesets.addAll(command.execute(root.path));
          }
          status.setChanges(changesets.size(),new IncomingChangesetFormatter(changesets));
        }
      }
.queue();
    }
  }
);
}
