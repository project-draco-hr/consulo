{
  myLock.writeLock().lock();
  try {
    final Map<PsiElement,RefElement> refTable=getRefTable();
    if (refElem instanceof RefMethod) {
      RefMethod refMethod=(RefMethod)refElem;
      RefParameter[] params=refMethod.getParameters();
      for (      RefParameter param : params) {
        removeReference(param);
      }
    }
    if (refTable.remove(refElem.getElement()) != null)     return;
    for (    PsiElement psiElement : refTable.keySet()) {
      if (refTable.get(psiElement) == refElem) {
        refTable.remove(psiElement);
        return;
      }
    }
  }
  finally {
    myLock.writeLock().unlock();
  }
}
