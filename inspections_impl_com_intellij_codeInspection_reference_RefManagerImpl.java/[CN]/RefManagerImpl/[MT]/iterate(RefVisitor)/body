{
  myLock.readLock().lock();
  try {
    final Map<PsiElement,RefElement> refTable=getRefTable();
    for (    RefElement refElement : refTable.values()) {
      refElement.accept(visitor);
      if (refElement instanceof RefClass) {
        RefClass refClass=(RefClass)refElement;
        RefMethod refDefaultConstructor=refClass.getDefaultConstructor();
        if (refDefaultConstructor instanceof RefImplicitConstructor) {
          refClass.getDefaultConstructor().accept(visitor);
        }
      }
    }
    if (myModules != null) {
      for (      RefModule refModule : myModules.values()) {
        refModule.accept(visitor);
      }
    }
    if (myPackages != null) {
      for (      RefPackage refPackage : myPackages.values()) {
        refPackage.accept(visitor);
      }
    }
  }
  finally {
    myLock.readLock().unlock();
  }
}
