{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      Collection<VirtualFile> filesToRefresh=new THashSet<VirtualFile>(getAllPropertiesFiles());
      Editor[] editors=EditorFactory.getInstance().getAllEditors();
      for (      Editor editor : editors) {
        VirtualFile virtualFile=FileDocumentManager.getInstance().getFile(editor.getDocument());
        if (virtualFile == null || virtualFile instanceof LightVirtualFile)         continue;
        FileType fileType=myFileTypeManager.getFileTypeByFile(virtualFile);
        if (fileType == StdFileTypes.PROPERTIES) {
          virtualFile.getFileSystem().forceRefreshFiles(false,virtualFile);
          filesToRefresh.remove(virtualFile);
        }
      }
      VirtualFile[] virtualFiles=filesToRefresh.toArray(new VirtualFile[filesToRefresh.size()]);
      LocalFileSystem.getInstance().forceRefreshFiles(true,virtualFiles);
    }
  }
);
}
