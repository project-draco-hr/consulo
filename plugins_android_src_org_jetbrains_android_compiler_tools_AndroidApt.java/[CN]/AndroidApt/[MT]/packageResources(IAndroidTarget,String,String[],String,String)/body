{
  List<String> args=new ArrayList<String>();
  Collections.addAll(args,target.getPath(IAndroidTarget.AAPT),"package","-f","-M",manifestPath);
  if (resourceDirs.length > 1) {
    args.add("--auto-add-overlay");
  }
  for (  String resourceDir : resourceDirs) {
    args.add("-S");
    args.add(resourceDir);
  }
  if (assetsDir != null) {
    Collections.addAll(args,"-A",assetsDir);
  }
  Collections.addAll(args,"-I",target.getPath(IAndroidTarget.ANDROID_JAR),"-F",outputPath);
  return ExecutionUtil.execute(ArrayUtil.toStringArray(args));
}
