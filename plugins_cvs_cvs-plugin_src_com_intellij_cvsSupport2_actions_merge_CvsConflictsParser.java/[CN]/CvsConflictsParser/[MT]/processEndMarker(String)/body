{
  final int idx=line.lastIndexOf(END);
  if (idx < 0) {
    return false;
  }
  if (!myStateStack.isEmpty()) {
    if (myStateStack.size() > 1) {
      appendToMainOrCurrent(line);
    }
 else {
      final String fragment=line.substring(0,idx);
      if (!fragment.isEmpty()) {
        appendToMainOrCurrent(fragment);
      }
    }
    myStateStack.pop();
  }
 else {
    appendToMainOrCurrent(line);
  }
  return true;
}
