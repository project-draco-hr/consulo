{
  id2ValueMap=new TIntObjectHashMap<Value>();
  valueContainer=_valueContainer;
  TIntArrayList removedFileIdList=null;
  List<Value> removedValueList=null;
  for (final ValueContainer.ValueIterator<Value> valueIterator=_valueContainer.getValueIterator(); valueIterator.hasNext(); ) {
    final Value value=valueIterator.next();
    for (final ValueContainer.IntIterator intIterator=valueIterator.getInputIdsIterator(); intIterator.hasNext(); ) {
      int id=intIterator.next();
      Value previousValue=id2ValueMap.put(id,value);
      if (previousValue != null) {
        if (removedFileIdList == null) {
          removedFileIdList=new TIntArrayList();
          removedValueList=new SmartList<Value>();
        }
        removedFileIdList.add(id);
        removedValueList.add(previousValue);
      }
    }
  }
  if (removedFileIdList != null) {
    for (int i=0, size=removedFileIdList.size(); i < size; ++i) {
      valueContainer.removeValue(removedFileIdList.get(i),removedValueList.get(i));
    }
  }
}
