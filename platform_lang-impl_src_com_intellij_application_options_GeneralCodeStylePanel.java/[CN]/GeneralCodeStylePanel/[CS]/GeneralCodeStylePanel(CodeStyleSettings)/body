{
  super(settings);
  myLineSeparatorCombo.addItem(SYSTEM_DEPENDANT_STRING);
  myLineSeparatorCombo.addItem(UNIX_STRING);
  myLineSeparatorCombo.addItem(WINDOWS_STRING);
  myLineSeparatorCombo.addItem(MACINTOSH_STRING);
  addPanelToWatch(myPanel);
  myDefaultRightMargin=settings.getDefaultRightMargin();
  myRightMarginField.setHorizontalAlignment(SwingConstants.RIGHT);
  myInitialRightMarginFieldColor=myRightMarginField.getBackground();
  myEnableFormatterTags.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      boolean tagsEnabled=myEnableFormatterTags.isSelected();
      setFormatterTagControlsEnabled(tagsEnabled);
    }
  }
);
  myAutodetectIndentsBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      boolean isDetectIndent=myAutodetectIndentsBox.isSelected();
      myShowDetectedIndentNotification.setEnabled(isDetectIndent);
    }
  }
);
  myDefaultOptionsPanel.setBorder(IdeBorderFactory.createTitledBorder(ApplicationBundle.message("settings.code.style.general.default.options")));
  myIndentsDetectionPanel.setBorder(IdeBorderFactory.createTitledBorder(ApplicationBundle.message("settings.code.style.general.indents.detection")));
  myMarkersPanel.setBorder(IdeBorderFactory.createTitledBorder(ApplicationBundle.message("settings.code.style.general.formatter.marker.title"),true));
  myMarkerOptionsPanel.setBorder(IdeBorderFactory.createTitledBorder(ApplicationBundle.message("settings.code.style.general.formatter.marker.options.title"),true));
  myPanel.setBorder(JBUI.Borders.empty(10,10));
  myScrollPane=ScrollPaneFactory.createScrollPane(null,true);
  myScrollPane.setViewport(new GradientViewport(myPanel,JBUI.insetsTop(5),true));
  myScrollPane.getVerticalScrollBar().setUnitIncrement(JBUI.scale(10));
  myAdditionalSettingsPanel.setLayout(new VerticalFlowLayout(true,true));
  myAdditionalSettingsPanel.removeAll();
  myAdditionalOptions=ConfigurableWrapper.createConfigurables(GeneralCodeStyleOptionsProviderEP.EP_NAME);
  for (  GeneralCodeStyleOptionsProvider provider : myAdditionalOptions) {
    JComponent generalSettingsComponent=provider.createComponent();
    if (generalSettingsComponent != null) {
      myAdditionalSettingsPanel.add(generalSettingsComponent);
    }
  }
}
