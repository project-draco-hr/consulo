{
  String cvsRoot=settings.getCvsRootAsString();
  String stored=getPassword(cvsRoot);
  if (stored != null) {
    IConnection connection=settings.createConnection(new ReadWriteStatistics(),executor);
    try {
      connection.open(new StreamLogger());
      return true;
    }
 catch (    AuthenticationException e) {
      Throwable cause=e.getCause();
      if (cause instanceof SocketTimeoutException) {
        showErrorMessage("Timeout error.","Timeout Error");
        return false;
      }
 else       if (cause instanceof UnknownHostException) {
        showErrorMessage("Unknown host: " + settings.HOST,"Unknown Host");
        return false;
      }
 else {
        showErrorMessage(getMessageFrom(e),"Authorization Error");
        settings.releasePassword();
        return relogin(settings,executor);
      }
    }
 finally {
      try {
        connection.close();
      }
 catch (      IOException e) {
      }
    }
  }
  String password=requestForPassword(cvsRoot);
  if (password == null)   return false;
  try {
    storePassword(cvsRoot,password);
  }
 catch (  IOException e) {
    Messages.showMessageDialog("Cannot Store Password: " + e.getLocalizedMessage(),"Storing CVS Password",Messages.getErrorIcon());
    return false;
  }
  settings.storePassword(password);
  return login(settings,executor);
}
