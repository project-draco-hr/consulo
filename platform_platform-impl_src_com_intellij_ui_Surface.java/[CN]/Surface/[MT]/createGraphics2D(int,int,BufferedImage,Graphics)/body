{
  Graphics2D g2;
  if (bi != null) {
    g2=bi.createGraphics();
  }
 else {
    g2=(Graphics2D)g;
  }
  g2.setBackground(getBackground());
  g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,AntiAlias);
  g2.setRenderingHint(RenderingHints.KEY_RENDERING,Rendering);
  if (clearSurface || clearOnce) {
    g2.clearRect(0,0,width,height);
    clearOnce=false;
  }
  if (texture != null) {
    g2.setComposite(AlphaComposite.SrcOver);
    g2.setPaint(texture);
    g2.fillRect(0,0,width,height);
  }
  if (composite != null) {
    g2.setComposite(composite);
  }
  return g2;
}
