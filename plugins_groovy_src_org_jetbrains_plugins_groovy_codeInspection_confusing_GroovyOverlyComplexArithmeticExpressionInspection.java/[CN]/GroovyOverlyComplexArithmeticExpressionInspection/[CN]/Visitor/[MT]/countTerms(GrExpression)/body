{
  if (expression == null) {
    return 0;
  }
  if (!isArithmetic(expression)) {
    return 1;
  }
  if (expression instanceof GrBinaryExpression) {
    final GrBinaryExpression binaryExpression=(GrBinaryExpression)expression;
    final GrExpression lhs=binaryExpression.getLeftOperand();
    final GrExpression rhs=binaryExpression.getRightOperand();
    return countTerms(lhs) + countTerms(rhs);
  }
 else   if (expression instanceof GrUnaryExpression) {
    final GrUnaryExpression unaryExpression=(GrUnaryExpression)expression;
    final GrExpression operand=unaryExpression.getOperand();
    return countTerms(operand);
  }
 else   if (expression instanceof GrParenthesizedExpression) {
    final GrParenthesizedExpression parenthesizedExpression=(GrParenthesizedExpression)expression;
    final GrExpression contents=parenthesizedExpression.getOperand();
    return countTerms(contents);
  }
  return 1;
}
