{
  final JCheckBox optimizeBox=new JCheckBox(VcsBundle.message("checkbox.checkin.options.optimize.imports"));
  CheckinHandlerUtil.disableWhenDumb(myProject,optimizeBox,"Impossible until indices are up-to-date");
  return new RefreshableOnComponent(){
    @Override public JComponent getComponent(){
      final JPanel panel=new JPanel(new GridLayout(1,0));
      panel.add(optimizeBox);
      return panel;
    }
    @Override public void refresh(){
    }
    @Override public void saveState(){
      getSettings().OPTIMIZE_IMPORTS_BEFORE_PROJECT_COMMIT=optimizeBox.isSelected();
    }
    @Override public void restoreState(){
      optimizeBox.setSelected(getSettings().OPTIMIZE_IMPORTS_BEFORE_PROJECT_COMMIT);
    }
  }
;
}
