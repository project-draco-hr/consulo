{
  final DefaultMutableTreeNode lastNode=(DefaultMutableTreeNode)myPaletteUI.myTree.getLastSelectedPathComponent();
  final ComponentItem selectedItem=(ComponentItem)lastNode.getUserObject();
  LOG.assertTrue(selectedItem != null);
  final ComponentItem itemToBeEdited=selectedItem.clone();
  final ComponentItemDialog dialog=new ComponentItemDialog(myProject,myPaletteUI.myPanel,itemToBeEdited);
  dialog.setTitle(UIDesignerBundle.message("title.edit.component"));
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  final DefaultMutableTreeNode groupNode=(DefaultMutableTreeNode)lastNode.getParent();
  final GroupItem group=(GroupItem)groupNode.getUserObject();
  if (group.containsItemCopy(selectedItem,itemToBeEdited.getClassName())) {
    Messages.showErrorDialog(myPaletteUI.myPanel,UIDesignerBundle.message("error.component.should.be.unique"),CommonBundle.getErrorTitle());
    return;
  }
  group.replaceItem(selectedItem,itemToBeEdited);
  lastNode.setUserObject(itemToBeEdited);
  final DefaultTreeModel model=(DefaultTreeModel)myPaletteUI.myTree.getModel();
  model.nodeChanged(lastNode);
}
