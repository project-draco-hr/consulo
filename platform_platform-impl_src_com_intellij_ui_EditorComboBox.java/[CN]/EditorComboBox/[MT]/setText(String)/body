{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
        public void run(){
          myDocument.replaceString(0,myDocument.getTextLength(),text);
          if (myEditorField != null && myEditorField.getEditor() != null) {
            myEditorField.getCaretModel().moveToOffset(myDocument.getTextLength());
          }
        }
      }
,null,myDocument);
    }
  }
);
}
