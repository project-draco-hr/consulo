{
  final TreeClassChooser.ClassFilterWithScope classFilter;
  try {
    classFilter=getFilter();
  }
 catch (  NoFilterException e) {
    final MessagesEx.MessageInfo info=e.getMessageInfo();
    info.showNow();
    return null;
  }
  final TreeClassChooser dialog=TreeClassChooserFactory.getInstance(getProject()).createWithInnerClassesScopeChooser(myTitle,classFilter.getScope(),classFilter,null);
  configureDialog(dialog);
  dialog.showDialog();
  final PsiClass psiClass=dialog.getSelectedClass();
  if (psiClass == null)   return null;
  onClassChoosen(psiClass);
  return ExecutionUtil.getRuntimeQualifiedName(psiClass);
}
