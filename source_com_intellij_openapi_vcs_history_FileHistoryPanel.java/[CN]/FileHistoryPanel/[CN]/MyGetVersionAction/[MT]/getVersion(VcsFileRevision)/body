{
  if ((getVirtualFile() != null) && !getVirtualFile().isWritable()) {
    VirtualFileManager.getInstance().fireReadOnlyModificationAttempt(new VirtualFile[]{getVirtualFile()});
    return;
  }
  LvcsAction action=getVirtualFile() != null ? startLvcsAction(revision) : LvcsAction.EMPTY;
  byte[] revisionContent=null;
  try {
    revision.loadContent();
    revisionContent=revision.getContent();
  }
 catch (  IOException e) {
    LOG.error(e);
    return;
  }
catch (  VcsException e) {
    Messages.showMessageDialog("Cannot load revision test: " + e.getLocalizedMessage(),"Get Revision Content",Messages.getInformationIcon());
    return;
  }
catch (  ProcessCanceledException ex) {
    return;
  }
  final byte[] finalRevisionContent=revisionContent;
  try {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        CommandProcessor.getInstance().executeCommand(myProject,getVersionRunnable(finalRevisionContent),createGetActionTitle(revision),null);
      }
    }
);
    if (getVirtualFile() != null) {
      FileStatusManager.getInstance(myProject).fileStatusChanged(getVirtualFile());
    }
  }
  finally {
    action.finish();
  }
}
