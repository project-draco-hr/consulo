{
  fillTreeData(null,true);
  final MyTreeCellRenderer renderer=new MyTreeCellRenderer();
  myTree=new Tree(myRoot){
    public Dimension getPreferredScrollableViewportSize(){
      Dimension size=super.getPreferredScrollableViewportSize();
      size=new Dimension(size.width + 10,size.height);
      return size;
    }
    protected void processMouseEvent(    MouseEvent e){
      if (e.getID() == MouseEvent.MOUSE_PRESSED) {
        int row=myTree.getRowForLocation(e.getX(),e.getY());
        if (row >= 0) {
          Rectangle rowBounds=myTree.getRowBounds(row);
          renderer.setBounds(rowBounds);
          Rectangle checkBounds=renderer.myCheckbox.getBounds();
          checkBounds.setLocation(rowBounds.getLocation());
          if (checkBounds.contains(e.getPoint())) {
            MyTreeNode node=(MyTreeNode)myTree.getPathForRow(row).getLastPathComponent();
            toggleNode(node);
            myTree.setSelectionRow(row);
          }
        }
      }
      super.processMouseEvent(e);
    }
    public int getToggleClickCount(){
      return -1;
    }
  }
;
  myTree.setCellRenderer(renderer);
  myTree.setRootVisible(true);
  myTree.setShowsRootHandles(true);
  UIUtil.setLineStyleAngled(myTree);
  TreeToolTipHandler.install(myTree);
  TreeUtil.installActions(myTree);
  myTree.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (!e.isConsumed() && e.getKeyCode() == KeyEvent.VK_SPACE && !SpeedSearchBase.hasActiveSpeedSearch(myTree)) {
        final int selectionRow=myTree.getLeadSelectionRow();
        final int[] rows=myTree.getSelectionRows();
        for (int i=0; rows != null && i < rows.length; i++) {
          final TreePath path=myTree.getPathForRow(rows[i]);
          final MyTreeNode node=(MyTreeNode)path.getLastPathComponent();
          if (Arrays.binarySearch(rows,myTree.getRowForPath(path.getParentPath())) < 0) {
            toggleNode(node);
          }
        }
        myTree.setSelectionRow(selectionRow);
        e.consume();
      }
    }
  }
);
  myTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      if (myTree.getSelectionPaths() != null && myTree.getSelectionPaths().length == 1) {
        updateOptionsAndDescriptionPanel(myTree.getSelectionPaths()[0]);
      }
 else {
        initOptionsAndDescriptionPanel();
      }
    }
  }
);
  myTree.addMouseListener(new PopupHandler(){
    public void invokePopup(    Component comp,    int x,    int y){
      if (myTree.getPathForLocation(x,y) != null && Arrays.binarySearch(myTree.getSelectionRows(),myTree.getRowForLocation(x,y)) > -1) {
        compoundPopup().show(comp,x,y);
      }
    }
  }
);
  new TreeSpeedSearch(myTree,new Convertor<TreePath,String>(){
    public String convert(    TreePath o){
      final DefaultMutableTreeNode node=(DefaultMutableTreeNode)o.getLastPathComponent();
      final Object userObject=node.getUserObject();
      if (userObject instanceof Descriptor) {
        return getDisplayTextToSort(((Descriptor)userObject).getText());
      }
      return getDisplayTextToSort(userObject.toString());
    }
  }
);
  myTree.setSelectionModel(new DefaultTreeSelectionModel());
  final JScrollPane scrollPane=ScrollPaneFactory.createScrollPane(myTree);
  scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
  TreeUtil.collapseAll(myTree,1);
  final Dimension preferredSize=new Dimension(myTree.getPreferredSize().width + 20,scrollPane.getPreferredSize().height);
  scrollPane.setPreferredSize(preferredSize);
  scrollPane.setMinimumSize(preferredSize);
  myTree.addTreeExpansionListener(new TreeExpansionListener(){
    private String getExpandedString(    TreePath treePath){
      final Object userObject=((DefaultMutableTreeNode)treePath.getLastPathComponent()).getUserObject();
      if (userObject instanceof Descriptor) {
        return ((Descriptor)userObject).getText();
      }
 else {
        return (String)userObject;
      }
    }
    public void treeCollapsed(    TreeExpansionEvent event){
      InspectionProfileImpl selected=(InspectionProfileImpl)mySelectedProfile;
      String nodeTitle=getExpandedString(event.getPath());
      ((InspectionProfileImpl)selected.getParentProfile()).getExpandedNodes().expandNode(nodeTitle);
      selected.getExpandedNodes().collapseNode(nodeTitle);
    }
    public void treeExpanded(    TreeExpansionEvent event){
      InspectionProfileImpl selected=(InspectionProfileImpl)mySelectedProfile;
      String nodeTitle=getExpandedString(event.getPath());
      ((InspectionProfileImpl)selected.getParentProfile()).getExpandedNodes().expandNode(nodeTitle);
      selected.getExpandedNodes().expandNode(nodeTitle);
    }
  }
);
  myTreeExpander=new DefaultTreeExpander(myTree);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      myTree.requestFocus();
    }
  }
);
  myProfileFilter=new MyFilterComponent();
  return scrollPane;
}
