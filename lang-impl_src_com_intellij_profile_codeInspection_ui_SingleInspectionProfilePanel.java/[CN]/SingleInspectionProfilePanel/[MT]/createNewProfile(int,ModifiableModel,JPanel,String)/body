{
  profileName=Messages.showInputDialog(parent,profileName,"title",Messages.getQuestionIcon());
  if (profileName == null)   return null;
  final boolean isLocal=false;
  final ProfileManager profileManager=selectedProfile.getProfileManager();
  if (ArrayUtil.find(profileManager.getAvailableProfileNames(),profileName) != -1) {
    Messages.showErrorDialog(InspectionsBundle.message("inspection.unable.to.create.profile.message",profileName),InspectionsBundle.message("inspection.unable.to.create.profile.dialog.title"));
    return null;
  }
  InspectionProfileImpl inspectionProfile=new InspectionProfileImpl(profileName,InspectionToolRegistrar.getInstance(),profileManager);
  final ModifiableModel profileModifiableModel=inspectionProfile.getModifiableModel();
  if (selectedProfile != null) {
    profileModifiableModel.copyFrom(selectedProfile);
  }
  if (initValue == -1) {
    final InspectionProfileEntry[] profileEntries=profileModifiableModel.getInspectionTools(null);
    for (    InspectionProfileEntry entry : profileEntries) {
      profileModifiableModel.disableTool(entry.getShortName());
    }
  }
 else   if (initValue == 1) {
    profileModifiableModel.resetToBase();
  }
  profileModifiableModel.setName(profileName);
  profileModifiableModel.setLocal(isLocal);
  return profileModifiableModel;
}
