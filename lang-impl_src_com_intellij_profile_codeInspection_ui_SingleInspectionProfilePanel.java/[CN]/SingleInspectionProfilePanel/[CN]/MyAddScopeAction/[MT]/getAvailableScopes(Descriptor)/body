{
  final ArrayList<NamedScope> scopes=new ArrayList<NamedScope>(Arrays.asList(mySelectedProfile.getProfileManager().getScopesManager().getScopes()));
  final Set<NamedScope> used=new HashSet<NamedScope>();
  final List<ScopeToolState> nonDefaultTools=mySelectedProfile.getNonDefaultTools(descriptor.getKey().toString());
  if (nonDefaultTools != null) {
    for (    ScopeToolState state : nonDefaultTools) {
      used.add(state.getScope());
    }
  }
  scopes.removeAll(used);
  final List<String> availableScopes=new ArrayList<String>();
  for (  NamedScope scope : scopes) {
    availableScopes.add(scope.getName());
  }
  return availableScopes;
}
