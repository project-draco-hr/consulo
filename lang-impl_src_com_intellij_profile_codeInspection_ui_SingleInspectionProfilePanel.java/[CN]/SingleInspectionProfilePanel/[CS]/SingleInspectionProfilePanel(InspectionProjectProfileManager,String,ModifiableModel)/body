{
  super(new BorderLayout());
  myProjectProfileManager=projectProfileManager;
  mySelectedProfile=(InspectionProfileImpl)profile;
  myInitialProfile=inspectionProfileName;
  add(createInspectionProfileSettingsPanel(),BorderLayout.CENTER);
  myUserActivityWatcher.addUserActivityListener(new UserActivityListener(){
    public void stateChanged(){
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          if (mySelectedProfile == null)           return;
          updateProperSettingsForSelection();
          wereToolSettingsModified();
        }
      }
);
    }
  }
);
  myUserActivityWatcher.register(myOptionsPanel);
  updateSelectedProfileState();
  final JPanel sharePanel=new JPanel(new BorderLayout());
  sharePanel.add(myShareProfile,BorderLayout.EAST);
  add(sharePanel,BorderLayout.NORTH);
  myShareProfile.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      mySelectedProfile.setProfileManager(myShareProfile.isSelected() ? myProjectProfileManager : InspectionProfileManager.getInstance());
    }
  }
);
}
