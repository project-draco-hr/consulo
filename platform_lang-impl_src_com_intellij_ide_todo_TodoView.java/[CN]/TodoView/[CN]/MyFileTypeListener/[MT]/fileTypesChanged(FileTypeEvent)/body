{
  DumbService.getInstance(myProject).smartInvokeLater(new Runnable(){
    @Override public void run(){
      if (myProject.isDisposed())       return;
      ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
        @Override public void run(){
          if (myAllTodos == null)           return;
          ApplicationManager.getApplication().runReadAction(new Runnable(){
            @Override public void run(){
              for (              TodoPanel panel : myPanels) {
                panel.rebuildCache();
              }
            }
          }
);
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            @Override public void run(){
              for (              TodoPanel panel : myPanels) {
                panel.updateTree();
              }
            }
          }
,ModalityState.NON_MODAL);
        }
      }
,IdeBundle.message("progress.looking.for.todos"),false,myProject);
    }
  }
);
}
