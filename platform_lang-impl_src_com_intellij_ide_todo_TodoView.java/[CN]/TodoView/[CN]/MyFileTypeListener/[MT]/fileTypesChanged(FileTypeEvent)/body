{
  DumbService.getInstance(myProject).smartInvokeLater(new Runnable(){
    public void run(){
      if (myProject.isDisposed())       return;
      ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
        public void run(){
          if (myAllTodos == null)           return;
          ApplicationManager.getApplication().runReadAction(new Runnable(){
            public void run(){
              myAllTodos.rebuildCache();
              myCurrentFileTodos.rebuildCache();
              myChangeListTodos.rebuildCache();
            }
          }
);
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            public void run(){
              myAllTodos.updateTree();
              myCurrentFileTodos.updateTree();
              myChangeListTodos.updateTree();
            }
          }
,ModalityState.NON_MODAL);
        }
      }
,IdeBundle.message("progress.looking.for.todos"),false,myProject);
    }
  }
);
}
