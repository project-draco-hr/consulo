{
  List<PsiElement> elements=new ArrayList<PsiElement>();
  final PsiManager manager=PsiManager.getInstance(myProject);
  List<VirtualFile> files=UNVERSIONED_FILES_DATA_KEY.getData(dataContext);
  if (files == null)   return PsiElement.EMPTY_ARRAY;
  for (  VirtualFile file : files) {
    if (file.isDirectory()) {
      final PsiDirectory psiDir=manager.findDirectory(file);
      if (psiDir != null) {
        elements.add(psiDir);
      }
    }
 else {
      final PsiFile psiFile=manager.findFile(file);
      if (psiFile != null) {
        elements.add(psiFile);
      }
    }
  }
  return elements.toArray(new PsiElement[elements.size()]);
}
