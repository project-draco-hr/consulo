{
  List<VirtualFile> files=new ArrayList<VirtualFile>();
  final TreePath[] paths=getSelectionPaths();
  if (paths != null) {
    for (    TreePath path : paths) {
      Node node=(Node)path.getLastPathComponent();
      files.addAll(getAllFilesUnder(node));
    }
  }
  return files;
}
