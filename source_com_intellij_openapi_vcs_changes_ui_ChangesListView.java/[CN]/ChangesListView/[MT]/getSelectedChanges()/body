{
  Set<Change> changes=new HashSet<Change>();
  for (  ChangeList list : getSelectedChangeLists()) {
    changes.addAll(list.getChanges());
  }
  final TreePath[] paths=getSelectionPaths();
  if (paths == null)   return new Change[0];
  for (  TreePath path : paths) {
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    final Object userObject=node.getUserObject();
    if (userObject instanceof Change) {
      changes.add((Change)userObject);
    }
  }
  return changes.toArray(new Change[changes.size()]);
}
