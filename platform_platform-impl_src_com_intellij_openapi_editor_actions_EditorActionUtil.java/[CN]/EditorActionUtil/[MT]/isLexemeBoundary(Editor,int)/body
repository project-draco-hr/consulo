{
  if (!(editor instanceof EditorEx) || offset <= 0 || offset >= editor.getDocument().getTextLength())   return false;
  if (CharArrayUtil.isEmptyOrSpaces(editor.getDocument().getImmutableCharSequence(),offset - 1,offset + 1))   return false;
  EditorHighlighter highlighter=((EditorEx)editor).getHighlighter();
  HighlighterIterator it=highlighter.createIterator(offset);
  if (it.getStart() != offset) {
    return false;
  }
  IElementType rightToken=it.getTokenType();
  it.retreat();
  IElementType leftToken=it.getTokenType();
  return !Comparing.equal(leftToken,rightToken);
}
