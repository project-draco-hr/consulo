{
  if (element instanceof PsiDirectory) {
    PsiDirectory dir=(PsiDirectory)element;
    final PsiPackage aPackage=dir.getPackage();
    if (ProjectView.getInstance(myProject).isShowModules(getId())) {
      Module[] modules=getModulesFor(dir);
      boolean rv=false;
      for (int idx=0; idx < modules.length; idx++) {
        rv|=addPackageElementToUpdate(aPackage,modules[idx]);
      }
      return rv;
    }
 else {
      return addPackageElementToUpdate(aPackage,null);
    }
  }
  return super.addSubtreeToUpdateByElement(element);
}
