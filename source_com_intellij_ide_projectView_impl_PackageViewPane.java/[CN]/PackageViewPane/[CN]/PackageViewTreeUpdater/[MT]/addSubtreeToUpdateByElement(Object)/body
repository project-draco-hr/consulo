{
  if (element instanceof PsiDirectory) {
    PsiDirectory dir=(PsiDirectory)element;
    final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(dir);
    if (ProjectView.getInstance(myProject).isShowModules(getId())) {
      Module[] modules=getModulesFor(dir);
      boolean rv=false;
      for (      Module module : modules) {
        rv|=addPackageElementToUpdate(aPackage,module);
      }
      return rv;
    }
 else {
      return addPackageElementToUpdate(aPackage,null);
    }
  }
  return super.addSubtreeToUpdateByElement(element);
}
