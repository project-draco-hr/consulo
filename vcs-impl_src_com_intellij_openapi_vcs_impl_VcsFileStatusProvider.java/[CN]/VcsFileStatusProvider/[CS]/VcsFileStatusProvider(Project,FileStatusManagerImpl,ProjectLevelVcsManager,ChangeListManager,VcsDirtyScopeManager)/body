{
  myProject=project;
  myFileStatusManager=fileStatusManager;
  myVcsManager=vcsManager;
  myChangeListManager=changeListManager;
  myDirtyScopeManager=dirtyScopeManager;
  myFileStatusManager.setFileStatusProvider(this);
  changeListManager.addChangeListListener(new ChangeListAdapter(){
    public void changeListAdded(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListRemoved(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListChanged(    ChangeList list){
      fileStatusesChanged();
    }
    public void changeListUpdateDone(){
      ProjectLevelVcsManagerImpl vcsManager=(ProjectLevelVcsManagerImpl)myVcsManager;
      if (vcsManager.hasEmptyContentRevisions()) {
        vcsManager.resetHaveEmptyContentRevisions();
        fileStatusesChanged();
      }
    }
    @Override public void unchangedFileStatusChanged(){
      fileStatusesChanged();
    }
  }
);
}
