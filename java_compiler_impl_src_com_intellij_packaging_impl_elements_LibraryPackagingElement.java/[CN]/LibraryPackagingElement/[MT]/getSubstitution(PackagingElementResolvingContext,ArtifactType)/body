{
  final Library library=findLibrary(context);
  if (library != null) {
    final VirtualFile[] files=library.getFiles(OrderRootType.CLASSES);
    final List<PackagingElement<?>> elements=new ArrayList<PackagingElement<?>>();
    for (    VirtualFile file : files) {
      final String path=FileUtil.toSystemIndependentName(PathUtil.getLocalPath(file));
      elements.add(file.isDirectory() && file.isInLocalFileSystem() ? new DirectoryCopyPackagingElement(path) : new FileCopyPackagingElement(path));
    }
    return elements;
  }
  return null;
}
