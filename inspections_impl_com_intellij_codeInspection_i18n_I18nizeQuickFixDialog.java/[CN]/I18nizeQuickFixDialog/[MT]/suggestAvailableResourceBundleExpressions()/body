{
  if (myShowJavaCodeInfo) {
    FileTemplate template=FileTemplateManager.getInstance().getCodeTemplate(getTemplateName());
    boolean showResourceBundleSuggester=template.getText().contains("${" + RESOURCE_BUNDLE_OPTION_KEY + "}");
    myJavaCodeInfoPanel.setVisible(showResourceBundleSuggester);
  }
  PsiVariable[] variables=MacroUtil.getVariablesVisibleAt(myLiteralExpression,"");
  Set<String> result=new LinkedHashSet<String>();
  for (  PsiVariable var : variables) {
    PsiType varType=var.getType();
    if (myResourceBundleType == null || myResourceBundleType.isAssignableFrom(varType)) {
      result.add(var.getNameIdentifier().getText());
    }
  }
  PsiExpression[] expressions=MacroUtil.getStandardExpressionsOfType(myLiteralExpression,myResourceBundleType);
  for (  PsiExpression expression : expressions) {
    result.add(expression.getText());
  }
  if (myResourceBundleType != null) {
    addAvailableMethodsOfType(result,myResourceBundleType);
  }
  if (result.isEmpty()) {
    result.add(getResourceBundleText());
  }
  myRBEditorTextField.setHistory(result.toArray(new String[result.size()]));
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      myRBEditorTextField.setSelectedIndex(0);
    }
  }
);
}
