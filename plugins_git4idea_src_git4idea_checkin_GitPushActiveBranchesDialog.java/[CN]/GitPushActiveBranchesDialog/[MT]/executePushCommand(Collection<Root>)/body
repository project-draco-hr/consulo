{
  final ArrayList<VcsException> errors=new ArrayList<VcsException>();
  for (  Root r : rootsToPush) {
    GitLineHandler h=new GitLineHandler(myProject,r.root,GitCommand.PUSH);
    String src=r.commitToPush != null ? r.commitToPush : r.currentBranch;
    h.addParameters("-v",r.remoteName,src + ":" + r.remoteBranch);
    GitPushUtils.trackPushRejectedAsError(h,"Rejected push (" + r.root.getPresentableUrl() + "): ");
    errors.addAll(GitHandlerUtil.doSynchronouslyWithExceptions(h));
  }
  return errors;
}
