{
  Map<VirtualFile,Set<String>> unchecked=new HashMap<VirtualFile,Set<String>>();
  for (int i=0; i < myTreeRoot.getChildCount(); i++) {
    Set<String> uncheckedCommits=new HashSet<String>();
    CheckedTreeNode node=(CheckedTreeNode)myTreeRoot.getChildAt(i);
    Root r=(Root)node.getUserObject();
    for (int j=0; j < node.getChildCount(); j++) {
      if (node.getChildAt(j) instanceof CheckedTreeNode) {
        CheckedTreeNode commitNode=(CheckedTreeNode)node.getChildAt(j);
        if (!commitNode.isChecked()) {
          uncheckedCommits.add(((Commit)commitNode.getUserObject()).commitId());
        }
      }
    }
    if (!uncheckedCommits.isEmpty()) {
      unchecked.put(r.root,uncheckedCommits);
    }
  }
  refreshTree(true,unchecked);
}
