{
  myTreeRoot.removeAllChildren();
  for (  Root r : roots) {
    CheckedTreeNode rootNode=new CheckedTreeNode(r);
    Status status=new Status();
    status.root=r;
    rootNode.add(new DefaultMutableTreeNode(status,false));
    Set<String> unchecked=uncheckedCommits != null && uncheckedCommits.containsKey(r.root) ? uncheckedCommits.get(r.root) : Collections.<String>emptySet();
    for (    Commit c : r.commits) {
      CheckedTreeNode child=new CheckedTreeNode(c);
      rootNode.add(child);
      child.setChecked(r.remote != null && !unchecked.contains(c.commitId()));
    }
    myTreeRoot.add(rootNode);
  }
  ((DefaultTreeModel)myCommitTree.getModel()).reload(myTreeRoot);
  TreeUtil.expandAll(myCommitTree);
  updateButtons();
}
