{
  final List<Root> emptyRoots=loadRoots(project,vcsRoots,exceptions,false);
  if (!exceptions.isEmpty()) {
    exceptions.addAll(exceptions);
    return;
  }
  final GitPushActiveBranchesDialog d=new GitPushActiveBranchesDialog(project,vcsRoots,emptyRoots);
  d.refreshTree(true,null,false);
  d.show();
  if (d.isOK()) {
    d.rebaseAndPush();
  }
  for (  VirtualFile root : vcsRoots) {
    GitRepositoryManager.getInstance(project).updateRepository(root,GitRepository.TrackedTopic.ALL);
  }
}
