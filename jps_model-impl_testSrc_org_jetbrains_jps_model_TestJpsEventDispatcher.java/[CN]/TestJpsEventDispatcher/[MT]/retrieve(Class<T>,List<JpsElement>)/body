{
  final List<T> result=new ArrayList<T>();
  final Iterator<JpsElement> iterator=list.iterator();
  while (iterator.hasNext()) {
    JpsElement element=iterator.next();
    if (type.isInstance(element)) {
      result.add(type.cast(element));
      iterator.remove();
    }
  }
  return result;
}
