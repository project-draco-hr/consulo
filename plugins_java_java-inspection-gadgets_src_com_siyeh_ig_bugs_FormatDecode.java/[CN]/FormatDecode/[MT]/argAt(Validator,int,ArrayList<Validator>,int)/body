{
  if (pos < parameters.size()) {
    final Validator old=parameters.get(pos);
    Set<String> replaceableTypes=REPLACEABLE_VALIDATOR_TYPES.get(old.type());
    if (replaceableTypes != null && replaceableTypes.contains(val.type())) {
      parameters.set(pos,val);
    }
 else     if (val != ALL_VALIDATOR && val != old) {
      throw new DuplicateFormatFlagsException("requires both " + old.type() + " and "+ val.type());
    }
  }
 else {
    while (pos > parameters.size() && argumentCount > parameters.size()) {
      parameters.add(ALL_VALIDATOR);
    }
    parameters.add(val);
  }
}
