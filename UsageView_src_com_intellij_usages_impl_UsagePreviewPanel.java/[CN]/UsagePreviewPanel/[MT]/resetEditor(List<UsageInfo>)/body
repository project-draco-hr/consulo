{
  PsiElement psiElement=infos.get(0).getElement();
  if (psiElement == null)   return;
  PsiFile psiFile=psiElement.getContainingFile();
  if (psiFile == null)   return;
  PsiLanguageInjectionHost host=InjectedLanguageManager.getInstance(myProject).getInjectionHost(psiFile);
  if (host != null) {
    psiFile=host.getContainingFile();
    if (psiFile == null)     return;
  }
  Document document=PsiDocumentManager.getInstance(psiFile.getProject()).getDocument(psiFile);
  if (document == null)   return;
  String title=UsageViewBundle.message("preview.title",psiFile.getName());
  if (myEditor == null || document != myEditor.getDocument() || !Comparing.strEqual(title,myTitle)) {
    releaseEditor();
    removeAll();
    myEditor=createEditor(psiFile,document);
    if (myEditor == null)     return;
    myTitle=title;
    JComponent titleComp=new JLabel(myTitle);
    add(titleComp,BorderLayout.NORTH);
    add(myEditor.getComponent(),BorderLayout.CENTER);
    revalidate();
  }
  final Editor editor=myEditor;
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      highlight(infos,editor);
    }
  }
);
}
