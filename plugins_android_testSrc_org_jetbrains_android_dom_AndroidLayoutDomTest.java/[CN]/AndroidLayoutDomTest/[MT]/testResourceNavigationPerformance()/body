{
  doCopyManyStrings();
  final VirtualFile f=copyFileToProject(getTestName(true) + ".xml");
  myFixture.configureFromExistingVirtualFile(f);
  @SuppressWarnings("MismatchedQueryAndUpdateOfCollection") final List<PsiElement> navElements=new ArrayList<PsiElement>();
  myFixture.doHighlighting();
  PlatformTestUtil.startPerformanceTest("android highlighting is slow",7000,new ThrowableRunnable(){
    @SuppressWarnings("ConstantConditions") @Override public void run() throws Throwable {
      final PsiReference reference=TargetElementUtilBase.findReference(myFixture.getEditor(),myFixture.getCaretOffset());
      final ResolveResult[] results=((PsiPolyVariantReference)reference).multiResolve(false);
      for (      ResolveResult result : results) {
        final PsiElement navElement=result.getElement().getNavigationElement();
        assertInstanceOf(navElement,XmlAttributeValue.class);
        navElements.add(navElement);
      }
    }
  }
).attempts(1).cpuBound().usesAllCPUCores().assertTiming();
  assertEquals(31,navElements.size());
}
