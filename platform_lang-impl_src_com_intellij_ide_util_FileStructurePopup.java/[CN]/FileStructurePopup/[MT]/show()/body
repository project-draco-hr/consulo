{
  final JComponent panel=createCenterPanel();
  new MnemonicHelper().register(panel);
  myPopup=JBPopupFactory.getInstance().createComponentPopupBuilder(panel,null).setTitle(myTitle).setResizable(true).setFocusable(true).setMovable(true).setDimensionServiceKey(null,getDimensionServiceKey(),false).createPopup();
  Disposer.register(myPopup,myDisposable);
  Disposer.register(myPopup,this);
  Disposer.register(myPopup,myAbstractTreeBuilder);
  myPopup.showInCenterOf(myEditor.getContentComponent());
  mySpeedSearch=new TreeSpeedSearch(myTree,TreeSpeedSearch.NODE_DESCRIPTOR_TOSTRING,true);
  mySpeedSearch.addChangeListener(new PropertyChangeListener(){
    @Override public void propertyChange(    PropertyChangeEvent evt){
      myVisibleElements.clear();
      myAbstractTreeBuilder.queueUpdate();
    }
  }
);
  myAbstractTreeBuilder.expandAll(new Runnable(){
    @Override public void run(){
      IdeFocusManager.getInstance(myProject).requestFocus(myTree,true);
      myAbstractTreeBuilder.queueUpdate().doWhenDone(new Runnable(){
        @Override public void run(){
          myAbstractTreeBuilder.expandAll(null);
        }
      }
);
    }
  }
);
}
