{
  final Ref<Boolean> succeeded=new Ref<Boolean>();
  final CommandProcessor commandProcessor=CommandProcessor.getInstance();
  commandProcessor.executeCommand(myProject,new Runnable(){
    public void run(){
      final AbstractTreeNode selectedNode=getSelectedNode();
      if (selectedNode != null) {
        if (selectedNode.canNavigateToSource()) {
          selectedNode.navigate(true);
          succeeded.set(true);
        }
 else {
          succeeded.set(false);
        }
      }
 else {
        succeeded.set(false);
      }
      IdeDocumentHistory.getInstance(myProject).includeCurrentCommandAsNavigation();
    }
  }
,"Navigate",null);
  if (succeeded.get()) {
    myPopup.cancel();
  }
  return succeeded.get();
}
