{
  final PathMacros pathMacros=PathMacros.getInstance();
  final Set<String> macroNamesSet=pathMacros.getUserMacroNames();
  if (macroNamesSet.size() > 0) {
    final String[] macroNames=ArrayUtil.toStringArray(macroNamesSet);
    Arrays.sort(macroNames);
    for (    final String macroName : macroNames) {
      addProperty(BuildProperties.getPathMacroProperty(macroName),pathMacros.getValue(macroName));
    }
  }
  if (genOptions.forceTargetJdk) {
    final Sdk[] usedJdks=BuildProperties.getUsedJdks(project);
    for (    Sdk jdk : usedJdks) {
      if (jdk.getHomeDirectory() == null) {
        continue;
      }
      final File homeDir=BuildProperties.toCanonicalFile(VfsUtil.virtualToIoFile(jdk.getHomeDirectory()));
      addProperty(BuildProperties.getJdkHomeProperty(jdk.getName()),homeDir.getPath().replace(File.separatorChar,'/'));
    }
  }
  if (genOptions.isIdeaHomeGenerated()) {
    addProperty(BuildProperties.PROPERTY_IDEA_HOME,PathManager.getHomePath());
  }
  ChunkBuildExtension.generateAllProperties(this,project,genOptions);
}
