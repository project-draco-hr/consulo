{
  final List<Pair<String,Integer>> searchTerms=new ArrayList<Pair<String,Integer>>();
  for (  TextRange fragment : colored) {
    searchTerms.add(Pair.create(fragment.substring(text),fragment.getStartOffset()));
  }
  final int[] lastOffset={0};
  ContainerUtil.process(searchTerms,new Processor<Pair<String,Integer>>(){
    @Override public boolean process(    Pair<String,Integer> pair){
      if (pair.second > lastOffset[0]) {
        simpleColoredComponent.append(text.substring(lastOffset[0],pair.second),plain);
      }
      simpleColoredComponent.append(text.substring(pair.second,pair.second + pair.first.length()),highlighted);
      lastOffset[0]=pair.second + pair.first.length();
      return true;
    }
  }
);
  if (lastOffset[0] < text.length()) {
    simpleColoredComponent.append(text.substring(lastOffset[0]),plain);
  }
}
