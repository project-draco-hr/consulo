{
  if (!(matcher instanceof MinusculeMatcher) || (Registry.is("ide.highlight.match.in.selected.only") && !selected)) {
    component.append(text,attributes);
    return;
  }
  final Iterable<TextRange> iterable=((MinusculeMatcher)matcher).matchingFragments(text);
  if (iterable != null) {
    final Color fg=attributes.getFgColor();
    final int style=attributes.getStyle();
    final SimpleTextAttributes plain=new SimpleTextAttributes(style,fg);
    final SimpleTextAttributes highlighted=new SimpleTextAttributes(selectedBg,fg,null,style | SimpleTextAttributes.STYLE_SEARCH_MATCH);
    appendColoredFragments(component,text,iterable,plain,highlighted);
  }
 else {
    component.append(text,attributes);
  }
}
