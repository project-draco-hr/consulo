{
  final File root=context.getDataManager().getDataStorageRoot();
  AndroidClassesAndJarsStateStorage dexStateStorage=null;
  AndroidClassesAndJarsStateStorage proguardStateStorage=null;
  try {
    dexStateStorage=new AndroidClassesAndJarsStateStorage(root,"_dex");
    proguardStateStorage=new AndroidClassesAndJarsStateStorage(root,"_proguard");
    if (!doDexBuild(context,dexStateStorage,proguardStateStorage)) {
      throw new ProjectBuildException();
    }
  }
  finally {
    if (proguardStateStorage != null) {
      proguardStateStorage.close();
    }
    if (dexStateStorage != null) {
      dexStateStorage.close();
    }
  }
}
