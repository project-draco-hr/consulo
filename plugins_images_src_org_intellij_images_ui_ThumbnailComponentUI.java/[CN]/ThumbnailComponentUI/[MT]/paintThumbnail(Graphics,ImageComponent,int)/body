{
  int maxWidth=THUMBNAIL_BLANK_WIDTH - 10;
  int maxHeight=blankHeight - 10;
  BufferedImage image=imageComponent.getDocument().getValue();
  int imageWidth=image.getWidth();
  int imageHeight=image.getHeight();
  double proportion=(double)imageWidth / (double)imageHeight;
  if (imageWidth > maxWidth || imageHeight > maxHeight) {
    if (imageWidth > imageHeight) {
      if (imageWidth > maxWidth) {
        imageWidth=maxWidth;
        imageHeight=(int)(maxWidth / proportion);
      }
    }
 else {
      if (imageHeight > maxHeight) {
        imageHeight=maxHeight;
        imageWidth=(int)(maxHeight * proportion);
      }
    }
  }
  imageComponent.setSize(imageWidth,imageHeight);
  int x=5 + (THUMBNAIL_BLANK_WIDTH - imageWidth) / 2;
  int y=5 + (THUMBNAIL_BLANK_HEIGHT - imageHeight) / 2;
  imageComponent.paint(g.create(x,y,imageWidth,imageHeight));
  g.setColor(Color.LIGHT_GRAY);
  g.drawRect(x - 2,y - 2,imageWidth + 3,imageHeight + 3);
}
