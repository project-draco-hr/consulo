{
  Collection<String> stringToSearch=getStringsToSearch(element);
  if (stringToSearch == null)   return;
  final TextRange elementTextRange=ApplicationManager.getApplication().runReadAction(new Computable<TextRange>(){
    public TextRange compute(){
      if (!element.isValid())       return null;
      return element.getTextRange();
    }
  }
);
  TextOccurrencesUtil.UsageInfoFactory factory=new TextOccurrencesUtil.UsageInfoFactory(){
    public UsageInfo createUsageInfo(    @NotNull PsiElement usage,    int startOffset,    int endOffset){
      if (elementTextRange != null && usage.getContainingFile() == element.getContainingFile() && elementTextRange.contains(startOffset) && elementTextRange.contains(endOffset)) {
        return null;
      }
      return new UsageInfo(usage,startOffset,endOffset,true);
    }
  }
;
  for (  String s : stringToSearch) {
    TextOccurrencesUtil.processTextOccurences(element,s,searchScope,processor,factory);
  }
}
