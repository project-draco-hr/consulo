{
  final File localFile=fileSystem.getFile(fileObject);
  localFile.getParentFile().mkdirs();
  if (localFile.exists()) {
    deleteFile(localFile,fileReadOnlyHandler);
  }
 else {
    FileUtil.createIfDoesntExist(localFile);
  }
  receiveTextFilePreprocessor.copyTextFileToLocation(inputStream,length,localFile,readerFactory,charSet);
  setModifiedDateAndMode(localFile,fileReadOnlyHandler);
  fileReadOnlyHandler.setFileReadOnly(localFile,readOnly);
}
