def catfile(ui, repo, type=None, r=None, **opts):
    'cat a specific revision'
    prefix = ''
    if opts['stdin']:
        try:
            (type, r) = raw_input().split(' ')
            prefix = '    '
        except EOFError:
            return
    elif ((not type) or (not r)):
        ui.warn(_('cat-file: type or revision not supplied\n'))
        commands.help_(ui, 'cat-file')
    while r:
        if (type != 'commit'):
            ui.warn(_('aborting hg cat-file only understands commits\n'))
            return 1
        n = repo.lookup(r)
        catcommit(ui, repo, n, prefix)
        if opts['stdin']:
            try:
                (type, r) = raw_input().split(' ')
            except EOFError:
                break
        else:
            break
