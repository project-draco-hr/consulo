{
  if (affected.isEmpty()) {
    return Collections.emptyList();
  }
  final List<Pair<File,String>> result=new ArrayList<Pair<File,String>>();
  for (  File file : affected) {
    if (!moduleBasedFilter.accept(file)) {
      final RootDescriptor moduleAndRoot=context.getProjectDescriptor().rootsIndex.getModuleAndRoot(context,file);
      result.add(Pair.create(file,moduleAndRoot != null ? moduleAndRoot.module : null));
    }
  }
  return result;
}
