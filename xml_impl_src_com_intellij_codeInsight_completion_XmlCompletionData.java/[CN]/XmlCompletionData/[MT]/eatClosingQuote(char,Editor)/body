{
  final Document document=editor.getDocument();
  int tailOffset=editor.getCaretModel().getOffset();
  if (completionChar == '\"' || completionChar == '\'') {
    if (document.getTextLength() > tailOffset) {
      final char c=document.getCharsSequence().charAt(tailOffset);
      if (c == completionChar || completionChar == '\'') {
        editor.getCaretModel().moveToOffset(tailOffset + 1);
        return tailOffset + 1;
      }
    }
  }
  return tailOffset;
}
