{
  String methodRefText=null;
  if (element instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression methodCall=(PsiMethodCallExpression)element;
    final PsiMethod psiMethod=methodCall.resolveMethod();
    if (psiMethod == null)     return null;
    final PsiClass containingClass=psiMethod.getContainingClass();
    LOG.assertTrue(containingClass != null);
    final PsiReferenceExpression methodExpression=methodCall.getMethodExpression();
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    final String methodReferenceName=methodExpression.getReferenceName();
    if (qualifierExpression != null) {
      boolean isReceiverType=LambdaUtil.isReceiverType(functionalInterfaceType,containingClass,psiMethod);
      methodRefText=(isReceiverType ? containingClass.getQualifiedName() : qualifierExpression.getText()) + "::" + ((PsiMethodCallExpression)element).getTypeArgumentList().getText()+ methodReferenceName;
    }
 else {
      methodRefText=(psiMethod.hasModifierProperty(PsiModifier.STATIC) ? containingClass.getQualifiedName() : "this") + "::" + methodReferenceName;
    }
  }
 else   if (element instanceof PsiNewExpression) {
    final PsiMethod constructor=((PsiNewExpression)element).resolveConstructor();
    if (constructor != null) {
      final PsiClass containingClass=constructor.getContainingClass();
      LOG.assertTrue(containingClass != null);
      methodRefText=containingClass.getQualifiedName() + "::new";
    }
 else {
      final PsiJavaCodeReferenceElement classReference=((PsiNewExpression)element).getClassOrAnonymousClassReference();
      if (classReference != null) {
        final JavaResolveResult resolve=classReference.advancedResolve(false);
        final PsiElement containingClass=resolve.getElement();
        if (containingClass instanceof PsiClass) {
          methodRefText=((PsiClass)containingClass).getQualifiedName() + "::new";
        }
      }
    }
  }
  return methodRefText;
}
