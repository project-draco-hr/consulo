{
  commandProcessor.addCommandListener(new CommandAdapter(){
    public void commandFinished(    CommandEvent event){
      undoTransparentActionFinished();
    }
    public void undoTransparentActionFinished(){
      if (myResetting)       return;
      myResetting=true;
      try {
        for (        final Committable committable : myResetQueue) {
          committable.reset();
        }
        myResetQueue.clear();
      }
  finally {
        myResetting=false;
      }
    }
  }
);
  myApplication=application;
}
