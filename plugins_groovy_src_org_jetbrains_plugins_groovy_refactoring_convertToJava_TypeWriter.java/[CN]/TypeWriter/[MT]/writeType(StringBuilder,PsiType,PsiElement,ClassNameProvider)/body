{
  if (type instanceof PsiPrimitiveType) {
    builder.append(type.getCanonicalText());
    return;
  }
  if (type == null) {
    builder.append(CommonClassNames.JAVA_LANG_OBJECT);
    return;
  }
  if (type instanceof GrAnonymousClassType) {
    type=((GrAnonymousClassType)type).getSimpleClassType();
  }
  final boolean acceptEllipsis=isLastParameter(context);
  type.accept(new TypeWriter(builder,classNameProvider,acceptEllipsis,context));
}
