{
  final Window window=SwingUtilities.getWindowAncestor(this);
  if (window == null)   return;
  final Dimension size=window.getSize();
  final Dimension contentSize=myPreviousContentSize != null && myPreviousContentSize.width > 0 && myPreviousContentSize.height > 0 ? myPreviousContentSize : myContent.getPreferredSize();
  final Dimension newSize;
  if (myOn) {
    newSize=new Dimension(Math.max(size.width,myContent.getSize().width),size.height + contentSize.height);
  }
 else {
    newSize=new Dimension(size.width,size.height - contentSize.height);
  }
  if (!newSize.equals(size)) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        if (window.isShowing()) {
          window.setSize(newSize);
        }
      }
    }
);
  }
}
