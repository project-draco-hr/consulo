{
  if (!myTarget.isValid()) {
    return false;
  }
  final List<PsiReference> references=ourReferenceService.getReferences(element,new PsiReferenceService.Hints(myTarget,offsetInElement));
  for (  PsiReference ref : references) {
    ProgressManager.checkCanceled();
    if (ReferenceRange.containsOffsetInElement(ref,offsetInElement) && ref.isReferenceTo(myTarget) && !consumer.process(ref)) {
      return false;
    }
  }
  return true;
}
