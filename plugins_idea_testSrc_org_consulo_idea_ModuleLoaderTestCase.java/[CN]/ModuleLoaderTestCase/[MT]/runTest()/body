{
  final File projectDir=new File("plugins/idea/testData/" + getName());
  final File ideaProjectDir=new File(projectDir,IdeaConstants.PROJECT_DIR);
  assertTrue(projectDir.exists());
  assertTrue(ideaProjectDir.exists());
  myIdeaProjectModel=new IdeaProjectModel(ideaProjectDir){
    @Nullable @Override public OrderRootType findOrderRootType(    String libraryEntryName){
      if (libraryEntryName.equals("CLASSES")) {
        return OrderRootType.CLASSES;
      }
 else       if (libraryEntryName.equals("SOURCES")) {
        return OrderRootType.SOURCES;
      }
 else       if (libraryEntryName.equals("DOCUMENTATION")) {
        return OrderRootType.DOCUMENTATION;
      }
      return null;
    }
    @NotNull @Override public Document loadDocument(    File file) throws JDOMException, IOException {
      Document document=super.loadDocument(file);
      PathMacroMap pathMacroMap=new PathMacroMap(){
        @Override public String substitute(        String text,        boolean caseSensitive){
          return StringUtil.replace(text,"$PROJECT_DIR$",projectDir.getAbsolutePath(),!caseSensitive);
        }
        @Override public int hashCode(){
          return 1;
        }
      }
;
      pathMacroMap.substitute(document.getRootElement(),false);
      return document;
    }
  }
;
  super.runTest();
}
