{
  if (path == null) {
    return;
  }
  final boolean isDirectory=path.isDirectory();
  final VirtualFile parentVFile=(!isDirectory) || (!path.exists()) ? path.getParent() : path;
  if (parentVFile == null) {
    return;
  }
  final File parent=new File(parentVFile.getPath());
  if (isSvnVersioned(project,parent)) {
    checkCanceled();
    final Collection<VirtualFile> pending=callback.fun(path);
    checkCanceled();
    for (    VirtualFile virtualFile : pending) {
      crawlWCRoots(project,virtualFile,callback);
    }
  }
 else   if (isDirectory) {
    checkCanceled();
    VirtualFile[] children=path.getChildren();
    for (int i=0; children != null && i < children.length; i++) {
      checkCanceled();
      VirtualFile child=children[i];
      if (child.isDirectory()) {
        crawlWCRoots(project,child,callback);
      }
    }
  }
}
