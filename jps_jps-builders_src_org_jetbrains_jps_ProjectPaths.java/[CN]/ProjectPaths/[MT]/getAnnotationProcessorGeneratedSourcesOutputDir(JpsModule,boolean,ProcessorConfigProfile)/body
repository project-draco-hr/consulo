{
  final String sourceDirName=profile.getGeneratedSourcesDirectoryName(forTests);
  if (profile.isOutputRelativeToContentRoot()) {
    List<String> roots=module.getContentRootsList().getUrls();
    if (roots.isEmpty()) {
      return null;
    }
    if (roots.size() > 1) {
      roots=new ArrayList<String>(roots);
      Collections.sort(roots,new Comparator<String>(){
        @Override public int compare(        String o1,        String o2){
          return o1.compareTo(o2);
        }
      }
);
    }
    final File parent=JpsPathUtil.urlToFile(roots.get(0));
    return StringUtil.isEmpty(sourceDirName) ? parent : new File(parent,sourceDirName);
  }
  final File outputDir=getModuleOutputDir(module,forTests);
  if (outputDir == null) {
    return null;
  }
  return StringUtil.isEmpty(sourceDirName) ? outputDir : new File(outputDir,sourceDirName);
}
