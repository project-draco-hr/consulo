{
  final Map<File,String> result=new LinkedHashMap<File,String>();
  collectPathsRecursively(chunk,JpsJavaClasspathKind.compile(includeTests),new PathsGetter(){
    public void apply(    JpsModule module,    JpsJavaClasspathKind kind){
      for (      JpsModuleSourceRoot root : module.getSourceRoots()) {
        if (root.getRootType().equals(JavaSourceRootType.SOURCE) || kind.isTestsIncluded() && root.getRootType().equals(JavaSourceRootType.TEST_SOURCE)) {
          JavaSourceRootProperties properties=(JavaSourceRootProperties)((JpsSimpleElement<?>)root.getProperties()).getData();
          String prefix=properties.getPackagePrefix();
          if (!prefix.isEmpty()) {
            prefix=prefix.replace('.','/');
            if (!prefix.endsWith("/")) {
              prefix+="/";
            }
          }
 else {
            prefix=null;
          }
          result.put(JpsPathUtil.urlToFile(root.getUrl()),prefix);
        }
      }
    }
  }
);
  return result;
}
