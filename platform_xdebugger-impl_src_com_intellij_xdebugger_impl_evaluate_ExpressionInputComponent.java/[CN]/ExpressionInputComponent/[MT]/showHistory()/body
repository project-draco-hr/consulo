{
  List<XExpression> expressions=myExpressionEditor.getRecentExpressions();
  if (!expressions.isEmpty()) {
    ListPopupImpl popup=new ListPopupImpl(new BaseListPopupStep<XExpression>(null,expressions){
      @Override public PopupStep onChosen(      XExpression selectedValue,      boolean finalChoice){
        myExpressionEditor.setExpression(selectedValue);
        myExpressionEditor.requestFocusInEditor();
        return FINAL_CHOICE;
      }
    }
){
      @Override protected ListCellRenderer getListElementRenderer(){
        return new ColoredListCellRenderer<XExpression>(){
          @Override protected void customizeCellRenderer(          JList list,          XExpression value,          int index,          boolean selected,          boolean hasFocus){
            append(value.getExpression());
          }
        }
;
      }
    }
;
    popup.getList().setFont(EditorUtil.getEditorFont());
    popup.showUnderneathOf(myExpressionEditor.getEditorComponent());
  }
}
