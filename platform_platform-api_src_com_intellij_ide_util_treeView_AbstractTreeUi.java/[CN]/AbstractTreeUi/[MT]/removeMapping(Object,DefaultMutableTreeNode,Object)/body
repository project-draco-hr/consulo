{
  final Object value=myElementToNodeMap.get(element);
  if (value != null) {
    if (value instanceof DefaultMutableTreeNode) {
      if (value.equals(node)) {
        myElementToNodeMap.remove(element);
      }
    }
 else {
      List<DefaultMutableTreeNode> nodes=(List<DefaultMutableTreeNode>)value;
      final boolean reallyRemoved=nodes.remove(node);
      if (reallyRemoved) {
        if (nodes.isEmpty()) {
          myElementToNodeMap.remove(element);
        }
      }
    }
  }
  final List<NodeAction> actions=myNodeActions.get(element);
  myNodeActions.remove(element);
  if (elementToPutNodeActionsFor != null && actions != null) {
    myNodeActions.put(elementToPutNodeActionsFor,actions);
  }
}
