{
  final ActionCallback result=new ActionCallback();
  if (isReady()) {
    result.setDone();
    return result;
  }
  if (myResettingToReadyNow.get()) {
    getReady(this).notify(result);
    return result;
  }
  myResettingToReadyNow.set(true);
  invokeLaterIfNeeded(new Runnable(){
    public void run(){
      if (!myResettingToReadyNow.get()) {
        result.setDone();
        return;
      }
      Progressive[] progressives=myBatchIndicators.keySet().toArray(new Progressive[myBatchIndicators.size()]);
      for (      Progressive each : progressives) {
        myBatchIndicators.remove(each).cancel();
        myBatchCallbacks.remove(each).setRejected();
      }
      resetToReadyNow().notify(result);
    }
  }
);
  return result;
}
