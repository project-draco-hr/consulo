{
  boolean toRevalidate=isValid(element) && !myRevalidatedObjects.contains(element) && getNodeForElement(element,false) == null && isInStructure(element);
  if (!toRevalidate) {
    runDone(onDone);
    return;
  }
  myRevalidatedObjects.add(element);
  AsyncResult<Object> revalidated=getBuilder().revalidateElement(element);
  if (revalidated == null) {
    runDone(onDone);
    return;
  }
  revalidated.doWhenDone(new AsyncResult.Handler<Object>(){
    @Override public void run(    final Object o){
      invokeLaterIfNeeded(false,new Runnable(){
        @Override public void run(){
          _expand(o,onDone,parentsOnly,checkIfInStructure,canSmartExpand);
        }
      }
);
    }
  }
).doWhenRejected(new Runnable(){
    @Override public void run(){
      runDone(onDone);
    }
  }
);
}
