{
  if (autoExpand) {
    int distance=getDistanceToAutoExpandRoot(element);
    if (distance < 0) {
      myAutoExpandRoots.add(element);
    }
 else {
      if (distance >= myAutoExpandDepth.asInteger() - 1) {
        autoExpand=false;
      }
    }
    if (autoExpand) {
      DefaultMutableTreeNode node=getNodeForElement(element,false);
      if (isInVisibleAutoExpandChain(node)) {
        autoExpand=true;
      }
 else {
        autoExpand=false;
      }
    }
  }
  return autoExpand;
}
