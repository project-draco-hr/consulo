{
  assertIsDispatchThread();
  DefaultMutableTreeNode[] uc=myUpdatingChildren.toArray(new DefaultMutableTreeNode[myUpdatingChildren.size()]);
  for (  DefaultMutableTreeNode each : uc) {
    resetIncompleteNode(each);
  }
  Object[] bg=myLoadedInBackground.keySet().toArray(new Object[myLoadedInBackground.size()]);
  for (  Object each : bg) {
    resetIncompleteNode(getNodeForElement(each,false));
  }
  myUpdaterState=null;
  getUpdater().reset();
  myYeildingNow=false;
  myYeildingPasses.clear();
  myYeildingDoneRunnables.clear();
  myNodeActions.clear();
  myNodeChildrenActions.clear();
  myUpdatingChildren.clear();
  myLoadedInBackground.clear();
  myDeferredExpansions.clear();
  myDeferredSelections.clear();
  ActionCallback result=getReady(this);
  result.doWhenDone(new Runnable(){
    public void run(){
      myResettingToReadyNow.set(false);
      setCancelRequested(false);
    }
  }
);
  maybeReady();
  return result;
}
