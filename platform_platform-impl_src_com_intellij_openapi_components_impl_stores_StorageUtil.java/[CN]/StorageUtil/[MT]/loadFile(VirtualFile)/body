{
  if (file == null || !file.exists()) {
    return NON_EXISTENT_FILE_DATA;
  }
  byte[] bytes=file.contentsToByteArray();
  String lineSeparator=file.getDetectedLineSeparator();
  if (lineSeparator == null) {
    String fileText=new String(bytes,CharsetToolkit.UTF8);
    final int index=fileText.indexOf('\n');
    lineSeparator=index == -1 ? SystemProperties.getLineSeparator() : index - 1 >= 0 ? fileText.charAt(index - 1) == '\r' ? "\r\n" : "\n" : "\n";
  }
  return Pair.create(bytes,lineSeparator);
}
