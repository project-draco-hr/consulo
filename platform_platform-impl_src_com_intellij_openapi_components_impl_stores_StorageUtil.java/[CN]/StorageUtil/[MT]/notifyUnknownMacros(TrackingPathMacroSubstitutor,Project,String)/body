{
  Collection<String> macros=substitutor.getUnknownMacros(componentName);
  if (!macros.isEmpty()) {
    final UnknownMacroNotification[] notifications=NotificationsManager.getNotificationsManager().getNotificationsOfType(UnknownMacroNotification.class,project);
    for (    final UnknownMacroNotification notification : notifications) {
      macros=ContainerUtil.subtract(macros,notification.getMacros());
    }
    if (!macros.isEmpty()) {
      Notifications.Bus.notify(new UnknownMacroNotification("Load Error","Load error: undefined path variables!",String.format("<p><i>%s</i> %s undefined. <a href=\"define\">Fix it</a>.</p>",StringUtil.join(macros,", "),macros.size() == 1 ? "is" : "are"),NotificationType.ERROR,new NotificationListener(){
        public void hyperlinkUpdate(        @NotNull Notification notification,        @NotNull HyperlinkEvent event){
          ((ProjectEx)project).checkUnknownMacros(true);
        }
      }
,macros),NotificationDisplayType.STICKY_BALLOON,project);
    }
  }
}
