{
  if (!file.exists()) {
    return;
  }
  VirtualFile virtualFile=cachedVirtualFile;
  if (virtualFile == null || !virtualFile.isValid()) {
    virtualFile=LocalFileSystem.getInstance().findFileByIoFile(file);
  }
  if (virtualFile == null) {
    LOG.info("Cannot find virtual file " + file.getAbsolutePath());
    FileUtil.delete(file);
  }
 else {
    AccessToken token=ApplicationManager.getApplication().acquireWriteActionLock(DocumentRunnable.IgnoreDocumentRunnable.class);
    try {
      virtualFile.delete(requestor);
    }
  finally {
      token.finish();
    }
  }
}
