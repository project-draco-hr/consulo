{
  final CommittedChangesCache cache=CommittedChangesCache.getInstance(myProject);
  cache.hasCachesForAnyRoot(new Consumer<Boolean>(){
    public void consume(    final Boolean notEmpty){
      if (Boolean.TRUE.equals(notEmpty)) {
        final List<CommittedChangeList> list=cache.getCachedIncomingChanges();
        if (list != null) {
          myBrowser.getEmptyText().setText(VcsBundle.message("incoming.changes.empty.message"));
          myBrowser.setItems(list,CommittedChangesBrowserUseCase.INCOMING);
        }
 else         if (refresh) {
          cache.loadIncomingChangesAsync(myListConsumer,inBackground);
        }
 else {
          myBrowser.getEmptyText().setText(VcsBundle.message("incoming.changes.empty.message"));
          myBrowser.setItems(Collections.<CommittedChangeList>emptyList(),CommittedChangesBrowserUseCase.INCOMING);
        }
      }
    }
  }
);
}
