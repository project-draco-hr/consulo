{
  final VirtualFile repo=command.getRepo();
  command.execute(new HgCommandResultHandler(){
    @Override public void process(    @Nullable HgCommandResult result){
      if (result == null) {
        return;
      }
      int commitsNum=getNumberOfPushedCommits(result);
      if (commitsNum > 0 && result.getExitValue() == PUSH_SUCCEEDED_EXIT_VALUE) {
        String successTitle="Pushed successfully";
        String successDescription=String.format("Pushed %d %s [%s]",commitsNum,StringUtil.pluralize("commit",commitsNum),repo.getPresentableName());
        new HgCommandResultNotifier(project).notifySuccess(successTitle,successDescription);
      }
 else       if (commitsNum == 0 && result.getExitValue() == NOTHING_TO_PUSH_EXIT_VALUE) {
        new HgCommandResultNotifier(project).notifySuccess("","Nothing to push");
      }
 else {
        new HgCommandResultNotifier(project).notifyError(result,"Push failed","Failed to push to [" + repo.getPresentableName() + "]");
      }
    }
  }
);
}
