{
  HgUtil.executeOnPooledThreadIfNeeded(new Runnable(){
    public void run(){
      List<VirtualFile> repositories=HgUtil.getHgRepositories(myProject);
      VirtualFile firstRepo=repositories.get(0);
      String defaultPushPath=getDefaultPushPath(myProject,firstRepo);
      List<HgTagBranch> branches=getBranches(myProject,firstRepo);
      final HgPushDialog dialog=new HgPushDialog(myProject,repositories,defaultPushPath,branches);
      UIUtil.invokeAndWaitIfNeeded(new Runnable(){
        @Override public void run(){
          dialog.show();
        }
      }
);
      if (dialog.isOK()) {
        push(myProject,dialog);
      }
    }
  }
);
}
