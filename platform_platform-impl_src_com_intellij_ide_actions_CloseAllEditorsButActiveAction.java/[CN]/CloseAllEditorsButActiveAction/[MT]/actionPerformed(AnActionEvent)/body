{
  Project project=e.getData(PlatformDataKeys.PROJECT);
  FileEditorManagerEx fileEditorManager=FileEditorManagerEx.getInstanceEx(project);
  VirtualFile selectedFile;
  final EditorWindow window=e.getData(EditorWindow.DATA_KEY);
  if (window != null) {
    selectedFile=e.getData(PlatformDataKeys.VIRTUAL_FILE);
    final VirtualFile[] files=window.getFiles();
    for (    final VirtualFile file : files) {
      if (file != selectedFile) {
        window.closeFile(file);
      }
    }
    return;
  }
  selectedFile=fileEditorManager.getSelectedFiles()[0];
  final VirtualFile[] siblings=fileEditorManager.getSiblings(selectedFile);
  for (  final VirtualFile sibling : siblings) {
    if (selectedFile != sibling) {
      fileEditorManager.closeFile(sibling);
    }
  }
}
