{
  Project project=e.getData(PlatformDataKeys.PROJECT);
  FileEditorManagerEx fileEditorManager=FileEditorManagerEx.getInstanceEx(project);
  VirtualFile selectedFile;
  final EditorWindow window=e.getData(EditorWindow.DATA_KEY);
  if (window != null) {
    window.closeAllExcept(e.getData(PlatformDataKeys.VIRTUAL_FILE));
    return;
  }
  selectedFile=fileEditorManager.getSelectedFiles()[0];
  final VirtualFile[] siblings=fileEditorManager.getSiblings(selectedFile);
  for (  final VirtualFile sibling : siblings) {
    if (selectedFile != sibling) {
      fileEditorManager.closeFile(sibling);
    }
  }
}
