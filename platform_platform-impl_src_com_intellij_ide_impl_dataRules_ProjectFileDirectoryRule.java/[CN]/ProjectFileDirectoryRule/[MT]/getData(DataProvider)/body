{
  VirtualFile dir=PlatformDataKeys.PROJECT_FILE_DIRECTORY.getData(dataProvider);
  if (dir == null) {
    final Project project=CommonDataKeys.PROJECT.getData(dataProvider);
    if (project != null) {
      dir=project.getBaseDir();
    }
  }
  return dir;
}
