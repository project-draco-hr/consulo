{
  if (processor instanceof ResolverProcessor)   ((ResolverProcessor)processor).setCurrentFileResolveContext(this);
  try {
    if (!super.processDeclarations(processor,substitutor,lastParent,place))     return false;
    for (    final GrParameter parameter : getParameters()) {
      if (!ResolveUtil.processElement(processor,parameter))       return false;
    }
    if (!ResolveUtil.processElement(processor,getOwner()))     return false;
    final PsiClass closureClass=getManager().findClass(GROOVY_LANG_CLOSURE,getResolveScope());
    if (closureClass != null && !closureClass.processDeclarations(processor,substitutor,lastParent,place))     return false;
    return true;
  }
  finally {
    if (processor instanceof ResolverProcessor)     ((ResolverProcessor)processor).setCurrentFileResolveContext(null);
  }
}
