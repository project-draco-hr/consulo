{
  super(project,true);
  myProject=project;
  setTitle(VcsBundle.message("apply.patch.dialog.title"));
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(true,false,false,false,false,false){
    @Override public boolean isFileSelectable(    VirtualFile file){
      return file.getFileType() == StdFileTypes.PATCH;
    }
  }
;
  myFileNameField.addBrowseFolderListener("Select Patch File","",project,descriptor);
  myFileNameField.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      updateOKAction();
      myStatusLabel.setForeground(UIUtil.getLabelForeground());
      myStatusLabel.setText("Loading...");
      myPatches=null;
      myLoadPatchAlarm.cancelAllRequests();
      myLoadPatchAlarm.addRequest(new Runnable(){
        public void run(){
          checkLoadPatches();
        }
      }
,400);
    }
  }
);
  myBaseDirectoryField.setText(project.getProjectFile().getParent().getPresentableUrl());
  myBaseDirectoryField.addBrowseFolderListener("Select Base Directory","",project,new FileChooserDescriptor(false,true,false,false,false,false));
  init();
}
