{
  final String fileName=myFileNameField.getText().replace(File.separatorChar,'/');
  final VirtualFile patchFile=LocalFileSystem.getInstance().findFileByPath(fileName);
  if (patchFile == null) {
    queueUpdateStatus("Cannot find patch file");
    return;
  }
  myPatches=new ArrayList<FilePatch>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      PatchReader reader;
      try {
        reader=new PatchReader(patchFile);
      }
 catch (      IOException e) {
        queueUpdateStatus("Error opening patch file: " + e.getMessage());
        return;
      }
      while (true) {
        FilePatch patch;
        try {
          patch=reader.readNextPatch();
        }
 catch (        PatchSyntaxException e) {
          queueUpdateStatus("Error loading patch file: " + e.getMessage());
          return;
        }
        if (patch == null) {
          break;
        }
        myPatches.add(patch);
      }
      autoDetectBaseDirectory();
    }
  }
);
  queueUpdateStatus(null);
}
