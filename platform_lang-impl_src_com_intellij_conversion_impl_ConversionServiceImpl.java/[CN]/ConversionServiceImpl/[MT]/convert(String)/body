{
  try {
    if (!isConversionNeeded(projectPath)) {
      return true;
    }
    final ConversionContextImpl context=new ConversionContextImpl(projectPath);
    final List<ConversionRunner> converters=getConvertersToRun(context);
    final Iterator<ConversionRunner> iterator=converters.iterator();
    Set<String> convertersToRunIds=new HashSet<String>();
    while (iterator.hasNext()) {
      ConversionRunner runner=iterator.next();
      if (!runner.isConversionNeeded() && !convertersToRunIds.contains(runner.getProvider().getId())) {
        iterator.remove();
      }
 else {
        convertersToRunIds.add(runner.getProvider().getId());
      }
    }
    ProjectConversionWizard wizard=new ProjectConversionWizard(context,converters);
    wizard.show();
    if (wizard.isConverted()) {
      saveConversionResult(context);
      return true;
    }
    return false;
  }
 catch (  CannotConvertException e) {
    LOG.info(e);
    Messages.showErrorDialog(IdeBundle.message("error.cannot.convert.project",e.getMessage()),IdeBundle.message("title.cannot.convert.project"));
    return false;
  }
}
