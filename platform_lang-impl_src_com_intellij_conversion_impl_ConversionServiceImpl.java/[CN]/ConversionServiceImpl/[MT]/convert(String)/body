{
  try {
    if (!isConversionNeeded(projectPath)) {
      return ConversionResultImpl.CONVERSION_NOT_NEEDED;
    }
    final ConversionContextImpl context=new ConversionContextImpl(projectPath);
    final List<ConversionRunner> converters=getConversionRunners(context);
    ConvertProjectDialog dialog=new ConvertProjectDialog(context,converters);
    dialog.show();
    if (dialog.isConverted()) {
      saveConversionResult(context);
      return new ConversionResultImpl(converters);
    }
    return ConversionResultImpl.CONVERSION_CANCELED;
  }
 catch (  CannotConvertException e) {
    LOG.info(e);
    Messages.showErrorDialog(IdeBundle.message("error.cannot.convert.project",e.getMessage()),IdeBundle.message("title.cannot.convert.project"));
    return ConversionResultImpl.ERROR_OCCURRED;
  }
}
