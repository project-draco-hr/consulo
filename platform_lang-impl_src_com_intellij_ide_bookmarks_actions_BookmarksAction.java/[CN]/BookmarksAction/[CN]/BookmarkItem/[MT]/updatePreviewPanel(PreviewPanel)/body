{
  VirtualFile file=myBookmark.getFile();
  Document document=FileDocumentManager.getInstance().getDocument(file);
  Project project=panel.myProject;
  if (document != null) {
    if (panel.myEditor == null || panel.myEditor.getDocument() != document) {
      panel.cleanup();
      panel.myEditor=EditorFactory.getInstance().createViewer(document,project);
      EditorHighlighter highlighter=EditorHighlighterFactory.getInstance().createEditorHighlighter(file,EditorColorsManager.getInstance().getGlobalScheme(),project);
      ((EditorEx)panel.myEditor).setHighlighter(highlighter);
      ((EditorEx)panel.myEditor).setFile(file);
      panel.myEditor.getSettings().setAnimatedScrolling(false);
      panel.myEditor.getSettings().setLineNumbersShown(true);
      panel.myEditor.getSettings().setFoldingOutlineShown(false);
      panel.add(panel.myEditor.getComponent(),BorderLayout.CENTER);
    }
    panel.myEditor.getCaretModel().moveToLogicalPosition(new LogicalPosition(myBookmark.getLine(),0));
    panel.myEditor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
  }
 else {
    panel.cleanup();
    JLabel label=new JLabel("Navigate to selected " + (file.isDirectory() ? "directory " : "file ") + "in Project View");
    label.setHorizontalAlignment(JLabel.CENTER);
    panel.add(label);
  }
}
