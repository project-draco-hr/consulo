{
  int count1=(templateContext.JAVA_CODE || templateContext.COMPLETION ? 1 : 0) + (templateContext.JAVA_COMMENT ? 1 : 0) + (templateContext.JAVA_STRING ? 1 : 0)+ (templateContext.OTHER ? 1 : 0);
  int count2=(templateContext.HTML ? 1 : 0) + (templateContext.XML ? 1 : 0) + (templateContext.JSP ? 1 : 0);
  int count=count1 + count2;
  FileType fileType;
  if ((templateContext.JAVA_CODE || templateContext.COMPLETION) && count == 1) {
    fileType=StdFileTypes.JAVA;
  }
 else   if (templateContext.HTML && count1 == 0) {
    fileType=StdFileTypes.HTML;
  }
 else   if (templateContext.XML && count1 == 0) {
    fileType=StdFileTypes.XML;
  }
 else   if (templateContext.JSP && count1 == 0) {
    fileType=StdFileTypes.JSP;
  }
 else {
    fileType=StdFileTypes.PLAIN_TEXT;
  }
  FileHighlighter highlighter=createTemplateTextHighlighter(fileType.getHighlighter(null));
  ((EditorEx)editor).setHighlighter(new LexerHighlighter(highlighter,EditorColorsManager.getInstance().getGlobalScheme()));
}
