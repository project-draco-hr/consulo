{
  if (AndroidEnableAdbServiceAction.isAdbServiceEnabled()) {
    if (bridge != null && isDdmsCorrupted(bridge)) {
      LOG.info("DDMLIB is corrupted and will be restarted");
      restartDdmlib(project);
    }
  }
 else {
    int result=Messages.showYesNoDialog(project,AndroidBundle.message("android.ddms.disabled.error"),AndroidBundle.message("android.ddms.disabled.dialog.title"),Messages.getQuestionIcon());
    if (result != 0) {
      return false;
    }
    if (!AndroidEnableAdbServiceAction.setAdbServiceEnabled(project,true)) {
      return false;
    }
  }
  return true;
}
