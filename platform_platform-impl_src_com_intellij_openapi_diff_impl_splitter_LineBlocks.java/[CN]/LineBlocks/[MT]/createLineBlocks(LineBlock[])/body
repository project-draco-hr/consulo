{
  Arrays.sort(blocks,LineBlock.COMPARATOR);
  List<Diff> diffs=new ArrayList<Diff>(blocks.length);
  for (  LineBlock block : blocks) {
    Interval interval1=new Interval(block.getStartingLine1(),block.getModifiedLines1());
    Interval interval2=new Interval(block.getStartingLine2(),block.getModifiedLines2());
    diffs.add(new Diff(interval1,interval2,TextDiffType.create(block.getType())));
  }
  return new LineBlocks(diffs);
}
