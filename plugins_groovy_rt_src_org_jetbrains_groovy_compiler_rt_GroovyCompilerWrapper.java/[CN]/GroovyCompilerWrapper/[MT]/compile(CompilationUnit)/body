{
  List<OutputItem> compiledFiles=new ArrayList<OutputItem>();
  try {
    unit.compile(forStubs ? Phases.CONVERSION : Phases.ALL);
    addCompiledFiles(unit,compiledFiles,forStubs);
  }
 catch (  CompilationFailedException e) {
    processCompilationException(e);
  }
catch (  IOException e) {
    processException(e,"");
  }
catch (  GroovyBugError e) {
    processException(e,"");
  }
catch (  NoClassDefFoundError e) {
    final String className=e.getMessage();
    if (className.startsWith("org/apache/ivy/")) {
      addMessageWithoutLocation("Cannot @Grab without Ivy, please add it to your module dependencies (NoClassDefFoundError: " + className + ")",true);
    }
 else {
      throw e;
    }
  }
catch (  TypeNotPresentException e) {
    processException(e,LINKAGE_ERROR);
  }
catch (  LinkageError e) {
    processException(e,LINKAGE_ERROR);
  }
 finally {
    addWarnings(unit.getErrorCollector());
  }
  return compiledFiles;
}
