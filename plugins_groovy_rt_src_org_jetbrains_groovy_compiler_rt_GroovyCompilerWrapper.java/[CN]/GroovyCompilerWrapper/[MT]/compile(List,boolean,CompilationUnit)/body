{
  List compiledFiles=new ArrayList();
  try {
    unit.compile(forStubs ? Phases.CONVERSION : Phases.ALL);
    addCompiledFiles(unit,compiledFiles,forStubs,collector);
  }
 catch (  CompilationFailedException e) {
    processCompilationException(e,collector,forStubs);
  }
catch (  IOException e) {
    processException(e,collector,forStubs);
  }
catch (  NoClassDefFoundError e) {
    addMessageWithoutLocation(collector,"Groovyc error: " + e.getMessage() + " class not found, try compiling it explicitly",!forStubs);
  }
 finally {
    addWarnings(unit.getErrorCollector(),collector);
  }
  return compiledFiles;
}
