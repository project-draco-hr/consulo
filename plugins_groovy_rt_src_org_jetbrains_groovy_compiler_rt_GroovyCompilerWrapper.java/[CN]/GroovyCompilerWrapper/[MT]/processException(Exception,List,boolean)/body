{
  if (exception instanceof GroovyRuntimeException) {
    addErrorMessage((GroovyRuntimeException)exception,collector);
  }
 else   if (forStubs) {
    addMessageWithoutLocation(collector,"Groovyc stub generation failed: " + exception.getMessage(),false);
  }
 else {
    final StringWriter writer=new StringWriter();
    exception.printStackTrace(new PrintWriter(writer));
    addMessageWithoutLocation(collector,writer.toString(),true);
  }
}
