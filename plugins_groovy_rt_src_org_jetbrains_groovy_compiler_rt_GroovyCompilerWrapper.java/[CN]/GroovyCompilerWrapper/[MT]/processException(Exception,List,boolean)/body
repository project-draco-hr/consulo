{
  if (exception instanceof GroovyRuntimeException) {
    addErrorMessage((GroovyRuntimeException)exception,collector);
    return;
  }
  if (forStubs) {
    collector.add(new CompilerMessage(CompilerMessage.INFORMATION,"Groovyc stub generation failed",null,-1,-1));
  }
  final StringWriter writer=new StringWriter();
  exception.printStackTrace(new PrintWriter(writer));
  collector.add(new CompilerMessage(forStubs ? CompilerMessage.INFORMATION : CompilerMessage.ERROR,writer.toString(),null,-1,-1));
}
