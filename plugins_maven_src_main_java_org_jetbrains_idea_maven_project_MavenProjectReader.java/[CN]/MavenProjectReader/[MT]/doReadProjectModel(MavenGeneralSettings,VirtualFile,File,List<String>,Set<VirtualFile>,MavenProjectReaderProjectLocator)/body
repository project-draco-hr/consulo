{
  Model mavenModel=doReadProjectModel(file,generalSettings);
  List<Profile> activatedProfiles=applyProfiles(mavenModel,getBaseDir(file),activeProfiles);
  repairModelHeader(mavenModel);
  resolveInheritance(generalSettings,mavenModel,file,localRepository,activeProfiles,recursionGuard,locator);
  repairModelBody(mavenModel);
  Pair<Model,List<Profile>> result=Pair.create(mavenModel,activatedProfiles);
  return result;
}
