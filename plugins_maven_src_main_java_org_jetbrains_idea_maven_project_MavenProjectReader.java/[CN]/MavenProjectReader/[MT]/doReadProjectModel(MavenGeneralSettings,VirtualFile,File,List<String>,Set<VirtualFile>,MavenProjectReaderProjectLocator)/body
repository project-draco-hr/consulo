{
  Model mavenModel=myRawModelsCache.get(file);
  if (mavenModel == null) {
    mavenModel=doReadProjectModel(file,generalSettings);
    myRawModelsCache.put(file,mavenModel);
  }
  List<Profile> activatedProfiles=applyProfiles(mavenModel,getBaseDir(file),activeProfiles);
  repairModelHeader(mavenModel);
  resolveInheritance(generalSettings,mavenModel,file,localRepository,activeProfiles,recursionGuard,locator);
  repairModelBody(mavenModel);
  return Pair.create(mavenModel,activatedProfiles);
}
