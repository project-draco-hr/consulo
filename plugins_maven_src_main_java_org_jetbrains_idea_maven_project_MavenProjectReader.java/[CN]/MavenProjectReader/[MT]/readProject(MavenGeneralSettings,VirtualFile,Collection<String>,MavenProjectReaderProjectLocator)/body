{
  Pair<RawModelReadResult,Collection<Profile>> readResult=doReadProjectModel(generalSettings,file,explicitProfiles,new THashSet<VirtualFile>(),locator);
  File basedir=getBaseDir(file);
  Model model=expandProperties(readResult.first.model,basedir);
  alignModel(model,basedir);
  Collection<Profile> activeProfiles=readResult.second;
  MavenProject mavenProject=new MavenProject(model);
  mavenProject.setFile(new File(file.getPath()));
  mavenProject.setActiveProfiles(new ArrayList<Profile>(activeProfiles));
  JBMavenProjectHelper.setSourceRoots(mavenProject,Collections.singletonList(model.getBuild().getSourceDirectory()),Collections.singletonList(model.getBuild().getTestSourceDirectory()),Collections.singletonList(model.getBuild().getScriptSourceDirectory()));
  return new MavenProjectReaderResult(generalSettings,readResult.first.problems,Collections.EMPTY_SET,generalSettings.getEffectiveLocalRepository(),mavenProject);
}
