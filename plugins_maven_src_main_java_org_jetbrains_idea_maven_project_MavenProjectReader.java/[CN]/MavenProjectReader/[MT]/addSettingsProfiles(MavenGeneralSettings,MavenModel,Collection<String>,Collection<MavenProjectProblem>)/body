{
  if (mySettingsProfilesWithProblemsCache == null) {
    List<MavenProfile> settingsProfiles=new ArrayList<MavenProfile>();
    Collection<MavenProjectProblem> settingsProblems=MavenProjectProblem.createProblemsList();
    for (    VirtualFile each : generalSettings.getEffectiveSettingsFiles()) {
      collectProfilesFromSettingsXmlOrProfilesXml(each,"settings",false,MavenConstants.PROFILE_FROM_SETTINGS_XML,settingsProfiles,alwaysOnProfiles,settingsProblems);
    }
    mySettingsProfilesWithProblemsCache=Pair.create(settingsProfiles,settingsProblems);
  }
  List<MavenProfile> modelProfiles=model.getProfiles();
  for (  MavenProfile each : mySettingsProfilesWithProblemsCache.first) {
    addProfileIfDoesNotExist(each,modelProfiles);
  }
  problems.addAll(mySettingsProfilesWithProblemsCache.second);
}
