{
  List<MavenProfile> result=new ArrayList<MavenProfile>();
  collectProfiles(MavenJDOMUtil.findChildrenByPath(xmlProject,"profiles","profile"),result,PROFILE_FROM_POM);
  VirtualFile profilesFile=MavenUtil.findProfilesXmlFile(projectFile);
  if (profilesFile != null) {
    collectProfilesFromSettingsXmlOrProfilesXml(profilesFile,"profilesXml",true,PROFILE_FROM_PROFILES_XML,result,alwaysOnProfiles,problems);
  }
  return result;
}
