{
  if (mySettingsProfilesWithProblemsCache == null) {
    List<Profile> settingsProfiles=new ArrayList<Profile>();
    Collection<MavenProjectProblem> settingsProblems=createProblemsList();
    for (    VirtualFile each : generalSettings.getEffectiveSettingsFiles()) {
      collectProfilesFromSettingsFile(each,settingsProfiles,settingsProblems);
    }
    mySettingsProfilesWithProblemsCache=Pair.create(settingsProfiles,settingsProblems);
  }
  List<Profile> modelProfiles=model.getProfiles();
  for (  Profile each : mySettingsProfilesWithProblemsCache.first) {
    addProfileIfDoesNotExist(each,modelProfiles);
  }
  problems.addAll(mySettingsProfilesWithProblemsCache.second);
}
