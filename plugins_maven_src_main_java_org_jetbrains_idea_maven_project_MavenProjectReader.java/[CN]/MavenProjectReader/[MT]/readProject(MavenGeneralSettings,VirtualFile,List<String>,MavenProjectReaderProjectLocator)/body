{
  File localRepository=generalSettings.getEffectiveLocalRepository();
  Pair<Model,List<Profile>> readResult=doReadProjectModel(generalSettings,file,localRepository,activeProfiles,new HashSet<VirtualFile>(),locator);
  File basedir=getBaseDir(file);
  Model model=expandProperties(readResult.first,basedir);
  alignModel(model,basedir);
  MavenProject mavenProject=new MavenProject(model);
  mavenProject.setFile(new File(file.getPath()));
  mavenProject.setActiveProfiles(readResult.second);
  JBMavenProjectHelper.setSourceRoots(mavenProject,Collections.singletonList(model.getBuild().getSourceDirectory()),Collections.singletonList(model.getBuild().getTestSourceDirectory()),Collections.singletonList(model.getBuild().getScriptSourceDirectory()));
  return new MavenProjectReaderResult(true,activeProfiles,Collections.EMPTY_LIST,Collections.EMPTY_SET,localRepository,mavenProject);
}
