{
  final AutoCompletionPolicy policy=item.getAutoCompletionPolicy();
  if (policy == AutoCompletionPolicy.NEVER_AUTOCOMPLETE)   return false;
  if (policy == AutoCompletionPolicy.ALWAYS_AUTOCOMPLETE)   return true;
  if (!isAutocompleteOnInvocation())   return false;
  if (context.getOffsetMap().getOffset(CompletionInitializationContext.IDENTIFIER_END_OFFSET) != context.getSelectionEndOffset())   return false;
  if (policy == AutoCompletionPolicy.GIVE_CHANCE_TO_OVERWRITE)   return true;
  if (StringUtil.isEmpty(item.getPrefixMatcher().getPrefix()) && myCompletionType != CompletionType.SMART)   return false;
  return true;
}
