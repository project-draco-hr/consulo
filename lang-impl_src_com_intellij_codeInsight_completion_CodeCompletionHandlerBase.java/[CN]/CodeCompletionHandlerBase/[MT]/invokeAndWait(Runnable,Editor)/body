{
  ProgressManager.getInstance().checkCanceled();
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    runnable.run();
  }
 else {
    ApplicationManager.getApplication().invokeAndWait(runnable,ModalityState.stateForComponent(editor.getComponent()));
  }
}
