{
  new WriteCommandAction(context.project){
    protected void run(    Result result) throws Throwable {
      String uniqueText=_uniqueText;
      if (item.getObject() instanceof DeferredUserLookupValue && item instanceof LookupItem) {
        if (!((DeferredUserLookupValue)item.getObject()).handleUserSelection((LookupItem)item,context.project)) {
          return;
        }
        uniqueText=item.getLookupString();
      }
      if (!StringUtil.startsWithIgnoreCase(uniqueText,item.getPrefixMatcher().getPrefix())) {
        FeatureUsageTracker.getInstance().triggerFeatureUsed(CodeCompletionFeatures.EDITING_COMPLETION_CAMEL_HUMPS);
      }
      insertLookupString(context,offset2,uniqueText);
      context.editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
      lookupItemSelected(context,item,Lookup.AUTO_INSERT_SELECT_CHAR,false,items);
    }
  }
.execute();
}
