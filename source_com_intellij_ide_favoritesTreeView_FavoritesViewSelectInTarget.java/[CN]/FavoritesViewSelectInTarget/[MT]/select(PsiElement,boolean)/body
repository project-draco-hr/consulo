{
  while (true) {
    if (element instanceof PsiFile) {
      break;
    }
    if (element instanceof PsiClass && element.getParent() instanceof PsiFile) {
      break;
    }
    element=element.getParent();
  }
  if (element instanceof PsiJavaFile) {
    final PsiClass[] classes=((PsiJavaFile)element).getClasses();
    if (classes.length > 0) {
      element=classes[0];
    }
  }
  final PsiElement _element=element.getOriginalElement();
  selectElement(new Runnable(){
    public void run(){
      final VirtualFile virtualFile=BasePsiNode.getVirtualFile(_element);
      final FavoritesTreeViewPanel suitableFavoritesList=findSuitableFavoritesList(virtualFile);
      if (suitableFavoritesList != null) {
        suitableFavoritesList.selectElement(_element,virtualFile);
        final ToolWindowManager windowManager=ToolWindowManager.getInstance(myProject);
        windowManager.getToolWindow(ToolWindowId.FAVORITES_VIEW).activate(null);
        final FavoritesViewImpl favoritesView=FavoritesViewImpl.getInstance(myProject);
        favoritesView.setSelectedContent(favoritesView.getContent(suitableFavoritesList));
      }
    }
  }
,requestFocus);
}
