{
  component.startWait();
  if (cancelRequests) {
    myUpdateDocAlarm.cancelAllRequests();
  }
  myUpdateDocAlarm.addRequest(new Runnable(){
    public void run(){
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          if (component.isEmpty()) {
            component.setText(CodeInsightBundle.message("javadoc.fetching.progress"));
          }
        }
      }
);
    }
  }
,600);
  myUpdateDocAlarm.addRequest(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          final String text=provider.getJavaDoc();
          if (text == null) {
            component.setText(CodeInsightBundle.message("no.documentation.found"),true);
          }
 else           if (text.length() == 0) {
            component.setText(component.getText(),true);
          }
 else {
            component.setData(provider.getElement(),text);
          }
        }
      }
);
    }
  }
,10);
}
