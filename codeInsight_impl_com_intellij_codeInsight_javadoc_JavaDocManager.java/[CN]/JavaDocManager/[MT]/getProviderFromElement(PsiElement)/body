{
  SmartPsiElementPointer originalElementPointer=element != null ? element.getUserData(ORIGINAL_ELEMENT_KEY) : null;
  PsiElement originalElement=originalElementPointer != null ? originalElementPointer.getElement() : null;
  PsiFile containingFile=(originalElement != null) ? originalElement.getContainingFile() : (element != null) ? element.getContainingFile() : null;
  VirtualFile vfile=(containingFile != null) ? containingFile.getVirtualFile() : null;
  return (vfile != null) ? getProvider(vfile.getFileType()) : null;
}
