{
  final PasswordAuthentication[] value=new PasswordAuthentication[1];
  final Runnable runnable=new Runnable(){
    public void run(){
      final AuthenticationDialog dlg=new AuthenticationDialog(PopupUtil.getActiveComponent(),"Proxy authentication: " + host,"Please enter credentials for: " + prompt,"","",remember);
      dlg.show();
      if (dlg.getExitCode() == DialogWrapper.OK_EXIT_CODE) {
        final AuthenticationPanel panel=dlg.getPanel();
        final boolean remember1=remember && panel.isRememberPassword();
        value[0]=new PasswordAuthentication(panel.getLogin(),panel.getPassword());
        putGenericPassword(host,port,value[0],remember1);
      }
 else {
        setGenericPasswordCanceled(host,port);
      }
    }
  }
;
  WaitForProgressToShow.runOrInvokeAndWaitAboveProgress(runnable,ModalityState.any());
  return value[0];
}
