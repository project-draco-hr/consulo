{
  CharArrayWriter cw=new CharArrayWriter((4 * content.length) / 3);
  int idx=0;
  int x=0;
  for (int i=0; i < content.length; i++) {
    if (idx == 0)     x=(content[i] & 0xff) << 16;
 else     if (idx == 1)     x=x | ((content[i] & 0xff) << 8);
 else     x=x | (content[i] & 0xff);
    idx++;
    if (idx == 3) {
      cw.write(alphabet[x >> 18]);
      cw.write(alphabet[(x >> 12) & 0x3f]);
      cw.write(alphabet[(x >> 6) & 0x3f]);
      cw.write(alphabet[x & 0x3f]);
      idx=0;
    }
  }
  if (idx == 1) {
    cw.write(alphabet[x >> 18]);
    cw.write(alphabet[(x >> 12) & 0x3f]);
    cw.write('=');
    cw.write('=');
  }
  if (idx == 2) {
    cw.write(alphabet[x >> 18]);
    cw.write(alphabet[(x >> 12) & 0x3f]);
    cw.write(alphabet[(x >> 6) & 0x3f]);
    cw.write('=');
  }
  return cw.toCharArray();
}
