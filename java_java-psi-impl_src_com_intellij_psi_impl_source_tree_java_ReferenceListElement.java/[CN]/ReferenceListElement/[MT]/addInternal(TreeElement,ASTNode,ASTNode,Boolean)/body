{
  if (first == last && first.getElementType() == JavaElementType.JAVA_CODE_REFERENCE) {
    if (getLastChildNode() != null && getLastChildNode().getElementType() == TokenType.ERROR_ELEMENT) {
      super.deleteChildInternal(getLastChildNode());
    }
  }
  final TreeElement firstAdded=super.addInternal(first,last,anchor,before);
  final CharTable treeCharTab=SharedImplUtil.findCharTableByTree(this);
  if (first == last && first.getElementType() == JavaElementType.JAVA_CODE_REFERENCE) {
    ASTNode element=first;
    for (ASTNode child=element.getTreeNext(); child != null; child=child.getTreeNext()) {
      if (child.getElementType() == JavaTokenType.COMMA)       break;
      if (child.getElementType() == JavaElementType.JAVA_CODE_REFERENCE) {
        TreeElement comma=Factory.createSingleLeafElement(JavaTokenType.COMMA,",",0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,element,Boolean.FALSE);
        break;
      }
    }
    for (ASTNode child=element.getTreePrev(); child != null; child=child.getTreePrev()) {
      if (child.getElementType() == JavaTokenType.COMMA)       break;
      if (child.getElementType() == JavaElementType.JAVA_CODE_REFERENCE) {
        TreeElement comma=Factory.createSingleLeafElement(JavaTokenType.COMMA,",",0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,child,Boolean.FALSE);
        break;
      }
    }
  }
  IElementType keywordType=getKeywordType();
  String keywordText=getKeywordText();
  if (findChildByType(keywordType) == null && findChildByType(JavaElementType.JAVA_CODE_REFERENCE) != null) {
    LeafElement keyword=Factory.createSingleLeafElement(keywordType,keywordText,SharedImplUtil.findCharTableByTree(this),getManager());
    super.addInternal(keyword,keyword,getFirstChildNode(),Boolean.TRUE);
  }
  return firstAdded;
}
