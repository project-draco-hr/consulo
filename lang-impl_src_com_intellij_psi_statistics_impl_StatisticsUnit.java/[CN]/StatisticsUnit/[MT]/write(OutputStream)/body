{
  final DataOutputStream dataOut=new DataOutputStream(out);
  dataOut.writeInt(FORMAT_VERSION_NUMBER);
  dataOut.writeInt(myDataMap.size());
  final IOException[] ex=new IOException[1];
  myDataMap.forEachEntry(new TObjectIntProcedure<MyDataKey>(){
    public boolean execute(    MyDataKey key,    int value){
      try {
        dataOut.writeUTF(key.key1);
        dataOut.writeUTF(key.key2);
        dataOut.writeInt(value);
        return true;
      }
 catch (      IOException e) {
        ex[0]=e;
        return false;
      }
    }
  }
);
  if (ex[0] != null) {
    throw ex[0];
  }
}
