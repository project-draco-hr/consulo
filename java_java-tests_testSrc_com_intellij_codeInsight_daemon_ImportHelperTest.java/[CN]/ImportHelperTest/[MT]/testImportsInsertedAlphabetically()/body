{
  @NonNls String text="class I {}";
  final PsiJavaFile file=(PsiJavaFile)configureByText(StdFileTypes.JAVA,text);
  assertEmpty(filter(doHighlighting(),HighlightSeverity.ERROR));
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            checkAddImport(file,"java.util.List","java.util.List");
            checkAddImport(file,"java.util.ArrayList","java.util.ArrayList","java.util.List");
            checkAddImport(file,"java.util.HashMap","java.util.ArrayList","java.util.HashMap","java.util.List");
            checkAddImport(file,"java.util.SortedMap","java.util.ArrayList","java.util.HashMap","java.util.List","java.util.SortedMap");
            checkAddImport(file,CommonClassNames.JAVA_UTIL_MAP,"java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap");
            checkAddImport(file,"java.util.AbstractList","java.util.AbstractList","java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap");
            checkAddImport(file,"java.util.AbstractList","java.util.AbstractList","java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap");
            checkAddImport(file,"java.util.TreeMap","java.util.AbstractList","java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap","java.util.TreeMap");
            checkAddImport(file,"java.util.concurrent.atomic.AtomicBoolean","java.util.AbstractList","java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap","java.util.TreeMap","java.util.concurrent.atomic.AtomicBoolean");
            checkAddImport(file,"java.io.File","java.io.File","java.util.AbstractList","java.util.ArrayList","java.util.HashMap","java.util.List",CommonClassNames.JAVA_UTIL_MAP,"java.util.SortedMap","java.util.TreeMap","java.util.concurrent.atomic.AtomicBoolean");
          }
 catch (          Throwable e) {
            LOG.error(e);
          }
        }
      }
);
    }
  }
,"","");
}
