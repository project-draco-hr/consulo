{
  @NonNls String text="import xxx.yyy; class S { } <caret> ";
  configureByText(StdFileTypes.JAVA,text);
  boolean old=CodeInsightSettings.getInstance().OPTIMIZE_IMPORTS_ON_THE_FLY;
  CodeInsightSettings.getInstance().OPTIMIZE_IMPORTS_ON_THE_FLY=true;
  DaemonCodeAnalyzerSettings.getInstance().setImportHintEnabled(true);
  try {
    List<HighlightInfo> errs=filter(doHighlighting(),HighlightSeverity.ERROR);
    assertEquals(1,errs.size());
    assertEquals(1,((PsiJavaFile)getFile()).getImportList().getAllImportStatements().length);
    type("/* */");
    errs=filter(doHighlighting(),HighlightSeverity.ERROR);
    assertEquals(1,errs.size());
    UIUtil.dispatchAllInvocationEvents();
    assertEmpty(((PsiJavaFile)getFile()).getImportList().getAllImportStatements());
  }
  finally {
    CodeInsightSettings.getInstance().OPTIMIZE_IMPORTS_ON_THE_FLY=old;
  }
}
