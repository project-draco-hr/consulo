{
  @NonNls String text="class S { /*ArrayList l; HashMap h; <caret>*/ }";
  configureByText(StdFileTypes.JAVA,text);
  boolean old=CodeInsightSettings.getInstance().ADD_UNAMBIGIOUS_IMPORTS_ON_THE_FLY;
  CodeInsightSettings.getInstance().ADD_UNAMBIGIOUS_IMPORTS_ON_THE_FLY=true;
  DaemonCodeAnalyzerSettings.getInstance().setImportHintEnabled(true);
  try {
    doHighlighting();
    assertEmpty(((PsiJavaFile)getFile()).getImportList().getAllImportStatements());
    CommentByBlockCommentAction action=new CommentByBlockCommentAction();
    action.actionPerformedImpl(getProject(),getEditor());
    assertEmpty(highlightErrors());
    assertNotSame(0,((PsiJavaFile)getFile()).getImportList().getAllImportStatements().length);
  }
  finally {
    CodeInsightSettings.getInstance().ADD_UNAMBIGIOUS_IMPORTS_ON_THE_FLY=old;
  }
}
