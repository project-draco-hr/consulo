{
  final THashSet<LookupElement> set=new THashSet<LookupElement>();
  final Condition<String> nameCondition=matcher == null ? null : new Condition<String>(){
    public boolean value(    String s){
      return matcher.prefixMatches(s);
    }
  }
;
  final JavaCompletionProcessor processor=new JavaCompletionProcessor(element,elementFilter,checkAccess,nameCondition);
  javaReference.processVariants(processor);
  for (  CompletionElement completionElement : processor.getResults()) {
    addLookupItem(set,completionElement.getElement(),completionElement.getSubstitutor(),completionElement.getQualifier());
  }
  return set;
}
