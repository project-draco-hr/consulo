{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("editing.completion.variable.name");
  JavaCodeStyleManager codeStyleManager=JavaCodeStyleManager.getInstance(context.project);
  final VariableKind variableKind=JavaCodeStyleManager.getInstance(var.getProject()).getVariableKind(var);
  final String prefix=context.getPrefix();
  if (var.getType() == PsiType.VOID || prefix.startsWith(CompletionUtil.IS_PREFIX) || prefix.startsWith(CompletionUtil.GET_PREFIX) || prefix.startsWith(CompletionUtil.SET_PREFIX)) {
    CompletionUtil.completeVariableNameForRefactoring(var.getProject(),set,prefix,var.getType(),variableKind);
    return;
  }
  SuggestedNameInfo suggestedNameInfo=codeStyleManager.suggestVariableName(variableKind,null,null,var.getType());
  final String[] suggestedNames=suggestedNameInfo.names;
  CompletionUtil.tunePreferencePolicy(LookupItemUtil.addLookupItems(set,suggestedNames,prefix),suggestedNameInfo);
  if (set.isEmpty()) {
    final String requiredSuffix=codeStyleManager.getSuffixByVariableKind(variableKind);
    if (variableKind != VariableKind.STATIC_FINAL_FIELD) {
      for (int i=0; i < suggestedNames.length; i++)       suggestedNames[i]=codeStyleManager.variableNameToPropertyName(suggestedNames[i],variableKind);
    }
    suggestedNameInfo=new SuggestedNameInfo(CompletionUtil.getOverlappedNameVersions(prefix,suggestedNames,requiredSuffix)){
      public void nameChoosen(      String name){
      }
    }
;
    CompletionUtil.tunePreferencePolicy(LookupItemUtil.addLookupItems(set,suggestedNameInfo.names,prefix),suggestedNameInfo);
  }
  CompletionUtil.tunePreferencePolicy(LookupItemUtil.addLookupItems(set,StatisticsManager.getInstance().getNameSuggestions(var.getType(),StatisticsManager.getContext(var),prefix),prefix),suggestedNameInfo);
  CompletionUtil.tunePreferencePolicy(LookupItemUtil.addLookupItems(set,CompletionUtil.getUnresolvedReferences(var.getParent(),false),context.getPrefix()),suggestedNameInfo);
}
