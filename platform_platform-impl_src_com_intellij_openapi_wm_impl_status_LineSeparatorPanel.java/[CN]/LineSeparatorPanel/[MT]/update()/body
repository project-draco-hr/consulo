{
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      String lineSeparator=null;
      VirtualFile file=getSelectedFile();
      if (file == null || !file.isWritable()) {
        myActionEnabled=false;
      }
 else {
        lineSeparator=LoadTextUtil.detectLineSeparator(file,true);
      }
      myComponent.resetColor();
      if (lineSeparator == null) {
        myComponent.setText("");
      }
 else {
        myActionEnabled=true;
        myComponent.setToolTipText(String.format("Line separator: %s%nClick to change",StringUtil.escapeLineBreak(lineSeparator)));
        myComponent.setText(LineSeparator.fromString(lineSeparator).toString());
      }
      if (myActionEnabled) {
        myComponent.setForeground(UIUtil.getActiveTextColor());
      }
 else {
        myComponent.setForeground(UIUtil.getInactiveTextColor());
      }
      if (myStatusBar != null) {
        myStatusBar.updateWidget(ID());
      }
    }
  }
);
}
