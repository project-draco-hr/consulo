{
  IdeaModule module=dependency.getDependencyModule();
  if (module == null) {
    throw new IllegalStateException(String.format("Can't parse gradle module dependency '%s'. Reason: referenced module is null",dependency));
  }
  String moduleName=module.getName();
  if (moduleName == null) {
    throw new IllegalStateException(String.format("Can't parse gradle module dependency '%s'. Reason: referenced module name is undefined (module: '%s') ",dependency,module));
  }
  Set<String> registeredModuleNames=new HashSet<String>();
  for (  GradleModule gradleModule : intellijProject.getModules()) {
    registeredModuleNames.add(gradleModule.getName());
    if (gradleModule.getName().equals(moduleName)) {
      return new GradleModuleDependency(ownerModule,gradleModule);
    }
  }
  throw new IllegalStateException(String.format("Can't parse gradle module dependency '%s'. Reason: no module with such name (%s) is found. Registered modules: %s",dependency,moduleName,registeredModuleNames));
}
