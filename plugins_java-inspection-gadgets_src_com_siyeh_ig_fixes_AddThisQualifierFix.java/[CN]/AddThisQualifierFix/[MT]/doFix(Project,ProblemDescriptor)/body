{
  final PsiReferenceExpression expression=(PsiReferenceExpression)descriptor.getPsiElement();
  if (expression.getQualifierExpression() != null) {
    return;
  }
  final PsiElement target=expression.resolve();
  if (!(target instanceof PsiMember)) {
    return;
  }
  final PsiMember member=(PsiMember)target;
  final PsiClass memberClass=member.getContainingClass();
  if (memberClass == null) {
    return;
  }
  PsiClass containingClass=ClassUtils.getContainingClass(expression);
  @NonNls final String newExpression;
  if (InheritanceUtil.isInheritorOrSelf(containingClass,memberClass,true)) {
    newExpression="this." + expression.getText();
  }
 else {
    containingClass=ClassUtils.getContainingClass(containingClass);
    if (containingClass == null) {
      return;
    }
    while (!InheritanceUtil.isInheritorOrSelf(containingClass,memberClass,true)) {
      containingClass=ClassUtils.getContainingClass(containingClass);
      if (containingClass == null) {
        return;
      }
    }
    newExpression=containingClass.getQualifiedName() + ".this." + expression.getText();
  }
  replaceExpressionAndShorten(expression,newExpression);
}
