{
  if (fileOrDir.isDirectory()) {
    DirectoryInfo info=getInfoForDirectory(fileOrDir);
    if (info == null)     return false;
    return info.isInModuleSource || info.isInLibrarySource;
  }
 else {
    VirtualFile parent=fileOrDir.getParent();
    return parent != null && isInSource(parent);
  }
}
