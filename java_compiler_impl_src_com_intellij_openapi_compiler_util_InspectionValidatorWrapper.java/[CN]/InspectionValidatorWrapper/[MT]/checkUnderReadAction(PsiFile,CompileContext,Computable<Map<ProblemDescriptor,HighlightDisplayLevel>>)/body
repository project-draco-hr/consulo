{
  AccessToken token=ReadAction.start();
  try {
    if (!file.isValid())     return false;
    final Document document=myPsiDocumentManager.getCachedDocument(file);
    if (document != null && myPsiDocumentManager.isUncommited(document)) {
      final String url=file.getViewProvider().getVirtualFile().getUrl();
      context.addMessage(CompilerMessageCategory.WARNING,CompilerBundle.message("warning.text.file.has.been.changed"),url,-1,-1);
      return false;
    }
    if (reportProblems(context,runnable.compute()))     return false;
  }
  finally {
    token.finish();
  }
  return true;
}
