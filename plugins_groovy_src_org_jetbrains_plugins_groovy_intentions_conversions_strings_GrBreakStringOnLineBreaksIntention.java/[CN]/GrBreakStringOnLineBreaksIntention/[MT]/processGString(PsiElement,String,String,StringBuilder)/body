{
  final ASTNode node=element.getNode();
  for (ASTNode child=node.getFirstChildNode(); child != null; child=child.getTreeNext()) {
    final IElementType type=child.getElementType();
    if (type == mGSTRING_BEGIN || type == mGSTRING_END)     continue;
    if (type == GSTRING_INJECTION) {
      buffer.append(child.getText());
    }
 else {
      value=child.getText();
      int prev=0;
      if (!isInjection(child.getTreePrev())) {
        buffer.append(quote);
      }
      for (int pos=value.indexOf("\\n"); pos >= 0; pos=value.indexOf("\\n",prev)) {
        int end=checkForR(value,pos);
        buffer.append(value.substring(prev,end));
        prev=end;
        buffer.append(quote);
        buffer.append("+\n");
        buffer.append(quote);
      }
      buffer.append(value.substring(prev,value.length()));
      if (!isInjection(child.getTreeNext())) {
        buffer.append(quote);
      }
    }
  }
}
