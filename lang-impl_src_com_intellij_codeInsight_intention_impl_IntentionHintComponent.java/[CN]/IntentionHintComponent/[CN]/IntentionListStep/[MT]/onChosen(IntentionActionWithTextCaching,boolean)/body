{
  if (finalChoice && !(action.getAction() instanceof EmptyIntentionAction)) {
    applyAction(action);
    return FINAL_CHOICE;
  }
  if (hasSubstep(action)) {
    return getSubStep(action);
  }
  return FINAL_CHOICE;
}
