{
  final int[] count=new int[]{0};
  fileBasedIndex.processValues(TodoIndex.NAME,new TodoIndexEntry(indexPattern.getPatternString(),indexPattern.isCaseSensitive()),myProject,file,new FileBasedIndex.ValueProcessor<Integer>(){
    public void process(    final VirtualFile file,    final Integer value){
      count[0]+=value.intValue();
    }
  }
);
  return count[0];
}
