{
  final DataContext dataContext=e.getDataContext();
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  final AbstractTreeNode[] nodes=createNodes(dataContext);
  final FavoritesViewImpl favoritesView=FavoritesViewImpl.getInstance(project);
  if (nodes != null) {
    final FavoritesTreeViewPanel favoritesTreeViewPanel=favoritesView.getFavoritesTreeViewPanel(myFavoritesList);
    for (int i=0; i < nodes.length; i++) {
      AbstractTreeNode node=nodes[i];
      favoritesTreeViewPanel.addToFavorites(node);
    }
    final ToolWindowManager windowManager=ToolWindowManager.getInstance(project);
    windowManager.getToolWindow(ToolWindowId.FAVORITES_VIEW).activate(null);
    favoritesView.setSelectedContent(favoritesView.getContent(favoritesTreeViewPanel));
  }
}
