{
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (project == null)   return null;
  Module moduleContext=(Module)dataContext.getData(DataConstants.MODULE_CONTEXT);
  Collection<AbstractTreeNode> nodesToAdd=null;
  FavoriteNodeProvider[] providers=ApplicationManager.getApplication().getComponents(FavoriteNodeProvider.class);
  for (  FavoriteNodeProvider provider : providers) {
    nodesToAdd=provider.getFavoriteNodes(dataContext,ViewSettings.DEFAULT);
    if (nodesToAdd != null) {
      break;
    }
  }
  if (nodesToAdd == null) {
    Object elements=collectSelectedElements(dataContext);
    if (elements != null) {
      nodesToAdd=createNodes(project,moduleContext,elements,inProjectView,ViewSettings.DEFAULT);
    }
  }
  return nodesToAdd;
}
