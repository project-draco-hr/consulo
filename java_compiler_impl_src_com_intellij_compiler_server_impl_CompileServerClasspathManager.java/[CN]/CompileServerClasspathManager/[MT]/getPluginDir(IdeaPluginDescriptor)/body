{
  String pluginDirName=StringUtil.getShortName(plugin.getPluginId().getIdString());
  String extraDir=System.getProperty("idea.external.build.development.plugins.dir");
  if (extraDir != null) {
    File extraDirFile=new File(extraDir,pluginDirName);
    if (extraDirFile.isDirectory()) {
      return extraDirFile;
    }
  }
  List<String> roots=Arrays.asList(new File(PathManager.getHomePath(),"plugins").getPath(),new File(PathManager.getHomePath(),"community/plugins").getPath());
  for (  String root : roots) {
    File pluginDir=new File(root,pluginDirName);
    if (pluginDir.isDirectory()) {
      return pluginDir;
    }
  }
  return null;
}
