{
  String pluginDirName=StringUtil.getShortName(plugin.getPluginId().getIdString());
  List<String> roots=Arrays.asList(new File(PathManager.getHomePath(),"plugins").getPath(),new File(PathManager.getHomePath(),"community/plugins").getPath());
  String extraDir=System.getProperty("compile.server.development.plugins.dir");
  if (extraDir != null) {
    roots.add(extraDir);
  }
  for (  String root : roots) {
    File pluginDir=new File(root,pluginDirName);
    if (pluginDir.isDirectory()) {
      return pluginDir;
    }
  }
  return null;
}
