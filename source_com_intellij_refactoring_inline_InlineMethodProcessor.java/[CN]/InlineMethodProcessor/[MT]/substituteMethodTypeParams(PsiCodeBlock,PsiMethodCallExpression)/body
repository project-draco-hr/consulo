{
  ResolveResult resolveResult=methodCall.getMethodExpression().advancedResolve(false);
  LOG.assertTrue(myManager.areElementsEquivalent(resolveResult.getElement(),myMethod));
  if (resolveResult.getSubstitutor() != PsiSubstitutor.EMPTY) {
    PsiTypeParameter[] oldTypeParameters=myMethod.getTypeParameterList().getTypeParameters();
    PsiTypeParameter[] newTypeParameters=myMethodCopy.getTypeParameterList().getTypeParameters();
    PsiSubstitutor substitutor=PsiSubstitutor.EMPTY;
    for (int i=0; i < newTypeParameters.length; i++) {
      substitutor=substitutor.put(newTypeParameters[i],resolveResult.getSubstitutor().substitute(oldTypeParameters[i]));
    }
    substituteMethodTypeParamsInner(block,substitutor);
  }
}
