{
  int eachX=0;
  int eachY=TitlePanel.STRUT;
  myIdLabel.setBounds(eachX,eachY,myIdLabel.getPreferredSize().width,getHeight());
  eachX+=myIdLabel.getPreferredSize().width;
  int tabsStart=eachX;
  if (myManager.getContentCount() == 0)   return;
  Content selected=myManager.getSelectedContent();
  if (selected == null) {
    selected=myManager.getContents()[0];
  }
  int requiredWidth=0;
  ArrayList<ContentTabLabel> toLayout=new ArrayList<ContentTabLabel>();
  myToDrop=new ArrayList<ContentTabLabel>();
  for (  ContentTabLabel eachTab : myTabs) {
    final Dimension eachSize=eachTab.getPreferredSize();
    requiredWidth+=eachSize.width;
    requiredWidth++;
    toLayout.add(eachTab);
  }
  final int moreRectWidth=myMoreIcon.getIconWidth() + MORE_ICON_BORDER * 2;
  int toFitWidth=getSize().width - eachX;
  final ContentTabLabel selectedTab=myContent2Tabs.get(selected);
  while (true) {
    if (requiredWidth <= toFitWidth)     break;
    if (toLayout.size() <= 1)     break;
    if (toLayout.get(0) != selectedTab) {
      final ContentTabLabel toDropLabel=toLayout.remove(0);
      requiredWidth-=(toDropLabel.getPreferredSize().width + 1);
      myToDrop.add(toDropLabel);
      if (myToDrop.size() == 1) {
        toFitWidth-=moreRectWidth;
      }
    }
 else     if (toLayout.get(toLayout.size() - 1) != selectedTab) {
      final ContentTabLabel toDropLabel=toLayout.remove(toLayout.size() - 1);
      requiredWidth-=(toDropLabel.getPreferredSize().width + 1);
      myToDrop.add(toDropLabel);
      if (myToDrop.size() == 1) {
        toFitWidth-=moreRectWidth;
      }
    }
 else {
      break;
    }
  }
  boolean reachedBounds=false;
  myMoreRect=null;
  for (  ContentTabLabel each : toLayout) {
    if (isToDrawTabs()) {
      eachY=0;
    }
 else {
      eachY=TitlePanel.STRUT;
    }
    final Dimension eachSize=each.getPreferredSize();
    if (eachX + eachSize.width < toFitWidth + tabsStart) {
      each.setBounds(eachX,eachY,eachSize.width,getHeight() - eachY);
      eachX+=eachSize.width;
      eachX++;
    }
 else {
      if (!reachedBounds) {
        final int width=getWidth() - eachX - moreRectWidth;
        each.setBounds(eachX,eachY,width,getHeight() - eachY);
        eachX+=width;
        eachX++;
      }
 else {
        each.setBounds(0,0,0,0);
      }
      reachedBounds=true;
    }
  }
  for (  ContentTabLabel each : myToDrop) {
    each.setBounds(0,0,0,0);
  }
  if (myToDrop.size() > 0) {
    myMoreRect=new Rectangle(eachX + MORE_ICON_BORDER,TitlePanel.STRUT,myMoreIcon.getIconWidth(),getHeight() - TitlePanel.STRUT);
    final int selectedIndex=myManager.getIndexOfContent(myManager.getSelectedContent());
    if (selectedIndex == 0) {
      myMoreIcon.setPaintedIcons(false,true);
    }
 else     if (selectedIndex == myManager.getContentCount() - 1) {
      myMoreIcon.setPaintedIcons(true,false);
    }
 else {
      myMoreIcon.setPaintedIcons(true,true);
    }
  }
 else {
    myMoreRect=null;
  }
}
