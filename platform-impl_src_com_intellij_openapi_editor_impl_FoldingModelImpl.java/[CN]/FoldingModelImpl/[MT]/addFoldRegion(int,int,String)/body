{
  assertIsDispatchThread();
  FoldRegion range=new FoldRegionImpl(myEditor,startOffset,endOffset,placeholderText);
  if (isFoldingEnabled()) {
    if (!myIsBatchFoldingProcessing) {
      LOG.error("Fold regions must be added or removed inside batchFoldProcessing() only.");
      return null;
    }
    myFoldRegionsProcessed=true;
    return myFoldTree.addRegion(range) ? range : null;
  }
  return null;
}
