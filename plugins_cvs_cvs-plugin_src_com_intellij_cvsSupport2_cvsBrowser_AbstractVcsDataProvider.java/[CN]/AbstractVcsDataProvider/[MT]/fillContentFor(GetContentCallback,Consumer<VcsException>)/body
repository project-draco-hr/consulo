{
  myErrorCallback=errorCallback;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    executeCommand(createDirectoryContentProvider(callback.getElementPath()),callback);
  }
 else {
    final GetDirectoriesListViaUpdateOperation provider=new GetDirectoriesListViaUpdateOperation(myEnvironment,callback.getElementPath());
    final Consumer<DirectoryContent> consumer=new Consumer<DirectoryContent>(){
      public void consume(      final DirectoryContent directoryContent){
        callback.appendDirectoryContent(directoryContent);
      }
    }
;
    provider.setStepByStepListener(consumer);
    executeCommand(provider,callback);
  }
}
