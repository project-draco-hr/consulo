{
  ArrayList childNodes=childrenToArray(root);
  for (Iterator iterator=childNodes.iterator(); iterator.hasNext(); ) {
    DefaultMutableTreeNode childNode=(DefaultMutableTreeNode)iterator.next();
    TreePath path=new TreePath(childNode.getPath());
    if (myTree.isPathSelected(path)) {
      mySelectionPaths.add(getPath(childNode));
    }
    if (myTree.isExpanded(path) || childNode.getChildCount() == 0) {
      myPathsToExpand.add(getPath(childNode));
      _storePaths(childNode);
    }
  }
}
