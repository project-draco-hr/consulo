{
  final VirtualFile vFile=getVFile(name);
  if (vFile != null) {
    return vFile;
  }
 else {
    final VirtualFile vDir=LocalFileSystem.getInstance().findFileByIoFile(new File(getParent(name)));
    if (vDir == null) {
      throw new IOException(name + ": file not found");
    }
    final IOException[] ex=new IOException[1];
    final VirtualFile file=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
      public VirtualFile compute(){
        try {
          return vDir.createChildData(this,name);
        }
 catch (        IOException e) {
          ex[0]=e;
          return null;
        }
      }
    }
);
    if (ex[0] != null)     throw ex[0];
    return file;
  }
}
