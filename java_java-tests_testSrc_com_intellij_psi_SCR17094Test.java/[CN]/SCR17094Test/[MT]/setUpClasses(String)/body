{
  final String testRoot=PathManagerEx.getTestDataPath() + "/psi/repositoryUse/scr17094";
  VirtualFile classesRoot=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      String path=testRoot + "/" + s;
      path=path.replace(File.separatorChar,'/');
      return LocalFileSystem.getInstance().refreshAndFindFileByPath(path);
    }
  }
);
  assertNotNull(classesRoot);
  final ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
  final Library.ModifiableModel libraryModel=rootModel.getModuleLibraryTable().createLibrary().getModifiableModel();
  libraryModel.addRoot(classesRoot,OrderRootType.CLASSES);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      libraryModel.commit();
      rootModel.commit();
    }
  }
);
}
