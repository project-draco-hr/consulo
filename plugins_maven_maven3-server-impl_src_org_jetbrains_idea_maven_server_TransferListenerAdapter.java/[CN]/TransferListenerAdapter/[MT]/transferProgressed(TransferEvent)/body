{
  checkCanceled();
  TransferResource r=event.getResource();
  long totalLength=r.getContentLength();
  String sizeInfo;
  if (totalLength <= 0) {
    sizeInfo=StringUtil.formatFileSize(event.getTransferredBytes()) + " / ?";
  }
 else {
    sizeInfo=StringUtil.formatFileSize(event.getTransferredBytes()) + " / " + StringUtil.formatFileSize(totalLength);
  }
  try {
    myIndicator.setText2(formatResourceName(event) + "  (" + sizeInfo+ ')');
    if (totalLength <= 0) {
      myIndicator.setIndeterminate(true);
    }
 else {
      myIndicator.setIndeterminate(false);
      myIndicator.setFraction((double)event.getTransferredBytes() / totalLength);
    }
  }
 catch (  RemoteException e) {
    throw new RuntimeRemoteException(e);
  }
}
