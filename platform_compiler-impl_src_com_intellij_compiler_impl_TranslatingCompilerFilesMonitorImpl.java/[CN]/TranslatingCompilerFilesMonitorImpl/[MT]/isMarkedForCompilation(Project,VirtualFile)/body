{
  if (CompilerWorkspaceConfiguration.getInstance(project).useOutOfProcessBuild()) {
    final CompilerManager compilerManager=CompilerManager.getInstance(project);
    return !compilerManager.isUpToDate(compilerManager.createFilesCompileScope(new VirtualFile[]{file}));
  }
  return isMarkedForRecompilation(getProjectId(project),getFileId(file));
}
