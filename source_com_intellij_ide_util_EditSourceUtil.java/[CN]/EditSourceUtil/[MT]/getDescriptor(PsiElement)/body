{
  if (element == null) {
    return null;
  }
  if (!element.isValid()) {
    return null;
  }
  PsiElement navigationElement=element.getNavigationElement();
  PsiFile psiFile=navigationElement instanceof PsiFile ? (PsiFile)navigationElement : navigationElement.getContainingFile();
  if (psiFile == null) {
    return null;
  }
  int offset=-1;
  if (!(navigationElement instanceof PsiFile)) {
    offset=navigationElement.getTextOffset();
  }
  VirtualFile virtualFile=psiFile.getVirtualFile();
  if (virtualFile == null) {
    return null;
  }
  return new OpenFileDescriptor(element.getProject(),virtualFile,offset);
}
