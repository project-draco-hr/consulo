{
  if (expr instanceof PsiNewExpression) {
    final PsiJavaCodeReferenceElement classReference=((PsiNewExpression)expr).getClassReference();
    if (classReference != null) {
      final PsiReferenceParameterList parameterList=classReference.getParameterList();
      if (parameterList != null) {
        final PsiTypeElement[] typeParameterElements=parameterList.getTypeParameterElements();
        if (typeParameterElements.length == 1 && typeParameterElements[0].getType() instanceof PsiDiamondType) {
          return (PsiExpression)replaceDiamondWithExplicitTypes(parameterList).getParent();
        }
      }
    }
  }
  return expr;
}
