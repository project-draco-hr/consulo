{
  PsiType parameterType=substitutor.substitute(parameters[i < parameters.length ? i : parameters.length - 1].getType());
  if (parameterType instanceof PsiEllipsisType) {
    if (args.length != parameters.length || PsiPolyExpressionUtil.isPolyExpression(args[i]) || args[i] != null && !(args[i].getType() instanceof PsiArrayType)) {
      parameterType=((PsiEllipsisType)parameterType).getComponentType();
    }
  }
  return parameterType;
}
