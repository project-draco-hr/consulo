{
  super(null,manager.getProject(),new Function<String,Document>(){
    public Document fun(    final String s){
      PsiPackage defaultPackage=JavaPsiFacade.getInstance(manager.getProject()).findPackage("");
      final JavaCodeFragment fragment=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory().createReferenceCodeFragment(s,defaultPackage,true,true);
      fragment.setVisibilityChecker(JavaCodeFragment.VisibilityChecker.EVERYTHING_VISIBLE);
      if (resolveScope != null) {
        fragment.forceResolveScope(resolveScope);
      }
      return PsiDocumentManager.getInstance(manager.getProject()).getDocument(fragment);
    }
  }
,selectedClass != null ? selectedClass.getQualifiedName() : "");
  myProject=manager.getProject();
  myChooserTitle="Choose Class";
  addActionListener(new ChooseClassAction());
}
