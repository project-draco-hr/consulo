{
  final PsiShortNamesCache cache=JavaPsiFacade.getInstance(myProject).getShortNamesCache();
  PsiClass[] classes=cache.getClassesByName(name,checkBoxState ? myScope : GlobalSearchScope.projectScope(myProject).intersectWith(myScope));
  if (classes.length == 0)   return ArrayUtil.EMPTY_OBJECT_ARRAY;
  if (classes.length == 1) {
    return isAccepted(classes[0]) ? classes : ArrayUtil.EMPTY_OBJECT_ARRAY;
  }
  List<PsiClass> list=new ArrayList<PsiClass>(classes.length);
  for (  PsiClass aClass : classes) {
    if (isAccepted(aClass)) {
      list.add(aClass);
    }
  }
  return list.toArray(new PsiClass[list.size()]);
}
