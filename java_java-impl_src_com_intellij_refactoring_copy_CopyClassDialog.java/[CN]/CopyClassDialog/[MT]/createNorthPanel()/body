{
  JPanel panel=new JPanel(new GridBagLayout());
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.insets=new Insets(4,8,4,8);
  gbConstraints.weightx=1;
  gbConstraints.gridwidth=2;
  gbConstraints.fill=GridBagConstraints.HORIZONTAL;
  gbConstraints.anchor=GridBagConstraints.WEST;
  panel.add(myInformationLabel,gbConstraints);
  gbConstraints.gridwidth=1;
  gbConstraints.gridy=1;
  gbConstraints.weighty=1;
  gbConstraints.weightx=0;
  myNameLabel.setText(RefactoringBundle.message("copy.files.new.name.label"));
  panel.add(myNameLabel,gbConstraints);
  gbConstraints.gridx=1;
  gbConstraints.weightx=1;
  myNameField=new EditorTextField("");
  myNameLabel.setLabelFor(myNameField);
  panel.add(myNameField,gbConstraints);
  gbConstraints.gridx=0;
  gbConstraints.gridy=2;
  gbConstraints.weightx=0;
  panel.add(myPackageLabel,gbConstraints);
  gbConstraints.gridx=1;
  gbConstraints.weightx=1;
  String qualifiedName=getQualifiedName();
  myTfPackage=new PackageNameReferenceEditorCombo(qualifiedName,myProject,RECENTS_KEY,RefactoringBundle.message("choose.destination.package"));
  myTfPackage.setTextFieldPreferredWidth(Math.max(qualifiedName.length() + 5,40));
  myPackageLabel.setText(RefactoringBundle.message("destination.package"));
  myPackageLabel.setLabelFor(myTfPackage);
  panel.add(myTfPackage,gbConstraints);
  if (myDoClone) {
    myTfPackage.setVisible(false);
    myPackageLabel.setVisible(false);
    myCbMoveToAnotherSourceFolder.setVisible(false);
  }
  final boolean isLibraryClass=!myClass2Copy.getManager().isInProject(myClass2Copy);
  myCbMoveToAnotherSourceFolder.setEnabled(ProjectRootManager.getInstance(myProject).getContentSourceRoots().length > 1 || isLibraryClass);
  if (isLibraryClass) {
    myCbMoveToAnotherSourceFolder.setSelected(true);
  }
  if (myDefaultTargetDirectory != null) {
    final Boolean showDirsChooser=myDefaultTargetDirectory.getCopyableUserData(CopyPasteDelegator.SHOW_CHOOSER_KEY);
    if (showDirsChooser != null && showDirsChooser.booleanValue()) {
      myCbMoveToAnotherSourceFolder.setVisible(false);
      myCbMoveToAnotherSourceFolder.setSelected(true);
    }
  }
  gbConstraints.gridy=3;
  gbConstraints.gridx=0;
  gbConstraints.gridwidth=2;
  gbConstraints.anchor=GridBagConstraints.EAST;
  gbConstraints.fill=GridBagConstraints.NONE;
  panel.add(myCbMoveToAnotherSourceFolder,gbConstraints);
  return panel;
}
