{
  ActionListener listener=new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final FileChooserDescriptor d=getFileChooserDescriptor();
      String initial=(String)getCellEditorValue();
      VirtualFile initialFile=StringUtil.isNotEmpty(initial) ? LocalFileSystem.getInstance().findFileByPath(initial) : null;
      VirtualFile[] files=myProject != null ? FileChooser.chooseFiles(myProject,d,initialFile) : FileChooser.chooseFiles(table,d,initialFile);
      if (files.length == 1 && files[0] != null) {
        String path=files[0].getPresentableUrl();
        if (SystemInfo.isWindows && path.length() == 2 && Character.isLetter(path.charAt(0)) && path.charAt(1) == ':') {
          path+="\\";
        }
        myComponent.getChildComponent().setText(path);
      }
    }
  }
;
  myComponent=new CellEditorComponentWithBrowseButton<JTextField>(new TextFieldWithBrowseButton(listener),this);
  myComponent.getChildComponent().setText((String)value);
  return myComponent;
}
