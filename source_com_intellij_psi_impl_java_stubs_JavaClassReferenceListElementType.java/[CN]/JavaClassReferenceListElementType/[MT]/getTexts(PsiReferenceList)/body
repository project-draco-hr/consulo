{
  final PsiJavaCodeReferenceElement[] refs=psi.getReferenceElements();
  String[] texts=ArrayUtil.newStringArray(refs.length);
  for (int i=0; i < refs.length; i++) {
    PsiJavaCodeReferenceElement ref=refs[i];
    texts[i]=ref instanceof PsiCompiledElement ? ref.getCanonicalText() : ref.getText();
  }
  return texts;
}
