{
  boolean editorAvailable=e.getDataContext().getData(DataConstants.EDITOR) != null;
  boolean isRecording=ActionMacroManager.getInstance().isRecording();
  e.getPresentation().setEnabled(editorAvailable || isRecording);
  e.getPresentation().setText(isRecording ? IdeBundle.message("action.stop.macro.recording") : IdeBundle.message("action.start.macro.recording"));
}
