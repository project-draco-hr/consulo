{
  if (!component.isVisible()) {
    return null;
  }
  final FocusTraversalPolicy focusTraversalPolicy=getFocusTraversalPolicyAwtImpl(component);
  if (focusTraversalPolicy != null && focusTraversalPolicy != policyToIgnore) {
    if (focusTraversalPolicy.getClass().getName().indexOf("LegacyGlueFocusTraversalPolicy") >= 0) {
      return component;
    }
    final Component defaultComponent=focusTraversalPolicy.getDefaultComponent(component);
    if (defaultComponent instanceof JComponent) {
      return (JComponent)defaultComponent;
    }
 else {
      return null;
    }
  }
  if (component instanceof JTabbedPane) {
    final JTabbedPane tabbedPane=(JTabbedPane)component;
    final Component selectedComponent=tabbedPane.getSelectedComponent();
    if (selectedComponent instanceof JComponent) {
      return getPreferredFocusedComponent((JComponent)selectedComponent);
    }
    return null;
  }
  if (_accept(component)) {
    return component;
  }
  for (  Component ca : component.getComponents()) {
    if (!(ca instanceof JComponent)) {
      continue;
    }
    final JComponent c=getPreferredFocusedComponent((JComponent)ca);
    if (c != null) {
      return c;
    }
  }
  return null;
}
