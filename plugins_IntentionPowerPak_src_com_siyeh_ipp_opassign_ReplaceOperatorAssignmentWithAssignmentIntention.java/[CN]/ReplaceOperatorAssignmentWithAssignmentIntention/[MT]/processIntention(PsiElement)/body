{
  final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)element;
  final PsiJavaToken sign=assignmentExpression.getOperationSign();
  final PsiExpression lhs=assignmentExpression.getLExpression();
  final PsiExpression rhs=assignmentExpression.getRExpression();
  final String operand=sign.getText();
  final String newOperand=operand.substring(0,operand.length() - 1);
  final String lhsText=lhs.getText();
  final String rhsText;
  if (rhs == null) {
    rhsText="";
  }
 else {
    rhsText=rhs.getText();
  }
  if (rhs instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)rhs;
    final PsiJavaToken javaToken=binaryExpression.getOperationSign();
    final int precedence1=ParenthesesUtils.getPrecedenceForBinaryOperator(javaToken);
    final int precedence2=ParenthesesUtils.getPrecedenceForBinaryOperator(newOperand);
    if (precedence1 > precedence2) {
      final String expString;
      if (needsCast(rhs)) {
        expString=lhsText + "=(int)" + lhsText+ newOperand+ '('+ rhsText+ "))";
      }
 else {
        expString=lhsText + '=' + lhsText+ newOperand+ '('+ rhsText+ ')';
      }
      replaceExpression(expString,assignmentExpression);
      return;
    }
  }
  final String expString;
  if (needsCast(rhs)) {
    expString=lhsText + "=(int)(" + lhsText+ newOperand+ rhsText+ ')';
  }
 else {
    expString=lhsText + '=' + lhsText+ newOperand+ rhsText;
  }
  replaceExpression(expString,assignmentExpression);
}
