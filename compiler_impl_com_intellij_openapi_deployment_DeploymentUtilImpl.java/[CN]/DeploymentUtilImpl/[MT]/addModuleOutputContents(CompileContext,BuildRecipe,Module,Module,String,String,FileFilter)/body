{
  final File outputPath=getModuleOutputPath(sourceModule);
  String[] sourceRoots=getSourceRootUrlsInReadAction(sourceModule);
  boolean ok=true;
  if (outputPath != null && sourceRoots.length != 0) {
    ok=checkModuleOutputExists(outputPath,sourceModule,context);
    boolean added=addItemsRecursively(items,outputPath,targetModule,outputRelativePath,fileFilter,possibleBaseOuputPath);
    if (!added) {
      String additionalMessage=CompilerBundle.message("message.text.change.module.output.directory.or.module.exploded.directory",ModuleUtil.getModuleNameInReadAction(sourceModule),ModuleUtil.getModuleNameInReadAction(targetModule));
      reportRecursiveCopying(context,outputPath.getPath(),appendToPath(possibleBaseOuputPath,outputRelativePath),CompilerBundle.message("module.output.directory",ModuleUtil.getModuleNameInReadAction(sourceModule)),additionalMessage);
      ok=false;
    }
  }
  return ok;
}
