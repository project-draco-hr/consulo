{
  Manifest manifest=getInstance().createManifest(buildRecipe);
  if (manifest == null) {
    final File file=getInstance().findUserSuppliedManifestFile(buildRecipe);
    LOG.assertTrue(file != null);
    context.addMessage(CompilerMessageCategory.WARNING,CompilerBundle.message("message.text.using.user.supplied.manifest",file.getAbsolutePath()),null,-1,-1);
  }
 else {
    File manifestFile=new File(outputPath,JarFile.MANIFEST_NAME);
    FileUtil.createParentDirs(manifestFile);
    FileOutputStream out=null;
    try {
      out=new FileOutputStream(manifestFile);
      manifest.write(out);
    }
  finally {
      if (out != null) {
        out.close();
      }
    }
    return manifestFile;
  }
  return null;
}
