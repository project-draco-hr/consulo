{
  final String[] sourceUrls=getSourceRootUrlsInReadAction(module);
  if (sourceUrls.length > 0) {
    final File outputPath=getModuleOutputPath(module);
    if (outputPath != null) {
      if ("/".equals(relativePath) || "".equals(relativePath) || getRelativePathForManifestLinking("/").equals(relativePath)) {
        context.addMessage(CompilerMessageCategory.ERROR,CompilerBundle.message("message.text.invalid.output.path.for.module.jar",relativePath,module.getName(),linkContainerDescription),null,-1,-1);
      }
 else {
        instructions.addInstruction(new JarAndCopyBuildInstructionImpl(module,outputPath,relativePath,fileFilter));
      }
    }
  }
}
