{
  if (!myFrameworksTree.isProcessingMouseEventOnCheckbox()) {
    updateOptionsPanel();
  }
  final FrameworkSupportNode selectedNode=getSelectedNode();
  if (!Comparing.equal(selectedNode,myLastSelectedNode)) {
    if (myLastSelectedNode != null) {
      final LibraryCompositionOptionsPanel optionsPanel=myLastSelectedNode.getLibraryCompositionOptionsPanel(myLibrariesContainer,myMirrorsMap);
      if (optionsPanel != null) {
        optionsPanel.saveSelectedRepositoriesMirrors(myMirrorsMap);
        optionsPanel.apply();
      }
    }
    myLastSelectedNode=selectedNode;
    if (selectedNode != null) {
      final LibraryCompositionOptionsPanel newOptionsPanel=selectedNode.getLibraryCompositionOptionsPanel(myLibrariesContainer,myMirrorsMap);
      if (newOptionsPanel != null) {
        newOptionsPanel.updateRepositoriesMirrors(myMirrorsMap);
      }
    }
  }
}
