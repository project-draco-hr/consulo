{
  myLibrariesContainer=librariesContainer;
  myBaseDirForLibrariesGetter=baseDirForLibrariesGetter;
  myProviders=providers;
  myModel=new FrameworkSupportModelImpl(myLibrariesContainer.getProject(),builder);
  createNodes();
  myMirrorsMap=createMirrorsMap();
  final Splitter splitter=new Splitter(false,0.30f,0.1f,0.7f);
  myFrameworksTree=new FrameworksTree(myGroups){
    @Override protected void onNodeStateChanged(    CheckedTreeNode node){
      if (!(node instanceof FrameworkSupportNode))       return;
      final FrameworkSupportNode frameworkSupportNode=(FrameworkSupportNode)node;
      frameworkSupportNode.setConfigurableComponentEnabled(node.isChecked());
      updateOptionsPanel();
      frameworkSupportNode.getConfigurable().onFrameworkSelectionChanged(node.isChecked());
      myModel.onFrameworkSelectionChanged(frameworkSupportNode);
      onFrameworkStateChanged();
    }
  }
;
  myFrameworksTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      onSelectionChanged();
    }
  }
);
  splitter.setFirstComponent(ScrollPaneFactory.createScrollPane(myFrameworksTree));
  myOptionsPanel=new JPanel(new CardLayout());
  myOptionsPanel.add(EMPTY_CARD,new JPanel());
  splitter.setSecondComponent(myOptionsPanel);
  myFrameworksPanel.add(splitter,BorderLayout.CENTER);
  myFrameworksTree.setSelectionRow(0);
}
