{
  final PsiExpression condition=statement.getCondition();
  if (condition != null) {
    condition.accept(this);
  }
  final Object constant=ExpressionUtils.computeConstantExpression(condition);
  final PsiStatement thenBranch=statement.getThenBranch();
  final PsiStatement elseBranch=statement.getElseBranch();
  if (constant == Boolean.TRUE) {
    if (thenBranch != null) {
      final AssignmentCountVisitor visitor=new AssignmentCountVisitor(variable);
      thenBranch.accept(visitor);
      assignmentCount+=visitor.getAssignmentCount();
    }
  }
 else   if (constant == Boolean.FALSE) {
    if (elseBranch != null) {
      final AssignmentCountVisitor visitor=new AssignmentCountVisitor(variable);
      elseBranch.accept(visitor);
      assignmentCount+=visitor.getAssignmentCount();
    }
  }
 else {
    final int thenAssignmentCount;
    if (thenBranch != null) {
      final AssignmentCountVisitor visitor=new AssignmentCountVisitor(variable);
      thenBranch.accept(visitor);
      thenAssignmentCount=visitor.getAssignmentCount();
    }
 else {
      thenAssignmentCount=0;
    }
    final int elseAssignmentCount;
    if (elseBranch != null) {
      final AssignmentCountVisitor visitor=new AssignmentCountVisitor(variable);
      elseBranch.accept(visitor);
      elseAssignmentCount=visitor.getAssignmentCount();
    }
 else {
      elseAssignmentCount=0;
    }
    if (thenAssignmentCount != elseAssignmentCount || thenAssignmentCount > 1) {
      assignmentCount+=2;
    }
 else {
      assignmentCount+=thenAssignmentCount;
    }
  }
}
