{
  final TargetLevelTableModel model=(TargetLevelTableModel)myTable.getModel();
  final List<Module> items=new ArrayList<Module>(Arrays.asList(ModuleManager.getInstance(myProject).getModules()));
  Set<Module> alreadyAdded=new HashSet<Module>();
  for (  TargetLevelTableModel.Item item : model.getItems()) {
    alreadyAdded.add(item.module);
  }
  for (Iterator<Module> it=items.iterator(); it.hasNext(); ) {
    Module module=it.next();
    if (alreadyAdded.contains(module)) {
      it.remove();
    }
  }
  Collections.sort(items,new Comparator<Module>(){
    @Override public int compare(    Module o1,    Module o2){
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  final ChooseModulesDialog chooser=new ChooseModulesDialog(this,items,"Choose module");
  chooser.show();
  final List<Module> elements=chooser.getChosenElements();
  if (!elements.isEmpty()) {
    model.addItems(elements);
  }
}
