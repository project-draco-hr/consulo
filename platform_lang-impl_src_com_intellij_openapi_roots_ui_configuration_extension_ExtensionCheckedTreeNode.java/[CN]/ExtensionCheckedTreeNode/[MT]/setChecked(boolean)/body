{
  if (myExtension == null) {
    return;
  }
  myExtension.setEnabled(enabled);
  if (myExtension instanceof ModuleExtensionWithSdk) {
    final ModifiableRootModel rootModel=myState.getRootModel();
    if (rootModel == null) {
      return;
    }
    final ModuleExtensionWithSdkOrderEntry sdkOrderEntry=rootModel.findModuleExtensionSdkEntry(myExtension);
    if (sdkOrderEntry != null) {
      rootModel.removeOrderEntry(sdkOrderEntry);
    }
    if (enabled) {
      rootModel.addModuleExtensionSdkEntry((ModuleExtensionWithSdk)myExtension);
    }
    myClasspathEditor.moduleStateChanged();
  }
}
