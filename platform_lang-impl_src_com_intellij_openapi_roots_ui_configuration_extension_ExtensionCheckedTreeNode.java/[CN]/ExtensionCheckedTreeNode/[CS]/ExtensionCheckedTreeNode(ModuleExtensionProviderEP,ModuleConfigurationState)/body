{
  super(null);
  myProviderEP=providerEP;
  String parentKey=null;
  if (providerEP != null) {
    parentKey=providerEP.key;
    final ModifiableRootModel model=state.getRootModel();
    if (model != null) {
      myExtension=(MutableModuleExtension)model.getExtensionWithoutCheck(providerEP.getInstance().getImmutableClass());
    }
  }
  setAllowsChildren(true);
  Vector<ExtensionCheckedTreeNode> child=new Vector<ExtensionCheckedTreeNode>();
  for (  ModuleExtensionProviderEP ep : ModuleExtensionProviderEP.EP_NAME.getExtensions()) {
    if (Comparing.equal(ep.parentKey,parentKey)) {
      final ExtensionCheckedTreeNode e=new ExtensionCheckedTreeNode(ep,state);
      e.setParent(this);
      child.add(e);
    }
  }
  setUserObject(myExtension);
  children=child.isEmpty() ? null : child;
}
