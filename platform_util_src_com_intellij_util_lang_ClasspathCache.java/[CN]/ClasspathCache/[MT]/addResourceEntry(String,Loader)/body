{
  if (doDebug)   myDebugInfo.addResourceEntry(resourcePath,loader);
  String packageName=getPackageName(resourcePath);
  TIntObjectHashMap<Object> map=resourcePath.endsWith(UrlClassLoader.CLASS_EXTENSION) ? myClassPackagesCache : myResourcePackagesCache;
  int hash=packageName.hashCode();
  Object o=map.get(hash);
  if (o == null)   map.put(hash,loader);
 else   if (o instanceof Loader) {
    if (o != loader)     map.put(hash,new Loader[]{(Loader)o,loader});
  }
 else {
    Loader[] loadersArray=(Loader[])o;
    for (    Loader l : loadersArray) {
      if (l == loader)       return;
    }
    map.put(hash,ArrayUtil.append(loadersArray,loader));
  }
}
