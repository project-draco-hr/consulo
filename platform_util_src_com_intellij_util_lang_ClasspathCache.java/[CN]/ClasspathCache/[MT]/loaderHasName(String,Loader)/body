{
  String origName=name;
  name=transformName(name);
  boolean result;
  if (myTempMapMode) {
    ++requests;
    Set<Loader> loaders=myResources2LoadersTempMap.get(name);
    result=loaders != null && loaders.contains(loader);
    if (!result)     ++hits;
    if (doDebug) {
      boolean result2=myDebugInfo.loaderHashName(name,loader);
      if (result2 != result) {
        ++diffs3;
      }
      Resource resource=loader.getResource(origName,true);
      if (resource != null && !result || resource == null && result) {
        ++falseHits;
      }
    }
    if (requests % 1000 == 0 && doDebug) {
      LOG.debug("Avoided disk hits: " + hits + " from "+ requests+ ", false hits:"+ falseHits+ ", bitmap diffs:"+ diffs3);
    }
  }
 else {
    ++requests2;
    result=myNameFilter.maybeContains(name,loader);
    if (!result)     ++hits2;
    if (doDebug) {
      boolean result2=myDebugInfo.loaderHashName(name,loader);
      if (result2 != result) {
        ++diffs2;
      }
      Set<Loader> loaders=myResources2LoadersTempMap.get(name);
      if (result != (loaders != null && loaders.contains(loader))) {
        ++diffs;
      }
      Resource resource=loader.getResource(origName,true);
      if (resource == null && result) {
        ++falseHits2;
      }
      if (resource != null && !result) {
        ++falseHits2;
      }
    }
    if (requests2 % 1000 == 0 && doDebug) {
      LOG.debug("Avoided disk hits2: " + hits2 + " from "+ requests2+ ","+ diffs+ ", false hits:"+ falseHits2+ ", bitmap diffs:"+ diffs2);
    }
  }
  return result;
}
