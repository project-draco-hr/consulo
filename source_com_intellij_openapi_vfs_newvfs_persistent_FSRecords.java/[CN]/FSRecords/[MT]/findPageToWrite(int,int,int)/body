{
  final DataOutputStream result;
  final int resultId;
  incModCount(id);
  int att_page=headPage;
  while (att_page != 0) {
    int curPage=att_page;
    final DataInputStream page=getAttributes().readStream(att_page);
    final int attIdOnPage=page.readInt();
    final int next=page.readInt();
    if (attIdOnPage == encodedAttId) {
      page.close();
      result=getAttributes().writeStream(curPage);
      result.writeInt(encodedAttId);
      result.writeInt(next);
      return result;
    }
    att_page=next;
    page.close();
  }
  resultId=getAttributes().createNewRecord();
  result=getAttributes().writeStream(resultId);
  result.writeInt(encodedAttId);
  result.writeInt(headPage);
  getRecords().putInt(id * RECORD_SIZE + ATTREF_OFFSET,resultId);
  return result;
}
