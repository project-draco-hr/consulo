{
  try {
    final ProxyDescription key=new ProxyDescription(superClass,interfaces,additionalMethods);
    Factory factory=ourFactories.get(key);
    if (factory != null) {
      final Class<? extends Factory> aClass=factory.getClass();
      return (T)factory.newInstance(findConstructor(aClass,constructorArgs).getParameterTypes(),constructorArgs,new Callback[]{handler});
    }
    AdvancedEnhancer e=new AdvancedEnhancer();
    e.setAdditionalMethods(additionalMethods);
    e.setSuperclass(superClass);
    e.setInterfaces(interfaces);
    e.setCallbackTypes(new Class[]{InvocationHandler.class});
    factory=(Factory)findConstructor(e.createClass(),constructorArgs).newInstance(constructorArgs);
    factory.setCallback(0,handler);
    ourFactories.put(key,factory);
    return (T)factory;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
