{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  int count=0;
  for (ASTNode child1=psiCodeBlock.getFirstChildNode(); child1 != null; child1=child1.getTreeNext()) {
    if (child1.getPsi() instanceof PsiStatement) {
      count++;
    }
  }
  PsiStatement[] result=PsiStatement.ARRAY_FACTORY.create(count);
  if (count == 0)   return result;
  int idx=0;
  for (ASTNode child=psiCodeBlock.getFirstChildNode(); child != null && idx < count; child=child.getTreeNext()) {
    if (child.getPsi() instanceof PsiStatement) {
      PsiStatement element=(PsiStatement)child.getPsi();
      LOG.assertTrue(element != null,child);
      result[idx++]=element;
    }
  }
  return result;
}
