{
  int currentOffset=myReplacement.length();
  CaseConversionRegion lastRegion=myConversionRegions.isEmpty() ? null : myConversionRegions.get(myConversionRegions.size() - 1);
  if (lastRegion == null || lastRegion.end >= 0 && lastRegion.end <= currentOffset) {
    myConversionRegions.add(new CaseConversionRegion(currentOffset,currentOffset + 1,toUpperCase));
  }
}
