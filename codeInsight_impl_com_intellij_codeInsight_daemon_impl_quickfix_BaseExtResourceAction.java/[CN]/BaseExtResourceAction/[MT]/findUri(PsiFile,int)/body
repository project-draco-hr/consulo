{
  PsiReference currentRef=file.getViewProvider().findReferenceAt(offset,file.getLanguage());
  if (currentRef == null)   currentRef=file.getViewProvider().findReferenceAt(offset);
  if ((currentRef instanceof URLReference || currentRef instanceof URIReferenceProvider.DependentNSReference) && currentRef.resolve() == null) {
    return currentRef.getCanonicalText();
  }
  return null;
}
