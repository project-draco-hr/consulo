{
  super(project,true);
  myElementsToMove=elementsToMove;
  myMoveCallback=moveCallback;
  myManager=PsiManager.getInstance(myProject);
  setTitle(MoveHandler.REFACTORING_NAME);
  mySearchTextOccurencesEnabled=searchTextOccurences;
  selectInitialCard();
  init();
  if (initialTargetElement instanceof PsiClass) {
    myMakeInnerClassOfRadioButton.setSelected(true);
    myInnerClassChooser.setText(((PsiClass)initialTargetElement).getQualifiedName());
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        myInnerClassChooser.requestFocus();
      }
    }
,ModalityState.stateForComponent(myMainPanel));
  }
 else   if (initialTargetElement instanceof PsiJavaPackage) {
    myClassPackageChooser.setText(((PsiJavaPackage)initialTargetElement).getQualifiedName());
  }
  updateControlsEnabled();
  myToPackageRadioButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      updateControlsEnabled();
      myClassPackageChooser.requestFocus();
    }
  }
);
  myMakeInnerClassOfRadioButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      updateControlsEnabled();
      myInnerClassChooser.requestFocus();
    }
  }
);
}
