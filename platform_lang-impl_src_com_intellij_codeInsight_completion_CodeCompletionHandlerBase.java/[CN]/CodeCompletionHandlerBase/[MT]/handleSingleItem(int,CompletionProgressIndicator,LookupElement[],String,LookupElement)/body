{
  new WriteCommandAction(context.getProject()){
    protected void run(    Result result) throws Throwable {
      String uniqueText=_uniqueText;
      if (item.getObject() instanceof DeferredUserLookupValue && item.as(LookupItem.CLASS_CONDITION_KEY) != null) {
        if (!((DeferredUserLookupValue)item.getObject()).handleUserSelection(item.as(LookupItem.CLASS_CONDITION_KEY),context.getProject())) {
          return;
        }
        uniqueText=item.getLookupString();
      }
      if (!StringUtil.startsWithIgnoreCase(uniqueText,context.getLookup().itemPattern(item))) {
        FeatureUsageTracker.getInstance().triggerFeatureUsed(CodeCompletionFeatures.EDITING_COMPLETION_CAMEL_HUMPS);
      }
      insertLookupString(offset2,uniqueText,context.getEditor(),context.getOffsetMap());
      context.getEditor().getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
      lookupItemSelected(context,item,Lookup.AUTO_INSERT_SELECT_CHAR,Arrays.asList(items));
    }
  }
.execute();
}
