{
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    if (ApplicationManager.getApplication().isWriteAccessAllowed()) {
      throw new AssertionError("Completion should not be invoked inside write action");
    }
  }
}
