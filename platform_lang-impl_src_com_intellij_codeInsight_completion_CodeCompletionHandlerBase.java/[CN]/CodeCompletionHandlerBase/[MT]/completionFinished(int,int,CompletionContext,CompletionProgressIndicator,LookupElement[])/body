{
  if (items.length == 0)   return;
  final AutoCompletionDecision decision=shouldAutoComplete(context,indicator,items);
  if (decision == AutoCompletionDecision.SHOW_LOOKUP) {
    indicator.showLookup();
    if (isAutocompleteCommonPrefixOnInvocation() && items.length > 1) {
      indicator.fillInCommonPrefix(false);
    }
  }
 else   if (decision instanceof AutoCompletionDecision.InsertItem) {
    final LookupElement item=((AutoCompletionDecision.InsertItem)decision).getElement();
    indicator.closeAndFinish();
    indicator.rememberDocumentState();
    context.setStartOffset(offset1 - item.getPrefixMatcher().getPrefix().length());
    handleSingleItem(offset2,context,items,item.getLookupString(),item);
    indicator.liveAfterDeath(null);
  }
}
