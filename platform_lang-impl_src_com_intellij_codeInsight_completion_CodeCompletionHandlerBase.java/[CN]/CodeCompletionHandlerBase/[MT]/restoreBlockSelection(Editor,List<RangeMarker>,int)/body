{
  int column=-1;
  int minLine=Integer.MAX_VALUE;
  int maxLine=-1;
  for (  RangeMarker marker : caretsAfter) {
    if (marker.isValid()) {
      LogicalPosition lp=editor.offsetToLogicalPosition(marker.getStartOffset());
      if (column == -1) {
        column=lp.column;
      }
 else       if (column != lp.column) {
        return;
      }
      minLine=Math.min(minLine,lp.line);
      maxLine=Math.max(maxLine,lp.line);
      if (lp.line == caretLine) {
        editor.getCaretModel().moveToLogicalPosition(lp);
      }
    }
  }
  editor.getSelectionModel().setBlockSelection(new LogicalPosition(minLine,column),new LogicalPosition(maxLine,column));
}
