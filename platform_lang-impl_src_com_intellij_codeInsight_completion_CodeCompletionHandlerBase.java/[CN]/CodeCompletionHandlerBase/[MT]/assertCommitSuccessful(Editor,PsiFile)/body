{
  Document document=editor.getDocument();
  int docLength=document.getTextLength();
  int psiLength=psiFile.getTextLength();
  if (docLength == psiLength) {
    return;
  }
  String message="unsuccessful commit: (injected=" + (editor instanceof EditorWindow) + ")";
  message+="\nfile=" + psiFile.getName();
  message+="\nfile class=" + psiFile.getClass();
  message+="\nlanguage=" + psiFile.getLanguage();
  message+="\ndoc.length=" + docLength;
  message+="\npsiFile.length=" + psiLength;
  String fileText=psiFile.getText();
  if (fileText != null) {
    message+="\npsiFile.text.length=" + fileText.length();
  }
  FileASTNode node=psiFile.getNode();
  if (node != null) {
    message+="\nnode.length=" + node.getTextLength();
    String nodeText=node.getText();
    if (nodeText != null) {
      message+="\nnode.text.length=" + nodeText.length();
    }
  }
  LOG.error(LogMessageEx.createEvent("Commit unsuccessful",message,new Attachment(psiFile.getViewProvider().getVirtualFile().getPath(),fileText),createAstAttachment(psiFile,psiFile),new Attachment("docText.txt",document.getText())));
}
