{
  int docLength=editor.getDocument().getTextLength();
  int psiLength=psiFile.getTextLength();
  if (docLength != psiLength) {
    if (ApplicationManagerEx.getApplicationEx().isInternal()) {
      String docText=editor.getDocument().getText();
      String psiText=psiFile.getText();
      String message="unsuccessful commit: (injected=" + (editor instanceof EditorWindow) + "); document "+ System.identityHashCode(editor.getDocument())+ "; "+ "docText=\n'"+ docText+ "' ("+ docText.length()+ " chars; .length()="+ docLength+ ")\n"+ "; fileText=\n'"+ psiText+ "' ("+ psiText.length()+ " chars; .length()="+ psiLength+ ")\n";
      throw new AssertionError(message);
    }
    throw new AssertionError("unsuccessful commit: injected=" + (editor instanceof EditorWindow));
  }
}
