{
  int tailOffset=context.getTailOffset();
  if (tailOffset < 0) {
    LOG.info("tailOffset<0 after inserting " + item + " of "+ item.getClass()+ "; invalidated at: "+ context.invalidateTrace+ "\n--------");
  }
 else {
    editor.getCaretModel().moveToOffset(tailOffset);
  }
  if (context.getCompletionChar() == Lookup.COMPLETE_STATEMENT_SELECT_CHAR) {
    final Language language=PsiUtilBase.getLanguageInEditor(editor,project);
    final List<SmartEnterProcessor> processors=SmartEnterProcessors.INSTANCE.forKey(language);
    if (processors.size() > 0) {
      for (      SmartEnterProcessor processor : processors) {
        processor.process(project,editor,indicator.getParameters().getOriginalFile());
      }
    }
  }
 else {
    DataContext dataContext=DataManager.getInstance().getDataContext(editor.getContentComponent());
    EditorActionManager.getInstance().getTypedAction().getHandler().execute(editor,completionChar,dataContext);
  }
}
