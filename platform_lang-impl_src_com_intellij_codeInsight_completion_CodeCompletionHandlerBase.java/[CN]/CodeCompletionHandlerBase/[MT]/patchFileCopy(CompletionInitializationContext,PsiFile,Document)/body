{
  final LinkedList<DocumentEvent> events=new LinkedList<DocumentEvent>();
  final DocumentAdapter listener=new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      events.addFirst(e);
    }
  }
;
  document.addDocumentListener(listener);
  initContext.getFileCopyPatcher().patchFileCopy(fileCopy,document,initContext.getOffsetMap());
  document.removeDocumentListener(listener);
  document.putUserData(CompletionUtil.RANGE_TRANSLATION,events);
}
