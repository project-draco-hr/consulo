{
  if (!file.isValid()) {
    return false;
  }
  PsiFile current=PsiDocumentManager.getInstance(file.getProject()).getPsiFile(document);
  return current != null && current.getViewProvider().getPsi(file.getLanguage()) == file;
}
