{
  final PsiType bound=wildcardType.getBound();
  if (bound == null) {
    return wildcardType;
  }
 else {
    final PsiType newBound=bound.accept(this);
    if (newBound == null) {
      return null;
    }
 else     if (newBound instanceof PsiWildcardType) {
      if (((PsiWildcardType)newBound).isExtends() == wildcardType.isExtends()) {
        final PsiType newBoundBound=((PsiWildcardType)newBound).getBound();
        if (newBoundBound != null) {
          return PsiWildcardType.changeBound(wildcardType,newBoundBound);
        }
      }
      return PsiWildcardType.createUnbounded(wildcardType.getManager());
    }
    return PsiWildcardType.changeBound(wildcardType,newBound);
  }
}
