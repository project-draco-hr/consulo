{
  PsiFile file1=FileContextUtil.getContextFile(element1);
  PsiFile file2=FileContextUtil.getContextFile(element2);
  if (Comparing.equal(file1,file2))   return true;
  if (file1 instanceof JavaDummyHolder && file2 instanceof JavaDummyHolder)   return true;
  if (file1 instanceof JavaDummyHolder || file2 instanceof JavaDummyHolder) {
    JavaDummyHolder dummyHolder=(JavaDummyHolder)(file1 instanceof JavaDummyHolder ? file1 : file2);
    PsiElement other=file1 instanceof JavaDummyHolder ? file2 : file1;
    return dummyHolder.isSamePackage(other);
  }
  if (!(file1 instanceof PsiJavaFile))   return false;
  if (!(file2 instanceof PsiJavaFile))   return false;
  String package1=((PsiJavaFile)file1).getPackageName();
  String package2=((PsiJavaFile)file2).getPackageName();
  return Comparing.equal(package1,package2);
}
