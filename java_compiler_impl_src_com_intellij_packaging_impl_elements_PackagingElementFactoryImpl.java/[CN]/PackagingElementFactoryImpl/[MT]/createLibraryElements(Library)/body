{
  final LibraryTable table=library.getTable();
  if (table != null) {
    return Collections.singletonList(createLibraryFiles(table.getTableLevel(),library.getName()));
  }
  final List<PackagingElement<?>> elements=new ArrayList<PackagingElement<?>>();
  for (  VirtualFile file : library.getFiles(OrderRootType.CLASSES)) {
    final String path=FileUtil.toSystemIndependentName(PathUtil.getLocalPath(file));
    elements.add(file.isDirectory() && file.isInLocalFileSystem() ? new DirectoryCopyPackagingElement(path) : new FileCopyPackagingElement(path));
  }
  return elements;
}
