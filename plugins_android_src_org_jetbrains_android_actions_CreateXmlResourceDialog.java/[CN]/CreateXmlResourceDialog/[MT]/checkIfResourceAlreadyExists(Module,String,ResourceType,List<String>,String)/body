{
  if (resourceName.length() == 0 || dirNames.size() == 0 || fileName.length() == 0) {
    return null;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(selectedModule);
  final VirtualFile resourceDir=facet != null ? AndroidRootUtil.getResourceDir(facet) : null;
  if (resourceDir == null) {
    return null;
  }
  for (  String directoryName : dirNames) {
    final VirtualFile resourceSubdir=resourceDir.findChild(directoryName);
    if (resourceSubdir == null) {
      continue;
    }
    final VirtualFile resFile=resourceSubdir.findChild(fileName);
    if (resFile == null) {
      continue;
    }
    if (resFile.getFileType() != StdFileTypes.XML) {
      return new ValidationInfo("File " + FileUtil.toSystemDependentName(resFile.getPath()) + " is not XML file");
    }
    final Resources resources=AndroidUtils.loadDomElement(selectedModule,resFile,Resources.class);
    if (resources == null) {
      return new ValidationInfo(AndroidBundle.message("not.resource.file.error",FileUtil.toSystemDependentName(resFile.getPath())));
    }
    for (    ResourceElement element : AndroidResourceUtil.getValueResourcesFromElement(resourceType.getName(),resources)) {
      if (resourceName.equals(element.getName().getValue())) {
        return new ValidationInfo("resource '" + resourceName + "' already exists in "+ FileUtil.toSystemDependentName(resFile.getPath()));
      }
    }
  }
  return null;
}
