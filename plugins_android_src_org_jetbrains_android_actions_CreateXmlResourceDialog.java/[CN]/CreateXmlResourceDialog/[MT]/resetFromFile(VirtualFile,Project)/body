{
  final Module moduleForFile=ModuleUtilCore.findModuleForFile(file,project);
  if (moduleForFile == null) {
    return;
  }
  final VirtualFile parent=file.getParent();
  if (parent == null) {
    return;
  }
  if (myModule == null) {
    final Object prev=myModuleCombo.getSelectedItem();
    myModuleCombo.setSelectedItem(moduleForFile);
    if (!moduleForFile.equals(myModuleCombo.getSelectedItem())) {
      myModuleCombo.setSelectedItem(prev);
      return;
    }
  }
 else   if (!myModule.equals(moduleForFile)) {
    return;
  }
  final JCheckBox checkBox=myCheckBoxes.get(parent.getName());
  if (checkBox == null) {
    return;
  }
  for (  JCheckBox checkBox1 : myCheckBoxes.values()) {
    checkBox1.setSelected(false);
  }
  checkBox.setSelected(true);
  myFileNameCombo.getEditor().setItem(file.getName());
}
