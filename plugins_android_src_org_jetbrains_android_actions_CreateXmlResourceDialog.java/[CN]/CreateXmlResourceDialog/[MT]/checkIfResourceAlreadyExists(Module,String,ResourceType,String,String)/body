{
  if (resourceName.length() == 0 || directoryName.length() == 0 || fileName.length() == 0) {
    return null;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(selectedModule);
  final VirtualFile resourceDir=facet != null ? AndroidRootUtil.getResourceDir(facet) : null;
  if (resourceDir == null) {
    return null;
  }
  final VirtualFile resourceSubdir=resourceDir.findChild(directoryName);
  if (resourceSubdir == null) {
    return null;
  }
  final VirtualFile resFile=resourceSubdir.findChild(fileName);
  if (resFile == null) {
    return null;
  }
  if (resFile.getFileType() != StdFileTypes.XML) {
    return new ValidationInfo("File " + FileUtil.toSystemDependentName(resFile.getPath()) + " is not XML file");
  }
  final Resources resources=AndroidUtils.loadDomElement(selectedModule,resFile,Resources.class);
  if (resources == null) {
    return new ValidationInfo(AndroidBundle.message("not.resource.file.error",FileUtil.toSystemDependentName(resFile.getPath())));
  }
  for (  ResourceElement element : AndroidResourceUtil.getValueResourcesFromElement(resourceType.getName(),resources)) {
    if (resourceName.equals(element.getName().getValue())) {
      return new ValidationInfo("resource '" + resourceName + "' already exists in "+ FileUtil.toSystemDependentName(resFile.getPath()));
    }
  }
  return null;
}
