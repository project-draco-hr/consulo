{
  myProject=project;
  myIsHorisontal=horisontal;
  myOptions=new DiffPanelOptions(this);
  myPanel=new DiffPanelOutterComponent(TextDiffType.DIFF_TYPES,TOOL_BAR);
  myPanel.disableToolbar(!enableToolbar);
  if (enableToolbar)   myPanel.resetToolbar();
  myOwnerWindow=owner;
  myIsSynchScroll=true;
  myLeftSide=new DiffSideView("",this);
  myRightSide=new DiffSideView("",this);
  myLeftSide.becomeMaster();
  myDiffUpdater=new Rediffers(this);
  myData=createDiffPanelState(this);
  if (horisontal) {
    mySplitter=new DiffSplitter(myLeftSide.getComponent(),myRightSide.getComponent(),new DiffDividerPaint(this,FragmentSide.SIDE1));
  }
 else {
    mySplitter=new HorisontalDiffSplitter(myLeftSide.getComponent(),myRightSide.getComponent());
  }
  myPanel.insertDiffComponent(mySplitter.getComponent(),new MyScrollingPanel());
  myDataProvider=new MyGenericDataProvider(this);
  myPanel.setDataProvider(myDataProvider);
  final ComparisonPolicy comparisonPolicy=getComparisonPolicy();
  final ComparisonPolicy defaultComparisonPolicy=DiffManagerImpl.getInstanceEx().getComparisonPolicy();
  if (defaultComparisonPolicy != null && comparisonPolicy != defaultComparisonPolicy) {
    setComparisonPolicy(defaultComparisonPolicy);
  }
}
