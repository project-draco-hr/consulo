{
  myOptions=new DiffPanelOptions(this);
  myPanel=new DiffPanelOutterComponent(TextDiffType.DIFF_TYPES,TOOL_BAR);
  myPanel.disableToolbar(!enableToolbar);
  if (enableToolbar)   myPanel.resetToolbar();
  myOwnerWindow=owner;
  myLeftSide=new DiffSideView("",this);
  myRightSide=new DiffSideView("",this);
  myLeftSide.becomeMaster();
  myDiffUpdater=new Rediffers(this);
  myData=new DiffPanelState(this,project);
  mySplitter=new DiffSplitter(myLeftSide.getComponent(),myRightSide.getComponent(),new DiffDividerPaint(this,FragmentSide.SIDE1));
  myPanel.insertDiffComponent(mySplitter,new MyScrollingPanel());
  myDataProvider=new MyGenericDataProvider(this);
  myPanel.setDataProvider(myDataProvider);
  final ComparisonPolicy comparisonPolicy=getComparisonPolicy();
  final ComparisonPolicy defaultComparisonPolicy=DiffManagerImpl.getInstanceEx().getComparisonPolicy();
  if (defaultComparisonPolicy != null && comparisonPolicy != defaultComparisonPolicy) {
    setComparisonPolicy(defaultComparisonPolicy);
  }
}
