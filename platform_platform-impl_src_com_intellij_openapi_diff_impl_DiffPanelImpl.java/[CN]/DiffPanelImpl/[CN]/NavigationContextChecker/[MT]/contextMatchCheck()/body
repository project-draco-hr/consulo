{
  final Iterable<String> contextLines=myContext.getPreviousLinesIterable();
  final Iterator<String> iterator=contextLines.iterator();
  if (iterator.hasNext()) {
    String contextLine=iterator.next();
    while (myChangedLinesIterator.hasNext()) {
      final Pair<Integer,String> pair=myChangedLinesIterator.next();
      if (pair.getSecond().equals(contextLine)) {
        if (!iterator.hasNext())         break;
        contextLine=iterator.next();
      }
    }
    if (iterator.hasNext()) {
      return -1;
    }
  }
  if (!myChangedLinesIterator.hasNext())   return -1;
  final String targetLine=myContext.getTargetString();
  while (myChangedLinesIterator.hasNext()) {
    final Pair<Integer,String> pair=myChangedLinesIterator.next();
    if (pair.getSecond().equals(targetLine)) {
      return pair.getFirst();
    }
  }
  return -1;
}
