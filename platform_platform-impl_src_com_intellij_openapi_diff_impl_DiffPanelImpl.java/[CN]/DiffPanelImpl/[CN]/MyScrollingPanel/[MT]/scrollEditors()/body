{
  getOptions().onNewContent(myCurrentSide);
  final DiffNavigationContext scrollContext=(DiffNavigationContext)myDiffRequest.getGenericData().get(DiffTool.SCROLL_TO_LINE.getName());
  if (scrollContext == null) {
    scrollCurrentToFirstDiff();
  }
 else {
    final Document document=myRightSide.getEditor().getDocument();
    final FragmentList fragmentList=getFragments();
    final ChangedLinesIterator changedLinesIterator=new ChangedLinesIterator(fragmentList.iterator(),document);
    final CacheOneStepIterator<Pair<Integer,String>> cacheOneStepIterator=new CacheOneStepIterator<Pair<Integer,String>>(changedLinesIterator);
    final NavigationContextChecker checker=new NavigationContextChecker(cacheOneStepIterator,scrollContext);
    int line=checker.contextMatchCheck();
    if (line < 0) {
      scrollCurrentToFirstDiff();
    }
 else {
      myRightSide.scrollToFirstDiff(line);
    }
  }
}
