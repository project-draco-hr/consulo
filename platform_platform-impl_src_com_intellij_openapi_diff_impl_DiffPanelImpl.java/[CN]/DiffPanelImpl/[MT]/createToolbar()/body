{
  return new DiffRequest.ToolbarAddons(){
    public void customize(    DiffToolbar toolbar){
      ActionManager actionManager=ActionManager.getInstance();
      toolbar.addAction(actionManager.getAction("DiffPanel.Toolbar"));
      toolbar.addSeparator();
      toolbar.addAction(new ToggleAutoScrollAction());
      toolbar.addSeparator();
      toolbar.addAction(actionManager.getAction("ContextHelp"));
      toolbar.addAction(getEditSourceAction());
      toolbar.addSeparator();
      toolbar.addAction(new DiffMergeSettingsAction(Arrays.asList(getEditor1(),getEditor2()),ServiceManager.getService(myProject,DiffToolSettings.class)));
    }
    @NotNull private AnAction getEditSourceAction(){
      AnAction editSourceAction=new EditSourceAction();
      editSourceAction.getTemplatePresentation().setIcon(AllIcons.Actions.EditSource);
      editSourceAction.getTemplatePresentation().setText(ActionsBundle.actionText("EditSource"));
      editSourceAction.getTemplatePresentation().setDescription(ActionsBundle.actionText("EditSource"));
      editSourceAction.registerCustomShortcutSet(CommonShortcuts.getEditSource(),myPanel,DiffPanelImpl.this);
      return editSourceAction;
    }
  }
;
}
