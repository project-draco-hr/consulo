{
  PsiClass aClass=constructor.getContainingClass();
  if (aClass == null) {
    return true;
  }
  if (aClass.isEnum()) {
    for (    PsiField field : aClass.getFields()) {
      if (field instanceof PsiEnumConstant) {
        PsiReference reference=field.getReference();
        if (reference != null && reference.isReferenceTo(constructor)) {
          if (!processor.process(reference)) {
            return false;
          }
        }
      }
    }
  }
  PairProcessor<PsiReference,SearchRequestCollector> processor1=new PairProcessor<PsiReference,SearchRequestCollector>(){
    @Override public boolean process(    PsiReference reference,    SearchRequestCollector collector){
      PsiElement parent=reference.getElement().getParent();
      if (parent instanceof PsiAnonymousClass) {
        parent=parent.getParent();
      }
      if (parent instanceof PsiNewExpression) {
        PsiMethod constructor1=((PsiNewExpression)parent).resolveConstructor();
        if (constructor1 != null) {
          if (isStrictSignatureSearch) {
            if (myManager.areElementsEquivalent(constructor,constructor1)) {
              return processor.process(reference);
            }
          }
 else {
            if (myManager.areElementsEquivalent(constructor.getContainingClass(),constructor1.getContainingClass())) {
              return processor.process(reference);
            }
          }
        }
      }
      return true;
    }
  }
;
  ReferencesSearch.searchOptimized(aClass,searchScope,ignoreAccessScope,collector,true,processor1);
  if (PsiUtil.getLanguageLevel(aClass).isAtLeast(LanguageLevel.JDK_1_8)) {
    ReferencesSearch.search(aClass).forEach(new Processor<PsiReference>(){
      @Override public boolean process(      PsiReference reference){
        final PsiElement element=reference.getElement();
        if (element != null) {
          final PsiElement parent=element.getParent();
          if (parent instanceof PsiMethodReferenceExpression && ((PsiMethodReferenceExpression)parent).getReferenceNameElement() instanceof PsiKeyword) {
            if (((PsiMethodReferenceExpression)parent).isReferenceTo(constructor)) {
              processor.process((PsiReference)parent);
            }
          }
        }
        return true;
      }
    }
);
  }
  final boolean constructorCanBeCalledImplicitly=constructor.getParameterList().getParametersCount() == 0;
  if (!processSuperOrThis(processor,aClass,constructor,constructorCanBeCalledImplicitly,searchScope,isStrictSignatureSearch,PsiKeyword.THIS)) {
    return false;
  }
  Processor<PsiClass> processor2=new Processor<PsiClass>(){
    @Override public boolean process(    PsiClass inheritor){
      final PsiElement navigationElement=inheritor.getNavigationElement();
      if (navigationElement instanceof PsiClass) {
        return processSuperOrThis(processor,(PsiClass)navigationElement,constructor,constructorCanBeCalledImplicitly,searchScope,isStrictSignatureSearch,PsiKeyword.SUPER);
      }
      return true;
    }
  }
;
  return ClassInheritorsSearch.search(aClass,searchScope,false).forEach(processor2);
}
