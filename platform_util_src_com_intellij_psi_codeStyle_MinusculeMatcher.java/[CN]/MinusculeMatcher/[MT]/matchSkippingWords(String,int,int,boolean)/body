{
  boolean star=isPatternChar(patternIndex - 1,'*');
  char p=myPattern[patternIndex];
  while (true) {
    int nextOccurrence=star ? StringUtil.indexOfIgnoreCase(name,p,nameIndex + 1) : indexOfWordStart(name,patternIndex,nameIndex);
    if (nextOccurrence < 0) {
      return null;
    }
    if (!allowSpecialChars && !myHasHumps && StringUtil.containsAnyChar(name," ()",nameIndex,nextOccurrence)) {
      return null;
    }
    if (!allowSpecialChars && myHasDots && StringUtil.contains(name,nameIndex,nextOccurrence,'.')) {
      return null;
    }
    if (!Character.isUpperCase(p) || NameUtil.isWordStart(name,nextOccurrence)) {
      FList<TextRange> ranges=matchFragment(name,patternIndex,nextOccurrence);
      if (ranges != null) {
        return ranges;
      }
    }
    nameIndex=nextOccurrence;
  }
}
