{
  boolean star=patternIndex + matchLen < myPattern.length && myPattern[patternIndex + matchLen] == '*';
  if (lastUpper >= 1) {
    int nextNameIndex=star && matchLen == lastUpper ? nameIndex + lastUpper : nextStart;
    int nextPatternIndex=patternIndex + lastUpper + 1;
    FList<TextRange> ranges=star ? matchName(name,nextPatternIndex,nextNameIndex) : skipWords(name,nextPatternIndex,nextNameIndex);
    if (ranges != null) {
      return prependRange(ranges,nameIndex,lastUpper + 1);
    }
  }
  int trial=matchLen;
  while (trial > 0) {
    FList<TextRange> ranges=skipWords(name,patternIndex + trial,nextStart);
    if (ranges != null) {
      return prependRange(ranges,nameIndex,trial);
    }
    trial--;
  }
  FList<TextRange> ranges=matchName(name,patternIndex + matchLen,nameIndex + matchLen);
  if (ranges != null) {
    return prependRange(ranges,nameIndex,matchLen);
  }
  return null;
}
