{
  FList<TextRange> iterable=matchingFragments(name);
  if (iterable == null)   return Integer.MIN_VALUE;
  if (iterable.isEmpty())   return 0;
  final TextRange first=iterable.getHead();
  int matchingCase=0;
  int p=-1;
  int integral=0;
  int humpIndex=1;
  int nextHumpStart=0;
  for (  TextRange range : iterable) {
    for (int i=range.getStartOffset(); i < range.getEndOffset(); i++) {
      boolean isHumpStart=false;
      while (nextHumpStart <= i) {
        if (nextHumpStart == i) {
          isHumpStart=true;
        }
        nextHumpStart=NameUtil.nextWord(name,nextHumpStart);
        if (first != range) {
          humpIndex++;
        }
      }
      integral+=humpIndex;
      char c=name.charAt(i);
      p=StringUtil.indexOf(myPattern,c,p + 1,myPattern.length,false);
      if (p < 0) {
        break;
      }
      if (c == myPattern[p]) {
        matchingCase+=isUpperCase[p] ? 50 : isHumpStart ? 1 : 0;
      }
 else       if (isHumpStart) {
        matchingCase-=20;
      }
    }
  }
  int startIndex=first.getStartOffset();
  boolean afterSeparator=StringUtil.indexOfAny(name,HARD_SEPARATORS,0,startIndex) >= 0;
  boolean wordStart=startIndex == 0 || NameUtil.isWordStart(name,startIndex) && !NameUtil.isWordStart(name,startIndex - 1);
  return (wordStart ? 1000 : 0) - integral * 10 + matchingCase + (afterSeparator ? 0 : 1);
}
