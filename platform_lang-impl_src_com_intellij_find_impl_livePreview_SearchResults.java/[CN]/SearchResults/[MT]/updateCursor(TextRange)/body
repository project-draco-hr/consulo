{
  if (!tryToRepairOldCursor(oldCursorRange)) {
    if (myFindModel != null) {
      if (oldCursorRange != null && !myFindModel.isGlobal()) {
        myCursor=firstOccurrenceAfterOffset(oldCursorRange.getEndOffset());
      }
 else {
        LiveOccurrence afterCaret=firstOccurrenceAfterCaret();
        if (afterCaret != null) {
          myCursor=afterCaret;
        }
 else {
          LiveOccurrence occurrence=firstVisibleOccurrence();
          myCursor=occurrence;
        }
      }
    }
 else {
      myCursor=null;
    }
  }
}
