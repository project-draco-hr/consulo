{
  if (justReplaced || !tryToRepairOldCursor(oldCursorRange)) {
    if (myFindModel != null) {
      if (oldCursorRange != null && !myFindModel.isGlobal()) {
        myCursor=firstOccurrenceAfterOffset(oldCursorRange.getEndOffset());
      }
 else {
        if (justReplaced) {
          nextOccurrence(false,oldCursorRange,false,justReplaced);
        }
 else {
          LiveOccurrence afterCaret=oldCursorRange == null ? firstOccurrenceAtOrAfterCaret() : firstOccurrenceAfterCaret();
          if (afterCaret != null) {
            myCursor=afterCaret;
          }
 else {
            myCursor=null;
          }
        }
      }
    }
 else {
      myCursor=null;
    }
  }
  if (!justReplaced && myCursor == null && hasMatches()) {
    nextOccurrence(true,oldCursorRange,false,false);
  }
}
