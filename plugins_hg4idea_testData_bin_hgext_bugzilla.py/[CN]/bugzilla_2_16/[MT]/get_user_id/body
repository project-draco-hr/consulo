def get_user_id(self, user):
    'look up numeric bugzilla user id.'
    try:
        return self.user_ids[user]
    except KeyError:
        try:
            userid = int(user)
        except ValueError:
            self.ui.note((_('looking up user %s\n') % user))
            self.run('select userid from profiles\n                            where login_name like %s', user)
            all = self.cursor.fetchall()
            if (len(all) != 1):
                raise KeyError(user)
            userid = int(all[0][0])
        self.user_ids[user] = userid
        return userid
