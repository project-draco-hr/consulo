def __init__(self, ui):
    self.ui = ui
    host = self.ui.config('bugzilla', 'host', 'localhost')
    user = self.ui.config('bugzilla', 'user', 'bugs')
    passwd = self.ui.config('bugzilla', 'password')
    db = self.ui.config('bugzilla', 'db', 'bugs')
    timeout = int(self.ui.config('bugzilla', 'timeout', 5))
    usermap = self.ui.config('bugzilla', 'usermap')
    if usermap:
        self.ui.readconfig(usermap, sections=['usermap'])
    self.ui.note((_('connecting to %s:%s as %s, password %s\n') % (host, db, user, ('*' * len(passwd)))))
    self.conn = MySQLdb.connect(host=host, user=user, passwd=passwd, db=db, connect_timeout=timeout)
    self.cursor = self.conn.cursor()
    self.longdesc_id = self.get_longdesc_id()
    self.user_ids = {}
    self.default_notify = 'cd %(bzdir)s && ./processmail %(id)s %(user)s'
