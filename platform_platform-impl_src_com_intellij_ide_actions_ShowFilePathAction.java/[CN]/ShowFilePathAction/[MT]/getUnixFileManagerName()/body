{
  String appName=ExecUtil.execAndReadLine("xdg-mime","query","default","inode/directory");
  if (appName == null || !appName.matches(".+\\.desktop"))   return null;
  String dirs=System.getenv("XDG_DATA_DIRS");
  if (dirs == null)   return null;
  try {
    for (    String dir : dirs.split(File.pathSeparator)) {
      File appFile=new File(dir,"applications/" + appName);
      if (appFile.exists()) {
        BufferedReader reader=new BufferedReader(new FileReader(appFile));
        try {
          String line;
          while ((line=reader.readLine()) != null) {
            if (line.startsWith("Name=")) {
              return line.substring(5);
            }
          }
        }
  finally {
          reader.close();
        }
      }
    }
  }
 catch (  IOException e) {
    LOG.info("Cannot read desktop file",e);
  }
  return null;
}
