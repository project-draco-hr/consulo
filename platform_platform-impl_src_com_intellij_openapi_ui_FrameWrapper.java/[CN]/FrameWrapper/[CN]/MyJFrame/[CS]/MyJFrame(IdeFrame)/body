{
  FrameState.setFrameStateListener(this);
  myParent=parent;
  setGlassPane(new IdeGlassPaneImpl(getRootPane()));
  boolean setMenuOnFrame=SystemInfo.isMac;
  if (SystemInfo.isLinux && "Unity".equals(System.getenv("XDG_CURRENT_DESKTOP"))) {
    try {
      Class.forName("com.jarego.jayatana.Agent");
      setMenuOnFrame=true;
    }
 catch (    ClassNotFoundException e) {
    }
  }
  if (setMenuOnFrame) {
    setJMenuBar(new IdeMenuBar(ActionManagerEx.getInstanceEx(),DataManager.getInstance()));
  }
  MouseGestureManager.getInstance().add(this);
  setFocusTraversalPolicy(new LayoutFocusTraversalPolicyExt());
  setDefaultCloseOperation(DISPOSE_ON_CLOSE);
}
