{
  configureByFiles(null,getVirtualFile(BASE_PATH + getTestName(false) + ".xml"),getVirtualFile(BASE_PATH + getTestName(false) + ".xsd"));
  doDoTest(true,false);
  final XmlTag rootTag=((XmlFile)myFile).getDocument().getRootTag();
  final XmlAttributeValue valueElement=rootTag.getAttribute("noNamespaceSchemaLocation",XmlUtil.XML_SCHEMA_INSTANCE_URI).getValueElement();
  final PsiReference[] references=valueElement.getReferences();
  final String expectedFileName=getTestName(false) + ".xsd";
  assertEquals(1,references.length);
  final PsiElement schema=references[0].resolve();
  assertNotNull(schema);
  assertEquals(expectedFileName,schema.getContainingFile().getName());
  final PsiReference referenceAt=myFile.findReferenceAt(myEditor.getCaretModel().getOffset());
  assertNotNull(referenceAt);
  final PsiElement psiElement=referenceAt.resolve();
  assertTrue(psiElement instanceof XmlTag && "complexType".equals(((XmlTag)psiElement).getLocalName()) && "Y".equals(((XmlTag)psiElement).getAttributeValue("name")));
  assertEquals(expectedFileName,psiElement.getContainingFile().getName());
}
