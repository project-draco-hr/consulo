{
  final String baseName=BASE_PATH + getTestName(false);
  configureByFiles(null,getVirtualFile(baseName + ".xml"),getVirtualFile(baseName + ".ent"));
  doDoTest(true,false);
  myFile.accept(new XmlRecursiveElementVisitor(){
    @Override public void visitXmlAttributeValue(    XmlAttributeValue value){
      final PsiElement[] children=value.getChildren();
      for (      PsiElement child : children) {
        if (child instanceof XmlEntityRef) {
          PsiElement psiElement=child.getReferences()[0].resolve();
          assertNotNull(psiElement);
          assertEquals(getTestName(false) + ".ent",psiElement.getContainingFile().getVirtualFile().getName());
          assertTrue(((Navigatable)psiElement).canNavigate());
        }
      }
    }
  }
);
}
