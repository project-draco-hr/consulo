{
  final String testName=getTestName(false);
  final String basePath=BASE_PATH + testName;
  configureByFiles(null,getVirtualFile(basePath + ".xsd"),getVirtualFile(basePath + "_2.xsd"));
  doDoTest(true,false);
  final List<PsiReference> refs=new ArrayList<PsiReference>(2);
  myFile.acceptChildren(new XmlRecursiveElementVisitor(){
    @Override public void visitXmlTag(    XmlTag tag){
      super.visitXmlTag(tag);
      addRefsInPresent(tag,"base",refs);
      if ("group".equals(tag.getLocalName())) {
        addRefsInPresent(tag,"ref",refs);
      }
    }
  }
);
  assertEquals(2,refs.size());
  PsiElement psiElement=refs.get(0).resolve();
  assertNotNull(psiElement);
  assertEquals(getTestName(false) + "_2.xsd",psiElement.getContainingFile().getName());
  psiElement=refs.get(1).resolve();
  assertNotNull(psiElement);
  assertEquals(getTestName(false) + "_2.xsd",psiElement.getContainingFile().getName());
}
