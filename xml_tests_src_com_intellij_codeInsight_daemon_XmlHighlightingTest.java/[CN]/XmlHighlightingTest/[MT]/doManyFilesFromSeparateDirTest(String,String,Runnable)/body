{
  List<VirtualFile> files=new ArrayList<VirtualFile>();
  files.add(getVirtualFile(getFullRelativeTestName()));
  final VirtualFile virtualFile=getVirtualFile(BASE_PATH + getTestName(false));
  ContainerUtil.addAll(files,virtualFile.getChildren());
  ExternalResourceManagerImpl.registerResourceTemporarily(url,UriUtil.findRelativeFile(mainDtdName,virtualFile).getPath(),getTestRootDisposable());
  doTest(VfsUtil.toVirtualFileArray(files),true,false);
  if (additionalTestAction != null)   additionalTestAction.run();
}
