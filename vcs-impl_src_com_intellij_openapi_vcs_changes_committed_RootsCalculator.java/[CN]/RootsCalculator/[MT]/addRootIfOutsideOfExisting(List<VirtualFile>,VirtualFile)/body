{
  if (newFile == null || (!newFile.isDirectory()))   return;
  if ((!ApplicationManager.getApplication().isUnitTestMode()) && (!myVcs.isVersionedDirectory(newFile)))   return;
  boolean found=false;
  final List<VirtualFile> herselfParentOf=new ArrayList<VirtualFile>();
  for (  VirtualFile root : roots) {
    if (VfsUtil.isAncestor(root,newFile,false)) {
      found=true;
      break;
    }
 else     if (VfsUtil.isAncestor(newFile,root,true)) {
      herselfParentOf.add(root);
    }
  }
  if (!found) {
    for (    VirtualFile file : herselfParentOf) {
      roots.remove(file);
    }
    roots.add(newFile);
  }
}
