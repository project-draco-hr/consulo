{
  final PsiElement element=(PsiElement)dataProvider.getData(DataConstants.PSI_ELEMENT);
  if (element != null) {
    return element.getContainingFile();
  }
  Project project=(Project)dataProvider.getData(DataConstants.PROJECT);
  if (project != null) {
    VirtualFile vFile=(VirtualFile)dataProvider.getData(DataConstants.VIRTUAL_FILE);
    if (vFile != null) {
      return PsiManager.getInstance(project).findFile(vFile);
    }
  }
  return null;
}
