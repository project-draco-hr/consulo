{
  if (myLookupStartMarker == null) {
    throw new AssertionError("null start before");
  }
  if (!myLookupStartMarker.isValid()) {
    throw new AssertionError("invalid start");
  }
  final Document document=myEditor.getDocument();
  RangeMarkerSpy spy=new RangeMarkerSpy(myLookupStartMarker){
    @Override protected void invalidated(    DocumentEvent e){
      LOG.info("Lookup start marker invalidated, say thanks to the " + e + ", doc="+ document+ ", debug="+ debug);
    }
  }
;
  document.addDocumentListener(spy);
  try {
    change.run();
  }
  finally {
    document.removeDocumentListener(spy);
  }
  return myLookupStartMarker.isValid();
}
