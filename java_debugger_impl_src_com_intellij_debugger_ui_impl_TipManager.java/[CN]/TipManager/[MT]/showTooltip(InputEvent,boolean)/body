{
  if (auto && !Registry.is("debugger.valueTooltipAutoShow"))   return;
  MouseEvent sourceEvent=null;
  JComponent newTip=null;
  if (e instanceof MouseEvent) {
    sourceEvent=(MouseEvent)e;
  }
 else   if (e instanceof KeyEvent) {
    sourceEvent=myTipFactory.createTooltipEvent(myLastMouseEvent);
  }
  MouseEvent convertedEvent=null;
  if (sourceEvent != null) {
    convertedEvent=SwingUtilities.convertMouseEvent(sourceEvent.getComponent(),sourceEvent,myComponent);
    newTip=myTipFactory.createToolTip(convertedEvent);
  }
  if (newTip == null || (auto && !myTipFactory.isFocusOwner())) {
    hideTooltip(false);
    return;
  }
  if (newTip == myCurrentTooltip) {
    if (!auto) {
      hideTooltip(true);
      return;
    }
    return;
  }
  hideTooltip(true);
  if (myComponent.isShowing()) {
    PopupFactory popupFactory=PopupFactory.getSharedInstance();
    final Point location=convertedEvent.getPoint();
    final Component sourceComponent=convertedEvent.getComponent();
    if (sourceComponent != null) {
      SwingUtilities.convertPointToScreen(location,sourceComponent);
    }
    myTipPopup=popupFactory.getPopup(myComponent,newTip,location.x,location.y);
    myInsideComponent=false;
    myTipPopup.show();
    myCurrentTooltip=newTip;
  }
}
