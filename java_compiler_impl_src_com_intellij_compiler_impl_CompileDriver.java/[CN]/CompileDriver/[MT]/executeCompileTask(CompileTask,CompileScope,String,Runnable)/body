{
  final CompilerTask progressManagerTask=new CompilerTask(myProject,true,contentName,false);
  final CompileContextImpl compileContext=new CompileContextImpl(myProject,progressManagerTask,scope,null,false,false);
  FileDocumentManager.getInstance().saveAllDocuments();
  progressManagerTask.start(new Runnable(){
    public void run(){
      try {
        task.execute(compileContext);
      }
 catch (      ProcessCanceledException ex) {
      }
 finally {
        if (onTaskFinished != null) {
          onTaskFinished.run();
        }
      }
    }
  }
,null);
}
