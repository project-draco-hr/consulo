{
  final Set<File> outputDirs=new OrderedSet<File>((TObjectHashingStrategy<File>)TObjectHashingStrategy.CANONICAL);
  final Module[] modules=ModuleManager.getInstance(myProject).getModules();
  for (  final String path : CompilerPathsEx.getOutputPaths(modules)) {
    outputDirs.add(new File(path));
  }
  for (  Pair<IntermediateOutputCompiler,Module> pair : myGenerationCompilerModuleToOutputDirMap.keySet()) {
    outputDirs.add(new File(CompilerPaths.getGenerationOutputPath(pair.getFirst(),pair.getSecond(),false)));
    outputDirs.add(new File(CompilerPaths.getGenerationOutputPath(pair.getFirst(),pair.getSecond(),true)));
  }
  final CompilerConfiguration config=CompilerConfiguration.getInstance(myProject);
  if (context.isAnnotationProcessorsEnabled()) {
    for (    Module module : modules) {
      if (config.getAnnotationProcessingConfiguration(module).isEnabled()) {
        final String path=CompilerPaths.getAnnotationProcessorsGenerationPath(module);
        if (path != null) {
          outputDirs.add(new File(path));
        }
      }
    }
  }
  for (  Artifact artifact : ArtifactManager.getInstance(myProject).getArtifacts()) {
    final String path=((ArtifactImpl)artifact).getOutputDirectoryPathToCleanOnRebuild();
    if (path != null) {
      outputDirs.add(new File(FileUtil.toSystemDependentName(path)));
    }
  }
  return outputDirs;
}
