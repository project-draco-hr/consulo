{
  final GeneralSettings settings=GeneralSettings.getInstance();
  int confirmOpenNewProject=settings.getConfirmOpenNewProject();
  if (confirmOpenNewProject == GeneralSettings.OPEN_PROJECT_ASK) {
    if (isNewProject) {
      int exitCode=Messages.showYesNoDialog(IdeBundle.message("prompt.open.project.in.new.frame"),IdeBundle.message("title.new.project"),IdeBundle.message("button.existingframe"),IdeBundle.message("button.newframe"),Messages.getQuestionIcon(),new ProjectNewWindowDoNotAskOption());
      return exitCode == 0 ? GeneralSettings.OPEN_PROJECT_SAME_WINDOW : GeneralSettings.OPEN_PROJECT_NEW_WINDOW;
    }
 else {
      int exitCode=Messages.showYesNoCancelDialog(IdeBundle.message("prompt.open.project.in.new.frame"),IdeBundle.message("title.open.project"),IdeBundle.message("button.existingframe"),IdeBundle.message("button.newframe"),CommonBundle.getCancelButtonText(),Messages.getQuestionIcon(),new ProjectNewWindowDoNotAskOption());
      return exitCode == 0 ? GeneralSettings.OPEN_PROJECT_SAME_WINDOW : exitCode == 1 ? GeneralSettings.OPEN_PROJECT_NEW_WINDOW : Messages.CANCEL;
    }
  }
  return confirmOpenNewProject;
}
