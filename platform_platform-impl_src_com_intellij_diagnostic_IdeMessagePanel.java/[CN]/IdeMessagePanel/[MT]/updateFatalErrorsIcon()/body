{
  final IdeFatalErrorsIcon.State state=computeState();
  myIdeFatal.setState(state);
  if (state == IdeFatalErrorsIcon.State.NoErrors) {
    myNotificationPopupAlreadyShown=false;
  }
 else   if (state == IdeFatalErrorsIcon.State.UnreadErrors && !myNotificationPopupAlreadyShown) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        String notificationText=tryGetFromMessages(myMessagePool.getFatalErrors(false,false));
        if (notificationText == null) {
          notificationText=INTERNAL_ERROR_NOTICE;
        }
        final JLabel label=new JLabel(notificationText);
        label.setIcon(IdeFatalErrorsIcon.UNREAD_ERROR_ICON);
        new NotificationPopup(IdeMessagePanel.this,label,LightColors.RED,false,new ActionListener(){
          public void actionPerformed(          ActionEvent e){
            _openFatals(null);
          }
        }
,true);
      }
    }
);
    myNotificationPopupAlreadyShown=true;
  }
}
