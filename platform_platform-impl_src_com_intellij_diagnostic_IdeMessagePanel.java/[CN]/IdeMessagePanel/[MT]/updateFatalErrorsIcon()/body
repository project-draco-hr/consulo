{
  final List<AbstractMessage> errors=myMessagePool.getFatalErrors(false,false);
  if (errors.isEmpty()) {
    myNotificationPopupAlreadyShown=false;
    myIdeFatal.deactivate();
  }
 else {
    myIdeFatal.activate(INTERNAL_ERROR_NOTICE);
    if (!myNotificationPopupAlreadyShown) {
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          String notificationText=tryGetFromMessages(errors);
          if (notificationText == null) {
            notificationText=INTERNAL_ERROR_NOTICE;
          }
          final JLabel label=new JLabel(notificationText);
          label.setIcon(myIcon);
          new NotificationPopup(IdeMessagePanel.this,label,LightColors.RED,false,new ActionListener(){
            public void actionPerformed(            ActionEvent e){
              _openFatals(null);
            }
          }
,true);
        }
      }
);
      myNotificationPopupAlreadyShown=true;
    }
  }
}
