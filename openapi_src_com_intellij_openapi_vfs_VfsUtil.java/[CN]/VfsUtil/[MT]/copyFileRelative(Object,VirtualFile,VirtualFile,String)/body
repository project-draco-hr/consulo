{
  StringTokenizer tokenizer=new StringTokenizer(relativePath,"/");
  VirtualFile curDir=toDir;
  while (true) {
    String token=tokenizer.nextToken();
    if (tokenizer.hasMoreTokens()) {
      VirtualFile childDir=toDir.findChild(token);
      if (childDir == null) {
        childDir=curDir.createChildDirectory(requestor,token);
      }
      curDir=childDir;
    }
 else {
      return copyFile(requestor,file,curDir,token);
    }
  }
}
