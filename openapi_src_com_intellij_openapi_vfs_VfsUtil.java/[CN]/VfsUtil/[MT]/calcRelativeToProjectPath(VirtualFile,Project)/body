{
  String url=file.getPresentableUrl();
  if (project == null) {
    return url;
  }
 else {
    final VirtualFile baseDir=project.getBaseDir();
    if (baseDir != null) {
      final String projectHomeUrl=baseDir.getPresentableUrl();
      if (url.startsWith(projectHomeUrl)) {
        url="..." + url.substring(projectHomeUrl.length());
      }
    }
    final Module module=getModuleForFile(project,file);
    if (module == null)     return url;
    return new StringBuffer().append("[").append(module.getName()).append("] - ").append(url).toString();
  }
}
