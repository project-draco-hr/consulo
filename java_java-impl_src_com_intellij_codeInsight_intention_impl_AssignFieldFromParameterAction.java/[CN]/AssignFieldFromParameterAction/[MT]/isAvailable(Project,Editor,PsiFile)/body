{
  PsiParameter myParameter=CreateFieldFromParameterAction.findParameterAtCursor(file,editor);
  final PsiType type=getType(myParameter);
  PsiClass targetClass=myParameter == null ? null : PsiTreeUtil.getParentOfType(myParameter,PsiClass.class);
  if (myParameter == null || !myParameter.isValid() || !myParameter.getManager().isInProject(myParameter) || !(myParameter.getDeclarationScope() instanceof PsiMethod) || ((PsiMethod)myParameter.getDeclarationScope()).getBody() == null || type == null || !type.isValid() || targetClass == null || targetClass.isInterface() || CreateFieldFromParameterAction.getParameterAssignedToField(myParameter) != null) {
    return false;
  }
  PsiField field=findFieldToAssign(myParameter);
  if (field == null)   return false;
  if (!field.getLanguage().isKindOf(JavaLanguage.INSTANCE))   return false;
  setText(CodeInsightBundle.message("intention.assign.field.from.parameter.text",field.getName()));
  return true;
}
