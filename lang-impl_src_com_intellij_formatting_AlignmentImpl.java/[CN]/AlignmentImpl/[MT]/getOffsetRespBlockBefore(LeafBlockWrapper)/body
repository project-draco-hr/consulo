{
  if (myOffsetRespBlocks != EMPTY) {
    LeafBlockWrapper lastBlockAfterLineFeed=null;
    LeafBlockWrapper firstAlignedBlock=null;
    LeafBlockWrapper lastAlignedBlock=null;
    for (ListIterator<LeafBlockWrapper> each=myOffsetRespBlocks.listIterator(myOffsetRespBlocks.size()); each.hasPrevious(); ) {
      final LeafBlockWrapper current=each.previous();
      if (blockAfter == null || current.getStartOffset() < blockAfter.getStartOffset()) {
        if (firstAlignedBlock == null || firstAlignedBlock.getStartOffset() > current.getStartOffset()) {
          firstAlignedBlock=current;
        }
        if (lastAlignedBlock == null || lastAlignedBlock.getStartOffset() < current.getStartOffset()) {
          lastAlignedBlock=current;
        }
        if (current.getWhiteSpace().containsLineFeeds() && (lastBlockAfterLineFeed == null || lastBlockAfterLineFeed.getStartOffset() < current.getStartOffset())) {
          lastBlockAfterLineFeed=current;
        }
      }
    }
    if (lastBlockAfterLineFeed != null)     return lastBlockAfterLineFeed;
    if (firstAlignedBlock != null)     return firstAlignedBlock;
    return lastAlignedBlock;
  }
  return null;
}
