{
  if (e1 instanceof PsiLiteralExpression && e2 instanceof PsiLiteralExpression) {
    return Comparing.equal(((PsiLiteralExpression)e1).getValue(),((PsiLiteralExpression)e2).getValue());
  }
  if (e1 instanceof PsiPrefixExpression && e2 instanceof PsiPrefixExpression && ((PsiPrefixExpression)e1).getOperationTokenType() == ((PsiPrefixExpression)e2).getOperationTokenType()) {
    return same(((PsiPrefixExpression)e1).getOperand(),((PsiPrefixExpression)e2).getOperand(),manager);
  }
  if (e1 instanceof PsiReference && e2 instanceof PsiReference) {
    e1=((PsiReference)e1).resolve();
    e2=((PsiReference)e2).resolve();
  }
  return manager.areElementsEquivalent(e2,e1);
}
