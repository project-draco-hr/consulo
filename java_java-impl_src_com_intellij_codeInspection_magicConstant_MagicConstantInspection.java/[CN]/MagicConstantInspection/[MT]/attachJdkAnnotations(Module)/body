{
  OrderEntry[] entries=ModuleRootManager.getInstance(module).getOrderEntries();
  Sdk jdk=null;
  for (  OrderEntry orderEntry : entries) {
    if (orderEntry instanceof JdkOrderEntry) {
      jdk=((JdkOrderEntry)orderEntry).getJdk();
    }
  }
  LOG.assertTrue(jdk != null,"JDK not configured for module " + module);
  LocalFileSystem lfs=LocalFileSystem.getInstance();
  VirtualFile root=null;
  if (root == null) {
    root=lfs.findFileByPath(FileUtil.toSystemIndependentName(PathManager.getHomePath()) + "/java/jdkAnnotations");
  }
  if (root == null) {
    root=lfs.findFileByPath(FileUtil.toSystemIndependentName(PathManager.getHomePath()) + "/community/java/jdkAnnotations");
  }
  if (root == null) {
    root=VirtualFileManager.getInstance().findFileByUrl("jar://" + FileUtil.toSystemIndependentName(PathManager.getHomePath()) + "/lib/jdkAnnotations.jar!/");
  }
  if (root == null) {
    LOG.error("jdk annotations not found in: " + FileUtil.toSystemIndependentName(PathManager.getHomePath()) + "/lib/jdkAnnotations.jar!/");
    return;
  }
  SdkModificator modificator=jdk.getSdkModificator();
  modificator.addRoot(root,AnnotationOrderRootType.getInstance());
  modificator.commitChanges();
}
