{
  if (!GppTypeConverter.hasTypedContext(closure)) {
    return null;
  }
  for (  TypeConstraint constraint : GroovyExpectedTypesProvider.calculateTypeConstraints(closure)) {
    if (constraint instanceof SubtypeConstraint || constraint instanceof TypeEquals) {
      final PsiType suggestion=getSingleMethodParameterType(constraint.getDefaultType(),index,closure);
      if (suggestion != null) {
        return suggestion;
      }
    }
  }
  return null;
}
