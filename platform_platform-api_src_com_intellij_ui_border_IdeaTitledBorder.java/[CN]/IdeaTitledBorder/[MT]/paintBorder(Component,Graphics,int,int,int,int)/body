{
  int labelX=x + outsideInsets.left;
  int labelY=y + outsideInsets.top;
  TitledSeparator titledSeparator=getTitledSeparator(c);
  titledSeparator.setText(title);
  JLabel label=titledSeparator.getLabel();
  Dimension labelSize=label.getPreferredSize();
  label.setSize(labelSize);
  g.translate(labelX,labelY);
  label.paint(g);
  int separatorX=labelX + labelSize.width + TitledSeparator.SEPARATOR_LEFT_INSET;
  int separatorY=labelY + (UIUtil.isUnderAquaLookAndFeel() ? 2 : labelSize.height / 2 - 1);
  int separatorW=Math.max(0,width - separatorX - TitledSeparator.SEPARATOR_RIGHT_INSET);
  int separatorH=2;
  JSeparator separator=titledSeparator.getSeparator();
  separator.setSize(separatorW,separatorH);
  g.translate(separatorX - labelX,separatorY - labelY);
  separator.paint(g);
  g.translate(-separatorX,-separatorY);
}
