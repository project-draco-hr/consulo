{
  CompositeElement aClass=ASTFactory.composite(CLASS);
  aClass.rawAddChildren(modifierList);
  if (atToken != null) {
    aClass.rawAddChildren(atToken);
  }
  final IElementType keywordTokenType=lexer.getTokenType();
  LOG.assertTrue(CLASS_KEYWORD_BIT_SET.contains(keywordTokenType));
  final boolean isEnum=keywordTokenType == ENUM_KEYWORD;
  aClass.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
  lexer.advance();
  if (lexer.getTokenType() != IDENTIFIER) {
    TreeElement errorElement=Factory.createErrorElement(JavaErrorMessages.message("expected.identifier"));
    aClass.rawAddChildren(errorElement);
    return (CompositeElement)aClass.getFirstChildNode();
  }
  aClass.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
  lexer.advance();
  TreeElement classParameterList=parseTypeParameterList(lexer);
  aClass.rawAddChildren(classParameterList);
  TreeElement extendsList=(TreeElement)parseExtendsList(lexer);
  if (extendsList == null) {
    extendsList=ASTFactory.composite(EXTENDS_LIST);
  }
  aClass.rawAddChildren(extendsList);
  TreeElement implementsList=(TreeElement)parseImplementsList(lexer);
  if (implementsList == null) {
    implementsList=ASTFactory.composite(IMPLEMENTS_LIST);
  }
  aClass.rawAddChildren(implementsList);
  if (lexer.getTokenType() != LBRACE) {
    CompositeElement invalidElementsGroup=Factory.createErrorElement(JavaErrorMessages.message("expected.lbrace"));
    aClass.rawAddChildren(invalidElementsGroup);
    while (true) {
      IElementType tokenType=lexer.getTokenType();
      if (tokenType == IDENTIFIER || tokenType == COMMA || tokenType == EXTENDS_KEYWORD || tokenType == IMPLEMENTS_KEYWORD) {
        invalidElementsGroup.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
      }
 else {
        break;
      }
      lexer.advance();
    }
  }
  parseClassBodyWithBraces(aClass,lexer,atToken != null,isEnum);
  return aClass;
}
