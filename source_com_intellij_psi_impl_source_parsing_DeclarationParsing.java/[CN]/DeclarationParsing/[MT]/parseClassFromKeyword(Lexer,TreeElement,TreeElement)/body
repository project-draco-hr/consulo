{
  CompositeElement aClass=ASTFactory.composite(JavaElementType.CLASS);
  aClass.rawAddChildren(modifierList);
  if (atToken != null) {
    aClass.rawAddChildren(atToken);
  }
  final IElementType keywordTokenType=lexer.getTokenType();
  LOG.assertTrue(ElementType.CLASS_KEYWORD_BIT_SET.contains(keywordTokenType));
  final boolean isEnum=keywordTokenType == JavaTokenType.ENUM_KEYWORD;
  aClass.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
  lexer.advance();
  if (lexer.getTokenType() != JavaTokenType.IDENTIFIER) {
    TreeElement errorElement=Factory.createErrorElement(JavaErrorMessages.message("expected.identifier"));
    aClass.rawAddChildren(errorElement);
    return (CompositeElement)aClass.getFirstChildNode();
  }
  aClass.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
  lexer.advance();
  TreeElement classParameterList=parseTypeParameterList(lexer);
  aClass.rawAddChildren(classParameterList);
  TreeElement extendsList=parseExtendsList(lexer);
  if (extendsList == null) {
    extendsList=ASTFactory.composite(JavaElementType.EXTENDS_LIST);
  }
  aClass.rawAddChildren(extendsList);
  TreeElement implementsList=parseImplementsList(lexer);
  if (implementsList == null) {
    implementsList=ASTFactory.composite(JavaElementType.IMPLEMENTS_LIST);
  }
  aClass.rawAddChildren(implementsList);
  if (lexer.getTokenType() != JavaTokenType.LBRACE) {
    CompositeElement invalidElementsGroup=Factory.createErrorElement(JavaErrorMessages.message("expected.lbrace"));
    aClass.rawAddChildren(invalidElementsGroup);
    while (true) {
      IElementType tokenType=lexer.getTokenType();
      if (tokenType == JavaTokenType.IDENTIFIER || tokenType == JavaTokenType.COMMA || tokenType == JavaTokenType.EXTENDS_KEYWORD || tokenType == JavaTokenType.IMPLEMENTS_KEYWORD) {
        invalidElementsGroup.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
      }
 else {
        break;
      }
      lexer.advance();
    }
  }
  parseClassBodyWithBraces(aClass,lexer,atToken != null,isEnum);
  return aClass;
}
