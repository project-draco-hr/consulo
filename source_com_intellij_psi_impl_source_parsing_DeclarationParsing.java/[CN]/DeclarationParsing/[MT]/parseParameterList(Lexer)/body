{
  CompositeElement paramList=ASTFactory.composite(PARAMETER_LIST);
  LOG.assertTrue(lexer.getTokenType() == LPARENTH);
  paramList.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
  lexer.advance();
  CompositeElement invalidElementsGroup=null;
  boolean commaExpected=false;
  int paramCount=0;
  while (true) {
    IElementType tokenType=lexer.getTokenType();
    if (tokenType == null || tokenType == RPARENTH) {
      boolean noLastParm=!commaExpected && paramCount > 0;
      if (noLastParm) {
        paramList.rawAddChildren(Factory.createErrorElement(JavaErrorMessages.message("expected.identifier.or.type")));
      }
      if (tokenType == RPARENTH) {
        paramList.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
        lexer.advance();
      }
 else {
        if (!noLastParm) {
          paramList.rawAddChildren(Factory.createErrorElement(JavaErrorMessages.message("expected.rparen")));
        }
      }
      break;
    }
    if (commaExpected) {
      if (tokenType == COMMA) {
        paramList.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
        lexer.advance();
        commaExpected=false;
        invalidElementsGroup=null;
        continue;
      }
    }
 else {
      TreeElement param=parseParameter(lexer,true);
      if (param != null) {
        paramList.rawAddChildren(param);
        commaExpected=true;
        invalidElementsGroup=null;
        paramCount++;
        continue;
      }
    }
    if (invalidElementsGroup == null) {
      if (tokenType == COMMA) {
        paramList.rawAddChildren(Factory.createErrorElement(JavaErrorMessages.message("expected.parameter")));
        paramList.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
        lexer.advance();
        continue;
      }
 else {
        invalidElementsGroup=Factory.createErrorElement(commaExpected ? JavaErrorMessages.message("expected.comma") : JavaErrorMessages.message("expected.parameter"));
        paramList.rawAddChildren(invalidElementsGroup);
      }
    }
    CompositeElement ref=parseJavaCodeReference(lexer,true,true);
    if (ref != null) {
      invalidElementsGroup.rawAddChildren(ref);
    }
 else {
      if (lexer.getTokenType() != null) {
        invalidElementsGroup.rawAddChildren(ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
        lexer.advance();
      }
    }
  }
  return paramList;
}
