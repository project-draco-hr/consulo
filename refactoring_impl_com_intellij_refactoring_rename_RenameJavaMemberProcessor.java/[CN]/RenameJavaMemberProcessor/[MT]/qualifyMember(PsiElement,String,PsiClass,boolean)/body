{
  PsiManager psiManager=occurence.getManager();
  PsiElementFactory factory=JavaPsiFacade.getInstance(psiManager.getProject()).getElementFactory();
  if (isStatic) {
    PsiReferenceExpression qualified=(PsiReferenceExpression)factory.createExpressionFromText("a." + newName,null);
    qualified=(PsiReferenceExpression)CodeStyleManager.getInstance(psiManager.getProject()).reformat(qualified);
    qualified.getQualifierExpression().replace(factory.createReferenceExpression(containingClass));
    occurence.replace(qualified);
  }
 else {
    PsiReferenceExpression qualified=createQualifiedMemberReference(occurence,newName,containingClass,isStatic);
    qualified=(PsiReferenceExpression)CodeStyleManager.getInstance(psiManager.getProject()).reformat(qualified);
    occurence.replace(qualified);
  }
}
