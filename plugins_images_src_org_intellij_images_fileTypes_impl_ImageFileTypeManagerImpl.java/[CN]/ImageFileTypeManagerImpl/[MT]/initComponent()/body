{
  final FileTypeManager fileTypeManager=FileTypeManager.getInstance();
  String[] readerFormatNames=ImageIO.getReaderFormatNames();
  final Set<String> extensions=new HashSet<String>(readerFormatNames.length);
  for (  String format : readerFormatNames) {
    extensions.add(format.toLowerCase());
  }
  imageFileType=new ImageFileType();
  imageFileType.setIcon(IconLoader.getIcon("/org/intellij/images/icons/ImagesFileType.png"));
  imageFileType.setName(IMAGE_FILE_TYPE_NAME);
  imageFileType.setDescription(IMAGE_FILE_TYPE_DESCRIPTION);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      fileTypeManager.registerFileType(imageFileType,extensions.toArray(new String[extensions.size()]));
    }
  }
);
}
