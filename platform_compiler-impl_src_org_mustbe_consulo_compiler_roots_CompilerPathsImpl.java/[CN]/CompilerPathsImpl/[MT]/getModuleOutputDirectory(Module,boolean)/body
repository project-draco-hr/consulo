{
  final ModuleCompilerPathsManager manager=ModuleCompilerPathsManager.getInstance(module);
  VirtualFile outPath;
  if (forTestClasses) {
    final VirtualFile path=manager.getCompilerOutput(TestContentFolderTypeProvider.getInstance());
    if (path != null) {
      outPath=path;
    }
 else {
      outPath=manager.getCompilerOutput(ProductionContentFolderTypeProvider.getInstance());
    }
  }
 else {
    outPath=manager.getCompilerOutput(ProductionContentFolderTypeProvider.getInstance());
  }
  if (outPath == null) {
    return null;
  }
  if (!outPath.isValid()) {
    LOGGER.info("Requested output path for module " + module.getName() + " is not valid");
    return null;
  }
  return outPath;
}
