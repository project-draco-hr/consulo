import error
import sys, unicodedata, locale, os
_encodingfixup = {'646': 'ascii', 'ANSI_X3.4-1968': 'ascii', }
try:
    encoding = os.environ.get('HGENCODING')
    if ((sys.platform == 'darwin') and (not encoding)):
        lc = locale.setlocale(locale.LC_CTYPE, '')
        if (lc == 'UTF-8'):
            locale.setlocale(locale.LC_CTYPE, 'en_US.UTF-8')
        encoding = locale.getlocale()[1]
    if (not encoding):
        encoding = (locale.getpreferredencoding() or 'ascii')
        encoding = _encodingfixup.get(encoding, encoding)
except locale.Error:
    encoding = 'ascii'
encodingmode = os.environ.get('HGENCODINGMODE', 'strict')
fallbackencoding = 'ISO-8859-1'
