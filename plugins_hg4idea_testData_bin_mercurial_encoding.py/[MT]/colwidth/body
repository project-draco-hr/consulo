def colwidth(s):
    'Find the column width of a UTF-8 string for display'
    d = s.decode(encoding, 'replace')
    if hasattr(unicodedata, 'east_asian_width'):
        w = unicodedata.east_asian_width
        return sum([(((w(c) in 'WF') and 2) or 1) for c in d])
    return len(d)
