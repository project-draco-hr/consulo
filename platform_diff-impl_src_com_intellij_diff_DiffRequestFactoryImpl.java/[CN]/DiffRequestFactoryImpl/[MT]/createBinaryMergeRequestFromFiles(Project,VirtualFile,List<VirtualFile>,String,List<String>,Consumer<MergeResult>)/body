{
  if (fileContents.size() != 3)   throw new IllegalArgumentException();
  if (contentTitles.size() != 3)   throw new IllegalArgumentException();
  try {
    FileContent outputContent=myContentFactory.createFile(project,output);
    if (outputContent == null)     throw new InvalidDiffRequestException("Can't create output content: " + output.getPresentableUrl());
    byte[] originalContent=output.contentsToByteArray();
    List<DiffContent> contents=new ArrayList<DiffContent>(3);
    List<byte[]> byteContents=new ArrayList<byte[]>(3);
    for (    VirtualFile file : fileContents) {
      FileContent content=myContentFactory.createFile(project,file);
      if (content == null)       throw new InvalidDiffRequestException("Can't create content: " + file.getPresentableUrl());
      contents.add(content);
      byteContents.add(file.contentsToByteArray());
    }
    return new BinaryMergeRequestImpl(project,outputContent,originalContent,contents,byteContents,title,contentTitles,applyCallback);
  }
 catch (  IOException e) {
    throw new InvalidDiffRequestException("Can't read from file",e);
  }
}
