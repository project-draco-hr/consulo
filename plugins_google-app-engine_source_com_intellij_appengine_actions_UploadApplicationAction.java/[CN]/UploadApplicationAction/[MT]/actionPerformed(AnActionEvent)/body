{
  final Project project=e.getData(DataKeys.PROJECT);
  if (project != null) {
    final List<Artifact> artifacts=AppEngineUtil.collectWebArtifacts(project,true);
    if (artifacts.isEmpty()) {
      Messages.showErrorDialog(project,"No Web artifacts with AppEngine found in the project",CommonBundle.getErrorTitle());
      return;
    }
    Artifact artifact;
    if (artifacts.size() == 1) {
      artifact=artifacts.get(0);
    }
 else {
      final UploadApplicationDialog dialog=new UploadApplicationDialog(project);
      dialog.show();
      artifact=dialog.getSelectedArtifact();
      if (!dialog.isOK() || artifact == null) {
        return;
      }
    }
    final AppEngineUploader uploader=new AppEngineUploader(project);
    uploader.startUploading(artifact);
  }
}
