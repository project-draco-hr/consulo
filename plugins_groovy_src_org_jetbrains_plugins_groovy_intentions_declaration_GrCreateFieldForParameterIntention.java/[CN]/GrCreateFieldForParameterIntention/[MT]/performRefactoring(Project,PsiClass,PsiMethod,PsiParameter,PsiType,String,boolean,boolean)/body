{
  GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(project);
  if (targetClass.findFieldByName(fieldName,false) == null) {
    String[] modifiers=getModifiers(methodStatic,isFinal);
    GrVariableDeclaration fieldDeclaration=factory.createFieldDeclaration(modifiers,fieldName,null,type);
    GrVariableDeclaration inserted=(GrVariableDeclaration)targetClass.add(fieldDeclaration);
    GrReferenceAdjuster.shortenReferences(inserted);
  }
  GrOpenBlock block=((GrMethod)method).getBlock();
  if (block == null)   return;
  GrAssignmentExpression assignment=createAssignment(targetClass,myParameter,fieldName,methodStatic,factory);
  GrStatement anchor=getAnchor(block);
  GrStatement statement=block.addStatementBefore(assignment,anchor);
  GrReferenceAdjuster.shortenReferences(statement);
}
