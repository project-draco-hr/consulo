{
  myJobDescriptors=new ArrayList<JobDescriptor>();
  final InspectionProjectProfileManager profileManager=InspectionProjectProfileManager.getInstance(getProject());
  if (runWithEditorSettings) {
    final Set<String> profiles=scope.getActiveInspectionProfiles();
    for (    String profile : profiles) {
      InspectionProfileWrapper inspectionProfile=profileManager.getProfileWrapper(profile);
      if (inspectionProfile == null) {
        inspectionProfile=new InspectionProfileWrapper((InspectionProfile)profileManager.getProfile(profile));
        inspectionProfile.init(getProject());
      }
      processProfileTools(inspectionProfile,tools,localTools);
    }
  }
 else {
    InspectionProfileWrapper profile=new InspectionProfileWrapper(getCurrentProfile());
    processProfileTools(profile,tools,localTools);
    profile.init(getProject());
  }
  BUILD_GRAPH.setTotalAmount(scope.getFileCount());
  LOCAL_ANALYSIS.setTotalAmount(scope.getFileCount());
}
