{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      PsiDocumentManager.getInstance(myProject).commitAllDocuments();
    }
  }
);
  LOG.info("Code inspection started");
  Runnable runInspection=new Runnable(){
    public void run(){
      performInspectionsWithProgress(scope,manager);
    }
  }
;
  final Runnable successRunnable=new Runnable(){
    public void run(){
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          LOG.info("Code inspection finished");
          final InspectionResultsView view=new InspectionResultsView(myProject,RUN_WITH_EDITOR_PROFILE ? null : getCurrentProfile(),scope,GlobalInspectionContextImpl.this,new InspectionRVContentProviderImpl(myProject));
          if (!view.update() && !getUIOptions().SHOW_ONLY_DIFF) {
            Messages.showMessageDialog(myProject,InspectionsBundle.message("inspection.no.problems.message"),InspectionsBundle.message("inspection.no.problems.dialog.title"),Messages.getInformationIcon());
            close(true);
          }
 else {
            addView(view);
          }
        }
      }
);
    }
  }
;
  ProgressManager.getInstance().runProcessWithProgressAsynchronously(myProject,InspectionsBundle.message("inspection.progress.title"),runInspection,successRunnable,null);
}
