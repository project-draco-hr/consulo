{
  if (in.size() <= 1)   return in;
  final List<RootUrlPair> infos=new ArrayList<RootUrlPair>(in.size());
  final SvnFileUrlMappingImpl mapping=(SvnFileUrlMappingImpl)getSvnFileUrlMapping();
  for (  VirtualFile vf : in) {
    final File ioFile=new File(vf.getPath());
    final SVNURL url=mapping.getUrlForFile(ioFile);
    if (url == null)     continue;
    infos.add(new MyPair(vf,url.toString()));
  }
  final List<RootUrlPair> filtered=new ArrayList<RootUrlPair>(infos.size());
  ForNestedRootChecker.filterOutSuperfluousChildren(this,infos,filtered);
  return ObjectsConvertor.convert(filtered,new Convertor<RootUrlPair,VirtualFile>(){
    public VirtualFile convert(    RootUrlPair o){
      return o.getVirtualFile();
    }
  }
);
}
