{
  final MessageBusConnection connection=bus.connect();
  connection.subscribe(ChangeListManagerImpl.LISTS_LOADED,new LocalChangeListsLoadedListener(){
    @Override public void processLoadedLists(    final List<LocalChangeList> lists){
      if (lists.isEmpty())       return;
      SvnConfiguration.SvnSupportOptions supportOptions=null;
      try {
        ChangeListManager.getInstance(myProject).setReadOnly(SvnChangeProvider.ourDefaultListName,true);
        supportOptions=myConfiguration.getSupportOptions(myProject);
        if (!supportOptions.changeListsSynchronized()) {
          processChangeLists(lists);
        }
      }
 catch (      ProcessCanceledException e) {
      }
 finally {
        if (supportOptions != null) {
          supportOptions.upgrade();
        }
      }
      connection.disconnect();
    }
  }
);
}
