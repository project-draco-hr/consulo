{
  if (!supportOptions.upgradeTo16Asked()) {
    final SvnWorkingCopyChecker workingCopyChecker=new SvnWorkingCopyChecker();
    if (workingCopyChecker.upgradeNeeded()) {
      final Notifications notifications=myProject.getMessageBus().syncPublisher(Notifications.TOPIC);
      notifications.register(UPGRADE_SUBVERSION_FORMAT,NotificationDisplayType.BALOON,false);
      final String title=SvnBundle.message("upgrade.format.to16.question.title");
      notifications.notify(UPGRADE_SUBVERSION_FORMAT,title,title,NotificationType.INFORMATION,new NotificationListener(){
        @NotNull public Continue perform(){
          final int upgradeAnswer=Messages.showYesNoDialog(SvnBundle.message("upgrade.format.to16.question.text",SvnBundle.message("label.where.svn.format.can.be.changed.text",SvnBundle.message("action.show.svn.map.text"))),SvnBundle.message("upgrade.format.to16.question.title"),Messages.getWarningIcon());
          if (DialogWrapper.OK_EXIT_CODE == upgradeAnswer) {
            workingCopyChecker.doUpgrade();
          }
          return Continue.REMOVE;
        }
        public Continue onRemove(){
          return Continue.REMOVE;
        }
      }
);
    }
  }
}
