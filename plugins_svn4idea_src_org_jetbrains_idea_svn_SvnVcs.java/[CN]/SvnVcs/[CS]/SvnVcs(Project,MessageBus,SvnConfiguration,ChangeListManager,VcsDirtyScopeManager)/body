{
  super(project);
  LOG.debug("ct");
  myConfiguration=svnConfiguration;
  dumpFileStatus(FileStatus.ADDED);
  dumpFileStatus(FileStatus.DELETED);
  dumpFileStatus(FileStatus.MERGE);
  dumpFileStatus(FileStatus.MODIFIED);
  dumpFileStatus(FileStatus.NOT_CHANGED);
  dumpFileStatus(FileStatus.UNKNOWN);
  dumpFileStatus(SvnFileStatus.REPLACED);
  dumpFileStatus(SvnFileStatus.EXTERNAL);
  dumpFileStatus(SvnFileStatus.OBSTRUCTED);
  myEntriesFileListener=new SvnEntriesFileListener(project);
  final ProjectLevelVcsManager vcsManager=ProjectLevelVcsManager.getInstance(project);
  myAddConfirmation=vcsManager.getStandardConfirmation(VcsConfiguration.StandardConfirmation.ADD,this);
  myDeleteConfirmation=vcsManager.getStandardConfirmation(VcsConfiguration.StandardConfirmation.REMOVE,this);
  myCheckoutOptions=vcsManager.getStandardOption(VcsConfiguration.StandardOption.CHECKOUT,this);
  if (myProject.isDefault()) {
    myChangeListListener=null;
  }
 else {
    upgradeIfNeeded(bus);
    myChangeListListener=new SvnChangelistListener(myProject,createChangelistClient());
    changeListManager.addChangeListListener(myChangeListListener);
    myMessageBusConnection=bus.connect();
    myMessageBusConnection.subscribe(ProjectLevelVcsManagerImpl.VCS_MAPPING_CHANGED,new Runnable(){
      public void run(){
        invokeRefreshSvnRoots(true);
      }
    }
);
  }
  myMapping=SvnFileUrlMappingImpl.getInstance(myProject);
  myMapping.setVcs(this);
  StartupManager.getInstance(myProject).registerPostStartupActivity(new DumbAwareRunnable(){
    public void run(){
      postStartup();
    }
  }
);
  myFrameStateListener=new MyFrameStateListener(changeListManager,vcsDirtyScopeManager);
}
