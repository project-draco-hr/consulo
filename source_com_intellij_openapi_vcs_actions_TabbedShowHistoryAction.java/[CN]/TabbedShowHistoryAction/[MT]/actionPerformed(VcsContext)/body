{
  FilePath path=getSelectedFiles(context)[0];
  Project project=context.getProject();
  VirtualFile someVFile=path.getVirtualFile() != null ? path.getVirtualFile() : path.getVirtualFileParent();
  AbstractVcs activeVcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(someVFile);
  VcsHistoryProvider vcsHistoryProvider=getProvider(activeVcs);
  try {
    VcsHistorySession session=vcsHistoryProvider.createSessionFor(path);
    List<VcsFileRevision> revisionsList=session.getRevisionList();
    if (revisionsList.isEmpty())     return;
    String actionName="File " + path.getName() + " History";
    ContentManager contentManager=ProjectLevelVcsManagerEx.getInstanceEx(project).getContentManager();
    FileHistoryPanel fileHistoryPanel=new FileHistoryPanel(project,path,session,activeVcs,contentManager);
    Content content=PeerFactory.getInstance().getContentFactory().createContent(fileHistoryPanel,actionName,true);
    contentManager.addContent(content);
    ToolWindow toolWindow=ToolWindowManager.getInstance(project).getToolWindow(ToolWindowId.VCS);
    toolWindow.activate(null);
    contentManager.setSelectedContent(content);
  }
 catch (  Exception exception) {
    reportError(exception);
  }
}
