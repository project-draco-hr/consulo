{
  ArrayList<FilePath> result=new ArrayList<FilePath>();
  VirtualFile[] virtualFileArray=context.getSelectedFiles();
  if (virtualFileArray != null) {
    for (int i=0; i < virtualFileArray.length; i++) {
      VirtualFile virtualFile=virtualFileArray[i];
      result.add(new FilePathImpl(virtualFile));
    }
  }
  File[] fileArray=context.getSelectedIOFiles();
  if (fileArray != null) {
    for (int i=0; i < fileArray.length; i++) {
      File file=fileArray[i];
      VirtualFile parent=LocalFileSystem.getInstance().findFileByIoFile(file.getParentFile());
      if (parent != null) {
        result.add(new FilePathImpl(parent,file.getName()));
      }
    }
  }
  return result.toArray(new FilePath[result.size()]);
}
