{
  if (!CodeInsightUtil.prepareFileForWrite(myMethod.getContainingFile()))   return;
  try {
    final String value=suggestReturnValue();
    final PsiElementFactory factory=myMethod.getManager().getElementFactory();
    PsiReturnStatement returnStatement=(PsiReturnStatement)factory.createStatementFromText("return " + value + ";",myMethod);
    final PsiCodeBlock body=myMethod.getBody();
    returnStatement=(PsiReturnStatement)body.addBefore(returnStatement,body.getRBrace());
    TextRange range=returnStatement.getReturnValue().getTextRange();
    int offset=range.getStartOffset();
    editor.getCaretModel().moveToOffset(offset);
    editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
    editor.getSelectionModel().setSelection(range.getEndOffset(),range.getStartOffset());
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
