{
  final List<DiffFragment> fragments=new ArrayList<DiffFragment>();
  for (int i=0; i < myRanges.size(); i++) {
    final BeforeAfter<TextRange> range=myRanges.get(i);
    fragments.addAll(Arrays.asList(myDelegate.buildFragments(text1.substring(range.getBefore().getStartOffset(),range.getBefore().getEndOffset()).copy(),text2.substring(range.getAfter().getStartOffset(),range.getAfter().getEndOffset()).copy())));
  }
  return fragments.toArray(new DiffFragment[fragments.size()]);
}
