{
  myJobDescriptors=new ArrayList<JobDescriptor>();
  final InspectionProjectProfileManager profileManager=InspectionProjectProfileManager.getInstance(getProject());
  if (runWithEditorSettings) {
    final Set<String> profiles=scope.getActiveInspectionProfiles();
    for (    String profile : profiles) {
      final InspectionProfile inspectionProfile=((InspectionProfileImpl)profileManager.getProfile(profile));
      processProfileTools(inspectionProfile,tools,localTools);
    }
  }
 else {
    InspectionProfile profile=(InspectionProfileImpl)profileManager.getProfile(myCurrentProfileName);
    if (profile == null) {
      profile=(InspectionProfileImpl)InspectionProfileManager.getInstance().getProfile(myCurrentProfileName);
    }
    processProfileTools(profile,tools,localTools);
  }
  BUILD_GRAPH.setTotalAmount(scope.getFileCount());
  LOCAL_ANALYSIS.setTotalAmount(scope.getFileCount());
}
