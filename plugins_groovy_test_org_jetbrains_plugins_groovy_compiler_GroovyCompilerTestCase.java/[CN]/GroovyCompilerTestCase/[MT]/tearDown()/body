{
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    @Override public void run(){
      try {
        if (useJps()) {
          CompilerWorkspaceConfiguration.getInstance(getProject()).USE_COMPILE_SERVER=false;
          ApplicationManagerEx.getApplicationEx().doNotSave(true);
          new WriteCommandAction(getProject()){
            @Override protected void run(            Result result) throws Throwable {
              final JavaAwareProjectJdkTableImpl jdkTable=JavaAwareProjectJdkTableImpl.getInstanceEx();
              jdkTable.removeJdk(jdkTable.getInternalJdk());
            }
          }
.execute();
          CompileServerManager.getInstance().shutdownServer();
        }
        myMainOutput.tearDown();
        myMainOutput=null;
        GroovyCompilerTestCase.super.tearDown();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
}
