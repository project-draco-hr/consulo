{
  final JavaCommandLineState state=new JavaCommandLineState(runnerSettings,configurationSettings){
    protected JavaParameters createJavaParameters() throws ExecutionException {
      final JavaParameters params=new JavaParameters();
      JavaParametersUtil.configureModule(getConfigurationModule(),params,JavaParameters.JDK_AND_CLASSES_AND_TESTS,ALTERNATIVE_JRE_PATH_ENABLED ? ALTERNATIVE_JRE_PATH : null);
      JavaParametersUtil.configureConfiguration(params,ApplicationConfiguration.this);
      if (ENABLE_SWING_INSPECTOR) {
        params.getProgramParametersList().prepend(MAIN_CLASS_NAME);
        params.getClassPath().addTail(PathUtil.getJarPathForClass(SnapShooter.class));
        params.getClassPath().addTail(PathUtil.getJarPathForClass(ProjectComponent.class));
        params.setMainClass("com.intellij.uiDesigner.snapShooter.SnapShooter");
      }
 else {
        params.setMainClass(MAIN_CLASS_NAME);
      }
      return params;
    }
  }
;
  state.setConsoleBuilder(TextConsoleBuidlerFactory.getInstance().createBuilder(getProject()));
  state.setModulesToCompile(getModules());
  return state;
}
