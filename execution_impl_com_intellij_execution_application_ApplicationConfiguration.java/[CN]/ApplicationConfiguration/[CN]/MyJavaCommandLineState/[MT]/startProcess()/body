{
  final OSProcessHandler handler=super.startProcess();
  final Runnable notifyRunnable=mySnapShooterNotifyRunnable;
  handler.addProcessListener(new ProcessAdapter(){
    public void startNotified(    final ProcessEvent event){
      if (notifyRunnable != null) {
        notifyRunnable.run();
      }
    }
    public void processTerminated(    final ProcessEvent event){
      final CoverageDataManager coverageDataManager=CoverageDataManager.getInstance(getProject());
      if (myCurrentCoverageSuite != null) {
        coverageDataManager.coverageGathered(myCurrentCoverageSuite);
      }
    }
  }
);
  mySnapShooterNotifyRunnable=null;
  return handler;
}
