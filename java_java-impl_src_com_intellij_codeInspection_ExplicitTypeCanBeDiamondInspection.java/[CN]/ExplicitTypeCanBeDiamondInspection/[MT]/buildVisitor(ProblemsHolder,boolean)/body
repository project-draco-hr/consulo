{
  return new JavaElementVisitor(){
    @Override public void visitReferenceExpression(    PsiReferenceExpression expression){
    }
    @Override public void visitNewExpression(    PsiNewExpression expression){
      if (PsiUtil.getLanguageLevel(expression).isAtLeast(LanguageLevel.JDK_1_7)) {
        final PsiJavaCodeReferenceElement classReference=expression.getClassReference();
        if (classReference != null) {
          final PsiReferenceParameterList parameterList=classReference.getParameterList();
          if (parameterList != null) {
            final PsiTypeElement[] typeElements=parameterList.getTypeParameterElements();
            if (typeElements.length > 0) {
              if (typeElements.length == 1 && typeElements[0].getType() instanceof PsiDiamondType)               return;
              holder.registerProblem(parameterList,"Redundant type argument #ref #loc",ProblemHighlightType.LIKE_UNUSED_SYMBOL,new ReplaceWithDiamondFix());
            }
          }
        }
      }
    }
  }
;
}
