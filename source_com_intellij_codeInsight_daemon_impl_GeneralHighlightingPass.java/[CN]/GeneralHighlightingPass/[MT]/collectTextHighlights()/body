{
  PsiManager psiManager=myFile.getManager();
  PsiSearchHelper helper=psiManager.getSearchHelper();
  TodoItem[] todoItems=helper.findTodoItems(myFile,myStartOffset,myEndOffset);
  List<HighlightInfo> list=new ArrayList<HighlightInfo>();
  for (int i=0; i < todoItems.length; i++) {
    TodoItem todoItem=todoItems[i];
    TextRange range=todoItem.getTextRange();
    String description=myDocument.getCharsSequence().subSequence(range.getStartOffset(),range.getEndOffset()).toString();
    HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.TODO,range,description,todoItem.getPattern().getAttributes().getTextAttributes());
    list.add(info);
  }
  collectDependencyProblems(list);
  return list;
}
