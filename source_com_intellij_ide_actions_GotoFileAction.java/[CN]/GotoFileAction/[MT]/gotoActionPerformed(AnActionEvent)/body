{
  FeatureUsageTracker.getInstance().triggerFeatureUsed("navigation.popup.file");
  final Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  final ChooseByNamePopup popup=ChooseByNamePopup.createPopup(project,new GotoFileModel(project));
  popup.invoke(new ChooseByNameBase.Callback(){
    public void onClose(){
      if (GotoFileAction.class.equals(myInAction))       myInAction=null;
    }
    public void elementChosen(    Object element){
      final PsiFile file=(PsiFile)element;
      if (file != null) {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            OpenFileDescriptor descriptor=new OpenFileDescriptor(project,file.getVirtualFile());
            FileEditorManager.getInstance(project).openTextEditor(descriptor,true);
          }
        }
,ModalityState.NON_MMODAL);
      }
    }
  }
,ModalityState.current(),true);
}
