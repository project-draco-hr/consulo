{
  return ApplicationManager.getApplication().runWriteAction(new Computable<PsiReturnStatement>(){
    public PsiReturnStatement compute(){
      PsiCodeBlock body=myMethod.getBody();
      final String value=generateValue(body.getRBrace());
      PsiReturnStatement returnStatement=(PsiReturnStatement)myFactory.createStatementFromText("return " + value + ";",myMethod);
      return (PsiReturnStatement)body.addBefore(returnStatement,body.getRBrace());
    }
  }
);
}
