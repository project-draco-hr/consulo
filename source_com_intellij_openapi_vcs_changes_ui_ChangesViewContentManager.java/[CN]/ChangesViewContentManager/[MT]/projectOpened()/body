{
  if (ApplicationManager.getApplication().isHeadlessEnvironment())   return;
  StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
    public void run(){
      final ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
      if (toolWindowManager != null) {
        myToolWindow=toolWindowManager.registerToolWindow(TOOLWINDOW_ID,true,ToolWindowAnchor.BOTTOM);
        myToolWindow.setIcon(IconLoader.getIcon("/general/toolWindowChanges.png"));
        updateToolWindowAvailability();
        myContentManager=myToolWindow.getContentManager();
        myContentManagerListener=new MyContentManagerListener();
        myContentManager.addContentManagerListener(myContentManagerListener);
        for (        Content content : myAddedContents) {
          myContentManager.addContent(content);
        }
        myAddedContents.clear();
        myVcsManager.addVcsListener(myVcsListener);
        ProjectManager.getInstance().addProjectManagerListener(myProject,new MyProjectManagerListener());
        myConnection.subscribe(ProjectTopics.MODULES,new MyModuleListener());
        loadExtensionTabs();
        if (myContentManager.getContentCount() > 0) {
          myContentManager.setSelectedContent(myContentManager.getContent(0));
        }
      }
    }
  }
);
}
