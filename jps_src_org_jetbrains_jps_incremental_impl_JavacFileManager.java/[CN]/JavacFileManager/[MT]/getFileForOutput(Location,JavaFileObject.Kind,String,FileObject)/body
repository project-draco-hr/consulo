{
  File dir=null;
  if (location == CLASS_OUTPUT) {
    final File classOutDir=getSingleOutputDirectory(CLASS_OUTPUT);
    if (classOutDir == null) {
      throw new IOException("Output directory is not specified");
    }
    dir=classOutDir;
  }
 else   if (location == SOURCE_OUTPUT) {
    final File sourcesOutput=getSingleOutputDirectory(StandardLocation.SOURCE_OUTPUT);
    dir=(sourcesOutput != null ? sourcesOutput : getSingleOutputDirectory(CLASS_OUTPUT));
  }
 else {
    Iterable<? extends File> path=getStdManager().getLocation(location);
    final Iterator<? extends File> it=path.iterator();
    if (it.hasNext()) {
      dir=it.next();
    }
  }
  final File file=(dir == null ? new File(fileName) : new File(dir,fileName));
  return new OutputFileObject(myContext,file,kind);
}
