{
  List<FoldRegion> list=new ArrayList<FoldRegion>();
  FoldRegion[] allRegions=editor.getFoldingModel().getAllFoldRegions();
  for (  FoldRegion region : allRegions) {
    if (region.getStartOffset() <= offset && offset <= region.getEndOffset()) {
      list.add(region);
    }
  }
  FoldRegion[] regions=list.toArray(new FoldRegion[list.size()]);
  Arrays.sort(regions,Collections.reverseOrder(RangeMarker.BY_START_OFFSET));
  return regions;
}
