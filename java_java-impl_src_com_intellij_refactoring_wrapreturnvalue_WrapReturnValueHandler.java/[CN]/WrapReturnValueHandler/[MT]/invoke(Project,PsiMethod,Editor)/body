{
  if (method.isConstructor()) {
    CommonRefactoringUtil.showErrorHint(project,editor,RefactorJBundle.message("cannot.perform.the.refactoring") + RefactorJBundle.message("constructor.returns.can.not.be.wrapped"),null,this.getHelpID());
    return;
  }
  final PsiType returnType=method.getReturnType();
  if (PsiType.VOID.equals(returnType)) {
    CommonRefactoringUtil.showErrorHint(project,editor,RefactorJBundle.message("cannot.perform.the.refactoring") + RefactorJBundle.message("method.selected.returns.void"),null,this.getHelpID());
    return;
  }
  method=SuperMethodWarningUtil.checkSuperMethod(method,RefactoringBundle.message("to.refactor"));
  if (method == null)   return;
  if (method instanceof PsiCompiledElement) {
    CommonRefactoringUtil.showErrorHint(project,editor,RefactorJBundle.message("cannot.perform.the.refactoring") + RefactorJBundle.message("the.selected.method.cannot.be.wrapped.because.it.is.defined.in.a.non.project.class"),null,this.getHelpID());
    return;
  }
  new WrapReturnValueDialog(method).show();
}
