{
  super.visitBlockStatement(blockStatement);
  final PsiElement parent=blockStatement.getParent();
  if (!(parent instanceof PsiCodeBlock)) {
    return;
  }
  final PsiCodeBlock codeBlock=blockStatement.getCodeBlock();
  if (codeBlock == null) {
    return;
  }
  final PsiJavaToken brace=codeBlock.getLBrace();
  if (brace == null) {
    return;
  }
  final PsiCodeBlock parentBlock=((PsiCodeBlock)parent);
  if (parentBlock.getStatements().length > 1 && containsConflictingDeclarations(codeBlock,parentBlock)) {
    return;
  }
  registerError(brace);
  final PsiJavaToken rbrace=codeBlock.getRBrace();
  if (rbrace != null) {
    registerError(rbrace);
  }
}
