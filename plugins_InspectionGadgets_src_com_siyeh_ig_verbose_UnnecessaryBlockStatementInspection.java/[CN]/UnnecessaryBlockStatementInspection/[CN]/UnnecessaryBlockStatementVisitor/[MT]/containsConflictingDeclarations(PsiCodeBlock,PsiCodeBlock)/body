{
  final PsiStatement[] statements=block.getStatements();
  if (statements == null) {
    return false;
  }
  final Set declaredVars=new HashSet();
  for (int i=0; i < statements.length; i++) {
    final PsiStatement statement=statements[i];
    if (statement instanceof PsiDeclarationStatement) {
      final PsiDeclarationStatement declaration=(PsiDeclarationStatement)statement;
      final PsiElement[] vars=declaration.getDeclaredElements();
      for (int j=0; j < vars.length; j++) {
        if (vars[j] instanceof PsiLocalVariable) {
          declaredVars.add(vars[j]);
        }
      }
    }
  }
  for (Iterator iterator=declaredVars.iterator(); iterator.hasNext(); ) {
    final PsiLocalVariable variable=(PsiLocalVariable)iterator.next();
    final String variableName=variable.getName();
    if (conflictingDeclarationExists(variableName,parentBlock,block)) {
      return true;
    }
  }
  return false;
}
