{
  final PsiElement leftBrace=descriptor.getPsiElement();
  final PsiCodeBlock block=(PsiCodeBlock)leftBrace.getParent();
  final PsiBlockStatement blockStatement=(PsiBlockStatement)block.getParent();
  final PsiElement containingElement=blockStatement.getParent();
  final PsiElement[] children=block.getChildren();
  if (children.length > 2) {
    final PsiElement added=containingElement.addRangeBefore(children[1],children[children.length - 2],blockStatement);
    final CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
    codeStyleManager.reformat(added);
  }
  blockStatement.delete();
}
