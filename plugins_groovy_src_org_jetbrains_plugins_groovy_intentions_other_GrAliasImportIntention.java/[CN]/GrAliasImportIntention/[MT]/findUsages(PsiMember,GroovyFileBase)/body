{
  LocalSearchScope scope=new LocalSearchScope(file);
  Query<PsiReference> query;
  if (member instanceof PsiMethod) {
    query=MethodReferencesSearch.search((PsiMethod)member,scope,false);
  }
 else {
    query=ReferencesSearch.search(member,scope);
  }
  final ArrayList<UsageInfo> infos=new ArrayList<UsageInfo>();
  query.forEach(new Processor<PsiReference>(){
    @Override public boolean process(    PsiReference reference){
      infos.add(new UsageInfo(reference));
      return true;
    }
  }
);
  return infos;
}
