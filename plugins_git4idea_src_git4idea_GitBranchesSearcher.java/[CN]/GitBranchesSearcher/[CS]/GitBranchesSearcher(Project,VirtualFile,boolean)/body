{
  LOG.debug("constructing, root: " + root.getPath() + " findRemote = "+ findRemote);
  final Set<GitBranch> usedBranches=new HashSet<GitBranch>();
  myLocal=GitBranch.current(project,root);
  LOG.debug("local: " + myLocal);
  if (myLocal == null)   return;
  usedBranches.add(myLocal);
  GitBranch remote=myLocal;
  while (true) {
    remote=remote.tracked(project,root);
    if (remote == null) {
      LOG.debug("remote == null, exiting");
      return;
    }
    if ((!findRemote) || remote.isRemote()) {
      LOG.debug("remote found, isRemote: " + remote.isRemote() + " remoteName: "+ remote.getFullName());
      myRemote=remote;
      return;
    }
    if (usedBranches.contains(remote)) {
      LOG.debug("loop found for: " + remote.getFullName() + ", exiting");
      return;
    }
    usedBranches.add(remote);
  }
}
