{
  Component toolbar=parent.getComponent(0);
  Dimension toolbarSize=toolbar.isVisible() ? toolbar.getPreferredSize() : new Dimension();
  Dimension contentSize=parent.getComponent(1).getPreferredSize();
  int extraWidth=0;
  JComponent jParent=(JComponent)parent;
  if (jParent.getClientProperty("left") != null) {
    extraWidth+=MINIMIZE_WIDTH;
  }
  if (jParent.getClientProperty("right") != null) {
    extraWidth+=MINIMIZE_WIDTH;
  }
  return new Dimension(Math.max(toolbarSize.width,contentSize.width + extraWidth),toolbarSize.height + contentSize.height);
}
