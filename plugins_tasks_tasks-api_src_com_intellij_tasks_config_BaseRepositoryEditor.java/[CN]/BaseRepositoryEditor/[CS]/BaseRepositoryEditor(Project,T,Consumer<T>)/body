{
  myRepository=repository;
  myChangeListener=changeListener;
  myTestButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      afterTestConnection(TaskManager.getManager(project).testConnection(repository));
    }
  }
);
  myProxySettingsButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      HttpConfigurable.editConfigurable(myPanel);
      enableButtons();
    }
  }
);
  myURLText.setText(repository.getUrl());
  myUserNameText.setText(repository.getUsername());
  myPasswordText.setText(repository.getPassword());
  myShareURL.setSelected(repository.isShared());
  myUseProxy.setSelected(repository.isUseProxy());
  myUseHTTPAuthentication.setSelected(repository.isUseHttpAuthentication());
  myUseHTTPAuthentication.setVisible(repository.getRepositoryType().isSupported(TaskRepositoryType.BASIC_HTTP_AUTHORIZATION));
  myLoginAnonymouslyJBCheckBox.setVisible(repository.getRepositoryType().isSupported(TaskRepositoryType.LOGIN_ANONYMOUSLY));
  myLoginAnonymouslyJBCheckBox.setSelected(repository.isLoginAnonymously());
  myLoginAnonymouslyJBCheckBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    final ActionEvent e){
      loginAnonymouslyChanged(!myLoginAnonymouslyJBCheckBox.isSelected());
    }
  }
);
  myAddCommitMessage.setSelected(repository.isShouldFormatCommitMessage());
  myDocument=EditorFactory.getInstance().createDocument(repository.getCommitMessageFormat());
  myEditor=EditorFactory.getInstance().createEditor(myDocument);
  myEditorPanel.add(ScrollPaneFactory.createScrollPane(myEditor.getComponent(),SideBorder.NONE),BorderLayout.CENTER);
  myComment.setText("Available placeholders: " + repository.getComment());
  installListener(myAddCommitMessage);
  myDocument.addDocumentListener(new com.intellij.openapi.editor.event.DocumentAdapter(){
    @Override public void documentChanged(    com.intellij.openapi.editor.event.DocumentEvent e){
      doApply();
    }
  }
);
  installListener(myURLText);
  installListener(myUserNameText);
  installListener(myPasswordText);
  installListener(myShareURL);
  installListener(myUseProxy);
  installListener(myUseHTTPAuthentication);
  installListener(myLoginAnonymouslyJBCheckBox);
  enableButtons();
  JComponent customPanel=createCustomPanel();
  if (customPanel != null) {
    myCustomPanel.add(customPanel,BorderLayout.CENTER);
  }
  setAnchor(myUseProxy);
  loginAnonymouslyChanged(!myLoginAnonymouslyJBCheckBox.isSelected());
}
