{
  final JavaRefactoringSettings settings=JavaRefactoringSettings.getInstance();
  settings.INTRODUCE_PARAMETER_REPLACE_FIELDS_WITH_GETTERS=getReplaceFieldsWithGetters();
  if (myCbDeclareFinal != null && !myMustBeFinal) {
    settings.INTRODUCE_PARAMETER_CREATE_FINALS=Boolean.valueOf(myCbDeclareFinal.isSelected());
  }
  if (myCbDeleteLocalVariable != null) {
    settings.INTRODUCE_PARAMETER_DELETE_LOCAL_VARIABLE=myCbDeleteLocalVariable.isSelectedWhenSelectable();
  }
  if (myCbUseInitializer != null) {
    settings.INTRODUCE_PARAMETER_USE_INITIALIZER=myCbUseInitializer.isSelectedWhenSelectable();
  }
  myNameSuggestionsManager.nameSelected();
  boolean isDeleteLocalVariable=false;
  PsiExpression parameterInitializer=myExpression;
  if (myLocalVar != null) {
    if (isUseInitializer()) {
      parameterInitializer=myLocalVar.getInitializer();
    }
    isDeleteLocalVariable=isDeleteLocalVariable();
  }
  final IntroduceParameterProcessor processor=new IntroduceParameterProcessor(myProject,myMethodToReplaceIn,myMethodToSearchFor,parameterInitializer,myExpression,myLocalVar,isDeleteLocalVariable,getParameterName(),isReplaceAllOccurences(),getReplaceFieldsWithGetters(),isDeclareFinal(),isGenerateDelegate(),getSelectedType(),getParametersToRemove());
  invokeRefactoring(processor);
  myParameterNameField.requestFocusInWindow();
}
