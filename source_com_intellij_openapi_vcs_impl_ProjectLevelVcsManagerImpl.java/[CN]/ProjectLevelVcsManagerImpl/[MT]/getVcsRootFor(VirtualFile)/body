{
  VcsDirectoryMapping mapping=getMappingFor(file);
  if (mapping == null) {
    return null;
  }
  final String directory=mapping.getDirectory();
  if (directory.length() == 0) {
    final VirtualFile contentRoot=ProjectRootManager.getInstance(myProject).getFileIndex().getContentRootForFile(file);
    if (contentRoot != null) {
      return contentRoot;
    }
    return myProject.getBaseDir();
  }
  return LocalFileSystem.getInstance().findFileByPath(directory);
}
