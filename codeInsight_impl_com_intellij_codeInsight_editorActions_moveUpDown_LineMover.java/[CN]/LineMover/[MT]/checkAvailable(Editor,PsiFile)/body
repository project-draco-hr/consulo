{
  LineRange range=getLineRangeFromSelection(editor);
  final int maxLine=editor.offsetToLogicalPosition(editor.getDocument().getTextLength()).line;
  if (range.startLine == 0 && !isDown)   return false;
  if (range.endLine >= maxLine && isDown)   return false;
  toMove=range;
  int nearLine=isDown ? range.endLine : range.startLine - 1;
  toMove2=new LineRange(nearLine,nearLine + 1);
  return true;
}
