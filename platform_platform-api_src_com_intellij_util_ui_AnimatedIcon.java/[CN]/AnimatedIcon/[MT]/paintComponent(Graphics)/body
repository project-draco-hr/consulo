{
  if (myPaintingBgNow)   return;
  if ((myAnimator.isRunning() || myPaintPassive || (myLastPaintWasRunning && !myAnimator.isRunning()))) {
    try {
      myPaintingBgNow=true;
      Container p=getParent();
      if (p instanceof JComponent) {
        JComponent parentComponent=(JComponent)p;
        Rectangle b=getBounds();
        RepaintManager.currentManager(p).addDirtyRegion(parentComponent,b.x,b.y,b.width,b.height);
        parentComponent.paintImmediately(b);
      }
    }
  finally {
      myPaintingBgNow=false;
    }
  }
  Icon icon;
  if (myAnimator.isRunning()) {
    icon=myIcons[myCurrentIconIndex];
  }
 else {
    icon=getPassiveIcon();
  }
  final Dimension size=getSize();
  int x=(size.width - icon.getIconWidth()) / 2;
  int y=(size.height - icon.getIconHeight()) / 2;
  paintIcon(g,icon,x,y);
  myLastPaintWasRunning=myAnimator.isRunning();
}
