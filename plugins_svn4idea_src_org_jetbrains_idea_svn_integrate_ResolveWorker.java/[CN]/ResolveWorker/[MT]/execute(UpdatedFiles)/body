{
  final List<VirtualFile> conflictedVirtualFiles=new ArrayList<VirtualFile>();
  if (myChangesUnderProjectRoot) {
    refreshChangeListsFindConflicts(updatedFiles,conflictedVirtualFiles);
  }
 else {
    final FileGroup conflictedGroup=updatedFiles.getGroupById(FileGroup.MERGED_WITH_CONFLICT_ID);
    for (    String filename : conflictedGroup.getFiles()) {
      final VirtualFile vf=SvnUtil.getVirtualFile(filename);
      conflictedVirtualFiles.add(vf);
    }
  }
  if ((!conflictedVirtualFiles.isEmpty()) && (!SvnConfiguration.getInstance(myProject).MERGE_DRY_RUN)) {
    doMerge(updatedFiles,conflictedVirtualFiles);
  }
}
