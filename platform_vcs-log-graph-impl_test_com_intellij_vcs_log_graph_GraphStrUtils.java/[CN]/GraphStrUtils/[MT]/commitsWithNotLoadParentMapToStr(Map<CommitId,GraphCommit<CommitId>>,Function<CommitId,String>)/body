{
  List<CommitId> hashes=new ArrayList<CommitId>(commitMap.keySet());
  Collections.sort(hashes);
  StringBuilder s=new StringBuilder();
  for (int i=0; i < hashes.size(); i++) {
    if (i != 0)     s.append("\n");
    CommitId hash=hashes.get(i);
    GraphCommit<CommitId> commit=commitMap.get(hash);
    assertEquals(toStr.fun(hash),toStr.fun(commit.getId()));
    s.append(toStr.fun(hash)).append(CommitParser.SEPARATOR);
    List<CommitId> parentIndices=commit.getParents();
    for (int j=0; j < parentIndices.size(); j++) {
      if (j > 0)       s.append(" ");
      s.append(toStr.fun(parentIndices.get(j)));
    }
  }
  return s.toString();
}
