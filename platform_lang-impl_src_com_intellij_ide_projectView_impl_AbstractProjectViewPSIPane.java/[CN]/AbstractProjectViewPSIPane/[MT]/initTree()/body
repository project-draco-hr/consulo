{
  myTree.getSelectionModel().setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
  UIUtil.setLineStyleAngled(myTree);
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  myTree.expandPath(new TreePath(myTree.getModel().getRoot()));
  myTree.setSelectionPath(new TreePath(myTree.getModel().getRoot()));
  EditSourceOnDoubleClickHandler.install(myTree);
  ToolTipManager.sharedInstance().registerComponent(myTree);
  TreeUtil.installActions(myTree);
  myTree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    @Override public void valueChanged(    TreeSelectionEvent e){
      fireTreeChangeListener();
    }
  }
);
  myTree.getModel().addTreeModelListener(new TreeModelListener(){
    @Override public void treeNodesChanged(    TreeModelEvent e){
      fireTreeChangeListener();
    }
    @Override public void treeNodesInserted(    TreeModelEvent e){
      fireTreeChangeListener();
    }
    @Override public void treeNodesRemoved(    TreeModelEvent e){
      fireTreeChangeListener();
    }
    @Override public void treeStructureChanged(    TreeModelEvent e){
      fireTreeChangeListener();
    }
  }
);
  new MySpeedSearch(myTree);
  myTree.addKeyListener(new KeyAdapter(){
    @Override public void keyPressed(    KeyEvent e){
      if (KeyEvent.VK_ENTER == e.getKeyCode()) {
        final DefaultMutableTreeNode selectedNode=((ProjectViewTree)myTree).getSelectedNode();
        if (selectedNode != null && !selectedNode.isLeaf()) {
          return;
        }
        DataContext dataContext=DataManager.getInstance().getDataContext(myTree);
        OpenSourceUtil.openSourcesFrom(dataContext,false);
      }
 else       if (KeyEvent.VK_ESCAPE == e.getKeyCode()) {
        if (e.isConsumed())         return;
        PsiCopyPasteManager copyPasteManager=PsiCopyPasteManager.getInstance();
        boolean[] isCopied=new boolean[1];
        if (copyPasteManager.getElements(isCopied) != null && !isCopied[0]) {
          copyPasteManager.clear();
          e.consume();
        }
      }
    }
  }
);
  CustomizationUtil.installPopupHandler(myTree,IdeActions.GROUP_PROJECT_VIEW_POPUP,ActionPlaces.PROJECT_VIEW_POPUP);
}
