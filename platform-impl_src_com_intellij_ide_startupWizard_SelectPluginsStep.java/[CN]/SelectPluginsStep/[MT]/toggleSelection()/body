{
  final IdeaPluginDescriptor descriptor=getSelectedPlugin();
  if (descriptor == null)   return;
  boolean willDisable=!isDisabledPlugin(descriptor);
  final Object[] selection=myPluginsList.getSelectedValues();
  for (  Object o : selection) {
    IdeaPluginDescriptor desc=(IdeaPluginDescriptor)o;
    if (!willDisable) {
      setPluginEnabledWithDependencies(desc);
    }
 else {
      setPluginDisabledWithDependents(desc);
    }
  }
  myPluginsList.repaint();
}
