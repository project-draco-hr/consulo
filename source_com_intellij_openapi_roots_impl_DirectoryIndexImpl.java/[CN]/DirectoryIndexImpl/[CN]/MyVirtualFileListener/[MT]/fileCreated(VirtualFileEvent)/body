{
  VirtualFile file=event.getFile();
  if (!file.isDirectory())   return;
  VirtualFile parent=file.getParent();
  if (parent == null)   return;
  if (FileTypeManager.getInstance().isFileIgnored(file.getName()))   return;
  DirectoryInfo parentInfo=myDirToInfoMap.get(parent);
  if (parentInfo == null)   return;
  if (!LAZY_MODE) {
    if (parentInfo.module != null) {
      fillMapWithModuleContent(file,parentInfo.module,parentInfo.contentRoot,null,null);
      if (parentInfo.isInModuleSource) {
        String newDirPackageName=getPackageNameForSubdir(parentInfo.packageName,file.getName());
        fillMapWithModuleSource(file,parentInfo.module,newDirPackageName,parentInfo.sourceRoot,parentInfo.isTestSource,null);
      }
    }
    if (parentInfo.libraryClassRoot != null) {
      String newDirPackageName=getPackageNameForSubdir(parentInfo.packageName,file.getName());
      fillMapWithLibraryClasses(file,newDirPackageName,parentInfo.libraryClassRoot,null);
    }
    if (parentInfo.isInLibrarySource) {
      String newDirPackageName=getPackageNameForSubdir(parentInfo.packageName,file.getName());
      fillMapWithLibrarySources(file,newDirPackageName,parentInfo.sourceRoot,null);
    }
    if (parentInfo.orderEntries.size() > 0) {
      fillMapWithOrderEntries(file,parentInfo.orderEntries,null,null,null,null);
    }
  }
}
