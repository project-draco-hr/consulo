{
  registerExecutor(new QueryExecutor<VirtualFile,VirtualFile[]>(){
    public boolean execute(    final VirtualFile[] allDirs,    final Processor<VirtualFile> consumer){
      for (      VirtualFile dir : allDirs) {
        DirectoryInfo info=getInfoForDirectory(dir);
        LOG.assertTrue(info != null);
        if (!info.isInLibrarySource || info.libraryClassRoot != null) {
          if (!consumer.process(dir))           return false;
        }
      }
      return true;
    }
  }
);
}
