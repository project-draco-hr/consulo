{
  if (myInitialized) {
    LOG.error("Directory index is already initialized.");
    return;
  }
  if (myDisposed) {
    LOG.error("Directory index is aleady disposed for this project");
    return;
  }
  myInitialized=true;
  myVirtualFileListener=new MyVirtualFileListener();
  VirtualFileManager.getInstance().addVirtualFileListener(myVirtualFileListener);
  myFileTypeListener=new FileTypeListener(){
    public void beforeFileTypesChanged(    FileTypeEvent event){
    }
    public void fileTypesChanged(    FileTypeEvent event){
      _initialize();
    }
  }
;
  FileTypeManager.getInstance().addFileTypeListener(myFileTypeListener);
  myRootListener=new ModuleRootListener(){
    public void beforeRootsChange(    ModuleRootEvent event){
    }
    public void rootsChanged(    ModuleRootEvent event){
      _initialize();
    }
  }
;
  ProjectRootManager.getInstance(myProject).addModuleRootListener(myRootListener);
  _initialize();
}
