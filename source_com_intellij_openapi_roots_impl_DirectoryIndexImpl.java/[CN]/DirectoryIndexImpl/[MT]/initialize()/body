{
  if (myInitialized) {
    LOG.error("Directory index is already initialized.");
    return;
  }
  if (myDisposed) {
    LOG.error("Directory index is aleady disposed for this project");
    return;
  }
  myInitialized=true;
  myVirtualFileListener=new MyVirtualFileListener();
  VirtualFileManager.getInstance().addVirtualFileListener(myVirtualFileListener);
  myConnection.subscribe(AppTopics.FILE_TYPES,new FileTypeListener(){
    public void beforeFileTypesChanged(    FileTypeEvent event){
    }
    public void fileTypesChanged(    FileTypeEvent event){
      _initialize();
    }
  }
);
  myConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootListener(){
    public void beforeRootsChange(    ModuleRootEvent event){
    }
    public void rootsChanged(    ModuleRootEvent event){
      _initialize();
    }
  }
);
  _initialize();
}
