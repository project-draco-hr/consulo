{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      try {
        List<Location> locs=debugProcess.getPositionManager().locationsOfLine(classType,getSourcePosition());
        Location location=locs.size() > 0 ? locs.get(0) : null;
        if (location != null) {
          if (LOG.isDebugEnabled()) {
            LOG.debug("Found location for reference type " + classType.name() + " at line "+ getLineIndex()+ "; isObsolete: "+ (debugProcess.getVirtualMachineProxy().versionHigher("1.4") && location.method().isObsolete()));
          }
          BreakpointRequest request=debugProcess.getRequestsManager().createBreakpointRequest(LineBreakpoint.this,location);
          debugProcess.getRequestsManager().enableRequest(request);
          if (LOG.isDebugEnabled()) {
            LOG.debug("Created breakpoint request for reference type " + classType.name() + " at line "+ getLineIndex());
          }
        }
 else {
          debugProcess.getRequestsManager().setInvalid(LineBreakpoint.this,"No executable code found at line " + (getLineIndex() + 1) + " in class "+ classType.name());
          if (LOG.isDebugEnabled()) {
            LOG.debug("No locations of type " + classType.name() + " found at line "+ getLineIndex());
          }
        }
      }
 catch (      ClassNotPreparedException ex) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("ClassNotPreparedException: " + ex.getMessage());
        }
      }
catch (      ObjectCollectedException ex) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("ObjectCollectedException: " + ex.getMessage());
        }
      }
catch (      InvalidLineNumberException ex) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("InvalidLineNumberException: " + ex.getMessage());
        }
        debugProcess.getRequestsManager().setInvalid(LineBreakpoint.this,"Line number is invalid");
      }
catch (      InternalException ex) {
        LOG.info(ex);
      }
catch (      Exception ex) {
        LOG.info(ex);
      }
      updateUI();
    }
  }
);
}
