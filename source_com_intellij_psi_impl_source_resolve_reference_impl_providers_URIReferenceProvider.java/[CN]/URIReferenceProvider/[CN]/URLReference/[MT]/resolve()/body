{
  final String canonicalText=getCanonicalText();
  if (ExternalResourceManagerEx.getInstanceEx().isIgnoredResource(canonicalText))   return myElement;
  VirtualFile relativeFile=VfsUtil.findRelativeFile(canonicalText,myElement.getContainingFile().getVirtualFile());
  if (relativeFile != null)   return myElement.getManager().findFile(relativeFile);
  final PsiFile containingFile=myElement.getContainingFile();
  if (containingFile instanceof XmlFile) {
    final XmlTag rootTag=((XmlFile)containingFile).getDocument().getRootTag();
    if (rootTag == null)     return null;
    final XmlNSDescriptor nsDescriptor=rootTag.getNSDescriptor(canonicalText,true);
    if (nsDescriptor != null)     return nsDescriptor.getDescriptorFile();
    if (canonicalText.equals(rootTag.getAttributeValue("targetNamespace")))     return containingFile;
  }
  return null;
}
