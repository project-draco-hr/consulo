{
  final String canonicalText=getCanonicalText();
  if (ExternalResourceManagerEx.getInstanceEx().isIgnoredResource(canonicalText))   return myElement;
  VirtualFile relativeFile=VfsUtil.findRelativeFile(canonicalText,myElement.getContainingFile().getVirtualFile());
  if (relativeFile != null)   return myElement.getManager().findFile(relativeFile);
  final XmlTag tag=PsiTreeUtil.getParentOfType(myElement,XmlTag.class);
  if (tag != null && canonicalText.equals(tag.getAttributeValue(TARGET_NAMESPACE_ATTR_NAME)))   return tag;
  final PsiFile containingFile=myElement.getContainingFile();
  if (containingFile instanceof XmlFile) {
    final XmlTag rootTag=((XmlFile)containingFile).getDocument().getRootTag();
    if (rootTag == null)     return null;
    final XmlNSDescriptor nsDescriptor=rootTag.getNSDescriptor(canonicalText,true);
    if (nsDescriptor != null)     return nsDescriptor.getDescriptorFile();
  }
  return null;
}
