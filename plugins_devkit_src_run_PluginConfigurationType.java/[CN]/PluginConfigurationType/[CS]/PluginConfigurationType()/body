{
  myFactory=new ConfigurationFactory(this){
    public RunConfiguration createTemplateConfiguration(    Project project){
      final PluginRunConfiguration runConfiguration=new PluginRunConfiguration(project,this,"");
      if (runConfiguration.VM_PARAMETERS == null) {
        runConfiguration.VM_PARAMETERS=getVmParameters();
      }
 else {
        runConfiguration.VM_PARAMETERS+=getVmParameters();
      }
      return runConfiguration;
    }
    public RunConfiguration createConfiguration(    String name,    RunConfiguration template){
      final PluginRunConfiguration pluginRunConfiguration=(PluginRunConfiguration)template;
      if (pluginRunConfiguration.getModule() == null) {
        final Module[] modules=PluginModuleType.getAllPluginModules(pluginRunConfiguration.getProject());
        if (modules.length > 0) {
          pluginRunConfiguration.setModule(modules[0]);
        }
      }
      return super.createConfiguration(name,pluginRunConfiguration);
    }
  }
;
}
