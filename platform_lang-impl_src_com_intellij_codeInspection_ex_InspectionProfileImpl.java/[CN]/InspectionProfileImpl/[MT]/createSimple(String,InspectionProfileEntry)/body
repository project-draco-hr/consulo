{
  InspectionProfileImpl profile=new InspectionProfileImpl(name,new InspectionToolRegistrar(null){
    @NotNull @Override public List<InspectionToolWrapper> createTools(){
      return ContainerUtil.map(tools,WRAPPER_FUNCTION);
    }
  }
,InspectionProfileManager.getInstance());
  boolean init=INIT_INSPECTIONS;
  try {
    INIT_INSPECTIONS=true;
    profile.initialize(null);
  }
  finally {
    INIT_INSPECTIONS=init;
  }
  for (  InspectionProfileEntry tool : tools) {
    profile.enableTool(tool.getShortName());
  }
  return profile;
}
