{
  SequentialTask task=new MyFormattingTask(){
    @NotNull @Override protected FormatProcessor buildProcessor(){
      FormatProcessor processor=new FormatProcessor(model.getDocumentModel(),model.getRootBlock(),settings,indentOptions,affectedRanges,getProgressCallback());
      processor.format(model,true);
      return processor;
    }
  }
;
  execute(task);
}
