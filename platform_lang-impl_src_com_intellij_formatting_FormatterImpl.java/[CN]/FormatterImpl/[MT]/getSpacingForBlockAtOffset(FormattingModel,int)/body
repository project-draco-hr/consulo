{
  Couple<Block> blockWithParent=getBlockAtOffset(null,model.getRootBlock(),offset);
  if (blockWithParent == null) {
    return 0;
  }
  Block parentBlock=blockWithParent.first;
  Block targetBlock=blockWithParent.second;
  if (parentBlock == null || targetBlock == null) {
    return 0;
  }
  Block prevBlock=findPreviousSibling(parentBlock,targetBlock);
  if (prevBlock == null) {
    return 0;
  }
  SpacingImpl spacing=(SpacingImpl)parentBlock.getSpacing(prevBlock,targetBlock);
  if (spacing == null) {
    return 0;
  }
  return Math.max(spacing.getMinSpaces(),0);
}
