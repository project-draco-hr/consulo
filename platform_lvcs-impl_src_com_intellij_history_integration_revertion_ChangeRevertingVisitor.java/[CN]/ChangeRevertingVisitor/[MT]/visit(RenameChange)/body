{
  if (shouldRevert(c)) {
    VirtualFile f=myGateway.findVirtualFile(c.getPath());
    if (f != null) {
      VirtualFile existing=f.getParent().findChild(c.getOldName());
      try {
        if (existing != null && existing != f) {
          existing.delete(this);
        }
        f.rename(this,c.getOldName());
      }
 catch (      IOException e) {
        throw new RuntimeIOException(e);
      }
    }
  }
  checkShouldStop(c);
}
