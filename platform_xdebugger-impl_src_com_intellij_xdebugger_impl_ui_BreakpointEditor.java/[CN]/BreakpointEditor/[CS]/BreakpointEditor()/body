{
  myDoneButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent actionEvent){
      done();
    }
  }
);
  final AnAction doneAction=new AnAction(){
    @Override public void update(    AnActionEvent e){
      super.update(e);
      boolean lookup=LookupManager.getInstance(getEventProject(e)).getActiveLookup() != null;
      Editor editor=e.getData(PlatformDataKeys.EDITOR);
      e.getPresentation().setEnabled(!lookup && (editor == null || StringUtil.isEmpty(editor.getSelectionModel().getSelectedText())));
    }
    public void actionPerformed(    AnActionEvent e){
      done();
    }
  }
;
  doneAction.registerCustomShortcutSet(new CompositeShortcutSet(CustomShortcutSet.fromString("ESCAPE"),CustomShortcutSet.fromString("control ENTER")),myMainPanel);
}
