{
  final String message=QuickFixBundle.message("orderEntry.fix.circular.dependency.warning",classModule.getName(),circularModules.getFirst().getName(),circularModules.getSecond().getName());
  if (ApplicationManager.getApplication().isUnitTestMode())   throw new RuntimeException(message);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      if (!project.isOpen())       return;
      int ret=Messages.showOkCancelDialog(project,message,QuickFixBundle.message("orderEntry.fix.title.circular.dependency.warning"),Messages.getWarningIcon());
      if (ret == 0) {
        ApplicationManager.getApplication().runWriteAction(doit);
      }
    }
  }
);
}
