def debugcomplete(ui, cmd='', **opts):
    'returns the completion list associated with the given command'
    if opts.get('options'):
        options = []
        otables = [globalopts]
        if cmd:
            (aliases, entry) = cmdutil.findcmd(cmd, table, False)
            otables.append(entry[1])
        for t in otables:
            for o in t:
                if o[0]:
                    options.append(('-%s' % o[0]))
                options.append(('--%s' % o[1]))
        ui.write(('%s\n' % '\n'.join(options)))
        return
    cmdlist = cmdutil.findpossible(cmd, table)
    if ui.verbose:
        cmdlist = [' '.join(c[0]) for c in cmdlist.values()]
    ui.write(('%s\n' % '\n'.join(sorted(cmdlist))))
