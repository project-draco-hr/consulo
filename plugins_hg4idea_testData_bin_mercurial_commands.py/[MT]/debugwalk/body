def debugwalk(ui, repo, *pats, **opts):
    'show how files match on given patterns'
    m = cmdutil.match(repo, pats, opts)
    items = list(repo.walk(m))
    if (not items):
        return
    fmt = ('f  %%-%ds  %%-%ds  %%s' % (max([len(abs) for abs in items]), max([len(m.rel(abs)) for abs in items])))
    for abs in items:
        line = (fmt % (abs, m.rel(abs), ((m.exact(abs) and 'exact') or '')))
        ui.write(('%s\n' % line.rstrip()))
