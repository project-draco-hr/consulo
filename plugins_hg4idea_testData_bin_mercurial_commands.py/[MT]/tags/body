def tags(ui, repo):
    'list repository tags\n\n    This lists both regular and local tags. When the -v/--verbose\n    switch is used, a third column "local" is printed for local tags.\n    '
    hexfunc = ((ui.debugflag and hex) or short)
    tagtype = ''
    for (t, n) in reversed(repo.tagslist()):
        if ui.quiet:
            ui.write(('%s\n' % t))
            continue
        try:
            hn = hexfunc(n)
            r = ('%5d:%s' % (repo.changelog.rev(n), hn))
        except error.LookupError:
            r = ('    ?:%s' % hn)
        else:
            spaces = (' ' * (30 - encoding.colwidth(t)))
            if ui.verbose:
                if (repo.tagtype(t) == 'local'):
                    tagtype = ' local'
                else:
                    tagtype = ''
            ui.write(('%s%s %s%s\n' % (t, spaces, r, tagtype)))
