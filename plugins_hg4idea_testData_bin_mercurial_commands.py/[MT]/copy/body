def copy(ui, repo, *pats, **opts):
    'mark files as copied for the next commit\n\n    Mark dest as having copies of source files. If dest is a\n    directory, copies are put in that directory. If dest is a file,\n    the source must be a single file.\n\n    By default, this command copies the contents of files as they\n    exist in the working directory. If invoked with -A/--after, the\n    operation is recorded, but no copying is performed.\n\n    This command takes effect with the next commit. To undo a copy\n    before that, see hg revert.\n    '
    wlock = repo.wlock(False)
    try:
        return cmdutil.copy(ui, repo, pats, opts)
    finally:
        wlock.release()
