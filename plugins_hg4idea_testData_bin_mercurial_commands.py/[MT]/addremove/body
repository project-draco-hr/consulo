def addremove(ui, repo, *pats, **opts):
    'add all new files, delete all missing files\n\n    Add all new files and remove all missing files from the\n    repository.\n\n    New files are ignored if they match any of the patterns in\n    .hgignore. As with add, these changes take effect at the next\n    commit.\n\n    Use the -s/--similarity option to detect renamed files. With a\n    parameter greater than 0, this compares every removed file with\n    every added file and records those similar enough as renames. This\n    option takes a percentage between 0 (disabled) and 100 (files must\n    be identical) as its parameter. Detecting renamed files this way\n    can be expensive.\n    '
    try:
        sim = float((opts.get('similarity') or 0))
    except ValueError:
        raise util.Abort(_('similarity must be a number'))
    if ((sim < 0) or (sim > 100)):
        raise util.Abort(_('similarity must be between 0 and 100'))
    return cmdutil.addremove(repo, pats, opts, similarity=(sim / 100.0))
