def cat(ui, repo, file1, *pats, **opts):
    "output the current or given revision of files\n\n    Print the specified files as they were at the given revision. If\n    no revision is given, the parent of the working directory is used,\n    or tip if no revision is checked out.\n\n    Output may be to a file, in which case the name of the file is\n    given using a format string. The formatting rules are the same as\n    for the export command, with the following additions:\n\n    :``%s``: basename of file being printed\n    :``%d``: dirname of file being printed, or '.' if in repository root\n    :``%p``: root-relative path name of file being printed\n    "
    ctx = repo[opts.get('rev')]
    err = 1
    m = cmdutil.match(repo, ((file1,) + pats), opts)
    for abs in ctx.walk(m):
        fp = cmdutil.make_file(repo, opts.get('output'), ctx.node(), pathname=abs)
        data = ctx[abs].data()
        if opts.get('decode'):
            data = repo.wwritedata(abs, data)
        fp.write(data)
        err = 0
    return err
