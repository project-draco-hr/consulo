def unbundle(ui, repo, fname1, *fnames, **opts):
    'apply one or more changegroup files\n\n    Apply one or more compressed changegroup files generated by the\n    bundle command.\n    '
    fnames = ((fname1,) + fnames)
    lock = repo.lock()
    try:
        for fname in fnames:
            f = url.open(ui, fname)
            gen = changegroup.readbundle(f, fname)
            modheads = repo.addchangegroup(gen, 'unbundle', ('bundle:' + fname))
    finally:
        lock.release()
    return postincoming(ui, repo, modheads, opts.get('update'), None)
