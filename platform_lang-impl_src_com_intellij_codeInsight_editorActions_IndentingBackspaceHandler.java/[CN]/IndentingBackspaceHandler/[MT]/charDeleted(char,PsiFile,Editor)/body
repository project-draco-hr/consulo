{
  if (!CodeInsightSettings.getInstance().INDENTING_BACKSPACE || !StringUtil.isWhiteSpace(c)) {
    return false;
  }
  LanguageCodeStyleSettingsProvider codeStyleSettingsProvider=LanguageCodeStyleSettingsProvider.forLanguage(file.getLanguage());
  if (codeStyleSettingsProvider != null && codeStyleSettingsProvider.isIndentBasedLanguageSemantics()) {
    return false;
  }
  Document document=editor.getDocument();
  int caretOffset=editor.getCaretModel().getOffset();
  int offset=CharArrayUtil.shiftForward(document.getCharsSequence(),caretOffset," \t");
  int beforeWhitespaceOffset=CharArrayUtil.shiftBackward(document.getCharsSequence(),offset - 1," \t") + 1;
  LogicalPosition logicalPosition=caretOffset < offset ? editor.offsetToLogicalPosition(offset) : editor.getCaretModel().getLogicalPosition();
  int lineStartOffset=document.getLineStartOffset(logicalPosition.line);
  if (lineStartOffset < beforeWhitespaceOffset) {
    if (caretWasAtLineStart && beforeWhitespaceOffset < offset) {
      document.deleteString(beforeWhitespaceOffset,offset);
      return true;
    }
 else {
      return false;
    }
  }
  CodeStyleFacade codeStyleFacade=CodeStyleFacade.getInstance(editor.getProject());
  String indent=codeStyleFacade.getLineIndent(document,lineStartOffset);
  if (indent == null) {
    return false;
  }
  int tabSize=getTabSize(codeStyleFacade,document);
  int targetColumn=getWidth(indent,tabSize);
  if (logicalPosition.column == targetColumn) {
    if (caretOffset < offset) {
      editor.getCaretModel().moveToLogicalPosition(logicalPosition);
      return true;
    }
 else {
      return false;
    }
  }
  if (caretWasAtLineStart || logicalPosition.column > targetColumn) {
    smartReplace(document,lineStartOffset,offset,indent);
    editor.getCaretModel().moveToLogicalPosition(new LogicalPosition(logicalPosition.line,targetColumn));
    return true;
  }
  if (logicalPosition.line == 0) {
    return false;
  }
  int prevLineStartOffset=document.getLineStartOffset(logicalPosition.line - 1);
  int prevLineEndOffset=document.getLineEndOffset(logicalPosition.line - 1);
  int targetOffset=CharArrayUtil.shiftBackward(document.getCharsSequence(),prevLineEndOffset - 1," \t") + 1;
  if (prevLineStartOffset < targetOffset) {
    document.deleteString(targetOffset,offset);
    editor.getCaretModel().moveToOffset(targetOffset);
  }
 else {
    smartReplace(document,prevLineStartOffset,offset,indent);
    editor.getCaretModel().moveToLogicalPosition(new LogicalPosition(logicalPosition.line - 1,targetColumn));
  }
  return true;
}
