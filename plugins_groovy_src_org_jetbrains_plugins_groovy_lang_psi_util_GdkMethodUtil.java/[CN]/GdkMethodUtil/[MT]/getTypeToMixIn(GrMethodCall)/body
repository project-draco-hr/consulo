{
  GrExpression invoked=methodCall.getInvokedExpression();
  if (invoked instanceof GrReferenceExpression) {
    PsiElement resolved=((GrReferenceExpression)invoked).resolve();
    if (resolved instanceof PsiMethod && isMixinMethod((PsiMethod)resolved)) {
      GrExpression qualifier=((GrReferenceExpression)invoked).getQualifier();
      PsiClassType type=getPsiClassFromReference(qualifier);
      if (type != null) {
        return type;
      }
      if (qualifier == null) {
        qualifier=PsiImplUtil.getRuntimeQualifier((GrReferenceExpression)invoked);
      }
      if (qualifier != null && isMetaClass(qualifier.getType())) {
        if (qualifier instanceof GrMethodCall)         qualifier=((GrMethodCall)qualifier).getInvokedExpression();
        if (qualifier instanceof GrReferenceExpression) {
          GrExpression qqualifier=((GrReferenceExpression)qualifier).getQualifier();
          if (qqualifier != null) {
            PsiClassType type1=getPsiClassFromReference(qqualifier);
            if (type1 != null) {
              return type1;
            }
          }
 else {
            PsiType qtype=GrReferenceResolveUtil.getQualifierType((GrReferenceExpression)qualifier);
            if (qtype instanceof PsiClassType && ((PsiClassType)qtype).resolve() != null) {
              return (PsiClassType)qtype;
            }
          }
        }
      }
    }
  }
  return null;
}
