{
  final PsiDirectory value=getValue();
  if (value == null) {
    return false;
  }
  VirtualFile directory=value.getVirtualFile();
  if (directory.getFileSystem() instanceof LocalFileSystem) {
    file=PathUtil.getLocalFile(file);
  }
  if (!VfsUtilCore.isAncestor(directory,file,false)) {
    return false;
  }
  return !FileTypeRegistry.getInstance().isFileIgnored(file);
}
