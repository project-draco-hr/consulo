{
  final FileType fileType=file.getFileType();
  if (fileType instanceof AbstractFileType) {
    return ((AbstractFileType)fileType).getCommenter();
  }
  Language lang=PsiUtilBase.getLanguageInEditor(editor,file.getProject());
  if (lang == null || LanguageCommenters.INSTANCE.forLanguage(lang) == null) {
    lang=file.getLanguage();
  }
  if (lang == null || LanguageCommenters.INSTANCE.forLanguage(lang) == null) {
    lang=file.getViewProvider().getBaseLanguage();
  }
  return LanguageCommenters.INSTANCE.forLanguage(lang);
}
