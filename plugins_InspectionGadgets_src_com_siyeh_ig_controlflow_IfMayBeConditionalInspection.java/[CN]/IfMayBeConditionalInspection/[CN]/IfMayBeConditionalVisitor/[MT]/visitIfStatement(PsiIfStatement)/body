{
  super.visitIfStatement(statement);
  final PsiStatement thenBranch=statement.getThenBranch();
  final PsiStatement elseBranch=statement.getElseBranch();
  final PsiStatement thenStatement=ControlFlowUtils.stripBraces(thenBranch);
  if (thenStatement == null) {
    return;
  }
  final PsiStatement elseStatement=ControlFlowUtils.stripBraces(elseBranch);
  if (elseStatement == null) {
    return;
  }
  if (thenStatement instanceof PsiReturnStatement) {
    if (!(elseStatement instanceof PsiReturnStatement)) {
      return;
    }
    registerStatementError(statement);
  }
 else   if (thenStatement instanceof PsiExpressionStatement) {
    if (!(elseStatement instanceof PsiExpressionStatement)) {
      return;
    }
    final PsiVariable thenVariable=getAssignmentTarget(thenStatement);
    if (thenVariable == null) {
      return;
    }
    final PsiVariable elseVariable=getAssignmentTarget(elseStatement);
    if (elseVariable == null) {
      return;
    }
    if (thenVariable != elseVariable) {
      return;
    }
    registerStatementError(statement);
  }
}
