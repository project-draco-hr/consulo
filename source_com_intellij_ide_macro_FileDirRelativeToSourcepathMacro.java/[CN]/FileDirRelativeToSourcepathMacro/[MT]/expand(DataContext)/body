{
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (project == null)   return null;
  VirtualFile file=(VirtualFile)dataContext.getData(DataConstantsEx.VIRTUAL_FILE);
  if (file == null)   return null;
  if (!file.isDirectory()) {
    file=file.getParent();
    if (file == null)     return null;
  }
  final VirtualFile sourceRoot=ProjectRootManager.getInstance(project).getFileIndex().getSourceRootForFile(file);
  if (sourceRoot == null)   return null;
  return FileUtil.getRelativePath(getIOFile(sourceRoot),getIOFile(file));
}
