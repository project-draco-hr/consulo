{
  final String outPathUrl;
  final Application application=ApplicationManager.getApplication();
  final ModuleCompilerPathsManager pathsManager=ModuleCompilerPathsManager.getInstance(module);
  if (application.isDispatchThread()) {
    outPathUrl=pathsManager.getCompilerOutputUrl(forTestClasses ? TestContentFolderTypeProvider.getInstance() : ProductionContentFolderTypeProvider.getInstance());
  }
 else {
    outPathUrl=application.runReadAction(new Computable<String>(){
      @Override public String compute(){
        return pathsManager.getCompilerOutputUrl(forTestClasses ? TestContentFolderTypeProvider.getInstance() : ProductionContentFolderTypeProvider.getInstance());
      }
    }
);
  }
  return outPathUrl != null ? VirtualFileManager.extractPath(outPathUrl) : null;
}
