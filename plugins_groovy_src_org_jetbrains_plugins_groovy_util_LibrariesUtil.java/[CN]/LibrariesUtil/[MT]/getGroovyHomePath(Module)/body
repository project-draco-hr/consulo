{
  final PsiClass cUnit=JavaPsiFacade.getInstance(module.getProject()).findClass("org.codehaus.groovy.control.CompilationUnit",GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module));
  if (cUnit != null) {
    final VirtualFile local=JarFileSystem.getInstance().getVirtualFileForJar(cUnit.getContainingFile().getVirtualFile());
    if (local != null) {
      final VirtualFile parent=local.getParent();
      if (parent != null) {
        if (("lib".equals(parent.getName()) || "embeddable".equals(parent.getName())) && parent.getParent() != null) {
          return parent.getParent().getPath();
        }
        return parent.getPath();
      }
    }
  }
  final String home=getGroovyLibraryHome(ModuleRootManager.getInstance(module).getFiles(OrderRootType.CLASSES));
  return StringUtil.isEmpty(home) ? null : home;
}
