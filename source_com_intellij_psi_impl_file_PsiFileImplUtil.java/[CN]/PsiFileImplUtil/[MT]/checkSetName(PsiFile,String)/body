{
  VirtualFile vFile=file.getVirtualFile();
  VirtualFile parentFile=vFile.getParent();
  if (parentFile == null)   return;
  VirtualFile child=parentFile.findChild(name);
  if (child != null && !child.equals(vFile)) {
    throw new IncorrectOperationException("File " + child.getPresentableUrl() + " already exists.");
  }
}
