{
  final List<GroovyResolveResult> candidates=getCandidatesInternal();
  final int size=candidates.size();
  if (size == 0)   return GroovyResolveResult.EMPTY_ARRAY;
  GroovyResolveResult last=candidates.get(size - 1);
  if (last.getElement() instanceof GrBindingVariable && size > 1) {
    last=candidates.get(size - 2);
  }
  if (isCorrectLocalVarOrParam(last)) {
    return new GroovyResolveResult[]{last};
  }
  for (  GroovyResolveResult candidate : candidates) {
    if (candidate.isStaticsOK()) {
      return new GroovyResolveResult[]{candidate};
    }
  }
  return candidates.toArray(new GroovyResolveResult[candidates.size()]);
}
