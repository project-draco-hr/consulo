{
  final MavenCoreSettings effectiveCoreSettings=coreSettings != null ? coreSettings : myMavenCore.getState();
  final MavenRunnerSettings effectiveRunnerSettings=runnerSettings != null ? runnerSettings : getState();
  ConsoleAdapter adapter=openConsoleToolWindow(effectiveCoreSettings);
  int count=0;
  ArrayList<MavenProject> processedProjects=new ArrayList<MavenProject>();
  for (  MavenRunnerParameters command : commands) {
    if (indicator != null) {
      indicator.setFraction(((double)count++) / commands.size());
    }
    MavenExecutor executor=createExecutor(command,effectiveCoreSettings,effectiveRunnerSettings,adapter);
    executor.setAction(action);
    if (!executor.execute(processedProjects,indicator)) {
      updateProjectFolders(processedProjects);
      return false;
    }
  }
  updateProjectFolders(processedProjects);
  return true;
}
