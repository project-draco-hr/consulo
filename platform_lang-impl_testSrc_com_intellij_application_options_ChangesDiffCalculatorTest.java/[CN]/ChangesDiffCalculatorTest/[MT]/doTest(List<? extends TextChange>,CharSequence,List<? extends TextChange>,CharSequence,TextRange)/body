{
  if (myInitialText != null) {
    checkChanges(beforeChanges,beforeText,myInitialText);
    checkChanges(currentChanges,currentText,myInitialText);
  }
  Collection<TextRange> actual=myCalculator.calculateDiff(beforeChanges,beforeText,currentChanges,currentText);
  assertEquals("expected " + Arrays.toString(expected) + ", actual "+ actual,expected.length,actual.size());
  int i=0;
  for (  TextRange range : actual) {
    assertEquals(expected[i++],range);
  }
}
