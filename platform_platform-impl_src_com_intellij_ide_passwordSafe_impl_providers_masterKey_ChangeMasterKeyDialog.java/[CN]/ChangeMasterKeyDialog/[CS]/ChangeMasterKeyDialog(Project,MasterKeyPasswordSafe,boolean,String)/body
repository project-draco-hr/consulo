{
  super(project,true);
  setTitle("Change Master Password");
  setOKButtonText("Change Password");
  if (!safe.isOsProtectedPasswordSupported()) {
    myEncryptMasterPasswordWithCheckBox.setSelected(false);
    myEncryptMasterPasswordWithCheckBox.setVisible(false);
  }
 else {
    myEncryptMasterPasswordWithCheckBox.setSelected(passwordEncrypted);
  }
  MasterKeyUtils.matchPasswords(myConfirmNewPasswordPasswordField,myNewPasswordPasswordField,new Processor<String>(){
    public boolean process(    String s){
      setErrorText(s);
      setOKActionEnabled(s == null);
      return false;
    }
  }
);
  setErrorText(error);
  init();
}
