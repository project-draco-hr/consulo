{
  boolean tryAgain=true;
  final DownloadManager.DownloadException[] ex=new DownloadManager.DownloadException[1];
  final Runnable runnable=new Runnable(){
    public void run(){
      final ProgressIndicator progress=ProgressManager.getInstance().getProgressIndicator();
      final DownloadManager downloadManager=new MyDownloadManager(project,progress);
      try {
        downloadManager.fetch(myLocation);
      }
 catch (      DownloadManager.DownloadException e) {
        ex[0]=e;
      }
    }
  }
;
  while (tryAgain) {
    tryAgain=false;
    if (ProgressManager.getInstance().runProcessWithProgressSynchronously(runnable,"Downloading Resource",true,project)) {
      if (ex[0] != null) {
        tryAgain=IOExceptionDialog.showErrorDialog("Error during Download","Error downloading " + ex[0].getLocation());
        ex[0]=null;
      }
 else {
        break;
      }
    }
  }
}
