{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  VirtualFile result=null;
  FilePath parent=file;
  LocalFileSystem lfs=LocalFileSystem.getInstance();
  while (result == null && parent != null) {
    result=lfs.findFileByPath(parent.getPath());
    parent=parent.getParentPath();
  }
  return result;
}
