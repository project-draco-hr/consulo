{
  final Ref<Notification> notificationRef=new Ref<Notification>();
  getProject().getMessageBus().connect(getTestRootDisposable()).subscribe(Notifications.TOPIC,new Notifications(){
    @Override public void notify(    @NotNull Notification notification){
      notificationRef.set(notification);
    }
    @Override public void register(    @NotNull String groupDisplayName,    @NotNull NotificationDisplayType defaultDisplayType){
    }
    @Override public void register(    @NotNull String groupDisplayName,    @NotNull NotificationDisplayType defaultDisplayType,    boolean shouldLog){
    }
  }
);
  TestRepository repository=new TestRepository(){
    @Override public Task[] getIssues(    @Nullable String query,    int max,    long since) throws Exception {
      throw new Exception();
    }
  }
;
  myManager.setRepositories(Collections.singletonList(repository));
  myManager.updateIssues(null);
  assertNull(notificationRef.get());
  myManager.getIssues("");
  assertNotNull(notificationRef.get());
}
