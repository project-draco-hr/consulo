{
  myDetectedFacetManager=new DetectedFacetManager(myProject,this,myDetectedFacetSet);
  FacetType[] types=FacetTypeRegistry.getInstance().getFacetTypes();
  for (  FacetType<?,?> type : types) {
    registerDetectors(type);
  }
  myFileIndex=new FacetDetectionIndex(myProject,this,myDetectors.keySet());
  myFileIndex.initialize();
  MyPsiTreeChangeListener psiTreeChangeListener=new MyPsiTreeChangeListener();
  myPsiManager.addPsiTreeChangeListener(psiTreeChangeListener,myProject);
  myMergingUpdateQueue=new MergingUpdateQueue("FacetAutodetectionQueue",500,true,null,myProject);
}
