{
  FacetOnTheFlyDetectorRegistryImpl<C,F> detectorRegistry=new FacetOnTheFlyDetectorRegistryImpl<C,F>(type);
  type.registerDetectors(new FacetDetectorRegistryEx<C>(null,detectorRegistry));
  if (detectorRegistry.hasDetectors()) {
    myFacetTypesWithDetectors.add(type);
    myDetectedFacetManager.registerListeners(type);
  }
}
