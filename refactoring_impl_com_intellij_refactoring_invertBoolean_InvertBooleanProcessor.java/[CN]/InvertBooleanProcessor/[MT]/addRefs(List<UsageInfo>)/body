{
  final Query<PsiReference> query=myElement instanceof PsiMethod ? MethodReferencesSearch.search((PsiMethod)myElement) : ReferencesSearch.search(myElement);
  final Collection<PsiReference> refs=query.findAll();
  for (  PsiReference ref : refs) {
    final PsiElement element=ref.getElement();
    if (element instanceof PsiReferenceExpression) {
      final PsiReferenceExpression refExpr=((PsiReferenceExpression)element);
      PsiElement parent=refExpr.getParent();
      if (parent instanceof PsiAssignmentExpression && refExpr.equals(((PsiAssignmentExpression)parent).getLExpression())) {
        result.add(new InvertAndChangeNameUsageInfo(((PsiAssignmentExpression)parent).getRExpression(),true,false));
        result.add(new InvertAndChangeNameUsageInfo(refExpr,false,true));
      }
 else {
        result.add(new InvertAndChangeNameUsageInfo(refExpr,true,true));
      }
    }
  }
}
