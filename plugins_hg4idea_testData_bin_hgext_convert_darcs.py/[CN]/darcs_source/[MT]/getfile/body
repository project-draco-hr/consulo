def getfile(self, name, rev):
    if (rev != self.lastrev):
        raise util.Abort(_('internal calling inconsistency'))
    return open(os.path.join(self.tmppath, name), 'rb').read()
