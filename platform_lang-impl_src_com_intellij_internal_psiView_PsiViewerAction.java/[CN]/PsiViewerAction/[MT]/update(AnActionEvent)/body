{
  final Project project=PlatformDataKeys.PROJECT.getData(e.getDataContext());
  final Presentation p=e.getPresentation();
  if (project == null) {
    p.setVisible(false);
    p.setEnabled(false);
    return;
  }
  if (ApplicationManagerEx.getApplicationEx().isInternal()) {
    p.setVisible(true);
    p.setEnabled(true);
    return;
  }
  final Module[] modules=ModuleManager.getInstance(project).getModules();
  for (  Module module : modules) {
    if ("PLUGIN_MODULE".equals(ModuleType.get(module).getId())) {
      p.setVisible(true);
      p.setEnabled(true);
      return;
    }
  }
  p.setVisible(false);
  p.setEnabled(false);
}
