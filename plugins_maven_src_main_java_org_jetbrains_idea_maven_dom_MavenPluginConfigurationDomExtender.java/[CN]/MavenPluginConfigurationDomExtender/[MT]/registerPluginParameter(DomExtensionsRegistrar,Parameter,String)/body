{
  DomExtension e;
  if (isCollection(parameter)) {
    e=r.registerFixedNumberChildExtension(new XmlName(parameterName),AnyParameter.class);
    e.addExtender(new DomExtender(){
      public void registerExtensions(      @NotNull DomElement domElement,      @NotNull DomExtensionsRegistrar registrar){
        String singularName=StringUtil.unpluralize(parameterName);
        if (singularName == null)         singularName=parameterName;
        DomExtension inner=registrar.registerCollectionChildrenExtension(new XmlName(singularName),AnyParameter.class);
        inner.putUserData(DomExtension.KEY_DECLARATION,parameter);
      }
    }
);
  }
 else {
    e=r.registerFixedNumberChildExtension(new XmlName(parameterName),AnyParameter.class);
  }
  e.putUserData(DomExtension.KEY_DECLARATION,parameter);
  parameter.getXmlElement().putUserData(PLUGIN_PARAMETER_KEY,parameter);
}
