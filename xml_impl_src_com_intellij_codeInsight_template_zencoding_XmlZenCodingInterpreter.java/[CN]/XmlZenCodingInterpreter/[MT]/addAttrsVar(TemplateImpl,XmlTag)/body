{
  String text=tag.getContainingFile().getText();
  PsiElement[] children=tag.getChildren();
  if (children.length >= 1 && children[0] instanceof XmlToken && ((XmlToken)children[0]).getTokenType() == XmlTokenType.XML_START_TAG_START) {
    PsiElement beforeAttrs=children[0];
    if (children.length >= 2 && children[1] instanceof XmlToken && ((XmlToken)children[1]).getTokenType() == XmlTokenType.XML_NAME) {
      beforeAttrs=children[1];
    }
    TextRange range=beforeAttrs.getTextRange();
    if (range == null) {
      return null;
    }
    int offset=range.getEndOffset();
    text=text.substring(0,offset) + " $ATTRS$" + text.substring(offset);
    modifiedTemplate.addVariable(ATTRS,"","",false);
    return text;
  }
  return null;
}
