{
  final Object key=new Object();
  myCallback.fixStartOfTemplate(key);
  for (int i=startIndex; i < count; i++) {
    final int finalI=i;
    final boolean[] flag=new boolean[]{false};
    TemplateInvokationListener listener=new TemplateInvokationListener(){
      public void finished(      boolean inSeparateEvent){
        gotoChild(key);
        if (interpret(myTokens,tailStart,myCallback,State.WORD,mySurroundedText,new TemplateInvokationListener(){
          public void finished(          boolean inSeparateEvent){
            if (myCallback.getOffset() != myCallback.getEndOfTemplate(key)) {
              myCallback.fixEndOffset();
            }
            myCallback.gotoEndOfTemplate(key);
            if (inSeparateEvent) {
              invokeTemplateAndProcessTail(templateToken,finalI + 1,count,tailStart,true);
            }
          }
        }
)) {
          if (inSeparateEvent) {
            invokeTemplateAndProcessTail(templateToken,finalI + 1,count,tailStart,true);
          }
        }
 else {
          flag[0]=true;
        }
      }
    }
;
    if (!invokeTemplate(templateToken,myCallback,listener,i) || flag[0]) {
      return false;
    }
  }
  finish(separateEvent);
  return true;
}
