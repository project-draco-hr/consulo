{
  List<Pair<String,String>> attr2value=new ArrayList<Pair<String,String>>(token.myAttribute2Value);
  if (callback.isLiveTemplateApplicable(token.myKey)) {
    return invokeExistingLiveTemplate(token,callback,listener,numberInIteration,attr2value);
  }
 else {
    TemplateImpl template=new TemplateImpl("","");
    template.addTextSegment('<' + token.myKey);
    if (attr2value.size() > 0) {
      template.addVariable(ATTRS,"","",false);
      template.addVariableSegment(ATTRS);
    }
    template.addTextSegment(">");
    template.addVariableSegment(TemplateImpl.END);
    template.addTextSegment("</" + token.myKey + ">");
    template.setToReformat(true);
    Map<String,String> predefinedValues=buildPredefinedValues(attr2value,numberInIteration);
    return callback.startTemplate(template,predefinedValues,listener);
  }
}
