{
  if (!SystemInfo.isWindows)   return;
  File file=new File("c:\\Documents and Settings\\desktop.ini");
  String parent=FileUtil.toSystemIndependentName(file.getParent());
  VirtualDirectoryImpl.allowRootAccess(parent);
  VirtualFile virtualFile;
  try {
    virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(file);
  }
  finally {
    VirtualDirectoryImpl.disallowRootAccess(parent);
  }
  if (virtualFile == null) {
    System.out.println("NO LUCK: " + file);
    return;
  }
  NewVirtualFileSystem system=(NewVirtualFileSystem)virtualFile.getFileSystem();
  system=PersistentFS.replaceWithNativeFS(system);
  assertTrue(system.exists(virtualFile));
  int childAttributes=system.getBooleanAttributes(virtualFile,-1);
  assertTrue((childAttributes & FileUtil.BA_EXISTS) != 0);
}
