{
  if (myDesigner == null && designer == null) {
    return;
  }
  if (myDesigner != null && designer != null && myGroups.equals(designer.getPaletteGroups())) {
    myDesigner=designer;
    restoreSelection();
    return;
  }
  for (  PaletteItemsComponent itemsComponent : myItemsComponents) {
    itemsComponent.removeListSelectionListener(mySelectionListener);
  }
  myDesigner=designer;
  myPaletteContainer.removeAll();
  if (designer == null) {
    myGroups=Collections.emptyList();
    myGroupComponents=Collections.emptyList();
    myItemsComponents=Collections.emptyList();
  }
 else {
    myGroups=designer.getPaletteGroups();
    myGroupComponents=new ArrayList<PaletteGroupComponent>();
    myItemsComponents=new ArrayList<PaletteItemsComponent>();
  }
  for (  PaletteGroup group : myGroups) {
    PaletteGroupComponent groupComponent=new PaletteGroupComponent(group);
    PaletteItemsComponent itemsComponent=new PaletteItemsComponent(group);
    groupComponent.setItemsComponent(itemsComponent);
    myPaletteContainer.add(groupComponent);
    myPaletteContainer.add(itemsComponent);
    myGroupComponents.add(groupComponent);
    itemsComponent.addListSelectionListener(mySelectionListener);
    myItemsComponents.add(itemsComponent);
  }
  myPaletteContainer.revalidate();
  if (myDesigner != null) {
    restoreSelection();
  }
}
