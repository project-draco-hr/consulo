{
  final String text=ProjectBundle.message("project.load.undefined.path.variables.message");
  final Application application=ApplicationManager.getApplication();
  if (application.isHeadlessEnvironment() || application.isUnitTestMode()) {
    throw new RuntimeException(text + ": " + StringUtil.join(undefinedMacros.keySet(),", "));
  }
  final UndefinedMacrosConfigurable configurable=new UndefinedMacrosConfigurable(text,undefinedMacros);
  final SingleConfigurableEditor editor=new SingleConfigurableEditor(project,configurable){
    protected void doOKAction(){
      if (!getConfigurable().isModified()) {
        Messages.showErrorDialog(getContentPane(),ProjectBundle.message("project.load.undefined.path.variables.all.needed"),ProjectBundle.message("project.load.undefined.path.variables.title"));
        return;
      }
      super.doOKAction();
    }
  }
;
  editor.show();
  return editor.isOK();
}
