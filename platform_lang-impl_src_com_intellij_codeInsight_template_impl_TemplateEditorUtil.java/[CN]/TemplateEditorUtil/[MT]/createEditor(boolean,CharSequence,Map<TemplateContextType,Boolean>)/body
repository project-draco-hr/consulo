{
  Document doc=((EditorFactoryImpl)EditorFactory.getInstance()).createDocument(true);
  doc.setText(text);
  final Project project=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext());
  if (context != null) {
    for (    Map.Entry<TemplateContextType,Boolean> entry : context.entrySet()) {
      if (entry.getValue()) {
        doc=entry.getKey().createDocument(text,project);
        break;
      }
    }
  }
  return createEditor(isReadOnly,doc,project);
}
