{
  final Map<DataNode<ProjectData>,List<DataNode<ModuleData>>> grouped=ExternalSystemApiUtil.groupBy(nodes,ProjectKeys.PROJECT);
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      for (      Map.Entry<DataNode<ProjectData>,List<DataNode<ModuleData>>> entry : grouped.entrySet()) {
        model.ensureSubProjectsStructure(entry.getKey().getData(),ContainerUtilRt.map2List(entry.getValue(),MAPPER));
      }
    }
  }
);
}
