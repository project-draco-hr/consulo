{
  super(JOptionPane.getRootFrame(),title,true);
  new MnemonicHelper().register(getContentPane());
  getContentPane().add(mainPanel);
  mainPanel.getActionMap().put("close",new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      cancelPressed=true;
      dispose();
    }
  }
);
  mainPanel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),"close");
  errorLabel.setText(errorText);
  setupButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      HTTPProxySettingsDialog dlg=new HTTPProxySettingsDialog();
      dlg.show();
    }
  }
);
  tryAgainButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      cancelPressed=false;
      dispose();
    }
  }
);
  cancelButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      cancelPressed=true;
      dispose();
    }
  }
);
  setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
  Dimension parentSize=Toolkit.getDefaultToolkit().getScreenSize();
  Dimension ownSize=getPreferredSize();
  setLocation((parentSize.width - ownSize.width) / 2,(parentSize.height - ownSize.height) / 2);
  pack();
  setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
  addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent e){
      cancelPressed=true;
      dispose();
    }
  }
);
}
