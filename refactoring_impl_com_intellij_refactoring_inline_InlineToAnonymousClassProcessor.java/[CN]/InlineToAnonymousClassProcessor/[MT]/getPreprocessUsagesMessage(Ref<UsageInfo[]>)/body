{
  final UsageInfo[] usages=refUsages.get();
  for (  UsageInfo usage : usages) {
    final PsiElement element=usage.getElement();
    final PsiElement parentElement=element.getParent();
    if (parentElement != null && parentElement.getParent() instanceof PsiClassObjectAccessExpression) {
      return "Class cannot be inlined because it has usages of its class literal";
    }
    if (parentElement instanceof PsiNewExpression) {
      final PsiNewExpression newExpression=(PsiNewExpression)parentElement;
      final PsiMethod[] constructors=myClass.getConstructors();
      if (constructors.length == 0) {
        PsiExpressionList newArgumentList=newExpression.getArgumentList();
        if (newArgumentList != null && newArgumentList.getExpressions().length > 0) {
          return "Class cannot be inlined because a call to its constructor is unresolved";
        }
      }
 else {
        final JavaResolveResult resolveResult=newExpression.resolveMethodGenerics();
        if (!resolveResult.isValidResult()) {
          return "Class cannot be inlined because a call to its constructor is unresolved";
        }
      }
    }
  }
  return null;
}
