{
  final PsiBuilder.Marker document=mark();
  while (token() == XmlTokenType.XML_COMMENT_START) {
    parseComment();
  }
  parseProlog();
  PsiBuilder.Marker error=null;
  while (!eof()) {
    final IElementType tt=token();
    if (tt == XmlTokenType.XML_START_TAG_START) {
      error=flushError(error);
      parseTag("");
      myTagMarkersStack.clear();
      myTagNamesStack.clear();
    }
 else     if (tt == XmlTokenType.XML_COMMENT_START) {
      error=flushError(error);
      parseComment();
    }
 else     if (tt == XmlTokenType.XML_PI_START) {
      error=flushError(error);
      parseProcessingInstruction();
    }
 else     if (tt == XmlTokenType.XML_REAL_WHITE_SPACE || tt == XmlTokenType.XML_CHAR_ENTITY_REF || tt == XmlTokenType.XML_DATA_CHARACTERS) {
      error=flushError(error);
      advance();
    }
 else {
      if (error == null)       error=mark();
      advance();
    }
  }
  if (error != null) {
    error.error(XmlErrorMessages.message("top.level.element.is.not.completed"));
    error=null;
  }
  document.done(XmlElementType.HTML_DOCUMENT);
}
