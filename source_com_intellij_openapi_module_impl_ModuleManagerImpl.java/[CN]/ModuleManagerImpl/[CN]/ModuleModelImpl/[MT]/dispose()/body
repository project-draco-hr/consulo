{
  assertWritable();
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  final List<Module> list=Arrays.asList(ModuleManagerImpl.this.myModuleModel.getModules());
  final Module[] thisModules=getModules();
  for (  Module thisModule1 : thisModules) {
    ModuleImpl thisModule=(ModuleImpl)thisModule1;
    if (!list.contains(thisModule)) {
      Disposer.dispose(thisModule);
    }
  }
  for (  Module moduleToDispose : myModulesToDispose) {
    if (!list.contains(moduleToDispose)) {
      Disposer.dispose(moduleToDispose);
    }
  }
  clearRenamingStuff();
}
