{
  assertWritable();
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  final List<Module> list=Arrays.asList(ModuleManagerImpl.this.myModuleModel.getModules());
  final Module[] thisModules=getModules();
  for (int i=0; i < thisModules.length; i++) {
    ModuleImpl thisModule=(ModuleImpl)thisModules[i];
    if (!list.contains(thisModule)) {
      thisModule.dispose();
    }
  }
  for (int i=0; i < myModulesToDispose.size(); i++) {
    ModuleImpl module=(ModuleImpl)myModulesToDispose.get(i);
    if (!list.contains(module)) {
      module.dispose();
    }
  }
  clearRenamingStuff();
}
