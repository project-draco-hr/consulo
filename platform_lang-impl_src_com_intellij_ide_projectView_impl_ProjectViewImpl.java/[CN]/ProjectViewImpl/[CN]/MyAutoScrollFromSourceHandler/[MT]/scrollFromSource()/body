{
  final FileEditorManager fileEditorManager=FileEditorManager.getInstance(myProject);
  final Editor selectedTextEditor=fileEditorManager.getSelectedTextEditor();
  if (selectedTextEditor != null) {
    selectElementAtCaret(selectedTextEditor);
    return;
  }
  final FileEditor[] editors=fileEditorManager.getSelectedEditors();
  for (  FileEditor fileEditor : editors) {
    if (fileEditor instanceof TextEditor) {
      Editor editor=((TextEditor)fileEditor).getEditor();
      selectElementAtCaret(editor);
      return;
    }
  }
  final VirtualFile[] selectedFiles=fileEditorManager.getSelectedFiles();
  if (selectedFiles.length > 0) {
    final PsiFile file=PsiManager.getInstance(myProject).findFile(selectedFiles[0]);
    if (file != null) {
      scrollFromFile(file,null);
    }
  }
}
