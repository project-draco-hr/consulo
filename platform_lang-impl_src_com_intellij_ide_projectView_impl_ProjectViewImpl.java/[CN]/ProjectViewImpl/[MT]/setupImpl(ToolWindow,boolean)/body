{
  myCombo.setRenderer(new ListCellRendererWrapper(myCombo.getRenderer()){
    public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      if (value == null) {
        return super.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      }
      final Pair<String,String> ids=(Pair<String,String>)value;
      final String id=ids.first;
      final String subId=ids.second;
      final AbstractProjectViewPane pane=getProjectViewPaneById(id);
      String name=null;
      Icon icon=null;
      if (pane != null) {
        if (subId == null) {
          name=pane.getTitle();
          icon=pane.getIcon();
        }
 else {
          String presentable=pane.getPresentableSubIdName(subId);
          if (index == -1) {
            name=presentable;
            icon=pane.getIcon();
          }
 else {
            name=presentable;
            icon=BULLET_ICON;
          }
        }
      }
      return getListCellRendererComponent(list,name,icon,index,isSelected,cellHasFocus);
    }
  }
);
  myCombo.setMinimumAndPreferredWidth(10);
  myActionGroup=new DefaultActionGroup();
  myAutoScrollFromSourceHandler.install();
  myToolBar=ActionManager.getInstance().createActionToolbar(ActionPlaces.PROJECT_VIEW_TOOLBAR,myActionGroup,true);
  myToolBar.setSecondaryActionsTooltip("View Options");
  JComponent toolbarComponent=myToolBar.getComponent();
  myActionGroupPanel.setLayout(new BorderLayout());
  myActionGroupPanel.add(toolbarComponent,BorderLayout.CENTER);
  if (toolWindow != null) {
    final ContentManager contentManager=toolWindow.getContentManager();
    final Content content=contentManager.getFactory().createContent(getComponent(),ToolWindowId.PROJECT_VIEW,false);
    contentManager.addContent(content);
    content.setPreferredFocusedComponent(new Computable<JComponent>(){
      public JComponent compute(){
        final AbstractProjectViewPane current=getCurrentProjectViewPane();
        return current != null ? current.getComponentToFocus() : null;
      }
    }
);
    toolWindow.setIcon(IconLoader.getIcon(ApplicationInfoEx.getInstanceEx().getToolWindowIconUrl()));
  }
  myCombo.addPopupMenuListener(new PopupMenuListener(){
    public void popupMenuWillBecomeVisible(    PopupMenuEvent e){
    }
    public void popupMenuWillBecomeInvisible(    PopupMenuEvent e){
      if (!viewSelectionChanged()) {
        ToolWindowManager.getInstance(myProject).activateEditorComponent();
      }
    }
    public void popupMenuCanceled(    PopupMenuEvent e){
      ToolWindowManager.getInstance(myProject).activateEditorComponent();
    }
  }
);
  installLabelFocusListener();
  GuiUtils.replaceJSplitPaneWithIDEASplitter(myPanel);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      splitterProportions.restoreSplitterProportions(myPanel);
    }
  }
);
  if (loadPaneExtensions) {
    ensurePanesLoaded();
  }
  isInitialized=true;
  doAddUninitializedPanes();
}
