{
  ArrayList<AnAction> result=new ArrayList<AnAction>();
  DefaultActionGroup views=new DefaultActionGroup("Change View",true);
  boolean lastWasHeader=false;
  boolean lastHeaderHadKids=false;
  for (int i=0; i < myCombo.getModel().getSize(); i++) {
    Object each=myCombo.getModel().getElementAt(i);
    if (each instanceof Pair) {
      Pair<String,String> eachPair=(Pair<String,String>)each;
      if (eachPair.getSecond() == null) {
        if (lastHeaderHadKids) {
          views.add(new Separator());
        }
 else {
          if (i + 1 < myCombo.getModel().getSize()) {
            Object next=myCombo.getModel().getElementAt(i + 1);
            if (next instanceof Pair) {
              if (((Pair)next).getSecond() != null) {
                views.add(new Separator());
              }
            }
          }
        }
      }
 else {
        lastHeaderHadKids=true;
      }
      lastWasHeader=eachPair.getSecond() == null;
      views.add(new ChangeViewAction(eachPair.getFirst(),eachPair.getSecond()));
    }
  }
  result.add(views);
  result.add(new Separator());
  ArrayList<AnAction> secondary=new ArrayList<AnAction>();
  if (myActionGroup != null) {
    AnAction[] kids=myActionGroup.getChildren(null);
    for (    AnAction each : kids) {
      if (myActionGroup.isPrimary(each)) {
        result.add(each);
      }
 else {
        secondary.add(each);
      }
    }
  }
  result.add(new Separator());
  result.addAll(secondary);
  return result;
}
