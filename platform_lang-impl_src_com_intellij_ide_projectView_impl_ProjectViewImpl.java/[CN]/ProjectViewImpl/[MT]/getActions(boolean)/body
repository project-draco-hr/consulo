{
  ArrayList<AnAction> result=new ArrayList<AnAction>();
  DefaultActionGroup views=new DefaultActionGroup("Change View",true);
  boolean lastWasHeader=false;
  boolean lastHeaderHadKids=false;
  for (int i=0; i < myContentManager.getContentCount(); i++) {
    Content each=myContentManager.getContent(i);
    if (each != null) {
      if (each.getUserData(SUB_ID_KEY) == null) {
        if (lastHeaderHadKids) {
          views.add(new Separator());
        }
 else {
          if (i + 1 < myContentManager.getContentCount()) {
            Content next=myContentManager.getContent(i + 1);
            if (next != null) {
              if (next.getUserData(SUB_ID_KEY) != null) {
                views.add(new Separator());
              }
            }
          }
        }
      }
 else {
        lastHeaderHadKids=true;
      }
      lastWasHeader=each.getUserData(SUB_ID_KEY) == null;
      views.add(new ChangeViewAction(each.getUserData(ID_KEY),each.getUserData(SUB_ID_KEY)));
    }
  }
  result.add(views);
  result.add(new Separator());
  ArrayList<AnAction> secondary=new ArrayList<AnAction>();
  if (myActionGroup != null) {
    AnAction[] kids=myActionGroup.getChildren(null);
    for (    AnAction each : kids) {
      if (myActionGroup.isPrimary(each)) {
        result.add(each);
      }
 else {
        secondary.add(each);
      }
    }
  }
  result.add(new Separator());
  result.addAll(secondary);
  return result;
}
