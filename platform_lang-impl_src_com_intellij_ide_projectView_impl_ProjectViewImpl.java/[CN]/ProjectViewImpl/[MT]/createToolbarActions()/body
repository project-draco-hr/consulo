{
  myActionGroup.removeAll();
  if (BaseProjectViewDirectoryHelper.getInstance(myProject).supportsFlattenPackages()) {
    myActionGroup.addAction(new PaneOptionAction(myFlattenPackages,IdeBundle.message("action.flatten.packages"),IdeBundle.message("action.flatten.packages"),AllIcons.ObjectBrowser.FlattenPackages,ourFlattenPackagesDefaults){
      @Override public void setSelected(      AnActionEvent event,      boolean flag){
        final AbstractProjectViewPane viewPane=getCurrentProjectViewPane();
        final SelectionInfo selectionInfo=SelectionInfo.create(viewPane);
        super.setSelected(event,flag);
        selectionInfo.apply(viewPane);
      }
    }
).setAsSecondary(true);
  }
class FlattenPackagesDependableAction extends PaneOptionAction {
    FlattenPackagesDependableAction(    Map<String,Boolean> optionsMap,    final String text,    final String description,    final Icon icon,    boolean optionDefaultValue){
      super(optionsMap,text,description,icon,optionDefaultValue);
    }
    @Override public void update(    AnActionEvent e){
      super.update(e);
      final Presentation presentation=e.getPresentation();
      presentation.setVisible(isFlattenPackages(myCurrentViewId));
    }
  }
  if (BaseProjectViewDirectoryHelper.getInstance(myProject).supportsHideEmptyMiddlePackages()) {
    myActionGroup.addAction(new HideEmptyMiddlePackagesAction()).setAsSecondary(true);
  }
  if (BaseProjectViewDirectoryHelper.getInstance(myProject).supportsFlattenPackages()) {
    myActionGroup.addAction(new FlattenPackagesDependableAction(myAbbreviatePackageNames,IdeBundle.message("action.abbreviate.qualified.package.names"),IdeBundle.message("action.abbreviate.qualified.package.names"),AllIcons.ObjectBrowser.AbbreviatePackageNames,ourAbbreviatePackagesDefaults){
      @Override public boolean isSelected(      AnActionEvent event){
        return super.isSelected(event) && isAbbreviatePackageNames(myCurrentViewId);
      }
      @Override public void update(      AnActionEvent e){
        super.update(e);
        if (ScopeViewPane.ID.equals(myCurrentViewId)) {
          e.getPresentation().setEnabled(false);
        }
      }
    }
).setAsSecondary(true);
  }
  myActionGroup.addAction(new PaneOptionAction(myShowMembers,IdeBundle.message("action.show.members"),IdeBundle.message("action.show.hide.members"),AllIcons.ObjectBrowser.ShowMembers,ourShowMembersDefaults)).setAsSecondary(true);
  myActionGroup.addAction(myAutoScrollToSourceHandler.createToggleAction()).setAsSecondary(true);
  myActionGroup.addAction(myAutoScrollFromSourceHandler.createToggleAction()).setAsSecondary(true);
  myActionGroup.addAction(new SortByTypeAction()).setAsSecondary(true);
  myActionGroup.addAction(new FoldersAlwaysOnTopAction()).setAsSecondary(true);
  if (!myAutoScrollFromSourceHandler.isAutoScrollEnabled()) {
    myActionGroup.addAction(new ScrollFromSourceAction());
  }
  AnAction collapseAllAction=CommonActionsManager.getInstance().createCollapseAllAction(new TreeExpander(){
    @Override public void expandAll(){
    }
    @Override public boolean canExpand(){
      return false;
    }
    @Override public void collapseAll(){
      AbstractProjectViewPane pane=getCurrentProjectViewPane();
      JTree tree=pane.myTree;
      if (tree != null) {
        TreeUtil.collapseAll(tree,0);
      }
    }
    @Override public boolean canCollapse(){
      return true;
    }
  }
,getComponent());
  myActionGroup.add(collapseAllAction);
  getCurrentProjectViewPane().addToolbarActions(myActionGroup);
}
