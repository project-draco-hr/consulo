{
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  Document document=myEditor.getDocument();
  GeneralHighlightingPass action1=new GeneralHighlightingPass(myProject,myFile,document,0,myFile.getTextLength(),false,true);
  action1.doCollectInformation(new MockProgressInidicator());
  HighlightInfo[] highlights1=action1.getHighlights();
  PostHighlightingPass action2=new PostHighlightingPass(myProject,myFile,myEditor,0,myFile.getTextLength(),false);
  action2.doCollectInformation(new MockProgressInidicator());
  HighlightInfo[] highlights2=action2.getHighlights();
  ArrayList<HighlightInfo> list=new ArrayList<HighlightInfo>();
  for (  HighlightInfo highlightInfo : highlights1) {
    list.add(highlightInfo);
  }
  for (int i=0; i < highlights2.length; i++) {
    list.add(highlights2[i]);
  }
  return list.toArray(new HighlightInfo[list.size()]);
}
