{
  super.visitReferenceExpression(expression);
  final PsiReferenceParameterList parameterList=expression.getParameterList();
  if (parameterList == null) {
    return;
  }
  if (parameterList.getTypeArguments().length > 0) {
    return;
  }
  final PsiExpression qualifierExpression=expression.getQualifierExpression();
  if (!(qualifierExpression instanceof PsiThisExpression)) {
    return;
  }
  final PsiThisExpression thisExpression=(PsiThisExpression)qualifierExpression;
  final PsiJavaCodeReferenceElement qualifier=thisExpression.getQualifier();
  final String referenceName=expression.getReferenceName();
  if (referenceName == null) {
    return;
  }
  final PsiElement parent=expression.getParent();
  if (qualifier == null) {
    if (parent instanceof PsiCallExpression) {
      registerError(qualifierExpression);
      return;
    }
    if (VariableSearchUtils.existsLocalOrParameter(referenceName,expression)) {
      return;
    }
    registerError(thisExpression);
  }
 else {
    final String qualifierName=qualifier.getReferenceName();
    if (qualifierName == null) {
      return;
    }
    if (parent instanceof PsiCallExpression) {
      final PsiCallExpression callExpression=(PsiCallExpression)parent;
      final PsiMethod calledMethod=callExpression.resolveMethod();
      if (calledMethod == null) {
        return;
      }
      final String methodName=calledMethod.getName();
      PsiClass parentClass=PsiTreeUtil.getParentOfType(expression,PsiClass.class);
      while (parentClass != null) {
        if (qualifierName.equals(parentClass.getName())) {
          registerError(thisExpression);
        }
        final PsiMethod[] methods=parentClass.findMethodsByName(methodName,true);
        if (methods.length > 0) {
          return;
        }
        parentClass=PsiTreeUtil.getParentOfType(parentClass,PsiClass.class);
      }
    }
 else {
      if (VariableSearchUtils.existsLocalOrParameter(referenceName,expression)) {
        return;
      }
      PsiClass parentClass=PsiTreeUtil.getParentOfType(expression,PsiClass.class);
      while (parentClass != null) {
        if (qualifierName.equals(parentClass.getName())) {
          registerError(thisExpression);
        }
        final PsiField field=parentClass.findFieldByName(referenceName,true);
        if (field != null) {
          return;
        }
        parentClass=PsiTreeUtil.getParentOfType(parentClass,PsiClass.class);
      }
    }
  }
}
