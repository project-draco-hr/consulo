{
  final Map<GroupDescriptor,Set<UsageDescriptor>> all=new HashMap<GroupDescriptor,Set<UsageDescriptor>>();
  final Map<GroupDescriptor,Set<UsageDescriptor>> sent=createDescriptors("g:a1:1","g:a2:2","g2:a1:1","g2:a2:2","g2:a3:3");
  final Map<GroupDescriptor,Set<PatchedUsage>> patched=StatisticsUploadAssistant.getPatchedUsages(all,sent);
  assertMapEquals(patched,createDescriptors("g:a1:-1","g2:a2:-2","g2:a3:-3","g:a2:-2","g2:a1:-1"));
}
