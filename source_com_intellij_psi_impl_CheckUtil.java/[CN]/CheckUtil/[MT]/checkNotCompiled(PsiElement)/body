{
  if (element instanceof PsiCompiledElement) {
    PsiClass aClass;
    if (element instanceof PsiFile) {
      aClass=((PsiJavaFile)element).getClasses()[0];
    }
 else {
      PsiElement parent=element;
      while (!(parent instanceof PsiClass)) {
        parent=parent.getParent();
      }
      aClass=(PsiClass)parent;
    }
    throw new IncorrectOperationException("Cannot modify a compiled class " + aClass.getQualifiedName() + ".");
  }
}
