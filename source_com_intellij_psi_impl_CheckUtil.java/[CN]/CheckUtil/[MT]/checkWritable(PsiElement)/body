{
  if (!element.isWritable()) {
    if (element instanceof PsiDirectory) {
      throw new IncorrectOperationException("Cannot modify a read-only directory " + ((PsiDirectory)element).getVirtualFile().getPresentableUrl() + ".");
    }
 else {
      PsiFile file=element.getContainingFile();
      if (file == null) {
        throw new IncorrectOperationException();
      }
      throw new IncorrectOperationException("Cannot modify a read-only file " + file.getVirtualFile().getPresentableUrl() + ".");
    }
  }
}
