{
  final ILayoutPullParser parser=new XmlParser();
  parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES,true);
  parser.setInput(new StringReader(layoutXmlText));
  final Dimension dimension=getDimension();
  if (dimension == null) {
    return null;
  }
  final VersionQualifier versionQualifier=myConfig.getVersionQualifier();
  if (versionQualifier == null) {
    return null;
  }
  final int targetSdkVersion=versionQualifier.getVersion();
  final int minSdkVersion=myMinSdkVersion >= 0 ? myMinSdkVersion : targetSdkVersion;
  final PixelDensityQualifier densityQualifier=myConfig.getPixelDensityQualifier();
  final Density density=densityQualifier != null ? densityQualifier.getValue() : Density.MEDIUM;
  final int xdpi=density.getDpiValue();
  final int ydpi=density.getDpiValue();
  final SessionParams params=new SessionParams(parser,RenderingMode.NORMAL,this,dimension.width,dimension.height,density,xdpi,ydpi,myResourceResolver,myProjectCallback,minSdkVersion,targetSdkVersion,new SimpleLogger(LOG));
  params.setExtendedViewInfoMode(false);
  params.setAppLabel(appLabel);
  final ScreenSizeQualifier screenSizeQualifier=myConfig.getScreenSizeQualifier();
  params.setConfigScreenSize(screenSizeQualifier != null ? screenSizeQualifier.getValue() : ScreenSize.NORMAL);
  return myLayoutLib.createSession(params);
}
