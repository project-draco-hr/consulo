def __init__(self, ui, dirstate, root, timeout=None):
    self.ui = ui
    self.repowatcher = repowatcher(ui, dirstate, root)
    self.socketlistener = socketlistener(ui, root, self.repowatcher, timeout)
