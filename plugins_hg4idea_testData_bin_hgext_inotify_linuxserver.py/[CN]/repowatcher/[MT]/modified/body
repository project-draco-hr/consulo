@eventaction('m')
def modified(self, wpath):
    if (wpath == '.hgignore'):
        self.update_hgignore()
    try:
        st = self.stat(wpath)
        if stat.S_ISREG(st[0]):
            if (self.dirstate[wpath] in 'lmn'):
                self.updatefile(wpath, st)
    except OSError:
        pass
