{
  Value value=myParentDescriptor.getValue();
  if (value instanceof ObjectReference) {
    final String typeName=value.type().name();
    final PsiClass psiClass=DebuggerUtilsEx.findClass(myTypeName,myProject,((DebugProcessImpl)context.getDebugProcess()).getSession().getSearchScope());
    if (psiClass == null) {
      throw EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.invalid.type.name",typeName));
    }
    return getEffectiveCodeFragmentFactory(psiClass).createCodeFragment(getEvaluationText(),psiClass,myProject);
  }
 else {
    throw EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.objref.expected",myParentDescriptor.getName()));
  }
}
