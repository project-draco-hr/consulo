{
  final PsiElement position=params.getPosition();
  if (position.getParent() instanceof PsiLiteralExpression)   return;
  final THashSet<ExpectedTypeInfo> infos=new THashSet<ExpectedTypeInfo>(EXPECTED_TYPE_INFO_STRATEGY);
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      infos.addAll(Arrays.asList(JavaSmartCompletionContributor.getExpectedTypes(position)));
    }
  }
);
  addCompletions(params,result,infos);
}
