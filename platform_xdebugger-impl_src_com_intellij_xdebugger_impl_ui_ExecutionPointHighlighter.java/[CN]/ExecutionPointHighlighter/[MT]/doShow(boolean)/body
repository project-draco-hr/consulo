{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  removeHighlighter();
  OpenFileDescriptor fileDescriptor=myOpenFileDescriptor;
  if (!navigate && myOpenFileDescriptor != null) {
    fileDescriptor=new OpenFileDescriptor(myProject,myOpenFileDescriptor.getFile());
  }
  myEditor=null;
  if (fileDescriptor != null) {
    if (!navigate) {
      FileEditor editor=FileEditorManager.getInstance(fileDescriptor.getProject()).getSelectedEditor(fileDescriptor.getFile());
      if (editor instanceof TextEditor) {
        myEditor=((TextEditor)editor).getEditor();
      }
    }
    if (myEditor == null) {
      myEditor=XDebuggerUtilImpl.createEditor(fileDescriptor);
    }
  }
  if (myEditor != null) {
    addHighlighter();
  }
}
