{
  List<TextEditorHighlightingPass> passes=getPasses(EXCEPT_VISIBLE);
  int updateAllIndex=-1;
  int updateVisibleIndex=-1;
  for (int i=0, passesSize=passes.size(); i < passesSize; i++) {
    TextEditorHighlightingPass pass=passes.get(i);
    if (pass instanceof GeneralHighlightingPass) {
      if (pass.getId() == Pass.UPDATE_ALL)       updateAllIndex=i;
      if (pass.getId() == Pass.UPDATE_VISIBLE)       updateVisibleIndex=i;
    }
  }
  if (updateVisibleIndex != -1 && updateAllIndex == -1) {
  }
 else   if (updateVisibleIndex == -1 && updateAllIndex != -1) {
  }
 else   if (updateVisibleIndex != -1 && updateAllIndex != -1) {
    passes.remove(updateAllIndex);
  }
  return passes.isEmpty() ? TextEditorHighlightingPass.EMPTY_ARRAY : passes.toArray(new TextEditorHighlightingPass[passes.size()]);
}
