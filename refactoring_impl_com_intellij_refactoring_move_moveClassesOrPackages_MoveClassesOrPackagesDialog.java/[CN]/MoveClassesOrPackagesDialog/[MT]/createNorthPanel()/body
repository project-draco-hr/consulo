{
  myWithBrowseButtonReference.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      PackageChooserDialog chooser=new PackageChooserDialog(RefactoringBundle.message("choose.destination.package"),myProject);
      chooser.selectPackage(myWithBrowseButtonReference.getText());
      chooser.show();
      PsiPackage aPackage=chooser.getSelectedPackage();
      if (aPackage != null) {
        myWithBrowseButtonReference.setText(aPackage.getQualifiedName());
        validateOKButton();
      }
    }
  }
);
  if (!mySearchTextOccurencesEnabled) {
    myCbSearchTextOccurences.setEnabled(false);
    myCbSearchTextOccurences.setVisible(false);
    myCbSearchTextOccurences.setSelected(false);
  }
  myWithBrowseButtonReference.getChildComponent().getDocument().addDocumentListener(new DocumentAdapter(){
    public void documentChanged(    DocumentEvent e){
      validateOKButton();
    }
  }
);
  return myMainPanel;
}
