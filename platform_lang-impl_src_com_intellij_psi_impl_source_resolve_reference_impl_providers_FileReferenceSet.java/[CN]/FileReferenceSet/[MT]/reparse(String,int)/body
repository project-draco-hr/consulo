{
  final List<FileReference> referencesList=new ArrayList<FileReference>();
  String separatorString=getSeparatorString();
  int sepLen=separatorString.length();
  int currentSlash=-sepLen;
  while (currentSlash + sepLen < str.length() && Character.isWhitespace(str.charAt(currentSlash + sepLen))) {
    currentSlash++;
  }
  if (currentSlash + sepLen + sepLen < str.length() && str.substring(currentSlash + sepLen,currentSlash + sepLen + sepLen).equals(separatorString)) {
    currentSlash+=sepLen;
  }
  int index=0;
  if (str.equals(separatorString)) {
    final FileReference fileReference=createFileReference(new TextRange(startInElement,startInElement + sepLen),index++,separatorString);
    referencesList.add(fileReference);
  }
  while (true) {
    final int nextSlash=str.indexOf(separatorString,currentSlash + sepLen);
    final String subreferenceText=nextSlash > 0 ? str.substring(currentSlash + sepLen,nextSlash) : str.substring(currentSlash + sepLen);
    final FileReference ref=createFileReference(new TextRange(startInElement + currentSlash + sepLen,startInElement + (nextSlash > 0 ? nextSlash : str.length())),index++,subreferenceText);
    referencesList.add(ref);
    if ((currentSlash=nextSlash) < 0) {
      break;
    }
  }
  return referencesList;
}
