{
  if (tag == null)   return null;
  DomInvocationHandler invocationHandler=getCachedElement(tag);
  if (invocationHandler != null && invocationHandler.isValid()) {
    return invocationHandler;
  }
  final XmlTag parentTag=tag.getParentTag();
  if (parentTag == null) {
    final PsiFile psiFile=tag.getContainingFile();
    return psiFile instanceof XmlFile ? getRootInvocationHandler((XmlFile)psiFile) : null;
  }
  DomInvocationHandler parent=_getDomElement(parentTag);
  if (parent == null)   return null;
  final DynamicGenericInfo info=parent.getGenericInfo();
  final AbstractDomChildrenDescription childDescription=info.findChildrenDescription(parent,tag.getLocalName(),tag.getNamespace(),false,tag.getName());
  if (childDescription == null)   return null;
  childDescription.getValues(parent.getProxy());
  return getCachedElement(tag);
}
