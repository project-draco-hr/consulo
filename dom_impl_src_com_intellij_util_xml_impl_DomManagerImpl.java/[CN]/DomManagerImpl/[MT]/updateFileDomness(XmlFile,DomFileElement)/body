{
  final FileDescriptionCachedValueProvider<DomElement> provider=getOrCreateCachedValueProvider(file);
  final DomFileElementImpl oldElement=provider.getOldValue();
  final boolean wasInModel=oldElement != null && provider.isInModel();
  provider.changed();
  final DomFileElementImpl<DomElement> fileElement=getFileElement(file);
  final boolean isInModel=fileElement != null && provider.getFileDescription().getDomModelDependentFiles(changedRoot).contains(file);
  provider.setInModel(isInModel);
  if (oldElement == null || fileElement == null)   return;
  if (!isInModel && wasInModel)   fireEvent(new ElementChangedEvent(oldElement),true);
  if (isInModel && !wasInModel)   fireEvent(new ElementChangedEvent(fileElement),true);
}
