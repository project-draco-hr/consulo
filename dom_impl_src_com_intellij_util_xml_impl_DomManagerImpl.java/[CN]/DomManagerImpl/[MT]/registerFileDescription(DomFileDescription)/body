{
  final Map<Class<? extends DomElement>,Class<? extends DomElement>> implementations=((DomFileDescription<?>)description).getImplementations();
  for (  final Map.Entry<Class<? extends DomElement>,Class<? extends DomElement>> entry : implementations.entrySet()) {
    registerImplementation((Class)entry.getKey(),entry.getValue());
  }
  myTypeChooserManager.copyFrom(description.getTypeChooserManager());
  final DomElementsAnnotator annotator=description.createAnnotator();
  if (annotator != null) {
    myAnnotationsManager.registerDomElementsAnnotator(annotator,description.getRootElementClass());
  }
  myFileDescriptions.put(description,new THashSet<DomFileElementImpl>());
  registerReferenceProviders(description);
}
