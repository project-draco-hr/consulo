{
synchronized (PsiLock.LOCK) {
    if (myOldResult != null && myFileDescription != null && myFileDescription.isMyFile(myXmlFile)) {
      return myOldResult;
    }
    final XmlFile originalFile=(XmlFile)myXmlFile.getOriginalFile();
    if (originalFile != null) {
      return saveResult(getOrCreateCachedValueProvider(originalFile).getFileDescription(),new Factory<DomFileElementImpl>(){
        public DomFileElementImpl create(){
          return getOrCreateFileElement(myXmlFile,myFileDescription);
        }
      }
);
    }
    return saveResult(ContainerUtil.find(myFileDescriptions,myCondition),new Factory<DomFileElementImpl>(){
      public DomFileElementImpl create(){
        return new DomFileElementImpl(myXmlFile,myFileDescription.getRootElementClass(),myFileDescription.getRootTagName(),DomManagerImpl.this);
      }
    }
);
  }
}
