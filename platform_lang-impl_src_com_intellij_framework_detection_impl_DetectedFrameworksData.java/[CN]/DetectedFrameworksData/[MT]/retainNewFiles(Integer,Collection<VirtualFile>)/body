{
  TIntHashSet set=null;
  try {
    set=myExistentFrameworkFiles.get(detectorId);
  }
 catch (  IOException e) {
    LOG.info(e);
  }
  final ArrayList<VirtualFile> newFiles=new ArrayList<VirtualFile>();
  for (  VirtualFile file : files) {
    final int fileId=FileBasedIndex.getFileId(file);
    if (set == null || !set.contains(fileId)) {
      newFiles.add(file);
    }
  }
  return newFiles;
}
