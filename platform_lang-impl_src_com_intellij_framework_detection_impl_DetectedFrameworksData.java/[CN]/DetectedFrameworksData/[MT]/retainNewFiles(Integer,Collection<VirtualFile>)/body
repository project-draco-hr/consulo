{
  TIntHashSet set;
  try {
    set=myFilesMap.get(detectorId);
  }
 catch (  IOException e) {
    LOG.info(e);
    set=new TIntHashSet();
  }
  final Iterator<VirtualFile> iterator=files.iterator();
  while (iterator.hasNext()) {
    VirtualFile file=iterator.next();
    if (file instanceof VirtualFileWithId) {
      final int fileId=((VirtualFileWithId)file).getId();
      if (set != null && set.contains(fileId)) {
        iterator.remove();
      }
    }
  }
}
