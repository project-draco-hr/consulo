{
  final PsiElement scope=getScope();
  final PsiElement element=getNameElement();
  if (scope == null || element == null)   return new MyReference(null);
  PsiReference psiReference=getReferenceInScope(scope,element);
  if (psiReference != null)   return psiReference;
  if (scope instanceof PsiClass) {
    PsiClass classScope=((PsiClass)scope);
    PsiClass containingClass=classScope.getContainingClass();
    while (containingClass != null) {
      classScope=containingClass;
      psiReference=getReferenceInScope(classScope,element);
      if (psiReference != null)       return psiReference;
      containingClass=classScope.getContainingClass();
    }
  }
  return new MyReference(null);
}
