{
  final XmlElement valueElement=DomUtil.getValueElement(element);
  if (valueElement != null && !isSoftReference(element)) {
    final SmartList<DomElementProblemDescriptor> list=new SmartList<DomElementProblemDescriptor>();
    final PsiReference[] psiReferences=myProvider.getReferencesByElement(valueElement);
    boolean hasBadResolve=false;
    boolean hasDomValueReference=false;
    for (    final PsiReference reference : psiReferences) {
      hasDomValueReference=hasDomValueReference || reference instanceof GenericDomValueReference;
      if (hasBadResolve(element,reference)) {
        hasBadResolve=true;
        list.add(holder.createResolveProblem(element,reference));
      }
    }
    if (!hasBadResolve && !hasDomValueReference && element.getConverter() instanceof ResolvingConverter) {
      final GenericDomValueReference reference=new GenericDomValueReference(element);
      if (hasBadResolve(element,reference)) {
        list.add(holder.createResolveProblem(element,reference));
      }
    }
    if (psiReferences.length == 0 && element.getValue() == null) {
      final String errorMessage=element.getConverter().getErrorMessage(element.getStringValue(),new ConvertContextImpl(DomManagerImpl.getDomInvocationHandler(element)));
      list.add(holder.createProblem(element,errorMessage));
    }
    return list;
  }
  return Collections.emptyList();
}
