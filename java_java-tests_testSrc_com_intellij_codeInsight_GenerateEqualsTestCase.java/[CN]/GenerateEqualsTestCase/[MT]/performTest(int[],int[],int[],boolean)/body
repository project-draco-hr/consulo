{
  CodeStyleSettings settings=CodeStyleSettingsManager.getSettings(getProject()).clone();
  settings.GENERATE_FINAL_LOCALS=true;
  settings.INSERT_OVERRIDE_ANNOTATION=insertOverride;
  CodeStyleSettingsManager.getInstance(getProject()).setTemporarySettings(settings);
  try {
    PsiElement element=getFile().findElementAt(getEditor().getCaretModel().getOffset());
    if (element == null)     return;
    PsiClass aClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
    if (aClass == null)     return;
    PsiField[] fields=aClass.getFields();
    new GenerateEqualsHelper(getProject(),aClass,getIndexed(fields,equals),getIndexed(fields,hashCode),getIndexed(fields,nonNull),false).invoke();
    FileDocumentManager.getInstance().saveAllDocuments();
  }
  finally {
    CodeStyleSettingsManager.getInstance(getProject()).dropTemporarySettings();
  }
}
