{
  final PsiClass myClass=(PsiClass)startElement;
  if (!CodeInsightUtilBase.prepareFileForWrite(myClass.getContainingFile()))   return;
  PsiCodeBlock body;
  if (myClass.isInterface() && (body=myMethodPrototype.getBody()) != null)   body.delete();
  for (  String exception : myExceptions) {
    PsiUtil.addException(myMethodPrototype,exception);
  }
  PsiMethod method=(PsiMethod)myClass.add(myMethodPrototype);
  method=(PsiMethod)method.replace(reformat(project,method));
  if (editor != null && method.getContainingFile() == file) {
    GenerateMembersUtil.positionCaret(editor,method,true);
  }
}
