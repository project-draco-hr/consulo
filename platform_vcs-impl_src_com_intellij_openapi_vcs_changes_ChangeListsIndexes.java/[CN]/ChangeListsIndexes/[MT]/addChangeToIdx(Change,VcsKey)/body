{
  final ContentRevision afterRevision=change.getAfterRevision();
  if (afterRevision != null) {
    add(afterRevision.getFile(),change.getFileStatus(),key);
  }
  final ContentRevision beforeRevision=change.getBeforeRevision();
  if (beforeRevision != null) {
    if (afterRevision != null) {
      if (!Comparing.equal(beforeRevision.getFile(),afterRevision.getFile())) {
        add(beforeRevision.getFile(),FileStatus.DELETED,key);
      }
    }
 else {
      add(beforeRevision.getFile(),change.getFileStatus(),key);
    }
  }
}
