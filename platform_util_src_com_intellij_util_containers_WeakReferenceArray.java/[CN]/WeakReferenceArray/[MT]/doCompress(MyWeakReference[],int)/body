{
  myCorpseCounter=0;
  int validIndex=0;
  int newIndex=-1;
  boolean trackingDone=false;
  for (int i=nextValid(-1); i < size(); i=nextValid(i)) {
    if (!trackingDone) {
      if (i == trackIndex) {
        newIndex=validIndex;
        trackingDone=true;
      }
      if (i > trackIndex) {
        newIndex=-validIndex - 1;
        trackingDone=true;
      }
    }
    MyWeakReference aliveReference=MyWeakReference.getFrom(myReferences,i);
    if (validIndex < i) {
      performRemoveAt(validIndex);
    }
 else {
      LOG.assertTrue(validIndex == i);
    }
    aliveReference.moveTo(myReferences,references,validIndex);
    validIndex++;
  }
  if (newIndex == -1)   newIndex=-validIndex - 1;
  for (int i=validIndex; i < mySize; i++) {
    performRemoveAt(i);
  }
  for (int i=validIndex; i < myReferences.length; i++) {
    LOG.assertTrue(myReferences[i] == null);
  }
  flushQueue();
  mySize=validIndex;
  return newIndex;
}
