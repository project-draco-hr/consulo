{
  registrar.extend(psiElement(),new CompletionAdvertiser(){
    public String advertise(    @NotNull final CompletionParameters parameters,    final ProcessingContext context){
      if (shouldShowFeature(parameters,CodeCompletionFeatures.EDITING_COMPLETION_REPLACE)) {
        final String shortcut=getShortcut(IdeActions.ACTION_CHOOSE_LOOKUP_ITEM_REPLACE);
        if (shortcut != null) {
          return LangBundle.message("completion.replace.ad",shortcut);
        }
      }
      final Random random=new Random();
      if (random.nextInt(5) < 2 && shouldShowFeature(parameters,CodeCompletionFeatures.EDITING_COMPLETION_FINISH_BY_DOT_ETC)) {
        return LangBundle.message("completion.dot.etc.ad");
      }
      if (random.nextInt(5) < 2 && shouldShowFeature(parameters,CodeCompletionFeatures.EDITING_COMPLETION_FINISH_BY_SMART_ENTER)) {
        final String shortcut=getShortcut(IdeActions.ACTION_CHOOSE_LOOKUP_ITEM_COMPLETE_STATEMENT);
        if (shortcut != null) {
          return LangBundle.message("completion.smart.enter.ad",shortcut);
        }
      }
      if (random.nextInt(5) < 2 && (shouldShowFeature(parameters,ShowJavaDocInfoAction.CODEASSISTS_QUICKJAVADOC_FEATURE) || shouldShowFeature(parameters,ShowJavaDocInfoAction.CODEASSISTS_QUICKJAVADOC_LOOKUP_FEATURE))) {
        final String shortcut=getShortcut(IdeActions.ACTION_QUICK_JAVADOC);
        if (shortcut != null) {
          return LangBundle.message("completion.quick.javadoc.ad",shortcut);
        }
      }
      if (shouldShowFeature(parameters,ShowImplementationsAction.CODEASSISTS_QUICKDEFINITION_FEATURE) || shouldShowFeature(parameters,ShowImplementationsAction.CODEASSISTS_QUICKDEFINITION_LOOKUP_FEATURE)) {
        final String shortcut=getShortcut(IdeActions.ACTION_QUICK_IMPLEMENTATIONS);
        if (shortcut != null) {
          return LangBundle.message("completion.quick.implementations.ad",shortcut);
        }
      }
      if (Calendar.getInstance().get(Calendar.MONTH) == 3 && Calendar.getInstance().get(Calendar.DATE) == 1 || CompletionData.findPrefixStatic(parameters.getPosition(),parameters.getOffset()).length() > 42) {
        final int i=random.nextInt(data.length * 5);
        if (i < data.length) {
          return new String(data[i]);
        }
      }
      return null;
    }
    public String handleEmptyLookup(    @NotNull final CompletionParameters parameters,    final ProcessingContext context){
      return LangBundle.message("completion.no.suggestions");
    }
  }
);
}
