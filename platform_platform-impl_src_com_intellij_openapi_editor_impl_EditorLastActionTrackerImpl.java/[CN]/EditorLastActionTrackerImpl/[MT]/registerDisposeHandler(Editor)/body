{
  if (!(editor instanceof EditorImpl)) {
    return;
  }
  EditorImpl editorImpl=(EditorImpl)editor;
  if (editorImpl.replace(DISPOSABLE_SET,null,Boolean.TRUE)) {
    Disposer.register(editorImpl.getDisposable(),new Disposable(){
      @Override public void dispose(){
        if (myCurrentEditor == editor) {
          myCurrentEditor=null;
        }
        if (myLastEditor == editor) {
          myLastEditor=null;
        }
      }
    }
);
  }
}
