{
  Annotator annotator=getAnnotator();
  if (annotator == myLastAnnotator && myCachedAnnotators != null) {
    return myCachedAnnotators;
  }
  myLastAnnotator=annotator;
  myCachedAnnotators=new SmartList<Annotator>();
  if (annotator != null) {
    myCachedAnnotators.add(annotator);
  }
  if (myInjectedAnnotators != null) {
    myCachedAnnotators.addAll(myInjectedAnnotators);
  }
  final AnnotatorEP[] eps=Extensions.getExtensions(AnnotatorEP.EP_NAME);
  for (  AnnotatorEP ep : eps) {
    if (ep.language.equals(getID())) {
      try {
        Annotator epAnnotator=ep.getAnnotator();
        if (epAnnotator == null) {
          PluginDescriptor descriptor=ep.getPluginDescriptor();
          epAnnotator=(Annotator)Class.forName(ep.annotatorClass,true,descriptor == null ? getClass().getClassLoader() : descriptor.getPluginClassLoader()).newInstance();
          ep.setAnnotator(epAnnotator);
        }
        myCachedAnnotators.add(epAnnotator);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
  return myCachedAnnotators;
}
