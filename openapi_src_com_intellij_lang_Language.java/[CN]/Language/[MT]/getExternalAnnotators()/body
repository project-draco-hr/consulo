{
  ExternalAnnotator annotator=getExternalAnnotator();
  if (annotator == myLastExternalAnnotator && myCachedExternalAnnotators != null) {
    return myCachedExternalAnnotators;
  }
  myLastExternalAnnotator=annotator;
  int injectCount=myInjectedExternalAnnotators == null ? 0 : myInjectedExternalAnnotators.size();
  if (annotator == null && injectCount == 0) {
    myCachedExternalAnnotators=ExternalAnnotator.EMPTY_LIST;
  }
 else {
    myCachedExternalAnnotators=new ArrayList<ExternalAnnotator>();
    if (annotator != null) {
      myCachedExternalAnnotators.add(annotator);
    }
    if (myInjectedExternalAnnotators != null) {
      myCachedExternalAnnotators.addAll(myInjectedExternalAnnotators);
    }
  }
  return myCachedExternalAnnotators;
}
