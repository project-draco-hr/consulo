{
  final Project project=env.getProject();
  if (project == null) {
    return;
  }
  final RunProfileState state=env.getState(executor);
  if (state == null) {
    return;
  }
  RunnerSettings runnerSettings=env.getRunnerSettings();
  if (runnerSettings != null) {
    RunManager.getInstance(project).refreshUsagesList(runnerSettings.getRunProfile());
  }
  ExecutionManager.getInstance(project).startRunProfile(new RunProfileStarter(){
    @Override public RunContentDescriptor execute(    @NotNull Project project,    @NotNull Executor executor,    @NotNull RunProfileState state,    @Nullable RunContentDescriptor contentToReuse,    @NotNull ExecutionEnvironment env) throws ExecutionException {
      final RunContentDescriptor descriptor=doExecute(project,executor,state,contentToReuse,env);
      if (descriptor != null) {
        descriptor.setExecutionId(env.getExecutionId());
      }
      if (callback != null)       callback.processStarted(descriptor);
      return descriptor;
    }
  }
,state,project,executor,env);
}
