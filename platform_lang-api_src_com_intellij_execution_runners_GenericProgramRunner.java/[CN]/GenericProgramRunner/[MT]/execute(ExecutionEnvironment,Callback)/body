{
  final Project project=env.getProject();
  final RunProfileState state=env.getState();
  if (state == null) {
    return;
  }
  RunManager.getInstance(project).refreshUsagesList(env.getRunProfile());
  ExecutionManager.getInstance(project).startRunProfile(new RunProfileStarter(){
    @Override public RunContentDescriptor execute(    @NotNull Project project,    @NotNull Executor executor,    @NotNull RunProfileState state,    @Nullable RunContentDescriptor contentToReuse,    @NotNull ExecutionEnvironment env) throws ExecutionException {
      final RunContentDescriptor descriptor=doExecute(project,state,contentToReuse,env);
      if (descriptor != null) {
        descriptor.setExecutionId(env.getExecutionId());
      }
      if (callback != null)       callback.processStarted(descriptor);
      return descriptor;
    }
  }
,state,env);
}
