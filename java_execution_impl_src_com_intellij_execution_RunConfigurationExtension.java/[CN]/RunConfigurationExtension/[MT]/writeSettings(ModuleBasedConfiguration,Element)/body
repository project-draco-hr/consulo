{
  for (  RunConfigurationExtension extension : Extensions.getExtensions(EP_NAME)) {
    Element el=new Element("extension");
    el.setAttribute("name",extension.getName());
    extension.writeExternal(runConfiguration,el);
    element.addContent(el);
  }
  List<Element> elements=runConfiguration.getCopyableUserData(RUN_EXTENSIONS);
  if (elements != null && !elements.isEmpty()) {
    final List<String> foundNames=new ArrayList<String>();
    final List children=element.getChildren("extension");
    for (    Object o : children) {
      foundNames.add(((Element)o).getAttributeValue("name"));
    }
    int idx=children.isEmpty() ? element.getContentSize() : element.indexOf((Content)children.get(0));
    for (    Element el : elements) {
      final String name=el.getAttributeValue("name");
      int i=foundNames.indexOf(name);
      if (i == -1) {
        element.addContent(idx,(Content)el.clone());
      }
      idx++;
    }
  }
}
