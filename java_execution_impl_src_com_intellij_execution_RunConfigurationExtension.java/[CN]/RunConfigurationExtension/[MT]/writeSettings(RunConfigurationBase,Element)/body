{
  final TreeMap<String,Element> map=new TreeMap<String,Element>();
  final List<Element> elements=runConfiguration.getCopyableUserData(RUN_EXTENSIONS);
  if (elements != null) {
    for (    Element el : elements) {
      final String name=el.getAttributeValue("name");
      map.put(name,(Element)el.clone());
    }
  }
  for (  RunConfigurationExtension extension : Extensions.getExtensions(EP_NAME)) {
    Element el=new Element("extension");
    el.setAttribute("name",extension.getSerializationId());
    try {
      extension.writeExternal(runConfiguration,el);
    }
 catch (    WriteExternalException e) {
      map.remove(extension.getSerializationId());
      continue;
    }
    map.put(extension.getSerializationId(),el);
  }
  for (  Element val : map.values()) {
    element.addContent(val);
  }
}
