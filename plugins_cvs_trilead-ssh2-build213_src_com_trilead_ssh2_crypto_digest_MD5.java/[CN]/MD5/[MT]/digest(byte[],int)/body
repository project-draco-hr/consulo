{
  byte[] bits=new byte[8];
  encode(bits,0,(int)(count << 3));
  encode(bits,4,(int)(count >> 29));
  int idx=(int)count & 0x3f;
  int padLen=(idx < 56) ? (56 - idx) : (120 - idx);
  update(padding,0,padLen);
  update(bits,0,8);
  encode(dst,pos,state0);
  encode(dst,pos + 4,state1);
  encode(dst,pos + 8,state2);
  encode(dst,pos + 12,state3);
  reset();
}
