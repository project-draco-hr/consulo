{
  MavenCustomRepositoryHelper helper=new MavenCustomRepositoryHelper(myDir,"local1");
  setRepositoryPath(helper.getTestDataPath("local1"));
  importProject("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>junit</groupId>"+ "    <artifactId>junit</artifactId>"+ "    <version>4.0</version>"+ "  </dependency>"+ "</dependencies>");
  removeFromLocalRepository("junit");
  resolveProject();
  File jarFile=new File(getRepositoryFile(),"junit/junit/4.0/junit-4.0.jar");
  assertTrue(jarFile.exists());
  setCustomSettingsFile("<settings>" + "  <proxies>" + "   <proxy>"+ "      <id>my</id>"+ "      <active>true</active>"+ "      <protocol>http</protocol>"+ "      <username>coox</username>"+ "      <password>invalid</password>"+ "      <host>is.intellij.net</host>"+ "      <port>3128</port>"+ "    </proxy>"+ "  </proxies>"+ "</settings>");
  removeFromLocalRepository("junit");
  assertFalse(jarFile.exists());
  try {
    resolveProject();
  }
  finally {
    System.clearProperty("http.proxyHost");
    System.clearProperty("http.proxyPort");
  }
  assertFalse(jarFile.exists());
  setCustomSettingsFile("<settings>" + "</settings>");
  resolveProject();
  assertTrue(jarFile.exists());
}
