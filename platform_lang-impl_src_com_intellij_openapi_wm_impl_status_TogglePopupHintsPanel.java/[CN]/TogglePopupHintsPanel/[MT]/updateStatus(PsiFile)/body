{
  if (isStateChangeable(file)) {
    if (PowerSaveMode.isEnabled()) {
      myCurrentIcon=EMPTY_ICON;
      myToolTipText="Code analysis is disabled in power save mode. ";
    }
 else     if (HighlightLevelUtil.shouldInspect(file)) {
      myCurrentIcon=INSPECTIONS_ICON;
      myToolTipText="Current inspection profile: " + InspectionProjectProfileManager.getInstance(file.getProject()).getInspectionProfile().getName() + ". ";
    }
 else     if (HighlightLevelUtil.shouldHighlight(file)) {
      myCurrentIcon=SYNTAX_ONLY_ICON;
      myToolTipText="Highlighting level is: Syntax. ";
    }
 else {
      myCurrentIcon=INSPECTIONS_OFF_ICON;
      myToolTipText="Inspections are off. ";
    }
    myToolTipText+=UIBundle.message("popup.hints.panel.click.to.configure.highlighting.tooltip.text");
  }
 else {
    myCurrentIcon=EMPTY_ICON;
    myToolTipText=null;
  }
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    myStatusBar.updateWidget(ID());
  }
}
