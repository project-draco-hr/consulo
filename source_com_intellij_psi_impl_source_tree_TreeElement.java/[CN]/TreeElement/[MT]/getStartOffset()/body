{
synchronized (PsiLock.LOCK) {
    final CompositeElement parent=getTreeParent();
    if (parent == null)     return 0;
    int offset=parent.getStartOffset();
    final CharTable table=SharedImplUtil.findCharTableByTree(this);
    for (TreeElement element1=parent.firstChild; element1 != this; element1=element1.getTreeNext()) {
      offset+=element1.getTextLength(table);
    }
    return offset;
  }
}
