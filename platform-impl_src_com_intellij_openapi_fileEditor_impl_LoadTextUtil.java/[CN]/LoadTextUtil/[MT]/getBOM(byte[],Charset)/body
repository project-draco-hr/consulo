{
  if (Patches.SUN_BUG_ID_4508058) {
    if (charset != null && charset.name().contains(CharsetToolkit.UTF8) && CharsetToolkit.hasUTF8Bom(content)) {
      return CharsetToolkit.UTF8_BOM;
    }
  }
  if (CharsetToolkit.hasUTF16LEBom(content)) {
    return CharsetToolkit.UTF16LE_BOM;
  }
  if (CharsetToolkit.hasUTF16BEBom(content)) {
    return CharsetToolkit.UTF16BE_BOM;
  }
  return ArrayUtil.EMPTY_BYTE_ARRAY;
}
