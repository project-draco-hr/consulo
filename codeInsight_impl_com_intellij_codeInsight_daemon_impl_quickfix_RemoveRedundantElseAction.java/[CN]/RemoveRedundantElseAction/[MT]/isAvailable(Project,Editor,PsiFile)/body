{
  PsiElement elementAt=file.findElementAt(editor.getCaretModel().getOffset());
  if (elementAt instanceof PsiKeyword && elementAt.getParent() instanceof PsiIfStatement && PsiKeyword.ELSE.equals(elementAt.getText())) {
    PsiIfStatement ifStatement=(PsiIfStatement)elementAt.getParent();
    if (ifStatement.getElseBranch() == null)     return false;
    if (ifStatement.getThenBranch() == null)     return false;
    PsiElement block=PsiTreeUtil.getParentOfType(ifStatement,PsiCodeBlock.class);
    if (block != null) {
      try {
        ControlFlow controlFlow=ControlFlowFactory.getInstance(project).getControlFlow(block,LocalsOrMyInstanceFieldsControlFlowPolicy.getInstance());
        int startOffset=controlFlow.getStartOffset(ifStatement.getThenBranch());
        int endOffset=controlFlow.getEndOffset(ifStatement.getThenBranch());
        return !ControlFlowUtil.canCompleteNormally(controlFlow,startOffset,endOffset);
      }
 catch (      AnalysisCanceledException e) {
        return false;
      }
    }
  }
  return false;
}
