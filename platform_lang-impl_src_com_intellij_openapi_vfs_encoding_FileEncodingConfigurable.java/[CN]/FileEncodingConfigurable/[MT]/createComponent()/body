{
  myAction=new ChooseFileEncodingAction(null){
    @Override public void update(    final AnActionEvent e){
      getTemplatePresentation().setEnabled(true);
      getTemplatePresentation().setText(mySelectedCharsetForPropertiesFiles == null ? SYSTEM_DEFAULT : mySelectedCharsetForPropertiesFiles.displayName());
    }
    @Override protected void chosen(    final VirtualFile virtualFile,    final Charset charset){
      mySelectedCharsetForPropertiesFiles=charset == NO_ENCODING ? null : charset;
      update((AnActionEvent)null);
    }
  }
;
  myPropertiesFilesEncodingCombo.removeAll();
  Presentation templatePresentation=myAction.getTemplatePresentation();
  myPropertiesFilesEncodingCombo.add(myAction.createCustomComponent(templatePresentation),BorderLayout.CENTER);
  myTreeView=new FileTreeTable(myProject);
  myTreePanel.setViewportView(myTreeView);
  myTreeView.getEmptyText().setText(IdeBundle.message("file.encodings.not.configured"));
  return myPanel;
}
