{
  myAction=new ChooseFileEncodingAction(null){
    public void update(    final AnActionEvent e){
      super.update(e);
      getTemplatePresentation().setText(mySelectedCharsetForPropertiesFiles == null ? SYSTEM_DEFAULT : mySelectedCharsetForPropertiesFiles.displayName());
    }
    protected void chosen(    final VirtualFile virtualFile,    final Charset charset){
      mySelectedCharsetForPropertiesFiles=charset == NO_ENCODING ? null : charset;
      update(new AnActionEvent(null,DataManager.getInstance().getDataContext(),"",myAction.getTemplatePresentation(),ActionManager.getInstance(),0));
    }
  }
;
  myPropertiesFilesEncodingCombo.removeAll();
  Presentation templatePresentation=myAction.getTemplatePresentation();
  myPropertiesFilesEncodingCombo.add(myAction.createCustomComponent(templatePresentation),BorderLayout.CENTER);
  myTreeView=new FileTreeTable(myProject);
  myTreePanel.setViewportView(myTreeView);
  myTreeView.getEmptyText().setText(IdeBundle.message("file.encodings.not.configured"));
  return myPanel;
}
