{
  Map<VirtualFile,Charset> result=myTreeView.getValues();
  EncodingProjectManager encodingManager=EncodingProjectManager.getInstance(myProject);
  encodingManager.setMapping(result);
  encodingManager.setDefaultCharsetForPropertiesFiles(null,mySelectedCharsetForPropertiesFiles.get());
  encodingManager.setNative2AsciiForPropertiesFiles(null,myTransparentNativeToAsciiCheckBox.isSelected());
  encodingManager.setUseUTFGuessing(null,myAutodetectUTFEncodedFilesCheckBox.isSelected());
  Charset ideCharset=mySelectedIdeCharset.get();
  EncodingManager.getInstance().setDefaultCharsetName(ideCharset == null ? "" : ideCharset.name());
  Charset projectCharset=mySelectedProjectCharset.get();
  EncodingProjectManager.getInstance(myProject).setEncoding(null,projectCharset);
}
