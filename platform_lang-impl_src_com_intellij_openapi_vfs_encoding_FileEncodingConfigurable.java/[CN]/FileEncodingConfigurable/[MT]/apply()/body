{
  Charset projectCharset=mySelectedProjectCharset.get();
  Map<VirtualFile,Charset> result=myTreeView.getValues();
  if (projectCharset == null) {
    result.remove(null);
  }
 else {
    result.put(null,projectCharset);
  }
  EncodingProjectManager encodingManager=EncodingProjectManager.getInstance(myProject);
  encodingManager.setMapping(result);
  encodingManager.setDefaultCharsetForPropertiesFiles(null,mySelectedCharsetForPropertiesFiles.get());
  encodingManager.setNative2AsciiForPropertiesFiles(null,myTransparentNativeToAsciiCheckBox.isSelected());
  encodingManager.setUseUTFGuessing(null,myAutodetectUTFEncodedFilesCheckBox.isSelected());
  Charset ideCharset=mySelectedIdeCharset.get();
  EncodingManager.getInstance().setDefaultCharsetName(ideCharset == null ? "" : ideCharset.name());
}
