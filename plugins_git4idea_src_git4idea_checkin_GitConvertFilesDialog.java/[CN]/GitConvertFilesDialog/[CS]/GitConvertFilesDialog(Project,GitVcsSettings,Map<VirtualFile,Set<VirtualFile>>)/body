{
  super(project,true);
  ArrayList<VirtualFile> roots=new ArrayList<VirtualFile>(filesToShow.keySet());
  Collections.sort(roots,GitUtil.VIRTUAL_FILE_COMPARATOR);
  for (  VirtualFile root : roots) {
    CheckedTreeNode vcsRoot=new CheckedTreeNode(root);
    myRootNode.add(vcsRoot);
    ArrayList<VirtualFile> files=new ArrayList<VirtualFile>(filesToShow.get(root));
    Collections.sort(files,GitUtil.VIRTUAL_FILE_COMPARATOR);
    for (    VirtualFile file : files) {
      vcsRoot.add(new CheckedTreeNode(file));
    }
  }
  myDoNotConvertFilesCheckBox.setSelected(settings.LINE_SEPARATORS_CONVERSION == GitVcsSettings.ConversionPolicy.NONE);
  updateFields();
  TreeUtil.expandAll(myFilesToConvert);
  myDoNotConvertFilesCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      updateFields();
    }
  }
);
  setTitle(GitBundle.getString("crlf.convert.title"));
  init();
}
