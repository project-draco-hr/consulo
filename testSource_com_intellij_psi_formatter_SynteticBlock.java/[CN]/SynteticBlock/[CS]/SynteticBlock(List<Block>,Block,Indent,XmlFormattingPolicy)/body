{
  myEndTreeNode=((AbstractXmlBlock)subBlocks.get(subBlocks.size() - 1)).getTreeNode();
  myStartTreeNode=((AbstractXmlBlock)subBlocks.get(0)).getTreeNode();
  myParent=parent;
  myTag=((AbstractXmlBlock)myParent).getTag();
  if (!isTagDescription() && (policy.getShouldKeepWhiteSpaces() || policy.keepWhiteSpacesInsideTag(myTag))) {
    mySubBlocks=EMPTY;
  }
 else {
    mySubBlocks=subBlocks;
  }
  myIndent=indent;
  myXmlFormattingPolicy=policy;
  myTextRange=new TextRange(subBlocks.get(0).getTextRange().getStartOffset(),subBlocks.get(subBlocks.size() - 1).getTextRange().getEndOffset());
  for (Iterator<Block> iterator=subBlocks.iterator(); iterator.hasNext(); ) {
    AbstractXmlBlock abstractXmlBlock=(AbstractXmlBlock)iterator.next();
    abstractXmlBlock.setParent(this);
  }
}
