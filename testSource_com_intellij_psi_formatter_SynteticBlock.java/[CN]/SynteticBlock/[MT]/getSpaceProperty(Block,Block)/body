{
  final IElementType type1=((AbstractXmlBlock)child1).myNode.getElementType();
  final IElementType type2=((AbstractXmlBlock)child2).myNode.getElementType();
  if (isXmlTagName(type1,type2)) {
    final int spaces=myXmlFormattingPolicy.getShouldAddSpaceAroundTagName() ? 1 : 0;
    return getFormatter().createSpaceProperty(spaces,spaces,0,getMaxLine());
  }
 else   if (type2 == ElementType.XML_ATTRIBUTE) {
    return getFormatter().createSpaceProperty(1,1,0,getMaxLine());
  }
 else   if (((AbstractXmlBlock)child1).isTextElement() && ((AbstractXmlBlock)child2).isTextElement()) {
    return getFormatter().createSafeSpace();
  }
 else   if (type2 == getTagType() && (type1 == ElementType.XML_TEXT || type1 == getTagType()) && ((AbstractXmlBlock)child2).insertLineBreakBeforeTag()) {
    return getFormatter().createSpaceProperty(0,Integer.MAX_VALUE,2,getMaxLine());
  }
 else   if (type2 == getTagType() && (type1 == ElementType.XML_TEXT || type1 == getTagType()) && ((AbstractXmlBlock)child2).removeLineBreakBeforeTag()) {
    return getFormatter().createSpaceProperty(0,Integer.MAX_VALUE,0,0);
  }
  if (type1 == getTagType() && type2 == ElementType.XML_TEXT) {
    return getFormatter().createSpaceProperty(0,0,1,getMaxLine());
  }
  return getFormatter().createSpaceProperty(0,Integer.MAX_VALUE,0,getMaxLine());
}
