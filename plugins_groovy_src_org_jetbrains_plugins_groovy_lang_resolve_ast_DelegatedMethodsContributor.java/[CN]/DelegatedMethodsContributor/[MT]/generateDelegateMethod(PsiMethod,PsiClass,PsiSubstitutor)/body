{
  final LightMethodBuilder builder=new LightMethodBuilder(clazz.getManager(),GroovyFileType.GROOVY_LANGUAGE,method.getName());
  builder.setContainingClass(clazz);
  builder.setMethodReturnType(substitutor.substitute(method.getReturnType()));
  builder.setNavigationElement(method);
  builder.addModifier(PsiModifier.PUBLIC);
  final PsiParameter[] originalParameters=method.getParameterList().getParameters();
  final PsiClass containingClass=method.getContainingClass();
  boolean isRaw=containingClass != null && PsiUtil.isRawSubstitutor(containingClass,substitutor);
  if (isRaw) {
    PsiTypeParameter[] methodTypeParameters=method.getTypeParameters();
    substitutor=JavaPsiFacade.getInstance(method.getProject()).getElementFactory().createRawSubstitutor(substitutor,methodTypeParameters);
  }
  for (int i=0, originalParametersLength=originalParameters.length; i < originalParametersLength; i++) {
    PsiParameter originalParameter=originalParameters[i];
    PsiType type;
    if (isRaw) {
      type=TypeConversionUtil.erasure(substitutor.substitute(originalParameter.getType()));
    }
 else {
      type=substitutor.substitute(originalParameter.getType());
    }
    if (type == null) {
      type=PsiType.getJavaLangObject(clazz.getManager(),clazz.getResolveScope());
    }
    builder.addParameter(StringUtil.notNullize(originalParameter.getName(),"p" + i),type);
  }
  builder.setBaseIcon(GroovyIcons.METHOD);
  return builder;
}
