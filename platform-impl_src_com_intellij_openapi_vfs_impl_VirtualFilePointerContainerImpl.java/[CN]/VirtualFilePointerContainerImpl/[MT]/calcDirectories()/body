{
  if (myList.isEmpty())   return VirtualFile.EMPTY_ARRAY;
  final ArrayList<VirtualFile> result=new ArrayList<VirtualFile>();
  for (  VirtualFilePointer smartVirtualFilePointer : myList) {
    final VirtualFile file=smartVirtualFilePointer.getFile();
    if (file != null && file.isDirectory()) {
      LOG.assertTrue(file.isValid());
      result.add(file);
    }
  }
  return result.isEmpty() ? VirtualFile.EMPTY_ARRAY : result.toArray(new VirtualFile[result.size()]);
}
