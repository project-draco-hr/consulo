{
  final DfaValueFactory factory=runner.getFactory();
  DfaValue dfaExpr=factory.create(instruction.getCasted());
  if (dfaExpr != null) {
    DfaTypeValue dfaType=factory.getTypeFactory().create(instruction.getCastTo());
    DfaRelationValue dfaInstanceof=factory.getRelationFactory().create(dfaExpr,dfaType,JavaTokenType.INSTANCEOF_KEYWORD,false);
    if (dfaInstanceof != null && !memState.applyInstanceofOrNull(dfaInstanceof)) {
      onInstructionProducesCCE(instruction,runner);
    }
  }
  if (instruction.getCastTo() instanceof PsiPrimitiveType) {
    memState.push(runner.getFactory().getBoxedFactory().createUnboxed(memState.pop()));
  }
  return nextInstruction(instruction,runner,memState);
}
