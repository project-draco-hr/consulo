{
synchronized (myMonitor) {
    final ArrayList<VcsDirtyScope> scopesList=new ArrayList<VcsDirtyScope>(myScopes.values());
    final VcsInvalidated result=new VcsInvalidated(scopesList,myEverythingDirty);
    myEverythingDirty=false;
    myScopes.clear();
    return result;
  }
}
