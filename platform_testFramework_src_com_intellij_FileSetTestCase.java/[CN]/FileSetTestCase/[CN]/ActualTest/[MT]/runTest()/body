{
  String content=new String(FileUtil.loadFileText(myTestFile));
  assertNotNull(content);
  List<String> input=new ArrayList<String>();
  int separatorIndex;
  content=StringUtil.replace(content,"\r","");
  while ((separatorIndex=content.indexOf("---")) >= 0) {
    input.add(content.substring(0,separatorIndex));
    content=content.substring(separatorIndex);
    while (StringUtil.startsWithChar(content,'-') || StringUtil.startsWithChar(content,'\n'))     content=content.substring(1);
  }
  String result=content;
  assertTrue("No data found in source file",input.size() > 0);
  while (StringUtil.startsWithChar(result,'-') || StringUtil.startsWithChar(result,'\n') || StringUtil.startsWithChar(result,'\r')) {
    result=result.substring(1);
  }
  final String transformed;
  FileSetTestCase.this.myProject=getProject();
  String testName=myTestFile.getName();
  final int dotIdx=testName.indexOf('.');
  if (dotIdx >= 0) {
    testName=testName.substring(0,dotIdx);
  }
  transformed=StringUtil.replace(transform(testName,ArrayUtil.toStringArray(input)),"\r","");
  result=StringUtil.replace(result,"\r","");
  assertEquals(result.trim(),transformed.trim());
}
