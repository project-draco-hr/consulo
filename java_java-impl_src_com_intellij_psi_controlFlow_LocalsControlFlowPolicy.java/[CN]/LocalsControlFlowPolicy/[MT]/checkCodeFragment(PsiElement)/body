{
  PsiElement codeFragment=ControlFlowUtil.findCodeFragment(refElement);
  if (refElement instanceof PsiParameter) {
    final PsiElement declarationScope=((PsiParameter)refElement).getDeclarationScope();
    if (declarationScope instanceof PsiMethod) {
      codeFragment=((PsiMethod)declarationScope).getBody();
    }
 else     if (declarationScope instanceof PsiLambdaExpression) {
      codeFragment=((PsiLambdaExpression)declarationScope).getBody();
    }
  }
  if (codeFragment == null)   return null;
  if (myCodeFragment.getContainingFile() == codeFragment.getContainingFile() && !myCodeFragment.equals(codeFragment)) {
    return null;
  }
  return (PsiVariable)refElement;
}
