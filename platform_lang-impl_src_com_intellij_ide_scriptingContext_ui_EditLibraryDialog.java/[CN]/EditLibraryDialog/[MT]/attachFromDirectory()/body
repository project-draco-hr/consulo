{
  FileChooserDescriptor chooserDescriptor=new FileChooserDescriptor(false,true,false,false,false,false);
  chooserDescriptor.setTitle("Select a directory to attach files from");
  VirtualFile[] files=FileChooser.chooseFiles(myProject,chooserDescriptor);
  if (files.length == 1 && files[0] != null) {
    VirtualFile chosenDir=files[0];
    if (chosenDir.isDirectory() && chosenDir.isValid()) {
      if (myLibName.getText().isEmpty())       myLibName.setText(chosenDir.getName());
      for (      VirtualFile file : chosenDir.getChildren()) {
        if (file.isValid() && !file.isDirectory() && myProvider.acceptsExtension(file.getExtension())) {
          myFileTableModel.addFile(file);
        }
      }
    }
  }
}
