{
  for (  VirtualFile file : dir.getChildren()) {
    if (file.isValid()) {
      if (file.isDirectory()) {
        addRecursively(file);
      }
 else {
        if (myProvider.acceptsExtension(file.getExtension())) {
          addSingleFile(file,false);
        }
      }
    }
  }
}
