def requirecap(self, name, purpose):
    'raise an exception if the given capability is not present'
    if (not self.capable(name)):
        raise error.CapabilityError((_('cannot %s; remote repository does not support the %r capability') % (purpose, name)))
