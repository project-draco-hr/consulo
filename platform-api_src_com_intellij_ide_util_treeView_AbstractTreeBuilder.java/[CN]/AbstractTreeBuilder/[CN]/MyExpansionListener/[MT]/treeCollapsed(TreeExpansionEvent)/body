{
  TreePath path=e.getPath();
  final DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
  if (isSelectionInside(node)) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        if (myDisposed)         return;
        addSelectionPath(new TreePath(myTreeModel.getPathToRoot(node)));
      }
    }
);
  }
  if (!(node.getUserObject() instanceof NodeDescriptor))   return;
  NodeDescriptor descriptor=(NodeDescriptor)node.getUserObject();
  if (isDisposeOnCollapsing(descriptor)) {
    removeChildren(node);
    addLoadingNode(node);
    if (node.equals(getRootNode())) {
      addSelectionPath(new TreePath(getRootNode().getPath()));
    }
 else {
      myTreeModel.reload(node);
    }
  }
}
