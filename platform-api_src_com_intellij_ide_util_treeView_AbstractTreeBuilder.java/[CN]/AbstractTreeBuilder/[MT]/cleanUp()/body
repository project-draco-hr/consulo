{
  if (myDisposed)   return;
  final Object[] toSelect=addPaths(myTree.getSelectionPaths());
  final Object[] toExpand=addPaths(myTree.getExpandedDescendants(new TreePath(myTreeModel.getRoot())));
  myTree.collapsePath(new TreePath(myTree.getModel().getRoot()));
  getRootNode().removeAllChildren();
  myRootNodeWasInitialized=false;
  myBackgroundableNodeActions.clear();
  myElementToNodeMap.clear();
  myDeferredSelections.clear();
  myDeferredExpansions.clear();
  myLoadingParents.clear();
  myUnbuiltNodes.clear();
  myUpdateFromRootRequested=true;
  if (myWorker != null) {
    Disposer.dispose(myWorker);
    myWorker=null;
  }
  myTree.invalidate();
  select(toSelect,new Runnable(){
    public void run(){
      for (      Object each : toExpand) {
        expand(each,null);
      }
    }
  }
);
}
