{
  final DomElement parent=t.getParent();
  if (parent == null) {
    LOG.assertTrue(false,"Parent null: " + t);
  }
  if (parent instanceof DomFileElementImpl) {
    final DomFileElementImpl fileElement=(DomFileElementImpl)parent;
    return new RootAnchor<T>(fileElement.getFile(),fileElement.getRootElementClass());
  }
  final DomAnchorImpl<DomElement> parentAnchor=createAnchor(parent);
  final String name=t.getGenericInfo().getElementName(t);
  final AbstractDomChildrenDescription description=t.getChildDescription();
  if (name != null) {
    return new NamedAnchor<T>(parentAnchor,description,name);
  }
  final List<? extends DomElement> values=description.getValues(parent);
  final int index=values.indexOf(t);
  if (index < 0) {
    LOG.assertTrue(false,"Index<0: description=" + description + "\nparent="+ parent+ "\nt="+ t+ "\nvalues="+ values);
  }
  return new IndexedAnchor<T>(parentAnchor,description,index);
}
