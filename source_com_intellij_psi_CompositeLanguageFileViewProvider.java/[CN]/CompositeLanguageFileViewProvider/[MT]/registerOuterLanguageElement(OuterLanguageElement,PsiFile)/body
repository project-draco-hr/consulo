{
  Set<WeakReference<OuterLanguageElement>> outerLanguageElements=myOuterLanguageElements.get(root);
  if (outerLanguageElements == null) {
    outerLanguageElements=new TreeSet<WeakReference<OuterLanguageElement>>(new Comparator<WeakReference<OuterLanguageElement>>(){
      public int compare(      final WeakReference<OuterLanguageElement> o1,      final WeakReference<OuterLanguageElement> o2){
        final OuterLanguageElement languageElement1=o1.get();
        final OuterLanguageElement languageElement2=o2.get();
        if (languageElement1 == null && languageElement2 == null)         return 0;
        if (languageElement1 == null)         return -1;
        if (languageElement1.equals(languageElement2))         return 0;
        if (languageElement2 == null)         return 1;
        final int result=languageElement1.getTextRange().getStartOffset() - languageElement2.getTextRange().getStartOffset();
        return result != 0 ? result : 1;
      }
    }
);
    myOuterLanguageElements.put(root,outerLanguageElements);
  }
  outerLanguageElements.add(new WeakReference<OuterLanguageElement>(element));
}
