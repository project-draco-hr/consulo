{
  final TextRange textRange=new TextRange(Math.min(prev.getTextRange().getStartOffset(),outer.getTextRange().getStartOffset()),Math.max(prev.getTextRange().getEndOffset(),outer.getTextRange().getEndOffset()));
  prev.setRange(textRange);
  if (prev.getFollowingText() == null)   prev.setFollowingText(outer.getFollowingText());
  final CompositeElement parent=prev.getTreeParent();
  if (parent != null)   parent.subtreeChanged();
  final CompositeElement removedParent=outer.getTreeParent();
  TreeUtil.remove(outer);
  if (removedParent != null)   removedParent.subtreeChanged();
  return prev;
}
