{
  String propertyName=e.getPropertyName();
  if (propertyName.equals(PsiTreeChangeEvent.PROP_ROOTS)) {
    myUpdater.runBeforeUpdate(new Runnable(){
      public void run(){
        rebuildCache();
      }
    }
);
    updateTree(true);
  }
 else   if (PsiTreeChangeEvent.PROP_WRITABLE.equals(propertyName)) {
    PsiFile psiFile=(PsiFile)e.getElement();
    if (!canContainTodoItems(psiFile)) {
      return;
    }
    updateTree(true);
  }
 else   if (PsiTreeChangeEvent.PROP_FILE_NAME.equals(propertyName)) {
    PsiFile psiFile=(PsiFile)e.getElement();
    if (!canContainTodoItems(psiFile)) {
      return;
    }
    updateTree(true);
  }
 else   if (PsiTreeChangeEvent.PROP_DIRECTORY_NAME.equals(propertyName)) {
    PsiDirectory psiDirectory=(PsiDirectory)e.getElement();
    Iterator iterator=getFiles(psiDirectory);
    if (iterator.hasNext()) {
      updateTree(true);
    }
  }
}
