{
  myEditor=editor;
  FoldRegion[] foldRegions=myEditor.getFoldingModel().getAllFoldRegions();
  Arrays.sort(foldRegions,RangeMarker.BY_START_OFFSET);
  TIntArrayList foldBeginings=new TIntArrayList();
  for (  FoldRegion foldRegion : foldRegions) {
    if (!foldRegion.isValid() || foldRegion.isExpanded())     continue;
    foldBeginings.add(getStartLine(foldRegion));
    myCollapsed.add(foldRegion);
  }
  myFoldBeginings=foldBeginings.toNativeArray();
}
