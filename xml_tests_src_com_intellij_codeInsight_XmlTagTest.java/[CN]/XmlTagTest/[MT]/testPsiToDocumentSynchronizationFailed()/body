{
  String text="<wpd><methods> </methods></wpd>";
  final File tempFile=FileUtil.createTempFile("idea-test",".xml");
  tempFile.createNewFile();
  final FileOutputStream fileOutputStream=new FileOutputStream(tempFile);
  fileOutputStream.write(text.getBytes());
  fileOutputStream.flush();
  fileOutputStream.close();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
        @Override @SuppressWarnings({"ConstantConditions"}) public void run(){
          VirtualFileManager.getInstance().refresh(false);
          XmlFile file;
          try {
            file=(XmlFile)getPsiManager().findFile(VfsUtil.findFileByURL(tempFile.toURL()));
          }
 catch (          MalformedURLException e) {
            throw new RuntimeException(e);
          }
          final XmlTag methodTag=file.getDocument().getRootTag().findFirstSubTag("methods");
          try {
            methodTag.add(XmlElementFactory.getInstance(getProject()).createTagFromText("<method/>"));
          }
 catch (          IncorrectOperationException e) {
            throw new RuntimeException(e);
          }
        }
      }
,"",null,UndoConfirmationPolicy.DO_NOT_REQUEST_CONFIRMATION);
    }
  }
);
}
