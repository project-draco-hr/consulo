{
  final XmlTag root=XmlElementFactory.getInstance(getProject()).createXHTMLTagFromText("<a>1<b>234</b>456</a>");
  final XmlTag tag=root.findFirstSubTag("b");
  final XmlTagChild child=tag.getValue().getChildren()[0];
  assertTrue(child instanceof XmlText && child.getText().equals("234"));
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      assertNotNull(tag.getParent().addBefore(child,tag));
      tag.delete();
    }
  }
);
  assertEquals(1,root.getValue().getChildren().length);
  assertEquals("1234456",root.getValue().getChildren()[0].getText());
}
