{
  final XmlTag tag=XmlElementFactory.getInstance(getProject()).createTagFromText("<foo></foo>");
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      tag.collapseIfEmpty();
      assertEquals("<foo/>",tag.getText());
      final XmlTag tag1=XmlElementFactory.getInstance(getProject()).createTagFromText("<foo>abc</foo>");
      tag1.collapseIfEmpty();
      assertEquals("<foo/>",tag1.getText());
      final XmlTag tag2=XmlElementFactory.getInstance(getProject()).createTagFromText("<foo><boo/></foo>");
      tag2.collapseIfEmpty();
      assertEquals("<foo><boo/></foo>",tag2.getText());
    }
  }
);
}
