{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      for (int i=0; i < text.length(); i++) {
        for (int j=i; j < text.length(); j++) {
          XmlTag tag=XmlElementFactory.getInstance(getProject()).createXHTMLTagFromText("<a>" + text + "</a>");
          final PsiElement[] children=tag.getValue().getTextElements();
          assertEquals(1,children.length);
          final XmlText xmlText=(XmlText)children[0];
          assertEquals(text,xmlText.getText());
          xmlText.removeText(i,j);
          final StringBuffer expected=new StringBuffer(text);
          expected.delete(i,j);
          assertEquals(expected.toString(),xmlText.getValue());
        }
      }
    }
  }
);
}
