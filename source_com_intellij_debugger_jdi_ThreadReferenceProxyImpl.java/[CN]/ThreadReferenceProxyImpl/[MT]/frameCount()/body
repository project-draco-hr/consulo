{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  checkValid();
  if (myFrameCount == -1) {
    while (true) {
      try {
        final ThreadReference threadReference=getThreadReference();
        myFrameCount=threadReference.frameCount();
        break;
      }
 catch (      IncompatibleThreadStateException e) {
        if (!isSuspended()) {
          throw EvaluateExceptionUtil.createEvaluateException(e);
        }
      }
    }
  }
  return myFrameCount;
}
