{
  for (  final SharedServer server : state.servers) {
    if (server.url == null || server.type == null) {
      continue;
    }
    final TaskRepositoryType type=ContainerUtil.find(TaskManager.ourRepositoryTypes,new Condition<TaskRepositoryType>(){
      public boolean value(      TaskRepositoryType taskRepositoryType){
        return taskRepositoryType.getName().equals(server.type);
      }
    }
);
    if (type != null) {
      TaskRepository repository=ContainerUtil.find(myManager.getAllRepositories(),new Condition<TaskRepository>(){
        public boolean value(        TaskRepository taskRepository){
          return type.equals(taskRepository.getRepositoryType()) && server.url.equals(taskRepository.getUrl());
        }
      }
);
      if (repository == null) {
        repository=type.createRepository();
        repository.setUrl(server.url);
        repository.setShared(true);
      }
    }
  }
}
