{
  PsiSubstitutor result=getSuperMethodSignatureSubstitutorImpl(methodSignature,superMethodSignature);
  if (result == null)   return null;
  PsiTypeParameter[] methoTypeParameters=methodSignature.getTypeParameters();
  PsiTypeParameter[] superTypeParameters=superMethodSignature.getTypeParameters();
  PsiSubstitutor methodSubstitutor=methodSignature.getSubstitutor();
  for (int i=0; i < methoTypeParameters.length; i++) {
    PsiTypeParameter methoTypeParameter=methoTypeParameters[i];
    PsiTypeParameter superTypeParameter=superTypeParameters[i];
    final Set<PsiType> methoSupers=new HashSet<PsiType>();
    for (    PsiClassType methoSuper : methoTypeParameter.getSuperTypes()) {
      methoSupers.add(methodSubstitutor.substitute(methoSuper));
    }
    final Set<PsiType> superSupers=new HashSet<PsiType>();
    for (    PsiClassType superSuper : superTypeParameter.getSuperTypes()) {
      superSupers.add(methodSubstitutor.substitute(PsiUtil.captureToplevelWildcards(result.substitute(superSuper),methoTypeParameter)));
    }
    if (!methoSupers.equals(superSupers))     return null;
  }
  return result;
}
