{
  JLayeredPane layeredPane;
  final Window window=WindowManager.getInstance().suggestParentWindow(myProject);
  Component parent=UIUtil.findUltimateParent(window);
  if (parent instanceof JFrame) {
    layeredPane=((JFrame)parent).getLayeredPane();
  }
 else   if (parent instanceof JDialog) {
    layeredPane=((JDialog)parent).getLayeredPane();
  }
 else {
    throw new IllegalStateException("cannot find parent window: project=" + myProject + (myProject != null ? "; open=" + myProject.isOpen() : "")+ "; window="+ window);
  }
  return layeredPane;
}
