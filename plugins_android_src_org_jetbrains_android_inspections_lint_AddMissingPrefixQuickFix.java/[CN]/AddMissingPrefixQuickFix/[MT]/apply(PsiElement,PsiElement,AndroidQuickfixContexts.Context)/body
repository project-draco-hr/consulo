{
  final XmlAttribute attribute=PsiTreeUtil.getParentOfType(startElement,XmlAttribute.class,false);
  if (attribute == null) {
    return;
  }
  final XmlTag tag=attribute.getParent();
  if (tag == null) {
    LOG.debug("tag is null");
    return;
  }
  String androidNsPrefix=tag.getPrefixByNamespace(SdkConstants.NS_RESOURCES);
  if (androidNsPrefix == null) {
    final PsiFile file=tag.getContainingFile();
    final XmlExtension extension=XmlExtension.getExtension(file);
    if (extension == null) {
      LOG.debug("Cannot get XmlExtension for file + " + file);
      return;
    }
    if (!(file instanceof XmlFile)) {
      LOG.debug(file + " is not XmlFile");
      return;
    }
    final XmlFile xmlFile=(XmlFile)file;
    final String defaultPrefix="android";
    extension.insertNamespaceDeclaration(xmlFile,null,Collections.singleton(SdkConstants.NS_RESOURCES),defaultPrefix,null);
    androidNsPrefix=defaultPrefix;
  }
  attribute.setName(androidNsPrefix + ':' + attribute.getLocalName());
}
