{
  Application application=ApplicationManager.getApplication();
  if (!application.isUnitTestMode()) {
    final String question=GroovyRefactoringBundle.message("inline.method.prompt.0",methodSignature);
    RefactoringMessageDialog dialog=new RefactoringMessageDialog(REFACTORING_NAME,question,HelpID.INLINE_METHOD,"OptionPane.questionIcon",true,project);
    dialog.show();
    if (!dialog.isOK()) {
      WindowManager.getInstance().getStatusBar(project).setInfo(GroovyRefactoringBundle.message("press.escape.to.remove.the.highlighting"));
      return null;
    }
  }
  return new InlineHandler.Settings(){
    public boolean isOnlyOneReferenceToInline(){
      return true;
    }
  }
;
}
