{
  File dir=new File(directoryPath);
  if (!dir.exists()) {
    if (promptUser) {
      final int answer=Messages.showOkCancelDialog(promptPrefix + "\"" + dir.getPath()+ "\"\ndoes not exist. It will be created by IDEA.","Directory Does Not Exist",Messages.getQuestionIcon());
      if (answer != 0) {
        return false;
      }
    }
    final boolean ok=dir.mkdirs();
    if (!ok) {
      Messages.showErrorDialog("Failed to create directory \"" + dir.getPath() + "\"","Error");
      return false;
    }
  }
  return true;
}
