{
  if (toolWrappers.isEmpty())   return Collections.emptyMap();
  final List<PsiElement> elements=new ArrayList<PsiElement>();
  TextRange range=file.getTextRange();
  Divider.divideInsideAndOutside(file,range.getStartOffset(),range.getEndOffset(),range,elements,new ArrayList<ProperTextRange>(),Collections.<PsiElement>emptyList(),Collections.<ProperTextRange>emptyList(),true,Conditions.<PsiFile>alwaysTrue());
  return inspectElements(toolWrappers,file,iManager,isOnTheFly,failFastOnAcquireReadAction,indicator,elements,calcElementDialectIds(elements));
}
