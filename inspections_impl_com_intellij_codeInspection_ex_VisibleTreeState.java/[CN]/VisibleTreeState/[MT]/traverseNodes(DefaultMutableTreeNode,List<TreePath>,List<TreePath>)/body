{
  final Object userObject=root.getUserObject();
  final TreeNode[] rootPath=root.getPath();
  if (userObject instanceof Descriptor) {
    final String shortName=((Descriptor)userObject).getKey().toString();
    if (mySelectedNodes.contains(shortName)) {
      toSelect.add(new TreePath(rootPath));
    }
    if (myExpandedNodes.contains(shortName)) {
      pathsToExpand.add(new TreePath(rootPath));
    }
  }
 else   if (userObject instanceof String) {
    final String str=(String)userObject;
    if (mySelectedNodes.contains(str)) {
      toSelect.add(new TreePath(rootPath));
    }
    if (myExpandedNodes.contains(str)) {
      pathsToExpand.add(new TreePath(rootPath));
    }
    for (int i=0; i < root.getChildCount(); i++) {
      traverseNodes((DefaultMutableTreeNode)root.getChildAt(i),pathsToExpand,toSelect);
    }
  }
}
