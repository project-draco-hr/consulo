{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      XmlTag tag=myComponent.getTag();
      XmlAttribute margin=tag.getAttribute("layout_margin",SdkConstants.NS_RESOURCES);
      if (margin != null) {
        String value=margin.getValue();
        margin.delete();
        if (!StringUtil.isEmpty(value)) {
          tag.setAttribute("layout_marginLeft",SdkConstants.NS_RESOURCES,value);
          tag.setAttribute("layout_marginRight",SdkConstants.NS_RESOURCES,value);
          tag.setAttribute("layout_marginTop",SdkConstants.NS_RESOURCES,value);
          tag.setAttribute("layout_marginBottom",SdkConstants.NS_RESOURCES,value);
        }
      }
      Point moveDelta=myContext.getMoveDelta();
      Dimension sizeDelta=myContext.getSizeDelta();
      int direction=myContext.getResizeDirection();
      if (direction == Position.WEST) {
        setValue(tag,"layout_marginLeft",myMargins.x - moveDelta.x);
      }
 else       if (direction == Position.EAST) {
        setValue(tag,"layout_marginRight",myMargins.width + sizeDelta.width);
      }
 else       if (direction == Position.NORTH) {
        setValue(tag,"layout_marginTop",myMargins.y - moveDelta.y);
      }
 else       if (direction == Position.SOUTH) {
        setValue(tag,"layout_marginBottom",myMargins.height + sizeDelta.height);
      }
    }
  }
);
}
