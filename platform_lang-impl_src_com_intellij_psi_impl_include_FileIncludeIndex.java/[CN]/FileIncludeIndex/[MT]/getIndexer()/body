{
  return new DataIndexer<FileIncludeIndex.Key,List<FileIncludeInfoImpl>,FileContent>(){
    @NotNull public Map<FileIncludeIndex.Key,List<FileIncludeInfoImpl>> map(    FileContent inputData){
      Map<FileIncludeIndex.Key,List<FileIncludeInfoImpl>> map=new FactoryMap<FileIncludeIndex.Key,List<FileIncludeInfoImpl>>(){
        @Override protected List<FileIncludeInfoImpl> create(        FileIncludeIndex.Key key){
          return new ArrayList<FileIncludeInfoImpl>();
        }
      }
;
      for (      FileIncludeProvider provider : myProviders) {
        FileIncludeInfo[] infos=provider.getIncludeInfos(inputData);
        List<FileIncludeInfoImpl> infoList=map.get(new FileKey(inputData.getFile()));
        for (        FileIncludeInfo info : infos) {
          FileIncludeInfoImpl impl=new FileIncludeInfoImpl(info.path,info.offset,info.runtimeOnly,provider.getId());
          map.get(new IncludeKey(info.fileName)).add(impl);
          infoList.add(impl);
        }
      }
      return map;
    }
  }
;
}
