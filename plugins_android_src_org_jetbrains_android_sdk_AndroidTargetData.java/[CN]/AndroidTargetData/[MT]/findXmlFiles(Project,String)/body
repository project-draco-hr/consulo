{
  XmlFile[] xmlFiles=new XmlFile[paths.length];
  for (int i=0; i < paths.length; i++) {
    String path=paths[i];
    final VirtualFile file=LocalFileSystem.getInstance().findFileByPath(path);
    PsiFile psiFile=file != null ? ApplicationManager.getApplication().runReadAction(new Computable<PsiFile>(){
      @Nullable public PsiFile compute(){
        return PsiManager.getInstance(project).findFile(file);
      }
    }
) : null;
    if (psiFile == null) {
      LOG.info("File " + path + " is not found");
      return null;
    }
    if (!(psiFile instanceof XmlFile)) {
      LOG.info("File " + path + "  is not an xml psiFile");
      return null;
    }
    xmlFiles[i]=(XmlFile)psiFile;
  }
  return xmlFiles;
}
