{
  ProgressIndicator pi=ProgressManager.getInstance().getProgressIndicator();
  final List<PluginId> pluginIds=new ArrayList<PluginId>();
  for (  PluginNode pluginNode : pluginsToInstall) {
    pluginIds.add(pluginNode.getPluginId());
  }
  boolean result=false;
  for (  final PluginNode pluginNode : pluginsToInstall) {
    if (pi != null)     pi.setText(pluginNode.getName());
    try {
      result|=prepareToInstall(pluginNode,pluginIds,allPlugins);
    }
 catch (    final IOException e) {
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          Messages.showErrorDialog(pluginNode.getName() + ": " + e.getMessage(),CommonBundle.message("title.error"));
        }
      }
);
      return false;
    }
  }
  return result;
}
