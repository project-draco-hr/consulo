{
  CardLayout layout=(CardLayout)myPreviewPanel.getLayout();
  if (element == null) {
    layout.show(myPreviewPanel,NONE);
    return;
  }
  try {
    VirtualFile file=element.getFile();
    if (file == null) {
      myTextArea.setText(null);
      myTextArea.setEditable(isProjectPanel);
      layout.show(myPreviewPanel,TEXT);
    }
 else     if (ImageFileTypeManager.getInstance().isImage(file)) {
      Icon icon=element.getPreviewIcon();
      if (icon == null) {
        icon=new SizedIcon(100,100,new ImageIcon(file.getPath()));
        element.setPreviewIcon(icon);
      }
      myImageComponent.setIcon(icon);
      layout.show(myPreviewPanel,IMAGE);
    }
 else     if (file.getFileType() == XmlFileType.INSTANCE) {
      String value=element.getPreviewString();
      if (value == null) {
        value=new String(file.contentsToByteArray());
        element.setPreviewString(value);
      }
      myTextArea.setText(value);
      myTextArea.setEditable(isProjectPanel);
      layout.show(myPreviewPanel,TEXT);
    }
 else {
      layout.show(myPreviewPanel,NONE);
    }
  }
 catch (  IOException e) {
    layout.show(myPreviewPanel,NONE);
  }
}
