{
  myTree=new Tree();
  myTree.setModel(new DefaultTreeModel(new DefaultMutableTreeNode()));
  myTree.setScrollsOnExpand(true);
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  new DoubleClickListener(){
    @Override protected boolean onDoubleClick(    MouseEvent e){
      if (!myTreeBuilder.getSelectedElements(ResourceItem.class).isEmpty()) {
        close(OK_EXIT_CODE);
        return true;
      }
      return false;
    }
  }
.installOn(myTree);
  ToolTipManager.sharedInstance().registerComponent(myTree);
  TreeUtil.installActions(myTree);
  myManager=facet.getResourceManager(system ? AndroidUtils.SYSTEM_RESOURCE_PACKAGE : null);
  myGroups=new ResourceGroup[types.length];
  for (int i=0; i < types.length; i++) {
    myGroups[i]=new ResourceGroup(types[i],myManager);
  }
  myTreeBuilder=new AbstractTreeBuilder(myTree,(DefaultTreeModel)myTree.getModel(),new TreeContentProvider(myGroups),null);
  myTreeBuilder.initRootNode();
  TreeSelectionModel selectionModel=myTree.getSelectionModel();
  selectionModel.setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  selectionModel.addTreeSelectionListener(ResourceDialog.this);
  myTree.setCellRenderer(new NodeRenderer(){
    @Override protected void doAppend(    @NotNull @Nls String fragment,    @NotNull SimpleTextAttributes attributes,    boolean isMainText,    boolean selected){
      SpeedSearchUtil.appendFragmentsForSpeedSearch(myTree,fragment,attributes,selected,this);
    }
    @Override public void doAppend(    @NotNull String fragment,    @NotNull SimpleTextAttributes attributes,    boolean selected){
      SpeedSearchUtil.appendFragmentsForSpeedSearch(myTree,fragment,attributes,selected,this);
    }
    @Override public void doAppend(    String fragment,    boolean selected){
      SpeedSearchUtil.appendFragmentsForSpeedSearch(myTree,fragment,SimpleTextAttributes.REGULAR_ATTRIBUTES,selected,this);
    }
  }
);
  new TreeSpeedSearch(myTree,TreeSpeedSearch.NODE_DESCRIPTOR_TOSTRING,true);
  myComponent=new JBSplitter(true,0.8f);
  myComponent.setSplitterProportionKey("android.resource_dialog_splitter");
  myComponent.setFirstComponent(ScrollPaneFactory.createScrollPane(myTree));
  myPreviewPanel=new JPanel(new CardLayout());
  myComponent.setSecondComponent(myPreviewPanel);
  myTextArea=new JTextArea(5,20);
  myTextArea.setEditable(false);
  myPreviewPanel.add(ScrollPaneFactory.createScrollPane(myTextArea),TEXT);
  myComboTextArea=new JTextArea(5,20);
  myComboTextArea.setEditable(false);
  myComboBox=new JComboBox();
  myComboBox.setMaximumRowCount(15);
  myComboBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      List<ResourceElement> resources=(List<ResourceElement>)myComboBox.getClientProperty(COMBO);
      myComboTextArea.setText(getResourceElementValue(resources.get(myComboBox.getSelectedIndex())));
    }
  }
);
  JPanel comboPanel=new JPanel(new BorderLayout(0,1){
    @Override public void layoutContainer(    Container target){
      super.layoutContainer(target);
      Rectangle bounds=myComboBox.getBounds();
      Dimension size=myComboBox.getPreferredSize();
      size.width+=20;
      myComboBox.setBounds((int)bounds.getMaxX() - size.width,bounds.y,size.width,size.height);
    }
  }
);
  comboPanel.add(ScrollPaneFactory.createScrollPane(myComboTextArea),BorderLayout.CENTER);
  comboPanel.add(myComboBox,BorderLayout.SOUTH);
  myPreviewPanel.add(comboPanel,COMBO);
  myImageComponent=new JLabel();
  myImageComponent.setHorizontalAlignment(SwingConstants.CENTER);
  myImageComponent.setVerticalAlignment(SwingConstants.CENTER);
  myPreviewPanel.add(myImageComponent,IMAGE);
  myNoPreviewComponent=new JLabel("No Preview");
  myNoPreviewComponent.setHorizontalAlignment(SwingConstants.CENTER);
  myNoPreviewComponent.setVerticalAlignment(SwingConstants.CENTER);
  myPreviewPanel.add(myNoPreviewComponent,NONE);
}
