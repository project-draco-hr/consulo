{
  super(module.getProject());
  myModule=module;
  myComponent=component;
  setTitle("Resources");
  AndroidFacet facet=AndroidFacet.getInstance(module);
  myProjectPanel=new ResourcePanel(facet,types,false);
  mySystemPanel=new ResourcePanel(facet,types,true);
  myContentPanel=new JBTabbedPane();
  myContentPanel.setPreferredSize(new Dimension(600,500));
  myContentPanel.addTab("Project",myProjectPanel.myComponent);
  myContentPanel.addTab("System",mySystemPanel.myComponent);
  myProjectPanel.myTreeBuilder.expandAll(null);
  mySystemPanel.myTreeBuilder.expandAll(null);
  boolean doSelection=value != null;
  if (types == ResourceEditor.COLOR_TYPES) {
    Color color=ResourceRenderer.parseColor(value);
    myColorPicker=new ColorPicker(myDisposable,color,true);
    myContentPanel.addTab("Color",myColorPicker);
    if (color != null) {
      myContentPanel.setSelectedIndex(2);
      doSelection=false;
    }
  }
  if (doSelection && value.startsWith("@")) {
    ResourcePanel panel;
    String type;
    int index=value.indexOf('/');
    String name=value.substring(index + 1);
    if (value.startsWith(ANDROID)) {
      panel=mySystemPanel;
      type=value.substring(ANDROID.length(),index);
    }
 else {
      panel=myProjectPanel;
      type=value.substring(1,index);
    }
    myContentPanel.setSelectedComponent(panel.myComponent);
    panel.select(type,name);
  }
  myContentPanel.addChangeListener(new ChangeListener(){
    @Override public void stateChanged(    ChangeEvent e){
      valueChanged(null);
    }
  }
);
  valueChanged(null);
  init();
}
