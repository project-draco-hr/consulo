{
  Component selectedComponent=myContentPanel.getSelectedComponent();
  if (selectedComponent == myColorPicker) {
    Color color=myColorPicker.getColor();
    getOKAction().setEnabled(color != null);
    myResultResourceName=color == null ? null : "#" + toHex(color.getRed()) + toHex(color.getGreen())+ toHex(color.getBlue());
  }
 else {
    ResourcePanel panel=selectedComponent == myProjectPanel.myComponent ? myProjectPanel : mySystemPanel;
    Set<ResourceItem> elements=panel.myTreeBuilder.getSelectedElements(ResourceItem.class);
    getOKAction().setEnabled(!elements.isEmpty());
    if (elements.isEmpty()) {
      myResultResourceName=null;
    }
 else {
      String prefix=panel == myProjectPanel ? "@" : ANDROID;
      myResultResourceName=prefix + elements.iterator().next().getName();
    }
  }
}
