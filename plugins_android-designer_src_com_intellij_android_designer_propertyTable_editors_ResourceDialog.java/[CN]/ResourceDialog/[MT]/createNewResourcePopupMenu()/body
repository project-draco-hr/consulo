{
  ActionManager actionManager=ActionManager.getInstance();
  DefaultActionGroup actionGroup=new DefaultActionGroup();
  ResourceGroup resourceGroup=getSelectedElement(myProjectPanel.myTreeBuilder,ResourceGroup.class);
  if (resourceGroup == null) {
    resourceGroup=getSelectedElement(myProjectPanel.myTreeBuilder,ResourceItem.class).getGroup();
  }
  if (AndroidResourceUtil.VALUE_RESOURCE_TYPES.contains(resourceGroup.getType())) {
    myNewResourceValueAction.getTemplatePresentation().setText("New " + resourceGroup + " Value...");
    myNewResourceValueAction.getTemplatePresentation().putClientProperty(TYPE_KEY,resourceGroup.getType());
    actionGroup.add(myNewResourceValueAction);
  }
  if (AndroidResourceUtil.XML_FILE_RESOURCE_TYPES.contains(resourceGroup.getType())) {
    myNewResourceFileAction.getTemplatePresentation().setText("New " + resourceGroup + " File...");
    myNewResourceFileAction.getTemplatePresentation().putClientProperty(TYPE_KEY,resourceGroup.getType());
    actionGroup.add(myNewResourceFileAction);
  }
  if (myComponent != null && ResourceType.STYLE.equals(resourceGroup.getType())) {
    boolean enabled=false;
    for (    XmlAttribute attribute : myComponent.getTag().getAttributes()) {
      if (attribute.getName().startsWith("android:")) {
        enabled=true;
        break;
      }
    }
    myExtractStyleAction.getTemplatePresentation().setEnabled(enabled);
  }
  return actionManager.createActionPopupMenu(ActionPlaces.UNKNOWN,actionGroup);
}
