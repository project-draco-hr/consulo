{
  DomElement domElement=myManager.getDomElement(childTag);
  if (domElement == null) {
    domElement=myManager.getDomElement(contextTag);
    if (domElement != null) {
      AbstractDomChildrenDescription description=myManager.findChildrenDescription(childTag,domElement);
      if (description instanceof DomChildrenDescription) {
        return new DomElementXmlDescriptor((DomChildrenDescription)description,myManager);
      }
    }
    return null;
  }
  final DomElement parent=domElement.getParent();
  if (parent == null)   return new DomElementXmlDescriptor(domElement);
  final AbstractDomChildrenDescription description=domElement.getChildDescription();
  if (description instanceof CustomDomChildrenDescription) {
    final DomElement finalDomElement=domElement;
    return new AbstractDomChildrenDescriptor(myManager){
      @Override public String getDefaultName(){
        return finalDomElement.getXmlElementName();
      }
      @Override @Nullable public PsiElement getDeclaration(){
        final PomTarget target=((CustomDomChildrenDescription)description).getTagNameDescriptor().findDeclaration(finalDomElement);
        if (target == description) {
          return childTag;
        }
        return target == null ? null : PomService.convertToPsi(childTag.getProject(),target);
      }
    }
;
  }
  if (!(description instanceof DomChildrenDescription))   return null;
  return new DomElementXmlDescriptor((DomChildrenDescription)description,myManager);
}
