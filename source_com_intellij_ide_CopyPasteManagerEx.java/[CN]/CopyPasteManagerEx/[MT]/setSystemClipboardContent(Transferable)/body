{
  final boolean[] success=new boolean[]{false};
  final Runnable accessor=new Runnable(){
    public void run(){
      for (int i=0; i < 3; i++) {
        try {
          Toolkit.getDefaultToolkit().getSystemClipboard().setContents(content,CopyPasteManagerEx.this);
        }
 catch (        IllegalStateException e) {
          try {
            Thread.sleep(50);
          }
 catch (          InterruptedException e1) {
          }
          continue;
        }
        break;
      }
      success[0]=true;
    }
  }
;
  if (Patches.SUN_BUG_ID_4818143) {
    Thread worker=new Thread(accessor,"Clipboard accessor");
    worker.start();
    try {
      worker.join(DELAY_UNTIL_ABORT_CLIPBOARD_ACCESS);
    }
 catch (    InterruptedException e) {
    }
    if (!success[0]) {
      showWorkaroundMessage();
      worker.interrupt();
    }
  }
 else {
    accessor.run();
  }
}
