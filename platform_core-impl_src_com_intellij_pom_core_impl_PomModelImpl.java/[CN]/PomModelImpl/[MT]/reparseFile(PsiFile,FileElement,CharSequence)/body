{
  TextRange changedPsiRange=DocumentCommitThread.getChangedPsiRange(file,treeElement,newText);
  if (changedPsiRange == null)   return null;
  Runnable reparseLeaf=tryReparseOneLeaf(treeElement,newText,changedPsiRange);
  if (reparseLeaf != null)   return reparseLeaf;
  final DiffLog log=BlockSupport.getInstance(myProject).reparseRange(file,treeElement,changedPsiRange,newText,new EmptyProgressIndicator(),treeElement.getText());
  return new Runnable(){
    @Override public void run(){
      runTransaction(new PomTransactionBase(file,getModelAspect(TreeAspect.class)){
        @Nullable @Override public PomModelEvent runInner() throws IncorrectOperationException {
          return new TreeAspectEvent(PomModelImpl.this,log.performActualPsiChange(file));
        }
      }
);
    }
  }
;
}
