{
  Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  ComponentItem selectedItem=(ComponentItem)e.getDataContext().getData(ComponentItem.class.getName());
  GroupItem groupItem=(GroupItem)e.getDataContext().getData(GroupItem.class.getName());
  if (project == null || selectedItem == null || groupItem == null)   return;
  final ComponentItem itemToBeEdited=selectedItem.clone();
  Window parentWindow=WindowManager.getInstance().suggestParentWindow(project);
  final ComponentItemDialog dialog=new ComponentItemDialog(project,parentWindow,itemToBeEdited);
  dialog.setTitle(UIDesignerBundle.message("title.edit.component"));
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  Palette palette=Palette.getInstance(project);
  for (  GroupItem group : palette.getGroups()) {
    if (group.containsItemCopy(selectedItem,itemToBeEdited.getClassName())) {
      return;
    }
  }
  groupItem.replaceItem(selectedItem,itemToBeEdited);
  palette.fireGroupsChanged();
}
