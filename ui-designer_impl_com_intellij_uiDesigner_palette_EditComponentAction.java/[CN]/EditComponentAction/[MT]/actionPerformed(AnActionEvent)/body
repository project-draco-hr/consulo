{
  Project project=e.getData(DataKeys.PROJECT);
  ComponentItem selectedItem=e.getData(ComponentItem.DATA_KEY);
  if (project == null || selectedItem == null || selectedItem.isAnyComponent() || selectedItem.isSpacer()) {
    return;
  }
  final ComponentItem itemToBeEdited=selectedItem.clone();
  Window parentWindow=WindowManager.getInstance().suggestParentWindow(project);
  final ComponentItemDialog dialog=new ComponentItemDialog(project,parentWindow,itemToBeEdited,false);
  dialog.setTitle(UIDesignerBundle.message("title.edit.component"));
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  GroupItem groupItem=null;
  Palette palette=Palette.getInstance(project);
  for (  GroupItem group : palette.getGroups()) {
    if (group.containsItemCopy(selectedItem,itemToBeEdited.getClassName())) {
      return;
    }
    if (group.containsItemClass(selectedItem.getClassName())) {
      groupItem=group;
    }
  }
  LOG.assertTrue(groupItem != null);
  palette.replaceItem(groupItem,selectedItem,itemToBeEdited);
  palette.fireGroupsChanged();
}
