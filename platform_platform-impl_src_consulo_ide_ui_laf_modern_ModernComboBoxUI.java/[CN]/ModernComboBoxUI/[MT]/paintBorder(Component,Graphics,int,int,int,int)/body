{
  if (comboBox == null || arrowButton == null) {
    return;
  }
  hasFocus=myMouseEnterHandler.isMouseEntered();
  final Graphics2D g=(Graphics2D)g2;
  final Rectangle arrowButtonBounds=arrowButton.getBounds();
  final int xxx=arrowButtonBounds.x - JBUI.scale(5);
  final GraphicsConfig config=new GraphicsConfig(g);
  g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  g.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,RenderingHints.VALUE_STROKE_NORMALIZE);
  if (editor != null && comboBox.isEditable()) {
    ((JComponent)editor).setBorder(null);
    g.setColor(editor.getBackground());
    g.fillRect(x + JBUI.scale(1),y + JBUI.scale(1),width - JBUI.scale(2),height - JBUI.scale(4));
    g.setColor(arrowButton.getBackground());
    g.fillRect(xxx,y + JBUI.scale(1),width - xxx,height - JBUI.scale(4));
    g.setColor(editor.getBackground());
    g.fillRect(xxx,y + JBUI.scale(1),JBUI.scale(5),height - JBUI.scale(4));
  }
 else {
    g.setColor(UIUtil.getPanelBackground());
    g.fillRect(x + JBUI.scale(1),y + JBUI.scale(1),width - JBUI.scale(2),height - JBUI.scale(4));
  }
  final Color borderColor=ModernUIUtil.getBorderColor(myComboBox);
  Rectangle r=rectangleForCurrentValue();
  paintCurrentValueBackground(g,r,hasFocus);
  paintCurrentValue(g,r,hasFocus);
  if (hasFocus) {
    g.setColor(ModernUIUtil.getSelectionBackground());
    g.drawRect(JBUI.scale(1),JBUI.scale(1),width - JBUI.scale(2),height - JBUI.scale(4));
  }
 else {
    g.setColor(borderColor);
    g.drawRect(JBUI.scale(1),JBUI.scale(1),width - JBUI.scale(2),height - JBUI.scale(4));
  }
  config.restore();
}
