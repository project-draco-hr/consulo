{
  myPanel.apply();
  if (myPanel.getSettings().downloadFiles(myPanel.getMainPanel())) {
    if (myModifiableRootModel == null) {
      final ModifiableRootModel model=ModuleRootManager.getInstance(myModule).getModifiableModel();
      new WriteAction(){
        protected void run(        final Result result){
          addLibraries(model);
          model.commit();
        }
      }
.execute();
    }
 else {
      addLibraries(myModifiableRootModel);
    }
    super.doOKAction();
  }
}
