{
  myProject=project;
  myShouldShowCancel=shouldShowCancel;
  myCancelText=cancelText;
  setModalityProgress(shouldShowBackground ? null : this);
  myFocusTrackback=new FocusTrackback(this,WindowManager.getInstance().suggestParentWindow(project),false);
  Component parent=parentComponent;
  if (parent == null && project == null) {
    parent=JOptionPane.getRootFrame();
  }
  if (parent != null) {
    myDialog=new MyDialog(shouldShowBackground,parent,myCancelText);
  }
 else {
    myDialog=new MyDialog(shouldShowBackground,myProject,myCancelText);
  }
  Disposer.register(this,myDialog);
  myFocusTrackback.registerFocusComponent(myDialog.getPanel());
}
