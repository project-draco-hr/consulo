{
  LOG.assertTrue(!myStoppedAlready);
  super.stop();
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      boolean wasShowing=myDialog != null && myDialog.getPanel() != null && myDialog.getPanel().isShowing();
      if (myDialog != null) {
        myDialog.hide();
      }
      if (wasShowing) {
        myFocusTrackback.restoreFocus();
      }
 else {
        myFocusTrackback.consume();
      }
      myStoppedAlready=true;
      Disposer.dispose(ProgressWindow.this);
    }
  }
);
  SwingUtilities.invokeLater(EmptyRunnable.INSTANCE);
}
