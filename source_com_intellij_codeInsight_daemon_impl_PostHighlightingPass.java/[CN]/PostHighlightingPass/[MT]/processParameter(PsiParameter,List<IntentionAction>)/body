{
  PsiElement declarationScope=parameter.getDeclarationScope();
  if (declarationScope instanceof PsiMethod) {
    PsiMethod method=(PsiMethod)declarationScope;
    if (PsiUtil.hasErrorElementChild(method))     return null;
    if ((method.isConstructor() || method.hasModifierProperty(PsiModifier.PRIVATE) || method.hasModifierProperty(PsiModifier.STATIC)) && !method.hasModifierProperty(PsiModifier.NATIVE)) {
      if (isMainMethod(method))       return null;
      int count=myRefCountHolder.getRefCount(parameter);
      if (count == 0) {
        PsiIdentifier identifier=parameter.getNameIdentifier();
        String message=MessageFormat.format(PARAMETER_IS_NOT_USED,new Object[]{identifier.getText()});
        HighlightInfo highlightInfo=createUnusedSymbolInfo(identifier,message);
        QuickFixAction.registerQuickFixAction(highlightInfo,new RemoveUnusedParameterFix(parameter),options);
        return highlightInfo;
      }
    }
  }
 else   if (declarationScope instanceof PsiForeachStatement) {
    if (myRefCountHolder.getRefCount(parameter) == 0) {
      PsiIdentifier identifier=parameter.getNameIdentifier();
      String message=MessageFormat.format(PARAMETER_IS_NOT_USED,new Object[]{identifier.getText()});
      final HighlightInfo unusedSymbolInfo=createUnusedSymbolInfo(identifier,message);
      QuickFixAction.registerQuickFixAction(unusedSymbolInfo,new EmptyIntentionAction(HighlightDisplayKey.getDisplayNameByKey(HighlightDisplayKey.UNUSED_SYMBOL),options),options);
      return unusedSymbolInfo;
    }
  }
  return null;
}
