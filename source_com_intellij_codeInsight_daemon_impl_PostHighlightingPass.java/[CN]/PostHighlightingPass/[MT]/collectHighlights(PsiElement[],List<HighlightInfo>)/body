{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  for (  PsiElement element : elements) {
    ProgressManager.getInstance().checkCanceled();
    if (element instanceof PsiIdentifier) {
      final HighlightInfo highlightInfo=processIdentifier((PsiIdentifier)element);
      if (highlightInfo != null)       array.add(highlightInfo);
    }
 else     if (element instanceof PsiImportList) {
      final PsiImportStatementBase[] imports=((PsiImportList)element).getAllImportStatements();
      for (      PsiImportStatementBase statement : imports) {
        final HighlightInfo highlightInfo=processImport(statement);
        if (highlightInfo != null)         array.add(highlightInfo);
      }
    }
 else     if (element instanceof XmlAttributeValue) {
      final HighlightInfo highlightInfo=XmlHighlightVisitor.checkIdRefAttrValue((XmlAttributeValue)element,myRefCountHolder);
      if (highlightInfo != null)       array.add(highlightInfo);
    }
  }
}
