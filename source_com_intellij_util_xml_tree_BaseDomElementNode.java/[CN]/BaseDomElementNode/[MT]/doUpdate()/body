{
  if (!myDomElement.isValid())   return true;
  setUniformIcon(getNodeIcon());
  clearColoredText();
  final List<DomElementProblemDescriptor> problems=DomElementAnnotationsManager.getInstance().getProblems(myDomElement,true,highlightIfChildrenHasProblems(),HighlightSeverity.ERROR);
  if (problems.size() > 0) {
    addColoredFragment(getNodeName(),TooltipUtils.getTooltipText(problems),SimpleTextAttributes.ERROR_ATTRIBUTES);
  }
 else   if (myDomElement.getXmlTag() == null) {
    addColoredFragment(getNodeName(),folder ? SimpleTextAttributes.GRAYED_BOLD_ATTRIBUTES : SimpleTextAttributes.GRAYED_ATTRIBUTES);
  }
 else   if (folder) {
    addColoredFragment(getNodeName(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
    final int childrenCount=getChildren().length;
    addColoredFragment(" (" + childrenCount + ')',SimpleTextAttributes.GRAY_ITALIC_ATTRIBUTES);
  }
 else {
    addColoredFragment(getNodeName(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
  return true;
}
