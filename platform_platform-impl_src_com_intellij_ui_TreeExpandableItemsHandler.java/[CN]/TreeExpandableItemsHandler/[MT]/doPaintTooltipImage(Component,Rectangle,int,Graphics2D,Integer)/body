{
  final boolean opaque=rComponent.isOpaque();
  if (rComponent instanceof JComponent) {
    ((JComponent)rComponent).setOpaque(true);
  }
  if (myComponent.isRowSelected(key)) {
    rComponent.setBackground(myComponent.hasFocus() ? UIUtil.getTreeSelectionBackground() : UIUtil.getListUnfocusedSelectionBackground());
  }
 else {
    rComponent.setBackground(UIUtil.getTreeTextBackground());
  }
  super.doPaintTooltipImage(rComponent,cellBounds,height,g,key);
  if (rComponent instanceof JComponent) {
    ((JComponent)rComponent).setOpaque(opaque);
  }
}
