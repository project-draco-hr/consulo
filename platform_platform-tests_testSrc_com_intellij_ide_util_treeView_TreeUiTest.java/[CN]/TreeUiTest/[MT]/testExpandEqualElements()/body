{
  buildStructure(myRoot,false);
  notNull(myRoot.getChildNode("org")).addChild("jetbrains").addChild("community").addChild("ide");
  activate();
  expand(getPath("/"));
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      myTree.expandPath(getPath("org"));
      myTree.setSelectionPath(myTree.getPathForRow(5));
    }
  }
);
  assertTree("-/\n" + " +com\n" + " +jetbrains\n"+ " -org\n"+ "  +eclipse\n"+ "  +[jetbrains]\n"+ " +xUnit\n");
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      myTree.expandPath(myTree.getPathForRow(5));
    }
  }
);
  assertTree("-/\n" + " +com\n" + " +jetbrains\n"+ " -org\n"+ "  +eclipse\n"+ "  -[jetbrains]\n"+ "   +community\n"+ " +xUnit\n");
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      myTree.expandPath(myTree.getPathForRow(6));
    }
  }
);
  assertTree("-/\n" + " +com\n" + " +jetbrains\n"+ " -org\n"+ "  +eclipse\n"+ "  -[jetbrains]\n"+ "   -community\n"+ "    ide\n"+ " +xUnit\n");
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      myTree.collapsePath(myTree.getPathForRow(5));
    }
  }
);
  assertTree("-/\n" + " +com\n" + " +jetbrains\n"+ " -org\n"+ "  +eclipse\n"+ "  +[jetbrains]\n"+ " +xUnit\n");
  doAndWaitForBuilder(new Runnable(){
    @Override public void run(){
      myTree.expandPath(myTree.getPathForRow(5));
    }
  }
);
  assertTree("-/\n" + " +com\n" + " +jetbrains\n"+ " -org\n"+ "  +eclipse\n"+ "  -[jetbrains]\n"+ "   +community\n"+ " +xUnit\n");
}
