{
  try {
    final Document doc;
    if (ModuleType.get(module) instanceof JavaModuleType) {
      doc=JDOMUtil.loadDocument(DotProjectFileHelper.class.getResource("template.project.xml"));
    }
 else {
      doc=JDOMUtil.loadDocument(DotProjectFileHelper.class.getResource("template.empty.project.xml"));
    }
    final Element nameElement=doc.getRootElement().getChild(EclipseXml.NAME_TAG);
    nameElement.setText(module.getName());
    final File projectFile=new File(storageRoot,EclipseXml.PROJECT_FILE);
    if (!FileUtil.createIfDoesntExist(projectFile))     return;
    EclipseJDOMUtil.output(doc,projectFile,module.getProject());
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        LocalFileSystem.getInstance().refreshAndFindFileByPath(FileUtil.toSystemIndependentName(projectFile.getPath()));
      }
    }
);
  }
 catch (  JDOMException e) {
    LOG.error(e);
  }
}
