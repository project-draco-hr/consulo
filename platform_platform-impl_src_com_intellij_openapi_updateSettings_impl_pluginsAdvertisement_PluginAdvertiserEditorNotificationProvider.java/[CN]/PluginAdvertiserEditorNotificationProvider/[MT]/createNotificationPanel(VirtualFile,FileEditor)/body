{
  if (file.getFileType() != PlainTextFileType.INSTANCE && !(file.getFileType() instanceof AbstractFileType))   return null;
  final String extension=file.getExtension();
  if (extension == null) {
    return null;
  }
  if (myEnabledExtensions.contains(extension) || UnknownFeaturesCollector.getInstance(myProject).isIgnored(createFileFeatureForIgnoring(file)))   return null;
  UnknownExtension fileFeatureForChecking=new UnknownExtension(FileTypeFactory.FILE_TYPE_FACTORY_EP.getName(),file.getName());
  List<IdeaPluginDescriptor> allPlugins=PluginsAdvertiser.getLoadedPluginDescriptors();
  Set<IdeaPluginDescriptor> byFeature=PluginsAdvertiser.findByFeature(allPlugins,fileFeatureForChecking);
  if (!byFeature.isEmpty()) {
    return createPanel(file,byFeature,allPlugins);
  }
  return null;
}
