{
  PsiType qualifierType=originalQualifierType instanceof PsiDisjunctionType ? ((PsiDisjunctionType)originalQualifierType).getLeastUpperBound() : originalQualifierType;
  if (qualifierType instanceof PsiIntersectionType) {
    for (    PsiType conjunct : ((PsiIntersectionType)qualifierType).getConjuncts()) {
      if (!processQualifierType(processor,conjunct,state,place))       return false;
    }
    return true;
  }
  if (qualifierType instanceof PsiClassType) {
    PsiClassType.ClassResolveResult qualifierResult=((PsiClassType)qualifierType).resolveGenerics();
    PsiClass qualifierClass=qualifierResult.getElement();
    if (qualifierClass != null) {
      if (!qualifierClass.processDeclarations(processor,state.put(PsiSubstitutor.KEY,qualifierResult.getSubstitutor()),null,place))       return false;
    }
  }
 else   if (qualifierType instanceof PsiArrayType) {
    final GrTypeDefinition arrayClass=GroovyPsiManager.getInstance(place.getProject()).getArrayClass();
    if (!arrayClass.processDeclarations(processor,state,null,place))     return false;
  }
  if (!(place.getParent() instanceof GrMethodCall)) {
    final PsiType componentType=getComponentTypeForSpreadDot(qualifierType,place);
    if (componentType != null) {
      final SpreadState spreadState=state.get(SpreadState.SPREAD_STATE);
      processQualifierType(processor,componentType,state.put(SpreadState.SPREAD_STATE,SpreadState.create(qualifierType,spreadState)),place);
    }
  }
  if (!ResolveUtil.processCategoryMembers(place,processor,state))   return false;
  if (!ResolveUtil.processNonCodeMembers(qualifierType,processor,place,state))   return false;
  return true;
}
