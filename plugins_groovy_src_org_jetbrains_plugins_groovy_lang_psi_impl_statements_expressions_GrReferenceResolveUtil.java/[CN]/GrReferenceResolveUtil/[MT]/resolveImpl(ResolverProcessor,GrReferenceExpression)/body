{
  GrExpression qualifier=place.getQualifier();
  if (qualifier == null) {
    if (processor instanceof MethodResolverProcessor || processor instanceof CompletionProcessor) {
      processStaticImports(place.getContainingFile(),processor,ResolveState.initial(),place);
      if (processor instanceof MethodResolverProcessor && ((MethodResolverProcessor)processor).hasApplicableCandidates()) {
        return false;
      }
    }
    if (!ResolveUtil.treeWalkUp(place,processor,true))     return false;
    if (!processor.hasCandidates()) {
      qualifier=PsiImplUtil.getRuntimeQualifier(place);
      if (qualifier != null) {
        if (!processQualifier(processor,qualifier,place))         return false;
      }
    }
  }
 else {
    if (place.getDotTokenType() == mSPREAD_DOT) {
      final PsiType qtype=qualifier.getType();
      final PsiType componentType=getComponentTypeForSpreadDot(qtype,place);
      if (componentType != null) {
        final ResolveState state=ResolveState.initial().put(ResolverProcessor.RESOLVE_CONTEXT,qualifier).put(SpreadState.SPREAD_STATE,SpreadState.create(qtype,null));
        if (!processQualifierType(processor,componentType,state,place))         return false;
      }
    }
 else {
      if (!processQualifier(processor,qualifier,place))       return false;
    }
    if (qualifier instanceof GrReferenceExpression && "class".equals(((GrReferenceExpression)qualifier).getReferenceName()) || qualifier instanceof GrThisReferenceExpression) {
      if (!processIfJavaLangClass(processor,qualifier.getType(),qualifier,place))       return false;
    }
  }
  return true;
}
