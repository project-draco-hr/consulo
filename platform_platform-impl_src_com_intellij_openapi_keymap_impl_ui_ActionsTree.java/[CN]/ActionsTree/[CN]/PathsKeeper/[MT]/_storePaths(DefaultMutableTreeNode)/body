{
  ArrayList<TreeNode> childNodes=childrenToArray(root);
  for (  final Object childNode1 : childNodes) {
    DefaultMutableTreeNode childNode=(DefaultMutableTreeNode)childNode1;
    TreePath path=new TreePath(childNode.getPath());
    if (myTree.isPathSelected(path)) {
      addPathToList(childNode,mySelectionPaths);
    }
    if ((myTree.isExpanded(path) || childNode.getChildCount() == 0) && !childNode.isLeaf()) {
      addPathToList(childNode,myPathsToExpand);
      _storePaths(childNode);
    }
  }
}
