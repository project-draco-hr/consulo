{
  if (!PsiInvalidElementAccessException.isTrackingInvalidation()) {
    return null;
  }
  if (PsiInvalidElementAccessException.findInvalidationTrace(treeElement) != null) {
    return null;
  }
  Object trace=ourPsiModificationTrace.get();
  if (trace == null) {
    trace=new Throwable();
    LOG.info("PSI invalidated outside transaction",(Throwable)trace);
  }
  return trace;
}
