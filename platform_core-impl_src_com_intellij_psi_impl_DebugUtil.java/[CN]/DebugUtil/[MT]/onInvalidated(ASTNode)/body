{
  if (!PsiInvalidElementAccessException.isTrackingInvalidation()) {
    return;
  }
  if (PsiInvalidElementAccessException.findInvalidationTrace(treeElement) != null) {
    return;
  }
  Object trace=ourPsiModificationTrace.get();
  if (trace == null) {
    trace=new Throwable();
    LOG.info("PSI invalidated outside transaction",(Throwable)trace);
  }
  PsiInvalidElementAccessException.setInvalidationTrace(treeElement,trace);
}
