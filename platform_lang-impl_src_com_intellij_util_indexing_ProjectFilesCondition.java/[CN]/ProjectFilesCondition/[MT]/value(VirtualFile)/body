{
  if (myIndexableFilesFilter != null && !myIndexableFilesFilter.containsFileId(((VirtualFileWithId)file).getId())) {
    if (myFilesFromOtherProjects >= MAX_FILES_TO_UPDATE_FROM_OTHER_PROJECT)     return false;
    ++myFilesFromOtherProjects;
    return true;
  }
  if (FileBasedIndexImpl.belongsToScope(file,myRestrictedTo,myFilter))   return true;
  if (myFilesFromOtherProjects < MAX_FILES_TO_UPDATE_FROM_OTHER_PROJECT) {
    ++myFilesFromOtherProjects;
    return true;
  }
  return false;
}
