{
  if (file instanceof NewVirtualFile) {
synchronized (LOCK) {
      final DataOutputStream os=FRAMEWORK_FILE_ATTRIBUTE.writeAttribute(file);
      try {
        try {
          IOUtil.writeString(StringUtil.notNullize(value),os);
        }
  finally {
          os.close();
        }
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
 else {
    file.putUserData(FRAMEWORK_FILE_MARKER,value);
  }
}
