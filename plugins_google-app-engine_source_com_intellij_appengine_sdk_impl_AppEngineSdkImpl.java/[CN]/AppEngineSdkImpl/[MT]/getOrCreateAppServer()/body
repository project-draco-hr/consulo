{
  if (!isValid())   return null;
  final ApplicationServersManager serversManager=ApplicationServersManager.getInstance();
  final AppEngineServerIntegration integration=AppEngineServerIntegration.getInstance();
  final List<ApplicationServer> servers=serversManager.getApplicationServers(new AppServerIntegration[]{integration});
  File sdkHomeFile=new File(FileUtil.toSystemDependentName(myHomePath));
  for (  ApplicationServer server : servers) {
    final String path=((AppEngineServerData)server.getPersistentData()).getSdkPath();
    if (sdkHomeFile.equals(new File(FileUtil.toSystemDependentName(path)))) {
      return server;
    }
  }
  final ApplicationServersManager.ApplicationServersManagerModifiableModel model=serversManager.createModifiableModel();
  final AppEngineServerData serverData=new AppEngineServerData(myHomePath);
  final ApplicationServerInfo serverInfo;
  try {
    serverInfo=integration.getApplicationServerHelper().getApplicationServerInfo(serverData);
  }
 catch (  CantFindApplicationServerJarsException e) {
    LOG.info(e);
    return null;
  }
  UniqueNameGenerator generator=new UniqueNameGenerator(serversManager.getApplicationServers(),new NullableFunction<Object,String>(){
    public String fun(    Object o){
      return ((ApplicationServer)o).getName();
    }
  }
);
  final String name=generator.generateUniqueName(serverInfo.getDefaultName());
  final ApplicationServer server=model.createNewApplicationServer(name,serverInfo.getDefaultLibraries(),serverData);
  server.setSourceIntegrationName(integration.getPresentableName());
  new WriteAction(){
    protected void run(    final Result result){
      model.commit();
    }
  }
.execute();
  return server;
}
