{
  final FacetDetectorRegistryEx<AppEngineFacetConfiguration> registryEx=(FacetDetectorRegistryEx<AppEngineFacetConfiguration>)registry;
  FacetDetector<VirtualFile,AppEngineFacetConfiguration> detector=new FacetDetector<VirtualFile,AppEngineFacetConfiguration>(){
    @Override public AppEngineFacetConfiguration detectFacet(    VirtualFile source,    Collection<AppEngineFacetConfiguration> existentFacetConfigurations){
      if (!existentFacetConfigurations.isEmpty()) {
        return existentFacetConfigurations.iterator().next();
      }
      return new AppEngineFacetConfiguration();
    }
  }
;
  registryEx.registerUniversalDetectorByFileNameAndRootTag(AppEngineUtil.APPENGINE_WEB_XML_NAME,"appengine-web-app",detector,WebUtilImpl.BY_PARENT_WEB_ROOT_SELECTOR);
}
