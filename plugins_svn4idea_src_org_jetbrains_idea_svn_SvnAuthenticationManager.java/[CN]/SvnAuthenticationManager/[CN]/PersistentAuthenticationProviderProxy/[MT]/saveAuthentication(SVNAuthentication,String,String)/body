{
  try {
    final SvnAuthWrapperEqualable newKey=new SvnAuthWrapperEqualable(auth);
    final Long recent=myRewritePreventer.get(newKey);
    final long currTime=System.currentTimeMillis();
    File dir=new File(myAuthDir,kind);
    String fileName=SVNFileUtil.computeChecksum(realm);
    File authFile=new File(dir,fileName);
    if ((!authFile.exists()) || recent == null || ((recent != null) && ((currTime - recent.longValue()) > ourRefreshInterval))) {
      if (auth.isStorageAllowed() && ISVNAuthenticationManager.USERNAME != kind) {
        try {
          GuiUtils.runOrInvokeAndWait(new Runnable(){
            public void run(){
              checkContinueSaveCredentials(auth,kind,realm);
            }
          }
);
        }
 catch (        InvocationTargetException e) {
          LOG.error(e);
        }
catch (        InterruptedException e) {
          LOG.error(e);
        }
      }
      ((DefaultSVNAuthenticationManager.IPersistentAuthenticationProvider)myDelegate).saveAuthentication(auth,kind,realm);
      setWriteable(authFile);
      myRewritePreventer.put(newKey,currTime);
    }
  }
 catch (  final SVNException e) {
    if (myProject == null)     return;
    ApplicationManager.getApplication().invokeLater(new ChangesViewBalloonProblemNotifier(myProject,"<b>Problem when storing Subversion credentials:</b>&nbsp;" + e.getMessage(),MessageType.ERROR));
  }
}
