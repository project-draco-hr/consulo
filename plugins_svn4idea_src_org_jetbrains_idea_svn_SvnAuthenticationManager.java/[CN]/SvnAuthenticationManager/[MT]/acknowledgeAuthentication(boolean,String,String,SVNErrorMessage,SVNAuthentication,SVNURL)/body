{
  SSLExceptionsHelper.removeInfo();
  ourThreadLocalProvider.remove();
  if (url != null) {
    CommonProxy.getInstance().removeNoProxy(url.getProtocol(),url.getHost(),url.getPort());
  }
  boolean successSaving=false;
  myListener.getMulticaster().acknowledge(accepted,kind,realm,errorMessage,authentication);
  try {
    final boolean authStorageEnabled=getHostOptionsProvider().getHostOptions(authentication.getURL()).isAuthStorageEnabled();
    final SVNAuthentication proxy=ProxySvnAuthentication.proxy(authentication,authStorageEnabled,myArtificialSaving);
    super.acknowledgeAuthentication(accepted,kind,realm,errorMessage,proxy);
    successSaving=true;
  }
  finally {
    mySavePermissions.remove();
    if (myArtificialSaving) {
      throw new CredentialsSavedException(successSaving);
    }
  }
}
