{
  ArrayList<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
  HighlightManager highlightManager=null;
  if (context.editor != null) {
    highlightManager=HighlightManager.getInstance(context.project);
    EditorColorsManager colorsManager=EditorColorsManager.getInstance();
    TextAttributes attributes=colorsManager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
    if (context.occurrences.length > 1) {
      highlightManager.addOccurrenceHighlights(context.editor,context.occurrences,attributes,true,highlighters);
    }
  }
  GrIntroduceDialog<Settings> dialog=getDialog(context);
  dialog.show();
  if (dialog.isOK()) {
    if (context.editor != null) {
      for (      RangeHighlighter highlighter : highlighters) {
        highlightManager.removeSegmentHighlighter(context.editor,highlighter);
      }
    }
    return dialog.getSettings();
  }
 else {
    if (context.occurrences.length > 1) {
      WindowManager.getInstance().getStatusBar(context.project).setInfo(GroovyRefactoringBundle.message("press.escape.to.remove.the.highlighting"));
    }
  }
  return null;
}
