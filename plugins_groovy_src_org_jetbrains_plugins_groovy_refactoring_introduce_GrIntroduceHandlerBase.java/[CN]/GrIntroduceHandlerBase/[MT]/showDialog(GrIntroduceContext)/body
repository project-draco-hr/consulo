{
  ArrayList<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
  HighlightManager highlightManager=null;
  if (context.getEditor() != null) {
    highlightManager=HighlightManager.getInstance(context.getProject());
    EditorColorsManager colorsManager=EditorColorsManager.getInstance();
    TextAttributes attributes=colorsManager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
    if (context.getOccurrences().length > 1) {
      highlightManager.addOccurrenceHighlights(context.getEditor(),context.getOccurrences(),attributes,true,highlighters);
    }
  }
  GrIntroduceDialog<Settings> dialog=getDialog(context);
  dialog.show();
  if (dialog.isOK()) {
    if (context.getEditor() != null) {
      for (      RangeHighlighter highlighter : highlighters) {
        highlightManager.removeSegmentHighlighter(context.getEditor(),highlighter);
      }
    }
    return dialog.getSettings();
  }
 else {
    if (context.getOccurrences().length > 1) {
      WindowManager.getInstance().getStatusBar(context.getProject()).setInfo(GroovyRefactoringBundle.message("press.escape.to.remove.the.highlighting"));
    }
  }
  return null;
}
