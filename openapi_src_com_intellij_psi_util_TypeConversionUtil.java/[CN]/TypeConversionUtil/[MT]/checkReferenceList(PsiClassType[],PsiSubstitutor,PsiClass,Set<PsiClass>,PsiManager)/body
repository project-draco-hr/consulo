{
  final PsiClassType[] extendsReferences=types;
  for (int i=0; i < extendsReferences.length; i++) {
    final PsiClassType type=extendsReferences[i];
    final PsiType substitutedType=candidateSubstitutor.substitute(type);
    LOG.assertTrue(substitutedType instanceof PsiClassType);
    final ResolveResult result=((PsiClassType)substitutedType).resolveGenerics();
    final PsiElement newCandidate=result.getElement();
    if (newCandidate != null) {
      final PsiSubstitutor substitutor=result.getSubstitutor();
      final PsiSubstitutor newSubstitutor=getSuperClassSubstitutorInner(base,(PsiClass)newCandidate,substitutor,set,manager);
      if (newSubstitutor != null) {
        return type.isRaw() ? manager.getElementFactory().createRawSubstitutor(base) : newSubstitutor;
      }
    }
  }
  return null;
}
