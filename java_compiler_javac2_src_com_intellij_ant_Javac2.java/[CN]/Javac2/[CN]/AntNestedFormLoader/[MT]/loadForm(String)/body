{
  if (myFormCache.containsKey(formFileName)) {
    return (LwRootContainer)myFormCache.get(formFileName);
  }
  String formFileFullName=formFileName.toLowerCase();
  log("Searching for form " + formFileFullName,Project.MSG_VERBOSE);
  for (Iterator iterator=myFormFiles.iterator(); iterator.hasNext(); ) {
    File file=(File)iterator.next();
    String name=file.getAbsolutePath().replace(File.separatorChar,'/').toLowerCase();
    log("Comparing with " + name,Project.MSG_VERBOSE);
    if (name.endsWith(formFileFullName)) {
      return loadForm(formFileName,new FileInputStream(file));
    }
  }
  if (myNestedFormDirs != null) {
    String[] list=myNestedFormDirs.list();
    for (int i=0, listLength=list.length; i < listLength; i++) {
      String formPath=list[i];
      if (!formPath.endsWith("/")) {
        formPath+="/";
      }
      if (formFileFullName.startsWith("/")) {
        formPath+=formFileName.substring(1);
      }
 else {
        formPath+=formFileName;
      }
      File formFile=new File(formPath.replace('/',File.separatorChar));
      if (formFile.isFile()) {
        return loadForm(formFileName,new FileInputStream(formFile));
      }
    }
  }
  InputStream resourceStream=myLoader.getResourceAsStream(formFileName);
  if (resourceStream != null) {
    return loadForm(formFileName,resourceStream);
  }
  throw new Exception("Cannot find nested form file " + formFileName);
}
