{
  try {
    final Semaphore s=new Semaphore(1);
    s.acquire();
    VirtualFileManager.getInstance().refresh(async,new Runnable(){
      @Override public void run(){
        s.release();
      }
    }
);
    assertTrue(s.tryAcquire(1,TimeUnit.MINUTES));
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
}
