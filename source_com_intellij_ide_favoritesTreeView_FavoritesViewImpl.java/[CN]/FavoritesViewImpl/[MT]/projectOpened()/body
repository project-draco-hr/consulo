{
  StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
    public void run(){
      ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
      ToolWindow toolWindow=toolWindowManager.registerToolWindow(ToolWindowId.FAVORITES_VIEW,getComponent(),ToolWindowAnchor.RIGHT);
      toolWindow.setIcon(IconLoader.getIcon("/general/toolWindowMessages.png"));
      new ContentManagerWatcher(toolWindow,FavoritesViewImpl.this);
      final ContentFactory contentFactory=PeerFactory.getInstance().getContentFactory();
      if (myName2FavoritesListSet.isEmpty()) {
        final FavoritesTreeViewPanel panel=new FavoritesTreeViewPanel(myProject,null,myProject.getName());
        final Content favoritesContent=contentFactory.createContent(panel,myProject.getName(),false);
        addContent(favoritesContent);
        myName2FavoritesListSet.put(myProject.getName(),favoritesContent);
        myCurrentFavoritesList=myProject.getName();
        panel.getFavoritesTreeStructure().initFavoritesList();
      }
 else {
        for (Iterator<String> iterator=myName2FavoritesListSet.keySet().iterator(); iterator.hasNext(); ) {
          final String key=iterator.next();
          final Content content=myName2FavoritesListSet.get(key);
          addContent(content);
          ((FavoritesTreeViewPanel)content.getComponent()).getFavoritesTreeStructure().initFavoritesList();
          if (key.equals(myCurrentFavoritesList)) {
            setSelectedContent(content);
          }
        }
      }
    }
  }
);
}
