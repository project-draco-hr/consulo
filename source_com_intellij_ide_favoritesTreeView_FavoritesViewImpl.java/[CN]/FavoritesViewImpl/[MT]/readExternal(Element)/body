{
  final DefaultActionGroup favoritesActionsGroup=((DefaultActionGroup)ActionManager.getInstance().getAction(IdeActions.ADD_TO_FAVORITES));
  favoritesActionsGroup.removeAll();
  favoritesActionsGroup.add(new AddToNewFavoritesListAction());
  favoritesActionsGroup.addSeparator();
  for (Iterator<Element> iterator=element.getChildren("favorites_list").iterator(); iterator.hasNext(); ) {
    Element el=iterator.next();
    final String name=el.getAttributeValue("name");
    final ContentFactory contentFactory=PeerFactory.getInstance().getContentFactory();
    final FavoritesTreeViewPanel favoritesPanel=new FavoritesTreeViewPanel(myProject,null,name);
    myName2FavoritesListSet.put(name,contentFactory.createContent(favoritesPanel,name,false));
    final AddToFavoritesAction addAction=new AddToFavoritesAction(name);
    myActions.put(name,addAction);
    favoritesActionsGroup.add(addAction);
    favoritesPanel.getFavoritesTreeStructure().readExternal(el);
  }
  DefaultJDOMExternalizer.readExternal(this,element);
}
