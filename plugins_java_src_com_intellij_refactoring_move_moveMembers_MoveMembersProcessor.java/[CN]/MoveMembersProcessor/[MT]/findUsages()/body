{
  final List<UsageInfo> usagesList=new ArrayList<UsageInfo>();
  for (  PsiMember member : myMembersToMove) {
    for (    PsiReference psiReference : ReferencesSearch.search(member)) {
      PsiElement ref=psiReference.getElement();
      final MoveMemberHandler handler=MoveMemberHandler.EP_NAME.forLanguage(ref.getLanguage());
      MoveMembersUsageInfo usage=null;
      if (handler != null) {
        usage=handler.getUsage(member,psiReference,myMembersToMove,myTargetClass);
      }
      if (usage != null) {
        usagesList.add(usage);
      }
 else {
        if (!isInMovedElement(ref)) {
          usagesList.add(new MoveMembersUsageInfo(member,ref,null,ref,psiReference));
        }
      }
    }
  }
  UsageInfo[] usageInfos=usagesList.toArray(new UsageInfo[usagesList.size()]);
  usageInfos=UsageViewUtil.removeDuplicatedUsages(usageInfos);
  return usageInfos;
}
