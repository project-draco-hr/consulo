{
  if (settings != null && settings.getDistributionType() == DistributionType.WRAPPED) {
    myHelper.ensureInstalledWrapper(id,projectPath,settings,listener);
  }
  Function<ProjectConnection,Void> f=new Function<ProjectConnection,Void>(){
    @Override public Void fun(    ProjectConnection connection){
      BuildLauncher launcher=myHelper.getBuildLauncher(id,connection,settings,listener);
      if (!StringUtil.isEmpty(vmOptions)) {
        try {
          final File tempFile=FileUtil.createTempFile("init",".gradle");
          tempFile.deleteOnExit();
          final String[] lines={"gradle.taskGraph.beforeTask { Task task ->","    if (task instanceof JavaForkOptions) {","        task.jvmArgs '" + vmOptions.trim() + '\'',"}}"};
          FileUtil.writeToFile(tempFile,StringUtil.join(lines,SystemProperties.getLineSeparator()));
          launcher.withArguments("--init-script",tempFile.getAbsolutePath());
        }
 catch (        IOException e) {
          throw new ExternalSystemException(e);
        }
      }
      launcher.forTasks(ArrayUtil.toStringArray(taskNames));
      launcher.run();
      return null;
    }
  }
;
  myHelper.execute(projectPath,settings,f);
}
