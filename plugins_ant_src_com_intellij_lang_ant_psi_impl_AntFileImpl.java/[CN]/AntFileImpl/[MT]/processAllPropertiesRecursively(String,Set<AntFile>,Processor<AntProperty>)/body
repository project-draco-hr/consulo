{
  if (name == null || processed.contains(this)) {
    return;
  }
  processed.add(this);
  try {
synchronized (PsiLock.LOCK) {
      if (myProperties != null) {
        final List<AntProperty> antProperties=myProperties.get(name);
        if (antProperties != null) {
          for (          AntProperty property : antProperties) {
            if (!processor.process(property)) {
              return;
            }
          }
        }
      }
    }
    final AntProject antProject=getAntProject();
    if (antProject != null) {
      for (      AntFile imported : antProject.getImportedFiles()) {
        if (imported instanceof AntFileImpl) {
          ((AntFileImpl)imported).processAllPropertiesRecursively(name,processed,processor);
        }
 else {
          imported.processAllProperties(name,processor);
        }
      }
    }
  }
  finally {
    processed.remove(this);
  }
}
