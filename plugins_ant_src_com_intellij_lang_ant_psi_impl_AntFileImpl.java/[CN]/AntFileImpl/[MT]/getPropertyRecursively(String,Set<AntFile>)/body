{
  if (name == null || processed.contains(this)) {
    return null;
  }
  processed.add(this);
  try {
    AntProperty antProperty;
synchronized (PsiLock.LOCK) {
      if (myProperties != null) {
        final List<AntProperty> antProperties=myProperties.get(name);
        antProperty=antProperties != null && !antProperties.isEmpty() ? antProperties.get(0) : null;
      }
 else {
        antProperty=null;
      }
    }
    if (antProperty == null) {
      final AntProject antProject=getAntProject();
      if (antProject != null) {
        for (        AntFile imported : antProject.getImportedFiles()) {
          antProperty=(imported instanceof AntFileImpl) ? ((AntFileImpl)imported).getPropertyRecursively(name,processed) : imported.getProperty(name);
          if (antProperty != null) {
            break;
          }
        }
      }
    }
    return antProperty;
  }
  finally {
    processed.remove(this);
  }
}
