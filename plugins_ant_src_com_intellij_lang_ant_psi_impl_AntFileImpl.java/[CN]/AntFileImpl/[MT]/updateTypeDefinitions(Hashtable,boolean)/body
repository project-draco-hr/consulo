{
  if (ht == null)   return;
  final Enumeration types=ht.keys();
  while (types.hasMoreElements()) {
    String typeName=(String)types.nextElement();
    if (isTask && typeName.equals("javadoc2")) {
      typeName="javadoc";
    }
    final Class typeClass=(Class)ht.get(typeName);
    final AntTypeDefinition def=createTypeDefinition(new AntTypeId(typeName),typeClass,isTask);
    if (def != null) {
      myTypeDefinitions.put(def.getClassName(),def);
      final IntrospectionHelper helper=getHelperExceptionSafe(typeClass);
      if (helper != null) {
        final Enumeration nestedEnum=helper.getNestedElements();
        while (nestedEnum.hasMoreElements()) {
          final String nestedElement=(String)nestedEnum.nextElement();
          final Class clazz=(Class)helper.getNestedElementMap().get(nestedElement);
          if (myTypeDefinitions.get(clazz.getName()) == null) {
            AntTypeDefinition nestedDef=createTypeDefinition(new AntTypeId(nestedElement),clazz,false);
            if (nestedDef != null) {
              myTypeDefinitions.put(nestedDef.getClassName(),nestedDef);
            }
          }
        }
      }
    }
  }
}
