{
  return new WriteAction<VirtualFile>(){
    @Override protected void run(    Result<VirtualFile> result) throws Throwable {
      VirtualFile res=createDirectoryIfMissing(dir);
      result.setResult(res);
    }
  }
.execute().throwException().getResultObject();
}
