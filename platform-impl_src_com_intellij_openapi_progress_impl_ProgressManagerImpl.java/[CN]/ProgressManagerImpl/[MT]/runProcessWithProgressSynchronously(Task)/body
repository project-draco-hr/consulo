{
  final boolean result=((ApplicationEx)ApplicationManager.getApplication()).runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      task.run(ProgressManager.getInstance().getProgressIndicator());
    }
  }
,task.getTitle(),task.isCancellable(),task.getProject());
  if (result) {
    task.onSuccess();
  }
 else {
    task.onCancel();
  }
  return result;
}
