{
  final List<ExistingLibraryEditor> libraryEditors=new ArrayList<ExistingLibraryEditor>(myLibrary2EditorMap.values());
  myLibrary2EditorMap.clear();
  for (  ExistingLibraryEditor libraryEditor : libraryEditors) {
    libraryEditor.commit();
    Disposer.dispose(libraryEditor);
  }
  if (!libraryEditors.isEmpty() || !myRemovedLibraries.isEmpty() || myLibrariesModifiableModel != null && myLibrariesModifiableModel.isChanged()) {
    getLibrariesModifiableModel().commit();
    myLibrariesModifiableModel=null;
  }
  myRemovedLibraries.clear();
}
