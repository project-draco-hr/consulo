{
  for (  TopLevelParentClassProvider provider : EP_NAME.getExtensions()) {
    final PsiClass custom=provider.getCustomTopLevelParentClass(psiClass);
    if (custom != null)     return custom;
  }
  PsiClass enclosing=PsiTreeUtil.getParentOfType(psiClass,PsiClass.class,true);
  while (enclosing != null) {
    psiClass=enclosing;
    enclosing=PsiTreeUtil.getParentOfType(enclosing,PsiClass.class,true);
  }
  return psiClass;
}
