{
  final List<Module> modules=new ArrayList<Module>();
  for (  Module module : myContext.getModulesProvider().getModules()) {
    final AndroidFacet facet=AndroidFacet.getInstance(module);
    if (facet != null && !facet.getConfiguration().LIBRARY_PROJECT) {
      modules.add(module);
    }
  }
  final AndroidFacet facet=AndroidArtifactUtil.chooseAndroidApplicationModule(myContext.getProject(),modules);
  if (facet == null) {
    return null;
  }
  final CompositePackagingElement<?> rootElement=AndroidApplicationArtifactType.this.createRootElement(facet.getModule().getName());
  rootElement.addFirstChild(new AndroidFinalPackageElement(myContext.getProject(),facet));
  return new NewArtifactConfiguration(rootElement,facet.getModule().getName(),AndroidApplicationArtifactType.this);
}
