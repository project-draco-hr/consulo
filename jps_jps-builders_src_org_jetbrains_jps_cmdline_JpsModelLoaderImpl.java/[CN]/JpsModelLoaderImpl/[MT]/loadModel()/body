{
  final long start=System.currentTimeMillis();
  try {
    final JpsModel model=JpsElementFactory.getInstance().createModel();
    try {
      if (myGlobalOptionsPath != null) {
        JpsGlobalLoader.loadGlobalSettings(model.getGlobal(),myPathVars,myGlobalOptionsPath);
      }
      JpsProjectLoader.loadProject(model.getProject(),myPathVars,myProjectPath);
      if (myModelInitializer != null) {
        myModelInitializer.run(model);
      }
      LOG.info("New JPS model: " + model.getProject().getModules().size() + " modules, "+ model.getProject().getLibraryCollection().getLibraries().size()+ " libraries");
    }
 catch (    IOException e) {
      LOG.info(e);
    }
    return model;
  }
  finally {
    final long loadTime=System.currentTimeMillis() - start;
    LOG.info("New JPS model: project " + myProjectPath + " loaded in "+ loadTime+ " ms");
  }
}
