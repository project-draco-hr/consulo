{
  final PsiClass containingClass=method.getContainingClass();
  if (containingClass == null) {
    return super.checkMethod(method,mgr,isOnTheFly);
  }
  if (!containingClass.isPhysical()) {
    return super.checkMethod(method,mgr,isOnTheFly);
  }
  if (isOnTheFly && !InspectionGadgetsPlugin.isEnabled()) {
    return super.checkMethod(method,mgr,isOnTheFly);
  }
  if (containingClass instanceof PsiAnonymousClass) {
    return super.checkClass(containingClass,mgr,isOnTheFly);
  }
  final BaseInspectionVisitor visitor=createVisitor(mgr,isOnTheFly);
  method.accept(visitor);
  return visitor.getErrors();
}
