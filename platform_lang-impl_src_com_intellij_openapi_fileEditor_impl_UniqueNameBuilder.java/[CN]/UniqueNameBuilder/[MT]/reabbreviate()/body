{
  Map<T,List<String>> segmentLists=new HashMap<T,List<String>>();
  for (  Map.Entry<T,String> entry : myPaths.entrySet()) {
    List<String> segments=splitIntoSegments(entry.getValue());
    String shortPath=StringUtil.join(segments,mySeparator);
    if (shortPath.length() <= myMaxLength) {
      if (addShortPath(entry.getKey(),segments)) {
        return true;
      }
    }
 else {
      segmentLists.put(entry.getKey(),segments);
    }
  }
  truncateSegments(segmentLists);
  for (  Map.Entry<T,List<String>> entry : segmentLists.entrySet()) {
    final List<String> segmentList=entry.getValue();
    Collections.reverse(segmentList);
    String shortPath=StringUtil.join(segmentList,mySeparator);
    if (myShortPaths.containsValue(shortPath)) {
      return true;
    }
    myShortPaths.put(entry.getKey(),shortPath);
  }
  return false;
}
