{
  Module module=facet.getModule();
  String sourceRootPath=facet.getAidlGenSourceRootPath();
  if (sourceRootPath == null) {
    myContext.addMessage(CompilerMessageCategory.ERROR,AndroidBundle.message("android.compilation.error.apt.gen.not.specified",module.getName()),null,-1,-1);
    return;
  }
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(myProject).getFileIndex();
  IdlGenerationItem generationItem=new IdlGenerationItem(module,file,sourceRootPath,fileIndex.isInTestSourceContent(file),target,packageName);
  if (myContext.isMake()) {
    File generatedFile=generationItem.myGeneratedFile;
    if (generatedFile == null || !generatedFile.exists() || generatedFile.lastModified() <= file.getModificationCount()) {
      AndroidCompileUtil.createSourceRootIfNotExist(sourceRootPath,module);
      items.add(generationItem);
    }
  }
 else {
    AndroidCompileUtil.createSourceRootIfNotExist(sourceRootPath,module);
    items.add(generationItem);
  }
}
