{
  final Project project=getProject();
  LogModel logModel=EventLog.getLogModel(project);
  ToolWindow eventLog=EventLog.getEventLog(project);
  if (eventLog != null && eventLog.isVisible()) {
    logModel.logShown();
  }
  boolean stripesVisible=!UISettings.getInstance().HIDE_TOOL_STRIPES;
  ArrayList<Notification> notifications=logModel.getNotifications();
  LayeredIcon icon=new LayeredIcon(2);
  Icon statusIcon=getPendingNotificationsIcon(EMPTY_ICON,getMaximumType(notifications));
  icon.setIcon(statusIcon,0);
  final int count=notifications.size();
  if (count > 0) {
    icon.setIcon(new TextIcon(this,String.valueOf(count)),1,statusIcon.getIconWidth() - 2,0);
  }
  if (stripesVisible && eventLog != null) {
    eventLog.setIcon(icon);
    setIcon(null);
  }
 else {
    setIcon(icon);
  }
  setToolTipText(count > 0 ? String.format("%s notification%s pending",count,count == 1 ? "" : "s") : "No new notifications");
  myStatusBar.updateWidget(ID());
}
