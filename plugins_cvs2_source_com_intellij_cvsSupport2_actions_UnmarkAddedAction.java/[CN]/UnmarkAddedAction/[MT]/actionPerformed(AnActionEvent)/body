{
  VcsContext context=CvsContextWrapper.on(e);
  final VirtualFile[] selectedFiles=context.getSelectedFiles();
  ApplicationManager.getApplication().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      ProgressIndicator progressIndicator=ProgressManager.getInstance().getProgressIndicator();
      for (int i=0; i < selectedFiles.length; i++) {
        File file=CvsVfsUtil.getFileFor(selectedFiles[i]);
        if (progressIndicator != null) {
          progressIndicator.setFraction((double)i / (double)selectedFiles.length);
          progressIndicator.setText(file.getAbsolutePath());
        }
        CvsUtil.removeEntryFor(file);
      }
    }
  }
,"Undo 'Add'",true,context.getProject());
  VirtualFileManager.getInstance().refresh(true);
}
