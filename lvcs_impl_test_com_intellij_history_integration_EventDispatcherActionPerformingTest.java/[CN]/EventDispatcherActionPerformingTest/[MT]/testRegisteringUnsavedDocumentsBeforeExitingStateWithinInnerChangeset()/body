{
  vcs.beginChangeSet();
  vcs.createDirectory("dir");
  long timestamp2=-1;
  vcs.createFile("dir/one",null,timestamp2,false);
  long timestamp=-1;
  vcs.createFile("dir/two",null,timestamp,false);
  vcs.endChangeSet(null);
  d.startAction();
  long timestamp1=-1;
  vcs.createFile("dir/three",null,timestamp1,false);
  gateway.addUnsavedDocument("dir/one","one");
  gateway.addUnsavedDocument("dir/two","two");
  d.finishAction(null);
  assertEquals(2,vcs.getRevisionsFor("dir").size());
}
