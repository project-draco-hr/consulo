{
  if (!(event.getMessage() instanceof HttpRequest)) {
    context.sendUpstream(event);
  }
  HttpRequest request=(HttpRequest)event.getMessage();
  QueryStringDecoder urlDecoder=new QueryStringDecoder(request.getUri());
  if (urlDecoder.getPath().equals(START_TIME_PATH)) {
    HttpResponse response=new DefaultHttpResponse(HTTP_1_1,OK);
    response.setHeader("Access-Control-Allow-Origin","*");
    response.setContent(ChannelBuffers.copiedBuffer(getApplicationStartTime(),CharsetUtil.US_ASCII));
    Responses.addServer(response);
    Responses.addDate(response);
    Responses.send(response,context);
    return;
  }
  HttpRequestHandler connectedHandler=(HttpRequestHandler)context.getAttachment();
  if (connectedHandler == null) {
    for (    HttpRequestHandler handler : WebServerManager.EP_NAME.getExtensions()) {
      try {
        if (handler.isSupported(request.getMethod()) && handler.process(urlDecoder,request,context)) {
          if (context.getAttachment() == null) {
            context.setAttachment(handler);
          }
          return;
        }
      }
 catch (      Throwable e) {
        LOG.error(e);
      }
    }
  }
 else   if (connectedHandler.isSupported(request.getMethod())) {
    connectedHandler.process(urlDecoder,request,context);
    return;
  }
  Responses.sendError(request,context,NOT_FOUND);
}
