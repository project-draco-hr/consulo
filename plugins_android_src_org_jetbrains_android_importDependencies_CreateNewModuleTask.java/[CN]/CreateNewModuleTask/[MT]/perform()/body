{
  final Module depModule=ApplicationManager.getApplication().runWriteAction(new Computable<Module>(){
    @Override public Module compute(){
      final Module depModule=ModuleManager.getInstance(myProject).newModule(myContentRoot.getPath() + '/' + myContentRoot.getName()+ ".iml");
      final ModifiableRootModel model=ModuleRootManager.getInstance(depModule).getModifiableModel();
      model.addContentEntry(myContentRoot);
      model.commit();
      return depModule;
    }
  }
);
  if (AndroidFacet.getInstance(depModule) == null) {
    AndroidUtils.addAndroidFacetInWriteAction(depModule,myContentRoot,true);
  }
  AndroidSdkUtils.setupAndroidPlatformInNecessary(depModule,false);
  setDepModule(depModule);
  return null;
}
