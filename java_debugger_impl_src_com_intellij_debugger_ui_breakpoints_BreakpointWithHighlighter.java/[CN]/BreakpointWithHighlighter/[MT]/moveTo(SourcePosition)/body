{
  if (!canMoveTo(position)) {
    return false;
  }
  final PsiFile psiFile=position.getFile();
  final PsiFile oldFile=getSourcePosition().getFile();
  final Document document=PsiDocumentManager.getInstance(getProject()).getDocument(psiFile);
  final Document oldDocument=PsiDocumentManager.getInstance(getProject()).getDocument(oldFile);
  if (document == null || oldDocument == null) {
    return false;
  }
  final RangeHighlighter newHighlighter=createHighlighter(myProject,document,position.getLine());
  if (newHighlighter == null) {
    return false;
  }
  final RangeHighlighter oldHighlighter=myHighlighter;
  myHighlighter=newHighlighter;
  reload();
  if (!isValid()) {
    oldDocument.getMarkupModel(myProject).removeHighlighter(myHighlighter);
    myHighlighter=oldHighlighter;
    reload();
    return false;
  }
  oldDocument.getMarkupModel(myProject).removeHighlighter(oldHighlighter);
  DebuggerManagerEx.getInstanceEx(getProject()).getBreakpointManager().fireBreakpointChanged(this);
  updateUI();
  return true;
}
