{
  myTextFieldWithBrowseButton=new TextFieldWithBrowseButton(new ActionListener(){
    @Override public void actionPerformed(    final ActionEvent e){
      final FileChooserDescriptor fileChooserDescriptor=new FileChooserDescriptor(false,true,false,false,false,false){
        public String getName(        final VirtualFile virtualFile){
          return virtualFile.getName();
        }
        @Nullable public String getComment(        final VirtualFile virtualFile){
          return virtualFile.getPresentableUrl();
        }
      }
;
      fileChooserDescriptor.setTitle("Select project destination folder");
      final String preselectedFolderPath=myTextFieldWithBrowseButton.getText();
      final VirtualFile preselectedFolder=LocalFileSystem.getInstance().findFileByPath(preselectedFolderPath);
      FileChooser.chooseFilesWithSlideEffect(fileChooserDescriptor,null,preselectedFolder,new Consumer<VirtualFile[]>(){
        @Override public void consume(        VirtualFile[] files){
          if (files.length > 0) {
            myTextFieldWithBrowseButton.setText(files[0].getPath());
          }
        }
      }
);
    }
  }
);
}
