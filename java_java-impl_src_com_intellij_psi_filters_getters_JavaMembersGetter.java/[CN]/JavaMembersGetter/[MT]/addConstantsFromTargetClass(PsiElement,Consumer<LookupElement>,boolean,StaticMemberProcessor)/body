{
  PsiElement parent=position.getParent();
  if (!(parent instanceof PsiReferenceExpression)) {
    return;
  }
  PsiElement prev=parent;
  parent=parent.getParent();
  while (parent instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)parent;
    final IElementType op=binaryExpression.getOperationTokenType();
    if (JavaTokenType.EQEQ == op || JavaTokenType.NE == op) {
      if (prev == binaryExpression.getROperand()) {
        processMembers(position,results,getCalledClass(binaryExpression.getLOperand()),false,searchInheritors,processor);
      }
      return;
    }
    prev=parent;
    parent=parent.getParent();
  }
  if (parent instanceof PsiExpressionList) {
    processMembers(position,results,getCalledClass(parent.getParent()),false,searchInheritors,processor);
  }
}
