{
  Element element=serialize(bean);
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  Transformer transformer=transformerFactory.newTransformer();
  DOMSource source=new DOMSource(element);
  ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
  StreamResult result=new StreamResult(byteArrayOutputStream);
  transformer.transform(source,result);
  String actualString=new String(byteArrayOutputStream.toByteArray()).trim();
  if (!expectedText.startsWith(XML_PREFIX)) {
    if (actualString.startsWith(XML_PREFIX))     actualString=actualString.substring(XML_PREFIX.length()).trim();
  }
  assertEquals(message,expectedText,actualString);
  return element;
}
