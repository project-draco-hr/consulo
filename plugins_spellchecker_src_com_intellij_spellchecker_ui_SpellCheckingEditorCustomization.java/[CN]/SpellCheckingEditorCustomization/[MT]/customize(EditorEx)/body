{
  boolean apply=isEnabled();
  if (!READY) {
    return;
  }
  Project project=editor.getProject();
  if (project == null) {
    return;
  }
  PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (file == null) {
    return;
  }
  Function<InspectionProfileWrapper,InspectionProfileWrapper> strategy=file.getUserData(InspectionProfileWrapper.CUSTOMIZATION_KEY);
  if (strategy == null) {
    file.putUserData(InspectionProfileWrapper.CUSTOMIZATION_KEY,strategy=new MyInspectionProfileStrategy());
  }
  if (!(strategy instanceof MyInspectionProfileStrategy)) {
    return;
  }
  ((MyInspectionProfileStrategy)strategy).setUseSpellCheck(apply);
  if (apply) {
    editor.putUserData(IntentionManager.SHOW_INTENTION_OPTIONS_KEY,false);
  }
  DaemonCodeAnalyzer analyzer=DaemonCodeAnalyzer.getInstance(project);
  if (analyzer != null) {
    analyzer.restart(file);
  }
}
