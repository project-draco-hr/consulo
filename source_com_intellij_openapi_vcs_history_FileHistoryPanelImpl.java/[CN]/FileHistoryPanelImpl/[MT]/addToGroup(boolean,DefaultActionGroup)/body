{
  if (popup) {
    result.add(ActionManager.getInstance().getAction(IdeActions.ACTION_EDIT_SOURCE));
  }
  result.add(new MyDiffAction());
  MyDiffWithCurrentAction diffWithCurrent=new MyDiffWithCurrentAction();
  if (!popup) {
    myDualView.installDoubleClickHandler(diffWithCurrent);
  }
  result.add(diffWithCurrent);
  result.add(new MyGetVersionAction());
  AnAction[] additionalActions=getHistoryProvider().getAdditionalActions();
  if (additionalActions != null) {
    for (int i=0; i < additionalActions.length; i++) {
      result.add(additionalActions[i]);
    }
  }
  result.add(new AnAction("Refresh","Refresh file history",IconLoader.getIcon("/actions/sync.png")){
    public void actionPerformed(    AnActionEvent e){
      refresh();
    }
  }
);
  if (!popup && supportsTree()) {
    result.add(new MyShowAsTreeAction());
  }
  return result;
}
