{
  try {
    revision1.loadContent();
    revision2.loadContent();
    VcsFileRevision left=revision1;
    VcsFileRevision right=revision2;
    if (VcsHistoryUtil.compare(revision1,revision2) > 0) {
      left=revision2;
      right=revision1;
    }
    byte[] content1=left.getContent();
    byte[] content2=right.getContent();
    SimpleDiffRequest diffData=new SimpleDiffRequest(myProject,myFilePath.getPresentableUrl());
    diffData.addHint(DiffTool.HINT_SHOW_FRAME);
    LOG.assertTrue(content1 != null);
    LOG.assertTrue(content2 != null);
    Document doc=myFilePath.getDocument();
    String charset=myFilePath.getCharset().name();
    FileType fileType=myFilePath.getFileType();
    diffData.setContentTitles(left.getRevisionNumber().asString(),right.getRevisionNumber().asString());
    diffData.setContents(createContent(project,content1,left,doc,charset,fileType),createContent(project,content2,right,doc,charset,fileType));
    DiffManager.getInstance().getDiffTool().show(diffData);
  }
 catch (  final VcsException e) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        Messages.showErrorDialog("Cannot show differences: " + e.getLocalizedMessage(),"Show Differences");
      }
    }
);
  }
catch (  IOException e) {
    LOG.error(e);
  }
catch (  ProcessCanceledException ex) {
    return;
  }
}
