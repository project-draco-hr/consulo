{
  super(contentManager,vcs.getVcsHistoryProvider().getHelpId());
  myVcs=vcs;
  myProject=project;
  myHistorySession=session;
  myFilePath=filePath;
  VcsHistoryProvider provider=vcs.getVcsHistoryProvider();
  COLUMNS=createColumnList(provider);
  myComments=new JTextArea();
  myComments.setRows(5);
  myComments.setEditable(false);
  HistoryAsTreeProvider treeHistoryProvider=provider.getTreeHistoryProvider();
  if (treeHistoryProvider != null) {
    myDualView=new DualView(new TreeNodeOnVcsRevision(null,treeHistoryProvider.createTreeOn(myHistorySession.getRevisionList())),COLUMNS,"cvs_file_history",project);
  }
 else {
    myDualView=new DualView(new TreeNodeOnVcsRevision(null,wrapWithTreeElements(myHistorySession.getRevisionList())),COLUMNS,"cvs_file_history",project);
    myDualView.switchToTheFlatMode();
  }
  createDualView(null);
  myPopupActions=createPopupActions();
  myUpdateAlarm.addRequest(new Runnable(){
    public void run(){
      final boolean refresh=myHistorySession.refresh();
      myUpdateAlarm.cancelAllRequests();
      myUpdateAlarm.addRequest(this,10000);
      if (refresh) {
        refresh();
      }
    }
  }
,10000);
  init();
  chooseView();
}
