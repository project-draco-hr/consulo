{
  final JavaPsiFacade facade=JavaPsiFacade.getInstance(getProject());
  final PsiPackage aPackage=facade.findPackage(packageName);
  final PsiPackage newParentPackage=facade.findPackage(newPackageName);
  assertNotNull(newParentPackage);
  final PsiDirectory[] dirs=newParentPackage.getDirectories();
  assertEquals(dirs.length,1);
  new MoveClassesOrPackagesProcessor(getProject(),new PsiElement[]{aPackage},new SingleSourceRootMoveDestination(PackageWrapper.create(newParentPackage),dirs[0]),true,false,null).run();
  FileDocumentManager.getInstance().saveAllDocuments();
}
