{
  if (text.length() == 0)   return Collections.emptyList();
  FontRenderContext fontRenderContext=view.getFontRenderContext();
  FontPreferences fontPreferences=view.getEditor().getColorsScheme().getFontPreferences();
  char[] chars=CharArrayUtil.fromSequence(text);
  List<BidiRun> runs=createRuns(view,chars,-1);
  for (  BidiRun run : runs) {
    for (    Chunk chunk : run.getChunks()) {
      chunk.fragments=new ArrayList<>();
      addFragments(run,chunk,chars,chunk.startOffset,chunk.endOffset,fontStyle,fontPreferences,fontRenderContext,null);
    }
  }
  return runs;
}
