{
  if (myRangeMarkers.isEmpty()) {
    return myTextChunks[0].getText();
  }
  int startOffset=ChunkExtractor.getStartOffset(myRangeMarkers);
  final PsiElement element=getElement();
  if (element != null && startOffset != -1) {
    final Document document=PsiDocumentManager.getInstance(element.getProject()).getDocument(element.getContainingFile());
    if (document != null) {
      int lineNumber=document.getLineNumber(startOffset);
      int lineStart=document.getLineStartOffset(lineNumber);
      int lineEnd=document.getLineEndOffset(lineNumber);
      return document.getCharsSequence().subSequence(lineStart,lineEnd).toString();
    }
  }
  return "";
}
