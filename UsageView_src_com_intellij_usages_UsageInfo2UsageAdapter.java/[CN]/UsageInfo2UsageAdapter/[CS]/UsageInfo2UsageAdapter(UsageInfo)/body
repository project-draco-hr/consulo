{
  myUsageInfo=usageInfo;
  PsiElement element=getElement();
  PsiFile psiFile=element.getContainingFile();
  Document document=PsiDocumentManager.getInstance(element.getProject()).getDocument(psiFile);
  TextRange range=element.getTextRange();
  int startOffset=range.getStartOffset() + myUsageInfo.startOffset;
  int endOffset=range.getStartOffset() + myUsageInfo.endOffset;
  myLineNumber=document.getLineNumber(startOffset);
  if (endOffset > document.getTextLength()) {
    LOG.assertTrue(false,"Invalid usage info, psiElement:" + element + " end offset: "+ endOffset+ " psiFile: "+ psiFile.getName());
  }
  myRangeMarkers.add(document.createRangeMarker(startOffset,endOffset));
  if (element instanceof PsiFile) {
    myIcon=null;
  }
 else {
    myIcon=element.getIcon(0);
  }
  initChunks();
  myUsagePresentation=new MyUsagePresentation();
}
