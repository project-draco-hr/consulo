{
  myColorsScheme=UsageTreeColorsScheme.getInstance().getScheme();
  myUsageInfo=usageInfo;
  PsiElement element=myUsageInfo.getElement();
  myPsiFile=element.getContainingFile();
  Project project=element.getProject();
  myDocument=PsiDocumentManager.getInstance(project).getDocument(myPsiFile);
  myShowReadAccessIcon=false;
  myShowWriteAccessIcon=false;
  TextRange range=element.getTextRange();
  int startOffset=range.getStartOffset() + usageInfo.startOffset;
  int endOffset=range.getStartOffset() + usageInfo.endOffset;
  myLineNumber=myDocument.getLineNumber(startOffset);
  int lineStartOffset=myDocument.getLineStartOffset(myLineNumber);
  myColumnNumber=startOffset - lineStartOffset;
  LOG.assertTrue(endOffset <= myDocument.getTextLength(),"Invalid usage info, psiElement:" + usageInfo.getElement() + " end offset: "+ endOffset+ " psiFile: "+ myPsiFile.getName());
  myRangeMarkers.add(myDocument.createRangeMarker(startOffset,endOffset));
  if (element instanceof PsiFile) {
    myIcon=null;
  }
 else {
    myIcon=element.getIcon(0);
    if (myIcon == null) {
      if (myShowReadAccessIcon || myShowWriteAccessIcon) {
        if (myShowWriteAccessIcon) {
          myIcon=Icons.VARIABLE_WRITE_ACCESS;
        }
 else {
          myIcon=Icons.VARIABLE_READ_ACCESS;
        }
      }
    }
  }
  initChunks();
}
