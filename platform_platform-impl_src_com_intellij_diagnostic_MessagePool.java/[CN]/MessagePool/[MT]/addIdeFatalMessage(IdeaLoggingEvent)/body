{
  LogMessage message=new LogMessage(aEvent);
  if (myIdeFatals.size() < MAX_POOL_SIZE_FOR_FATALS) {
    myFatalsGrouper.add(message);
    Throwable throwable=message.getThrowable();
    String title=throwable == null ? "IDE Fatal Error" : throwable.getClass().getSimpleName();
    Notification notification=NOTIFICATION_GROUP.createNotification(title,message.getMessage(),NotificationType.ERROR,null);
    notification.notify(null);
    message.setNotification(notification);
  }
 else   if (myIdeFatals.size() == MAX_POOL_SIZE_FOR_FATALS) {
    myFatalsGrouper.add(new LogMessage(new LoggingEvent(DiagnosticBundle.message("error.monitor.too.many.errors"),Category.getRoot(),Priority.ERROR,null,new TooManyErrorsException())));
  }
}
