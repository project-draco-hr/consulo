{
  ProgramRunner runner=getRunner(executor.getId(),configuration);
  if (runner == null) {
    LOG.error("Runner MUST not be null! Cannot find runner for " + executor.getId() + " and "+ configuration);
  }
  if (!RunManagerImpl.canRunConfiguration(configuration,executor)) {
    final boolean result=RunDialog.editConfiguration(project,configuration,"Edit configuration",executor.getActionName(),executor.getIcon());
    if (!result) {
      return;
    }
    while (!RunManagerImpl.canRunConfiguration(configuration,executor)) {
      if (0 == Messages.showOkCancelDialog(project,"Configuration is still wrong. Do you want to edit it again?","Change configuration settings",Messages.getErrorIcon())) {
        final boolean result2=RunDialog.editConfiguration(project,configuration,"Edit configuration",executor.getActionName(),executor.getIcon());
        if (!result2) {
          return;
        }
      }
 else {
        break;
      }
    }
  }
  try {
    runner.execute(executor,new ExecutionEnvironment(runner,configuration,project));
  }
 catch (  ExecutionException e) {
    ExecutionUtil.handleExecutionError(project,executor.getToolWindowId(),configuration.getConfiguration(),e);
  }
}
