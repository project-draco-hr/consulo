{
  JPanel mainPanel=new JPanel();
  mainPanel.setLayout(new BorderLayout());
  JPanel groupPanel=new JPanel(new GridBagLayout());
  final GridBagConstraints gridBagConstraints=new GridBagConstraints(0,0,1,1,0,0,GridBagConstraints.NORTHWEST,GridBagConstraints.NONE,new Insets(0,5,0,0),0,0);
  gridBagConstraints.insets.top=5;
  final JLabel initLabel=new JLabel(RefactoringBundle.message("initialize.in.border.title") + ":");
  initLabel.setDisplayedMnemonic('i');
  groupPanel.add(initLabel,gridBagConstraints);
  myInitialisersPlaceModel=new DefaultComboBoxModel();
  myInitialisersPlaceModel.addElement(BaseExpressionToFieldHandler.InitializationPlace.IN_CURRENT_METHOD);
  myInitialisersPlaceModel.addElement(BaseExpressionToFieldHandler.InitializationPlace.IN_FIELD_DECLARATION);
  myInitialisersPlaceModel.addElement(BaseExpressionToFieldHandler.InitializationPlace.IN_CONSTRUCTOR);
  if (TestUtil.isTestClass(myParentClass)) {
    myInitialisersPlaceModel.addElement(BaseExpressionToFieldHandler.InitializationPlace.IN_SETUP_METHOD);
  }
  myInitializerCombo=new JComboBox(myInitialisersPlaceModel);
  InplaceIntroduceConstantPopup.appendActions(myInitializerCombo,myParentClass.getProject());
  initLabel.setLabelFor(myInitializerCombo);
  myInitializerCombo.setRenderer(new ListCellRendererWrapper<BaseExpressionToFieldHandler.InitializationPlace>(myInitializerCombo){
    @Override public void customize(    JList list,    BaseExpressionToFieldHandler.InitializationPlace value,    int index,    boolean selected,    boolean hasFocus){
      if (value == BaseExpressionToFieldHandler.InitializationPlace.IN_CURRENT_METHOD) {
        setText("current method");
      }
 else       if (value == BaseExpressionToFieldHandler.InitializationPlace.IN_CONSTRUCTOR) {
        setText("constructor");
      }
 else       if (value == BaseExpressionToFieldHandler.InitializationPlace.IN_FIELD_DECLARATION) {
        setText("field declaration");
      }
 else {
        setText("setUp");
      }
    }
  }
);
  myInitializerCombo.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      itemListener.itemStateChanged(null);
      finalUpdater.itemStateChanged(null);
    }
  }
);
  gridBagConstraints.gridx=1;
  gridBagConstraints.insets.top=0;
  gridBagConstraints.insets.left=0;
  gridBagConstraints.fill=GridBagConstraints.HORIZONTAL;
  groupPanel.add(myInitializerCombo,gridBagConstraints);
  gridBagConstraints.gridx=0;
  gridBagConstraints.gridy=1;
  gridBagConstraints.insets.top=8;
  gridBagConstraints.insets.left=5;
  myVisibilityCombo=InplaceIntroduceConstantPopup.createVisibilityCombo(groupPanel,gridBagConstraints,myParentClass.getProject());
  mainPanel.add(groupPanel,BorderLayout.CENTER);
  return mainPanel;
}
