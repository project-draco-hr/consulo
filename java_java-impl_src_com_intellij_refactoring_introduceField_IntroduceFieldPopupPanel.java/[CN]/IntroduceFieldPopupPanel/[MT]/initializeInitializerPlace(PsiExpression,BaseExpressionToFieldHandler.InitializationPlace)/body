{
  if (initializerExpression != null) {
    setEnabledInitializationPlaces(initializerExpression,initializerExpression);
    if (!myAllowInitInMethod) {
      myInitialisersPlaceModel.removeElement(BaseExpressionToFieldHandler.InitializationPlace.IN_CURRENT_METHOD);
    }
  }
 else {
    myInitialisersPlaceModel.removeAllElements();
  }
  final PsiMethod setUpMethod=TestFrameworks.getInstance().findSetUpMethod(myParentClass);
  final boolean setupEnabled=myInitialisersPlaceModel.getIndexOf(BaseExpressionToFieldHandler.InitializationPlace.IN_SETUP_METHOD) > -1;
  if (ourLastInitializerPlace == BaseExpressionToFieldHandler.InitializationPlace.IN_SETUP_METHOD && setupEnabled && (myInitializerExpression != null && PsiTreeUtil.isAncestor(setUpMethod,myInitializerExpression,false) || TestFrameworks.getInstance().isTestClass(myParentClass))) {
    myInitialisersPlaceModel.setSelectedItem(BaseExpressionToFieldHandler.InitializationPlace.IN_SETUP_METHOD);
  }
 else   if (ourLastInitializerPlace == BaseExpressionToFieldHandler.InitializationPlace.IN_CONSTRUCTOR && myInitialisersPlaceModel.getIndexOf(BaseExpressionToFieldHandler.InitializationPlace.IN_CONSTRUCTOR) > -1 && myParentClass.getConstructors().length > 0) {
    myInitialisersPlaceModel.setSelectedItem(BaseExpressionToFieldHandler.InitializationPlace.IN_CONSTRUCTOR);
  }
 else   if (ourLastInitializerPlace == BaseExpressionToFieldHandler.InitializationPlace.IN_FIELD_DECLARATION && myInitialisersPlaceModel.getIndexOf(BaseExpressionToFieldHandler.InitializationPlace.IN_FIELD_DECLARATION) > -1) {
    myInitialisersPlaceModel.setSelectedItem(BaseExpressionToFieldHandler.InitializationPlace.IN_FIELD_DECLARATION);
  }
 else {
    selectInCurrentMethod();
  }
}
