def __init__(self, path, opener, pathjoiner):
    self.pathjoiner = pathjoiner
    self.path = self.pathjoiner(path, 'store')
    self.createmode = _calcmode(self.path)
    op = opener(self.path)
    op.createmode = self.createmode
    self.opener = (lambda f, *args, **kw: op(encodefilename(f), *args, **kw))
