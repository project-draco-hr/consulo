def __init__(self, path, opener, pathjoiner):
    self.pathjoiner = pathjoiner
    self.path = path
    self.createmode = _calcmode(path)
    op = opener(self.path)
    op.createmode = self.createmode
    self.opener = (lambda f, *args, **kw: op(encodedir(f), *args, **kw))
