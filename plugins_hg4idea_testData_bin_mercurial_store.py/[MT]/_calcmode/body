def _calcmode(path):
    try:
        mode = os.stat(path).st_mode
        if ((511 & (~ util.umask)) == (511 & mode)):
            mode = None
    except OSError:
        mode = None
    return mode
