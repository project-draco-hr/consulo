{
  final Semaphore sema=new Semaphore();
  sema.down();
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      MavenRunConfigurationType.runConfiguration(myProject,params,getMavenGeneralSettings(),new MavenRunnerSettings(),new ProgramRunner.Callback(){
        @Override public void processStarted(        final RunContentDescriptor descriptor){
          descriptor.getProcessHandler().addProcessListener(new ProcessAdapter(){
            @Override public void processTerminated(            ProcessEvent event){
              sema.up();
              UIUtil.invokeLaterIfNeeded(new Runnable(){
                @Override public void run(){
                  Disposer.dispose(descriptor);
                }
              }
);
            }
          }
);
        }
      }
);
    }
  }
);
  sema.waitFor();
}
