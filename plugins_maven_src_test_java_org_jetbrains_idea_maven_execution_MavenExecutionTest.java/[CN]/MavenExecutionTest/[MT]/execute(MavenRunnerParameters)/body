{
  final Semaphore sema=new Semaphore();
  sema.down();
  MapDataContext context=new MapDataContext();
  context.put(PlatformDataKeys.PROJECT,myProject);
  MavenRunConfigurationType.runConfiguration(myProject,params,getMavenGeneralSettings(),new MavenRunnerSettings(),context,new ProgramRunner.Callback(){
    public void processStarted(    final RunContentDescriptor descriptor){
      descriptor.getProcessHandler().addProcessListener(new ProcessAdapter(){
        @Override public void processTerminated(        ProcessEvent event){
          sema.up();
          descriptor.dispose();
        }
      }
);
    }
  }
);
  sema.waitFor();
}
