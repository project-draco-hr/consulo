{
  if (!checkActive) {
    fireLoggingWillBeStopped();
  }
  if (myReaderThread != null && myReaderThread.myReader != null) {
    if (!checkActive) {
      myReaderThread.stopRunning();
      try {
        myReaderThread.myReader.close();
      }
 catch (      IOException e) {
        LOG.warn(e);
      }
      myReaderThread.myReader=null;
      myReaderThread=null;
    }
 else {
      try {
        final BufferedReader reader=myReaderThread.myReader;
        while (reader != null && reader.ready()) {
          addMessage(reader.readLine());
        }
      }
 catch (      IOException ignore) {
      }
      stopRunning(false);
    }
  }
}
