{
  if (myContentPreprocessor != null) {
    List<LogFragment> fragments=myContentPreprocessor.parseLogLine(line + '\n');
    for (    LogFragment fragment : fragments) {
      ConsoleViewContentType consoleViewType=ConsoleViewContentType.getConsoleViewType(fragment.getOutputType());
      if (consoleViewType != null) {
        myConsole.print(fragment.getText(),consoleViewType);
      }
    }
    return line.length() + 1;
  }
 else {
    final LogFilterModel.MyProcessingResult processingResult=myModel.processLine(line);
    if (processingResult.isApplicable()) {
      final Key key=processingResult.getKey();
      if (key != null) {
        ConsoleViewContentType type=ConsoleViewContentType.getConsoleViewType(key);
        if (type != null) {
          final String messagePrefix=processingResult.getMessagePrefix();
          if (messagePrefix != null) {
            myConsole.print(messagePrefix,type);
          }
          myConsole.print(line + "\n",type);
          return (messagePrefix != null ? messagePrefix.length() : 0) + line.length() + 1;
        }
      }
    }
    return 0;
  }
}
