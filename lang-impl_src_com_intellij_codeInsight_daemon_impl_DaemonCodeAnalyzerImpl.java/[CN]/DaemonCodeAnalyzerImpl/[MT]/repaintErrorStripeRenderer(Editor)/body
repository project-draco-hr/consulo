{
  if (myProject.isDisposed())   return;
  final Document document=editor.getDocument();
  final PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
  final EditorMarkupModel markup=(EditorMarkupModel)editor.getMarkupModel();
  markup.setErrorStripeRenderer(new TrafficLightRenderer(myProject,this,document,psiFile));
  markup.setErrorPanelPopupHandler(new DaemonEditorPopup(psiFile));
  markup.setErrorStripTooltipRendererProvider(new DaemonTooltipRendererProvider(myProject));
  markup.setMinMarkHeight(DaemonCodeAnalyzerSettings.getInstance().ERROR_STRIPE_MARK_MIN_HEIGHT);
}
