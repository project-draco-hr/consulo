{
  List<HighlightInfo> highlights=getHighlights(document,myProject);
  if (highlights == null)   return null;
  List<HighlightInfo> foundInfoList=new SmartList<HighlightInfo>();
  for (  HighlightInfo info : highlights) {
    if (!isOffsetInsideHighlightInfo(offset,info,includeFixRange))     continue;
    if (!foundInfoList.isEmpty()) {
      HighlightInfo foundInfo=foundInfoList.get(0);
      if (SeverityRegistrar.getInstance(myProject).compare(foundInfo.getSeverity(),info.getSeverity()) < 0) {
        foundInfoList.clear();
      }
 else       if (SeverityRegistrar.getInstance(myProject).compare(info.getSeverity(),foundInfo.getSeverity()) < 0) {
        continue;
      }
    }
    foundInfoList.add(info);
  }
  if (foundInfoList.isEmpty())   return null;
  if (foundInfoList.size() == 1)   return foundInfoList.get(0);
  return new HighlightInfoComposite(foundInfoList);
}
