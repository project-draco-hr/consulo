{
  ApplicationManager.getApplication().assertIsDispatchThread();
  stripWarningsCoveredByErrors(project,highlightsToSet,markup);
  markup.putUserData(HIGHLIGHTS_IN_EDITOR_DOCUMENT_KEY,Collections.unmodifiableList(highlightsToSet));
  markup.putUserData(HIGHLIGHTS_TO_REMOVE_KEY,Collections.unmodifiableList(highlightsToRemove));
  DaemonCodeAnalyzer codeAnalyzer=DaemonCodeAnalyzer.getInstance(project);
  if (codeAnalyzer instanceof DaemonCodeAnalyzerImpl && ((DaemonCodeAnalyzerImpl)codeAnalyzer).myStatusBarUpdater != null) {
    ((DaemonCodeAnalyzerImpl)codeAnalyzer).myStatusBarUpdater.updateStatus();
  }
}
