{
  if (result == MergeResult.LEFT || result == MergeResult.RIGHT)   return null;
  String caption=MergeUtil.getResolveActionTitle(result,myMergeRequest,myMergeContext);
  return new AbstractAction(caption){
    @Override public void actionPerformed(    ActionEvent e){
      if (result == MergeResult.RESOLVED) {
        int unresolved=getUnresolvedCount();
        if (unresolved != 0 && Messages.showYesNoDialog(getComponent().getRootPane(),DiffBundle.message("apply.patch.partially.resolved.changes.confirmation.message",unresolved),DiffBundle.message("apply.partially.resolved.merge.dialog.title"),Messages.getQuestionIcon()) != Messages.YES) {
          return;
        }
      }
      if (result == MergeResult.CANCEL && !MergeUtil.showExitWithoutApplyingChangesDialog(MyApplyPatchViewer.this,myMergeRequest,myMergeContext)) {
        return;
      }
      myMergeContext.finishMerge(result);
    }
  }
;
}
