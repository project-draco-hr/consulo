{
  if (!UISettings.getInstance().SHOW_DIRECTORY_FOR_NON_UNIQUE_FILENAMES || DumbService.isDumb(project)) {
    return null;
  }
  VirtualFile parent=file.getParent();
  if (parent == null) {
    return null;
  }
  final PsiFile[] filesWithSameName=FilenameIndex.getFilesByName(project,file.getName(),ProjectScope.getProjectScope(project));
  if (filesWithSameName.length > 1) {
    return parent.getName() + File.separator + file.getPresentableName();
  }
  return null;
}
