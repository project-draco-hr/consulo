{
  VfsUtilCore.visitChildrenRecursively(file,new VirtualFileVisitor(SKIP_ROOT,(isRecursive() ? null : ONE_LEVEL_DEEP)){
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      if (!file.isDirectory() && appliesTo(project,file)) {
        files.add(file);
      }
      return true;
    }
  }
);
}
