{
  vcs.runInBackground(new Task.Backgroundable(project,getActionName()){
    public void run(    @NotNull ProgressIndicator indicator){
      action.consume(indicator);
      GitUtil.refreshFiles(project,Arrays.asList(affectedFiles));
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        public void run(){
          GitUIUtil.showOperationErrors(project,exceptions,getActionName());
        }
      }
);
    }
  }
);
  return true;
}
