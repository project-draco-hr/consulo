{
  PsiManager manager=PsiManager.getInstance(project);
  PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
  statements=SurroundWithUtil.moveDeclarationsOut(container,statements,false);
  if (statements.length == 0) {
    return null;
  }
  String text="{\n}";
  PsiBlockStatement blockStatement=(PsiBlockStatement)factory.createStatementFromText(text,null);
  blockStatement=(PsiBlockStatement)codeStyleManager.reformat(blockStatement);
  blockStatement=(PsiBlockStatement)container.addBefore(blockStatement,statements[0]);
  PsiCodeBlock body=blockStatement.getCodeBlock();
  SurroundWithUtil.indentCommentIfNecessary(body,statements,factory);
  body.addRange(statements[0],statements[statements.length - 1]);
  container.deleteChildRange(statements[0],statements[statements.length - 1]);
  PsiElement firstChild=blockStatement.getFirstChild();
  if (firstChild == null) {
    return null;
  }
  TextRange range=firstChild.getTextRange();
  return new TextRange(range.getEndOffset(),range.getEndOffset());
}
