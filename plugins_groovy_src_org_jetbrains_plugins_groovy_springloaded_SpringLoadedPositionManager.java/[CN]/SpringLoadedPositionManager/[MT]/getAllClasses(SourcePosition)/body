{
  AccessToken accessToken=ReadAction.start();
  try {
    String className=findEnclosingName(classPosition);
    if (className == null)     throw new NoDataException();
    List<ReferenceType> referenceTypes=myDebugProcess.getVirtualMachineProxy().classesByName(className);
    if (referenceTypes.isEmpty())     throw new NoDataException();
    Set<ReferenceType> res=new HashSet<ReferenceType>();
    for (    ReferenceType referenceType : referenceTypes) {
      findNested(res,referenceType,classPosition);
    }
    if (res.isEmpty()) {
      throw new NoDataException();
    }
    return new ArrayList<ReferenceType>(res);
  }
  finally {
    accessToken.finish();
  }
}
