{
  if (element instanceof PsiJavaCodeReferenceElement) {
    if (!((PsiJavaCodeReferenceElement)element).isQualified()) {
      final JavaResolveResult resolveResult=((PsiJavaCodeReferenceElement)element).advancedResolve(false);
      final PsiElement refElement=resolveResult.getElement();
      if (refElement != null && refElement.getContainingFile() != file) {
        if (refElement instanceof PsiClass) {
          if (refElement.getContainingFile() != element.getContainingFile()) {
            final String qName=((PsiClass)refElement).getQualifiedName();
            if (qName != null) {
              addReferenceData(element,to,startOffset,qName,null);
            }
          }
        }
 else         if (resolveResult.getCurrentFileResolveScope() instanceof PsiImportStaticStatement) {
          final String classQName=((PsiMember)refElement).getContainingClass().getQualifiedName();
          final String name=((PsiNamedElement)refElement).getName();
          if (classQName != null && name != null) {
            addReferenceData(element,to,startOffset,classQName,name);
          }
        }
      }
    }
  }
}
