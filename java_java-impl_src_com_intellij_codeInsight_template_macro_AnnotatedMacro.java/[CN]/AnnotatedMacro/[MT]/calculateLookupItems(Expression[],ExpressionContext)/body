{
  final Query<PsiMember> query=findAnnotated(context,params);
  if (query != null) {
    Set<LookupItem> set=new LinkedHashSet<LookupItem>();
    final String secondParamValue=params.length > 1 ? params[1].calculateResult(context).toString() : null;
    final boolean isShortName=secondParamValue != null && !Boolean.valueOf(secondParamValue);
    final PsiClass findInClass=secondParamValue != null ? JavaPsiFacade.getInstance(context.getProject()).findClass(secondParamValue) : null;
    for (    PsiMember object : query.findAll()) {
      if (findInClass != null && !object.getContainingClass().equals(findInClass))       continue;
      boolean isClazz=object instanceof PsiClass;
      final String name=isShortName || !isClazz ? object.getName() : ((PsiClass)object).getQualifiedName();
      LookupItemUtil.addLookupItem(set,name);
    }
    return set.toArray(new LookupItem[set.size()]);
  }
  return new LookupItem[0];
}
