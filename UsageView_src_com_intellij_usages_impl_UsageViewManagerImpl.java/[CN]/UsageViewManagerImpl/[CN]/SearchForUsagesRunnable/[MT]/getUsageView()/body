{
  UsageViewImpl usageView=myUsageViewRef.get();
  if (usageView != null)   return usageView;
  int usageCount=myUsageCount.get();
  if (usageCount >= 2 || usageCount == 1 && myProcessPresentation.isShowPanelIfOnlyOneUsage()) {
    usageView=new UsageViewImpl(myPresentation,mySearchFor,mySearcherFactory,myProject);
    if (myUsageViewRef.compareAndSet(null,usageView)) {
      openView(usageView);
      Usage firstUsage=myFirstUsage.get();
      if (firstUsage != null) {
        usageView.appendUsageLater(firstUsage);
      }
    }
    return myUsageViewRef.get();
  }
  return null;
}
