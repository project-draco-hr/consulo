{
  UsageViewImpl usageView=myUsageViewRef.get();
  if (usageView != null)   return usageView;
  int usageCount=myUsageCount.get();
  if (usageCount >= 2 || usageCount == 1 && myProcessPresentation.isShowPanelIfOnlyOneUsage()) {
    usageView=new UsageViewImpl(myProject,myPresentation,mySearchFor,mySearcherFactory);
    if (myUsageViewRef.compareAndSet(null,usageView)) {
      openView(usageView);
      Usage firstUsage=myFirstUsage.get();
      if (firstUsage != null) {
        usageView.appendUsageLater(firstUsage);
      }
    }
 else {
      Disposer.dispose(usageView);
    }
    return myUsageViewRef.get();
  }
  return null;
}
