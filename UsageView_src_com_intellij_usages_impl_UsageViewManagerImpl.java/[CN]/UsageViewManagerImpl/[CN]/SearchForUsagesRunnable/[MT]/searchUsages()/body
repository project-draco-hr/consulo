{
  UsageSearcher usageSearcher=mySearcherFactory.create();
  usageSearcher.generate(new Processor<Usage>(){
    public boolean process(    final Usage usage){
      myUsageCount++;
      if (myUsageCount == 1 && !myProcessPresentation.isShowPanelIfOnlyOneUsage()) {
        myFirstUsage=usage;
      }
      final UsageViewImpl usageView=myUsageViewRef.get();
      if (myUsageCount == 2 || (myProcessPresentation.isShowPanelIfOnlyOneUsage() && myUsageCount == 1)) {
        openView();
        if (myFirstUsage != null) {
          usageView.appendUsageLater(myFirstUsage);
        }
        usageView.appendUsageLater(usage);
      }
 else       if (myUsageCount > 2) {
        usageView.appendUsageLater(usage);
      }
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      return indicator != null ? !indicator.isCanceled() : true;
    }
  }
);
  if (!myUsageViewRef.isNull()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        showToolWindow(true);
      }
    }
);
  }
}
