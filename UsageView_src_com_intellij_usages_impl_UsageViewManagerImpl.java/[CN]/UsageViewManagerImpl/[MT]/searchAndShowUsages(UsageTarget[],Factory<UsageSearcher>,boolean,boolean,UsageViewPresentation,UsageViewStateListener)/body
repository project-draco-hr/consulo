{
  final AtomicReference<UsageViewImpl> usageView=new AtomicReference<UsageViewImpl>();
  final FindUsagesProcessPresentation processPresentation=new FindUsagesProcessPresentation();
  processPresentation.setShowNotFoundMessage(showNotFoundMessage);
  processPresentation.setShowPanelIfOnlyOneUsage(showPanelIfOnlyOneUsage);
  Task task=new Task.Backgroundable(myProject,getProgressTitle(presentation),true,new SearchInBackgroundOption()){
    public void run(    final ProgressIndicator indicator){
      new SearchForUsagesRunnable(usageView,presentation,searchFor,searcherFactory,processPresentation,listener).run();
    }
    @Nullable public NotificationInfo getNotificationInfo(){
      return new NotificationInfo("Find Usages","Find Usages Finished",usageView.get() != null ? (usageView.get().getUsagesCount() + " Usage(s) Found") : "No Usages Found");
    }
  }
;
  ProgressManager.getInstance().run(task);
  return usageView.get();
}
