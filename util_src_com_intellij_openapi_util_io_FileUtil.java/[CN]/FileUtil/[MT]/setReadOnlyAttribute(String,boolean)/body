{
  if (IO_FILE_SET_WRITABLE_METHOD != null) {
    try {
      IO_FILE_SET_WRITABLE_METHOD.invoke(new File(path),!readOnlyStatus);
      return;
    }
 catch (    IllegalAccessException e) {
      LOG.error(e);
    }
catch (    InvocationTargetException e) {
      LOG.error(e);
    }
  }
  Process process;
  if (SystemInfo.isWindows) {
    process=Runtime.getRuntime().exec(new String[]{"attrib",readOnlyStatus ? "+r" : "-r",path});
  }
 else {
    process=Runtime.getRuntime().exec(new String[]{"chmod",readOnlyStatus ? "u-w" : "u+w",path});
  }
  try {
    process.waitFor();
  }
 catch (  InterruptedException ignored) {
  }
}
