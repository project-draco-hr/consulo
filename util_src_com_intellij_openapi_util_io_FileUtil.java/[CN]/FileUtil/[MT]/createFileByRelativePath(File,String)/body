{
  String basePath=absoluteBase.getPath();
  StringBuilder resultPath=new StringBuilder(basePath);
  if (basePath.length() > 1 && (basePath.endsWith("/") || basePath.endsWith("\\"))) {
    resultPath.setLength(resultPath.length() - 1);
  }
  StringTokenizer tokenizer=new StringTokenizer(relativeTail,"/\\",false);
  while (tokenizer.hasMoreTokens()) {
    String token=tokenizer.nextToken().trim();
    if (token.length() == 0)     continue;
    if (".".equals(token))     continue;
    if ("..".equals(token)) {
      int parentDelim=resultPath.lastIndexOf("/");
      if (parentDelim > 0) {
        resultPath.setLength(parentDelim);
      }
 else {
        parentDelim=resultPath.lastIndexOf("\\");
        if (parentDelim > 0) {
          resultPath.setLength(parentDelim);
        }
        return null;
      }
      continue;
    }
    resultPath.append('/');
    resultPath.append(token);
  }
  return new File(resultPath.toString());
}
