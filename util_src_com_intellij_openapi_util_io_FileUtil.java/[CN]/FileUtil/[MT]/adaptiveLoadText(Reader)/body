{
  char[] chars=new char[4096];
  int count=0;
  while (count < chars.length) {
    int n=reader.read(chars,count,chars.length - count);
    if (n <= 0)     break;
    count+=n;
    if (count == chars.length) {
      chars=ArrayUtil.realloc(chars,chars.length * 2);
    }
  }
  if (count < chars.length) {
    chars=ArrayUtil.realloc(chars,count);
  }
  return chars;
}
