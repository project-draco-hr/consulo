{
  CompositeException result=new CompositeException();
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  try {
    Element newS=new Element("temp");
    settings.writeExternal(newS);
    Assert.assertEquals("Code insight settings damaged",DEFAULT_SETTINGS_EXTERNALIZED,JDOMUtil.writeElement(newS,"\n"));
  }
 catch (  AssertionError error) {
    CodeInsightSettings clean=new CodeInsightSettings();
    Element temp=new Element("temp");
    clean.writeExternal(temp);
    settings.loadState(temp);
    result.add(error);
  }
  currentCodeStyleSettings.getIndentOptions(StdFileTypes.JAVA);
  try {
    checkSettingsEqual(oldCodeStyleSettings,currentCodeStyleSettings,"Code style settings damaged");
  }
 catch (  AssertionError e) {
    result.add(e);
  }
 finally {
    currentCodeStyleSettings.clearCodeStyleSettings();
  }
  try {
    InplaceRefactoring.checkCleared();
  }
 catch (  AssertionError e) {
    result.add(e);
  }
  try {
    StartMarkAction.checkCleared();
  }
 catch (  AssertionError e) {
    result.add(e);
  }
  if (!result.isEmpty())   throw result;
}
