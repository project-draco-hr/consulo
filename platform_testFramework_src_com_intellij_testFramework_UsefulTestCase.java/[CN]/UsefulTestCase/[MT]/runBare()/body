{
  if (!shouldRunTest())   return;
  if (runInDispatchThread()) {
    final Throwable[] exception={null};
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      @Override public void run(){
        try {
          defaultRunBare();
        }
 catch (        Throwable tearingDown) {
          if (exception[0] == null)           exception[0]=tearingDown;
        }
      }
    }
);
    if (exception[0] != null)     throw exception[0];
  }
 else {
    defaultRunBare();
  }
}
