{
  if (isInHeadlessEnvironment()) {
    Class<?> aClass=getClass();
    while (aClass != null) {
      if (aClass.getAnnotation(SkipInHeadlessEnvironment.class) != null) {
        System.out.println("Test '" + getClass().getName() + "."+ getName()+ "' is skipped because it requires working UI environment");
        return false;
      }
      aClass=aClass.getSuperclass();
    }
  }
  return true;
}
