{
  if (isPerformanceTest() || ApplicationManager.getApplication() == null) {
    return;
  }
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  Element newS=new Element("temp");
  settings.writeExternal(newS);
  Assert.assertEquals("Code insight settings damaged",DEFAULT_SETTINGS_EXTERNALIZED,JDOMUtil.writeElement(newS,"\n"));
  CodeStyleSettings codeStyleSettings=getCurrentCodeStyleSettings();
  codeStyleSettings.getIndentOptions(StdFileTypes.JAVA);
  try {
    checkSettingsEqual(myOldCodeStyleSettings,codeStyleSettings,"Code style settings damaged");
  }
  finally {
    codeStyleSettings.clearCodeStyleSettings();
  }
  myOldCodeStyleSettings=null;
  VariableInplaceRenamer.checkCleared();
}
