{
  myBus.syncPublisher(AppTopics.FILE_DOCUMENT_SYNC).beforeAllDocumentsSaving();
  if (myUnsavedDocuments.isEmpty())   return;
  HashSet<Document> failedToSave=new HashSet<Document>();
  while (true) {
    final Document[] unsavedDocuments=getUnsavedDocuments();
    int count=0;
    for (    Document document : unsavedDocuments) {
      if (failedToSave.contains(document))       continue;
      saveDocument(document);
      count++;
      if (myUnsavedDocuments.contains(document)) {
        failedToSave.add(document);
      }
    }
    if (count == 0)     break;
  }
}
