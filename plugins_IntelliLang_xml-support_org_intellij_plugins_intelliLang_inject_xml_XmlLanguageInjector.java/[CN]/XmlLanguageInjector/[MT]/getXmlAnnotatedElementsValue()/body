{
  if (myXmlIndex == null) {
    myXmlIndex=CachedValuesManager.getManager(myProject).createCachedValue(new CachedValueProvider<Pair<Pattern,Collection<String>>>(){
      public Result<Pair<Pattern,Collection<String>>> compute(){
        final Map<ElementPattern<?>,BaseInjection> map=new THashMap<ElementPattern<?>,BaseInjection>();
        for (        BaseInjection injection : myConfiguration.getInjections(XmlLanguageInjectionSupport.XML_SUPPORT_ID)) {
          for (          InjectionPlace place : injection.getInjectionPlaces()) {
            if (!place.isEnabled() || place.getElementPattern() == null)             continue;
            map.put(place.getElementPattern(),injection);
          }
        }
        final Set<String> stringSet=PatternValuesIndex.buildStringIndex(map.keySet());
        final Result<Pair<Pattern,Collection<String>>> r=new Result<Pair<Pattern,Collection<String>>>(Pair.<Pattern,Collection<String>>create(buildPattern(stringSet),stringSet),myConfiguration);
        r.setLockValue(true);
        return r;
      }
    }
,false);
  }
  return myXmlIndex.getValue();
}
