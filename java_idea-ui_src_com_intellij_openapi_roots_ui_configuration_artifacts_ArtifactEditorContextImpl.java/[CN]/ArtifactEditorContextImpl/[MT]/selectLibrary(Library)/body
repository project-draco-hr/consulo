{
  final LibraryTable table=library.getTable();
  if (table != null) {
    ProjectStructureConfigurable.getInstance(getProject()).selectProjectOrGlobalLibrary(library,true);
  }
 else {
    final Module module=((LibraryImpl)library).getModule();
    if (module != null) {
      final ModuleRootModel rootModel=myParent.getModulesProvider().getRootModel(module);
      final String libraryName=library.getName();
      for (      OrderEntry entry : rootModel.getOrderEntries()) {
        if (entry instanceof ModuleLibraryOrderEntryImpl) {
          final ModuleLibraryOrderEntryImpl libraryEntry=(ModuleLibraryOrderEntryImpl)entry;
          if (libraryName != null && libraryName.equals(libraryEntry.getLibraryName()) || libraryName == null && library.equals(libraryEntry.getLibrary())) {
            ModuleStructureConfigurable.getInstance(getProject()).selectOrderEntry(module,libraryEntry);
            return;
          }
        }
      }
    }
  }
}
