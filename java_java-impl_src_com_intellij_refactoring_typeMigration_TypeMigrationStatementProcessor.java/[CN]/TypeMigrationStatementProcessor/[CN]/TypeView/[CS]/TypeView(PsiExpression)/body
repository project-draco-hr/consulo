{
  PsiType exprType=expr.getType();
  exprType=exprType instanceof PsiEllipsisType ? ((PsiEllipsisType)exprType).toArrayType() : exprType;
  myOriginType=exprType != null ? GenericsUtil.getVariableTypeByExpressionType(exprType) : null;
  PsiType type=myTypeEvaluator.evaluateType(expr);
  type=type instanceof PsiEllipsisType ? ((PsiEllipsisType)type).toArrayType() : type;
  myType=type != null ? GenericsUtil.getVariableTypeByExpressionType(type) : null;
  myChanged=(myOriginType == null || myType == null) ? false : !myType.equals(myOriginType);
}
