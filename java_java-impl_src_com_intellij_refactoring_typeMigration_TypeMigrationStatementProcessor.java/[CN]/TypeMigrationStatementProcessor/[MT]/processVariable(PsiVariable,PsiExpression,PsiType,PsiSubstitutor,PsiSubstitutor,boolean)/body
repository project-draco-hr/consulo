{
  final TypeView right=new TypeView(value);
  final TypeView left=new TypeView(variable,varSubstitutor,evalSubstitutor);
switch (TypeInfection.getInfection(left,right)) {
case TypeInfection.NONE_INFECTED:
    break;
case TypeInfection.LEFT_INFECTED:
  myLabeler.migrateExpressionType(value,left.getType(),myStatement,TypeConversionUtil.isAssignable(left.getType(),right.getType()),true);
break;
case TypeInfection.RIGHT_INFECTED:
PsiType psiType=migrationType != null ? migrationType : right.getType();
if (!myLabeler.addMigrationRoot(variable,psiType,myStatement,TypeConversionUtil.isAssignable(left.getType(),psiType),true)) {
myLabeler.convertExpression(value,psiType,left.getType(),isCovariantPosition);
}
break;
case TypeInfection.BOTH_INFECTED:
addTypeUsage(variable);
break;
default :
LOG.error("Must not happen.");
}
}
