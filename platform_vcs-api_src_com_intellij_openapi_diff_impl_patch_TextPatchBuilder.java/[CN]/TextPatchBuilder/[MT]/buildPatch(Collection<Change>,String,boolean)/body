{
  final Collection<BeforeAfter<AirContentRevision>> revisions=new ArrayList<BeforeAfter<AirContentRevision>>(changes.size());
  for (  Change change : changes) {
    revisions.add(new BeforeAfter<AirContentRevision>(convertRevision(change.getBeforeRevision()),convertRevision(change.getAfterRevision())));
  }
  return buildPatch(revisions,basePath,reversePatch,SystemInfo.isFileSystemCaseSensitive,new Runnable(){
    public void run(){
      ProgressManager.checkCanceled();
    }
  }
);
}
