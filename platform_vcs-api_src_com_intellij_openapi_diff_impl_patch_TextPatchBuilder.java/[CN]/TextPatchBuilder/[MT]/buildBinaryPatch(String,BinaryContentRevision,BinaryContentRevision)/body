{
  ContentRevision headingBeforeRevision=beforeRevision != null ? beforeRevision : afterRevision;
  ContentRevision headingAfterRevision=afterRevision != null ? afterRevision : beforeRevision;
  byte[] beforeContent=beforeRevision != null ? beforeRevision.getBinaryContent() : null;
  byte[] afterContent=afterRevision != null ? afterRevision.getBinaryContent() : null;
  BinaryFilePatch patch=new BinaryFilePatch(beforeContent,afterContent);
  setPatchHeading(patch,basePath,headingBeforeRevision,headingAfterRevision);
  return patch;
}
