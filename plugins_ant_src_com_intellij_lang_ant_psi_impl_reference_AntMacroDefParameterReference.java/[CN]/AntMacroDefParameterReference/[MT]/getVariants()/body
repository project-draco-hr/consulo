{
  final Set<String> variants=StringSetSpinAllocator.alloc();
  try {
    AntMacroDef macrodef=PsiTreeUtil.getParentOfType(getElement(),AntMacroDef.class,true,true);
    if (macrodef != null) {
      for (      PsiElement child : macrodef.getChildren()) {
        if (child instanceof AntStructuredElement) {
          AntStructuredElement element=(AntStructuredElement)child;
          if (element.getSourceElement().getName().equals("attribute")) {
            variants.add(element.getName());
          }
        }
      }
    }
    final int count=variants.size();
    return (count == 0) ? EMPTY_ARRAY : variants.toArray(new String[count]);
  }
  finally {
    StringSetSpinAllocator.dispose(variants);
  }
}
