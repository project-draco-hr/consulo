{
  super(project,true);
  setTitle(GitBundle.getString("merge.branch.title"));
  myProject=project;
  myVcs=GitVcs.getInstance(project);
  initBranchChooser();
  setOKActionEnabled(false);
  setOKButtonText(GitBundle.getString("merge.branch.button"));
  GitUIUtil.setupRootChooser(myProject,roots,defaultRoot,myGitRoot,myCurrentBranchText);
  GitUIUtil.imply(mySquashCommitCheckBox,true,myNoCommitCheckBox,true);
  GitUIUtil.imply(mySquashCommitCheckBox,true,myAddLogInformationCheckBox,false);
  GitUIUtil.implyDisabled(mySquashCommitCheckBox,true,myCommitMessage);
  GitUIUtil.exclusive(mySquashCommitCheckBox,true,myNoFastForwardCheckBox,true);
  myGitRoot.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent event){
      try {
        updateBranches();
      }
 catch (      VcsException ex) {
        if (myVcs.getExecutableValidator().checkExecutableAndShowMessageIfNeeded(getRootPane())) {
          myVcs.showErrors(Collections.singletonList(ex),GitBundle.getString("merge.retrieving.branches"));
        }
      }
    }
  }
);
  init();
}
