{
  PsiElement parent=expression.getParent();
  while (parent instanceof PsiParenthesizedExpression) {
    parent=parent.getParent();
  }
  if (!(parent instanceof PsiPrefixExpression)) {
    return;
  }
  final PsiPrefixExpression prefixExpression=(PsiPrefixExpression)parent;
  final IElementType parentTokenType=prefixExpression.getOperationTokenType();
  if (!JavaTokenType.EXCL.equals(parentTokenType)) {
    return;
  }
  registerError(prefixExpression);
}
