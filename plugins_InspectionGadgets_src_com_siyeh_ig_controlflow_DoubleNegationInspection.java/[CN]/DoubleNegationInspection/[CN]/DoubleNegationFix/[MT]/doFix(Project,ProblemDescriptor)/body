{
  final PsiPrefixExpression expression=(PsiPrefixExpression)descriptor.getPsiElement();
  PsiExpression operand=expression.getOperand();
  while (operand instanceof PsiParenthesizedExpression) {
    final PsiParenthesizedExpression parenthesizedExpression=(PsiParenthesizedExpression)operand;
    operand=parenthesizedExpression.getExpression();
  }
  if (operand instanceof PsiPrefixExpression) {
    final PsiPrefixExpression prefixExpression=(PsiPrefixExpression)operand;
    final PsiExpression innerOperand=prefixExpression.getOperand();
    if (innerOperand == null) {
      return;
    }
    expression.replace(innerOperand);
  }
 else   if (operand instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)operand;
    final PsiExpression lhs=binaryExpression.getLOperand();
    final String lhsText=lhs.getText();
    final StringBuilder builder=new StringBuilder(lhsText);
    builder.append("==");
    final PsiExpression rhs=binaryExpression.getROperand();
    if (rhs != null) {
      final String rhsText=rhs.getText();
      builder.append(rhsText);
    }
    final PsiManager manager=binaryExpression.getManager();
    final PsiElementFactory factory=manager.getElementFactory();
    final PsiExpression newExpression=factory.createExpressionFromText(builder.toString(),binaryExpression);
    expression.replace(newExpression);
  }
}
