{
  return new HgGlobalCommandBuilder(){
    public HgGlobalCommand build(    Collection<VirtualFile> repos){
      final HgMergeDialog mergeDialog=new HgMergeDialog(project,ContainerUtil.map(repos,new Function<VirtualFile,FilePath>(){
        @Override public FilePath fun(        VirtualFile file){
          return new FilePathImpl(file);
        }
      }
));
      mergeDialog.show();
      if (mergeDialog.isOK()) {
        return buildCommand(mergeDialog,project);
      }
      return null;
    }
  }
;
}
