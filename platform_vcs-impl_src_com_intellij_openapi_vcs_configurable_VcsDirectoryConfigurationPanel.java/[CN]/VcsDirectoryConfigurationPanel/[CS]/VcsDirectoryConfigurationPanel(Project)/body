{
  myProject=project;
  myVcsManager=ProjectLevelVcsManager.getInstance(project);
  myDirectoryMappingTable=new TableView<VcsDirectoryMapping>();
  initializeModel();
  myVcsComboBox.getComboBox().setModel(buildVcsWrappersModel(myProject));
  myVcsComboBox.getComboBox().setRenderer(new EditorComboBoxRenderer(myVcsComboBox.getComboBox().getEditor()));
  myVcsComboBox.getComboBox().addItemListener(new ItemListener(){
    public void itemStateChanged(    final ItemEvent e){
      if (myDirectoryMappingTable != null && myDirectoryMappingTable.isEditing()) {
        myDirectoryMappingTable.stopEditing();
      }
    }
  }
);
  myVcsComboBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final VcsWrapper vcsWrapper=((VcsWrapper)myVcsComboBox.getComboBox().getSelectedItem());
      AbstractVcs abstractVcs=null;
      if (vcsWrapper != null) {
        abstractVcs=vcsWrapper.getOriginal();
      }
      new VcsConfigurationsDialog(project,myVcsComboBox.getComboBox(),abstractVcs).show();
    }
  }
);
  myDirectoryMappingTable.setRowHeight(myVcsComboBox.getPreferredSize().height);
  myDirectoryMappingTable.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    final ListSelectionEvent e){
      updateButtons();
    }
  }
);
  initPanel();
  updateButtons();
}
