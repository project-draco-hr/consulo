{
  final int DEFAULT_HEIGHT=200;
  final JComponent errorPanel=Box.createVerticalBox();
  final JBScrollPane pane=new JBScrollPane(errorPanel);
  Collection<VcsRootError> myErrors=VcsRootErrorsFinder.getInstance(myProject).find();
  for (  final VcsRootError root : myErrors) {
    if (!VcsRootError.Type.UNREGISTERED_ROOT.equals(root.getType())) {
      continue;
    }
    final VcsKey vcsKey=root.getVcsKey();
    final VcsDescriptor vcsDescriptor=myAllVcss.get(vcsKey.getName());
    String displayVcsName=vcsDescriptor.getDisplayName();
    String title="Unregistered " + displayVcsName + " root: "+ FileUtil.toSystemDependentName(root.getMapping());
    final VcsRootErrorLabel vcsRootErrorLabel=new VcsRootErrorLabel(title);
    vcsRootErrorLabel.setAddRootLinkHandler(new Runnable(){
      @Override public void run(){
        addMapping(new VcsDirectoryMapping(root.getMapping(),vcsKey.getName()));
        errorPanel.remove(vcsRootErrorLabel);
        if (errorPanel.getComponentCount() == 0) {
          pane.setVisible(false);
        }
        pane.setMinimumSize(new Dimension(-1,calcMinHeight(errorPanel,DEFAULT_HEIGHT)));
        validate();
      }
    }
);
    errorPanel.add(vcsRootErrorLabel);
  }
  if (errorPanel.getComponentCount() == 0) {
    pane.setVisible(false);
  }
  pane.setMinimumSize(new Dimension(-1,calcMinHeight(errorPanel,DEFAULT_HEIGHT)));
  pane.setMaximumSize(new Dimension(-1,DEFAULT_HEIGHT));
  return pane;
}
