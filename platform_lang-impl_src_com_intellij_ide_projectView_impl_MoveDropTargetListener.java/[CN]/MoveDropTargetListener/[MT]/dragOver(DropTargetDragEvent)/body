{
  final TreeNode[] sourceNodes=getSourceNodes(dtde.getTransferable());
  final TreeNode targetNode=getTargetNode(dtde.getLocation());
  final int dropAction=dtde.getDropAction();
  if (sourceNodes != null && targetNode != null && canDrop(sourceNodes,targetNode,dropAction)) {
    dtde.acceptDrag(dropAction);
  }
 else   if (targetNode != null && dtde.getTransferable().isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
    dtde.acceptDrag(dropAction);
  }
 else {
    dtde.rejectDrag();
  }
}
