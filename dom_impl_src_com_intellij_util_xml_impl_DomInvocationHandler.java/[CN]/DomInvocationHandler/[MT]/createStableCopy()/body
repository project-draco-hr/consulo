{
  r.lock();
  try {
    if (myXmlTag != null && myXmlTag.isPhysical()) {
      final SmartPsiElementPointer<XmlTag> pointer=SmartPointerManager.getInstance(myManager.getProject()).createSmartPsiElementPointer(myXmlTag);
      return myManager.createStableValue(new NullableFactory<T>(){
        public T create(){
          final XmlTag tag=pointer.getElement();
          if (tag == null)           return null;
          final DomElement element=myManager.getDomElement(tag);
          if (element == null || !element.getDomElementType().equals(myType))           return null;
          final DomInvocationHandler handler=DomManagerImpl.getDomInvocationHandler(element);
          if (handler == null || !handler.getClass().equals(DomInvocationHandler.this.getClass()))           return null;
          return (T)element;
        }
      }
);
    }
  }
  finally {
    r.unlock();
  }
  return (T)createPathStableCopy();
}
