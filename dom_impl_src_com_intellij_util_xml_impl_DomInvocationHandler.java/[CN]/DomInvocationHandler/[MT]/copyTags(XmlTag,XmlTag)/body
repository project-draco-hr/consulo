{
  PsiElement child=toTag.getFirstChild();
  while (child != null) {
    final PsiElement psiElement=child.getNextSibling();
    if (child instanceof XmlAttribute || child instanceof XmlTag) {
      child.delete();
    }
    child=psiElement;
  }
  child=fromTag.getFirstChild();
  boolean hasChildren=false;
  while (child != null) {
    if (child instanceof XmlTag) {
      final XmlTag xmlTag=(XmlTag)child;
      copyTags(xmlTag,(XmlTag)toTag.add(createEmptyTag(xmlTag.getName())));
      hasChildren=true;
    }
 else     if (child instanceof XmlAttribute) {
      toTag.add(child);
    }
    child=child.getNextSibling();
  }
  if (!hasChildren) {
    toTag.getValue().setText(fromTag.getValue().getText());
  }
}
