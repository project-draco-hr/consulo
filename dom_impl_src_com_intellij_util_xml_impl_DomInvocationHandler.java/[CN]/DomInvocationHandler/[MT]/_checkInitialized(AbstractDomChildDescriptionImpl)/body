{
  if (myInitializedChildren != null && myInitializedChildren.contains(description))   return;
  r.unlock();
  final List<XmlTag> subTags;
  try {
    subTags=getSubTags(description);
  }
  finally {
    r.lock();
  }
  r.unlock();
  w.lock();
  try {
    if (myInitializedChildren != null && myInitializedChildren.contains(description))     return;
    if (description instanceof FixedChildDescriptionImpl) {
      final FixedChildDescriptionImpl fixedChildDescription=(FixedChildDescriptionImpl)description;
      final EvaluatedXmlName evaluatedXmlName=createEvaluatedXmlName(fixedChildDescription.getXmlName());
      final int count=fixedChildDescription.getCount();
      for (int i=0; i < count; i++) {
        getOrCreateIndexedChild(findSubTag(subTags,i),evaluatedXmlName,Pair.create(fixedChildDescription,i));
      }
    }
 else     if (myXmlTag != null && description instanceof AbstractCollectionChildDescription) {
      final AbstractCollectionChildDescription childDescription=(AbstractCollectionChildDescription)description;
      for (      XmlTag subTag : subTags) {
        new CollectionElementInvocationHandler(description.getType(),subTag,childDescription,this);
      }
    }
    if (myInitializedChildren == null)     myInitializedChildren=new THashSet<AbstractDomChildDescriptionImpl>();
    myInitializedChildren.add(description);
  }
  finally {
    r.lock();
    w.unlock();
  }
}
