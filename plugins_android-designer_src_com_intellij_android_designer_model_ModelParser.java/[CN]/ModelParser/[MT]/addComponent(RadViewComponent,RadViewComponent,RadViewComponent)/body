{
  container.add(newComponent,insertBefore);
  addComponentTag(container.getTag(),newComponent,insertBefore == null ? null : insertBefore.getTag(),new Computable<String>(){
    @Override public String compute(){
      String creation=newComponent.getMetaModel().getCreation();
      return creation == null ? newComponent.getCreationXml() : creation;
    }
  }
);
  PropertyParser propertyParser=container.getRoot().getClientProperty(PropertyParser.KEY);
  propertyParser.load(newComponent);
  if (!newComponent.getTag().isEmpty()) {
    addComponent(newComponent,ViewsMetaManager.getInstance(newComponent.getTag().getProject()),propertyParser);
  }
  IdManager.get(container).ensureIds(newComponent);
}
