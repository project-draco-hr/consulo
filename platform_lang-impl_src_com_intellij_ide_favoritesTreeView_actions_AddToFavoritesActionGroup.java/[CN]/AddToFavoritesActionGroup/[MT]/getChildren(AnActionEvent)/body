{
  if (e == null)   return AnAction.EMPTY_ARRAY;
  final Project project=e.getProject();
  if (project == null) {
    return AnAction.EMPTY_ARRAY;
  }
  final List<String> availableFavoritesLists=FavoritesManager.getInstance(project).getAvailableFavoritesListNames();
  availableFavoritesLists.remove(FavoritesTreeViewPanel.FAVORITES_LIST_NAME_DATA_KEY.getData(e.getDataContext()));
  if (availableFavoritesLists.isEmpty()) {
    return new AnAction[]{new AddToNewFavoritesListAction()};
  }
  AnAction[] actions=new AnAction[availableFavoritesLists.size() + 2];
  int idx=0;
  for (  String favoritesList : availableFavoritesLists) {
    actions[idx++]=new AddToFavoritesAction(favoritesList);
  }
  actions[idx++]=Separator.getInstance();
  actions[idx]=new AddToNewFavoritesListAction();
  return actions;
}
