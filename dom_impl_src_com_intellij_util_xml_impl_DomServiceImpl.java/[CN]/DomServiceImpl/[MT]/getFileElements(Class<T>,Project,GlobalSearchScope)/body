{
  final Collection<VirtualFile> list=scope == null ? getDomFileCandidates(clazz,project) : getDomFileCandidates(clazz,project,scope);
  final ArrayList<DomFileElement<T>> result=new ArrayList<DomFileElement<T>>(list.size());
  for (  VirtualFile file : list) {
    final PsiFile psiFile=PsiManager.getInstance(project).findFile(file);
    if (psiFile instanceof XmlFile) {
      final DomFileElement<T> element=DomManager.getDomManager(project).getFileElement((XmlFile)psiFile,clazz);
      if (element != null) {
        result.add(element);
      }
    }
  }
  return result;
}
