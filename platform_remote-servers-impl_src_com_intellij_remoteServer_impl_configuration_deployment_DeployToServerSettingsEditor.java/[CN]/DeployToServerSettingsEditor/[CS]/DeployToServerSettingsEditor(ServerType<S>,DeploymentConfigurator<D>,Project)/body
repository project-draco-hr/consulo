{
  myServerType=type;
  myDeploymentConfigurator=deploymentConfigurator;
  myProject=project;
  myServerListModel=new SortedComboBoxModel<String>(String.CASE_INSENSITIVE_ORDER);
  myServerComboBox=new ComboboxWithBrowseButton(new ComboBox(myServerListModel));
  fillApplicationServersList(null);
  myServerComboBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      RemoteServerListConfigurable configurable=RemoteServerListConfigurable.createConfigurable(type);
      if (ShowSettingsUtil.getInstance().editConfigurable(myServerComboBox,configurable)) {
        fillApplicationServersList(configurable.getLastSelectedServer());
      }
    }
  }
);
  myServerComboBox.getComboBox().setRenderer(new ColoredListCellRendererWrapper<String>(){
    @Override protected void doCustomize(    JList list,    String value,    int index,    boolean selected,    boolean hasFocus){
      if (value == null)       return;
      RemoteServer<S> server=RemoteServersManager.getInstance().findByName(value,type);
      SimpleTextAttributes attributes=server == null ? SimpleTextAttributes.ERROR_ATTRIBUTES : SimpleTextAttributes.REGULAR_ATTRIBUTES;
      setIcon(server != null ? server.getType().getIcon() : null);
      append(value,attributes);
    }
  }
);
  mySourceListModel=new SortedComboBoxModel<DeploymentSource>(new Comparator<DeploymentSource>(){
    @Override public int compare(    DeploymentSource o1,    DeploymentSource o2){
      return o1.getPresentableName().compareToIgnoreCase(o2.getPresentableName());
    }
  }
);
  mySourceListModel.addAll(deploymentConfigurator.getAvailableDeploymentSources());
  mySourceComboBox=new ComboBox(mySourceListModel);
  mySourceComboBox.setRenderer(new ListCellRendererWrapper<DeploymentSource>(){
    @Override public void customize(    JList list,    DeploymentSource value,    int index,    boolean selected,    boolean hasFocus){
      if (value == null)       return;
      setIcon(value.getIcon());
      setText(value.getPresentableName());
    }
  }
);
  myDeploymentSettingsComponent=new JPanel(new BorderLayout());
  mySourceComboBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      onDeploymentSourceChanged(null);
    }
  }
);
}
