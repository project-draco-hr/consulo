{
  File file=null;
  if (relativeDirectory != null) {
    if (relativeDirectory.trim().equals(".")) {
      file=cvsFileSystem.getLocalFileSystem().getFile(fileName);
    }
 else {
      file=cvsFileSystem.getLocalFileSystem().getFile(relativeDirectory + '/' + fileName);
    }
  }
 else {
    for (Iterator it=fileObjects.iterator(); it.hasNext(); ) {
      final AbstractFileObject abstractFileObject=(AbstractFileObject)it.next();
      if (abstractFileObject instanceof FileObject) {
        final FileObject fileObject=(FileObject)abstractFileObject;
        if (!fileObject.getName().equals(fileName)) {
          continue;
        }
        it.remove();
        return cvsFileSystem.getLocalFileSystem().getFile(fileObject);
      }
      it.remove();
    }
  }
  BugLog.getInstance().assertTrue(file != null,"Wrong algorithm for detecting file name (" + fileName + ")");
  return file;
}
