{
  if (myEnableAutoDetectionCheckBox.isSelected() && myModulesListModel.isEmpty() && myFilesListModel.isEmpty()) {
    return null;
  }
  DisabledAutodetectionByTypeElement element=new DisabledAutodetectionByTypeElement(myFacetType.getStringId());
  if (myEnableAutoDetectionCheckBox.isSelected()) {
    Set<String> disabledModules=getDisabledModules();
    for (    String moduleName : disabledModules) {
      element.getModuleElements().add(new DisabledAutodetectionInModuleElement(moduleName));
    }
    for (int i=0; i < myFilesListModel.getSize(); i++) {
      String url=(String)myFilesListModel.getElementAt(i);
      String moduleName=myFile2Module.get(url);
      if (!disabledModules.contains(moduleName)) {
        DisabledAutodetectionInModuleElement moduleElement=element.findElement(moduleName);
        if (moduleElement != null) {
          moduleElement.getFiles().add(url);
        }
 else {
          element.getModuleElements().add(new DisabledAutodetectionInModuleElement(moduleName,url));
        }
      }
    }
  }
  return element;
}
