{
  final Module module=context.getModule();
  if (module == null)   return null;
  location=JavaExecutionUtil.stepIntoSingleClass(location);
  PsiElement element=location.getPsiElement();
  JavaPsiFacade facade=JavaPsiFacade.getInstance(element.getProject());
  GlobalSearchScope scope=module.getModuleWithDependenciesAndLibrariesScope(true);
  PsiClass activityClass=facade.findClass(AndroidUtils.ACTIVITY_BASE_CLASS_NAME,scope);
  if (activityClass == null)   return null;
  PsiClass elementClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
  while (elementClass != null) {
    if (elementClass.isInheritor(activityClass,true)) {
      mySourceElement=elementClass;
      return createRunActivityConfiguration((PsiClass)mySourceElement,context);
    }
    elementClass=PsiTreeUtil.getParentOfType(elementClass,PsiClass.class);
  }
  return null;
}
