{
  if (content instanceof EmptyContent) {
    return createFile(new byte[0],"empty").getPath();
  }
 else   if (content instanceof FileContent) {
    VirtualFile file=((FileContent)content).getFile();
    Document document=FileDocumentManager.getInstance().getCachedDocument(file);
    if (document != null) {
      FileDocumentManager.getInstance().saveDocument(document);
    }
    if (file.isInLocalFileSystem()) {
      return file.getPath();
    }
    String tempFileName=getFileName(title,windowTitle,content.getContentType());
    return createTempFile(file,tempFileName).getPath();
  }
 else   if (content instanceof DocumentContent) {
    String tempFileName=getFileName(title,windowTitle,content.getContentType());
    return createTempFile(((DocumentContent)content),tempFileName).getPath();
  }
 else   if (content instanceof DirectoryContent) {
    VirtualFile file=((DirectoryContent)content).getFile();
    if (file.isInLocalFileSystem()) {
      return file.getPath();
    }
    throw new IllegalArgumentException(content.toString());
  }
  throw new IllegalArgumentException(content.toString());
}
