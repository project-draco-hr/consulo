{
  assertDispatchThread();
  myLongestHighlighterLength=0;
  Iterator<RangeHighlighterImpl> iterator=mySegmentHighlighters.iterator();
  while (iterator.hasNext()) {
    RangeHighlighter rangeHighlighter=iterator.next();
    if (rangeHighlighter.isValid()) {
      myLongestHighlighterLength=Math.max(myLongestHighlighterLength,rangeHighlighter.getEndOffset() - rangeHighlighter.getStartOffset());
    }
 else {
      iterator.remove();
    }
  }
  myIsDirtied=false;
}
