{
synchronized (myDocumentToStatusMap) {
    FileStatus status=myDocumentToStatusMap.get(document);
    PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
    if (status == null) {
      status=new FileStatus(file);
      myDocumentToStatusMap.put(document,status);
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("********************************* Mark file uptodate " + file.getName());
    }
    status.defensivelyMarked=false;
switch (passId) {
case Pass.UPDATE_ALL:
case Pass.POST_UPDATE_ALL:
      status.dirtyScope=null;
    break;
case Pass.LOCAL_INSPECTIONS:
  status.localInspectionsDirtyScope=null;
break;
case WolfPassFactory.PASS_ID:
status.wolfPassFinfished=true;
break;
case Pass.EXTERNAL_TOOLS:
status.externalDirtyScope=null;
break;
default :
if (status.customPassDirtyScopes.containsKey(passId)) {
status.customPassDirtyScopes.put(passId,null);
}
break;
}
}
}
