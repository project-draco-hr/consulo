{
  Document document=editor.getDocument();
  PsiElement dirtyScope=((DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(editor.getProject())).getFileStatusMap().getFileDirtyScope(document,part);
  if (dirtyScope == null || !dirtyScope.isValid()) {
    return null;
  }
  PsiFile file=dirtyScope.getContainingFile();
  if (file.getTextLength() != document.getTextLength()) {
    LOG.error("Length wrong! dirtyScope:" + dirtyScope,"file length:" + file.getTextLength(),"document length:" + document.getTextLength(),"file stamp:" + file.getModificationStamp(),"document stamp:" + document.getModificationStamp());
  }
  return dirtyScope.getTextRange();
}
