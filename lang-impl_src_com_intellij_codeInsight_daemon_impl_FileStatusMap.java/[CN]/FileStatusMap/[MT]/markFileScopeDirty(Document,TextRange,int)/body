{
  if (LOG.isDebugEnabled()) {
    LOG.debug("********************************* Mark dirty: " + scope);
  }
synchronized (myDocumentToStatusMap) {
    FileStatus status=myDocumentToStatusMap.get(document);
    if (status == null)     return;
    if (status.defensivelyMarked) {
      status.defensivelyMarked=false;
    }
    status.dirtyScope=combineScopes(status.dirtyScope,scope,fileLength);
    status.localInspectionsDirtyScope=combineScopes(status.localInspectionsDirtyScope,scope,fileLength);
    status.externalDirtyScope=combineScopes(status.externalDirtyScope,scope,fileLength);
  }
}
