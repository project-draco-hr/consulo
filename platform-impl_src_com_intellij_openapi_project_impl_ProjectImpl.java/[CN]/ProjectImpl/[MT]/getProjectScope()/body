{
  if (myProjectScope == null) {
    final ProjectRootManager projectRootManager=getComponent(ProjectRootManager.class);
    myProjectScope=new GlobalSearchScope(){
      private final ProjectFileIndex myFileIndex=projectRootManager.getFileIndex();
      public boolean contains(      VirtualFile file){
        return file instanceof VirtualFileWindow || myFileIndex.isInContent(file);
      }
      public int compare(      VirtualFile file1,      VirtualFile file2){
        return 0;
      }
      public boolean isSearchInModuleContent(      @NotNull Module aModule){
        return true;
      }
      public boolean isSearchInLibraries(){
        return false;
      }
      public String getDisplayName(){
        return PsiBundle.message("psi.search.scope.project");
      }
      public String toString(){
        return getDisplayName();
      }
    }
;
  }
  return myProjectScope;
}
