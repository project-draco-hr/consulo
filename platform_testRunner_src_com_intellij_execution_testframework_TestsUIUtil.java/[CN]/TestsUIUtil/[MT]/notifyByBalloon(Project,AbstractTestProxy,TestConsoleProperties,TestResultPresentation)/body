{
  if (project.isDisposed())   return;
  if (properties == null)   return;
  TestStatusListener.notifySuiteFinished(root,properties.getProject());
  final String testRunDebugId=properties.isDebug() ? ToolWindowId.DEBUG : ToolWindowId.RUN;
  final ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(project);
  final String title=testResultPresentation.getTitle();
  final String text=testResultPresentation.getText();
  final String balloonText=testResultPresentation.getBalloonText();
  final MessageType type=testResultPresentation.getType();
  if (!Comparing.strEqual(toolWindowManager.getActiveToolWindowId(),testRunDebugId)) {
    toolWindowManager.notifyByBalloon(testRunDebugId,type,balloonText,null,null);
  }
  NOTIFICATION_GROUP.createNotification(balloonText,type).notify(project);
  SystemNotifications.getInstance().notify("TestRunner",title,text);
}
