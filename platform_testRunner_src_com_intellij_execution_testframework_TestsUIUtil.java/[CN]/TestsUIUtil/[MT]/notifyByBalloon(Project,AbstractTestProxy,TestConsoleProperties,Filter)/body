{
  if (project.isDisposed())   return;
  final int failed=root != null ? filter.select(root.getAllTests()).size() : -1;
  if (properties == null)   return;
  final String testRunDebugId=properties.isDebug() ? ToolWindowId.DEBUG : ToolWindowId.RUN;
  final ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(project);
  if (!Comparing.strEqual(toolWindowManager.getActiveToolWindowId(),testRunDebugId)) {
    toolWindowManager.notifyByBalloon(testRunDebugId,failed == -1 ? MessageType.WARNING : (failed > 0 ? MessageType.ERROR : MessageType.INFO),failed == -1 ? ExecutionBundle.message("test.not.started.progress.text") : (failed > 0 ? failed + " " + ExecutionBundle.message("junit.runing.info.tests.failed.label") : ExecutionBundle.message("junit.runing.info.tests.passed.label")),null,null);
  }
}
