{
  int selected=myTreeTable.getSelectedRow();
  if (selected < 0)   return;
  TemplateKey templateKey=getTemplateKey(selected);
  if (templateKey == null)   return;
  TemplateImpl template=myTemplates.get(templateKey);
  EditTemplateDialog dialog=new EditTemplateDialog(this,CodeInsightBundle.message("dialog.edit.live.template.title"),template,getTemplates(),(String)myExpandByCombo.getSelectedItem());
  dialog.show();
  if (!dialog.isOK())   return;
  myTemplates.remove(new TemplateKey(template));
  dialog.apply();
  myTemplates.put(new TemplateKey(template),template);
  AbstractTableModel model=(AbstractTableModel)myTreeTable.getModel();
  model.fireTableRowsUpdated(selected,selected);
  myTreeTable.setRowSelectionInterval(selected,selected);
  updateTemplateTextArea();
  isModified=true;
}
