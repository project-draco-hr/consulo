{
  PsiElement[] children=parent.getChildren();
  int index=0;
  for (int i=0; i < children.length; i++) {
    PsiElement child=children[i];
    if (hisClass.isAssignableFrom(child.getClass())) {
      T namedChild=(T)child;
      final String childName=namedChild.getName();
      if ((name != null && name.equals(childName)) || name == childName) {
        if (namedChild.equals(element)) {
          return index;
        }
        index++;
      }
    }
  }
  return index;
}
