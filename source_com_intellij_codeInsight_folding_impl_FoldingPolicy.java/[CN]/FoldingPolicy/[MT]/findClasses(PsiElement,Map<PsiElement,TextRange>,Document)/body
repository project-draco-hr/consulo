{
  final List<PsiClass> list=new ArrayList<PsiClass>();
  PsiElementVisitor visitor=new PsiRecursiveElementVisitor(){
    public void visitClass(    PsiClass aClass){
      list.add(aClass);
    }
    public void visitReferenceExpression(    PsiReferenceExpression expression){
      visitElement(expression);
    }
  }
;
  scope.accept(visitor);
  for (Iterator<PsiClass> iterator=list.iterator(); iterator.hasNext(); ) {
    PsiClass aClass=iterator.next();
    if (aClass.isValid()) {
      addToFold(foldElements,aClass,document,true);
      addElementsToFold(foldElements,aClass,document,false);
    }
  }
}
