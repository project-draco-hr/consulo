{
  final Set exceptionThrown=new HashSet(10);
  final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
  calculateExceptionsThrownForCodeBlock(tryBlock,exceptionThrown,factory);
  final Set exceptionHandled=ExceptionUtils.getExceptionTypesHandled(tryStatement);
  for (Iterator thrown=exceptionThrown.iterator(); thrown.hasNext(); ) {
    final PsiType thrownType=(PsiType)thrown.next();
    boolean found=false;
    for (Iterator handled=exceptionHandled.iterator(); handled.hasNext(); ) {
      final PsiType handledType=(PsiType)handled.next();
      if (handledType.isAssignableFrom(thrownType)) {
        found=true;
        break;
      }
    }
    if (!found) {
      exceptionTypes.add(thrownType);
    }
  }
  final PsiCodeBlock finallyBlock=tryStatement.getFinallyBlock();
  if (finallyBlock != null) {
    calculateExceptionsThrownForCodeBlock(finallyBlock,exceptionTypes,factory);
  }
  final PsiCodeBlock[] catchBlocks=tryStatement.getCatchBlocks();
  for (int i=0; i < catchBlocks.length; i++) {
    calculateExceptionsThrownForCodeBlock(catchBlocks[i],exceptionTypes,factory);
  }
}
