{
  final Presentation presentation=event.getPresentation();
  registerCustomShortcutSet(ActionManager.getInstance().getAction(IdeActions.ACTION_CALL_HIERARCHY).getShortcutSet(),null);
  final DataContext dataContext=event.getDataContext();
  final CallHierarchyBrowserBase browser=(CallHierarchyBrowserBase)dataContext.getData(CALL_HIERARCHY_BROWSER_DATA_CONSTANT);
  if (browser == null) {
    presentation.setVisible(false);
    presentation.setEnabled(false);
    return;
  }
  final PsiElement method=browser.getSelectedMethod();
  if (method == null) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
    return;
  }
  presentation.setVisible(true);
  if (!method.equals(browser.mySmartPsiElementPointer.getElement()) && method.isValid()) {
    presentation.setEnabled(true);
  }
 else {
    presentation.setEnabled(false);
  }
}
