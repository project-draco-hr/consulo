{
  JTree tree=getCurrentTree();
  if (tree == null)   return EMPTY_DESCRIPTORS;
  TreePath[] paths=tree.getSelectionPaths();
  if (paths == null || paths.length == 0)   return EMPTY_DESCRIPTORS;
  final ArrayList<HierarchyNodeDescriptor> result=new ArrayList<HierarchyNodeDescriptor>();
  for (  TreePath path : paths) {
    Object node=path.getLastPathComponent();
    if (!(node instanceof DefaultMutableTreeNode))     continue;
    Object userObject=((DefaultMutableTreeNode)node).getUserObject();
    if (!(userObject instanceof HierarchyNodeDescriptor))     continue;
    result.add((HierarchyNodeDescriptor)userObject);
  }
  return result.toArray(new HierarchyNodeDescriptor[result.size()]);
}
