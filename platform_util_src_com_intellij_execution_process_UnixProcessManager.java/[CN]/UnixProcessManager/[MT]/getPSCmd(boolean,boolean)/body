{
  String psCommand="/bin/ps";
  if (!new File(psCommand).isFile()) {
    psCommand="ps";
  }
  if (SystemInfo.isLinux) {
    return new String[]{psCommand,"-e","--format",commandLineOnly ? "%a" : "%P%p%a"};
  }
 else   if (SystemInfo.isMac || SystemInfo.isFreeBSD) {
    final String command=isShortenCommand ? "comm" : "command";
    return new String[]{psCommand,"-ax","-o",commandLineOnly ? command : "ppid,pid," + command};
  }
 else {
    throw new IllegalStateException(System.getProperty("os.name") + " is not supported.");
  }
}
