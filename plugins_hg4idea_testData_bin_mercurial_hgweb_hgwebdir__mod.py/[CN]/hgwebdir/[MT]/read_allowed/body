def read_allowed(self, ui, req):
    "Check allow_read and deny_read config options of a repo's ui object\n        to determine user permissions.  By default, with neither option set (or\n        both empty), allow all users to read the repo.  There are two ways a\n        user can be denied read access:  (1) deny_read is not empty, and the\n        user is unauthenticated or deny_read contains user (or *), and (2)\n        allow_read is not empty and the user is not in allow_read.  Return True\n        if user is allowed to read the repo, else return False."
    user = req.env.get('REMOTE_USER')
    deny_read = ui.configlist('web', 'deny_read', untrusted=True)
    if (deny_read and ((not user) or (deny_read == ['*']) or (user in deny_read))):
        return False
    allow_read = ui.configlist('web', 'allow_read', untrusted=True)
    if ((not allow_read) or (allow_read == ['*']) or (user in allow_read)):
        return True
    return False
