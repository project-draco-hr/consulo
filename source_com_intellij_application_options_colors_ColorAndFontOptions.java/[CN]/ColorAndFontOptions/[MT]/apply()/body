{
  try {
    EditorColorsManager myColorsManager=EditorColorsManager.getInstance();
    myColorsManager.removeAllSchemes();
    for (    MyColorScheme scheme : mySchemes.values()) {
      if (!scheme.isDefault()) {
        scheme.apply();
        myColorsManager.addColorsScheme(scheme.getOriginalScheme());
      }
    }
    EditorColorsScheme originalScheme=mySelectedScheme.getOriginalScheme();
    myColorsManager.setGlobalScheme(originalScheme);
    myColorsManager.saveAllSchemes();
    EditorFactory.getInstance().refreshAllEditors();
    initAll();
    myPanel.resetSchemesCombo();
    Project[] openProjects=ProjectManager.getInstance().getOpenProjects();
    for (    Project openProject : openProjects) {
      FileStatusManager.getInstance(openProject).fileStatusesChanged();
      DaemonCodeAnalyzer.getInstance(openProject).restart();
    }
    myPanel.apply();
  }
 catch (  IOException e) {
    throw new ConfigurationException(e.getMessage());
  }
}
