{
  List<NamedScope> namedScopes=new ArrayList<NamedScope>();
  Project[] projects=ProjectManager.getInstance().getOpenProjects();
  for (  Project project : projects) {
    final NamedScopesHolder[] holders=project.getComponents(NamedScopesHolder.class);
    for (    NamedScopesHolder holder : holders) {
      NamedScope[] scopes=holder.getScopes();
      namedScopes.addAll(Arrays.asList(scopes));
    }
  }
  Collections.sort(namedScopes,new Comparator<NamedScope>(){
    public int compare(    final NamedScope o1,    final NamedScope o2){
      return o1.getName().compareTo(o2.getName());
    }
  }
);
  for (  NamedScope namedScope : namedScopes) {
    String name=namedScope.getName();
    TextAttributesKey textAttributesKey=getScopeTextAttributeKey(name);
    if (scheme.getAttributes(textAttributesKey) == null) {
      scheme.setAttributes(textAttributesKey,new TextAttributes());
    }
    addSchemedDescription(descriptions,name,SCOPES_GROUP,textAttributesKey,scheme);
  }
}
