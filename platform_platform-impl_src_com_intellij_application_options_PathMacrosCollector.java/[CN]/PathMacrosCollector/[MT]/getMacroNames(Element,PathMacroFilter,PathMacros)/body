{
  final PathMacrosCollector collector=new PathMacrosCollector();
  collector.substitute(root,true,false,filter);
  final HashSet<String> result=new HashSet<String>(collector.myMacroMap.keySet());
  result.removeAll(pathMacros.getSystemMacroNames());
  result.removeAll(pathMacros.getLegacyMacroNames());
  result.removeAll(PathMacrosImpl.getToolMacroNames());
  result.removeAll(pathMacros.getIgnoredMacroNames());
  return result;
}
