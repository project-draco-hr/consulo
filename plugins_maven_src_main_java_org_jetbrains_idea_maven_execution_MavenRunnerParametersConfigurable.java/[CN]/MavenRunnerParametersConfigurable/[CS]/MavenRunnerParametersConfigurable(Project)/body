{
  workingDirComponent.getComponent().addBrowseFolderListener(RunnerBundle.message("maven.select.maven.project.file"),"",project,new FileChooserDescriptor(false,true,false,false,false,false){
    @Override public boolean isFileSelectable(    VirtualFile file){
      if (!super.isFileSelectable(file))       return false;
      return file.findChild(MavenConstants.POM_XML) != null;
    }
  }
);
  if (!project.isDefault()) {
    MyCompletionProvider profilesCompletionProvider=new MyCompletionProvider(project){
      @NotNull @Override protected String getPrefix(      @NotNull String currentTextPrefix){
        String prefix=super.getPrefix(currentTextPrefix);
        if (prefix.startsWith("-") || prefix.startsWith("!")) {
          prefix=prefix.substring(1);
        }
        return prefix;
      }
      @Override protected void addVariants(      @NotNull CompletionResultSet result,      MavenProjectsManager manager){
        for (        String profile : manager.getAvailableProfiles()) {
          result.addElement(LookupElementBuilder.create(profile));
        }
      }
    }
;
    profilesComponent.setComponent(profilesCompletionProvider.createEditor(project));
    MyCompletionProvider goalsCompletionProvider=new MyCompletionProvider(project){
      private volatile List<LookupElement> myCachedElements;
      @Override protected void addVariants(      @NotNull CompletionResultSet result,      MavenProjectsManager manager){
        List<LookupElement> cachedElements=myCachedElements;
        if (cachedElements == null) {
          cachedElements=MavenUtil.getPhaseVariants(manager);
          myCachedElements=cachedElements;
        }
        result.addAllElements(cachedElements);
      }
    }
;
    goalsComponent.setComponent(goalsCompletionProvider.createEditor(project));
  }
  setAnchor(profilesComponent.getLabel());
}
