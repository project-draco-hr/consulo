{
  filePath=getLastCommitName(project,filePath);
  GitSimpleHandler h=new GitSimpleHandler(project,GitUtil.getGitRoot(filePath),GitCommand.LOG);
  GitLogParser parser=new GitLogParser(project,HASH,COMMIT_TIME);
  h.setNoSSH(true);
  h.setSilent(true);
  h.addParameters("-n1",parser.getPretty());
  if (branch != null && !branch.isEmpty()) {
    h.addParameters(branch);
  }
 else {
    h.addParameters("--all");
  }
  h.endOptions();
  h.addRelativePaths(filePath);
  String result=h.run();
  if (result.length() == 0) {
    return null;
  }
  final GitLogRecord record=parser.parseOneRecord(result);
  if (record == null) {
    return null;
  }
  record.setUsedHandler(h);
  return new GitRevisionNumber(record.getHash(),record.getDate());
}
