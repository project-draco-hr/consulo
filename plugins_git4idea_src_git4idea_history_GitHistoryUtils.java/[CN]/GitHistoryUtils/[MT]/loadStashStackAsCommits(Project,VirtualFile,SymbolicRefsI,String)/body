{
  GitSimpleHandler h=new GitSimpleHandler(project,root,GitCommand.STASH.readLockingCommand());
  GitLogParser parser=new GitLogParser(project,GitLogParser.NameStatus.STATUS,SHORT_HASH,HASH,COMMIT_TIME,AUTHOR_NAME,AUTHOR_TIME,AUTHOR_EMAIL,COMMITTER_NAME,COMMITTER_EMAIL,SHORT_PARENTS,REF_NAMES,SHORT_REF_LOG_SELECTOR,SUBJECT,BODY,RAW_BODY);
  h.setSilent(true);
  h.addParameters("list");
  h.addParameters(parameters);
  h.addParameters(parser.getPretty());
  String out;
  h.setCharset(Charset.forName(GitConfigUtil.getLogEncoding(project,root)));
  out=h.run();
  final List<GitLogRecord> gitLogRecords=parser.parse(out);
  final List<Pair<String,GitHeavyCommit>> result=new ArrayList<Pair<String,GitHeavyCommit>>();
  for (  GitLogRecord gitLogRecord : gitLogRecords) {
    ProgressManager.checkCanceled();
    final GitHeavyCommit gitCommit=createCommit(project,refs,root,gitLogRecord);
    result.add(new Pair<String,GitHeavyCommit>(gitLogRecord.getShortenedRefLog(),gitCommit));
  }
  return result;
}
