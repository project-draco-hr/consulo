{
  filePath=getLastCommitName(project,filePath);
  GitSimpleHandler h=new GitSimpleHandler(project,GitUtil.getGitRoot(filePath),GitCommand.LOG);
  GitLogParser parser=shortHash ? new GitLogParser(project,SHORT_HASH,COMMIT_TIME) : new GitLogParser(project,HASH,COMMIT_TIME);
  h.setSilent(true);
  h.addParameters("-n1",parser.getPretty());
  h.addParameters(!StringUtil.isEmpty(branch) ? branch : "--all");
  h.endOptions();
  h.addRelativePaths(filePath);
  String result=h.run();
  if (result.length() == 0) {
    return null;
  }
  final GitLogRecord record=parser.parseOneRecord(result);
  if (record == null) {
    return null;
  }
  record.setUsedHandler(h);
  return shortHash ? new GitRevisionNumber(record.getShortHash(),record.getDate()) : new GitRevisionNumber(record.getHash(),record.getDate());
}
