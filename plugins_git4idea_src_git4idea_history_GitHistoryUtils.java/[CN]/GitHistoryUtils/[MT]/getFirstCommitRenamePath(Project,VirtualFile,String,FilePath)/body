{
  final GitSimpleHandler h=new GitSimpleHandler(project,root,GitCommand.SHOW);
  final GitLogParser parser=new GitLogParser(HASH);
  h.setNoSSH(true);
  h.setStdoutSuppressed(true);
  h.addParameters("-M","--name-status",parser.getPretty(),"--encoding=UTF-8",commit);
  h.endOptions();
  parser.setNameInOutput(true);
  final String output=h.run();
  final List<GitLogRecord> records=parser.parse(output);
  GitLogRecord fileRecord=null;
  for (  GitLogRecord record : records) {
    final List<String> paths=record.getPaths();
    if (!paths.isEmpty()) {
      String path=paths.get(paths.size() - 1);
      if (path.equals(GitUtil.relativePath(root,filePath))) {
        fileRecord=record;
        break;
      }
    }
  }
  if (fileRecord != null && fileRecord.getNameStatus() == 'R') {
    final List<FilePath> paths=fileRecord.getFilePaths(root);
    final String message="Rename commit should have 2 paths. Commit: " + commit;
    if (!LOG.assertTrue(paths.size() == 2,message + " Output: [" + output+ "]")) {
      throw new VcsException(message);
    }
    return paths.get(0);
  }
  return null;
}
