{
  VirtualFile root=GitUtil.getGitRoot(filePath);
  GitBranch c=GitBranch.current(project,root);
  GitBranch t=c == null ? null : c.tracked(project,root);
  if (t == null) {
    return new ItemLatestState(getCurrentRevision(project,filePath),true,false);
  }
  filePath=getLastCommitName(project,filePath);
  GitSimpleHandler h=new GitSimpleHandler(project,root,GitCommand.LOG);
  h.setNoSSH(true);
  h.setSilent(true);
  h.addParameters("-n1","--pretty=format:%H%n%ct","--name-status",t.getFullName());
  h.endOptions();
  h.addRelativePaths(filePath);
  String result=h.run();
  if (result.length() == 0) {
    return null;
  }
  String[] lines=result.split("\n");
  String hash=lines[0];
  boolean exists=lines.length < 3 || lines[2].charAt(0) != 'D';
  Date commitDate=GitUtil.parseTimestamp(lines[1]);
  return new ItemLatestState(new GitRevisionNumber(hash,commitDate),exists,false);
}
