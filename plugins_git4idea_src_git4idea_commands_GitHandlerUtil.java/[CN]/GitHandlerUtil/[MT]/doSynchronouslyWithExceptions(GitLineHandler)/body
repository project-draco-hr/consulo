{
  final ProgressManager manager=ProgressManager.getInstance();
  handler.addLineListener(new GitLineHandlerListenerProgress(manager.getProgressIndicator(),handler,""){
    @Override public void processTerminted(    final int exitCode){
      if (exitCode != 0 && !handler.isIgnoredErrorCode(exitCode)) {
        ensureError(exitCode);
      }
    }
    @Override public void startFailed(    final Throwable exception){
      handler.addError(new VcsException("Git start failed: " + exception.toString(),exception));
    }
  }
);
  runInCurrentThread(handler,manager.getProgressIndicator(),false);
  return handler.errors();
}
