{
  final ProgressManager manager=ProgressManager.getInstance();
  manager.run(new Task.Modal(handler.project(),operationTitle,false){
    public void run(    @NotNull final ProgressIndicator indicator){
      handler.addLineListener(new GitLineHandlerListenerProgress(indicator,handler,operationName,showErrors));
      runInCurrentThread(handler,indicator,setIndeterminateFlag);
    }
  }
);
  if (!handler.isStarted()) {
    return -1;
  }
  return handler.getExitCode();
}
