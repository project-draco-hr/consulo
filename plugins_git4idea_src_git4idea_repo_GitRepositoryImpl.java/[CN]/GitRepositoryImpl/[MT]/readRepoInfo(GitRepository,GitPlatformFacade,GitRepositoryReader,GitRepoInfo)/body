{
  File configFile=new File(VfsUtilCore.virtualToIoFile(repository.getGitDir()),"config");
  GitConfig config=GitConfig.read(platformFacade,configFile);
  Collection<GitRemote> remotes=config.parseRemotes();
  TempState tempState=readRepository(reader,remotes);
  Collection<GitBranchTrackInfo> trackInfos=config.parseTrackInfos(tempState.myBranches.getLocalBranches(),tempState.myBranches.getRemoteBranches());
  GitRepoInfo info=new GitRepoInfo(tempState.myCurrentBranch,tempState.myCurrentRevision,tempState.myState,remotes,tempState.myBranches.getLocalBranches(),tempState.myBranches.getRemoteBranches(),trackInfos);
  notifyListeners(repository,previousInfo,info);
  return info;
}
