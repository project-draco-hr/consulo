{
  final HighlightInfo[][] errors=new HighlightInfo[1][];
  final Runnable runnable=new Runnable(){
    public void run(){
      errors[0]=DaemonCodeAnalyzerImpl.getHighlights(myDocument,HighlightSeverity.ERROR,myProject);
    }
  }
;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    runnable.run();
  }
 else {
    try {
      SwingUtilities.invokeAndWait(runnable);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
catch (    InvocationTargetException e) {
      e.printStackTrace();
    }
  }
  if (errors[0].length > 0) {
    return;
  }
  final ExternalAnnotator externalAnnotator=myFile.getLanguage().getExternalAnnotator();
  if (externalAnnotator != null) {
    externalAnnotator.annotate(myFile,myAnnotationHolder);
  }
}
