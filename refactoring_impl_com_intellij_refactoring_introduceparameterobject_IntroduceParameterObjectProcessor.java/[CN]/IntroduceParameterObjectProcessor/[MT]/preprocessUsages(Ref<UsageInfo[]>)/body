{
  ArrayList<String> conflicts=new ArrayList<String>();
  if (myUseExistingClass) {
    if (existingClass == null) {
      conflicts.add(RefactorJBundle.message("cannot.perform.the.refactoring") + "Could not find the selected class");
    }
    if (!myExistingClassCompatible) {
      conflicts.add(RefactorJBundle.message("cannot.perform.the.refactoring") + "Selected class is not compatible with chosenn parameters");
    }
  }
 else   if (existingClass != null) {
    conflicts.add(RefactorJBundle.message("cannot.perform.the.refactoring") + RefactorJBundle.message("there.already.exists.a.class.with.the.chosen.name"));
  }
  if (!conflicts.isEmpty()) {
    ConflictsDialog dialog=new ConflictsDialog(myProject,conflicts);
    dialog.show();
    if (!dialog.isOK()) {
      return false;
    }
  }
  return super.preprocessUsages(refUsages);
}
