{
  ProperTextRange.assertProperRange(rangeInsideHost);
  String hostText=myHost.getText();
  outSourceOffsets=new int[myHost.getTextLength() + 1];
  int originalLength=outChars.length();
  PsiLiteralExpressionImpl.parseStringCharacters(hostText,outChars,outSourceOffsets);
  String subText=hostText.substring(rangeInsideHost.getStartOffset(),rangeInsideHost.getEndOffset());
  outChars.setLength(originalLength);
  StringBuilder displayCharsInTheStart=new StringBuilder();
  PsiLiteralExpressionImpl.parseStringCharacters(hostText.substring(0,rangeInsideHost.getStartOffset()),displayCharsInTheStart,null);
  rangeDisplayStart=displayCharsInTheStart.length();
  return PsiLiteralExpressionImpl.parseStringCharacters(subText,outChars,null);
}
