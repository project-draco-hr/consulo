{
  try {
    DiffContent content1;
    DiffContent content2;
    DiffContentFactoryEx contentFactory=DiffContentFactoryEx.getInstanceEx();
    if (FileStatus.ADDED.equals(myFileStatus)) {
      content1=contentFactory.createEmpty();
    }
 else {
      byte[] bytes1=loadContent(myFilePointer,myBefore);
      content1=contentFactory.createFromBytes(myProject,bytes1,myFilePath);
    }
    if (FileStatus.DELETED.equals(myFileStatus)) {
      content2=contentFactory.createEmpty();
    }
 else {
      byte[] bytes2=loadContent(myFilePointer,myAfter);
      content2=contentFactory.createFromBytes(myProject,bytes2,myFilePath);
    }
    String title=DiffRequestFactoryImpl.getContentTitle(myFilePath);
    return new SimpleDiffRequest(title,content1,content2,"Before update","After update");
  }
 catch (  IOException e) {
    throw new DiffRequestProducerException("Can't load content",e);
  }
}
