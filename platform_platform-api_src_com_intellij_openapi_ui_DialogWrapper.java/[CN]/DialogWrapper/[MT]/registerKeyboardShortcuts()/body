{
  getRootPane().registerKeyboardAction(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
      MenuElement[] selectedPath=menuSelectionManager.getSelectedPath();
      if (selectedPath.length > 0) {
        menuSelectionManager.clearSelectedPath();
      }
 else       if (ApplicationManager.getApplication() == null || !StackingPopupDispatcher.getInstance().isPopupFocused()) {
        doCancelAction(e);
      }
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  if (ApplicationInfo.contextHelpAvailable()) {
    ShortcutSet help=CommonShortcuts.getContextHelp();
    for (    Shortcut shortcut : help.getShortcuts()) {
      if (shortcut instanceof KeyboardShortcut) {
        KeyboardShortcut ks=(KeyboardShortcut)shortcut;
        KeyStroke first=ks.getFirstKeyStroke();
        KeyStroke second=ks.getSecondKeyStroke();
        if (second == null) {
          getRootPane().registerKeyboardAction(new ActionListener(){
            public void actionPerformed(            ActionEvent e){
              doHelpAction();
            }
          }
,first,JComponent.WHEN_IN_FOCUSED_WINDOW);
        }
      }
    }
    getRootPane().registerKeyboardAction(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        doHelpAction();
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_HELP,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
  if (myButtons != null) {
    getRootPane().registerKeyboardAction(new AbstractAction(){
      public void actionPerformed(      ActionEvent e){
        focusPreviousButton();
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
    getRootPane().registerKeyboardAction(new AbstractAction(){
      public void actionPerformed(      ActionEvent e){
        focusNextButton();
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  }
  if (myYesAction != null) {
    getRootPane().registerKeyboardAction(myYesAction,KeyStroke.getKeyStroke(KeyEvent.VK_Y,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
  if (myNoAction != null) {
    getRootPane().registerKeyboardAction(myNoAction,KeyStroke.getKeyStroke(KeyEvent.VK_N,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
}
