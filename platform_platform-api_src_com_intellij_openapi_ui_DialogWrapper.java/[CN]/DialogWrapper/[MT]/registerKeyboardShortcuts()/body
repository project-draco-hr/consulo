{
  ActionListener cancelKeyboardAction=new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
      MenuElement[] selectedPath=menuSelectionManager.getSelectedPath();
      if (selectedPath.length > 0) {
        menuSelectionManager.clearSelectedPath();
      }
 else       if (ApplicationManager.getApplication() == null || !StackingPopupDispatcher.getInstance().isPopupFocused()) {
        doCancelAction(e);
      }
    }
  }
;
  getRootPane().registerKeyboardAction(cancelKeyboardAction,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  registerForEveryKeyboardShortcut(cancelKeyboardAction,CommonShortcuts.getCloseActiveWindow());
  if (ApplicationInfo.contextHelpAvailable()) {
    ActionListener helpAction=new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        doHelpAction();
      }
    }
;
    registerForEveryKeyboardShortcut(helpAction,CommonShortcuts.getContextHelp());
    getRootPane().registerKeyboardAction(helpAction,KeyStroke.getKeyStroke(KeyEvent.VK_HELP,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
  if (myButtons != null) {
    getRootPane().registerKeyboardAction(new AbstractAction(){
      public void actionPerformed(      ActionEvent e){
        focusPreviousButton();
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
    getRootPane().registerKeyboardAction(new AbstractAction(){
      public void actionPerformed(      ActionEvent e){
        focusNextButton();
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  }
  if (myYesAction != null) {
    getRootPane().registerKeyboardAction(myYesAction,KeyStroke.getKeyStroke(KeyEvent.VK_Y,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
  if (myNoAction != null) {
    getRootPane().registerKeyboardAction(myNoAction,KeyStroke.getKeyStroke(KeyEvent.VK_N,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
}
