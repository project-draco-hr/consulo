{
  final ProgressIndicator pi=ProgressManager.getInstance().getProgressIndicator();
  if (pi != null) {
    pi.setIndeterminate(false);
  }
  final double num=changes.size();
  int cnt=0;
  for (  Change change : changes) {
    if ((!wrapper.beforeNull(change)) && (wrapper.movedOrRenamedOrReplaced(change) || (wrapper.afterNull(change)))) {
      refreshDeletedOrReplaced(wrapper.getBeforeFile(change));
    }
 else     if (!wrapper.beforeNull(change)) {
      refresh(wrapper.getBeforeFile(change));
    }
    if ((!wrapper.afterNull(change)) && (wrapper.beforeNull(change) || (!Comparing.equal(change.getAfterRevision().getFile(),change.getBeforeRevision().getFile())))) {
      refresh(wrapper.getAfterFile(change));
    }
    if (pi != null) {
      ++cnt;
      pi.setFraction(cnt / num);
      pi.setText2("Refreshing: " + change.toString());
    }
  }
}
