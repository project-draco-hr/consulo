{
  boolean isFirst=true;
  for (  List<String> paths : GitFileUtils.chunkPaths(root,files)) {
    GitSimpleHandler handler=new GitSimpleHandler(project,root,GitCommand.COMMIT);
    handler.setNoSSH(true);
    if (isFirst) {
      isFirst=false;
    }
 else {
      handler.addParameters("--amend");
    }
    handler.addParameters("--only","-F",message.getAbsolutePath());
    if (nextCommitAuthor != null) {
      handler.addParameters("--author=" + nextCommitAuthor);
    }
    handler.endOptions();
    handler.addParameters(paths);
    handler.run();
  }
}
