{
  super.setUp();
  final InspectionToolRegistrar registrar=new InspectionToolRegistrar(SearchableOptionsRegistrar.getInstance());
  registrar.registerTools(new InspectionToolProvider[0]);
  final InspectionProfileManager inspectionProfileManager=new InspectionProfileManager(registrar,new MockSchemesManagerFactory());
  myInspectionProfile=new MockInspectionProfile();
  myAnnotationsManager=new DomElementAnnotationsManagerImpl(getProject()){
    @Override protected InspectionProfile getInspectionProfile(    final DomFileElement fileElement){
      return myInspectionProfile;
    }
  }
;
  final XmlFile file=createXmlFile("<a/>");
  final MockDomElement rootElement=new MockDomElement(){
    @Override @Nullable public XmlElement getXmlElement(){
      return getXmlTag();
    }
    @Override public XmlTag getXmlTag(){
      return file.getDocument().getRootTag();
    }
    @Override public Type getDomElementType(){
      return DomElement.class;
    }
  }
;
  myElement=new MockDomFileElement(){
    @Override @Nullable public XmlElement getXmlElement(){
      return file;
    }
    @Override @NotNull public XmlFile getFile(){
      return file;
    }
    @Override public DomElement getParent(){
      return null;
    }
    @Override @NotNull public DomElement getRootElement(){
      return rootElement;
    }
    @Override public Class getRootElementClass(){
      return DomElement.class;
    }
    @Override public boolean isValid(){
      return true;
    }
  }
;
}
