{
  myEditorTabPanel=editorTabPanel;
  myFileUrl=fileUrl;
  sinkEvents(Event.ONCLICK | Event.MOUSEEVENTS | Event.ONKEYUP);
  final EditorColorSchemeService schemeService=GwtUtil.get(EditorColorSchemeService.KEY);
  schemeService.addListener(myListener);
  myScheme=schemeService.getScheme();
  setDefaultTextColors(this);
  addStyleName("scroll");
  GwtUIUtil.fill(this);
  setWidget(GwtUIUtil.loadingPanel());
  Scheduler.get().scheduleDeferred(new Command(){
    @Override public void execute(){
      myBuilder=new EditorSegmentBuilder(text);
      myLineCount=myBuilder.getLineCount();
      setWidget(build());
      if (myDelayedCaredOffset != -1) {
        focusOffset(myDelayedCaredOffset);
        myDelayedCaredOffset=-1;
      }
      doHighlightImpl();
    }
  }
);
}
