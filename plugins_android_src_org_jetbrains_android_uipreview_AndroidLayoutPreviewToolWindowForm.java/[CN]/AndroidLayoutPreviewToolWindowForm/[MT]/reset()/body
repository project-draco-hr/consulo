{
  final AndroidLayoutPreviewToolWindowSettings.State state=mySettings.getState();
  final String savedDeviceName=state.getDevice();
  if (savedDeviceName != null) {
    LayoutDevice savedDevice=null;
    for (    LayoutDevice device : myDevices) {
      if (savedDeviceName.equals(device.getName())) {
        savedDevice=device;
        break;
      }
    }
    if (savedDevice != null) {
      myDevicesCombo.setSelectedItem(savedDevice);
    }
  }
  final String savedDeviceConfigName=state.getDeviceConfiguration();
  if (savedDeviceConfigName != null) {
    LayoutDeviceConfiguration savedDeviceConfig=null;
    for (    LayoutDeviceConfiguration config : myDeviceConfigurations) {
      if (savedDeviceConfigName.equals(config.getName())) {
        savedDeviceConfig=config;
        break;
      }
    }
    if (savedDeviceConfig != null) {
      myDeviceConfigurationsCombo.setSelectedItem(savedDeviceConfig);
    }
  }
  final String savedTargetHashString=state.getTargetHashString();
  if (savedTargetHashString != null) {
    IAndroidTarget savedTarget=null;
    for (    IAndroidTarget target : myTargets) {
      if (savedTargetHashString.equals(target.hashString())) {
        savedTarget=target;
        break;
      }
    }
    if (savedTarget != null) {
      myTargetCombo.setSelectedItem(savedTarget);
    }
  }
  final String savedLocaleLanguage=state.getLocaleLanguage();
  final String savedLocaleRegion=state.getLocaleRegion();
  if (savedLocaleLanguage != null || savedLocaleRegion != null) {
    LocaleData savedLocale=null;
    LocaleData savedLocaleCandidate=null;
    for (    LocaleData locale : myLocales) {
      if (Comparing.equal(locale.getLanguage(),savedLocaleLanguage)) {
        if (Comparing.equal(locale.getRegion(),savedLocaleRegion)) {
          savedLocale=locale;
          break;
        }
 else         if (savedLocaleCandidate == null) {
          savedLocaleCandidate=locale;
        }
      }
    }
    if (savedLocale == null) {
      savedLocale=savedLocaleCandidate;
    }
    if (savedLocale != null) {
      myLocaleCombo.setSelectedItem(savedLocale);
    }
  }
  if (state.getDockMode() != null) {
    final DockMode savedDockMode=DockMode.getEnum(state.getDockMode());
    if (savedDockMode != null) {
      myDockModeCombo.setSelectedItem(savedDockMode);
    }
  }
  if (state.getNightMode() != null) {
    final NightMode savedNightMode=NightMode.getEnum(state.getNightMode());
    if (savedNightMode != null) {
      myNightCombo.setSelectedItem(savedNightMode);
    }
  }
}
