{
  final VirtualFile folder=vFile.getParent();
  if (folder == null) {
    return null;
  }
  final String[] folderSegments=folder.getName().split(SdkConstants.RES_QUALIFIER_SEP);
  if (folderSegments.length == 0) {
    return null;
  }
  final FolderConfiguration config=FolderConfiguration.getConfig(folderSegments);
  if (config != null) {
    for (    State deviceConfig : myDeviceConfigurations) {
      if (DeviceConfigHelper.getFolderConfig(deviceConfig).isMatchFor(config)) {
        return deviceConfig;
      }
    }
  }
  return null;
}
