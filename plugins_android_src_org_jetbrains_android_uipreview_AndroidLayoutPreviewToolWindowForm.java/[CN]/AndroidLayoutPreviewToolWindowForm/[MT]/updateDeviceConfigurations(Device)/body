{
  final State selectedConfiguration=getSelectedDeviceConfiguration();
  final String selectedConfigurationName=selectedConfiguration != null ? selectedConfiguration.getName() : null;
  final List<State> configurations=device != null ? device.getAllStates() : Collections.<State>emptyList();
  State newSelectedConfiguration=configurations.size() > 0 ? configurations.get(0) : null;
  if (selectedConfigurationName != null) {
    for (    State configuration : configurations) {
      if (selectedConfigurationName.equals(configuration.getName())) {
        newSelectedConfiguration=configuration;
      }
    }
  }
  if (newSelectedConfiguration == null) {
    newSelectedConfiguration=configurations.get(0);
  }
  myDeviceConfigurations=configurations;
  myDeviceConfigurationsCombo.setModel(new CollectionComboBoxModel(configurations,newSelectedConfiguration));
}
