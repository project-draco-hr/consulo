{
  final AndroidSdk sdkObject=platform != null ? platform.getSdk() : null;
  final LayoutDevice selectedDevice=getSelectedDevice();
  final String selectedDeviceName=selectedDevice != null ? selectedDevice.getName() : null;
  final List<LayoutDevice> devices;
  if (sdkObject != null) {
    myLayoutDeviceManager.loadDevices(sdkObject);
    devices=myLayoutDeviceManager.getCombinedList();
  }
 else {
    devices=Collections.emptyList();
  }
  LayoutDevice newSelectedDevice=devices.size() > 0 ? devices.get(0) : null;
  if (selectedDeviceName != null) {
    for (    LayoutDevice device : devices) {
      if (selectedDeviceName.equals(device.getName())) {
        newSelectedDevice=device;
      }
    }
  }
  if (newSelectedDevice == null && devices.size() > 0) {
    newSelectedDevice=devices.get(0);
  }
  myDevices=devices;
  myDevicesCombo.setModel(new CollectionComboBoxModel(devices,newSelectedDevice));
  if (newSelectedDevice != null) {
    updateDeviceConfigurations(newSelectedDevice);
  }
  final IAndroidTarget oldSelectedTarget=(IAndroidTarget)myTargetCombo.getSelectedItem();
  final String selectedTargetHashString=oldSelectedTarget != null ? oldSelectedTarget.hashString() : null;
  IAndroidTarget newSelectedTarget=platform != null ? platform.getTarget() : null;
  final List<IAndroidTarget> targets;
  if (sdkObject != null) {
    targets=new ArrayList<IAndroidTarget>();
    for (    IAndroidTarget target : sdkObject.getTargets()) {
      if (target.isPlatform()) {
        if (target.hashString().equals(selectedTargetHashString)) {
          newSelectedTarget=target;
        }
        targets.add(target);
      }
    }
  }
 else {
    targets=Collections.emptyList();
  }
  if (newSelectedTarget == null && targets.size() > 0) {
    newSelectedTarget=targets.get(0);
  }
  myTargets=targets;
  myTargetCombo.setModel(new CollectionComboBoxModel(targets,newSelectedTarget));
}
