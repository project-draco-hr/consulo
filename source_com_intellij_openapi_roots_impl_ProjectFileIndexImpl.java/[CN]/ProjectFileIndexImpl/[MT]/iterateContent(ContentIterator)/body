{
  Module[] modules=ModuleManager.getInstance(myProject).getModules();
  for (  Module module : modules) {
    VirtualFile[] contentRoots=ModuleRootManager.getInstance(module).getContentRoots();
    for (    VirtualFile contentRoot : contentRoots) {
      DirectoryInfo info=myDirectoryIndex.getInfoForDirectory(contentRoot);
      if (info == null)       continue;
      if (!module.equals(info.module))       continue;
      VirtualFile parent=contentRoot.getParent();
      if (parent != null) {
        DirectoryInfo parentInfo=myDirectoryIndex.getInfoForDirectory(parent);
        if (parentInfo != null && parentInfo.module != null)         continue;
      }
      boolean finished=FileIndexImplUtil.iterateRecursively(contentRoot,myContentFilter,iterator);
      if (!finished)       return false;
    }
  }
  final VirtualFile projectBaseDir=myProject.getBaseDir();
  final DirectoryInfo info=myDirectoryIndex.getInfoForDirectory(projectBaseDir);
  if (info != null && info.module == null) {
    boolean finished=FileIndexImplUtil.iterateRecursively(projectBaseDir,myProjectRootContentFilter,iterator);
    if (!finished)     return false;
  }
  return true;
}
