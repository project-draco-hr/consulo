{
  String extension=chooseExtension();
  String name=chooseName();
  if (name.length() <= 3)   name="___" + name;
  File tempFile;
  try {
    tempFile=FileUtil.createTempFile(name,extension);
  }
 catch (  IOException e) {
    tempFile=FileUtil.createTempFile(STD_PREFIX,extension);
  }
  FileOutputStream stream=null;
  try {
    stream=new FileOutputStream(tempFile);
    final DiffContent content=getContent();
    stream.write(myRequest instanceof MergeRequest ? content.getDocument().getText().getBytes() : content.getBytes());
  }
  finally {
    if (stream != null)     stream.close();
  }
  return tempFile;
}
