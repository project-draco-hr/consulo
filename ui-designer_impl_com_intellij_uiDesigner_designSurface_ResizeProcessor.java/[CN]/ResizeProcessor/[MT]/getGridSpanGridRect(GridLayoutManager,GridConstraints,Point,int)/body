{
  int horzGridLine=(resizeMask & (Painter.NORTH_MASK | Painter.SOUTH_MASK)) != 0 ? grid.getHorizontalGridLineNear(point.y,EPSILON) : -1;
  int vertGridLine=(resizeMask & (Painter.WEST_MASK | Painter.EAST_MASK)) != 0 ? grid.getVerticalGridLineNear(point.x,EPSILON) : -1;
  if (horzGridLine != -1 || vertGridLine != -1) {
    final int origStartCol=originalConstraints.getColumn();
    final int origEndCol=originalConstraints.getColumn() + originalConstraints.getColSpan() - 1;
    int startCol=origStartCol;
    int endCol=origEndCol;
    if (vertGridLine >= 0) {
      if ((resizeMask & Painter.WEST_MASK) != 0 && vertGridLine <= endCol) {
        startCol=vertGridLine;
      }
 else       if ((resizeMask & Painter.EAST_MASK) != 0 && vertGridLine > startCol) {
        endCol=vertGridLine - 1;
      }
    }
    final int origStartRow=originalConstraints.getRow();
    final int origEndRow=originalConstraints.getRow() + originalConstraints.getRowSpan() - 1;
    int startRow=origStartRow;
    int endRow=origEndRow;
    if (horzGridLine >= 0) {
      if ((resizeMask & Painter.NORTH_MASK) != 0 && horzGridLine <= endRow) {
        startRow=horzGridLine;
      }
 else       if ((resizeMask & Painter.SOUTH_MASK) != 0 && horzGridLine > startRow) {
        endRow=horzGridLine - 1;
      }
    }
    return new Rectangle(startCol,startRow,endCol - startCol + 1,endRow - startRow + 1);
  }
  return null;
}
