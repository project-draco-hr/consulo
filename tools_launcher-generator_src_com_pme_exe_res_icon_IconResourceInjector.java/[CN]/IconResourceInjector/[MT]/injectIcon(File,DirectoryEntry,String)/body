{
  IconFile iconFile=new IconFile(file);
  iconFile.read();
  DirectoryEntry subDirGroupIcon=root.findSubDir("IRD14").findSubDir(iconId);
  RawResource groupIcon=subDirGroupIcon.getRawResource(0);
  Bin.Value idCount=iconFile.getStructureMember("Header").getValueMember("idCount");
  GroupIconResource groupIconResource=new GroupIconResource(idCount);
  groupIconResource.copyFrom(iconFile);
  Level level=(Level)groupIconResource.getMember("Level");
  ArrayList directories=level.getMembers();
  for (int i=0; i < directories.size(); ++i) {
    GroupIconResourceDirectory grpDir=(GroupIconResourceDirectory)directories.get(i);
    grpDir.getValueMember("dwId").setValue(i + 1);
  }
  long size=groupIconResource.sizeInBytes();
  ByteArrayOutputStream bytesStream=new ByteArrayOutputStream((int)size);
  DataOutputStream stream=new DataOutputStream(bytesStream);
  groupIconResource.write(stream);
  groupIcon.getBytes().setBytes(bytesStream.toByteArray());
  DirectoryEntry iconsDir=root.findSubDir("IRD3");
  DirectoryEntry subDirIcon=iconsDir.findSubDir("IRD1");
  RawResource rawResource=subDirIcon.getRawResource(0);
  Level iconFileLevel=(Level)iconFile.getMember("Level");
  IconDirectory iconDirectory=(IconDirectory)iconFileLevel.getMembers().get(0);
  rawResource.setBytes(iconDirectory.getRawBytes());
  ArrayList icons=iconFileLevel.getMembers();
  for (int i=1; i < icons.size(); i++) {
    insertIcon(iconsDir,(IconDirectory)icons.get(i),i);
  }
}
