{
  final String fileUrl=vfile.getUrl();
  final Runnable parseScript=new Runnable(){
    public void run(){
      GroovyDslExecutor executor=getCachedExecutor(vfile,stamp);
      if (executor == null) {
        executor=createExecutor(text,vfile,project);
        vfile.putUserData(CACHED_EXECUTOR,Pair.create(executor,stamp));
        if (executor != null) {
          activateUntilModification(vfile);
        }
      }
synchronized (vfile) {
        for (        LinkedBlockingQueue<Pair<VirtualFile,GroovyDslExecutor>> queue : filesInProcessing.remove(fileUrl)) {
          queue.offer(Pair.create(vfile,executor));
        }
      }
    }
  }
;
synchronized (vfile) {
    final boolean isNewRequest=!filesInProcessing.containsKey(fileUrl);
    filesInProcessing.putValue(fileUrl,queue);
    if (isNewRequest) {
      ourPool.execute(parseScript);
      return true;
    }
  }
  return false;
}
