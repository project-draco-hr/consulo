{
  if (!isActivated(vfile)) {
    return;
  }
  final String exceptionText=ExceptionUtil.getThrowableText(e);
  LOG.info(exceptionText);
  disableFile(vfile,exceptionText);
  if (!ApplicationManagerEx.getApplicationEx().isInternal() && !ProjectRootManager.getInstance(project).getFileIndex().isInContent(vfile)) {
    return;
  }
  String content="<p>" + e.getMessage() + "</p><p><a href=\"\">Click here to investigate.</a></p>";
  NOTIFICATION_GROUP.createNotification("DSL script execution error",content,NotificationType.ERROR,new NotificationListener(){
    @Override public void hyperlinkUpdate(    @NotNull Notification notification,    @NotNull HyperlinkEvent event){
      GroovyDslAnnotator.analyzeStackTrace(project,exceptionText);
      notification.expire();
    }
  }
).notify(project);
}
