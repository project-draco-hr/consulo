{
  if (!isActivated(vfile)) {
    return;
  }
  disableFile(vfile);
  final StringWriter writer=new StringWriter();
  e.printStackTrace(new PrintWriter(writer));
  final String exceptionText=writer.toString();
  LOG.info(exceptionText);
  if (!ApplicationManagerEx.getApplicationEx().isInternal() && !ProjectRootManager.getInstance(project).getFileIndex().isInContent(vfile)) {
    return;
  }
  ApplicationManager.getApplication().getMessageBus().syncPublisher(Notifications.TOPIC).notify(new Notification("Groovy DSL parsing","DSL script execution error","<p>" + e.getMessage() + "</p><p><a href=\"\">Click here to investigate.</a></p>",NotificationType.ERROR,new NotificationListener(){
    public void hyperlinkUpdate(    @NotNull Notification notification,    @NotNull HyperlinkEvent event){
      final UnscrambleDialog dialog=new UnscrambleDialog(project);
      dialog.setText(exceptionText);
      dialog.show();
      notification.expire();
    }
  }
));
}
