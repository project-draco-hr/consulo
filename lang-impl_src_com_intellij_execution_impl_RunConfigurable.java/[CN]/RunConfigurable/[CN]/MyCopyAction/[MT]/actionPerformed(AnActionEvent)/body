{
  final SingleConfigurationConfigurable<RunConfiguration> configuration=getSelectedConfiguration();
  LOG.assertTrue(configuration != null);
  try {
    final DefaultMutableTreeNode typeNode=getSelectedConfigurationTypeNode();
    final RunnerAndConfigurationSettingsImpl settings=configuration.getSnapshot();
    settings.setName(createUniqueName(typeNode));
    getRunManager().createStepsBeforeRun(configuration.getSettings(),settings.getConfiguration());
    createNewConfiguration(settings,typeNode);
  }
 catch (  ConfigurationException e1) {
    Messages.showErrorDialog(myToolbarComponent,e1.getMessage(),e1.getTitle());
  }
}
