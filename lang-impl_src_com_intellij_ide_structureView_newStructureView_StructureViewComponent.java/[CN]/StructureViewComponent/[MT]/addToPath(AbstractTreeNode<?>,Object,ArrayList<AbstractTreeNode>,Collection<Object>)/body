{
  Object value=rootElement.getValue();
  if (value instanceof StructureViewTreeElement) {
    value=((StructureViewTreeElement)value).getValue();
  }
  if (!processedElements.add(value)) {
    return false;
  }
  if (Comparing.equal(value,element)) {
    result.add(0,rootElement);
    return true;
  }
  Collection<? extends AbstractTreeNode> children=rootElement.getChildren();
  for (  AbstractTreeNode child : children) {
    if (addToPath(child,element,result,processedElements)) {
      result.add(0,rootElement);
      return true;
    }
  }
  return false;
}
