{
  Color bkgColor;
  final CommitI commitAt=myTableModel.getCommitAt(row);
  GitCommit gitCommit=null;
  VirtualFile root=null;
  if (commitAt != null & (!commitAt.holdsDecoration())) {
    root=commitAt.selectRepository(myRootsUnderVcs);
    gitCommit=myDetailsCache.convert(root,commitAt.getHash());
  }
  if (isSelected) {
    bkgColor=UIUtil.getTableSelectionBackground();
  }
 else {
    bkgColor=UIUtil.getTableBackground();
    if (gitCommit != null) {
      if (myDetailsCache.getStashName(root,gitCommit.getShortHash()) != null) {
        bkgColor=Colors.stashed;
      }
 else       if (gitCommit.isOnLocal() && gitCommit.isOnTracked()) {
        bkgColor=Colors.commonThisBranch;
      }
 else       if (gitCommit.isOnLocal()) {
        bkgColor=Colors.ownThisBranch;
      }
    }
  }
  return bkgColor;
}
