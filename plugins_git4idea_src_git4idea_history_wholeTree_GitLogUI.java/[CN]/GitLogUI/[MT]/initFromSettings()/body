{
  mySelectedBranch=mySettings.getSelectedBranch();
  myUserFilterI.myFilter=mySettings.getSelectedUser();
  myUserFilterI.myMeSelected=mySettings.isSelectedUserMe();
  myUsersFilterAction.setSelectedPresets(mySettings.getSelectedUser(),mySettings.isSelectedUserMe());
  myBranchSelectorAction.setPreset(mySelectedBranch);
  final List<String> selectedPaths=mySettings.getSelectedPaths();
  if (selectedPaths != null && !selectedPaths.isEmpty()) {
    final ArrayList<VirtualFile> paths=new ArrayList<VirtualFile>();
    final LocalFileSystem lfs=LocalFileSystem.getInstance();
    for (    String path : selectedPaths) {
      final VirtualFile vf=lfs.refreshAndFindFileByIoFile(new File(path));
      if (vf == null)       return;
      paths.add(vf);
    }
    myStructureFilter.myAllSelected=false;
    myStructureFilter.getSelected().addAll(paths);
  }
  myStructureFilterAction.setPreset();
  if (mySettings.getDateState().mySelectedTime) {
    myDatesFilterAction.setPreset(mySettings.getDateState());
  }
  final HashSet<VirtualFile> activeRoots=new HashSet<VirtualFile>();
  final Set<String> saved=mySettings.getActiveRoots();
  if (!saved.isEmpty()) {
    for (    VirtualFile vf : myRootsUnderVcs) {
      if (saved.contains(vf.getPath())) {
        activeRoots.add(vf);
      }
    }
    if (!activeRoots.isEmpty()) {
      myTableModel.setActiveRoots(activeRoots);
    }
  }
}
