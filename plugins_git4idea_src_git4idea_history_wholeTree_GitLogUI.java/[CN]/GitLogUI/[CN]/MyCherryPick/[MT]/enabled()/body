{
  final MultiMap<VirtualFile,GitCommit> commitsAndCheck=getSelectedCommitsAndCheck();
  if (commitsAndCheck.isEmpty()) {
    return false;
  }
  for (  VirtualFile root : commitsAndCheck.keySet()) {
    final SymbolicRefsI refs=myRefs.get(root);
    final String currentBranch=refs == null ? null : (refs.getCurrent() == null ? null : refs.getCurrent().getName());
    if (currentBranch == null)     continue;
    final Collection<GitCommit> commits=commitsAndCheck.get(root);
    for (    GitCommit commit : commits) {
      if (commit.getParentsHashes().size() > 1)       return false;
      final List<String> branches=myDetailsCache.getBranches(root,commit.getShortHash());
      if (branches != null && branches.contains(currentBranch)) {
        return false;
      }
    }
  }
  return true;
}
