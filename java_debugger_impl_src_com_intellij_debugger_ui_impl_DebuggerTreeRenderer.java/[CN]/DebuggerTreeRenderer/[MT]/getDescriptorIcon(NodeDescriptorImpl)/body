{
  Icon nodeIcon=null;
  if (descriptor instanceof ThreadGroupDescriptorImpl) {
    nodeIcon=(((ThreadGroupDescriptorImpl)descriptor).isCurrent() ? myCurrentThreadGroupIcon : myThreadGroupIcon);
  }
 else   if (descriptor instanceof ThreadDescriptorImpl) {
    ThreadDescriptorImpl threadDescriptor=(ThreadDescriptorImpl)descriptor;
    nodeIcon=threadDescriptor.getIcon();
  }
 else   if (descriptor instanceof StackFrameDescriptorImpl) {
    StackFrameDescriptorImpl stackDescriptor=(StackFrameDescriptorImpl)descriptor;
    nodeIcon=stackDescriptor.getIcon();
  }
 else   if (descriptor instanceof ValueDescriptorImpl) {
    final ValueDescriptorImpl valueDescriptor=(ValueDescriptorImpl)descriptor;
    if (valueDescriptor instanceof FieldDescriptorImpl && ((FieldDescriptorImpl)valueDescriptor).isStatic()) {
      nodeIcon=myStaticFieldIcon;
    }
 else     if (valueDescriptor.isArray()) {
      nodeIcon=DebuggerIcons.ARRAY_VALUE_ICON;
    }
 else     if (valueDescriptor.isPrimitive()) {
      nodeIcon=DebuggerIcons.PRIMITIVE_VALUE_ICON;
    }
 else {
      if (valueDescriptor instanceof WatchItemDescriptor) {
        nodeIcon=DebuggerIcons.WATCHED_VALUE_ICON;
      }
 else {
        nodeIcon=DebuggerIcons.VALUE_ICON;
      }
    }
    final Icon valueIcon=valueDescriptor.getValueIcon();
    if (nodeIcon != null && valueIcon != null) {
      final RowIcon composite=new RowIcon(2);
      composite.setIcon(nodeIcon,0);
      composite.setIcon(valueIcon,1);
      nodeIcon=composite;
    }
  }
 else   if (descriptor instanceof MessageDescriptor) {
    MessageDescriptor messageDescriptor=(MessageDescriptor)descriptor;
    if (messageDescriptor.getKind() == MessageDescriptor.ERROR) {
      nodeIcon=XDebuggerUIConstants.ERROR_MESSAGE_ICON;
    }
 else     if (messageDescriptor.getKind() == MessageDescriptor.INFORMATION) {
      nodeIcon=XDebuggerUIConstants.INFORMATION_MESSAGE_ICON;
    }
 else     if (messageDescriptor.getKind() == MessageDescriptor.SPECIAL) {
      nodeIcon=null;
    }
  }
 else   if (descriptor instanceof StaticDescriptorImpl) {
    nodeIcon=myStaticIcon;
  }
  return nodeIcon;
}
