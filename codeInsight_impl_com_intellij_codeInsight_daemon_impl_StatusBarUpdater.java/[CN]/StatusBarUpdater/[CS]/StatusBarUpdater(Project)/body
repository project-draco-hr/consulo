{
  myProject=project;
  myCaretListener=new CaretListener(){
    public void caretPositionChanged(    CaretEvent e){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          if (myProject.isDisposed())           return;
          updateStatus();
        }
      }
);
    }
  }
;
  EditorFactory.getInstance().getEventMulticaster().addCaretListener(myCaretListener);
  FileEditorManager.getInstance(myProject).addFileEditorManagerListener(new FileEditorManagerAdapter(){
    public void selectionChanged(    FileEditorManagerEvent e){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          if (myProject.isDisposed()) {
            return;
          }
          updateStatus();
        }
      }
);
    }
  }
);
}
