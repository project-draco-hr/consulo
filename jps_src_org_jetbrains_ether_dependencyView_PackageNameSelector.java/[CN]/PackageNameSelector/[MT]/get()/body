{
  if (buffer == null) {
    return 0;
  }
 else   if (index == buffer.length()) {
    read();
    return '\r';
  }
  final char c=buffer.charAt(index++);
  if (c == 0) {
    return ' ';
  }
  return c;
}
