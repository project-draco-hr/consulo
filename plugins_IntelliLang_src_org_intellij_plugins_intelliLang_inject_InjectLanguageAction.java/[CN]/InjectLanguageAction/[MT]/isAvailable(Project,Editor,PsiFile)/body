{
  final PsiLanguageInjectionHost host=findInjectionHost(editor,file);
  if (host == null) {
    return false;
  }
 else {
    final List<Pair<PsiElement,TextRange>> injectedPsi=host.getInjectedPsi();
    if (host instanceof XmlText) {
      final XmlTag tag=((XmlText)host).getParentTag();
      if (tag == null || tag.getValue().getTextElements().length > 1 || tag.getSubTags().length > 0) {
        return false;
      }
    }
    if (injectedPsi == null || injectedPsi.size() == 0) {
      return true;
    }
  }
  return false;
}
