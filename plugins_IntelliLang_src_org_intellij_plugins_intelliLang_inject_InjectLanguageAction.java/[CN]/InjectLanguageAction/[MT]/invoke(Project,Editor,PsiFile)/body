{
  doChooseLanguageToInject(new Processor<String>(){
    public boolean process(    final String languageId){
      if (project.isDisposed())       return false;
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          invokeImpl(project,editor,file,languageId);
        }
      }
);
      return false;
    }
  }
);
}
