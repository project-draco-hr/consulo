{
  final VirtualFile dir=getVirtualFile(createTempDir("vDir"));
  assertNotNull(dir);
  dir.getChildren();
  final Ref<Boolean> eventFired=Ref.create(false);
  VirtualFileManager.getInstance().addVirtualFileListener(new VirtualFileAdapter(){
    @Override public void fileCreated(    @NotNull VirtualFileEvent event){
      eventFired.set(true);
    }
  }
,myTestRootDisposable);
  new WriteAction(){
    protected void run(    final Result result){
      try {
        dir.createChildData(this,"x.txt");
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
.execute();
  assertTrue(eventFired.get());
}
