{
  final Module[] modules=scope.getAffectedModules();
  final Set<Sdk> checkedJdks=new HashSet<Sdk>();
  for (  final Module module : modules) {
    final Sdk jdk=ModuleRootManager.getInstance(module).getSdk();
    if (jdk == null) {
      continue;
    }
    checkedJdks.add(jdk);
  }
  Sdk projectJdk=ProjectRootManager.getInstance(myProject).getProjectJdk();
  if (projectJdk != null)   checkedJdks.add(projectJdk);
  for (  Sdk sdk : checkedJdks) {
    String versionString=sdk.getVersionString();
    if (sdk.getSdkType() instanceof JavaSdk && !CompilerUtil.isOfVersion(versionString,"1.6") && !CompilerUtil.isOfVersion(versionString,"1.7")) {
      Messages.showErrorDialog(myProject,"Compiler API requires JDK version 6 or later: " + versionString,"Incompatible JDK");
      return false;
    }
  }
  return true;
}
