{
  if (from.getCanonicalPath().equals(to.getCanonicalPath()))   return;
  final FileInputStream inStream=new FileInputStream(from);
  try {
    boolean success=false;
    try {
      final FileOutputStream outStream=new FileOutputStream(to);
      try {
        final FileChannel inChannel=inStream.getChannel();
        try {
          final FileChannel outChannel=outStream.getChannel();
          try {
            inChannel.transferTo(0,inChannel.size(),outChannel);
          }
  finally {
            outChannel.close();
          }
        }
  finally {
          inChannel.close();
        }
      }
  finally {
        outStream.close();
      }
      success=true;
    }
  finally {
      if (!success)       to.delete();
    }
  }
  finally {
    inStream.close();
  }
}
