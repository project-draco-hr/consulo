{
  final Graphics2D g2d=(Graphics2D)g;
  final Insets ins=getBorderInsets(c);
  final int yOff=(ins.top + ins.bottom) / 4;
  final boolean square=DarculaButtonUI.isSquare(c);
  int offset=JBUI.scale(square ? 1 : getOffset());
  int w=c.getWidth();
  int h=c.getHeight();
  int diam=JBUI.scale(22);
  if (c.hasFocus()) {
    if (DarculaButtonUI.isHelpButton((JComponent)c)) {
      DarculaUIUtil.paintFocusOval(g2d,(w - diam) / 2,(h - diam) / 2,diam,diam);
    }
 else {
      DarculaUIUtil.paintFocusRing(g2d,offset,yOff,width - 2 * offset,height - 2 * yOff);
    }
  }
 else {
    final GraphicsConfig config=new GraphicsConfig(g);
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,RenderingHints.VALUE_STROKE_DEFAULT);
    g2d.setPaint(UIUtil.getGradientPaint(width / 2,y + yOff + JBUI.scale(1),Gray._80.withAlpha(90),width / 2,height - 2 * yOff,Gray._90.withAlpha(90)));
    ((Graphics2D)g).setPaint(getBorderColor());
    if (DarculaButtonUI.isHelpButton((JComponent)c)) {
      g.drawOval((w - diam) / 2,(h - diam) / 2,diam,diam);
    }
 else {
      g.translate(x,y);
      int r=JBUI.scale(square ? 3 : 5);
      g.drawRoundRect(offset,yOff,width - 2 * offset,height - 2 * yOff,r,r);
      g.translate(-x,-y);
    }
    config.restore();
  }
}
