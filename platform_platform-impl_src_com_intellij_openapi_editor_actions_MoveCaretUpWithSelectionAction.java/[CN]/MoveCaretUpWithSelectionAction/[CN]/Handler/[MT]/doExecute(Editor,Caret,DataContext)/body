{
  if (!editor.getCaretModel().supportsMultipleCarets()) {
    editor.getCaretModel().moveCaretRelatively(0,-1,true,editor.isColumnMode(),true);
    return;
  }
  if (editor.isColumnMode()) {
    EditorActionUtil.cloneOrRemoveCaret(editor,caret == null ? editor.getCaretModel().getPrimaryCaret() : caret,true);
  }
 else {
    CaretAction caretAction=new CaretAction(){
      @Override public void perform(      Caret caret){
        caret.moveCaretRelatively(0,-1,true,true);
      }
    }
;
    if (caret == null) {
      editor.getCaretModel().runForEachCaret(caretAction);
    }
 else {
      caretAction.perform(caret);
    }
  }
}
