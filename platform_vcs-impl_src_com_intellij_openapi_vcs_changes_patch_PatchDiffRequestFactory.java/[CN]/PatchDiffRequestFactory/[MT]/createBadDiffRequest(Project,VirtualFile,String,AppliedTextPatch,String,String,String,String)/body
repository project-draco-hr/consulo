{
  if (windowTitle == null)   windowTitle=getBadPatchTitle(file);
  if (localTitle == null)   localTitle=VcsBundle.message("patch.apply.conflict.local.version");
  if (resultTitle == null)   resultTitle=VcsBundle.message("patch.apply.conflict.patched.somehow.version");
  if (patchTitle == null)   patchTitle=VcsBundle.message("patch.apply.conflict.patch");
  DocumentContent resultContent=DiffContentFactory.getInstance().createDocument(project,file);
  if (resultContent == null)   resultContent=DiffContentFactory.getInstance().create(localContent,file);
  return new ApplyPatchDiffRequest(resultContent,textPatch,localContent,windowTitle,localTitle,resultTitle,patchTitle);
}
