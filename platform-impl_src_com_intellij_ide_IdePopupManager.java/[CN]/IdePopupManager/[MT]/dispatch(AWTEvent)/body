{
  LOG.assertTrue(isPopupActive());
  if (isPopupActive()) {
    if (e.getID() == WindowEvent.WINDOW_LOST_FOCUS) {
      final WindowEvent we=(WindowEvent)e;
      if (we.getOppositeWindow() == null) {
        Window window=we.getWindow();
        if (window instanceof IdeFrame || window instanceof DialogWrapperDialog) {
          closeActivePopup();
        }
      }
    }
  }
  if (e instanceof KeyEvent || e instanceof MouseEvent) {
    return myActivePopup.dispatch(e);
  }
  return false;
}
