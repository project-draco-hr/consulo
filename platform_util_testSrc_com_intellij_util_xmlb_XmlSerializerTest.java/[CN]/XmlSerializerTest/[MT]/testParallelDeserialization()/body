{
  final Element e=new Element("root").addContent(new Element("name").setText("x"));
  XmlSerializer.deserialize(e,BeanWithArray.class);
  Thread[] threads=new Thread[5];
  final AtomicReference<AssertionFailedError> exc=new AtomicReference<AssertionFailedError>();
  for (int i=0; i < threads.length; i++) {
    threads[i]=new Thread("XmlSerializerTest#testParallelDeserialization-" + i){
      @Override public void run(){
        try {
          for (int j=0; j < 10; j++) {
            BeanWithFieldWithTagAnnotation bean=XmlSerializer.deserialize(e,BeanWithFieldWithTagAnnotation.class);
            assertNotNull(bean);
            assertEquals("x",bean.STRING_V);
          }
        }
 catch (        AssertionFailedError e) {
          exc.set(e);
        }
      }
    }
;
  }
  for (  Thread thread : threads) {
    thread.start();
  }
  for (  Thread thread : threads) {
    thread.join();
  }
  AssertionFailedError error=exc.get();
  if (error != null) {
    throw error;
  }
}
