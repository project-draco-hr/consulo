{
  final Object macNativeFileChooser=descriptor.getUserData(MacFileChooserDialog.NATIVE_MAC_FILE_CHOOSER_ENABLED.getName());
  if (SystemInfo.isMac && macNativeFileChooser instanceof Boolean && ((Boolean)macNativeFileChooser).booleanValue()) {
    return new MacFileChooserDialogImpl(descriptor,parent);
  }
  return new FileChooserDialogImpl(descriptor,parent);
}
