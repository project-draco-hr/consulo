{
  final HTMLComposerExtension extension=getLanguageExtension(refElement);
  if (extension != null) {
    extension.appendReferencePresentation(refElement,buf,isPackageIncluded);
  }
 else   if (refElement instanceof RefFile) {
    buf.append(A_HREF_OPENING);
    if (myExporter == null) {
      buf.append(((RefElementImpl)refElement).getURL());
    }
 else {
      buf.append(myExporter.getURL(refElement));
    }
    buf.append("\">");
    String refElementName=refElement.getName();
    final PsiElement element=refElement.getElement();
    if (element != null) {
      final VirtualFile virtualFile=PsiUtilCore.getVirtualFile(element);
      if (virtualFile != null) {
        refElementName=ProjectUtil.calcRelativeToProjectPath(virtualFile,element.getProject());
      }
    }
    buf.append(refElementName);
    buf.append(A_CLOSING);
  }
}
