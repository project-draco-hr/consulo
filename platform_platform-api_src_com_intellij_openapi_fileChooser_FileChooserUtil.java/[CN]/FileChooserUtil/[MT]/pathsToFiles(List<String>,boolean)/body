{
  if (paths == null || paths.size() == 0)   return Collections.emptyList();
  final LocalFileSystem fs=LocalFileSystem.getInstance();
  final List<VirtualFile> files=Lists.newArrayListWithExpectedSize(paths.size());
  for (  String path : paths) {
    final String vfsPath=FileUtil.toSystemIndependentName(path);
    final VirtualFile file=refresh ? fs.refreshAndFindFileByPath(vfsPath) : fs.findFileByPath(vfsPath);
    if (file != null && file.isValid()) {
      files.add(file);
    }
  }
  return files;
}
