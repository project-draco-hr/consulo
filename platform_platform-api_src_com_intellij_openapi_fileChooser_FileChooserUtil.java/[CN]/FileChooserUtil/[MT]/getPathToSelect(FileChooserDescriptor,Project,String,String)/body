{
  if (toSelect == null && lastPath == null) {
    if (project != null) {
      final String basePath=project.getBasePath();
      if (basePath != null) {
        return basePath;
      }
    }
  }
 else   if (toSelect != null && lastPath != null) {
    if (Boolean.TRUE.equals(descriptor.getUserData(PathChooserDialog.PREFER_LAST_OVER_EXPLICIT))) {
      return toSelect;
    }
 else {
      return lastPath;
    }
  }
 else   if (toSelect == null) {
    return lastPath;
  }
 else {
    return toSelect;
  }
  return null;
}
