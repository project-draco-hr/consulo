{
  if (!LicenseManager.getInstance().shouldCheckForUpdates()) {
    return;
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("enter: checkForUpdates()");
  }
  final UpdateSettings settings=UpdateSettings.getInstance();
  if (settings == null)   return;
  if (UPDATE_URL == null)   return;
  final long timeDelta=System.currentTimeMillis() - settings.LAST_TIME_CHECKED;
  if (Math.abs(timeDelta) < CHECK_INTERVAL)   return;
  if (!settings.ASK_USER && !settings.CHECK_UPDATES)   return;
  if (settings.ASK_USER) {
    final ConfirmUpdateDialog confirmUpdateDialog=new ConfirmUpdateDialog();
    confirmUpdateDialog.show();
    settings.CHECK_UPDATES=confirmUpdateDialog.getExitCode() == ConfirmUpdateDialog.OK_EXIT_CODE;
    settings.ASK_USER=!confirmUpdateDialog.getCheckBox().isSelected();
    if (confirmUpdateDialog.getExitCode() != ConfirmUpdateDialog.OK_EXIT_CODE)     return;
  }
  new Thread(new Runnable(){
    public void run(){
      final Document document;
      try {
        document=loadVersionInfo();
      }
 catch (      Throwable t) {
        LOG.debug(t);
        return;
      }
      final String message=document.getRootElement().getChild("message").getTextTrim();
      final String title=document.getRootElement().getChild("title").getTextTrim();
      final String availBuild=document.getRootElement().getChild("build").getTextTrim();
      final String ourBuild=ApplicationInfo.getInstance().getBuildNumber().trim();
      if (LOG.isDebugEnabled()) {
        LOG.debug("build available:'" + availBuild + "' ourBuild='"+ ourBuild+ "' ");
      }
      try {
        final int iAvailBuild=Integer.parseInt(availBuild);
        final int iOurBuild=Integer.parseInt(ourBuild);
        if (iAvailBuild > iOurBuild) {
          SwingUtilities.invokeLater(new Runnable(){
            public void run(){
              final UpdateAvailDialog dialog=new UpdateAvailDialog(title,message.trim());
              dialog.show();
            }
          }
);
        }
      }
 catch (      Throwable t) {
        LOG.debug(t);
        return;
      }
      settings.LAST_TIME_CHECKED=System.currentTimeMillis();
    }
  }
,"UpdateCheckingThread").start();
}
