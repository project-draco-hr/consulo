{
  if (PluginManagerCore.UNIT_TEST_PLUGIN.equals(getPluginId())) {
    final List<File> result=new ArrayList<File>();
    String testClasspath=System.getProperty("consulo.test.classpath");
    if (!StringUtil.isEmpty(testClasspath)) {
      List<String> paths=StringUtil.split(testClasspath,";");
      for (      String path : paths) {
        result.add(new File(path));
      }
    }
    return result;
  }
  if (myPath.isDirectory()) {
    final List<File> result=new ArrayList<File>();
    final File classesDir=new File(myPath,"classes");
    if (classesDir.exists()) {
      result.add(classesDir);
    }
    final File[] files=new File(myPath,"lib").listFiles();
    if (files != null && files.length > 0) {
      for (      final File f : files) {
        if (f.isFile()) {
          final String name=f.getName();
          if (StringUtil.endsWithIgnoreCase(name,".jar") || StringUtil.endsWithIgnoreCase(name,".zip")) {
            result.add(f);
          }
        }
 else {
          result.add(f);
        }
      }
    }
    return result;
  }
 else {
    return Collections.singletonList(myPath);
  }
}
