{
  if (myProcessHandler == null || myProcessHandler.isProcessTerminated())   return;
  if (ApplicationManager.getApplication().isDisposeInProgress()) {
    recursive=flat=Collections.emptyList();
  }
  if (!restart && myRecursiveWatchRoots.equals(recursive) && myFlatWatchRoots.equals(flat)) {
    return;
  }
  mySettingRoots.incrementAndGet();
  myRecursiveWatchRoots=recursive;
  myFlatWatchRoots=flat;
  try {
    writeLine(ROOTS_COMMAND);
    for (    String path : recursive) {
      writeLine(path);
    }
    for (    String path : flat) {
      writeLine("|" + path);
    }
    writeLine("#");
  }
 catch (  IOException e) {
    LOG.warn(e);
  }
}
