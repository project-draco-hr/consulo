{
  String execPath=System.getProperty(PROPERTY_WATCHER_EXECUTABLE_PATH);
  if (execPath != null)   return new File(execPath);
  String[] names=null;
  String prefix=null;
  if (SystemInfo.isWindows) {
    names=SystemInfo.is64Bit ? new String[]{"fsnotifier64.exe","fsnotifier.exe"} : new String[]{"fsnotifier.exe"};
    prefix="win";
  }
 else   if (SystemInfo.isMac) {
    names=new String[]{"fsnotifier"};
    prefix="mac";
  }
 else   if (SystemInfo.isLinux) {
    String arch="arm".equals(SystemInfo.OS_ARCH) ? "-arm" : "ppc".equals(SystemInfo.OS_ARCH) ? "-ppc" : "";
    String bits=SystemInfo.is64Bit ? "64" : "";
    names=new String[]{"fsnotifier" + arch + bits};
    prefix="linux";
  }
  if (names == null)   return null;
  String[] dirs={PathManager.getBinPath(),PathManager.getHomePath() + "/community/bin/" + prefix,PathManager.getBinPath() + '/' + prefix};
  for (  String dir : dirs) {
    for (    String name : names) {
      File candidate=new File(dir,name);
      if (candidate.exists())       return candidate;
    }
  }
  return null;
}
