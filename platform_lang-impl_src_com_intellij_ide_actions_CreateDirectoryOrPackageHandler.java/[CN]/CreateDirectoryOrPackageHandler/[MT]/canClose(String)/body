{
  if (subDirName.length() == 0) {
    showErrorDialog(IdeBundle.message("error.name.should.be.specified"));
    return false;
  }
  final boolean multiCreation=StringUtil.containsAnyChar(subDirName,myDelimiters);
  if (!multiCreation) {
    try {
      myDirectory.checkCreateSubdirectory(subDirName);
    }
 catch (    IncorrectOperationException ex) {
      showErrorDialog(CreateElementActionBase.filterMessage(ex.getMessage()));
      return false;
    }
  }
  final Boolean createFile=suggestCreatingFileInstead(subDirName);
  if (createFile == null) {
    return false;
  }
  DumbService.allowStartingDumbModeInside(DumbModePermission.MAY_START_BACKGROUND,new Runnable(){
    @Override public void run(){
      doCreateElement(subDirName,createFile);
    }
  }
);
  return myCreatedElement != null;
}
