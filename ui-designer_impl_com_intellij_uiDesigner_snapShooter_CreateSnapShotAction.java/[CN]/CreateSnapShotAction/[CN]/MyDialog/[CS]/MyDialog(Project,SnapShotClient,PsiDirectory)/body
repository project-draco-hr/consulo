{
  super(project,true);
  myProject=project;
  myClient=client;
  myDirectory=dir;
  init();
  setTitle(UIDesignerBundle.message("snapshot.title"));
  myComponentTree.setModel(new SnapShotTreeModel(client));
  myComponentTree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      updateOKAction();
    }
  }
);
  myComponentTree.setCellRenderer(new ColoredTreeCellRenderer(){
    public void customizeCellRenderer(    JTree tree,    Object value,    boolean selected,    boolean expanded,    boolean leaf,    int row,    boolean hasFocus){
      SnapShotRemoteComponent rc=(SnapShotRemoteComponent)value;
      append(rc.toString(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
      final Palette palette=Palette.getInstance(myProject);
      final ComponentItem item=palette.getItem(rc.getClassName());
      if (item != null) {
        setIcon(item.getSmallIcon());
      }
 else {
        setIcon(palette.getPanelItem().getSmallIcon());
      }
    }
  }
);
  myFormNameTextField.getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      updateOKAction();
    }
  }
);
  updateOKAction();
}
