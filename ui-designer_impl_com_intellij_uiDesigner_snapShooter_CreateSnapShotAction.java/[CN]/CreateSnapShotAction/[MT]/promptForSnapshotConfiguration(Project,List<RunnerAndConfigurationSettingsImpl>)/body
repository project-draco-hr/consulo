{
  final RunnerAndConfigurationSettingsImpl snapshotConfiguration;
  if (configurations.size() == 0) {
    Messages.showMessageDialog(project,"No Application run configurations defined. Please define a run configuration to use for taking snapshots",UIDesignerBundle.message("snapshot.title"),Messages.getInformationIcon());
    return null;
  }
  if (configurations.size() == 1) {
    final int rc=Messages.showYesNoDialog(project,"Taking form snapshots is not currently enabled. Enable taking form snapshots in configuration '" + configurations.get(0).getConfiguration().getName() + "'?",UIDesignerBundle.message("snapshot.title"),Messages.getQuestionIcon());
    if (rc == 1) {
      return null;
    }
    snapshotConfiguration=configurations.get(0);
  }
 else {
    String[] names=new String[configurations.size()];
    for (int i=0; i < configurations.size(); i++) {
      names[i]=configurations.get(i).getConfiguration().getName();
    }
    int rc=Messages.showChooseDialog(project,"Taking form snapshots is not currently enabled. Please choose the run configuration to use for taking form snapshots:",UIDesignerBundle.message("snapshot.title"),Messages.getQuestionIcon(),names,names[0]);
    if (rc < 0)     return null;
    snapshotConfiguration=configurations.get(rc);
  }
  ((ApplicationConfiguration)snapshotConfiguration.getConfiguration()).ENABLE_SWING_INSPECTOR=true;
  return snapshotConfiguration;
}
