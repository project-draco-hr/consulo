{
  super.visitMethod(method);
  if (ignoreTestCases) {
    final PsiClass containingClass=method.getContainingClass();
    if (ClassUtils.isSubclass(containingClass,"junit.framework.Test")) {
      return;
    }
  }
  final PsiReferenceList throwsList=method.getThrowsList();
  final PsiJavaCodeReferenceElement[] references=throwsList.getReferenceElements();
  final Set<String> exceptionListCopy;
synchronized (lock) {
    exceptionListCopy=new HashSet<String>(exceptionList);
  }
  for (  PsiJavaCodeReferenceElement reference : references) {
    final PsiElement element=reference.resolve();
    if (!(element instanceof PsiClass)) {
      continue;
    }
    final PsiClass thrownClass=(PsiClass)element;
    final String qualifiedName=thrownClass.getQualifiedName();
    if (qualifiedName != null && exceptionListCopy.contains(qualifiedName)) {
      registerError(reference);
    }
  }
}
