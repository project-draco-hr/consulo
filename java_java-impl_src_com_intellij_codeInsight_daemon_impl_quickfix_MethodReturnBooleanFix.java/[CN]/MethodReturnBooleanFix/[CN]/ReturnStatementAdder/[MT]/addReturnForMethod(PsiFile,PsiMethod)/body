{
  final PsiModifierList modifiers=method.getModifierList();
  if ((modifiers.hasModifierProperty(PsiModifier.ABSTRACT)) || (method.getBody() == null)) {
    return;
  }
  try {
    final ConvertReturnStatementsVisitor visitor=new ConvertReturnStatementsVisitor(factory,method,myTargetType);
    final ControlFlow controlFlow=HighlightControlFlowUtil.getControlFlowNoConstantEvaluate(method.getBody());
    if (ControlFlowUtil.checkReturns(controlFlow,visitor)) {
      mySelector.accept(visitor.getLatestReturn(),method);
      return;
    }
    mySelector.accept(visitor.createReturnInLastStatement(),method);
  }
 catch (  AnalysisCanceledException e) {
    LOG.error(e);
    return;
  }
catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
  if (method.getContainingFile() != file) {
    UndoUtil.markPsiFileForUndo(file);
  }
}
