{
  if (!CodeInsightUtilBase.prepareFileForWrite(myMethod.getContainingFile()))   return;
  final List<PsiMethod> affectedMethods=changeReturnType(myMethod,myReturnType);
  PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
  final SourceMethodSelector returnSelector=new SourceMethodSelector(myMethod);
  final ReturnStatementAdder adder=new ReturnStatementAdder(factory,myReturnType,returnSelector);
  for (  PsiMethod method : affectedMethods) {
    adder.addReturnForMethod(file,method);
  }
  final PsiReturnStatement latestReturn=returnSelector.getReturnStatement();
  if (latestReturn != null) {
    selectReturnValueInEditor(latestReturn,getEditorForMethod(project,editor,latestReturn.getContainingFile()));
  }
}
