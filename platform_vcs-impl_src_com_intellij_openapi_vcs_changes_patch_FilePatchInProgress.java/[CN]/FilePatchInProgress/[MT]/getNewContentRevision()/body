{
  if (FilePatchStatus.DELETED.equals(myStatus))   return null;
  if (myNewContentRevision == null) {
    if (FilePatchStatus.ADDED.equals(myStatus)) {
      final FilePath newFilePath=FilePathImpl.createNonLocal(myIoCurrentBase.getAbsolutePath(),false);
      final String content=myPatch.getNewFileText();
      myNewContentRevision=new SimpleContentRevision(content,newFilePath,myPatch.getAfterVersionId());
    }
 else {
      final FilePath newFilePath;
      if (FilePatchStatus.MOVED_OR_RENAMED.equals(myStatus)) {
        newFilePath=new FilePathImpl(PathMerger.getFile(new File(myBase.getPath()),myPatch.getAfterName()),false);
      }
 else {
        newFilePath=(myCurrentBase != null) ? new FilePathImpl(myCurrentBase) : new FilePathImpl(myIoCurrentBase,false);
      }
      myNewContentRevision=new LazyPatchContentRevision(myCurrentBase,newFilePath,myPatch.getAfterVersionId(),myPatch);
    }
  }
  return myNewContentRevision;
}
