{
  if (cr == null)   return null;
  final FilePath fp=cr.getFile();
  final StaticPathDescription description=new StaticPathDescription(fp.isDirectory(),ts == null ? fp.getIOFile().lastModified() : ts,fp.getPath());
  if (cr instanceof BinaryContentRevision) {
    return new AirContentRevision(){
      @Override public boolean isBinary(){
        return true;
      }
      @Override public String getContentAsString(){
        throw new IllegalStateException();
      }
      @Override public byte[] getContentAsBytes() throws VcsException {
        return ((BinaryContentRevision)cr).getBinaryContent();
      }
      @Override public String getRevisionNumber(){
        return ts != null ? null : cr.getRevisionNumber().asString();
      }
      @Override @NotNull public PathDescription getPath(){
        return description;
      }
      @Override public Charset getCharset(){
        return null;
      }
    }
;
  }
 else {
    return new AirContentRevision(){
      @Override public boolean isBinary(){
        return false;
      }
      @Override public String getContentAsString() throws VcsException {
        return cr.getContent();
      }
      @Override public byte[] getContentAsBytes() throws VcsException {
        throw new IllegalStateException();
      }
      @Override public String getRevisionNumber(){
        return ts != null ? null : cr.getRevisionNumber().asString();
      }
      @Override @NotNull public PathDescription getPath(){
        return description;
      }
      @Override public Charset getCharset(){
        return fp.getCharset();
      }
    }
;
  }
}
