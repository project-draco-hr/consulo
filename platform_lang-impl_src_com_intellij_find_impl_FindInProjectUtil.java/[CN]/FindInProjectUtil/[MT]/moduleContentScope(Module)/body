{
  VirtualFile[] contentRoots=ModuleRootManager.getInstance(module).getContentRoots();
  GlobalSearchScope result=null;
  PsiManager psiManager=PsiManager.getInstance(module.getProject());
  for (  VirtualFile root : contentRoots) {
    PsiDirectory directory=psiManager.findDirectory(root);
    if (directory != null) {
      GlobalSearchScope moduleContent=GlobalSearchScopes.directoryScope(directory,true);
      result=result == null ? moduleContent : result.uniteWith(moduleContent);
    }
  }
  return result == null ? GlobalSearchScope.EMPTY_SCOPE : result;
}
