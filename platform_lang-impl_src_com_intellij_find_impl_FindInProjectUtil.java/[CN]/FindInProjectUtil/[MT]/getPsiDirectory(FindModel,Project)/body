{
  String directoryName=findModel.getDirectoryName();
  if (findModel.isProjectScope() || directoryName == null) {
    return null;
  }
  final PsiManager psiManager=PsiManager.getInstance(project);
  String path=directoryName.replace(File.separatorChar,'/');
  VirtualFile virtualFile=LocalFileSystem.getInstance().findFileByPath(path);
  if (virtualFile == null || !virtualFile.isDirectory()) {
    for (    LocalFileProvider provider : ((VirtualFileManagerEx)VirtualFileManager.getInstance()).getLocalFileProviders()) {
      virtualFile=provider.findLocalVirtualFileByPath(path);
      if (virtualFile != null && virtualFile.isDirectory()) {
        break;
      }
    }
  }
  return virtualFile == null ? null : psiManager.findDirectory(virtualFile);
}
