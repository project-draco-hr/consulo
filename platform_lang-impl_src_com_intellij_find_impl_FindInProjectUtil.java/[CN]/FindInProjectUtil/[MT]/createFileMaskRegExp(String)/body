{
  if (filter == null) {
    return null;
  }
  String pattern;
  final List<String> strings=StringUtil.split(filter,",");
  if (strings.size() == 1) {
    pattern=PatternUtil.convertToRegex(filter.trim());
  }
 else {
    pattern=StringUtil.join(strings,new Function<String,String>(){
      @NotNull @Override public String fun(      @NotNull String s){
        return "(" + PatternUtil.convertToRegex(s.trim()) + ")";
      }
    }
,"|");
  }
  return Pattern.compile(pattern,Pattern.CASE_INSENSITIVE);
}
