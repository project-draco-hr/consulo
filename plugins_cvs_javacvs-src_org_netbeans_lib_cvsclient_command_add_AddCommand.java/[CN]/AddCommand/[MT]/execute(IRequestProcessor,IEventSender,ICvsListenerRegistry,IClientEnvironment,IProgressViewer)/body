{
  BugLog.getInstance().assertTrue(getFileObjects().getFileObjects().size() > 0,"No file specified.");
  repositoryPathToDirectoryObject.clear();
  final Requests requests;
  try {
    requests=new Requests(CommandRequest.ADD,clientEnvironment);
    requests.addArgumentRequest(getKeywordSubst(),"-k");
    for (Iterator it=getFileObjects().getFileObjects().iterator(); it.hasNext(); ) {
      final AbstractFileObject abstractFileObject=(AbstractFileObject)it.next();
      addRequests(abstractFileObject,requests,requestProcessor,clientEnvironment);
    }
    requests.addLocalPathDirectoryRequest();
    addArgumentRequests(requests);
  }
 catch (  IOException ex) {
    throw new IOCommandException(ex);
  }
  final ICvsListener parser=new AddParser(eventManager,clientEnvironment.getCvsFileSystem());
  parser.registerListeners(listenerRegistry);
  try {
    final boolean result=requestProcessor.processRequests(requests,new DummyRequestsProgressHandler());
    createCvsDirectories(clientEnvironment);
    return result;
  }
 catch (  IOException ex) {
    throw new IOCommandException(ex);
  }
 finally {
    repositoryPathToDirectoryObject.clear();
    parser.unregisterListeners(listenerRegistry);
  }
}
