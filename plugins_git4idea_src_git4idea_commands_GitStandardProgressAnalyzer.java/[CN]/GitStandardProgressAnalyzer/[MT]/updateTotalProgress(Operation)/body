{
  for (  Operation op : Operation.values()) {
    if (currentOperation.compareTo(op) > 0) {
      myOperationsProgress.put(op,1.0);
    }
  }
  final double[] totalProgress=new double[1];
  myOperationsProgress.forEachEntry(new TObjectDoubleProcedure<Operation>(){
    @Override public boolean execute(    Operation operation,    double progress){
      totalProgress[0]+=operation.myFractionInTotal * progress;
      return true;
    }
  }
);
  return totalProgress[0];
}
