{
  if (DataConstants.PSI_ELEMENT.equals(dataId)) {
    TreePath path=getSelectedPath();
    if (path == null)     return null;
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    AbstractTreeNode descriptor=(AbstractTreeNode)node.getUserObject();
    Object element=descriptor.getValue();
    if (element instanceof StructureViewTreeElement) {
      element=((StructureViewTreeElement)element).getValue();
    }
    if (!(element instanceof PsiElement))     return null;
    if (!((PsiElement)element).isValid())     return null;
    return element;
  }
  if (DataConstantsEx.PSI_ELEMENT_ARRAY.equals(dataId)) {
    return convertToPsiElementsArray(getSelectedElements());
  }
  if (DataConstants.FILE_EDITOR.equals(dataId)) {
    return myFileEditor;
  }
  if (DataConstantsEx.CUT_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCutProvider();
  }
  if (DataConstantsEx.COPY_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCopyProvider();
  }
  if (DataConstantsEx.PASTE_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getPasteProvider();
  }
  if (DataConstantsEx.NAVIGATABLE.equals(dataId)) {
    Object[] selectedElements=getSelectedTreeElements();
    if (selectedElements == null || selectedElements.length == 0)     return null;
    if (selectedElements[0] instanceof Navigatable) {
      return selectedElements[0];
    }
  }
  return null;
}
