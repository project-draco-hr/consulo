{
  Object[] expandedPsiElements=null;
  if (myStructureViewState != null) {
    expandedPsiElements=myStructureViewState.getExpandedElements();
  }
  if (expandedPsiElements == null) {
    getTree().expandPath(new TreePath(getRootNode().getPath()));
  }
 else {
    for (int i=0; i < expandedPsiElements.length; i++) {
      Object element=expandedPsiElements[i];
      if (element instanceof PsiElement && !((PsiElement)element).isValid())       continue;
      expandPathToElement(element);
    }
  }
}
