{
  Object[] selectedPsiElements=null;
  if (myStructureViewState != null) {
    selectedPsiElements=myStructureViewState.getSelectedElements();
  }
  if (selectedPsiElements == null) {
    getTree().setSelectionPath(new TreePath(getRootNode().getPath()));
  }
 else {
    for (int i=0; i < selectedPsiElements.length; i++) {
      Object element=selectedPsiElements[i];
      if (element instanceof PsiElement && !((PsiElement)element).isValid())       continue;
      DefaultMutableTreeNode node=myAbstractTreeBuilder.getNodeForElement(element);
      if (node != null) {
        getTree().addSelectionPath(new TreePath(node.getPath()));
      }
    }
  }
}
