def stream_out(repo, req):
    req.respond(HTTP_OK, HGTYPE)
    try:
        for chunk in streamclone.stream_out(repo):
            yield chunk
    except streamclone.StreamException as inst:
        yield str(inst)
