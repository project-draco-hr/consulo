{
  final CvsTabbedWindow tabbedWindow=openTabbedWindow(handler);
  final Runnable finish=new Runnable(){
    public void run(){
      try {
        myResult.addAllErrors(handler.getErrors());
        myResult.addAllWarnings(handler.getWarnings());
        handler.runComplitingActivities();
        if (myProject != null) {
          showErrors(handler.getErrors(),handler.getWarnings(),tabbedWindow);
        }
      }
  finally {
        try {
          if (myResult.finishedUnsuccessfully(true,handler)) {
            callback.executionFinished(false);
          }
 else {
            if (handler.getErrors().isEmpty())             callback.executionFinishedSuccessfully();
            callback.executionFinished(true);
          }
        }
  finally {
          if ((myProject != null) && (handler != CvsHandler.NULL)) {
            StatusBar statusBar=WindowManager.getInstance().getStatusBar(myProject);
            if (statusBar != null) {
              statusBar.setInfo(getStatusMessage(handler));
            }
          }
        }
      }
    }
  }
;
  Runnable cvsAction=new Runnable(){
    public void run(){
      try {
        if (handler == CvsHandler.NULL)         return;
        setText("Preparing for login...");
        handler.beforeLogin();
        if (myResult.finishedUnsuccessfully(false,handler))         return;
        setText("Login");
        setCancelText(handler);
        login(handler);
        if (myResult.finishedUnsuccessfully(true,handler))         return;
        setText("Preparing for " + handler.getTitle());
        handler.run(myExecutor);
        if (myResult.finishedUnsuccessfully(true,handler))         return;
      }
 catch (      ProcessCanceledException ex) {
        myResult.setIsCanceled();
      }
 finally {
        callback.executeInProgressAfterAction(myExecutor);
      }
    }
  }
;
  if (doNotShowProgress()) {
    cvsAction.run();
    myExecutor.runInDispatchThread(finish);
  }
 else {
    if (ApplicationManager.getApplication().runProcessWithProgressSynchronously(cvsAction,handler.getTitle(),handler.canBeCanceled(),myProject)) {
      finish.run();
    }
  }
}
