{
  super.cleanup();
  final GlobalInspectionContextImpl context=getContext();
  if (context != null && context.getUIOptions().SHOW_DIFF_WITH_PREVIOUS_RUN) {
    if (myOldProblemElements == null) {
      myOldProblemElements=new HashMap<RefEntity,CommonProblemDescriptor[]>();
    }
    myOldProblemElements.clear();
    myOldProblemElements.putAll(getIgnoredElements());
    myOldProblemElements.putAll(getProblemElements());
  }
 else {
    myOldProblemElements=null;
  }
synchronized (lock) {
    myProblemElements=null;
    myProblemToElements=null;
    myQuickFixActions=null;
    myIgnoredElements=null;
  }
  myContents=null;
  myModulesProblems=null;
}
