{
  TextDiffSettings settings=context.getUserData(TextDiffSettingsHolder.KEY);
  if (settings == null) {
    settings=TextDiffSettings.getSettings(context.getUserData(DiffUserDataKeysEx.PLACE));
    context.putUserData(TextDiffSettingsHolder.KEY,settings);
    if (DiffUtil.isUserDataFlagSet(DiffUserDataKeys.DO_NOT_IGNORE_WHITESPACES,context)) {
      settings.setIgnorePolicy(IgnorePolicy.DEFAULT);
    }
  }
  return settings;
}
