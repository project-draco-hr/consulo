{
  ArrayList newParameters=new ArrayList();
  PsiParameter[] oldParameters=psiMethod.getParameterList().getParameters();
  for (int i=0; i < oldParameters.length; i++) {
    PsiParameter oldParameter=oldParameters[i];
    if (!parametersToDelete.contains(oldParameter)) {
      newParameters.add(new ParameterInfo(i,oldParameter.getName(),oldParameter.getType()));
    }
  }
  ParameterInfo[] parameterInfos=(ParameterInfo[])newParameters.toArray(new ParameterInfo[newParameters.size()]);
  ChangeSignatureProcessor csp=new ChangeSignatureProcessor(getManager().getProject(),psiMethod,false,null,psiMethod.getName(),psiMethod.getReturnType(),parameterInfos);
  csp.run(null);
}
