{
  final FileChooserDescriptor descriptor=sdkType.getHomeChooserDescriptor();
  FileChooser.chooseFiles(descriptor,null,getSuggestedSdkRoot(sdkType),new Consumer<List<VirtualFile>>(){
    @Override public void consume(    final List<VirtualFile> chosen){
      final String path=chosen.get(0).getPath();
      if (sdkType.isValidSdkHome(path)) {
        consumer.consume(path);
        return;
      }
      final String adjustedPath=sdkType.adjustSelectedSdkHome(path);
      if (sdkType.isValidSdkHome(adjustedPath)) {
        consumer.consume(adjustedPath);
      }
    }
  }
);
}
