{
  final FileChooserDescriptor descriptor=sdkType.getHomeChooserDescriptor();
  if (SystemInfo.isMac)   descriptor.putUserData(MacFileChooserDialog.NATIVE_MAC_FILE_CHOOSER_ENABLED,Boolean.TRUE);
  FileChooser.chooseFilesWithSlideEffect(descriptor,null,getSuggestedSdkRoot(sdkType),new Consumer<VirtualFile[]>(){
    @Override public void consume(    final VirtualFile[] chosen){
      if (chosen != null && chosen.length != 0) {
        final String path=chosen[0].getPath();
        if (sdkType.isValidSdkHome(path)) {
          consumer.consume(path);
          return;
        }
        String adjustedPath=sdkType.adjustSelectedSdkHome(path);
        if (sdkType.isValidSdkHome(adjustedPath)) {
          consumer.consume(adjustedPath);
        }
      }
    }
  }
);
}
