{
  final List<String> list=new ArrayList<String>(suggestedSdkHomes.keySet());
  ListPopupStep sdkHomesStep=new BaseListPopupStep<String>("Select Interpreter Path",list){
    @NotNull @Override public String getTextFor(    String value){
      return value == null ? "Specify Other..." : FileUtil.toSystemDependentName(value);
    }
    @Override public PopupStep onChosen(    final String selectedValue,    boolean finalChoice){
      final SdkType sdkType=suggestedSdkHomes.get(selectedValue);
      if (selectedValue == null) {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            final Collection<SdkType> sdkTypes=suggestedSdkHomes.values();
            createSdk(project,existingSdks,callback,sdkTypes.toArray(new SdkType[sdkTypes.size()]));
          }
        }
,ModalityState.current());
      }
 else {
        Sdk sdk=setupSdk(existingSdks,LocalFileSystem.getInstance().findFileByPath(selectedValue),sdkType,false,null,null);
        callback.consume(sdk);
      }
      return FINAL_CHOICE;
    }
  }
;
  final ListPopup popup=JBPopupFactory.getInstance().createListPopup(sdkHomesStep);
  popup.showUnderneathOf(popupOwner);
}
