{
  VirtualFile sdkHome=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    public VirtualFile compute(){
      return LocalFileSystem.getInstance().refreshAndFindFileByPath(path);
    }
  }
);
  if (sdkHome != null) {
    final Sdk newSdk=setupSdk(ProjectJdkTable.getInstance().getAllJdks(),sdkHome,sdkType,true,null,null);
    if (newSdk != null) {
      addSdk(newSdk);
    }
    return newSdk;
  }
  return null;
}
