{
  if (sdkTypes.length == 0) {
    onSdkCreatedCallBack.consume(null);
    return;
  }
  final FileChooserDescriptor descriptor=createCompositeDescriptor(sdkTypes);
  if (SystemInfo.isMac) {
    descriptor.putUserData(PathChooserDialog.NATIVE_MAC_CHOOSER_SHOW_HIDDEN_FILES,Boolean.TRUE);
  }
  String suggestedPath=sdkTypes[0].suggestHomePath();
  VirtualFile suggestedDir=suggestedPath == null ? null : LocalFileSystem.getInstance().findFileByPath(FileUtil.toSystemIndependentName(suggestedPath));
  FileChooser.chooseFiles(descriptor,project,suggestedDir,new Consumer<List<VirtualFile>>(){
    @Override public void consume(    List<VirtualFile> selectedFiles){
      for (      SdkType sdkType : sdkTypes) {
        if (sdkType.isValidSdkHome(selectedFiles.get(0).getPath())) {
          onSdkCreatedCallBack.consume(setupSdk(existingSdks,selectedFiles.get(0),sdkType,false,null,null));
          return;
        }
      }
      onSdkCreatedCallBack.consume(null);
    }
  }
);
}
