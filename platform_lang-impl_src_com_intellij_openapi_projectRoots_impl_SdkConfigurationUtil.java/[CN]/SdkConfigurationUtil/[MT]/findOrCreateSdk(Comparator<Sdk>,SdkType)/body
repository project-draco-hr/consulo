{
  final Project defaultProject=ProjectManager.getInstance().getDefaultProject();
  final Sdk sdk=ProjectRootManager.getInstance(defaultProject).getProjectSdk();
  if (sdk != null) {
    for (    SdkType type : sdkTypes) {
      if (sdk.getSdkType() == type) {
        return sdk;
      }
    }
  }
  for (  SdkType type : sdkTypes) {
    List<Sdk> sdks=ProjectJdkTable.getInstance().getSdksOfType(type);
    if (sdks.size() > 0) {
      if (comparator != null) {
        Collections.sort(sdks,comparator);
      }
      return sdks.get(0);
    }
  }
  for (  SdkType sdkType : sdkTypes) {
    final String suggestedHomePath=sdkType.suggestHomePath();
    if (suggestedHomePath != null && sdkType.isValidSdkHome(suggestedHomePath)) {
      Sdk an_sdk=createAndAddSDK(suggestedHomePath,sdkType);
      if (an_sdk != null)       return an_sdk;
    }
  }
  return null;
}
