{
  ListPopupStep sdkHomesStep=new BaseListPopupStep<String>("Select Interpreter Path",suggestedSdkHomes){
    @NotNull @Override public String getTextFor(    String value){
      return value == null ? "Specify Other..." : FileUtil.toSystemDependentName(value);
    }
    @Override public PopupStep onChosen(    String selectedValue,    boolean finalChoice){
      if (selectedValue == null) {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            Sdk sdk=createSdk(project,existingSdks,sdkType);
            callback.consume(sdk);
          }
        }
,ModalityState.current());
      }
 else {
        Sdk sdk=setupSdk(existingSdks,LocalFileSystem.getInstance().findFileByPath(selectedValue),sdkType,false,null,null);
        callback.consume(sdk);
      }
      return FINAL_CHOICE;
    }
  }
;
  final ListPopup popup=JBPopupFactory.getInstance().createListPopup(sdkHomesStep);
  popup.showUnderneathOf(popupOwner);
}
