{
  final int dollarIndex=className.indexOf("$");
  final String topLevelClassName=dollarIndex >= 0 ? className.substring(0,dollarIndex) : className;
  return ApplicationManager.getApplication().runReadAction(new Computable<Collection<VirtualFile>>(){
    @Nullable public Collection<VirtualFile> compute(){
      final PsiClass[] classes=JavaPsiFacade.getInstance(myProject).findClasses(topLevelClassName,scope);
      if (classes.length == 0) {
        return null;
      }
      final List<VirtualFile> list=new ArrayList<VirtualFile>(classes.length);
      for (      PsiClass aClass : classes) {
        final PsiFile psiFile=aClass.getContainingFile();
        if (psiFile != null) {
          final VirtualFile vFile=psiFile.getVirtualFile();
          if (vFile != null && fileIndex.isInSourceContent(vFile)) {
            list.add(vFile);
          }
        }
      }
      return list;
    }
  }
);
}
