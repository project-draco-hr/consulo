{
  if (context != null) {
    final LibraryTable table=library.getTable();
    if (table != null) {
      final LibraryTable.ModifiableModel modifiableModel=context.getModifiableLibraryTable(table);
      if (modifiableModel instanceof LibrariesModifiableModel) {
        final LibrariesModifiableModel librariesModel=(LibrariesModifiableModel)modifiableModel;
        if (librariesModel.hasLibraryEditor(library)) {
          return librariesModel.getLibraryEditor(library).getFiles(OrderRootType.CLASSES);
        }
      }
    }
  }
  return library.getFiles(OrderRootType.CLASSES);
}
