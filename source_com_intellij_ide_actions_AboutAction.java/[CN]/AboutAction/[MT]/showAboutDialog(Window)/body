{
  ApplicationInfoEx appInfo=(ApplicationInfoEx)ApplicationInfo.getInstance();
  JPanel mainPanel=new JPanel(new BorderLayout());
  final JComponent closeListenerOwner;
  if (appInfo.showLicenseeInfo()) {
    final Image image=ImageLoader.loadFromResource(appInfo.getAboutLogoUrl());
    final InfoSurface infoSurface=new InfoSurface(image);
    infoSurface.setPreferredSize(new Dimension(image.getWidth(null),image.getHeight(null)));
    mainPanel.add(infoSurface,BorderLayout.NORTH);
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        infoSurface.start();
      }
    }
);
    closeListenerOwner=infoSurface;
  }
 else {
    mainPanel.add(new JLabel(IconLoader.getIcon(appInfo.getAboutLogoUrl())),BorderLayout.NORTH);
    closeListenerOwner=mainPanel;
  }
  final JDialog dialog;
  if (window instanceof Dialog) {
    dialog=new JDialog((Dialog)window);
  }
 else {
    dialog=new JDialog((Frame)window);
  }
  dialog.setUndecorated(true);
  dialog.setContentPane(mainPanel);
  dialog.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_ESCAPE && e.getModifiers() == 0) {
        dialog.dispose();
      }
    }
  }
);
  final long showTime=System.currentTimeMillis();
  final long delta=Patches.APPLE_BUG_ID_3716865 ? 100 : 0;
  dialog.addWindowFocusListener(new WindowFocusListener(){
    public void windowGainedFocus(    WindowEvent e){
    }
    public void windowLostFocus(    WindowEvent e){
      long eventTime=System.currentTimeMillis();
      if (eventTime - showTime > delta && e.getOppositeWindow() != e.getWindow()) {
        dialog.dispose();
      }
    }
  }
);
  closeListenerOwner.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      if (!e.isConsumed()) {
        dialog.dispose();
        e.consume();
      }
    }
  }
);
  dialog.pack();
  dialog.setLocationRelativeTo(window);
  dialog.setVisible(true);
}
