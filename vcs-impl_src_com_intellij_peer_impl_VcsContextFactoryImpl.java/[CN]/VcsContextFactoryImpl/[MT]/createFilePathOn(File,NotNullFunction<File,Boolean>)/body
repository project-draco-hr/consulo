{
  return ApplicationManager.getApplication().runReadAction(new Computable<FilePath>(){
    public FilePath compute(){
      VirtualFile virtualFile=LocalFileSystem.getInstance().findFileByIoFile(file);
      if (virtualFile != null) {
        return FilePathImpl.create(file);
      }
      return FilePathImpl.create(file,detector.fun(file).booleanValue());
    }
  }
);
}
