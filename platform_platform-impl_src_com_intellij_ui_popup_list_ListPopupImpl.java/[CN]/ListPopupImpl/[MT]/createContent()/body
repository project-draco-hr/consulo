{
  myMouseMotionListener=new MyMouseMotionListener();
  myMouseListener=new MyMouseListener();
  ListPopupStep<Object> step=getListStep();
  myListModel=new ListPopupModel(this,getSpeedSearch(),step);
  myList=new MyList();
  if (myStep.getTitle() != null) {
    myList.getAccessibleContext().setAccessibleName(myStep.getTitle());
  }
  if (step instanceof ListPopupStepEx) {
    ((ListPopupStepEx)step).setEmptyText(myList.getEmptyText());
  }
  myList.setSelectionMode(isMultiSelectionEnabled() ? ListSelectionModel.MULTIPLE_INTERVAL_SELECTION : ListSelectionModel.SINGLE_SELECTION);
  myList.setSelectedIndex(0);
  Insets padding=UIUtil.getListViewportPadding();
  myList.setBorder(new EmptyBorder(padding));
  ScrollingUtil.installActions(myList);
  myList.setCellRenderer(getListElementRenderer());
  myList.getActionMap().get("selectNextColumn").setEnabled(false);
  myList.getActionMap().get("selectPreviousColumn").setEnabled(false);
  registerAction("handleSelection1",KeyEvent.VK_ENTER,0,new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      handleSelect(true);
    }
  }
);
  registerAction("handleSelection2",KeyEvent.VK_RIGHT,0,new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      handleSelect(false);
    }
  }
);
  registerAction("goBack2",KeyEvent.VK_LEFT,0,new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      if (isClosableByLeftArrow()) {
        goBack();
      }
    }
  }
);
  myList.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
  return myList;
}
