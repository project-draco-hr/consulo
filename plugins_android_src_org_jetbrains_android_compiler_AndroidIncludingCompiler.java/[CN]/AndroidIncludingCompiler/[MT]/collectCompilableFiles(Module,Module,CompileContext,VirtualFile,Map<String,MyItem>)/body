{
  ModuleFileIndex fileIndex=ModuleRootManager.getInstance(depModule).getFileIndex();
  fileIndex.iterateContentUnderDirectory(sourceRoot,new ContentIterator(){
    @Override public boolean processFile(    VirtualFile fileOrDir){
      if (fileOrDir.isDirectory()) {
        return true;
      }
      if (fileOrDir.getFileType() == StdFileTypes.JAVA) {
        String relativePath=VfsUtilCore.getRelativePath(fileOrDir,sourceRoot,'/');
        LOG.assertTrue(relativePath != null);
        MyItem existingItem=relativePath2GenItem.get(relativePath);
        if (existingItem != null) {
          String path1=FileUtil.toSystemDependentName(existingItem.mySourceFile.getPath());
          String path2=FileUtil.toSystemDependentName(fileOrDir.getPath());
          context.addMessage(CompilerMessageCategory.ERROR,"Duplicate file for " + relativePath + "\nOrigin 1: "+ path1+ "\nOrigin 2: "+ path2,null,-1,-1);
          return false;
        }
        relativePath2GenItem.put(relativePath,new MyItem(module,fileOrDir,relativePath));
      }
      return true;
    }
  }
);
}
