{
  final PsiField field=(PsiField)element;
  field.normalizeDeclaration();
  final PsiExpression initializer=field.getInitializer();
  if (initializer == null) {
    return;
  }
  final String initializerText=initializer.getText();
  final PsiManager manager=field.getManager();
  final PsiElementFactory elementFactory=manager.getElementFactory();
  PsiClassInitializer classInitializer=elementFactory.createClassInitializer();
  final PsiClass containingClass=field.getContainingClass();
  if (containingClass == null) {
    return;
  }
  classInitializer=(PsiClassInitializer)containingClass.addAfter(classInitializer,field);
  final PsiCodeBlock body=classInitializer.getBody();
  final String initializationStatementText=field.getName() + " = " + initializerText+ ';';
  final PsiExpressionStatement statement=(PsiExpressionStatement)elementFactory.createStatementFromText(initializationStatementText,body);
  body.add(statement);
  if (field.hasModifierProperty(PsiModifier.STATIC)) {
    final PsiModifierList modifierList=classInitializer.getModifierList();
    modifierList.setModifierProperty(PsiModifier.STATIC,true);
  }
  initializer.delete();
  final CodeStyleManager codeStyleManager=manager.getCodeStyleManager();
  codeStyleManager.reformat(field);
  codeStyleManager.reformat(classInitializer);
}
