{
  myTfBundleName.registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    final ActionEvent e){
      myTfBundleName.getButton().doClick();
    }
  }
,KeyStroke.getKeyStroke(myLblBundleName.getDisplayedMnemonic(),KeyEvent.ALT_DOWN_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
  myTfBundleName.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      Project project=myEditor.getProject();
      final String bundleNameText=myTfBundleName.getText().replace('/','.');
      PsiFile initialPropertiesFile=PropertiesUtil.getPropertiesFile(bundleNameText,myEditor.getModule(),myLocale);
      final GlobalSearchScope moduleScope=GlobalSearchScope.moduleWithDependenciesScope(myEditor.getModule());
      TreeFileChooser fileChooser=TreeClassChooserFactory.getInstance(project).createFileChooser(UIDesignerBundle.message("title.choose.properties.file"),initialPropertiesFile,StdFileTypes.PROPERTIES,new TreeFileChooser.PsiFileFilter(){
        public boolean accept(        PsiFile file){
          final VirtualFile virtualFile=file.getVirtualFile();
          return virtualFile != null && moduleScope.contains(virtualFile);
        }
      }
);
      fileChooser.showDialog();
      PropertiesFile propertiesFile=(PropertiesFile)fileChooser.getSelectedFile();
      if (propertiesFile == null) {
        return;
      }
      final String bundleName=FormReferenceProvider.getBundleName(propertiesFile);
      if (bundleName == null) {
        return;
      }
      myTfBundleName.setText(bundleName);
    }
  }
);
  myTfKey.registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    final ActionEvent e){
      myTfKey.getButton().doClick();
    }
  }
,KeyStroke.getKeyStroke(myLblKey.getDisplayedMnemonic(),KeyEvent.ALT_DOWN_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
  myTfKey.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final String bundleName=myTfBundleName.getText();
      if (bundleName.length() == 0) {
        Messages.showErrorDialog(UIDesignerBundle.message("error.specify.bundle.name"),CommonBundle.getErrorTitle());
        return;
      }
      final PropertiesReferenceManager manager=PropertiesReferenceManager.getInstance(myEditor.getProject());
      final PropertiesFile bundle=manager.findPropertiesFile(myEditor.getModule(),bundleName.replace('/','.'),myLocale);
      if (bundle == null) {
        Messages.showErrorDialog(UIDesignerBundle.message("error.bundle.does.not.exist",bundleName),CommonBundle.getErrorTitle());
        return;
      }
      final KeyChooserDialog dialog=new KeyChooserDialog(myTfKey,bundle,bundleName,myTfKey.getText(),myEditor);
      dialog.show();
      if (!dialog.isOK()) {
        return;
      }
      final StringDescriptor descriptor=dialog.getDescriptor();
      if (descriptor == null) {
        return;
      }
      myTfKey.setText(descriptor.getKey());
      myTfRbValue.setText(descriptor.getResolvedValue());
    }
  }
);
}
