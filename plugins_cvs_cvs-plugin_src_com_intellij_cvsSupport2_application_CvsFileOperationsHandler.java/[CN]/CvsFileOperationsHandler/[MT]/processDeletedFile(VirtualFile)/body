{
  if (myInternalDelete)   return false;
  final AbstractVcs vcs=ProjectLevelVcsManager.getInstance(myProject).getVcsFor(file);
  if (vcs != CvsVcs2.getInstance(myProject))   return false;
  file.putUserData(CvsStorageSupportingDeletionComponent.FILE_VCS,vcs);
  if (!CvsUtil.fileIsUnderCvs(file))   return false;
  myComponent.getDeleteHandler().addDeletedRoot(file);
  if (file.isDirectory()) {
    myInternalDelete=true;
    try {
      deleteFilesInVFS(file);
    }
  finally {
      myInternalDelete=false;
    }
    return true;
  }
  return false;
}
