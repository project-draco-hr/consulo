{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  StackFrameProxyImpl frameProxy=getFrameProxy();
  ObjectReference objectReference;
  try {
    objectReference=frameProxy != null ? frameProxy.thisObject() : null;
  }
 catch (  EvaluateException e) {
    DebuggerCommandImpl currentCommand=getDebugProcess().getManagerThread().getCurrentCommand();
    LOG.assertTrue(currentCommand instanceof SuspendContextCommandImpl);
    LOG.assertTrue(((SuspendContextCommandImpl)currentCommand).getSuspendContext().getThread() == frameProxy.threadProxy());
    LOG.error("Thread : " + frameProxy.threadProxy().name(),e);
    objectReference=null;
  }
  return new EvaluationContextImpl(getSuspendContext(),frameProxy,objectReference);
}
