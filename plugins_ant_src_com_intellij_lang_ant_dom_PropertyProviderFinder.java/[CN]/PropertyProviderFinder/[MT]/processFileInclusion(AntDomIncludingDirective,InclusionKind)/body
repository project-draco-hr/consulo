{
  if (directive.equals(myContextElement)) {
    stop();
  }
  if (myStopped) {
    return;
  }
  final PsiFileSystemItem item=directive.getFile().getValue();
  if (item instanceof PsiFile) {
    final AntDomProject slaveProject=item instanceof XmlFile ? AntSupport.getAntDomProjectForceAntFile((XmlFile)item) : null;
    if (slaveProject != null) {
      myNameContext.pushPrefix(directive,kind,slaveProject);
      try {
        slaveProject.accept(this);
      }
  finally {
        myNameContext.popPrefix();
      }
    }
  }
}
