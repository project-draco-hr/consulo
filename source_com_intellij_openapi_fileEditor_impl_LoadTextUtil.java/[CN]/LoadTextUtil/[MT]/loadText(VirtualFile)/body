{
  if (file instanceof MockVirtualFile)   return ((MockVirtualFile)file).getContent();
  if (file.isDirectory())   return null;
  final FileType fileType=FileTypeManager.getInstance().getFileTypeByFile(file);
  if (fileType.equals(StdFileTypes.CLASS)) {
    return new CharArrayCharSequence(decompile(file));
  }
  if (fileType.isBinary())   return null;
  if (file.isDirectory())   return ArrayUtil.EMPTY_CHAR_SEQUENCE;
  final byte[] bytes;
  try {
    bytes=file.contentsToByteArray();
  }
 catch (  IOException e) {
    return ArrayUtil.EMPTY_CHAR_SEQUENCE;
  }
  return getTextByBinaryPresentation(bytes,file);
}
