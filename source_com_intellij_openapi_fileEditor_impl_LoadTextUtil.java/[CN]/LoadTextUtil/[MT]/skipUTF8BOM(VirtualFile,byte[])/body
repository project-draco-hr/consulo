{
  if (Patches.SUN_BUG_ID_4508058) {
    if (virtualFile.getCharset() != null && virtualFile.getCharset().name().contains("UTF-8") && CharsetToolkit.hasUTF8Bom(content)) {
      virtualFile.setBOM(CharsetToolkit.UTF8_BOM);
      return CharsetToolkit.UTF8_BOM.length;
    }
  }
  return 0;
}
