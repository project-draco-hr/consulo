{
  super.visitReferenceElement(reference);
  final String text=reference.getText();
  if (text.indexOf((int)'.') < 0) {
    return;
  }
  if (PsiTreeUtil.getParentOfType(reference,PsiImportStatementBase.class,PsiPackageStatement.class) != null) {
    return;
  }
  if (m_ignoreJavadoc) {
    final PsiElement containingComment=PsiTreeUtil.getParentOfType(reference,PsiDocComment.class);
    if (containingComment != null) {
      return;
    }
  }
  final PsiElement psiElement=reference.resolve();
  if (!(psiElement instanceof PsiClass)) {
    return;
  }
  final PsiReferenceParameterList typeParameters=reference.getParameterList();
  if (typeParameters == null) {
    return;
  }
  typeParameters.accept(this);
  final PsiClass aClass=(PsiClass)psiElement;
  final PsiClass outerClass=ClassUtils.getOutermostContainingClass(aClass);
  final String fqName=outerClass.getQualifiedName();
  if (!text.startsWith(fqName)) {
    return;
  }
  final String className=ClassUtil.extractClassName(text);
  final PsiManager manager=reference.getManager();
  final PsiResolveHelper resolveHelper=manager.getResolveHelper();
  final PsiClass psiClass=resolveHelper.resolveReferencedClass(className,reference);
  if (psiClass != null && !aClass.equals(psiClass)) {
    return;
  }
  registerError(reference);
}
