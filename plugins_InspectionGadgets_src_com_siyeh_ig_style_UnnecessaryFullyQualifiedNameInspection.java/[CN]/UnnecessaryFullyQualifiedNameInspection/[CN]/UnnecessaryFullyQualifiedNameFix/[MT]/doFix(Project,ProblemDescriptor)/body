{
  final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)descriptor.getPsiElement();
  final PsiJavaFile file=(PsiJavaFile)referenceElement.getContainingFile();
  final PsiImportList importList=file.getImportList();
  if (importList == null) {
    return;
  }
  final PsiClass aClass=(PsiClass)referenceElement.resolve();
  final PsiManager manager=referenceElement.getManager();
  final PsiElementFactory elementFactory=manager.getElementFactory();
  final PsiImportStatement importStatement=elementFactory.createImportStatement(aClass);
  final PsiElement nameElement=referenceElement.getReferenceNameElement();
  if (nameElement == null) {
    return;
  }
  importList.add(importStatement);
  referenceElement.replace(nameElement);
}
