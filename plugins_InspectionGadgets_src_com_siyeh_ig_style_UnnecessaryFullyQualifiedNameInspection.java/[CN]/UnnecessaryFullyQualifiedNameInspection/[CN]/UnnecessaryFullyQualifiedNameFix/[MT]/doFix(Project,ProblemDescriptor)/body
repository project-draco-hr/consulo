{
  final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)descriptor.getPsiElement();
  final PsiJavaFile file=(PsiJavaFile)referenceElement.getContainingFile();
  final PsiImportList importList=file.getImportList();
  if (importList == null) {
    return;
  }
  final PsiClass aClass=(PsiClass)referenceElement.resolve();
  if (aClass == null) {
    return;
  }
  final String qualifiedName=aClass.getQualifiedName();
  @NonNls final String packageName=ClassUtil.extractPackageName(qualifiedName);
  if (packageName.equals("java.lang")) {
    if (ImportUtils.hasOnDemandImportConflict(qualifiedName,file)) {
      addImport(importList,aClass);
    }
  }
 else   if (importList.findSingleClassImportStatement(qualifiedName) == null) {
    addImport(importList,aClass);
  }
  final PsiElement qualifier=referenceElement.getQualifier();
  if (qualifier == null) {
    return;
  }
  qualifier.delete();
}
