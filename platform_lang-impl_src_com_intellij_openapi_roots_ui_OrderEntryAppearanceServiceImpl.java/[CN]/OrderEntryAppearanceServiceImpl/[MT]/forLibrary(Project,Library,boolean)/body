{
  final StructureConfigurableContext context=ProjectStructureConfigurable.getInstance(project).getContext();
  final Icon icon=LibraryPresentationManager.getInstance().getCustomIcon(library,context);
  final String name=library.getName();
  if (name != null) {
    return normalOrRedWaved(name,(icon != null ? icon : AllIcons.Nodes.PpLib),hasInvalidRoots);
  }
  final String[] files=library.getUrls(BinariesOrderRootType.getInstance());
  if (files.length == 0) {
    return SimpleTextCellAppearance.invalid(ProjectBundle.message("library.empty.library.item"),AllIcons.Nodes.PpLib);
  }
 else   if (files.length == 1) {
    return forVirtualFilePointer(new LightFilePointer(files[0]));
  }
  final String url=StringUtil.trimEnd(files[0],ArchiveFileSystem.ARCHIVE_SEPARATOR);
  return SimpleTextCellAppearance.regular(PathUtil.getFileName(url),AllIcons.Nodes.PpLib);
}
