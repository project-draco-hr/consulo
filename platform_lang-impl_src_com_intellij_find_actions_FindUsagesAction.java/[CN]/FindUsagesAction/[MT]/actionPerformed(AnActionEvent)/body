{
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (project == null) {
    return;
  }
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  UsageTarget[] usageTargets=e.getData(UsageView.USAGE_TARGETS_KEY);
  if (usageTargets == null) {
    final Editor editor=e.getData(CommonDataKeys.EDITOR);
    chooseAmbiguousTargetAndPerform(project,editor,new PsiElementProcessor<PsiElement>(){
      @Override public boolean execute(      @NotNull final PsiElement element){
        startFindUsages(element);
        return false;
      }
    }
);
  }
 else {
    UsageTarget target=usageTargets[0];
    if (target instanceof PsiElementUsageTarget) {
      PsiElement element=((PsiElementUsageTarget)target).getElement();
      if (element != null) {
        startFindUsages(element);
      }
    }
  }
}
