{
  ArrayList<UsageInfo> result=new ArrayList<UsageInfo>();
  for (int i=0; i < myElementsToMove.length; i++) {
    PsiElement element=myElementsToMove[i];
    for (    PsiReference reference : ReferencesSearch.search(element)) {
      result.add(new MyUsageInfo(reference.getElement(),i,reference));
    }
    if (element instanceof PsiFile) {
      final List<UsageInfo> usages=MoveFileHandler.forElement((PsiFile)element).findUsages(((PsiFile)element),myNewParent,mySearchInComments,mySearchInNonJavaFiles);
      if (usages != null) {
        result.addAll(usages);
        myFoundUsages.put((PsiFile)element,usages);
      }
    }
  }
  return result.toArray(new UsageInfo[result.size()]);
}
