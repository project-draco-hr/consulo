{
  if (!myProject.isOpen())   return;
  int size;
synchronized (myCheckingQueue) {
    size=myCheckingQueue.size();
  }
  pass.setProgressLimit(size);
  final StatusBar statusBar=WindowManager.getInstance().getStatusBar(myProject);
  String oldInfo=saveStatusBarInfo(statusBar);
  try {
    while (true) {
      final VirtualFile virtualFile;
synchronized (myCheckingQueue) {
        Iterator<VirtualFile> iterator=myCheckingQueue.iterator();
        if (iterator.hasNext()) {
          virtualFile=iterator.next();
          iterator.remove();
        }
 else {
          virtualFile=null;
        }
      }
      if (virtualFile == null)       break;
      progress.checkCanceled();
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          statusBar.setInfo("Checking '" + virtualFile.getPresentableUrl() + "'");
        }
      }
);
      if (!virtualFile.isValid() || orderVincentToCleanTheCar(virtualFile,progress)) {
        doRemove(virtualFile);
      }
      pass.advanceProgress(1);
    }
  }
  finally {
    restoreStatusBarInfo(statusBar,oldInfo);
  }
}
