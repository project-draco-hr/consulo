{
  super.visitNewExpression(newExpression);
  final PsiElement parent=newExpression.getParent();
  if (!(parent instanceof GrCodeBlock)) {
    return;
  }
  if (parent instanceof GrOpenBlock) {
    final GrOpenBlock openBlock=(GrOpenBlock)parent;
    if (ControlFlowUtils.openBlockCompletesWithStatement(openBlock,newExpression)) {
      return;
    }
  }
 else   if (parent instanceof GrClosableBlock) {
    final PsiElement grandParent=parent.getParent();
    if (grandParent instanceof GrMethodCallExpression) {
      return;
    }
 else     if (grandParent instanceof GrReferenceExpression) {
      final PsiElement greatGrandParent=grandParent.getParent();
      if (greatGrandParent instanceof GrMethodCallExpression) {
        return;
      }
    }
  }
  if (newExpression.getArrayCount() != 0) {
    return;
  }
  registerError(newExpression.getReferenceElement());
}
