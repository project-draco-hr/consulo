{
  super.visitNewExpression(newExpression);
  final GrCodeReferenceElement refElement=newExpression.getReferenceElement();
  if (refElement == null)   return;
  final PsiElement parent=newExpression.getParent();
  if (parent instanceof GrClosableBlock) {
    return;
  }
  if (parent instanceof GrCodeBlock || parent instanceof GroovyFile) {
    if (parent instanceof GrOpenBlock) {
      final GrOpenBlock openBlock=(GrOpenBlock)parent;
      if (ControlFlowUtils.openBlockCompletesWithStatement(openBlock,newExpression)) {
        return;
      }
    }
    registerError(refElement,newExpression.getArrayCount());
  }
}
