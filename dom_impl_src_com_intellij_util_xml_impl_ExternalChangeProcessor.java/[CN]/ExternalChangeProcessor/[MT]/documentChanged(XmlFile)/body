{
  myDocumentChanged=true;
  final DomFileElementImpl oldElement=myDomManager.getCachedFileElement(xmlFile);
  if (oldElement != null) {
    final List<DomEvent> events=myDomManager.recomputeFileElement(xmlFile,true);
    if (myDomManager.getFileElement(xmlFile) != oldElement) {
      for (      final DomEvent event : events) {
        myDomManager.fireEvent(event);
      }
      return;
    }
    final DomInvocationHandler rootHandler=oldElement.getRootHandler();
    rootHandler.detach(false);
    final XmlTag rootTag=oldElement.getRootTag();
    if (rootTag != null) {
      LOG.assertTrue(rootTag.isValid());
      rootHandler.attach(rootTag);
    }
    myDomManager.fireEvent(new ElementChangedEvent(oldElement.getRootElement()));
  }
}
