{
  String path=patch.getBeforeName() == null ? patch.getAfterName() : patch.getBeforeName();
  path=path.replace("\\","/");
  final boolean caseSensitive=SystemInfo.isFileSystemCaseSensitive;
  final Collection<VirtualFile> result=new LinkedList<VirtualFile>();
  for (  VirtualFile vf : in) {
    final String vfPath=vf.getPath();
    if ((caseSensitive && vfPath.endsWith(path)) || ((!caseSensitive) && StringUtil.endsWithIgnoreCase(vfPath,path))) {
      result.add(vf);
    }
  }
  return result;
}
