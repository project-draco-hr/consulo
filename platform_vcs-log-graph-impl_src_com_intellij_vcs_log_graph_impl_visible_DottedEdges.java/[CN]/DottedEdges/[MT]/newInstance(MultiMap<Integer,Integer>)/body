{
  int[] nodesWithEdges=ArrayUtil.toIntArray(delegate.keySet());
  Arrays.sort(nodesWithEdges);
  int[] startIndexes=new int[nodesWithEdges.length + 1];
  int[] edges=new int[delegate.values().size()];
  int start=0;
  for (int i=0; i < startIndexes.length - 1; i++) {
    startIndexes[i]=start;
    for (    int toNode : delegate.get(nodesWithEdges[i])) {
      edges[start]=toNode;
      start++;
    }
  }
  startIndexes[startIndexes.length - 1]=start;
  return new DottedEdges(nodesWithEdges,startIndexes,edges);
}
