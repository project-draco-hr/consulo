{
  final Sdk jdk=parameters.getJdk();
  if (jdk == null) {
    throw new ExecutionException(DebuggerBundle.message("error.jdk.not.specified"));
  }
  final String versionString=jdk.getVersionString();
  if (versionString.indexOf("1.0") > -1 || versionString.indexOf("1.1") > -1) {
    throw new ExecutionException(DebuggerBundle.message("error.unsupported.jdk.version",versionString));
  }
  if (SystemInfo.isWindows && versionString.indexOf("1.2") > -1) {
    final VirtualFile homeDirectory=jdk.getHomeDirectory();
    if (homeDirectory == null || !homeDirectory.isValid()) {
      throw new ExecutionException(DebuggerBundle.message("error.invalid.jdk.home",versionString));
    }
    File dllFile=new File(homeDirectory.getPath().replace('/',File.separatorChar) + File.separator + "bin"+ File.separator+ "jdwp.dll");
    if (!dllFile.exists()) {
      GetJPDADialog dialog=new GetJPDADialog();
      dialog.show();
      throw new ExecutionException(DebuggerBundle.message("error.debug.libraries.missing"));
    }
  }
}
