{
  final UUID sessionUUID=UUID.randomUUID();
  final RequestFuture requestFuture=new RequestFuture(handler);
  myHandlers.put(sessionUUID,requestFuture);
  boolean success=false;
  try {
    final ChannelFuture future=Channels.write(myConnectFuture.getChannel(),ProtoUtil.toMessage(sessionUUID,request));
    future.awaitUninterruptibly();
    success=future.isSuccess();
    return success ? requestFuture : null;
  }
  finally {
    if (!success) {
      requestFuture.setDone();
      myHandlers.remove(sessionUUID);
      handler.sessionTerminated();
    }
  }
}
