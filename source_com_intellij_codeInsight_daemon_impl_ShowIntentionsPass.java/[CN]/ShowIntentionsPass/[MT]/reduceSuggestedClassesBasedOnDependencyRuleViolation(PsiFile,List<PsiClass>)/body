{
  final Project project=file.getProject();
  final DependencyValidationManager validationManager=DependencyValidationManager.getInstance(project);
  for (int i=availableClasses.size() - 1; i >= 0; i--) {
    PsiClass psiClass=availableClasses.get(i);
    PsiFile targetFile=psiClass.getContainingFile();
    if (targetFile == null)     continue;
    final DependencyRule[] violated=validationManager.getViolatorDependencyRules(file,targetFile);
    if (violated.length != 0) {
      availableClasses.remove(i);
      if (availableClasses.size() == 1)       break;
    }
  }
}
