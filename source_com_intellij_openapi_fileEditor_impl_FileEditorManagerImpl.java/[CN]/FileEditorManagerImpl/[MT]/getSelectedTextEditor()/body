{
  assertThread();
  final VirtualFile[] selectedFiles=getSelectedFiles();
  if (selectedFiles.length == 0) {
    return null;
  }
  final FileEditor editor=getSelectedEditor(selectedFiles[0]);
  if (editor instanceof TextEditor) {
    return ((TextEditor)editor).getEditor();
  }
 else {
    return null;
  }
}
