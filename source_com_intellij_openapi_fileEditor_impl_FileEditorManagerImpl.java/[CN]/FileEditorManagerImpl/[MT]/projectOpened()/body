{
  mySplitters.startListeningFocus();
  myConnection=myProject.getMessageBus().connect();
  final FileStatusManager fileStatusManager=FileStatusManager.getInstance(myProject);
  if (fileStatusManager != null) {
    fileStatusManager.addFileStatusListener(myFileStatusListener);
  }
  myConnection.subscribe(AppTopics.FILE_TYPES,new MyFileTypeListener());
  VirtualFileManager.getInstance().addVirtualFileListener(myVirtualFileListener);
  UISettings.getInstance().addUISettingsListener(myUISettingsListener);
  PsiManager.getInstance(myProject).addPsiTreeChangeListener(myPsiTreeChangeListener);
  WolfTheProblemSolver.getInstance(getProject()).addProblemListener(myProblemListener);
  StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
    public void run(){
      ToolWindowManager.getInstance(myProject).invokeLater(new Runnable(){
        public void run(){
          CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
            public void run(){
              if (myProject.isDisposed())               return;
              setTabsMode(UISettings.getInstance().EDITOR_TAB_PLACEMENT != UISettings.TABS_NONE);
              mySplitters.openFiles();
            }
          }
,"",null);
        }
      }
);
    }
  }
);
}
