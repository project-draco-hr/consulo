{
  if (descriptor == null) {
    throw new IllegalArgumentException("descriptor cannot be null");
  }
  assertThread();
  final Editor[] result=new Editor[1];
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      final FileEditor[] editors=openFile(descriptor.getFile(),focusEditor);
      for (int i=0; i < editors.length; i++) {
        final FileEditor editor=editors[i];
        if (!(editor instanceof TextEditor)) {
          continue;
        }
        final Editor _editor=((TextEditor)editor).getEditor();
        result[0]=_editor;
        if (descriptor.getOffset() >= 0) {
          _editor.getCaretModel().moveToOffset(Math.min(descriptor.getOffset(),_editor.getDocument().getTextLength()));
          _editor.getSelectionModel().removeSelection();
          _editor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
        }
 else         if (descriptor.getLine() != -1 && descriptor.getColumn() != -1) {
          final LogicalPosition pos=new LogicalPosition(descriptor.getLine(),descriptor.getColumn());
          _editor.getCaretModel().moveToLogicalPosition(pos);
          _editor.getSelectionModel().removeSelection();
          _editor.getScrollingModel().scrollToCaret(ScrollType.CENTER);
        }
        break;
      }
    }
  }
,"",null);
  return result[0];
}
