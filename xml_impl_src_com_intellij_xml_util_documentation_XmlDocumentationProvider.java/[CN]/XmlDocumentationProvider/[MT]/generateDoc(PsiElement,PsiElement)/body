{
  if (element instanceof XmlElementDecl) {
    PsiElement curElement=element;
    while (curElement != null && !(curElement instanceof XmlComment)) {
      curElement=curElement.getPrevSibling();
      if (curElement != null && curElement.getClass() == element.getClass()) {
        curElement=null;
        break;
      }
    }
    if (curElement != null) {
      return formatDocFromComment(curElement,((XmlElementDecl)element).getNameElement().getText());
    }
  }
 else   if (element instanceof XmlTag) {
    XmlTag tag=(XmlTag)element;
    MyPsiElementProcessor processor=new MyPsiElementProcessor();
    XmlUtil.processXmlElements(tag,processor,true);
    String name=tag.getAttributeValue("name");
    String typeName=null;
    if (processor.result == null) {
      XmlTag declaration=getComplexTypeDefinition(element,originalElement);
      if (declaration != null) {
        XmlUtil.processXmlElements(declaration,processor,true);
        typeName=declaration.getName();
      }
    }
    return generateDoc(processor.result,name,typeName);
  }
 else   if (element instanceof XmlAttributeDecl) {
    PsiElement uncleElement=element.getParent().getNextSibling();
    if (uncleElement instanceof PsiWhiteSpace)     uncleElement=uncleElement.getNextSibling();
    if (uncleElement instanceof PsiComment) {
      return formatDocFromComment(uncleElement,((XmlAttributeDecl)element).getNameElement().getText());
    }
  }
  return null;
}
