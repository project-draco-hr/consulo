{
  if (element instanceof XmlTag) {
    XmlTag tag=(XmlTag)element;
    MyPsiElementProcessor processor=new MyPsiElementProcessor();
    XmlUtil.processXmlElements(tag,processor,true);
    if (processor.url == null) {
      XmlTag declaration=getComplexTypeDefinition(element,originalElement);
      if (declaration != null) {
        XmlUtil.processXmlElements(declaration,processor,true);
      }
    }
    return processor.url;
  }
  return super.getUrlFor(element,originalElement);
}
