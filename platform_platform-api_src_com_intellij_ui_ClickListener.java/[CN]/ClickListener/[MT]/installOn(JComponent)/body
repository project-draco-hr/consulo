{
  MouseAdapter adapter=new MouseAdapter(){
    Point clickPoint;
    @Override public void mousePressed(    MouseEvent e){
      if (!e.isPopupTrigger()) {
        clickPoint=e.getPoint();
      }
    }
    @Override public void mouseReleased(    MouseEvent e){
      Point releasedAt=e.getPoint();
      Point clickedAt=clickPoint;
      clickPoint=null;
      if (clickedAt == null)       return;
      if (e.isPopupTrigger())       return;
      if (releasedAt.x < 0 || releasedAt.y < 0 || releasedAt.x >= c.getWidth() || releasedAt.y >= c.getWidth())       return;
      if (Math.abs(clickedAt.x - releasedAt.x) < EPS && Math.abs(clickedAt.y - releasedAt.y) < EPS) {
        onClick(e);
      }
    }
  }
;
  c.addMouseListener(adapter);
  c.addMouseMotionListener(adapter);
}
