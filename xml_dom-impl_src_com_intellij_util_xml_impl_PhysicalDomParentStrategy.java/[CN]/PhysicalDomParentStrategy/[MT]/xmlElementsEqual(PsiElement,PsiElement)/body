{
  if (fst.equals(snd))   return true;
  if (fst.isValid() && fst.isPhysical() || snd.isValid() && snd.isPhysical())   return false;
  if (fst.getTextLength() != snd.getTextLength())   return false;
  if (fst.getStartOffsetInParent() != snd.getStartOffsetInParent())   return false;
  final PsiElement parent1=fst.getParent();
  final PsiElement parent2=snd.getParent();
  return parent1 != null && parent2 != null && xmlElementsEqual(parent1,parent2);
}
