{
  if (this == o)   return true;
  if (!(o instanceof PhysicalDomParentStrategy))   return false;
  final XmlElement thatElement=((PhysicalDomParentStrategy)o).myElement;
  if (xmlElementsEqual(myElement,thatElement)) {
    if (myElement != thatElement) {
      final PsiElement nav1=myElement.getNavigationElement();
      final PsiElement nav2=thatElement.getNavigationElement();
      if (nav1 != nav2) {
        if (ApplicationManagerEx.getApplicationEx().isInternal()) {
          PsiElement cur=findIncluder(myElement);
          PsiElement nav=findIncluder(nav1);
          final PsiElement _nav1=myElement.getNavigationElement();
          final PsiElement _nav2=thatElement.getNavigationElement();
          throw new AssertionError(myElement.getText() + "; including=" + (cur == null ? null : cur.getText())+ "; nav="+ (nav == null ? null : nav.getText()));
        }
        throw new AssertionError(nav1.getContainingFile() + ":" + nav1.getTextRange().getStartOffset()+ "!="+ nav2.getContainingFile()+ ":"+ nav2.getTextRange().getStartOffset()+ "; "+ (nav1 == myElement)+ ";"+ (nav2 == thatElement));
      }
    }
    return true;
  }
  return false;
}
