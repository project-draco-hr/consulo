{
  final Env env=new Env(args);
  env.report();
  final String path=env.getProjectPath();
  final String oath=env.getOutputPath();
  if (path == null) {
    System.err.println("No project path specified.");
  }
 else {
    try {
      final String projectPath=path + File.separator + ".idea";
      final String outputPath=(oath == null ? "" : oath) + File.separator + "snapshot-"+ new SimpleDateFormat("dd-MM-yy(hh:mm:ss)").format(new Date())+ ".log";
      final Project project=new Project();
      final Sdk jdk=project.createSdk("JavaSDK","IDEA jdk","1.6",System.getProperty("java.home"),null);
      final List<String> paths=new LinkedList<String>();
      paths.add(FileUtil.toSystemIndependentName(ClasspathBootstrap.getResourcePath(Object.class).getCanonicalPath()));
      jdk.setClasspath(paths);
      IdeaProjectLoader.loadFromPath(project,projectPath,"");
      final File dataStorageRoot=Utils.getDataStorageRoot(project);
      final Mappings mappings=new Mappings(dataStorageRoot,true);
      final PrintStream p=new PrintStream(outputPath);
      mappings.toStream(p);
      p.close();
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
}
