{
  boolean isMethod=block.getParent() instanceof GrMethod;
  boolean keepInOneLine=isMethod ? mySettings.KEEP_SIMPLE_METHODS_IN_ONE_LINE : mySettings.KEEP_SIMPLE_BLOCKS_IN_ONE_LINE;
  if (myType1 == mLCURLY && myType2 == mRCURLY) {
    createLF(!keepInOneLine);
  }
 else   if (myType1 == mLCURLY) {
    if (keepInOneLine) {
      createDependentLFSpacing(true,mySettings.SPACE_WITHIN_BRACES,block.getTextRange());
    }
 else {
      int lineFeedsCount=isMethod ? mySettings.BLANK_LINES_BEFORE_METHOD_BODY + 1 : 1;
      myResult=Spacing.createSpacing(0,0,lineFeedsCount,mySettings.KEEP_LINE_BREAKS,keepBlankLines());
    }
  }
 else   if (myType2 == mRCURLY) {
    if (keepInOneLine) {
      createDependentLFSpacing(true,mySettings.SPACE_WITHIN_BRACES,block.getTextRange());
    }
 else {
      createLF(true);
    }
  }
}
