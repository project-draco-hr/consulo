{
  Diff.Change ch=Diff.buildChanges(ArrayUtil.toStringArray(vcs),ArrayUtil.toStringArray(current));
  List<Range> result=new ArrayList<Range>();
  while (ch != null) {
    if (innerWhitespaceChanges) {
      result.add(createOnSmart(ch,shift,vcsShift,current,vcs));
    }
 else {
      result.add(createOn(ch,shift,vcsShift));
    }
    ch=ch.link;
  }
  return result;
}
