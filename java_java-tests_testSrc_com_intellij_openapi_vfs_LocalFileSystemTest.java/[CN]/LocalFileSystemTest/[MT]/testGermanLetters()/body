{
  final File dirFile=createTempDirectory();
  final String name="te\u00dft123123123.txt";
  final File childFile=new File(dirFile,name);
  childFile.createNewFile();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        final VirtualFile dir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(dirFile);
        assertNotNull(dir);
        final VirtualFile child=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(childFile);
        assertNotNull(child);
      }
 catch (      Exception e) {
        LOG.error(e);
      }
    }
  }
);
  assertTrue(childFile.delete());
}
