{
  final Object[] selectedElements=getSelectedElements();
  final Class<? extends Object> elementsClass=getElementsClass(selectedElements);
  myRemoveButton.setEnabled(elementsClass != null && !(elementsClass.isAssignableFrom(ClassesElement.class) || elementsClass.equals(SourcesElement.class) || elementsClass.isAssignableFrom(JavadocElement.class)|| elementsClass.isAssignableFrom(AnnotationElement.class)) && (myLibraryTableProvider.isLibraryTableEditable() || !elementsClass.isAssignableFrom(LibraryElement.class)));
  myRenameLibraryButton.setEnabled(selectedElements.length == 1 && elementsClass != null && elementsClass.equals(LibraryElement.class));
  if (elementsClass != null && elementsClass.isAssignableFrom(ItemElement.class)) {
    myRemoveButton.setText(ProjectBundle.message("library.detach.action"));
  }
 else {
    myRemoveButton.setText(ProjectBundle.message("library.detach.action"));
  }
  boolean attachActionsEnabled=selectedElements.length == 1 || getSelectedLibrary() != null;
  myAttachClassesButton.setEnabled(attachActionsEnabled);
  myAttachJavadocsButton.setEnabled(attachActionsEnabled);
  myAttachUrlJavadocsButton.setEnabled(attachActionsEnabled);
  myAttachSourcesButton.setEnabled(attachActionsEnabled);
  myAttachAnnotationsButton.setEnabled(attachActionsEnabled);
  myAttachJarDirectoriesButton.setEnabled(attachActionsEnabled);
}
