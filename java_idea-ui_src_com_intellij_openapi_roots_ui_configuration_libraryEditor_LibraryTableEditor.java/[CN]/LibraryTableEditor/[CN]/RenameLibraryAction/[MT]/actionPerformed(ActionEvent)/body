{
  final Library selectedLibrary=getSelectedLibrary();
  if (selectedLibrary == null) {
    return;
  }
  final String currentName=selectedLibrary.getName();
  final String newName=Messages.showInputDialog(myTree,ProjectBundle.message("library.rename.prompt"),ProjectBundle.message("library.rename.title",getLibraryEditor(selectedLibrary).getName()),Messages.getQuestionIcon(),getLibraryEditor(selectedLibrary).getName(),new InputValidator(){
    public boolean checkInput(    String inputString){
      return true;
    }
    public boolean canClose(    String libraryName){
      if (!currentName.equals(libraryName)) {
        if (libraryAlreadyExists(libraryName)) {
          Messages.showErrorDialog(ProjectBundle.message("library.name.already.exists.error",libraryName),ProjectBundle.message("library.name.already.exists.title"));
          return false;
        }
      }
      return true;
    }
  }
);
  renameLibrary(selectedLibrary,newName);
}
