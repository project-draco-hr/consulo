{
  mySelectedLibraries=LibraryTableEditor.this.getSelectedLibraries();
  if (myNameField != null) {
    final Library library=getSelectedLibrary();
    final String currentName=getLibraryEditor(library).getName();
    String newName=myNameField.getText().trim();
    if (newName.length() == 0) {
      newName=null;
    }
    if (!Comparing.equal(newName,currentName)) {
      if (!myEditingModuleLibraries) {
        if (newName == null) {
          Messages.showErrorDialog(ProjectBundle.message("library.name.not.specified.error",newName),ProjectBundle.message("library.name.not.specified.title"));
          return;
        }
        if (libraryAlreadyExists(newName)) {
          Messages.showErrorDialog(ProjectBundle.message("library.name.already.exists.error",newName),ProjectBundle.message("library.name.already.exists.title"));
          return;
        }
      }
      renameLibrary(library,newName);
    }
  }
  commitChanges();
  super.doOKAction();
}
