{
  super(target,BoxLayout.PAGE_AXIS);
  myTarget=target;
  myTimer=UIUtil.createNamedTimer("PopupTimer",40,this);
  myTarget.addPopupMenuListener(new PopupMenuListener(){
    @Override public void popupMenuWillBecomeVisible(    PopupMenuEvent e){
      switchTimer(true);
    }
    @Override public void popupMenuWillBecomeInvisible(    PopupMenuEvent e){
      switchTimer(false);
      JRootPane rootPane=SwingUtilities.getRootPane(target);
      if (rootPane != null) {
        rootPane.putClientProperty("apple.awt._windowFadeDelegate",null);
      }
    }
    @Override public void popupMenuCanceled(    PopupMenuEvent e){
      switchTimer(false);
    }
  }
);
  if (myTarget.isVisible()) {
    switchTimer(true);
  }
}
