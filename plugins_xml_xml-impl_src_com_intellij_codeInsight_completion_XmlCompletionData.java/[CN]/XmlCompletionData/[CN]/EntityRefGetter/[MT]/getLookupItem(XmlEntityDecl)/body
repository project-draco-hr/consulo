{
  if (decl == null) {
    return null;
  }
  final String name=decl.getName();
  if (name == null) {
    return null;
  }
  final XmlAttributeValue value=decl.getValueElement();
  final ASTNode node=value.getNode();
  if (node != null) {
    final ASTNode[] nodes=node.getChildren(TokenSet.create(XmlTokenType.XML_CHAR_ENTITY_REF));
    if (nodes.length == 1) {
      final String valueText=nodes[0].getText();
      final int i=valueText.indexOf('#');
      if (i > 0) {
        String s=valueText.substring(i + 1);
        if (s.endsWith(";")) {
          s=s.substring(0,s.length() - 1);
        }
        try {
          final int unicodeChar=Integer.valueOf(s).intValue();
          return LookupValueFactory.createLookupValueWithHint(name,null,new String(Character.toChars(unicodeChar)));
        }
 catch (        NumberFormatException e) {
          return null;
        }
      }
    }
  }
  return null;
}
