def geteditor(self):
    'return editor to use'
    return (os.environ.get('HGEDITOR') or self.config('ui', 'editor') or os.environ.get('VISUAL') or os.environ.get('EDITOR', 'vi'))
