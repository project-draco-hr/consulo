def promptchoice(self, msg, choices, default=0):
    "Prompt user with msg, read response, and ensure it matches\n        one of the provided choices. The index of the choice is returned.\n        choices is a sequence of acceptable responses with the format:\n        ('&None', 'E&xec', 'Sym&link') Responses are case insensitive.\n        If ui is not interactive, the default is returned.\n        "
    resps = [s[(s.index('&') + 1)].lower() for s in choices]
    while True:
        r = self.prompt(msg, resps[default])
        if (r.lower() in resps):
            return resps.index(r.lower())
        self.write(_('unrecognized response\n'))
