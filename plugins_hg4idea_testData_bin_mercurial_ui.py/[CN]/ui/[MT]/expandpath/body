def expandpath(self, loc, default=None):
    'Return repository location relative to cwd or from [paths]'
    if (('://' in loc) or os.path.isdir(os.path.join(loc, '.hg'))):
        return loc
    path = self._path(loc)
    if ((not path) and (default is not None)):
        path = self._path(default)
    return (path or loc)
