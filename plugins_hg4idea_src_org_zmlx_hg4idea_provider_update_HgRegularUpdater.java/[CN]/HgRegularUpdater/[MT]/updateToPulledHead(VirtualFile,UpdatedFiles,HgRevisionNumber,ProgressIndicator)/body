{
  indicator.setText2(HgVcsMessages.message("hg4idea.update.progress.updating.to.pulled.head"));
  HgRevisionNumber parentBeforeUpdate=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
  HgUpdateCommand updateCommand=new HgUpdateCommand(project,repository);
  updateCommand.setRevision(newHead.getChangeset());
  updateCommand.setClean(true);
  updateCommand.execute();
  HgRevisionNumber parentAfterUpdate=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
  addUpdatedFiles(repo,updatedFiles,parentBeforeUpdate,parentAfterUpdate);
}
