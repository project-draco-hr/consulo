{
  indicator.setText2(HgVcsMessages.message("hg4idea.update.progress.updating.to.pulled.head"));
  HgRevisionNumber parentBeforeUpdate=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
  HgUpdateCommand updateCommand=new HgUpdateCommand(project,repository);
  updateCommand.setRevision(newHead.getChangeset());
  updateCommand.setClean(true);
  updateCommand.execute();
  HgRevisionNumber commonParent=findCommonParent(newHead,parentBeforeUpdate);
  addUpdatedFiles(repo,updatedFiles,commonParent,newHead);
}
