{
  final List<HgRevisionNumber> pulledRevisions=new HgMergePreviewCommand(project,newHead,parentBeforeUpdate,1).execute(repository);
  if (pulledRevisions == null || pulledRevisions.isEmpty()) {
    return null;
  }
  HgRevisionNumber pulledRevision=pulledRevisions.get(0);
  final List<HgRevisionNumber> parentRevisions=new HgWorkingCopyRevisionsCommand(project).getRevisions(repository,"parent",null,pulledRevision,true);
  if (parentRevisions.isEmpty()) {
    return null;
  }
  return parentRevisions.get(0);
}
