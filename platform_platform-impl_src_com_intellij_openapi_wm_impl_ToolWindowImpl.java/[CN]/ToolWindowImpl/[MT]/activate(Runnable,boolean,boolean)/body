{
  ApplicationManager.getApplication().assertIsDispatchThread();
  final UiActivity activity=new UiActivity.Focus("toolWindow:" + myId);
  UiActivityMonitor.getInstance().addActivity(myToolWindowManager.getProject(),activity,ModalityState.NON_MODAL);
  myToolWindowManager.activateToolWindow(myId,forced,autoFocusContents);
  getActivation().doWhenDone(new Runnable(){
    public void run(){
      myToolWindowManager.invokeLater(new Runnable(){
        @Override public void run(){
          if (runnable != null) {
            runnable.run();
          }
          UiActivityMonitor.getInstance().removeActivity(myToolWindowManager.getProject(),activity);
        }
      }
);
    }
  }
);
}
