{
  super(project,false);
  myProject=project;
  setTitle(VcsBundle.message("cache.settings.dialog.title"));
  final CommittedChangesCache cache=CommittedChangesCache.getInstance(project);
  final CommittedChangesCache.State state=cache.getState();
  myCountSpinner.setModel(new SpinnerNumberModel(state.getInitialCount(),1,100000,10));
  myDaysSpinner.setModel(new SpinnerNumberModel(state.getInitialDays(),1,720,10));
  myRefreshSpinner.setModel(new SpinnerNumberModel(state.getRefreshInterval(),1,60 * 24,1));
  if (cache.isMaxCountSupportedForProject()) {
    myDaysLabel.setVisible(false);
    myDaysSpinner.setVisible(false);
  }
 else {
    myCountLabel.setVisible(false);
    myCountSpinner.setVisible(false);
  }
  myRefreshCheckbox.setSelected(state.isRefreshEnabled());
  init();
  myRefreshCheckbox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      updateControls();
    }
  }
);
  updateControls();
}
