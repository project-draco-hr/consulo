{
  Project project=context.getProject();
  ArrayList<FilePath> virtualFiles=new ArrayList<FilePath>();
  VirtualFile[] roots=ProjectRootManager.getInstance(project).getContentRoots();
  for (int i=0; i < roots.length; i++) {
    VirtualFile root=roots[i];
    AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(root);
    if (vcs == null)     continue;
    CheckinEnvironment checkinEnvironment=vcs.getCheckinEnvironment();
    if (checkinEnvironment == null)     continue;
    virtualFiles.add(new FilePathImpl(root));
  }
  return virtualFiles.toArray(new FilePath[virtualFiles.size()]);
}
