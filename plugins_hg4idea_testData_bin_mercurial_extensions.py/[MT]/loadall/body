def loadall(ui):
    result = ui.configitems('extensions')
    newindex = len(_order)
    for (name, path) in result:
        if path:
            if (path[0] == '!'):
                continue
        try:
            load(ui, name, path)
        except KeyboardInterrupt:
            raise
        except Exception as inst:
            if path:
                ui.warn((_('*** failed to import extension %s from %s: %s\n') % (name, path, inst)))
            else:
                ui.warn((_('*** failed to import extension %s: %s\n') % (name, inst)))
            if ui.traceback():
                return 1
    for name in _order[newindex:]:
        uisetup = getattr(_extensions[name], 'uisetup', None)
        if uisetup:
            uisetup(ui)
    for name in _order[newindex:]:
        extsetup = getattr(_extensions[name], 'extsetup', None)
        if extsetup:
            try:
                extsetup(ui)
            except TypeError:
                if (extsetup.func_code.co_argcount != 0):
                    raise
                extsetup()
