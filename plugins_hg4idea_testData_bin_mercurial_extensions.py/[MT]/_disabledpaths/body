def _disabledpaths(strip_init=False):
    'find paths of disabled extensions. returns a dict of {name: path}\n    removes /__init__.py from packages if strip_init is True'
    import hgext
    extpath = os.path.dirname(os.path.abspath(hgext.__file__))
    try:
        files = os.listdir(extpath)
    except OSError:
        return {}
    exts = {}
    for e in files:
        if e.endswith('.py'):
            name = e.rsplit('.', 1)[0]
            path = os.path.join(extpath, e)
        else:
            name = e
            path = os.path.join(extpath, e, '__init__.py')
            if (not os.path.exists(path)):
                continue
            if strip_init:
                path = os.path.dirname(path)
        if ((name in exts) or (name in _order) or (name == '__init__')):
            continue
        exts[name] = path
    return exts
