def load(ui, name, path):
    if (name.startswith('hgext.') or name.startswith('hgext/')):
        shortname = name[6:]
    else:
        shortname = name
    if (shortname in _extensions):
        return
    _extensions[shortname] = None
    if path:
        mod = loadpath(path, ('hgext.%s' % name))
    else:

        def importh(name):
            mod = __import__(name)
            components = name.split('.')
            for comp in components[1:]:
                mod = getattr(mod, comp)
            return mod
        try:
            mod = importh(('hgext.%s' % name))
        except ImportError:
            mod = importh(name)
    _extensions[shortname] = mod
    _order.append(shortname)
