{
  return new VcsContextFactory(){
    public VcsContext createCachedContextOn(    AnActionEvent event){
      return VcsContextWrapper.createCachedInstanceOn(event);
    }
    public VcsContext createContextOn(    final AnActionEvent event){
      return new VcsContextWrapper(event.getDataContext(),event.getModifiers(),event.getPlace());
    }
    public FilePath createFilePathOn(    final VirtualFile virtualFile){
      return ApplicationManager.getApplication().runReadAction(new Computable<FilePath>(){
        public FilePath compute(){
          return new FilePathImpl(virtualFile);
        }
      }
);
    }
    public FilePath createFilePathOn(    final File file){
      return ApplicationManager.getApplication().runReadAction(new Computable<FilePath>(){
        public FilePath compute(){
          return FilePathImpl.create(file);
        }
      }
);
    }
    public FilePath createFilePathOn(    final VirtualFile parent,    final String name){
      return ApplicationManager.getApplication().runReadAction(new Computable<FilePath>(){
        public FilePath compute(){
          return new FilePathImpl(parent,name);
        }
      }
);
    }
  }
;
}
