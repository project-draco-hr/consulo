{
  try {
    commandLine.getEnvironment().clear();
    commandLine.getEnvironment().putAll(EnvironmentUtil.getEnvironmentProperties());
    myProcess=commandLine.createProcess();
    myErrThread=new ReadProcessThread(new BufferedReader(new InputStreamReader(myProcess.getErrorStream(),EncodingManager.getInstance().getDefaultCharset()))){
      protected void textAvailable(      String s){
        myErrorText.append(s);
        myErrorRegistry.registerError(s);
        myContainsError=true;
      }
    }
;
    final Application application=ApplicationManager.getApplication();
    myStdErrFuture=application.executeOnPooledThread(myErrThread);
    myInputStream=myProcess.getInputStream();
    myOutputStream=myProcess.getOutputStream();
    waitForProcess(application);
  }
 catch (  Exception e) {
    closeInternal();
    throw new AuthenticationException(e.getLocalizedMessage(),e);
  }
}
