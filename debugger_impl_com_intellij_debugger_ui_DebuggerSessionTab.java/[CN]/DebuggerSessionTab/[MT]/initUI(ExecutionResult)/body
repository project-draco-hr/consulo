{
  myConsole=executionResult.getExecutionConsole();
  myRunContentDescriptor=new RunContentDescriptor(myConsole,executionResult.getProcessHandler(),myContentPanel,getSessionName());
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return myRunContentDescriptor;
  }
  Content content=findContent(CONSOLE_CONTENT);
  if (content != null) {
    myViewsContentManager.removeContent(content);
  }
  content=createContent(myConsole.getComponent(),DebuggerBundle.message("debugger.session.tab.console.content.name"),IconLoader.getIcon("/debugger/console.png"),CONSOLE_CONTENT,myConsole.getPreferredFocusableComponent());
  final DefaultActionGroup consoleActions=new DefaultActionGroup();
  addAction(consoleActions,DebuggerActions.EXPORT_THREADS);
  content.setActions(consoleActions,ActionPlaces.DEBUGGER_TOOLBAR);
  Content[] contents=myViewsContentManager.getContents();
  final Content[] selected=myViewsContentManager.getSelectedContents();
  myViewsContentManager.removeAllContents();
  myViewsContentManager.addContent(content);
  for (  Content each : contents) {
    myViewsContentManager.addContent(each);
  }
  for (  Content each : selected) {
    myViewsContentManager.addSelectedContent(each);
  }
  if (myConfiguration instanceof RunConfigurationBase && ((RunConfigurationBase)myConfiguration).needAdditionalConsole()) {
    myManager.initLogConsoles((RunConfigurationBase)myConfiguration,myRunContentDescriptor.getProcessHandler());
  }
  if (myToolBarPanel != null) {
    myContentPanel.remove(myToolBarPanel);
  }
  myFirstToolbar=createFirstToolbar(myRunContentDescriptor,myContentPanel);
  myToolBarPanel=new JPanel(new GridLayout(1,1));
  myToolBarPanel.add(myFirstToolbar.getComponent());
  myContentPanel.add(myToolBarPanel,BorderLayout.WEST);
  return myRunContentDescriptor;
}
