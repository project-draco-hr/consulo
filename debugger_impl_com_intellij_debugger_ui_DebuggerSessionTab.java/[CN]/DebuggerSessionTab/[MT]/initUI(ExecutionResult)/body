{
  myConsole=executionResult.getExecutionConsole();
  myRunContentDescriptor=new RunContentDescriptor(myConsole,executionResult.getProcessHandler(),myUi.getComponent(),getSessionName());
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return myRunContentDescriptor;
  }
  myUi.removeContent(myUi.findContent(DebuggerContentInfo.CONSOLE_CONTENT),true);
  Content console;
  if (myConsole instanceof ExecutionConsoleEx) {
    ((ExecutionConsoleEx)myConsole).buildUi(myUi);
    console=myUi.findContent(DebuggerContentInfo.CONSOLE_CONTENT);
    LOG.assertTrue(console != null,"Console content was not created");
  }
 else {
    console=myUi.createContent(DebuggerContentInfo.CONSOLE_CONTENT,myConsole.getComponent(),XDebuggerBundle.message("debugger.session.tab.console.content.name"),XDebuggerUIConstants.CONSOLE_TAB_ICON,myConsole.getPreferredFocusableComponent());
    console.setCloseable(false);
    myUi.addContent(console,1,PlaceInGrid.bottom,false);
  }
  attachNotificationTo(console);
  if (myConsole != null) {
    Disposer.register(this,myConsole);
  }
  final DefaultActionGroup consoleActions=new DefaultActionGroup();
  if (myConsole instanceof ConsoleView) {
    AnAction[] actions=((ConsoleView)myConsole).createUpDownStacktraceActions();
    for (    AnAction goaction : actions) {
      consoleActions.add(goaction);
    }
  }
  console.setActions(consoleActions,ActionPlaces.DEBUGGER_TOOLBAR,myConsole.getPreferredFocusableComponent());
  if (myConfiguration instanceof RunConfigurationBase && ((RunConfigurationBase)myConfiguration).needAdditionalConsole()) {
    initLogConsoles((RunConfigurationBase)myConfiguration,myRunContentDescriptor.getProcessHandler());
  }
  DefaultActionGroup group=new DefaultActionGroup();
  final Executor executor=DefaultDebugExecutor.getDebugExecutorInstance();
  RestartAction restarAction=new RestartAction(executor,myRunner,myRunContentDescriptor.getProcessHandler(),XDebuggerUIConstants.DEBUG_AGAIN_ICON,myRunContentDescriptor,myEnvironment);
  group.add(restarAction);
  restarAction.registerShortcut(myUi.getComponent());
  addActionToGroup(group,XDebuggerActions.RESUME);
  addActionToGroup(group,XDebuggerActions.PAUSE);
  addActionToGroup(group,IdeActions.ACTION_STOP_PROGRAM);
  group.addSeparator();
  addActionToGroup(group,XDebuggerActions.VIEW_BREAKPOINTS);
  addActionToGroup(group,XDebuggerActions.MUTE_BREAKPOINTS);
  group.addSeparator();
  addAction(group,DebuggerActions.EXPORT_THREADS);
  addAction(group,DebuggerActions.DUMP_THREADS);
  group.addSeparator();
  group.add(myUi.getOptions().getLayoutActions());
  group.addSeparator();
  group.add(new CloseAction(executor,myRunContentDescriptor,getProject()));
  group.add(new ContextHelpAction(executor.getHelpId()));
  myUi.getOptions().setLeftToolbar(group,ActionPlaces.DEBUGGER_TOOLBAR);
  return myRunContentDescriptor;
}
