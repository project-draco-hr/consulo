{
  if (!(file instanceof GroovyFileBase) || editor.getSelectionModel().hasBlockSelection()) {
    return false;
  }
  if (editor.getSelectionModel().hasSelection())   return true;
  int offset=editor.getCaretModel().getOffset();
  if (offset >= editor.getDocument().getTextLength())   offset=editor.getDocument().getTextLength() - 1;
  final PsiElement element=file.findElementAt(offset);
  if (element == null)   return false;
  if (element.getNode().getElementType() == GroovyTokenTypes.mSEMI)   return true;
  final PsiElement next=PsiTreeUtil.nextLeaf(element);
  if (next != null && next.getNode().getElementType() == GroovyTokenTypes.mSEMI)   return true;
  final PsiElement prev=PsiTreeUtil.prevLeaf(element);
  if (prev != null && prev.getNode().getElementType() == GroovyTokenTypes.mSEMI)   return true;
  return false;
}
