{
  String initialName=UsageViewUtil.getShortName(element);
  SuggestedNameInfo info=suggestNamesForElement(element);
  if (info != null) {
    info=JavaCodeStyleManager.getInstance(element.getProject()).suggestUniqueVariableName(info,element,true,true);
  }
  String parameterName=null;
  String superMethodName=null;
  if (nameSuggestionContext != null) {
    final PsiElement nameSuggestionContextParent=nameSuggestionContext.getParent();
    if (nameSuggestionContextParent != null) {
      final PsiElement parentOfParent=nameSuggestionContextParent.getParent();
      if (parentOfParent instanceof PsiExpressionList) {
        final PsiExpressionList expressionList=(PsiExpressionList)parentOfParent;
        final PsiElement parent=expressionList.getParent();
        if (parent instanceof PsiCallExpression) {
          final PsiMethod method=((PsiCallExpression)parent).resolveMethod();
          if (method != null) {
            final PsiParameter[] parameters=method.getParameterList().getParameters();
            final PsiExpression[] expressions=expressionList.getExpressions();
            for (int i=0; i < expressions.length; i++) {
              PsiExpression expression=expressions[i];
              if (expression == nameSuggestionContextParent) {
                if (i < parameters.length) {
                  parameterName=parameters[i].getName();
                }
                break;
              }
            }
          }
        }
      }
 else       if (parentOfParent instanceof PsiParameterList) {
        final PsiElement parent3=parentOfParent.getParent();
        if (parent3 instanceof PsiMethod) {
          final String propName=PropertyUtil.getPropertyName((PsiMethod)parent3);
          if (propName != null) {
            parameterName=propName;
          }
          if (nameSuggestionContextParent instanceof PsiParameter) {
            superMethodName=getSuperMethodName((PsiParameter)nameSuggestionContextParent,(PsiMethod)parent3);
          }
        }
      }
    }
  }
  final String[] strings=info != null ? info.names : ArrayUtil.EMPTY_STRING_ARRAY;
  final ArrayList<String> list=new ArrayList<String>(Arrays.asList(strings));
  final String[] properlyCased=suggestProperlyCasedName(element);
  if (properlyCased != null) {
    Collections.addAll(list,properlyCased);
  }
  if (parameterName != null && !list.contains(parameterName)) {
    list.add(parameterName);
  }
  if (superMethodName != null && !list.contains(superMethodName)) {
    list.add(0,superMethodName);
  }
  if (!list.contains(initialName)) {
    list.add(initialName);
  }
 else {
    int i=list.indexOf(initialName);
    list.remove(i);
    list.add(initialName);
  }
  ContainerUtil.removeDuplicates(list);
  result.addAll(list);
  return info;
}
