{
  PsiType type;
  if (typeElement instanceof PsiTypeElementImpl) {
    type=((PsiTypeElementImpl)typeElement).getDetachedType(context);
  }
 else {
    type=typeElement.getType();
  }
  List<PsiAnnotation[]> allAnnotations=collectAnnotations(anchor);
  for (  PsiAnnotation[] annotations : allAnnotations) {
    type=type.createArrayType(annotations);
  }
  return type;
}
