{
  List<PsiAnnotation[]> annotations=new SmartList<PsiAnnotation[]>();
  List<PsiAnnotation> current=null;
  for (PsiElement child=anchor.getNextSibling(); child != null; child=child.getNextSibling()) {
    if (child instanceof PsiAnnotation) {
      if (current == null)       current=new SmartList<PsiAnnotation>();
      current.add((PsiAnnotation)child);
      continue;
    }
    IElementType i=child.getNode().getElementType();
    if (i == JavaTokenType.LBRACKET) {
      annotations.add(ContainerUtil.toArray(current,PsiAnnotation.ARRAY_FACTORY));
      current=null;
    }
 else     if (i != JavaTokenType.RBRACKET && !ElementType.JAVA_COMMENT_OR_WHITESPACE_BIT_SET.contains(i)) {
      break;
    }
  }
  return annotations;
}
