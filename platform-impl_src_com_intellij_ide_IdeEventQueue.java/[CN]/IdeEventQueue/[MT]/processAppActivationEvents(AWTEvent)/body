{
  final Application app=ApplicationManager.getApplication();
  if (!(app instanceof ApplicationImpl))   return false;
  ApplicationImpl appImpl=(ApplicationImpl)app;
  if (e instanceof WindowEvent) {
    WindowEvent we=(WindowEvent)e;
    if (we.getID() == WindowEvent.WINDOW_GAINED_FOCUS) {
      if (we.getOppositeWindow() == null && !appImpl.isActive()) {
        appImpl.setActive(true);
        return true;
      }
    }
 else     if (we.getID() == WindowEvent.WINDOW_LOST_FOCUS) {
      if (we.getOppositeWindow() == null && appImpl.isActive()) {
        appImpl.setActive(false);
        return true;
      }
    }
  }
  return false;
}
