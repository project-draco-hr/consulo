{
  final int oldEventCount=myEventCount;
  final Set<VirtualFile> copy=ImmutableSet.copyOf(myChangedFiles);
  asyncCheckErrors(copy,new Consumer<Boolean>(){
    @Override public void consume(    Boolean errorsFound){
      if (myEventCount != oldEventCount) {
        return;
      }
      if (errorsFound) {
        return;
      }
      myChangedFiles.clear();
      myConsumer.consume(copy);
    }
  }
);
}
