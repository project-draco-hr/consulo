{
  final VirtualFile[] files;
synchronized (changedFiles) {
    wasRequested=false;
    files=changedFiles.toArray(new VirtualFile[changedFiles.size()]);
    changedFiles.clear();
  }
  final WolfTheProblemSolver problemSolver=WolfTheProblemSolver.getInstance(project);
  for (  VirtualFile file : files) {
    if (problemSolver.hasSyntaxErrors(file)) {
synchronized (changedFiles) {
        Collections.addAll(changedFiles,files);
      }
      return;
    }
  }
  consumer.consume(files);
}
