{
  SystemSettings systemSettings=getSettings();
  L publisher=systemSettings.getPublisher();
  publisher.onBulkChangeStart();
  try {
    List<ProjectSettings> projectSettings=ContainerUtilRt.newArrayList();
    for (    ExternalSystemSettingsControl<ProjectSettings> control : myProjectSettingsControls) {
      ProjectSettings s=newProjectSettings();
      control.apply(s);
      projectSettings.add(s);
    }
    systemSettings.setLinkedProjectsSettings(projectSettings);
    for (    ExternalSystemSettingsControl<ProjectSettings> control : myProjectSettingsControls) {
      if (control instanceof AbstractExternalProjectSettingsControl) {
        AbstractExternalProjectSettingsControl.class.cast(control).updateInitialSettings();
      }
    }
    if (mySystemSettingsControl != null) {
      mySystemSettingsControl.apply(systemSettings);
    }
  }
  finally {
    publisher.onBulkChangeEnd();
  }
}
