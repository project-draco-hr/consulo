{
  int linesWithTabs=stats.getTotalLinesWithLeadingTabs();
  int linesWithWhiteSpaceIndent=stats.getTotalLinesWithLeadingSpaces();
  if (linesWithTabs > linesWithWhiteSpaceIndent) {
    setUseTabs(indentOptions,true);
    indentOptions.INDENT_SIZE=indentOptions.TAB_SIZE;
    indentOptions.CONTINUATION_INDENT_SIZE=indentOptions.TAB_SIZE * 2;
  }
 else   if (linesWithWhiteSpaceIndent > linesWithTabs) {
    setUseTabs(indentOptions,false);
    int newIndentSize=getPositiveIndentSize(stats);
    if (newIndentSize > 0) {
      if (indentOptions.INDENT_SIZE != newIndentSize) {
        indentOptions.INDENT_SIZE=newIndentSize;
        LOG.debug("Detected indent size: " + newIndentSize + " for file "+ myFile);
      }
    }
  }
}
