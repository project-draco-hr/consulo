{
  if (value == null) {
    return "";
  }
  if (value instanceof PsiParenthesizedExpression) {
    final PsiParenthesizedExpression parenthesizedExpression=(PsiParenthesizedExpression)value;
    final PsiExpression expression=parenthesizedExpression.getExpression();
    return getCaseValueText(expression);
  }
  if (!(value instanceof PsiReferenceExpression)) {
    return value.getText();
  }
  final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)value;
  final PsiElement target=referenceExpression.resolve();
  final String text=referenceExpression.getText();
  if (!(target instanceof PsiEnumConstant)) {
    return value.getText();
  }
  final PsiEnumConstant enumConstant=(PsiEnumConstant)target;
  final PsiClass aClass=enumConstant.getContainingClass();
  if (aClass == null) {
    return value.getText();
  }
  final String name=aClass.getQualifiedName();
  return name + '.' + text;
}
