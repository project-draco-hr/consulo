{
  if (!commitCurrentStep())   return;
  super.doOKAction();
  CompilerManager.getInstance(myProject).make(myCompileScope,new CompileStatusNotification(){
    public void finished(    boolean aborted,    int errors,    int warnings,    CompileContext compileContext){
      if (aborted || errors != 0) {
        return;
      }
      final String title=AndroidBundle.message("android.extract.package.task.title");
      ProgressManager.getInstance().run(new Task.Backgroundable(myProject,title,true,null){
        public void run(        @NotNull ProgressIndicator indicator){
          createAndAlignApk(myApkPath);
        }
      }
);
    }
  }
);
}
