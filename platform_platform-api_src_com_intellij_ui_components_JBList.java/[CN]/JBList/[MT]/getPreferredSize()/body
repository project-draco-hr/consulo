{
  if (getModel().getSize() == 0 && !StringUtil.isEmpty(getEmptyText().getText())) {
    Dimension s=getEmptyText().getPreferredSize();
    Insets insets=getInsets();
    if (insets != null) {
      s.width+=(insets.left + insets.right);
      s.height+=(insets.top + insets.bottom);
    }
    Dimension viewportSize=getPreferredScrollableViewportSize();
    return new Dimension(Math.max(s.width,viewportSize.width),Math.max(s.height,viewportSize.height));
  }
 else {
    return super.getPreferredSize();
  }
}
