{
  final PsiElementFactory factory=JavaPsiFacade.getInstance(codeBlock.getProject()).getElementFactory();
  final PsiExpressionStatement statement=(PsiExpressionStatement)factory.createStatementFromText(field.getName() + " = y;",codeBlock);
  PsiExpression initializer=field.getInitializer();
  if (initializer instanceof PsiArrayInitializerExpression) {
    initializer=arrayInitializerToNewExpression((PsiArrayInitializerExpression)initializer,factory,codeBlock);
  }
  final PsiAssignmentExpression expression=(PsiAssignmentExpression)statement.getExpression();
  expression.getRExpression().replace(initializer);
  final PsiElement newStatement=codeBlock.addBefore(statement,findFirstFieldUsage(codeBlock.getStatements(),field));
  replaceWithQualifiedReferences(newStatement,newStatement,factory);
  return (PsiExpressionStatement)newStatement;
}
