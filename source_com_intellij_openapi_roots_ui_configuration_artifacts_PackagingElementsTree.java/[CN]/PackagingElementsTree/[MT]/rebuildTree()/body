{
  ArtifactsTreeState state=ArtifactsTreeState.saveState(myTree);
  myRoot=new PackagingElementNode(myArtifactsEditor.getArtifact().getRootElement(),myContext);
  myTreeModel.setRoot(myRoot);
  addNodes(myRoot,myArtifactsEditor.getArtifact().getRootElement().getChildren());
  TreeUtil.sort(myTreeModel,new Comparator<PackagingElementNode>(){
    public int compare(    final PackagingElementNode node1,    final PackagingElementNode node2){
      double weight1=node1.getPresentation().getWeight();
      double weight2=node2.getPresentation().getWeight();
      if (weight1 < weight2)       return -1;
      if (weight1 > weight2)       return 1;
      return node1.getPresentation().getPresentableName().compareToIgnoreCase(node2.getPresentation().getPresentableName());
    }
  }
);
  state.restoreState(myTree);
  updatePropertiesPanel();
}
