{
  if (!canRead(file)) {
    return null;
  }
  try {
    Element element;
    try {
      element=JDOMUtil.load(file.getInputStream());
    }
 catch (    JDOMException e) {
      try {
        File initialIOFile=new File(myIoDir,file.getName());
        if (initialIOFile.isFile()) {
          FileUtil.copy(initialIOFile,new File(myIoDir,file.getName() + ".copy"));
        }
      }
 catch (      IOException e1) {
        LOG.info(e1);
      }
      LOG.info("Error reading file " + file.getPath() + ": "+ e.getMessage());
      throw e;
    }
    E scheme=readScheme(element,filter);
    if (scheme != null) {
      loadScheme(scheme,forceAdd,file.getNameSequence());
      return scheme;
    }
  }
 catch (  final Exception e) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        String msg="Cannot read scheme " + file.getName() + "  from '"+ myFileSpec+ "': "+ e.getLocalizedMessage();
        LOG.info(msg,e);
        Messages.showErrorDialog(msg,"Load Settings");
      }
    }
);
  }
  return null;
}
