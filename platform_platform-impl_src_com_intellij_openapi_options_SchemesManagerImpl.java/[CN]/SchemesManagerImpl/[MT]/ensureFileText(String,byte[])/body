{
  final IOException[] ex=new IOException[]{null};
  final VirtualFile _file=ApplicationManager.getApplication().runWriteAction(new Computable<VirtualFile>(){
    @Override public VirtualFile compute(){
      VirtualFile file=myVFSBaseDir.findChild(fileName);
      try {
        if (file == null)         file=myVFSBaseDir.createChildData(SchemesManagerImpl.this,fileName);
        if (!Arrays.equals(file.contentsToByteArray(),text)) {
          file.setBinaryContent(text);
        }
      }
 catch (      IOException e) {
        ex[0]=e;
      }
      return file;
    }
  }
);
  if (ex[0] != null)   throw ex[0];
  return _file;
}
