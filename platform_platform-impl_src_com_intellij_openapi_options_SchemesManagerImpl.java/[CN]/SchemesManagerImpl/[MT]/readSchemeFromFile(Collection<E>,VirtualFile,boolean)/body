{
  if (canRead(file)) {
    try {
      final Document document;
      try {
        document=JDOMUtil.loadDocument(file.getInputStream());
      }
 catch (      JDOMException e) {
        try {
          File initialIOFile=new File(myBaseDir,file.getName());
          if (initialIOFile.isFile()) {
            FileUtil.copy(initialIOFile,new File(myBaseDir,file.getName() + ".copy"));
          }
        }
 catch (        IOException e1) {
          LOG.info(e1);
        }
        LOG.info("Error reading file " + file.getPath() + ": "+ e.getLocalizedMessage());
        throw e;
      }
      final E scheme=readScheme(document);
      if (scheme != null) {
        if (scheme.getName() == null) {
          String suggestedName=FileUtil.getNameWithoutExtension(file.getName());
          if (!"_".equals(suggestedName)) {
            scheme.setName(suggestedName);
          }
        }
        loadScheme(scheme,forceAdd,file.getName());
        result.add(scheme);
      }
    }
 catch (    final Exception e) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          String msg="Cannot read scheme " + file.getName() + "  from '"+ myFileSpec+ "': "+ e.getLocalizedMessage();
          LOG.info(msg,e);
          Messages.showErrorDialog(msg,"Load Settings");
        }
      }
);
    }
  }
}
