{
  String fileNameWithoutExtension=createFileName(fileName);
  if (!forceAdd && myFilesToDelete.contains(fileNameWithoutExtension)) {
    return;
  }
  T existing=findSchemeByName(scheme.getName());
  if (existing != null) {
    if (!Comparing.equal(existing.getClass(),scheme.getClass())) {
      LOG.warn("'" + scheme.getName() + "' "+ existing.getClass().getSimpleName()+ " replaced with "+ scheme.getClass().getSimpleName());
    }
    mySchemes.remove(existing);
    if (isExternalizable(existing)) {
      myProcessor.onSchemeDeleted((E)existing);
    }
  }
  addNewScheme((T)scheme,true);
  scheme.getExternalInfo().setPreviouslySavedName(scheme.getName());
  scheme.getExternalInfo().setCurrentFileName(fileNameWithoutExtension);
}
