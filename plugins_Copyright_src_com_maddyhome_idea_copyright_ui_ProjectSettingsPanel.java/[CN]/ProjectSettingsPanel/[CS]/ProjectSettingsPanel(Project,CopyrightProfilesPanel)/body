{
  myProject=project;
  myProfilesModel=profilesModel;
  myProfilesModel.addItemsChangeListener(new Runnable(){
    public void run(){
      final Object selectedItem=myProfilesComboBox.getSelectedItem();
      fillCopyrightProfiles();
      myProfilesComboBox.setSelectedItem(selectedItem);
      final ArrayList<ScopeSetting> toRemove=new ArrayList<ScopeSetting>();
      for (      ScopeSetting setting : myScopeMappingModel.getItems()) {
        if (setting.getProfile() == null) {
          toRemove.add(setting);
        }
      }
      for (      ScopeSetting setting : toRemove) {
        myScopeMappingModel.removeRow(myScopeMappingModel.indexOf(setting));
      }
      updateButtons();
    }
  }
);
  myManager=CopyrightManager.getInstance(project);
  myScopeMappingModel=new ListTableModel<ScopeSetting>(new ColumnInfo[]{SCOPE,SETTING},new ArrayList<ScopeSetting>(),0);
  myScopeMappingTable=new TableView<ScopeSetting>(myScopeMappingModel);
  fillCopyrightProfiles();
  myProfilesComboBox.setRenderer(new DefaultListCellRenderer(){
    public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      final Component rendererComponent=super.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      if (value == null) {
        setText("No copyright");
      }
 else {
        setText(((CopyrightProfile)value).getName());
      }
      return rendererComponent;
    }
  }
);
  myScopeMappingTable.setRowHeight(myProfilesComboBox.getPreferredSize().height);
  myScopeMappingTable.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    final ListSelectionEvent e){
      updateButtons();
    }
  }
);
  initPanel();
  myScopesLink.setVisible(!myProject.isDefault());
  myScopesLink.setHyperlinkText("Select Scopes to add new scopes or modify existing ones");
  myScopesLink.addHyperlinkListener(new HyperlinkListener(){
    public void hyperlinkUpdate(    final HyperlinkEvent e){
      if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        final OptionsEditor optionsEditor=OptionsEditor.KEY.getData(DataManager.getInstance().getDataContext());
        if (optionsEditor != null) {
          optionsEditor.select(ScopeChooserConfigurable.getInstance(myProject));
        }
      }
    }
  }
);
}
