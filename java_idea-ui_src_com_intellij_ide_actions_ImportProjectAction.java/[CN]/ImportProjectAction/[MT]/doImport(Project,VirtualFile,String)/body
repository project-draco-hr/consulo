{
  ProjectImportProvider[] providers=ProjectImportProvider.PROJECT_IMPORT_PROVIDER.getExtensions();
  List<ProjectImportProvider> available=ContainerUtil.filter(providers,new Condition<ProjectImportProvider>(){
    @Override public boolean value(    ProjectImportProvider provider){
      return provider.canImport(file,project);
    }
  }
);
  if (available.isEmpty()) {
    Messages.showInfoMessage(project,"Cannot import anything from " + file.getPath(),"Cannot Import");
    return Collections.emptyList();
  }
  AddModuleWizard wizard=new AddModuleWizard(wizardTitle,project,file.getPath(),available.toArray(new ProjectImportProvider[available.size()]));
  if (wizard.getStepCount() > 0) {
    if (wizard.showAndGet()) {
      Module module=new NewModuleAction().createModuleFromWizard(project,null,wizard);
      return Collections.singletonList(module);
    }
    return Collections.emptyList();
  }
 else {
    ProjectImportBuilder builder=available.get(0).getBuilder();
    builder.setFileToImport(file.getPath());
    return builder.commit(project);
  }
}
