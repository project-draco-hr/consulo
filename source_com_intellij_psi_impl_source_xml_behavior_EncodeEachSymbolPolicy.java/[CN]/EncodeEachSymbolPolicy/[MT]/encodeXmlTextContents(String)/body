{
  if (!toCode(displayText))   return super.encodeXmlTextContents(displayText);
  final FileElement dummyParent=new DummyHolder(null,null).getTreeElement();
  int sectionStartOffset=0;
  int offset=0;
  while (offset < displayText.length()) {
    if (toCode(displayText.charAt(offset))) {
      final String plainSection=displayText.substring(sectionStartOffset,offset);
      if (plainSection.length() > 0) {
        TreeUtil.addChildren(dummyParent,(TreeElement)super.encodeXmlTextContents(plainSection));
      }
      TreeUtil.addChildren(dummyParent,createCharEntity(displayText.charAt(offset),dummyParent.getCharTable()));
    }
  }
  return dummyParent.getFirstChildNode();
}
