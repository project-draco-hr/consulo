{
  super.setModel(myListModel);
  myTreeModel=treeModel;
  myTreeModel.addTreeModelListener(this);
  Object root=myTreeModel.getRoot();
  if (root instanceof TreeNode) {
    TreeNode node=(TreeNode)root;
    myListModel.addElement(node);
    if (myTreeModel instanceof DefaultTreeModel && ((DefaultTreeModel)myTreeModel).asksAllowsChildren() && node.getAllowsChildren()) {
      Enumeration enumeration=node.children();
      while (enumeration.hasMoreElements()) {
        Object object=enumeration.nextElement();
        myListModel.addElement(object);
      }
    }
  }
}
