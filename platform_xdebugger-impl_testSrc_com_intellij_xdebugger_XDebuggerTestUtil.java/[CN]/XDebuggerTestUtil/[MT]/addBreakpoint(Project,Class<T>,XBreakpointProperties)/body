{
  final XBreakpointManager breakpointManager=XDebuggerManager.getInstance(project).getBreakpointManager();
  XBreakpointType[] types=XBreakpointUtil.getBreakpointTypes();
  final Ref<XBreakpoint> breakpoint=Ref.create(null);
  for (  XBreakpointType type : types) {
    if (exceptionType.isInstance(type)) {
      final T breakpointType=exceptionType.cast(type);
      new WriteAction(){
        @Override protected void run(        Result result) throws Throwable {
          breakpoint.set(breakpointManager.addBreakpoint(breakpointType,properties));
        }
      }
.execute();
      break;
    }
  }
  return breakpoint.get();
}
