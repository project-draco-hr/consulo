{
  final Sdk selectedSdk=mySdkComboBoxWithBrowseButton.getSelectedSdk();
  String[] newAvds=ArrayUtil.EMPTY_STRING_ARRAY;
  if (selectedSdk != null && selectedSdk.getSdkType() instanceof AndroidSdkType) {
    final AndroidSdkAdditionalData sdkAdditionalData=(AndroidSdkAdditionalData)selectedSdk.getSdkAdditionalData();
    if (sdkAdditionalData != null) {
      final AndroidPlatform androidPlatform=sdkAdditionalData.getAndroidPlatform();
      if (androidPlatform != null) {
        newAvds=getAvds(androidPlatform);
      }
    }
  }
  if (!Arrays.equals(myOldAvds,newAvds)) {
    myOldAvds=newAvds;
    final JComboBox combo=myAvdCombo.getComboBox();
    final Object selected=combo.getSelectedItem();
    combo.setModel(new DefaultComboBoxModel(newAvds));
    combo.setSelectedItem(selected);
  }
}
