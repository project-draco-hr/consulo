def _abssource(repo, push=False):
    if hasattr(repo, '_subparent'):
        source = repo._subsource
        if (source.startswith('/') or ('://' in source)):
            return source
        parent = _abssource(repo._subparent, push)
        if ('://' in parent):
            if (parent[(-1)] == '/'):
                parent = parent[:(-1)]
            return ((parent + '/') + source)
        return os.path.join(parent, repo._subsource)
    if (push and repo.ui.config('paths', 'default-push')):
        return repo.ui.config('paths', 'default-push', repo.root)
    return repo.ui.config('paths', 'default', repo.root)
