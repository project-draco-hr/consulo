def _get(self, state):
    (source, revision, kind) = state
    try:
        self._repo.lookup(revision)
    except error.RepoError:
        self._repo._subsource = source
        self._repo.ui.status((_('pulling subrepo %s\n') % self._path))
        srcurl = _abssource(self._repo)
        other = hg.repository(self._repo.ui, srcurl)
        self._repo.pull(other)
