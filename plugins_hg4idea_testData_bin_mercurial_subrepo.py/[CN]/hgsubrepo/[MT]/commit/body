def commit(self, text, user, date):
    self._repo.ui.debug(('committing subrepo %s\n' % self._path))
    n = self._repo.commit(text, user, date)
    if (not n):
        return self._repo['.'].hex()
    return node.hex(n)
