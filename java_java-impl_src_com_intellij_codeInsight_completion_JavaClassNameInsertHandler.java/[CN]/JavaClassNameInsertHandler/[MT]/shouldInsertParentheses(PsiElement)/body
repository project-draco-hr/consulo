{
  final PsiJavaCodeReferenceElement ref=PsiTreeUtil.getParentOfType(position,PsiJavaCodeReferenceElement.class);
  if (ref == null) {
    return false;
  }
  final PsiReferenceParameterList parameterList=ref.getParameterList();
  if (parameterList != null && parameterList.getTextLength() > 0) {
    return false;
  }
  final PsiElement prevElement=FilterPositionUtil.searchNonSpaceNonCommentBack(ref);
  if (prevElement != null && prevElement.getParent() instanceof PsiNewExpression) {
    for (    ExpectedTypeInfo info : ExpectedTypesProvider.getExpectedTypes((PsiExpression)prevElement.getParent(),true)) {
      if (info.getType() instanceof PsiArrayType) {
        return false;
      }
    }
    return true;
  }
  return false;
}
