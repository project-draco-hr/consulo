{
  context.setAddCompletionChar(false);
  Editor editor=context.getEditor();
  PsiFile file=context.getFile();
  int endOffset=editor.getCaretModel().getOffset();
  if (file.getLanguage() == StdLanguages.JAVA) {
    if (PsiTreeUtil.findElementOfClassAtOffset(file,endOffset - 1,PsiImportStatementBase.class,false) != null) {
      return AllClassesGetter.ClassNameInsertHandlerResult.INSERT_FQN;
    }
 else {
      JavaPsiClassReferenceElement.JAVA_CLASS_INSERT_HANDLER.handleInsert(context,item);
    }
  }
  return AllClassesGetter.ClassNameInsertHandlerResult.CHECK_FOR_CORRECT_REFERENCE;
}
