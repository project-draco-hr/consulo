{
  final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (aPackage != null) {
    final String qualifiedName=aPackage.getQualifiedName();
    if (qualifiedName.length() > 0)     return qualifiedName;
    if (presentable) {
      return PsiBundle.message("default.package.presentation") + " (" + directory.getVirtualFile().getPresentableUrl()+ ")";
    }
    return "";
  }
  return presentable ? ProjectUtil.getLocationRelativeToUserHome(directory.getVirtualFile().getPresentableUrl()) : "";
}
