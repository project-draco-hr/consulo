{
  if (!event.isFromRefresh()) {
    return;
  }
  final VirtualFile file=event.getFile();
  if (SvnUtil.SVN_ADMIN_DIR_NAME.equals(file.getName())) {
    if (event.getParent() != null) {
      VirtualFile parent=event.getParent();
      fireFileStatusesChanged(parent);
      fileEntriesChanged(parent);
    }
    return;
  }
  final AbstractVcs vcsFor=myVcsManager.getVcsFor(file);
  if (vcsFor == null)   return;
  if (SvnVcs.VCS_NAME.equals(vcsFor.getName())) {
    final RootUrlInfo path=((SvnVcs)vcsFor).getSvnFileUrlMapping().getWcRootForFilePath(new File(file.getPath()));
    if (path != null && WorkingCopyFormat.ONE_DOT_SEVEN.equals(path.getFormat())) {
      VcsDirtyScopeManager.getInstance(myProject).filesDirty(Collections.singletonList(file),null);
    }
  }
}
