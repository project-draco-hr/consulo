{
  if (!event.isFromRefresh()) {
    return;
  }
  final VirtualFile file=event.getFile();
  if (isWcDbFile(file) && SvnVcs.ourListenToWcDb) {
    LOG.debug("wc.db had changed");
    final VirtualFile parentWcDb=file.getParent();
    if (parentWcDb != null && SvnUtil.isAdminDirectory(parentWcDb)) {
      final VirtualFile parent=parentWcDb.getParent();
      if (parent != null) {
        myDirtyScopeManager.dirDirtyRecursively(parent);
        refreshAnnotationsUnder(parent);
      }
    }
    return;
  }
  if (isEntriesFile(file) && file.getParent() != null) {
    VirtualFile parent=file.getParent();
    if (parent != null) {
      VirtualFile grandParent=parent.getParent();
      if (grandParent != null) {
        fireFileStatusesChanged(grandParent);
        refreshAnnotationsUnder(grandParent);
      }
    }
  }
}
