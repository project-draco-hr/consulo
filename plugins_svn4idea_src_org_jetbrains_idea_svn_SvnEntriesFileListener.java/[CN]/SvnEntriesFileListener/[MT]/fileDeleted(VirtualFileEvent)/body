{
  if (!event.isFromRefresh()) {
    return;
  }
  final VirtualFile file=event.getFile();
  if (SvnUtil.SVN_ADMIN_DIR_NAME.equals(file.getName())) {
    if (event.getParent() != null) {
      VirtualFile parent=event.getParent();
      fireFileStatusesChanged(parent);
      fileEntriesChanged(parent);
    }
    return;
  }
  if (event.getParent() != null) {
    final VirtualFile parent=event.getParent();
    final AbstractVcs vcsFor=myVcsManager.getVcsFor(parent);
    if (vcsFor == null)     return;
    if (SvnVcs.VCS_NAME.equals(vcsFor.getName())) {
      final RootUrlInfo path=((SvnVcs)vcsFor).getSvnFileUrlMapping().getWcRootForFilePath(new File(parent.getPath()));
      if (path != null && WorkingCopyFormat.ONE_DOT_SEVEN.equals(path.getFormat())) {
        myDirtyScopeManager.filePathsDirty(Collections.<FilePath>singletonList(new FilePathImpl(new File(file.getPath()),file.isDirectory())),null);
      }
    }
  }
}
