{
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          try {
            final GrIntroduceParameterHandler hackedHandler=new GrIntroduceParameterHandler(){
              @Override protected GrIntroduceDialog<GrIntroduceParameterSettings> getDialog(              final GrIntroduceContext context){
                final GrIntroduceParameterSettings hackedSettings=getSettings(context,removeUnusedParameters,replaceFieldsWithGetters,declareFinal);
                return new GrIntroduceDialog<GrIntroduceParameterSettings>(){
                  @Override public GrIntroduceParameterSettings getSettings(){
                    return null;
                  }
                  @Override public void show(){
                    new GrIntroduceParameterProcessor(hackedSettings,(GrIntroduceParameterContext)context).run();
                  }
                  @Override public boolean isOK(){
                    return false;
                  }
                }
;
              }
            }
;
            hackedHandler.invoke(myFixture.getProject(),myFixture.getEditor(),myFixture.getFile(),null);
            if (conflicts != null)             fail("Conflicts were expected");
          }
 catch (          Exception e) {
            if (conflicts == null) {
              e.printStackTrace();
              fail("Conflicts were not expected");
            }
            assertEquals(conflicts,e.getMessage());
          }
        }
      }
);
    }
  }
,"introduce Parameter",null);
}
