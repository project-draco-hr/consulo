{
  myRoot=root;
  myVcs=vcs;
  myIsNested=FilePathUtil.isNested(roots,myRoot);
  myURLText.setEditable(true);
  myURLText.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      chooseUrl();
    }
  }
);
  myBranchField.setEditable(false);
  myBranchField.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      chooseBranch();
    }
  }
);
  myBranchLabel.setLabelFor(myBranchField);
  myUrlLabel.setLabelFor(myURLText);
  myUpdateToSpecificUrl.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (myUpdateToSpecificUrl.isSelected()) {
        myURLText.setEnabled(true);
        myBranchField.setEnabled(mySourceUrl != null);
      }
 else {
        myURLText.setEnabled(false);
        myBranchField.setEnabled(false);
      }
    }
  }
);
  myRevisionBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (e.getSource() == myRevisionBox) {
        myRevisionText.setEnabled(myRevisionBox.isSelected());
        if (myRevisionBox.isSelected()) {
          if ("".equals(myRevisionText.getText().trim())) {
            myRevisionText.setText("HEAD");
          }
          myRevisionText.getTextField().selectAll();
          myRevisionText.requestFocus();
        }
      }
    }
  }
);
  myRevisionText.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final Project project=vcs.getProject();
      final SvnRepositoryLocation location=new SvnRepositoryLocation(myURLText.getText());
      final SvnChangeList repositoryVersion=SvnSelectRevisionUtil.chooseCommittedChangeList(project,location,myRoot.getVirtualFile());
      if (repositoryVersion != null) {
        myRevisionText.setText(String.valueOf(repositoryVersion.getNumber()));
      }
    }
  }
);
  myRevisionText.setText(SVNRevision.HEAD.toString());
  myRevisionText.getTextField().selectAll();
  myRevisionText.setEnabled(myRevisionBox.isSelected());
  myURLText.setEnabled(myUpdateToSpecificUrl.isSelected());
  myBranchField.setEnabled(myUpdateToSpecificUrl.isSelected() && (mySourceUrl != null));
  final boolean revisionCanBeSpecifiedForRoot=(!myIsNested) || isRevisionCanBeSpecifiedForRoot();
  myRevisionBox.setEnabled(revisionCanBeSpecifiedForRoot);
  myRevisionText.setEnabled(revisionCanBeSpecifiedForRoot);
  myCopyType.setVisible(!revisionCanBeSpecifiedForRoot);
  myCopyType.setFont(myCopyType.getFont().deriveFont(Font.ITALIC));
  myUpdateToSpecificUrl.setEnabled(revisionCanBeSpecifiedForRoot);
}
