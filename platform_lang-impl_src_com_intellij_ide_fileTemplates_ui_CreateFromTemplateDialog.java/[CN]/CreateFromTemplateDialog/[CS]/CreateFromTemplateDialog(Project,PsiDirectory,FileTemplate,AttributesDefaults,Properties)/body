{
  super(project,true);
  myDirectory=directory;
  myProject=project;
  myTemplate=template;
  setTitle(IdeBundle.message("title.new.from.template",template.getName()));
  myDefaultProperties=defaultProperties == null ? FileTemplateManager.getInstance().getDefaultProperties() : defaultProperties;
  FileTemplateUtil.fillDefaultProperties(myDefaultProperties,directory);
  String[] unsetAttributes=null;
  try {
    unsetAttributes=myTemplate.getUnsetAttributes(myDefaultProperties);
  }
 catch (  ParseException e) {
    showErrorDialog(e);
  }
  if (unsetAttributes != null) {
    myAttrPanel=new CreateFromTemplatePanel(unsetAttributes,!myTemplate.isTemplateOfType(StdFileTypes.JAVA),attributesDefaults);
    myAttrComponent=myAttrPanel.getComponent();
    init();
  }
 else {
    myAttrPanel=null;
    myAttrComponent=null;
  }
}
