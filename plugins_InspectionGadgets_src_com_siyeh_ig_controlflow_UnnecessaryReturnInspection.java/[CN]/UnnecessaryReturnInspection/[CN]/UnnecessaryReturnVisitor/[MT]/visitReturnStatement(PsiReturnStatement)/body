{
  super.visitReturnStatement(statement);
  if (JspPsiUtil.isInJspFile(statement.getContainingFile())) {
    return;
  }
  if (statement.getReturnValue() != null) {
    return;
  }
  final PsiElement methodParent=PsiTreeUtil.getParentOfType(statement,PsiMethod.class,PsiLambdaExpression.class);
  PsiCodeBlock codeBlock=null;
  if (methodParent instanceof PsiMethod) {
    codeBlock=((PsiMethod)methodParent).getBody();
  }
 else   if (methodParent instanceof PsiLambdaExpression) {
    final PsiElement lambdaBody=((PsiLambdaExpression)methodParent).getBody();
    if (lambdaBody instanceof PsiCodeBlock) {
      codeBlock=(PsiCodeBlock)lambdaBody;
    }
  }
  if (codeBlock == null) {
    return;
  }
  if (!ControlFlowUtils.blockCompletesWithStatement(codeBlock,statement)) {
    return;
  }
  if (ignoreInThenBranch && isInThenBranch(statement,statement.getParent())) {
    return;
  }
  registerStatementError(statement);
}
