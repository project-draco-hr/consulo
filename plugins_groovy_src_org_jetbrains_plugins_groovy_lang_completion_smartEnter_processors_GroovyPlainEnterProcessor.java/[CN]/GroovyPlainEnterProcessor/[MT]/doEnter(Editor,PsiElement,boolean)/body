{
  GrCodeBlock block=getControlStatementBlock(editor.getCaretModel().getOffset(),psiElement);
  if (block != null) {
    PsiElement firstElement=block.getFirstChild().getNextSibling();
    final int offset=firstElement != null ? firstElement.getTextRange().getStartOffset() - 1 : block.getTextRange().getEndOffset();
    editor.getCaretModel().moveToOffset(offset);
  }
  final EditorActionHandler endterHandler=EditorActionManager.getInstance().getActionHandler(IdeActions.ACTION_EDITOR_START_NEW_LINE);
  endterHandler.execute(editor,((EditorEx)editor).getDataContext());
  return true;
}
