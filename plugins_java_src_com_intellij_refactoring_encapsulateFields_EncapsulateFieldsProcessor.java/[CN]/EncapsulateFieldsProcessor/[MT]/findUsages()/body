{
  ArrayList<EncapsulateFieldUsageInfo> array=ContainerUtil.newArrayList();
  for (  FieldDescriptor fieldDescriptor : myFieldDescriptors) {
    for (    final PsiReference reference : ReferencesSearch.search(fieldDescriptor.getField())) {
      final PsiElement element=reference.getElement();
      if (element == null)       continue;
      final EncapsulateFieldHelper helper=EncapsulateFieldHelper.getHelper(element.getLanguage());
      EncapsulateFieldUsageInfo usageInfo=helper.createUsage(myDescriptor,fieldDescriptor,reference);
      if (usageInfo != null) {
        array.add(usageInfo);
      }
    }
  }
  EncapsulateFieldUsageInfo[] usageInfos=array.toArray(new EncapsulateFieldUsageInfo[array.size()]);
  return UsageViewUtil.removeDuplicatedUsages(usageInfos);
}
