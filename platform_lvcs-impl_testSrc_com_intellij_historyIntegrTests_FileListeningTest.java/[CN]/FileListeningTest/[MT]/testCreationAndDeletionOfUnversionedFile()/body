{
  addExcludedDir(myRoot.getPath() + "/dir");
  Module m=createModule("foo");
  addContentRoot(m,myRoot.getPath() + "/dir/subDir");
  createFileExternally("dir/subDir/file.txt");
  LocalFileSystem.getInstance().refresh(false);
  FileUtil.delete(new File(myRoot.getPath() + "/dir"));
  LocalFileSystem.getInstance().refresh(false);
  createFileExternally("dir/subDir/file.txt");
  LocalFileSystem.getInstance().refresh(false);
  List<Revision> revs=getRevisionsFor(myRoot);
  assertEquals(4,revs.size());
  assertNotNull(revs.get(0).getEntry().findEntry("dir/subDir/file.txt"));
  assertNull(revs.get(1).getEntry().findEntry("dir/subDir/file.txt"));
  assertNotNull(revs.get(2).getEntry().findEntry("dir/subDir/file.txt"));
  assertNull(revs.get(3).getEntry().findEntry("dir/subDir/file.txt"));
}
