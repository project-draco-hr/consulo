{
  addExcludedDir(myRoot.getPath() + "/dir/subdir");
  addContentRoot(createModule("foo"),myRoot.getPath() + "/dir/subdir/subdir2");
  String dir1=createDirectoryExternally("dir");
  String f1=createFileExternally("dir/f.txt");
  createFileExternally("dir/f.class");
  createFileExternally("dir/subdir/f.txt");
  String dir2=createDirectoryExternally("dir/subdir/subdir2");
  String f2=createFileExternally("dir/subdir/subdir2/f.txt");
  LocalFileSystem.getInstance().refresh(false);
  List<Change> changes=getVcs().getChangeListInTests().getChangesInTests().get(0).getChanges();
  assertEquals(4,changes.size());
  assertEquals(dir1,((StructuralChange)changes.get(0)).getPath());
  assertEquals(dir2,((StructuralChange)changes.get(1)).getPath());
  assertEquals(f2,((StructuralChange)changes.get(2)).getPath());
  assertEquals(f1,((StructuralChange)changes.get(3)).getPath());
}
