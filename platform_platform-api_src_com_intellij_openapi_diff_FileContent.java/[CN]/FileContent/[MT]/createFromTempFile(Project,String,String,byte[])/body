{
  File tempFile=FileUtil.createTempFile(name,"." + ext);
  if (content.length != 0) {
    FileUtil.writeToFile(tempFile,content);
  }
  tempFile.deleteOnExit();
  final LocalFileSystem lfs=LocalFileSystem.getInstance();
  VirtualFile file=lfs.findFileByIoFile(tempFile);
  if (file == null) {
    file=lfs.refreshAndFindFileByIoFile(tempFile);
  }
  if (file != null) {
    final FileContent fileContent=new FileContent(project,file);
    fileContent.myType=detectType(file);
    return fileContent;
  }
  throw new IOException("Can not create temp file for revision content");
}
