{
  forEveryKey(new PairFunction<JTextField,Pair<String,String>,Boolean>(){
    @Override public Boolean fun(    JTextField field,    Pair<String,String> pair){
      if (field.hasFocus()) {
        final String key=pair.getFirst();
        if ("hex".equals(key)) {
          Color color=null;
          final String str=pair.getSecond();
          if (str.length() == 3) {
            color=new Color(17 * Integer.valueOf(String.valueOf(str.charAt(0)),16).intValue(),17 * Integer.valueOf(String.valueOf(str.charAt(1)),16).intValue(),17 * Integer.valueOf(String.valueOf(str.charAt(2)),16).intValue());
          }
 else           if (str.length() == 6) {
            color=Color.decode("0x" + str);
          }
          if (color != null) {
            updatePreview(color,false);
          }
        }
 else {
          final Color color=gatherRGB();
          if (color != null) {
            updatePreview(color,false);
          }
        }
        return true;
      }
      return false;
    }
  }
,this,new Function<String,Boolean>(){
    @Override public Boolean fun(    String s){
      return true;
    }
  }
);
}
