{
  final Dimension size=getSize();
  int _size=Math.min(size.width,size.height);
  _size=Math.min(_size,600);
  if (myImage != null && myShouldInvalidate) {
    if (myImage.getWidth(null) != _size) {
      myImage=null;
    }
  }
  myShouldInvalidate=false;
  if (myImage == null) {
    myImage=createImage(new ColorWheelImageProducer(_size - BORDER_SIZE * 2,_size - BORDER_SIZE * 2,myBrightness));
    myWheel=new Rectangle(BORDER_SIZE,BORDER_SIZE,_size - BORDER_SIZE * 2,_size - BORDER_SIZE * 2);
  }
  _g.setColor(UIManager.getColor("Panel.background"));
  _g.fillRect(0,0,getWidth(),getHeight());
  _g.drawImage(myImage,myWheel.x,myWheel.y,null);
  int midx=myWheel.x + myWheel.width / 2;
  int midy=myWheel.y + myWheel.height / 2;
  _g.setColor(Color.white);
  int arcw=(int)(myWheel.width * mySaturation / 2);
  int arch=(int)(myWheel.height * mySaturation / 2);
  double th=myHue * 2 * Math.PI;
  final int x=(int)(midx + arcw * Math.cos(th));
  final int y=(int)(midy - arch * Math.sin(th));
  _g.fillRect(x - 2,y - 2,4,4);
  _g.setColor(Color.BLACK);
  _g.drawRect(x - 2,y - 2,4,4);
}
