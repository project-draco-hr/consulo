{
  if (type instanceof PsiClassType) {
    PsiClass aClass=((PsiClassType)type).resolve();
    if (aClass == null) {
      return null;
    }
    if (aClass instanceof PsiAnonymousClass) {
      PsiClass baseClass=((PsiAnonymousClass)aClass).getBaseClassType().resolve();
      if (baseClass == null) {
        return null;
      }
      return baseClass.getQualifiedName();
    }
    return aClass.getQualifiedName();
  }
 else {
    if (type instanceof PsiArrayType) {
      return getLongTypeName(((PsiArrayType)type).getComponentType()) + "[]";
    }
 else {
      if (type instanceof PsiPrimitiveType) {
        return type.getPresentableText();
      }
 else {
        if (type instanceof PsiWildcardType) {
          final PsiType bound=((PsiWildcardType)type).getBound();
          if (bound != null) {
            return getLongTypeName(bound);
          }
 else {
            return CommonClassNames.JAVA_LANG_OBJECT;
          }
        }
 else {
          if (type instanceof PsiCapturedWildcardType) {
            final PsiType bound=((PsiCapturedWildcardType)type).getWildcard().getBound();
            if (bound != null) {
              return getLongTypeName(bound);
            }
 else {
              return CommonClassNames.JAVA_LANG_OBJECT;
            }
          }
 else {
            if (type instanceof PsiIntersectionType) {
              return getLongTypeName(((PsiIntersectionType)type).getRepresentative());
            }
 else {
              if (type instanceof PsiDisjunctionType) {
                return getLongTypeName(((PsiDisjunctionType)type).getLeastUpperBound());
              }
 else {
                LOG.error("Unknown type:" + type);
                return null;
              }
            }
          }
        }
      }
    }
  }
}
