{
  final String applyMessage=myPluginManagerMain.apply();
  if (applyMessage != null) {
    throw new ConfigurationException(applyMessage);
  }
  if (myPluginManagerMain.isRequireShutdown()) {
    final ApplicationEx app=ApplicationManagerEx.getApplicationEx();
    if (app.isRestartCapable()) {
      if (showRestartIDEADialog() == 0) {
        app.restart();
      }
 else {
        myPluginManagerMain.ignoreChanges();
      }
    }
 else {
      if (showShutDownIDEADialog() == 0) {
        app.exit(true);
      }
 else {
        myPluginManagerMain.ignoreChanges();
      }
    }
  }
}
