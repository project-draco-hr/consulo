{
  final UndoRedoStacksHolder holder=((UndoManagerImpl)UndoManager.getInstance(myProject)).getUndoStacksHolder();
  final LinkedList<UndoableGroup> stack=holder.getStack(myReference);
  for (Iterator<UndoableGroup> it=stack.descendingIterator(); it.hasNext(); ) {
    UndoableGroup undoableGroup=it.next();
    undoableGroup.setMerged4Redo();
    if (undoableGroup.containsAction(myStartAction)) {
      break;
    }
    undoableGroup.setMerged4Undo();
  }
}
