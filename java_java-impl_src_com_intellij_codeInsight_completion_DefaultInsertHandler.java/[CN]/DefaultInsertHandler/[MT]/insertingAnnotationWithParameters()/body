{
  if (insertingAnnotation()) {
    final Document document=myContext.getEditor().getDocument();
    PsiDocumentManager.getInstance(myContext.getProject()).commitDocument(document);
    PsiElement elementAt=myFile.findElementAt(myContext.getStartOffset());
    if (elementAt instanceof PsiIdentifier) {
      final PsiModifierListOwner parent=PsiTreeUtil.getParentOfType(elementAt,PsiModifierListOwner.class,false,PsiCodeBlock.class);
      if (parent != null) {
        for (        PsiMethod m : ((PsiClass)myLookupItem.getObject()).getMethods()) {
          if (!(m instanceof PsiAnnotationMethod))           continue;
          final PsiAnnotationMemberValue defaultValue=((PsiAnnotationMethod)m).getDefaultValue();
          if (defaultValue == null)           return true;
        }
      }
    }
  }
  return false;
}
