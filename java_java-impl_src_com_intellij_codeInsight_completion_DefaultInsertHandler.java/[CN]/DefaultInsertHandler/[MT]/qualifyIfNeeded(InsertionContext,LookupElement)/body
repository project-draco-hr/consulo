{
  try {
    final PsiFile file=context.getFile();
    if (item.getObject() instanceof PsiField) {
      PsiDocumentManager.getInstance(file.getProject()).commitAllDocuments();
      PsiReference reference=file.findReferenceAt(context.getStartOffset());
      if (reference instanceof PsiReferenceExpression && !((PsiReferenceExpression)reference).isQualified()) {
        final PsiField member=(PsiField)item.getObject();
        final PsiVariable target=JavaPsiFacade.getInstance(context.getProject()).getResolveHelper().resolveReferencedVariable(member.getName(),(PsiElement)reference);
        if (member.getManager().areElementsEquivalent(target,JavaCompletionUtil.getOriginalElement(member)))         return;
        final PsiClass psiClass=member.getContainingClass();
        if (psiClass != null && StringUtil.isNotEmpty(psiClass.getName())) {
          context.getEditor().getDocument().insertString(context.getStartOffset(),psiClass.getName() + ".");
        }
      }
    }
    addImportForItem(context,item);
    if (context.getTailOffset() < 0) {
      context.setTailOffset(context.getEditor().getCaretModel().getOffset());
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
