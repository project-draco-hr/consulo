{
  final AsyncResult<String> result=new AsyncResult<String>();
  final Map<String,String> expectedMap=new LinkedHashMap<String,String>();
  if (expected.length() > 0) {
    final String[] keyValue=expected.split("|");
    for (    String each : keyValue) {
      final String[] eachPair=each.split("=");
      if (eachPair.length != 2) {
        result.setRejected("Syntax error, must be |-separated pairs key=value");
        return result;
      }
      expectedMap.put(eachPair[0],eachPair[1]);
    }
  }
  IdeFocusManager.findInstance().doWhenFocusSettlesDown(new Runnable(){
    public void run(){
      try {
        doAssert(expectedMap,result,context);
      }
 catch (      AssertionError error) {
        result.setRejected("Assertion failed: " + error.getMessage());
      }
    }
  }
);
  return result;
}
