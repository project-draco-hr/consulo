{
  if (myPackages == null) {
    myPackages=new THashMap<String,RefPackage>();
  }
  RefPackage refPackage=myPackages.get(packageName);
  if (refPackage == null) {
    refPackage=new RefPackageImpl(packageName,myRefManager);
    myPackages.put(packageName,refPackage);
    int dotIndex=packageName.lastIndexOf('.');
    if (dotIndex >= 0) {
      ((RefPackageImpl)getPackage(packageName.substring(0,dotIndex))).add(refPackage);
    }
 else {
      ((RefProjectImpl)myRefManager.getRefProject()).add(refPackage);
    }
  }
  return refPackage;
}
