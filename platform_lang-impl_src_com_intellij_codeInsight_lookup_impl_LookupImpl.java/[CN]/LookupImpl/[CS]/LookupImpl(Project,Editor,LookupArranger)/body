{
  super(new JPanel(new BorderLayout()));
  setForceShowAsPopup(true);
  setCancelOnClickOutside(false);
  setResizable(true);
  AbstractPopup.suppressMacCornerFor(getComponent());
  myProject=project;
  myEditor=InjectedLanguageUtil.getTopLevelEditor(editor);
  myArranger=arranger;
  myPresentableArranger=arranger;
  DaemonCodeAnalyzer.getInstance(myProject).disableUpdateByTimer(this);
  myCellRenderer=new LookupCellRenderer(this);
  myList.setCellRenderer(myCellRenderer);
  myList.setFocusable(false);
  myList.setFixedCellWidth(50);
  myList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  myList.setBackground(LookupCellRenderer.BACKGROUND_COLOR);
  myList.getExpandableItemsHandler();
  myAdComponent=new Advertiser();
  myOffsets=new LookupOffsets(myEditor);
  final CollectionListModel<LookupElement> model=getListModel();
  addEmptyItem(model);
  updateListHeight(model);
  addListeners();
}
