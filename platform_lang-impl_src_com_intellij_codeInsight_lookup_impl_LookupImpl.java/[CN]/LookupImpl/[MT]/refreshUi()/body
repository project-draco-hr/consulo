{
  final boolean reused=checkReused();
  updateList();
  final Editor editor=myEditor;
  if (isVisible()) {
    LOG.assertTrue(!ApplicationManager.getApplication().isUnitTestMode());
    if (editor.getComponent().getRootPane() == null) {
      LOG.error("Null root pane");
    }
    updateScrollbarVisibility();
    HintManagerImpl.adjustEditorHintPosition(this,editor,calculatePosition(getComponent()));
    layoutStatusIcons();
    if (reused) {
      ensureSelectionVisible();
    }
  }
 else   if (myHintMode) {
    hideAutopopupHint();
    final int itemTextPadding=2;
    final int borderWidth=1;
    final JPanel hintComponent=createAutopopupHintComponent(itemTextPadding,borderWidth);
    Point bestPoint=calculatePosition(hintComponent);
    bestPoint.x+=myCellRenderer.getIconIndent() - itemTextPadding - borderWidth;
    Point editorPoint=SwingUtilities.convertPoint(editor.getComponent().getRootPane().getLayeredPane(),bestPoint,editor.getContentComponent());
    final HintHint hintHint=new HintHint(editor,editorPoint).setHighlighterType(true).setContentActive(true);
    final HintManagerImpl hintManager=HintManagerImpl.getInstanceImpl();
    myAutopopupHint=new LightweightHint(hintComponent);
    myAutopopupHint.setForceShowAsPopup(true);
    myAutopopupHint.setForceLightweightPopup(true);
    hintManager.showEditorHint(myAutopopupHint,editor,new Point(bestPoint),HintManagerImpl.HIDE_BY_ESCAPE | HintManagerImpl.UPDATE_BY_SCROLLING,0,false,hintHint);
    HintManagerImpl.adjustEditorHintPosition(myAutopopupHint,editor,bestPoint);
  }
}
