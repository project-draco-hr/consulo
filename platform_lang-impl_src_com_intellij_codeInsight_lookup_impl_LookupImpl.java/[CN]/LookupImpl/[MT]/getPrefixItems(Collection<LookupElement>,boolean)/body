{
  List<LookupElement> better=new ArrayList<LookupElement>();
  for (  LookupElement element : elements) {
    if (isExactPrefixItem(element,caseSensitive)) {
      better.add(element);
    }
  }
  final Comparator<LookupElement> itemComparator=myPresentableModel.getArranger().getItemComparator();
  if (itemComparator != null) {
    Collections.sort(better,itemComparator);
  }
  List<LookupElement> classified=myPresentableModel.classifyByRelevance(better);
  List<LookupElement> result=new ArrayList<LookupElement>(classified.size());
  for (  LookupElement element : classified) {
    if (element.getLookupString().equals(itemPattern(element))) {
      result.add(element);
    }
  }
  for (  LookupElement element : classified) {
    if (!element.getLookupString().equals(itemPattern(element))) {
      result.add(element);
    }
  }
  return result;
}
