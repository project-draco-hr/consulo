{
  final boolean reused=mayCheckReused && checkReused();
  boolean selectionVisible=isSelectionVisible();
  updateList();
  if (isVisible()) {
    LOG.assertTrue(!ApplicationManager.getApplication().isUnitTestMode());
    if (myEditor.getComponent().getRootPane() == null) {
      LOG.error("Null root pane");
    }
    updateScrollbarVisibility();
    if (myResizePending) {
      myResizePending=false;
      pack();
    }
    updateLookupLocation();
    if (reused || selectionVisible) {
      ensureSelectionVisible();
    }
  }
}
