{
  myWrapper=wrapper;
  myCanBeParent=canBeParent;
  if (!parent.isShowing() && parent != JOptionPane.getRootFrame()) {
    throw new IllegalArgumentException("parent must be showing: " + parent);
  }
  myWindowManager=null;
  Application application=ApplicationManager.getApplication();
  if (application != null && application.hasComponent(WindowManager.class)) {
    myWindowManager=(WindowManagerEx)WindowManager.getInstance();
  }
  Window owner=parent instanceof Window ? (Window)parent : (Window)SwingUtilities.getAncestorOfClass(Window.class,parent);
  if (!(owner instanceof Dialog) && !(owner instanceof Frame)) {
    owner=JOptionPane.getRootFrame();
  }
  createDialog(owner);
}
