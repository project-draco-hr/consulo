{
  List<String> listPaths=new ArrayList<String>(fileNames);
  final String CREATE_MISSING_OPTION="Create Missing Files";
  if (fileNames.size() == 2) {
    listPaths.add(CREATE_MISSING_OPTION);
  }
  final JList list=new JBList(ArrayUtil.toStringArray(listPaths));
  list.setCellRenderer(new ColoredListCellRenderer(){
    @Override protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      String path=(String)value;
      String fileName=PathUtil.getFileName(path);
      if (!fileName.equals(CREATE_MISSING_OPTION)) {
        final FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(fileName);
        setIcon(fileType.getIcon());
      }
      append(String.format("%s (%s)",fileName,PathUtil.getParentPath(path)));
    }
  }
);
  PopupChooserBuilder builder=new PopupChooserBuilder(list);
  builder.setItemChoosenCallback(new Runnable(){
    public void run(){
      final int[] indices=list.getSelectedIndices();
      if (ArrayUtil.indexOf(indices,fileNames.size()) >= 0) {
        createMissingFiles(project,fileNames);
      }
 else {
        for (        int index : indices) {
          openFileByIndex(project,fileNames,index);
        }
      }
    }
  }
).createPopup().show(point);
}
