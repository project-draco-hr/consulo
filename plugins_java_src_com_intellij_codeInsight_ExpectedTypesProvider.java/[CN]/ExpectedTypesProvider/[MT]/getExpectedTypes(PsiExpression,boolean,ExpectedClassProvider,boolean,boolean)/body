{
  if (expr == null)   return ExpectedTypeInfo.EMPTY_ARRAY;
  PsiElement parent=expr.getParent();
  while (parent instanceof PsiParenthesizedExpression) {
    expr=(PsiExpression)parent;
    parent=parent.getParent();
  }
  MyParentVisitor visitor=new MyParentVisitor(expr,forCompletion,classProvider,voidable,usedAfter);
  if (parent != null) {
    parent.accept(visitor);
  }
  return visitor.getResult();
}
