{
  if (myExpr.equals(expr.getCondition())) {
    if (myForCompletion) {
      myExpr=expr;
      myExpr.getParent().accept(this);
      return;
    }
    ExpectedTypeInfo info=createInfoImpl(PsiType.BOOLEAN,ExpectedTypeInfo.TYPE_STRICTLY,PsiType.BOOLEAN,TailType.NONE);
    myResult=new ExpectedTypeInfo[]{info};
  }
 else   if (myExpr.equals(expr.getThenExpression())) {
    ExpectedTypeInfo[] types=getExpectedTypes(expr,myForCompletion);
    for (int i=0; i < types.length; i++) {
      ExpectedTypeInfo info=types[i];
      types[i]=createInfoImpl(info.getType(),info.getKind(),info.getDefaultType(),TailType.COND_EXPR_COLON,info.getCalledMethod(),((ExpectedTypeInfoImpl)info).getExpectedName());
    }
    myResult=types;
  }
 else {
    if (!myExpr.equals(expr.getElseExpression())) {
      LOG.error(Arrays.asList(expr.getChildren()) + "; " + myExpr);
    }
    myResult=getExpectedTypes(expr,myForCompletion);
  }
}
