{
  if (!file.isDirectory() && file.getParent() == null)   return null;
  DirectoryInfo info=myDirectoryIndex.getInfoForDirectory(file);
  if (info != null) {
    return info;
  }
  if (!file.isDirectory() && !myDirectoryIndex.isModuleExcludeRoot(file)) {
    VirtualFile dir=file.getParent();
    if (dir != null) {
      return myDirectoryIndex.getInfoForDirectory(dir);
    }
  }
  return null;
}
