{
  super.setUpJdk();
  new WriteAction(){
    protected void run(    final Result result){
      ProjectJdkTable table=ProjectJdkTable.getInstance();
      myPluginSdk=table.createSdk("IDEA plugin SDK",SdkType.findInstance(IdeaJdk.class));
      SdkModificator modificator=myPluginSdk.getSdkModificator();
      modificator.setSdkAdditionalData(new Sandbox(getSandboxPath(),getTestProjectJdk(),myPluginSdk));
      String rootPath=FileUtil.toSystemIndependentName(PathManager.getJarPathForClass(FileUtilRt.class));
      modificator.addRoot(LocalFileSystem.getInstance().refreshAndFindFileByPath(rootPath),OrderRootType.CLASSES);
      modificator.commitChanges();
      table.addJdk(myPluginSdk);
    }
  }
.execute();
}
