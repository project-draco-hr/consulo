{
  if (surl.startsWith(JAR_PROTOCOL)) {
    VirtualFile file=VirtualFileManager.getInstance().findFileByUrl(BrowserUtil.getDocURL(surl));
    if (file == null) {
      return null;
    }
    return new StringReader(VfsUtil.loadText(file));
  }
  URL url=BrowserUtil.getURL(surl);
  HttpConfigurable.getInstance().prepareURL(url.toString());
  final URLConnection urlConnection=url.openConnection();
  final String contentEncoding=urlConnection.getContentEncoding();
  final InputStream inputStream=pi != null ? UrlConnectionUtil.getConnectionInputStreamWithException(urlConnection,pi) : urlConnection.getInputStream();
  return contentEncoding != null ? new InputStreamReader(inputStream,contentEncoding) : new InputStreamReader(inputStream);
}
