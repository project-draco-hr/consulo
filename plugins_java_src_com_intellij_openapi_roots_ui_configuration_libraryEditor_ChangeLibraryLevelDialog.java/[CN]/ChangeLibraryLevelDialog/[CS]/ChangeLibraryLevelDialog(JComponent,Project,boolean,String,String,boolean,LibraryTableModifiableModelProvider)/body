{
  super(parent,true);
  myAllowEmptyName=allowEmptyName;
  final String actionName=copy ? "Copy" : "Move";
  setTitle(actionName + " Library");
  myCopyFilesCheckBox.setText(actionName + " library files to:");
  myCopyFilesCheckBox.setMnemonic(copy ? 'C' : 'M');
  myCopyFilesCheckBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      updateDirectoriesForFilesField();
    }
  }
);
  myModifiableModel=provider.getModifiableModel();
  myNameField.setText(libraryName);
  myDirectoryForFilesField.addBrowseFolderListener("Directory for Library Files",null,project,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  myDirectoryForFilesField.setText(FileUtil.toSystemDependentName(path));
  myNameField.selectAll();
  init();
  checkName();
  updateDirectoriesForFilesField();
  myNameField.getDocument().addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      checkName();
    }
  }
);
}
