{
  final ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  ContentLoader loader=new ContentLoader(myPath,buffer,myRevision);
  if (ApplicationManager.getApplication().isDispatchThread()) {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(loader,SvnBundle.message("progress.title.loading.file.content"),false,null);
  }
 else {
    loader.run();
  }
  final SVNException exception=loader.getException();
  if (exception != null) {
    throw new VcsException(exception);
  }
  ContentRevisionCache.checkContentsSize(myPath,buffer.size());
  return buffer;
}
