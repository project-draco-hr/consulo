{
  TextEditorState state=new TextEditorState();
  try {
    state.LINE=Integer.parseInt(element.getAttributeValue(LINE_ATTR));
    state.COLUMN=Integer.parseInt(element.getAttributeValue(COLUMN_ATTR));
    state.SELECTION_START=Integer.parseInt(element.getAttributeValue(SELECTION_START_ATTR));
    state.SELECTION_END=Integer.parseInt(element.getAttributeValue(SELECTION_END_ATTR));
    state.VERTICAL_SCROLL_PROPORTION=Float.parseFloat(element.getAttributeValue(VERTICAL_SCROLL_PROPORTION_ATTR));
  }
 catch (  NumberFormatException ignored) {
  }
  if (project != null) {
    Element child=element.getChild(FOLDING_ELEMENT);
    Document document=FileDocumentManager.getInstance().getDocument(file);
    if (child != null && document != null) {
      state.FOLDING_STATE=CodeFoldingManager.getInstance(project).readFoldingState(child,document);
    }
 else {
      state.FOLDING_STATE=null;
    }
  }
  return state;
}
