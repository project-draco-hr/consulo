{
  final PsiImportStatement[] importStatements=importList.getImportStatements();
  final Set<String> imports=new HashSet<String>(importStatements.length);
  for (  final PsiImportStatement importStatement : importStatements) {
    final String text=importStatement.getQualifiedName();
    if (text == null) {
      continue;
    }
    if (imports.contains(text)) {
      registerError(importStatement);
      continue;
    }
    if (!importStatement.isOnDemand()) {
      final PsiElement element=importStatement.resolve();
      if (!(element instanceof PsiClass)) {
        continue;
      }
      final PsiElement context=element.getContext();
      if (context == null) {
        continue;
      }
      final String contextName;
      if (context instanceof PsiJavaFile) {
        final PsiJavaFile file=(PsiJavaFile)context;
        contextName=file.getPackageName();
      }
 else       if (context instanceof PsiClass) {
        final PsiClass aClass=(PsiClass)context;
        contextName=aClass.getQualifiedName();
      }
 else {
        continue;
      }
      if (imports.contains(contextName) && !ImportUtils.hasOnDemandImportConflict(text,javaFile)) {
        registerError(importStatement);
      }
    }
    imports.add(text);
  }
}
