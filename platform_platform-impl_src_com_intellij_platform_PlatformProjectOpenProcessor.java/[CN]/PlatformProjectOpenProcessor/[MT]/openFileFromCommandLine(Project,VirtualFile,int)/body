{
  StartupManager.getInstance(project).registerPostStartupActivity(new DumbAwareRunnable(){
    public void run(){
      if (project.isDisposed()) {
        return;
      }
      ToolWindowManager.getInstance(project).invokeLater(new Runnable(){
        public void run(){
          ToolWindowManager.getInstance(project).invokeLater(new Runnable(){
            public void run(){
              if (!virtualFile.isDirectory()) {
                if (line > 0) {
                  new OpenFileDescriptor(project,virtualFile,line - 1,0).navigate(true);
                }
 else {
                  new OpenFileDescriptor(project,virtualFile).navigate(true);
                }
              }
            }
          }
);
        }
      }
);
    }
  }
);
}
