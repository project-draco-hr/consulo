{
  int i=0;
  Vector resultArgs=new Vector();
  for (; i < args.length; i++) {
    String arg=args[i];
    if (arg.startsWith(SOCKET)) {
      final int port=Integer.parseInt(arg.substring(SOCKET.length()));
      try {
        final Socket socket=new Socket(InetAddress.getByName(null),port);
        final DataInputStream os=new DataInputStream(socket.getInputStream());
        try {
          os.readBoolean();
        }
  finally {
          os.close();
        }
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
      continue;
    }
 else     if (arg.equals("-temp")) {
      break;
    }
    resultArgs.add(arg);
  }
  final File temp=new File(args[++i]);
  final BufferedReader reader=new BufferedReader(new FileReader(temp));
  try {
    final String cantRunMessage="CantRunException";
    while (true) {
      String line=reader.readLine();
      while (line == null) {
        line=reader.readLine();
      }
      if (line.startsWith(cantRunMessage) && !new File(line).exists()) {
        System.err.println(line.substring(cantRunMessage.length()));
        System.exit(1);
        return;
      }
      if (line.equals("end"))       break;
      resultArgs.add(line);
    }
  }
  finally {
    reader.close();
  }
  final Map commandLineArgs=TestNGCommandLineArgs.parseCommandLine((String[])resultArgs.toArray(new String[resultArgs.size()]));
  final RemoteTestNG testNG=new RemoteTestNG();
  testNG.configure(commandLineArgs);
  testNG.initializeSuitesAndJarFile();
  testNG.run();
}
