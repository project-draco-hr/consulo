{
  int i=0;
  Vector resultArgs=new Vector();
  for (; i < args.length; i++) {
    String arg=args[i];
    if (arg.equals("-temp")) {
      break;
    }
    resultArgs.add(arg);
  }
  File temp=new File(args[++i]);
  while (temp.length() == 0) {
  }
  BufferedReader reader=new BufferedReader(new FileReader(temp));
  try {
    final String cantRunMessage="CantRunException";
    while (true) {
      String line=reader.readLine();
      while (line == null) {
        Thread.sleep(100);
        line=reader.readLine();
      }
      if (line.startsWith(cantRunMessage) && !new File(line).exists()) {
        System.err.println(line.substring(cantRunMessage.length()));
        System.exit(1);
        return;
      }
      if (line.equals("end"))       break;
      resultArgs.add(line);
    }
  }
  finally {
    reader.close();
  }
  Map commandLineArgs=TestNGCommandLineArgs.parseCommandLine((String[])resultArgs.toArray(new String[resultArgs.size()]));
  RemoteTestNG testNG=new RemoteTestNG();
  testNG.configure(commandLineArgs);
  testNG.initializeSuitesAndJarFile();
  testNG.run();
}
