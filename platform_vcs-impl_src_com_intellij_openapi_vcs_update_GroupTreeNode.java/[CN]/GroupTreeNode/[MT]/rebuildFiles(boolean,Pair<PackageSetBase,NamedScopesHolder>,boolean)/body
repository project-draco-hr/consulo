{
  for (int i=getChildCount() - 1; i >= 0; i--) {
    final TreeNode node=getChildAt(i);
    if (node instanceof Disposable) {
      Disposer.dispose((Disposable)node);
    }
  }
  removeAllChildren();
  if (groupByPackages) {
    buildPackages();
    acceptFilter(filter,showOnlyFilteredItems);
  }
 else {
    buildFiles(filter,showOnlyFilteredItems);
  }
  setTreeModel(myTreeModel);
  if (myTreeModel != null) {
    myTreeModel.nodeStructureChanged(this);
  }
}
