{
  if (myStub != null && description.getAnnotation(Stubbed.class) != null) {
    XmlName xmlName=((DomChildDescriptionImpl)description).getXmlName();
    List<DomStub> stubs=myStub.getChildrenByName(xmlName);
    return ContainerUtil.map(stubs,new Function<DomStub,DomElement>(){
      @Override public DomElement fun(      DomStub stub){
        return stub.getOrCreateHandler((DomChildDescriptionImpl)description,myManager).getProxy();
      }
    }
);
  }
  XmlTag tag=getXmlTag();
  if (tag == null)   return Collections.emptyList();
  final List<XmlTag> subTags=tagsGetter.fun(this);
  if (subTags.isEmpty())   return Collections.emptyList();
  List<DomElement> elements=new ArrayList<DomElement>(subTags.size());
  for (  XmlTag subTag : subTags) {
    final SemKey<? extends DomInvocationHandler> key=description instanceof CustomDomChildrenDescription ? DomManagerImpl.DOM_CUSTOM_HANDLER_KEY : DomManagerImpl.DOM_COLLECTION_HANDLER_KEY;
    final DomInvocationHandler semElement=myManager.getSemService().getSemElement(key,subTag);
    if (semElement == null) {
      myManager.getSemService().getSemElement(key,subTag);
      throw new AssertionError("No child for subTag '" + subTag.getName() + "' in tag '"+ tag.getName()+ "' using key "+ key);
    }
 else {
      elements.add(semElement.getProxy());
    }
  }
  return Collections.unmodifiableList(elements);
}
