{
  ProgressManager.checkCanceled();
  final DomParentStrategy parentStrategy=getParentStrategy();
  String error=parentStrategy.checkValidity();
  if (error != null) {
    return "Strategy: " + error;
  }
  final long modCount=myManager.getPsiModificationCount();
  if (myLastModCount == modCount) {
    return null;
  }
  final XmlElement xmlElement=parentStrategy.getXmlElement();
  if (xmlElement != null) {
    final SemService semService=SemService.getSemService(myManager.getProject());
    final DomInvocationHandler actual=semService.getSemElement(DomManagerImpl.DOM_HANDLER_KEY,xmlElement);
    if (!equals(actual)) {
      return "element changed: " + this.toStringEx() + "!="+ (actual == null ? null : actual.toStringEx());
    }
    myLastModCount=modCount;
    return null;
  }
  final DomInvocationHandler parent=getParentHandler();
  if (parent == null) {
    return "no parent: " + getDomElementType();
  }
  error=parent.checkValidity();
  if (error != null) {
    return "parent: " + error;
  }
  myLastModCount=modCount;
  return null;
}
