{
  final AntElement elem=getElement();
  final AntFile contextFile=AntConfigurationBase.getInstance(elem.getProject()).getContextFile(elem.getAntFile());
  final String text=getCanonicalText();
  final AntProperty resolved=contextFile != null ? contextFile.getProperty(text) : null;
  if (resolved != null) {
    final String propName=cutPrefix(text,resolved.getPrefix());
    final PropertiesFile propFile=resolved.getPropertiesFile();
    if (propFile != null) {
      return propFile.findPropertyByKey(propName);
    }
    return resolved.getFormatElement(propName);
  }
  return null;
}
