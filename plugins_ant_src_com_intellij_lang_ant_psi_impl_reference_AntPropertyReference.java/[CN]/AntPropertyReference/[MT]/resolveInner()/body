{
  final AntElement elem=getElement();
  final AntFile contextFile=AntConfigurationBase.getInstance(elem.getProject()).getEffectiveContextFile(elem.getAntFile());
  if (contextFile == null) {
    return null;
  }
  final String text=getCanonicalText();
  AntProperty resolved=contextFile.getProperty(text);
  if (resolved != null) {
    final String propName=cutPrefix(text,resolved.getPrefix());
    final PropertiesFile propFile=resolved.getPropertiesFile();
    if (propFile != null) {
      return propFile.findPropertyByKey(propName);
    }
    return resolved.getFormatElement(propName);
  }
  return null;
}
