{
  instructions.visitInstructions(this,false);
  if (myBuildConfiguration.willBuildExploded() && (myBuildConfiguration.isBuildExternalDependencies() || myOutputPaths.peek().length() > 0)) {
    List<String> classpath=DeploymentUtilImpl.getExternalDependenciesClasspath(instructions);
    if (!classpath.isEmpty()) {
      String outputRoot=DeploymentUtilImpl.getOrCreateExplodedDir(myBuildParticipant);
      String fullOutputPath=DeploymentUtil.concatPaths(outputRoot,myOutputPaths.peek(),JarFile.MANIFEST_NAME);
      myContext.addManifestFile(new ManifestFileInfo(fullOutputPath,classpath));
    }
  }
}
