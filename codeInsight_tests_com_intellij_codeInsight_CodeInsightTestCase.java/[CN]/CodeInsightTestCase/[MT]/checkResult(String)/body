{
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  super.checkResult(dataName);
  CodeInsightTestData data=(CodeInsightTestData)myTestDataAfter;
  if (data.getColumnNumber() >= 0) {
    assertEquals(dataName + ":caretColumn",data.getColumnNumber(),myEditor.getCaretModel().getLogicalPosition().column + 1);
  }
  if (data.getLineNumber() >= 0) {
    assertEquals(dataName + ":caretLine",data.getLineNumber(),myEditor.getCaretModel().getLogicalPosition().line + 1);
  }
  int selectionStart=myEditor.getSelectionModel().getSelectionStart();
  int selectionEnd=myEditor.getSelectionModel().getSelectionEnd();
  LogicalPosition startPosition=myEditor.offsetToLogicalPosition(selectionStart);
  LogicalPosition endPosition=myEditor.offsetToLogicalPosition(selectionEnd);
  if (data.getSelectionStartColumnNumber() >= 0) {
    assertEquals(dataName + ":selectionStartColumn",data.getSelectionStartColumnNumber(),startPosition.column + 1);
  }
  if (data.getSelectionStartLineNumber() >= 0) {
    assertEquals(dataName + ":selectionStartLine",data.getSelectionStartLineNumber(),startPosition.line + 1);
  }
  if (data.getSelectionEndColumnNumber() >= 0) {
    assertEquals(dataName + ":selectionEndColumn",data.getSelectionEndColumnNumber(),endPosition.column + 1);
  }
  if (data.getSelectionEndLineNumber() >= 0) {
    assertEquals(dataName + ":selectionEndLine",data.getSelectionEndLineNumber(),endPosition.line + 1);
  }
}
