{
  NodeDescriptorImpl descriptor=node.getDescriptor();
  if (descriptor instanceof ValueDescriptorImpl) {
    String text=((ValueDescriptorImpl)descriptor).getLabel();
    if (text != null) {
      if (StringUtil.startsWithChar(text,'{') && text.indexOf('}') > 0) {
        int idx=text.indexOf('}');
        if (idx != text.length() - 1) {
          text=text.substring(idx + 1);
        }
      }
      if (StringUtil.startsWithChar(text,'\"') && StringUtil.endsWithChar(text,'\"'))       text=text.substring(1,text.length() - 1);
      if (text.length() > 0 && (text.indexOf('\n') >= 0 || !getVisibleRect().contains(getRowBounds(getRowForPath(new TreePath(node.getPath())))))) {
        String tipText=prepareToolTipText(text);
        return tipText;
      }
    }
  }
  return null;
}
