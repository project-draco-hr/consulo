{
  DebuggerTreeNodeImpl node=getNodeToShowTip(e);
  if (node == null)   return null;
  if (myCurrentTooltip != null && myCurrentTooltip.isShowing() && myCurrentTooltipNode == node)   return myCurrentTooltip;
  myCurrentTooltipNode=node;
  JToolTip toolTip=new JToolTip();
  toolTip.setLayout(new BorderLayout());
  String toolTipText=getTipText(node);
  if (toolTipText == null)   return null;
  JScrollPane scrollPane=new JScrollPane(createTipContent(toolTipText));
  scrollPane.setBorder(null);
  scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
  scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
  toolTip.add(scrollPane);
  JComponent tipContent=createTipContent(toolTipText);
  Rectangle tipRectangle=getTipRectangle(e,tipContent.getPreferredSize());
  if (toolTip.getBorder() != null) {
    Insets borderInsets=toolTip.getBorder().getBorderInsets(this);
    tipRectangle.setSize(tipRectangle.width + borderInsets.left + borderInsets.right,tipRectangle.height + borderInsets.top + borderInsets.bottom);
  }
  Dimension tipSize=new Dimension(tipRectangle.getSize());
  if (tipRectangle.getWidth() < tipContent.getPreferredSize().getWidth()) {
    tipSize.height+=scrollPane.getHorizontalScrollBar().getPreferredSize().height;
  }
  if (tipRectangle.getHeight() < tipContent.getPreferredSize().getHeight()) {
    tipSize.width+=scrollPane.getVerticalScrollBar().getPreferredSize().width;
  }
  if (!tipSize.equals(tipRectangle.getSize())) {
    tipRectangle=getTipRectangle(e,tipSize);
  }
  toolTip.setPreferredSize(tipRectangle.getSize());
  toolTip.setLocation(tipRectangle.getLocation());
  myCurrentTooltip=toolTip;
  return toolTip;
}
