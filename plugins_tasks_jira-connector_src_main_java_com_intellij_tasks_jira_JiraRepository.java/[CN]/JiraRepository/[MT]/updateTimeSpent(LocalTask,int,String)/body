{
  final HttpClient client=login();
  checkVersion(client);
  PostMethod method=new PostMethod(getUrl() + "/rest/api/2/issue/" + task.getId()+ "/worklog");
  method.setRequestEntity(new StringRequestEntity("{\"timeSpentSeconds\" : " + String.valueOf(calculateTimeSpent(timeSpentInMinutes)) + (StringUtil.isNotEmpty(comment) ? ", \"comment\" : " + comment : "")+ " }","application/json","UTF-8"));
  client.executeMethod(method);
  if (method.getStatusCode() != 201) {
    throw new Exception(method.getResponseBodyAsString());
  }
}
