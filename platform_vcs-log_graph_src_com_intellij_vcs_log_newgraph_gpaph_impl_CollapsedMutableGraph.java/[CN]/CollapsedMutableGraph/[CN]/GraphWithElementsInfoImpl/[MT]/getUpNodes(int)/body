{
  Pair<Integer,Integer> edge=downToEdge.get(nodeIndex);
  if (edge != null)   return Collections.singletonList(edge.first);
  List<Integer> upNodes=new SmartList<Integer>();
  for (  int upNode : myPermanentGraph.getUpNodes(nodeIndex)) {
    if (nodeIsVisible(upNode))     upNodes.add(upNode);
  }
  return upNodes;
}
