{
  Component result=super.prepareRenderer(renderer,row,column);
  if (UIUtil.isUnderGTKLookAndFeel()) {
    UIUtil.changeBackGround(this,UIUtil.getTreeTextBackground());
  }
  if (isTableDecorationSupported() && isStriped() && result instanceof JComponent) {
    final Color bg=row % 2 == 1 ? getBackground() : UIUtil.getDecoratedRowColor();
    final JComponent c=(JComponent)result;
    final boolean cellSelected=isCellSelected(row,column);
    if (!cellSelected) {
      c.setOpaque(true);
      c.setBackground(bg);
      for (      Component child : c.getComponents()) {
        child.setBackground(bg);
      }
    }
  }
  if (myExpandableItemsHandler.getExpandedItems().contains(new TableCell(row,column))) {
    result=ExpandedItemRendererComponentWrapper.wrap(result);
  }
  return result;
}
