{
  super(model);
  myEmptyText=new StatusText(this){
    @Override protected boolean isStatusVisible(){
      return isEmpty();
    }
  }
;
  myExpandableItemsHandler=ExpandableItemsHandlerFactory.install(this);
  setFillsViewportHeight(true);
  addMouseListener(new MyMouseListener());
  getColumnModel().addColumnModelListener(new TableColumnModelListener(){
    @Override public void columnMarginChanged(    ChangeEvent e){
      if (cellEditor != null && !(cellEditor instanceof Animated)) {
        cellEditor.stopCellEditing();
      }
    }
    @Override public void columnSelectionChanged(    @NotNull ListSelectionEvent e){
    }
    @Override public void columnAdded(    @NotNull TableColumnModelEvent e){
    }
    @Override public void columnMoved(    @NotNull TableColumnModelEvent e){
    }
    @Override public void columnRemoved(    @NotNull TableColumnModelEvent e){
    }
  }
);
  final TableModelListener modelListener=new TableModelListener(){
    @Override public void tableChanged(    @NotNull final TableModelEvent e){
      if (!myRowHeightIsExplicitlySet) {
        myRowHeight=-1;
      }
      if (e.getType() == TableModelEvent.DELETE && isEmpty() || e.getType() == TableModelEvent.INSERT && !isEmpty()) {
        repaintViewport();
      }
    }
  }
;
  if (getModel() != null)   getModel().addTableModelListener(modelListener);
  addPropertyChangeListener("model",new PropertyChangeListener(){
    @Override public void propertyChange(    @NotNull PropertyChangeEvent evt){
      repaintViewport();
      if (evt.getOldValue() instanceof TableModel) {
        ((TableModel)evt.getOldValue()).removeTableModelListener(modelListener);
      }
      if (evt.getNewValue() instanceof TableModel) {
        ((TableModel)evt.getNewValue()).addTableModelListener(modelListener);
      }
    }
  }
);
  boolean marker=Patches.SUN_BUG_ID_4503845;
}
