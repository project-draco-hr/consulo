{
  final String localName=variable.getNameIdentifierGroovy().getText();
  final Project project=variable.getProject();
  final Collection<PsiReference> refs=ReferencesSearch.search(variable,GlobalSearchScope.projectScope(variable.getProject()),false).findAll();
  ArrayList<PsiElement> exprs=new ArrayList<PsiElement>();
  for (  PsiReference ref : refs) {
    exprs.add(ref.getElement());
  }
  GroovyRefactoringUtil.highlightOccurrences(project,editor,exprs.toArray(PsiElement.EMPTY_ARRAY));
  if (variable.getInitializerGroovy() == null) {
    String message=GroovyRefactoringBundle.message("cannot.find.a.single.definition.to.inline.local.var");
    CommonRefactoringUtil.showErrorMessage(REFACTORING_NAME,message,HelpID.INLINE_VARIABLE,variable.getProject());
    return null;
  }
  if (refs.isEmpty()) {
    String message=GroovyRefactoringBundle.message("variable.is.never.used.0",variable.getNameIdentifierGroovy().getText());
    CommonRefactoringUtil.showErrorMessage(REFACTORING_NAME,message,HelpID.INLINE_VARIABLE,variable.getProject());
    return null;
  }
  return inlineDialogResult(localName,project,refs);
}
