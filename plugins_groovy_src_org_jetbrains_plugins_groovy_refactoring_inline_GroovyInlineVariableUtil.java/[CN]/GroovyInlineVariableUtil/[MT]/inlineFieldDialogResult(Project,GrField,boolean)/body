{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new InlineHandler.Settings(){
      @Override public boolean isOnlyOneReferenceToInline(){
        return invokedOnReference;
      }
    }
;
  }
  final InlineGroovyFieldDialog dialog=new InlineGroovyFieldDialog(project,field,invokedOnReference);
  dialog.show();
  if (dialog.isOK()) {
    return new InlineHandler.Settings(){
      @Override public boolean isOnlyOneReferenceToInline(){
        return dialog.isInlineThisOnly();
      }
    }
;
  }
 else {
    WindowManager.getInstance().getStatusBar(project).setInfo(GroovyRefactoringBundle.message("press.escape.to.remove.the.highlighting"));
    return InlineHandler.Settings.CANNOT_INLINE_SETTINGS;
  }
}
