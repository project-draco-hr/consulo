{
  Application application=ApplicationManager.getApplication();
  if (!application.isUnitTestMode()) {
    final String question=GroovyRefactoringBundle.message(forField ? "inline.field.prompt.0.1" : "inline.local.variable.prompt.0.1",localName,refs.size());
    RefactoringMessageDialog dialog=new RefactoringMessageDialog(REFACTORING_NAME,question,forField ? HelpID.INLINE_FIELD : HelpID.INLINE_VARIABLE,"OptionPane.questionIcon",true,project);
    dialog.show();
    if (!dialog.isOK()) {
      WindowManager.getInstance().getStatusBar(project).setInfo(GroovyRefactoringBundle.message("press.escape.to.remove.the.highlighting"));
      return null;
    }
  }
  return new InlineHandler.Settings(){
    public boolean isOnlyOneReferenceToInline(){
      return inlineOnlyOneReference;
    }
  }
;
}
