{
  Document document=editor.getDocument();
  PsiFile file=PsiDocumentManager.getInstance(variable.getProject()).getPsiFile(document);
  if (file == null)   return;
  if (invokedOnReference) {
    int offset=editor.getCaretModel().getOffset();
    PsiReference reference=file.findReferenceAt(offset);
    if (reference == null)     reference=file.findReferenceAt(offset - 1);
    if (reference == null || !(reference instanceof GrReferenceExpression))     return;
    PsiElement definition=getReachingDefinition(variable,((GrReferenceExpression)reference));
  }
}
