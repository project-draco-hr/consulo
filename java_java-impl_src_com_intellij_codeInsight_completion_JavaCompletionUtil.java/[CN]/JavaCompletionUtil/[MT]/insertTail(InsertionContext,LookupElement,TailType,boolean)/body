{
  TailType toInsert=tailType;
  LookupItem<?> lookupItem=item.as(LookupItem.CLASS_CONDITION_KEY);
  if (lookupItem == null || lookupItem.getAttribute(LookupItem.TAIL_TYPE_ATTR) != TailType.UNKNOWN) {
    if (!hasTail && item.getObject() instanceof PsiMethod && ((PsiMethod)item.getObject()).getReturnType() == PsiType.VOID) {
      PsiDocumentManager.getInstance(context.getProject()).commitAllDocuments();
      if (psiElement().beforeLeaf(psiElement().withText(".")).accepts(context.getFile().findElementAt(context.getTailOffset() - 1))) {
        return false;
      }
      toInsert=TailType.SEMICOLON;
    }
  }
  toInsert.processTail(context.getEditor(),context.getTailOffset());
  return true;
}
