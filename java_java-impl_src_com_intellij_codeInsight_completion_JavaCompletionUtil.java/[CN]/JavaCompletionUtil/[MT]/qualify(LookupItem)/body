{
  if (!(ret instanceof JavaMethodCallElement)) {
    final PsiMember completionElement=(PsiMember)ret.getObject();
    String prefix="";
    PsiClass containingClass=completionElement.getContainingClass();
    while (containingClass != null) {
      final String className=containingClass.getName();
      if (className == null) {
        break;
      }
      prefix=className + "." + prefix;
      final PsiElement parent=containingClass.getParent();
      if (!(parent instanceof PsiClass)) {
        break;
      }
      containingClass=(PsiClass)parent;
    }
    if (StringUtil.isNotEmpty(prefix)) {
      ret.setLookupString(prefix + ret.getLookupString());
    }
  }
  return ret.forceQualify();
}
