{
  final PsiExpression expr=PsiTreeUtil.getContextOfType(parameters.getPosition(),PsiExpression.class,true);
  if (expr != null) {
    final ExpectedTypeInfo[] expectedInfos=JavaSmartCompletionContributor.getExpectedTypes(parameters);
    if (expectedInfos != null) {
      final Set<PsiType> set=new THashSet<PsiType>();
      for (      final ExpectedTypeInfo expectedInfo : expectedInfos) {
        set.add(expectedInfo.getType());
      }
      return set;
    }
  }
  return null;
}
