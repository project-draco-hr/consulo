{
  if (javaReference instanceof PsiReferenceExpression) {
    final PsiReferenceExpression refExpr=(PsiReferenceExpression)javaReference;
    final PsiExpression qualifier=refExpr.getQualifierExpression();
    if (qualifier != null) {
      final Project project=qualifier.getProject();
      final PairFunction<PsiExpression,CompletionParameters,PsiType> evaluator=refExpr.getContainingFile().getCopyableUserData(DYNAMIC_TYPE_EVALUATOR);
      PsiReferenceExpression context=refExpr;
      PsiType type=null;
      if (evaluator != null) {
        type=evaluator.fun(qualifier,parameters);
        context=null;
      }
      if (type == null) {
        type=GuessManager.getInstance(project).getControlFlowExpressionType(qualifier);
        context=refExpr;
      }
      if (type != null) {
        processor.clear();
        return addQualifierCastingVariants(processor,refExpr,type,set,context);
      }
    }
  }
  return null;
}
