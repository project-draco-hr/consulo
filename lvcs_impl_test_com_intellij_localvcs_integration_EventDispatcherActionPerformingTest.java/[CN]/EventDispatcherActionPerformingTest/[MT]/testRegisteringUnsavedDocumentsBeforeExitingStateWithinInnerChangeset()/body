{
  vcs.beginChangeSet();
  vcs.createDirectory("dir");
  vcs.createFile("dir/one",null,-1);
  vcs.createFile("dir/two",null,-1);
  vcs.endChangeSet(null);
  d.startAction();
  vcs.createFile("dir/three",null,-1);
  gateway.addUnsavedDocument("dir/one","one");
  gateway.addUnsavedDocument("dir/two","two");
  d.finishAction(null);
  assertEquals(2,vcs.getRevisionsFor("dir").size());
}
