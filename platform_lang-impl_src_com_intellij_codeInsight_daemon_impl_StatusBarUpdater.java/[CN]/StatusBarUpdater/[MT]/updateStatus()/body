{
  Editor editor=FileEditorManager.getInstance(myProject).getSelectedTextEditor();
  if (editor == null || !editor.getContentComponent().hasFocus()) {
    return;
  }
  final Document document=editor.getDocument();
  if (document instanceof DocumentEx && ((DocumentEx)document).isInBulkUpdate())   return;
  int offset=editor.getCaretModel().getOffset();
  DaemonCodeAnalyzer codeAnalyzer=DaemonCodeAnalyzer.getInstance(myProject);
  HighlightInfo info=((DaemonCodeAnalyzerImpl)codeAnalyzer).findHighlightByOffset(document,offset,false,HighlightSeverity.WARNING);
  String text=info != null && info.getDescription() != null ? info.getDescription() : "";
  StatusBar statusBar=WindowManager.getInstance().getStatusBar(editor.getContentComponent(),myProject);
  if (statusBar instanceof StatusBarEx) {
    StatusBarEx barEx=(StatusBarEx)statusBar;
    if (!text.equals(barEx.getInfo())) {
      statusBar.setInfo(text,"updater");
    }
  }
}
