{
  if (getParent() != null) {
    Object parentInstance=getParent().getComponentInstance(componentKey);
    if (parentInstance != null) {
      return parentInstance;
    }
  }
  final Object[] result=new Object[]{null};
  accept(new EmptyPicoVisitor(){
    public void visitContainer(    PicoContainer pico){
      final boolean[] found=new boolean[]{false};
      pico.accept(new EmptyPicoVisitor(){
        public void visitComponentAdapter(        ComponentAdapter componentAdapter){
          if (componentKey.equals(componentAdapter.getComponentKey())) {
            found[0]=true;
          }
        }
      }
);
      if (!found[0]) {
        return;
      }
      Object componentInstance=pico.getComponentInstance(componentKey);
      if (componentInstance != null) {
        result[0]=componentInstance;
      }
    }
  }
);
  return result[0];
}
