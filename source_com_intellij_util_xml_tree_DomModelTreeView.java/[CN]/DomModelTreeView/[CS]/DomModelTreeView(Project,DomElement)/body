{
  myRootDomElement=rootElement;
  myTree=new SimpleTree(new DefaultTreeModel(new DefaultMutableTreeNode()));
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  ToolTipManager.sharedInstance().registerComponent(myTree);
  TreeUtil.installActions(myTree);
  final SimpleTreeStructure treeStructure=myRootDomElement != null ? getTreeStructure(myRootDomElement) : new SimpleTreeStructure(){
    public Object getRootElement(){
      return null;
    }
  }
;
  myBuilder=new SimpleTreeBuilder(myTree,(DefaultTreeModel)myTree.getModel(),treeStructure,WeightBasedComparator.INSTANCE);
  myBuilder.initRoot();
  add(myTree);
  DomManager.getDomManager(project).addDomEventListener(new DomEventListener(){
    public void eventOccured(    DomEvent event){
      super.eventOccured(event);
      myBuilder.updateFromRoot();
    }
  }
);
}
