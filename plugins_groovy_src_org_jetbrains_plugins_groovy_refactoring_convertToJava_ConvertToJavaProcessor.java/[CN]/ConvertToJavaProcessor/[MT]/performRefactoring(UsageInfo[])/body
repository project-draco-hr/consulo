{
  final GeneratorClassNameProvider classNameProvider=new GeneratorClassNameProvider();
  final ClassGenerator classGenerator=new ClassGenerator(myProject,classNameProvider,new ClassItemGeneratorImpl(myProject));
  for (  GroovyFile file : myFiles) {
    final PsiClass[] classes=file.getClasses();
    StringBuilder builder=new StringBuilder();
    for (    PsiClass aClass : classes) {
      classGenerator.writeTypeDefinition(builder,aClass,true);
      builder.append('\n');
    }
    final Document document=PsiDocumentManager.getInstance(myProject).getDocument(file);
    LOG.assertTrue(document != null);
    document.setText(builder);
    PsiDocumentManager.getInstance(myProject).commitDocument(document);
    String fileName=getNewFileName(file);
    file.setName(fileName);
  }
}
