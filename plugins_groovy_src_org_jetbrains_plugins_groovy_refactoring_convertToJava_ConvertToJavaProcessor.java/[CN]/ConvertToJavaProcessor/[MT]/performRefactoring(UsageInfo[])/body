{
  final GeneratorClassNameProvider classNameProvider=new GeneratorClassNameProvider();
  final ClassGenerator classGenerator=new ClassGenerator(myProject,classNameProvider,new ClassItemGeneratorImpl());
  for (  GroovyFile file : myFiles) {
    final PsiClass[] classes=file.getClasses();
    StringBuilder builder=new StringBuilder();
    for (    PsiClass aClass : classes) {
      classGenerator.writeTypeDefinition(builder,aClass,true);
      builder.append('\n');
    }
    String fileName=getNewFileName(file);
    final PsiFile newFile=(PsiFile)file.setName(fileName);
    final Document document=PsiDocumentManager.getInstance(myProject).getDocument(newFile);
    LOG.assertTrue(document != null);
    document.setText(builder);
  }
}
