{
  if (ApplicationManager.getApplication().isUnitTestMode() || ApplicationManager.getApplication().isDispatchThread()) {
    final File file=new File(filePath);
    if (file.isFile()) {
      VirtualFile projectFile=LocalFileSystem.getInstance().refreshAndFindFileByPath(filePath);
      if (projectFile != null) {
        projectFile.refresh(false,false);
      }
      File iwsFile=new File(file.getParentFile(),FileUtil.getNameWithoutExtension(file) + WorkspaceFileType.DOT_DEFAULT_EXTENSION);
      VirtualFile wsFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(iwsFile);
      if (wsFile != null) {
        wsFile.refresh(false,false);
      }
    }
 else {
      VirtualFile projectConfigDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(new File(filePath,Project.DIRECTORY_STORE_FOLDER));
      if (projectConfigDir != null && projectConfigDir.isDirectory()) {
        projectConfigDir.getChildren();
        if (projectConfigDir instanceof NewVirtualFile) {
          ((NewVirtualFile)projectConfigDir).markDirtyRecursively();
        }
        projectConfigDir.refresh(false,true);
      }
    }
  }
}
