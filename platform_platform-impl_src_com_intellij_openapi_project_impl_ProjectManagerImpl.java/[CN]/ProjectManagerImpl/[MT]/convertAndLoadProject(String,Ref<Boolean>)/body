{
  final ConversionResult conversionResult;
  final String fp=canonicalize(filePath);
  conversionResult=ConversionService.getInstance().convert(fp);
  if (conversionResult.openingIsCanceled()) {
    cancelled.set(true);
    return null;
  }
  final Project project=loadProjectWithProgress(filePath,new Ref<Boolean>());
  if (project == null)   return null;
  if (!conversionResult.conversionNotNeeded()) {
    StartupManager.getInstance(project).registerPostStartupActivity(new Runnable(){
      public void run(){
        conversionResult.postStartupActivity(project);
      }
    }
);
  }
  return project;
}
