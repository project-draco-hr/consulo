{
  final Ref<Project> projectRef=Ref.create(project);
  ProjectReloadState.getInstance(project).onBeforeAutomaticProjectReload();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      LOG.debug("Reloading project.");
      Project project=projectRef.get();
      projectRef.set(null);
      if (project.isDisposed()) {
        return;
      }
      String presentableUrl=project.getPresentableUrl();
      if (!ProjectUtil.closeAndDispose(project)) {
        return;
      }
      ProjectUtil.openOrImport(presentableUrl,null,true);
    }
  }
,ModalityState.NON_MODAL);
}
