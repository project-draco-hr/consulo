{
  final PsiFile psiFile=myToolWindowForm.getFile();
  if (psiFile == null) {
    return;
  }
  final String layoutXmlText=psiFile.getText();
  final AndroidFacet facet=AndroidFacet.getInstance(psiFile);
  if (facet == null) {
    return;
  }
  myRenderingQueue.queue(new Update("render"){
    @Override public void run(){
      if (showProgress || myToolWindowForm.getPreviewPanel().getImage() == null) {
        ApplicationManager.getApplication().invokeAndWait(new Runnable(){
          @Override public void run(){
            myToolWindowForm.getPreviewPanel().showProgress();
          }
        }
,ModalityState.defaultModalityState());
      }
      doRender(facet,layoutXmlText);
    }
    @Override public boolean canEat(    Update update){
      return true;
    }
  }
);
}
