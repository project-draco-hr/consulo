{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myToolWindow == null || !myToolWindow.isVisible()) {
    return;
  }
  final PsiFile psiFile=myToolWindowForm.getFile();
  if (psiFile == null) {
    return;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(psiFile);
  if (facet == null) {
    return;
  }
  myRenderingQueue.queue(new Update("render"){
    @Override public void run(){
      ProgressManager.getInstance().runProcess(new Runnable(){
        @Override public void run(){
          DumbService.getInstance(myProject).waitForSmartMode();
          doRender(facet,psiFile);
        }
      }
,new MyProgressIndicator());
    }
    @Override public boolean canEat(    Update update){
      return true;
    }
  }
);
}
