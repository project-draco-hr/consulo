{
  ArrayList<String> strings=new ArrayList<String>(2000);
  for (int i=0; i < 2000; ++i) {
    strings.add(createRandomString());
  }
  for (int i=0; i < 2000; ++i) {
    myEnumerator.enumerate(strings.get(i));
    myEnumerator.close();
    myEnumerator=new TestStringEnumerator(myFile);
  }
  for (int i=0; i < 2000; ++i) {
    myEnumerator.enumerate(strings.get(i));
    assertTrue(!myEnumerator.isDirty());
    myEnumerator.close();
    myEnumerator=new TestStringEnumerator(myFile);
  }
  for (int i=0; i < 2000; ++i) {
    assertTrue(!myEnumerator.isDirty());
    myEnumerator.close();
    myEnumerator=new TestStringEnumerator(myFile);
  }
  final HashSet<String> allStringsSet=new HashSet<String>(strings);
  assertEquals(allStringsSet,new HashSet<String>(myEnumerator.getAllDataObjects(null)));
  final String additionalString=createRandomString();
  allStringsSet.add(additionalString);
  myEnumerator.enumerate(additionalString);
  assertTrue(myEnumerator.isDirty());
  assertEquals(allStringsSet,new HashSet<String>(myEnumerator.getAllDataObjects(null)));
}
