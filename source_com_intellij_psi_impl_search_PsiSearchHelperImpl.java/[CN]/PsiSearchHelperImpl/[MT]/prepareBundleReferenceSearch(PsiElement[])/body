{
  SearchDescriptor descriptor=new SearchDescriptor();
  for (  PsiElement refElement : refElements) {
    if (refElement instanceof PsiNamedElement) {
      String name=((PsiNamedElement)refElement).getName();
      if (name != null) {
        PsiFile[] files=myManager.getCacheManager().getFilesWithWord(name,UsageSearchContext.IN_CODE,GlobalSearchScope.allScope(myManager.getProject()));
        descriptor.myNames.add(name);
        descriptor.myFiles.addAll(Arrays.asList(files));
        descriptor.myElements.add(refElement);
      }
    }
  }
  return descriptor;
}
