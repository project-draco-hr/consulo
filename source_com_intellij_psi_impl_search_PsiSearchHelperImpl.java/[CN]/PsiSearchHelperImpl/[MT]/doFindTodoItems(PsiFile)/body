{
  final Collection<IndexPatternOccurrence> occurrences=IndexPatternSearch.search(file,TodoConfiguration.getInstance()).findAll();
  if (occurrences.isEmpty()) {
    return EMPTY_TODO_ITEMS;
  }
  TodoItem[] items=new TodoItem[occurrences.size()];
  int index=0;
  for (  IndexPatternOccurrence occurrence : occurrences) {
    items[index++]=new TodoItemImpl(occurrence.getFile(),occurrence.getTextRange().getStartOffset(),occurrence.getTextRange().getEndOffset(),mapPattern(occurrence.getPattern()));
  }
  return items;
}
