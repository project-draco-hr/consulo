{
  if (checkInheritance || (checkDeep && !(candidate instanceof PsiAnonymousClass))) {
    if (!candidate.isInheritor(baseClass,false))     return true;
  }
  if (processed.contains(candidate))   return true;
  processed.add(candidate);
  if (candidate instanceof PsiAnonymousClass) {
    if (!processor.execute(candidate))     return false;
  }
 else {
    if (PsiSearchScopeUtil.isInScope(searchScope,candidate)) {
      if (searchScope instanceof GlobalSearchScope) {
        String qName=candidate.getQualifiedName();
        if (qName != null) {
          PsiClass candidate1=myManager.findClass(qName,(GlobalSearchScope)searchScope);
          if (candidate != candidate1)           return true;
        }
      }
      if (!processor.execute(candidate))       return false;
    }
    if (checkDeep) {
      if (!processInheritors(processor,candidate,searchScope,checkDeep,processed,checkInheritance))       return false;
    }
  }
  return true;
}
