{
  DefaultActionGroup group=new DefaultActionGroup();
  List<Charset> favorites=new ArrayList<Charset>(EncodingManager.getInstance().getFavorites());
  Collections.sort(favorites);
  Charset current=myVirtualFile == null ? null : charsetFromContent(myVirtualFile);
  favorites.remove(current);
  if (showClear) {
    group.add(new ClearThisFileEncodingAction(myVirtualFile));
  }
  fillCharsetActions(group,myVirtualFile,favorites);
  DefaultActionGroup more=new DefaultActionGroup("more",true);
  group.add(more);
  fillCharsetActions(more,myVirtualFile,Arrays.asList(CharsetToolkit.getAvailableCharsets()));
  return group;
}
