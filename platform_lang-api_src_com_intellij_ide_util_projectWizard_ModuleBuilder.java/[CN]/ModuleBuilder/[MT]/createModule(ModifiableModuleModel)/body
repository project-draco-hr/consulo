{
  LOG.assertTrue(myName != null);
  LOG.assertTrue(myModuleFilePath != null);
  deleteModuleFile(myModuleFilePath);
  final ModuleType moduleType=getModuleType();
  final Module module=moduleModel.newModule(myModuleFilePath,moduleType.getId());
  final ModifiableRootModel modifiableModel=ModuleRootManager.getInstance(module).getModifiableModel();
  setupRootModel(modifiableModel);
  for (  ModuleConfigurationUpdater updater : myUpdaters) {
    updater.update(module,modifiableModel);
  }
  modifiableModel.commit();
  return module;
}
