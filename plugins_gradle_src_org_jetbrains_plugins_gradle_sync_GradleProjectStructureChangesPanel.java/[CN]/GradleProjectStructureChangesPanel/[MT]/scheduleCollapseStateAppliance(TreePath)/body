{
  myPathsToProcessCollapseState.add(path);
  myCollapseStateAlarm.addRequest(new Runnable(){
    @Override public void run(){
      myCollapseStateAlarm.cancelAllRequests();
      Collections.sort(myPathsToProcessCollapseState,PATH_COMPARATOR);
      for (      TreePath treePath : myPathsToProcessCollapseState) {
        applyCollapseState(treePath);
      }
      myPathsToProcessCollapseState.clear();
      final TreePath rootPath=new TreePath(myTreeModel.getRoot());
      if (myTree.isCollapsed(rootPath)) {
        myTree.expandPath(rootPath);
      }
    }
  }
,COLLAPSE_STATE_PROCESSING_DELAY_MILLIS);
}
