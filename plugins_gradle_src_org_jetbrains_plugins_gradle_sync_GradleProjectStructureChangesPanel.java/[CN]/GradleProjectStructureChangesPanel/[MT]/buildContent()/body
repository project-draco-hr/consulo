{
  JPanel result=new JPanel(new GridBagLayout());
  myTreeModel=null;
  myTree=new Tree(myTreeModel);
  myTree.addTreeWillExpandListener(new TreeWillExpandListener(){
    @Override public void treeWillExpand(    TreeExpansionEvent event) throws ExpandVetoException {
      if (!mySuppressCollapseTracking) {
        mySettings.getWorkingExpandStates().put(getPath(event.getPath()),true);
      }
    }
    @Override public void treeWillCollapse(    TreeExpansionEvent event) throws ExpandVetoException {
      if (!mySuppressCollapseTracking) {
        mySettings.getWorkingExpandStates().put(getPath(event.getPath()),false);
      }
    }
  }
);
  myTreeModel.addTreeModelListener(new TreeModelAdapter(){
    @Override public void treeStructureChanged(    TreeModelEvent e){
      scheduleCollapseStateAppliance(e.getTreePath());
    }
    @Override public void treeNodesInserted(    TreeModelEvent e){
      scheduleCollapseStateAppliance(e.getTreePath());
    }
  }
);
  new TreeSpeedSearch(myTree,TreeSpeedSearch.NODE_DESCRIPTOR_TOSTRING,true);
  TreeUtil.installActions(myTree);
  GridBagConstraints constraints=new GridBagConstraints();
  constraints.gridwidth=GridBagConstraints.REMAINDER;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.fill=GridBagConstraints.BOTH;
  constraints.weightx=constraints.weighty=1;
  result.add(myTree,constraints);
  result.setBackground(myTree.getBackground());
  CustomizationUtil.installPopupHandler(myTree,GradleConstants.ACTION_GROUP_SYNC_TREE,GradleConstants.SYNC_TREE_CONTEXT_MENU_PLACE);
  myTree.addMouseMotionListener(new MouseMotionAdapter(){
    @Override public void mouseMoved(    MouseEvent e){
      final TreePath path=myTree.getPathForLocation(e.getX(),e.getY());
      if (path == null) {
        return;
      }
      myNodeUnderMouse=path.getLastPathComponent();
    }
  }
);
  return result;
}
