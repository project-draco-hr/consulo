{
  myShouldSynchronize=false;
  mySyncAlarm=new Alarm();
  app.addApplicationListener(new ApplicationAdapter(){
    @Override public void applicationActivated(    IdeFrame ideFrame){
      mySyncAlarm.cancelAllRequests();
      if (myShouldSynchronize) {
        myShouldSynchronize=false;
        fireActivationEvent();
      }
    }
    @Override public void applicationDeactivated(    IdeFrame ideFrame){
      mySyncAlarm.cancelAllRequests();
      mySyncAlarm.addRequest(new Runnable(){
        public void run(){
          if (!app.isActive()) {
            myShouldSynchronize=true;
            fireDeactivationEvent();
          }
        }
      }
,200);
    }
  }
);
}
