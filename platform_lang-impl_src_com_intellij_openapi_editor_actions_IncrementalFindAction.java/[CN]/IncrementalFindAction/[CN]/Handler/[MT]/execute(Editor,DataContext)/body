{
  final Project project=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(editor.getComponent()));
  if (!editor.isOneLineMode()) {
    final JComponent headerComponent=editor.getHeaderComponent();
    if (headerComponent instanceof EditorSearchComponent) {
      ((EditorSearchComponent)headerComponent).setInitialText(editor.getSelectionModel().getSelectedText());
      headerComponent.requestFocus();
    }
 else {
      final EditorSearchComponent header=new EditorSearchComponent(editor,project);
      editor.setHeaderComponent(header);
      header.requestFocus();
    }
  }
}
