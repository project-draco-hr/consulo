{
  root.createChildData(null,"dummy.java");
  getVcs().beginChangeSet();
  VirtualFile f=root.createChildData(null,"f.java");
  f.setBinaryContent("content".getBytes(),-1,123);
  getVcs().endChangeSet(null);
  f.delete(null);
  HistoryDialogModel dm=createModelAndSelectRevisions(0,1);
  FileDifferenceModel m=((DirectoryChange)dm.getChanges().get(0)).getFileDifferenceModel();
  assertTrue(m.getTitle(),m.getTitle().endsWith("f.java"));
  assertTrue(m.getLeftTitle(new NullRevisionsProgress()).endsWith("f.java"));
  assertEquals("File does not exist",m.getRightTitle(new NullRevisionsProgress()));
  assertContents(m,"content","");
  dm.selectRevisions(1,2);
  m=((DirectoryChange)dm.getChanges().get(0)).getFileDifferenceModel();
  assertTrue(m.getTitle(),m.getTitle().endsWith("f.java"));
  assertEquals("File does not exist",m.getLeftTitle(new NullRevisionsProgress()));
  assertTrue(m.getRightTitle(new NullRevisionsProgress()).endsWith("f.java"));
  assertContents(m,"","content");
}
