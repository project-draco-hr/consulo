{
  final PsiParameter parameter=statement.getIterationParameter();
  final PsiExpression expression=statement.getIteratedValue();
  if (expression == null)   return null;
  final PsiType itemType=getCollectionItemType(expression);
  if (itemType == null) {
    String description=JavaErrorMessages.message("foreach.not.applicable",HighlightUtil.formatType(expression.getType()));
    return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,expression,description);
  }
  final int start=parameter.getTextRange().getStartOffset();
  final int end=expression.getTextRange().getEndOffset();
  final PsiType parameterType=parameter.getType();
  HighlightInfo highlightInfo=HighlightUtil.checkAssignability(parameterType,itemType,null,new TextRange(start,end));
  if (highlightInfo != null) {
    String displayName=UncheckedWarningLocalInspection.DISPLAY_NAME;
    QuickFixAction.registerQuickFixAction(highlightInfo,new VariableTypeFix(parameter,itemType),(HighlightDisplayKey)null);
  }
 else {
    highlightInfo=checkRawToGenericAssignment(parameterType,itemType,statement.getIterationParameter());
  }
  return highlightInfo;
}
