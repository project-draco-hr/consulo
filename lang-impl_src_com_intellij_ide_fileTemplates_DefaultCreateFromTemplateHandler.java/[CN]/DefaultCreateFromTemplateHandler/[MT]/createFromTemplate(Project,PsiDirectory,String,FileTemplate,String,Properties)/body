{
  final String suggestedFileNameEnd="." + template.getExtension();
  if (!fileName.endsWith(suggestedFileNameEnd)) {
    fileName+=suggestedFileNameEnd;
  }
  directory.checkCreateFile(fileName);
  PsiFile file=PsiFileFactory.getInstance(project).createFileFromText(fileName,templateText);
  file=(PsiFile)directory.add(file);
  return file;
}
