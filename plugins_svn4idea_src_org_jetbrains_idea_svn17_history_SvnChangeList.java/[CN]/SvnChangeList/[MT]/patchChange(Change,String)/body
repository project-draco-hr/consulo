{
  final SVNURL becameUrl;
  SVNURL wasUrl;
  try {
    becameUrl=SVNURL.parseURIEncoded(SVNPathUtil.append(myRepositoryRoot,path));
    wasUrl=becameUrl;
    if (change instanceof ExternallyRenamedChange && change.getBeforeRevision() != null) {
      final ExternallyRenamedChange renamedChange=(ExternallyRenamedChange)change;
      final String originUrl=renamedChange.getOriginUrl();
      if (originUrl != null) {
        wasUrl=SVNURL.parseURIEncoded(SVNPathUtil.append(myRepositoryRoot,originUrl));
      }
    }
  }
 catch (  SVNException e) {
    LOG.info(e);
    return;
  }
  final FilePath filePath=ChangesUtil.getFilePath(change);
  final SimpleContentRevision before=createRevisionForProperty(wasUrl,change.getBeforeRevision(),filePath);
  final SimpleContentRevision after=createRevisionForProperty(becameUrl,change.getAfterRevision(),filePath);
  final String beforeText=before == null ? null : before.getContent();
  final String afterText=after == null ? null : after.getContent();
  if (Comparing.equal(beforeText,afterText))   return;
  final Change additional=new Change(before,after);
  change.addAdditionalLayerElement(SvnChangeProvider.PROPERTY_LAYER,additional);
}
