{
  Project project=e.getData(DataKeys.PROJECT);
  final List<FilePath> files=e.getData(ChangesListView.MISSING_FILES_DATA_KEY);
  if (files == null)   return;
  ChangesUtil.processFilePathsByVcs(project,files,new ChangesUtil.PerVcsProcessor<FilePath>(){
    public void process(    final AbstractVcs vcs,    final List<FilePath> items){
      final CheckinEnvironment environment=vcs.getCheckinEnvironment();
      if (environment != null) {
        processFiles(environment,files);
      }
    }
  }
);
  for (  FilePath file : files) {
    VcsDirtyScopeManager.getInstance(project).fileDirty(file);
  }
  ChangesViewManager.getInstance(project).scheduleRefresh();
}
