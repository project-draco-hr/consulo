{
  if (!mySyncMarkerIsValid)   return null;
  if (!myFile.isValid())   return null;
  PsiElement anchor=myFile.findElementAt(mySyncStartOffset);
  if (anchor == null)   return null;
  TextRange range=anchor.getTextRange();
  if (range.getStartOffset() != mySyncStartOffset || range.getEndOffset() != mySyncEndOffset)   return null;
  if (anchor instanceof PsiIdentifier) {
    PsiElement parent=anchor.getParent();
    if (parent instanceof PsiJavaCodeReferenceElement) {
      parent=parent.getParent();
    }
    if (!anchor.equals(getAnchor(parent)))     return null;
    return parent;
  }
 else   if (anchor instanceof XmlToken) {
    XmlToken token=(XmlToken)anchor;
    if (token.getTokenType() == XmlTokenType.XML_NAME) {
      return token.getParent();
    }
 else {
      return null;
    }
  }
 else {
    return null;
  }
}
