{
  final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
  final long contentLength=content.getLength();
  boolean counterUpdated=false;
  try {
synchronized (this) {
      while (myTotalSize > SIZE_THRESHOLD) {
        if (indicator != null) {
          indicator.checkCanceled();
        }
        wait(300);
      }
      myTotalSize+=contentLength;
      counterUpdated=true;
    }
    content.getBytes();
    return true;
  }
 catch (  Throwable e) {
    if (counterUpdated) {
synchronized (this) {
        myTotalSize-=contentLength;
        notifyAll();
      }
    }
    if (e instanceof ProcessCanceledException)     throw (ProcessCanceledException)e;
    if (e instanceof InterruptedException)     throw (InterruptedException)e;
    if (e instanceof IOException || e instanceof InvalidVirtualFileAccessException)     LOG.info(e);
 else     if (ApplicationManager.getApplication().isUnitTestMode()) {
      e.printStackTrace();
    }
 else {
      LOG.error(e);
    }
    return false;
  }
}
