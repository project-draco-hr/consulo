{
  final long length=content.getLength();
  while (true) {
    indicator.checkCanceled();
synchronized (this) {
      boolean requestingLargeSize=length > LARGE_SIZE_REQUEST_THRESHOLD;
      if (requestingLargeSize) {
        myLargeSizeRequested=true;
      }
      try {
        if (myLargeSizeRequested && !requestingLargeSize || myTakenSize + length > Math.max(TAKEN_FILES_THRESHOLD,length))         wait(300L);
 else {
          myTakenSize+=length;
          if (requestingLargeSize) {
            myLargeSizeRequested=false;
          }
          return;
        }
      }
 catch (      InterruptedException ignore) {
      }
    }
  }
}
