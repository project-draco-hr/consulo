{
  FileContent content=doTake();
  if (content != null) {
synchronized (this) {
      while (myTakenSize > TAKEN_FILES_THRESHOLD) {
        final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
        if (indicator != null) {
          indicator.checkCanceled();
        }
        try {
          wait(300);
        }
 catch (        InterruptedException ignore) {
        }
      }
      myTakenSize+=content.getLength();
      notifyAll();
    }
  }
  return content;
}
