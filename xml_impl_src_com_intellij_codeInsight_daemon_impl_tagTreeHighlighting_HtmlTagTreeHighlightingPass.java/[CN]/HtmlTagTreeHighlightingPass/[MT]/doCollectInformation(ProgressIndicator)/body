{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return;
  }
  if (!WebEditorOptions.getInstance().isTagTreeHighlightingEnabled()) {
    return;
  }
  final PsiElement[] elements=BreadcrumbsXmlWrapper.getLinePsiElements(myEditor.getCaretModel().getOffset(),myFile.getVirtualFile(),myProject,myInfoProvider);
  if (elements == null || elements.length == 0) {
    return;
  }
  if (!HtmlTagTreeHighlightingUtil.containsTagsWithSameName(elements)) {
    return;
  }
  for (int i=elements.length - 1; i >= 0; i--) {
    if (elements[i] instanceof XmlTag) {
      myPairsToHighlight.add(getTagRanges((XmlTag)elements[i]));
    }
  }
}
