{
  final CoreModule module=new CoreModule(myParentDisposable,myProject,filePath);
  VirtualFile vFile=StandardFileSystems.local().findFileByPath(filePath);
  try {
    StorageData storageData=CoreProjectLoader.loadStorageFile(module,vFile);
    final Element element=storageData.getState("NewModuleRootManager");
    ModuleRootManagerImpl.ModuleRootManagerState state=new ModuleRootManagerImpl.ModuleRootManagerState();
    state.readExternal(element);
    ((ModuleRootManagerImpl)ModuleRootManager.getInstance(module)).loadState(state);
  }
 catch (  JDOMException e) {
    throw new StateStorageException(e);
  }
catch (  InvalidDataException e) {
    throw new StateStorageException(e);
  }
  return module;
}
