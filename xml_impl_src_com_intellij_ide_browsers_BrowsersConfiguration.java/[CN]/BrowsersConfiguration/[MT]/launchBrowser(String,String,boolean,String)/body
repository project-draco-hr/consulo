{
  final String[] command=BrowserUtil.getOpenBrowserCommand(browserPath);
  String[] args=ArrayUtil.append(browserArgs,url);
  if (SystemInfo.isMac && ExecUtil.getOpenCommandPath().equals(command[0])) {
    if (browserArgs.length > 0) {
      if (BrowserUtil.isOpenCommandSupportArgs()) {
        args=ArrayUtil.mergeArrays(new String[]{url,"--args"},browserArgs);
      }
 else {
        args=new String[]{url};
        LOG.warn("'open' command doesn't allow to pass command line arguments so they will be ignored: " + Arrays.toString(args));
      }
    }
    if (forceOpenNewInstanceOnMac) {
      args=ArrayUtil.mergeArrays(new String[]{"-n"},args);
    }
  }
  final String[] commandLine=ArrayUtil.mergeArrays(command,args);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Launching browser: " + Arrays.toString(commandLine));
  }
  Runtime.getRuntime().exec(commandLine);
}
