{
  final String name=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
    public String compute(){
      String name=jdiName;
      int startFrom=0;
      final PsiManager psiManager=PsiManager.getInstance(project);
      while (true) {
        final int separator=name.indexOf('$',startFrom);
        if (separator < 0) {
          break;
        }
        final String qualifiedName=name.substring(0,separator);
        final PsiClass psiClass=JavaPsiFacade.getInstance(psiManager.getProject()).findClass(qualifiedName,GlobalSearchScope.allScope(project));
        if (psiClass != null) {
          int tail=separator + 1;
          while (tail < name.length() && Character.isDigit(name.charAt(tail)))           tail++;
          name=qualifiedName + "." + name.substring(tail);
        }
        startFrom=separator + 1;
      }
      return name;
    }
  }
);
  if (jdiName.equals(name)) {
    return jdiName.replace('$','.');
  }
  return name;
}
