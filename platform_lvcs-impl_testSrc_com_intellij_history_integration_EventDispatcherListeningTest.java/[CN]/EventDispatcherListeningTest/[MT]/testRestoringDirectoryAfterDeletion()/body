{
  vcs.createDirectory("dir");
  long timestamp=-1;
  vcs.createFile("dir/f",cf("one"),timestamp,false);
  vcs.changeFileContent("dir/f",cf("two"),-1);
  Entry dir=vcs.getEntry("dir");
  Entry f=vcs.getEntry("dir/f");
  vcs.delete("dir");
  fireCreated(testDir("dir"),dir);
  fireCreated(testFile("dir/f","two_restored"),f);
  vcs.changeFileContent("dir/f",cf("three"),-1);
  List<Revision> rr=vcs.getRevisionsFor("dir");
  assertEquals(6,rr.size());
  assertEquals(c("three"),rr.get(0).getEntry().findChild("f").getContent());
  assertEquals(c("two_restored"),rr.get(1).getEntry().findChild("f").getContent());
  assertNull(rr.get(2).getEntry().findChild("f"));
  assertEquals(c("two"),rr.get(3).getEntry().findChild("f").getContent());
  assertEquals(c("one"),rr.get(4).getEntry().findChild("f").getContent());
  assertNull(rr.get(5).getEntry().findChild("f"));
}
