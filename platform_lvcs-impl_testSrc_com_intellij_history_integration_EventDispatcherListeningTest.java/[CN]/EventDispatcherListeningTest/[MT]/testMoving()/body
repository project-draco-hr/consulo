{
  vcs.createDirectory("dir1");
  vcs.createDirectory("dir2");
  long timestamp=-1;
  vcs.createFile("dir1/file",cf("content"),timestamp,false);
  TestVirtualFile oldParent=testDir("dir1");
  TestVirtualFile newParent=testDir("dir2");
  TestVirtualFile f=testFile("file");
  newParent.addChild(f);
  fireMoved(f,oldParent,newParent);
  assertFalse(vcs.hasEntry("dir1/file"));
  Entry e=vcs.findEntry("dir2/file");
  assertNotNull(e);
  assertEquals(c("content"),e.getContent());
}
