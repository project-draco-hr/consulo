{
  PsiExpression ancestor=exp;
  PsiElement parent=ancestor.getParent();
  while (parent instanceof PsiParenthesizedExpression) {
    ancestor=(PsiExpression)parent;
    parent=ancestor.getParent();
  }
  if (parent instanceof PsiPrefixExpression) {
    final PsiPrefixExpression prefixAncestor=(PsiPrefixExpression)parent;
    final IElementType tokenType=prefixAncestor.getOperationTokenType();
    if (tokenType.equals(JavaTokenType.EXCL)) {
      return true;
    }
  }
  return false;
}
