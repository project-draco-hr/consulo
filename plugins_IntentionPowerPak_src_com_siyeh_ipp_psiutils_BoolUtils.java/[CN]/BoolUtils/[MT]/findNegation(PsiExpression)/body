{
  PsiExpression ancestor=exp;
  while (ancestor.getParent() instanceof PsiParenthesizedExpression) {
    ancestor=(PsiExpression)ancestor.getParent();
  }
  if (ancestor.getParent() instanceof PsiPrefixExpression) {
    final PsiPrefixExpression prefixAncestor=(PsiPrefixExpression)ancestor.getParent();
    final PsiJavaToken sign=prefixAncestor.getOperationSign();
    if (JavaTokenType.EXCL.equals(sign.getTokenType())) {
      return prefixAncestor;
    }
  }
  return null;
}
