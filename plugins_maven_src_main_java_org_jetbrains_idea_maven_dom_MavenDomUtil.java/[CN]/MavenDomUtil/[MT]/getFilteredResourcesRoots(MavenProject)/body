{
  Pair<Long,Set<VirtualFile>> cachedValue=mavenProject.getCachedValue(FILTERED_RESOURCES_ROOTS_KEY);
  if (cachedValue == null || cachedValue.first != VirtualFileManager.getInstance().getModificationCount()) {
    Set<VirtualFile> set=null;
    for (    MavenResource resource : mavenProject.getResources()) {
      if (!resource.isFiltered())       continue;
      VirtualFile resourceDir=LocalFileSystem.getInstance().findFileByPath(resource.getDirectory());
      if (resourceDir == null)       continue;
      if (set == null) {
        set=new HashSet<VirtualFile>();
      }
      set.add(resourceDir);
    }
    if (set == null) {
      set=Collections.emptySet();
    }
    cachedValue=Pair.create(VirtualFileManager.getInstance().getModificationCount(),set);
    mavenProject.putCachedValue(FILTERED_RESOURCES_ROOTS_KEY,cachedValue);
  }
  return cachedValue.second;
}
