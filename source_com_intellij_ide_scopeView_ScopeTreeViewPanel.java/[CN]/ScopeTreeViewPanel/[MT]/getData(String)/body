{
  if (dataId.equals(DataConstants.MODULE_CONTEXT)) {
    final TreePath selectionPath=myTree.getSelectionPath();
    if (selectionPath != null) {
      PackageDependenciesNode node=(PackageDependenciesNode)selectionPath.getLastPathComponent();
      if (node instanceof ModuleNode) {
        return ((ModuleNode)node).getModule();
      }
    }
  }
  if (dataId.equals(DataConstants.PSI_ELEMENT)) {
    final TreePath selectionPath=myTree.getSelectionPath();
    if (selectionPath != null) {
      PackageDependenciesNode node=(PackageDependenciesNode)selectionPath.getLastPathComponent();
      return node != null ? node.getPsiElement() : null;
    }
  }
  final TreePath[] treePaths=myTree.getSelectionPaths();
  if (treePaths != null) {
    if (dataId.equals(DataConstants.PSI_ELEMENT_ARRAY)) {
      Set<PsiElement> psiElements=new HashSet<PsiElement>();
      for (      TreePath treePath : treePaths) {
        final PackageDependenciesNode node=(PackageDependenciesNode)treePath.getLastPathComponent();
        final PsiElement psiElement=node.getPsiElement();
        if (psiElement != null) {
          psiElements.add(psiElement);
        }
      }
      return psiElements.isEmpty() ? null : psiElements.toArray(new PsiElement[psiElements.size()]);
    }
  }
  if (dataId.equals(DataConstants.IDE_VIEW)) {
    return myIdeView;
  }
  if (DataConstants.CUT_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCutProvider();
  }
  if (DataConstants.COPY_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getCopyProvider();
  }
  if (DataConstants.PASTE_PROVIDER.equals(dataId)) {
    return myCopyPasteDelegator.getPasteProvider();
  }
  if (DataConstants.DELETE_ELEMENT_PROVIDER.equals(dataId)) {
    if (getSelectedModules() != null) {
      return myDeleteModuleProvider;
    }
    if (getSelectedPsiElements() != null) {
      return myDeletePSIElementProvider;
    }
  }
  return null;
}
