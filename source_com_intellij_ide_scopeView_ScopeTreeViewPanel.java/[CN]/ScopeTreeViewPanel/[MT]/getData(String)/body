{
  if (dataId.equals(DataConstants.PROJECT)) {
    return myProject;
  }
  if (dataId.equals(DataConstants.MODULE)) {
    final TreePath selectionPath=myTree.getSelectionPath();
    if (selectionPath != null) {
      PackageDependenciesNode node=(PackageDependenciesNode)selectionPath.getLastPathComponent();
      if (node instanceof ModuleNode) {
        return ((ModuleNode)node).getModule();
      }
 else {
        final PsiElement psiElement=node.getPsiElement();
        if (psiElement != null) {
          return ModuleUtil.findModuleForPsiElement(psiElement);
        }
      }
    }
  }
  if (dataId.equals(DataConstants.PSI_ELEMENT)) {
    final TreePath selectionPath=myTree.getSelectionPath();
    if (selectionPath != null) {
      PackageDependenciesNode node=(PackageDependenciesNode)selectionPath.getLastPathComponent();
      return node != null ? node.getPsiElement() : null;
    }
  }
  final TreePath[] treePaths=myTree.getSelectionPaths();
  if (treePaths != null) {
    if (dataId.equals(DataConstantsEx.PSI_ELEMENT_ARRAY)) {
      Set<PsiElement> psiElements=new HashSet<PsiElement>();
      for (      TreePath treePath : treePaths) {
        final PackageDependenciesNode node=(PackageDependenciesNode)treePath.getLastPathComponent();
        final PsiElement psiElement=node.getPsiElement();
        if (psiElement != null) {
          psiElements.add(psiElement);
        }
      }
      return psiElements.isEmpty() ? null : psiElements.toArray(new PsiElement[psiElements.size()]);
    }
  }
  return null;
}
