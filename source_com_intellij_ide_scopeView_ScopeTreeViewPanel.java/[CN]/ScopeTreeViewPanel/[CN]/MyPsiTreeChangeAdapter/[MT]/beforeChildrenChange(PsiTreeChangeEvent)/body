{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      if (myProject.isDisposed())       return;
      final PsiElement parent=event.getParent();
      PsiJavaFile file=PsiTreeUtil.getParentOfType(parent,PsiJavaFile.class,false);
      if (file != null) {
        final PackageDependenciesNode parentNode=myBuilder.getFileParentNode(file);
        final TreePath treePath=new TreePath(parentNode.getPath());
        if (!myTree.isCollapsed(treePath)) {
          myTree.collapsePath(treePath);
          myTree.expandPath(treePath);
          TreeUtil.sort(parentNode,new DependencyNodeComparator());
        }
      }
    }
  }
,ModalityState.NON_MMODAL);
}
