{
  queueUpdate(new Runnable(){
    public void run(){
      if (myProject.isDisposed())       return;
      final PsiElement oldParent=event.getOldParent();
      final PsiElement newParent=event.getNewParent();
      PsiElement child=event.getChild();
      myTreeExpansionMonitor.freeze();
      if (oldParent instanceof PsiDirectory && newParent instanceof PsiDirectory) {
        if (child instanceof PsiFile) {
          collapseExpand(myBuilder.removeNode(child,(PsiDirectory)oldParent));
          collapseExpand(myBuilder.addFileNode((PsiFile)child));
        }
      }
      myTreeExpansionMonitor.restore();
    }
  }
);
}
