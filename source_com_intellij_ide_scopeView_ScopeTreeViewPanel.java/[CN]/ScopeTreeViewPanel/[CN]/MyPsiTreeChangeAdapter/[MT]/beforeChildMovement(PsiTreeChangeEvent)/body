{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      if (myProject.isDisposed())       return;
      final PsiElement oldParent=event.getOldParent();
      final PsiElement newParent=event.getNewParent();
      PsiElement child=event.getChild();
      if (oldParent instanceof PsiDirectory && newParent instanceof PsiDirectory) {
        if (child instanceof PsiFile) {
          myBuilder.removeNode(child,(PsiDirectory)oldParent);
          myBuilder.addFileNode((PsiFile)child);
        }
      }
    }
  }
,ModalityState.NON_MMODAL);
}
