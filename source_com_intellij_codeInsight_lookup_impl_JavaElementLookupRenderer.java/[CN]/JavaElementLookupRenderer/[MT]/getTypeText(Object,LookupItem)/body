{
  String text=null;
  if (showSignature(item)) {
    PsiType typeAttr=(PsiType)item.getAttribute(LookupItem.TYPE_ATTR);
    if (typeAttr != null) {
      text=typeAttr.getPresentableText();
    }
 else {
      if (o instanceof PsiElement) {
        final PsiElement element=(PsiElement)o;
        if (element.isValid()) {
          if (element instanceof PsiMethod) {
            PsiMethod method=(PsiMethod)element;
            PsiType returnType=method.getReturnType();
            if (returnType != null) {
              final PsiSubstitutor substitutor=(PsiSubstitutor)item.getAttribute(LookupItem.SUBSTITUTOR);
              if (substitutor != null) {
                text=substitutor.substitute(returnType).getPresentableText();
              }
 else {
                text=returnType.getPresentableText();
              }
            }
          }
 else           if (element instanceof PsiVariable) {
            PsiVariable variable=(PsiVariable)element;
            text=variable.getType().getPresentableText();
          }
 else           if (element instanceof PsiExpression) {
            PsiExpression expression=(PsiExpression)element;
            PsiType type=expression.getType();
            if (type != null) {
              text=type.getPresentableText();
            }
          }
        }
      }
    }
  }
  return text;
}
