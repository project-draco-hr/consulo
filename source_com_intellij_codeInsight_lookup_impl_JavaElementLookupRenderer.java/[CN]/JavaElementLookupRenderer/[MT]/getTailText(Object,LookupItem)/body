{
  String text=null;
  if (o instanceof PsiElement) {
    final PsiElement element=(PsiElement)o;
    if (element.isValid() && element instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)element;
      final PsiSubstitutor substitutor=(PsiSubstitutor)item.getAttribute(LookupItem.SUBSTITUTOR);
      text=PsiFormatUtil.formatMethod(method,substitutor != null ? substitutor : PsiSubstitutor.EMPTY,PsiFormatUtil.SHOW_PARAMETERS,PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_TYPE);
    }
  }
  String tailText=(String)item.getAttribute(LookupItem.TAIL_TEXT_ATTR);
  if (tailText != null) {
    if (text == null) {
      text=tailText;
    }
 else {
      text+=tailText;
    }
  }
  if (item.getAttribute(LookupItem.INDICATE_ANONYMOUS) != null) {
    if (o instanceof PsiClass) {
      final PsiClass psiClass=(PsiClass)o;
      if (psiClass.isInterface() || psiClass.hasModifierProperty(PsiModifier.ABSTRACT)) {
        text+="{...}";
      }
    }
  }
  return text;
}
