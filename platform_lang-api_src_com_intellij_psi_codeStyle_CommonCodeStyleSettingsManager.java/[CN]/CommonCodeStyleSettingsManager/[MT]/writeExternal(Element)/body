{
  if (myCommonSettingsMap == null)   return;
  final Map<String,Language> id2lang=new HashMap<String,Language>();
  for (  final Language language : myCommonSettingsMap.keySet()) {
    id2lang.put(language.getID(),language);
  }
  final Set<String> langIdList=new HashSet<String>();
  langIdList.addAll(myUnknownSettingsMap.keySet());
  langIdList.addAll(id2lang.keySet());
  final String[] languages=langIdList.toArray(new String[langIdList.size()]);
  Arrays.sort(languages,new Comparator<String>(){
    public int compare(    final String o1,    final String o2){
      return o1.compareTo(o2);
    }
  }
);
  for (  final String id : languages) {
    final Language language=id2lang.get(id);
    if (language != null) {
      final CommonCodeStyleSettings commonSettings=myCommonSettingsMap.get(language);
      Element commonSettingsElement=new Element(COMMON_SETTINGS_TAG);
      commonSettings.writeExternal(commonSettingsElement);
      commonSettingsElement.setAttribute(LANGUAGE_ATTR,language.getID());
      if (!commonSettingsElement.getChildren().isEmpty()) {
        element.addContent(commonSettingsElement);
      }
    }
 else {
      final Content unknown=myUnknownSettingsMap.get(id);
      if (unknown != null)       element.addContent(unknown.detach());
    }
  }
}
