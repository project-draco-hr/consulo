{
  for (int idx=0; idx < directories.length; idx++) {
    final VirtualFile outputDir=directories[idx];
    final String path=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
      public String compute(){
        return outputDir.getPath();
      }
    }
);
    visitor.accept(outputDir,path,path);
  }
}
