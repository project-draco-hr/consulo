{
  if (focusedWindow instanceof JDialog) {
    final JDialog dialog=(JDialog)focusedWindow;
    if (dialog.isModal() && dialog.getRootPane() != null) {
      final InputMap inputMap=dialog.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
      if (inputMap != null) {
        final KeyStroke stroke=KeyStroke.getKeyStrokeForEvent(e);
        if (inputMap.get(stroke) != null)         return true;
      }
    }
  }
  return false;
}
