{
  if (type instanceof PsiClassType) {
    final PsiClassType.ClassResolveResult resolveResult=((PsiClassType)type).resolveGenerics();
    final PsiClass psiClass=resolveResult.getElement();
    final PsiSubstitutor substitutor=state.get(PsiSubstitutor.KEY);
    state=state.put(PsiSubstitutor.KEY,substitutor.putAll(resolveResult.getSubstitutor()));
    if (psiClass != null) {
      if (!psiClass.processDeclarations(processor,state,null,place))       return false;
    }
  }
  if (!processNonCodeMembers(type,nonCodeProcessor,place,state))   return false;
  if (!processCategoryMembers(place,nonCodeProcessor,state))   return false;
  return true;
}
