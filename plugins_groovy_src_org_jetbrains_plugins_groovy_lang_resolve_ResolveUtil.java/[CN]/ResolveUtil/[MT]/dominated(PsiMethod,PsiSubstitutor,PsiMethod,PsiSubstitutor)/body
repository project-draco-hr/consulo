{
  if (!method1.getName().equals(method2.getName()))   return false;
  if (method1 instanceof GrReflectedMethod && method2 instanceof GrReflectedMethod) {
    final GrMethod base1=((GrReflectedMethod)method1).getBaseMethod();
    final GrMethod base2=((GrReflectedMethod)method2).getBaseMethod();
    if (base1 == base2) {
      return method1.getParameterList().getParametersCount() > method2.getParameterList().getParametersCount();
    }
  }
  PsiParameter[] params1=method1.getParameterList().getParameters();
  PsiParameter[] params2=method2.getParameterList().getParameters();
  if (params1.length != params2.length)   return false;
  for (int i=0; i < params2.length; i++) {
    PsiType type1=substitutor1.substitute(params1[i].getType());
    PsiType type2=substitutor2.substitute(params2[i].getType());
    if (!type1.equals(type2))     return false;
  }
  if (method1 instanceof GrGdkMethod && method2 instanceof GrGdkMethod) {
    PsiMethod static1=((GrGdkMethod)method1).getStaticMethod();
    PsiMethod static2=((GrGdkMethod)method2).getStaticMethod();
    PsiParameter p1=static1.getParameterList().getParameters()[0];
    PsiParameter p2=static2.getParameterList().getParameters()[0];
    PsiType t1=substitutor1.substitute(p1.getType());
    PsiType t2=substitutor2.substitute(p2.getType());
    if (!t1.equals(t2)) {
      return t1.isAssignableFrom(t2);
    }
  }
  return true;
}
