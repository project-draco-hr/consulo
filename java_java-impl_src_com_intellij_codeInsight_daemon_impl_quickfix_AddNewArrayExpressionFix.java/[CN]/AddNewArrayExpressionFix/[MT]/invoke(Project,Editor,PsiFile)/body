{
  if (!CodeInsightUtilBase.preparePsiElementsForWrite(myInitializer,file))   return;
  PsiManager manager=file.getManager();
  PsiExpression expr=myInitializer.getInitializers()[0];
  PsiType type=expr.getType();
  PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  @NonNls String text="new " + type.getPresentableText() + "[]{}";
  PsiNewExpression newExpr=(PsiNewExpression)factory.createExpressionFromText(text,null);
  newExpr.getArrayInitializer().replace(myInitializer);
  newExpr=(PsiNewExpression)manager.getCodeStyleManager().reformat(newExpr);
  myInitializer.replace(newExpr);
}
