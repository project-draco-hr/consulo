{
  if (!CodeInsightUtilBase.preparePsiElementsForWrite(myInitializer,file))   return;
  PsiManager manager=file.getManager();
  PsiType type=getType();
  PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  @NonNls String text="new " + type.getPresentableText() + "[]{}";
  PsiNewExpression newExpr=(PsiNewExpression)factory.createExpressionFromText(text,null);
  newExpr.getArrayInitializer().replace(myInitializer);
  newExpr=(PsiNewExpression)CodeStyleManager.getInstance(manager.getProject()).reformat(newExpr);
  myInitializer.replace(newExpr);
}
