{
  if (!mxGraphProperties.isTraverseVisible(properties,mxGraphProperties.DEFAULT_TRAVERSE_VISIBLE)) {
    return graph.getEdges(cell,parent,incoming,outgoing,includeLoops,recurse);
  }
 else {
    Object[] edges=graph.getEdges(cell,parent,incoming,outgoing,includeLoops,recurse);
    List<Object> result=new ArrayList<Object>(edges.length);
    mxIGraphModel model=graph.getModel();
    for (int i=0; i < edges.length; i++) {
      Object source=model.getTerminal(edges[i],true);
      Object target=model.getTerminal(edges[i],false);
      if (((includeLoops && source == target) || ((source != target) && ((incoming && target == cell) || (outgoing && source == cell)))) && model.isVisible(edges[i])) {
        result.add(edges[i]);
      }
    }
    return result.toArray();
  }
}
