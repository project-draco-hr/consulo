{
  LOG.assertTrue(ourInstance == null);
  ourInstance=this;
  myArgs=args;
  boolean isInternal=Boolean.valueOf(System.getProperty(IDEA_IS_INTERNAL_PROPERTY)).booleanValue();
  @NonNls final String inspectAppCode="inspect";
  @NonNls final String diffAppCode="diff";
  final boolean isHeadless=myArgs.length > 0 && (Comparing.strEqual(myArgs[0],inspectAppCode) || Comparing.strEqual(myArgs[0],diffAppCode));
  if (isHeadless) {
    new CommandLineApplication(isInternal,false,"componentSets/IdeaComponents");
  }
 else {
    ApplicationManagerEx.createApplication("componentSets/IdeaComponents",isInternal,false,false,"idea");
  }
  myStarter=getStarter();
  myStarter.premain(args);
}
