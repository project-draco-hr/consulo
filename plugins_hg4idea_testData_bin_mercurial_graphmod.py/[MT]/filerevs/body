def filerevs(repo, path, start, stop, limit=None):
    'file cset DAG generator yielding (id, CHANGESET, ctx, [parentids]) tuples\n\n    This generator function walks through the revision history of a single\n    file from revision start down to revision stop.\n    '
    filerev = (len(repo.file(path)) - 1)
    rev = (stop + 1)
    count = 0
    while ((filerev >= 0) and (rev > stop)):
        fctx = repo.filectx(path, fileid=filerev)
        parents = [f.linkrev() for f in fctx.parents() if (f.path() == path)]
        rev = fctx.rev()
        if (rev <= start):
            yield (rev, CHANGESET, fctx.changectx(), sorted(parents))
            count += 1
            if (count == limit):
                break
        filerev -= 1
