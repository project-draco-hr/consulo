{
  setMirrorCheckingType(element,null);
  PsiClass mirror=SourceTreeToPsiMap.treeToPsiNotNull(element);
  PsiDocComment docComment=getDocComment();
  if (docComment != null) {
    ((ClsElementImpl)docComment).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getDocComment()));
  }
  ((ClsElementImpl)getModifierList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getModifierList()));
  ((ClsElementImpl)getNameIdentifier()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getNameIdentifier()));
  if (!isAnnotationType() && !isEnum()) {
    ((ClsElementImpl)getExtendsList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getExtendsList()));
  }
  ((ClsElementImpl)getImplementsList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getImplementsList()));
  ((ClsElementImpl)getTypeParameterList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getTypeParameterList()));
  Ref<Boolean> extLog=Ref.create(true);
  PsiField[] fields=getFields();
  PsiField[] mirrorFields=mirror.getFields();
  if (fields.length == mirrorFields.length) {
    for (int i=0; i < fields.length; i++) {
      ((ClsElementImpl)fields[i]).setMirror(SourceTreeToPsiMap.psiToTreeNotNull(mirrorFields[i]));
    }
  }
 else {
    log(this,mirror,"fields:" + fields.length + "!="+ mirrorFields.length,extLog);
  }
  PsiMethod[] methods=getMethods();
  PsiMethod[] mirrorMethods=mirror.getMethods();
  if (methods.length == mirrorMethods.length) {
    for (int i=0; i < methods.length; i++) {
      ((ClsElementImpl)methods[i]).setMirror(SourceTreeToPsiMap.psiToTreeNotNull(mirrorMethods[i]));
    }
  }
 else {
    log(this,mirror,"methods:" + methods.length + "!="+ mirrorMethods.length,extLog);
  }
  PsiClass[] classes=getInnerClasses();
  PsiClass[] mirrorClasses=mirror.getInnerClasses();
  if (classes.length == mirrorClasses.length) {
    for (int i=0; i < classes.length; i++) {
      ((ClsElementImpl)classes[i]).setMirror(SourceTreeToPsiMap.psiToTreeNotNull(mirrorClasses[i]));
    }
  }
 else {
    log(this,mirror,"classes:" + classes.length + "!="+ mirrorClasses.length,extLog);
  }
}
