{
  for (int i=0; i < elements.length; i++) {
    AntElement element=elements[i];
    if (element instanceof AntStructuredElement && ((AntStructuredElement)element).getTypeDefinition() == null) {
      element=AntElementFactory.createAntElement(parent,element.getSourceElement());
      if (element != null) {
        elements[i]=element;
      }
    }
    if (element != null) {
      fixUndefinedElements(element,(AntElement[])element.getChildren());
    }
  }
}
