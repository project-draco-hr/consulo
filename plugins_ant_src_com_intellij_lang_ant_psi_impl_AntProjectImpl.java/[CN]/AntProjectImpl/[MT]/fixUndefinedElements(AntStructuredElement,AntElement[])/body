{
  for (int i=0; i < elements.length; i++) {
    final AntElement element=elements[i];
    if (element instanceof AntStructuredElement) {
      AntStructuredElement se=(AntStructuredElement)element;
      if (se.getTypeDefinition() == null) {
        se=(AntStructuredElement)AntElementFactory.createAntElement(parent,se.getSourceElement());
        if (se != null) {
          elements[i]=se;
        }
      }
      if (se != null) {
        fixUndefinedElements(se,(AntElement[])element.getChildren());
      }
    }
  }
}
