{
synchronized (PsiLock.LOCK) {
    if (myImportedTargets == null) {
      if (getImportedFiles().length == 0) {
        myImportedTargets=AntTarget.EMPTY_TARGETS;
      }
 else {
        final Set<PsiElement> targets=PsiElementSetSpinAllocator.alloc();
        try {
          final Set<PsiElement> elementsDepthStack=PsiElementSetSpinAllocator.alloc();
          try {
            getImportedTargets(this,targets,elementsDepthStack);
          }
  finally {
            PsiElementSetSpinAllocator.dispose(elementsDepthStack);
          }
          final int size=targets.size();
          myImportedTargets=(size == 0) ? AntTarget.EMPTY_TARGETS : targets.toArray(new AntTarget[size]);
        }
  finally {
          PsiElementSetSpinAllocator.dispose(targets);
        }
      }
    }
  }
  return myImportedTargets;
}
