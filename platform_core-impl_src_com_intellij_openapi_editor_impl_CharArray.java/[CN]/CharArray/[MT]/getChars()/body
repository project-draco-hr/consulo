{
  assertReadAccess();
  assertConsistency();
  char[] array=myArray;
  CharSequence originalSequence=myOriginalSequence;
  if (hasDeferredChanges() || originalSequence != null && array == null) {
    lock.lock();
    try {
      flushDeferredChanged();
      if (myOriginalSequence != null && myArray == null) {
        myArray=array=ArrayUtil.realloc(CharArrayUtil.fromSequence(myOriginalSequence),myOriginalSequence.length());
        myStringRef=null;
      }
    }
  finally {
      lock.unlock();
    }
    assertConsistency();
  }
  return array;
}
