{
  if (!change.isWithinBounds(length())) {
    LOG.error("Invalid change attempt detected - given change bounds are not within the current char array. Change: " + change.getText().length() + ":"+ change.getStart()+ "-"+ change.getEnd(),dumpState());
    return;
  }
  if (myDeferredChangesStorage.size() >= MAX_DEFERRED_CHANGES_NUMBER) {
    flushDeferredChanged();
  }
  myDeferredChangesStorage.store(change);
  myHasDeferredChanges=true;
  myDeferredShift+=change.getDiff();
  if (myDebug) {
    myDebugDeferredChanges.add(change);
  }
}
