{
  PsiBinaryExpression concatenation=ConcatenationToMessageFormatAction.getEnclosingLiteralConcatenation(literalExpression);
  StringBuffer formatString=new StringBuffer();
  final List<PsiExpression> args=new ArrayList<PsiExpression>();
  try {
    ArrayList<PsiExpression> argsToCombine=new ArrayList<PsiExpression>();
    ConcatenationToMessageFormatAction.calculateFormatAndArguments(concatenation,formatString,args,argsToCombine,false);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
  String value=ConcatenationToMessageFormatAction.prepareString(formatString.toString());
  return new I18nizeQuickFixDialog(project,context,literalExpression,value,true,true){
    @Nullable protected String getTemplateName(){
      return myResourceBundleManager.getConcatenationTemplateName();
    }
    protected String generateText(    final I18nizedTextGenerator textGenerator,    final String propertyKey,    final PropertiesFile propertiesFile,    final PsiLiteralExpression literalExpression){
      return textGenerator.getI18nizedConcatenationText(propertyKey,composeParametersText(args),propertiesFile,literalExpression);
    }
    public PsiExpression[] getParameters(){
      return args.toArray(new PsiExpression[args.size()]);
    }
    protected void addAdditionalAttributes(    final Map<String,String> attributes){
      attributes.put(PARAMETERS_OPTION_KEY,composeParametersText(args));
    }
  }
;
}
