{
  ChameleonTransforming.transformChildren(myNode);
  ASTNode child=myNode.getFirstChildNode();
  int state=BEFORE_FIRST;
  if (myNode.getPsi() instanceof JspClass) {
    state=INSIDE_BODY;
  }
  while (child != null) {
    if (!containsWhiteSpacesOnly(child) && child.getTextLength() > 0) {
      final Indent indent=calcCurrentIndent(child,state);
      state=calcNewState(child,state);
      child=processChild(result,child,childAlignment,childWrap,indent);
    }
    if (child != null) {
      child=child.getTreeNext();
    }
  }
}
