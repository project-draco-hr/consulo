{
  final Collection<PsiElement> contexts=getContexts();
  for (  PsiElement context : contexts) {
    if (context instanceof WebDirectoryElement) {
      WebDirectoryElement[] children=((WebDirectoryElement)context).getChildren();
      for (      WebDirectoryElement child : children) {
        PsiFileSystemItem item=child.isDirectory() ? (PsiFileSystemItem)child : child.getOriginalFile();
        if (!processor.execute(item,PsiSubstitutor.EMPTY))         return;
      }
    }
 else     if (context instanceof PsiDirectory) {
      final PsiElement[] children=context.getChildren();
      for (      PsiElement child : children) {
        PsiFileSystemItem item=(PsiFileSystemItem)child;
        if (!processor.execute(item,PsiSubstitutor.EMPTY))         return;
      }
    }
 else     if (getContextReference() == null) {
      myProvider.handleEmptyContext(processor,getElement());
    }
  }
}
