{
  final List<Reference> referencesList=new ArrayList<Reference>();
  int currentSlash=-1;
  while (currentSlash + 1 < str.length() && str.charAt(currentSlash + 1) == ' ')   currentSlash++;
  if (currentSlash + 1 < str.length() && str.charAt(currentSlash + 1) == SEPARATOR)   currentSlash++;
  int index=0;
  Reference currentContextRef;
  while (true) {
    final int nextSlash=str.indexOf(SEPARATOR,currentSlash + 1);
    final String subreferenceText=nextSlash > 0 ? str.substring(currentSlash + 1,nextSlash) : str.substring(currentSlash + 1);
    currentContextRef=new Reference(new TextRange(myStartInElement + currentSlash + 1,myStartInElement + (nextSlash > 0 ? nextSlash : str.length())),index++,subreferenceText);
    referencesList.add(currentContextRef);
    if ((currentSlash=nextSlash) < 0)     break;
  }
  myReferences=referencesList.toArray(new Reference[referencesList.size()]);
}
