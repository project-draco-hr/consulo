{
  CvsRootParser result=new CvsRootParser();
  if (!StringUtil.startsWithChar(str,':')) {
    result.METHOD=CvsMethod.LOCAL_METHOD;
    result.REPOSITORY=str;
    return result;
  }
  String local2=":local:";
  if (str.startsWith(local2)) {
    result.METHOD=CvsMethod.LOCAL_METHOD;
    result.REPOSITORY=str.substring(local2.length());
    return result;
  }
  String suffix=result.extractMethod(str,result,check);
  if (CvsMethod.LOCAL_METHOD.equals(result.METHOD)) {
    result.REPOSITORY=suffix;
    skipTrailingRepositorySlash(result);
  }
 else {
    if (suffix.indexOf("@") >= 0 || suffix.indexOf(":") >= 0) {
      Matcher matcher=ourPattern.matcher(suffix);
      if (matcher.matches()) {
        extractUserNameAndPassword(matcher,result);
        extractHostAndPort(matcher,result);
        extractRepository(matcher,result);
      }
 else {
        if (check) {
          throw new IllegalArgumentException("wrong remote repository: " + str);
        }
 else {
          result.REPOSITORY=suffix;
        }
      }
    }
 else {
      result.REPOSITORY=suffix;
    }
  }
  return result;
}
