{
  if (caretMarker != null) {
    int caretLine=StringUtil.offsetToLineNumber(newFileText,caretMarker.getStartOffset());
    int caretCol=caretMarker.getStartOffset() - StringUtil.lineColToOffset(newFileText,caretLine,0);
    LogicalPosition pos=new LogicalPosition(caretLine,caretCol);
    editor.getCaretModel().moveToLogicalPosition(pos);
  }
  if (selStartMarker != null) {
    editor.getSelectionModel().setSelection(selStartMarker.getStartOffset(),selEndMarker.getStartOffset());
  }
}
