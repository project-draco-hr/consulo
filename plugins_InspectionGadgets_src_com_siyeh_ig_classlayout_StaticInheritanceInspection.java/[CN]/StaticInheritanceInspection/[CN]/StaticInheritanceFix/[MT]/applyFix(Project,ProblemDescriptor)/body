{
  final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)descriptor.getPsiElement();
  final String referencedClassName=referenceElement.getText();
  final PsiClass iface=(PsiClass)referenceElement.resolve();
  final PsiField[] allFields=iface.getAllFields();
  final PsiClass implementingClass=PsiTreeUtil.getParentOfType(referenceElement,PsiClass.class);
  final PsiManager manager=referenceElement.getManager();
  final PsiSearchHelper searchHelper=manager.getSearchHelper();
  final SearchScope searchScope=implementingClass.getUseScope();
  for (  final PsiField field : allFields) {
    final PsiReference[] references=searchHelper.findReferences(field,searchScope,false);
    for (    PsiReference reference1 : references) {
      final PsiReferenceExpression reference=(PsiReferenceExpression)reference1;
      if (!reference.isQualified()) {
        final String referenceText=reference.getText();
        replaceExpression(project,reference,referencedClassName + '.' + referenceText);
      }
 else {
        final PsiExpression qualifier=reference.getQualifierExpression();
        final String referenceName=reference.getReferenceName();
        if (qualifier instanceof PsiReferenceExpression) {
          final PsiElement referent=((PsiReference)qualifier).resolve();
          if (!referent.equals(iface)) {
            replaceExpression(project,reference,referencedClassName + '.' + referenceName);
          }
        }
 else {
          replaceExpression(project,reference,referencedClassName + '.' + referenceName);
        }
      }
    }
  }
  deleteElement(referenceElement);
}
