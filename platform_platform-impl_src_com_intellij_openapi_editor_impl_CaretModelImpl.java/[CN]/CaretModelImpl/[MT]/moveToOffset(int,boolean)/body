{
  assertIsDispatchThread();
  validateCallContext();
  moveToLogicalPosition(myEditor.offsetToLogicalPosition(offset),locateBeforeSoftWrap);
  if (!ignoreWrongMoves && !myEditor.offsetToLogicalPosition(myOffset).equals(myEditor.offsetToLogicalPosition(offset))) {
    StringBuilder documentInfo=new StringBuilder();
    Document document=myEditor.getDocument();
    for (int line=0; line < document.getLineCount(); line++) {
      documentInfo.append(line).append(": ").append(document.getLineStartOffset(line)).append("-").append(document.getLineEndOffset(line)).append(", ");
    }
    if (documentInfo.length() > 0) {
      documentInfo.setLength(documentInfo.length() - 1);
    }
    LOG.error("caret moved to wrong offset. Requested: offset=" + offset + ", logical position="+ myEditor.offsetToLogicalPosition(offset)+ " but actual: offset="+ myOffset+ ", logical position="+ myLogicalCaret+ "("+ myEditor.offsetToLogicalPosition(myOffset)+ "). "+ myEditor.dumpState());
  }
}
