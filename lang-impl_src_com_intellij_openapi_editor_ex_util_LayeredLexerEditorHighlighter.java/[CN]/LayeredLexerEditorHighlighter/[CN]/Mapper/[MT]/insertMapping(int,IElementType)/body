{
  CharSequence tokenText=getTokenText(tokenIndex);
  final int length=tokenText.length();
  MappedRange predecessor=findPredecessor(tokenIndex);
  int insertOffset=predecessor != null ? predecessor.range.getEndOffset() : 0;
  doc.insertString(insertOffset,new MergingCharSequence(mySeparator,tokenText));
  insertOffset+=mySeparator.length();
  MappedRange newRange=new MappedRange();
  newRange.mapper=this;
  newRange.range=doc.createRangeMarker(insertOffset,insertOffset + length);
  newRange.outerToken=outerToken;
  return newRange;
}
