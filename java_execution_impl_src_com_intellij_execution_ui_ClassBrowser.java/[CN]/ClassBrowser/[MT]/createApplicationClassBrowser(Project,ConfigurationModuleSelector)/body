{
  final ClassFilter applicationClass=new ClassFilter(){
    @Override public boolean isAccepted(    final PsiClass aClass){
      return ConfigurationUtil.MAIN_CLASS.value(aClass) && findMainMethod(aClass) != null;
    }
    @Nullable private PsiMethod findMainMethod(    final PsiClass aClass){
      return new ReadAction<PsiMethod>(){
        @Override protected void run(        Result<PsiMethod> result) throws Throwable {
          result.setResult(PsiMethodUtil.findMainMethod(aClass));
        }
      }
.execute().getResultObject();
    }
  }
;
  return new MainClassBrowser(project,moduleSelector,ExecutionBundle.message("choose.main.class.dialog.title")){
    @Override protected ClassFilter createFilter(    final Module module){
      return applicationClass;
    }
  }
;
}
