{
  final Project project=model.getProject();
  final JUnitConsoleProperties properties=model.getProperties();
  if (testProxy != null) {
    final Location location=testProxy.getInfo().getLocation(project);
    if (JUnitConsoleProperties.OPEN_FAILURE_LINE.value(properties)) {
      return testProxy.getState().getDescriptor(location);
    }
    final OpenFileDescriptor openFileDescriptor=location != null ? location.getOpenFileDescriptor() : null;
    if (openFileDescriptor != null && openFileDescriptor.getFile().isValid()) {
      return openFileDescriptor;
    }
  }
  return null;
}
