{
  myProject=project;
  myUpdateMerger=new MergingUpdateQueue("EditorNotifications update merger",100,true,null,project);
  MessageBusConnection connection=project.getMessageBus().connect(project);
  connection.subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new FileEditorManagerAdapter(){
    @Override public void fileOpened(    @NotNull FileEditorManager source,    @NotNull VirtualFile file){
      updateNotifications(file);
    }
  }
);
  connection.subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    @Override public void enteredDumbMode(){
      updateAllNotifications();
    }
    @Override public void exitDumbMode(){
      updateAllNotifications();
    }
  }
);
}
