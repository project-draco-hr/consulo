{
  String file1=createFile("a.txt");
  String file2=createFile("b.txt");
  final JpsArtifact a=addArtifact("a",archive("a.jar").fileCopy(file1).fileCopy(file2));
  buildAll();
  assertOutput(a,fs().archive("a.jar").file("a.txt").file("b.txt"));
  delete(file1);
  buildAll();
  assertDeletedAndCopied("out/artifacts/a/a.jar","b.txt");
  assertOutput(a,fs().archive("a.jar").file("b.txt"));
  buildAllAndAssertUpToDate();
}
