{
  String file1=createFile("dir/a.txt");
  createFile("dir/b.txt");
  final JpsArtifact a=addArtifact("a",archive("a.jar").parentDirCopy(file1));
  buildAll();
  assertOutput(a,fs().archive("a.jar").file("a.txt").file("b.txt"));
  delete(file1);
  buildAll();
  assertDeletedAndCopied("out/artifacts/a/a.jar","dir/b.txt");
  assertOutput(a,fs().archive("a.jar").file("b.txt"));
  buildAllAndAssertUpToDate();
}
