{
  String file1=createFile("a.txt","aaa");
  String file2=createFile("b.txt","bbb");
  final JpsArtifact a=addArtifact(archive("a.jar").fileCopy(file1).fileCopy(file2));
  buildAll();
  assertOutput(a,fs().archive("a.jar").file("a.txt","aaa").file("b.txt","bbb"));
  buildAllAndAssertUpToDate();
  change(file1,"xxx");
  buildAll();
  assertCopied("a.txt","b.txt");
  assertOutput(a,fs().archive("a.jar").file("a.txt","xxx").file("b.txt","bbb"));
  buildAllAndAssertUpToDate();
}
