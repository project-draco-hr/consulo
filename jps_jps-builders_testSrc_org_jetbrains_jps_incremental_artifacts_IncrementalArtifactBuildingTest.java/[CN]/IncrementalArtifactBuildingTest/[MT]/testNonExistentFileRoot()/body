{
  String file=getAbsolutePath("a.txt");
  JpsArtifact a=addArtifact(root().fileCopy(file));
  buildArtifacts(a);
  assertEmptyOutput(a);
  buildAllAndAssertUpToDate();
  FileUtil.createIfDoesntExist(new File(file));
  buildArtifacts(a);
  assertOutput(a,fs().file("a.txt"));
  buildAllAndAssertUpToDate();
  delete(file);
  buildArtifacts(a);
  assertEmptyOutput(a);
  buildAllAndAssertUpToDate();
}
