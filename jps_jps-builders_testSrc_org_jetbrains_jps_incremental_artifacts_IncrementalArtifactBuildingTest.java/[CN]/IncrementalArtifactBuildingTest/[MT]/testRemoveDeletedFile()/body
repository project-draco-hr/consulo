{
  String file1=createFile("dir/a.txt");
  createFile("dir/b.txt");
  final JpsArtifact a=addArtifact("a",root().parentDirCopy(file1));
  buildAll();
  assertOutput(a,fs().file("a.txt").file("b.txt"));
  delete(file1);
  buildAll();
  assertDeleted("out/artifacts/a/a.txt");
  assertOutput(a,fs().file("b.txt"));
  buildAllAndAssertUpToDate();
}
