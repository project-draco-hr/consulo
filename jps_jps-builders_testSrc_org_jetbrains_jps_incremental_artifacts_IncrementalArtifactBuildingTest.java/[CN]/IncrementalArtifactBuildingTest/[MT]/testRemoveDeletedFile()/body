{
  String file1=createFile("a.txt");
  String file2=createFile("b.txt");
  final JpsArtifact a=addArtifact("a",root().fileCopy(file1).fileCopy(file2));
  buildAll();
  assertOutput(a,fs().file("a.txt").file("b.txt"));
  delete(file1);
  buildAll();
  assertDeleted("out/artifacts/a/a.txt");
  assertOutput(a,fs().file("b.txt"));
  buildAllAndAssertUpToDate();
}
