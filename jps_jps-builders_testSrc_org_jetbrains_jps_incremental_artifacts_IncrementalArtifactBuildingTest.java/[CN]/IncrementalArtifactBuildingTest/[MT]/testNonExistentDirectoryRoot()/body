{
  String dir=getAbsolutePath("d");
  JpsArtifact a=addArtifact(root().dirCopy(dir));
  buildArtifacts(a);
  assertEmptyOutput(a);
  buildAllAndAssertUpToDate();
  FileUtil.createIfDoesntExist(new File(dir,"a.txt"));
  buildArtifacts(a);
  assertOutput(a,fs().file("a.txt"));
  buildAllAndAssertUpToDate();
  delete(dir);
  buildArtifacts(a);
  assertEmptyOutput(a);
  buildAllAndAssertUpToDate();
}
