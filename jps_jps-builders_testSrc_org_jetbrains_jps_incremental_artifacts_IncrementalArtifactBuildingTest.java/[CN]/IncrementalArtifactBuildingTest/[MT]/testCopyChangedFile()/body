{
  String file1=createFile("dir/a.txt","aaa");
  createFile("dir/b.txt","bbb");
  final JpsArtifact a=addArtifact(root().parentDirCopy(file1));
  buildAll();
  assertOutput(a,fs().file("a.txt","aaa").file("b.txt","bbb"));
  buildAllAndAssertUpToDate();
  change(file1,"xxx");
  buildAll();
  assertDeletedAndCopied("out/artifacts/a/a.txt","dir/a.txt");
  assertOutput(a,fs().file("a.txt","xxx").file("b.txt","bbb"));
  buildAllAndAssertUpToDate();
}
