{
  if (!CodeInsightUtil.prepareFileForWrite(myVariable.getContainingFile()))   return;
  try {
    String initializerText=suggestInitializer();
    PsiElementFactory factory=myVariable.getManager().getElementFactory();
    PsiExpression initializer=factory.createExpressionFromText(initializerText,myVariable);
    if (myVariable instanceof PsiLocalVariable) {
      ((PsiLocalVariable)myVariable).setInitializer(initializer);
    }
 else     if (myVariable instanceof PsiField) {
      ((PsiField)myVariable).setInitializer(initializer);
    }
 else {
      LOG.error("Unknown variable type: " + myVariable);
    }
    TextRange range=myVariable.getInitializer().getTextRange();
    int offset=range.getStartOffset();
    editor.getCaretModel().moveToOffset(offset);
    editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
    editor.getSelectionModel().setSelection(range.getEndOffset(),range.getStartOffset());
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
