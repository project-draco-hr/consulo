{
  myDataDescriptor=dataDescriptor;
  myStorage=new MappedFile(file,initialSize);
  myOut=new MappedFileDataOutput(myStorage);
  myIn=new MappedFileDataInput(myStorage);
  if (myStorage.length() == 0) {
    markDirty(true);
    allocVector(FIRST_VECTOR);
  }
 else {
    int sign;
    try {
      sign=myStorage.getInt(0);
    }
 catch (    Exception e) {
      sign=DIRTY_MAGIC;
    }
    if (sign != CORRECTLY_CLOSED_MAGIC) {
      myStorage.close();
      throw new CorruptedException(file);
    }
  }
}
