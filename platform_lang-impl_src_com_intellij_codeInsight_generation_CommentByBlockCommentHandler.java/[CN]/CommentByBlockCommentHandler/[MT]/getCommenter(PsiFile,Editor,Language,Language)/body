{
  final FileViewProvider viewProvider=file.getViewProvider();
  for (  MultipleLangCommentProvider provider : MultipleLangCommentProvider.EP_NAME.getExtensions()) {
    if (provider.canProcess(file,viewProvider)) {
      return provider.getLineCommenter(file,editor,lineStartLanguage,lineEndLanguage);
    }
  }
  final Language fileLanguage=file.getLanguage();
  Language lang=lineStartLanguage == null || LanguageCommenters.INSTANCE.forLanguage(lineStartLanguage) == null || fileLanguage.getBaseLanguage() == lineStartLanguage ? fileLanguage : lineStartLanguage;
  if (viewProvider instanceof TemplateLanguageFileViewProvider && lang == ((TemplateLanguageFileViewProvider)viewProvider).getTemplateDataLanguage()) {
    lang=viewProvider.getBaseLanguage();
  }
  return LanguageCommenters.INSTANCE.forLanguage(lang);
}
