{
  super(parent,false);
  myProject=project;
  myItemToBeEdited=itemToBeEdited;
  myEditorTextField=new EditorTextField("",project,StdFileTypes.JAVA);
  myEditorTextField.setFontInheritedFromLAF(true);
  myTfClassName=new ComponentWithBrowseButton<EditorTextField>(myEditorTextField,new MyChooseClassActionListener(project));
  final PsiManager manager=PsiManager.getInstance(myProject);
  PsiFile[] boundForms=manager.getSearchHelper().findFormsBoundToClass(itemToBeEdited.getClassName());
  if (boundForms.length > 0) {
    myNestedFormRadioButton.setSelected(true);
    myTfNestedForm.setText(GuiEditorUtil.buildResourceName(boundForms[0]));
  }
 else {
    myClassRadioButton.setSelected(true);
    setEditorText(myItemToBeEdited.getClassName().replace('$','.'));
  }
  updateEnabledTextField();
  myTfClassName.getButton().setEnabled(!project.isDefault());
  myClassNamePlaceholder.setLayout(new BorderLayout());
  myClassNamePlaceholder.add(myTfClassName,BorderLayout.CENTER);
  myTfIconPath.setText(myItemToBeEdited.getIconPath());
  myTfIconPath.addActionListener(new MyChooseFileActionListener(project,new ImageFileFilter(null),myTfIconPath));
  myTfNestedForm.addActionListener(new MyChooseFileActionListener(project,new TreeFileChooser.PsiFileFilter(){
    public boolean accept(    PsiFile file){
      return file.getFileType().equals(StdFileTypes.GUI_DESIGNER_FORM);
    }
  }
,myTfNestedForm));
  final GridConstraints defaultConstraints=myItemToBeEdited.getDefaultConstraints();
{
    final int hSizePolicy=defaultConstraints.getHSizePolicy();
    myChkHorCanShrink.setSelected((hSizePolicy & GridConstraints.SIZEPOLICY_CAN_SHRINK) != 0);
    myChkHorCanGrow.setSelected((hSizePolicy & GridConstraints.SIZEPOLICY_CAN_GROW) != 0);
    myChkHorWantGrow.setSelected((hSizePolicy & GridConstraints.SIZEPOLICY_WANT_GROW) != 0);
  }
{
    final int vSizePolicy=defaultConstraints.getVSizePolicy();
    myChkVerCanShrink.setSelected((vSizePolicy & GridConstraints.SIZEPOLICY_CAN_SHRINK) != 0);
    myChkVerCanGrow.setSelected((vSizePolicy & GridConstraints.SIZEPOLICY_CAN_GROW) != 0);
    myChkVerWantGrow.setSelected((vSizePolicy & GridConstraints.SIZEPOLICY_WANT_GROW) != 0);
  }
  myLblIcon.setLabelFor(myTfIconPath);
  myClassRadioButton.addChangeListener(new MyRadioChangeListener());
  myNestedFormRadioButton.addChangeListener(new MyRadioChangeListener());
  init();
}
