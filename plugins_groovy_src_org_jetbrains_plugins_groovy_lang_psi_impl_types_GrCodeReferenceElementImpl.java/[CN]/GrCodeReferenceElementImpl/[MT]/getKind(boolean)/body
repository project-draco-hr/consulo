{
  PsiElement parent=getParent();
  if (parent instanceof GrCodeReferenceElement) {
    ReferenceKind parentKind=((GrCodeReferenceElementImpl)parent).getKind(forCompletion);
    if (parentKind == CLASS)     return CLASS_OR_PACKAGE;
 else     if (parentKind == STATIC_MEMBER_FQ)     return CLASS_FQ;
 else     if (parentKind == CLASS_FQ)     return CLASS_OR_PACKAGE_FQ;
    return parentKind;
  }
 else   if (parent instanceof GrPackageDefinition) {
    return PACKAGE_FQ;
  }
 else   if (parent instanceof GrDocReferenceElement) {
    return CLASS_OR_PACKAGE;
  }
 else   if (parent instanceof GrImportStatement) {
    final GrImportStatement importStatement=(GrImportStatement)parent;
    if (importStatement.isStatic()) {
      return importStatement.isOnDemand() ? CLASS_FQ : STATIC_MEMBER_FQ;
    }
 else {
      return forCompletion || importStatement.isOnDemand() ? CLASS_OR_PACKAGE_FQ : CLASS_FQ;
    }
  }
  return CLASS;
}
