{
  if (isDisposed())   return;
  if (myStartTime == -1) {
    myStartTime=System.currentTimeMillis();
    myStopTime=myStartTime + myCycleDuration * (myTotalFrames - myCurrentFrame) / myTotalFrames;
  }
  final double passedTime=System.currentTimeMillis() - myStartTime;
  final double totalTime=myStopTime - myStartTime;
  final int newFrame=(int)(passedTime * myTotalFrames / totalTime);
  if (myCurrentFrame > 0 && newFrame == myCurrentFrame)   return;
  myCurrentFrame=newFrame;
  if (myCurrentFrame >= myTotalFrames) {
    if (myRepeatable) {
      reset();
    }
 else {
      animationDone();
      return;
    }
  }
  paint();
}
