{
  final Application app=ApplicationManager.getApplication();
  if (app == null || app.isUnitTestMode())   return;
  if (myCycleDuration == 0) {
    myCurrentFrame=myTotalFrames - 1;
    paint();
    animationDone();
  }
 else   if (myTicker == null) {
    myTicker=scheduler.scheduleAtFixedRate(new Runnable(){
      AtomicBoolean scheduled=new AtomicBoolean(false);
      @Override public void run(){
        if (scheduled.compareAndSet(false,true)) {
          SwingUtilities.invokeLater(new Runnable(){
            @Override public void run(){
              scheduled.set(false);
              onTick();
            }
          }
);
        }
      }
    }
,0,myCycleDuration * 1000 / myTotalFrames,TimeUnit.MICROSECONDS);
  }
}
