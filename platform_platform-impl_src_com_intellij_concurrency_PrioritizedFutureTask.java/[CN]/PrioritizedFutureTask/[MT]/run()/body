{
  Runnable runnable=new Runnable(){
    public void run(){
      try {
        if (myJob.isCanceled()) {
          cancel(false);
        }
 else {
          PrioritizedFutureTask.super.run();
        }
      }
  finally {
        try {
          if (myReportExceptions) {
            PrioritizedFutureTask.super.get();
          }
        }
 catch (        CancellationException ignored) {
        }
catch (        InterruptedException e) {
          LOG.error(e);
        }
catch (        ExecutionException e) {
          LOG.error(e);
        }
 finally {
          myJob.taskDone();
        }
      }
    }
  }
;
  if (myParentThreadHasReadAccess) {
    if (myFailFastOnAcquireReadAction) {
      if (!ApplicationManagerEx.getApplicationEx().tryRunReadAction(runnable)) {
        myJob.cancel();
      }
    }
 else {
      boolean old=ApplicationImpl.setExceptionalThreadWithReadAccessFlag(true);
      try {
        runnable.run();
      }
  finally {
        ApplicationImpl.setExceptionalThreadWithReadAccessFlag(old);
      }
    }
  }
 else {
    runnable.run();
  }
}
