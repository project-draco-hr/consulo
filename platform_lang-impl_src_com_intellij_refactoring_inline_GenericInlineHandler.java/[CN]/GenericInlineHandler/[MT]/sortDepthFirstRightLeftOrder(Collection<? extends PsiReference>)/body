{
  final PsiReference[] usages=allReferences.toArray(new PsiReference[allReferences.size()]);
  Arrays.sort(usages,new Comparator<PsiReference>(){
    @Override public int compare(    final PsiReference usage1,    final PsiReference usage2){
      final PsiElement element1=usage1.getElement();
      final PsiElement element2=usage2.getElement();
      if (element1 == null || element2 == null)       return 0;
      return element2.getTextRange().getStartOffset() - element1.getTextRange().getStartOffset();
    }
  }
);
  return usages;
}
