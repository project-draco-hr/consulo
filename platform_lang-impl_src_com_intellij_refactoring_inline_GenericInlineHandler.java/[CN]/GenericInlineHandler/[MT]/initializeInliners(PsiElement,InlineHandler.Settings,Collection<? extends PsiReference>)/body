{
  final Map<Language,InlineHandler.Inliner> inliners=new HashMap<Language,InlineHandler.Inliner>();
  for (  PsiReference ref : allReferences) {
    PsiElement refElement=ref.getElement();
    LOG.assertTrue(refElement != null,ref.getClass().getName());
    final Language language=refElement.getLanguage();
    if (inliners.containsKey(language))     continue;
    final List<InlineHandler> handlers=InlineHandlers.getInlineHandlers(language);
    for (    InlineHandler handler : handlers) {
      InlineHandler.Inliner inliner=handler.createInliner(element,settings);
      if (inliner != null) {
        inliners.put(language,inliner);
        break;
      }
    }
  }
  return inliners;
}
