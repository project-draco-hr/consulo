{
  PsiJavaPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (aPackage == null) {
    return directory.getVirtualFile().getPresentableUrl();
  }
 else {
    String packageName=getPackageName(aPackage);
    if (includeRootDir) {
      String rootDir=getRootDirectoryForPackage(directory);
      if (rootDir != null) {
        return UsageViewBundle.message("usage.target.package.in.directory",packageName,rootDir);
      }
    }
    return packageName;
  }
}
