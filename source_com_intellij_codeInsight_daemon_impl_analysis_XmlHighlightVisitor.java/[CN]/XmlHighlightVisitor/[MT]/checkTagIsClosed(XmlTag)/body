{
  final PsiElement[] children=tag.getChildren();
  String name=tag.getName();
  boolean insideEndTag=false;
  for (int i=0; i < children.length; i++) {
    PsiElement child=children[i];
    if (child instanceof XmlToken) {
      XmlToken xmlToken=(XmlToken)child;
      if (xmlToken.getTokenType() == XmlTokenType.XML_EMPTY_ELEMENT_END)       return true;
      if (xmlToken.getTokenType() == XmlTokenType.XML_END_TAG_START) {
        insideEndTag=true;
      }
      if (insideEndTag && xmlToken.getTokenType() == XmlTokenType.XML_NAME) {
        String text=xmlToken.getText();
        if (tag instanceof HtmlTag) {
          text=text.toLowerCase();
          name=name.toLowerCase();
        }
        if (text.equals(name))         return true;
        myResult.add(HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,xmlToken,"Wrong closing tag name"));
        return false;
      }
    }
  }
  return false;
}
