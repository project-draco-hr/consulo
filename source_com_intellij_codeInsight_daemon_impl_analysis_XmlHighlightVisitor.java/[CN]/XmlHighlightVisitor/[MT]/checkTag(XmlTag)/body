{
  if (ourDoJaxpTesting)   return;
  if (tag.getName() == null) {
    return;
  }
  if (!checkTagIsClosed(tag))   return;
  if (!(tag.getParent() instanceof XmlTag)) {
    checkRootTag(tag);
  }
  if (myResult.isEmpty()) {
    checkTagByDescriptor(tag);
  }
  if (myResult.isEmpty()) {
    if (tag.getUserData(DO_NOT_VALIDATE_KEY) == null) {
      if (tag instanceof HtmlTag && tag.getDescriptor() instanceof AnyXmlElementDescriptor) {
        final String name=tag.getName();
        reportOneTagProblem(tag,name,"Unknown html tag " + name,null,mySettings.getInspectionProfile(tag).getAdditionalHtmlTags(),HighlightInfoType.CUSTOM_HTML_TAG,HighlightDisplayKey.CUSTOM_HTML_TAG);
        return;
      }
      checkReferences(tag,QuickFixProvider.NULL);
    }
  }
}
