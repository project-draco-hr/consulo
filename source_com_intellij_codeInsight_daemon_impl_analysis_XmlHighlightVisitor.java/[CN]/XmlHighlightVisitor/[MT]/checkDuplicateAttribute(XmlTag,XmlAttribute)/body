{
  if (tag.getUserData(DO_NOT_VALIDATE_KEY) != null) {
    return;
  }
  XmlAttribute[] attributes=tag.getAttributes();
  for (  XmlAttribute tagAttribute : attributes) {
    if (attribute != tagAttribute && Comparing.strEqual(attribute.getName(),tagAttribute.getName())) {
      final String localName=attribute.getLocalName();
      HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(getTagProblemInfoType(tag),XmlChildRole.ATTRIBUTE_NAME_FINDER.findChild(SourceTreeToPsiMap.psiElementToTree(attribute)),"Duplicate attribute " + localName);
      addToResults(highlightInfo);
      IntentionAction intentionAction=new RemoveDuplicatedAttributeIntentionAction(localName,attribute);
      QuickFixAction.registerQuickFixAction(highlightInfo,intentionAction,null);
    }
  }
}
