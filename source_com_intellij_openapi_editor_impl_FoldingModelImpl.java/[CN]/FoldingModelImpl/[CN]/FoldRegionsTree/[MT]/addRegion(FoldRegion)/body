{
  for (int i=0; i < myRegions.size(); i++) {
    FoldRegion region=myRegions.get(i);
    if (region.isValid() && intersects(region,range)) {
      return false;
    }
    if (range.getStartOffset() < region.getStartOffset() || (range.getStartOffset() == region.getStartOffset() && range.getEndOffset() > region.getEndOffset())) {
      for (int j=i + 1; j < myRegions.size(); j++) {
        FoldRegion next=myRegions.get(j);
        if (next.getEndOffset() >= range.getEndOffset() && next.isValid()) {
          if (next.getStartOffset() < range.getStartOffset()) {
            return false;
          }
 else           break;
        }
      }
      myRegions.add(i,range);
      return true;
    }
  }
  myRegions.addLast(range);
  return true;
}
