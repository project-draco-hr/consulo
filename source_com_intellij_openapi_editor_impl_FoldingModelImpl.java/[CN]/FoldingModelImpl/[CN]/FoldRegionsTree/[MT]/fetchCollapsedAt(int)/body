{
  if (!isFoldingEnabled())   return new FoldRegion[0];
  ArrayList<FoldRegion> allCollapsed=new ArrayList<FoldRegion>();
  for (int i=0; i < myRegions.size(); i++) {
    FoldRegion region=myRegions.get(i);
    if (!region.isExpanded() && contains(region,offset)) {
      allCollapsed.add(region);
    }
  }
  return allCollapsed.toArray(new FoldRegion[allCollapsed.size()]);
}
