{
  if (myTabbedPane.getSelectedIndex() == 1) {
    return (PsiFile)myGotoByNamePanel.getChosenElement();
  }
 else {
    final TreePath path=myTree.getSelectionPath();
    if (path == null)     return null;
    final DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    final Object userObject=node.getUserObject();
    if (!(userObject instanceof ProjectViewNode))     return null;
    ProjectViewNode pvNode=(ProjectViewNode)userObject;
    if (pvNode.getValue() instanceof PsiFile) {
      return (PsiFile)pvNode.getValue();
    }
 else     if (pvNode.getValue() instanceof com.intellij.lang.properties.ResourceBundle) {
      com.intellij.lang.properties.ResourceBundle bundle=(com.intellij.lang.properties.ResourceBundle)pvNode.getValue();
      final List<PropertiesFile> list=bundle.getPropertiesFiles(myProject);
      if (list.size() > 0) {
        return list.get(0);
      }
    }
    return null;
  }
}
