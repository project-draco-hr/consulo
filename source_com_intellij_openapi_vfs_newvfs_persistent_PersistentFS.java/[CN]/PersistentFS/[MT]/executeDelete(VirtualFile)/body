{
  final int id=getFileId(file);
  final VirtualFile parent=file.getParent();
  final int parentId=parent != null ? getFileId(parent) : 0;
  myRecords.deleteRecordRecursively(id);
  if (parentId != 0) {
    removeIdFromParentList(parentId,id);
    ((VFileImpl)file.getParent()).removeChild(file);
  }
 else {
synchronized (LOCK) {
      myRoots.remove(file.getUrl());
    }
  }
  invalidateSubtree(file);
}
