{
  if (id == parentId) {
    LOG.error("Cyclic parent-child relations for file: " + file);
    return;
  }
  String name=file.getName();
  if (name.length() > 0 && namesEqual(delegate,name,myRecords.getName(id)))   return;
  if (name.length() == 0) {
    if (areChildrenLoaded(id))     return;
  }
  myRecords.setParent(id,parentId);
  myRecords.setName(id,name);
  myRecords.setCRC(id,delegate.getCRC(file));
  myRecords.setTimestamp(id,delegate.getTimeStamp(file));
  myRecords.setFlags(id,(delegate.isDirectory(file) ? IS_DIRECTORY_FLAG : 0) | (!delegate.isWritable(file) ? IS_READ_ONLY : 0));
  myRecords.setLength(id,-1);
}
