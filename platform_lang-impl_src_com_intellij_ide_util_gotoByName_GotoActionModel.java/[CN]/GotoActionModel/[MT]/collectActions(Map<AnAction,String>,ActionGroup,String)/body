{
  final AnAction[] actions=group.getChildren(null);
  for (  AnAction action : actions) {
    if (action != null) {
      if (action instanceof ActionGroup) {
        final ActionGroup actionGroup=(ActionGroup)action;
        final String groupName=actionGroup.getTemplatePresentation().getText();
        collectActions(result,actionGroup,groupName != null ? groupName : containingGroupName);
      }
 else {
        final String groupName=group.getTemplatePresentation().getText();
        result.put(action,groupName != null && groupName.length() > 0 ? groupName : containingGroupName);
      }
    }
  }
}
