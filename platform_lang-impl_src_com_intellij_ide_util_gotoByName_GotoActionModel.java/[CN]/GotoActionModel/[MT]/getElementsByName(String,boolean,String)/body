{
  final HashMap<AnAction,String> map=new HashMap<AnAction,String>();
  final ActionGroup mainMenu=(ActionGroup)myActionManager.getActionOrStub(IdeActions.GROUP_MAIN_MENU);
  collectActions(id,map,mainMenu,mainMenu.getTemplatePresentation().getText());
  if (checkBoxState) {
    final Set<String> ids=((ActionManagerImpl)myActionManager).getActionIds();
    for (    AnAction action : map.keySet()) {
      ids.remove(getActionId(action));
    }
    if (ids.contains(id)) {
      final AnAction anAction=myActionManager.getAction(id);
      if (!(anAction instanceof ActionGroup)) {
        map.put(anAction,null);
      }
    }
  }
  return map.entrySet().toArray(new Map.Entry[map.size()]);
}
