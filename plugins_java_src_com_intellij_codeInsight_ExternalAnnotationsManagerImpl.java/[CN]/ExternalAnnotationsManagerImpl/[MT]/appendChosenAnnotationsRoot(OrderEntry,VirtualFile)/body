{
  if (entry instanceof LibraryOrderEntry) {
    Library library=((LibraryOrderEntry)entry).getLibrary();
    LOG.assertTrue(library != null);
    final ModifiableRootModel rootModel=ModuleRootManager.getInstance(entry.getOwnerModule()).getModifiableModel();
    final Library.ModifiableModel model=library.getModifiableModel();
    model.addRoot(vFile,AnnotationOrderRootType.getInstance());
    model.commit();
    rootModel.commit();
  }
 else   if (entry instanceof SdkOrderEntry) {
    final SdkModificator sdkModificator=((SdkOrderEntry)entry).getSdk().getSdkModificator();
    sdkModificator.addRoot(vFile,AnnotationOrderRootType.getInstance());
    sdkModificator.commitChanges();
  }
  dropCache();
}
