{
  if (host instanceof XmlAttributeValue) {
    final PsiElement parent=host.getParent();
    if (parent instanceof XmlAttribute) {
      final XmlAttribute attribute=(XmlAttribute)parent;
      if (!XsltSupport.isXsltFile(attribute.getContainingFile()))       return;
      if (!XsltSupport.isXPathAttribute(attribute))       return;
      final TextRange[] ranges=getInjectionRanges(attribute);
      for (      TextRange range : ranges) {
        if (range instanceof AVTRange) {
          if (((AVTRange)range).myComplete) {
            injectionPlacesRegistrar.addPlace(XPathFileType.XPATH.getLanguage(),range.shiftRight(2).grown(-2),"","");
          }
 else {
            injectionPlacesRegistrar.addPlace(XPathFileType.XPATH.getLanguage(),range.shiftRight(2).grown(-1),"{","");
          }
        }
 else {
          injectionPlacesRegistrar.addPlace(XPathFileType.XPATH.getLanguage(),range,"","");
        }
      }
    }
  }
}
