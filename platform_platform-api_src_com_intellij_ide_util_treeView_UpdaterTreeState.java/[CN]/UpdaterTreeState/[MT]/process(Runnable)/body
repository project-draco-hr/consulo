{
  boolean oldValue=isProcessingNow();
  try {
    setProcessingNow(true);
    runnable.run();
  }
  finally {
    if (!oldValue) {
      setProcessingNow(false);
    }
  }
  return isEmpty();
}
