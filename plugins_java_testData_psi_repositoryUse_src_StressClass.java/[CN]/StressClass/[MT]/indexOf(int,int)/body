{
  int max=offset + count;
  char v[]=value;
  if (fromIndex < 0) {
    fromIndex=0;
  }
 else   if (fromIndex >= count) {
    return -1;
  }
  int i=offset + fromIndex;
  if (ch < Character.MIN_SUPPLEMENTARY_CODE_POINT) {
    for (; i < max; i++) {
      if (v[i] == ch) {
        return i - offset;
      }
    }
    return -1;
  }
  if (ch <= Character.MAX_CODE_POINT) {
    char[] surrogates=Character.toChars(ch);
    for (; i < max; i++) {
      if (v[i] == surrogates[0]) {
        if (i + 1 == max) {
          break;
        }
        if (v[i + 1] == surrogates[1]) {
          return i - offset;
        }
      }
    }
  }
  return -1;
}
