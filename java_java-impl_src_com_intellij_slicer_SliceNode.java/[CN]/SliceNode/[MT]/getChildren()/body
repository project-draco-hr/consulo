{
  ProgressIndicator current=ProgressManager.getInstance().getProgressIndicator();
  ProgressIndicator indicator=current == null ? new ProgressIndicatorBase() : current;
  if (current == null) {
    indicator.start();
  }
  final Collection[] nodes=new Collection[1];
  ((ProgressManagerImpl)ProgressManager.getInstance()).executeProcessUnderProgress(new Runnable(){
    public void run(){
      nodes[0]=getChildrenUnderProgress(ProgressManager.getInstance().getProgressIndicator());
    }
  }
,indicator);
  if (current == null) {
    indicator.stop();
  }
  return nodes[0];
}
