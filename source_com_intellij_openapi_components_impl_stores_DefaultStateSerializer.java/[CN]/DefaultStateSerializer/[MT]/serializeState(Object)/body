{
  if (state instanceof Element) {
    return (Element)state;
  }
 else   if (state instanceof JDOMExternalizable) {
    JDOMExternalizable jdomExternalizable=(JDOMExternalizable)state;
    final Element element=new Element("temp_element");
    jdomExternalizable.writeExternal(element);
    return element;
  }
 else {
    return XmlSerializer.serialize(state,ourSerializationFilter);
  }
}
