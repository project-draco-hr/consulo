{
  if (state instanceof org.jdom.Element) {
    return JDOMUtil.convertToDOM((org.jdom.Element)state);
  }
 else   if (state instanceof JDOMExternalizable) {
    JDOMExternalizable jdomExternalizable=(JDOMExternalizable)state;
    final org.jdom.Element element=new org.jdom.Element("temp_element");
    jdomExternalizable.writeExternal(element);
    final Element domElement;
    try {
      final Document d=new Document();
      d.addContent(element);
      domElement=new DOMOutputter().output(d).getDocumentElement();
    }
 catch (    JDOMException e1) {
      throw new RuntimeException(e1);
    }
    return domElement;
  }
 else {
    return XmlSerializer.serialize(state,DOMUtil.createDocument(),ourSerializationFilter);
  }
}
