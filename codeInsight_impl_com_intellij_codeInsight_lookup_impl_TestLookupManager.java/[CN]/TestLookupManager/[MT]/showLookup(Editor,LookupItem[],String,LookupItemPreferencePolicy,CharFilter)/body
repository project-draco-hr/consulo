{
  hideActiveLookup();
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  items=(LookupItem[])items.clone();
  if (!settings.SHOW_SIGNATURES_IN_LOOKUPS) {
    items=filterEqualSignatures(items);
  }
  PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(editor.getDocument());
  sortItems(psiFile,items,itemPreferencePolicy);
  myActiveLookup=new LookupImpl(myProject,editor,items,prefix,itemPreferencePolicy,filter);
  myActiveLookupEditor=editor;
  ((LookupImpl)myActiveLookup).show();
  return myActiveLookup;
}
