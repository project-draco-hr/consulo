{
  ApplicationManager.getApplication().assertIsDispatchThread();
  MarkupModel markup=document.getMarkupModel(project);
  highlights=stripWarningsCoveredByErrors(highlights,markup);
  markup.putUserData(HIGHLIGHTS_IN_EDITOR_DOCUMENT_KEY,highlights);
  DaemonCodeAnalyzer codeAnalyzer=DaemonCodeAnalyzer.getInstance(project);
  if (codeAnalyzer != null && codeAnalyzer instanceof DaemonCodeAnalyzerImpl) {
    ((DaemonCodeAnalyzerImpl)codeAnalyzer).myStatusBarUpdater.updateStatus();
  }
}
