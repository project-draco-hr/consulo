{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  final TextEditor textEditor=TextEditorProvider.getInstance().getTextEditor(editor);
  BackgroundEditorHighlighter highlighter=textEditor.getBackgroundHighlighter();
  if (highlighter == null)   return;
  final HighlightingPass[] highlightingPasses=highlighter.createPassesForVisibleArea();
  setLastIntentionHint(null);
  renewUpdateProgress(true);
  THashMap<FileEditor,HighlightingPass[]> passes=new THashMap<FileEditor,HighlightingPass[]>(){
{
      put(textEditor,highlightingPasses);
    }
  }
;
  long modificationCount=PsiManager.getInstance(myProject).getModificationTracker().getModificationCount();
  myPassExecutorService.submitPasses(passes,myUpdateProgress,modificationCount);
}
