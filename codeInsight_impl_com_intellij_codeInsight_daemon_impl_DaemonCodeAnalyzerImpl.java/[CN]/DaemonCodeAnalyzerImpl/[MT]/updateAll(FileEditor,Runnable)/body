{
  if (myProject.isDisposed())   return;
  ApplicationManager.getApplication().assertIsDispatchThread();
  boolean editorHiddenByModelDialog=ModalityState.current().dominates(ModalityState.stateForComponent(editor.getComponent()));
  if (editorHiddenByModelDialog) {
    stopProcess(true);
    return;
  }
  BackgroundEditorHighlighter highlighter=editor.getBackgroundHighlighter();
  final HighlightingPass[] passes=highlighter == null ? HighlightingPass.EMPTY_ARRAY : highlighter.createPassesForEditor();
  updateHighlighters(editor,new LinkedHashSet<HighlightingPass>(Arrays.asList(passes)),postRunnable);
}
