{
  Editor[] editors=myEditorTracker.getActiveEditors();
  FileEditor[] fileEditors=new FileEditor[editors.length];
  if (editors.length > 0) {
    for (int i=0; i < fileEditors.length; i++) {
      fileEditors[i]=TextEditorProvider.getInstance().getTextEditor(editors[i]);
    }
  }
  if (ApplicationManager.getApplication().getCurrentModalityState() != ModalityState.NON_MMODAL) {
    return fileEditors;
  }
  final FileEditor[] tabEditors=FileEditorManager.getInstance(myProject).getSelectedEditors();
  if (fileEditors.length == 0)   return tabEditors;
  Set<FileEditor> common=new HashSet<FileEditor>(Arrays.asList(fileEditors));
  common.addAll(Arrays.asList(tabEditors));
  return common.toArray(new FileEditor[common.size()]);
}
