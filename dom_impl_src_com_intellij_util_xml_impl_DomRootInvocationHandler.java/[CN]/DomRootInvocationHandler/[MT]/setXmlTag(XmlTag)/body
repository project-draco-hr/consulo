{
  final XmlTag[] result=new XmlTag[]{null};
  getManager().runChange(new Runnable(){
    public void run(){
      try {
        result[0]=((XmlDocument)getFile().getDocument().replace(((XmlFile)tag.getContainingFile()).getDocument())).getRootTag();
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
    }
  }
);
  return result[0];
}
