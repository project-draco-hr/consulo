{
  final StringBuilder buf=new StringBuilder();
  for (  ThreadState state : myThreadDump) {
    buf.append(state.getStackTrace()).append("\n\n");
  }
  CopyPasteManager.getInstance().setContents(new StringSelection(buf.toString()));
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (!myProject.isDisposed()) {
        ToolWindowManager.getInstance(myProject).notifyByBalloon(ToolWindowId.RUN,MessageType.INFO,"Full thread dump was successfully copied to clipboard");
      }
    }
  }
);
}
