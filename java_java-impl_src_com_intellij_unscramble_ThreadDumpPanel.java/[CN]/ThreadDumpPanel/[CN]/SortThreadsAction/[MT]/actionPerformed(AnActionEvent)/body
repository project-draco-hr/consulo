{
  final DefaultListModel model=(DefaultListModel)myThreadList.getModel();
  final ThreadState selected=(ThreadState)myThreadList.getSelectedValue();
  ArrayList<ThreadState> states=new ArrayList<ThreadState>();
  for (int i=0; i < model.getSize(); i++) {
    states.add((ThreadState)model.getElementAt(i));
  }
  Collections.sort(states,COMPARATOR);
  int selectedIndex=0;
  for (int i=0; i < states.size(); i++) {
    final ThreadState state=states.get(i);
    model.setElementAt(state,i);
    if (state == selected) {
      selectedIndex=i;
    }
  }
  myThreadList.setSelectedIndex(selectedIndex);
  COMPARATOR=COMPARATOR == BY_TYPE ? BY_NAME : BY_TYPE;
  update(e);
}
