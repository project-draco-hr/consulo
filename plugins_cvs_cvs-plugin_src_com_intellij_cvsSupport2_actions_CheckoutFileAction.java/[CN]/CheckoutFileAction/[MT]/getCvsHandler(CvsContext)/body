{
  if (myModifiedFiles != null) {
    if (!myModifiedFiles.isEmpty()) {
      if (!new ReplaceFileConfirmationDialog(context.getProject(),CvsBundle.getCheckoutOperationName()).requestConfirmation(myModifiedFiles)) {
        return CvsHandler.NULL;
      }
    }
  }
  myModifiedFiles=null;
  Project project=context.getProject();
  FilePath[] filesArray=context.getSelectedFilePaths();
  List<FilePath> files=Arrays.asList(filesArray);
  if (CvsVcs2.getInstance(project).getCheckoutOptions().getValue() || OptionsDialog.shiftIsPressed(context.getModifiers())) {
    CheckoutFileDialog checkoutFileDialog=new CheckoutFileDialog(project,files);
    checkoutFileDialog.show();
    if (!checkoutFileDialog.isOK())     return CvsHandler.NULL;
  }
  return CommandCvsHandler.createCheckoutFileHandler(filesArray,CvsConfiguration.getInstance(project));
}
