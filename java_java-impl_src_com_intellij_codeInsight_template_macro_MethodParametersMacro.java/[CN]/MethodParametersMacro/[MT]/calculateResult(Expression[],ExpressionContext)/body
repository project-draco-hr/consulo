{
  Project project=context.getProject();
  int templateStartOffset=context.getTemplateStartOffset();
  final int offset=templateStartOffset > 0 ? context.getTemplateStartOffset() - 1 : context.getTemplateStartOffset();
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(context.getEditor().getDocument());
  PsiElement place=file.findElementAt(offset);
  while (place != null) {
    if (place instanceof PsiMethod) {
      List<Result> result=new ArrayList<Result>();
      for (      PsiParameter parameter : ((PsiMethod)place).getParameterList().getParameters()) {
        result.add(new TextResult(parameter.getName()));
      }
      return new ListResult(result);
    }
    place=place.getParent();
  }
  return null;
}
