{
  myBaseLanguage=baseLanguage;
  myID=ID;
  myMimeTypes=mimeTypes;
  Class<? extends Language> langClass=getClass();
  Language prev=ourRegisteredLanguages.put(langClass,this);
  if (prev != null) {
    LOG.error("Language of '" + langClass + "' is already registered: "+ prev);
    return;
  }
  prev=ourRegisteredIDs.put(ID,this);
  if (prev != null) {
    LOG.error("Language with ID '" + ID + "' is already registered: "+ prev.getClass());
  }
  for (  String mimeType : mimeTypes) {
    if (StringUtil.isEmpty(mimeType)) {
      continue;
    }
    List<Language> languagesByMimeType=ourRegisteredMimeTypes.get(mimeType);
    if (languagesByMimeType == null) {
synchronized (ourRegisteredMimeTypes) {
        languagesByMimeType=ourRegisteredMimeTypes.get(mimeType);
        if (languagesByMimeType == null) {
          languagesByMimeType=Collections.synchronizedList(new ArrayList<Language>());
          ourRegisteredMimeTypes.put(mimeType,languagesByMimeType);
        }
      }
    }
    languagesByMimeType.add(this);
  }
  if (baseLanguage != null) {
    baseLanguage.myDialects.add(this);
  }
}
