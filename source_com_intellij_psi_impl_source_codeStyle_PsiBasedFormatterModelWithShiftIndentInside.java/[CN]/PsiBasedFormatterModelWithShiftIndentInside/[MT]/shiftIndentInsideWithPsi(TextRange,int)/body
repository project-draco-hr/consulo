{
  final int offset=textRange.getStartOffset();
  ASTNode leafElement=findElementAt(offset);
  while (leafElement != null && !leafElement.getTextRange().equals(textRange)) {
    leafElement=leafElement.getTreeParent();
  }
  if (leafElement != null && leafElement.getTextRange().equals(textRange) && ShiftIndentInsideHelper.mayShiftIndentInside(leafElement)) {
    return new ShiftIndentInsideHelper(StdFileTypes.JAVA,myProject).shiftIndentInside(leafElement,shift).getTextRange();
  }
 else {
    return textRange;
  }
}
