{
  ExitCode rc=ExitCode.NOTHING_DONE;
  final MavenResourcesBuilder mavenBuilder=BUILDER_KEY.get(context);
  if (mavenBuilder == null) {
    return rc;
  }
  final Set<ModuleBuildTarget> chunkTargets=chunk.getTargets();
  if (chunkTargets.isEmpty()) {
    return rc;
  }
  final Set<JpsModule> productionModules=new HashSet<JpsModule>();
  final Set<JpsModule> testModules=new HashSet<JpsModule>();
  for (  ModuleBuildTarget target : chunkTargets) {
    (target.isTests() ? testModules : productionModules).add(target.getModule());
  }
  try {
    if (runMavenBuilderForModules(context,mavenBuilder,productionModules,PRODUCTION_TARGETS_KEY.get(context))) {
      rc=ExitCode.OK;
    }
    if (runMavenBuilderForModules(context,mavenBuilder,testModules,TEST_TARGETS_KEY.get(context))) {
      rc=ExitCode.OK;
    }
    return rc;
  }
 catch (  IOException e) {
    throw new ProjectBuildException(e);
  }
}
