{
  if (text == null || range.getLength() < 1) {
    return null;
  }
  List<CheckArea> results=new ArrayList<CheckArea>();
  String word=text.substring(range.getStartOffset(),range.getEndOffset());
  String[] words=splitNameIntoWords(word);
  if (words == null || words.length == 0) {
    return results;
  }
  if (words.length == 1) {
    Matcher matcher=WORD.matcher(words[0]);
    if (matcher.find()) {
      TextRange found=matcherRange(range,matcher);
      addWord(text,results,false,found);
    }
    return results;
  }
  boolean isCapitalized=Strings.isCapitalized(words[0]);
  boolean containsShortWord=containsShortWord(words);
  if (isCapitalized && containsShortWord) {
    results.add(new CheckArea(text,range,true));
    return results;
  }
  boolean isAllWordsAreUpperCased=isAllWordsAreUpperCased(words);
  int index=0;
  for (  String s : words) {
    int start=word.indexOf(s,index);
    int end=start + s.length();
    boolean isUpperCase=Strings.isUpperCase(s);
    boolean flag=(isUpperCase && !isAllWordsAreUpperCased);
    Matcher matcher=WORD.matcher(s);
    if (matcher.find()) {
      TextRange found=matcherRange(subRange(range,start,end),matcher);
      addWord(text,results,flag,found);
    }
    index=end;
  }
  return results;
}
