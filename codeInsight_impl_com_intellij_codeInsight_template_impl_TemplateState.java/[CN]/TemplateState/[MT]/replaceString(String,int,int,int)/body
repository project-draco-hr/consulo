{
  String oldText=myDocument.getCharsSequence().subSequence(start,end).toString();
  if (!oldText.equals(newValue)) {
    mySegments.setNeighboursGreedy(segmentNumber,false);
    myDocument.replaceString(start,end,newValue);
    mySegments.replaceSegmentAt(segmentNumber,start,start + newValue.length());
    mySegments.setNeighboursGreedy(segmentNumber,true);
  }
}
