{
  int offset=editor.getCaretModel().getOffset();
  PsiElement element=file.findElementAt(offset);
  if (element == null)   return false;
  if (!file.getManager().isInProject(file))   return false;
  if (element instanceof PsiJavaToken) {
    PsiJavaToken token=(PsiJavaToken)element;
    if (!(token.getParent() instanceof PsiBinaryExpression))     return false;
    PsiBinaryExpression expression=(PsiBinaryExpression)token.getParent();
    boolean isAndExpression=expression.getOperationSign().getTokenType() == JavaTokenType.ANDAND;
    boolean isOrExpression=expression.getOperationSign().getTokenType() == JavaTokenType.OROR;
    if (!isAndExpression && !isOrExpression)     return false;
    while (expression.getParent() instanceof PsiBinaryExpression) {
      if (isAndExpression && expression.getOperationSign().getTokenType() != JavaTokenType.ANDAND)       return false;
      if (isOrExpression && expression.getOperationSign().getTokenType() != JavaTokenType.OROR)       return false;
      expression=(PsiBinaryExpression)expression.getParent();
    }
    if (!(expression.getParent() instanceof PsiIfStatement))     return false;
    PsiIfStatement ifStatement=(PsiIfStatement)expression.getParent();
    if (!PsiTreeUtil.isAncestor(ifStatement.getCondition(),expression,false))     return false;
    if (ifStatement.getThenBranch() == null)     return false;
    setText("Split into 2 if's");
    return true;
  }
  return false;
}
