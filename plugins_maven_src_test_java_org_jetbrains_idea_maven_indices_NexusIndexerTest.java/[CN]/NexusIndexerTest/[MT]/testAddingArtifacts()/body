{
  IndexingContext c=addContext("virtual",indexDir,null,null);
  createProjectPom("");
  ArtifactInfo ai=new ArtifactInfo(c.getRepositoryId(),"group","id","version",null);
  ArtifactContext a=new ArtifactContext(new File(myProjectPom.getPath()),null,null,ai);
  indexer.addArtifactToIndex(a,c);
  Query q=new TermQuery(new Term(ArtifactInfo.GROUP_ID,"group"));
  Collection<ArtifactInfo> result=indexer.searchFlat(ArtifactInfo.VERSION_COMPARATOR,q);
  assertEquals(1,result.size());
  ArtifactInfo found=new ArrayList<ArtifactInfo>(result).get(0);
  assertEquals("group",found.groupId);
  assertEquals("id",found.artifactId);
  assertEquals("version",found.version);
  IndexReader r=c.getIndexReader();
  for (int i=0; i < r.numDocs(); i++) {
    Document d=r.document(i);
  }
}
