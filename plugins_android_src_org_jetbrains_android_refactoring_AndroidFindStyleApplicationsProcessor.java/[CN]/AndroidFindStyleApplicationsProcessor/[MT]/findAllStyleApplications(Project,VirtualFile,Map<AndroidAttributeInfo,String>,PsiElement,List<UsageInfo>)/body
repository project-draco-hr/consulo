{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      final PsiFile layoutFile=PsiManager.getInstance(project).findFile(layoutVFile);
      if (!(layoutFile instanceof XmlFile)) {
        return;
      }
      if (!(DomManager.getDomManager(project).getDomFileDescription((XmlFile)layoutFile) instanceof LayoutDomFileDescription)) {
        return;
      }
      layoutFile.accept(new XmlRecursiveElementVisitor(){
        @Override public void visitXmlTag(        XmlTag tag){
          super.visitXmlTag(tag);
          if (isPossibleApplicationOfStyle(project,tag,attrMap,parentStyleNameAttrValue)) {
            usages.add(new UsageInfo(tag));
          }
        }
      }
);
      PsiManager.getInstance(project).dropResolveCaches();
      InjectedLanguageManager.getInstance(project).dropFileCaches(layoutFile);
    }
  }
);
}
