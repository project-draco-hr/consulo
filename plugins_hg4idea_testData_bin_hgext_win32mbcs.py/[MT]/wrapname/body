def wrapname(name, wrapper):
    (module, name) = name.rsplit('.', 1)
    module = sys.modules[module]
    func = getattr(module, name)

    def f(*args, **kwds):
        return wrapper(func, args, kwds)
    try:
        f.__name__ = func.__name__
    except Exception:
        pass
    setattr(module, name, f)
