{
  if (editedFile instanceof XmlFile && c == '/') {
    PsiDocumentManager.getInstance(project).commitAllDocuments();
    XmlFile file=(XmlFile)PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
    final int offset=editor.getCaretModel().getOffset();
    FileViewProvider provider=file.getViewProvider();
    PsiElement element=provider.findElementAt(offset,XMLLanguage.class);
    if (element instanceof XmlToken) {
      final IElementType tokenType=((XmlToken)element).getTokenType();
      if (tokenType == XmlTokenType.XML_EMPTY_ELEMENT_END && offset == element.getTextOffset()) {
        editor.getCaretModel().moveToOffset(offset + 1);
        editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
        return true;
      }
 else       if (tokenType == XmlTokenType.XML_TAG_END && offset == element.getTextOffset()) {
        final ASTNode parentNode=element.getParent().getNode();
        final ASTNode child=XmlChildRole.CLOSING_TAG_START_FINDER.findChild(parentNode);
        if (child != null && offset + 1 == child.getTextRange().getStartOffset()) {
          editor.getDocument().replaceString(offset + 1,parentNode.getTextRange().getEndOffset(),"");
        }
      }
    }
    return false;
  }
  return false;
}
