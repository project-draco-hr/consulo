{
  LOG.assertTrue(myTreeTable != null);
  Boolean state=null;
  final HashSet<HighlightDisplayKey> tools=new HashSet<HighlightDisplayKey>();
  final List<InspectionConfigTreeNode> nodes=new ArrayList<InspectionConfigTreeNode>();
  for (  TreePath selectionPath : myTreeTable.getTree().getSelectionPaths()) {
    final InspectionConfigTreeNode node=(InspectionConfigTreeNode)selectionPath.getLastPathComponent();
    collectInspectionFromNodes(node,tools,nodes);
  }
  final int[] selectedRows=myTreeTable.getSelectedRows();
  for (  int selectedRow : selectedRows) {
    final Boolean value=(Boolean)myTreeTable.getValueAt(selectedRow,IS_ENABLED_COLUMN);
    if (state == null) {
      state=value;
    }
 else     if (!state.equals(value)) {
      state=null;
      break;
    }
  }
  final boolean newState=!Boolean.TRUE.equals(state);
  final InspectionProfileImpl profile=mySettings.getInspectionProfile();
  for (  HighlightDisplayKey tool : tools) {
    setToolEnabled(newState,profile,tool);
  }
  for (  InspectionConfigTreeNode node : nodes) {
    node.dropCache();
    mySettings.onChanged(node);
  }
  updateRightPanel();
}
