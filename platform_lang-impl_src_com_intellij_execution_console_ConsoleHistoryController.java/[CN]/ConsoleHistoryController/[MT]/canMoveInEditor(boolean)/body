{
  final Editor consoleEditor=myConsole.getCurrentEditor();
  final Document document=consoleEditor.getDocument();
  final CaretModel caretModel=consoleEditor.getCaretModel();
  if (LookupManager.getActiveLookup(consoleEditor) != null)   return false;
  if (next) {
    return document.getLineNumber(caretModel.getOffset()) == 0;
  }
 else {
    return document.getLineNumber(caretModel.getOffset()) == document.getLineCount() - 1 && StringUtil.isEmptyOrSpaces(document.getText().substring(caretModel.getOffset()));
  }
}
