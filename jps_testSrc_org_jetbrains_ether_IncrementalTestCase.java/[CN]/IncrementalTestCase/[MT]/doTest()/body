{
  final ProjectWrapper first=ProjectWrapper.load(getWorkDir(),"project.builder.useInProcessJavac=true",false);
  first.rebuild();
  first.save();
  Thread.sleep(1000);
  modify();
  final ProjectWrapper second=ProjectWrapper.load(getWorkDir(),"project.builder.useInProcessJavac=true",true);
  final PrintStream stream=new PrintStream(new FileOutputStream(getWorkDir() + ".log"),true);
  try {
    second.makeModule(null,new ProjectWrapper.Flags(){
      public boolean tests(){
        return false;
      }
      public boolean incremental(){
        return true;
      }
      public boolean force(){
        return false;
      }
      public PrintStream logStream(){
        return stream;
      }
    }
);
  }
  finally {
    stream.close();
  }
  FileAssert.assertEquals(new File(getBaseDir() + ".log"),new File(getWorkDir() + ".log"));
}
