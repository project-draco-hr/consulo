{
  final ProjectWrapper first=ProjectWrapper.load(getWorkDir(),null,false);
  first.rebuild();
  first.save();
  modify();
  final ProjectWrapper second=ProjectWrapper.load(getWorkDir(),null,true);
  final PrintStream stream=new PrintStream(new FileOutputStream(getWorkDir() + ".log"));
  try {
    second.makeModule(null,new ProjectWrapper.Flags(){
      public boolean tests(){
        return false;
      }
      public boolean incremental(){
        return true;
      }
      public boolean force(){
        return false;
      }
      public PrintStream logStream(){
        return stream;
      }
    }
);
  }
  finally {
    stream.close();
  }
  FileAssert.assertEquals(new File(getBaseDir() + ".log"),new File(getWorkDir() + ".log"));
}
