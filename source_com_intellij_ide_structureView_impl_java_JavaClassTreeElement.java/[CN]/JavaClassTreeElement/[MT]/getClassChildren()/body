{
  ArrayList<StructureViewTreeElement> array=new ArrayList<StructureViewTreeElement>();
  final PsiClass aClass=getElement();
  if (aClass == null)   return array;
  List<PsiElement> ownChildren=Arrays.asList(aClass.getChildren());
  List<PsiElement> inherited=new ArrayList<PsiElement>(ownChildren);
  PsiScopesUtil.processScope(aClass,new AddAllMembersProcessor(inherited,aClass),PsiSubstitutor.UNKNOWN,null,aClass);
  for (int i=0; i < inherited.size(); i++) {
    PsiElement child=inherited.get(i);
    if (!child.isValid())     continue;
    if (child instanceof PsiClass) {
      array.add(new JavaClassTreeElement((PsiClass)child,!ownChildren.contains(child)));
    }
 else     if (child instanceof PsiMethod || child instanceof PsiField) {
      addMember(child,array,!ownChildren.contains(child));
    }
  }
  return array;
}
