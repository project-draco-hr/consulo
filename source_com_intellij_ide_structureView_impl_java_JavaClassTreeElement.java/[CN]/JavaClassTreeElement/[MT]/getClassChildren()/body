{
  ArrayList<StructureViewTreeElement> array=new ArrayList<StructureViewTreeElement>();
  List<PsiElement> ownChildren=Arrays.asList(getElement().getChildren());
  List<PsiElement> inherited=new ArrayList<PsiElement>(ownChildren);
  PsiScopesUtil.processScope(getElement(),new AddAllMembersProcessor(inherited,getElement()),PsiSubstitutor.UNKNOWN,null,getElement());
  for (int i=0; i < inherited.size(); i++) {
    PsiElement child=inherited.get(i);
    if (!child.isValid())     continue;
    if (child instanceof PsiClass) {
      array.add(new JavaClassTreeElement((PsiClass)child,!ownChildren.contains(child)));
    }
 else     if (child instanceof PsiMethod || child instanceof PsiField) {
      addMember(child,array,!ownChildren.contains(child));
    }
  }
  return array;
}
