{
  ArrayList<StructureViewTreeElement> array=new ArrayList<StructureViewTreeElement>();
  final PsiClass aClass=getElement();
  if (aClass == null)   return array;
  List<PsiElement> ownChildren=Arrays.asList(aClass.getChildren());
  List<PsiElement> inherited=new ArrayList<PsiElement>(ownChildren);
  PsiScopesUtil.processScope(aClass,new AddAllMembersProcessor(inherited,aClass),PsiSubstitutor.UNKNOWN,null,aClass);
  for (  PsiElement child : inherited) {
    if (!child.isValid())     continue;
    boolean isInherited=!ownChildren.contains(child);
    if (child instanceof PsiClass) {
      array.add(new JavaClassTreeElement((PsiClass)child,!ownChildren.contains(child)));
    }
 else     if (child instanceof PsiField) {
      array.add(new PsiFieldTreeElement((PsiField)child,isInherited));
    }
 else     if (child instanceof PsiMethod) {
      array.add(new PsiMethodTreeElement((PsiMethod)child,isInherited));
    }
 else     if (child instanceof PsiClassInitializer) {
      array.add(new ClassInitializerTreeElement((PsiClassInitializer)child));
    }
  }
  return array;
}
