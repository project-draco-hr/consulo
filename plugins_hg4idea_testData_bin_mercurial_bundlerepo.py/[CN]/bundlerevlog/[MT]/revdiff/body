def revdiff(self, rev1, rev2):
    'return or calculate a delta between two revisions'
    if (self.bundle(rev1) and self.bundle(rev2)):
        revb = self.rev(self.bundlebase(rev2))
        if (revb == rev1):
            return self._chunk(rev2)
    elif ((not self.bundle(rev1)) and (not self.bundle(rev2))):
        return revlog.revlog.revdiff(self, rev1, rev2)
    return mdiff.textdiff(self.revision(self.node(rev1)), self.revision(self.node(rev2)))
