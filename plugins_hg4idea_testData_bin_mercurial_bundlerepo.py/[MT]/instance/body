def instance(ui, path, create):
    if create:
        raise util.Abort(_('cannot create new bundle repository'))
    parentpath = ui.config('bundle', 'mainreporoot', '')
    if parentpath:
        cwd = os.getcwd()
        if (parentpath == cwd):
            parentpath = ''
        else:
            cwd = os.path.join(cwd, '')
            if parentpath.startswith(cwd):
                parentpath = parentpath[len(cwd):]
    path = util.drop_scheme('file', path)
    if path.startswith('bundle:'):
        path = util.drop_scheme('bundle', path)
        s = path.split('+', 1)
        if (len(s) == 1):
            (repopath, bundlename) = (parentpath, s[0])
        else:
            (repopath, bundlename) = s
    else:
        (repopath, bundlename) = (parentpath, path)
    return bundlerepository(ui, repopath, bundlename)
