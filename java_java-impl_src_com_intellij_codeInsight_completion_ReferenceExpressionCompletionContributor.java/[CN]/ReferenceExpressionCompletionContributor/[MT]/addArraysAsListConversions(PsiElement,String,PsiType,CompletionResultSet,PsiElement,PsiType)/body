{
  PsiType componentType=PsiUtil.extractIterableTypeParameter(expectedType,true);
  if (componentType == null || !(itemType instanceof PsiArrayType) || !componentType.isAssignableFrom(((PsiArrayType)itemType).getComponentType())) {
    return;
  }
  final String qualifierText=getQualifierText(qualifier);
  final PsiExpression conversion=createExpression("java.util.Arrays.asList(" + qualifierText + prefix+ ")",element);
  final LookupItem item=new ExpressionLookupItem(conversion);
  @NonNls final String presentable="Arrays.asList(" + qualifierText + prefix+ ")";
  item.setLookupString(StringUtil.isEmpty(qualifierText) ? presentable : prefix);
  item.setPresentableText(presentable);
  item.addLookupStrings(prefix,presentable,"asList(" + prefix + ")");
  item.setIcon(Icons.METHOD_ICON);
  item.setInsertHandler(new InsertHandler<LookupElement>(){
    public void handleInsert(    InsertionContext context,    LookupElement item){
      FeatureUsageTracker.getInstance().triggerFeatureUsed(JavaCompletionFeatures.SECOND_SMART_COMPLETION_ASLIST);
      final Editor editor=context.getEditor();
      int startOffset=context.getStartOffset();
      final Document document=editor.getDocument();
      final int tailOffset=startOffset + item.getLookupString().length();
      startOffset-=qualifierText.length();
      final Project project=element.getProject();
      final String callSpace=getSpace(CodeStyleSettingsManager.getSettings(project).SPACE_WITHIN_METHOD_CALL_PARENTHESES);
      @NonNls final String newText="java.util.Arrays.asList(" + callSpace + qualifierText+ prefix+ callSpace+ ")";
      document.replaceString(startOffset,tailOffset,newText);
      PsiDocumentManager.getInstance(project).commitDocument(document);
      final PsiFile file=PsiDocumentManager.getInstance(project).getPsiFile(document);
      try {
        JavaCodeStyleManager.getInstance(project).shortenClassReferences(file,startOffset,startOffset + CommonClassNames.JAVA_UTIL_ARRAYS.length());
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      PostprocessReformattingAspect.getInstance(project).doPostponedFormatting();
    }
  }
);
  result.addElement(item);
}
