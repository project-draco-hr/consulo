{
  CollectingContentIterator finder=myIndex.createContentIterator();
  iterateIndexableFiles(finder);
  final List<VirtualFile> files=finder.getFiles();
  for (Iterator<VirtualFile> virtualFileIterator=files.iterator(); virtualFileIterator.hasNext(); ) {
    VirtualFile file=virtualFileIterator.next();
    if (file.getUserData(DONT_INDEX_AGAIN_KEY) != null) {
      virtualFileIterator.remove();
    }
  }
  return files.toArray(new VirtualFile[files.size()]);
}
