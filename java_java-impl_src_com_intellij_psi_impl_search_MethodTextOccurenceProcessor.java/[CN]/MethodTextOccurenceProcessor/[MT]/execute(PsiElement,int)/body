{
  final PsiReference[] refs=element.getReferences();
  for (  PsiReference ref : refs) {
    if (ref.getRangeInElement().contains(offsetInElement)) {
      for (      PsiMethod method : myMethods) {
        if (ref instanceof ResolvingHint && !((ResolvingHint)ref).canResolveTo(method)) {
          return true;
        }
        if (ref.isReferenceTo(method)) {
          return myConsumer.process(ref);
        }
        PsiElement refElement=ref.resolve();
        if (refElement instanceof PsiMethod) {
          PsiMethod refMethod=(PsiMethod)refElement;
          PsiClass refMethodClass=refMethod.getContainingClass();
          if (refMethodClass == null)           continue;
          if (!refMethod.hasModifierProperty(PsiModifier.STATIC)) {
            PsiSubstitutor substitutor=TypeConversionUtil.getClassSubstitutor(myContainingClass,refMethodClass,PsiSubstitutor.EMPTY);
            if (substitutor != null) {
              MethodSignature superSignature=method.getSignature(substitutor);
              MethodSignature refSignature=refMethod.getSignature(PsiSubstitutor.EMPTY);
              if (MethodSignatureUtil.isSubsignature(superSignature,refSignature)) {
                if (!myConsumer.process(ref))                 return false;
              }
            }
          }
          if (!myStrictSignatureSearch) {
            PsiManager manager=method.getManager();
            if (manager.areElementsEquivalent(refMethodClass,myContainingClass)) {
              if (!myConsumer.process(ref))               return false;
            }
          }
        }
      }
    }
  }
  return true;
}
