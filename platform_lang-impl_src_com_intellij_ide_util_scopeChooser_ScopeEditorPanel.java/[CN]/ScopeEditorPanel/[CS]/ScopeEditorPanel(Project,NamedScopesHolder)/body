{
  myProject=project;
  myHolder=holder;
  myPackageTree=new Tree(new RootNode(project));
  myButtonsPanel.add(createActionsPanel());
  myTreePanel.setLayout(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myPackageTree),BorderLayout.CENTER);
  myTreeToolbar.setLayout(new BorderLayout());
  myTreeToolbar.add(createTreeToolbar(),BorderLayout.WEST);
  myTreeExpansionMonitor=PackageTreeExpansionMonitor.install(myPackageTree,myProject);
  myTreeMarker=new Marker(){
    public boolean isMarked(    VirtualFile file){
      return myCurrentScope != null && (myCurrentScope instanceof PackageSetBase ? ((PackageSetBase)myCurrentScope).contains(file,myHolder) : myCurrentScope.contains(PackageSetBase.getPsiFile(file,myHolder),myHolder));
    }
  }
;
  myPatternField.getDocument().addDocumentListener(new DocumentAdapter(){
    public void textChanged(    DocumentEvent event){
      onTextChange();
    }
  }
);
  myPatternField.addCaretListener(new CaretListener(){
    public void caretUpdate(    CaretEvent e){
      myCaretPosition=e.getDot();
      updateCaretPositionText();
    }
  }
);
  myPatternField.addFocusListener(new FocusListener(){
    public void focusGained(    FocusEvent e){
      if (myErrorMessage != null) {
        myPositionPanel.setVisible(true);
        myPanel.revalidate();
      }
    }
    public void focusLost(    FocusEvent e){
      myPositionPanel.setVisible(false);
      myPanel.revalidate();
    }
  }
);
  initTree(myPackageTree);
}
