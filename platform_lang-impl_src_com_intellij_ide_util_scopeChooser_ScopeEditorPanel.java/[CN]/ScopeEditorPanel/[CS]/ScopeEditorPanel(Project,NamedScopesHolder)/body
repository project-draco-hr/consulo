{
  myProject=project;
  myHolder=holder;
  myButtonsPanel.add(createActionsPanel());
  myPackageTree=new Tree(new RootNode(project));
  myTreePanel.setLayout(new BorderLayout());
  myTreePanel.add(ScrollPaneFactory.createScrollPane(myPackageTree),BorderLayout.CENTER);
  myTreeToolbar.setLayout(new BorderLayout());
  myTreeToolbar.add(createTreeToolbar(),BorderLayout.WEST);
  myTreeExpansionMonitor=PackageTreeExpansionMonitor.install(myPackageTree,myProject);
  myTreeMarker=new Marker(){
    public boolean isMarked(    VirtualFile file){
      return myCurrentScope != null && (myCurrentScope instanceof PackageSetBase ? ((PackageSetBase)myCurrentScope).contains(file,getHolder()) : myCurrentScope.contains(PackageSetBase.getPsiFile(file,getHolder()),getHolder()));
    }
  }
;
  myPatternField.getDocument().addDocumentListener(new DocumentAdapter(){
    public void textChanged(    DocumentEvent event){
      onTextChange();
    }
  }
);
  myPatternField.addCaretListener(new CaretListener(){
    public void caretUpdate(    CaretEvent e){
      myCaretPosition=e.getDot();
      updateCaretPositionText();
    }
  }
);
  myPatternField.addFocusListener(new FocusListener(){
    public void focusGained(    FocusEvent e){
      myCaretPositionLabel.setVisible(true);
    }
    public void focusLost(    FocusEvent e){
      myCaretPositionLabel.setVisible(false);
    }
  }
);
  initTree(myPackageTree);
}
