{
  tree.setCellRenderer(new MyTreeCellRenderer());
  tree.setRootVisible(false);
  tree.setShowsRootHandles(true);
  tree.setLineStyleAngled();
  TreeUtil.installActions(tree);
  SmartExpander.installOn(tree);
  new TreeSpeedSearch(tree);
  tree.addTreeWillExpandListener(new TreeWillExpandListener(){
    @Override public void treeWillExpand(    TreeExpansionEvent event) throws ExpandVetoException {
      final PackageDependenciesNode node=(PackageDependenciesNode)event.getPath().getLastPathComponent();
      if (node.isSorted())       return;
      final List children=TreeUtil.childrenToArray(node);
      Collections.sort(children,new DependencyNodeComparator());
      node.removeAllChildren();
      TreeUtil.addChildrenTo(node,children);
      node.setSorted(true);
    }
    @Override public void treeWillCollapse(    TreeExpansionEvent event) throws ExpandVetoException {
    }
  }
);
}
