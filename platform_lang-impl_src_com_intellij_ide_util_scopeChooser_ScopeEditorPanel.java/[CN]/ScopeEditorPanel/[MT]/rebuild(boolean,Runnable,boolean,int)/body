{
  myUpdateAlarm.cancelAllRequests();
  final Runnable request=new Runnable(){
    public void run(){
      ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
        public void run(){
          myIsInUpdate=true;
          if (updateText) {
            final String text=myCurrentScope != null ? myCurrentScope.getText() : null;
            if (text != null) {
              SwingUtilities.invokeLater(new Runnable(){
                public void run(){
                  myPatternField.setText(text);
                }
              }
);
            }
          }
          try {
            if (!myProject.isDisposed()) {
              updateTreeModel(requestFocus);
            }
          }
 catch (          ProcessCanceledException e) {
            return;
          }
          if (runnable != null) {
            runnable.run();
          }
          myIsInUpdate=false;
        }
      }
);
    }
  }
;
  myUpdateAlarm.addRequest(request,delayMillis);
}
