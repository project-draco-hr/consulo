{
  myUpdateAlarm.cancelAllRequests();
  final Runnable request=new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
        @Override public void run(){
          if (updateText) {
            final String text=myCurrentScope != null ? myCurrentScope.getText() : null;
            SwingUtilities.invokeLater(new Runnable(){
              @Override public void run(){
                try {
                  myIsInUpdate=true;
                  myPatternField.setText(text);
                }
  finally {
                  myIsInUpdate=false;
                }
              }
            }
);
          }
          try {
            if (!myProject.isDisposed()) {
              updateTreeModel(requestFocus);
            }
          }
 catch (          ProcessCanceledException e) {
            return;
          }
          if (runnable != null) {
            runnable.run();
          }
        }
      }
);
    }
  }
;
  myUpdateAlarm.addRequest(request,delayMillis);
}
