{
  Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  VirtualFile[] array=PlatformDataKeys.VIRTUAL_FILE_ARRAY.getData(dataContext);
  Document document=getEditingDocument(dataContext);
  if (array == null || array.length != 1 || document == null) {
    return null;
  }
  if (array[0].isDirectory()) {
    return null;
  }
  if (isSameFile(document,array[0])) {
    return null;
  }
  return new FileEditorContents(document,array[0],project);
}
