{
  final IElementType elementType=myNode.getElementType();
  final IElementType type1=((AbstractBlock)child1).myNode.getElementType();
  final IElementType type2=((AbstractBlock)child2).myNode.getElementType();
  if ((type2 == getTagType() || type2 == ElementType.XML_END_TAG_START || type2 == ElementType.XML_TEXT) && myXmlFormattingPolicy.getShouldKeepWhiteSpaces()) {
    return getFormatter().getReadOnlySpace();
  }
  if (elementType == ElementType.XML_TEXT) {
    return getSpacesInsideText(type1,type2);
  }
 else   if (elementType == ElementType.XML_ATTRIBUTE) {
    return getSpacesInsideAttribute(type1,type2);
  }
  if (type1 == ElementType.XML_PROLOG) {
    return createDefaultSpace(true);
  }
  if (elementType == ElementType.XML_DOCTYPE) {
    return createDefaultSpace(true);
  }
  return createDefaultSpace(false);
}
