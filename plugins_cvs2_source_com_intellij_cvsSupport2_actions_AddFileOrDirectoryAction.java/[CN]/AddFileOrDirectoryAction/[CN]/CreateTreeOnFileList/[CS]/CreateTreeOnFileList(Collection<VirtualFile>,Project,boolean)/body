{
  myFiles=files;
  myProject=project;
  myShouldIncludeAllRoots=shouldIncludeAllRoots;
  fillFileToInfoMap();
  setAllParents();
  if (!myShouldIncludeAllRoots) {
    final CvsEntriesManager entriesManager=CvsEntriesManager.getInstance();
    for (    final VirtualFile file : files) {
      VirtualFile virtualFile=(VirtualFile)file;
      if (entriesManager.fileIsIgnored(virtualFile)) {
        myResult.get(virtualFile).setIncluded(false);
      }
    }
  }
  removeFromMapInfoWithParentAndResortAll();
}
