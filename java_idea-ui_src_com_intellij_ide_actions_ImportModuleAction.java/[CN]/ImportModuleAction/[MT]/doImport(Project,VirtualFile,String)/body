{
  ProjectImportProvider[] providers=ProjectImportProvider.PROJECT_IMPORT_PROVIDER.getExtensions();
  List<ProjectImportProvider> available=ContainerUtil.filter(providers,new Condition<ProjectImportProvider>(){
    @Override public boolean value(    ProjectImportProvider provider){
      return provider.canImport(file,project);
    }
  }
);
  if (available.isEmpty()) {
    Messages.showInfoMessage(project,"Cannot import anything from " + file.getPath(),"Cannot Import");
    return Collections.emptyList();
  }
  String path=file.isDirectory() ? file.getPath() : file.getParent().getPath();
  AddModuleWizard wizard=new AddModuleWizard(wizardTitle,project,path,available.toArray(new ProjectImportProvider[available.size()]));
  if (wizard.getStepCount() > 0) {
    if (wizard.showAndGet()) {
      return createFromWizard(project,wizard);
    }
    return Collections.emptyList();
  }
 else {
    ProjectImportBuilder builder=available.get(0).getBuilder();
    builder.setFileToImport(file.getPath());
    return builder.commit(project);
  }
}
