{
  final PsiFile containingFile=root.getContainingFile();
  final VirtualFile virtualFile=containingFile.getVirtualFile();
  FileHighlighingSetting[] fileHighlighingSettings=myHighlightSettings.get(virtualFile);
  if (fileHighlighingSettings == null) {
    fileHighlighingSettings=getDefaults(containingFile.getViewProvider().getBaseLanguage());
  }
  return fileHighlighingSettings[PsiUtil.getRootIndex(root)];
}
