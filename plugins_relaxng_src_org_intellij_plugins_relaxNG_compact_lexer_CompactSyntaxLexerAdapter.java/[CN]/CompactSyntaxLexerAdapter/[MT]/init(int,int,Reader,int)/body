{
  myEndOffset=endOffset;
  myLengthMap=new TIntIntHashMap();
  myLexer=createTokenManager(initialState,new EscapePreprocessor(reader,startOffset,myLengthMap));
  myCurrentToken=START;
  myCurrentOffset=startOffset;
  myCurrentEnd=startOffset;
  myTokenQueue.clear();
  advance();
}
