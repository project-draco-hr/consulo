{
  final ConcurrentMap<String,CopyOnWriteArrayList<Trinity<PsiReferenceProvider,ElementPattern,Double>>> map=caseSensitive ? myNamesToProvidersMap : myNamesToProvidersMapInsensitive;
  for (  final String attributeName : names) {
    CopyOnWriteArrayList<Trinity<PsiReferenceProvider,ElementPattern,Double>> psiReferenceProviders=map.get(attributeName);
    if (psiReferenceProviders == null) {
      psiReferenceProviders=ConcurrencyUtil.cacheOrGet(map,caseSensitive ? attributeName : attributeName.toLowerCase(),new CopyOnWriteArrayList<Trinity<PsiReferenceProvider,ElementPattern,Double>>());
    }
    psiReferenceProviders.add(new Trinity<PsiReferenceProvider,ElementPattern,Double>(provider,filter,priority));
  }
}
