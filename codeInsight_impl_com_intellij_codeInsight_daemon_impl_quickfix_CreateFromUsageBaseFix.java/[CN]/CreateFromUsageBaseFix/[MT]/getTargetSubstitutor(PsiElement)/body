{
  if (element instanceof PsiNewExpression) {
    JavaResolveResult result=((PsiNewExpression)element).getClassOrAnonymousClassReference().advancedResolve(false);
    PsiSubstitutor substitutor=result.getSubstitutor();
    return substitutor == null ? PsiSubstitutor.EMPTY : substitutor;
  }
  PsiExpression qualifier=getQualifier(element);
  if (qualifier != null) {
    PsiType type=qualifier.getType();
    if (type instanceof PsiClassType) {
      return ((PsiClassType)type).resolveGenerics().getSubstitutor();
    }
  }
  return PsiSubstitutor.EMPTY;
}
