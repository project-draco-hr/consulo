{
  if (myCurrentBranch.toString().equals(url)) {
    Messages.showErrorDialog(SvnBundle.message("action.Subversion.integrate.changes.error.source.and.target.same.text"),SvnBundle.message("action.Subversion.integrate.changes.messages.title"));
    return;
  }
  final String name=SVNPathUtil.tail(myCurrentBranch.toString());
  final Pair<WorkingCopyInfo,SVNURL> pair=IntegratedSelectedOptionsDialog.selectWorkingCopy(myVcs.getProject(),myCurrentBranch,url,true,selectedLocalBranchPath,dialogTitle);
  if (pair == null) {
    return;
  }
  final WorkingCopyInfo info=pair.first;
  final SVNURL realTargetUrl=pair.second;
  final SVNURL sourceUrl=correctSourceUrl(url,realTargetUrl.toString());
  if (sourceUrl == null) {
    return;
  }
  final SvnIntegrateChangesTask task=new SvnIntegrateChangesTask(myVcs,info,myMergerFactory,sourceUrl,SvnBundle.message("action.Subversion.integrate.changes.messages.title"),SvnConfiguration.getInstance(myVcs.getProject()).MERGE_DRY_RUN,name);
  ProgressManager.getInstance().run(task);
}
