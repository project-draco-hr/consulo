{
  super.clearCaches();
  final AntFile file=getAntFile();
  if (myMacroDefinition != null) {
    for (    AntTypeId id : myMacroDefinition.getNestedElements()) {
      final AntTypeDefinition nestedDef=file.getBaseTypeDefinition(myMacroDefinition.getNestedClassName(id));
      file.unregisterCustomType(nestedDef);
    }
    final AntStructuredElement parent=getAntParent();
    if (parent != null) {
      parent.unregisterCustomType(myMacroDefinition);
    }
    myMacroDefinition=null;
  }
  file.clearCaches();
}
