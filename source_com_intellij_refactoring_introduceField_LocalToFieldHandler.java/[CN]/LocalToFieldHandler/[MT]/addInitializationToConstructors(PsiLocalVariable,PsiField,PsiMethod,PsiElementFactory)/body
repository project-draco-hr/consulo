{
  PsiClass aClass=field.getContainingClass();
  PsiMethod[] constructors=aClass.getConstructors();
  PsiStatement assignment=createAssignment(local,field.getName(),factory);
  boolean added=false;
  for (  PsiMethod constructor : constructors) {
    if (constructor == enclosingConstructor)     continue;
    PsiCodeBlock body=constructor.getBody();
    if (body == null)     continue;
    PsiStatement[] statements=body.getStatements();
    if (statements.length > 0) {
      PsiStatement first=statements[0];
      if (first instanceof PsiExpressionStatement) {
        PsiExpression expression=((PsiExpressionStatement)first).getExpression();
        if (expression instanceof PsiMethodCallExpression) {
          @NonNls String text=((PsiMethodCallExpression)expression).getMethodExpression().getText();
          if ("this".equals(text)) {
            continue;
          }
        }
      }
    }
    body.add(assignment);
    added=true;
  }
  if (!added && enclosingConstructor == null) {
    PsiMethod constructor=factory.createConstructor();
    constructor.getBody().add(assignment);
    aClass.add(constructor);
  }
  if (enclosingConstructor == null)   local.delete();
}
