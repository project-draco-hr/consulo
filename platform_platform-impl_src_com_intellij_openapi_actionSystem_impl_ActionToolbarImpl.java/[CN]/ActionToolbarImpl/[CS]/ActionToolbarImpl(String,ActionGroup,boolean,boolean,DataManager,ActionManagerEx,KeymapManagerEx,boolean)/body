{
  super(null);
  myActionManager=actionManager;
  myKeymapManager=keymapManager;
  myPlace=place;
  myActionGroup=actionGroup;
  myPresentationFactory=new PresentationFactory();
  myKeymapManagerListener=new MyKeymapManagerListener();
  myVisibleActions=new ArrayList<AnAction>();
  myNewVisibleActions=new ArrayList<AnAction>();
  myDataManager=dataManager;
  myDecorateButtons=decorateButtons;
  setLayout(new BorderLayout());
  setOrientation(horizontal ? SwingConstants.HORIZONTAL : SwingConstants.VERTICAL);
  mySecondaryActions.getTemplatePresentation().setIcon(AllIcons.General.SecondaryGroup);
  mySecondaryActions.setPopup(true);
  updateActions(updateActionsNow,false,false);
  keymapManager.addWeakListener(myKeymapManagerListener);
  myTimerListener=new MyTimerListener();
  myWeakTimerListener=new WeakTimerListener(actionManager,myTimerListener);
  enableEvents(AWTEvent.MOUSE_MOTION_EVENT_MASK | AWTEvent.MOUSE_EVENT_MASK | AWTEvent.COMPONENT_EVENT_MASK| AWTEvent.CONTAINER_EVENT_MASK);
  setMiniMode(false);
}
