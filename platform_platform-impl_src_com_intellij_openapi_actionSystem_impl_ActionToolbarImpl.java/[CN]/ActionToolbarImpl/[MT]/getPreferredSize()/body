{
  final ArrayList<Rectangle> bounds=new ArrayList<Rectangle>();
  calculateBounds(new Dimension(Integer.MAX_VALUE,Integer.MAX_VALUE),bounds);
  if (bounds.isEmpty())   return new Dimension(0,0);
  int xLeft=Integer.MAX_VALUE;
  int yTop=Integer.MAX_VALUE;
  int xRight=Integer.MIN_VALUE;
  int yBottom=Integer.MIN_VALUE;
  for (int i=bounds.size() - 1; i >= 0; i--) {
    final Rectangle each=bounds.get(i);
    if (each.x == Integer.MAX_VALUE)     continue;
    xLeft=Math.min(xLeft,each.x);
    yTop=Math.min(yTop,each.y);
    xRight=Math.max(xRight,each.x + each.width);
    yBottom=Math.max(yBottom,each.y + each.height);
  }
  final Dimension dimension=new Dimension(xRight - xLeft,yBottom - yTop);
  if (myLayoutPolicy == AUTO_LAYOUT_POLICY && myReservePlaceAutoPopupIcon) {
    if (myOrientation == SwingConstants.HORIZONTAL) {
      dimension.width+=myAutoPopupIcon.getIconWidth();
    }
 else {
      dimension.height+=myAutoPopupIcon.getIconHeight();
    }
  }
  final Insets i=getInsets();
  return new Dimension(dimension.width + i.left + i.right,dimension.height + i.top + i.bottom);
}
