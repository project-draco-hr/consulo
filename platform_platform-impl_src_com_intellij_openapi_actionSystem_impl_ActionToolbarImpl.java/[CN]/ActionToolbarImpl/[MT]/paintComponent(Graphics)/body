{
  if (ActionPlaces.NAVIGATION_BAR.equals(myPlace)) {
    final Dimension size=getSize();
    g.setColor(UIUtil.getBorderColor());
    g.drawLine(0,size.height - 1,size.width,size.height - 1);
    return;
  }
  if (doMacEnhancementsForMainToolbar()) {
    final Rectangle r=getBounds();
    UIUtil.drawGradientHToolbarBackground(g,r.width,r.height);
  }
 else {
    super.paintComponent(g);
  }
  if (myLayoutPolicy == AUTO_LAYOUT_POLICY) {
    if (myAutoPopupRec != null) {
      if (myOrientation == SwingConstants.HORIZONTAL) {
        final int dy=myAutoPopupRec.height / 2 - myAutoPopupIcon.getIconHeight() / 2;
        myAutoPopupIcon.paintIcon(this,g,(int)myAutoPopupRec.getMaxX() - myAutoPopupIcon.getIconWidth() - 1,myAutoPopupRec.y + dy);
      }
 else {
        final int dx=myAutoPopupRec.width / 2 - myAutoPopupIcon.getIconWidth() / 2;
        myAutoPopupIcon.paintIcon(this,g,myAutoPopupRec.x + dx,(int)myAutoPopupRec.getMaxY() - myAutoPopupIcon.getIconWidth() - 1);
      }
    }
  }
}
