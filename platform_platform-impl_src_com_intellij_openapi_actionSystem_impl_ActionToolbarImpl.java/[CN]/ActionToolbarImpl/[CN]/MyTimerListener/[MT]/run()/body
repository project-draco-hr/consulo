{
  if (!isShowing()) {
    return;
  }
  final MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
  final MenuElement[] selectedPath=menuSelectionManager.getSelectedPath();
  if (selectedPath.length > 0) {
    return;
  }
  final Window window=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusedWindow();
  if (window instanceof Dialog) {
    final Dialog dialog=(Dialog)window;
    if (dialog.isModal() && !SwingUtilities.isDescendingFrom(ActionToolbarImpl.this,dialog)) {
      return;
    }
  }
  updateActions(false);
}
