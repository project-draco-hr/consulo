{
  if (myPanel.getProject().isDisposed()) {
    myPanel.setContextComponent(null);
    myPanel.hideHint();
    return;
  }
  final DialogWrapper dialog=DialogWrapper.findInstance(e.getOppositeComponent());
  shouldFocusEditor=dialog != null;
  if (dialog != null) {
    Disposer.register(dialog.getDisposable(),new Disposable(){
      @Override public void dispose(){
        if (dialog.getExitCode() == DialogWrapper.CANCEL_EXIT_CODE) {
          shouldFocusEditor=false;
        }
      }
    }
);
  }
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      processFocusLost(e);
    }
  }
);
}
