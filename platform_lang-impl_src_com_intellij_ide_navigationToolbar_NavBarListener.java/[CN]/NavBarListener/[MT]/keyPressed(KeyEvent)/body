{
  if (!(e.isAltDown() || e.isMetaDown() || e.isControlDown()|| myPanel.isNodePopupActive())) {
    if (!Character.isLetter(e.getKeyChar())) {
      return;
    }
    final IdeFocusManager focusManager=IdeFocusManager.getInstance(myPanel.getProject());
    final ActionCallback firstCharTyped=new ActionCallback();
    focusManager.typeAheadUntil(firstCharTyped);
    myPanel.moveDown();
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        try {
          final Robot robot=new Robot();
          final boolean shiftOn=e.isShiftDown();
          final int code=e.getKeyCode();
          if (shiftOn) {
            robot.keyPress(KeyEvent.VK_SHIFT);
          }
          robot.keyPress(code);
          robot.keyRelease(code);
          firstCharTyped.setDone();
        }
 catch (        AWTException ignored) {
        }
      }
    }
);
  }
}
