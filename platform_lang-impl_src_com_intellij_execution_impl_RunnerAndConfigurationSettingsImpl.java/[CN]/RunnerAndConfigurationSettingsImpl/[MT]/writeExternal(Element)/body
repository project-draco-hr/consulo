{
  final ConfigurationFactory factory=myConfiguration.getFactory();
  if (!(myConfiguration instanceof UnknownRunConfiguration)) {
    element.setAttribute(TEMPLATE_FLAG_ATTRIBUTE,String.valueOf(myIsTemplate));
    if (!myIsTemplate) {
      element.setAttribute(NAME_ATTR,myConfiguration.getName());
    }
    element.setAttribute(CONFIGURATION_TYPE_ATTRIBUTE,factory.getType().getId());
    element.setAttribute(FACTORY_NAME_ATTRIBUTE,factory.getName());
    if (myFolderName != null) {
      element.setAttribute(FOLDER_NAME,myFolderName);
    }
    if (isEditBeforeRun()) {
      element.setAttribute(EDIT_BEFORE_RUN,String.valueOf(true));
    }
    if (myWasSingletonSpecifiedExplicitly || mySingleton != factory.isConfigurationSingletonByDefault()) {
      element.setAttribute(SINGLETON,String.valueOf(mySingleton));
    }
    if (myTemporary) {
      element.setAttribute(TEMPORARY_ATTRIBUTE,Boolean.toString(true));
    }
  }
  myConfiguration.writeExternal(element);
  if (!(myConfiguration instanceof UnknownRunConfiguration)) {
    writeRunnerSettings(RUNNER_COMPARATOR,element);
    writeConfigurationPerRunnerSettings(RUNNER_COMPARATOR,element);
  }
}
