{
  final ConfigurationFactory factory=myConfiguration.getFactory();
  if (!(myConfiguration instanceof UnknownRunConfiguration)) {
    element.setAttribute(TEMPLATE_FLAG_ATTRIBUTE,String.valueOf(myIsTemplate));
    if (!myIsTemplate) {
      element.setAttribute(NAME_ATTR,myConfiguration.getName());
    }
    element.setAttribute(CONFIGURATION_TYPE_ATTRIBUTE,factory.getType().getId());
    element.setAttribute(FACTORY_NAME_ATTRIBUTE,factory.getName());
    if (myFolderName != null) {
      element.setAttribute(FOLDER_NAME,myFolderName);
    }
    if (isEditBeforeRun())     element.setAttribute(EDIT_BEFORE_RUN,String.valueOf(true));
    if (isSingleton())     element.setAttribute(SINGLETON,String.valueOf(true));
    if (myTemporary) {
      element.setAttribute(TEMPORARY_ATTRIBUTE,Boolean.toString(myTemporary));
    }
  }
  myConfiguration.writeExternal(element);
  if (!(myConfiguration instanceof UnknownRunConfiguration)) {
    final Comparator<Element> runnerComparator=createRunnerComparator();
    writeRunnerSettings(runnerComparator,element);
    writeConfigurationPerRunnerSettings(runnerComparator,element);
  }
}
