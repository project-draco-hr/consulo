{
  myIsTemplate=Boolean.valueOf(element.getAttributeValue(TEMPLATE_FLAG_ATTRIBUTE)).booleanValue();
  myTemporary=Boolean.valueOf(element.getAttributeValue(TEMPORARY_ATTRIBUTE)).booleanValue() || TEMP_CONFIGURATION.equals(element.getName());
  myEditBeforeRun=Boolean.valueOf(element.getAttributeValue(EDIT_BEFORE_RUN)).booleanValue();
  mySingleton=Boolean.valueOf(element.getAttributeValue(SINGLETON)).booleanValue();
  final ConfigurationFactory factory=getFactory(element);
  if (factory == null)   return;
  if (myIsTemplate) {
    myConfiguration=myManager.getConfigurationTemplate(factory).getConfiguration();
  }
 else {
    final String name=element.getAttributeValue(NAME_ATTR);
    myConfiguration=myManager.doCreateConfiguration(name,factory,false);
  }
  myConfiguration.readExternal(element);
  List runners=element.getChildren(RUNNER_ELEMENT);
  myUnloadedRunnerSettings=null;
  for (  final Object runner1 : runners) {
    Element runnerElement=(Element)runner1;
    String id=runnerElement.getAttributeValue(RUNNER_ID);
    ProgramRunner runner=RunnerRegistry.getInstance().findRunnerById(id);
    if (runner != null) {
      RunnerSettings settings=createRunnerSettings(runner);
      settings.readExternal(runnerElement);
      myRunnerSettings.put(runner,settings);
    }
 else {
      if (myUnloadedRunnerSettings == null)       myUnloadedRunnerSettings=new ArrayList<Element>(1);
      myUnloadedRunnerSettings.add(runnerElement);
    }
  }
  List configurations=element.getChildren(CONFIGURATION_ELEMENT);
  myUnloadedConfigurationPerRunnerSettings=null;
  for (  final Object configuration : configurations) {
    Element configurationElement=(Element)configuration;
    String id=configurationElement.getAttributeValue(RUNNER_ID);
    ProgramRunner runner=RunnerRegistry.getInstance().findRunnerById(id);
    if (runner != null) {
      ConfigurationPerRunnerSettings settings=new ConfigurationPerRunnerSettings(id,myConfiguration.createRunnerSettings(new InfoProvider(runner)));
      settings.readExternal(configurationElement);
      myConfigurationPerRunnerSettings.put(runner,settings);
    }
 else {
      if (myUnloadedConfigurationPerRunnerSettings == null)       myUnloadedConfigurationPerRunnerSettings=new ArrayList<Element>(1);
      myUnloadedConfigurationPerRunnerSettings.add(configurationElement);
    }
  }
}
