{
  List<Element> runnerSettings=new SmartList<Element>();
  for (  ProgramRunner runner : myRunnerSettings.keySet()) {
    RunnerSettings settings=myRunnerSettings.get(runner);
    boolean wasLoaded=myLoadedRunnerSettings.contains(runner.getRunnerId());
    if (settings == null && !wasLoaded) {
      continue;
    }
    Element runnerElement=new Element(RUNNER_ELEMENT);
    if (settings != null) {
      settings.writeExternal(runnerElement);
    }
    if (wasLoaded || !JDOMUtil.isEmpty(runnerElement)) {
      runnerElement.setAttribute(RUNNER_ID,runner.getRunnerId());
      runnerSettings.add(runnerElement);
    }
  }
  if (myUnloadedRunnerSettings != null) {
    for (    Element unloadedRunnerSetting : myUnloadedRunnerSettings) {
      runnerSettings.add(unloadedRunnerSetting.clone());
    }
  }
  Collections.sort(runnerSettings,runnerComparator);
  for (  Element runnerSetting : runnerSettings) {
    element.addContent(runnerSetting);
  }
}
