{
  if (root instanceof PsiVariable) {
    final PsiElement parent=root.getParent();
    if (parent instanceof PsiDeclarationStatement) {
      return ((PsiDeclarationStatement)parent).getDeclaredElements();
    }
    if (root instanceof PsiField) {
      final List<PsiField> fields=new ArrayList<PsiField>();
      PsiField field=(PsiField)root;
      fields.add(field);
      while (true) {
        ASTNode comma=PsiImplUtil.skipWhitespaceAndComments(field.getNode().getTreeNext());
        if (comma == null || comma.getElementType() != JavaTokenType.COMMA)         break;
        ASTNode nextField=PsiImplUtil.skipWhitespaceAndComments(comma.getTreeNext());
        if (nextField == null || nextField.getElementType() != JavaElementType.FIELD)         break;
        field=(PsiField)nextField.getPsi();
        fields.add(field);
      }
      return fields.toArray(new PsiElement[fields.size()]);
    }
  }
  return new PsiElement[]{root};
}
