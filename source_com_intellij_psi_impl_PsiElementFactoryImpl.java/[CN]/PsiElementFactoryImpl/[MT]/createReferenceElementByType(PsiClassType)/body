{
  if (type instanceof PsiClassReferenceType) {
    return ((PsiClassReferenceType)type).getReference();
  }
  final CompositeElement treeElement=(CompositeElement)ChangeUtil.copyToElement(createTypeElement(type));
  new DummyHolder(myManager,treeElement,null);
  final ASTNode referenceChild=treeElement.firstChild;
  LOG.assertTrue(referenceChild.getElementType() == ElementType.JAVA_CODE_REFERENCE);
  return (PsiJavaCodeReferenceElement)SourceTreeToPsiMap.treeElementToPsi(referenceChild);
}
