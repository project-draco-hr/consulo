{
  myProject=project;
  myDebuggerEditorsProvider=debuggerEditorsProvider;
  myMode=mode;
  myHistoryId=historyId;
  mySourcePosition=sourcePosition;
  myChooseFactory.setToolTipText(XDebuggerBundle.message("xdebugger.evaluate.language.hint"));
  myChooseFactory.setBorder(JBUI.Borders.empty(0,3,0,3));
  new ClickListener(){
    @Override public boolean onClick(    @NotNull MouseEvent e,    int clickCount){
      if (myChooseFactory.isEnabled()) {
        ListPopup oldPopup=SoftReference.dereference(myPopup);
        if (oldPopup != null && !oldPopup.isDisposed()) {
          oldPopup.cancel();
          myPopup=null;
          return true;
        }
        ListPopup popup=createLanguagePopup();
        popup.showUnderneathOf(myChooseFactory);
        myPopup=new WeakReference<>(popup);
        return true;
      }
      return false;
    }
  }
.installOn(myChooseFactory);
}
