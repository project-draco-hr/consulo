{
  vcs.beginChangeSet();
  vcs.createDirectory("dir");
  vcs.createFile("dir/one",null,-1);
  vcs.createFile("dir/two",null,-1);
  vcs.endChangeSet(null);
  l.startAction(null);
  vcs.createFile("dir/three",null,-1);
  gateway.addUnsavedDocument("dir/one","one",-1);
  gateway.addUnsavedDocument("dir/two","two",-1);
  l.finishAction();
  assertEquals(2,vcs.getRevisionsFor("dir").size());
}
