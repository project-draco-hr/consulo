{
  final Runnable runnable;
  if (action instanceof DumbAware) {
    runnable=new DumbAwareRunnable(){
      public void run(){
        ApplicationManager.getApplication().runWriteAction(action);
      }
    }
;
  }
 else {
    runnable=new Runnable(){
      public void run(){
        ApplicationManager.getApplication().runWriteAction(action);
      }
    }
;
  }
  if (myProject.isInitialized()) {
    runnable.run();
  }
 else {
    registerPostStartupActivity(runnable);
  }
}
