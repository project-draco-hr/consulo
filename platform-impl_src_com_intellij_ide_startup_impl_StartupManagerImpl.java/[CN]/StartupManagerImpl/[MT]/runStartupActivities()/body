{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      HeavyProcessLatch.INSTANCE.processStarted();
      try {
        runActivities(myPreStartupActivities);
        myFileSystemSynchronizer.setCancelable(true);
        myFileSystemSynchronizer.execute();
        myFileSystemSynchronizer=null;
        myStartupActivityRunning=true;
        runActivities(myActivities);
        myStartupActivityRunning=false;
        myStartupActivityPassed=true;
      }
  finally {
        HeavyProcessLatch.INSTANCE.processFinished();
      }
    }
  }
);
}
