{
  final VirtualFile[] files=myTree.getSelectedFiles();
  if (files.length == 0)   return;
  String message=createConfirmationMessage(files);
  int returnValue=Messages.showYesNoDialog(message,"Delete",Messages.getQuestionIcon());
  if (returnValue != 0)   return;
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      for (int i=0; i < files.length; i++) {
        final VirtualFile file=files[i];
        try {
          file.delete(this);
        }
 catch (        IOException e) {
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            public void run(){
              Messages.showMessageDialog("Could not erase file or folder: " + file.getName(),"Error",Messages.getErrorIcon());
            }
          }
);
        }
      }
    }
  }
);
}
