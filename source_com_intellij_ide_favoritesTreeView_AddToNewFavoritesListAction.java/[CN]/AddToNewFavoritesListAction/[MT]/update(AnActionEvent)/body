{
  final DataContext dataContext=e.getDataContext();
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (project == null) {
    e.getPresentation().setEnabled(false);
  }
 else {
    e.getPresentation().setEnabled(AddToFavoritesAction.createNodes(dataContext,e.getPlace().equals(ActionPlaces.J2EE_VIEW_POPUP) || e.getPlace().equals(ActionPlaces.STRUCTURE_VIEW_POPUP) || e.getPlace().equals(ActionPlaces.PROJECT_VIEW_POPUP),ViewSettings.DEFAULT) != null);
  }
}
