{
  TextEditorState state=(TextEditorState)_state;
  element.setAttribute(VERTICAL_SCROLL_PROPORTION_ATTR,Float.toString(state.VERTICAL_SCROLL_PROPORTION));
  element.setAttribute(VERTICAL_OFFSET_ATTR,Integer.toString(state.VERTICAL_SCROLL_OFFSET));
  element.setAttribute(MAX_VERTICAL_OFFSET_ATTR,Integer.toString(state.MAX_VERTICAL_SCROLL_OFFSET));
  if (state.CARETS != null) {
    for (    TextEditorState.CaretState caretState : state.CARETS) {
      Element e=new Element(CARET_ELEMENT);
      e.setAttribute(LINE_ATTR,Integer.toString(caretState.LINE));
      e.setAttribute(COLUMN_ATTR,Integer.toString(caretState.COLUMN));
      e.setAttribute(SELECTION_START_LINE_ATTR,Integer.toString(caretState.SELECTION_START_LINE));
      e.setAttribute(SELECTION_START_COLUMN_ATTR,Integer.toString(caretState.SELECTION_START_COLUMN));
      e.setAttribute(SELECTION_END_LINE_ATTR,Integer.toString(caretState.SELECTION_END_LINE));
      e.setAttribute(SELECTION_END_COLUMN_ATTR,Integer.toString(caretState.SELECTION_END_COLUMN));
      element.addContent(e);
    }
  }
}
