{
  TextEditorState state=(TextEditorState)_state;
  element.setAttribute(RELATIVE_CARET_POSITION_ATTR,Integer.toString(state.RELATIVE_CARET_POSITION));
  if (state.CARETS != null) {
    for (    TextEditorState.CaretState caretState : state.CARETS) {
      Element e=new Element(CARET_ELEMENT);
      e.setAttribute(LINE_ATTR,Integer.toString(caretState.LINE));
      e.setAttribute(COLUMN_ATTR,Integer.toString(caretState.COLUMN));
      e.setAttribute(LEAN_FORWARD_ATTR,Boolean.toString(caretState.LEAN_FORWARD));
      e.setAttribute(SELECTION_START_LINE_ATTR,Integer.toString(caretState.SELECTION_START_LINE));
      e.setAttribute(SELECTION_START_COLUMN_ATTR,Integer.toString(caretState.SELECTION_START_COLUMN));
      e.setAttribute(SELECTION_END_LINE_ATTR,Integer.toString(caretState.SELECTION_END_LINE));
      e.setAttribute(SELECTION_END_COLUMN_ATTR,Integer.toString(caretState.SELECTION_END_COLUMN));
      element.addContent(e);
    }
  }
}
