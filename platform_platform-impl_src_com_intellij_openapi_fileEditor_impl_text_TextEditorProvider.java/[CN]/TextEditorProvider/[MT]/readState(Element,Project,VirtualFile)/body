{
  TextEditorState state=new TextEditorState();
  try {
    List<Element> caretElements=element.getChildren(CARET_ELEMENT);
    if (caretElements.isEmpty()) {
      state.CARETS=new TextEditorState.CaretState[]{readCaretInfo(element)};
    }
 else {
      state.CARETS=new TextEditorState.CaretState[caretElements.size()];
      for (int i=0; i < caretElements.size(); i++) {
        state.CARETS[i]=readCaretInfo(caretElements.get(i));
      }
    }
    String verticalScrollProportion=element.getAttributeValue(RELATIVE_CARET_POSITION_ATTR);
    state.RELATIVE_CARET_POSITION=verticalScrollProportion == null ? 0 : Integer.parseInt(verticalScrollProportion);
  }
 catch (  NumberFormatException ignored) {
  }
  return state;
}
