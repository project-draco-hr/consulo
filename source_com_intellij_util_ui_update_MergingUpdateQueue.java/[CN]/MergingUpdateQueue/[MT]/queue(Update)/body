{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    update.run();
    return;
  }
synchronized (mySheduledUpdates) {
    boolean updateWasEatenByQueue=eatThisOrOthers(update);
    if (updateWasEatenByQueue)     return;
    if (myActive) {
      put(update);
      if (mySheduledUpdates.isEmpty()) {
        myWaiterForMerge.restart();
      }
    }
 else {
      put(update);
    }
  }
}
