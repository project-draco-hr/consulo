{
  String message;
  if (selection.length == 1) {
    message=IdeBundle.message("prompt.uninstall.plugin",selection[0].getName());
  }
 else {
    message=IdeBundle.message("prompt.uninstall.several.plugins",selection.length);
  }
  if (Messages.showYesNoDialog(host.getMainPanel(),message,IdeBundle.message("title.plugin.uninstall"),Messages.getQuestionIcon()) != Messages.YES)   return;
  for (  IdeaPluginDescriptor descriptor : selection) {
    IdeaPluginDescriptorImpl pluginDescriptor=(IdeaPluginDescriptorImpl)descriptor;
    boolean actualDelete=true;
    ArrayList<IdeaPluginDescriptorImpl> dependant=host.getDependentList(pluginDescriptor);
    if (dependant.size() > 0) {
      message=IdeBundle.message("several.plugins.depend.on.0.continue.to.remove",pluginDescriptor.getName());
      actualDelete=(Messages.showYesNoDialog(host.getMainPanel(),message,IdeBundle.message("title.plugin.uninstall"),Messages.getQuestionIcon()) == Messages.YES);
    }
    if (actualDelete) {
      uninstallPlugin(pluginDescriptor,host);
    }
  }
}
