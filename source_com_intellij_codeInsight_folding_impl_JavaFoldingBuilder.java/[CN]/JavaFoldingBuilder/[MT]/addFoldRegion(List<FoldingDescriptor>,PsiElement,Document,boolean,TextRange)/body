{
  final TextRange fileRange=elementToFold.getContainingFile().getTextRange();
  if (range.equals(fileRange))   return false;
  final ASTNode node=elementToFold.getNode();
  LOG.assertTrue(range.getStartOffset() >= 0 && range.getEndOffset() <= fileRange.getEndOffset());
  if (range.getStartOffset() < 0 || range.getEndOffset() > fileRange.getEndOffset()) {
    return false;
  }
  if (!allowOneLiners) {
    int startLine=document.getLineNumber(range.getStartOffset());
    int endLine=document.getLineNumber(range.getEndOffset() - 1);
    if (startLine < endLine) {
      list.add(new FoldingDescriptor(node,range));
      return true;
    }
 else {
      return false;
    }
  }
 else {
    if (range.getEndOffset() - range.getStartOffset() > getPlaceholderText(node).length()) {
      list.add(new FoldingDescriptor(node,range));
      return true;
    }
 else {
      return false;
    }
  }
}
