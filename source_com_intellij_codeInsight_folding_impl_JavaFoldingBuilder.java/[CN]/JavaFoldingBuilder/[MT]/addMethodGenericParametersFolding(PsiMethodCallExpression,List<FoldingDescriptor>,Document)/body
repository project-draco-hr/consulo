{
  final PsiReferenceExpression methodExpression=expression.getMethodExpression();
  PsiMethodCallExpression element=expression;
  while (true) {
    if (!resolvesCorrectly(element.getMethodExpression()))     return;
    final PsiElement parent=element.getParent();
    if (!(parent instanceof PsiExpressionList) || !(parent.getParent() instanceof PsiMethodCallExpression))     break;
    element=(PsiMethodCallExpression)parent.getParent();
  }
  final PsiReferenceParameterList list=methodExpression.getParameterList();
  if (list != null) {
    addTypeParametersFolding(foldElements,document,list,3);
  }
}
