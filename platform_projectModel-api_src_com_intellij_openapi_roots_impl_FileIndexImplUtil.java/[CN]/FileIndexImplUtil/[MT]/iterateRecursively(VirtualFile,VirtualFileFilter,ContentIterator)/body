{
  try {
    VfsUtilCore.visitChildrenRecursively(root,new VirtualFileVisitor(){
      @Override public boolean visitFile(      @NotNull VirtualFile file){
        if (!file.isValid() || !filter.accept(file))         return false;
        if (!iterator.processFile(file))         throw new StopItException();
        return true;
      }
    }
);
    return true;
  }
 catch (  StopItException e) {
    return false;
  }
}
