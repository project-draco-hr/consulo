{
  if (!canApply())   return;
  setRequireShutdown(true);
  for (int i=0; i < installedPluginTable.getRowCount(); i++) {
    final IdeaPluginDescriptorImpl pluginDescriptor=(IdeaPluginDescriptorImpl)installedPluginsModel.getObjectAt(i);
    pluginDescriptor.setEnabled(((Boolean)installedPluginsModel.getValueAt(i,InstalledPluginsTableModel.getCheckboxColumn())).booleanValue());
  }
  for (  IdeaPluginDescriptor descriptor : myFilter.getFilteredInstalled()) {
    ((IdeaPluginDescriptorImpl)descriptor).setEnabled(installedPluginsModel.getEnabledMap().get(descriptor.getPluginId()).booleanValue());
  }
  try {
    final ArrayList<String> ids=new ArrayList<String>();
    for (    Map.Entry<PluginId,Boolean> entry : installedPluginsModel.getEnabledMap().entrySet()) {
      if (!entry.getValue().booleanValue()) {
        ids.add(entry.getKey().getIdString());
      }
    }
    PluginManager.saveDisabledPlugins(ids,false);
  }
 catch (  IOException e) {
    LOG.error(e);
  }
}
