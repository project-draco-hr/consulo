{
  visited.push(id);
  try {
    final PluginId[] parentIds=idToDescriptorMap.get(id).getDependentPluginIds();
    for (    final PluginId parentId : parentIds) {
      if (visited.contains(parentId)) {
        throw new Exception("Plugins should not have cyclic dependencies:\n" + id + "->"+ parentId+ "->...->"+ id);
      }
    }
    for (    PluginId parentId1 : parentIds) {
      assignNumbers(parentId1,idToDescriptorMap,visited);
    }
    if (!myIdToNumberMap.contains(id)) {
      myIdToNumberMap.put(id,myAvailableNumber++);
    }
  }
  finally {
    visited.pop();
  }
}
