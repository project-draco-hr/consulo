{
  VirtualFile file=getSelectedFile();
  Project project=getProject();
  Module moduleForFile=file == null || project == null ? null : ModuleUtilCore.findModuleForFile(file,project);
  if (moduleForFile == null) {
    return null;
  }
  ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(moduleForFile);
  Map<String,ModuleRootLayer> layers=moduleRootManager.getLayers();
  if (layers.size() == 1) {
    return null;
  }
  String currentLayerName=moduleRootManager.getCurrentLayerName();
  return new ListWithSelection<String>(layers.keySet(),currentLayerName);
}
