{
  if (lType == rType)   return null;
  if (expression == null) {
    if (rType == null || lType == null || TypeConversionUtil.isAssignable(lType,rType))     return null;
  }
 else   if (TypeConversionUtil.areTypesAssignmentCompatible(lType,expression)) {
    if (lType == null || rType == null)     return null;
    return GenericsHighlightUtil.checkRawToGenericAssignment(lType,rType,expression);
  }
  if (rType == null) {
    rType=expression.getType();
  }
  HighlightInfo highlightInfo=createIncompatibleTypeHighlightInfo(lType,rType,textRange);
  if (rType != null && expression != null && isCastIntentionApplicable(expression,lType)) {
    QuickFixAction.registerQuickFixAction(highlightInfo,new AddTypeCastFix(lType,expression));
  }
  if (lType instanceof PsiClassType && expression != null) {
    QuickFixAction.registerQuickFixAction(highlightInfo,new WrapExpressionFix((PsiClassType)lType,expression));
  }
  ChangeNewOperatorTypeFix.register(highlightInfo,expression,lType);
  return highlightInfo;
}
