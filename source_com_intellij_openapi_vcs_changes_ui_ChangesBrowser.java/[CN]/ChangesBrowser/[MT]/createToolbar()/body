{
  DefaultActionGroup toolBarGroup=new DefaultActionGroup();
  final ShowDiffAction diffAction=new ShowDiffAction(){
    public void actionPerformed(    AnActionEvent e){
      showDiff();
    }
  }
;
  diffAction.registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_D,SystemInfo.isMac ? KeyEvent.META_DOWN_MASK : KeyEvent.CTRL_DOWN_MASK)),myViewer);
  toolBarGroup.add(diffAction);
  if (!myReadOnly) {
    final MoveChangesToAnotherListAction moveAction=new MoveChangesToAnotherListAction(){
      public void actionPerformed(      AnActionEvent e){
        super.actionPerformed(e);
        rebuildList();
      }
    }
;
    moveAction.registerCustomShortcutSet(CommonShortcuts.getMove(),myViewer);
    toolBarGroup.add(moveAction);
  }
  ToggleShowDirectoriesAction directoriesAction=new ToggleShowDirectoriesAction();
  directoriesAction.registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_P,SystemInfo.isMac ? KeyEvent.META_DOWN_MASK : KeyEvent.CTRL_DOWN_MASK)),myViewer);
  toolBarGroup.add(directoriesAction);
  if (myAdditionalToolbarActions != null) {
    toolBarGroup.addSeparator();
    toolBarGroup.add(myAdditionalToolbarActions);
  }
  return ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,toolBarGroup,true).getComponent();
}
