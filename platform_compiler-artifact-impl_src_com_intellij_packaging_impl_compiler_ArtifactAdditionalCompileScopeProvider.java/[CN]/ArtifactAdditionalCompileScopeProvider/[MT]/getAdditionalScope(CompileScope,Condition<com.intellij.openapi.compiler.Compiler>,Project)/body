{
  if (ArtifactCompileScope.getArtifacts(baseScope) != null) {
    return null;
  }
  final ArtifactsCompiler compiler=ArtifactsCompiler.getInstance(project);
  if (compiler == null || !filter.value(compiler)) {
    return null;
  }
  return new ReadAction<CompileScope>(){
    @Override protected void run(    final Result<CompileScope> result){
      final Set<Artifact> artifacts=ArtifactCompileScope.getArtifactsToBuild(project,baseScope,false);
      result.setResult(ArtifactCompileScope.createScopeForModulesInArtifacts(project,artifacts));
    }
  }
.execute().getResultObject();
}
