{
  final VirtualFile[] files=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
  if (files == null)   return Collections.emptyList();
  List<VirtualFile> result=new ArrayList<VirtualFile>();
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  final CompilerManager compilerManager=CompilerManager.getInstance(project);
  for (  VirtualFile file : files) {
    if (file == null || file.isDirectory() || fileIndex.isInSourceContent(file) && compilerManager.isCompilableFileType(file.getFileType())) {
      return Collections.emptyList();
    }
    final Collection<? extends Artifact> artifacts=ArtifactUtil.findArtifactsByFile(file,project);
    for (    Artifact artifact : artifacts) {
      if (!StringUtil.isEmpty(artifact.getOutputPath())) {
        result.add(file);
        break;
      }
    }
  }
  return result;
}
