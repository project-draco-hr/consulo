{
  PsiExpression expr=CodeInsightUtil.findExpressionInRange(file,startOffset,endOffset);
  if (expr == null) {
    expr=IntroduceVariableBase.getSelectedExpression(file.getProject(),file,startOffset,endOffset);
    if (expr == null) {
      return PsiElement.EMPTY_ARRAY;
    }
  }
  FeatureUsageTracker.getInstance().triggerFeatureUsed("codeassists.surroundwith.expression");
  return new PsiElement[]{expr};
}
