{
  String name=library.getName();
  if (name != null) {
    return SimpleTextCellAppearance.normal(name,Icons.LIBRARY_ICON);
  }
  String[] files=library.getUrls(OrderRootType.CLASSES);
  if (files.length == 0) {
    return SimpleTextCellAppearance.invalid(ProjectBundle.message("library.empty.library.item"),Icons.LIBRARY_ICON);
  }
  if (files.length == 1) {
    return forVirtualFilePointer(new LightFilePointer(files[0]));
  }
  String url=files[0];
  if (url.endsWith(JarFileSystem.JAR_SEPARATOR)) {
    url=url.substring(0,url.length() - JarFileSystem.JAR_SEPARATOR.length());
  }
  int startIndex=Math.min(url.lastIndexOf('/') + 1,url.length() - 1);
  return SimpleTextCellAppearance.normal(url.substring(startIndex),Icons.LIBRARY_ICON);
}
