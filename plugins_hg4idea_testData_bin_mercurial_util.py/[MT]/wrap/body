def wrap(line, hangindent, width=None):
    if (width is None):
        width = (termwidth() - 2)
    if (width <= hangindent):
        width = max(78, (hangindent + 1))
    padding = ('\n' + (' ' * hangindent))
    try:
        u = line.decode(encoding.encoding)
        w = padding.join(textwrap.wrap(u, width=(width - hangindent)))
        return w.encode(encoding.encoding)
    except UnicodeDecodeError:
        return padding.join(textwrap.wrap(line, width=(width - hangindent)))
