def filter(s, cmd):
    'filter a string through a command that transforms its input to its output'
    for (name, fn) in filtertable.iteritems():
        if cmd.startswith(name):
            return fn(s, cmd[len(name):].lstrip())
    return pipefilter(s, cmd)
