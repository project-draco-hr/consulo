def rcpath():
    'return hgrc search path. if env var HGRCPATH is set, use it.\n    for each item in path, if directory, use files ending in .rc,\n    else use item.\n    make HGRCPATH empty to only look in .hg/hgrc of current repo.\n    if no HGRCPATH, use default os-specific path.'
    global _rcpath
    if (_rcpath is None):
        if ('HGRCPATH' in os.environ):
            _rcpath = []
            for p in os.environ['HGRCPATH'].split(os.pathsep):
                if (not p):
                    continue
                p = expandpath(p)
                if os.path.isdir(p):
                    for (f, kind) in osutil.listdir(p):
                        if f.endswith('.rc'):
                            _rcpath.append(os.path.join(p, f))
                else:
                    _rcpath.append(p)
        else:
            _rcpath = os_rcpath()
    return _rcpath
