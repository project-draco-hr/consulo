def pipefilter(s, cmd):
    'filter string S through command CMD, returning its output'
    p = subprocess.Popen(cmd, shell=True, close_fds=closefds, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
    (pout, perr) = p.communicate(s)
    return pout
