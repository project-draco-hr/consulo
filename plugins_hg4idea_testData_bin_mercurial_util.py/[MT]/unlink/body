def unlink(f):
    'unlink and remove the directory if it is empty'
    os.unlink(f)
    try:
        os.removedirs(os.path.dirname(f))
    except OSError:
        pass
