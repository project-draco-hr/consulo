def symlink(self, src, dst):
    self.audit_path(dst)
    linkname = os.path.join(self.base, dst)
    try:
        os.unlink(linkname)
    except OSError:
        pass
    dirname = os.path.dirname(linkname)
    if (not os.path.exists(dirname)):
        makedirs(dirname, self.createmode)
    if self._can_symlink:
        try:
            os.symlink(src, linkname)
        except OSError as err:
            raise OSError(err.errno, (_('could not symlink to %r: %s') % (src, err.strerror)), linkname)
    else:
        f = self(dst, 'w')
        f.write(src)
        f.close()
        self._fixfilemode(dst)
