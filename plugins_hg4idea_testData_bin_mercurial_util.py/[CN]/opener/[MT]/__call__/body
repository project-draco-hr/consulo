def __call__(self, path, mode='r', text=False, atomictemp=False):
    self.audit_path(path)
    f = os.path.join(self.base, path)
    if ((not text) and ('b' not in mode)):
        mode += 'b'
    nlink = (-1)
    if (mode not in ('r', 'rb')):
        try:
            nlink = nlinks(f)
        except OSError:
            nlink = 0
            d = os.path.dirname(f)
            if (not os.path.isdir(d)):
                makedirs(d, self.createmode)
        if atomictemp:
            return atomictempfile(f, mode, self.createmode)
        if (nlink > 1):
            rename(mktempcopy(f), f)
    fp = posixfile(f, mode)
    if (nlink == 0):
        self._fixfilemode(f)
    return fp
