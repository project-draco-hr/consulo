{
  ++fileCount;
  if (sameExtensionCase) {
    final String extension=file.getExtension();
    if (extension == null) {
      sameExtensionCase=false;
    }
 else     if (commonExtension == null) {
      commonExtension=extension;
    }
 else {
      sameExtensionCase&=commonExtension.equals(extension);
    }
  }
  final VirtualFile parentVirtualFile=file.getParent();
  if (parentVirtualFile != null) {
    Set<String> namesList=folders.get(parentVirtualFile);
    if (namesList == null) {
      namesList=new HashSet<String>();
      folders.put(parentVirtualFile,namesList);
    }
    namesList.add(file.getName());
  }
}
