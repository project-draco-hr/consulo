{
  return new HgGlobalCommandBuilder(){
    public HgGlobalCommand build(    Collection<VirtualFile> repos){
      VirtualFile repository;
      if (repos.size() > 1) {
        repository=letUserSelectRepository(repos,project);
      }
 else       if (repos.size() == 1) {
        repository=repos.iterator().next();
      }
 else {
        repository=null;
      }
      if (repository != null) {
        return buildResolverCommand(project,repository);
      }
 else       return null;
    }
  }
;
}
