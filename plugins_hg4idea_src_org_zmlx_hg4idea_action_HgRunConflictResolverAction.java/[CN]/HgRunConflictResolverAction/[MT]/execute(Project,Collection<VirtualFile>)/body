{
  final VirtualFile repository;
  if (repos.size() > 1) {
    repository=letUserSelectRepository(repos,project);
  }
 else   if (repos.size() == 1) {
    repository=repos.iterator().next();
  }
 else {
    repository=null;
  }
  if (repository != null) {
    new Task.Backgroundable(project,HgVcsMessages.message("action.hg4idea.run.conflict.resolver.description")){
      @Override public void run(      @NotNull ProgressIndicator indicator){
        new HgConflictResolver(project).resolve(repository);
        markDirtyAndHandleErrors(project,repository);
      }
    }
.queue();
  }
}
