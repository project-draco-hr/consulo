{
  ProgressManager.getInstance().checkCanceled();
  if (elementTypes.isInSet(scope.getElementType())) {
    String text=scope.getText();
    if (namesSet.contains(text)) {
      if (!processor.execute(SourceTreeToPsiMap.treeElementToPsi(scope)))       return false;
    }
  }
  if (scope instanceof CompositeElement) {
    ASTNode _scope=scope;
    ChameleonTransforming.transformChildren(_scope);
    for (ASTNode child=_scope.getFirstChildNode(); child != null; child=child.getTreeNext()) {
      if (!processIdentifiersBySet(processor,child,elementTypes,namesSet,progress))       return false;
    }
  }
  return true;
}
