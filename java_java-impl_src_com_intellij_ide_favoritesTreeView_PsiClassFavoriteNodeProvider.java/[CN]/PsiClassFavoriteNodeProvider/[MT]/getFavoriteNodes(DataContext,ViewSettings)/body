{
  final Project project=PlatformDataKeys.PROJECT.getData(context);
  if (project == null)   return null;
  PsiElement[] elements=LangDataKeys.PSI_ELEMENT_ARRAY.getData(context);
  if (elements == null) {
    final PsiElement element=LangDataKeys.PSI_ELEMENT.getData(context);
    if (element != null) {
      elements=new PsiElement[]{element};
    }
  }
  if (elements != null) {
    final Collection<AbstractTreeNode> result=new ArrayList<AbstractTreeNode>();
    for (    PsiElement element : elements) {
      if (element instanceof PsiClass) {
        result.add(new ClassSmartPointerNode(project,element,viewSettings));
      }
    }
    return result.isEmpty() ? null : result;
  }
  return null;
}
