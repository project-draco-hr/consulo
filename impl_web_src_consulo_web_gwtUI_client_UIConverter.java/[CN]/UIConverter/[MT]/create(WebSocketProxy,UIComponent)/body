{
  final String type=component.getType();
  Factory factory=ourMap.get(type);
  if (factory == null) {
    Window.alert("Type " + type + " is not resolved");
    return null;
  }
  final InternalGwtComponent widget=factory.create();
  ourCache.put(component.getId(),widget);
  final Map<String,String> variables=component.getVariables();
  final List<UIComponent.Child> children=component.getChildren();
  if (children != null) {
    for (    UIComponent.Child child : children) {
      widget.addChildren(proxy,child);
    }
  }
  widget.updateState(variables == null ? Collections.<String,String>emptyMap() : variables);
  if (widget instanceof InternalGwtComponentWithListeners) {
    ((InternalGwtComponentWithListeners)widget).addListeners(proxy,component.getId());
  }
  return widget;
}
