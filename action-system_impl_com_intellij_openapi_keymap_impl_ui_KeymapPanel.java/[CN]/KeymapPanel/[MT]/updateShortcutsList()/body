{
  DefaultListModel shortcutsModel=(DefaultListModel)myShortcutsList.getModel();
  shortcutsModel.clear();
  String actionId=myActionsTree.getSelectedActionId();
  myDescriptionLabel.setText(" ");
  if (actionId != null && mySelectedKeymap != null) {
    AnAction action=ActionManager.getInstance().getAction(actionId);
    if (action != null) {
      String description=action.getTemplatePresentation().getDescription();
      if (description != null && description.trim().length() > 0) {
        myDescriptionLabel.setText(prepareDescription(description));
      }
    }
 else {
      QuickList list=myActionsTree.getSelectedQuickList();
      if (list != null) {
        String description=list.getDescription().trim();
        if (description.length() > 0) {
          myDescriptionLabel.setText(prepareDescription(description));
        }
      }
    }
    Shortcut[] shortcuts=mySelectedKeymap.getShortcuts(actionId);
    for (    Shortcut shortcut : shortcuts) {
      shortcutsModel.addElement(shortcut);
    }
    if (shortcutsModel.size() > 0) {
      myShortcutsList.setSelectedIndex(0);
    }
    myAddKeyboardShortcutButton.setEnabled(mySelectedKeymap.canModify());
    myAddMouseShortcutButton.setEnabled(mySelectedKeymap.canModify());
    myRemoveShortcutButton.setEnabled(mySelectedKeymap.canModify() && shortcutsModel.size() > 0);
  }
 else {
    myAddKeyboardShortcutButton.setEnabled(false);
    myAddMouseShortcutButton.setEnabled(false);
    myRemoveShortcutButton.setEnabled(false);
  }
}
