{
  PsiStatement nextStatement=PsiTreeUtil.getNextSiblingOfType(statement,PsiStatement.class);
  while (nextStatement == null) {
    statement=PsiTreeUtil.getParentOfType(statement,PsiStatement.class);
    if (statement == null) {
      return null;
    }
    if (statement instanceof PsiLoopStatement) {
      return statement;
    }
    nextStatement=PsiTreeUtil.getNextSiblingOfType(statement,PsiStatement.class);
    if (nextStatement == null) {
      continue;
    }
    final PsiElement statementParent=statement.getParent();
    if (!(statementParent instanceof PsiIfStatement)) {
      continue;
    }
    final PsiElement nextStatementParent=nextStatement.getParent();
    if (statementParent.equals(nextStatementParent)) {
      nextStatement=null;
    }
  }
  return nextStatement;
}
