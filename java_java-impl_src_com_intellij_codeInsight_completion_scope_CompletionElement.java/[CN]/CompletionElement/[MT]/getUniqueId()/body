{
  final String name;
  if (myElement instanceof PsiClass) {
    name=((PsiClass)myElement).getQualifiedName();
  }
 else   if (myElement instanceof PsiPackage) {
    name=((PsiPackage)myElement).getQualifiedName();
  }
 else   if (myElement instanceof PsiMethod) {
    return ((PsiMethod)myElement).getSignature(mySubstitutor);
  }
 else   if (myElement instanceof PsiField) {
    final PsiField field=(PsiField)myElement;
    final String s=field.getName();
    if (myQualifierClass != null || !field.hasModifierProperty(PsiModifier.STATIC))     return "#" + s;
    return field.getContainingClass().getQualifiedName() + "#" + s;
  }
 else   if (myElement instanceof PsiElement) {
    name=PsiUtilCore.getName((PsiElement)myElement);
  }
 else {
    name="";
  }
  return name;
}
