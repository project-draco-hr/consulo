{
  if (items == null || items.length <= 0) {
    return EMPTY_GENERATION_ITEM_ARRAY;
  }
  context.getProgressIndicator().setText("Compiling RenderScript files...");
  final GenerationItem[] generationItems=doGenerate(context,items);
  final Set<VirtualFile> generatedVFiles=new HashSet<VirtualFile>();
  final HashSet<VirtualFile> visited=new HashSet<VirtualFile>();
  for (  GenerationItem item : generationItems) {
    final MyGenerationItem genItem=(MyGenerationItem)item;
    final File genDir=new File(genItem.myGenRootPath);
    CompilerUtil.refreshIODirectories(Arrays.asList(genDir));
    final VirtualFile generatedVFile=LocalFileSystem.getInstance().findFileByIoFile(genDir);
    if (generatedVFile != null) {
      AndroidUtils.collectFiles(generatedVFile,visited,generatedVFiles);
    }
  }
  if (context instanceof CompileContextEx) {
    ((CompileContextEx)context).markGenerated(generatedVFiles);
  }
  return generationItems;
}
