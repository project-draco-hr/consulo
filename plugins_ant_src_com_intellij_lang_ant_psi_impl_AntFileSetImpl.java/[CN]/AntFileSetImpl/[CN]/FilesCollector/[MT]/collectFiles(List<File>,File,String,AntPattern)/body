{
  if (myDirsProcessed > MAX_DIRS_TO_PROCESS) {
    return;
  }
  myDirsProcessed++;
  final File[] children=from.listFiles();
  if (children != null) {
    for (    File child : children) {
      final String childPath=makePath(relativePath,child.getName());
      if (pattern.acceptPath(childPath)) {
        container.add(child);
      }
      if (child.isDirectory() && pattern.couldBeIncluded(childPath)) {
        collectFiles(container,child,childPath,pattern);
      }
    }
  }
}
