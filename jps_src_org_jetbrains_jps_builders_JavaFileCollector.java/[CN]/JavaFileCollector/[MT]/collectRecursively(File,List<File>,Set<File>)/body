{
  if (file.isDirectory()) {
    File current=file;
    while (current != null) {
      if (excluded.contains(current))       return;
      current=current.getParentFile();
    }
    final File[] children=file.listFiles();
    if (children != null) {
      for (      File child : children) {
        collectRecursively(child,result,excluded);
      }
    }
    return;
  }
  if (file.getName().endsWith(".java")) {
    result.add(file);
  }
}
