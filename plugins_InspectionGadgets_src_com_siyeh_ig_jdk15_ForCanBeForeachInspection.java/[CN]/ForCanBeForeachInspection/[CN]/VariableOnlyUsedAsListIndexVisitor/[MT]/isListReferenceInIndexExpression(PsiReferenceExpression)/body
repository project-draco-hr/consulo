{
  final PsiElement parent=reference.getParent();
  if (!(parent instanceof PsiReferenceExpression)) {
    if (parent instanceof PsiMethodCallExpression) {
      final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)parent;
      final PsiMethod method=methodCallExpression.resolveMethod();
      if (method == null) {
        return true;
      }
      final PsiClass parentClass=PsiTreeUtil.getParentOfType(methodCallExpression,PsiClass.class);
      final PsiClass containingClass=method.getContainingClass();
      if (containingClass.equals(parentClass)) {
        return true;
      }
      return isListGetExpression(methodCallExpression);
    }
    return false;
  }
  final PsiElement grandParent=parent.getParent();
  if (!(grandParent instanceof PsiMethodCallExpression)) {
    return false;
  }
  final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)grandParent;
  final PsiElement greatGrandParent=methodCallExpression.getParent();
  if (greatGrandParent instanceof PsiExpressionStatement) {
    return false;
  }
  return isListGetExpression(methodCallExpression);
}
