{
  final PsiStatement initialization=forStatement.getInitialization();
  if (!(initialization instanceof PsiDeclarationStatement)) {
    return false;
  }
  final PsiDeclarationStatement declaration=(PsiDeclarationStatement)initialization;
  if (declaration.getDeclaredElements().length != 1) {
    return false;
  }
  final PsiLocalVariable indexVar=(PsiLocalVariable)declaration.getDeclaredElements()[0];
  final PsiExpression initialValue=indexVar.getInitializer();
  if (initialValue == null) {
    return false;
  }
  final PsiManager manager=initialValue.getManager();
  final PsiConstantEvaluationHelper constantEvaluationHelper=manager.getConstantEvaluationHelper();
  final Object constant=constantEvaluationHelper.computeConstantExpression(initialValue);
  if (!(constant instanceof Integer)) {
    return false;
  }
  final Integer integer=(Integer)constant;
  if (integer.intValue() != 0) {
    return false;
  }
  final PsiExpression condition=forStatement.getCondition();
  if (!isArrayLengthComparison(condition,indexVar)) {
    return false;
  }
  final PsiStatement update=forStatement.getUpdate();
  if (!isIncrement(update,indexVar)) {
    return false;
  }
  final PsiReferenceExpression arrayReference=getVariableReferenceFromCondition(condition);
  if (arrayReference == null) {
    return false;
  }
  final String arrayName=arrayReference.getText();
  final PsiStatement body=forStatement.getBody();
  if (!indexVarOnlyUsedAsIndex(arrayName,indexVar,body)) {
    return false;
  }
  return !isVariableAssigned(arrayName,body);
}
