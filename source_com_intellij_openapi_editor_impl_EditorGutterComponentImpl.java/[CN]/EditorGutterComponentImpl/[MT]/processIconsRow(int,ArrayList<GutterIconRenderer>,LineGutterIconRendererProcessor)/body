{
  int middleCount=0;
  int middleSize=0;
  int y=myEditor.logicalPositionToXY(new LogicalPosition(line,0)).y;
  int x=getLineMarkerAreaOffset() + 1;
  for (int i=0; i < row.size(); i++) {
    GutterIconRenderer r=row.get(i);
    Icon icon=r.getIcon();
    if (r.getAlignment() == GutterIconRenderer.Alignment.LEFT) {
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
    }
 else {
      if (r.getAlignment() == GutterIconRenderer.Alignment.CENTER) {
        middleCount++;
        middleSize+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
      }
    }
  }
  int leftSize=x - getLineMarkerAreaOffset();
  x=getLineMarkerAreaOffset() + myIconsAreaWidth;
  for (int i=0; i < row.size(); i++) {
    GutterIconRenderer r=row.get(i);
    if (r.getAlignment() == GutterIconRenderer.Alignment.RIGHT) {
      Icon icon=r.getIcon();
      x-=icon.getIconWidth();
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x-=GAP_BETWEEN_ICONS;
    }
  }
  int rightSize=myIconsAreaWidth + getLineMarkerAreaOffset() - x;
  if (middleCount > 0) {
    middleSize-=GAP_BETWEEN_ICONS;
    x=getLineMarkerAreaOffset() + leftSize + (myIconsAreaWidth - leftSize - rightSize- middleSize) / 2;
    for (int i=0; i < row.size(); i++) {
      GutterIconRenderer r=row.get(i);
      if (r.getAlignment() == GutterIconRenderer.Alignment.CENTER) {
        Icon icon=r.getIcon();
        processor.process(x,y + getTextAlignmentShift(icon),r);
        x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
      }
    }
  }
}
