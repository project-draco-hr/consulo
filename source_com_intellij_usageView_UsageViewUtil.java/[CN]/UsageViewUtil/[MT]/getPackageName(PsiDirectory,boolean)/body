{
  PsiPackage aPackage=directory.getPackage();
  if (aPackage == null) {
    return directory.getVirtualFile().getPresentableUrl();
  }
 else {
    String packageName=getPackageName(aPackage);
    if (includeRootDir) {
      String rootDir=getRootDirectoryForPackage(directory);
      if (rootDir != null) {
        return packageName + " (in " + rootDir+ ")";
      }
    }
    return packageName;
  }
}
