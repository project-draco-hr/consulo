{
  super.visitReturnStatement(statement);
  if (statement.getReturnValue() != null) {
    return;
  }
  final PsiElement methodParent=PsiTreeUtil.getParentOfType(statement,PsiMethod.class,PsiLambdaExpression.class);
  PsiCodeBlock codeBlock=null;
  final boolean constructor;
  if (methodParent instanceof PsiMethod) {
    final PsiMethod method=(PsiMethod)methodParent;
    codeBlock=method.getBody();
    constructor=method.isConstructor();
  }
 else   if (methodParent instanceof PsiLambdaExpression) {
    constructor=false;
    final PsiLambdaExpression lambdaExpression=(PsiLambdaExpression)methodParent;
    final PsiElement lambdaBody=lambdaExpression.getBody();
    if (lambdaBody instanceof PsiCodeBlock) {
      codeBlock=(PsiCodeBlock)lambdaBody;
    }
  }
 else {
    return;
  }
  if (codeBlock == null) {
    return;
  }
  if (!ControlFlowUtils.blockCompletesWithStatement(codeBlock,statement)) {
    return;
  }
  if (ignoreInThenBranch && isInThenBranch(statement)) {
    return;
  }
  registerStatementError(statement,Boolean.valueOf(constructor));
}
