{
  Project project=file.getProject();
  ResourceManager manager=facet.getLocalResourceManager();
  String type=manager.getFileResourceType(file);
  if (type == null)   return;
  String name=file.getName();
  if (AndroidCommonUtils.getResourceName(type,name).equals(AndroidCommonUtils.getResourceName(type,newName))) {
    return;
  }
  List<PsiFile> resourceFiles=manager.findResourceFiles(type,AndroidCommonUtils.getResourceName(type,name),true,false);
  List<PsiFile> alternativeResources=new ArrayList<PsiFile>();
  for (  PsiFile resourceFile : resourceFiles) {
    if (!resourceFile.getManager().areElementsEquivalent(file,resourceFile) && resourceFile.getName().equals(name)) {
      alternativeResources.add(resourceFile);
    }
  }
  if (alternativeResources.size() > 0) {
    int r=0;
    if (ASK) {
      r=Messages.showYesNoDialog(project,message("rename.alternate.resources.question"),message("rename.dialog.title"),Messages.getQuestionIcon());
    }
    if (r == 0) {
      for (      PsiFile candidate : alternativeResources) {
        allRenames.put(candidate,newName);
      }
    }
 else {
      return;
    }
  }
  PsiField[] resFields=AndroidResourceUtil.findResourceFieldsForFileResource(file,false);
  for (  PsiField resField : resFields) {
    String newFieldName=AndroidCommonUtils.getResourceName(type,newName);
    allRenames.put(resField,AndroidResourceUtil.getFieldNameByResourceName(newFieldName));
  }
}
