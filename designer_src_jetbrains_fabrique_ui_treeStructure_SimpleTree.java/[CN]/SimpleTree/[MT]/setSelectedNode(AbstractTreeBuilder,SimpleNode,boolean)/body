{
  final TreePath selected=getSelectionPath();
  if (selected != null) {
    final SimpleNode selectedNode=getNodeFor(selected);
    if (selectedNode.equals(node)) {
      return;
    }
  }
  if (expand) {
    builder.buildNodeForElement(node);
  }
  final TreePath path=getPathFor(node);
  setSelectionPath(path);
  scrollPathToVisible(path);
}
