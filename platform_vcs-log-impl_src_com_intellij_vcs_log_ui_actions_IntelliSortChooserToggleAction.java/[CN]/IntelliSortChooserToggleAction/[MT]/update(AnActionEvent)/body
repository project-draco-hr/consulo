{
  super.update(e);
  VcsLogUi logUI=e.getData(VcsLogDataKeys.VCS_LOG_UI);
  e.getPresentation().setVisible(BekUtil.isBekEnabled());
  e.getPresentation().setEnabled(BekUtil.isBekEnabled() && logUI != null);
  if (logUI != null) {
    boolean off=logUI.getBekType() == PermanentGraph.SortType.Normal;
    e.getPresentation().setText("IntelliSort is " + (off ? "Off" : "On"));
    e.getPresentation().setDescription("Turn IntelliSort " + (off ? "on" : "off") + " ("+ (off ? PermanentGraph.SortType.Bek.getDescription().toLowerCase() : PermanentGraph.SortType.Normal.getDescription().toLowerCase())+ ").");
  }
 else {
    e.getPresentation().setText(DEFAULT_TEXT);
    e.getPresentation().setDescription(DEFAULT_DESCRIPTION);
  }
}
