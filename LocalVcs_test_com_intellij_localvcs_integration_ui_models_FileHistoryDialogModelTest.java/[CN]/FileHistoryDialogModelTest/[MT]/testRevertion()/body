{
  vcs.createFile("file",b("old"),1L);
  vcs.changeFileContent("file",b("new"),null);
  VirtualFile f=createMock(VirtualFile.class);
  expect(f.contentsToByteArray()).andReturn(b("new"));
  expect(f.getPath()).andStubReturn("file");
  expect(f.getName()).andStubReturn("file");
  expect(f.getTimeStamp()).andStubReturn(2L);
  f.setBinaryContent(aryEq(b("old")),eq(-1L),eq(1L));
  replay(f);
  m=new FileHistoryDialogModel(f,vcs,new TestIdeaGateway());
  m.selectLabels(1,1);
  m.revert();
  verify(f);
}
