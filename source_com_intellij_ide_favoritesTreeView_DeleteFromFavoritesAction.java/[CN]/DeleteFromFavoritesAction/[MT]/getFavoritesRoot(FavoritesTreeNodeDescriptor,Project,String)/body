{
  final FavoritesTreeViewPanel favoritesTreeViewPanel=FavoritesViewImpl.getInstance(project).getFavoritesTreeViewPanel(favoritesViewPane);
  while (node.getParentDescriptor() != null && node.getParentDescriptor() instanceof FavoritesTreeNodeDescriptor) {
    FavoritesTreeNodeDescriptor favoritesDescriptor=(FavoritesTreeNodeDescriptor)node.getParentDescriptor();
    if (favoritesDescriptor.getElement() == favoritesTreeViewPanel.getFavoritesTreeStructure().getRootElement()) {
      return node;
    }
    node=favoritesDescriptor;
  }
  return node;
}
