{
  while (node.getParentDescriptor() != null && node.getParentDescriptor() instanceof FavoritesTreeNodeDescriptor) {
    FavoritesTreeNodeDescriptor favoritesDescriptor=(FavoritesTreeNodeDescriptor)node.getParentDescriptor();
    if (favoritesDescriptor.getElement() == FavoritesTreeStructure.getInstance(project).getRootElement()) {
      return node;
    }
    node=favoritesDescriptor;
  }
  return node;
}
