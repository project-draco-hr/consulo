{
  final FileType fileType=myFile.getFileType();
  if (fileType instanceof CustomFileType) {
    return ((CustomFileType)fileType).getCommenter();
  }
  final SelectionModel selectionModel=myEditor.getSelectionModel();
  int caretOffset=myEditor.getCaretModel().getOffset();
  Language lang=getLanguageAtOffset(caretOffset,false);
  if (lang == null)   return null;
  if (selectionModel.hasSelection()) {
    Language l1=getLanguageAtOffset(selectionModel.getSelectionStart(),false);
    Language l2=getLanguageAtOffset(selectionModel.getSelectionEnd(),true);
    if (!Comparing.equal(lang,l1) || !Comparing.equal(lang,l2)) {
      lang=myFile.getLanguage();
    }
  }
  return lang.getCommenter();
}
