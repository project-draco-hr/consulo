{
  final int expectedSize=myRevisionsAfterRename.size();
  final List<CommitHashPlusParents> hashesWithParents=new ArrayList<CommitHashPlusParents>(3);
  AsynchConsumer<CommitHashPlusParents> consumer=new AsynchConsumer<CommitHashPlusParents>(){
    @Override public void consume(    CommitHashPlusParents gitFileRevision){
      hashesWithParents.add(gitFileRevision);
    }
    @Override public void finished(){
    }
  }
;
  GitHistoryUtils.hashesWithParents(myProject,bfilePath,consumer,null);
  assertEquals(hashesWithParents.size(),expectedSize);
  for (Iterator hit=hashesWithParents.iterator(), myIt=myRevisionsAfterRename.iterator(); hit.hasNext(); ) {
    CommitHashPlusParents chpp=(CommitHashPlusParents)hit.next();
    GitTestRevision rev=(GitTestRevision)myIt.next();
    assertEquals(chpp.getHash(),rev.myHash);
    final List<AbstractHash> parents=chpp.getParents();
    final ArrayList<String> list=new ArrayList<String>();
    for (    AbstractHash parent : parents) {
      list.add(parent.getString());
    }
    assertEqualHashes(list,Arrays.asList(rev.myParents));
  }
}
