{
  ourAsyncService.getNavigationInfo(virtualFile.getUrl(),event.getOffset(),new ReportableCallable<List<GwtNavigatable>>(){
    @Override public void onSuccess(    List<GwtNavigatable> result){
      if (!result.isEmpty()) {
        final PopupPanel popupPanel=new PopupPanel(true);
        for (        final GwtNavigatable navigatable : result) {
          Anchor anchor=new Anchor("Navigate to declaration");
          anchor.addClickHandler(new ClickHandler(){
            @Override public void onClick(            ClickEvent event){
              ourAsyncService.findFileByUrl(navigatable.getFileUrl(),new ReportableCallable<GwtVirtualFile>(){
                @Override public void onSuccess(                GwtVirtualFile result){
                  popupPanel.hide();
                  openFileInEditor(result,navigatable.getOffset());
                }
              }
);
            }
          }
);
          popupPanel.add(anchor);
        }
        popupPanel.setPopupPosition(event.getClientX(),event.getClientY());
        popupPanel.show();
      }
    }
  }
);
}
