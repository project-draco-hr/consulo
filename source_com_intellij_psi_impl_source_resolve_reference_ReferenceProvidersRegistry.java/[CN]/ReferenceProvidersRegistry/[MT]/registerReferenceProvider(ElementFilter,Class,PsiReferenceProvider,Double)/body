{
  if (scope == XmlAttributeValue.class) {
    registerXmlAttributeValueReferenceProvider(null,elementFilter,true,provider,priority);
    return;
  }
 else   if (scope == XmlTag.class) {
    registerXmlTagReferenceProvider(null,elementFilter,false,provider,priority);
    return;
  }
  while (true) {
    final ProviderBinding providerBinding=myBindingsMap.get(scope);
    if (providerBinding != null) {
      ((SimpleProviderBinding)providerBinding).registerProvider(provider,new FilterPattern(elementFilter),priority);
      return;
    }
    final SimpleProviderBinding binding=new SimpleProviderBinding(scope);
    binding.registerProvider(provider,new FilterPattern(elementFilter),priority);
    if (myBindingsMap.putIfAbsent(scope,binding) == null)     break;
  }
}
