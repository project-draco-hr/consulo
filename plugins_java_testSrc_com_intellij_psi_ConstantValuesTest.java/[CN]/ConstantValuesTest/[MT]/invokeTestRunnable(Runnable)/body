{
  super.invokeTestRunnable(runnable);
  final PsiJavaFile file=(PsiJavaFile)myClass.getContainingFile();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        file.getVirtualFile().setBinaryContent(file.getVirtualFile().contentsToByteArray());
      }
 catch (      IOException e) {
        LOGGER.error(e);
      }
    }
  }
);
  LOGGER.assertTrue(file.isValid());
  myClass=file.getClasses()[0];
  LOGGER.assertTrue(myClass.isValid());
  super.invokeTestRunnable(runnable);
}
