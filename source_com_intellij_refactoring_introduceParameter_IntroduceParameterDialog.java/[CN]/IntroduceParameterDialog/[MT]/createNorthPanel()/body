{
  GridBagConstraints gbConstraints=new GridBagConstraints();
  JPanel panel=new JPanel(new GridBagLayout());
  gbConstraints.anchor=GridBagConstraints.WEST;
  gbConstraints.fill=GridBagConstraints.NONE;
  gbConstraints.gridx=0;
  gbConstraints.insets=new Insets(4,4,4,0);
  gbConstraints.gridwidth=1;
  gbConstraints.weightx=0;
  gbConstraints.weighty=0;
  gbConstraints.gridy=0;
  JLabel type=new JLabel("Parameter of type: ");
  panel.add(type,gbConstraints);
  gbConstraints.insets=new Insets(4,4,4,8);
  gbConstraints.gridx++;
  gbConstraints.weightx=1;
  gbConstraints.fill=GridBagConstraints.BOTH;
  myTypeSelector=myTypeSelectorManager.getTypeSelector();
  panel.add(myTypeSelector.getComponent(),gbConstraints);
  gbConstraints.insets=new Insets(4,4,4,8);
  gbConstraints.gridwidth=1;
  gbConstraints.weightx=0;
  gbConstraints.gridx=0;
  gbConstraints.gridy=1;
  gbConstraints.fill=GridBagConstraints.NONE;
  final JLabel nameLabel=new JLabel("Name: ");
  panel.add(nameLabel,gbConstraints);
  myParameterNameField=new NameSuggestionsField(myProject);
  gbConstraints.gridx++;
  gbConstraints.insets=new Insets(4,4,4,8);
  gbConstraints.weightx=1;
  gbConstraints.fill=GridBagConstraints.BOTH;
  panel.add(myParameterNameField.getComponent(),gbConstraints);
  myParameterNameField.addDataChangedListener(new NameSuggestionsField.DataChanged(){
    public void dataChanged(){
      validateButtons();
    }
  }
);
  myNameSuggestionsManager=new NameSuggestionsManager(myTypeSelector,myParameterNameField,myNameSuggestionsGenerator,myProject);
  myNameSuggestionsManager.setMnemonics(type,nameLabel);
  gbConstraints.gridx=0;
  gbConstraints.insets=new Insets(4,0,4,8);
  gbConstraints.gridwidth=2;
  if (myOccurenceNumber > 1 && !myIsInvokedOnDeclaration) {
    gbConstraints.gridy++;
    myCbReplaceAllOccurences=new NonFocusableCheckBox("Replace all occurences (" + myOccurenceNumber + " occurences)");
    myCbReplaceAllOccurences.setMnemonic('R');
    panel.add(myCbReplaceAllOccurences,gbConstraints);
    myCbReplaceAllOccurences.setSelected(false);
  }
  RefactoringSettings settings=RefactoringSettings.getInstance();
  gbConstraints.gridy++;
  myCbDeclareFinal=new NonFocusableCheckBox("Declare final");
  myCbDeclareFinal.setMnemonic('n');
  myCbDeclareFinal.setSelected(CodeStyleSettingsManager.getSettings(myProject).GENERATE_FINAL_PARAMETERS);
  panel.add(myCbDeclareFinal,gbConstraints);
  if (myIsLocalVariable && !myIsInvokedOnDeclaration) {
    myCbDeleteLocalVariable=new StateRestoringCheckBox("Delete variable definition");
    myCbDeleteLocalVariable.setMnemonic('D');
    if (myCbReplaceAllOccurences != null) {
      gbConstraints.insets=new Insets(0,16,4,8);
    }
    gbConstraints.gridy++;
    panel.add(myCbDeleteLocalVariable,gbConstraints);
    myCbDeleteLocalVariable.setSelected(settings.INTRODUCE_PARAMETER_DELETE_LOCAL_VARIABLE);
    gbConstraints.insets=new Insets(4,0,4,8);
    if (myHasInitializer) {
      myCbUseInitializer=new StateRestoringCheckBox("Use variable initializer to initialize parameter");
      myCbUseInitializer.setMnemonic('U');
      gbConstraints.gridy++;
      panel.add(myCbUseInitializer,gbConstraints);
    }
  }
  updateControls();
  if (myCbReplaceAllOccurences != null) {
    myCbReplaceAllOccurences.addItemListener(new ItemListener(){
      public void itemStateChanged(      ItemEvent e){
        updateControls();
      }
    }
);
  }
  return panel;
}
