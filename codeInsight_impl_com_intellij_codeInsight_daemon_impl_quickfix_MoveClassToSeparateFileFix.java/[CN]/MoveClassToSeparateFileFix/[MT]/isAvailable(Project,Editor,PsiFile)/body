{
  if (!myClass.isValid() || !myClass.getManager().isInProject(myClass))   return false;
  PsiDirectory dir=file.getContainingDirectory();
  if (dir == null)   return false;
  try {
    if (myClass.isInterface()) {
      JavaDirectoryService.getInstance().checkCreateInterface(dir,myClass.getName());
    }
 else {
      JavaDirectoryService.getInstance().checkCreateClass(dir,myClass.getName());
    }
  }
 catch (  IncorrectOperationException e) {
    return false;
  }
  return true;
}
