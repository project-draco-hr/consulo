{
  final Runnable task=new Runnable(){
    @Override public void run(){
      GradleSettings.applyLinkedProjectPath(myProjectFile.getAbsolutePath(),project);
    }
  }
;
  if (project.isInitialized()) {
    task.run();
  }
 else {
    StartupManager.getInstance(project).registerPostStartupActivity(task);
  }
  GradleModulesImporter importer=new GradleModulesImporter();
  Map<GradleModule,Module> mappings=importer.importModules(myModuleMappings.values(),project,model,myProjectFile.getAbsolutePath());
  return new ArrayList<Module>(mappings.values());
}
