def _removedirs(name):
    'special version of os.removedirs that does not remove symlinked\n    directories or junction points if they actually contain files'
    if osutil.listdir(name):
        return
    os.rmdir(name)
    (head, tail) = os.path.split(name)
    if (not tail):
        (head, tail) = os.path.split(head)
    while (head and tail):
        try:
            if osutil.listdir(head):
                return
            os.rmdir(head)
        except:
            break
        (head, tail) = os.path.split(head)
