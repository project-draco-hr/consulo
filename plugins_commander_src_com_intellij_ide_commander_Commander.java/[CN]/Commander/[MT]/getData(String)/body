{
  if (PlatformDataKeys.HELP_ID.is(dataId)) {
    return HelpID.COMMANDER;
  }
 else   if (PlatformDataKeys.PROJECT.is(dataId)) {
    return myProject;
  }
 else   if (LangDataKeys.TARGET_PSI_ELEMENT.is(dataId)) {
    final AbstractTreeNode parentElement=getInactivePanel().getBuilder().getParentNode();
    if (parentElement == null)     return null;
    final Object element=parentElement.getValue();
    return (element instanceof PsiElement) && ((PsiElement)element).isValid() ? element : null;
  }
 else   if (CompareFiles.DIFF_REQUEST.is(dataId)) {
    PsiElement primary=getActivePanel().getSelectedElement();
    PsiElement secondary=getInactivePanel().getSelectedElement();
    if (primary != null && secondary != null && primary.isValid() && secondary.isValid() && !PsiTreeUtil.isAncestor(primary,secondary,false) && !PsiTreeUtil.isAncestor(secondary,primary,false)) {
      return PsiDiffContentFactory.comparePsiElements(primary,secondary);
    }
    return null;
  }
 else {
    return getActivePanel().getDataImpl(dataId);
  }
}
