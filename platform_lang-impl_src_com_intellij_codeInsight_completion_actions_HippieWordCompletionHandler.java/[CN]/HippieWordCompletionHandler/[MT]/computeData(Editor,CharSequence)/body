{
  final int offset=editor.getCaretModel().getOffset();
  final CompletionData data=new CompletionData();
  IdTableBuilding.scanWords(new IdTableBuilding.ScanWordProcessor(){
    @Override public void run(    final CharSequence chars,    @Nullable char[] charsArray,    final int start,    final int end){
      if (start <= offset && end >= offset) {
        data.myPrefix=charsSequence.subSequence(start,offset).toString();
        data.myWordUnderCursor=charsSequence.subSequence(start,end).toString();
        data.startOffset=start;
      }
    }
  }
,charsSequence,0,charsSequence.length());
  if (data.myPrefix == null) {
    data.myPrefix="";
    data.myWordUnderCursor="";
    data.startOffset=offset;
  }
  return data;
}
