{
  final SimpleNode selectedNode=treeView.getTree().getSelectedNode();
  if (selectedNode instanceof DomFileElementNode) {
    e.getPresentation().setVisible(false);
    return;
  }
  boolean enabled=false;
  if (selectedNode instanceof BaseDomElementNode) {
    final DomElement domElement=((BaseDomElementNode)selectedNode).getDomElement();
    if (domElement.isValid() && domElement.getXmlElement() != null && !(domElement.getParent() instanceof DomFileElement)) {
      enabled=true;
    }
  }
  e.getPresentation().setEnabled(enabled);
  if (enabled) {
    e.getPresentation().setText(getPresentationText(selectedNode));
  }
 else {
    e.getPresentation().setText(ApplicationBundle.message("action.remove"));
  }
  e.getPresentation().setIcon(IconLoader.getIcon("/general/remove.png"));
}
