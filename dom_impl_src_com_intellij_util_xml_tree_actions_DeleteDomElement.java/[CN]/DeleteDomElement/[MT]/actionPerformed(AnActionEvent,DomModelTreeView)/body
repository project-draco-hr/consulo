{
  final SimpleNode selectedNode=treeView.getTree().getSelectedNode();
  if (selectedNode instanceof BaseDomElementNode) {
    if (selectedNode instanceof DomFileElementNode) {
      e.getPresentation().setVisible(false);
      return;
    }
    final DomElement domElement=((BaseDomElementNode)selectedNode).getDomElement();
    final int ret=Messages.showOkCancelDialog(getPresentationText(selectedNode) + "?",ApplicationBundle.message("action.remove"),Messages.getQuestionIcon());
    if (ret == 0) {
      new WriteCommandAction(domElement.getManager().getProject(),domElement.getRoot().getFile()){
        protected void run(        final Result result) throws Throwable {
          domElement.undefine();
        }
      }
.execute();
    }
  }
}
