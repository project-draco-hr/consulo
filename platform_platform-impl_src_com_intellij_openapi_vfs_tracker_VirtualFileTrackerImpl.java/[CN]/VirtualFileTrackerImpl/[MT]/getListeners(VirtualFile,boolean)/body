{
  Set<VirtualFileListener> listeners=null;
  while (virtualFile != null) {
    final String url=virtualFile.getUrl();
    if (!fromRefresh) {
      listeners=addToSet(listeners,myNonRefreshTrackers.get(url));
    }
 else {
      listeners=addToSet(listeners,myAllTrackers.get(url));
    }
    virtualFile=virtualFile.getParent();
  }
  if (listeners == null || listeners.isEmpty())   return null;
  return listeners;
}
