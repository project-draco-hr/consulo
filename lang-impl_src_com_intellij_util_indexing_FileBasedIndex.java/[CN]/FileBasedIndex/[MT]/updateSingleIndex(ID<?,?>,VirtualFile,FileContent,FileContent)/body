{
  setDataBufferingEnabled(false);
synchronized (myLastIndexedDocStamps) {
    myLastIndexedDocStamps.clear();
    myLastIndexedUnsavedContent.clear();
  }
  final int inputId=Math.abs(getFileId(file));
  final UpdatableIndex<?,?,FileContent> index=getIndex(indexId);
  index.update(inputId,currentFC,oldFC);
  if (file.isValid()) {
    if (currentFC != null) {
      IndexingStamp.update(file,indexId,getIndexCreationStamp(indexId));
    }
 else {
      IndexingStamp.update(file,indexId,-1L);
    }
  }
}
