{
  final boolean isDirectory=fs.isDirectory(id);
  final DirectoryInfo directoryInfo=isDirectory ? dirIndex.getInfoForDirectoryId(id) : dirIndex.getInfoForDirectoryId(fs.getParent(id));
  if (directoryInfo != null && directoryInfo.contentRoot != null) {
    if (isDirectory) {
      return directoryInfo.directory;
    }
 else {
      final VirtualFile child=directoryInfo.directory.findChild(fs.getName(id));
      if (child != null) {
        return child;
      }
    }
  }
  return findTestFile(id);
}
