{
  final VirtualFile file=content.getVirtualFile();
  FileContent preloadedFC=null;
  for (  String indexId : myIndices.keySet()) {
    if (getInputFilter(indexId).acceptInput(file) && !IndexingStamp.isFileIndexed(file,indexId,getIndexCreationStamp(indexId))) {
      final boolean needContentLoading=myNeedContentLoading.contains(indexId);
      if (preloadedFC == null && needContentLoading) {
        preloadedFC=new FileContent(file,CacheUtil.getContentText(content));
      }
      try {
        updateSingleIndex(indexId,file,preloadedFC != null ? preloadedFC : new FileContent(file,null),null);
      }
 catch (      StorageException e) {
        requestRebuild(indexId);
        LOG.error(e);
      }
    }
  }
}
