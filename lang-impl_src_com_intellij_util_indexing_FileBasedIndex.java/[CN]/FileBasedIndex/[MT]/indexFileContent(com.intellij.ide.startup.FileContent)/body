{
  final VirtualFile file=content.getVirtualFile();
  FileContent fc=null;
  FileContent oldContent=null;
  final byte[] bytes=myFileContentAttic.remove(file);
  for (  ID<?,?> indexId : myIndices.keySet()) {
    if (getInputFilter(indexId).acceptInput(file)) {
      if (fc == null) {
        fc=new FileContent(file,CacheUtil.getContentText(content));
        oldContent=bytes != null ? new FileContent(file,LoadTextUtil.getTextByBinaryPresentation(bytes,file,false)) : null;
      }
      try {
        updateSingleIndex(indexId,file,fc,oldContent);
      }
 catch (      StorageException e) {
        requestRebuild(indexId);
        LOG.error(e);
      }
    }
  }
}
