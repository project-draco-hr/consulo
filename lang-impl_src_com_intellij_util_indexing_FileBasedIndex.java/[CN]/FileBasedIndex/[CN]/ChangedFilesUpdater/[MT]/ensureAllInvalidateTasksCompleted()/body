{
  ((ApplicationEx)ApplicationManager.getApplication()).writeLockSafeWait(new Runnable(){
    public void run(){
      while (true) {
        final FutureTask<?> future;
synchronized (myFutureInvalidations) {
          future=myFutureInvalidations.poll();
        }
        if (future == null) {
          return;
        }
        future.run();
        try {
          future.get();
        }
 catch (        InterruptedException ignored) {
        }
catch (        ExecutionException ignored) {
        }
      }
    }
  }
);
}
