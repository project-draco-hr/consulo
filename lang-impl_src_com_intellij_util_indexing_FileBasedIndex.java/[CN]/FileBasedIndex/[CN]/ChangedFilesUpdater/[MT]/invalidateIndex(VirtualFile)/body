{
  if (file.isDirectory()) {
    if (ManagingFS.getInstance().areChildrenLoaded(file)) {
      for (      VirtualFile child : file.getChildren()) {
        invalidateIndex(child);
      }
    }
  }
  FileContent fc=null;
  for (  String indexId : myIndices.keySet()) {
    if (getInputFilter(indexId).acceptInput(file)) {
      try {
        if (IndexingStamp.isFileIndexed(file,indexId,getIndexCreationStamp(indexId))) {
          if (fc == null) {
            fc=new FileContent(file,loadContent(file));
          }
          updateSingleIndex(indexId,file,null,fc);
          includeToUpdateSet(file);
        }
      }
 catch (      StorageException e) {
        LOG.error(e);
      }
    }
  }
}
