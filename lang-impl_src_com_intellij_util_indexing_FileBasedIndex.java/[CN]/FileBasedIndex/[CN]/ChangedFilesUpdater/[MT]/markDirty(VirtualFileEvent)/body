{
  iterateIndexableFiles(event.getFile(),new Processor<VirtualFile>(){
    public boolean process(    final VirtualFile file){
      FileContent fileContent=null;
      for (      ID<?,?> indexId : myIndices.keySet()) {
        if (getInputFilter(indexId).acceptInput(file)) {
          if (myNeedContentLoading.contains(indexId)) {
            myFilesToUpdate.add(file);
          }
 else {
            try {
              if (fileContent == null) {
                fileContent=new FileContent(file,(byte[])null);
              }
              updateSingleIndex(indexId,file,fileContent,null);
            }
 catch (            StorageException e) {
              LOG.info(e);
              requestRebuild(indexId);
            }
          }
        }
      }
      IndexingStamp.flushCache();
      return true;
    }
  }
);
}
