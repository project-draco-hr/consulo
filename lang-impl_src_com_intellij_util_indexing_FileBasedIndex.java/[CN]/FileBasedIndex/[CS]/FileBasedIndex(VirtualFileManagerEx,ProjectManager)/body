{
  final FileBasedIndexExtension[] extensions=Extensions.getExtensions(FileBasedIndexExtension.EXTENSION_POINT_NAME);
  for (  FileBasedIndexExtension extension : extensions) {
    registerIndexer(extension.getName(),extension.getIndexer(),extension.getKeyDescriptor(),extension.getValueExternalizer(),extension.getInputFilter(),extension.getVersion());
  }
  dropUnregisteredIndices();
  myChangedFilesUpdater=new ChangedFilesUpdater();
  vfManager.addVirtualFileListener(myChangedFilesUpdater);
  vfManager.registerRefreshUpdater(myChangedFilesUpdater);
  myDisposables.add(new Disposable(){
    public void dispose(){
      vfManager.removeVirtualFileListener(myChangedFilesUpdater);
      vfManager.unregisterRefreshUpdater(myChangedFilesUpdater);
    }
  }
);
  final ProjectManagerListener pmListener=new ProjectEventsTracker();
  projectManager.addProjectManagerListener(pmListener);
  myDisposables.add(new Disposable(){
    public void dispose(){
      projectManager.removeProjectManagerListener(pmListener);
    }
  }
);
}
