{
  Project project=DataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return false;
  }
  Object target=dataContext.getData(DataConstantsEx.PASTE_TARGET_PSI_ELEMENT);
  if (target == null) {
    return false;
  }
  PsiElement[] elements=((CopyPasteManagerEx)CopyPasteManager.getInstance()).getElements(new boolean[]{false});
  if (elements == null) {
    return false;
  }
  for (  PsiElement element : elements) {
    PsiManager manager=element.getManager();
    if (manager == null || manager.getProject() != project) {
      return false;
    }
  }
  return true;
}
