{
  final TextRange fileRange=elementToFold.getContainingFile().getTextRange();
  if (range.equals(fileRange))   return false;
  LOG.assertTrue(range.getStartOffset() >= 0 && range.getEndOffset() <= fileRange.getEndOffset());
  if (range.getStartOffset() < 0 || range.getEndOffset() > fileRange.getEndOffset()) {
    return false;
  }
  if (!allowOneLiners) {
    int startLine=document.getLineNumber(range.getStartOffset());
    int endLine=document.getLineNumber(range.getEndOffset() - 1);
    if (startLine < endLine && range.getLength() > 1) {
      list.add(new FoldingDescriptor(elementToFold,range));
      return true;
    }
    return false;
  }
 else {
    if (range.getLength() > getPlaceholderText(elementToFold).length()) {
      list.add(new FoldingDescriptor(elementToFold,range));
      return true;
    }
    return false;
  }
}
