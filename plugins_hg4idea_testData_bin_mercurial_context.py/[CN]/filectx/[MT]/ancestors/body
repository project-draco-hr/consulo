def ancestors(self):
    seen = set(str(self))
    visit = [self]
    while visit:
        for parent in visit.pop(0).parents():
            s = str(parent)
            if (s not in seen):
                visit.append(parent)
                seen.add(s)
                yield parent
