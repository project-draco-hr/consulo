def dirty(self, missing=False):
    'check whether a working directory is modified'
    return (self.p2() or (self.branch() != self.p1().branch()) or self.modified() or self.added() or self.removed() or (missing and self.deleted()))
