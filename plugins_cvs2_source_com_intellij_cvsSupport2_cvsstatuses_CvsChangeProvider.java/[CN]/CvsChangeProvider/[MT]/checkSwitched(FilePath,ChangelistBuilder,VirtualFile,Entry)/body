{
  final VirtualFile parentDir=dir.getParent();
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(myVcs.getProject()).getFileIndex();
  if (!fileIndex.isInContent(dir) || parentDir == null || !fileIndex.isInContent(parentDir)) {
    return;
  }
  final String dirTag=CvsEntriesManager.getInstance().getCvsInfoFor(dir).getStickyTag();
  final String parentDirTag=CvsEntriesManager.getInstance().getCvsInfoFor(parentDir).getStickyTag();
  String dirStickyInfo=getStickyInfo(dirTag);
  String parentDirStickyInfo=getStickyInfo(parentDirTag);
  if (entry != null && ((!Comparing.equal(entry.getStickyInformation(),dirStickyInfo) || !Comparing.equal(entry.getStickyInformation(),parentDirStickyInfo)))) {
    VirtualFile file=filePath.getVirtualFile();
    if (file != null) {
      if (entry.getStickyTag() != null) {
        builder.processSwitchedFile(file,"tag " + entry.getStickyTag(),true);
      }
 else       if (entry.getStickyDate() != null) {
        builder.processSwitchedFile(file,"date " + entry.getStickyDate(),true);
      }
 else       if (entry.getStickyRevision() != null) {
        builder.processSwitchedFile(file,"revision " + entry.getStickyRevision(),true);
      }
 else {
        builder.processSwitchedFile(file,"HEAD",true);
      }
    }
  }
}
