{
  if (!(sourceElement instanceof PsiIdentifier)) {
    return null;
  }
  AndroidFacet facet=AndroidFacet.getInstance(sourceElement);
  if (facet == null) {
    return null;
  }
  final PsiReferenceExpression refExp=PsiTreeUtil.getParentOfType(sourceElement,PsiReferenceExpression.class);
  if (refExp == null) {
    return null;
  }
  final String resFieldName=refExp.getReferenceName();
  if (resFieldName == null || resFieldName.length() == 0) {
    return null;
  }
  PsiExpression qExp=refExp.getQualifierExpression();
  if (!(qExp instanceof PsiReferenceExpression)) {
    return null;
  }
  final PsiReferenceExpression resClassReference=(PsiReferenceExpression)qExp;
  final String resClassName=resClassReference.getReferenceName();
  if (resClassName == null || resClassName.length() == 0) {
    return null;
  }
  qExp=resClassReference.getQualifierExpression();
  if (!(qExp instanceof PsiReferenceExpression)) {
    return null;
  }
  final PsiElement resolvedElement=((PsiReferenceExpression)qExp).resolve();
  if (!(resolvedElement instanceof PsiClass) || !AndroidUtils.R_CLASS_NAME.equals(((PsiClass)resolvedElement).getName())) {
    return null;
  }
  final PsiFile containingFile=resolvedElement.getContainingFile();
  if (containingFile == null || !AndroidUtils.isRClassFile(facet,containingFile)) {
    return null;
  }
  final List<PsiElement> resourceList=AndroidResourceUtil.findResourcesByFieldName(facet.getLocalResourceManager(),resClassName,resFieldName);
  final PsiElement[] resources=resourceList.toArray(new PsiElement[resourceList.size()]);
  final PsiElement[] wrappedResources=new PsiElement[resources.length];
  for (int i=0; i < resources.length; i++) {
    final PsiElement resource=resources[i];
    if (resource instanceof XmlAttributeValue && resource instanceof PsiMetaOwner && resource instanceof NavigationItem) {
      wrappedResources[i]=new ValueResourceElementWrapper((XmlAttributeValue)resource);
    }
 else     if (resource instanceof PsiFile) {
      wrappedResources[i]=new FileResourceElementWrapper((PsiFile)resource);
    }
 else {
      wrappedResources[i]=resource;
    }
  }
  return wrappedResources.length > 0 ? wrappedResources : null;
}
