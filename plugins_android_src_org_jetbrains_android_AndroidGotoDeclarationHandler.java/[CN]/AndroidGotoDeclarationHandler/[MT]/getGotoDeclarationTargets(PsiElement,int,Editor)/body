{
  if (!(sourceElement instanceof PsiIdentifier)) {
    return null;
  }
  AndroidFacet facet=AndroidFacet.getInstance(sourceElement);
  if (facet == null) {
    return null;
  }
  final PsiReferenceExpression refExp=PsiTreeUtil.getParentOfType(sourceElement,PsiReferenceExpression.class);
  if (refExp == null) {
    return null;
  }
  Pair<String,String> pair=AndroidResourceUtil.getReferredResourceField(facet,refExp);
  if (pair == null) {
    PsiElement parent=refExp.getParent();
    if (parent instanceof PsiReferenceExpression) {
      pair=AndroidResourceUtil.getReferredResourceField(facet,(PsiReferenceExpression)parent);
    }
    if (pair == null) {
      parent=parent.getParent();
      if (parent instanceof PsiReferenceExpression) {
        pair=AndroidResourceUtil.getReferredResourceField(facet,(PsiReferenceExpression)parent);
      }
    }
  }
  if (pair == null) {
    return null;
  }
  final String resClassName=pair.getFirst();
  final String resFieldName=pair.getSecond();
  final List<PsiElement> resourceList=facet.getLocalResourceManager().findResourcesByFieldName(resClassName,resFieldName);
  final PsiElement[] resources=resourceList.toArray(new PsiElement[resourceList.size()]);
  final PsiElement[] wrappedResources=new PsiElement[resources.length];
  for (int i=0; i < resources.length; i++) {
    final PsiElement resource=resources[i];
    if (resource instanceof XmlAttributeValue && resource instanceof PsiMetaOwner && resource instanceof NavigationItem) {
      wrappedResources[i]=new ValueResourceElementWrapper((XmlAttributeValue)resource);
    }
 else     if (resource instanceof PsiFile) {
      wrappedResources[i]=new FileResourceElementWrapper((PsiFile)resource);
    }
 else {
      wrappedResources[i]=resource;
    }
  }
  return wrappedResources.length > 0 ? wrappedResources : null;
}
