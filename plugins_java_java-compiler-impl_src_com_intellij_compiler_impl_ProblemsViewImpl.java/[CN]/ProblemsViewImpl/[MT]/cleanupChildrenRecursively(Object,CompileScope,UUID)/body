{
  final ErrorViewStructure structure=myPanel.getErrorViewStructure();
  for (  ErrorTreeElement element : structure.getChildElements(fromElement)) {
    if (element instanceof GroupingElement) {
      if (scope != null) {
        final VirtualFile file=((GroupingElement)element).getFile();
        if (file != null && !scope.belongs(file.getUrl())) {
          continue;
        }
      }
      if (!currentSessionId.equals(element.getData())) {
        structure.removeElement(element);
      }
 else {
        cleanupChildrenRecursively(element,scope,currentSessionId);
      }
    }
 else {
      if (!currentSessionId.equals(element.getData())) {
        structure.removeElement(element);
      }
    }
  }
}
