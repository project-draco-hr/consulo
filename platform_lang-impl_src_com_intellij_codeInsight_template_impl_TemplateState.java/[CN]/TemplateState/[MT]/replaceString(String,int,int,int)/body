{
  String oldText=myDocument.getCharsSequence().subSequence(start,end).toString();
  if (!oldText.equals(newValue)) {
    mySegments.setNeighboursGreedy(segmentNumber,false);
    myDocument.replaceString(start,end,newValue);
    int newEnd=start + newValue.length();
    mySegments.replaceSegmentAt(segmentNumber,start,newEnd);
    mySegments.setNeighboursGreedy(segmentNumber,true);
    fixOverlappedSegments(segmentNumber);
  }
}
