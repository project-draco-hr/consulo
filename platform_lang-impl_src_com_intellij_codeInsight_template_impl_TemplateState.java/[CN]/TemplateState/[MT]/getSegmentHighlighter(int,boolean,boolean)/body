{
  TextAttributes attributes=isSelected ? new TextAttributes(null,null,Color.red,EffectType.BOXED,Font.PLAIN) : new TextAttributes();
  TextAttributes endAttributes=new TextAttributes();
  int start=mySegments.getSegmentStart(segmentNumber);
  int end=mySegments.getSegmentEnd(segmentNumber);
  RangeHighlighter segmentHighlighter=myEditor.getMarkupModel().addRangeHighlighter(start,end,HighlighterLayer.LAST + 1,isEnd ? endAttributes : attributes,HighlighterTargetArea.EXACT_RANGE);
  segmentHighlighter.setGreedyToLeft(true);
  segmentHighlighter.setGreedyToRight(true);
  return segmentHighlighter;
}
