{
  final Editor editor=myEditor;
  fireBeforeTemplateFinished(brokenOff);
  if (!isDisposed()) {
    int oldVar=myCurrentVariableNumber;
    setCurrentVariableNumber(-1);
    currentVariableChanged(oldVar);
    TemplateManagerImpl.clearTemplateState(editor);
    fireTemplateFinished(brokenOff);
  }
  myListeners.clear();
  Disposer.dispose(this);
}
