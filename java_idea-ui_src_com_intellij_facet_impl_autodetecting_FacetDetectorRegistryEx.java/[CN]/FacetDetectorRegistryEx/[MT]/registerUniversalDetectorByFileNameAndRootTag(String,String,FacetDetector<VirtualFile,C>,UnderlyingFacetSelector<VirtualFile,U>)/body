{
  VirtualFilePattern fileNamePattern=PlatformPatterns.virtualFile().withName(StandardPatterns.string().equalTo(fileName));
  VirtualFilePattern wizardPattern=fileNamePattern.xmlWithRootTag(StandardPatterns.string().equalTo(rootTag));
  if (underlyingFacetSelector != null) {
    registerSubFacetDetectorForWizard(StdFileTypes.XML,wizardPattern,detector,underlyingFacetSelector);
  }
 else {
    registerDetectorForWizard(StdFileTypes.XML,wizardPattern,detector);
  }
  registerOnTheFlySubFacetDetector(StdFileTypes.XML,fileNamePattern,XmlPatterns.xmlFile().withRootTag(XmlPatterns.xmlTag().withName(rootTag)),convertDetector(detector),underlyingFacetSelector);
}
