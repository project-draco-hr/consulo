{
  final Document original=getOriginal();
  final Document copy=getCopy();
  if (original == null || copy == null)   return;
  UndoManager.getInstance(myProject).registerDocumentCopy(original,copy);
  beforeListenersAttached(original,copy);
  original.addDocumentListener(myOriginalListener);
  copy.addDocumentListener(myCopyListener);
  original.addPropertyChangeListener(myROListener);
}
