{
  if (scope.equals(expr)) {
    acc.add(expr);
    return;
  }
  for (  PsiElement child : scope.getChildren()) {
    if (!(child instanceof GrTypeDefinition) && !(child instanceof GrMethod && scope instanceof GroovyFile)) {
      Comparator<PsiElement> psiComparator=new Comparator<PsiElement>(){
        public int compare(        PsiElement psiElement,        PsiElement psiElement1){
          if (psiElement instanceof GrParameter && psiElement1 instanceof GrParameter && PsiEquivalenceUtil.areElementsEquivalent(psiElement,psiElement1)) {
            return 0;
          }
 else {
            return 1;
          }
        }
      }
;
      if (PsiEquivalenceUtil.areElementsEquivalent(child,expr,psiComparator,false)) {
        acc.add(child);
      }
 else {
        accumulateOccurences(expr,child,acc);
      }
    }
  }
}
