{
  VirtualFile[] allDirs=doGetDirectoriesByPackageName(packageName);
  if (includeLibrarySources) {
    return new FilteredQuery<VirtualFile>(new ArrayQuery<VirtualFile>(allDirs),myValidityCondition);
  }
 else {
    return new FilteredQuery<VirtualFile>(createQuery(allDirs),myValidityCondition);
  }
}
