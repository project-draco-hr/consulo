{
  final NewVirtualFileSystem delegate=getFileSystem();
  VirtualFile fake=new FakeVirtualFile(this,name);
  int attributes=delegate.getBooleanAttributes(fake,NewVirtualFileSystem.BA_EXISTS | NewVirtualFileSystem.BA_DIRECTORY);
  if ((attributes & NewVirtualFileSystem.BA_EXISTS) != 0) {
    final String realName=delegate.getCanonicallyCasedName(fake);
    boolean isDir=(attributes & NewVirtualFileSystem.BA_DIRECTORY) != 0;
    VFileCreateEvent event=new VFileCreateEvent(null,this,realName,isDir,true);
    RefreshQueue.getInstance().processSingleEvent(event);
    return findChild(realName);
  }
 else {
    return null;
  }
}
