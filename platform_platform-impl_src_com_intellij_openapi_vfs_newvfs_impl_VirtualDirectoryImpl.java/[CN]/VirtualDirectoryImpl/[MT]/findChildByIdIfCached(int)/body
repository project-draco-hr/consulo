{
  final VirtualFile[] a;
synchronized (this) {
    a=asArray();
  }
  if (a != null) {
    for (    VirtualFile file : a) {
      NewVirtualFile withId=(NewVirtualFile)file;
      if (withId.getId() == id)       return withId;
    }
    return null;
  }
synchronized (this) {
    final Map<String,VirtualFileSystemEntry> map=asMap();
    if (map != null) {
      for (      Map.Entry<String,VirtualFileSystemEntry> entry : map.entrySet()) {
        VirtualFile file=entry.getValue();
        if (file == NULL_VIRTUAL_FILE)         continue;
        NewVirtualFile withId=(NewVirtualFile)file;
        if (withId.getId() == id)         return withId;
      }
    }
  }
  return null;
}
