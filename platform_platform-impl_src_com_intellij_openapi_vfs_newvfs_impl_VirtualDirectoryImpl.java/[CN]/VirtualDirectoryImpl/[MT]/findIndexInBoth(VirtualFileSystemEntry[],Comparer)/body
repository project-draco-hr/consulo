{
  int high=array.length - 1;
  if (high == -1) {
    return pack(-1,-1);
  }
  int low=0;
  boolean startInSuspicious=isSuspiciousName(array[low]);
  boolean endInSuspicious=isSuspiciousName(array[high]);
  if (startInSuspicious == endInSuspicious) {
    int index=findIndexInOneHalf(array,low,high + 1,startInSuspicious,comparer);
    int otherIndex=startInSuspicious ? -1 : -array.length - 1;
    return startInSuspicious ? pack(otherIndex,index) : pack(index,otherIndex);
  }
  boolean suspicious=false;
  int cmp=-1;
  int mid=-1;
  int foundIndex=-1;
  while (low <= high) {
    mid=low + high >>> 1;
    VirtualFileSystemEntry file=array[mid];
    cmp=comparer.compareMyKeyTo(file);
    suspicious=isSuspiciousName(file);
    if (cmp == 0) {
      foundIndex=mid;
      break;
    }
    if ((suspicious || cmp <= 0) && (!suspicious || cmp >= 0)) {
      int indexInSuspicious=findIndexInOneHalf(array,mid + 1,high + 1,true,comparer);
      int indexInReal=findIndexInOneHalf(array,low,mid,false,comparer);
      return pack(indexInReal,indexInSuspicious);
    }
    if (cmp > 0) {
      low=mid + 1;
    }
 else {
      high=mid - 1;
    }
  }
  if (cmp != 0)   foundIndex=-low - 1;
  int newStart=suspicious ? low : mid + 1;
  int newEnd=suspicious ? mid + 1 : high + 1;
  int theOtherHalfIndex=newStart < newEnd ? findIndexInOneHalf(array,newStart,newEnd,!suspicious,comparer) : -newStart - 1;
  return suspicious ? pack(theOtherHalfIndex,foundIndex) : pack(foundIndex,theOtherHalfIndex);
}
