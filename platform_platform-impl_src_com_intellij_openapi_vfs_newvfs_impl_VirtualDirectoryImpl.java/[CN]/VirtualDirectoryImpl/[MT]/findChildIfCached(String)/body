{
  final VirtualFile[] a=asArray();
  if (a != null) {
    Object encoded=encodeName(name);
    byte[] bytes=encoded instanceof byte[] ? (byte[])encoded : null;
    for (    VirtualFile file : a) {
      if (namesEqual(name,bytes,file))       return (NewVirtualFile)file;
    }
    return null;
  }
  final Map<String,VirtualFile> map=asMap();
  if (map != null) {
    final VirtualFile file=map.get(name);
    return file instanceof NewVirtualFile ? (NewVirtualFile)file : null;
  }
  return null;
}
