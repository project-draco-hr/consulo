{
  final VirtualFile result=doFindChild(name,createIfNotFound,ensureCanonicalName);
  if (result == NullVirtualFile.INSTANCE) {
    return createIfNotFound ? createAndFindChildWithEventFire(name) : null;
  }
  if (result == null) {
synchronized (this) {
      Map<String,VirtualFile> map=asMap();
      if (map != null) {
        map.put(name,NullVirtualFile.INSTANCE);
      }
    }
  }
  return (NewVirtualFile)result;
}
