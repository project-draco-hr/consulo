{
  if (encoded != null && file instanceof VirtualFileSystemEntry) {
    Object o=((VirtualFileSystemEntry)file).rawName();
    if (!(o instanceof byte[]))     return false;
    if (encoded.length != ((byte[])o).length)     return false;
  }
  final String name2=file.getName();
  if (getFileSystem().isCaseSensitive()) {
    return name.equals(name2);
  }
  return name.equalsIgnoreCase(name2);
}
