{
  VirtualFileSystemEntry[] array=myChildren;
  final String childName=child.getName();
  final boolean ignoreCase=!getFileSystem().isCaseSensitive();
  long r=findIndexInBoth(array,getComparer(childName,ignoreCase));
  int indexInReal=(int)(r >> 32);
  int indexInAdopted=(int)r;
  if (indexInAdopted >= 0) {
    removeFromArray(indexInAdopted);
  }
  if (indexInReal < 0) {
    insertChildAt(child,indexInReal);
  }
  assertConsistency(myChildren,ignoreCase,child);
}
