{
  final String childName=child.getName();
  final boolean ignoreCase=!getFileSystem().isCaseSensitive();
synchronized (myData) {
    int indexInReal=findIndex(myData.myChildrenIds,childName,ignoreCase);
    myData.removeAdoptedName(childName);
    if (indexInReal < 0) {
      insertChildAt(child,indexInReal);
      ((PersistentFSImpl)PersistentFS.getInstance()).incStructuralModificationCount();
    }
    assertConsistency(ignoreCase,child);
  }
}
