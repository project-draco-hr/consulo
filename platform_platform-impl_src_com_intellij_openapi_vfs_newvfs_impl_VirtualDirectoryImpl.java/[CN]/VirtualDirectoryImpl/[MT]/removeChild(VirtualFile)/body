{
  boolean ignoreCase=!getFileSystem().isCaseSensitive();
  String name=file.getName();
  myChildren=ArrayUtil.remove(myChildren,(VirtualFileSystemEntry)file,new ArrayFactory<VirtualFileSystemEntry>(){
    @Override public VirtualFileSystemEntry[] create(    int count){
      return new VirtualFileSystemEntry[count];
    }
  }
);
  addToAdoptedChildren(name,ignoreCase);
  assertConsistency(myChildren,ignoreCase,file);
}
