{
  if (IS_UNIT_TESTS && ApplicationManager.getApplication() instanceof ApplicationImpl && ((ApplicationImpl)ApplicationManager.getApplication()).isComponentsCreated()) {
    NewVirtualFileSystem fileSystem=child.getFileSystem();
    if (fileSystem != LocalFileSystem.getInstance() && fileSystem != JarFileSystem.getInstance()) {
      return;
    }
    if (child.getParent() == null || child.getParent().getParent() == null)     return;
    Set<String> allowed=allowedRoots();
    boolean isUnder=allowed == null;
    if (!isUnder) {
      for (      String root : allowed) {
        String childPath=child.getPath();
        if (child.getFileSystem() == JarFileSystem.getInstance()) {
          VirtualFile local=JarFileSystem.getInstance().getVirtualFileForJar(child);
          childPath=local.getPath();
        }
        if (FileUtil.startsWith(childPath,root)) {
          isUnder=true;
          break;
        }
        if (root.startsWith(JarFileSystem.PROTOCOL_PREFIX)) {
          String rootLocalPath=FileUtil.toSystemIndependentName(PathUtil.toPresentableUrl(root));
          isUnder=FileUtil.startsWith(childPath,rootLocalPath);
          if (isUnder)           break;
        }
      }
    }
    if (!isUnder) {
      if (!allowed.isEmpty()) {
      }
    }
  }
}
