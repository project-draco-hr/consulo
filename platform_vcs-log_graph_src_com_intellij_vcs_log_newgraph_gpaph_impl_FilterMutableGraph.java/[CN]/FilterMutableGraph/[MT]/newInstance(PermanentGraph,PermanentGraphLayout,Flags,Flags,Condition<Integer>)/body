{
  for (int i=0; i < permanentGraph.nodesCount(); i++) {
    if (isVisibleNode.value(i) && !visibleNodesInBranches.get(i))     LOG.debug("Filter give me commit, which hidden in current branches visibility; commitHashIndex: " + permanentGraph.getHashIndex(i));
    visibleNodes.set(i,isVisibleNode.value(i));
  }
  UpdatableIntToIntMap visibleToReal=ListIntToIntMap.newInstance(new BooleanFunction<Integer>(){
    @Override public boolean fun(    Integer integer){
      return visibleNodes.get(integer);
    }
  }
,permanentGraph.nodesCount());
  return new FilterMutableGraph(permanentGraph,layout,isVisibleNode,visibleToReal,visibleNodes);
}
