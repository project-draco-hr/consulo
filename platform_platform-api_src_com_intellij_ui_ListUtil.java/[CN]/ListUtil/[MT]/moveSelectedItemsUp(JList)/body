{
  DefaultListModel model=getModel(list);
  int[] indices=list.getSelectedIndices();
  if (!canMoveSelectedItemsUp(list))   return 0;
  for (int i=0; i < indices.length; i++) {
    int index=indices[i];
    Object temp=model.get(index);
    model.set(index,model.get(index - 1));
    model.set(index - 1,temp);
    list.removeSelectionInterval(index,index);
    list.addSelectionInterval(index - 1,index - 1);
  }
  Rectangle cellBounds=list.getCellBounds(indices[0] - 1,indices[indices.length - 1] - 1);
  if (cellBounds != null) {
    list.scrollRectToVisible(cellBounds);
  }
  return indices.length;
}
