{
  final LeafElement newElement;
  if (table != null) {
    newElement=Factory.createLeafElement(type,buffer,startOffset,endOffset,-1,table);
    newElement.putUserData(CharTable.CHAR_TABLE_KEY,table);
  }
 else {
    final FileElement holderElement=new DummyHolder(manager,null,table).getTreeElement();
    newElement=Factory.createLeafElement(type,buffer,startOffset,endOffset,-1,holderElement.getCharTable());
    TreeUtil.addChildren(holderElement,newElement);
  }
  return newElement;
}
