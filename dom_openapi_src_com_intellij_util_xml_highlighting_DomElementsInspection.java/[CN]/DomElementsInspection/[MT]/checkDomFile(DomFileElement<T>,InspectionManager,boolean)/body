{
  final Project project=manager.getProject();
  final DomElementAnnotationsManager annotationsManager=DomElementAnnotationsManager.getInstance(project);
  final DomElementsProblemsHolder problemsHolder=annotationsManager.getProblemHolder(domFileElement);
  List<ProblemDescriptor> problems=ContainerUtil.concat(problemsHolder.getAllProblems(this),new Function<DomElementProblemDescriptor,Collection<? extends ProblemDescriptor>>(){
    public Collection<ProblemDescriptor> fun(    final DomElementProblemDescriptor s){
      return annotationsManager.createProblemDescriptors(manager,s);
    }
  }
);
  return problems.toArray(new ProblemDescriptor[problems.size()]);
}
