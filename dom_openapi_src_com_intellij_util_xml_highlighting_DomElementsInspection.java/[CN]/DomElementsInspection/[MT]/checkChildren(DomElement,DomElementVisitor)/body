{
  final XmlElement xmlElement=element.getXmlElement();
  if (xmlElement instanceof XmlTag) {
    final Set<XmlElement> visited=new THashSet<XmlElement>();
    XmlTag tag=(XmlTag)xmlElement;
    final DomManager domManager=element.getManager();
    for (    final XmlAttribute attribute : tag.getAttributes()) {
      final GenericAttributeValue value=domManager.getDomElement(attribute);
      if (value != null) {
        visited.add(attribute);
        value.accept(visitor);
      }
    }
    for (    final XmlTag subTag : tag.getSubTags()) {
      final DomElement child=domManager.getDomElement(subTag);
      if (child != null) {
        visited.add(subTag);
        child.accept(visitor);
      }
    }
    for (    final AbstractDomChildrenDescription description : element.getGenericInfo().getChildrenDescriptions()) {
      if (description.getAnnotation(Required.class) != null) {
        for (        final DomElement child : description.getValues(element)) {
          if (!visited.contains(child.getXmlElement())) {
            child.accept(visitor);
          }
        }
      }
    }
  }
}
