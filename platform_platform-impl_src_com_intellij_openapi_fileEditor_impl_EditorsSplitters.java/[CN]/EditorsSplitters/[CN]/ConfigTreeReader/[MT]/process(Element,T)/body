{
  if (element == null) {
    return null;
  }
  final Element splitterElement=element.getChild("splitter");
  if (splitterElement != null) {
    final Element first=splitterElement.getChild("split-first");
    final Element second=splitterElement.getChild("split-second");
    return processSplitter(splitterElement,first,second,context);
  }
  final Element leaf=element.getChild("leaf");
  if (leaf == null) {
    return null;
  }
  List<Element> fileElements=leaf.getChildren("file");
  final List<Element> children=new ArrayList<>(fileElements.size());
  int toRemove=fileElements.size() - UISettings.getInstance().EDITOR_TAB_LIMIT;
  for (  Element fileElement : fileElements) {
    if (toRemove <= 0 || Boolean.valueOf(fileElement.getAttributeValue(PINNED)).booleanValue()) {
      children.add(fileElement);
    }
 else {
      toRemove--;
    }
  }
  return processFiles(children,context);
}
