{
  final Window frame=SwingUtilities.getWindowAncestor(this);
  if (frame instanceof IdeFrameImpl) {
    final Project project=((IdeFrameImpl)frame).getProject();
    if (project != null) {
      if (!project.isInitialized())       return true;
      ToolWindow toolWindow=ToolWindowManager.getInstance(project).getToolWindow(ToolWindowId.PROJECT_VIEW);
      return toolWindow != null && toolWindow.isVisible();
    }
  }
  return false;
}
