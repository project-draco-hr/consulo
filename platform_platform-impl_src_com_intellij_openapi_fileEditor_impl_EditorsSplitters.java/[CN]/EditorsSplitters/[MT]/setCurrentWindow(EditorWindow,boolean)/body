{
  final EditorWithProviderComposite newEditor=window != null ? window.getSelectedEditor() : null;
  Runnable fireRunnable=new Runnable(){
    public void run(){
      getManager().fireSelectionChanged(newEditor);
    }
  }
;
  setCurrentWindow(window);
  getManager().updateFileName(window == null ? null : window.getSelectedFile());
  if (window != null) {
    final EditorWithProviderComposite selectedEditor=myCurrentWindow.getSelectedEditor();
    if (selectedEditor != null) {
      fireRunnable.run();
    }
    if (requestFocus) {
      window.requestFocus(true);
    }
  }
 else {
    fireRunnable.run();
  }
}
