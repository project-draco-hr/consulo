{
  final Element fileElement=new Element("file");
  fileElement.setAttribute("leaf-file-name",file.getName());
  final HistoryEntry entry=composite.currentStateAsHistoryEntry();
  entry.writeExternal(fileElement,getManager().getProject());
  fileElement.setAttribute(PINNED,Boolean.toString(pinned));
  fileElement.setAttribute("current",Boolean.toString(composite.equals(getManager().getLastSelected())));
  fileElement.setAttribute("current-in-tab",Boolean.toString(composite.equals(selectedEditor)));
  res.addContent(fileElement);
}
