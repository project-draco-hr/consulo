{
  final Component comp=panel.getComponent(0);
  if (comp instanceof Splitter) {
    final Splitter splitter=(Splitter)comp;
    final Element res=new Element("splitter");
    res.setAttribute("split-orientation",splitter.getOrientation() ? "vertical" : "horizontal");
    res.setAttribute("split-proportion",Float.toString(splitter.getProportion()));
    final Element first=new Element("split-first");
    first.addContent(writePanel((JPanel)splitter.getFirstComponent()));
    final Element second=new Element("split-second");
    second.addContent(writePanel((JPanel)splitter.getSecondComponent()));
    res.addContent(first);
    res.addContent(second);
    return res;
  }
 else   if (comp instanceof JBTabs) {
    final Element res=new Element("leaf");
    Integer limit=UIUtil.getClientProperty(((JBTabs)comp).getComponent(),JBTabsImpl.SIDE_TABS_SIZE_LIMIT_KEY);
    if (limit != null) {
      res.setAttribute(JBTabsImpl.SIDE_TABS_SIZE_LIMIT_KEY.toString(),String.valueOf(limit));
    }
    writeWindow(res,findWindowWith(comp));
    return res;
  }
 else   if (comp instanceof EditorWindow.TCompForTablessMode) {
    EditorWithProviderComposite composite=((EditorWindow.TCompForTablessMode)comp).myEditor;
    Element res=new Element("leaf");
    res.addContent(writeComposite(composite.getFile(),composite,false,composite));
    return res;
  }
 else {
    LOG.error(comp != null ? comp.getClass().getName() : null);
    return null;
  }
}
