{
  final Ref<String> packageNameRef=Ref.create(null);
  NanoXmlUtil.parse(manifestFile.getInputStream(),new NanoXmlUtil.BaseXmlBuilder(){
    @Override public void addAttribute(    String key,    String nsPrefix,    String nsURI,    String value,    String type) throws Exception {
      super.addAttribute(key,nsPrefix,nsURI,value,type);
      if (AndroidCommonUtils.PACKAGE_MANIFEST_ATTRIBUTE.equals(key) && MANIFEST_LOCATION.equals(getLocation())) {
        packageNameRef.set(value);
        stop();
      }
    }
    @Override public void elementAttributesProcessed(    String name,    String nsPrefix,    String nsURI) throws Exception {
      super.elementAttributesProcessed(name,nsPrefix,nsURI);
      stop();
    }
  }
);
  return packageNameRef.get();
}
