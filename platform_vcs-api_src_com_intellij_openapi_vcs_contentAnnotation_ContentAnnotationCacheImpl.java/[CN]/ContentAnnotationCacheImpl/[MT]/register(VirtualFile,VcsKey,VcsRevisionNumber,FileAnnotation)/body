{
  final HistoryCacheWithRevisionKey key=new HistoryCacheWithRevisionKey(VcsContextFactory.SERVICE.getInstance().createFilePathOn(vf),vcsKey,number);
synchronized (myLock) {
    if (myCache.get(key) != null)     return;
  }
  final long absoluteLimit=System.currentTimeMillis() - VcsContentAnnotationSettings.ourAbsoluteLimit;
  final TreeMap<Integer,Long> map=new TreeMap<Integer,Long>();
  final int lineCount=fa.getLineCount();
  for (int i=0; i < lineCount; i++) {
    Date lineDate=fa.getLineDate(i);
    if (lineDate == null)     return;
    if (lineDate.getTime() >= absoluteLimit)     map.put(i,lineDate.getTime());
  }
synchronized (myLock) {
    myCache.put(key,map);
  }
}
