{
  final PsiTryStatement tryStatement=(PsiTryStatement)element.getParent();
  final PsiResourceList resourceList=tryStatement.getResourceList();
  if (resourceList == null) {
    return;
  }
  @NonNls final StringBuilder newTryStatementText=new StringBuilder();
  final List<PsiResourceVariable> variables=resourceList.getResourceVariables();
  boolean braces=false;
  for (  PsiResourceVariable variable : variables) {
    if (braces) {
      newTryStatementText.append("{\n");
    }
 else {
      braces=true;
    }
    newTryStatementText.append("try (").append(variable.getText()).append(")");
  }
  final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
  if (tryBlock == null) {
    return;
  }
  newTryStatementText.append(tryBlock.getText());
  for (int i=1; i < variables.size(); i++) {
    newTryStatementText.append("\n}");
  }
  final PsiCatchSection[] catchSections=tryStatement.getCatchSections();
  for (  PsiCatchSection catchSection : catchSections) {
    newTryStatementText.append(catchSection.getText());
  }
  replaceStatement(newTryStatementText.toString(),tryStatement);
}
