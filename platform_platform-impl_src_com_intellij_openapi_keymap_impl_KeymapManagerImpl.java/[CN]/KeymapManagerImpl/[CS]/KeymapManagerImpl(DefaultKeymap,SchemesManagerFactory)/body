{
  mySchemesManager=factory.createSchemesManager(KEYMAPS_DIR_PATH,new BaseSchemeProcessor<KeymapImpl>(){
    @Override public KeymapImpl readScheme(    @NotNull final Document schemeContent) throws InvalidDataException {
      return readKeymap(schemeContent);
    }
    @Override public Element writeScheme(    @NotNull final KeymapImpl scheme){
      return scheme.writeExternal();
    }
    @Override public boolean shouldBeSaved(    @NotNull final KeymapImpl scheme){
      return scheme.canModify();
    }
  }
,RoamingType.PER_USER);
  Keymap[] keymaps=defaultKeymap.getKeymaps();
  for (  Keymap keymap : keymaps) {
    addKeymap(keymap);
    String systemDefaultKeymap=defaultKeymap.getDefaultKeymapName();
    if (systemDefaultKeymap.equals(keymap.getName())) {
      setActiveKeymap(keymap);
    }
  }
  mySchemesManager.loadSchemes();
  ourKeymapManagerInitialized=true;
}
