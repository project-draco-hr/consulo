{
  mySchemesManager=factory.createSchemesManager("$ROOT_CONFIG$/keymaps",new BaseSchemeProcessor<KeymapImpl>(){
    @Override public KeymapImpl readScheme(    @NotNull final Document schemeContent) throws InvalidDataException, IOException, JDOMException {
      return readKeymap(schemeContent);
    }
    @Override public Parent writeScheme(    @NotNull final KeymapImpl scheme) throws WriteExternalException {
      return scheme.writeExternal();
    }
    @Override public boolean shouldBeSaved(    @NotNull final KeymapImpl scheme){
      return scheme.canModify();
    }
  }
,RoamingType.PER_USER);
  Keymap[] keymaps=defaultKeymap.getKeymaps();
  for (  Keymap keymap : keymaps) {
    addKeymap(keymap);
    String systemDefaultKeymap=defaultKeymap.getDefaultKeymapName();
    if (systemDefaultKeymap.equals(keymap.getName())) {
      setActiveKeymap(keymap);
    }
  }
  load();
  ourKeymapManagerInitialized=true;
}
