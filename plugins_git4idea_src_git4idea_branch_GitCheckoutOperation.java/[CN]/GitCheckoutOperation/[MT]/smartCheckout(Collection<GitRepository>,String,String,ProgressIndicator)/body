{
  final GitChangesSaver saver=configureSaver(reference,indicator);
  final AtomicBoolean result=new AtomicBoolean();
  GitComplexProcess.Operation checkoutOperation=new GitComplexProcess.Operation(){
    @Override public void run(    ContinuationContext context){
      boolean savedSuccessfully=save(repositories,saver);
      if (savedSuccessfully) {
        try {
          result.set(checkoutOrNotify(repositories,reference,newBranch));
        }
  finally {
          saver.restoreLocalChanges(context);
        }
      }
    }
  }
;
  GitComplexProcess.execute(myProject,"checkout",checkoutOperation);
  return result.get();
}
