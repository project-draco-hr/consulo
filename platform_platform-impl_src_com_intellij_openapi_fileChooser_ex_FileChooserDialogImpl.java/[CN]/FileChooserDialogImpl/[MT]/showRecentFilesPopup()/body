{
  final JBList files=new JBList(getRecentFiles()){
    @Override public Dimension getPreferredSize(){
      return new Dimension(myPathTextField.getField().getWidth(),super.getPreferredSize().height);
    }
  }
;
  files.setCellRenderer(new ColoredListCellRenderer(){
    @Override protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      final String path=value.toString();
      append(path);
      final VirtualFile file=LocalFileSystem.getInstance().findFileByIoFile(new File(path));
      if (file != null) {
        setIcon(IconUtil.getIcon(file,Iconable.ICON_FLAG_READ_STATUS,null));
      }
    }
  }
);
  JBPopupFactory.getInstance().createListPopupBuilder(files).setItemChoosenCallback(new Runnable(){
    @Override public void run(){
      myPathTextField.getField().setText(files.getSelectedValue().toString());
    }
  }
).createPopup().showUnderneathOf(myPathTextField.getField());
}
