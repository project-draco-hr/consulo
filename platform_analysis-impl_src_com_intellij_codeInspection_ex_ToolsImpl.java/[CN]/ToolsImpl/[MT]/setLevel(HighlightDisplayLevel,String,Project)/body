{
  if (scopeName == null) {
    myDefaultState.setLevel(level);
  }
 else {
    if (myTools == null) {
      return;
    }
    ScopeToolState scopeToolState=null;
    int index=-1;
    for (int i=0; i < myTools.size(); i++) {
      ScopeToolState tool=myTools.get(i);
      if (scopeName.equals(tool.getScopeName())) {
        scopeToolState=tool;
        myTools.remove(tool);
        index=i;
        break;
      }
    }
    if (index < 0) {
      throw new IllegalStateException("Scope " + scopeName + " not found");
    }
    final InspectionToolWrapper toolWrapper=scopeToolState.getTool();
    final NamedScope scope=scopeToolState.getScope(project);
    if (scope != null) {
      myTools.add(index,new ScopeToolState(scope,toolWrapper,scopeToolState.isEnabled(),level));
    }
 else {
      myTools.add(index,new ScopeToolState(scopeToolState.getScopeName(),toolWrapper,scopeToolState.isEnabled(),level));
    }
  }
}
