{
  if (library != null) {
    for (    JpsLibraryRoot root : library.getRoots(JpsOrderRootType.COMPILED)) {
      final File file=JpsPathUtil.urlToFile(root.getUrl());
switch (root.getInclusionOptions()) {
case ROOT_ITSELF:
        classpath.add(file);
      break;
case ARCHIVES_UNDER_ROOT:
    collectArchives(file,false,classpath);
  break;
case ARCHIVES_UNDER_ROOT_RECURSIVELY:
collectArchives(file,true,classpath);
break;
}
}
}
}
