{
  File customOutput=(forTests ? myCustomModuleTestOutputDir : myCustomModuleOutputDir).get(module);
  if (customOutput != null) {
    return customOutput;
  }
  if (myProjectTargetDir != null) {
    final File basePath=new File(myProjectTargetDir,forTests ? "test" : "production");
    return new File(basePath,module.getName());
  }
  final String path=forTests ? module.getTestOutputPath() : module.getOutputPath();
  return path != null ? new File(path) : null;
}
