{
  final Document document=getLanguageConsole().getCurrentEditor().getDocument();
  final String documentText=document.getText();
  final TextRange range=new TextRange(0,document.getTextLength());
  getLanguageConsole().getCurrentEditor().getSelectionModel().setSelection(range.getStartOffset(),range.getEndOffset());
  getLanguageConsole().addCurrentToHistory(range,false);
  getLanguageConsole().setInputText("");
  final String line=documentText;
  if (!StringUtil.isEmptyOrSpaces(line)) {
    myHistory.addToHistory(line);
  }
  final String text2send=line.length() == 0 ? "\n\n" : line + "\n";
  sendInput(text2send);
}
