{
  mxGraph oldValue=graph;
  if (graph != null) {
    graph.removeListener(repaintHandler);
    graph.getModel().removeListener(updateHandler);
    graph.getView().removeListener(updateHandler);
    graph.removePropertyChangeListener(viewChangeHandler);
    graph.getView().removeListener(scaleHandler);
  }
  graph=value;
  graph.addListener(mxEvent.REPAINT,repaintHandler);
  graph.getModel().addListener(mxEvent.CHANGE,updateHandler);
  mxGraphView view=graph.getView();
  view.addListener(mxEvent.SCALE,updateHandler);
  view.addListener(mxEvent.TRANSLATE,updateHandler);
  view.addListener(mxEvent.SCALE_AND_TRANSLATE,updateHandler);
  view.addListener(mxEvent.UP,updateHandler);
  view.addListener(mxEvent.DOWN,updateHandler);
  graph.addPropertyChangeListener(viewChangeHandler);
  graph.getView().addListener(mxEvent.SCALE,scaleHandler);
  graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,scaleHandler);
  updateHandler.invoke(graph.getView(),null);
  firePropertyChange("graph",oldValue,graph);
}
