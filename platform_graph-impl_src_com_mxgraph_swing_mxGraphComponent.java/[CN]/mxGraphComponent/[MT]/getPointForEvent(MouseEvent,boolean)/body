{
  double s=graph.getView().getScale();
  mxPoint tr=graph.getView().getTranslate();
  double off=(addOffset) ? graph.getGridSize() / 2 : 0;
  double x=graph.snap(e.getX() / s - tr.getX() - off);
  double y=graph.snap(e.getY() / s - tr.getY() - off);
  return new mxPoint(x,y);
}
