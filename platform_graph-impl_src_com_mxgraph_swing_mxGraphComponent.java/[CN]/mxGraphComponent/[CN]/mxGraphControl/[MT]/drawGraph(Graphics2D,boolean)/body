{
  Graphics2D previousGraphics=canvas.getGraphics();
  boolean previousDrawLabels=canvas.isDrawLabels();
  Point previousTranslate=canvas.getTranslate();
  double previousScale=canvas.getScale();
  try {
    canvas.setScale(graph.getView().getScale());
    canvas.setDrawLabels(drawLabels);
    canvas.setTranslate(0,0);
    canvas.setGraphics(g);
    drawFromRootCell();
  }
  finally {
    canvas.setScale(previousScale);
    canvas.setTranslate(previousTranslate.x,previousTranslate.y);
    canvas.setDrawLabels(previousDrawLabels);
    canvas.setGraphics(previousGraphics);
  }
}
