{
  XmlContentDFA contentDFA=XmlContentDFA.getContentDFA(contextTag);
  PsiElement anchor=null;
  int offset=editor.getCaretModel().getOffset();
  if (contentDFA != null) {
    for (    XmlTag subTag : contextTag.getSubTags()) {
      if (contentDFA.getPossibleElements().contains(selected)) {
        if (subTag.getTextOffset() > offset) {
          break;
        }
        anchor=subTag;
      }
      contentDFA.transition(subTag);
    }
  }
  return anchor;
}
