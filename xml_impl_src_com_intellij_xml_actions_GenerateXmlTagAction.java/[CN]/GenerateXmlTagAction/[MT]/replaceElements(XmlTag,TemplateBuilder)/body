{
  for (  XmlAttribute attribute : newTag.getAttributes()) {
    XmlAttributeValue value=attribute.getValueElement();
    builder.replaceElement(value,TextRange.from(1,0),new MacroCallNode(new CompleteMacro()));
  }
  for (  XmlTag tag : newTag.getSubTags()) {
    if ("<".equals(tag.getText())) {
      builder.replaceElement(tag,TextRange.from(1,0),new MacroCallNode(new CompleteSmartMacro()));
    }
 else     if (tag.getSubTags().length > 0) {
      replaceElements(tag,builder);
    }
 else {
      int i=tag.getText().indexOf("></");
      if (i > 0) {
        builder.replaceElement(tag,TextRange.from(i + 1,0),new MacroCallNode(new CompleteMacro()));
      }
    }
  }
}
