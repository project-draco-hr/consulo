{
  XmlElementDescriptor selected=newTag.getDescriptor();
  if (selected == null)   return newTag;
switch (selected.getContentType()) {
case XmlElementDescriptor.CONTENT_TYPE_EMPTY:
    newTag.collapseIfEmpty();
  break;
case XmlElementDescriptor.CONTENT_TYPE_MIXED:
newTag.getValue().setText("");
}
XmlElementsGroup topGroup=selected.getTopGroup();
if (topGroup == null) return newTag;
List<XmlElementDescriptor> tags=new ArrayList<XmlElementDescriptor>();
computeRequiredSubTags(topGroup,tags);
for (XmlElementDescriptor descriptor : tags) {
if (descriptor == null) {
XmlTag tag=XmlElementFactory.getInstance(newTag.getProject()).createTagFromText("<",newTag.getLanguage());
newTag.addSubTag(tag,false);
}
 else {
XmlTag subTag=newTag.addSubTag(createTag(newTag,descriptor),false);
generateRaw(subTag);
}
}
return newTag;
}
