{
  PsiElement element=file.findElementAt(editor.getCaretModel().getOffset());
  XmlTag tag=null;
  if (element != null) {
    tag=PsiTreeUtil.getParentOfType(element,XmlTag.class);
  }
  if (tag == null) {
    tag=((XmlFile)file).getRootTag();
  }
  try {
    if (tag == null) {
      throw new CommonRefactoringUtil.RefactoringErrorHintException("Caret should be positioned inside a tag");
    }
    XmlElementsGroup topGroup=tag.getDescriptor().getTopGroup();
    if (topGroup == null) {
      throw new CommonRefactoringUtil.RefactoringErrorHintException("XML Schema does not provide enough information to generate tags");
    }
  }
 catch (  CommonRefactoringUtil.RefactoringErrorHintException e) {
    HintManager.getInstance().showErrorHint(editor,e.getMessage());
  }
}
