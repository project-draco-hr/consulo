def samedevice(fpath1, fpath2):
    'Returns whether fpath1 and fpath2 are on the same device. This is only\n    guaranteed to work for files, not directories.'
    res1 = _getfileinfo(fpath1)
    res2 = _getfileinfo(fpath2)
    if ((res1 is not None) and (res2 is not None)):
        return (res1[4] == res2[4])
    else:
        return False
