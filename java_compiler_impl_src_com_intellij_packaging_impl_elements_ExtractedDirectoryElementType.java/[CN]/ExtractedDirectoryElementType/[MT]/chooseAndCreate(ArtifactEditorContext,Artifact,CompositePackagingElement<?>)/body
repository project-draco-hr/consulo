{
  final FileChooserDescriptor descriptor=new FileChooserDescriptor(false,true,true,false,true,true){
    @Override public boolean isFileSelectable(    VirtualFile file){
      if (file.isInLocalFileSystem() && file.isDirectory())       return false;
      return super.isFileSelectable(file);
    }
  }
;
  final FileChooserDialog chooser=FileChooserFactory.getInstance().createFileChooser(descriptor,context.getProject());
  final VirtualFile[] files=chooser.choose(null,context.getProject());
  final List<ExtractedDirectoryPackagingElement> list=new ArrayList<ExtractedDirectoryPackagingElement>();
  for (  VirtualFile file : files) {
    final String fullPath=file.getPath();
    final int jarEnd=fullPath.indexOf(JarFileSystem.JAR_SEPARATOR);
    list.add(new ExtractedDirectoryPackagingElement(fullPath.substring(0,jarEnd),fullPath.substring(jarEnd + 1)));
  }
  return list;
}
