{
  myMergeContext=context;
  myMergeRequest=request;
  MergeUtil.ProxyDiffContext diffContext=new MergeUtil.ProxyDiffContext(myMergeContext);
  VirtualFile file=FileDocumentManager.getInstance().getFile(myMergeRequest.getDocument());
  final DiffContentFactory contentFactory=DiffContentFactory.getInstance();
  final DocumentContent localContent=contentFactory.create(myMergeRequest.getLocalContent(),file);
  final DocumentContent mergedContent=contentFactory.create(myMergeRequest.getProject(),myMergeRequest.getDocument());
  SimpleDiffRequest diffRequest=new SimpleDiffRequest(myMergeRequest.getTitle(),localContent,mergedContent,myMergeRequest.getLocalTitle(),myMergeRequest.getPatchedTitle());
  DiffUtil.addNotification(new DiffIsApproximateNotification(),diffRequest);
  myViewer=new SimpleDiffViewer(diffContext,diffRequest);
}
