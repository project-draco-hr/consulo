{
  final FileType fileType=myFile.getFileType();
  if (fileType instanceof AbstractFileType) {
    return ((AbstractFileType)fileType).getCommenter();
  }
  int offset=myDocument.getLineStartOffset(line);
  offset=CharArrayUtil.shiftForward(myDocument.getCharsSequence(),offset," \t");
  final FileViewProvider viewProvider=myFile.getViewProvider();
  final Language language=PsiUtilBase.getLanguageAtOffset(myFile,offset);
  if (viewProvider instanceof TemplateLanguageFileViewProvider && language == ((TemplateLanguageFileViewProvider)viewProvider).getTemplateDataLanguage()) {
    return LanguageCommenters.INSTANCE.forLanguage(viewProvider.getBaseLanguage());
  }
  final Commenter commenter=LanguageCommenters.INSTANCE.forLanguage(language);
  return commenter == null ? LanguageCommenters.INSTANCE.forLanguage(viewProvider.getBaseLanguage()) : commenter;
}
