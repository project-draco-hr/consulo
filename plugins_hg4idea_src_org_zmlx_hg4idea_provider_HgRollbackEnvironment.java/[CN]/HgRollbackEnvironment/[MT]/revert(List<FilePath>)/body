{
  VcsDirtyScopeManager dirtyScopeManager=VcsDirtyScopeManager.getInstance(project);
  HgWorkingCopyRevisionsCommand identifyCommand=new HgWorkingCopyRevisionsCommand(project);
  HgRevertCommand revertCommand=new HgRevertCommand(project);
  HgResolveCommand resolveCommand=new HgResolveCommand(project);
  for (  Map.Entry<VirtualFile,Collection<FilePath>> entry : HgUtil.groupFilePathsByHgRoots(project,filePaths).entrySet()) {
    final VirtualFile repo=entry.getKey();
    final Collection<FilePath> files=entry.getValue();
    HgRevisionNumber revisionNumber=identifyCommand.firstParent(repo);
    revertCommand.execute(repo,files,revisionNumber,false);
    resolveCommand.markResolved(repo,files);
  }
}
