{
  for (  Map.Entry<VirtualFile,Collection<FilePath>> entry : HgUtil.groupFilePathsByHgRoots(project,filePaths).entrySet()) {
    final VirtualFile repo=entry.getKey();
    final Collection<FilePath> files=entry.getValue();
    HgRevisionNumber revisionNumber=new HgWorkingCopyRevisionsCommand(project).firstParent(repo);
    new HgRevertCommand(project).execute(repo,files,revisionNumber,false);
    new HgResolveCommand(project).markResolved(repo,files);
  }
}
