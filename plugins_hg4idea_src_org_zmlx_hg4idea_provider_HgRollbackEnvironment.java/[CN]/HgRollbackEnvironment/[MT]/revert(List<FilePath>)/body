{
  VcsDirtyScopeManager dirtyScopeManager=VcsDirtyScopeManager.getInstance(project);
  HgWorkingCopyRevisionsCommand identifyCommand=new HgWorkingCopyRevisionsCommand(project);
  HgRevertCommand revertCommand=new HgRevertCommand(project);
  HgResolveCommand resolveCommand=new HgResolveCommand(project);
  for (  FilePath filePath : filePaths) {
    VirtualFile vcsRoot=VcsUtil.getVcsRootFor(project,filePath);
    if (vcsRoot == null) {
      continue;
    }
    HgFile hgFile=new HgFile(vcsRoot,filePath);
    HgRevisionNumber revisionNumber=identifyCommand.firstParent(vcsRoot);
    revertCommand.execute(hgFile,revisionNumber,false);
    resolveCommand.markResolved(vcsRoot,filePath);
    dirtyScopeManager.dirDirtyRecursively(filePath.getParentPath());
  }
}
