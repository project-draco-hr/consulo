{
  if (changes == null || changes.isEmpty()) {
    return;
  }
  List<FilePath> toDelete=new ArrayList<FilePath>();
  List<FilePath> filePaths=new LinkedList<FilePath>();
  for (  Change change : changes) {
    ContentRevision contentRevision;
    if (Change.Type.DELETED == change.getType()) {
      contentRevision=change.getBeforeRevision();
    }
 else {
      contentRevision=change.getAfterRevision();
    }
    if (contentRevision != null) {
      filePaths.add(contentRevision.getFile());
      if (Change.Type.MOVED == change.getType()) {
        toDelete.add(contentRevision.getFile());
      }
    }
  }
  revert(filePaths);
  for (  FilePath file : toDelete) {
    listener.accept(file);
    try {
      final File ioFile=file.getIOFile();
      if (ioFile.exists()) {
        if (!ioFile.delete()) {
          vcsExceptions.add(new VcsException("Unable to delete file: " + file));
        }
      }
    }
 catch (    Exception e) {
      vcsExceptions.add(new VcsException("Unable to delete file: " + file,e));
    }
  }
}
