{
  ArrayList result=new ArrayList();
  Collection<File> parents=collectAllParents();
  Map<File,DirectoryObject> parentsMap=new com.intellij.util.containers.HashMap<File,DirectoryObject>();
  for (Iterator iterator=parents.iterator(); iterator.hasNext(); ) {
    File file=(File)iterator.next();
    String relativeFileName=file.getPath().replace(File.separatorChar,'/');
    if (!StringUtil.startsWithChar(relativeFileName,'/'))     relativeFileName="/" + relativeFileName;
    parentsMap.put(file,DirectoryObject.createInstance(relativeFileName));
  }
  for (Iterator iterator=myFileToEntryMap.keySet().iterator(); iterator.hasNext(); ) {
    File file=(File)iterator.next();
    result.add(FileObject.createInstance(parentsMap.get(file.getParentFile()),"/" + file.getName()));
  }
  return (AbstractFileObject[])result.toArray(new AbstractFileObject[result.size()]);
}
