{
  ArrayList<AbstractFileObject> result=new ArrayList<AbstractFileObject>();
  Collection<File> parents=collectAllParents();
  Map<File,DirectoryObject> parentsMap=new com.intellij.util.containers.HashMap<File,DirectoryObject>();
  for (  final File file : parents) {
    String relativeFileName=file.getPath().replace(File.separatorChar,'/');
    if (!StringUtil.startsWithChar(relativeFileName,'/'))     relativeFileName="/" + relativeFileName;
    parentsMap.put(file,DirectoryObject.createInstance(relativeFileName));
  }
  for (  final File file : myFileToEntryMap.keySet()) {
    result.add(FileObject.createInstance(parentsMap.get(file.getParentFile()),"/" + file.getName()));
  }
  return result.toArray(new AbstractFileObject[result.size()]);
}
