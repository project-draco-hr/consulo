{
  final PsiCallExpression preparedKey=contextCall.getCopyableUserData(PsiResolveHelperImpl.CALL_EXPRESSION_KEY);
  final JavaResolveResult[] results;
  if (preparedKey != null) {
    Map<PsiExpression,JavaResolveResult[]> map=ourResults.get();
    if (map != null && map.containsKey(preparedKey)) {
      results=map.get(preparedKey);
    }
 else {
      results=processor.getResult();
      if (map == null) {
        map=new WeakHashMap<PsiExpression,JavaResolveResult[]>();
        ourResults.set(map);
      }
      map.put(preparedKey,results);
    }
  }
 else {
    results=processor.getResult();
  }
  return results;
}
