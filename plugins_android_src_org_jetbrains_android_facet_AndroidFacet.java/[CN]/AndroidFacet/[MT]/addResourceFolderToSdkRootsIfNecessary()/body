{
  final Sdk sdk=ModuleRootManager.getInstance(getModule()).getSdk();
  if (sdk == null || !(sdk.getSdkType() instanceof AndroidSdkType)) {
    return;
  }
  final SdkAdditionalData data=sdk.getSdkAdditionalData();
  if (!(data instanceof AndroidSdkAdditionalData)) {
    return;
  }
  final AndroidPlatform platform=((AndroidSdkAdditionalData)data).getAndroidPlatform();
  if (platform == null) {
    return;
  }
  final String resFolderPath=platform.getTarget().getPath(IAndroidTarget.RESOURCES);
  if (resFolderPath == null) {
    return;
  }
  final List<VirtualFile> filesToAdd=new ArrayList<VirtualFile>();
  final VirtualFile resFolder=LocalFileSystem.getInstance().findFileByPath(resFolderPath);
  if (resFolder != null) {
    filesToAdd.add(resFolder);
  }
  if (platform.needToAddAnnotationsJarToClasspath()) {
    final String sdkHomePath=FileUtil.toSystemIndependentName(platform.getSdkData().getLocation());
    final VirtualFile annotationsJar=JarFileSystem.getInstance().findFileByPath(sdkHomePath + AndroidSdkUtils.ANNOTATIONS_JAR_RELATIVE_PATH + JarFileSystem.JAR_SEPARATOR);
    filesToAdd.add(annotationsJar);
  }
  addFilesToSdkIfNecessary(sdk,filesToAdd);
}
