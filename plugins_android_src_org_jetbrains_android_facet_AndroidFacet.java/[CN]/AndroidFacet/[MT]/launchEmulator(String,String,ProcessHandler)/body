{
  AndroidPlatform platform=getConfiguration().getAndroidPlatform();
  if (platform != null) {
    final String emulatorPath=platform.getSdkData().getLocation() + File.separator + AndroidCommonUtils.toolPath(SdkConstants.FN_EMULATOR);
    final GeneralCommandLine commandLine=new GeneralCommandLine();
    commandLine.setExePath(FileUtil.toSystemDependentName(emulatorPath));
    if (avdName != null) {
      commandLine.addParameter("-avd");
      commandLine.addParameter(avdName);
    }
    String[] params=ParametersList.parse(commands);
    for (    String s : params) {
      if (s.length() > 0) {
        commandLine.addParameter(s);
      }
    }
    if (handler != null) {
      handler.notifyTextAvailable(commandLine.getCommandLineString() + '\n',ProcessOutputTypes.STDOUT);
    }
    AndroidUtils.runExternalToolInSeparateThread(commandLine,handler);
  }
}
