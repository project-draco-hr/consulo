{
  if (myAvdManager == null) {
    AndroidPlatform platform=getConfiguration().getAndroidPlatform();
    AndroidSdk sdk=platform != null ? platform.getSdk() : null;
    Project project=getModule().getProject();
    if (sdk instanceof AndroidSdkImpl) {
      SdkManager sdkManager=((AndroidSdkImpl)sdk).getSdkManager();
      myAvdManager=new AvdManager(sdkManager,AndroidUtils.getSdkLog(project));
    }
 else {
      throw new AvdsNotSupportedException();
    }
  }
  return myAvdManager;
}
