{
  AndroidPlatform platform=getConfiguration().getAndroidPlatform();
  if (platform != null) {
    final String emulatorPath=platform.getSdk().getLocation() + File.separator + AndroidUtils.toolPath(EMULATOR);
    final GeneralCommandLine commandLine=new GeneralCommandLine();
    commandLine.setExePath(FileUtil.toSystemDependentName(emulatorPath));
    if (avdName != null) {
      commandLine.addParameter("-avd");
      commandLine.addParameter(avdName);
    }
    String[] params=ParametersList.parse(commands);
    for (    String s : params) {
      if (s.length() > 0) {
        commandLine.addParameter(s);
      }
    }
    AndroidUtils.runExternalToolInSeparateThread(getModule().getProject(),commandLine);
  }
}
