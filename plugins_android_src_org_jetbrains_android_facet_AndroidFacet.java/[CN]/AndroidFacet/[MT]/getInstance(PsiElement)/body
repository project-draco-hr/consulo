{
  Module module=ApplicationManager.getApplication().runReadAction(new Computable<Module>(){
    @Nullable @Override public Module compute(){
      return ModuleUtil.findModuleForPsiElement(element);
    }
  }
);
  if (module == null)   return null;
  if (AndroidCompileUtil.isGenModule(module)) {
    final Module baseModule=AndroidCompileUtil.getBaseModuleByGenModule(module);
    if (baseModule != null) {
      module=baseModule;
    }
  }
  return getInstance(module);
}
