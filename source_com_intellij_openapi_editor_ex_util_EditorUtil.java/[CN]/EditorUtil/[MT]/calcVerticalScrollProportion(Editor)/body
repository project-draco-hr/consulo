{
  Rectangle viewRect=editor.getScrollingModel().getVisibleAreaOnScrollingFinished();
  if (viewRect.height == 0) {
    return 0;
  }
  LogicalPosition pos=editor.getCaretModel().getLogicalPosition();
  Point location=editor.logicalPositionToXY(pos);
  return (location.y - viewRect.y) / (float)viewRect.height;
}
