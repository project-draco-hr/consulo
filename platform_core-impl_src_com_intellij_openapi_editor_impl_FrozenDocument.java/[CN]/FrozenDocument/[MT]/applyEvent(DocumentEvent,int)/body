{
  final int offset=event.getOffset();
  final int oldEnd=offset + event.getOldLength();
  ImmutableCharSequence newText=myText.delete(offset,oldEnd).insert(offset,event.getNewFragment());
  LineSet newLineSet=myLineSet.update(myText,offset,oldEnd,event.getNewFragment(),event.isWholeTextReplaced());
  return new FrozenDocument(newText,newLineSet,newStamp,null);
}
