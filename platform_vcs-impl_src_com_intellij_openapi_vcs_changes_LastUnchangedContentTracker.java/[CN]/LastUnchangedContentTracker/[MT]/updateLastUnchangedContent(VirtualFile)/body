{
  if (Boolean.TRUE.equals(file.getUserData(VCS_INVALID_FILE_STATUS))) {
    return;
  }
  Long lastTs=getLastSavedStamp(file);
  final long stamp=file.getModificationStamp();
  if (lastTs != null && stamp == lastTs) {
    return;
  }
  Integer oldContentId=getSavedContentId(file);
  if (oldContentId != null && oldContentId > 0) {
    getFS().releaseContent(oldContentId);
  }
  saveContentReference(file,getFS().acquireContent(file));
  file.putUserData(VCS_INVALID_FILE_STATUS,Boolean.TRUE);
}
