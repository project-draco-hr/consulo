{
  editor.getSettings().setUseSoftWraps(true);
  SoftWrapModelImpl model=(SoftWrapModelImpl)editor.getSoftWrapModel();
  model.reinitSettings();
  SoftWrapApplianceManager applianceManager=model.getApplianceManager();
  applianceManager.setWidthProvider(new SoftWrapApplianceManager.VisibleAreaWidthProvider(){
    @Override public int getVisibleAreaWidth(){
      return visibleWidth;
    }
  }
);
  applianceManager.setRepresentationHelper(new DefaultEditorTextRepresentationHelper(editor){
    @Override public int charWidth(    char c,    int fontType){
      return charWidthInPixels;
    }
  }
);
  applianceManager.registerSoftWrapIfNecessary();
  return !model.getRegisteredSoftWraps().isEmpty();
}
