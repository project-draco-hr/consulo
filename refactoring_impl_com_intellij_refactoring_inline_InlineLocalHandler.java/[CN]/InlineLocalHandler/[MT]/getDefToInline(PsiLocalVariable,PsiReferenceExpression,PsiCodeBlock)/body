{
  if (refExpr != null) {
    PsiElement def=null;
    if (PsiUtil.isAccessedForWriting(refExpr)) {
      def=refExpr;
    }
 else {
      final PsiElement[] defs=DefUseUtil.getDefs(block,local,refExpr);
      if (defs.length == 1) {
        def=defs[0];
      }
    }
    if (def instanceof PsiReferenceExpression && def.getParent() instanceof PsiAssignmentExpression) {
      final PsiExpression rExpr=((PsiAssignmentExpression)def.getParent()).getRExpression();
      if (rExpr != null)       return rExpr;
    }
  }
  return local.getInitializer();
}
