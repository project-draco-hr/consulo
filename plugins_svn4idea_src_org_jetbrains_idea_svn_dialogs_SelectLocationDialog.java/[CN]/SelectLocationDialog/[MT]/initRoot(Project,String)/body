{
  final Ref<SVNURL> result=new Ref<SVNURL>();
  final Ref<SVNException> excRef=new Ref<SVNException>();
  ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      SVNRepository repos=null;
      try {
        repos=SvnVcs.getInstance(project).createRepository(urlString);
        result.set(repos.getRepositoryRoot(true));
      }
 catch (      SVNException e) {
        excRef.set(e);
      }
 finally {
        if (repos != null) {
          repos.closeSession();
        }
      }
    }
  }
,"Detecting repository root",true,project);
  if (!excRef.isNull()) {
    throw excRef.get();
  }
  return result.get();
}
