{
  if (type == null) {
    return;
  }
  final PsiType baseType=type.getDeepComponentType();
  final String baseTypeName=baseType.getCanonicalText();
  if (isPrimitiveType(baseTypeName)) {
    return;
  }
  final String qualifiedName=m_class.getQualifiedName();
  if (baseTypeName.equals(qualifiedName)) {
    return;
  }
  if (baseTypeName.startsWith(qualifiedName + '.')) {
    return;
  }
  if (!m_includeJavaClasses && (baseTypeName.startsWith("java.") || baseTypeName.startsWith("javax."))) {
    return;
  }
  if (!m_includeLibraryClasses) {
    final PsiManager manager=m_class.getManager();
    final Project project=manager.getProject();
    final GlobalSearchScope searchScope=GlobalSearchScope.allScope(project);
    final PsiClass aClass=manager.findClass(baseTypeName,searchScope);
    if (aClass == null) {
      return;
    }
    if (LibraryUtil.classIsInLibrary(aClass)) {
      return;
    }
  }
  m_dependencies.add(baseTypeName);
}
