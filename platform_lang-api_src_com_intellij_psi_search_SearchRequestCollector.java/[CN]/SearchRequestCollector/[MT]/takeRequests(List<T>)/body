{
synchronized (lock) {
    final List<T> requests=new ArrayList<T>(list);
    requests.addAll(list);
    list.clear();
    return requests;
  }
}
