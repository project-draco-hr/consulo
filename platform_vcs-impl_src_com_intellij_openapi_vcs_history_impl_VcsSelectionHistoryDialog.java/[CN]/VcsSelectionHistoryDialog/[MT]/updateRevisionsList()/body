{
  if (myIsDuringUpdate)   return;
  try {
    myIsDuringUpdate=true;
    List<VcsFileRevision> newItems;
    if (myChangesOnlyCheckBox.isSelected()) {
      newItems=filteredRevisions();
    }
 else {
      newItems=myRevisions;
    }
    IntPair range=getSelectedRevisionsRange();
    List<VcsFileRevision> oldSelection=myRevisions.subList(range.val1,range.val2);
    myListModel.setItems(newItems);
    myList.setSelection(oldSelection);
    if (myList.getSelectedRowCount() == 0) {
      int index=getNearestVisibleRevision(ContainerUtil.getFirstItem(oldSelection));
      myList.getSelectionModel().setSelectionInterval(index,index);
    }
  }
  finally {
    myIsDuringUpdate=false;
  }
  updateDiff();
}
