{
  Map<PsiTypeParameter,PsiType> map=null;
  for (  Map.Entry<PsiTypeParameter,PsiType> entry : substitutor.getSubstitutionMap().entrySet()) {
    if (entry.getValue() == null) {
      if (map == null)       map=new THashMap<PsiTypeParameter,PsiType>();
      map.put(entry.getKey(),entry.getValue());
    }
  }
  if (map != null) {
    Map<PsiTypeParameter,PsiType> newmap=new THashMap<PsiTypeParameter,PsiType>(substitutor.getSubstitutionMap());
    newmap.keySet().removeAll(map.keySet());
    substitutor=PsiSubstitutorImpl.createSubstitutor(newmap);
  }
  return substitutor;
}
