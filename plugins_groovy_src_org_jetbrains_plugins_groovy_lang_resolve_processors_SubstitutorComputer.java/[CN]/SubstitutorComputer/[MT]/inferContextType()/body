{
  PsiElement place=getPlaceToInferContext();
  final PsiElement parent=place.getParent();
  if (parent instanceof GrReturnStatement || exitsContains(place)) {
    final GrMethod method=PsiTreeUtil.getParentOfType(parent,GrMethod.class,true,GrClosableBlock.class);
    if (method != null) {
      return method.getReturnType();
    }
  }
 else   if (parent instanceof GrAssignmentExpression && place.equals(((GrAssignmentExpression)parent).getRValue())) {
    return ((GrAssignmentExpression)parent).getLValue().getType();
  }
 else   if (parent instanceof GrVariable) {
    return ((GrVariable)parent).getDeclaredType();
  }
  return null;
}
