{
  final VirtualFile manifestFile=AndroidRootUtil.getManifestFile(facet);
  if (manifestFile == null || !ReadonlyStatusHandler.ensureFilesWritable(facet.getModule().getProject(),manifestFile)) {
    return;
  }
  final Manifest manifest=AndroidUtils.loadDomElement(facet.getModule(),manifestFile,Manifest.class);
  if (manifest == null) {
    return;
  }
  String packageName=manifest.getPackage().getValue();
  if (packageName == null || packageName.length() == 0) {
    manifest.getPackage().setValue(aPackage.getQualifiedName());
  }
  Application application=manifest.getApplication();
  if (application == null)   return;
  ApplicationComponent component=addToManifest(templateName,aClass,application,startupActivity);
  if (component != null && label.length() > 0) {
    component.getLabel().setValue(ResourceValue.literal(label));
  }
}
