{
  super(module.getProject());
  myKindLabel.setLabelFor(myKindCombo);
  myKindCombo.registerUpDownHint(myNameField);
  myUpDownHint.setIcon(Icons.UP_DOWN_ARROWS);
  myKindCombo.addItem(AndroidBundle.message("android.new.component.dialog.activity.item"),null,AndroidFileTemplateProvider.ACTIVITY);
  if (!containsCustomApplicationClass(module)) {
    myKindCombo.addItem(AndroidBundle.message("android.new.component.dialog.application.item"),null,AndroidFileTemplateProvider.APPLICATION);
  }
  myKindCombo.addItem(AndroidBundle.message("android.new.component.dialog.service.item"),null,AndroidFileTemplateProvider.SERVICE);
  myKindCombo.addItem(AndroidBundle.message("android.new.component.dialog.broadcast.receiver.item"),null,AndroidFileTemplateProvider.BROADCAST_RECEIVER);
  myKindCombo.addItem(AndroidBundle.message("android.new.component.dialog.broadcast.remote.interface"),null,AndroidFileTemplateProvider.REMOTE_INTERFACE_TEMPLATE);
  init();
  setTitle(AndroidBundle.message("android.new.component.action.command.name"));
  myCreator=new ElementCreator(module.getProject(),CommonBundle.getErrorTitle()){
    @Override protected void checkBeforeCreate(    String newName) throws IncorrectOperationException {
      JavaDirectoryService.getInstance().checkCreateClass(directory,newName);
    }
    @Override protected PsiElement[] create(    String newName) throws Exception {
      final PsiElement element=NewAndroidComponentDialog.this.create(newName,directory,module.getProject());
      if (element != null) {
        return new PsiElement[]{element};
      }
      return PsiElement.EMPTY_ARRAY;
    }
    @Override protected String getActionName(    String newName){
      return AndroidBundle.message("android.new.component.action.command.name");
    }
  }
;
  myKindCombo.getComboBox().addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      String selected=myKindCombo.getSelectedName();
      myMarkAsStartupActivityCheckBox.setEnabled(AndroidFileTemplateProvider.ACTIVITY.equals(selected));
      myLabelField.setEnabled(!AndroidFileTemplateProvider.REMOTE_INTERFACE_TEMPLATE.equals(selected) && !AndroidFileTemplateProvider.APPLICATION.equals(selected));
    }
  }
);
}
