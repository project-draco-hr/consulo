{
  return ApplicationManager.getApplication().runReadAction(new Computable<RangeMarker>(){
    @Override public RangeMarker compute(){
      final Document document=FileDocumentManager.getInstance().getCachedDocument(file);
      if (document != null) {
        int myTabSize=CodeStyleFacade.getInstance(myProject).getTabSize(file.getFileType());
        final int offset=calculateOffset(document,line,column,myTabSize);
        return document.createRangeMarker(offset,offset,persistent);
      }
      final LazyMarker marker=new LineColumnLazyMarker(myProject,file,line,column);
      addToLazyMarkersList(marker,file);
      return marker;
    }
  }
);
}
