{
  final PsiManager psiManager=PsiManager.getInstance(getProject());
  return PackageIndex.getInstance(getProject()).getDirsByPackageName(psiPackage.getQualifiedName(),false).forEach(new ReadActionProcessor<VirtualFile>(){
    @Override public boolean processInReadAction(    final VirtualFile dir){
      if (!scope.contains(dir))       return true;
      PsiDirectory psiDir=psiManager.findDirectory(dir);
      return psiDir == null || consumer.process(psiDir);
    }
  }
);
}
