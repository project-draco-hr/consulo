{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  Set<Library> addedLibraries=new THashSet<Library>(model.myLibraries,TObjectHashingStrategy.IDENTITY);
  addedLibraries.removeAll(myModel.myLibraries);
  Set<Library> removedLibraries=new THashSet<Library>(myModel.myLibraries,TObjectHashingStrategy.IDENTITY);
  removedLibraries.removeAll(model.myLibraries);
  for (  Library library : removedLibraries) {
    fireBeforeLibraryRemoved(library);
  }
  myModel=model;
  for (  Library library : removedLibraries) {
    Disposer.dispose(library);
    fireAfterLibraryRemoved(library);
  }
  for (  Library library : addedLibraries) {
    fireLibraryAdded(library);
  }
}
