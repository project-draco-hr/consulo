{
  if (!storageSpec.storageClass().equals(StorageAnnotationsDefaultValues.NullStateStorage.class)) {
    try {
      return storageSpec.storageClass().newInstance();
    }
 catch (    InstantiationException e) {
      throw new StateStorage.StateStorageException(e);
    }
catch (    IllegalAccessException e) {
      throw new StateStorage.StateStorageException(e);
    }
  }
 else   if (!storageSpec.stateSplitter().equals(StorageAnnotationsDefaultValues.NullStateSplitter.class)) {
    return createDirectoryStateStorage(storageSpec.file(),storageSpec.stateSplitter());
  }
 else {
    return createFileStateStorage(storageSpec.file());
  }
}
