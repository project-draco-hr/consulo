{
  final TreePath selectionPath=myTree.getSelectionPath();
  if (selectionPath != null) {
    final MyNode node=(MyNode)selectionPath.getLastPathComponent();
    final NamedConfigurable configurable=node.getConfigurable();
    if (configurable instanceof ScopeConfigurable) {
      final ScopeConfigurable scopeConfigurable=(ScopeConfigurable)configurable;
      PackageSet set=scopeConfigurable.getEditableObject().getValue();
      if (set != null) {
        if (scopeConfigurable.getHolder() == mySharedScopesManager) {
          createScope(false,IdeBundle.message("scopes.save.dialog.title.shared"),set.createCopy());
        }
 else {
          createScope(true,IdeBundle.message("scopes.save.dialog.title.local"),set.createCopy());
        }
      }
    }
  }
}
