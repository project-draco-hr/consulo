{
  PsiElement[] psiElements=LangDataKeys.PSI_ELEMENT_ARRAY.getData(dataContext);
  if (psiElements == null || psiElements.length == 0) {
    PsiElement element=LangDataKeys.PSI_ELEMENT.getData(dataContext);
    if (element != null) {
      psiElements=new PsiElement[]{element};
    }
  }
  if (psiElements == null)   return PsiElement.EMPTY_ARRAY;
  List<PsiElement> filtered=null;
  for (  PsiElement element : psiElements) {
    if (element instanceof SyntheticElement) {
      if (filtered == null)       filtered=new ArrayList<PsiElement>(Arrays.asList(element));
      filtered.remove(element);
    }
  }
  return filtered == null ? psiElements : filtered.toArray(new PsiElement[filtered.size()]);
}
