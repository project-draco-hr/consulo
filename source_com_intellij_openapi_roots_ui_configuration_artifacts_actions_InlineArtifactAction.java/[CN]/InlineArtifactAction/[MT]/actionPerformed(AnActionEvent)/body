{
  final LayoutTreeComponent treeComponent=myEditor.getPackagingElementsTree();
  final LayoutTreeSelection selection=treeComponent.getSelection();
  final PackagingElement<?> element=selection.getElementIfSingle();
  if (!(element instanceof ArtifactPackagingElement))   return;
  final Function<PackagingElement<?>,PackagingElement<?>> map=treeComponent.ensureRootIsWritable();
  CompositePackagingElement<?> parent=(CompositePackagingElement<?>)map.fun(element);
  if (parent == null) {
    return;
  }
  parent.removeChild(map.fun(element));
  final Artifact artifact=((ArtifactPackagingElement)element).findArtifact(myEditor.getContext());
  if (artifact != null) {
    for (    PackagingElement<?> child : artifact.getRootElement().getChildren()) {
      parent.addChild(ArtifactUtil.copyWithChildren(child));
    }
  }
  treeComponent.rebuildTree();
}
