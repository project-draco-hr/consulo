{
  boolean containsSelf=false;
  for (  Pair<VirtualFile,StateStorage> pair : changedFiles) {
    if (pair.second == DirectoryBasedStorage.this) {
      VirtualFile file=pair.first;
      if ("xml".equalsIgnoreCase(file.getExtension())) {
        containsSelf=true;
        break;
      }
    }
  }
  if (!containsSelf)   return Collections.emptySet();
  if (myStorageData.getComponentNames().size() == 0) {
    final DirectoryStorageData storageData=loadState();
    return new HashSet<String>(storageData.getComponentNames());
  }
  return new HashSet<String>(myStorageData.getComponentNames());
}
