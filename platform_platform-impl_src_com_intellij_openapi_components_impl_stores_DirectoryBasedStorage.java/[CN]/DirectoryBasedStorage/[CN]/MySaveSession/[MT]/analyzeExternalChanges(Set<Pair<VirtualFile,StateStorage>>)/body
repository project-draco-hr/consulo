{
  boolean containsSelf=false;
  for (  Pair<VirtualFile,StateStorage> pair : changedFiles) {
    if (pair.second == DirectoryBasedStorage.this) {
      if (StringUtilRt.endsWithIgnoreCase(pair.first.getNameSequence(),".xml")) {
        containsSelf=true;
        break;
      }
    }
  }
  if (!containsSelf) {
    return Collections.emptySet();
  }
  if (myStorageData.getComponentNames().isEmpty()) {
    return new THashSet<String>(loadState().getComponentNames());
  }
 else {
    return new THashSet<String>(myStorageData.getComponentNames());
  }
}
