{
  ProjectData lastProjectState=myLastProjectState;
  if (lastProjectState == null) {
    updateCurrentProjectState(project);
    return;
  }
  ProjectData currentProjectState=buildCurrentIdeProject(project);
  if (currentProjectState == null) {
    return;
  }
  Context context=new Context(lastProjectState,currentProjectState);
  buildModulePresenceChanges(context);
  buildDependencyPresenceChanges(context);
  filterOutdatedChanges(project);
  UserProjectChanges changes=UserProjectChanges.getInstance(project);
  context.currentChanges.addAll(changes.getUserProjectChanges());
  changes.setUserProjectChanges(context.currentChanges);
  myLastProjectState=currentProjectState;
}
