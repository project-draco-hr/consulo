{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  final ThreadReference threadRef=getThreadReference();
  if (threadRef == null) {
    return;
  }
  try {
    threadRef.popFrames(stackFrame.getStackFrame());
  }
 catch (  InternalException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
catch (  IncompatibleThreadStateException e) {
    throw EvaluateExceptionUtil.createEvaluateException(e);
  }
 finally {
    clearCaches();
    getVirtualMachineProxy().clearCaches();
  }
}
