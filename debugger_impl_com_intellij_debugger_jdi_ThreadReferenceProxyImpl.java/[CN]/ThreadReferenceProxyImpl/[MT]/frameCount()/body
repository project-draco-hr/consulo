{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  checkValid();
  if (myFrameCount == -1) {
    final ThreadReference threadReference=getThreadReference();
    try {
      myFrameCount=threadReference != null ? threadReference.frameCount() : 0;
    }
 catch (    IncompatibleThreadStateException e) {
      if (!threadReference.isSuspended()) {
        throw EvaluateExceptionUtil.createEvaluateException(e);
      }
 else {
        myFrameCount=0;
      }
    }
  }
  return myFrameCount;
}
