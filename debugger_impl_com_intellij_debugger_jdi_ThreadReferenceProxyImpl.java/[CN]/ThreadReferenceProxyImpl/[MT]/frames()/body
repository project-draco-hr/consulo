{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  final ThreadReference threadRef=getThreadReference();
  try {
    LOG.assertTrue(threadRef.isSuspended());
    checkValid();
    if (myFrames == null) {
      checkFrames(threadRef);
      myFrames=new ArrayList<StackFrameProxyImpl>(frameCount());
      for (ListIterator<StackFrameProxyImpl> iterator=myFramesFromBottom.listIterator(frameCount()); iterator.hasPrevious(); ) {
        StackFrameProxyImpl stackFrameProxy=iterator.previous();
        myFrames.add(stackFrameProxy);
      }
    }
  }
 catch (  ObjectCollectedException e) {
    return Collections.emptyList();
  }
  return myFrames;
}
