{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  final ThreadReference threadRef=getThreadReference();
  if (threadRef == null) {
    return Collections.emptyList();
  }
  LOG.assertTrue(threadRef.isSuspended());
  checkValid();
  if (myFrames == null) {
    checkFrames(threadRef);
    myFrames=new ArrayList<StackFrameProxyImpl>(frameCount());
    for (ListIterator<StackFrameProxyImpl> iterator=myFramesFromBottom.listIterator(frameCount()); iterator.hasPrevious(); ) {
      StackFrameProxyImpl stackFrameProxy=iterator.previous();
      myFrames.add(stackFrameProxy);
    }
  }
  return myFrames;
}
