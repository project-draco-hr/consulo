{
  if (isPureModifierEvent(KeyEvent.KEY_PRESSED)) {
    myContext.setActiveKey(myCurrentEvent.key);
    return true;
  }
  if (myCurrentEvent.key.getID() == KeyEvent.KEY_RELEASED && myCurrentEvent.key.getKeyChar() == KeyEvent.CHAR_UNDEFINED) {
    final int pressedModifiers=myCurrentEvent.key.getKeyCode() & myContext.activeKey.getModifiersEx();
    if (pressedModifiers == 0) {
      setState(myWaitForStart);
      return true;
    }
  }
  if (myCurrentEvent.key.getID() == KeyEvent.KEY_PRESSED) {
    myContext.setActiveKey(myCurrentEvent.key);
    setState(myWaitForActionEnd);
    return true;
  }
  return false;
}
