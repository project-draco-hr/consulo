{
  super(true,true);
  myProject=project;
  myTree=tree;
  myStatusPanel=statusPanel;
  final ActionManager actionManager=ActionManager.getInstance();
  JComponent toolbar=actionManager.createActionToolbar("New Maven Toolbar",(ActionGroup)actionManager.getAction("Maven.NavigatorToolbar"),true).getComponent();
  JPanel content=new JPanel(new BorderLayout());
  content.add(new JScrollPane(myTree),BorderLayout.CENTER);
  content.add(myStatusPanel,BorderLayout.SOUTH);
  setToolbar(toolbar);
  setContent(content);
  myTree.addMouseListener(new PopupHandler(){
    public void invokePopup(    final Component comp,    final int x,    final int y){
      final String id=getMenuId(getSelectedNodes(MavenProjectsStructure.CustomNode.class));
      if (id != null) {
        final ActionGroup actionGroup=(ActionGroup)actionManager.getAction(id);
        if (actionGroup != null) {
          actionManager.createActionPopupMenu("",actionGroup).getComponent().show(comp,x,y);
        }
      }
    }
    @Nullable private String getMenuId(    Collection<? extends MavenProjectsStructure.CustomNode> nodes){
      String id=null;
      for (      MavenProjectsStructure.CustomNode node : nodes) {
        String menuId=node.getMenuId();
        if (menuId == null) {
          return null;
        }
        if (id == null) {
          id=menuId;
        }
 else         if (!id.equals(menuId)) {
          return null;
        }
      }
      return id;
    }
  }
);
}
