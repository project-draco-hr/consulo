{
  if (tryToFindBetter) {
    VirtualFile parent=file.getParent();
    String name=file.getNameWithoutExtension();
    String ext=file.getExtension();
    VirtualFile newFile;
    boolean retina=UIUtil.isRetina();
    boolean dark=UIUtil.isUnderDarcula();
    if (retina && dark) {
      newFile=parent.findChild(name + "@2x_dark." + ext);
      if (newFile != null) {
        return loadIcon(newFile,2);
      }
    }
    if (dark) {
      newFile=parent.findChild(name + "_dark." + ext);
      if (newFile != null) {
        return loadIcon(file,1);
      }
    }
    if (retina) {
      newFile=parent.findChild(name + "@2x." + ext);
      if (newFile != null) {
        return loadIcon(newFile,2);
      }
    }
  }
  return new ImageIcon(file.contentsToByteArray());
}
