{
  if (exp instanceof PsiThisExpression || exp instanceof PsiLiteralExpression || exp instanceof PsiSuperExpression|| exp instanceof PsiClassObjectAccessExpression|| exp instanceof PsiArrayAccessExpression|| exp instanceof PsiArrayInitializerExpression) {
    return LITERAL_PRECEDENCE;
  }
  if (exp instanceof PsiReferenceExpression) {
    if (((PsiReferenceExpression)exp).getQualifier() != null) {
      return METHOD_CALL_PRECEDENCE;
    }
 else {
      return LITERAL_PRECEDENCE;
    }
  }
  if (exp instanceof PsiMethodCallExpression) {
    return METHOD_CALL_PRECEDENCE;
  }
  if (exp instanceof PsiTypeCastExpression || exp instanceof PsiNewExpression) {
    return TYPE_CAST_PRECEDENCE;
  }
  if (exp instanceof PsiPrefixExpression) {
    return PREFIX_PRECEDENCE;
  }
  if (exp instanceof PsiPostfixExpression) {
    return POSTFIX_PRECEDENCE;
  }
  if (exp instanceof PsiBinaryExpression) {
    final PsiJavaToken sign=((PsiBinaryExpression)exp).getOperationSign();
    return precedenceForBinaryOperator(sign);
  }
  if (exp instanceof PsiInstanceOfExpression) {
    return RELATIONAL_PRECEDENCE;
  }
  if (exp instanceof PsiConditionalExpression) {
    return CONDITIONAL_PRECEDENCE;
  }
  if (exp instanceof PsiAssignmentExpression) {
    return ASSIGNMENT_PRECEDENCE;
  }
  if (exp instanceof PsiParenthesizedExpression) {
    return PARENTHESIZED_PRECEDENCE;
  }
  return -1;
}
