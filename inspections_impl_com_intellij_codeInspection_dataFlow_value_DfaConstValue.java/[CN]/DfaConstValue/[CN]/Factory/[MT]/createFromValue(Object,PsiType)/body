{
  if (value == Boolean.TRUE)   return dfaTrue;
  if (value == Boolean.FALSE)   return dfaFalse;
  if (TypeConversionUtil.isNumericType(type)) {
    if (type == PsiType.DOUBLE || type == PsiType.FLOAT) {
      double dbVal=type == PsiType.DOUBLE ? ((Double)value).doubleValue() : ((Float)value).doubleValue();
      if (Math.floor(dbVal) == dbVal)       value=TypeConversionUtil.computeCastTo(value,PsiType.LONG);
    }
 else {
      value=TypeConversionUtil.computeCastTo(value,PsiType.LONG);
    }
  }
  DfaConstValue instance=myValues.get(value);
  if (instance == null) {
    instance=new DfaConstValue(value,myFactory);
    myValues.put(value,instance);
  }
  return instance;
}
