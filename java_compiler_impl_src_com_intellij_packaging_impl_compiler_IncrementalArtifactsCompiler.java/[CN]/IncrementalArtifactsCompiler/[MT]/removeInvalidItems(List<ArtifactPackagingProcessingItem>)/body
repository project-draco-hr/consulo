{
  Set<VirtualFile> files=new THashSet<VirtualFile>(processedItems.size());
  for (  ArtifactPackagingProcessingItem item : processedItems) {
    files.add(item.getFile());
  }
  RefreshQueue.getInstance().refresh(false,false,null,VfsUtil.toVirtualFileArray(files));
  final Iterator<ArtifactPackagingProcessingItem> iterator=processedItems.iterator();
  while (iterator.hasNext()) {
    ArtifactPackagingProcessingItem item=iterator.next();
    final VirtualFile file=item.getFile();
    if (!file.isValid()) {
      iterator.remove();
    }
  }
}
