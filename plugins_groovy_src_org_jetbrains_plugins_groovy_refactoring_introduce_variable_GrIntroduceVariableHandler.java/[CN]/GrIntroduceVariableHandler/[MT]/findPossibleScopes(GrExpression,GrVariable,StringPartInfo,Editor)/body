{
  final GrControlFlowOwner scope=ControlFlowUtils.findControlFlowOwner(stringPartInfo != null ? stringPartInfo.getLiteral() : selectedExpr);
  if (scope == null) {
    throw new GrRefactoringError(GroovyRefactoringBundle.message("refactoring.is.not.supported.in.the.current.context",REFACTORING_NAME));
  }
  if (!GroovyRefactoringUtil.isAppropriateContainerForIntroduceVariable(scope)) {
    throw new GrRefactoringError(GroovyRefactoringBundle.message("refactoring.is.not.supported.in.the.current.context",REFACTORING_NAME));
  }
  return new GrControlFlowOwner[]{scope};
}
