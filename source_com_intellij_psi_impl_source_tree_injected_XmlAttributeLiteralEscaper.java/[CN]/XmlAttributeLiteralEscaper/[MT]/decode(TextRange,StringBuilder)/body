{
  ProperTextRange.assertProperRange(rangeInsideHost);
  TextRange valueTextRange=myXmlAttribute.getValueTextRange();
  int startInDecoded=myXmlAttribute.physicalToDisplay(rangeInsideHost.getStartOffset() - valueTextRange.getStartOffset());
  int endInDecoded=myXmlAttribute.physicalToDisplay(rangeInsideHost.getEndOffset() - valueTextRange.getStartOffset());
  String displayValue=myXmlAttribute.getDisplayValue();
  startInDecoded=startInDecoded < 0 ? 0 : startInDecoded > displayValue.length() ? displayValue.length() : startInDecoded;
  endInDecoded=endInDecoded < 0 ? 0 : endInDecoded > displayValue.length() ? displayValue.length() : endInDecoded;
  if (startInDecoded > endInDecoded)   endInDecoded=startInDecoded;
  outChars.append(displayValue,startInDecoded,endInDecoded);
  return true;
}
