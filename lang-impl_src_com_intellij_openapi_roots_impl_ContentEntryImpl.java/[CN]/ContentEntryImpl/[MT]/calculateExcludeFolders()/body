{
  final ArrayList<ExcludeFolder> result=new ArrayList<ExcludeFolder>(myExcludeFolders);
  for (  DirectoryIndexExcludePolicy excludePolicy : Extensions.getExtensions(DirectoryIndexExcludePolicy.EP_NAME,myRootModel.getProject())) {
    final VirtualFilePointer[] files=excludePolicy.getExcludeRootsForModule(myRootModel);
    for (    VirtualFilePointer file : files) {
      addExcludeForOutputPath(file,result);
    }
  }
  if (myRootModel.isExcludeExplodedDirectory()) {
    addExcludeForOutputPath(myRootModel.myExplodedDirectoryPointer,result);
  }
  return result.toArray(new ExcludeFolder[result.size()]);
}
