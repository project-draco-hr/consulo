{
  myFacetListenersRegistry.registerListener(new ProjectWideFacetAdapter<Facet>(){
    @Override public void facetAdded(    Facet facet){
      if (myFacetManager.getFacets(facet.getTypeId()).size() == 1) {
        for (        ToolWindowEP extension : getDependentExtensions(facet)) {
          myToolWindowManager.initToolWindow(extension);
        }
      }
    }
    @Override public void facetRemoved(    Facet facet){
      if (myFacetManager.getFacets(facet.getTypeId()).isEmpty()) {
        for (        ToolWindowEP extension : getDependentExtensions(facet)) {
          ToolWindow toolWindow=myToolWindowManager.getToolWindow(extension.id);
          if (toolWindow != null) {
            myToolWindowManager.unregisterToolWindow(extension.id);
          }
        }
      }
    }
  }
);
}
