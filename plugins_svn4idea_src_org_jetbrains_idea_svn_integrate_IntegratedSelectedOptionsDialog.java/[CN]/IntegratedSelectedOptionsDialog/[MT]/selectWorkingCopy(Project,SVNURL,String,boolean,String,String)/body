{
  final IntegratedSelectedOptionsDialog dialog=new IntegratedSelectedOptionsDialog(project,currentBranch,targetBranch);
  if (!showIntegrationParameters) {
    dialog.selectWcopyRootOnly();
  }
  if (selectedLocalBranchPath != null) {
    dialog.setSelectedWcPath(selectedLocalBranchPath);
  }
  if (dialogTitle != null) {
    dialog.setTitle(dialogTitle);
  }
  dialog.show();
  if (dialog.isOK()) {
    ApplicationManager.getApplication().saveAll();
    dialog.saveOptions();
    final WorkingCopyInfo info=dialog.getSelectedWc();
    if (info != null) {
      final File file=new File(info.getLocalPath());
      if ((!file.exists()) || (!file.isDirectory())) {
        Messages.showErrorDialog(SvnBundle.message("action.Subversion.integrate.changes.error.target.not.dir.text"),SvnBundle.message("action.Subversion.integrate.changes.messages.title"));
        return null;
      }
      final SVNURL targetUrl=realTargetUrl(SvnVcs.getInstance(project),info,targetBranch);
      if (targetUrl == null) {
        Messages.showErrorDialog(SvnBundle.message("action.Subversion.integrate.changes.error.not.versioned.text"),SvnBundle.message("action.Subversion.integrate.changes.messages.title"));
        return null;
      }
      return new Pair<WorkingCopyInfo,SVNURL>(info,targetUrl);
    }
  }
  return null;
}
