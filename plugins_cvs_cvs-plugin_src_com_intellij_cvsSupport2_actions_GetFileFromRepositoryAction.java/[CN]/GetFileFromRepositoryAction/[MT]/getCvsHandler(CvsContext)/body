{
  CvsLightweightFile[] cvsLightweightFiles=context.getSelectedLightweightFiles();
  Project project=context.getProject();
  if (cvsLightweightFiles != null) {
    boolean makeNewFilesReadOnly=project != null && CvsConfiguration.getInstance(project).MAKE_NEW_FILES_READONLY;
    return CommandCvsHandler.createGetFileFromRepositoryHandler(cvsLightweightFiles,makeNewFilesReadOnly);
  }
  final FilePath[] filePaths=context.getSelectedFilePaths();
  if (filePaths != null) {
    CvsConfiguration cvsConfiguration=CvsConfiguration.getInstance(project);
    final UpdateSettingsOnCvsConfiguration updateSettings=new UpdateSettingsOnCvsConfiguration(cvsConfiguration,cvsConfiguration.CLEAN_COPY,cvsConfiguration.RESET_STICKY);
    return CommandCvsHandler.createUpdateHandler(filePaths,updateSettings,project,UpdatedFiles.create());
  }
  return CvsHandler.NULL;
}
