{
  int offset=editor.getDocument().getLineStartOffset(line);
  CharSequence chars=editor.getDocument().getCharsSequence();
  offset=CharArrayUtil.shiftForward(chars,offset," \t");
  final Commenter commenter=findCommenter(editor,psiFile,line);
  if (commenter == null)   return -1;
  String prefix=commenter.getLineCommentPrefix();
  if (prefix == null)   prefix=commenter.getBlockCommentPrefix();
  if (prefix == null)   return -1;
  return CharArrayUtil.regionMatches(chars,offset,prefix) ? offset : -1;
}
