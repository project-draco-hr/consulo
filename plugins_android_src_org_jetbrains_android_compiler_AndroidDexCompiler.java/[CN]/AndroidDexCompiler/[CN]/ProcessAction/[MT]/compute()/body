{
  List<ProcessingItem> results=new ArrayList<ProcessingItem>(myItems.length);
  for (  ProcessingItem item : myItems) {
    if (item instanceof DexItem) {
      DexItem dexItem=(DexItem)item;
      AndroidDx dxTool=new AndroidDx();
      String outputDirPath=FileUtil.toSystemDependentName(dexItem.myClassDir.getPath());
      String[] files=new String[dexItem.myFiles.size()];
      int i=0;
      for (      VirtualFile file : dexItem.myFiles) {
        files[i++]=FileUtil.toSystemDependentName(file.getPath());
      }
      for (      String excludedFile : dexItem.myExcludedFiles) {
        File f=new File(excludedFile);
        if (f.exists()) {
          f.delete();
        }
      }
      Map<CompilerMessageCategory,List<String>> messages=dxTool.execute(dexItem.myModule,dexItem.myAndroidTarget,outputDirPath,files);
      addMessages(messages);
      if (messages.get(CompilerMessageCategory.ERROR).isEmpty()) {
        results.add(dexItem);
      }
    }
  }
  return results.toArray(new ProcessingItem[results.size()]);
}
