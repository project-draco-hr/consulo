{
  Set<Module> result=new THashSet<Module>();
  result.add(module);
  Set<Module> processedExporting=new THashSet<Module>();
  ModuleIndex index=getModuleIndex(module.getProject());
  Queue<Module> walkingQueue=new Queue<Module>(10);
  walkingQueue.addLast(module);
  while (!walkingQueue.isEmpty()) {
    Module current=walkingQueue.pullFirst();
    processedExporting.add(current);
    result.addAll(index.plainUsages.get(current));
    for (    Module dependent : index.exportingUsages.get(current)) {
      result.add(dependent);
      if (processedExporting.add(dependent)) {
        walkingQueue.addLast(dependent);
      }
    }
  }
  return result;
}
