{
  ApplicationManager.getApplication().assertIsDispatchThread();
  List<TextBlockTransferableData> extraData=new ArrayList<TextBlockTransferableData>();
  String s=editor.getCaretModel().supportsMultipleCarets() ? getSelectedTextForClipboard(editor,extraData) : editor.getSelectionModel().getSelectedText();
  if (s == null)   return;
  s=TextBlockTransferable.convertLineSeparators(s,"\n",extraData);
  Transferable contents=editor.getCaretModel().supportsMultipleCarets() ? new TextBlockTransferable(s,extraData,null) : new StringSelection(s);
  CopyPasteManager.getInstance().setContents(contents);
}
