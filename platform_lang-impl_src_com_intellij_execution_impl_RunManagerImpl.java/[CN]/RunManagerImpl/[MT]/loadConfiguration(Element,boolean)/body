{
  RunnerAndConfigurationSettingsImpl settings=new RunnerAndConfigurationSettingsImpl(this);
  try {
    settings.readExternal(element);
  }
 catch (  InvalidDataException e) {
    LOG.error(e);
  }
  ConfigurationFactory factory=settings.getFactory();
  if (factory == null) {
    return null;
  }
  List<BeforeRunTask> tasks=readStepsBeforeRun(element.getChild(METHOD),settings);
  if (settings.isTemplate()) {
    myTemplateConfigurationsMap.put(factory.getType().getId() + "." + factory.getName(),settings);
    setBeforeRunTasks(settings.getConfiguration(),tasks,true);
  }
 else {
    addConfiguration(settings,isShared,tasks,true);
    if (Boolean.valueOf(element.getAttributeValue(SELECTED_ATTR)).booleanValue()) {
      setSelectedConfiguration(settings);
    }
  }
  return settings;
}
