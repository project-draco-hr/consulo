{
  RunnerAndConfigurationSettings template=myTemplateConfigurationsMap.get(factory.getType().getId() + "." + factory.getName());
  if (template == null) {
    template=new RunnerAndConfigurationSettingsImpl(this,factory.createTemplateConfiguration(myProject,this),true);
    template.setSingleton(factory.isConfigurationSingletonByDefault());
    if (template.getConfiguration() instanceof UnknownRunConfiguration) {
      ((UnknownRunConfiguration)template.getConfiguration()).setDoNotStore(true);
    }
    myTemplateConfigurationsMap.put(factory.getType().getId() + "." + factory.getName(),template);
  }
  return template;
}
