{
  clear();
  final Comparator<Element> comparator=new Comparator<Element>(){
    @Override public int compare(    Element a,    Element b){
      final boolean aDefault=Boolean.valueOf(a.getAttributeValue("default","false"));
      final boolean bDefault=Boolean.valueOf(b.getAttributeValue("default","false"));
      return aDefault == bDefault ? 0 : aDefault ? -1 : 1;
    }
  }
;
  final List children=parentNode.getChildren();
  final List<Element> sortedElements=new ArrayList<Element>();
  for (  final Object aChildren : children) {
    final Element element=(Element)aChildren;
    if (Comparing.strEqual(element.getName(),CONFIGURATION)) {
      sortedElements.add(element);
    }
  }
  Collections.sort(sortedElements,comparator);
  for (  final Element element : sortedElements) {
    RunnerAndConfigurationSettings configurationSettings=null;
    try {
      configurationSettings=loadConfiguration(element,false);
    }
 catch (    Throwable e) {
      LOG.error(e);
      continue;
    }
    if (configurationSettings == null) {
      if (myUnknownElements == null)       myUnknownElements=new ArrayList<Element>(2);
      myUnknownElements.add(element);
    }
  }
  myOrder.readExternal(parentNode);
  for (int i=0; i < myOrder.size(); i++) {
    String id=myOrder.get(i);
    for (    RunnerAndConfigurationSettings settings : myConfigurations.values()) {
      RunConfiguration configuration=settings.getConfiguration();
      if (configuration != null && id.equals(configuration.getType().getDisplayName() + "." + configuration.getName()+ (configuration instanceof UnknownRunConfiguration ? configuration.getUniqueID() : ""))) {
        myOrder.set(i,settings.getUniqueID());
        break;
      }
    }
  }
  myRecentlyUsedTemporaries.clear();
  Element recentNode=parentNode.getChild(RECENT);
  if (recentNode != null) {
    JDOMExternalizableStringList list=new JDOMExternalizableStringList();
    list.readExternal(recentNode);
    for (int i=0; i < list.size(); i++) {
      String id=list.get(i);
      for (      RunnerAndConfigurationSettings settings : myConfigurations.values()) {
        RunConfiguration configuration=settings.getConfiguration();
        if (configuration != null && id.equals(configuration.getType().getDisplayName() + "." + configuration.getName()+ (configuration instanceof UnknownRunConfiguration ? configuration.getUniqueID() : ""))) {
          list.set(i,settings.getUniqueID());
          break;
        }
      }
    }
    for (    String name : list) {
      RunnerAndConfigurationSettings settings=myConfigurations.get(name);
      if (settings != null)       myRecentlyUsedTemporaries.add(settings.getConfiguration());
    }
  }
  myOrdered=false;
  myLoadedSelectedConfigurationUniqueName=parentNode.getAttributeValue(SELECTED_ATTR);
  setSelectedConfigurationId(myLoadedSelectedConfigurationUniqueName);
  fireBeforeRunTasksUpdated();
  fireRunConfigurationSelected();
}
