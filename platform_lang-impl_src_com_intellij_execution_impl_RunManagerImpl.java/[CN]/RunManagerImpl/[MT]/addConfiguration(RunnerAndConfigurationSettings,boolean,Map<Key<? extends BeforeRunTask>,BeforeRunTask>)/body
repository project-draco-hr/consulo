{
  final RunConfiguration configuration=settings.getConfiguration();
  Integer existingId=findConfigurationIdByUniqueName(getUniqueName(settings));
  Integer newId=configuration.getUniqueID();
  if (existingId != null) {
    myConfigurations.remove(existingId);
    mySharedConfigurations.remove(existingId);
  }
  if (mySelectedConfigurationId != null && mySelectedConfigurationId.equals(existingId))   mySelectedConfigurationId=newId;
  myConfigurations.put(newId,settings);
  checkRecentsLimit();
  mySharedConfigurations.put(newId,shared);
  setBeforeRunTasks(configuration,tasks);
  myDispatcher.getMulticaster().runConfigurationAdded(settings);
}
