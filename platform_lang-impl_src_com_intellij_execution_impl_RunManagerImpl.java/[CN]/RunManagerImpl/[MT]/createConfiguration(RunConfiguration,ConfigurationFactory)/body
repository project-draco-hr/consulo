{
  RunnerAndConfigurationSettings template=getConfigurationTemplate(factory);
  myConfigurationToBeforeTasksMap.put(runConfiguration,getBeforeRunTasks(template.getConfiguration()));
  RunnerAndConfigurationSettingsImpl settings=new RunnerAndConfigurationSettingsImpl(this,runConfiguration,false);
  settings.importRunnerAndConfigurationSettings((RunnerAndConfigurationSettingsImpl)template);
  if (!mySharedConfigurations.containsKey(settings.getUniqueID())) {
    shareConfiguration(settings,isConfigurationShared(template));
  }
  return settings;
}
