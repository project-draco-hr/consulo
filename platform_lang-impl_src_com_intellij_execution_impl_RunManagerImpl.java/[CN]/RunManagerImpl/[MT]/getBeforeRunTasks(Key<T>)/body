{
  final List<T> tasks=new ArrayList<T>();
  final List<RunnerAndConfigurationSettings> checkedTemplates=new ArrayList<RunnerAndConfigurationSettings>();
  List<RunnerAndConfigurationSettings> settingsList=new ArrayList<RunnerAndConfigurationSettings>(myConfigurations.values());
  for (  RunnerAndConfigurationSettings settings : settingsList) {
    final List<BeforeRunTask> runTasks=getBeforeRunTasks(settings.getConfiguration());
    for (    BeforeRunTask task : runTasks) {
      if (task != null && task.isEnabled() && task.getProviderId() == taskProviderID) {
        tasks.add((T)task);
      }
 else {
        final RunnerAndConfigurationSettings template=getConfigurationTemplate(settings.getFactory());
        if (!checkedTemplates.contains(template)) {
          checkedTemplates.add(template);
          final List<BeforeRunTask> templateTasks=getBeforeRunTasks(template.getConfiguration());
          for (          BeforeRunTask templateTask : templateTasks) {
            if (templateTask != null && templateTask.isEnabled() && templateTask.getProviderId() == taskProviderID) {
              tasks.add((T)templateTask);
            }
          }
        }
      }
    }
  }
  return tasks;
}
