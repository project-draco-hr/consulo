{
  if (settings == null)   return;
  for (Iterator<RunnerAndConfigurationSettings> it=getSortedConfigurations().iterator(); it.hasNext(); ) {
    final RunnerAndConfigurationSettings configuration=it.next();
    if (configuration.equals(settings)) {
      if (mySelectedConfigurationId != null && mySelectedConfigurationId == settings.getUniqueID()) {
        setSelectedConfiguration(null);
      }
      it.remove();
      mySharedConfigurations.remove(settings.getUniqueID());
      myConfigurationToBeforeTasksMap.remove(settings.getConfiguration());
      myRecentlyUsedTemporaries.remove(settings.getConfiguration());
      myDispatcher.getMulticaster().runConfigurationRemoved(configuration);
      break;
    }
  }
  for (  Map.Entry<RunConfiguration,List<BeforeRunTask>> entry : myConfigurationToBeforeTasksMap.entrySet()) {
    for (Iterator<BeforeRunTask> iterator=entry.getValue().iterator(); iterator.hasNext(); ) {
      BeforeRunTask task=iterator.next();
      if (task instanceof RunConfigurationBeforeRunProvider.RunConfigurableBeforeRunTask && settings.equals(((RunConfigurationBeforeRunProvider.RunConfigurableBeforeRunTask)task).getSettings())) {
        iterator.remove();
        RunnerAndConfigurationSettings changedSettings=getSettings(entry.getKey());
        if (changedSettings != null) {
          myDispatcher.getMulticaster().runConfigurationChanged(changedSettings,null);
        }
      }
    }
  }
}
