{
  final PsiManager manager=myMethod.getManager();
  final PsiElementFactory factory=manager.getElementFactory();
  final List<PsiTypeParameter> typeParametersToAdd=new ArrayList<PsiTypeParameter>();
  final PsiMethod methodFromText=factory.createMethodFromText("void utterGarbage();",myMethod);
  for (Iterator<PsiType> iterator=addedTypes.iterator(); iterator.hasNext(); ) {
    final PsiType type=iterator.next();
    methodFromText.getParameterList().add(factory.createParameter("p",type));
  }
  final LocalSearchScope searchScope=new LocalSearchScope(methodFromText);
  final Iterator<PsiTypeParameter> tpIterator=PsiUtil.typeParametersIterator(myMethodClass);
  while (tpIterator.hasNext()) {
    final PsiTypeParameter psiTypeParameter=tpIterator.next();
    if (manager.getSearchHelper().findReferences(psiTypeParameter,searchScope,false).length > 0) {
      typeParametersToAdd.add(psiTypeParameter);
    }
  }
  Collections.reverse(typeParametersToAdd);
  for (Iterator<PsiTypeParameter> iterator=typeParametersToAdd.iterator(); iterator.hasNext(); ) {
    final PsiTypeParameter typeParameter=iterator.next();
    myMethod.getTypeParameterList().add(typeParameter);
  }
}
