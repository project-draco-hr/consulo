{
  final TextRange range=getCurrentSignatureTextRange();
  final int start=range.getStartOffset();
  final int end=range.getEndOffset();
  final int startLine=((EditorImpl)editor).offsetToLogicalPosition(start,false).line;
  final int endLine=((EditorImpl)editor).offsetToLogicalPosition(end,false).line;
  final int lineCount=Math.max(1,endLine - startLine);
  final Dimension old=getSize();
  final Dimension size=new Dimension(getWidth(),editor.getLineHeight() * (lineCount + 2) + 4);
  if (!old.equals(size)) {
    setSize(size);
    setPreferredSize(size);
    revalidate();
    repaint();
  }
  if (moveCaretToStart) {
    editor.getCaretModel().moveToOffset(start);
  }
  editor.getScrollingModel().scrollVertically((startLine - 1) * editor.getLineHeight() + 2);
}
