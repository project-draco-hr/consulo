{
  final StringBuilder text=new StringBuilder(myFile.getText());
  final TextRange range=getSignatureTextRange();
  text.insert(range.getEndOffset(),myEndMarker);
  text.insert(range.getStartOffset(),myStartMarker);
  text.replace(range.getStartOffset() + myStartMarker.length(),range.getEndOffset() + myStartMarker.length(),formatMethod());
  final PsiFile newFile=PsiFileFactory.getInstance(myMethod.getProject()).createFileFromText(myFile.getName(),myFile.getFileType(),text,System.currentTimeMillis(),true);
  return PsiDocumentManager.getInstance(myMethod.getProject()).getDocument(newFile);
}
