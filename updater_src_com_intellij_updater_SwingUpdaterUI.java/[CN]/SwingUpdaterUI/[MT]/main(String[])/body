{
  new SwingUpdaterUI("xxx","yyy",new InstallOperation(){
    public boolean execute(    UpdaterUI ui) throws OperationCancelledException {
      ui.startProcess("Process1");
      ui.checkCancelled();
      for (int i=0; i < 200; i++) {
        ui.setStatus("i = " + i);
        ui.checkCancelled();
        try {
          Thread.sleep(10);
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
        ui.setProgress((i + 1) * 100 / 200);
      }
      ui.showError(new Throwable());
      ui.startProcess("Process3");
      ui.checkCancelled();
      ui.setProgressIndeterminate();
      try {
        for (int i=0; i < 200; i++) {
          ui.setStatus("i = " + i);
          ui.checkCancelled();
          try {
            Thread.sleep(10);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
          ui.setProgress((i + 1) * 100 / 200);
          if (i == 100) {
            List<ValidationResult> vr=new ArrayList<ValidationResult>();
            vr.add(new ValidationResult(ValidationResult.Kind.ERROR,"foo/bar",ValidationResult.Action.CREATE,"Hello",ValidationResult.Option.REPLACE,ValidationResult.Option.KEEP));
            vr.add(new ValidationResult(ValidationResult.Kind.CONFLICT,"foo/bar/baz",ValidationResult.Action.DELETE,"World",ValidationResult.Option.DELETE,ValidationResult.Option.KEEP));
            vr.add(new ValidationResult(ValidationResult.Kind.INFO,"xxx",ValidationResult.Action.NO_ACTION,"bla-bla",ValidationResult.Option.IGNORE));
            ui.askUser(vr);
          }
        }
      }
  finally {
        ui.startProcess("Process2");
        for (int i=0; i < 200; i++) {
          ui.setStatus("i = " + i);
          try {
            Thread.sleep(10);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
          ui.setProgress((i + 1) * 100 / 200);
        }
      }
      return true;
    }
  }
);
}
