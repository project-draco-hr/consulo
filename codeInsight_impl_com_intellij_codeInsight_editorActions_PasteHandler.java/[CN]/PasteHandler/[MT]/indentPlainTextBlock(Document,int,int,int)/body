{
  CharSequence chars=document.getCharsSequence();
  int spaceEnd=CharArrayUtil.shiftForward(chars,startOffset," \t");
  if (spaceEnd > endOffset)   return;
  if (indentLevel == 0)   return;
  char[] fill=new char[indentLevel];
  Arrays.fill(fill,' ');
  String indentString=new String(fill);
  int offset=spaceEnd;
  while (true) {
    document.insertString(offset,indentString);
    chars=document.getCharsSequence();
    endOffset+=indentLevel;
    offset=CharArrayUtil.shiftForwardUntil(chars,offset,"\n") + 1;
    if (offset >= endOffset || offset >= document.getTextLength())     break;
  }
}
