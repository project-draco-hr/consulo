{
  JPanel optionsPanel=new JPanel();
  optionsPanel.setLayout(new GridBagLayout());
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.weightx=1;
  gbConstraints.weighty=1;
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
  JPanel topOptionsPanel=new JPanel();
  topOptionsPanel.setLayout(new GridLayout(1,2,UIUtil.DEFAULT_HGAP,0));
  topOptionsPanel.add(createFindOptionsPanel());
  optionsPanel.add(topOptionsPanel,gbConstraints);
  if (myModel.isMultipleFiles()) {
    optionsPanel.add(createGlobalScopePanel(),gbConstraints);
    gbConstraints.weightx=1;
    gbConstraints.weighty=1;
    gbConstraints.fill=GridBagConstraints.HORIZONTAL;
    gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
    optionsPanel.add(createFilterPanel(),gbConstraints);
    myCbToSkipResultsWhenOneUsage=createCheckbox(FindSettings.getInstance().isSkipResultsWithOneUsage(),FindBundle.message("find.options.skip.results.tab.with.one.usage.checkbox"));
    optionsPanel.add(myCbToSkipResultsWhenOneUsage,gbConstraints);
    myCbToSkipResultsWhenOneUsage.setVisible(myModel.isReplaceState());
  }
 else {
    if (FindManagerImpl.ourHasSearchInCommentsAndLiterals) {
      JPanel leftOptionsPanel=new JPanel();
      leftOptionsPanel.setLayout(new GridLayout(3,1,0,4));
      leftOptionsPanel.add(createDirectionPanel());
      leftOptionsPanel.add(createOriginPanel());
      leftOptionsPanel.add(createScopePanel());
      topOptionsPanel.add(leftOptionsPanel);
    }
 else {
      topOptionsPanel.add(createDirectionPanel());
      gbConstraints.gridwidth=GridBagConstraints.RELATIVE;
      JPanel bottomOptionsPanel=new JPanel();
      bottomOptionsPanel.setLayout(new GridLayout(1,2,8,0));
      optionsPanel.add(bottomOptionsPanel,gbConstraints);
      bottomOptionsPanel.add(createScopePanel());
      bottomOptionsPanel.add(createOriginPanel());
    }
  }
  if (myModel.isOpenInNewTabVisible()) {
    JPanel openInNewTabWindowPanel=new JPanel(new BorderLayout());
    myCbToOpenInNewTab=new JCheckBox(FindBundle.message("find.open.in.new.tab.checkbox"));
    myCbToOpenInNewTab.setFocusable(false);
    myCbToOpenInNewTab.setSelected(myModel.isOpenInNewTab());
    myCbToOpenInNewTab.setEnabled(myModel.isOpenInNewTabEnabled());
    openInNewTabWindowPanel.add(myCbToOpenInNewTab,BorderLayout.EAST);
    optionsPanel.add(openInNewTabWindowPanel,gbConstraints);
  }
  return optionsPanel;
}
