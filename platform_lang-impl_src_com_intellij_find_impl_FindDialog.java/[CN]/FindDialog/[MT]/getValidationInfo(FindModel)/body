{
  if (myRbDirectory != null && myRbDirectory.isEnabled() && myRbDirectory.isSelected()) {
    PsiDirectory directory=FindInProjectUtil.getPsiDirectory(model,myProject);
    if (directory == null) {
      return new ValidationInfo(FindBundle.message("find.directory.not.found.error",getDirectory()),myDirectoryComboBox);
    }
  }
  String toFind=(String)myInputComboBox.getSelectedItem();
  if (toFind != null && toFind.isEmpty()) {
    return new ValidationInfo("String to find is empty",myInputComboBox);
  }
  if (myCbRegularExpressions != null && myCbRegularExpressions.isEnabled()) {
    try {
      boolean isCaseSensitive=myCbCaseSensitive != null && myCbCaseSensitive.isEnabled();
      Pattern pattern=Pattern.compile(toFind,isCaseSensitive ? Pattern.MULTILINE : Pattern.MULTILINE | Pattern.CASE_INSENSITIVE);
      if (pattern.matcher("").matches() && !toFind.endsWith("$") && !toFind.startsWith("^")) {
        return new ValidationInfo(FindBundle.message("find.empty.match.regular.expression.error"),myInputComboBox);
      }
    }
 catch (    PatternSyntaxException e) {
      return new ValidationInfo(FindBundle.message("find.invalid.regular.expression.error",toFind,e.getDescription()),myInputComboBox);
    }
  }
  final String mask=myFileFilter == null ? null : (String)myFileFilter.getSelectedItem();
  if (mask != null) {
    if (mask.length() == 0) {
      return new ValidationInfo(FindBundle.message("find.filter.empty.file.mask.error"),myFileFilter);
    }
 else {
      try {
        FindInProjectUtil.createFileMaskRegExp(mask);
      }
 catch (      PatternSyntaxException ex) {
        return new ValidationInfo(FindBundle.message("find.filter.invalid.file.mask.error",mask),myFileFilter);
      }
    }
  }
  return null;
}
