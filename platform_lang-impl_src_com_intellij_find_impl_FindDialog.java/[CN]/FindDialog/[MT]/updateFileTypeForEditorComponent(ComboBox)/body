{
  final Component editorComponent=inputComboBox.getEditor().getEditorComponent();
  if (editorComponent instanceof EditorTextField) {
    boolean isRegexp=myCbRegularExpressions.isSelectedWhenSelectable();
    FileType fileType=PlainTextFileType.INSTANCE;
    if (isRegexp) {
      Language regexpLanguage=Language.findLanguageByID("RegExp");
      if (regexpLanguage != null) {
        LanguageFileType regexpFileType=regexpLanguage.getAssociatedFileType();
        if (regexpFileType != null) {
          fileType=regexpFileType;
        }
      }
    }
    String fileName=isRegexp ? "a.regexp" : "a.txt";
    final PsiFile file=PsiFileFactory.getInstance(myProject).createFileFromText(fileName,fileType,((EditorTextField)editorComponent).getText(),-1,true);
    ((EditorTextField)editorComponent).setNewDocumentAndFileType(fileType,PsiDocumentManager.getInstance(myProject).getDocument(file));
  }
}
