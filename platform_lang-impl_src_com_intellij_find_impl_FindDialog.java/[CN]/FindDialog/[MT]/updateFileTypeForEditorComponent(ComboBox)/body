{
  final Component editorComponent=inputComboBox.getEditor().getEditorComponent();
  if (editorComponent instanceof EditorTextField) {
    boolean selected=myCbRegularExpressions.isSelectedWhenSelectable();
    @NonNls final String s=selected ? "*.regexp" : "*.txt";
    FileType fileType=FileTypeManager.getInstance().getFileTypeByFileName(s);
    if (selected && fileType == UnknownFileType.INSTANCE) {
      fileType=FileTypeManager.getInstance().getFileTypeByFileName("*.txt");
    }
    final PsiFile file=PsiFileFactory.getInstance(myProject).createFileFromText(s,fileType,((EditorTextField)editorComponent).getText(),-1,true);
    ((EditorTextField)editorComponent).setNewDocumentAndFileType(fileType,PsiDocumentManager.getInstance(myProject).getDocument(file));
  }
}
