{
  if (newValue == null) {
    throw new NullPointerException();
  }
  lock();
  try {
    IntHashEntry<V> e=getFirst(key);
    while (e != null && !(key == e.key)) {
      e=e.next;
    }
    V oldValue=null;
    if (e != null) {
      oldValue=e.value;
      e.value=newValue;
    }
    return oldValue;
  }
  finally {
    unlock();
  }
}
