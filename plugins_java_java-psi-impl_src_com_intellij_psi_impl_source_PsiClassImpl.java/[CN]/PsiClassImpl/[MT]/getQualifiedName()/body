{
  final PsiClassStub stub=getStub();
  if (stub != null) {
    return stub.getQualifiedName();
  }
  PsiElement parent=getParent();
  if (parent instanceof PsiJavaFile) {
    String packageName=((PsiJavaFile)parent).getPackageName();
    if (packageName.isEmpty()) {
      return getName();
    }
    return packageName + "." + getName();
  }
  if (parent instanceof PsiClass) {
    String parentQName=((PsiClass)parent).getQualifiedName();
    if (parentQName == null)     return null;
    return parentQName + "." + getName();
  }
  return null;
}
