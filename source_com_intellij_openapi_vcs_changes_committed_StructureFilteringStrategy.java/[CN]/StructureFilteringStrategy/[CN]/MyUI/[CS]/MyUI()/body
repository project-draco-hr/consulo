{
  setLayout(new BorderLayout());
  myStructureTree=new Tree();
  myStructureTree.setRootVisible(false);
  myStructureTree.setShowsRootHandles(true);
  myStructureTree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    final TreeSelectionEvent e){
      mySelection.clear();
      DefaultMutableTreeNode node=(DefaultMutableTreeNode)e.getPath().getLastPathComponent();
      if (node.getUserObject() instanceof FilePath) {
        mySelection.add((FilePath)node.getUserObject());
      }
 else       if (node.getUserObject() instanceof Module) {
        Module module=(Module)node.getUserObject();
        final VirtualFile[] files=ModuleRootManager.getInstance(module).getContentRoots();
        for (        VirtualFile file : files) {
          mySelection.add(new FilePathImpl(file));
        }
      }
      for (      ChangeListener listener : myListeners) {
        listener.stateChanged(new ChangeEvent(this));
      }
    }
  }
);
  add(new JScrollPane(myStructureTree),BorderLayout.CENTER);
}
