{
  List<HighlightInfo> result=new ArrayList<HighlightInfo>();
  Document document=editor.getDocument();
  GeneralHighlightingPass action1=new GeneralHighlightingPass(file.getProject(),file,document,0,file.getTextLength(),true);
  action1.doCollectInformation(new MockProgressIndicator());
  result.addAll(action1.getHighlights());
  PostHighlightingPassFactory phpFactory=file.getProject().getComponent(PostHighlightingPassFactory.class);
  if (phpFactory != null) {
    PostHighlightingPass action2=new PostHighlightingPass(file.getProject(),file,editor,0,file.getTextLength());
    action2.doCollectInformation(new MockProgressIndicator());
    result.addAll(action2.getHighlights());
  }
  LocalInspectionsPass inspectionsPass=new LocalInspectionsPass(file,document,0,file.getTextLength());
  inspectionsPass.doCollectInformation(new MockProgressIndicator());
  result.addAll(inspectionsPass.getHighlights());
  return result;
}
