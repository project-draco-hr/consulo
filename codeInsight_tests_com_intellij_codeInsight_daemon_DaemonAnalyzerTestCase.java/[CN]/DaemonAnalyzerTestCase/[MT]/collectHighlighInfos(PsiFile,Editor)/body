{
  List<HighlightInfo> result=new ArrayList<HighlightInfo>();
  Document document=editor.getDocument();
  GeneralHighlightingPass action1=new GeneralHighlightingPass(file.getProject(),file,document,0,file.getTextLength(),true);
  action1.collectInformation(new MockProgressIndicator());
  action1.applyInformationToEditor();
  result.addAll(action1.getHighlights());
  PostHighlightingPassFactory phpFactory=file.getProject().getComponent(PostHighlightingPassFactory.class);
  if (phpFactory != null) {
    PostHighlightingPass php=new PostHighlightingPass(file.getProject(),file,editor,0,file.getTextLength());
    php.collectInformation(new MockProgressIndicator());
    php.applyInformationToEditor();
    result.addAll(php.getHighlights());
  }
  LocalInspectionsPass inspectionsPass=new LocalInspectionsPass(file,document,0,file.getTextLength());
  inspectionsPass.collectInformation(new MockProgressIndicator());
  inspectionsPass.applyInformationToEditor();
  result.addAll(inspectionsPass.getHighlights());
  return result;
}
