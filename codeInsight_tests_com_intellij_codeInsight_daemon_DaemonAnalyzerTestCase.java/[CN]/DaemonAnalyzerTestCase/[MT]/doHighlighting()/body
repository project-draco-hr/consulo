{
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  final PsiFile file=myFile;
  final Editor editor=myEditor;
  List<HighlightInfo> result=collectHighlighInfos(file,editor);
  boolean isToLaunchExternal=true;
  for (  HighlightInfo info : result) {
    if (info.getSeverity() == HighlightSeverity.ERROR) {
      isToLaunchExternal=false;
      break;
    }
  }
  if (isToLaunchExternal && doExternalValidation()) {
    ExternalToolPass action3=new ExternalToolPass(file,editor,0,editor.getDocument().getTextLength());
    action3.doCollectInformation(new MockProgressIndicator());
    result.addAll(action3.getHighlights());
  }
  return result;
}
