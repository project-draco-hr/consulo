{
  if (line == myTextArea.getLineCount() - 1) {
    return 0;
  }
  try {
    int endOffset=myTextArea.getLineEndOffset(line) - 1;
    int startOffset=myTextArea.getLineStartOffset(line);
    int l=0;
    String text=getText();
    while (l < endOffset - startOffset && (text.charAt(endOffset - l) == '\r' || text.charAt(endOffset - l) == '\n')) {
      l++;
    }
    return l;
  }
 catch (  BadLocationException e) {
    throw new RuntimeException(e);
  }
}
