{
  return new BackgroundEditorHighlighter(){
    public HighlightingPass[] createPassesForEditor(){
      return ContainerUtil.map2Array(getDocuments(),HighlightingPass.class,new Function<Document,HighlightingPass>(){
        public HighlightingPass fun(        final Document document){
          return new TextEditorHighlightingPass(document){
            public void doCollectInformation(            ProgressIndicator progress){
              final PsiFile file=getDocumentManager().getPsiFile(document);
              if (file instanceof XmlFile) {
                final XmlFile xmlFile=(XmlFile)file;
                final DomFileElement<DomElement> element=DomManager.getDomManager(getProject()).getFileElement(xmlFile);
                if (element != null) {
                  DomElementAnnotationsManager.getInstance(getProject()).getProblemHolder(element);
                }
              }
            }
            public void doApplyInformationToEditor(){
              reset();
            }
            public int getPassId(){
              return Pass.ALL;
            }
          }
;
        }
      }
);
    }
    public HighlightingPass[] createPassesForVisibleArea(){
      return createPassesForEditor();
    }
  }
;
}
