{
  return new WriteAction<Library>(){
    @Override protected void run(    final Result<Library> result){
      final Library library=LibraryTablesRegistrar.getInstance().getLibraryTable(project).createLibrary(name);
      final Library.ModifiableModel libraryModel=library.getModifiableModel();
      for (      VirtualFile jar : jars) {
        libraryModel.addRoot(jar,BinariesOrderRootType.getInstance());
      }
      libraryModel.commit();
      if (module != null) {
        ModuleRootModificationUtil.addDependency(module,library,scope,false);
      }
      result.setResult(library);
    }
  }
.execute().getResultObject();
}
