{
  Group rootGroup=new Group("root",null,null);
  DefaultMutableTreeNode root=new DefaultMutableTreeNode(rootGroup);
  root.removeAllChildren();
  schema.fillActionGroups(root);
  final JTree defaultTree=new JTree(new DefaultTreeModel(root));
  final ArrayList<ActionUrl> actions=new ArrayList<ActionUrl>();
  TreeUtil.traverseDepth((TreeNode)tree.getModel().getRoot(),new TreeUtil.Traverse(){
    public boolean accept(    Object node){
      DefaultMutableTreeNode treeNode=(DefaultMutableTreeNode)node;
      if (treeNode.isLeaf()) {
        return true;
      }
      final ActionUrl url=getActionUrl(new TreePath(treeNode.getPath()),0);
      url.getGroupPath().add(((Group)treeNode.getUserObject()).getName());
      final TreePath treePath=getTreePath(defaultTree,url);
      if (treePath != null) {
        final DefaultMutableTreeNode visited=(DefaultMutableTreeNode)treePath.getLastPathComponent();
        final ActionUrl[] defaultUserObjects=getChildUserObjects(visited,url);
        final ActionUrl[] currentUserObjects=getChildUserObjects(treeNode,url);
        computeDiff(defaultUserObjects,currentUserObjects,actions);
      }
 else {
        url.getGroupPath().remove(url.getParentGroup());
        if (actions.contains(url)) {
          url.getGroupPath().add(((Group)treeNode.getUserObject()).getName());
          actions.addAll(schema.getChildActions(url));
        }
      }
      return true;
    }
  }
);
  schema.setActions(actions);
}
