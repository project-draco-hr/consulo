{
  final AtomicReference<UsageViewImpl> usageView=new AtomicReference<UsageViewImpl>();
  final SearchForUsagesRunnable runnable=new SearchForUsagesRunnable(usageView,presentation,searchFor,searcherFactory,processPresentation,listener);
  final Factory<ProgressIndicator> progressIndicatorFactory=processPresentation.getProgressIndicatorFactory();
  final ProgressIndicator progressIndicator=progressIndicatorFactory != null ? progressIndicatorFactory.create() : null;
  final AtomicBoolean findUsagesStartedShown=new AtomicBoolean();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        ProgressManager.getInstance().runProcess(new Runnable(){
          @Override public void run(){
            runnable.searchUsages(findUsagesStartedShown);
          }
        }
,progressIndicator);
      }
 catch (      ProcessCanceledException e) {
      }
 finally {
        runnable.endSearchForUsages(findUsagesStartedShown);
      }
    }
  }
);
}
