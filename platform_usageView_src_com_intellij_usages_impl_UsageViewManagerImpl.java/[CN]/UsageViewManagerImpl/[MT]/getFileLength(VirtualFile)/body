{
  final long[] length={-1L};
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      if (!virtualFile.isValid())       return;
      if (virtualFile.getFileType().isBinary())       return;
      length[0]=virtualFile.getLength();
    }
  }
);
  return length[0];
}
