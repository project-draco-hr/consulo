{
  if (width == 0 || height == 0)   return;
  Point bottomRight=new Point(x + width - 1,y + height - 1);
  int lastColumn=columnAtPoint(bottomRight);
  if ((lastColumn == -1 || lastColumn == getColumnCount() - 1) && getRowHeight() != 0) {
    int lastRow=rowAtPoint(bottomRight);
    if (lastRow == -1)     lastRow=getRowCount() - 1;
    int lastHalf=getRowHeight(lastRow) / 2 + 1;
    int firstRow=rowAtPoint(new Point(bottomRight.x,y));
    if (firstRow == -1)     firstRow=getRowCount() - 1;
    int firstHalf=getRowHeight(firstRow) / 2 + 1;
    y=Math.max(0,y - firstHalf);
    height+=lastHalf + firstHalf;
  }
  super.repaint(tm,x,y,width,height);
}
