{
  Map<VirtualFile,VcsLogProvider> logProviders=ContainerUtil.newHashMap();
  VcsLogProvider[] allLogProviders=Extensions.getExtensions(LOG_PROVIDER_EP,myProject);
  for (  AbstractVcs vcs : myVcsManager.getAllActiveVcss()) {
    for (    VcsLogProvider provider : allLogProviders) {
      if (provider.getSupportedVcs().equals(vcs.getKeyInstanceMethod())) {
        for (        VirtualFile root : myVcsManager.getRootsUnderVcs(vcs)) {
          logProviders.put(root,provider);
        }
        break;
      }
    }
  }
  return logProviders;
}
