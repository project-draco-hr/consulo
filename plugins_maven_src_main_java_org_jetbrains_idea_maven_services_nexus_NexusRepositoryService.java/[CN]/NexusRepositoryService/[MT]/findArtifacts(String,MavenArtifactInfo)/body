{
  try {
    final String packaging=StringUtil.notNullize(template.getPackaging());
    final ArrayList<MavenArtifactInfo> result=new ArrayList<MavenArtifactInfo>();
    final SearchResults results=new Endpoint.DataIndex(url).getArtifactlistAsSearchResults(null,template.getGroupId(),template.getArtifactId(),template.getVersion(),template.getClassifier(),template.getClassNames());
    final boolean canTrySwitchGAV=template.getArtifactId() == null && template.getGroupId() != null;
    boolean tooManyResults=results.isTooManyResults();
    final SearchResults.Data data=results.getData();
    if (data != null) {
      for (      ArtifactType each : data.getArtifact()) {
        if (!Comparing.equal(each.packaging,packaging))         continue;
        result.add(convertArtifactInfo(each));
      }
    }
    if (canTrySwitchGAV) {
      final SearchResults results2=new Endpoint.DataIndex(url).getArtifactlistAsSearchResults(null,null,template.getGroupId(),template.getVersion(),template.getClassifier(),template.getClassNames());
      tooManyResults=tooManyResults || results2.isTooManyResults();
      final SearchResults.Data data2=results2.getData();
      if (data2 != null) {
        for (        ArtifactType each : data2.getArtifact()) {
          if (!Comparing.equal(each.packaging,packaging))           continue;
          result.add(convertArtifactInfo(each));
        }
      }
    }
    if (tooManyResults)     result.add(null);
    return result;
  }
 catch (  JAXBException e) {
    throw new IOException(e);
  }
}
