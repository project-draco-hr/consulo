{
  revision1.loadContent();
  final byte[] content1=revision1.getContent();
  if (content1 == null)   throw new VcsException("Failed to load content for revision " + revision1.getRevisionNumber().asString());
  revision2.loadContent();
  final byte[] content2=revision2.getContent();
  if (content2 == null)   throw new VcsException("Failed to load content for revision " + revision2.getRevisionNumber().asString());
  final SimpleDiffRequest diffData=new SimpleDiffRequest(project,filePath.getPresentableUrl());
  diffData.addHint(DiffTool.HINT_SHOW_FRAME);
  final Document doc=filePath.getDocument();
  final Charset charset=filePath.getCharset();
  final FileType fileType=filePath.getFileType();
  diffData.setContentTitles(title1,title2);
  diffData.setContents(createContent(project,content1,revision1,doc,charset,fileType),createContent(project,content2,revision2,doc,charset,fileType));
  DiffManager.getInstance().getDiffTool().show(diffData);
}
