{
  final String ext=file.getExtension();
  if (SUPPORTED_FILE_TYPES.contains(ext)) {
    return ProjectRootManager.getInstance(myProject).getFileIndex().getSourceRootForFile(file) == null;
  }
  if (SUPPORTED_IN_TEST_DATA_FILE_TYPES.contains(ext)) {
    int i=0;
    VirtualFile parent=file.getParent();
    while (parent != null && i < MAX_HOPES) {
      if (parent.getName().toLowerCase().contains(TEST_DATA)) {
        return true;
      }
      i++;
      parent=parent.getParent();
    }
  }
  return false;
}
