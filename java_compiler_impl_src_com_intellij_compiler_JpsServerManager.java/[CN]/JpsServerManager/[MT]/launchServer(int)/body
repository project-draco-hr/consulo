{
  final Sdk projectJdk=JavaAwareProjectJdkTableImpl.getInstanceEx().getInternalJdk();
  final GeneralCommandLine cmdLine=new GeneralCommandLine();
  cmdLine.setExePath(((JavaSdkType)projectJdk.getSdkType()).getVMExecutablePath(projectJdk));
  cmdLine.addParameter("-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5007");
  cmdLine.addParameter("-Xmx256m");
  cmdLine.addParameter("-classpath");
  final List<File> cp=Bootstrap.buildServerProcessClasspath();
  cmdLine.addParameter(classpathToString(cp));
  cmdLine.addParameter("org.jetbrains.jpsservice.Server");
  cmdLine.addParameter(Integer.toString(port));
  final File workDirectory=new File(PathManager.getSystemPath(),COMPILE_SERVER_SYSTEM_ROOT);
  workDirectory.mkdirs();
  cmdLine.setWorkDirectory(workDirectory);
  return cmdLine.createProcess();
}
