{
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  if (node.getUserObject() instanceof CommittedChangeList) {
    CommittedChangeList changeList=(CommittedChangeList)node.getUserObject();
    boolean truncated=false;
    String description=changeList.getName().trim();
    int pos=description.indexOf("\n");
    if (pos >= 0) {
      description=description.substring(0,pos).trim();
      truncated=true;
    }
    if (description.length() > MAX_VISIBLE_LENGTH) {
      pos=MAX_VISIBLE_LENGTH;
      while (pos > 0 && description.charAt(pos) != ' ') {
        pos--;
      }
      if (pos == 0) {
        pos=MAX_VISIBLE_LENGTH;
      }
      description=description.substring(0,pos);
      truncated=true;
    }
    append(description,SimpleTextAttributes.REGULAR_ATTRIBUTES,true);
    if (truncated) {
      append(" ",SimpleTextAttributes.REGULAR_ATTRIBUTES);
      append(VcsBundle.message("changes.browser.details.marker"),new SimpleTextAttributes(SimpleTextAttributes.STYLE_UNDERLINE,Color.blue));
    }
    append(" - ",SimpleTextAttributes.REGULAR_ATTRIBUTES);
    append(changeList.getCommitterName(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
    append(" at ",SimpleTextAttributes.REGULAR_ATTRIBUTES);
    append(myDateFormat.format(changeList.getCommitDate()),SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
 else   if (node.getUserObject() != null) {
    append(node.getUserObject().toString(),SimpleTextAttributes.REGULAR_BOLD_ATTRIBUTES);
  }
}
