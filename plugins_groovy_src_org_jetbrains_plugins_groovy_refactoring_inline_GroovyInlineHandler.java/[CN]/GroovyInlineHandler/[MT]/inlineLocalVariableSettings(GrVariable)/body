{
  final Collection<PsiReference> refs=ReferencesSearch.search(element,GlobalSearchScope.projectScope(element.getProject()),false).findAll();
  if (refs.isEmpty()) {
    String message=GroovyRefactoringBundle.message("variable.is.never.used.0",element);
    CommonRefactoringUtil.showErrorMessage(REFACTORING_NAME,message,HelpID.INLINE_VARIABLE,element.getProject());
    return null;
  }
  return new Settings(){
    public boolean isOnlyOneReferenceToInline(){
      return refs.size() == 1 && refs.iterator().next().isReferenceTo(element);
    }
  }
;
}
