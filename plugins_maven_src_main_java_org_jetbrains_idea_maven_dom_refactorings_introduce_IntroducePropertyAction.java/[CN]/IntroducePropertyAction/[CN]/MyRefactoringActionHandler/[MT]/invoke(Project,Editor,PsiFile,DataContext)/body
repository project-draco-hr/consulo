{
  if (!editor.getSelectionModel().hasSelection())   return;
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  final int startOffset=editor.getSelectionModel().getSelectionStart();
  final int endOffset=editor.getSelectionModel().getSelectionEnd();
  XmlElement selectedElement=getSelectedElement(file,startOffset,endOffset);
  if (selectedElement != null) {
    String stringValue=selectedElement.getText();
    if (stringValue != null) {
      final MavenDomProjectModel model=MavenDomUtil.getMavenDomModel(file,MavenDomProjectModel.class);
      final String selectedString=editor.getSelectionModel().getSelectedText();
      if (model == null || StringUtil.isEmptyOrSpaces(selectedString))       return;
      IntroducePropertyDialog dialog=new IntroducePropertyDialog(project,selectedElement,model,null,selectedString);
      dialog.show();
      if (dialog.getExitCode() == DialogWrapper.OK_EXIT_CODE) {
        final String enteredName=dialog.getEnteredName();
        final String replaceWith=PREFIX + enteredName + SUFFIX;
        final MavenDomProjectModel selectedProject=dialog.getSelectedProject();
        new WriteCommandAction(project){
          @Override protected void run(          Result result) throws Throwable {
            editor.getDocument().replaceString(startOffset,endOffset,replaceWith);
            PsiDocumentManager.getInstance(project).commitAllDocuments();
            createMavenProperty(selectedProject,enteredName,selectedString);
            PsiDocumentManager.getInstance(project).commitAllDocuments();
          }
        }
.execute();
        showFindUsages(project,selectedString,replaceWith,selectedProject);
      }
    }
  }
}
