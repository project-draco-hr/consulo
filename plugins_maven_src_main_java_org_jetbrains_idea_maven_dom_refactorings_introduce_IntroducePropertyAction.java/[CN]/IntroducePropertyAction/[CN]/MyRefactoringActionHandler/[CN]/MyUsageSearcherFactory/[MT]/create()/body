{
  return new UsageSearcher(){
    Set<UsageInfo> usages=new HashSet<UsageInfo>();
    public void generate(    final Processor<Usage> processor){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          collectUsages(myModel);
          for (          MavenDomProjectModel model : MavenDomProjectProcessorUtils.getChildrenProjects(myModel)) {
            collectUsages(model);
          }
        }
        private void collectUsages(        @NotNull MavenDomProjectModel model){
          if (model.isValid()) {
            final XmlElement root=model.getXmlElement();
            if (root != null) {
              root.acceptChildren(new XmlElementVisitor(){
                @Override public void visitXmlText(                XmlText text){
                  XmlTag xmlTag=PsiTreeUtil.getParentOfType(text,XmlTag.class);
                  if (xmlTag != null && !xmlTag.getName().equals(myPropertyName)) {
                    usages.addAll(getUsages(text));
                  }
                }
                @Override public void visitXmlAttributeValue(                XmlAttributeValue value){
                  XmlTag xmlTag=PsiTreeUtil.getParentOfType(value,XmlTag.class);
                  if (xmlTag != null && !xmlTag.equals(root)) {
                    usages.addAll(getUsages(value));
                  }
                }
                @Override public void visitXmlElement(                XmlElement element){
                  element.acceptChildren(this);
                }
              }
);
            }
          }
        }
      }
);
      for (      UsageInfo2UsageAdapter adapter : UsageInfo2UsageAdapter.convert(usages.toArray(new UsageInfo[usages.size()]))) {
        processor.process(adapter);
      }
    }
  }
;
}
