{
  ApplicationManager.getApplication().assertIsDispatchThread();
  final ModalityStateListener listener=new ModalityStateListener(){
    public void beforeModalityStateChanged(    boolean entering){
      if (entering) {
        mySuppendHelper.suspend();
      }
 else {
        mySuppendHelper.resume();
      }
    }
  }
;
  LaterInvocator.addModalityStateListener(listener);
  if (MavenUtil.isInModalContext()) {
    mySuppendHelper.suspend();
  }
  Disposer.register(MavenMergingUpdateQueue.this,new Disposable(){
    public void dispose(){
      LaterInvocator.removeModalityStateListener(listener);
    }
  }
);
}
