{
  int start=range.getStartOffset();
  int end=range.getEndOffset();
  int insertionIndex=myRegions.size();
  for (int i=0; i < myRegions.size(); i++) {
    FoldRegion region=myRegions.get(i);
    int rStart=region.getStartOffset();
    int rEnd=region.getEndOffset();
    if (rStart < start) {
      if (region.isValid() && start < rEnd && rEnd < end) {
        return false;
      }
    }
 else     if (rStart == start) {
      if (rEnd == end) {
        return false;
      }
 else       if (rEnd > end) {
        insertionIndex=Math.min(insertionIndex,i);
      }
    }
 else {
      insertionIndex=Math.min(insertionIndex,i);
      if (rStart > end) {
        break;
      }
      if (region.isValid() && rStart < end && end < rEnd) {
        return false;
      }
    }
  }
  myRegions.add(insertionIndex,range);
  return true;
}
