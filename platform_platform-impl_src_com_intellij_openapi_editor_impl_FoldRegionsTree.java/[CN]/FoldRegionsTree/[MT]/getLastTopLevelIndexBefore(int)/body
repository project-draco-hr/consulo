{
  int[] endOffsets=myCachedEndOffsets;
  if (!isFoldingEnabledAndUpToDate() || endOffsets == null)   return -1;
  int start=0;
  int end=endOffsets.length - 1;
  while (start <= end) {
    int i=(start + end) / 2;
    if (offset < endOffsets[i]) {
      end=i - 1;
    }
 else     if (offset > endOffsets[i]) {
      start=i + 1;
    }
 else {
      return i;
    }
  }
  return end;
}
