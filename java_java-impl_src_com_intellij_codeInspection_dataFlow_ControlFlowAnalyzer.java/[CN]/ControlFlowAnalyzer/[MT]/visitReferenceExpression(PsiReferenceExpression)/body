{
  startElement(expression);
  DfaValue dfaValue=myFactory.create(expression);
  PsiElement resolved=expression.resolve();
  if (dfaValue instanceof DfaVariableValue) {
    DfaVariableValue dfaVariable=(DfaVariableValue)dfaValue;
    PsiVariable psiVariable=dfaVariable.getPsiVariable();
    if (psiVariable instanceof PsiField) {
      addField(dfaVariable);
    }
  }
  final PsiExpression qualifierExpression=expression.getQualifierExpression();
  if (qualifierExpression != null) {
    qualifierExpression.accept(this);
    if (resolved instanceof PsiField) {
      addInstruction(new FieldReferenceInstruction(expression,null));
    }
 else {
      addInstruction(new PopInstruction());
    }
  }
  if (dfaValue == null && resolved instanceof PsiField) {
    dfaValue=createDfaValueForAnotherInstanceMemberAccess(expression,(PsiField)resolved);
  }
  addInstruction(new PushInstruction(dfaValue,expression));
  finishElement(expression);
}
