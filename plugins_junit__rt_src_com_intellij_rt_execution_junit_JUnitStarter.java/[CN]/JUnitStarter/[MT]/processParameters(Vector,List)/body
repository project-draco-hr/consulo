{
  boolean isJunit4=true;
  Vector result=new Vector(args.size());
  for (int i=0; i < args.size(); i++) {
    String arg=(String)args.get(i);
    if (arg.startsWith(IDE_VERSION)) {
    }
 else     if (arg.equals(JUNIT3_PARAMETER)) {
      isJunit4=false;
    }
 else {
      if (arg.startsWith("@@@")) {
        final int pos=arg.indexOf(',');
        ourForkMode=arg.substring(3,pos);
        ourCommandFileName=arg.substring(pos + 1);
        continue;
      }
 else       if (arg.startsWith("@@")) {
        if (new File(arg.substring(2)).exists()) {
          try {
            final BufferedReader reader=new BufferedReader(new FileReader(arg.substring(2)));
            String line;
            while ((line=reader.readLine()) != null) {
              listeners.add(line);
            }
          }
 catch (          Exception e) {
            e.printStackTrace();
          }
        }
        continue;
      }
 else       if (arg.startsWith(SOCKET)) {
        final int port=Integer.parseInt(arg.substring(SOCKET.length()));
        try {
          final Socket socket=new Socket(InetAddress.getByName(null),port);
          final DataInputStream os=new DataInputStream(socket.getInputStream());
          try {
            os.readBoolean();
          }
  finally {
            os.close();
          }
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
        continue;
      }
      result.addElement(arg);
    }
  }
  args.removeAllElements();
  for (int i=0; i < result.size(); i++) {
    String arg=(String)result.get(i);
    args.addElement(arg);
  }
  if (!isJunit4) {
    try {
      Class.forName("org.junit.runner.Computer");
    }
 catch (    ClassNotFoundException e) {
      return false;
    }
  }
  final String forceJUnit3=System.getProperty("idea.force.junit3");
  if (forceJUnit3 != null && Boolean.valueOf(forceJUnit3).booleanValue())   return false;
  try {
    Class.forName("org.junit.Test");
    return true;
  }
 catch (  ClassNotFoundException e) {
    return false;
  }
}
