{
  if (xmlFile == null)   return;
  try {
    final XmlDocument document=xmlFile.getDocument();
    if (document != null) {
      final XmlTag rootTag=document.getRootTag();
      final String externalName=PsiFormatUtil.getExternalName(listOwner,false);
      if (rootTag != null) {
        for (        XmlTag tag : rootTag.getSubTags()) {
          if (Comparing.strEqual(tag.getAttributeValue("name"),externalName)) {
            tag.add(XmlElementFactory.getInstance(xmlFile.getProject()).createTagFromText("<annotation name=\'" + annotationFQName + "\'/>"));
            return;
          }
        }
        @NonNls final String text="<item name=\'" + externalName + "\'>\n"+ "  <annotation name=\'"+ annotationFQName+ "\'/>\n"+ "</item>";
        rootTag.add(XmlElementFactory.getInstance(xmlFile.getProject()).createTagFromText(text));
      }
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
 finally {
    if (codeUsageFile.getVirtualFile().isInLocalFileSystem()) {
      UndoUtil.markPsiFileForUndo(codeUsageFile);
    }
  }
}
