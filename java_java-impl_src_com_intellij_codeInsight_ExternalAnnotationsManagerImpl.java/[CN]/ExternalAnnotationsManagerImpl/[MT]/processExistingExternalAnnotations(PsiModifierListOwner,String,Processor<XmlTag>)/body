{
  try {
    final List<XmlFile> files=findExternalAnnotationsXmlFiles(listOwner);
    if (files == null) {
      notifyAfterAnnotationChanging(listOwner,annotationFQN,false);
      return false;
    }
    boolean processedAnything=false;
    for (    final XmlFile file : files) {
      if (!file.isValid()) {
        continue;
      }
      if (ReadonlyStatusHandler.getInstance(myPsiManager.getProject()).ensureFilesWritable(file.getVirtualFile()).hasReadonlyFiles()) {
        continue;
      }
      final XmlDocument document=file.getDocument();
      if (document == null) {
        continue;
      }
      final XmlTag rootTag=document.getRootTag();
      if (rootTag == null) {
        continue;
      }
      final String externalName=getExternalName(listOwner,false);
      final String oldExternalName=getNormalizedExternalName(listOwner);
      for (      final XmlTag tag : rootTag.getSubTags()) {
        final String className=tag.getAttributeValue("name");
        if (!Comparing.strEqual(className,externalName) && !Comparing.strEqual(className,oldExternalName)) {
          continue;
        }
        for (        final XmlTag annotationTag : tag.getSubTags()) {
          if (!Comparing.strEqual(annotationTag.getAttributeValue("name"),annotationFQN)) {
            continue;
          }
          CommandProcessor.getInstance().executeCommand(myPsiManager.getProject(),new Runnable(){
            @Override public void run(){
              try {
                annotationTagProcessor.process(annotationTag);
                commitChanges(file);
              }
 catch (              IncorrectOperationException e) {
                LOG.error(e);
              }
            }
          }
,ExternalAnnotationsManagerImpl.class.getName(),null);
          processedAnything=true;
        }
      }
    }
    notifyAfterAnnotationChanging(listOwner,annotationFQN,processedAnything);
    return processedAnything;
  }
  finally {
    dropCache();
  }
}
