{
  if (entry instanceof LibraryOrderEntry) {
    Library library=((LibraryOrderEntry)entry).getLibrary();
    LOG.assertTrue(library != null);
    final ModifiableRootModel rootModel=ModuleRootManager.getInstance(entry.getOwnerModule()).getModifiableModel();
    final Library.ModifiableModel model=library.getModifiableModel();
    model.addRoot(vFile,AnnotationOrderRootType.getInstance());
    model.commit();
    rootModel.commit();
  }
 else   if (entry instanceof ModuleSourceOrderEntry) {
    final ModifiableRootModel model=ModuleRootManager.getInstance(entry.getOwnerModule()).getModifiableModel();
    final JavaModuleExternalPaths extension=model.getModuleExtension(JavaModuleExternalPaths.class);
    extension.setExternalAnnotationUrls(ArrayUtil.mergeArrays(extension.getExternalAnnotationsUrls(),vFile.getUrl()));
    model.commit();
  }
 else   if (entry instanceof JdkOrderEntry) {
    final SdkModificator sdkModificator=((JdkOrderEntry)entry).getJdk().getSdkModificator();
    sdkModificator.addRoot(vFile,AnnotationOrderRootType.getInstance());
    sdkModificator.commitChanges();
  }
  myExternalAnnotations.clear();
}
