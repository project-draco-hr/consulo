{
  super(psiManager);
  myBus=project.getMessageBus();
  final MessageBusConnection connection=myBus.connect(project);
  connection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    @Override public void rootsChanged(    ModuleRootEvent event){
      dropCache();
      notifyChangedDramatically();
    }
  }
);
  final MyVirtualFileListener fileListener=new MyVirtualFileListener();
  VirtualFileManager.getInstance().addVirtualFileListener(fileListener);
  Disposer.register(myPsiManager.getProject(),new Disposable(){
    @Override public void dispose(){
      VirtualFileManager.getInstance().removeVirtualFileListener(fileListener);
    }
  }
);
}
