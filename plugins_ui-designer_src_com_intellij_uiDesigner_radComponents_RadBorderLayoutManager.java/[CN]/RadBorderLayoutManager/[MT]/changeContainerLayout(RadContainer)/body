{
  ArrayList<RadComponent> componentsInBorder=new ArrayList<RadComponent>();
  boolean borderHorz=true;
  if (container.getComponentCount() == 1) {
    componentsInBorder.add(container.getComponent(0));
  }
 else   if (container.getLayoutManager().isIndexed()) {
    for (    RadComponent c : container.getComponents()) {
      if (!(c instanceof RadHSpacer) && !(c instanceof RadVSpacer)) {
        componentsInBorder.add(c);
      }
    }
  }
 else   if (container.getLayoutManager().isGrid()) {
    if (container.getGridRowCount() == 1) {
      copyGridLine(container,componentsInBorder,true);
    }
 else     if (container.getGridColumnCount() == 1) {
      copyGridLine(container,componentsInBorder,false);
      borderHorz=false;
    }
  }
  if ((container.getComponentCount() > 0 && componentsInBorder.size() == 0) || componentsInBorder.size() > 3) {
    throw new IncorrectOperationException("Component layout is too complex to convert to BorderLayout");
  }
  for (int i=container.getComponentCount() - 1; i >= 0; i--) {
    container.removeComponent(container.getComponent(i));
  }
  super.changeContainerLayout(container);
  if (componentsInBorder.size() == 1) {
    componentsInBorder.get(0).setCustomLayoutConstraints(BorderLayout.CENTER);
  }
 else   if (componentsInBorder.size() > 1) {
    componentsInBorder.get(0).setCustomLayoutConstraints(borderHorz ? BorderLayout.WEST : BorderLayout.NORTH);
    componentsInBorder.get(1).setCustomLayoutConstraints(BorderLayout.CENTER);
    if (componentsInBorder.size() > 2) {
      componentsInBorder.get(2).setCustomLayoutConstraints(borderHorz ? BorderLayout.EAST : BorderLayout.SOUTH);
    }
  }
  for (  RadComponent c : componentsInBorder) {
    container.addComponent(c);
  }
}
