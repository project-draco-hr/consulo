{
  int offset=editor.getCaretModel().getOffset();
  final Document doc=editor.getDocument();
  CharSequence chars=doc.getCharsSequence();
  if (offset == doc.getTextLength() || chars.charAt(offset) == '\n')   return false;
  int newLineOffset=CharArrayUtil.shiftBackward(chars,offset - 1," \t");
  return newLineOffset < 0 || chars.charAt(newLineOffset) == '\n';
}
