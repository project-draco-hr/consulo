{
  ModifiableRootModel modifiableRootModel=myModuleEditor.getModifiableRootModelProxy();
  String copyName=myCopy ? modifiableRootModel.getCurrentLayerName() : null;
  String newName=Messages.showInputDialog(modifiableRootModel.getProject(),"Name","Enter Name",Messages.getQuestionIcon(),createUniqueSdkName(copyName,modifiableRootModel),new InputValidator(){
    @RequiredDispatchThread @Override public boolean checkInput(    String inputString){
      String trimString=inputString.trim();
      return !StringUtil.isEmpty(trimString) && modifiableRootModel.findLayerByName(trimString) == null;
    }
    @RequiredDispatchThread @Override public boolean canClose(    String inputString){
      return true;
    }
  }
);
  if (newName != null) {
    modifiableRootModel.addLayer(newName.trim(),copyName,true);
    String moduleDirUrl=modifiableRootModel.getModule().getModuleDirUrl();
    if (moduleDirUrl != null) {
      modifiableRootModel.addContentEntry(moduleDirUrl);
    }
  }
}
