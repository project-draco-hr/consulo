{
  if (!UIUtil.isUnderGTKLookAndFeel() || !(contents instanceof JPopupMenu))   return;
  for (Class<?> aClass=popup.getClass(); aClass != null && Popup.class.isAssignableFrom(aClass); aClass=aClass.getSuperclass()) {
    try {
      final Method getComponent=aClass.getDeclaredMethod("getComponent");
      getComponent.setAccessible(true);
      final Object component=getComponent.invoke(popup);
      if (component instanceof JWindow) {
        ((JWindow)component).setSize(new Dimension(0,0));
      }
      break;
    }
 catch (    Exception ignored) {
    }
  }
}
