{
  fixPopupWeight();
  fixGtkPopupStyle();
  final UIDefaults uiDefaults=UIManager.getLookAndFeelDefaults();
  if (UIUtil.isUnderAquaLookAndFeel()) {
    uiDefaults.put("PopupMenuUI",MacPopupMenuUI.class.getCanonicalName());
    uiDefaults.put("Menu.invertedArrowIcon",getAquaMenuInvertedIcon());
    uiDefaults.put("Menu.disabledArrowIcon",getAquaMenuDisabledIcon());
  }
  initInputMapDefaults(uiDefaults);
  UIManager.put("Button.defaultButtonFollowsFocus",Boolean.FALSE);
  patchFileChooserStrings(uiDefaults);
  if (shouldPatchLAFFonts()) {
    storeOriginalFontDefaults(uiDefaults);
    initFontDefaults(uiDefaults);
  }
 else {
    restoreOriginalFontDefaults(uiDefaults);
  }
  patchOptionPaneIcons(uiDefaults);
  Frame[] frames=Frame.getFrames();
  for (  Frame frame : frames) {
    updateUI(frame);
  }
  fireLookAndFeelChanged();
}
