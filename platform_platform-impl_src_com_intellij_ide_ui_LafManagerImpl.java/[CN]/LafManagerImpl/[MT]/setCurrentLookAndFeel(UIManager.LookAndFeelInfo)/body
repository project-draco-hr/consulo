{
  if (findLaf(lookAndFeelInfo.getClassName()) == null) {
    LOG.error("unknown LookAndFeel : " + lookAndFeelInfo);
    return;
  }
  if (IDEA_LAF_CLASS_NAME.equals(lookAndFeelInfo.getClassName())) {
    IdeaLaf laf=new IdeaLaf();
    MetalLookAndFeel.setCurrentTheme(new IdeaBlueMetalTheme());
    try {
      UIManager.setLookAndFeel(laf);
    }
 catch (    Exception exc) {
      Messages.showMessageDialog(IdeBundle.message("error.cannot.set.look.and.feel",lookAndFeelInfo.getName()),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      return;
    }
  }
 else {
    try {
      LookAndFeel laf=((LookAndFeel)Class.forName(lookAndFeelInfo.getClassName()).newInstance());
      if (laf instanceof MetalLookAndFeel) {
        MetalLookAndFeel.setCurrentTheme(new DefaultMetalTheme());
      }
      UIManager.setLookAndFeel(laf);
    }
 catch (    Exception exc) {
      Messages.showMessageDialog(IdeBundle.message("error.cannot.set.look.and.feel",lookAndFeelInfo.getName()),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      return;
    }
  }
  myCurrentLaf=lookAndFeelInfo;
  checkLookAndFeel(lookAndFeelInfo,false);
}
