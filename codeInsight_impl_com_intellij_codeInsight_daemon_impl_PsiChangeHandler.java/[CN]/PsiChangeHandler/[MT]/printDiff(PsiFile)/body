{
  if (containingFile != null && "x.xml".equals(containingFile.getName()))   try {
    if (copy == null) {
      return;
    }
    containingFile.accept(new PsiRecursiveElementVisitor(){
      private boolean ignore;
      public void visitElement(      PsiElement element){
        if (!ignore && !oldElements.remove(element)) {
          ignore=true;
          System.out.println("'" + first(element) + "' added");
          super.visitElement(element);
          ignore=false;
        }
 else {
          super.visitElement(element);
        }
      }
    }
);
    for (    PsiElement element : oldElements) {
      System.out.println("'" + first(element) + "' removed");
    }
  }
  finally {
    copy=containingFile.copy();
    oldElements.clear();
    containingFile.accept(new PsiRecursiveElementVisitor(){
      public void visitElement(      PsiElement element){
        oldElements.add(element);
        super.visitElement(element);
      }
    }
);
  }
}
