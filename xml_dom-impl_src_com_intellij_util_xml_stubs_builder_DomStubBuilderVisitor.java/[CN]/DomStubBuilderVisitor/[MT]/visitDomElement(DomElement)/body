{
  if (element.getAnnotation(Stubbed.class) != null || element.getChildDescription().isStubbed()) {
    XmlElement xmlElement=element.getXmlElement();
    if (xmlElement instanceof XmlTag) {
      ElementStub old=myRoot;
      boolean custom=element.getChildDescription() instanceof CustomDomChildrenDescription;
      myRoot=new ElementStub(myRoot,StringRef.fromString(((PsiNamedElement)xmlElement).getName()),custom);
      List<DomElement> children=DomUtil.getDefinedChildren(element,true,true);
      for (      DomElement child : children) {
        visitDomElement(child);
      }
      if (old != null) {
        myRoot=old;
      }
    }
 else     if (xmlElement instanceof XmlAttribute) {
      new AttributeStub(myRoot,StringRef.fromString(((XmlAttribute)xmlElement).getLocalName()),((XmlAttribute)xmlElement).getValue());
    }
  }
}
