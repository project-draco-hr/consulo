{
  if (offset == 0) {
    return 0;
  }
  int line=-1;
  int currentOffset=0;
  while (currentOffset < offset) {
    line++;
    currentOffset=CharArrayUtil.shiftForwardUntil(myText,currentOffset,"\n") + 1;
    if (currentOffset == offset) {
      line++;
    }
  }
  return line;
}
