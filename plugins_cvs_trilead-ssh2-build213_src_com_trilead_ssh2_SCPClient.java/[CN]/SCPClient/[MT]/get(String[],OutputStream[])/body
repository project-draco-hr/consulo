{
  Session sess=null;
  if ((remoteFiles == null) || (targets == null))   throw new IllegalArgumentException("Null argument.");
  if (remoteFiles.length != targets.length)   throw new IllegalArgumentException("Length of arguments does not match.");
  if (remoteFiles.length == 0)   return;
  String cmd="scp -f";
  for (int i=0; i < remoteFiles.length; i++) {
    if (remoteFiles[i] == null)     throw new IllegalArgumentException("Cannot accept null filename.");
    String tmp=remoteFiles[i].trim();
    if (tmp.length() == 0)     throw new IllegalArgumentException("Cannot accept empty filename.");
    cmd+=(" " + tmp);
  }
  try {
    sess=conn.openSession();
    sess.execCommand(cmd);
    receiveFiles(sess,targets);
  }
 catch (  IOException e) {
    throw (IOException)new IOException("Error during SCP transfer.").initCause(e);
  }
 finally {
    if (sess != null)     sess.close();
  }
}
