{
  parsePackageStatement(builder);
  final Pair<PsiBuilder.Marker,Boolean> impListInfo=parseImportList(builder,importListStoppers);
  Boolean firstDeclarationOk=null;
  PsiBuilder.Marker firstDeclaration=null;
  PsiBuilder.Marker invalidElements=null;
  while (!builder.eof()) {
    if (builder.getTokenType() == JavaTokenType.SEMICOLON) {
      if (invalidElements != null) {
        invalidElements.error(error(bundle,errorMessageKey));
        invalidElements=null;
      }
      builder.advanceLexer();
      if (firstDeclarationOk == null)       firstDeclarationOk=false;
      continue;
    }
    final PsiBuilder.Marker declaration=parseInitial(builder);
    if (declaration != null) {
      if (invalidElements != null) {
        invalidElements.errorBefore(error(bundle,errorMessageKey),declaration);
        invalidElements=null;
      }
      if (firstDeclarationOk == null) {
        firstDeclarationOk=exprType(declaration) != JavaElementType.MODIFIER_LIST;
        if (firstDeclarationOk) {
          firstDeclaration=declaration;
        }
      }
      continue;
    }
    if (invalidElements == null) {
      invalidElements=builder.mark();
    }
    builder.advanceLexer();
    if (firstDeclarationOk == null)     firstDeclarationOk=false;
  }
  if (invalidElements != null) {
    invalidElements.error(error(bundle,errorMessageKey));
  }
  if (impListInfo.second && firstDeclarationOk == Boolean.TRUE) {
    impListInfo.first.setCustomEdgeTokenBinders(PRECEDING_COMMENT_BINDER,null);
    firstDeclaration.setCustomEdgeTokenBinders(SPECIAL_PRECEDING_COMMENT_BINDER,null);
  }
}
