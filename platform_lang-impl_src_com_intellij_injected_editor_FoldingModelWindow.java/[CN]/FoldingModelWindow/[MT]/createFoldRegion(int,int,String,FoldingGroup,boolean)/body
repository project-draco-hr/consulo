{
  TextRange hostRange=myDocumentWindow.injectedToHost(new TextRange(startOffset,endOffset));
  if (hostRange.getLength() < 2)   return null;
  FoldRegion hostRegion=myDelegate.createFoldRegion(hostRange.getStartOffset(),hostRange.getEndOffset(),placeholder,group,neverExpands);
  int startShift=Math.max(0,myDocumentWindow.hostToInjected(hostRange.getStartOffset()) - startOffset);
  int endShift=Math.max(0,endOffset - myDocumentWindow.hostToInjected(hostRange.getEndOffset()) - startShift);
  FoldingRegionWindow window=new FoldingRegionWindow(myDocumentWindow,myEditorWindow,(FoldRegionImpl)hostRegion,startShift,endShift);
  hostRegion.putUserData(FOLD_REGION_WINDOW,window);
  return window;
}
