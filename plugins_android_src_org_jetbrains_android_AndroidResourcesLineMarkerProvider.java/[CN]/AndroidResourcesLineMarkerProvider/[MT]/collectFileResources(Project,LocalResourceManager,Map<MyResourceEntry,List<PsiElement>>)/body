{
  final PsiManager psiManager=PsiManager.getInstance(project);
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      List<VirtualFile> resourceSubdirs=resManager.getResourceSubdirs(null);
      for (      VirtualFile dir : resourceSubdirs) {
        String resType=AndroidCommonUtils.getResourceTypeByDirName(dir.getName());
        if (resType != null) {
          for (          VirtualFile resourceFile : dir.getChildren()) {
            if (!resourceFile.isDirectory()) {
              PsiFile resourcePsiFile=psiManager.findFile(resourceFile);
              if (resourcePsiFile != null) {
                String resName=AndroidCommonUtils.getResourceName(resType,resourceFile.getName());
                MyResourceEntry key=new MyResourceEntry(resName,resType);
                List<PsiElement> list=result.get(key);
                if (list == null) {
                  list=new ArrayList<PsiElement>();
                  result.put(key,list);
                }
                list.add(resourcePsiFile);
              }
            }
          }
        }
      }
    }
  }
);
}
