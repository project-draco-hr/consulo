{
  String query=getDefaultSearch();
  if (request != null) {
    query+=" " + request;
  }
  HttpMethod method=doREST("/rest/project/issues/?filter=" + encodeUrl(query) + "&max="+ max,false);
  InputStream stream=method.getResponseBodyAsStream();
  Element element=new SAXBuilder(false).build(stream).getRootElement();
  if ("error".equals(element.getName())) {
    throw new Exception(element.getText());
  }
  @SuppressWarnings({"unchecked"}) List<Object> children=element.getChildren("issue");
  List<Task> taskList=ContainerUtil.mapNotNull(children,new Function<Object,Task>(){
    public Task fun(    Object o){
      return createIssue((Element)o);
    }
  }
);
  return taskList.toArray(new Task[taskList.size()]);
}
