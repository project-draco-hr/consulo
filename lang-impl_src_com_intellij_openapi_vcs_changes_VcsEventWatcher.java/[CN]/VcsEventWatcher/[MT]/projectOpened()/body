{
  myConnection=myProject.getMessageBus().connect();
  myConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootListener(){
    public void beforeRootsChange(    ModuleRootEvent event){
    }
    public void rootsChanged(    ModuleRootEvent event){
      if (event.isCausedByDumbnessChange())       return;
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          if (myProject.isDisposed() || !DirectoryIndex.getInstance(myProject).isInitialized())           return;
          VcsDirtyScopeManager.getInstance(myProject).markEverythingDirty();
        }
      }
,ModalityState.NON_MODAL);
    }
  }
);
  WolfTheProblemSolver.getInstance(myProject).addProblemListener(myProblemListener);
}
