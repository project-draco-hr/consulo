{
  List<ReadWriteVariableInstruction> result=new ArrayList<ReadWriteVariableInstruction>();
  TObjectIntHashMap<String> namesIndex=buildNamesIndex(flow);
  TIntHashSet[] definitelyAssigned=new TIntHashSet[flow.length];
  int[] postorder=postorder(flow);
  int[] invpostorder=invPostorder(postorder);
  findReadsBeforeWrites(flow,definitelyAssigned,result,namesIndex,postorder,invpostorder,onlyFirstRead);
  if (result.size() == 0)   return ReadWriteVariableInstruction.EMPTY_ARRAY;
  return result.toArray(new ReadWriteVariableInstruction[result.size()]);
}
