{
  if (findClass(project,"junit.framework.TestCase") != null || findClass(project,"org.testng.annotations.Test") != null)   return;
  JLabel label=new JLabel(CodeInsightBundle.message("intention.create.test.no.testing.library"));
  JRadioButton junit3Button=new JRadioButton("JUnit3");
  JRadioButton junit4Button=new JRadioButton("JUnit4");
  JRadioButton testngButton=new JRadioButton("TestNG");
  ButtonGroup group=new ButtonGroup();
  group.add(junit3Button);
  group.add(junit4Button);
  group.add(testngButton);
  junit3Button.setSelected(true);
  testngButton.setEnabled(getTestNGJarPath() != null);
  JPanel buttonsPanel=new JPanel();
  BoxLayout l=new BoxLayout(buttonsPanel,BoxLayout.Y_AXIS);
  buttonsPanel.setLayout(l);
  buttonsPanel.add(junit3Button);
  buttonsPanel.add(junit4Button);
  buttonsPanel.add(testngButton);
  JPanel panel=new JPanel(new BorderLayout());
  panel.add(label,BorderLayout.NORTH);
  panel.add(buttonsPanel,BorderLayout.CENTER);
  DialogBuilder builder=new DialogBuilder(project);
  builder.setTitle(getText());
  builder.setCenterPanel(panel);
  int result=builder.show();
  if (result != 0)   return;
  final String[] path=new String[1];
  if (junit3Button.isSelected())   path[0]=JavaSdkUtil.getJunit3JarPath();
  if (junit4Button.isSelected())   path[0]=JavaSdkUtil.getJunit4JarPath();
  if (testngButton.isSelected())   path[0]=getTestNGJarPath();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      OrderEntryFix.addJarToRoots(path[0],srcModule);
    }
  }
);
}
