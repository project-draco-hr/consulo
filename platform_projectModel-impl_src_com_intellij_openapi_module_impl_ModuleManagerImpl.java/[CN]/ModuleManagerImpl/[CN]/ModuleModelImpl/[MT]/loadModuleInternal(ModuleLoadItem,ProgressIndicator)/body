{
  final VirtualFile moduleDir=VirtualFileManager.getInstance().findFileByUrl(item.getDirUrl());
  if (moduleDir == null || !moduleDir.exists() || !moduleDir.isDirectory()) {
    throw new IOException(ProjectBundle.message("module.dir.does.not.exist.error",item.getDirUrl()));
  }
  final String moduleName=item.getName();
  if (progressIndicator != null) {
    progressIndicator.setText2(moduleName);
  }
  for (  Module module : myPathToModule.values()) {
    if (module.getName().equals(moduleName)) {
      throw new ModuleWithNameAlreadyExists(ProjectBundle.message("module.already.exists.error",moduleName),moduleName);
    }
  }
  ModuleEx module=getModuleByDirUrl(moduleDir.getUrl());
  if (module == null) {
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      @Override public void run(){
        moduleDir.refresh(false,false);
      }
    }
,ModalityState.defaultModalityState());
    module=createAndLoadModule(item,this);
  }
  return module;
}
