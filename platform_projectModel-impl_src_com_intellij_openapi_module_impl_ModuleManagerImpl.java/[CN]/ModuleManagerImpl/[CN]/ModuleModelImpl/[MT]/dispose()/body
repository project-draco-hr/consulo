{
  assertWritable();
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  final Collection<Module> list=myModuleModel.myPathToModule.values();
  final Collection<Module> thisModules=myPathToModule.values();
  for (  Module thisModule : thisModules) {
    if (!list.contains(thisModule)) {
      fireModuleRemovedInModel(thisModule);
      Disposer.dispose(thisModule);
    }
  }
  for (  Module moduleToDispose : myModulesToDispose) {
    if (!list.contains(moduleToDispose)) {
      Disposer.dispose(moduleToDispose);
    }
  }
  clearRenamingStuff();
}
