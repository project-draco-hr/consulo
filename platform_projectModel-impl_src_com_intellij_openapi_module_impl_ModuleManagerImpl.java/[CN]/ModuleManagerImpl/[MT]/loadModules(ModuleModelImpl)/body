{
  if (myModuleLoadItems.isEmpty()) {
    return;
  }
  ModuleGroupInterner groupInterner=new ModuleGroupInterner();
  final ProgressIndicator progressIndicator=myProject.isDefault() ? null : ProgressIndicatorProvider.getGlobalProgressIndicator();
  if (progressIndicator != null) {
    progressIndicator.setText("Loading modules...");
    progressIndicator.setText2("");
  }
  myFailedModulePaths.clear();
  myFailedModulePaths.addAll(myModuleLoadItems);
  List<ModuleLoadingErrorDescription> errors=new ArrayList<ModuleLoadingErrorDescription>();
  for (  ModuleLoadItem moduleLoadItem : myModuleLoadItems) {
    if (progressIndicator != null) {
      progressIndicator.checkCanceled();
    }
    try {
      final Module module=moduleModel.loadModuleInternal(moduleLoadItem,progressIndicator);
      final String[] groups=moduleLoadItem.getGroups();
      if (groups != null) {
        groupInterner.setModuleGroupPath(moduleModel,module,groups);
      }
      myFailedModulePaths.remove(moduleLoadItem);
    }
 catch (    ProcessCanceledException e) {
      throw e;
    }
catch (    ModuleWithNameAlreadyExistsException e) {
      errors.add(ModuleLoadingErrorDescription.create(e.getMessage(),moduleLoadItem,this));
    }
catch (    ModuleDirIsNotExistsException e) {
      errors.add(ModuleLoadingErrorDescription.create(e.getMessage(),moduleLoadItem,this));
    }
catch (    Exception e) {
      errors.add(ModuleLoadingErrorDescription.create(ProjectBundle.message("module.cannot.load.error",moduleLoadItem.getName(),ExceptionUtil.getThrowableText(e)),moduleLoadItem,this));
    }
  }
  fireErrors(errors);
}
