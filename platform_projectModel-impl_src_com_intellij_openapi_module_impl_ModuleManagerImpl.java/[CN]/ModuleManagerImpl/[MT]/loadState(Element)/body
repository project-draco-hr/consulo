{
  List<ModuleLoadItem> prevPaths=myModuleLoadItems;
  loadState0(state);
  if (!prevPaths.isEmpty()) {
    ModifiableModuleModel model=getModifiableModel();
    Module[] existingModules=model.getModules();
    ModuleGroupInterner groupInterner=new ModuleGroupInterner();
    for (    Module existingModule : existingModules) {
      ModuleLoadItem correspondingPath=findCorrespondingPath(existingModule);
      if (correspondingPath == null) {
        model.disposeModule(existingModule);
      }
 else {
        myModuleLoadItems.remove(correspondingPath);
        String[] group=correspondingPath.getGroups() != null ? correspondingPath.getGroups() : null;
        if (!Arrays.equals(group,model.getModuleGroupPath(existingModule))) {
          groupInterner.setModuleGroupPath(model,existingModule,group);
        }
      }
    }
    loadModules((ModuleModelImpl)model);
    model.commit();
  }
}
