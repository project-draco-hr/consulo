{
  PsiElement[] declaredElements=decl.getDeclaredElements();
  if (declaredElements.length == 1) {
    if (!(declaredElements[0] instanceof PsiLocalVariable))     return false;
    PsiLocalVariable var=(PsiLocalVariable)declaredElements[0];
    if (var.getInitializer() == null)     return false;
    PsiTypeElement type=var.getTypeElement();
    if (PsiTreeUtil.isAncestor(type,element,false) || element.getParent() == var && ((PsiJavaToken)element).getTokenType() != JavaTokenType.SEMICOLON) {
      setText("Split into declaration and assignment");
      return true;
    }
  }
 else   if (declaredElements.length > 1) {
    if (decl.getParent() instanceof PsiForStatement)     return false;
    for (int i=0; i < declaredElements.length; i++) {
      PsiElement declaredElement=declaredElements[i];
      if (!(declaredElement instanceof PsiLocalVariable))       return false;
      PsiLocalVariable var=(PsiLocalVariable)declaredElement;
      PsiTypeElement type=var.getTypeElement();
      if (PsiTreeUtil.isAncestor(type,element,false) || element == var.getNameIdentifier()) {
        setText("Split into separate declarations");
        return true;
      }
    }
  }
  return false;
}
