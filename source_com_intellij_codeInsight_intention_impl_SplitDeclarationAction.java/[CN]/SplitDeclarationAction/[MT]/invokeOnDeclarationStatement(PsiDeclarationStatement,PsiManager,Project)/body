{
  if (decl.getDeclaredElements().length == 1) {
    PsiLocalVariable var=(PsiLocalVariable)decl.getDeclaredElements()[0];
    var.normalizeDeclaration();
    PsiExpressionStatement statement=(PsiExpressionStatement)psiManager.getElementFactory().createStatementFromText(var.getName() + "=xxx;",null);
    statement=(PsiExpressionStatement)CodeStyleManager.getInstance(project).reformat(statement);
    PsiAssignmentExpression assignment=(PsiAssignmentExpression)statement.getExpression();
    PsiExpression initializer=var.getInitializer();
    PsiExpression rExpression;
    if (initializer instanceof PsiArrayInitializerExpression) {
      rExpression=psiManager.getElementFactory().createExpressionFromText("new " + var.getTypeElement().getText() + " "+ initializer.getText(),null);
    }
 else {
      rExpression=initializer;
    }
    assignment.getRExpression().replace(rExpression);
    var.getInitializer().delete();
    PsiElement block=decl.getParent();
    if (block instanceof PsiForStatement) {
      block.getParent().addBefore(psiManager.getElementFactory().createVariableDeclarationStatement(var.getName(),var.getType(),null),block);
      decl.replace(statement);
    }
 else {
      block.addAfter(statement,decl);
    }
  }
 else {
    ((PsiLocalVariable)decl.getDeclaredElements()[0]).normalizeDeclaration();
  }
}
