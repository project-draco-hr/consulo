def maketemplater(ui, repo, tmpl):
    tmpl = templater.parsestring(tmpl, quoted=False)
    try:
        t = cmdutil.changeset_templater(ui, repo, False, None, None, False)
    except SyntaxError as inst:
        raise util.Abort(inst.args[0])
    t.use_template(tmpl)
    return t
