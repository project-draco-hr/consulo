{
  Set<T> res=immutableSet;
  if (res == null) {
synchronized (lock) {
      res=immutableSet;
      if (res == null) {
        immutableSet=res=Collections.unmodifiableSet(synchronizedSet);
      }
    }
  }
  return res;
}
