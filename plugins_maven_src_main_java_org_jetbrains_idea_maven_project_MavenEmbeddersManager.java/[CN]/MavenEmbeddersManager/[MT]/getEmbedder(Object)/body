{
synchronized (this) {
    LinkedList<MavenEmbedderWrapper> pool;
    pool=myPools.get(id);
    if (pool != null) {
      MavenEmbedderWrapper result=pool.poll();
      if (result != null) {
        myEmbeddersInUse.putValue(id,result);
        return result;
      }
    }
  }
  MavenEmbedderWrapper result=MavenEmbedderFactory.createEmbedder(myGeneralSettings);
synchronized (this) {
    myEmbeddersInUse.putValue(id,result);
  }
  return result;
}
