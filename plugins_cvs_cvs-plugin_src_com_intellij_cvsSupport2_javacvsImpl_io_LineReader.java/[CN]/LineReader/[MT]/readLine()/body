{
  if (myBytesBuffered == -1) {
    if (myLastEol != 0) {
      myLastEol=0;
      return getLineArray();
    }
    return null;
  }
 else   if (myPosition >= myBytesBuffered) {
    fillBuffer();
    if (myBytesBuffered == -1) {
      return getLineArray();
    }
  }
  final byte[] buffer=myBuffer;
  while (myBytesBuffered != -1) {
    for (; myPosition < myBytesBuffered; myPosition++) {
      final byte c=buffer[myPosition];
switch (c) {
case '\r':
        if (myLastEol == '\r') {
          return getLineArray();
        }
 else {
          myLastEol='\r';
        }
      break;
case '\n':
    if (myLastEol == '\n') {
      return getLineArray();
    }
 else {
      myLastEol='\n';
    }
  break;
default :
if (myLastEol != 0) {
  myLastEol=0;
  final byte[] line=getLineArray();
  myOutputStream.write(c);
  return line;
}
 else {
  myOutputStream.write(c);
}
break;
}
}
fillBuffer();
}
return getLineArray();
}
