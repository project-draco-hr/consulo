{
  final VirtualFile vf=createFileInCommand(AFILE,"initial content");
  myChangeListManager.addUnversionedFilesToVcs(vf);
  myChangeListManager.checkFilesAreInList(true,vf);
  myChangeListManager.commitFiles(vf);
  final HgPushCommand command=new HgPushCommand(myProject,myRepo.getDir(),myParentRepo.getDir().getUrl());
  final HgCommandResult result=command.execute();
  assertNotNull(result);
  assertFalse(HgErrorUtil.isAbort(result));
  myParentRepo.update();
  assertNotNull(myParentRepo.getDir().findChild(AFILE));
}
