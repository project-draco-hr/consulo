{
  if (newNode instanceof Token) {
    if (oldNode instanceof LeafElement) {
      return ((LeafElement)oldNode).textMatches(myText,((Token)newNode).myTokenStart,((Token)newNode).myTokenEnd) ? ThreeState.YES : ThreeState.NO;
    }
    if (oldNode.getElementType() instanceof IChameleonElementType && newNode.getTokenType() instanceof IChameleonElementType) {
      return ((TreeElement)oldNode).textMatches(myText,((Token)newNode).myTokenStart,((Token)newNode).myTokenEnd) ? ThreeState.YES : ThreeState.NO;
    }
  }
  return ThreeState.UNSURE;
}
