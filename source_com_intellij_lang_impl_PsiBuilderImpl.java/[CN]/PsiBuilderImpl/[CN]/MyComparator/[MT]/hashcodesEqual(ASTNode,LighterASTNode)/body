{
  if (n1 instanceof LeafElement && n2 instanceof Token) {
    return ((LeafElement)n1).textMatches(myText,((Token)n2).myTokenStart,((Token)n2).myTokenEnd);
  }
  if (n1 instanceof PsiErrorElement && n2.getTokenType() == ElementType.ERROR_ELEMENT) {
    final PsiErrorElement e1=((PsiErrorElement)n1);
    if (!Comparing.equal(e1.getErrorDescription(),getErrorMessage(n2)))     return false;
  }
  return ((TreeElement)n1).hc() == ((Node)n2).hc();
}
