{
  ProductionMarker child=marker.firstChild;
  while (child != null) {
    if (child instanceof StartMarker) {
      final StartMarker childMarker=(StartMarker)child;
      lexIndex=insertLeafs(lexIndex,childMarker.myLexemIndex,ast);
      CompositeElement childNode=createComposite(childMarker);
      TreeUtil.addChildren(ast,childNode);
      lexIndex=bind(childNode,childMarker,lexIndex);
      lexIndex=insertLeafs(lexIndex,childMarker.myDoneMarker.myLexemIndex,ast);
    }
 else     if (child instanceof ErrorItem) {
      lexIndex=insertLeafs(lexIndex,((ErrorItem)child).myLexemIndex,ast);
      final PsiErrorElementImpl errorElement=new PsiErrorElementImpl();
      errorElement.setErrorDescription(((ErrorItem)child).myMessage);
      TreeUtil.addChildren(ast,errorElement);
    }
    child=child.next;
  }
  return insertLeafs(lexIndex,marker.myDoneMarker.myLexemIndex,ast);
}
