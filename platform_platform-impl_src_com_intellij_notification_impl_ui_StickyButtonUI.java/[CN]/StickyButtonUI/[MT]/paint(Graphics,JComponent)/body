{
  B button=(B)c;
  final int width=button.getWidth();
  final int height=button.getHeight();
  final Graphics2D g2=(Graphics2D)g.create();
  g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
  final int arcSize=getArcSize();
  if (c.isOpaque()) {
    g2.setColor(c.getBackground());
    g2.fillRoundRect(0,0,width - 1,height - 1,arcSize,arcSize);
  }
  final ButtonModel model=button.getModel();
  if (model.isSelected()) {
    g2.setColor(getSelectionColor(button));
    g2.fillRoundRect(0,0,width - 1,height - 1,getArcSize(),getArcSize());
  }
 else   if (model.isRollover()) {
    g2.setColor(getRolloverColor(button));
    g2.fillRoundRect(0,0,width - 1,height - 1,arcSize,arcSize);
  }
 else {
    final Color bg=getBackgroundColor(button);
    if (bg != null) {
      g2.setColor(bg);
      g2.fillRoundRect(0,0,width - 1,height - 1,arcSize,arcSize);
    }
  }
  if (button.hasFocus()) {
    g2.setColor(getFocusColor(button));
    g2.drawRoundRect(0,0,width - 1,height - 1,arcSize,arcSize);
  }
  g2.dispose();
  super.paint(g,c);
}
