{
  @NonNls String newReplacement;
  final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
  final String inferredTypeArguments=inferTypeArguments(methodCallExpression);
  final PsiExpressionList argumentList=methodCallExpression.getArgumentList();
  if (isStatic) {
    newReplacement=argumentList.getExpressions().length > 0 ? "new " + staticqualifier + inferredTypeArguments+ argumentList.getText()+ "." : staticqualifier + "." + inferredTypeArguments;
  }
 else {
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    final String qualifier=qualifierExpression != null ? qualifierExpression.getText() + "." : "";
    newReplacement=qualifier + "new " + innerClass.getName()+ inferredTypeArguments+ argumentList.getText()+ ".";
  }
  methodCallExpression.replace(myElementFactory.createExpressionFromText(newReplacement + myMethod.getName() + "()",null));
}
