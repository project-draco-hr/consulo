{
  try {
    final PsiClass innerClass=createInnerClass();
    final PsiModifierList classModifierList=innerClass.getModifierList();
    LOG.assertTrue(classModifierList != null);
    @NonNls String staticqualifier=null;
    if (classModifierList.hasModifierProperty(PsiModifier.STATIC)) {
      final int packageNameLength=((PsiClassOwner)innerClass.getContainingFile()).getPackageName().length();
      final String innerClassName=innerClass.getQualifiedName();
      LOG.assertTrue(innerClassName != null);
      staticqualifier=packageNameLength > 0 ? innerClassName.substring(packageNameLength + 1) : innerClassName;
    }
    final String innerClassName=innerClass.getName();
    for (    UsageInfo usage : usages) {
      final PsiMethodCallExpression methodCallExpression=PsiTreeUtil.getParentOfType(usage.getElement(),PsiMethodCallExpression.class);
      if (methodCallExpression != null) {
        replaceMethodCallExpression(innerClassName,staticqualifier,inferTypeArguments(methodCallExpression),methodCallExpression);
      }
    }
    processMethodDeclaration(innerClassName,staticqualifier);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
