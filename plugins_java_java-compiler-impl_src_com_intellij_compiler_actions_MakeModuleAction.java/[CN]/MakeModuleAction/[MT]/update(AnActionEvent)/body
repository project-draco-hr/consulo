{
  super.update(event);
  Presentation presentation=event.getPresentation();
  if (!presentation.isEnabled()) {
    return;
  }
  final DataContext dataContext=event.getDataContext();
  final Module module=LangDataKeys.MODULE.getData(dataContext);
  Module[] modules=LangDataKeys.MODULE_CONTEXT_ARRAY.getData(dataContext);
  final boolean isEnabled=module != null || modules != null;
  presentation.setEnabled(isEnabled);
  final String actionName=getTemplatePresentation().getTextWithMnemonic();
  String presentationText;
  if (modules != null) {
    String text=actionName;
    for (int i=0; i < modules.length; i++) {
      if (text.length() > 30) {
        text=CompilerBundle.message("action.make.selected.modules.text");
        break;
      }
      Module toMake=modules[i];
      if (i != 0) {
        text+=",";
      }
      text+=" '" + toMake.getName() + "'";
    }
    presentationText=text;
  }
 else   if (module != null) {
    presentationText=actionName + " '" + module.getName()+ "'";
  }
 else {
    presentationText=actionName;
  }
  presentation.setText(presentationText);
  presentation.setVisible(isEnabled || !ActionPlaces.PROJECT_VIEW_POPUP.equals(event.getPlace()));
}
