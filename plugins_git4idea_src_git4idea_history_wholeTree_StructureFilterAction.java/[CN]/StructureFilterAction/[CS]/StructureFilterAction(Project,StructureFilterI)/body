{
  super(project,STRUCTURE,"Structure");
  myStructureFilterI=structureFilterI;
  myAll=new DumbAwareAction(ALL){
    @Override public void actionPerformed(    AnActionEvent e){
      myLabel.setText(ALL);
      myPanel.setToolTipText(STRUCTURE + " " + ALL);
      structureFilterI.allSelected();
    }
  }
;
  mySelect=new DumbAwareAction("Select..."){
    @Override public void actionPerformed(    AnActionEvent e){
      final VcsStructureChooser vcsStructureChooser=new VcsStructureChooser(GitVcs.getInstance(myProject),"Select folders to filter by",structureFilterI.getSelected());
      vcsStructureChooser.show();
      if (vcsStructureChooser.getExitCode() == DialogWrapper.CANCEL_EXIT_CODE)       return;
      final Collection<VirtualFile> files=vcsStructureChooser.getSelectedFiles();
      final Map<VirtualFile,String> modulesSet=vcsStructureChooser.getModulesSet();
      String text;
      if (files.size() == 1) {
        final VirtualFile file=files.iterator().next();
        final String module=modulesSet.get(file);
        text=module == null ? file.getName() : module;
      }
 else {
        text=FILTER;
      }
      text=text.length() > 20 ? FILTER : text;
      myLabel.setText(text);
      final String toolTip;
      final StringBuilder sb=new StringBuilder();
      for (      VirtualFile file : files) {
        sb.append("<br><b>");
        final String module=modulesSet.get(file);
        final String name=module == null ? file.getName() : module;
        sb.append(name).append("</b> (").append(file.getPath()).append(")");
      }
      toolTip=sb.toString();
      myPanel.setToolTipText("<html><b>" + STRUCTURE + "</b><br>"+ toolTip+ "</html>");
      structureFilterI.select(files);
    }
  }
;
  myLabel.setText(ALL);
}
