{
  List<AndroidFacet> facets=ProjectFacetManager.getInstance(myProject).getFacets(AndroidFacet.ID);
  if (facets.size() > 0) {
    final AndroidDebugBridge debugBridge=facets.get(0).getDebugBridge();
    if (debugBridge != null) {
      IDevice[] devices;
      try {
        devices=AdbManager.compute(new Computable<IDevice[]>(){
          public IDevice[] compute(){
            return debugBridge.getDevices();
          }
        }
,true);
      }
 catch (      AdbNotRespondingException e) {
        Messages.showErrorDialog(myProject,e.getMessage(),CommonBundle.getErrorTitle());
        return;
      }
      Object temp=myDeviceCombo.getSelectedItem();
      myDeviceCombo.setModel(new DefaultComboBoxModel(devices));
      if (devices.length > 0 && temp == null) {
        temp=devices[0];
      }
      myDeviceCombo.setSelectedItem(temp);
    }
  }
 else {
    myDeviceCombo.setModel(new DefaultComboBoxModel());
  }
}
