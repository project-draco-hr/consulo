{
  IDevice device=getSelectedDevice();
  if (myDevice != device) {
synchronized (myLock) {
      myDevice=device;
      if (myCurrentWriter != null) {
        try {
          myCurrentWriter.close();
        }
 catch (        IOException e) {
          LOG.error(e);
        }
      }
      if (myCurrentReader != null) {
        try {
          myCurrentReader.close();
        }
 catch (        IOException e) {
          LOG.error(e);
        }
      }
      if (device != null) {
        myLogConsole.getConsole().clear();
        final Pair<Reader,Writer> pair=AndroidLogcatUtil.startLoggingThread(myProject,device,false,myLogConsole);
        if (pair != null) {
          myCurrentReader=pair.first;
          myCurrentWriter=pair.second;
        }
 else {
          myCurrentReader=null;
          myCurrentWriter=null;
        }
      }
    }
  }
}
