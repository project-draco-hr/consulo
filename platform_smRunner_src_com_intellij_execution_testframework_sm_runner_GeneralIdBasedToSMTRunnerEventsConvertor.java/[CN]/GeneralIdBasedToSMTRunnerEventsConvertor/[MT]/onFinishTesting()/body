{
  addToInvokeLater(new Runnable(){
    public void run(){
      if (myIsTestingFinished) {
        return;
      }
      myIsTestingFinished=true;
      boolean completeTree=isTreeComplete(myRunningTestNodes,myTestsRootProxy);
      if (completeTree) {
        myTestsRootProxy.setFinished();
      }
 else {
        myTestsRootProxy.setTerminated();
      }
      if (!myRunningTestNodes.isEmpty()) {
        logProblem("Unexpected running nodes: " + myRunningTestNodes);
      }
      myNodeByIdMap.clear();
      myRunningTestNodes.clear();
      fireOnTestingFinished(myTestsRootProxy);
    }
  }
);
  stopEventProcessing();
}
