{
  AttributeWrapper wrapper=AttributeWrapper.DEFAULT;
  final HighlightDisplayLevel level=getHighlightDisplayLevel(myProject,component);
  if (level != null) {
    TextAttributesKey attributesKey=SeverityRegistrar.getInstance(myProject).getHighlightInfoTypeBySeverity(level.getSeverity()).getAttributesKey();
    final TextAttributes textAttributes=EditorColorsManager.getInstance().getGlobalScheme().getAttributes(attributesKey);
    wrapper=new AttributeWrapper(){
      @Override public SimpleTextAttributes getAttribute(      SimpleTextAttributes attributes){
        Map<SimpleTextAttributes,SimpleTextAttributes> attributesMap=myAttributes.get(level.getSeverity());
        if (attributesMap == null) {
          attributesMap=new HashMap<SimpleTextAttributes,SimpleTextAttributes>();
          myAttributes.put(level.getSeverity(),attributesMap);
        }
        SimpleTextAttributes result=attributesMap.get(attributes);
        if (result == null) {
          result=SimpleTextAttributes.fromTextAttributes(TextAttributes.merge(attributes.toTextAttributes(),textAttributes));
          attributesMap.put(attributes,result);
        }
        return result;
      }
    }
;
  }
  return wrapper;
}
