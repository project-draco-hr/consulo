{
  PsiElementFactory factory=JavaPsiFacade.getInstance(tryStatement.getProject()).getElementFactory();
  if (tryStatement.getTryBlock() == null) {
    addTryBlock(tryStatement,factory);
  }
  JavaCodeStyleManager styleManager=JavaCodeStyleManager.getInstance(tryStatement.getProject());
  String name=styleManager.suggestVariableName(VariableKind.PARAMETER,null,null,exceptionType).names[0];
  name=styleManager.suggestUniqueVariableName(name,tryStatement,false);
  PsiCatchSection catchSection=factory.createCatchSection(exceptionType,name,file);
  PsiCodeBlock finallyBlock=tryStatement.getFinallyBlock();
  if (finallyBlock == null) {
    tryStatement.add(catchSection);
  }
 else {
    tryStatement.addBefore(catchSection,getFinallySectionStart(finallyBlock));
  }
  PsiParameter[] parameters=tryStatement.getCatchBlockParameters();
  parameters[parameters.length - 1].getTypeElement().replace(factory.createTypeElement(exceptionType));
  PsiCodeBlock[] catchBlocks=tryStatement.getCatchBlocks();
  return catchBlocks[catchBlocks.length - 1];
}
