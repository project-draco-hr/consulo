{
  if (term == null)   throw new IllegalArgumentException("TERM cannot be null.");
  if ((terminal_modes != null) && (terminal_modes.length > 0)) {
    if (terminal_modes[terminal_modes.length - 1] != 0)     throw new IOException("Illegal terminal modes description, does not end in zero byte");
  }
 else   terminal_modes=new byte[]{0};
synchronized (this) {
    if (flag_closed)     throw new IOException("This session is closed.");
    if (flag_pty_requested)     throw new IOException("A PTY was already requested.");
    if (flag_execution_started)     throw new IOException("Cannot request PTY at this stage anymore, a remote execution has already started.");
    flag_pty_requested=true;
  }
  cm.requestPTY(cn,term,term_width_characters,term_height_characters,term_width_pixels,term_height_pixels,terminal_modes);
}
