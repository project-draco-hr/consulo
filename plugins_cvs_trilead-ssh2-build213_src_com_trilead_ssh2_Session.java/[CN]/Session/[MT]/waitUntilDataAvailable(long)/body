{
  if (timeout < 0)   throw new IllegalArgumentException("timeout must not be negative!");
  int conditions=cm.waitForCondition(cn,timeout,ChannelCondition.STDOUT_DATA | ChannelCondition.STDERR_DATA | ChannelCondition.EOF);
  if ((conditions & ChannelCondition.TIMEOUT) != 0)   return -1;
  if ((conditions & (ChannelCondition.STDOUT_DATA | ChannelCondition.STDERR_DATA)) != 0)   return 1;
  if ((conditions & ChannelCondition.EOF) != 0)   return 0;
  throw new IllegalStateException("Unexpected condition result (" + conditions + ")");
}
