{
  return new LocalPathIndifferentOperation(new AdminReaderOnStoredRepositoryPath(adminWriter),environment){
    private boolean myIsInModule=false;
    protected Command createCommand(    CvsRootProvider root,    CvsExecutionEnvironment cvsExecutionEnvironment){
      CheckoutCommand result=new CheckoutCommand();
      result.addModule(moduleName);
      result.setRecursive(true);
      return result;
    }
    protected ILocalFileReader createLocalFileReader(){
      return ConstantLocalFileReader.FOR_EXISTING_FILE;
    }
    protected String getOperationName(){
      return "checkout";
    }
    protected ILocalFileWriter createLocalFileWriter(    String cvsRoot,    UpdatedFilesManager mergedFilesCollector,    CvsExecutionEnvironment cvsExecutionEnvironment){
      return DeafLocalFileWriter.INSTANCE;
    }
    public void messageSent(    String message,    final byte[] byteMessage,    boolean error,    boolean tagged){
      super.messageSent(message,byteMessage,error,tagged);
      myDirectoryContentListener.setModulePath(myAdminWriterStoringRepositoryPath.getModulePath());
      final Matcher matcher=UPDATING_PATTERN.matcher(message);
      if (matcher.matches()) {
        if (myModuleLocation != null && myModuleLocation.equals(matcher.group(1))) {
          myIsInModule=true;
        }
 else {
          myDirectoryContentListener.messageSent(message);
          myIsInModule=false;
        }
      }
 else       if (DirectoryContentListener.moduleMessage_ver1(message)) {
        myIsInModule=true;
      }
      if (myIsInModule) {
        myDirectoryContentListener.messageSent(message);
      }
    }
    public void modifyOptions(    GlobalOptions options){
      super.modifyOptions(options);
      options.setDoNoChanges(true);
    }
  }
;
}
