{
  if (context instanceof XmlAttributeValue) {
    final XmlAttributeValue xmlAttributeValue=(XmlAttributeValue)context;
    final PsiElement parent=xmlAttributeValue.getParent();
    if (parent instanceof XmlAttribute) {
      if (JavaFxPsiUtil.checkIfAttributeHandler((XmlAttribute)parent)) {
        if (value.startsWith("#")) {
          if (JavaFxPsiUtil.getControllerClass(context.getContainingFile()) == null) {
            return "No controller specified for top level element";
          }
        }
 else {
          if (JavaFxPsiUtil.parseInjectedLanguages((XmlFile)context.getContainingFile()).isEmpty()) {
            return "Page language not specified.";
          }
        }
      }
 else       if (FxmlConstants.FX_ID.equals(((XmlAttribute)parent).getName())) {
        final PsiClass controllerClass=JavaFxPsiUtil.getControllerClass(context.getContainingFile());
        if (controllerClass != null) {
          final XmlTag xmlTag=((XmlAttribute)parent).getParent();
          if (xmlTag != null) {
            final XmlElementDescriptor descriptor=xmlTag.getDescriptor();
            if (descriptor instanceof JavaFxClassBackedElementDescriptor) {
              final PsiElement declaration=descriptor.getDeclaration();
              if (declaration instanceof PsiClass) {
                final PsiField fieldByName=controllerClass.findFieldByName(xmlAttributeValue.getValue(),false);
                if (fieldByName != null && !InheritanceUtil.isInheritorOrSelf((PsiClass)declaration,PsiUtil.resolveClassInType(fieldByName.getType()),true)) {
                  return "Cannot set " + ((PsiClass)declaration).getQualifiedName() + " to field \'"+ fieldByName.getName()+ "\'";
                }
              }
            }
          }
        }
      }
    }
  }
  return null;
}
