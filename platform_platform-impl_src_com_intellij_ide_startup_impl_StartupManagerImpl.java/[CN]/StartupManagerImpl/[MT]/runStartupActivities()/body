{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override @SuppressWarnings("SynchronizeOnThis") public void run(){
      AccessToken token=HeavyProcessLatch.INSTANCE.processStarted("Running Startup Activities");
      try {
        runActivities(myPreStartupActivities);
synchronized (StartupManagerImpl.this) {
          myPreStartupActivitiesPassed=true;
          myStartupActivitiesRunning=true;
        }
        runActivities(myStartupActivities);
synchronized (StartupManagerImpl.this) {
          myStartupActivitiesRunning=false;
          myStartupActivitiesPassed=true;
        }
      }
  finally {
        token.finish();
      }
    }
  }
);
}
