{
  try {
    DumbServiceImpl dumbService=DumbServiceImpl.getInstance(myProject);
    if (!ApplicationManager.getApplication().isUnitTestMode()) {
      dumbService.queueTask(new DumbModeTask(){
        @Override public void performInDumbMode(        @NotNull final ProgressIndicator indicator){
          UIUtil.invokeLaterIfNeeded(new Runnable(){
            @Override public void run(){
              if (!myProject.isDisposed()) {
                scheduleInitialVfsRefresh();
              }
            }
          }
);
        }
        @Override public String toString(){
          return "initial refresh";
        }
      }
);
    }
  }
 catch (  ProcessCanceledException e) {
    throw e;
  }
catch (  Throwable e) {
    LOG.error(e);
  }
}
