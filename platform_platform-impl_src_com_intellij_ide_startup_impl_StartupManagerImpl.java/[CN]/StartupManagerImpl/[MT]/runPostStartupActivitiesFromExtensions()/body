{
  final StartupActivity[] extensions=Extensions.getExtensions(StartupActivity.POST_STARTUP_ACTIVITY);
  if (extensions.length == 0) {
    return;
  }
  final List<Runnable> dumbAwareActivities=new ArrayList<Runnable>();
  final List<Runnable> normalActivities=new ArrayList<Runnable>();
  for (  final StartupActivity extension : extensions) {
    final Runnable runnable=new Runnable(){
      public void run(){
        extension.runActivity(myProject);
      }
    }
;
    if (extension instanceof DumbAware) {
      dumbAwareActivities.add(runnable);
    }
 else {
      normalActivities.add(runnable);
    }
  }
  runActivities(dumbAwareActivities);
  if (!normalActivities.isEmpty()) {
    DumbService.getInstance(myProject).runWhenSmart(new Runnable(){
      public void run(){
        if (!myProject.isDisposed()) {
          runActivities(normalActivities);
        }
      }
    }
);
  }
}
