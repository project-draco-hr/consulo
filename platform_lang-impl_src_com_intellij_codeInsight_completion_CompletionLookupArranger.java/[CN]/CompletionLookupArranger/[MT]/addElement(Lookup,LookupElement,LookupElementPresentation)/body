{
  StatisticsWeigher.clearBaseStatisticsInfo(element);
  final String invariant=presentation.getItemText() + "\0###" + getTailTextOrSpace(presentation)+ "###"+ presentation.getTypeText();
  element.putUserData(PRESENTATION_INVARIANT,invariant);
  CompletionSorterImpl sorter=obtainSorter(element);
  Classifier<LookupElement> classifier=myClassifiers.get(sorter);
  if (classifier == null) {
    myClassifiers.put(sorter,classifier=sorter.buildClassifier(new AlphaClassifier((LookupImpl)lookup)));
  }
  ProcessingContext context=createContext(true);
  classifier.addElement(element,context);
  super.addElement(lookup,element,presentation);
  trimToLimit(lookup,context);
}
