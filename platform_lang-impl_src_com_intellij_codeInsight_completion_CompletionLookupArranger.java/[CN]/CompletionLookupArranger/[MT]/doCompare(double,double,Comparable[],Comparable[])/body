{
  if (priority1 != priority2) {
    final double v=priority1 - priority2;
    if (v > 0)     return -1;
    if (v < 0)     return 1;
  }
  for (int i=0; i < weight1.length; i++) {
    final Comparable w1=weight1[i];
    final Comparable w2=i < weight2.length ? weight2[i] : null;
    if (w1 != null || w2 != null) {
      if (w1 == null)       return 1;
      if (w2 == null)       return -1;
      final int res=w1.compareTo(w2);
      if (res != 0)       return -res;
    }
  }
  return 0;
}
