{
  PsiElement ref=psiReference.getElement();
  if (ref instanceof PsiReferenceExpression) {
    PsiReferenceExpression refExpr=(PsiReferenceExpression)ref;
    PsiExpression qualifier=refExpr.getQualifierExpression();
    if (RefactoringHierarchyUtil.willBeInTargetClass(refExpr,membersToMove,targetClass,true)) {
      if (!RefactoringUtil.isInMovedElement(refExpr,membersToMove)) {
        if (qualifier != null) {
          return new MoveMembersProcessor.MoveMembersUsageInfo(member,refExpr,null,qualifier,psiReference);
        }
      }
 else {
        if (qualifier instanceof PsiReferenceExpression && ((PsiReferenceExpression)qualifier).isReferenceTo(member.getContainingClass())) {
          return new MoveMembersProcessor.MoveMembersUsageInfo(member,refExpr,null,qualifier,psiReference);
        }
      }
    }
 else {
      if (qualifier == null) {
        return new MoveMembersProcessor.MoveMembersUsageInfo(member,refExpr,targetClass,refExpr,psiReference);
      }
 else {
        return new MoveMembersProcessor.MoveMembersUsageInfo(member,refExpr,targetClass,qualifier,psiReference);
      }
    }
  }
  return null;
}
