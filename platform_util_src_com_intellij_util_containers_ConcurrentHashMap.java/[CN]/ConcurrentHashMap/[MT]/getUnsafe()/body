{
  try {
    return Unsafe.getUnsafe();
  }
 catch (  SecurityException tryReflectionInstead) {
  }
  try {
    return AccessController.doPrivileged(new PrivilegedExceptionAction<Unsafe>(){
      @Override public Unsafe run() throws Exception {
        Class<Unsafe> k=Unsafe.class;
        for (        Field f : k.getDeclaredFields()) {
          f.setAccessible(true);
          Object x=f.get(null);
          if (k.isInstance(x)) {
            return k.cast(x);
          }
        }
        throw new NoSuchFieldError("the Unsafe");
      }
    }
);
  }
 catch (  PrivilegedActionException e) {
    throw new RuntimeException("Could not initialize intrinsics",e.getCause());
  }
}
