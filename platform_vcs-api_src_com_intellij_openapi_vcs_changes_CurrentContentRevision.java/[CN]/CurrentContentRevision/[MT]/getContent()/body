{
  final VirtualFile vFile=getVirtualFile();
  if (vFile == null)   return null;
  final Document doc=ApplicationManager.getApplication().runReadAction(new Computable<Document>(){
    public Document compute(){
      return FileDocumentManager.getInstance().getDocument(vFile);
    }
  }
);
  if (doc == null)   return null;
  return doc.getText();
}
