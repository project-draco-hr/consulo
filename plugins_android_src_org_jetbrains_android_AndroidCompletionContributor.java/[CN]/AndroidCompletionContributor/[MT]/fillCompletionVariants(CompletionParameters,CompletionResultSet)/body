{
  PsiElement position=parameters.getPosition();
  AndroidFacet facet=AndroidFacet.getInstance(position);
  if (facet == null) {
    return;
  }
  PsiElement parent=position.getParent();
  if (!(parent instanceof XmlTag)) {
    return;
  }
  XmlTag tag=(XmlTag)parent;
  if (tag.getParentTag() != null) {
    return;
  }
  final ASTNode startTagName=XmlChildRole.START_TAG_NAME_FINDER.findChild(tag.getNode());
  if (startTagName == null || startTagName.getPsi() != position) {
    return;
  }
  final PsiFile file=tag.getContainingFile();
  if (!(file instanceof XmlFile)) {
    return;
  }
  final PsiReference reference=file.findReferenceAt(parameters.getOffset());
  if (reference != null) {
    final PsiElement element=reference.getElement();
    if (element != null) {
      final int refOffset=element.getTextRange().getStartOffset() + reference.getRangeInElement().getStartOffset();
      if (refOffset != position.getTextRange().getStartOffset()) {
        return;
      }
    }
  }
  if (!complete(facet,(XmlFile)file,resultSet)) {
    resultSet.stopHere();
  }
}
