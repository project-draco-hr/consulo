{
  PsiElement parent=position.getParent();
  if (parent instanceof XmlTag) {
    XmlTag tag=(XmlTag)parent;
    if (tag.getParentTag() == null) {
      PsiFile file=tag.getContainingFile().getOriginalFile();
      if (file instanceof XmlFile) {
        XmlFile xmlFile=(XmlFile)file;
        if (ManifestDomFileDescription.isManifestFile(xmlFile)) {
          resultSet.addElement(LookupElementBuilder.create("manifest"));
          return false;
        }
 else         if (LayoutDomFileDescription.isLayoutFile(xmlFile)) {
          resultSet.addElement(LookupElementBuilder.create("view"));
          resultSet.addElement(LookupElementBuilder.create("merge"));
          Map<String,PsiClass> viewClassMap=AndroidDomExtender.getViewClassMap(facet);
          final PsiClass viewGroupClass=viewClassMap.get("ViewGroup");
          for (          String tagName : viewClassMap.keySet()) {
            final PsiClass viewClass=viewClassMap.get(tagName);
            if (!AndroidUtils.isAbstract(viewClass)) {
              boolean inheritsViewGroup=ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
                public Boolean compute(){
                  return viewClass.isInheritor(viewGroupClass,true);
                }
              }
);
              if (inheritsViewGroup) {
                resultSet.addElement(LookupElementBuilder.create(tagName));
              }
            }
          }
          return false;
        }
 else         if (AnimationDomFileDescription.isAnimationFile(xmlFile)) {
          addAll(AndroidAnimationUtils.getPossibleChildren(facet),resultSet);
          return false;
        }
 else         if (XmlResourceDomFileDescription.isXmlResourceFile(xmlFile)) {
          addAll(AndroidXmlResourcesUtil.getPossibleRoots(facet),resultSet);
          return false;
        }
      }
    }
  }
  VirtualFile containingFile=parent.getContainingFile().getOriginalFile().getVirtualFile();
  if (containingFile != null && (isXmlResource(facet,containingFile) || AndroidRootUtil.getManifestFile(facet.getModule()) == containingFile)) {
    if (parent instanceof XmlAttribute) {
      XmlAttribute attribute=(XmlAttribute)parent;
      XmlTag tag=attribute.getParent();
      if (!containsNamespace(tag,SdkConstants.NS_RESOURCES)) {
        String prefix=attribute.getNamespacePrefix();
        String s=null;
        if (prefix.length() == 0) {
          s="xmlns:android";
        }
 else         if (prefix.equals("xmlns")) {
          s="android";
        }
        if (s != null) {
          resultSet.addElement(LookupElementBuilder.create(s));
        }
      }
    }
  }
  return true;
}
