{
  if (n instanceof Token) {
    final Token token=(Token)n;
    return token.myBuilder.createLeaf(token.getTokenType(),token.myTokenStart,token.myTokenEnd);
  }
 else   if (n instanceof ErrorItem) {
    final PsiErrorElementImpl errorElement=new PsiErrorElementImpl();
    errorElement.setErrorDescription(((ErrorItem)n).myMessage);
    return errorElement;
  }
 else {
    final StartMarker startMarker=(StartMarker)n;
    final CompositeElement composite=(n == myRoot) ? (CompositeElement)myRoot.myBuilder.createRootAST(myRoot) : createComposite(startMarker);
    startMarker.myBuilder.bind(startMarker,composite);
    return composite;
  }
}
