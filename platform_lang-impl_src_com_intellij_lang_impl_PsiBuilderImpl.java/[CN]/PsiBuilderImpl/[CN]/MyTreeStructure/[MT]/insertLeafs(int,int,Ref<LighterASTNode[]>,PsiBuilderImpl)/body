{
  lastIdx=Math.min(lastIdx,builder.myLexemeCount);
  while (curToken < lastIdx) {
    final int start=builder.myLexStarts[curToken];
    final int end=builder.myLexStarts[curToken + 1];
    final IElementType type=builder.myLexTypes[curToken];
    if (start < end || type instanceof ILeafElementType) {
      insertLeaf(into,start,end,type,builder);
    }
    curToken++;
  }
  return curToken;
}
