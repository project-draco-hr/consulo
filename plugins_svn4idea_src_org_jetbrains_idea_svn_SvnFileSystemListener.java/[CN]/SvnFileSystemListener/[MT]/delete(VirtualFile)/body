{
  SvnVcs vcs=getVCS(file);
  if (vcs != null && SvnUtil.isAdminDirectory(file)) {
    return true;
  }
  File ioFile=getIOFile(file);
  if (!SVNWCUtil.isVersionedDirectory(ioFile.getParentFile())) {
    return false;
  }
  try {
    if (SVNWCUtil.isWorkingCopyRoot(ioFile)) {
      return false;
    }
  }
 catch (  SVNException e) {
  }
  SVNStatus status=getFileStatus(ioFile);
  if (status == null || status.getContentsStatus() == SVNStatusType.STATUS_UNVERSIONED || status.getContentsStatus() == SVNStatusType.STATUS_OBSTRUCTED || status.getContentsStatus() == SVNStatusType.STATUS_MISSING || status.getContentsStatus() == SVNStatusType.STATUS_EXTERNAL) {
    return false;
  }
 else   if (status.getContentsStatus() == SVNStatusType.STATUS_IGNORED) {
    if (vcs != null && file.getParent() != null) {
      if (!isUndoOrRedo(vcs.getProject())) {
        putIgnoreInfo(file,vcs,ioFile);
      }
    }
    return false;
  }
 else   if (status.getContentsStatus() == SVNStatusType.STATUS_DELETED) {
    if (isUndo(vcs)) {
      moveToUndoStorage(file);
    }
    return true;
  }
 else {
    if (vcs != null) {
      if (status.getContentsStatus() == SVNStatusType.STATUS_ADDED) {
        try {
          final SVNWCClient wcClient=vcs.createWCClient();
          wcClient.doRevert(ioFile,false);
        }
 catch (        SVNException e) {
        }
      }
 else {
        myDeletedFiles.add(new DeletedFileInfo(vcs.getProject(),ioFile));
        if (file.isDirectory() || isUndo(vcs))         return true;
      }
    }
    return false;
  }
}
