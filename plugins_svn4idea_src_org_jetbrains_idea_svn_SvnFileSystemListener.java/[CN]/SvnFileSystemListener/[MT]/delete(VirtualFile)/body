{
  SvnVcs vcs=getVCS(file);
  if (vcs != null && SvnUtil.isAdminDirectory(file)) {
    return true;
  }
  if (vcs == null)   return false;
  final File ioFile=getIOFile(file);
  if (!SvnUtil.isSvnVersioned(vcs.getProject(),ioFile.getParentFile())) {
    return false;
  }
  try {
    if (SVNWCUtil.isWorkingCopyRoot(ioFile)) {
      return false;
    }
  }
 catch (  SVNException e) {
  }
  SVNStatus status=getFileStatus(ioFile);
  if (status == null || SvnVcs.svnStatusIsUnversioned(status) || SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_OBSTRUCTED) || SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_MISSING) || SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_EXTERNAL) || SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_IGNORED)) {
    return false;
  }
 else   if (SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_DELETED)) {
    if (isUndo(vcs)) {
      moveToUndoStorage(file);
    }
    return true;
  }
 else {
    if (vcs != null) {
      if (isAboveSourceOfCopyOrMove(vcs.getProject(),ioFile)) {
        myDeletedFiles.putValue(vcs.getProject(),ioFile);
        return true;
      }
      if (SvnVcs.svnStatusIs(status,SVNStatusType.STATUS_ADDED)) {
        try {
          final SVNWCClient wcClient=vcs.createWCClient();
          new RepeatSvnActionThroughBusy(){
            @Override protected void executeImpl() throws SVNException {
              wcClient.doRevert(ioFile,false);
            }
          }
.execute();
        }
 catch (        SVNException e) {
        }
      }
 else {
        myDeletedFiles.putValue(vcs.getProject(),ioFile);
        if (file.isDirectory() || isUndo(vcs))         return true;
      }
    }
    return false;
  }
}
