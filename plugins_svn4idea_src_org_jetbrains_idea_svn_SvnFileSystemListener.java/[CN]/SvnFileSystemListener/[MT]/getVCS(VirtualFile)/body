{
  Project[] projects=ProjectManager.getInstance().getOpenProjects();
  for (int i=0; projects != null && i < projects.length; i++) {
    Project project=projects[i];
    ProjectRootManager rootManager=ProjectRootManager.getInstance(project);
    if (rootManager != null && rootManager.getFileIndex() != null) {
      Module module=rootManager.getFileIndex().getModuleForFile(file);
      if (module != null) {
        AbstractVcs vcs=ModuleLevelVcsManager.getInstance(module).getActiveVcs();
        if (vcs instanceof SvnVcs) {
          return (SvnVcs)vcs;
        }
      }
    }
  }
  return null;
}
