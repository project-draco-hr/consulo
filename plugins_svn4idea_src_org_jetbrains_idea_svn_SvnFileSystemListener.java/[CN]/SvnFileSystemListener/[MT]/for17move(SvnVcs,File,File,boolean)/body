{
  if (undo) {
    final SVNWCClient wcClient=vcs.createWCClient();
    myUndoingMove=true;
    wcClient.doRevert(dst,true);
    wcClient.doRevert(src,true);
    restoreFromUndoStorage(dst);
  }
 else {
    if (doUsualMove(vcs,src))     return true;
    final SVNCopyClient copyClient=vcs.createCopyClient();
    final SVNCopySource svnCopySource=new SVNCopySource(SVNRevision.UNDEFINED,SVNRevision.WORKING,src);
    copyClient.doCopy(new SVNCopySource[]{svnCopySource},dst,true,false,true);
  }
  return false;
}
