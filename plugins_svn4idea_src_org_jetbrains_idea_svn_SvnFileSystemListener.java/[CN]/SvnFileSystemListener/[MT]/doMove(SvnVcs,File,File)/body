{
  long srcTime=src.lastModified();
  try {
    final boolean isUndo=isUndo(vcs);
    final String list=isUndo ? null : SvnChangelistListener.getCurrentMapping(vcs.getProject(),src);
    final boolean is17=SvnUtil.is17CopyPart(src);
    if (is17) {
      SVNStatus srcStatus=getFileStatus(src);
      SVNStatus dstStatus=getFileStatus(dst);
      if ((srcStatus == null || SvnVcs.svnStatusIsUnversioned(srcStatus)) && (dstStatus == null || SvnVcs.svnStatusIsUnversioned(dstStatus))) {
        return false;
      }
      if (for17move(vcs,src,dst,isUndo))       return false;
    }
 else {
      if (for16move(vcs,src,dst,isUndo))       return false;
    }
    if (!isUndo && list != null) {
      SvnChangelistListener.putUnderList(vcs.getProject(),list,dst);
    }
    dst.setLastModified(srcTime);
  }
 catch (  SVNException e) {
    addToMoveExceptions(vcs.getProject(),e);
    return false;
  }
  return true;
}
