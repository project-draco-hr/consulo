{
  File srcFile=getIOFile(file);
  File dstFile=new File(getIOFile(toDir),file.getName());
  SvnVcs vcs=getVCS(toDir);
  if (vcs == null) {
    vcs=getVCS(file);
  }
  if (vcs == null) {
    return false;
  }
  final VirtualFile oldParent=file.getParent();
  myFilesToRefresh.add(oldParent);
  final VcsDirtyScopeManager dirtyScopeManager=VcsDirtyScopeManager.getInstance(vcs.getProject());
  final boolean result=move(vcs,srcFile,dstFile);
  dirtyScopeManager.dirDirtyRecursively(toDir,true);
  dirtyScopeManager.dirDirtyRecursively(oldParent,true);
  return result;
}
