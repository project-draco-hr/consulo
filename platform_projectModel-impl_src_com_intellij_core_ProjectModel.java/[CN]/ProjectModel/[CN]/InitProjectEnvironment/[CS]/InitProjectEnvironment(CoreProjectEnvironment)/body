{
  myProjectEnvironment=env;
  final MockProject project=env.getProject();
  myProject=project;
  env.registerProjectExtensionPoint(DirectoryIndexExcludePolicy.EP_NAME,DirectoryIndexExcludePolicy.class);
  env.registerProjectExtensionPoint(ProjectExtension.EP_NAME,ProjectExtension.class);
  env.registerProjectComponent(ModuleManager.class,createModuleManager());
  env.registerProjectComponent(PathMacroManager.class,createProjectPathMacroManager());
  DirectoryIndex index=createDirectoryIndex();
  project.registerService(DirectoryIndex.class,index);
  env.registerProjectComponent(ProjectRootManager.class,createProjectRootManager(index));
  project.registerService(ProjectLibraryTable.class,createProjectLibraryTable());
  project.registerService(ProjectFileIndex.class,createProjectFileIndex(index));
}
