{
  if (LOG.isDebugEnabled()) {
    LOG.debug("enter: synchronize()");
  }
  if (GeneralSettings.getInstance().isSyncOnFrameActivation()) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("refresh VFS");
    }
    VirtualFileManager.getInstance().refresh(true);
  }
 else {
    Project[] openProjects=ProjectManagerEx.getInstanceEx().getOpenProjects();
    for (int i=0; i < openProjects.length; i++) {
      Project project=openProjects[i];
      VirtualFile[] file=FileEditorManager.getInstance(project).getSelectedFiles();
      for (int j=0; j < file.length; j++) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("refresh file: " + file);
        }
        file[j].refresh(true,false);
      }
    }
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("exit: synchronize()");
  }
}
