{
  if (LOG.isDebugEnabled()) {
    LOG.debug("enter: synchronize()");
  }
  if (GeneralSettings.getInstance().isSyncOnFrameActivation()) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("refresh VFS");
    }
    VirtualFileManager.getInstance().refresh(true);
  }
 else {
    for (    Project project : ProjectManagerEx.getInstanceEx().getOpenProjects()) {
      VirtualFile[] files=FileEditorManager.getInstance(project).getSelectedFiles();
      for (      VirtualFile file : files) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("refresh file: " + files);
        }
        file.refresh(true,false);
      }
    }
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("exit: synchronize()");
  }
}
