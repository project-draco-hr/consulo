{
  final List<String> input=TestUtils.readInput(getTestDataPath() + getTestName(true) + ".test");
  myFixture.configureByText(GroovyFileType.GROOVY_FILE_TYPE,input.get(0));
  final GroovyFile file=(GroovyFile)myFixture.getFile();
  final SelectionModel model=myFixture.getEditor().getSelectionModel();
  final PsiElement start=file.findElementAt(model.hasSelection() ? model.getSelectionStart() : 0);
  final PsiElement end=file.findElementAt(model.hasSelection() ? model.getSelectionEnd() - 1 : file.getTextLength() - 1);
  final GrControlFlowOwner owner=PsiTreeUtil.getParentOfType(PsiTreeUtil.findCommonParent(start,end),GrControlFlowOwner.class,false);
  final Instruction[] instructions=new ControlFlowBuilder(getProject()).buildControlFlow(owner,null,null);
  final String cf=dumpControlFlow(instructions);
  assertEquals(input.get(1).trim(),cf.trim());
}
