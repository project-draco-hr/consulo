{
  if (myIndices != null)   return;
  MavenGeneralSettings defaultSettings=new MavenGeneralSettings();
  myEmbedder=MavenEmbedderFactory.createEmbedder(defaultSettings);
  myIndices=new MavenIndices(myEmbedder,getIndicesDir(),new MavenIndex.IndexListener(){
    public void indexIsBroken(    MavenIndex index){
      scheduleUpdate(null,Collections.singletonList(index),false);
    }
  }
);
  ShutDownTracker.getInstance().registerShutdownTask(new Runnable(){
    public void run(){
      doShutdown();
    }
  }
);
  loadUserArchetypes();
}
