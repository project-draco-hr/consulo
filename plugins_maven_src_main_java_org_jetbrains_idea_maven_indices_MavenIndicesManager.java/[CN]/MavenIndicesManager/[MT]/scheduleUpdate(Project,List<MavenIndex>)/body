{
  final List<MavenIndex> toSchedule=new ArrayList<MavenIndex>();
synchronized (myUpdatingIndicesLock) {
    for (    MavenIndex each : indices) {
      if (myWaitingIndices.contains(each))       continue;
      toSchedule.add(each);
    }
    myWaitingIndices.addAll(toSchedule);
  }
  myUpdatingQueue.run(new Task.Backgroundable(null,RepositoryBundle.message("maven.indices.updating"),true){
    public void run(    @NotNull ProgressIndicator indicator){
      doUpdateIndices(toSchedule,p,indicator);
    }
  }
);
}
