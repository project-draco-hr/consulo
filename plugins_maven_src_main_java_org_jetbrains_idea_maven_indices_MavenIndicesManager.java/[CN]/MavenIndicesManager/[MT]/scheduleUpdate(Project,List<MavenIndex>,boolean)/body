{
  final List<MavenIndex> toSchedule=new ArrayList<MavenIndex>();
synchronized (myUpdatingIndicesLock) {
    for (    MavenIndex each : indices) {
      if (myWaitingIndices.contains(each))       continue;
      toSchedule.add(each);
    }
    myWaitingIndices.addAll(toSchedule);
  }
  if (toSchedule.isEmpty())   return;
  myUpdatingQueue.run(new Task.Backgroundable(projectOrNull,IndicesBundle.message("maven.indices.updating"),true){
    public void run(    @NotNull ProgressIndicator indicator){
      try {
        doUpdateIndices(projectOrNull,toSchedule,fullUpdate,new MavenProgressIndicator(indicator));
      }
 catch (      MavenProcessCanceledException ignore) {
      }
    }
  }
);
}
