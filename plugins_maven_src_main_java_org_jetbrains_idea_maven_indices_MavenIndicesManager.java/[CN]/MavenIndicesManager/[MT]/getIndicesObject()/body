{
  if (myIndices != null)   return myIndices;
  MavenCoreSettings settings=MavenCore.getInstance(ProjectManager.getInstance().getDefaultProject()).getState();
  myEmbedder=MavenEmbedderFactory.createEmbedderForExecute(settings).getEmbedder();
  File dir=myTestIndicesDir == null ? new File(PathManager.getSystemPath(),"Maven/Indices") : myTestIndicesDir;
  myIndices=new MavenIndices(myEmbedder,dir,new MavenIndex.IndexListener(){
    public void indexIsBroken(    MavenIndex index){
      scheduleUpdate(Collections.singletonList(index),false);
    }
  }
);
  return myIndices;
}
