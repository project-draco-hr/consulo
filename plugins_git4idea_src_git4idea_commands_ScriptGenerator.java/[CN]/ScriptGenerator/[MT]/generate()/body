{
  File scriptPath=File.createTempFile(myPrefix,SCRIPT_EXT);
  scriptPath.deleteOnExit();
  PrintWriter out=new PrintWriter(new FileWriter(scriptPath));
  try {
    if (SystemInfo.isWindows) {
      out.println("@echo off");
    }
 else {
      out.println("#!/bin/sh");
    }
    out.print(System.getProperty("java.home") + File.separatorChar + "bin"+ File.separatorChar+ "java -cp \"");
    boolean first=true;
    for (    String p : myPaths) {
      if (!first) {
        out.print(File.pathSeparatorChar);
      }
 else {
        first=false;
      }
      out.print(p);
    }
    out.print("\" ");
    out.print(myMainClass.getName());
    for (    String p : myInternalParameters) {
      out.print(' ');
      out.print(p);
    }
    if (SystemInfo.isWindows) {
      out.println(" %1 %2 %3 %4 %5 %6 %7 %8 %9");
    }
 else {
      out.println(" \"$@\"");
    }
  }
  finally {
    out.close();
  }
  FileUtil.setExectuableAttribute(scriptPath.getAbsolutePath(),true);
  return scriptPath;
}
