{
  boolean result=FileBasedIndex.getInstance().processValues(FileTypeIndex.NAME,PropertiesFileType.INSTANCE,null,new FileBasedIndex.ValueProcessor<Void>(){
    public boolean process(    VirtualFile file,    Void value){
      final PsiFile psiFile=myPsiManager.findFile(file);
      if (psiFile instanceof PropertiesFile) {
        final String qName=evaluator.evaluateBundleName(psiFile);
        if (qName != null) {
          if (!processor.process(qName,(PropertiesFile)psiFile))           return false;
        }
      }
      return true;
    }
  }
,searchScope);
  if (!result)   return false;
  return FileBasedIndex.getInstance().processValues(XmlPropertiesIndex.NAME,XmlPropertiesIndex.MARKER_KEY,null,new FileBasedIndex.ValueProcessor<String>(){
    public boolean process(    VirtualFile file,    String value){
      final PsiFile psiFile=myPsiManager.findFile(file);
      if (psiFile instanceof XmlFile) {
        final String qName=evaluator.evaluateBundleName(psiFile);
        if (qName != null) {
          if (!processor.process(qName,new XmlPropertiesFile((XmlFile)psiFile)))           return false;
        }
      }
      return true;
    }
  }
,searchScope);
}
