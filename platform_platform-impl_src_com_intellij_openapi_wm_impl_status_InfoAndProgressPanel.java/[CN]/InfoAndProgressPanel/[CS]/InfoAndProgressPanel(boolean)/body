{
  myProgressEnabled=progressEnabled;
  setOpaque(false);
  myRefreshIcon=new AsyncProcessIcon("Refreshing filesystem"){
    protected Icon getPassiveIcon(){
      return myEmptyRefreshIcon;
    }
    @Override public Dimension getPreferredSize(){
      if (!isRunning())       return new Dimension(0,0);
      return super.getPreferredSize();
    }
    @Override public void paint(    Graphics g){
      g.translate(0,-1);
      super.paint(g);
      g.translate(0,1);
    }
  }
;
  myRefreshIcon.setPaintPassiveIcon(false);
  myEmptyRefreshIcon=new EmptyIcon(0,myRefreshIcon.getPreferredSize().height);
  myRefreshAndInfoPanel.setLayout(new BorderLayout());
  myRefreshAndInfoPanel.setOpaque(false);
  myRefreshAndInfoPanel.add(myRefreshIcon,BorderLayout.WEST);
  myRefreshAndInfoPanel.add(myInfoPanel,BorderLayout.CENTER);
  myProgressIcon=new AsyncProcessIcon("Background process");
  myProgressIcon.setOpaque(false);
  myProgressIcon.addMouseListener(new MouseAdapter(){
    @Override public void mousePressed(    MouseEvent e){
      handle(e);
    }
    @Override public void mouseReleased(    MouseEvent e){
      handle(e);
    }
  }
);
  myProgressIcon.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
  myProgressIcon.setBorder(StatusBarWidget.WidgetBorder.INSTANCE);
  myProgressIcon.setToolTipText(ActionsBundle.message("action.ShowProcessWindow.double.click"));
  myUpdateQueue=new MergingUpdateQueue("Progress indicator",200,true,MergingUpdateQueue.ANY_COMPONENT);
  myPopup=new ProcessPopup(this);
  setRefreshVisible(false);
  restoreEmptyStatus();
}
