{
  if (text == null)   return;
  if (myContentPreprocessor != null) {
    final List<LogFragment> fragments=myContentPreprocessor.parseLogLine(text + "\n");
    myOriginalDocument=getOriginalDocument();
    for (    LogFragment fragment : fragments) {
      myProcessHandler.notifyTextAvailable(fragment.getText(),fragment.getOutputType());
      if (myOriginalDocument != null) {
        myOriginalDocument.append(fragment.getText());
      }
    }
  }
 else {
    final String key=LogConsolePreferences.getType(text);
    if (getPreferences().isApplicable(text,myPrevType)) {
      myProcessHandler.notifyTextAvailable(text + "\n",key != null ? LogConsolePreferences.getProcessOutputTypes(key) : (myPrevType == LogConsolePreferences.ERROR ? ProcessOutputTypes.STDERR : ProcessOutputTypes.STDOUT));
    }
    if (key != null) {
      myPrevType=key;
    }
    myOriginalDocument=getOriginalDocument();
    if (myOriginalDocument != null) {
      myOriginalDocument.append(text).append("\n");
    }
  }
}
