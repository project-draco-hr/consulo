{
  if (jars.isEmpty()) {
    return;
  }
  Map<LibraryId,List<JarData>> jarsByLibraries=ContainerUtilRt.newHashMap();
  for (  JarData jar : jars) {
    List<JarData> list=jarsByLibraries.get(jar.getLibraryId());
    if (list == null) {
      jarsByLibraries.put(jar.getLibraryId(),list=ContainerUtilRt.newArrayList());
    }
    list.add(jar);
  }
  LibraryTable libraryTable=myPlatformFacade.getProjectLibraryTable(project);
  for (  Map.Entry<LibraryId,List<JarData>> entry : jarsByLibraries.entrySet()) {
    Library library=libraryTable.getLibraryByName(entry.getKey().getLibraryName());
    if (library == null) {
      continue;
    }
    Set<JarData> libraryJars=ContainerUtilRt.newHashSet(entry.getValue());
    for (    JarData jar : entry.getValue()) {
      boolean valid=false;
      for (      VirtualFile file : library.getFiles(myLibraryPathTypeMapper.map(jar.getPathType()))) {
        if (jar.getPath().equals(ExternalSystemUtil.getLocalFileSystemPath(file))) {
          valid=true;
          break;
        }
      }
      if (!valid) {
        libraryJars.remove(jar);
      }
    }
    if (!libraryJars.isEmpty()) {
      removeLibraryJars(libraryJars,project,synchronous);
    }
  }
}
