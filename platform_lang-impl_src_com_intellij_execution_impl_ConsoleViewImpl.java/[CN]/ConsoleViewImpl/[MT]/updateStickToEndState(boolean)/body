{
  if (myEditor == null)   return;
  JScrollBar scrollBar=myEditor.getScrollPane().getVerticalScrollBar();
  int scrollBarPosition=useImmediatePosition ? scrollBar.getValue() : myEditor.getScrollingModel().getVisibleAreaOnScrollingFinished().y;
  boolean vscrollAtBottom=scrollBarPosition == scrollBar.getMaximum() - scrollBar.getVisibleAmount();
  boolean stickingToEnd=isStickingToEnd();
  if (!vscrollAtBottom && stickingToEnd) {
    myCancelStickToEnd=true;
  }
 else   if (vscrollAtBottom && !stickingToEnd) {
    scrollToEnd();
  }
}
