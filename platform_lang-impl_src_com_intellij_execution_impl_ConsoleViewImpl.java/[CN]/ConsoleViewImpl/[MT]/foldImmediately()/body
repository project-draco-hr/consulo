{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myFlushAlarm.getActiveRequestCount() > 0) {
    cancelAllFlushRequests();
    new MyFlushRunnable().run();
  }
  myFoldingAlarm.cancelAllRequests();
  myPendingFoldRegions.clear();
  final FoldingModel model=myEditor.getFoldingModel();
  model.runBatchFoldingOperation(new Runnable(){
    @Override public void run(){
      for (      FoldRegion region : model.getAllFoldRegions()) {
        model.removeFoldRegion(region);
      }
    }
  }
);
  myFolding.clear();
  updateFoldings(0,myEditor.getDocument().getLineCount() - 1,true);
}
