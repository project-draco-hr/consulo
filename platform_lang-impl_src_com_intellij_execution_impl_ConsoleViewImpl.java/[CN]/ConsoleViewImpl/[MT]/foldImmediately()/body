{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myFlushAlarm.getActiveRequestCount() > 0) {
    myFlushAlarm.cancelAllRequests();
    myFlushDeferredRunnable.run();
  }
  myFoldingAlarm.cancelAllRequests();
  myPendingFoldRegions.clear();
  final FoldingModel model=myEditor.getFoldingModel();
  model.runBatchFoldingOperation(new Runnable(){
    public void run(){
      for (      FoldRegion region : model.getAllFoldRegions()) {
        model.removeFoldRegion(region);
      }
    }
  }
);
  updateFoldings(0,myEditor.getDocument().getLineCount() - 1,true);
}
