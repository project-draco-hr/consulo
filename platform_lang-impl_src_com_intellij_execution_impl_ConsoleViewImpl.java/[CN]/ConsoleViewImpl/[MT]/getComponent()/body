{
  if (myMainPanel == null) {
    myMainPanel=new JPanel(new BorderLayout());
    myJLayeredPane=new MyDiffContainer(myMainPanel,myPredefinedMessageFilter.getUpdateMessage());
    Disposer.register(this,myJLayeredPane);
    add(myJLayeredPane,BorderLayout.CENTER);
  }
  if (myEditor == null) {
    myEditor=createEditor();
    myEditor.getScrollPane().setBorder(null);
    myHyperlinks=new EditorHyperlinkSupport(myEditor,myProject);
    requestFlushImmediately();
    myMainPanel.add(createCenterComponent(),BorderLayout.CENTER);
    myEditor.getScrollingModel().addVisibleAreaListener(new VisibleAreaListener(){
      @Override public void visibleAreaChanged(      VisibleAreaEvent e){
        final Rectangle oldRectangle=e.getOldRectangle();
        final Rectangle newRectangle=e.getNewRectangle();
        if (oldRectangle == null) {
          return;
        }
        Editor myEditor=e.getEditor();
        if (oldRectangle.height <= 0 && newRectangle.height > 0 && myEditor.getSoftWrapModel().isSoftWrappingEnabled() && myEditor.getCaretModel().getOffset() == myEditor.getDocument().getTextLength()) {
          EditorUtil.scrollToTheEnd(myEditor);
        }
      }
    }
);
  }
  return this;
}
