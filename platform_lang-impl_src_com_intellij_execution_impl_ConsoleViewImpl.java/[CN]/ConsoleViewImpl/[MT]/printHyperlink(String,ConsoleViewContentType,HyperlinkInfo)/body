{
synchronized (LOCK) {
    Pair<String,Integer> pair=myBuffer.print(s,contentType,info);
    s=pair.first;
    myContentSize+=s.length() - pair.second;
    if (s.indexOf('\n') >= 0 || s.indexOf('\r') >= 0) {
      if (contentType == ConsoleViewContentType.USER_INPUT) {
        flushDeferredUserInput();
      }
    }
    if (myFlushAlarm.getActiveRequestCount() == 0 && myEditor != null && !myFlushAlarm.isDisposed()) {
      final boolean shouldFlushNow=myBuffer.isUseCyclicBuffer() && myBuffer.getLength() >= myBuffer.getCyclicBufferSize();
      myFlushAlarm.addRequest(myFlushDeferredRunnable,shouldFlushNow ? 0 : FLUSH_DELAY,getStateForUpdate());
    }
  }
}
