{
  final int startIndex=ConsoleUtil.findTokenInfoIndexByOffset(myTokens,startOffset);
  return new HighlighterIterator(){
    private int myIndex=startIndex;
    @Override public TextAttributes getTextAttributes(){
      if (myFileType != null && getTokenInfo().contentType == ConsoleViewContentType.USER_INPUT) {
        return ConsoleViewContentType.NORMAL_OUTPUT.getAttributes();
      }
      return getTokenInfo() == null ? null : getTokenInfo().attributes;
    }
    @Override public int getStart(){
      return getTokenInfo() == null ? 0 : getTokenInfo().startOffset;
    }
    @Override public int getEnd(){
      return getTokenInfo() == null ? 0 : getTokenInfo().endOffset;
    }
    @Override public IElementType getTokenType(){
      return null;
    }
    @Override public void advance(){
      myIndex++;
    }
    @Override public void retreat(){
      myIndex--;
    }
    @Override public boolean atEnd(){
      return myIndex < 0 || myIndex >= myTokens.size();
    }
    @Override public Document getDocument(){
      return myEditor.getDocument();
    }
    private TokenInfo getTokenInfo(){
      return myTokens.get(myIndex);
    }
  }
;
}
