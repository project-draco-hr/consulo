{
  final int maxSize=UISettings.getInstance().CONSOLE_COMMAND_HISTORY_LIMIT;
synchronized (consoleView.LOCK) {
    String str=consoleView.myBuffer.getUserInput();
    if (StringUtil.isNotEmpty(str)) {
      consoleView.myHistory.remove(str);
      consoleView.myHistory.add(str);
      if (consoleView.myHistory.size() > maxSize)       consoleView.myHistory.remove(0);
    }
    for (    ConsoleInputListener listener : consoleView.myConsoleInputListeners) {
      listener.textEntered(str);
    }
  }
  consoleView.print("\n",ConsoleViewContentType.USER_INPUT);
  consoleView.flushDeferredText(false);
  final Editor editor=consoleView.myEditor;
  editor.getCaretModel().moveToOffset(editor.getDocument().getTextLength());
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
}
