{
synchronized (consoleView.LOCK) {
    String str=consoleView.myDeferredUserInput.toString();
    if (StringUtil.isNotEmpty(str)) {
      consoleView.myHistory.remove(str);
      consoleView.myHistory.add(str);
      if (consoleView.myHistory.size() > consoleView.myHistorySize)       consoleView.myHistory.remove(0);
    }
    for (    ConsoleInputListener listener : consoleView.myConsoleInputListeners) {
      listener.textEntered(str);
    }
  }
  consoleView.print("\n",ConsoleViewContentType.USER_INPUT);
  consoleView.flushDeferredText();
  final Editor editor=consoleView.myEditor;
  editor.getCaretModel().moveToOffset(editor.getDocument().getTextLength());
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
}
