{
  File outputFile;
  if (Options.getDir() == null)   if (input == null || input.getParent() == null)   outputFile=new File(name);
 else   outputFile=new File(input.getParent(),name);
 else   outputFile=new File(Options.getDir(),name);
  if (outputFile.exists() && !Options.no_backup) {
    File backup=new File(outputFile.toString() + "~");
    if (backup.exists())     backup.delete();
    if (outputFile.renameTo(backup))     Out.println("Old file \"" + outputFile + "\" saved as \""+ backup+ "\"");
 else     Out.println("Couldn't save old file \"" + outputFile + "\", overwriting!");
  }
  return outputFile;
}
