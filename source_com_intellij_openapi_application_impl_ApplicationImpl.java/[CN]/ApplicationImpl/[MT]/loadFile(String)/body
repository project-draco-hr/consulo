{
  Document document=JDOMUtil.loadDocument(new File(filePath));
  if (document == null) {
    throw new InvalidDataException();
  }
  Element root=document.getRootElement();
  if (root == null || !"application".equals(root.getName())) {
    throw new InvalidDataException();
  }
  final List<String> additionalFiles=new ArrayList<String>();
synchronized (this) {
    List children=root.getChildren("component");
    for (Iterator iterator=children.iterator(); iterator.hasNext(); ) {
      Element element=(Element)iterator.next();
      String name=element.getAttributeValue("name");
      if (name == null || name.length() == 0) {
        String className=element.getAttributeValue("class");
        if (className == null) {
          throw new InvalidDataException();
        }
        name=className.substring(className.lastIndexOf('.') + 1);
      }
      convertComponents(root,filePath,additionalFiles);
      addConfiguration(name,element);
    }
  }
  for (Iterator<String> iterator=additionalFiles.iterator(); iterator.hasNext(); ) {
    String additionalPath=iterator.next();
    loadFile(additionalPath);
  }
}
