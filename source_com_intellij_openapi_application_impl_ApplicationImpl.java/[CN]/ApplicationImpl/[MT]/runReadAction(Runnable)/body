{
  boolean isExceptionalThread=myExceptionalThreadWithReadAccess != null && Thread.currentThread() == myExceptionalThreadWithReadAccess;
  if (!isExceptionalThread) {
    while (true) {
      try {
        myActionsLock.readLock().acquire();
      }
 catch (      InterruptedException e) {
        throw new RuntimeInterruptedException(e);
      }
      break;
    }
  }
  try {
    action.run();
  }
  finally {
    if (!isExceptionalThread) {
      myActionsLock.readLock().release();
    }
  }
}
