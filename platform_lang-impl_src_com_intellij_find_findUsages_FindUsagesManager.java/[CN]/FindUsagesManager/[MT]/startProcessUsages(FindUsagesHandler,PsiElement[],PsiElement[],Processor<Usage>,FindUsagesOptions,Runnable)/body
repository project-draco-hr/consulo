{
  final ProgressIndicatorBase indicator=new ProgressIndicatorBase();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      try {
        ProgressManager.getInstance().runProcess(new Runnable(){
          @Override public void run(){
            final UsageSearcher usageSearcher=createUsageSearcher(primaryElements,secondaryElements,handler,findUsagesOptions,null);
            usageSearcher.generate(processor);
          }
        }
,indicator);
      }
  finally {
        onComplete.run();
      }
    }
  }
);
  return indicator;
}
