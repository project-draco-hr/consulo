{
  if (indicator instanceof ProgressIndicatorEx) {
    ((ProgressIndicatorEx)indicator).addStateDelegate(new ProgressIndicatorBase(){
      volatile long lastCleared=System.currentTimeMillis();
      @Override public void setFraction(      double fraction){
        super.setFraction(fraction);
        long current=System.currentTimeMillis();
        if (current - lastCleared >= 500) {
          lastCleared=current;
          PsiManager.getInstance(project).dropResolveCaches();
        }
      }
    }
);
  }
}
