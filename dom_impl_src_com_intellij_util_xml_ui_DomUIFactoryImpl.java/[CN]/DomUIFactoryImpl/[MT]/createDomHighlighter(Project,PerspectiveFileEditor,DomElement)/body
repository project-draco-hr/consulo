{
  return new BackgroundEditorHighlighter(){
    public HighlightingPass[] createPassesForEditor(){
      final XmlFile psiFile=element.getRoot().getFile();
      final PsiDocumentManager psiDocumentManager=PsiDocumentManager.getInstance(project);
      final Document document=psiDocumentManager.getDocument(psiFile);
      if (document == null)       return HighlightingPass.EMPTY_ARRAY;
      editor.commit();
      psiDocumentManager.commitAllDocuments();
      final List<HighlightingPass> result=new SmartList<HighlightingPass>();
      result.add(new GeneralHighlightingPass(project,psiFile,document,0,document.getTextLength(),true));
      result.add(new LocalInspectionsPass(psiFile,document,0,document.getTextLength(),DaemonCodeAnalyzer.getInstance(project).getDaemonExecutorService()));
      return result.toArray(new HighlightingPass[result.size()]);
    }
    public HighlightingPass[] createPassesForVisibleArea(){
      return createPassesForEditor();
    }
  }
;
}
