{
  return new BackgroundEditorHighlighter(){
    @NotNull public HighlightingPass[] createPassesForEditor(){
      if (!element.isValid())       return HighlightingPass.EMPTY_ARRAY;
      final XmlFile psiFile=DomUtil.getFile(element);
      final PsiDocumentManager psiDocumentManager=PsiDocumentManager.getInstance(project);
      final Document document=psiDocumentManager.getDocument(psiFile);
      if (document == null)       return HighlightingPass.EMPTY_ARRAY;
      editor.commit();
      psiDocumentManager.commitAllDocuments();
      final List<HighlightingPass> result=new SmartList<HighlightingPass>();
      result.add(new GeneralHighlightingPass(project,psiFile,document,0,document.getTextLength(),true));
      result.add(new LocalInspectionsPass(psiFile,document,0,document.getTextLength()));
      return result.toArray(new HighlightingPass[result.size()]);
    }
    @NotNull public HighlightingPass[] createPassesForVisibleArea(){
      return createPassesForEditor();
    }
  }
;
}
