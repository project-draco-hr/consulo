{
  myManager=manager;
  myParentStrategy=parentStrategy;
  myTagName=tagName;
  myChildDescription=childDescription;
  myStub=stub;
  myLastModCount=manager.getPsiModificationCount();
  myType=narrowType(type);
  final Class<?> rawType=getRawType();
  myInvocationCache=manager.getApplicationComponent().getInvocationCache(rawType);
  Class<? extends DomElement> implementation=manager.getApplicationComponent().getImplementation(rawType);
  final boolean isInterface=ReflectionCache.isInterface(rawType);
  if (implementation == null && !isInterface) {
    implementation=(Class<? extends DomElement>)rawType;
  }
  myProxy=AdvancedProxy.createProxy(this,implementation,isInterface ? new Class[]{rawType} : ArrayUtil.EMPTY_CLASS_ARRAY);
  refreshGenericInfo(dynamic);
  if (stub != null) {
    stub.setHandler(this);
  }
}
