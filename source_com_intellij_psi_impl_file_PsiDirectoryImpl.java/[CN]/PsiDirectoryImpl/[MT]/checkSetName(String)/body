{
  CheckUtil.checkWritable(this);
  VirtualFile parentFile=myFile.getParent();
  if (parentFile == null) {
    throw new IncorrectOperationException("Cannot rename root directory.");
  }
  VirtualFile child=parentFile.findChild(name);
  if (child != null && !child.equals(myFile)) {
    throw new IncorrectOperationException("File " + child.getPresentableUrl() + " already exists.");
  }
}
