{
  LOG.assertTrue(isValid());
  VirtualFile[] files=myFile.getChildren();
  ArrayList<PsiElement> children=new ArrayList<PsiElement>();
  for (int i=0; i < files.length; i++) {
    VirtualFile vFile=files[i];
    if (vFile.isDirectory()) {
      PsiDirectory dir=myManager.findDirectory(vFile);
      if (dir != null) {
        children.add(dir);
      }
    }
 else {
      PsiFile file=myManager.findFile(vFile);
      if (file != null) {
        children.add(file);
      }
    }
  }
  return children.toArray(PsiElement.EMPTY_ARRAY);
}
