{
  CheckUtil.checkWritable(this);
  if (element instanceof PsiDirectory) {
    String name=((PsiDirectory)element).getName();
    PsiDirectory[] subpackages=getSubdirectories();
    for (    PsiDirectory dir : subpackages) {
      if (dir.getName().equals(name)) {
        throw new IncorrectOperationException("File " + dir.getVirtualFile().getPresentableUrl() + " already exists.");
      }
    }
  }
 else   if (element instanceof PsiFile) {
    String name=((PsiFile)element).getName();
    PsiFile[] files=getFiles();
    for (    PsiFile file : files) {
      if (file.getName().equals(name)) {
        throw new IncorrectOperationException("File " + file.getVirtualFile().getPresentableUrl() + " already exists.");
      }
    }
  }
 else   if (element instanceof PsiClass) {
    if (element.getParent() instanceof PsiFile) {
      checkCreateClassOrInterface(((PsiClass)element).getName());
    }
 else {
      LOG.error("not implemented");
    }
  }
 else {
    throw new IncorrectOperationException();
  }
}
