{
  CheckUtil.checkWritable(this);
  if (element instanceof PsiDirectory) {
    String name=((PsiDirectory)element).getName();
    PsiDirectory[] subpackages=getSubdirectories();
    for (int i=0; i < subpackages.length; i++) {
      PsiDirectory dir=subpackages[i];
      if (dir.getName().equals(name)) {
        throw new IncorrectOperationException("File " + dir.getVirtualFile().getPresentableUrl() + " already exists.");
      }
    }
  }
 else   if (element instanceof PsiFile) {
    String name=((PsiFile)element).getName();
    PsiFile[] files=getFiles();
    for (int i=0; i < files.length; i++) {
      PsiFile file=files[i];
      if (file.getName().equals(name)) {
        throw new IncorrectOperationException("File " + file.getVirtualFile().getPresentableUrl() + " already exists.");
      }
    }
  }
 else   if (element instanceof PsiClass) {
    if (element.getParent() instanceof PsiFile) {
      checkAdd(element.getParent());
    }
 else {
      LOG.error("not implemented");
    }
  }
 else {
    throw new IncorrectOperationException();
  }
}
