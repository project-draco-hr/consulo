{
  VirtualFile[] files=getOpenFiles();
  for (  VirtualFile file : files) {
    Set<FileEditorProvider> providers=new HashSet<FileEditorProvider>();
    List<EditorWithProviderComposite> composites=getEditorComposites(file);
    for (    EditorWithProviderComposite composite : composites) {
      providers.addAll(Arrays.asList(composite.getProviders()));
    }
    FileEditorProvider[] newProviders=FileEditorProviderManager.getInstance().getProviders(project,file);
    if (newProviders.length > providers.size()) {
      List<FileEditorProvider> toOpen=new ArrayList<FileEditorProvider>(Arrays.asList(newProviders));
      toOpen.removeAll(providers);
      for (      EditorWithProviderComposite composite : composites) {
        for (        FileEditorProvider provider : toOpen) {
          FileEditor editor=provider.createEditor(myProject,file);
          composite.addEditor(editor,provider);
        }
      }
    }
  }
}
