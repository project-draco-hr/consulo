{
  assertDispatchThread();
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    @Override public void run(){
      if (window.isFileOpen(file)) {
        window.closeFile(file,true,transferFocus);
        final List<EditorWindow> windows=window.getOwner().findWindows(file);
        if (windows.isEmpty()) {
          final LocalFileSystem.WatchRequest request=file.getUserData(WATCH_REQUEST_KEY);
          if (request != null) {
            LocalFileSystem.getInstance().removeWatchedRoot(request);
          }
        }
      }
    }
  }
,IdeBundle.message("command.close.active.editor"),null);
  removeSelectionRecord(file,window);
}
