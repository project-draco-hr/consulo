{
  final FileEditorProviderManager editorProviderManager=FileEditorProviderManager.getInstance();
  FileEditorProvider[] providers=editorProviderManager.getProviders(myProject,file);
  if (DumbService.getInstance(myProject).isDumb()) {
    final List<FileEditorProvider> dumbAware=ContainerUtil.findAll(providers,new Condition<FileEditorProvider>(){
      @Override public boolean value(      FileEditorProvider fileEditorProvider){
        return DumbService.isDumbAware(fileEditorProvider);
      }
    }
);
    providers=dumbAware.toArray(new FileEditorProvider[dumbAware.size()]);
  }
  return providers;
}
