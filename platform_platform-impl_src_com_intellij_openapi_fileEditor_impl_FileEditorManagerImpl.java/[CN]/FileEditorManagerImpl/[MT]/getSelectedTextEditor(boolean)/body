{
  if (!lockfree) {
    assertDispatchThread();
  }
  final EditorWindow currentWindow=lockfree ? getMainSplitters().getCurrentWindow() : getSplitters().getCurrentWindow();
  if (currentWindow != null) {
    final EditorWithProviderComposite selectedEditor=currentWindow.getSelectedEditor();
    if (selectedEditor != null && selectedEditor.getSelectedEditor() instanceof TextEditor) {
      return ((TextEditor)selectedEditor.getSelectedEditor()).getEditor();
    }
  }
  return null;
}
