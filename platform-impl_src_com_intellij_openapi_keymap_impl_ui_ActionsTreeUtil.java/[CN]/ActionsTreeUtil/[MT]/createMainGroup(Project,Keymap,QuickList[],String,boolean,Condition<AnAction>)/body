{
  Group mainGroup=new Group(KeyMapBundle.message("all.actions.group.title"),null,null);
  mainGroup.addGroup(createEditorActionsGroup(filtered));
  mainGroup.addGroup(createMainMenuGroup(filtered));
  mainGroup.addGroup(createVcsGroup(filtered));
  for (  KeymapExtension extension : Extensions.getExtensions(KeymapExtension.EXTENSION_POINT_NAME)) {
    mainGroup.addGroup(createExtensionGroup(filtered,project,extension));
  }
  mainGroup.addGroup(createDebuggerActionsGroup(filtered));
  mainGroup.addGroup(createBookmarksActionsGroup(filtered));
  mainGroup.addGroup(createExternalToolsGroup(filtered));
  mainGroup.addGroup(createMacrosGroup(filtered));
  mainGroup.addGroup(createQuickListsGroup(filtered,filter,forceFiltering,quickLists));
  mainGroup.addGroup(createOtherGroup(filtered,mainGroup,keymap));
  mainGroup.addGroup(createPluginsActionsGroup(filtered));
  if (filter != null || filtered != null) {
    final ArrayList list=mainGroup.getChildren();
    for (Iterator i=list.iterator(); i.hasNext(); ) {
      final Object o=i.next();
      if (o instanceof Group) {
        final Group group=(Group)o;
        if (group.getSize() == 0) {
          i.remove();
        }
      }
    }
  }
  return mainGroup;
}
