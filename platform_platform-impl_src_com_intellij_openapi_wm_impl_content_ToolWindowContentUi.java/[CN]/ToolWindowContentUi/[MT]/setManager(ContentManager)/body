{
  if (myManager != null) {
    getCurrentLayout().reset();
  }
  myManager=manager;
  getCurrentLayout().init();
  myManager.addContentManagerListener(new ContentManagerListener(){
    public void contentAdded(    final ContentManagerEvent event){
      getCurrentLayout().contentAdded(event);
      event.getContent().addPropertyChangeListener(ToolWindowContentUi.this);
      rebuild();
    }
    public void contentRemoved(    final ContentManagerEvent event){
      event.getContent().removePropertyChangeListener(ToolWindowContentUi.this);
      getCurrentLayout().contentRemoved(event);
      ensureSelectedContentVisible();
      rebuild();
    }
    public void contentRemoveQuery(    final ContentManagerEvent event){
    }
    public void selectionChanged(    final ContentManagerEvent event){
      ensureSelectedContentVisible();
      update();
      myContent.revalidate();
      myContent.repaint();
    }
  }
);
  initMouseListeners(this,ToolWindowContentUi.this);
  rebuild();
  myCloseAllAction=new TabbedContentAction.CloseAllAction(myManager);
  myNextTabAction=new TabbedContentAction.MyNextTabAction(myManager);
  myPreviousTabAction=new TabbedContentAction.MyPreviousTabAction(myManager);
}
