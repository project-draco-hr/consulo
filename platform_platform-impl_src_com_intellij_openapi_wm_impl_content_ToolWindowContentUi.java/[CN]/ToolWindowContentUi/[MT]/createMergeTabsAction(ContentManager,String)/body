{
  return new DumbAwareAction("Merge tabs to '" + tabPrefix + "' group"){
    @Override public void actionPerformed(    AnActionEvent e){
      final Content selectedContent=manager.getSelectedContent();
      final List<Pair<String,JComponent>> tabs=new ArrayList<Pair<String,JComponent>>();
      int selectedTab=-1;
      for (      Content content : manager.getContents()) {
        if (tabPrefix.equals(content.getUserData(Content.TAB_GROUP_NAME_KEY))) {
          final String label=content.getTabName().substring(tabPrefix.length() + 2);
          final JComponent component=content.getComponent();
          if (content == selectedContent) {
            selectedTab=tabs.size();
          }
          tabs.add(Pair.create(label,component));
          manager.removeContent(content,false);
          content.setComponent(null);
          Disposer.dispose(content);
        }
      }
      PropertiesComponent.getInstance().unsetValue(TabbedContent.SPLIT_PROPERTY_PREFIX + tabPrefix);
      for (int i=0; i < tabs.size(); i++) {
        final Pair<String,JComponent> tab=tabs.get(i);
        ContentUtilEx.addTabbedContent(manager,tab.second,tabPrefix,tab.first,i == selectedTab);
      }
    }
  }
;
}
