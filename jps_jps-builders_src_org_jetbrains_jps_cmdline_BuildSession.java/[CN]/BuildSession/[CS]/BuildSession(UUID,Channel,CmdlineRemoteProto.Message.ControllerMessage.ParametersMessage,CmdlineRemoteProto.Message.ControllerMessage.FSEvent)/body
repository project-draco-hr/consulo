{
  mySessionId=sessionId;
  myChannel=channel;
  final CmdlineRemoteProto.Message.ControllerMessage.GlobalSettings globals=params.getGlobalSettings();
  myProjectPath=FileUtil.toCanonicalPath(params.getProjectId());
  String globalOptionsPath=FileUtil.toCanonicalPath(globals.getGlobalOptionsPath());
  myBuildType=convertCompileType(params.getBuildType());
  myScopes=params.getScopeList();
  List<String> filePaths=params.getFilePathList();
  Map<String,String> builderParams=new HashMap<String,String>();
  for (  CmdlineRemoteProto.Message.KeyValuePair pair : params.getBuilderParameterList()) {
    builderParams.put(pair.getKey(),pair.getValue());
  }
  myInitialFSDelta=delta;
  JpsModelLoaderImpl loader=new JpsModelLoaderImpl(myProjectPath,globalOptionsPath,null);
  myForceModelLoading=Boolean.parseBoolean(builderParams.get(BuildMain.FORCE_MODEL_LOADING_PARAMETER.toString()));
  myBuildRunner=new BuildRunner(loader,filePaths,builderParams);
}
