{
  Map<String,BuildTargetType<?>> allTypes=null;
  for (  TargetTypeBuildScope scope : scopes) {
    final String typeId=scope.getTypeId();
    if (isJavaModuleBuildType(typeId)) {
      continue;
    }
    if (allTypes == null) {
      allTypes=new THashMap<String,BuildTargetType<?>>();
      for (      BuilderService builderService : JpsServiceManager.getInstance().getExtensions(BuilderService.class)) {
        for (        BuildTargetType<?> targetType : builderService.getTargetTypes()) {
          allTypes.put(targetType.getTypeId(),targetType);
        }
      }
    }
    final BuildTargetType<?> targetType=allTypes.get(typeId);
    if (targetType != null && !isModuleBasedTargetType(targetType)) {
      return false;
    }
  }
  return true;
}
