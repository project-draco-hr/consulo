{
  final File file=new File(dataStorageRoot,FS_STATE_FILE);
  try {
    final InputStream fs=new FileInputStream(file);
    byte[] bytes;
    try {
      bytes=FileUtil.loadBytes(fs,(int)file.length());
    }
  finally {
      fs.close();
    }
    final DataInputStream in=new DataInputStream(new ByteArrayInputStream(bytes));
    try {
      final long savedOrdinal=in.readLong();
      if (initialEvent != null && (savedOrdinal + 1L == initialEvent.getOrdinal())) {
        pd.fsState.load(in);
        myLastEventOrdinal=savedOrdinal;
        applyFSEvent(pd,initialEvent);
      }
 else {
        pd.fsState.clearAll();
        myLastEventOrdinal=initialEvent != null ? initialEvent.getOrdinal() : 0L;
      }
    }
  finally {
      in.close();
    }
  }
 catch (  FileNotFoundException ignored) {
  }
catch (  IOException e) {
    pd.fsState.clearAll();
    myLastEventOrdinal=initialEvent != null ? initialEvent.getOrdinal() : 0L;
    LOG.error(e);
  }
}
