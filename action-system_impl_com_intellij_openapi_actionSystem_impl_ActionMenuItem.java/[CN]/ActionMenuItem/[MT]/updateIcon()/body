{
  if (myAction instanceof ToggleAction && myPresentation.getIcon() == null) {
    ToggleAction stateAction=(ToggleAction)myAction;
    if (stateAction.isSelected(myEvent)) {
      setIcon(ourCheckedIcon);
      setDisabledIcon(IconLoader.getDisabledIcon(ourCheckedIcon));
    }
 else {
      setIcon(ourUncheckedIcon);
      setDisabledIcon(IconLoader.getDisabledIcon(ourUncheckedIcon));
    }
  }
 else {
    if (!SystemInfo.isMac || UISettings.getInstance().SHOW_ICONS_IN_MENUS) {
      Icon icon=myPresentation.getIcon();
      setIcon(icon);
      if (myPresentation.getDisabledIcon() != null) {
        setDisabledIcon(myPresentation.getDisabledIcon());
      }
 else {
        setDisabledIcon(IconLoader.getDisabledIcon(icon));
      }
    }
  }
}
