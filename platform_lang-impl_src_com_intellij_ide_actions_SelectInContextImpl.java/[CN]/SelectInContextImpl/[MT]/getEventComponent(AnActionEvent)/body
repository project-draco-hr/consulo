{
  InputEvent inputEvent=event.getInputEvent();
  Object source;
  if (inputEvent != null && (source=inputEvent.getSource()) instanceof JComponent) {
    return (JComponent)source;
  }
 else {
    return safeCast(PlatformDataKeys.CONTEXT_COMPONENT.getData(event.getDataContext()),JComponent.class);
  }
}
