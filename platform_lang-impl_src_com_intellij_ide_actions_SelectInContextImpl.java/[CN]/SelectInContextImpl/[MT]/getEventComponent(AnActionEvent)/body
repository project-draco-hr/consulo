{
  InputEvent inputEvent=event.getInputEvent();
  Object source;
  if (inputEvent != null && (source=inputEvent.getSource()) instanceof JComponent) {
    return (JComponent)source;
  }
 else {
    return safeCast(event.getDataContext().getData(DataConstants.CONTEXT_COMPONENT),JComponent.class);
  }
}
