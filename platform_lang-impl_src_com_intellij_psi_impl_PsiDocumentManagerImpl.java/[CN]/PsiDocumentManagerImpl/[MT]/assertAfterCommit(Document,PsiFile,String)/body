{
  if (myTreeElementBeingReparsedSoItWontBeCollected.getTextLength() != document.getTextLength()) {
    if (ApplicationManagerEx.getApplicationEx().isInternal()) {
      String fileText=file.getText();
      String documentText=document.getText();
      throw new AssertionError("commitDocument left PSI inconsistent; file len=" + myTreeElementBeingReparsedSoItWontBeCollected.getTextLength() + "; doc len="+ document.getTextLength()+ "; doc.getText() == file.getText(): "+ Comparing.equal(fileText,documentText)+ ";\n file psi text="+ fileText+ ";\n doc text="+ documentText+ ";\n old psi file text="+ oldPsiText);
    }
    throw new AssertionError("commitDocument left PSI inconsistent: " + file);
  }
}
