{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (myUncommittedDocuments.isEmpty()) {
    action.run();
    return true;
  }
  CompositeRunnable actions=(CompositeRunnable)actionsWhenAllDocumentsAreCommitted.get(PERFORM_ALWAYS_KEY);
  if (actions == null) {
    actions=new CompositeRunnable();
    actionsWhenAllDocumentsAreCommitted.put(PERFORM_ALWAYS_KEY,actions);
  }
  actions.add(action);
  return false;
}
