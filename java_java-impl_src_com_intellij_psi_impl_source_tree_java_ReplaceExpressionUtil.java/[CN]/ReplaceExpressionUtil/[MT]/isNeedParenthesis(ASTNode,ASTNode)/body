{
  final ASTNode oldParent=oldExpr.getTreeParent();
  if (!ElementType.EXPRESSION_BIT_SET.contains(oldParent.getElementType()))   return false;
  int priority=getExpressionPriority(newExpr);
  int parentPriority=getExpressionPriority(oldParent);
  if (priority > parentPriority)   return false;
  IElementType i=oldParent.getElementType();
  if (i == ASSIGNMENT_EXPRESSION) {
    if (priority < parentPriority)     return true;
    return ((CompositeElement)oldParent).getChildRole(oldExpr) == ChildRole.LOPERAND ? true : false;
  }
 else   if (i == CONDITIONAL_EXPRESSION) {
    int role=((CompositeElement)oldParent).getChildRole(oldExpr);
    if (role == ChildRole.THEN_EXPRESSION)     return false;
    if (priority < parentPriority)     return true;
    return role == ChildRole.ELSE_EXPRESSION ? false : true;
  }
 else   if (i == BINARY_EXPRESSION) {
    if (priority < parentPriority)     return true;
    final IElementType opType=((PsiBinaryExpression)SourceTreeToPsiMap.treeElementToPsi(oldParent)).getOperationSign().getTokenType();
    return ((CompositeElement)oldParent).getChildRole(oldExpr) == ChildRole.LOPERAND ? false : opType != PLUS && opType != ASTERISK && opType != ANDAND;
  }
 else   if (i == INSTANCE_OF_EXPRESSION) {
    return priority < parentPriority;
  }
 else   if (i == PREFIX_EXPRESSION || i == TYPE_CAST_EXPRESSION) {
    return priority < parentPriority;
  }
 else   if (i == POSTFIX_EXPRESSION) {
    return priority <= parentPriority;
  }
 else   if (i == REFERENCE_EXPRESSION) {
    return priority < parentPriority;
  }
 else   if (i == METHOD_CALL_EXPRESSION) {
    return false;
  }
 else   if (i == NEW_EXPRESSION) {
    return false;
  }
 else   if (i == ARRAY_ACCESS_EXPRESSION) {
    int role=((CompositeElement)oldParent).getChildRole(oldExpr);
    if (role == ChildRole.ARRAY_DIMENSION)     return false;
    return priority < parentPriority;
  }
 else   if (i == ARRAY_INITIALIZER_EXPRESSION) {
    return false;
  }
 else   if (i == PARENTH_EXPRESSION) {
    return false;
  }
 else   if (i == LITERAL_EXPRESSION || i == THIS_EXPRESSION || i == SUPER_EXPRESSION || i == CLASS_OBJECT_ACCESS_EXPRESSION) {
    return false;
  }
  LOG.assertTrue(false);
  return false;
}
