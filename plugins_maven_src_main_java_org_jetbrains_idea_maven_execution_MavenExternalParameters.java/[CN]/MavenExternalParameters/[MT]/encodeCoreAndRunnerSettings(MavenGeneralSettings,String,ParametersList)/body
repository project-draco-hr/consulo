{
  if (coreSettings.isWorkOffline()) {
    cmdList.add("--offline");
  }
  String version=MavenUtil.getMavenVersion(mavenHome);
  boolean atLeastMaven3=version != null && version.compareTo("3.0.0") >= 0;
  if (!atLeastMaven3) {
    addIfNotEmpty(cmdList,coreSettings.getPluginUpdatePolicy().getCommandLineOption());
    if (!coreSettings.isUsePluginRegistry()) {
      cmdList.add("--no-plugin-registry");
    }
  }
  if (coreSettings.getOutputLevel() == MavenExecutionOptions.LoggingLevel.DEBUG) {
    cmdList.add("--debug");
  }
  if (coreSettings.isNonRecursive()) {
    cmdList.add("--non-recursive");
  }
  if (coreSettings.isPrintErrorStackTraces()) {
    cmdList.add("--errors");
  }
  if (coreSettings.isAlwaysUpdateSnapshots()) {
    cmdList.add("--update-snapshots");
  }
  addIfNotEmpty(cmdList,coreSettings.getFailureBehavior().getCommandLineOption());
  addIfNotEmpty(cmdList,coreSettings.getChecksumPolicy().getCommandLineOption());
  addOption(cmdList,"s",coreSettings.getUserSettingsFile());
  if (!StringUtil.isEmptyOrSpaces(coreSettings.getLocalRepository())) {
    cmdList.addProperty("maven.repo.local",coreSettings.getLocalRepository());
  }
}
