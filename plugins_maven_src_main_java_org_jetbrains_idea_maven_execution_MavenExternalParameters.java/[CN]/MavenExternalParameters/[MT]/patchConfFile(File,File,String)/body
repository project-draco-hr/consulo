{
  Scanner sc=new Scanner(originalConf);
  try {
    BufferedWriter out=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(dest)));
    try {
      boolean patched=false;
      while (sc.hasNextLine()) {
        String line=sc.nextLine();
        out.append(line);
        out.newLine();
        if (!patched && "[plexus.core]".equals(line)) {
          out.append("load ").append(library);
          out.newLine();
          patched=true;
        }
      }
    }
  finally {
      out.close();
    }
  }
  finally {
    sc.close();
  }
}
