{
  final Color bg=UIUtil.getTableCellBackground(table,row);
  final Color fg=table.getForeground();
  final Color selBg=table.getSelectionBackground();
  final Color selFg=table.getSelectionForeground();
  myPanel.setBackground(isSel ? selBg : bg);
  if (value == null) {
    return myPanel;
  }
  setForeground(isSel ? selFg : fg);
  myPanel.setForeground(getForeground());
  setBackground(bg);
  myPanel.setBackground(getBackground());
  if (value instanceof String) {
    setSelected(Boolean.parseBoolean((String)value));
  }
 else {
    setSelected(((Boolean)value).booleanValue());
  }
  setEnabled(table.isCellEditable(row,column));
  setBorder(null);
  myPanel.removeAll();
  myPanel.add(this,BorderLayout.CENTER);
  final ListSelectionModel selModel=table.getSelectionModel();
  final Color color=(selModel.getMaxSelectionIndex() - selModel.getMinSelectionIndex()) == 0 ? table.getSelectionBackground() : table.getForeground();
  myPanel.setBorder(hasFocus ? BorderFactory.createLineBorder(color) : IdeBorderFactory.createEmptyBorder(1));
  return myPanel;
}
