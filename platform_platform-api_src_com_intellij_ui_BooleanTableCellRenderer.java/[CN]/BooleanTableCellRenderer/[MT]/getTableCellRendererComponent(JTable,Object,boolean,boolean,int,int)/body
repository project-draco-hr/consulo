{
  final Color bg=table.getBackground();
  final Color fg=table.getForeground();
  final Color selBg=table.getSelectionBackground();
  final Color selFg=table.getSelectionForeground();
  myPanel.setBackground(isSel ? selBg : bg);
  if (value == null) {
    return myPanel;
  }
  setForeground(isSel ? selFg : fg);
  if (isSel)   super.setBackground(selBg);
 else   setBackground(bg);
  if (value instanceof String) {
    setSelected(Boolean.parseBoolean((String)value));
  }
 else {
    setSelected(((Boolean)value).booleanValue());
  }
  setBorder(hasFocus ? UIUtil.getTableFocusCellHighlightBorder() : IdeBorderFactory.createEmptyBorder(1));
  setEnabled(table.isCellEditable(row,column));
  return this;
}
