{
  CompositeElement invalidElementsGroup=null;
  final DeclarationParsing.Context declarationParsingContext=calcDeclarationContext(context);
  while (true) {
    IElementType tokenType=filterLexer.getTokenType();
    if (tokenType == null)     break;
    if (tokenType == SEMICOLON) {
      TreeUtil.addChildren(dummyRoot,ParseUtil.createTokenElement(filterLexer,myContext.getCharTable()));
      filterLexer.advance();
      invalidElementsGroup=null;
      continue;
    }
    TreeElement declaration=myContext.getDeclarationParsing().parseDeclaration(filterLexer,declarationParsingContext);
    if (declaration != null) {
      TreeUtil.addChildren(dummyRoot,declaration);
      invalidElementsGroup=null;
      continue;
    }
    if (invalidElementsGroup == null) {
      invalidElementsGroup=Factory.createErrorElement("Unexpected token");
      TreeUtil.addChildren(dummyRoot,invalidElementsGroup);
    }
    CompositeElement ref=parseJavaCodeReference(filterLexer,true);
    if (ref != null) {
      TreeUtil.addChildren(invalidElementsGroup,ref);
      continue;
    }
    TreeUtil.addChildren(invalidElementsGroup,ParseUtil.createTokenElement(filterLexer,myContext.getCharTable()));
    filterLexer.advance();
  }
}
