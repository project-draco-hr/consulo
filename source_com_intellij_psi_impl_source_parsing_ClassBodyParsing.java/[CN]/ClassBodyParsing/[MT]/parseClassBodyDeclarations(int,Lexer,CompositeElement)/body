{
  CompositeElement invalidElementsGroup=null;
  final DeclarationParsing.Context declarationParsingContext=calcDeclarationContext(context);
  while (true) {
    IElementType tokenType=filterLexer.getTokenType();
    if (tokenType == null || tokenType == RBRACE)     break;
    if (tokenType == SEMICOLON) {
      dummyRoot.rawAddChildren(ParseUtil.createTokenElement(filterLexer,myContext.getCharTable()));
      filterLexer.advance();
      invalidElementsGroup=null;
      continue;
    }
    TreeElement declaration=myContext.getDeclarationParsing().parseDeclaration(filterLexer,declarationParsingContext);
    if (declaration != null) {
      dummyRoot.rawAddChildren(declaration);
      invalidElementsGroup=null;
      continue;
    }
    if (invalidElementsGroup == null) {
      invalidElementsGroup=Factory.createErrorElement(JavaErrorMessages.message("unexpected.token"));
      dummyRoot.rawAddChildren(invalidElementsGroup);
    }
    CompositeElement ref=parseJavaCodeReference(filterLexer,true,true);
    if (ref != null) {
      invalidElementsGroup.rawAddChildren(ref);
      continue;
    }
    invalidElementsGroup.rawAddChildren(ParseUtil.createTokenElement(filterLexer,myContext.getCharTable()));
    filterLexer.advance();
  }
}
