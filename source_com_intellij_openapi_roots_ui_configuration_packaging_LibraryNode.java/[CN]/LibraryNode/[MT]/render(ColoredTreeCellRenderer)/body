{
  Library library=myLibraryLink.getLibrary();
  if (library == null) {
    String libraryName=myLibraryLink.getPresentableName();
    renderer.append(libraryName,SimpleTextAttributes.ERROR_ATTRIBUTES);
  }
 else {
    String name=library.getName();
    if (name != null) {
      renderer.setIcon(Icons.LIBRARY_ICON);
      renderer.append(name,getMainAttributes());
      renderer.append(getLibraryTableComment(library),getCommentAttributes());
    }
 else {
      VirtualFile[] files=library.getFiles(OrderRootType.CLASSES);
      if (files.length > 0) {
        VirtualFile file=files[0];
        renderer.setIcon(file.getIcon());
        renderer.append(file.getName(),getMainAttributes());
        renderer.append(getLibraryTableComment(library),getCommentAttributes());
      }
 else {
        CellAppearanceUtils.forLibrary(library).customize(renderer);
      }
    }
  }
}
