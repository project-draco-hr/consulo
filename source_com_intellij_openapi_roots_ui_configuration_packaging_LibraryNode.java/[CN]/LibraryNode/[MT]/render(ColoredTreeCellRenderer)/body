{
  Library library=myLibraryLink.getLibrary();
  if (library == null) {
    String libraryName=myLibraryLink.getPresentableName();
    renderer.append(libraryName,SimpleTextAttributes.ERROR_ATTRIBUTES);
  }
 else {
    String name=library.getName();
    if (name != null) {
      renderer.setIcon(Icons.LIBRARY_ICON);
      renderer.append(name,getMainAttributes());
      LibraryTable libraryTable=library.getTable();
      if (libraryTable != null) {
        renderer.append(" (" + libraryTable.getPresentation().getDisplayName(false) + ")",getCommentAttributes());
      }
    }
 else {
      VirtualFile[] files=library.getFiles(OrderRootType.CLASSES);
      if (files.length > 0) {
        VirtualFile file=files[0];
        renderer.setIcon(file.getIcon());
        renderer.append(file.getName(),getMainAttributes());
      }
 else {
        CellAppearanceUtils.forLibrary(library).customize(renderer);
      }
    }
  }
  if (belongsToIncludedArtifact()) {
    PackagingArtifact owner=getOwner();
    LOG.assertTrue(owner != null);
    if (library != null) {
      renderer.append(" " + ProjectBundle.message("node.text.packaging.included.from.0",owner.getDisplayName()),getCommentAttributes());
    }
  }
}
