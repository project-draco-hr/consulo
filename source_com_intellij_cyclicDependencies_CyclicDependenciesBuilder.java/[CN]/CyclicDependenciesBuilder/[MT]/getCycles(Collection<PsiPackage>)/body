{
  final HashMap<PsiPackage,Set<List<PsiPackage>>> result=new HashMap<PsiPackage,Set<List<PsiPackage>>>();
  final List<Chunk<PsiPackage>> chunks=buildChunks();
  for (Iterator<PsiPackage> iterator=packages.iterator(); iterator.hasNext(); ) {
    PsiPackage psiPackage=iterator.next();
    final List<Chunk<PsiPackage>> chunksByPackage=findChunksByPackage(psiPackage,chunks);
    for (Iterator<Chunk<PsiPackage>> it=chunksByPackage.iterator(); it.hasNext(); ) {
      Chunk<PsiPackage> chunk=it.next();
      if (chunk.getNodes().size() == 1) {
        continue;
      }
      Set<List<PsiPackage>> paths2Pack=result.get(psiPackage);
      if (paths2Pack == null) {
        paths2Pack=new HashSet<List<PsiPackage>>();
        result.put(psiPackage,paths2Pack);
      }
      paths2Pack.addAll(CyclicGraphUtil.getNodeCycles(myGraph,psiPackage));
    }
  }
  return result;
}
