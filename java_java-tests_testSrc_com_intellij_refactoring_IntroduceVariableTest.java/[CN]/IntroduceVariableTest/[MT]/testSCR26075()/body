{
  doTest(new MockIntroduceVariableHandler("wrong",false,false,false,"java.lang.String"){
    protected void assertValidationResult(    boolean validationResult){
      assertFalse(validationResult);
    }
    protected boolean reportConflicts(    MultiMap<PsiElement,String> conflicts,    final Project project,    IntroduceVariableSettings dialog){
      assertEquals(2,conflicts.size());
      Collection<? extends String> conflictsMessages=conflicts.values();
      assertTrue(conflictsMessages.contains("Introducing variable may break code logic."));
      assertTrue(conflictsMessages.contains("Local variable <b><code>c</code></b> is modified in loop body."));
      return false;
    }
  }
);
}
