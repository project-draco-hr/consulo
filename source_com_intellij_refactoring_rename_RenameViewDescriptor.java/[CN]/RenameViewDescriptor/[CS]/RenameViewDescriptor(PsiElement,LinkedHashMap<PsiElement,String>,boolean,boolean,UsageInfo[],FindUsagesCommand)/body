{
  myElements=renamesMap.keySet().toArray(new PsiElement[0]);
  mySearchInComments=isSearchInComments;
  mySearchInNonJavaFiles=isSearchInNonJavaFiles;
  myUsages=usages;
  myRefreshCommand=refreshCommand;
  Set<String> processedElementsHeaders=new THashSet<String>();
  Set<String> codeReferences=new THashSet<String>();
  for (  final PsiElement element : myElements) {
    String newName=renamesMap.get(element);
    String prefix="";
    if (element instanceof PsiDirectory) {
      String fullName=UsageViewUtil.getLongName(element);
      int lastDot=fullName.lastIndexOf('.');
      if (lastDot >= 0) {
        prefix=fullName.substring(0,lastDot + 1);
      }
    }
    processedElementsHeaders.add(UsageViewUtil.capitalize(UsageViewUtil.getType(element) + " to be renamed to " + prefix+ newName));
    codeReferences.add(UsageViewUtil.getType(element) + " " + UsageViewUtil.getLongName(element));
  }
  myProcessedElementsHeader=StringUtil.join(processedElementsHeaders.toArray(ArrayUtil.EMPTY_STRING_ARRAY),", ");
  myCodeReferencesText="References in code to " + StringUtil.join(codeReferences.toArray(ArrayUtil.EMPTY_STRING_ARRAY),", ") + " ";
  myHelpID=HelpID.getRenameHelpID(primaryElement);
}
