{
  myElements=renamesMap.keySet().toArray(new PsiElement[0]);
  mySearchInComments=isSearchInComments;
  mySearchInNonJavaFiles=isSearchInNonJavaFiles;
  myUsages=usages;
  myRefreshCommand=refreshCommand;
  StringBuffer processedElementsHeader=new StringBuffer();
  StringBuffer codeReferencesText=new StringBuffer();
  codeReferencesText.append("References in code to ");
  for (int i=0; i < myElements.length; i++) {
    final PsiElement element=myElements[i];
    String newName=renamesMap.get(element);
    String prefix="";
    if (element instanceof PsiDirectory) {
      String fullName=UsageViewUtil.getLongName(element);
      int lastDot=fullName.lastIndexOf('.');
      if (lastDot >= 0) {
        prefix=fullName.substring(0,lastDot + 1);
      }
    }
    processedElementsHeader.append(UsageViewUtil.capitalize(UsageViewUtil.getType(element) + " to be renamed to " + prefix+ newName));
    codeReferencesText.append(UsageViewUtil.getType(element) + " " + UsageViewUtil.getLongName(element));
    if (i < myElements.length - 1) {
      processedElementsHeader.append(", ");
      codeReferencesText.append(", ");
    }
  }
  codeReferencesText.append(" ");
  myProcessedElementsHeader=processedElementsHeader.toString();
  myCodeReferencesText=codeReferencesText.toString();
  myHelpID=HelpID.getRenameHelpID(primaryElement);
}
