{
  final SSHPasswordProvider sshPasswordProvider=SSHPasswordProvider.getInstance();
  if (!myUsePrivateKeyFile.isSelected()) {
    final String cvsRoot=myRootProvider.getCurrentRoot();
    SshPasswordDialog sshPasswordDialog=new SshPasswordDialog(cvsRoot,"Enter password for ");
    sshPasswordDialog.show();
    if (!sshPasswordDialog.isOK())     return;
    sshPasswordProvider.removePPKPasswordFor(cvsRoot);
    sshPasswordProvider.storePasswordForCvsRoot(cvsRoot,sshPasswordDialog.getPassword(),sshPasswordDialog.saveThisPassword());
  }
 else {
    final String cvsRoot=myRootProvider.getCurrentRoot();
    SshPasswordDialog sshPasswordDialog=new SshPasswordDialog(cvsRoot,"Enter private key file password for ");
    sshPasswordDialog.show();
    if (!sshPasswordDialog.isOK())     return;
    sshPasswordProvider.removePasswordFor(cvsRoot);
    sshPasswordProvider.storePPKPasswordForCvsRoot(cvsRoot,sshPasswordDialog.getPassword(),sshPasswordDialog.saveThisPassword());
  }
}
