{
  return new CompilationEvent(){
    @Override protected void process(    OutputParser.Callback callback){
      JavaFileObject fileObject=diagnostic.getSource();
      String message=diagnostic.getMessage(null);
      String url=fileObject == null ? null : VfsUtil.pathToUrl(FileUtil.toSystemIndependentName(new File(fileObject.toUri()).getPath()));
      CompilerMessageCategory category=diagnostic.getKind() == Diagnostic.Kind.ERROR ? CompilerMessageCategory.ERROR : diagnostic.getKind() == Diagnostic.Kind.WARNING || diagnostic.getKind() == Diagnostic.Kind.MANDATORY_WARNING ? CompilerMessageCategory.WARNING : CompilerMessageCategory.INFORMATION;
      callback.message(category,message,url,(int)diagnostic.getLineNumber(),(int)diagnostic.getColumnNumber());
    }
  }
;
}
