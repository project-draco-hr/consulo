{
  myBefore=before;
  myAfter=after;
  myRanges=ranges;
  final FileStatus fs=change.getFileStatus();
  myIsAddition=FileStatus.ADDED.equals(fs);
  myOneSide=FileStatus.ADDED.equals(fs) || FileStatus.DELETED.equals(fs);
  if (change.getBeforeRevision() != null) {
    myFileBefore=change.getBeforeRevision().getFile().getVirtualFile();
    myFileTypeBefore=change.getBeforeRevision().getFile().getFileType();
  }
 else {
    myFileBefore=null;
    myFileTypeBefore=null;
  }
  if (change.getAfterRevision() != null) {
    myFileAfter=change.getAfterRevision().getFile().getVirtualFile();
    myFileTypeAfter=change.getAfterRevision().getFile().getFileType();
  }
 else {
    myFileAfter=null;
    myFileTypeAfter=null;
  }
}
