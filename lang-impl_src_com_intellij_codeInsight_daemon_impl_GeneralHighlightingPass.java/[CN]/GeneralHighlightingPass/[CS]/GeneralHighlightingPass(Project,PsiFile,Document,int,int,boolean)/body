{
  super(project,document,IN_PROGRESS_ICON,PRESENTABLE_NAME,file,true);
  myStartOffset=startOffset;
  myEndOffset=endOffset;
  myUpdateAll=updateAll;
  LOG.assertTrue(file.isValid());
  setId(Pass.UPDATE_ALL);
  myHasErrorElement=!isWholeFileHighlighting() && Boolean.TRUE.equals(myFile.getUserData(HAS_ERROR_ELEMENT));
  FileStatusMap fileStatusMap=((DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(myProject)).getFileStatusMap();
  myErrorFound=!isWholeFileHighlighting() && fileStatusMap.wasErrorFound(myDocument);
}
