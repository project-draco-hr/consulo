{
  PsiManager psiManager=file.getManager();
  PsiSearchHelper helper=psiManager.getSearchHelper();
  TodoItem[] todoItems=helper.findTodoItems(file,startOffset,endOffset);
  if (todoItems.length == 0)   return Collections.emptyList();
  List<HighlightInfo> list=new ArrayList<HighlightInfo>(todoItems.length);
  for (  TodoItem todoItem : todoItems) {
    TextRange range=todoItem.getTextRange();
    String description=text.subSequence(range.getStartOffset(),range.getEndOffset()).toString();
    TextAttributes attributes=todoItem.getPattern().getAttributes().getTextAttributes();
    HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.TODO,range,description,attributes);
    list.add(info);
  }
  return list;
}
