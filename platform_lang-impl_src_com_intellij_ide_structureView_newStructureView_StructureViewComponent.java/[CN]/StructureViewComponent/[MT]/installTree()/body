{
  getTree().getSelectionModel().setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
  myAutoScrollToSourceHandler.install(getTree());
  myAutoScrollFromSourceHandler.install();
  TreeUtil.installActions(getTree());
  new TreeSpeedSearch(getTree(),new Convertor<TreePath,String>(){
    public String convert(    final TreePath treePath){
      final DefaultMutableTreeNode node=(DefaultMutableTreeNode)treePath.getLastPathComponent();
      final Object userObject=node.getUserObject();
      if (userObject != null) {
        return FileStructurePopup.getSpeedSearchText(userObject);
      }
      return null;
    }
  }
);
  addTreeKeyListener();
  addTreeMouseListeners();
  restoreState();
}
