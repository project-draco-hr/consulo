{
  DefaultActionGroup result=new DefaultActionGroup();
  Sorter[] sorters=myTreeModel.getSorters();
  for (  final Sorter sorter : sorters) {
    if (sorter.isVisible()) {
      result.add(new TreeActionWrapper(sorter,this));
    }
  }
  if (sorters.length > 0) {
    result.addSeparator();
  }
  addGroupByActions(result);
  Filter[] filters=myTreeModel.getFilters();
  for (  Filter filter : filters) {
    result.add(new TreeActionWrapper(filter,this));
  }
  if (myTreeModel instanceof ProvidingTreeModel) {
    final Collection<NodeProvider> providers=((ProvidingTreeModel)myTreeModel).getNodeProviders();
    for (    NodeProvider provider : providers) {
      result.add(new TreeActionWrapper(provider,this));
    }
  }
  if (!togglesOnly) {
    result.add(new ExpandAllAction(getTree()));
    result.add(new CollapseAllAction(getTree()));
  }
  if (showScrollToFromSourceActions()) {
    result.addSeparator();
    result.add(myAutoScrollToSourceHandler.createToggleAction());
    result.add(myAutoScrollFromSourceHandler.createToggleAction());
  }
  return result;
}
