{
  for (int lastIndex=0; lastIndex < savedLog.size(); lastIndex++) {
    Commit commit=savedLog.get(lastIndex);
    boolean isGreen=currentGreen.contains(commit.getId());
    if (isGreen) {
      currentRed.remove(commit.getId());
      currentGreen.addAll(commit.getParents());
    }
 else {
      markRealRedNode(commit.getId());
      currentRed.addAll(commit.getParents());
    }
    if (currentRed.isEmpty()) {
      return lastIndex + 1;
    }
  }
  throw new IllegalStateException(ILLEGAL_DATA_RELOAD_ALL);
}
