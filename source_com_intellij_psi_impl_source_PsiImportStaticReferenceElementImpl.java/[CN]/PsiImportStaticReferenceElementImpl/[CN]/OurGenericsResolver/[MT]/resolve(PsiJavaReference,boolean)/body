{
  LOG.assertTrue(ref instanceof PsiImportStaticReferenceElementImpl);
  final PsiImportStaticReferenceElementImpl referenceElement=((PsiImportStaticReferenceElementImpl)ref);
  final PsiElement qualifier=referenceElement.getQualifier();
  if (!(qualifier instanceof PsiJavaCodeReferenceElement))   return ResolveResult.EMPTY_ARRAY;
  final PsiElement target=((PsiJavaCodeReferenceElement)qualifier).resolve();
  if (!(target instanceof PsiClass))   return ResolveResult.EMPTY_ARRAY;
  final ArrayList<ResolveResult> results=new ArrayList<ResolveResult>();
  target.processDeclarations(referenceElement.new MyScopeProcessor(results),PsiSubstitutor.EMPTY,referenceElement,referenceElement);
  if (results.size() <= 1) {
    return results.toArray(new ResolveResult[results.size()]);
  }
  for (int i=results.size() - 1; i >= 0; i--) {
    final ResolveResult resolveResult=results.get(i);
    if (!resolveResult.isValidResult()) {
      results.remove(i);
    }
  }
  return results.toArray(new ResolveResult[results.size()]);
}
