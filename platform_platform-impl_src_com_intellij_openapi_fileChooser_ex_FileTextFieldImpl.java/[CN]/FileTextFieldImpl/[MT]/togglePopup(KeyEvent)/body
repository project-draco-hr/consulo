{
  final KeyStroke stroke=KeyStroke.getKeyStroke(e.getKeyCode(),e.getModifiers());
  final Object action=((InputMap)UIManager.get("ComboBox.ancestorInputMap")).get(stroke);
  if ("selectNext".equals(action)) {
    if (!isPopupShowing()) {
      return true;
    }
 else {
      return false;
    }
  }
 else   if ("togglePopup".equals(action)) {
    if (isPopupShowing()) {
      closePopup();
    }
 else {
      suggestCompletion(true,true);
    }
    return true;
  }
 else {
    final Keymap active=KeymapManager.getInstance().getActiveKeymap();
    final String[] ids=active.getActionIds(stroke);
    if (ids.length > 0 && IdeActions.ACTION_CODE_COMPLETION.equals(ids[0])) {
      suggestCompletion(true,true);
    }
  }
  return false;
}
