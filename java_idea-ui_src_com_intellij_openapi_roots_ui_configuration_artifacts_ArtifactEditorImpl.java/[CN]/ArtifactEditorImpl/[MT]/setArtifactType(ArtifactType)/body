{
  final ModifiableArtifact modifiableArtifact=myContext.getModifiableArtifactModel().getOrCreateModifiableArtifact(myOriginalArtifact);
  modifiableArtifact.setArtifactType(artifactType);
  myPropertiesEditors.removeTabs(myTabbedPane);
  myPropertiesEditors=new ArtifactPropertiesEditors(myContext,myOriginalArtifact,getArtifact());
  myPropertiesEditors.addTabs(myTabbedPane);
  final CompositePackagingElement<?> oldRootElement=getRootElement();
  final CompositePackagingElement<?> newRootElement=artifactType.createRootElement(getArtifact().getName());
  if (!newRootElement.getType().equals(oldRootElement.getType())) {
    ArtifactUtil.copyChildren(oldRootElement,newRootElement,myProject);
    myLayoutTreeComponent.setRootElement(newRootElement);
  }
}
