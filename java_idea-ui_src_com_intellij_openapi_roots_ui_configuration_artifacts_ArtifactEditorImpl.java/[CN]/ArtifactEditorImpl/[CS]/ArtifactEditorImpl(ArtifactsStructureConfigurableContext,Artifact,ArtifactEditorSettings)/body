{
  myContext=new ArtifactEditorContextImpl(context,this);
  myOriginalArtifact=artifact;
  myProject=context.getProject();
  mySubstitutionParameters.setTypesToShowContent(settings.getTypesToShowContent());
  mySourceItemsTree=new SourceItemsTree(myContext,this);
  myLayoutTreeComponent=new LayoutTreeComponent(this,mySubstitutionParameters,myContext,myOriginalArtifact,settings.isSortElements());
  myPropertiesEditors=new ArtifactPropertiesEditors(myContext,myOriginalArtifact,myOriginalArtifact);
  Disposer.register(this,mySourceItemsTree);
  Disposer.register(this,myLayoutTreeComponent);
  myBuildOnMakeCheckBox.setSelected(artifact.isBuildOnMake());
  final String outputPath=artifact.getOutputPath();
  myOutputDirectoryField.addBrowseFolderListener(CompilerBundle.message("dialog.title.output.directory.for.artifact"),CompilerBundle.message("chooser.description.select.output.directory.for.0.artifact",getArtifact().getName()),myProject,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  myShowSpecificContentOptionsGroup=createShowSpecificContentOptionsGroup();
  myShowSpecificContentOptionsButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,myShowSpecificContentOptionsGroup).getComponent().show(myShowSpecificContentOptionsButton,0,0);
    }
  }
);
  setOutputPath(outputPath);
  myValidationManager=new ArtifactValidationManagerImpl(this);
  myContext.setValidationManager(myValidationManager);
  updateShowContentCheckbox();
}
