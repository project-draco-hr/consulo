{
  final String[] urls=getAvailableUrls();
  for (  String url : urls) {
    if (url == null)     continue;
    String location=getResourceLocation(url);
    if (location == null)     continue;
    final Element e=new Element(RESOURCE_ELEMENT);
    e.setAttribute(URL_ATTR,url);
    e.setAttribute(LOCATION_ATTR,location.replace(File.separatorChar,'/'));
    element.addContent(e);
  }
  final String[] ignoredResources=getIgnoredResources();
  for (  String ignoredResource : ignoredResources) {
    final Element e=new Element(IGNORED_RESOURCE_ELEMENT);
    e.setAttribute(URL_ATTR,ignoredResource);
    element.addContent(e);
  }
  final ReplacePathToMacroMap macroReplacements=new ReplacePathToMacroMap();
  PathMacrosImpl.getInstanceEx().addMacroReplacements(macroReplacements);
  macroReplacements.substitute(element,SystemInfo.isFileSystemCaseSensitive,null);
}
