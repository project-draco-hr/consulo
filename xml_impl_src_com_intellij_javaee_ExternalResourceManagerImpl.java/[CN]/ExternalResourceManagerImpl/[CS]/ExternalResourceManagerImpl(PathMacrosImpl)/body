{
  addInternals();
  myPathMacros=pathMacros;
  if (!ApplicationManager.getApplication().isHeadlessEnvironment()) {
    final File extResourceFolder=new File(FetchExtResourceAction.getExternalResourcesPath());
    if (extResourceFolder.exists()) {
      Runnable action=new Runnable(){
        public void run(){
          ApplicationManager.getApplication().runWriteAction(new Runnable(){
            public void run(){
              final VirtualFile extResourceDir=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(extResourceFolder);
              if (extResourceDir != null)               LocalFileSystem.getInstance().addRootToWatch(extResourceDir.getPath(),true);
            }
          }
);
        }
      }
;
      if (ApplicationManager.getApplication().isDispatchThread())       action.run();
 else       ApplicationManager.getApplication().invokeLater(action);
    }
  }
}
