{
  if (myInited)   return;
  final AndroidFacet facet=myWizard.getFacet();
  Module module=facet.getModule();
  PropertiesComponent properties=PropertiesComponent.getInstance(module.getProject());
  String lastModule=properties.getValue(ChooseModuleStep.MODULE_PROPERTY);
  String lastApkPath=properties.getValue(getApkPathPropertyName());
  if (lastApkPath != null && module.getName().equals(lastModule)) {
    myApkPathField.setText(FileUtil.toSystemDependentName(lastApkPath));
  }
 else {
    String contentRootPath=getContentRootPath(module);
    if (contentRootPath != null) {
      String defaultPath=FileUtil.toSystemDependentName(contentRootPath + "/" + module.getName()+ ".apk");
      myApkPathField.setText(defaultPath);
    }
  }
  final String runProguardPropValue=properties.getValue(RUN_PROGUARD_PROPERTY);
  boolean selected;
  if (runProguardPropValue != null) {
    selected=Boolean.parseBoolean(runProguardPropValue);
  }
 else {
    selected=facet.getConfiguration().RUN_PROGUARD;
  }
  myProguardCheckBox.setSelected(selected);
  myProguardConfigFilePathLabel.setEnabled(selected);
  myProguardConfigFilePathField.setEnabled(selected);
  myIncludeSystemProguardFileCheckBox.setEnabled(selected);
  final AndroidPlatform platform=AndroidPlatform.getInstance(module);
  final int sdkToolsRevision=platform != null ? platform.getSdkData().getSdkToolsRevision() : -1;
  myIncludeSystemProguardFileCheckBox.setVisible(AndroidCommonUtils.isIncludingInProguardSupported(sdkToolsRevision));
  final String proguardCfgPath=properties.getValue(PROGUARD_CFG_PATH_PROPERTY);
  if (proguardCfgPath != null && LocalFileSystem.getInstance().refreshAndFindFileByPath(proguardCfgPath) != null) {
    myProguardConfigFilePathField.setText(FileUtil.toSystemDependentName(proguardCfgPath));
    final String includeSystemProguardFile=properties.getValue(INCLUDE_SYSTEM_PROGUARD_FILE_PROPERTY);
    myIncludeSystemProguardFileCheckBox.setSelected(Boolean.parseBoolean(includeSystemProguardFile));
  }
 else {
    final AndroidFacetConfiguration configuration=facet.getConfiguration();
    if (configuration.RUN_PROGUARD) {
      final VirtualFile proguardCfgFile=AndroidRootUtil.getProguardCfgFile(facet);
      if (proguardCfgFile != null) {
        myProguardConfigFilePathField.setText(FileUtil.toSystemDependentName(proguardCfgFile.getPath()));
      }
      myIncludeSystemProguardFileCheckBox.setSelected(facet.getConfiguration().isIncludeSystemProguardCfgPath());
    }
 else {
      final Pair<VirtualFile,Boolean> pair=AndroidCompileUtil.getDefaultProguardConfigFile(facet);
      if (pair != null) {
        myProguardConfigFilePathField.setText(FileUtil.toSystemDependentName(pair.getFirst().getPath()));
        myIncludeSystemProguardFileCheckBox.setSelected(pair.getSecond());
      }
 else {
        myIncludeSystemProguardFileCheckBox.setSelected(true);
      }
    }
  }
  myInited=true;
}
