{
  myListener=new MouseAdapter(){
    private Point pressPoint;
    private Point lastClickPoint;
    private long lastTimeClicked=-1;
    private int clickCount=0;
    @Override public void mousePressed(    MouseEvent e){
      if (Math.abs(lastTimeClicked - e.getWhen()) > TIME_EPS || (lastClickPoint != null && !isWithinEps(lastClickPoint,e.getPoint()))) {
        clickCount=0;
        lastClickPoint=null;
      }
      clickCount++;
      lastTimeClicked=e.getWhen();
      if (!e.isPopupTrigger()) {
        pressPoint=e.getPoint();
      }
    }
    @Override public void mouseReleased(    MouseEvent e){
      Point releasedAt=e.getPoint();
      Point clickedAt=pressPoint;
      lastClickPoint=clickedAt;
      pressPoint=null;
      if (e.isConsumed())       return;
      if (clickedAt == null)       return;
      if (e.isPopupTrigger())       return;
      if (releasedAt.x < 0 || releasedAt.y < 0 || releasedAt.x >= c.getWidth() || releasedAt.y >= c.getHeight())       return;
      if (isWithinEps(releasedAt,clickedAt)) {
        if (onClick(e,clickCount)) {
          e.consume();
        }
      }
    }
  }
;
  c.addMouseListener(myListener);
}
