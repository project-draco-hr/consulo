{
  if (value instanceof PsiElement) {
    PsiElement element=(PsiElement)value;
    String name=getElementText((T)element);
    Color color=list.getForeground();
    PsiFile psiFile=element.getContainingFile();
    boolean isProblemFile=false;
    if (psiFile != null) {
      VirtualFile vFile=psiFile.getVirtualFile();
      if (vFile != null) {
        if (WolfTheProblemSolver.getInstance(psiFile.getProject()).isProblemFile(vFile)) {
          isProblemFile=true;
        }
        FileStatus status=FileStatusManager.getInstance(psiFile.getProject()).getStatus(vFile);
        color=status.getColor();
      }
    }
    SimpleTextAttributes nameAttributes;
    if (isProblemFile) {
      TextAttributes attributes=new TextAttributes(color,null,Color.red,EffectType.WAVE_UNDERSCORE,Font.PLAIN);
      nameAttributes=SimpleTextAttributes.fromTextAttributes(attributes);
    }
 else {
      nameAttributes=new SimpleTextAttributes(Font.PLAIN,color);
    }
    append(name,nameAttributes);
    setIcon(PsiElementListCellRenderer.this.getIcon(element));
    String containerText=getContainerText(element,name + (myModuleName != null ? myModuleName + "        " : ""));
    if (containerText != null) {
      append(" " + containerText,new SimpleTextAttributes(Font.PLAIN,Color.GRAY));
    }
  }
 else {
    setIcon(IconUtil.getEmptyIcon(false));
    append(value == null ? "" : value.toString(),new SimpleTextAttributes(Font.PLAIN,list.getForeground()));
  }
  setPaintFocusBorder(false);
  setBackground(selected ? UIUtil.getListSelectionBackground() : UIUtil.getListBackground());
}
