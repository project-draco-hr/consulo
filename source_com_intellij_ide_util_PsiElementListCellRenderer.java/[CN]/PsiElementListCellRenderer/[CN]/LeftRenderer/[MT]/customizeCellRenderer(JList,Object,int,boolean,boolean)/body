{
  if (value instanceof PsiElement) {
    PsiElement element=(PsiElement)value;
    String name=getElementText((T)element);
    Color color=list.getForeground();
    PsiFile psiFile=element.getContainingFile();
    if (psiFile != null) {
      VirtualFile vFile=psiFile.getVirtualFile();
      if (vFile != null) {
        FileStatus status=FileStatusManager.getInstance(psiFile.getProject()).getStatus(vFile);
        color=status.getColor();
      }
    }
    append(name,new SimpleTextAttributes(Font.PLAIN,color));
    setIcon(element.getIcon(getIconFlags()));
    String containerText=getContainerText(element);
    if (containerText != null) {
      append(" " + containerText,new SimpleTextAttributes(Font.PLAIN,Color.GRAY));
    }
  }
 else {
    setIcon(IconUtilEx.getEmptyIcon(false));
    append(value == null ? "" : value.toString(),new SimpleTextAttributes(Font.PLAIN,list.getForeground()));
  }
  setPaintFocusBorder(false);
  setBackground(UIManager.getColor(selected ? "List.selectionBackground" : "List.background"));
}
