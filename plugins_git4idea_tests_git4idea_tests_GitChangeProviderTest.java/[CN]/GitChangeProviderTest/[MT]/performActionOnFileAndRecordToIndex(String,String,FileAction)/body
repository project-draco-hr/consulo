{
  VirtualFile file=myRepo.getVFRootDir().findChild(filename);
switch (action) {
case CREATE:
    final VirtualFile createdFile=createFileInCommand(filename,"initial content in branch " + branchName);
  dirty(createdFile);
myRepo.add(filename);
break;
case MODIFY:
editFileInCommand(file,"new content in branch " + branchName);
dirty(file);
myRepo.add(filename);
break;
case DELETE:
dirty(file);
myRepo.rm(filename);
break;
case RENAME:
String newName=filename + "_" + branchName.replaceAll("\\s","_")+ "_new";
dirty(file);
myRepo.mv(filename,newName);
myRootDir.refresh(false,true);
dirty(myRootDir.findChild(newName));
break;
default :
break;
}
}
