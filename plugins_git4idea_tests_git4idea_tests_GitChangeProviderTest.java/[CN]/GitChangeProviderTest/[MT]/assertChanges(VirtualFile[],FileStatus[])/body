{
  Map<FilePath,Change> result=getChanges(virtualFiles);
  for (int i=0; i < virtualFiles.length; i++) {
    FilePath fp=new FilePathImpl(virtualFiles[i]);
    FileStatus status=fileStatuses[i];
    if (status == null) {
      assertFalse(result.containsKey(fp),"File [" + tos(fp) + " shouldn't be in the change list, but it was.");
      continue;
    }
    assertTrue(result.containsKey(fp),"File [" + tos(fp) + "] didn't change. Changes: "+ tos(result));
    assertEquals(result.get(fp).getFileStatus(),status,"File statuses don't match for file [" + tos(fp) + "]");
  }
}
