{
  Map<VirtualFile,Change> result=getChanges(virtualFiles);
  for (int i=0; i < virtualFiles.length; i++) {
    VirtualFile vf=virtualFiles[i];
    FileStatus status=fileStatuses[i];
    if (status == null) {
      assertFalse(result.containsKey(vf),"File [" + vf + " shouldn't be in the change list, but it was.");
      continue;
    }
    assertTrue(result.containsKey(vf),"File [" + vf + "] didn't change. Changes: "+ result);
    assertEquals(result.get(vf).getFileStatus(),status,"File statuses don't match for file [" + vf + "]");
  }
}
