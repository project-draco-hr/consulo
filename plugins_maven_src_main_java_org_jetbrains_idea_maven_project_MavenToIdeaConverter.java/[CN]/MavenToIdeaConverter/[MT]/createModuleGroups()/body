{
  final boolean createModuleGroups=myPrefs.isCreateModuleGroups();
  final Stack<String> groups=new Stack<String>();
  myProjectModel.visit(new MavenProjectModel.MavenProjectVisitorPlain(){
    public void visit(    final MavenProjectModel.Node node){
      final String name=myMapping.getModuleName(node.getId());
      LOG.assertTrue(name != null);
      if (createModuleGroups && !node.mavenModules.isEmpty()) {
        groups.push(ProjectBundle.message("module.group.name",name));
      }
      final Module module=myModuleModel.findModuleByName(name);
      if (module != null) {
        myModuleModel.setModuleGroupPath(module,groups.isEmpty() ? null : groups.toArray(new String[groups.size()]));
      }
 else {
        LOG.info("Cannot find module " + name);
      }
    }
    public void leave(    MavenProjectModel.Node node){
      if (createModuleGroups && !node.mavenModules.isEmpty()) {
        groups.pop();
      }
    }
  }
);
}
