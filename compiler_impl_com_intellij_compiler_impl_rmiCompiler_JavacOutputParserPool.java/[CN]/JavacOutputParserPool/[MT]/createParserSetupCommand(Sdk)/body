{
  final VirtualFile homeDirectory=jdk.getHomeDirectory();
  if (homeDirectory == null) {
    throw new IllegalArgumentException(CompilerBundle.jdkHomeNotFoundMessage(jdk));
  }
  final List<String> commandLine=new ArrayList<String>();
  commandLine.add(jdk.getSdkType().getVMExecutablePath(jdk));
  CompilerUtil.addLocaleOptions(commandLine,false);
  commandLine.add("-classpath");
  commandLine.add(jdk.getSdkType().getToolsPath(jdk) + File.pathSeparator + PathUtilEx.getIdeaRtJarPath());
  commandLine.add(JavacResourcesReader.class.getName());
  return commandLine.toArray(new String[commandLine.size()]);
}
