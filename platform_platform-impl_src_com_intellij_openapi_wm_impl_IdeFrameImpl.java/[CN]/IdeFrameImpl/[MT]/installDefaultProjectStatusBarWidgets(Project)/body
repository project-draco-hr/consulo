{
  final StatusBar statusBar=getStatusBar();
  final PositionPanel positionPanel=new PositionPanel(project);
  statusBar.addWidget(positionPanel,"before " + IdeMessagePanel.FATAL_ERROR);
  final IdeNotificationArea notificationArea=new IdeNotificationArea();
  statusBar.addWidget(notificationArea,"before " + IdeMessagePanel.FATAL_ERROR);
  final EncodingPanel encodingPanel=new EncodingPanel(project);
  statusBar.addWidget(encodingPanel,"after Position");
  final ToggleReadOnlyAttributePanel readOnlyAttributePanel=new ToggleReadOnlyAttributePanel();
  InsertOverwritePanel insertOverwritePanel=null;
  if (!SystemInfo.isMac) {
    insertOverwritePanel=new InsertOverwritePanel(project);
    statusBar.addWidget(insertOverwritePanel,"after Encoding");
    statusBar.addWidget(readOnlyAttributePanel,"after InsertOverwrite");
  }
 else {
    statusBar.addWidget(readOnlyAttributePanel,"after Encoding");
  }
  final ClockPanel clockPanel=new ClockPanel();
  statusBar.addWidget(clockPanel,"after " + MemoryUsagePanel.WIDGET_ID);
  final InsertOverwritePanel finalInsertOverwritePanel=insertOverwritePanel;
  Disposer.register(project,new Disposable(){
    public void dispose(){
      statusBar.removeWidget(encodingPanel.ID());
      statusBar.removeWidget(positionPanel.ID());
      statusBar.removeWidget(notificationArea.ID());
      statusBar.removeWidget(readOnlyAttributePanel.ID());
      statusBar.removeWidget(clockPanel.ID());
      if (finalInsertOverwritePanel != null)       statusBar.removeWidget(finalInsertOverwritePanel.ID());
      ((StatusBarEx)statusBar).removeCustomIndicationComponents();
    }
  }
);
}
