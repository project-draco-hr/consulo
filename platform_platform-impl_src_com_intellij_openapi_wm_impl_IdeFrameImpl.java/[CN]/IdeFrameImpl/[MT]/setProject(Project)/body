{
  if (WindowManager.getInstance().isFullScreenSupportedInCurrentOS() && myProject != project && project != null) {
    myRestoreFullScreen=myProject == null && shouldRestoreFullScreen(project);
    if (myProject != null) {
      storeFullScreenStateIfNeeded(false);
    }
  }
  myProject=project;
  if (project != null) {
    ProjectFrameBounds.getInstance(project);
    if (myRootPane != null) {
      myRootPane.installNorthComponents(project);
      project.getMessageBus().connect().subscribe(StatusBar.Info.TOPIC,myRootPane.getStatusBar());
    }
    installDefaultProjectStatusBarWidgets(myProject);
  }
 else {
    if (myRootPane != null) {
      myRootPane.deinstallNorthComponents();
    }
  }
  if (project == null) {
    FocusTrackback.release(this);
  }
  if (isVisible() && myRestoreFullScreen) {
    WindowManagerEx.getInstanceEx().setFullScreen(this,true);
    myRestoreFullScreen=false;
  }
}
