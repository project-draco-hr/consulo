{
  if (myUpdatingTitle)   return;
  try {
    myUpdatingTitle=true;
    frame.getRootPane().putClientProperty("Window.documentFile",currentFile);
    final String applicationName=((ApplicationInfoEx)ApplicationInfo.getInstance()).getFullApplicationName();
    final Builder builder=new Builder();
    if (SystemInfo.isMac) {
      boolean addAppName=StringUtil.isEmpty(title) || ProjectManager.getInstance().getOpenProjects().length == 0 || ((ApplicationInfoEx)ApplicationInfo.getInstance()).isEAP() && !applicationName.endsWith("SNAPSHOT");
      builder.append(fileTitle).append(title).append(addAppName ? applicationName : null);
    }
 else {
      builder.append(title).append(fileTitle).append(applicationName);
    }
    frame.setTitle(builder.sb.toString());
  }
  finally {
    myUpdatingTitle=false;
  }
}
