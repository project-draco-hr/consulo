{
  if (!(element instanceof PsiReferenceList)) {
    return;
  }
  final PsiReferenceList referenceList=(PsiReferenceList)element;
  final PsiClassType[] types=referenceList.getReferencedTypes();
  final PsiClass commonSuperClass=findCommonSuperClass(types);
  if (commonSuperClass == null) {
    return;
  }
  final PsiElementFactory factory=JavaPsiFacade.getElementFactory(element.getProject());
  final PsiClassType classType=factory.createType(commonSuperClass);
  final PsiJavaCodeReferenceElement referenceElement=factory.createReferenceElementByType(classType);
  final PsiReferenceList newReferenceList=factory.createReferenceList(new PsiJavaCodeReferenceElement[]{referenceElement});
  referenceList.replace(newReferenceList);
}
