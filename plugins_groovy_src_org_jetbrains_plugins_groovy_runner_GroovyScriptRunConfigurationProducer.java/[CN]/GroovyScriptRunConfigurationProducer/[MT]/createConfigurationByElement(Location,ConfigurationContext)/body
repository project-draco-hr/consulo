{
  final PsiElement element=location.getPsiElement();
  final PsiFile file=element.getContainingFile();
  if (file instanceof GroovyFile) {
    for (    GroovyScriptDetector detector : ScriptDetectorRegistry.getInstance().getScriptDetectors()) {
      if (detector.isSpecificScriptFile(((GroovyFile)file)))       return null;
    }
    GroovyFile groovyFile=(GroovyFile)file;
    if (groovyFile.isScript()) {
      mySourceElement=element;
      return (RunnerAndConfigurationSettingsImpl)GroovyScriptRunConfigurationType.getInstance().createConfigurationByLocation(location);
    }
  }
  return null;
}
