{
  CredentialItem.Username userNameItem=null;
  CredentialItem.Password passwordItem=null;
  for (  CredentialItem item : items) {
    if (item instanceof CredentialItem.Username) {
      userNameItem=(CredentialItem.Username)item;
    }
 else     if (item instanceof CredentialItem.Password) {
      passwordItem=(CredentialItem.Password)item;
    }
  }
  if (userNameItem != null || passwordItem != null) {
    String username=getUserNameFromUrl(myRemoteUrl);
    final AuthDialog dialog=new AuthDialog(myProject,"Login required","Login to " + myRemoteUrl,username,null,true);
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      @Override public void run(){
        dialog.show();
      }
    }
);
    boolean ok=dialog.isOK();
    if (!ok) {
      myCancelled=true;
    }
 else {
      if (userNameItem != null) {
        userNameItem.setValue(dialog.getUsername());
      }
      if (passwordItem != null) {
        passwordItem.setValue(dialog.getPassword().toCharArray());
      }
    }
    return ok;
  }
  return true;
}
