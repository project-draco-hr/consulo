{
  column++;
  if (prevCharIsLF) {
    prevCharIsLF=false;
    line+=(column=1);
  }
 else   if (prevCharIsCR) {
    prevCharIsCR=false;
    if (c == '\n') {
      prevCharIsLF=true;
    }
 else     line+=(column=1);
  }
switch (c) {
case '\r':
    prevCharIsCR=true;
  break;
case '\n':
prevCharIsLF=true;
break;
case '\t':
column--;
column+=(8 - (column & 07));
break;
default :
break;
}
bufline[bufpos]=line;
bufcolumn[bufpos]=column;
}
