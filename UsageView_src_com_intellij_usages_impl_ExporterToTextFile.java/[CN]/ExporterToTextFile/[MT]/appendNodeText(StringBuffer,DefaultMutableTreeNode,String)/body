{
  if (node instanceof UsageNode) {
    TextChunk[] chunks=((UsageNode)node).getUsage().getPresentation().getText();
    for (int i=0; i < chunks.length; i++) {
      TextChunk chunk=chunks[i];
      buf.append(chunk.getText());
    }
  }
 else   if (node instanceof GroupNode) {
    UsageGroup group=((GroupNode)node).getGroup();
    buf.append(group != null ? group.getText(myUsageView) : "Usages");
    buf.append(" ");
    int count=((GroupNode)node).getRecursiveUsageCount();
    buf.append(" (").append(StringUtil.pluralize(count + " usage",count)).append(")");
  }
 else   if (node instanceof UsageTargetNode) {
    buf.append(((UsageTargetNode)node).getTarget().getPresentation().getPresentableText());
  }
 else {
    buf.append(node.toString());
  }
  buf.append(lineSeparator);
}
