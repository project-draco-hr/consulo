{
  final PsiType returnType=method.getReturnType();
  if (!PsiType.BOOLEAN.equals(returnType)) {
    CommonRefactoringUtil.showErrorMessage(REFACTORING_NAME,RefactoringBundle.getCannotRefactorMessage(RefactoringBundle.message("invert.boolean.wrong.type")),HelpID.INVERT_BOOLEAN,project);
    return;
  }
  final PsiMethod superMethod=SuperMethodWarningUtil.checkSuperMethod(method,RefactoringBundle.message("to.refactor"));
  if (superMethod != null)   method=superMethod;
  if (!CommonRefactoringUtil.checkReadOnlyStatus(project,method))   return;
  new InvertBooleanDialog(method).show();
}
