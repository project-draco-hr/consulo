{
  if (getEditor().isDisposed())   return;
  ((ApplicationImpl)ApplicationManager.getApplication()).editorPaintStart();
  try {
    LafManager lafManager=LafManager.getInstance();
    if (lafManager == null || lafManager.isUnderAquaLookAndFeel()) {
      g.setColor(new Color(0xF0F0F0));
      Rectangle clipBounds=g.getClipBounds();
      g.fillRect(clipBounds.x,clipBounds.y,clipBounds.width,clipBounds.height);
    }
 else {
      super.paintComponent(g);
    }
    if (myErrorStripeRenderer != null) {
      EditorImpl.MyScrollBar scrollBar=myEditor.getVerticalScrollBar();
      int top=scrollBar.getDecScrollButtonHeight();
      myErrorStripeRenderer.paint(this,g,new Rectangle(0,0,getWidth(),top));
    }
    myMarkSpots.repaint(g,ERRORS_FOUND_ICON.getIconWidth());
  }
  finally {
    ((ApplicationImpl)ApplicationManager.getApplication()).editorPaintFinish();
  }
}
