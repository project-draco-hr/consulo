{
  if (myCachedSortedHighlighters == null) {
    myCachedSortedHighlighters=new ArrayList<RangeHighlighter>();
    for (    RangeHighlighter highlighter : getAllHighlighters()) {
      if (highlighter.getErrorStripeMarkColor() != null && highlighter.isValid()) {
        myCachedSortedHighlighters.add(highlighter);
      }
    }
    final MarkupModel docMarkup=getDocument().getMarkupModel(myEditor.getProject());
    for (    RangeHighlighter highlighter : docMarkup.getAllHighlighters()) {
      if (highlighter.getErrorStripeMarkColor() != null && highlighter.isValid()) {
        myCachedSortedHighlighters.add(highlighter);
      }
    }
    if (!myCachedSortedHighlighters.isEmpty()) {
      Collections.sort(myCachedSortedHighlighters,new Comparator<RangeHighlighter>(){
        public int compare(        final RangeHighlighter h1,        final RangeHighlighter h2){
          return h1.getStartOffset() - h2.getStartOffset();
        }
      }
);
    }
  }
  return myCachedSortedHighlighters;
}
