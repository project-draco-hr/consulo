{
  final ActionManagerEx actionManager=ActionManagerEx.getInstanceEx();
  String[] ids=actionManager.getActionIds(project != null ? AntConfiguration.getActionIdPrefix(project) : AntConfiguration.ACTION_ID_PREFIX);
  Arrays.sort(ids);
  Group group=new Group(KeyMapBundle.message("ant.targets.group.title"),ANT_ICON,ANT_OPEN_ICON);
  if (project != null) {
    final AntConfiguration antConfiguration=AntConfiguration.getInstance(project);
    if (antConfiguration != null) {
      final Map<AntBuildFile,Group> buildFileToGroup=new HashMap<AntBuildFile,Group>();
      for (      final String id : ids) {
        if (filtered != null && !filtered.value(actionManager.getActionOrStub(id)))         continue;
        final AntBuildFile buildFile=antConfiguration.findBuildFileByActionId(id);
        if (buildFile == null) {
          LOG.info("no buildfile found for actionId=" + id);
          continue;
        }
        Group subGroup=buildFileToGroup.get(buildFile);
        if (subGroup == null) {
          subGroup=new Group(buildFile.getPresentableName(),null,null);
          buildFileToGroup.put(buildFile,subGroup);
          group.addGroup(subGroup);
        }
        subGroup.addActionId(id);
      }
    }
  }
  return group;
}
