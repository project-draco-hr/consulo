{
  final ActionManagerEx actionManager=ActionManagerEx.getInstanceEx();
  String[] ids=actionManager.getActionIds(TargetAction.ACTION_ID_PREFIX);
  Arrays.sort(ids);
  Group group=new Group(KeyMapBundle.message("ant.targets.group.title"),ANT_ICON,ANT_OPEN_ICON);
  if (project != null) {
    AntConfiguration antConfiguration=AntConfiguration.getInstance(project);
    HashMap<BuildFile,Group> buildFileToGroup=new HashMap<BuildFile,Group>();
    for (    String id : ids) {
      if (filtered == null || !filtered.value(actionManager.getAction(id)))       continue;
      BuildFile buildFile=antConfiguration.findBuildFileByActionId(id);
      if (buildFile == null) {
        LOG.info("no buildfile found for actionId=" + id);
        continue;
      }
      Group subGroup=buildFileToGroup.get(buildFile);
      if (subGroup == null) {
        subGroup=new Group(buildFile.getPresentableName(),null,null);
        buildFileToGroup.put(buildFile,subGroup);
        group.addGroup(subGroup);
      }
      subGroup.addActionId(id);
    }
  }
  return group;
}
