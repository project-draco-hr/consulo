{
  return new Condition<AnAction>(){
    public boolean value(    final AnAction action){
      if (filter == null)       return true;
      if (action == null)       return false;
      final String insensitiveFilter=filter.toLowerCase();
      final KeymapConfigurable keymapConfigurable=ShowSettingsUtil.getInstance().findApplicationConfigurable(KeymapConfigurable.class);
      final String text=action.getTemplatePresentation().getText();
      if (text != null) {
        final String lowerText=text.toLowerCase();
        if (SearchUtil.isComponentHighlighted(lowerText,insensitiveFilter,force,keymapConfigurable)) {
          return true;
        }
 else         if (lowerText.indexOf(insensitiveFilter) != -1) {
          return true;
        }
      }
      final String description=action.getTemplatePresentation().getDescription();
      if (description != null) {
        final String insensitiveDescription=description.toLowerCase();
        if (SearchUtil.isComponentHighlighted(insensitiveDescription,insensitiveFilter,force,keymapConfigurable)) {
          return true;
        }
 else         if (insensitiveDescription.indexOf(insensitiveFilter) != -1) {
          return true;
        }
      }
      return false;
    }
  }
;
}
