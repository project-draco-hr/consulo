{
  HashSet<Change> result=new HashSet<Change>();
  try {
    File partialFile=getPartialPath(offset);
    if (partialFile.exists()) {
      RandomAccessFile file=new RandomAccessFile(partialFile,"r");
      try {
        int count=file.readInt();
        for (int i=0; i < count; i++) {
          boolean isAfterRevision=(file.readByte() != 0);
          String path=file.readUTF();
          for (          Change c : changeList.getChanges()) {
            final ContentRevision afterRevision=isAfterRevision ? c.getAfterRevision() : c.getBeforeRevision();
            if (afterRevision != null && afterRevision.getFile().getIOFile().toString().equals(path)) {
              result.add(c);
            }
          }
        }
      }
  finally {
        file.close();
      }
    }
  }
 catch (  IOException ex) {
    LOG.error(ex);
  }
  return result;
}
