{
  final List<CommittedChangeList> result=new ArrayList<CommittedChangeList>();
  int offset=0;
  openStreams();
  try {
    while (true) {
      IndexEntry[] entries=readLastIndexEntries(offset,1);
      if (entries.length == 0 || entries[0].completelyDownloaded) {
        break;
      }
      myStream.seek(entries[0].offset);
      result.add(myChangesProvider.readChangeList(myLocation,myStream));
      offset++;
    }
    return result;
  }
  finally {
    closeStreams();
  }
}
