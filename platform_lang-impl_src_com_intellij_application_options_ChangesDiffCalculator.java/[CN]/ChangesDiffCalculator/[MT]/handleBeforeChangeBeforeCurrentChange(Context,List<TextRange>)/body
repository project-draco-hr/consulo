{
  if (context.beforeOriginalEnd < context.currentOriginalStart) {
    storage.add(new TextRange(context.beforeCurrentStart,context.beforeCurrentStart + context.beforeChange.getText().length()));
    context.beforeShiftToCurrent+=getDiff(context.beforeChange);
  }
 else {
    storage.add(new TextRange(context.beforeCurrentStart,context.currentChange.getEnd()));
    context.proceedToNextChange(Context.ChangeType.CURRENT);
  }
  context.proceedToNextChange(Context.ChangeType.BEFORE);
}
