{
  final HangInWrite operation1=new HangInWrite("one_");
  final HangInWrite operation2=new HangInWrite("two_");
  final Thread thread1=new Thread(operation1);
  final Thread thread2=new Thread(operation2);
  try {
    thread1.start();
    waitForRunning(operation1);
    Assert.assertTrue(operation1.isRunning());
    thread2.start();
    waitForRunning(operation2);
    Assert.assertFalse(operation2.isRunning());
    operation1.go();
    waitForRunning(operation2);
    Assert.assertTrue(operation2.isRunning());
    operation2.go();
    Thread.sleep(10);
  }
  finally {
    operation1.stop();
    operation2.stop();
    thread1.interrupt();
    thread2.interrupt();
  }
}
