{
  final OnlyWrite operation1=new OnlyWrite("one");
  final OnlyWrite operation2=new OnlyWrite("two");
  final Thread thread1=new Thread(operation1);
  final Thread thread2=new Thread(operation2);
  try {
    thread1.start();
    try {
      Thread.sleep(500);
    }
 catch (    InterruptedException e) {
    }
    Assert.assertTrue(operation1.isInsideWrite());
    thread2.start();
    try {
      Thread.sleep(500);
    }
 catch (    InterruptedException e) {
    }
    Assert.assertFalse(operation2.isInsideWrite());
    operation1.go();
    try {
      Thread.sleep(500);
    }
 catch (    InterruptedException e) {
    }
    Assert.assertTrue(operation2.isInsideWrite());
    operation2.go();
    try {
      Thread.sleep(500);
    }
 catch (    InterruptedException e) {
    }
  }
  finally {
    operation1.stop();
    operation2.stop();
    thread1.interrupt();
    thread2.interrupt();
  }
}
