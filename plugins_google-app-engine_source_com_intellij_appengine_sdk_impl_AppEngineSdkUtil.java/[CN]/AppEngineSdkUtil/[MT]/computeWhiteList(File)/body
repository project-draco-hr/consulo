{
  try {
    final THashMap<String,Set<String>> map=new THashMap<String,Set<String>>();
    ClassLoader loader=new UrlClassLoader(Collections.singletonList(toolsApiJarFile.toURI().toURL()),AppEngineSdkUtil.class.getClassLoader());
    final Class<?> whiteListClass=Class.forName("com.google.apphosting.runtime.security.WhiteList",true,loader);
    final Set<String> classes=(Set<String>)whiteListClass.getMethod("getWhiteList").invoke(null);
    for (    String qualifiedName : classes) {
      final String packageName=StringUtil.getPackageName(qualifiedName);
      Set<String> classNames=map.get(packageName);
      if (classNames == null) {
        classNames=new THashSet<String>();
        map.put(packageName,classNames);
      }
      classNames.add(StringUtil.getShortName(qualifiedName));
    }
    return map;
  }
 catch (  Exception e) {
    LOG.error(e);
    return Collections.emptyMap();
  }
}
