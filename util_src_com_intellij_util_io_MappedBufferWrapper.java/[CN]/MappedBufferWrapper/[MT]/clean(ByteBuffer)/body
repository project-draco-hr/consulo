{
  if (buffer == null)   return true;
  int i;
  for (i=0; i < MAX_FORCE_ATTEMPTS; i++) {
    try {
      ((MappedByteBuffer)buffer).force();
      break;
    }
 catch (    Throwable e) {
      try {
        Thread.sleep(10);
      }
 catch (      InterruptedException e1) {
      }
    }
  }
  if (i == MAX_FORCE_ATTEMPTS) {
    return false;
  }
  return AccessController.doPrivileged(new PrivilegedAction<Object>(){
    public Object run(){
      try {
        Method getCleanerMethod=getCleanerMethod(buffer);
        Object cleaner=getCleanerMethod.invoke(buffer,ArrayUtil.EMPTY_OBJECT_ARRAY);
        if (cleaner == null)         return null;
        Method cleanMethod=getCleanMethod();
        cleanMethod.invoke(cleaner,ArrayUtil.EMPTY_OBJECT_ARRAY);
      }
 catch (      Exception e) {
        return buffer;
      }
      return null;
    }
  }
) == null;
}
