{
  try {
    Field field=Class.forName("java.nio.DirectByteBuffer").getDeclaredField(VIEWED_BUFFER_FIELD);
    field.setAccessible(true);
    if (field.get(buffer) instanceof MappedByteBuffer) {
      unmapBuffer((MappedByteBuffer)field.get(buffer));
      return;
    }
    Method finalizeMethod=Object.class.getDeclaredMethod(FINALIZE_METHOD,ArrayUtil.EMPTY_CLASS_ARRAY);
    finalizeMethod.setAccessible(true);
    finalizeMethod.invoke(buffer,ArrayUtil.EMPTY_OBJECT_ARRAY);
  }
 catch (  Exception e) {
    LOG.error(e);
  }
}
