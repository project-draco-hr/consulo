def do_branchmap(self):
    branchmap = self.repo.branchmap()
    heads = []
    for (branch, nodes) in branchmap.iteritems():
        branchname = urllib.quote(branch)
        branchnodes = [hex(node) for node in nodes]
        heads.append(('%s %s' % (branchname, ' '.join(branchnodes))))
    self.respond('\n'.join(heads))
