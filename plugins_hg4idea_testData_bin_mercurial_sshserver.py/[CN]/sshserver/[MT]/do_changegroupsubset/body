def do_changegroupsubset(self):
    argmap = dict([self.getarg(), self.getarg()])
    bases = [bin(n) for n in argmap['bases'].split(' ')]
    heads = [bin(n) for n in argmap['heads'].split(' ')]
    cg = self.repo.changegroupsubset(bases, heads, 'serve')
    while True:
        d = cg.read(4096)
        if (not d):
            break
        self.fout.write(d)
    self.fout.flush()
