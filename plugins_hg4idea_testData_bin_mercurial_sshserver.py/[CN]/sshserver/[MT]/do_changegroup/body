def do_changegroup(self):
    nodes = []
    (arg, roots) = self.getarg()
    nodes = map(bin, roots.split(' '))
    cg = self.repo.changegroup(nodes, 'serve')
    while True:
        d = cg.read(4096)
        if (not d):
            break
        self.fout.write(d)
    self.fout.flush()
