def __init__(self, ui, repo):
    self.ui = ui
    self.repo = repo
    self.lock = None
    self.fin = sys.stdin
    self.fout = sys.stdout
    hook.redirect(True)
    sys.stdout = sys.stderr
    util.set_binary(self.fin)
    util.set_binary(self.fout)
