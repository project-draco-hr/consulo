{
  final Presentation presentation=event.getPresentation();
  final DataContext dataContext=event.getDataContext();
  final EditorWindow editorWindow=EditorWindow.DATA_KEY.getData(dataContext);
  final boolean inSplitter=editorWindow != null && editorWindow.inSplitter();
  presentation.setText(getPresentationText(inSplitter));
  final Project project=event.getData(CommonDataKeys.PROJECT);
  boolean enabled=(project != null && isActionEnabled(project,event));
  if (ActionPlaces.isPopupPlace(event.getPlace())) {
    presentation.setVisible(enabled);
  }
 else {
    presentation.setEnabled(enabled);
  }
}
