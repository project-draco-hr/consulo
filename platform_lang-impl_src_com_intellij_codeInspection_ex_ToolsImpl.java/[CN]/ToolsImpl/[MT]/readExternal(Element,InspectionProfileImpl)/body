{
  final String levelName=toolElement.getAttributeValue(InspectionProfileImpl.LEVEL_TAG);
  final ProfileManager profileManager=profile.getProfileManager();
  HighlightDisplayLevel level=HighlightDisplayLevel.find(((SeverityProvider)profileManager).getOwnSeverityRegistrar().getSeverity(levelName));
  if (level == null || level == HighlightDisplayLevel.DO_NOT_SHOW) {
    level=HighlightDisplayLevel.WARNING;
  }
  myDefaultState.setLevel(level);
  final String enabled=toolElement.getAttributeValue(InspectionProfileImpl.ENABLED_TAG);
  final boolean isEnabled=enabled != null && Boolean.parseBoolean(enabled);
  myEnabled=isEnabled;
  final String enabledTool=toolElement.getAttributeValue(ENABLED_TAG);
  myDefaultState.setEnabled(enabledTool != null ? Boolean.parseBoolean(enabledTool) : isEnabled);
  final InspectionToolWrapper tool=(InspectionToolWrapper)myDefaultState.getTool();
  final List children=toolElement.getChildren(InspectionProfileImpl.SCOPE);
  for (  Object sO : children) {
    final Element scopeElement=(Element)sO;
    final String scopeName=scopeElement.getAttributeValue(InspectionProfileImpl.NAME);
    if (scopeName != null) {
      final NamedScopesHolder scopesHolder=profileManager.getScopesManager();
      NamedScope namedScope=null;
      if (scopesHolder != null) {
        namedScope=scopesHolder.getScope(scopeName);
      }
      final String errorLevel=scopeElement.getAttributeValue(InspectionProfileImpl.LEVEL_TAG);
      final String enabledInScope=scopeElement.getAttributeValue(InspectionProfileImpl.ENABLED_TAG);
      final InspectionProfileEntry copyTool=tool.createCopy();
      copyTool.readSettings(scopeElement);
      HighlightDisplayLevel scopeLevel=errorLevel != null ? HighlightDisplayLevel.find(((SeverityProvider)profileManager).getOwnSeverityRegistrar().getSeverity(errorLevel)) : null;
      if (scopeLevel == null) {
        scopeLevel=level;
      }
      if (namedScope != null) {
        addTool(namedScope,copyTool,enabledInScope != null && Boolean.parseBoolean(enabledInScope),scopeLevel);
      }
 else {
        addTool(scopeName,copyTool,enabledInScope != null && Boolean.parseBoolean(enabledInScope),scopeLevel);
      }
    }
  }
  tool.readSettings(toolElement);
}
