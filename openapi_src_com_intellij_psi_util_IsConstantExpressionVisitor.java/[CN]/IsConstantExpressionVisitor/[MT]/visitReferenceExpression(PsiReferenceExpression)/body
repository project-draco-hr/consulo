{
  PsiElement refElement=expression.resolve();
  if (!(refElement instanceof PsiVariable)) {
    myIsConstant=false;
    return;
  }
  PsiVariable variable=(PsiVariable)refElement;
  if (variable instanceof PsiEnumConstant) {
    myIsConstant=true;
    return;
  }
  if (!variable.hasModifierProperty(PsiModifier.FINAL)) {
    myIsConstant=false;
    return;
  }
  PsiExpression initializer=variable.getInitializer();
  if (initializer == null) {
    myIsConstant=false;
    return;
  }
  initializer.accept(this);
}
