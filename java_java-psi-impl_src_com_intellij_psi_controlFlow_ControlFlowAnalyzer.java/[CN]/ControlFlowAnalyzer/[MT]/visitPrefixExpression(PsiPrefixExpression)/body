{
  startElement(expression);
  PsiExpression operand=expression.getOperand();
  if (operand != null) {
    IElementType operationSign=expression.getOperationTokenType();
    if (operationSign == JavaTokenType.EXCL) {
      PsiElement topStartStatement=myStartStatementStack.peekElement();
      boolean topAtStart=myStartStatementStack.peekAtStart();
      myStartStatementStack.pushStatement(myEndStatementStack.peekElement(),myEndStatementStack.peekAtStart());
      myEndStatementStack.pushStatement(topStartStatement,topAtStart);
    }
    operand.accept(this);
    if (operationSign == JavaTokenType.EXCL) {
      myStartStatementStack.popStatement();
      myEndStatementStack.popStatement();
    }
    if (operand instanceof PsiReferenceExpression && (operationSign == JavaTokenType.PLUSPLUS || operationSign == JavaTokenType.MINUSMINUS)) {
      PsiVariable variable=getUsedVariable((PsiReferenceExpression)operand);
      if (variable != null) {
        generateWriteInstruction(variable);
      }
    }
  }
  finishElement(expression);
}
