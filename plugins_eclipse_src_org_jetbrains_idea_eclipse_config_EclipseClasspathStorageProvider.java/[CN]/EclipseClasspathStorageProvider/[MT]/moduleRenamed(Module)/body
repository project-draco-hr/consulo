{
  if (ClasspathStorage.getStorageType(module).equals(ID)) {
    try {
      final XmlDocumentSet documentSet=getDocumentSet(module);
      final Document document=documentSet.read(EclipseXml.PROJECT_FILE);
      final Element projectNameElement=document.getRootElement().getChild(EclipseXml.NAME_TAG);
      if (projectNameElement == null)       return;
      final String oldModuleName=projectNameElement.getText();
      projectNameElement.setText(module.getName());
      documentSet.write(document,EclipseXml.PROJECT_FILE);
      final String oldEmlName=oldModuleName + EclipseXml.IDEA_SETTINGS_POSTFIX;
      if (documentSet.exists(oldEmlName)) {
        final String root=documentSet.getParent(oldEmlName);
        final File source=new File(root,oldEmlName);
        final VirtualFile virtualFile=LocalFileSystem.getInstance().findFileByIoFile(source);
        VfsUtil.copyFile(null,virtualFile,virtualFile.getParent(),module.getName() + EclipseXml.IDEA_SETTINGS_POSTFIX);
        virtualFile.delete(null);
        final CachedXmlDocumentSet fileCache=getFileCache(module);
        fileCache.delete(oldEmlName);
        registerFiles(fileCache,module,ClasspathStorage.getModuleDir(module),ClasspathStorage.getStorageRootFromOptions(module));
        fileCache.preload();
      }
    }
 catch (    IOException ignore) {
    }
catch (    JDOMException ignore) {
    }
  }
}
