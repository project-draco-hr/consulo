{
  for (  OrderEntry entry : model.getOrderEntries()) {
    if (entry instanceof LibraryOrderEntry && ((LibraryOrderEntry)entry).isModuleLevel()) {
      final Library library=((LibraryOrderEntry)entry).getLibrary();
      if (library == null || entry.getUrls(OrderRootType.CLASSES).length != 1 || library.isJarDirectory(library.getUrls(OrderRootType.CLASSES)[0])) {
        throw new ConfigurationException("Library \'" + entry.getPresentableName() + "\' is incompatible with eclipse format which supports only one content root");
      }
    }
  }
  if (model.getContentEntries().length != 1) {
    throw new ConfigurationException(EclipseBundle.message("eclipse.export.too.many.content.roots",model.getModule().getName()));
  }
  final VirtualFile output=model.getModuleExtension(CompilerModuleExtension.class).getCompilerOutputPath();
  final VirtualFile contentRoot=model.getContentEntries()[0].getFile();
  if (output == null || contentRoot == null || !VfsUtil.isAncestor(contentRoot,output,false)) {
    throw new ConfigurationException("Output path is incompatible with eclipse format which supports output under content root only");
  }
}
