{
  for (  OrderEntry entry : model.getOrderEntries()) {
    if (entry instanceof LibraryOrderEntry && ((LibraryOrderEntry)entry).isModuleLevel()) {
      final Library library=((LibraryOrderEntry)entry).getLibrary();
      if (library == null || entry.getUrls(OrderRootType.CLASSES).length != 1 || library.isJarDirectory(library.getUrls(OrderRootType.CLASSES)[0])) {
        throw new ConfigurationException("Library \'" + entry.getPresentableName() + "\' is incompatible with eclipse format which supports only one content root");
      }
    }
  }
  if (model.getContentRoots().length == 0) {
    throw new ConfigurationException("Module \'" + model.getModule().getName() + "\' has no content roots thus is not compatible with eclipse format");
  }
  final String output=model.getModuleExtension(CompilerModuleExtension.class).getCompilerOutputUrl();
  final String contentRoot=getContentRoot(model);
  if (output == null || !StringUtil.startsWith(VfsUtil.urlToPath(output),contentRoot)) {
    throw new ConfigurationException("Output path is incompatible with eclipse format which supports output under content root only");
  }
}
