{
  for (  OrderEntry entry : model.getOrderEntries()) {
    if (entry instanceof LibraryOrderEntry && ((LibraryOrderEntry)entry).isModuleLevel()) {
      final Library library=((LibraryOrderEntry)entry).getLibrary();
      if (library == null || entry.getUrls(OrderRootType.CLASSES).length != 1 || library.isJarDirectory(library.getUrls(OrderRootType.CLASSES)[0])) {
        throw new ConfigurationException("Library \'" + entry.getPresentableName() + "\' is incompatible with eclipse format which supports only one content root");
      }
    }
  }
  if (model.getContentEntries().length != 1) {
    throw new ConfigurationException(EclipseBundle.message("eclipse.export.too.many.content.roots",model.getModule().getName()));
  }
  final String output=model.getModuleExtension(CompilerModuleExtension.class).getCompilerOutputUrl();
  final String contentRoot=model.getContentEntries()[0].getUrl();
  if (output == null || !StringUtil.startsWith(output,contentRoot)) {
    throw new ConfigurationException("Output path is incompatible with eclipse format which supports output under content root only");
  }
}
