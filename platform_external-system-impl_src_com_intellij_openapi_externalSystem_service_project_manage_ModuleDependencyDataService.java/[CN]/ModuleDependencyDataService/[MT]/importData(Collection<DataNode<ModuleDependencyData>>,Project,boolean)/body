{
  Map<DataNode<ModuleData>,Collection<DataNode<ModuleDependencyData>>> byModule=ExternalSystemApiUtil.groupBy(toImport,MODULE);
  for (  Map.Entry<DataNode<ModuleData>,Collection<DataNode<ModuleDependencyData>>> entry : byModule.entrySet()) {
    Module ideModule=myProjectStructureHelper.findIdeModule(entry.getKey().getData(),project);
    if (ideModule == null) {
      myModuleDataManager.importData(Collections.singleton(entry.getKey()),project,true);
      ideModule=myProjectStructureHelper.findIdeModule(entry.getKey().getData(),project);
    }
    if (ideModule == null) {
      LOG.warn(String.format("Can't import module dependencies %s. Reason: target module (%s) is not found at the ide and can't be imported",entry.getValue(),entry.getKey()));
      continue;
    }
    importData(entry.getValue(),entry.getKey().getData().getOwner(),ideModule,synchronous);
  }
}
