{
  if (PlatformDataKeys.FILE_EDITOR.getData(dataContext) != null) {
    return dataContext;
  }
  Project project=PlatformDataKeys.PROJECT.getData(dataContext);
  if (project == null) {
    return dataContext;
  }
  FileEditorManager editorManager=FileEditorManager.getInstance(project);
  VirtualFile[] files=editorManager.getSelectedFiles();
  if (files.length == 0) {
    return dataContext;
  }
  FileEditor fileEditor=editorManager.getSelectedEditor(files[0]);
  return fileEditor == null ? dataContext : DataManager.getInstance().getDataContext(fileEditor.getComponent());
}
