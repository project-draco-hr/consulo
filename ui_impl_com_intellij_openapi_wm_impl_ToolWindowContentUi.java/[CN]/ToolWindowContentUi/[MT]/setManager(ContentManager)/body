{
  myManager=manager;
  myManager.addContentManagerListener(new ContentManagerListener(){
    public void contentAdded(    final ContentManagerEvent event){
      final ContentTab tab=new ContentTab(event.getContent());
      myTabs.add(event.getIndex(),tab);
      myContent2Tabs.put(event.getContent(),tab);
      event.getContent().addPropertyChangeListener(ToolWindowContentUi.this);
      rebuild();
    }
    public void contentRemoved(    final ContentManagerEvent event){
      final ContentTab tab=myContent2Tabs.get(event.getContent());
      if (tab != null) {
        myTabs.remove(tab);
        myContent2Tabs.remove(event.getContent());
        event.getContent().removePropertyChangeListener(ToolWindowContentUi.this);
        ensureSelectedContentVisible();
        rebuild();
      }
    }
    public void contentRemoveQuery(    final ContentManagerEvent event){
    }
    public void selectionChanged(    final ContentManagerEvent event){
      ensureSelectedContentVisible();
      update();
      myContent.revalidate();
      myContent.repaint();
    }
  }
);
  initMouseListeners(this);
  update();
  myCloseAllAction=new TabbedContentAction.CloseAllAction(myManager);
  myNextTabAction=new TabbedContentAction.MyNextTabAction(myManager);
  myPreviousTabAction=new TabbedContentAction.MyPreviousTabAction(myManager);
}
