{
  myManager=manager;
  myManager.addContentManagerListener(new ContentManagerListener(){
    public void contentAdded(    final ContentManagerEvent event){
      final ContentTab tab=new ContentTab(event.getContent());
      myTabs.add(event.getIndex(),tab);
      myContent2Tabs.put(event.getContent(),tab);
      event.getContent().addPropertyChangeListener(ToolWindowContentUi.this);
      rebuild();
    }
    public void contentRemoved(    final ContentManagerEvent event){
      final ContentTab tab=myContent2Tabs.get(event.getContent());
      if (tab != null) {
        myTabs.remove(tab);
        myContent2Tabs.remove(event.getContent());
        event.getContent().addPropertyChangeListener(ToolWindowContentUi.this);
        rebuild();
      }
    }
    public void contentRemoveQuery(    final ContentManagerEvent event){
    }
    public void selectionChanged(    final ContentManagerEvent event){
      myContent.setContent(event.getContent().getComponent());
      repaint();
    }
  }
);
}
