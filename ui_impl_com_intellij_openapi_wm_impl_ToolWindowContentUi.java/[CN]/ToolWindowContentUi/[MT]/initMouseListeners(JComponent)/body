{
  final Point[] myLastPoint=new Point[1];
  c.addMouseMotionListener(new MouseMotionAdapter(){
    public void mouseDragged(    final MouseEvent e){
      if (myLastPoint[0] == null)       return;
      final Window window=SwingUtilities.windowForComponent(c);
      if (window instanceof IdeFrame)       return;
      final Rectangle oldBounds=window.getBounds();
      final Point newPoint=e.getPoint();
      SwingUtilities.convertPointToScreen(newPoint,c);
      final Point offset=new Point(newPoint.x - myLastPoint[0].x,newPoint.y - myLastPoint[0].y);
      window.setLocation(oldBounds.x + offset.x,oldBounds.y + offset.y);
      myLastPoint[0]=newPoint;
    }
  }
);
  c.addMouseListener(new MouseAdapter(){
    public void mousePressed(    final MouseEvent e){
      myLastPoint[0]=e.getPoint();
      SwingUtilities.convertPointToScreen(myLastPoint[0],c);
      if (!e.isPopupTrigger()) {
        if (e.getButton() == MouseEvent.BUTTON2) {
          processHide(e);
        }
 else {
          myWindow.fireActivated();
        }
      }
    }
  }
);
  final DefaultActionGroup contentGroup=new DefaultActionGroup();
  if (c instanceof ContentTab) {
    final Content content=((ContentTab)c).myContent;
    contentGroup.add(new TabbedContentAction.CloseAction(content));
    contentGroup.add(myCloseAllAction);
    contentGroup.add(new TabbedContentAction.CloseAllButThisAction(content));
    contentGroup.addSeparator();
    if (content.isPinnable()) {
      contentGroup.add(new TabbedContentAction.MyPinTabAction(content));
      contentGroup.addSeparator();
    }
    contentGroup.add(myNextTabAction);
    contentGroup.add(myPreviousTabAction);
    contentGroup.addSeparator();
  }
  c.addMouseListener(new PopupHandler(){
    public void invokePopup(    final Component comp,    final int x,    final int y){
      DefaultActionGroup group=new DefaultActionGroup();
      group.addAll(contentGroup);
      final ActionGroup windowPopup=myWindow.getPopupGroup();
      if (windowPopup != null) {
        group.addAll(windowPopup);
      }
      final ActionPopupMenu popupMenu=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UNKNOWN,group);
      popupMenu.getComponent().show(comp,x,y);
    }
  }
);
}
