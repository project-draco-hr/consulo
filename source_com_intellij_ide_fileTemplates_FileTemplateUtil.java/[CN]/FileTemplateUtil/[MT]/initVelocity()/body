{
  try {
    if (!ourVelocityInitialized) {
      LogSystem emptyLogSystem=new LogSystem(){
        public void init(        RuntimeServices runtimeServices) throws Exception {
        }
        public void logVelocityMessage(        int i,        String s){
        }
      }
;
      File modifiedPatternsPath=new File(PathManager.getConfigPath());
      modifiedPatternsPath=new File(modifiedPatternsPath,"fileTemplates");
      modifiedPatternsPath=new File(modifiedPatternsPath,"includes");
      Velocity.setProperty(Velocity.RUNTIME_LOG_LOGSYSTEM,emptyLogSystem);
      Velocity.setProperty(Velocity.RESOURCE_LOADER,"file,class");
      Velocity.setProperty("file.resource.loader.class",MyFileResourceLoader.class.getName());
      Velocity.setProperty("class.resource.loader.class",MyClasspathResourceLoader.class.getName());
      Velocity.setProperty(Velocity.FILE_RESOURCE_LOADER_PATH,modifiedPatternsPath.getAbsolutePath());
      Velocity.setProperty(Velocity.INPUT_ENCODING,FileTemplate.ourEncoding);
      Velocity.init();
      ourVelocityInitialized=true;
    }
  }
 catch (  Exception e) {
    LOG.error("Unable to init Velocity",e);
  }
}
