{
  FileType fileType=FileTypeManagerEx.getInstanceEx().getFileTypeByExtension(template.getExtension());
  if (fileType.equals(StdFileTypes.UNKNOWN))   return false;
  if (template.isJavaClassTemplate() || fileType.equals(StdFileTypes.GUI_DESIGNER_FORM)) {
    for (int i=0; i < dirs.length; i++) {
      PsiDirectory dir=dirs[i];
      if (dir.getPackage() != null)       return true;
    }
    return false;
  }
  return true;
}
