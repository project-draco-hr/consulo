{
  final String suggestedFileNameEnd="." + extension;
  if (!fileName.endsWith(suggestedFileNameEnd)) {
    fileName=fileName + suggestedFileNameEnd;
  }
  directory.checkCreateFile(fileName);
  PsiFile file=PsiManager.getInstance(project).getElementFactory().createFileFromText(fileName,content);
  file=(PsiFile)directory.add(file);
  return file;
}
