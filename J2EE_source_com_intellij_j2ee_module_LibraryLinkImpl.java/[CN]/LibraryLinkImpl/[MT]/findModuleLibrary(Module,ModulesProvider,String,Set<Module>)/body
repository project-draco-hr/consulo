{
  if (!visited.add(module)) {
    return null;
  }
  ModuleRootModel rootModel=provider.getRootModel(module);
  OrderEntry[] orderEntries=rootModel.getOrderEntries();
  for (  OrderEntry orderEntry : orderEntries) {
    if (orderEntry instanceof LibraryOrderEntry) {
      LibraryOrderEntry libraryOrderEntry=((LibraryOrderEntry)orderEntry);
      Library library=libraryOrderEntry.getLibrary();
      if (library == null)       continue;
      String[] urls=library.getUrls(OrderRootType.CLASSES);
      if (urls.length != 1)       continue;
      if (Comparing.strEqual(urls[0],url))       return library;
    }
 else     if (orderEntry instanceof ModuleOrderEntry) {
      final Module dependency=((ModuleOrderEntry)orderEntry).getModule();
      if (dependency == null) {
        continue;
      }
      final Library library=findModuleLibrary(module,provider,url,visited);
      if (library != null) {
        return library;
      }
    }
  }
  return null;
}
