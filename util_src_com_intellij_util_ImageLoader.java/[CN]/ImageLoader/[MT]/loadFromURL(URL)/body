{
  try {
    Image image=myUrl2Image.get(url.toString());
    if (image != null) {
      return image;
    }
    ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
    final InputStream inputStream=url.openStream();
    try {
      byte[] buffer=new byte[1024];
      while (true) {
        final int n=inputStream.read(buffer);
        if (n < 0)         break;
        outputStream.write(buffer,0,n);
      }
    }
  finally {
      inputStream.close();
    }
    image=Toolkit.getDefaultToolkit().createImage(outputStream.toByteArray());
    waitForImage(image);
    myUrl2Image.put(url.toString(),image);
    return image;
  }
 catch (  Exception ex) {
    LOG.error(ex);
  }
  return null;
}
