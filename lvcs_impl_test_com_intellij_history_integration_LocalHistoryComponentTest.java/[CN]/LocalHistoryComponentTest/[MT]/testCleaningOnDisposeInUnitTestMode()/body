{
  final boolean[] isUnitTestMode=new boolean[]{true};
  LocalHistoryComponent c=new LocalHistoryComponent(null,null,null,null,null,config){
    @Override public File getStorageDir(){
      return new File(tempDir,"vcs");
    }
    @Override protected boolean isUnitTestMode(){
      return isUnitTestMode[0];
    }
    @Override protected void initService(){
    }
    @Override protected void closeService(){
    }
    @Override protected boolean isDefaultProject(){
      return false;
    }
  }
;
  c.init();
  assertTrue(c.getStorageDir().exists());
  c.disposeComponent();
  assertFalse(c.getStorageDir().exists());
  isUnitTestMode[0]=false;
  c.init();
  assertTrue(c.getStorageDir().exists());
  c.disposeComponent();
  assertTrue(c.getStorageDir().exists());
}
