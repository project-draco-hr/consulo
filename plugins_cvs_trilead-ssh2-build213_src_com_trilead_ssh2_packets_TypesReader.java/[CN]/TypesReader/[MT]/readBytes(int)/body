{
  if ((pos + len) > max)   throw new IOException("Packet too short.");
  byte[] res=new byte[len];
  System.arraycopy(arr,pos,res,0,len);
  pos+=len;
  return res;
}
