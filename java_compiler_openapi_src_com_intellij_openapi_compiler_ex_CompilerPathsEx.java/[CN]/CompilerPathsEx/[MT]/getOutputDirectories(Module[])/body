{
  final Set<VirtualFile> dirs=new OrderedSet<VirtualFile>((TObjectHashingStrategy<VirtualFile>)TObjectHashingStrategy.CANONICAL);
  for (  Module module : modules) {
    final VirtualFile outputDir=getModuleOutputDirectory(module,false);
    if (outputDir != null) {
      dirs.add(outputDir);
    }
    VirtualFile testsOutputDir=getModuleOutputDirectory(module,true);
    if (testsOutputDir != null) {
      dirs.add(testsOutputDir);
    }
  }
  return VfsUtil.toVirtualFileArray(dirs);
}
