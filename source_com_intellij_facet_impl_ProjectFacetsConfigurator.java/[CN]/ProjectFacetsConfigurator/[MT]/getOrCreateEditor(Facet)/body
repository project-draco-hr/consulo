{
  FacetEditor editor=myEditors.get(facet);
  if (editor == null) {
    final Facet underlyingFacet=facet.getUnderlyingFacet();
    final FacetEditorContext parentContext=underlyingFacet != null ? getOrCreateEditor(underlyingFacet).getContext() : null;
    final ModuleConfigurationState state=myModuleStateProvider.fun(facet.getModule());
    final ProjectConfigurableContext context=new ProjectConfigurableContext(facet,isNewFacet(facet),parentContext,state,getSharedModuleData(facet.getModule()));
    editor=new FacetEditor(context,facet.getConfiguration());
    editor.getComponent();
    editor.reset();
    myEditors.put(facet,editor);
  }
  return editor;
}
