{
  if (modules.isEmpty())   return Collections.emptyList();
  final HashSet<Module> result=new HashSet<Module>();
  final Project project=modules.iterator().next().getProject();
  final ModuleManager moduleManager=ModuleManager.getInstance(project);
  for (  final Module module : modules) {
    result.add(module);
    result.addAll(moduleManager.getModuleDependentModules(module));
  }
  return result;
}
