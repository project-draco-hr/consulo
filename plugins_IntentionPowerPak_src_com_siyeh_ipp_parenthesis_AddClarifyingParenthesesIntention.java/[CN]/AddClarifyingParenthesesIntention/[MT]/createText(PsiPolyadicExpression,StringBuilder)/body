{
  final PsiExpression[] operands=polyadicExpression.getOperands();
  for (  PsiExpression operand : operands) {
    if (operand == null) {
      continue;
    }
    if (operand.getType() == PsiType.VOID) {
      throw new ProcessCanceledException();
    }
    if (operands.length == 1) {
      createReplacementText(operand,out);
    }
    final PsiJavaToken token=polyadicExpression.getTokenBeforeOperand(operand);
    if (token != null) {
      final PsiElement beforeToken=token.getPrevSibling();
      if (beforeToken instanceof PsiWhiteSpace) {
        out.append(beforeToken.getText());
      }
      out.append(token.getText());
      final PsiElement afterToken=token.getNextSibling();
      if (afterToken instanceof PsiWhiteSpace) {
        out.append(afterToken.getText());
      }
    }
    if (operands.length != 1) {
      createReplacementText(operand,out);
    }
  }
}
