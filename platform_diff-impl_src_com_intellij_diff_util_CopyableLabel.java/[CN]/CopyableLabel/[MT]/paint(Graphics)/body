{
  Dimension size=getSize();
  boolean paintEllipsis=getPreferredSize().width > size.width;
  if (!paintEllipsis) {
    super.paint(g);
  }
 else {
    Dimension ellipsisSize=ELLIPSIS_LABEL.getPreferredSize();
    int endOffset=size.width - ellipsisSize.width;
    try {
      endOffset=modelToView(viewToModel(new Point(endOffset,0)) - 1).x;
    }
 catch (    BadLocationException ignore) {
    }
    Shape oldClip=g.getClip();
    g.clipRect(0,0,endOffset,size.height);
    super.paint(g);
    g.setClip(oldClip);
    g.translate(endOffset,0);
    ELLIPSIS_LABEL.setSize(ellipsisSize);
    ELLIPSIS_LABEL.paint(g);
    g.translate(-endOffset,0);
  }
}
