{
  final PsiManager manager=myParentClass.getManager();
  final PsiElementFactory factory=manager.getElementFactory();
  final PsiMethod patternMethod=factory.createMethodFromText("protected void setUp() throws Exception {\nsuper.setUp();\n}",null);
  PsiMethod inClass=field.getContainingClass().findMethodBySignature(patternMethod,false);
  if (inClass == null) {
    inClass=(PsiMethod)field.getContainingClass().add(patternMethod);
  }
 else   if (inClass.getBody() == null) {
    inClass.replace(patternMethod);
  }
  final PsiExpressionStatement expressionStatement=(PsiExpressionStatement)factory.createStatementFromText(field.getName() + "= expr;",null);
  PsiAssignmentExpression expr=(PsiAssignmentExpression)expressionStatement.getExpression();
  expr.getRExpression().replace(initializer);
  inClass.getBody().add(expressionStatement);
  manager.getCodeStyleManager().reformat(inClass.getBody());
}
