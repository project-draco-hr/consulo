{
  try {
    PsiClass aClass=field.getContainingClass();
    PsiMethod[] constructors=aClass.getConstructors();
    boolean added=false;
    for (int idx=0; idx < constructors.length; idx++) {
      PsiMethod constructor=constructors[idx];
      if (constructor == enclosingConstructor)       continue;
      PsiCodeBlock body=constructor.getBody();
      if (body == null)       continue;
      PsiStatement[] statements=body.getStatements();
      if (statements.length > 0) {
        PsiStatement first=statements[0];
        if (first instanceof PsiExpressionStatement) {
          PsiExpression expression=((PsiExpressionStatement)first).getExpression();
          if (expression instanceof PsiMethodCallExpression) {
            String text=((PsiMethodCallExpression)expression).getMethodExpression().getText();
            if ("this".equals(text)) {
              continue;
            }
          }
        }
      }
      PsiStatement assignment=createAssignment(field,initializerExpression,body.getLastChild());
      body.add(assignment);
      added=true;
    }
    if (!added && enclosingConstructor == null) {
      PsiElementFactory factory=field.getManager().getElementFactory();
      PsiMethod constructor=factory.createConstructor();
      final PsiCodeBlock body=constructor.getBody();
      PsiStatement assignment=createAssignment(field,initializerExpression,body.getLastChild());
      body.add(assignment);
      aClass.add(constructor);
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
