{
  super(project,editor,initializerExpression,localVariable,occurrences,typeSelectorManager,IntroduceFieldHandler.REFACTORING_NAME);
  myParentClass=parentClass;
  myStatic=aStatic;
  myAnchorElement=anchorElement;
  myAnchorElementIfAll=anchorElementIfAll;
  for (int i=0, occurrencesLength=occurrences.length; i < occurrencesLength; i++) {
    PsiExpression occurrence=occurrences[i];
    PsiElement parent=occurrence.getParent();
    if (parent == myAnchorElement) {
      myAnchorIdx=i;
    }
    if (parent == anchorElementIfAll) {
      myAnchorIdxIfAll=i;
    }
  }
  myOccurenceManager=occurenceManager;
  myProject=myLocalVariable != null ? myLocalVariable.getProject() : initializerExpression.getProject();
  myEditor=editor;
  myIntroduceFieldPanel=new IntroduceFieldPopupPanel(parentClass,initializerExpression,localVariable,currentMethodConstructor,localVariable != null,aStatic,myOccurrences,allowInitInMethod,allowInitInMethodIfAll,typeSelectorManager);
  myWholePanel=new JPanel(new BorderLayout());
  myWholePanel.setBorder(null);
  myLabel.setBorder(BorderFactory.createEmptyBorder(0,5,5,0));
  myLabel.setFont(myLabel.getFont().deriveFont(Font.BOLD));
  myWholePanel.add(myLabel,BorderLayout.NORTH);
  final JComponent centerPanel=myIntroduceFieldPanel.createCenterPanel();
  myWholePanel.add(centerPanel,BorderLayout.WEST);
  myIntroduceFieldPanel.initializeControls(initializerExpression,ourLastInitializerPlace);
}
