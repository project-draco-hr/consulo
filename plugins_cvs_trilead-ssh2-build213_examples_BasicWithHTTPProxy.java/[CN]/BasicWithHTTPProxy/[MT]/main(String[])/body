{
  String hostname="my-ssh-server";
  String username="joe";
  String password="joespass";
  String proxyHost="192.168.1.1";
  int proxyPort=3128;
  try {
    Connection conn=new Connection(hostname);
    conn.setProxyData(new HTTPProxyData(proxyHost,proxyPort));
    conn.connect();
    boolean isAuthenticated=conn.authenticateWithPassword(username,password);
    if (isAuthenticated == false)     throw new IOException("Authentication failed.");
    Session sess=conn.openSession();
    sess.execCommand("uname -a && date && uptime && who");
    System.out.println("Here is some information about the remote host:");
    InputStream stdout=new StreamGobbler(sess.getStdout());
    BufferedReader br=new BufferedReader(new InputStreamReader(stdout));
    while (true) {
      String line=br.readLine();
      if (line == null)       break;
      System.out.println(line);
    }
    System.out.println("ExitCode: " + sess.getExitStatus());
    sess.close();
    conn.close();
  }
 catch (  IOException e) {
    e.printStackTrace(System.err);
    System.exit(2);
  }
}
