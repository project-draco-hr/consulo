{
  final Module module=((Module)dataContext.getData(DataConstantsEx.MODULE_CONTEXT));
  int ret=Messages.showOkCancelDialog("Remove Module '" + module.getName() + "' from the project?"+ "\nNo files will be deleted.","Remove Module",Messages.getQuestionIcon());
  if (ret != 0)   return;
  CommandProcessor.getInstance().executeCommand(module.getProject(),new Runnable(){
    public void run(){
      final Runnable action=new Runnable(){
        public void run(){
          removeModule(module);
        }
      }
;
      ApplicationManager.getApplication().runWriteAction(action);
    }
  }
,"Detach module from project",null);
}
