{
  String s;
  if (myAcceptUnescapedUrls) {
    s=url.getFile();
  }
 else {
    try {
      s=url.toURI().getSchemeSpecificPart();
    }
 catch (    URISyntaxException thisShouldNotHappen) {
      thisShouldNotHappen.printStackTrace();
      s=url.getFile();
    }
  }
  Loader loader=null;
  if (s != null && new File(s).isDirectory()) {
    if (FILE_PROTOCOL.equals(url.getProtocol())) {
      loader=new FileLoader(url,index);
    }
  }
 else {
    JarLoader jarLoader=new JarLoader(url,myCanLockJars,index);
    jarLoader.preLoadClasses();
    loader=jarLoader;
  }
  if (loader != null && myCanUseCache) {
    try {
      loader.buildCache(myCache);
    }
 catch (    Throwable e) {
    }
  }
  return loader;
}
