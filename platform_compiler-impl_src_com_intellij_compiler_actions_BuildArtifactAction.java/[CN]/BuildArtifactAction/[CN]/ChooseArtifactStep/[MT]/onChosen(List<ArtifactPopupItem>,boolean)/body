{
  if (finalChoice) {
    return doFinalStep(new Runnable(){
      @Override public void run(){
        doBuild(myProject,selectedValues,false);
      }
    }
);
  }
  final List<ArtifactActionItem> actions=new ArrayList<ArtifactActionItem>();
  actions.add(new BuildArtifactItem(selectedValues,myProject));
  actions.add(new RebuildArtifactItem(selectedValues,myProject));
  actions.add(new CleanArtifactItem(selectedValues,myProject));
  if (mySettingsService != null) {
    actions.add(new EditArtifactItem(selectedValues,myProject,mySettingsService));
  }
  return new BaseListPopupStep<ArtifactActionItem>(selectedValues.size() == 1 ? "Action" : "Action for " + selectedValues.size() + " artifacts",actions){
    @NotNull @Override public String getTextFor(    ArtifactActionItem value){
      return value.getActionName();
    }
    @Override public PopupStep onChosen(    ArtifactActionItem selectedValue,    boolean finalChoice){
      return doFinalStep(selectedValue);
    }
  }
;
}
