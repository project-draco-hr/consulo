{
  PsiElementFactory factory=JavaPsiFacade.getInstance(instanceOfExpression.getProject()).getElementFactory();
  PsiExpressionStatement statement=(PsiExpressionStatement)factory.createStatementFromText("((a)b)",instanceOfExpression);
  PsiParenthesizedExpression paren=(PsiParenthesizedExpression)statement.getExpression();
  PsiTypeCastExpression cast=(PsiTypeCastExpression)paren.getExpression();
  PsiType castType=instanceOfExpression.getCheckType().getType();
  cast.getCastType().replace(factory.createTypeElement(castType));
  cast.getOperand().replace(instanceOfExpression.getOperand());
  final PsiStatement statementInside=isNegated(instanceOfExpression) ? null : getExpressionStatementInside(file,editor);
  if (statementInside != null) {
    return statementInside.replace(statement);
  }
 else {
    return insertAtAnchor(instanceOfExpression,statement);
  }
}
