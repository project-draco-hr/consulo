{
  myProgressIndicator=null;
  for (  GlobalInspectionContextExtension extension : myExtensions.values()) {
    extension.cleanup();
  }
  for (  Tools tools : myTools.values()) {
    for (    ScopeToolState state : tools.getTools()) {
      ((InspectionTool)state.getTool()).cleanup();
    }
  }
  myTools.clear();
  if (myRefManager != null) {
    ((RefManagerImpl)myRefManager).cleanup();
    myRefManager=null;
    if (myCurrentScope != null) {
      myCurrentScope.invalidate();
      myCurrentScope=null;
    }
  }
}
