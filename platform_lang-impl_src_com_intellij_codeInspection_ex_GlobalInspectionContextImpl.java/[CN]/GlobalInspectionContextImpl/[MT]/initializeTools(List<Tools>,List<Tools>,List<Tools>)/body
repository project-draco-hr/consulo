{
  myJobDescriptors=new ArrayList<JobDescriptor>();
  final InspectionProfileImpl profile=new InspectionProfileImpl((InspectionProfileImpl)getCurrentProfile());
  final List<ToolsImpl> usedTools=profile.getAllEnabledInspectionTools();
  for (  Tools currentTools : usedTools) {
    final String shortName=currentTools.getShortName();
    myTools.put(shortName,currentTools);
    final InspectionTool tool=(InspectionTool)currentTools.getTool();
    if (tool instanceof LocalInspectionToolWrapper) {
      outLocalTools.add(currentTools);
      appendJobDescriptor(LOCAL_ANALYSIS);
    }
 else     if (tool instanceof GlobalInspectionToolWrapper && ((GlobalInspectionToolWrapper)tool).getTool() instanceof GlobalSimpleInspectionTool) {
      outGlobalSimpleTools.add(currentTools);
    }
 else {
      outGlobalTools.add(currentTools);
      JobDescriptor[] jobDescriptors=tool.getJobDescriptors();
      for (      JobDescriptor jobDescriptor : jobDescriptors) {
        appendJobDescriptor(jobDescriptor);
      }
    }
    for (    ScopeToolState state : currentTools.getTools()) {
      ((InspectionTool)state.getTool()).initialize(this);
    }
  }
  for (  GlobalInspectionContextExtension extension : myExtensions.values()) {
    extension.performPreRunActivities(outGlobalTools,outLocalTools,this);
  }
}
