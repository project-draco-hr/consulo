{
  final Map<String,DescriptorProviderInspection> dummyWrappersMap=getDummyInspectionWrappersMap(localTools);
  if (dummyWrappersMap == null) {
    return toolWrapper;
  }
  return new GlobalInspectionToolWrapper(toolWrapper.getTool()){
    @Override public void addProblemElement(    RefEntity refEntity,    CommonProblemDescriptor... commonProblemDescriptors){
      for (      CommonProblemDescriptor problemDescriptor : commonProblemDescriptors) {
        if (problemDescriptor instanceof ProblemDescriptor) {
          String problemGroup=((ProblemDescriptor)problemDescriptor).getProblemGroup();
          if (problemGroup != null) {
            DescriptorProviderInspection dummyWrapper=dummyWrappersMap.get(problemGroup);
            if (dummyWrapper != null) {
              dummyWrapper.addProblemElement(refEntity,problemDescriptor);
            }
          }
 else {
            toolWrapper.addProblemElement(refEntity,commonProblemDescriptors);
          }
        }
      }
    }
  }
;
}
