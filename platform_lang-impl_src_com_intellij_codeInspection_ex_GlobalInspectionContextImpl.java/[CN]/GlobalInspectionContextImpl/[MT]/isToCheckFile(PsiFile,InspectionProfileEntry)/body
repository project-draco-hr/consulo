{
  final Tools tools=myTools.get(tool.getShortName());
  if (tools != null && file != null) {
    for (    ScopeToolState state : tools.getTools()) {
      final NamedScope namedScope=state.getScope(file.getProject());
      if (namedScope == null || namedScope.getValue().contains(file,getCurrentProfile().getProfileManager().getScopesManager())) {
        if (state.isEnabled()) {
          final InspectionProfileEntry entry=state.getTool();
          if (entry instanceof InspectionToolWrapper && ((InspectionToolWrapper)entry).getTool() == tool)           return true;
          if (entry == tool) {
            return true;
          }
        }
        return false;
      }
    }
  }
  return false;
}
