{
  myIndentOption=indentOptions;
  mySettings=settings;
  final InitialInfoBuilder builder=InitialInfoBuilder.buildBlocks(rootBlock,docModel,affectedRange,indentOptions);
  myInfos=builder.getBlockToInfoMap();
  myFirstTokenBlock=builder.getFirstTokenBlock();
  myCurrentBlock=myFirstTokenBlock;
  myTextRangeToWrapper=buildTextRangeToInfoMap(myFirstTokenBlock);
  myMaxEndOffset=rootBlock.getTextRange().getEndOffset();
}
