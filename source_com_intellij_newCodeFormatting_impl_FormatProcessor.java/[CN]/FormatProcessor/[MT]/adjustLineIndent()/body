{
  int alignOffset=getAlignOffset();
  if (alignOffset == -1) {
    final WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
    whiteSpace.setSpaces(0,myCurrentBlock.calculateOffset(myIndentOption));
  }
 else {
    final WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
    BlockWrapper previousIndentedBlock=getPreviousIndentedBlock();
    if (previousIndentedBlock == null) {
      whiteSpace.setSpaces(alignOffset,0);
    }
 else {
      int indentOffset=previousIndentedBlock.getWhiteSpace().getIndentOffset();
      if (indentOffset > alignOffset) {
        whiteSpace.setSpaces(alignOffset,0);
      }
 else {
        whiteSpace.setSpaces(alignOffset - indentOffset,indentOffset);
      }
    }
  }
}
