{
  final SpacePropertyImpl spaceProperty=myCurrentBlock.getSpaceProperty();
  final WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
  whiteSpace.arrangeLineFeeds(spaceProperty);
  try {
    if (processWrap()) {
      return;
    }
  }
  finally {
    if (whiteSpace.containsLineFeeds()) {
      onCurrentLineChanged();
    }
  }
  final Block block=myCurrentBlock.getBlock();
  if (whiteSpace.containsLineFeeds()) {
    adjustLineIndent();
  }
 else {
    whiteSpace.arrangeSpaces(spaceProperty);
  }
  setAlignOffset(myCurrentBlock.getAlignment(),getOffsetBefore(block));
  if (myCurrentBlock.containsLineFeeds()) {
    onCurrentLineChanged();
  }
  myCurrentBlock=myCurrentBlock.getNextBlock();
}
