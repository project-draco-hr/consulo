{
  int shift=0;
  WhiteSpace prev=null;
  for (Iterator<Block> iterator=myInfos.keySet().iterator(); iterator.hasNext(); ) {
    Block block=iterator.next();
    final WhiteSpace whiteSpace=getBlockInfo(block).getWhiteSpace();
    final String newWhiteSpace=whiteSpace.generateWhiteSpace();
    if (prev == whiteSpace || whiteSpace.isReadOnly())     continue;
    final TextRange textRange=whiteSpace.getTextRange();
    myModel.replaceWhiteSpace(new TextRange(textRange.getStartOffset() + shift,textRange.getEndOffset() + shift),newWhiteSpace);
    shift+=newWhiteSpace.length() - (textRange.getLength());
    prev=whiteSpace;
  }
}
