{
  int alignOffset=getAlignOffsetBefore(childAttributes.getAlignment(),null);
  if (alignOffset == -1) {
    return parent.calculateChildOffset(myIndentOption,childAttributes,index).createIndentInfo();
  }
 else {
    AbstractBlockWrapper previousIndentedBlock=getPreviousIndentedBlock();
    if (previousIndentedBlock == null) {
      return new IndentInfo(0,0,alignOffset);
    }
 else {
      int indentOffset=previousIndentedBlock.getWhiteSpace().getIndentOffset();
      if (indentOffset > alignOffset) {
        return new IndentInfo(0,0,alignOffset);
      }
 else {
        return new IndentInfo(0,indentOffset,alignOffset - indentOffset);
      }
    }
  }
}
