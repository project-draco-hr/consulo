{
  final PsiElement parent=expression.getParent();
  if (!(parent instanceof PsiAssignmentExpression)) {
    return false;
  }
  final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)parent;
  final PsiExpression lExpression=assignmentExpression.getLExpression();
  if (!(lExpression instanceof PsiReferenceExpression)) {
    return false;
  }
  final PsiIfStatement ifStatement=PsiTreeUtil.getParentOfType(assignmentExpression,PsiIfStatement.class);
  if (ifStatement == null) {
    return false;
  }
  final PsiExpression condition=ifStatement.getCondition();
  if (!(condition instanceof PsiBinaryExpression)) {
    return false;
  }
  final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)condition;
  if (binaryExpression.getOperationTokenType() != JavaTokenType.EQEQ) {
    return false;
  }
  final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)lExpression;
  final PsiExpression lhs=binaryExpression.getLOperand();
  final PsiExpression rhs=binaryExpression.getROperand();
  if (lhs instanceof PsiLiteralExpression) {
    if (!"null".equals(lhs.getText())) {
      return false;
    }
    if (!(rhs instanceof PsiReferenceExpression)) {
      return false;
    }
    return referenceExpression.getText().equals(rhs.getText());
  }
 else   if (rhs instanceof PsiLiteralExpression) {
    if (!"null".equals(rhs.getText())) {
      return false;
    }
    if (!(lhs instanceof PsiReferenceExpression)) {
      return false;
    }
    return referenceExpression.getText().equals(lhs.getText());
  }
 else {
    return false;
  }
}
