{
  final ModuleExcludeIndex rootsIndex=context.getProjectDescriptor().getModuleExcludeIndex();
  final Set<File> excludes=new HashSet<File>(rootsIndex.getModuleExcludes(target.getModule()));
  for (  RootDescriptor rd : context.getProjectDescriptor().getBuildRootIndex().getTargetRoots(target,context)) {
    if (!rd.root.exists()) {
      continue;
    }
    context.getProjectDescriptor().fsState.clearRecompile(rd);
    traverseRecursively(context,rd,rd.root,excludes,timestamps,forceMarkDirty,currentFiles);
  }
}
