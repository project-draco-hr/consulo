{
  final String currentState=getCurrentState(context);
  if (!currentState.equals(myConfiguration)) {
    LOG.debug(myTarget + " configuration was changed:");
    LOG.debug("Old:");
    LOG.debug(myConfiguration);
    LOG.debug("New:");
    LOG.debug(currentState);
    LOG.debug(myTarget + " will be recompiled");
    if (myTarget instanceof ModuleBuildTarget) {
      final JpsModule module=((ModuleBuildTarget)myTarget).getModule();
synchronized (MODULES_WITH_TARGET_CONFIG_CHANGED_KEY) {
        Set<JpsModule> modules=MODULES_WITH_TARGET_CONFIG_CHANGED_KEY.get(context);
        if (modules == null) {
          MODULES_WITH_TARGET_CONFIG_CHANGED_KEY.set(context,modules=new THashSet<JpsModule>());
        }
        modules.add(module);
      }
    }
    return true;
  }
  return false;
}
