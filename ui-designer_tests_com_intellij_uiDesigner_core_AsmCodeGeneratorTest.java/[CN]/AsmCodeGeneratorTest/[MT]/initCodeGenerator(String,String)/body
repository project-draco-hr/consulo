{
  final String testDataPath=PathManagerEx.getTestDataPath() + File.separatorChar + "uiDesigner"+ File.separatorChar;
  String formPath=testDataPath + formFileName;
  String javaPath=testDataPath + className + ".java";
  com.sun.tools.javac.Main.compile(new String[]{javaPath});
  String classPath=testDataPath + className + ".class";
  String formData=new String(FileUtil.loadFileText(new File(formPath)));
  final ClassLoader classLoader=getClass().getClassLoader();
  final CompiledClassPropertiesProvider provider=new CompiledClassPropertiesProvider(classLoader);
  final LwRootContainer rootContainer=Utils.getRootContainer(formData,provider);
  final AsmCodeGenerator codeGenerator=new AsmCodeGenerator(rootContainer,classLoader,null,false);
  final FileInputStream classStream=new FileInputStream(classPath);
  try {
    codeGenerator.patchClass(classStream);
  }
  finally {
    classStream.close();
  }
  return codeGenerator;
}
