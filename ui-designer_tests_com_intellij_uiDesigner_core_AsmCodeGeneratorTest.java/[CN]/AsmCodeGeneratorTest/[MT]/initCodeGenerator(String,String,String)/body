{
  String formPath=testDataPath + formFileName;
  String javaPath=testDataPath + className + ".java";
  com.sun.tools.javac.Main.compile(new String[]{javaPath});
  String classPath=testDataPath + className + ".class";
  final LwRootContainer rootContainer=loadFormData(formPath);
  final AsmCodeGenerator codeGenerator=new AsmCodeGenerator(rootContainer,myClassLoader,myNestedFormLoader,false,new ClassWriter(ClassWriter.COMPUTE_FRAMES));
  final FileInputStream classStream=new FileInputStream(classPath);
  try {
    codeGenerator.patchClass(classStream);
  }
  finally {
    classStream.close();
    FileUtil.delete(new File(classPath));
  }
  return codeGenerator;
}
