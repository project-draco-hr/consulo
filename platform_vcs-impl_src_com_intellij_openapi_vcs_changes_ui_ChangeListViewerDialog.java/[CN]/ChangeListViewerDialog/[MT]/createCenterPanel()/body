{
  final JPanel mainPanel=new JPanel();
  mainPanel.setLayout(new BorderLayout());
  final Splitter splitter=new Splitter(true,0.8f);
  myChangesBrowser=new RepositoryChangesBrowser(myProject,Collections.singletonList(myChangeList),new ArrayList<Change>(myChangeList.getChanges()),myChangeList,myToSelect){
    @Override protected void buildToolBar(    DefaultActionGroup toolBarGroup){
      super.buildToolBar(toolBarGroup);
      toolBarGroup.add(new CopyRevisionNumberAction());
    }
    @Override public Object getData(    @NonNls String dataId){
      Object data=super.getData(dataId);
      if (data != null) {
        return data;
      }
      return ChangeListViewerDialog.this.getData(dataId);
    }
    @Override protected void showDiffForChanges(    final Change[] changesArray,    final int indexInSelection){
      if (myInAir && (myConvertor != null)) {
        final Change[] convertedChanges=new Change[changesArray.length];
        for (int i=0; i < changesArray.length; i++) {
          Change change=changesArray[i];
          convertedChanges[i]=myConvertor.fun(change);
        }
        super.showDiffForChanges(convertedChanges,indexInSelection);
      }
 else {
        super.showDiffForChanges(changesArray,indexInSelection);
      }
    }
  }
;
  myChangesBrowser.setUseCase(myInAir ? CommittedChangesBrowserUseCase.IN_AIR : null);
  splitter.setFirstComponent(myChangesBrowser);
  if (myCommitMessageArea != null) {
    JPanel commitPanel=new JPanel(new BorderLayout());
    JComponent separator=SeparatorFactory.createSeparator(VcsBundle.message("label.commit.comment"),myCommitMessageArea);
    commitPanel.add(separator,BorderLayout.NORTH);
    commitPanel.add(commitMessageScroll,BorderLayout.CENTER);
    splitter.setSecondComponent(commitPanel);
  }
  mainPanel.add(splitter,BorderLayout.CENTER);
  final String description=getDescription();
  if (description != null) {
    JPanel descPanel=new JPanel();
    descPanel.add(new JLabel(XmlStringUtil.wrapInHtml(description)));
    descPanel.setBorder(BorderFactory.createEtchedBorder());
    mainPanel.add(descPanel,BorderLayout.NORTH);
  }
  return mainPanel;
}
