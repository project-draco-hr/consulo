{
  final String testDataPath=PathManagerEx.getTestDataPath() + File.separatorChar + "uiDesigner"+ File.separatorChar+ File.separatorChar+ "formEmbedding"+ File.separatorChar+ "Ideadev14081"+ File.separatorChar;
  AsmCodeGenerator embeddedClassGenerator=initCodeGenerator("Embedded.form","Embedded",testDataPath);
  byte[] embeddedPatchedData=getVerifiedPatchedData(embeddedClassGenerator);
  myClassLoader.doDefineClass("Embedded",embeddedPatchedData);
  myNestedFormLoader.registerNestedForm("Embedded.form",testDataPath + "Embedded.form");
  AsmCodeGenerator mainClassGenerator=initCodeGenerator("Main.form","Main",testDataPath);
  byte[] mainPatchedData=getVerifiedPatchedData(mainClassGenerator);
  final Class mainClass=myClassLoader.doDefineClass("Main",mainPatchedData);
  Object instance=mainClass.newInstance();
}
