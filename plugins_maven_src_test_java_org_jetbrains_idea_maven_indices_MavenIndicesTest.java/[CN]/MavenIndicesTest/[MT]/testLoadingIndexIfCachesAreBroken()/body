{
  MavenIndex i1=myIndices.add(myDataTestFixture.getTestDataPath("local1"),MavenIndex.Kind.LOCAL);
  MavenIndex i2=myIndices.add(myDataTestFixture.getTestDataPath("local2"),MavenIndex.Kind.LOCAL);
  myIndices.update(i1,new EmptyProgressIndicator());
  myIndices.update(i2,new EmptyProgressIndicator());
  assertUnorderedElementsAreEqual(i1.getGroupIds(),"junit");
  assertUnorderedElementsAreEqual(i2.getGroupIds(),"jmock");
  shutdownIndices();
  File cachesDir=i1.getCurrentDataDir();
  File groupIds=new File(cachesDir,"groupIds.dat");
  assertTrue(groupIds.exists());
  FileWriter w=new FileWriter(groupIds);
  w.write("bad content");
  w.close();
  initIndices();
  assertEquals(2,myIndices.getIndices().size());
  assertTrue(myIndices.getIndices().get(0).getGroupIds().isEmpty());
  assertEquals(-1,myIndices.getIndices().get(0).getUpdateTimestamp());
  assertUnorderedElementsAreEqual(myIndices.getIndices().get(1).getGroupIds(),"jmock");
}
