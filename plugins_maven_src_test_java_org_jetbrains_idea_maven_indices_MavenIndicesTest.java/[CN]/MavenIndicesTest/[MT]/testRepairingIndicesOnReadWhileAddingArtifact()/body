{
  MavenIndex index=myIndices.add("id",myRepositoryHelper.getTestDataPath("local1"),MavenIndex.Kind.LOCAL);
  myIndices.updateOrRepair(index,true,getMavenGeneralSettings(),EMPTY_MAVEN_PROCESS);
  shutdownIndices();
  damageFile(index,"artifactIds-map.dat",false);
  initIndices();
  index=myIndices.getIndices().get(0);
  index.addArtifact(null);
  assertTrue(isBroken);
  assertTrue(index.getGroupIds().isEmpty());
  myIndices.updateOrRepair(myIndices.getIndices().get(0),false,getMavenGeneralSettings(),EMPTY_MAVEN_PROCESS);
  assertUnorderedElementsAreEqual(index.getGroupIds(),"junit");
}
