{
  final List<Change> changes=new ArrayList<Change>();
  for (  FilePath file : files) {
    final Change change=myChangeListManager.getChange(file);
    Assert.assertNotNull(change);
    changes.add(change);
  }
  final List<VcsException> exceptions=myVcs.getCheckinEnvironment().commit(changes,"test comment list");
  Assert.assertTrue(exceptions == null || exceptions.isEmpty());
  myDirtyScopeManager.markEverythingDirty();
  myChangeListManager.ensureUpToDate(false);
  for (  FilePath file : files) {
    final Change changeA=myChangeListManager.getChange(file);
    Assert.assertNull(changeA);
  }
}
