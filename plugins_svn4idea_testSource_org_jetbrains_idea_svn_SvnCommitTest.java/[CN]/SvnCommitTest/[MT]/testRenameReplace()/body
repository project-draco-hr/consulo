{
  enableSilentOperation(VcsConfiguration.StandardConfirmation.ADD);
  run2variants(new MyRunner(){
    private String myName="a.txt";
    private String myName2="aRenamed.txt";
    @Override protected void run() throws Exception {
      final VirtualFile file=createFileInCommand(myWorkingCopyDir,myName,"123");
      final VirtualFile file2=createFileInCommand(myWorkingCopyDir,myName2,"1235");
      myDirtyScopeManager.markEverythingDirty();
      myChangeListManager.ensureUpToDate(false);
      checkinFiles(file,file2);
      renameFileInCommand(file,file.getName() + "7.txt");
      renameFileInCommand(file2,myName);
      myDirtyScopeManager.markEverythingDirty();
      myChangeListManager.ensureUpToDate(false);
      checkinFiles(file,file2);
    }
    @Override protected void cleanup() throws Exception {
      myName="b.txt";
      myName2="bRenamed.txt";
    }
  }
);
}
