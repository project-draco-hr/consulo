{
  ArrayList<Variable> parsedVariables=new ArrayList<Variable>();
  parseVariables(myTemplateEditor.getDocument().getCharsSequence(),parsedVariables);
  Hashtable<String,String> oldVariableNames=new Hashtable<String,String>();
  for (  Object myVariable : myVariables) {
    Variable oldVariable=(Variable)myVariable;
    String name=oldVariable.getName();
    oldVariableNames.put(name,name);
  }
  Hashtable<String,String> newVariableNames=new Hashtable<String,String>();
  for (  Object parsedVariable : parsedVariables) {
    Variable newVariable=(Variable)parsedVariable;
    String name=newVariable.getName();
    newVariableNames.put(name,name);
  }
  int oldVariableNumber=0;
  for (int i=0; i < parsedVariables.size(); i++) {
    Variable variable=parsedVariables.get(i);
    String name=variable.getName();
    if (oldVariableNames.get(name) != null) {
      Variable oldVariable=null;
      for (; oldVariableNumber < myVariables.size(); oldVariableNumber++) {
        oldVariable=myVariables.get(oldVariableNumber);
        if (newVariableNames.get(oldVariable.getName()) != null) {
          break;
        }
        oldVariable=null;
      }
      oldVariableNumber++;
      if (oldVariable != null) {
        parsedVariables.set(i,oldVariable);
      }
    }
  }
  myVariables=parsedVariables;
}
