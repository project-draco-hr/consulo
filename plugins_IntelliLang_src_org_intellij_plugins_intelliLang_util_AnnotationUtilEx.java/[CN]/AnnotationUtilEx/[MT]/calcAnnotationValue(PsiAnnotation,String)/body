{
  PsiElement value=annotation.findAttributeValue(attr);
  final Object o;
  if (value instanceof ClsLiteralExpressionImpl) {
    final ClsLiteralExpressionImpl expr=((ClsLiteralExpressionImpl)value);
    if (expr.getValue() == null) {
      try {
        final String s=expr.getText();
        if (s.startsWith("\"") && s.endsWith("\"")) {
          final String e="\"" + StringUtil.escapeStringCharacters(s.substring(1,s.length() - 1)) + "\"";
          value=JavaPsiFacade.getInstance(annotation.getProject()).getElementFactory().createExpressionFromText(e,annotation);
        }
      }
 catch (      IncorrectOperationException e) {
        Logger.getInstance(AnnotationUtilEx.class.getName()).error(e);
      }
    }
  }
  if (value instanceof PsiExpression) {
    o=CONSTANT_EVALUATION_HELPER.computeConstantExpression((PsiExpression)value);
  }
 else {
    return null;
  }
  if (o instanceof String) {
    return (String)o;
  }
  return null;
}
