{
  if (listOwner instanceof PsiParameter) {
    return ((PsiParameter)listOwner).getAnnotations();
  }
  final PsiModifierList modifierList=listOwner.getModifierList();
  if (modifierList == null) {
    return PsiAnnotation.EMPTY_ARRAY;
  }
  if (inHierarchy && listOwner instanceof PsiMethod) {
    final Set<PsiAnnotation> all=new HashSet<PsiAnnotation>(){
      public boolean add(      PsiAnnotation o){
        return !contains(o) && super.add(o);
      }
    }
;
    all.addAll(Arrays.asList(modifierList.getAnnotations()));
    addSuperAnnotations(all,(PsiMethod)listOwner);
    return all.toArray(new PsiAnnotation[all.size()]);
  }
 else {
    return modifierList.getAnnotations();
  }
}
