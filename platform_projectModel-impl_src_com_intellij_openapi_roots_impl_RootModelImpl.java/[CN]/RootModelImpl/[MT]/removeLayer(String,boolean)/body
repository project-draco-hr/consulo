{
  assertWritable();
  ModuleRootLayerImpl removedLayer=myLayers.remove(name);
  if (removedLayer != null) {
    Disposer.dispose(removedLayer);
    if (initDefault && myLayers.isEmpty()) {
      try {
        initDefaultLayer(null);
      }
 catch (      InvalidDataException e) {
      }
    }
    if (Comparing.equal(myCurrentLayerName,name)) {
      setCurrentLayerSafe(myLayers.isEmpty() ? null : ContainerUtil.getFirstItem(myLayers.keySet()));
    }
  }
  return removedLayer != null;
}
