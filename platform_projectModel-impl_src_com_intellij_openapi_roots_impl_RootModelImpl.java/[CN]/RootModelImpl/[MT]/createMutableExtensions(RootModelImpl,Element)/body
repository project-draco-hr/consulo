{
  for (  ModuleExtensionProviderEP providerEP : ModuleExtensionProviderEP.EP_NAME.getExtensions()) {
    final ModuleExtensionProvider provider=providerEP.getInstance();
    final ModuleExtension<?> originalExtension=rootModel.getExtensionWithoutCheck(provider.getImmutableClass());
    if (state != null) {
      originalExtension.loadState(state);
    }
    MutableModuleExtension mutable=provider.createMutable(providerEP.getKey(),rootModel.getModule(),originalExtension);
    mutable.commit(originalExtension);
    myExtensions.add(mutable);
  }
}
