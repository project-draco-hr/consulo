{
  if (!((OrderEntryBaseImpl)orderEntry1).sameType(orderEntry2))   return false;
  if (orderEntry1 instanceof SdkOrderEntry) {
    if (!(orderEntry2 instanceof SdkOrderEntry))     return false;
    if (orderEntry1 instanceof InheritedSdkOrderEntry && orderEntry2 instanceof ModuleExtensionWithSdkOrderEntry) {
      return false;
    }
    if (orderEntry2 instanceof InheritedSdkOrderEntry && orderEntry1 instanceof ModuleExtensionWithSdkOrderEntry) {
      return false;
    }
    if (orderEntry1 instanceof ModuleExtensionWithSdkOrderEntry && orderEntry2 instanceof ModuleExtensionWithSdkOrderEntry) {
      String name1=((ModuleExtensionWithSdkOrderEntry)orderEntry1).getSdkName();
      String name2=((ModuleExtensionWithSdkOrderEntry)orderEntry2).getSdkName();
      if (!Comparing.strEqual(name1,name2)) {
        return false;
      }
    }
  }
  if (orderEntry1 instanceof ExportableOrderEntry) {
    if (!(((ExportableOrderEntry)orderEntry1).isExported() == ((ExportableOrderEntry)orderEntry2).isExported())) {
      return false;
    }
    if (!(((ExportableOrderEntry)orderEntry1).getScope() == ((ExportableOrderEntry)orderEntry2).getScope())) {
      return false;
    }
  }
  if (orderEntry1 instanceof ModuleOrderEntry) {
    LOG.assertTrue(orderEntry2 instanceof ModuleOrderEntry);
    ModuleOrderEntryImpl entry1=(ModuleOrderEntryImpl)orderEntry1;
    ModuleOrderEntryImpl entry2=(ModuleOrderEntryImpl)orderEntry2;
    return entry1.isProductionOnTestDependency() == entry2.isProductionOnTestDependency() && Comparing.equal(entry1.getModuleName(),entry2.getModuleName());
  }
  if (orderEntry1 instanceof LibraryOrderEntry) {
    LOG.assertTrue(orderEntry2 instanceof LibraryOrderEntry);
    LibraryOrderEntry libraryOrderEntry1=(LibraryOrderEntry)orderEntry1;
    LibraryOrderEntry libraryOrderEntry2=(LibraryOrderEntry)orderEntry2;
    boolean equal=Comparing.equal(libraryOrderEntry1.getLibraryName(),libraryOrderEntry2.getLibraryName()) && Comparing.equal(libraryOrderEntry1.getLibraryLevel(),libraryOrderEntry2.getLibraryLevel());
    if (!equal)     return false;
  }
  final OrderRootType[] allTypes=OrderRootType.getAllTypes();
  for (  OrderRootType type : allTypes) {
    final String[] orderedRootUrls1=orderEntry1.getUrls(type);
    final String[] orderedRootUrls2=orderEntry2.getUrls(type);
    if (!Arrays.equals(orderedRootUrls1,orderedRootUrls2)) {
      return false;
    }
  }
  return true;
}
