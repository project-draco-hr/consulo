{
  if (isVisible()) {
    if (myIsRealPopup) {
      myPopup.cancel();
      myPopup=null;
    }
 else {
      final JRootPane rootPane=myComponent.getRootPane();
      if (rootPane != null) {
        final Rectangle bounds=myComponent.getBounds();
        final JLayeredPane layeredPane=rootPane.getLayeredPane();
        try {
          if (myFocusBackComponent != null) {
            LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(myFocusBackComponent);
          }
          layeredPane.remove(myComponent);
        }
  finally {
          LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(null);
        }
        layeredPane.repaint(bounds.x,bounds.y,bounds.width,bounds.height);
      }
    }
  }
  if (myEscListener != null) {
    myComponent.unregisterKeyboardAction(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0));
  }
  fireHintHidden();
}
