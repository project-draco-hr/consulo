{
  if (isVisible()) {
    if (myIsRealPopup) {
      if (ok) {
        myPopup.closeOk(null);
      }
 else {
        myPopup.cancel();
      }
      myPopup=null;
    }
 else {
      if (myCurrentIdeTooltip != null) {
        IdeTooltip tooltip=myCurrentIdeTooltip;
        myCurrentIdeTooltip=null;
        tooltip.hide();
      }
 else {
        final JRootPane rootPane=myComponent.getRootPane();
        if (rootPane != null) {
          final Rectangle bounds=myComponent.getBounds();
          final JLayeredPane layeredPane=rootPane.getLayeredPane();
          try {
            if (myFocusBackComponent != null) {
              LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(myFocusBackComponent);
            }
            layeredPane.remove(myComponent);
          }
  finally {
            LayoutFocusTraversalPolicyExt.setOverridenDefaultComponent(null);
          }
          layeredPane.paintImmediately(bounds.x,bounds.y,bounds.width,bounds.height);
        }
      }
    }
  }
  if (myEscListener != null) {
    myComponent.unregisterKeyboardAction(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0));
  }
  TooltipController.getInstance().hide(this);
  fireHintHidden();
}
