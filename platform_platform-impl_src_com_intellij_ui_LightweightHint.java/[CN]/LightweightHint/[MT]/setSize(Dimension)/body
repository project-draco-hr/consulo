{
  if (myIsRealPopup && myPopup != null) {
    JComponent popupContent=myPopup.getContent();
    int widthExpand=0;
    int heightExpand=0;
    boolean adjustSize=false;
    JComponent prev=myComponent;
    for (Container c=myComponent.getParent(); c != null; c=c.getParent()) {
      if (c == popupContent) {
        adjustSize=true;
        break;
      }
      if (c instanceof JComponent) {
        Border border=((JComponent)c).getBorder();
        if (prev != null && border != null) {
          Insets insets=border.getBorderInsets(prev);
          widthExpand+=insets.left + insets.right;
          heightExpand+=insets.top + insets.bottom;
        }
        prev=(JComponent)c;
      }
 else {
        prev=null;
      }
    }
    Dimension sizeToUse=size;
    if (adjustSize && (widthExpand != 0 || heightExpand != 0)) {
      sizeToUse=new Dimension(size.width + widthExpand,size.height + heightExpand);
    }
    myPopup.setSize(sizeToUse);
  }
 else   if (!isAwtTooltip()) {
    myComponent.setSize(size);
    myComponent.revalidate();
    myComponent.repaint();
  }
}
