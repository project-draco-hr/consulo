{
  String fieldName=settings.getName();
  String errorString=check(targetClass,fieldName);
  if (errorString != null) {
    String message=RefactoringBundle.getCannotRefactorMessage(errorString);
    CommonRefactoringUtil.showErrorMessage(GrIntroduceConstantHandler.REFACTORING_NAME,message,HelpID.INTRODUCE_CONSTANT,context.getProject());
    return true;
  }
  PsiField oldField=targetClass.findFieldByName(fieldName,true);
  if (oldField != null) {
    String message=RefactoringBundle.message("field.exists",fieldName,oldField.getContainingClass().getQualifiedName());
    int answer=Messages.showYesNoDialog(context.getProject(),message,GrIntroduceConstantHandler.REFACTORING_NAME,Messages.getWarningIcon());
    if (answer != 0) {
      return true;
    }
  }
  return false;
}
