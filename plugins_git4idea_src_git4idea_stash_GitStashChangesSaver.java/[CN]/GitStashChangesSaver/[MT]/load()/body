{
  Collection<VirtualFile> conflictedRoots=new ArrayList<VirtualFile>();
  for (  VirtualFile root : myStashedRoots) {
    boolean conflict=loadRoot(root);
    if (conflict) {
      conflictedRoots.add(root);
    }
  }
  boolean conflictsResolved=new UnstashConflictResolver(myProject,myStashedRoots,myParams).merge();
  if (conflictsResolved) {
    LOG.info("load: all conflicts resolved, dropping stash in " + myStashedRoots);
    for (    VirtualFile root : conflictedRoots) {
      GitStashUtils.dropStash(myProject,root);
    }
  }
  LocalFileSystem.getInstance().refreshIoFiles(myChangeManager.getAffectedPaths());
}
