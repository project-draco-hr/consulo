{
  if (success) {
    if (getLocalVariable() == null && myExpr == null || getInputName() == null || getLocalVariable() != null && !getLocalVariable().isValid() || myExpr != null && !myExpr.isValid()) {
      super.moveOffsetAfter(false);
      return;
    }
    if (getLocalVariable() != null) {
      new WriteCommandAction(myProject,getCommandName(),getCommandName()){
        @Override protected void run(        Result result) throws Throwable {
          getLocalVariable().setName(myLocalName);
        }
      }
.execute();
    }
    performIntroduce();
    V variable=getVariable();
    if (variable != null) {
      saveSettings(variable);
    }
  }
  if (getLocalVariable() != null && getLocalVariable().isValid()) {
    myEditor.getCaretModel().moveToOffset(getLocalVariable().getTextOffset());
    myEditor.getScrollingModel().scrollToCaret(ScrollType.MAKE_VISIBLE);
  }
 else   if (getExprMarker() != null) {
    final RangeMarker exprMarker=getExprMarker();
    if (exprMarker.isValid()) {
      myEditor.getCaretModel().moveToOffset(exprMarker.getStartOffset());
      myEditor.getScrollingModel().scrollToCaret(ScrollType.MAKE_VISIBLE);
    }
  }
  super.moveOffsetAfter(success);
  if (success) {
    performPostIntroduceTasks();
  }
}
