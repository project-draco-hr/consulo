{
  if (isReplaceAllOccurrences()) {
    for (    E expression : getOccurrences()) {
      LOG.assertTrue(expression.isValid(),expression.getText());
      stringUsages.add(Pair.<PsiElement,TextRange>create(expression,new TextRange(0,expression.getTextLength())));
    }
  }
 else   if (getExpr() != null) {
    correctExpression();
    final E expr=getExpr();
    LOG.assertTrue(expr.isValid(),expr.getText());
    stringUsages.add(Pair.<PsiElement,TextRange>create(expr,new TextRange(0,expr.getTextLength())));
  }
  final V localVariable=getLocalVariable();
  if (localVariable != null) {
    final PsiElement nameIdentifier=localVariable.getNameIdentifier();
    if (nameIdentifier != null) {
      int length=nameIdentifier.getTextLength();
      stringUsages.add(Pair.<PsiElement,TextRange>create(nameIdentifier,new TextRange(0,length)));
    }
  }
}
