{
  if (element instanceof GrReferenceExpression && ((GrReferenceExpression)element).getQualifierExpression() == null) {
    final PsiElement parent=element.getParent();
    if (parent instanceof GrAssignmentExpression) {
      return new Computable<PsiType>(){
        @Nullable public PsiType compute(){
          return ((GrAssignmentExpression)parent).getType();
        }
      }
;
    }
    if (parent instanceof GrTupleExpression) {
      GrTupleExpression list=(GrTupleExpression)parent;
      if (list.getParent() instanceof GrAssignmentExpression) {
        final GrExpression rValue=((GrAssignmentExpression)list.getParent()).getRValue();
        int idx=list.indexOf(element);
        if (idx >= 0 && rValue != null) {
          return getMultipleAssignmentTypeComputation(rValue,idx);
        }
      }
    }
    return null;
  }
  if (element instanceof GrVariable) {
    return new Computable<PsiType>(){
      @Nullable public PsiType compute(){
        GrVariable variable=(GrVariable)element;
        if (!(variable instanceof GrParameter)) {
          final GrExpression initializer=variable.getInitializerGroovy();
          if (initializer != null) {
            return initializer.getType();
          }
        }
        return variable.getTypeGroovy();
      }
    }
;
  }
  return null;
}
