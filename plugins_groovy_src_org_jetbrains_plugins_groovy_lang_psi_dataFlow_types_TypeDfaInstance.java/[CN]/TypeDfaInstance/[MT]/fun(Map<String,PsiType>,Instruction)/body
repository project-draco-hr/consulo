{
  if (instruction instanceof ReadWriteVariableInstruction && ((ReadWriteVariableInstruction)instruction).isWrite()) {
    final PsiElement element=instruction.getElement();
    final GrExpression initializer=getInitializer(element);
    if (initializer != null) {
      final TypeInferenceHelper helper=GroovyPsiManager.getInstance(initializer.getProject()).getTypeInferenceHelper();
      final PsiType type=helper.doInference(new Computable<PsiType>(){
        public PsiType compute(){
          return initializer.getType();
        }
      }
,map);
      if (type != null) {
        map.put(((ReadWriteVariableInstruction)instruction).getVariableName(),type);
      }
    }
  }
}
