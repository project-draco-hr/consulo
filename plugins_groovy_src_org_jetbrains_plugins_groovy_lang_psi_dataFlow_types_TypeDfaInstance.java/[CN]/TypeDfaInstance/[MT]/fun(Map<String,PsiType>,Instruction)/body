{
  if (instruction instanceof ReadWriteVariableInstruction && ((ReadWriteVariableInstruction)instruction).isWrite()) {
    final PsiElement element=instruction.getElement();
    if (element != null) {
      final Computable<PsiType> computation=getInitializerTypeComputation(element);
      if (computation != null) {
        final TypeInferenceHelper helper=GroovyPsiManager.getInstance(element.getProject()).getTypeInferenceHelper();
        final PsiType type=helper.doInference(computation,map);
        map.put(((ReadWriteVariableInstruction)instruction).getVariableName(),type);
      }
    }
  }
}
