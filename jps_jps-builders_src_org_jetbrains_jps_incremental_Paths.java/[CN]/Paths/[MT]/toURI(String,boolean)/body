{
  try {
    String p=FileUtil.toSystemIndependentName(localPath);
    if (!p.startsWith("/")) {
      p="/" + p;
    }
    if (p.startsWith("//")) {
      p="//" + p;
    }
    return new URI("file",null,convertSpaces ? p.replaceAll(" ","%20") : p,null);
  }
 catch (  URISyntaxException e) {
    throw new Error(e);
  }
}
