{
  final Set<M> processedElements=new ConcurrentHashSet<M>(myHashingStrategy);
  boolean success=myOriginal.forEach(new Processor<T>(){
    public boolean process(    final T t){
      return !processedElements.add(myMapper.fun(t)) || consumer.process(t);
    }
  }
);
  return success ? processedElements : null;
}
