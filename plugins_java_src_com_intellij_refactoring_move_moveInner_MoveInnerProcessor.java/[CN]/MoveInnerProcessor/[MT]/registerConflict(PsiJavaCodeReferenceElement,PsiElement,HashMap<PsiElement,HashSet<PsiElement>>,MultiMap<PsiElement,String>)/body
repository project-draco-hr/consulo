{
  final PsiElement container=ConflictsUtil.getContainer(reference);
  HashSet<PsiElement> containerSet=reported.get(container);
  if (containerSet == null) {
    containerSet=new HashSet<PsiElement>();
    reported.put(container,containerSet);
  }
  if (!containerSet.contains(resolved)) {
    containerSet.add(resolved);
    String placesDescription;
    if (containerSet.size() == 1) {
      placesDescription=RefactoringUIUtil.getDescription(resolved,true);
    }
 else {
      placesDescription="<ol><li>" + StringUtil.join(containerSet,new Function<PsiElement,String>(){
        @Override public String fun(        PsiElement element){
          return RefactoringUIUtil.getDescription(element,true);
        }
      }
,"</li><li>") + "</li></ol>";
    }
    String message=RefactoringBundle.message("0.will.become.inaccessible.from.1",placesDescription,RefactoringUIUtil.getDescription(container,true));
    conflicts.put(container,Collections.singletonList(message));
  }
}
