{
  if (!canUseCache) {
    return file.listFiles();
  }
  File[] cached=myDirectoryCache.get(file);
  if (cached == null) {
    cached=file.listFiles();
    myDirectoryCache.put(file,cached != null ? cached : NULL_FILE_ARRAY);
  }
  return cached == NULL_FILE_ARRAY ? null : cached;
}
