{
  Iterable<? extends File> path=getLocation(location);
  if (path == null) {
    return null;
  }
  for (  File root : path) {
    Archive archive=myArchives.get(root);
    final boolean isFile;
    if (archive != null) {
      isFile=true;
    }
 else {
      isFile=isFile(root);
    }
    if (isFile) {
      if (archive == null) {
        try {
          archive=openArchive(root);
        }
 catch (        IOException ex) {
          log.error("error.reading.file",root,ex.getLocalizedMessage());
          break;
        }
      }
      if (archive.contains(name)) {
        int i=name.lastIndexOf('/');
        String dirname=name.substring(0,i + 1);
        String basename=name.substring(i + 1);
        return archive.getFileObject(dirname,basename);
      }
    }
 else {
      final File f=new File(root,name.replace('/',File.separatorChar));
      if (f.exists()) {
        return new InputFileObject(f);
      }
    }
  }
  return null;
}
