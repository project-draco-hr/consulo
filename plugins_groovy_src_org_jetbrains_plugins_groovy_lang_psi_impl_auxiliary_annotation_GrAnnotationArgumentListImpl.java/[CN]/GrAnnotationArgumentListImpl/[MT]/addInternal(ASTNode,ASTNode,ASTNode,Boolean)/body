{
  if (first.getElementType() == ANNOTATION_MEMBER_VALUE_PAIR && last.getElementType() == ANNOTATION_MEMBER_VALUE_PAIR) {
    ASTNode lparenth=getNode().getFirstChildNode();
    ASTNode rparenth=getNode().getLastChildNode();
    if (lparenth == null) {
      getNode().addLeaf(mLPAREN,"(",null);
    }
    if (rparenth == null) {
      getNode().addLeaf(mRPAREN,")",null);
    }
    final PsiNameValuePair[] nodes=getAttributes();
    if (nodes.length == 1) {
      final PsiNameValuePair pair=nodes[0];
      if (pair.getName() == null) {
        final String text=pair.getValue().getText();
        try {
          final PsiAnnotation annotation=GroovyPsiElementFactory.getInstance(getProject()).createAnnotationFromText("@AAA(value = " + text + ")");
          getNode().replaceChild(pair.getNode(),annotation.getParameterList().getAttributes()[0].getNode());
        }
 catch (        IncorrectOperationException e) {
          LOG.error(e);
        }
      }
    }
    if (anchor == null && before != null) {
      anchor=before.booleanValue() ? getNode().getLastChildNode() : getNode().getFirstChildNode();
    }
  }
  return super.addInternal(first,last,anchor,before);
}
