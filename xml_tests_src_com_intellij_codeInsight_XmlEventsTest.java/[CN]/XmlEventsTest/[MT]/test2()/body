{
  final PomModel model=PomManager.getModel(getProject());
  final Listener listener=new Listener(model.getModelAspect(XmlAspect.class));
  model.addModelListener(listener);
  final XmlTag tagFromText=XmlElementFactory.getInstance(getProject()).createTagFromText("<a>aaa</a>");
  final XmlTag otherTag=XmlElementFactory.getInstance(getProject()).createTagFromText("<a/>");
  final XmlText xmlText=tagFromText.getValue().getTextElements()[0];
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      xmlText.insertAtOffset(otherTag,2);
    }
  }
);
  assertFileTextEquals(getTestName(false) + ".txt",listener.getEventString());
}
