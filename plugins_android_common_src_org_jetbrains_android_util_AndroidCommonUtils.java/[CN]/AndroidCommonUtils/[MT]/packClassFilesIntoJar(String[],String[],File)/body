{
  final List<Pair<File,String>> files=new ArrayList<Pair<File,String>>();
  for (  String path : firstPackageDirPaths) {
    final File firstPackageDir=new File(path);
    if (firstPackageDir.exists()) {
      packClassFilesIntoJar(firstPackageDir,firstPackageDir.getParentFile(),true,files);
    }
  }
  for (  String path : libFirstPackageDirPaths) {
    final File firstPackageDir=new File(path);
    if (firstPackageDir.exists()) {
      packClassFilesIntoJar(firstPackageDir,firstPackageDir.getParentFile(),false,files);
    }
  }
  if (files.size() > 0) {
    final JarOutputStream jos=new JarOutputStream(new FileOutputStream(jarFile));
    try {
      for (      Pair<File,String> pair : files) {
        packIntoJar(jos,pair.getFirst(),pair.getSecond());
      }
    }
  finally {
      jos.close();
    }
  }
 else   if (jarFile.isFile()) {
    if (!jarFile.delete()) {
      throw new IOException("Cannot delete file " + FileUtil.toSystemDependentName(jarFile.getPath()));
    }
  }
}
