{
  FileSystemLocation projectLocation=parseProjectLocation();
  if (projectLocation == FileSystemLocation.COMMUNITY) {
    return TestDataLookupStrategy.COMMUNITY;
  }
  TestDataLookupStrategy result=CLASS_STRATEGY_CACHE.get(clazz);
  if (result != null) {
    return result;
  }
  String targetFile=toSystemDependentName(clazz.getName().replace('.','/') + ".java");
  if (COMMUNITY_TEST_FILES_PARSED_FLAG.compareAndSet(false,true)) {
    parseCommunityTestFiles();
  }
  FileSystemLocation classFileLocation=COMMUNITY_TEST_FILES.contains(targetFile) ? FileSystemLocation.COMMUNITY : FileSystemLocation.ULTIMATE;
  result=classFileLocation == FileSystemLocation.COMMUNITY ? TestDataLookupStrategy.COMMUNITY_FROM_ULTIMATE : TestDataLookupStrategy.ULTIMATE;
  CLASS_STRATEGY_CACHE.put(clazz,result);
  return result;
}
