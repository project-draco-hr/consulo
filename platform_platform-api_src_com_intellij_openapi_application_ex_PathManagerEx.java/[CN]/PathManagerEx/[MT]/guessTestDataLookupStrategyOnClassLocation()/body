{
  Class<?> testClass=null;
  StackTraceElement[] stackTrace=new Exception().getStackTrace();
  for (int i=0; i < stackTrace.length; i++) {
    Class<?> clazz=loadClass(stackTrace[i].getClassName());
    if (TestCase.class != clazz && isJUnitClass(clazz)) {
      testClass=refineClassIfPossible(clazz,i);
    }
  }
  return testClass == null ? null : determineLookupStrategy(testClass);
}
