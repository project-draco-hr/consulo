{
  DocumentAdapter documentListener=new DocumentAdapter(){
    public void documentChanged(    DocumentEvent event){
      VirtualFile file=FileDocumentManager.getInstance().getFile(event.getDocument());
      if (file != null) {
        refreshFileStatusFromDocument(file,event.getDocument());
      }
    }
  }
;
  final EditorFactory factory=EditorFactory.getInstance();
  if (factory != null) {
    factory.getEventMulticaster().addDocumentListener(documentListener,myProject);
  }
}
