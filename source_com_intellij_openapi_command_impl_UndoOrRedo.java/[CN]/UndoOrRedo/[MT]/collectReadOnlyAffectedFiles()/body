{
  Collection<DocumentReference> affectedDocument=myUndoableGroup.getAffectedDocuments();
  Collection<VirtualFile> readOnlyFiles=new ArrayList<VirtualFile>();
  for (Iterator each=affectedDocument.iterator(); each.hasNext(); ) {
    DocumentReference documentReference=(DocumentReference)each.next();
    VirtualFile file=documentReference.getFile();
    if ((file != null) && file.isValid() && !file.isWritable()) {
      readOnlyFiles.add(file);
    }
  }
  return readOnlyFiles;
}
