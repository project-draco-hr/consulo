{
  if (statement instanceof GrVariable) {
    GrVariable variable=(GrVariable)statement;
    String name=variable.getName();
    if (name != null) {
      map.put(name,variable.getTypeGroovy());
    }
  }
  if (statement instanceof GrReferenceExpression) {
    GrReferenceExpression expr=(GrReferenceExpression)statement;
    String name=expr.getName();
    PsiReference ref=expr.getReference();
    if (name != null && (ref == null || !(ref.resolve() instanceof GrField))) {
      map.put(name,expr.getType());
    }
  }
  for (  PsiElement element : statement.getChildren()) {
    addContainingVariableTypes(element,map);
  }
}
