{
  for (  PsiElement element : statement.getChildren()) {
    if (element instanceof GrVariable) {
      GrVariable variable=(GrVariable)element;
      String name=variable.getName();
      if (name != null) {
        map.put(name,variable.getTypeGroovy());
      }
    }
    if (element instanceof GrReferenceExpression) {
      GrReferenceExpression expr=(GrReferenceExpression)element;
      String name=expr.getName();
      PsiReference ref=expr.getReference();
      if (name != null && (ref == null || !(ref.resolve() instanceof GrField))) {
        map.put(name,expr.getType());
      }
    }
    addContainingVariableTypes(element,map);
  }
}
