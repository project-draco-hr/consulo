{
  if (element instanceof GrReferenceExpression) {
    GrReferenceExpression expr=(GrReferenceExpression)element;
    if (name.equals(expr.getName())) {
      PsiReference ref=expr.getReference();
      if (ref != null) {
        PsiElement resolved=ref.resolve();
        if ((resolved instanceof GrVariable || resolved instanceof GrReferenceExpression) && !(resolved instanceof GrField)) {
          return ((GroovyPsiElement)resolved);
        }
      }
      return null;
    }
 else {
      return null;
    }
  }
  for (  PsiElement child : element.getChildren()) {
    GroovyPsiElement res=getInnerVariableDeclaration(child,name);
    if (res != null)     return res;
  }
  return null;
}
