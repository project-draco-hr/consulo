{
  final CharSequence buffer=lexer.getBufferSequence();
  final char firstCh=buffer.charAt(lexer.getTokenStart());
  if (seenScript && !seenTag) {
    seenContentType=false;
    if (((firstCh == 'l' || firstCh == 't') || (caseInsensitive && (firstCh == 'L' || firstCh == 'T')))) {
      @NonNls String name=TreeUtil.getTokenText(lexer);
      if (caseInsensitive)       name=name.toLowerCase();
      if ("language".equals(name) || "type".equals(name)) {
        seenContentType=true;
      }
    }
    return;
  }
  if (firstCh != 'o' && firstCh != 's' && (!caseInsensitive || (firstCh != 'S' && firstCh != 'O'))) {
    return;
  }
  String name=TreeUtil.getTokenText(lexer);
  if (caseInsensitive)   name=name.toLowerCase();
  boolean style=name.equals(TOKEN_STYLE);
  boolean script=name.equals(TOKEN_SCRIPT) || (name.startsWith(TOKEN_ON) && name.indexOf(':') == -1);
  if (style || script) {
    if (seenTag) {
      seenTag=false;
      return;
    }
    seenStyle=style;
    seenScript=script;
    int state=getState() & BASE_STATE_MASK;
    if (!isHtmlTagState(state)) {
      seenAttribute=true;
    }
  }
}
