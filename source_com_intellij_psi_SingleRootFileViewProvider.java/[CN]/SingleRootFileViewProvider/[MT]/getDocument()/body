{
  Document document=myDocument != null ? myDocument.get() : null;
  if (document == null) {
    document=FileDocumentManager.getInstance().getDocument(getVirtualFile());
    myDocument=new WeakReference<Document>(document);
  }
  if (document != null && getContent() instanceof VirtualFileContent) {
    setContent(new DocumentContent(document));
  }
  return document;
}
