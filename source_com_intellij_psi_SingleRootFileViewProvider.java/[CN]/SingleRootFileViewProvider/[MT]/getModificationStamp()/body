{
  final Document document=getDocument();
  if (document != null) {
    if (!PsiDocumentManager.getInstance(getManager().getProject()).isUncommited(document)) {
      myModificationStamp=document.getModificationStamp();
    }
  }
 else {
    myModificationStamp=getVirtualFile().getModificationStamp();
  }
  return myModificationStamp;
}
