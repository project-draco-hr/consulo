{
  if (myModificationStamp != getModificationStamp()) {
    contentsChanged();
  }
  if (myContents == null) {
    final Document document=getDocument();
    final PsiFileImpl cachedPsi=(PsiFileImpl)getCachedPsi(getBaseLanguage());
    if (cachedPsi != null && cachedPsi.isContentsLoaded() && PsiDocumentManager.getInstance(myManager.getProject()).isUncommited(document)) {
      myContents=new CharArrayCharSequence(cachedPsi.textToCharArray());
    }
 else     if (document != null) {
      return document.getCharsSequence();
    }
 else {
      throw new RuntimeException("Character contents can't be occured for binary files!");
    }
  }
  return myContents;
}
