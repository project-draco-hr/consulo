{
  g.setColor(GroupedElementsRenderer.POPUP_SEPARATOR_FOREGROUND);
  if (hasCaption()) {
    final FontMetrics fm=getFontMetrics(getFont());
    final int baseline=getVgap() + fm.getAscent();
    final int fontWidth=getPreferredFontSize().width;
    final int lineY=getVgap() + fm.getHeight() / 2;
    final int lineX;
    if (myCaptionCentered) {
      lineX=(getWidth() - fontWidth) / 2;
      g.drawLine(0,lineY,lineX,lineY);
    }
 else {
      lineX=0;
    }
    g.drawLine(lineX + fontWidth,lineY,getWidth() - 1,lineY);
    UIUtil.applyRenderingHints(g);
    g.setColor(GroupedElementsRenderer.POPUP_SEPARATOR_TEXT_FOREGROUND);
    g.drawString(myCaption,lineX + getHgap(),baseline);
  }
 else {
    g.drawLine(0,getVgap(),getWidth() - 1,getVgap());
  }
}
