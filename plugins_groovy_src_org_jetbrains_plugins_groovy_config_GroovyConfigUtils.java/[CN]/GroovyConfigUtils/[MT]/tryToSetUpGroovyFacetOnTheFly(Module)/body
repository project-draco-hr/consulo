{
  final Project project=module.getProject();
  final Library[] libraries=getAllSDKLibraries(project);
  if (libraries.length > 0) {
    final Library library=libraries[0];
    int result=Messages.showOkCancelDialog(GroovyBundle.message("groovy.like.library.found.text",module.getName(),library.getName(),getSDKLibVersion(library)),GroovyBundle.message("groovy.like.library.found"),JetgroovyIcons.Groovy.Groovy_32x32);
    if (result == 0) {
      AccessToken accessToken=WriteAction.start();
      try {
        ModifiableRootModel model=ModuleRootManager.getInstance(module).getModifiableModel();
        LibraryOrderEntry entry=model.addLibraryEntry(libraries[0]);
        LibrariesUtil.placeEntryToCorrectPlace(model,entry);
        model.commit();
        return true;
      }
  finally {
        accessToken.finish();
      }
    }
  }
  return false;
}
