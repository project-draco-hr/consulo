{
  ModuleRootManager manager=ModuleRootManager.getInstance(module);
  ModifiableRootModel model=manager.getModifiableModel();
  OrderEntry[] entries=model.getOrderEntries();
  for (  OrderEntry entry : entries) {
    if (entry instanceof LibraryOrderEntry) {
      LibraryOrderEntry libEntry=(LibraryOrderEntry)entry;
      Library library=libEntry.getLibrary();
      if (isGroovySdkLibrary(library)) {
        model.removeOrderEntry(entry);
      }
    }
  }
  if (sdk == null || sdk.getGroovyLibrary() == null) {
    model.commit();
    return;
  }
  saveGroovyDefaultLibName(sdk.getName());
  Library newLib=sdk.getGroovyLibrary();
  LibraryOrderEntry addedEntry=model.addLibraryEntry(newLib);
  placeEntryToCorrectPlace(model,addedEntry);
  model.commit();
}
