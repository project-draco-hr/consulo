{
  final byte[] applyContent;
switch (result) {
case CANCEL:
    applyContent=myOriginalContent;
  break;
case LEFT:
applyContent=ThreeSide.LEFT.select(myByteContents);
break;
case RIGHT:
applyContent=ThreeSide.RIGHT.select(myByteContents);
break;
case RESOLVED:
applyContent=null;
break;
default :
throw new IllegalArgumentException(result.toString());
}
if (applyContent != null) {
new WriteCommandAction.Simple(null){
@Override protected void run() throws Throwable {
try {
VirtualFile file=myFile.getFile();
if (!DiffUtil.makeWritable(myProject,file)) throw new IOException("File is read-only: " + file.getPresentableName());
file.setBinaryContent(applyContent);
}
 catch (IOException e) {
LOG.error(e);
Messages.showErrorDialog(myProject,"Can't apply result",CommonBundle.getErrorTitle());
}
}
}
.execute();
}
if (myApplyCallback != null) myApplyCallback.consume(result);
}
