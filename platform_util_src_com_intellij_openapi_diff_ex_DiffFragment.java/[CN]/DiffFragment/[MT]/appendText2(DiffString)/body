{
  if (str == null)   return;
  if (myText2 instanceof DiffStringBuilder) {
    ((DiffStringBuilder)myText2).append(str);
    return;
  }
  if (myText2 instanceof DiffString) {
    DiffString text2=(DiffString)myText2;
    if (DiffString.canInplaceConcatenate(text2,str)) {
      myText2=DiffString.concatenate(text2,str);
    }
 else {
      DiffStringBuilder builder=new DiffStringBuilder(text2.length() + str.length());
      builder.append(text2);
      builder.append(str);
      myText2=builder;
    }
    return;
  }
  throw new IllegalStateException("Bad DiffFragment: " + (myText2 != null ? myText2.getClass() : "null"));
}
