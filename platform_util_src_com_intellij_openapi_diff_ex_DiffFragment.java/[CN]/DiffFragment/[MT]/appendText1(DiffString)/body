{
  if (str == null)   return;
  if (myText1 instanceof DiffStringBuilder) {
    ((DiffStringBuilder)myText1).append(str);
    return;
  }
  if (myText1 instanceof DiffString) {
    DiffString text1=(DiffString)myText1;
    if (DiffString.canInplaceConcatenate(text1,str)) {
      myText1=DiffString.concatenate(text1,str);
    }
 else {
      DiffStringBuilder builder=new DiffStringBuilder(text1.length() + str.length());
      builder.append(text1);
      builder.append(str);
      myText1=builder;
    }
    return;
  }
  throw new IllegalStateException("Bad DiffFragment: " + (myText1 != null ? myText1.getClass() : "null"));
}
