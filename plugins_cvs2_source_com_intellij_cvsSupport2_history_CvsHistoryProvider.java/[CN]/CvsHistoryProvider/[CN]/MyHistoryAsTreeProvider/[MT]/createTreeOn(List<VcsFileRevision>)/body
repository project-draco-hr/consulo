{
  List<VcsFileRevision> sortedRevisions=sortRevisions(allRevisions);
  List<TreeItem<VcsFileRevision>> result=new ArrayList<TreeItem<VcsFileRevision>>();
  TreeItem<VcsFileRevision> prevRevision=null;
  for (Iterator each=sortedRevisions.iterator(); each.hasNext(); ) {
    CvsFileRevisionImpl cvsFileRevision=(CvsFileRevisionImpl)each.next();
    TreeItem<VcsFileRevision> treeItem=new TreeItem<VcsFileRevision>(cvsFileRevision);
    TreeItem<VcsFileRevision> commonParent=getCommonParent(prevRevision,treeItem);
    if (commonParent != null) {
      commonParent.addChild(treeItem);
    }
 else {
      result.add(treeItem);
    }
    prevRevision=treeItem;
  }
  return result;
}
