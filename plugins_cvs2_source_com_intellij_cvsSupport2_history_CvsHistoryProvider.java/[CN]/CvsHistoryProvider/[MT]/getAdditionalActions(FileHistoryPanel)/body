{
  return new AnAction[]{new AnAction(CvsBundle.message("annotate.action.name"),CvsBundle.message("annotate.action.description"),IconLoader.getIcon("/actions/annotate.png")){
    public void update(    AnActionEvent e){
      VirtualFile revisionVirtualFile=e.getData(VcsDataKeys.VCS_VIRTUAL_FILE);
      CvsFileRevision revision=(CvsFileRevision)e.getData(VcsDataKeys.VCS_FILE_REVISION);
      FileType fileType=revisionVirtualFile == null ? null : revisionVirtualFile.getFileType();
      e.getPresentation().setEnabled(revision != null && revisionVirtualFile != null && !fileType.isBinary());
    }
    public void actionPerformed(    AnActionEvent e){
      CvsFileRevision revision=(CvsFileRevision)e.getData(VcsDataKeys.VCS_FILE_REVISION);
      VirtualFile revisionVirtualFile=e.getData(VcsDataKeys.VCS_VIRTUAL_FILE);
      try {
        final FileAnnotation annotation=CvsVcs2.getInstance(myProject).getAnnotationProvider().annotate(revisionVirtualFile,revision);
        AbstractVcsHelper.getInstance(myProject).showAnnotation(annotation,revisionVirtualFile);
      }
 catch (      VcsException e1) {
        AbstractVcsHelper.getInstance(myProject).showError(e1,CvsBundle.message("operation.name.annotate"));
      }
    }
  }
};
}
