{
  HashSet<VirtualFile> result=ContainerUtil.newHashSet();
  for (  VirtualFile item : items) {
    VirtualFile parent=item.getParent();
    while (parent != null && condition.value(getStatus(parent))) {
      result.add(parent);
      parent=parent.getParent();
    }
  }
  return result;
}
