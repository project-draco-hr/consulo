{
  if (lists.isEmpty()) {
    return false;
  }
  final String question;
  if (lists.size() == 1) {
    question=String.format("<html>The empty changelist '%s' is no longer active.<br>Do you want to remove it?</html>",StringUtil.first(lists.iterator().next().getName(),30,true));
  }
 else {
    question=String.format("<html>Empty changelists<br/>%s are no longer active.<br>Do you want to remove them?</html>",StringUtil.join(lists,new Function<LocalChangeList,String>(){
      @Override public String fun(      LocalChangeList list){
        return StringUtil.first(list.getName(),30,true);
      }
    }
,"<br/>"));
  }
  VcsConfirmationDialog dialog=new VcsConfirmationDialog(myProject,new VcsShowConfirmationOption(){
    @Override public Value getValue(){
      return config.REMOVE_EMPTY_INACTIVE_CHANGELISTS;
    }
    @Override public void setValue(    Value value){
      config.REMOVE_EMPTY_INACTIVE_CHANGELISTS=value;
    }
    @Override public boolean isPersistent(){
      return true;
    }
  }
,question,"&Remember my choice");
  return dialog.showAndGet();
}
