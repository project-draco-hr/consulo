{
  final int id=variable.getID();
  int size=myEqClasses.size();
  int interruptCount=0;
  for (int varClassIndex=0; varClassIndex < size; varClassIndex++) {
    final SortedIntSet varClass=myEqClasses.get(varClassIndex);
    if (varClass == null)     continue;
    for (int i=0; i < varClass.size(); i++) {
      if ((++interruptCount & 0xf) == 0) {
        ProgressManager.checkCanceled();
      }
      int cl=varClass.get(i);
      DfaValue value=myFactory.getValue(cl);
      if (value != null && id == value.getID() || value instanceof DfaBoxedValue && ((DfaBoxedValue)value).getWrappedValue().getID() == id || value instanceof DfaUnboxedValue && ((DfaUnboxedValue)value).getVariable().getID() == id) {
        varClass.remove(i);
        break;
      }
    }
    if (varClass.isEmpty()) {
      myEqClasses.set(varClassIndex,null);
      myStateSize--;
      long[] pairs=myDistinctClasses.toArray();
      for (      long pair : pairs) {
        if (low(pair) == varClassIndex || high(pair) == varClassIndex) {
          myDistinctClasses.remove(pair);
        }
      }
    }
  }
  myVariableStates.remove(variable);
}
