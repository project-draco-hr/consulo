{
  boolean isNegated=dfaRelation.isNonEquality();
  if (!isNegated && !dfaRelation.isEquality()) {
    return true;
  }
  boolean result=applyRelation(dfaLeft,dfaRight,isNegated);
  if (dfaRight instanceof DfaConstValue) {
    Object constVal=((DfaConstValue)dfaRight).getValue();
    if (constVal instanceof Boolean) {
      boolean neg=!((Boolean)constVal).booleanValue();
      DfaConstValue negVal=myFactory.getConstFactory().createFromValue(Boolean.valueOf(neg),PsiType.BOOLEAN);
      result&=applyRelation(dfaLeft,negVal,!isNegated);
    }
  }
  if (dfaLeft instanceof DfaVariableValue) {
    PsiType type=((DfaVariableValue)dfaLeft).getVariableType();
    if (TypeConversionUtil.isPrimitiveWrapper(type) && (!isNegated || dfaRight instanceof DfaConstValue || dfaRight instanceof DfaBoxedValue && ((DfaBoxedValue)dfaRight).getWrappedValue() instanceof DfaConstValue)) {
      dfaLeft=myFactory.getBoxedFactory().createUnboxed(dfaLeft);
      dfaRight=myFactory.getBoxedFactory().createUnboxed(dfaRight);
      result&=applyRelation(dfaLeft,dfaRight,isNegated);
    }
 else     if (TypeConversionUtil.isPrimitiveAndNotNull(type)) {
      dfaLeft=myFactory.getBoxedFactory().createBoxed(dfaLeft);
      dfaRight=myFactory.getBoxedFactory().createBoxed(dfaRight);
      if (dfaLeft != null && dfaRight != null) {
        result&=applyRelation(dfaLeft,dfaRight,isNegated);
      }
    }
  }
  return result;
}
