{
  PsiClass parent=getPsiClass();
  final ArrayList<AbstractTreeNode> treeNodes=new ArrayList<AbstractTreeNode>();
  ArrayList<PsiElement> result=new ArrayList<PsiElement>();
  if (getSettings().isShowMembers()) {
    PsiClassChildrenSource.DEFAULT_CHILDREN.addChildren(parent,result);
    for (Iterator<PsiElement> iterator=result.iterator(); iterator.hasNext(); ) {
      PsiElement psiElement=iterator.next();
      psiElement.accept(new PsiElementVisitor(){
        public void visitClass(        PsiClass aClass){
          treeNodes.add(new ClassSmartPointerNode(getProject(),aClass,getSettings()));
        }
        public void visitMethod(        PsiMethod method){
          treeNodes.add(new MethodSmartPointerNode(getProject(),method,getSettings()));
        }
        public void visitField(        PsiField field){
          treeNodes.add(new FieldSmartPointerNode(getProject(),field,getSettings()));
        }
        public void visitReferenceExpression(        PsiReferenceExpression expression){
          visitExpression(expression);
        }
      }
);
    }
  }
  return treeNodes;
}
