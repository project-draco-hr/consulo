def expandpats(pats):
    if (not util.expandglobs):
        return list(pats)
    ret = []
    for p in pats:
        (kind, name) = _match._patsplit(p, None)
        if (kind is None):
            try:
                globbed = glob.glob(name)
            except re.error:
                globbed = [name]
            if globbed:
                ret.extend(globbed)
                continue
        ret.append(p)
    return ret
