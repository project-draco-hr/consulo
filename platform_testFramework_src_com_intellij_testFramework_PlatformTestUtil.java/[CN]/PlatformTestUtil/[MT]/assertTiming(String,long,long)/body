{
  if (COVERAGE_ENABLED_BUILD)   return;
  final long expectedOnMyMachine=Math.max(1,expectedMs * Timings.MACHINE_TIMING / Timings.ETALON_TIMING);
  String logMessage=message;
  if (actual > expectedOnMyMachine) {
    int percentage=(int)(100.0 * (actual - expectedOnMyMachine) / expectedOnMyMachine);
    logMessage+=". Operation took " + percentage + "% longer than expected";
  }
  logMessage+=". Expected on my machine: " + expectedOnMyMachine + "."+ " Actual: "+ actual+ "."+ " Expected on Standard machine: "+ expectedMs+ ";"+ " Actual on Standard: "+ actual * Timings.ETALON_TIMING / Timings.MACHINE_TIMING + ";" + " Timings: CPU=" + Timings.CPU_TIMING + ", I/O=" + Timings.IO_TIMING + "." + " (" + (int)(Timings.MACHINE_TIMING * 1.0 / Timings.ETALON_TIMING * 100) + "% of the Standard)" + ".";
  final double acceptableChangeFactor=1.1;
  if (actual < expectedOnMyMachine) {
    System.out.println(logMessage);
    TeamCityLogger.info(logMessage);
  }
 else   if (actual < expectedOnMyMachine * acceptableChangeFactor) {
    TeamCityLogger.warning(logMessage,null);
  }
 else {
    throw new AssertionFailedError(logMessage);
  }
}
