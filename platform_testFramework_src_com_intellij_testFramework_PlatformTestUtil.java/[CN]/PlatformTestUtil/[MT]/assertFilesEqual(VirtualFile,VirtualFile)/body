{
  try {
    assertJarFilesEqual(VfsUtil.virtualToIoFile(fileAfter),VfsUtil.virtualToIoFile(fileBefore));
  }
 catch (  IOException e) {
    FileDocumentManager manager=FileDocumentManager.getInstance();
    Document docBefore=manager.getDocument(fileBefore);
    Document docAfter=manager.getDocument(fileAfter);
    if (docBefore != null && docAfter != null) {
      Assert.assertEquals(fileAfter.getPath(),docAfter.getText(),docBefore.getText());
    }
 else {
      Assert.assertArrayEquals(fileAfter.getPath(),fileAfter.contentsToByteArray(),fileBefore.contentsToByteArray());
    }
  }
}
