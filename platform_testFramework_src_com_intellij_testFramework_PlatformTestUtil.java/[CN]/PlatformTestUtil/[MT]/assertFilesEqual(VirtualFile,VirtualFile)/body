{
  try {
    assertJarFilesEqual(VfsUtil.virtualToIoFile(fileAfter),VfsUtil.virtualToIoFile(fileBefore));
  }
 catch (  IOException e) {
    FileDocumentManager manager=FileDocumentManager.getInstance();
    Document docBefore=manager.getDocument(fileBefore);
    boolean canLoadBeforeText=!fileBefore.getFileType().isBinary() || fileBefore.getFileType() == FileTypes.UNKNOWN;
    String textB=docBefore == null ? !canLoadBeforeText ? null : LoadTextUtil.getTextByBinaryPresentation(fileBefore.contentsToByteArray(false),fileBefore).toString() : docBefore.getText();
    Document docAfter=manager.getDocument(fileAfter);
    boolean canLoadAfterText=!fileBefore.getFileType().isBinary() || fileBefore.getFileType() == FileTypes.UNKNOWN;
    String textA=docAfter == null ? !canLoadAfterText ? null : LoadTextUtil.getTextByBinaryPresentation(fileAfter.contentsToByteArray(false),fileAfter).toString() : docAfter.getText();
    if (textA != null && textB != null) {
      Assert.assertEquals(fileAfter.getPath(),textA,textB);
    }
 else {
      Assert.assertArrayEquals(fileAfter.getPath(),fileAfter.contentsToByteArray(),fileBefore.contentsToByteArray());
    }
  }
}
