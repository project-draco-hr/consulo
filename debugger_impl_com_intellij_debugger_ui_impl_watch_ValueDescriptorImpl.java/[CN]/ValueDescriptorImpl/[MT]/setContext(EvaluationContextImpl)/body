{
  DebuggerManagerThreadImpl.assertIsManagerThread();
  if (Patches.IBM_JDK_DISABLE_COLLECTION_BUG) {
    myStoredEvaluationContext=evaluationContext;
  }
  Value value;
  try {
    value=calcValue(evaluationContext);
    if (!myIsNew) {
      if (myValue instanceof ObjectReference && VirtualMachineProxyImpl.isCollected((ObjectReference)myValue)) {
        myIsDirty=true;
      }
 else       if (myValue instanceof DoubleValue && Double.isNaN(((DoubleValue)myValue).doubleValue())) {
        myIsDirty=!(value instanceof DoubleValue);
      }
 else       if (myValue instanceof FloatValue && Float.isNaN(((FloatValue)myValue).floatValue())) {
        myIsDirty=!(value instanceof FloatValue);
      }
 else {
        myIsDirty=(value == null) ? myValue != null : !value.equals(myValue);
      }
    }
    myValue=(value instanceof ObjectReference) ? (ObjectReference)value : value;
    myValueException=null;
  }
 catch (  EvaluateException e) {
    myValueException=e;
    myValue=null;
    myIsExpandable=false;
  }
  myIsNew=false;
}
