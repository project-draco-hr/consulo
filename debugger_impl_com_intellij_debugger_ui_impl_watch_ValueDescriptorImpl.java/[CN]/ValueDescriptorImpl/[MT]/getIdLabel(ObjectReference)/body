{
  StringBuilder buf=StringBuilderSpinAllocator.alloc();
  try {
    final Type type=objRef.type();
    buf.append('{');
    if (type instanceof ClassType && ((ClassType)type).isEnum()) {
      final String name=getEnumConstantName(objRef,(ClassType)type);
      if (name != null) {
        buf.append("enum:").append(name);
      }
 else {
        buf.append(type.name());
      }
    }
 else {
      buf.append(type.name());
    }
    buf.append('@');
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      buf.append("uniqueID");
    }
 else {
      buf.append(objRef.uniqueID());
    }
    buf.append('}');
    if (objRef instanceof ArrayReference) {
      int idx=buf.indexOf("[");
      if (idx >= 0) {
        buf.insert(idx + 1,Integer.toString(((ArrayReference)objRef).length()));
      }
    }
    return buf.toString();
  }
  finally {
    StringBuilderSpinAllocator.dispose(buf);
  }
}
