{
  Collection<FilePath> filePaths=getFilePaths(context);
  final List<ChangeList> selectedChangeLists=new ArrayList<>();
  final ChangeList[] selectionFromContext=context.getSelectedChangeLists();
  if (selectionFromContext != null) {
    Collections.addAll(selectedChangeLists,selectionFromContext);
  }
  final List<CommittedChangeList> incomingChanges=CommittedChangesCache.getInstance(context.getProject()).getCachedIncomingChanges();
  final List<CommittedChangeList> intersectingChanges=new ArrayList<>();
  if (incomingChanges != null) {
    for (    CommittedChangeList changeList : incomingChanges) {
      if (!selectedChangeLists.contains(changeList)) {
        for (        Change change : changeList.getChanges()) {
          if (filePaths.contains(ChangesUtil.getFilePath(change))) {
            intersectingChanges.add(changeList);
            break;
          }
        }
      }
    }
  }
  if (intersectingChanges.size() > 0) {
    int rc=Messages.showOkCancelDialog(context.getProject(),VcsBundle.message("get.committed.changes.intersecting.prompt",intersectingChanges.size(),selectedChangeLists.size()),VcsBundle.message("get.committed.changes.title"),Messages.getQuestionIcon());
    if (rc != Messages.OK)     return;
  }
  super.actionPerformed(context);
}
