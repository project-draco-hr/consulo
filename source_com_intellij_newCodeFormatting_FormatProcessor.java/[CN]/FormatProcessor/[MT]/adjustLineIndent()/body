{
  int alignOffset=getAlignOffset();
  if (alignOffset == -1) {
    final WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
    final IndentData offset=myCurrentBlock.calculateOffset(myIndentOption);
    whiteSpace.setSpaces(offset.getSpaces(),offset.getIndentSpaces());
  }
 else {
    final WhiteSpace whiteSpace=myCurrentBlock.getWhiteSpace();
    AbstractBlockWrapper previousIndentedBlock=getPreviousIndentedBlock();
    if (previousIndentedBlock == null) {
      whiteSpace.setSpaces(alignOffset,0);
    }
 else {
      int indentOffset=previousIndentedBlock.getWhiteSpace().getIndentOffset();
      if (indentOffset > alignOffset) {
        whiteSpace.setSpaces(alignOffset,0);
      }
 else {
        whiteSpace.setSpaces(alignOffset - indentOffset,indentOffset);
      }
    }
  }
}
