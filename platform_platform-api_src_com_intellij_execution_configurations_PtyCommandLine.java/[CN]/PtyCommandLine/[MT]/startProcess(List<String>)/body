{
  if (SystemInfo.isUnix) {
    try {
      Map<String,String> env=Maps.newHashMap();
      setupEnvironment(env);
      if (isRedirectErrorStream()) {
        LOG.error("Launching process with PTY and redirected error stream is unsupported yet");
      }
      File workDirectory=getWorkDirectory();
      return PtyProcess.exec(ArrayUtil.toStringArray(commands),env,workDirectory != null ? workDirectory.getPath() : null,true);
    }
 catch (    Throwable e) {
      LOG.error("Couldn't run process with PTY",e);
    }
  }
  return super.startProcess(commands);
}
