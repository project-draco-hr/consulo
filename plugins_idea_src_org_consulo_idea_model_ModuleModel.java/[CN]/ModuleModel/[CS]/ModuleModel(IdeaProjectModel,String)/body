{
  final Document document=ideaProjectModel.loadDocument(new File(filepath));
  final Element rootElement=document.getRootElement();
  String moduleType=rootElement.getAttributeValue("type");
  XPath xpathExpression=XPath.newInstance("/module[@version='4']/component[@name='NewModuleRootManager']/*");
  final List list=xpathExpression.selectNodes(document);
  for (  Object o : list) {
    Element element=(Element)o;
    final String name=element.getName();
    if ("content".equals(name)) {
      final String url=element.getAttributeValue("url");
      final ContentEntryModel contentEntryModel=new ContentEntryModel(url);
      myContentEntries.add(contentEntryModel);
      for (      Element childOfContent : element.getChildren()) {
        final String nameChildOfContent=childOfContent.getName();
        if ("sourceFolder".equals(nameChildOfContent)) {
          String url2=childOfContent.getAttributeValue("url");
          boolean isTestSource=Boolean.valueOf(childOfContent.getAttributeValue("isTestSource"));
          contentEntryModel.addFolder(url2,isTestSource ? ContentFolderType.TEST : ContentFolderType.SOURCE);
        }
      }
    }
 else     if ("orderEntry".equals(name)) {
      String type=element.getAttributeValue("type");
      if ("module".equals(type)) {
        String moduleName=element.getAttributeValue("module-name");
        myOrderEntries.add(new ModuleOrderEntryModel(moduleName));
      }
 else       if ("sourceFolder".equals(type)) {
        myOrderEntries.add(new ModuleSourceOrderEntryModel());
      }
 else       if ("inheritedJdk".equals(type)) {
        myOrderEntries.add(new InheritedOrderEntryModel());
      }
 else       if ("module-library".equals(type)) {
        final Element libraryElement=element.getChild("library");
        LibraryModel libraryModel=new LibraryModel();
        libraryModel.load(libraryElement);
        myOrderEntries.add(new ModuleLibraryOrderEntryModel(libraryModel));
      }
 else       if ("jdk".equals(type)) {
        myOrderEntries.add(new JdkSourceOrderEntryModel(element.getAttributeValue("jdkName")));
      }
 else       if ("library".equals(type)) {
        final String level=element.getAttributeValue("level");
        if ("project".equals(level)) {
          myOrderEntries.add(new ProjectLibraryOrderEntryModel(name));
        }
      }
    }
  }
}
