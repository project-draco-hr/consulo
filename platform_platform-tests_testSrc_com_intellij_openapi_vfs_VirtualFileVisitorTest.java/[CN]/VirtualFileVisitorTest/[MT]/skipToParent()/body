{
  final Ref<VirtualFile> skip=Ref.create();
  doTest(new Function<VirtualFile,Object>(){
    @Override public Object fun(    VirtualFile file){
      if ("d1".equals(file.getName()))       skip.set(file);
      return "f11.1".equals(file.getName()) ? skip.get() : VirtualFileVisitor.CONTINUE;
    }
  }
,null,"-> / [0]\n" + "  -> d1 [1]\n" + "    -> d11 [2]\n"+ "      -> f11.1 [3]\n"+ "        -> d2 [1]\n"+ "          -> f2.1 [2]\n"+ "          <- f2.1 [3]\n"+ "          -> f2.2 [2]\n"+ "          <- f2.2 [3]\n"+ "        <- d2 [2]\n"+ "      <- / [1]\n");
}
