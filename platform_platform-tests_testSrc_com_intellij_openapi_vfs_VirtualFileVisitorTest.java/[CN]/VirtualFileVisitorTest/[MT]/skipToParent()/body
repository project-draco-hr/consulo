{
  final Ref<VirtualFile> skip=Ref.create();
  doTest(new Function<VirtualFile,Object>(){
    @Override public Object fun(    VirtualFile file){
      if ("d1".equals(file.getName()))       skip.set(file);
      return "f11.1".equals(file.getName()) ? skip.get() : VirtualFileVisitor.CONTINUE;
    }
  }
,null,"-> /\n" + "  -> d1\n" + "    -> d11\n"+ "      -> f11.1\n"+ "        -> d2\n"+ "          -> f2.1\n"+ "          <- f2.1\n"+ "          -> f2.2\n"+ "          <- f2.2\n"+ "        <- d2\n"+ "      <- /\n");
}
