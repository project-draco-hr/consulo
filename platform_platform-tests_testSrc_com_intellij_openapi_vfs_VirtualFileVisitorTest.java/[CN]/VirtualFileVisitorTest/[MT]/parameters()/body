{
  final Key<String> KEY=Key.create("vfs.visitor.test.parameter");
  VfsUtilCore.visitChildrenRecursively(myRoot,new VirtualFileVisitor(){
{
      set(KEY,myRoot.getPath());
    }
    @Override public boolean visitFile(    @NotNull VirtualFile file){
      String expected=Comparing.equal(file,myRoot) ? myRoot.getPath() : file.getParent().getPath();
      assertEquals(expected,get(KEY));
      if (file.isDirectory()) {
        set(KEY,file.getPath());
      }
      return true;
    }
  }
);
}
