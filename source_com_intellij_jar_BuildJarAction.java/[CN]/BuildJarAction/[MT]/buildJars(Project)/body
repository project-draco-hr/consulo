{
  ApplicationManager.getApplication().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      Module[] modules=ModuleManager.getInstance(project).getModules();
      try {
        for (        Module module : modules) {
          BuildJarSettings buildJarSettings=BuildJarSettings.getInstance(module);
          if (buildJarSettings == null || !buildJarSettings.isBuildJar())           continue;
          String presentableJarPath="'" + buildJarSettings.getJarPath() + "'";
          ProgressManager.getInstance().getProgressIndicator().setText("Building jar " + presentableJarPath + " ...");
          buildJar(module,buildJarSettings);
          WindowManager.getInstance().getStatusBar(project).setInfo("Jar has been built in " + presentableJarPath);
        }
      }
 catch (      ProcessCanceledException e) {
        WindowManager.getInstance().getStatusBar(project).setInfo("Jar creation has been canceled");
      }
catch (      IOException e) {
        Messages.showErrorDialog(project,e.toString(),"Error Creating Jar");
      }
    }
  }
,"Building Jar",true,project);
}
