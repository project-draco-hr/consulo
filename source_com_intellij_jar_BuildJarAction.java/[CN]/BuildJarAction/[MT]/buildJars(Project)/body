{
  ApplicationManager.getApplication().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      Module[] modules=ModuleManager.getInstance(project).getModules();
      try {
        for (        Module module : modules) {
          BuildJarSettings buildJarSettings=BuildJarSettings.getInstance(module);
          if (buildJarSettings == null || !buildJarSettings.isBuildJar())           continue;
          String presentableJarPath="'" + buildJarSettings.getJarPath() + "'";
          ProgressManager.getInstance().getProgressIndicator().setText(IdeBundle.message("jar.build.progress",presentableJarPath));
          buildJar(module,buildJarSettings);
          WindowManager.getInstance().getStatusBar(project).setInfo(IdeBundle.message("jar.build.success.message",presentableJarPath));
        }
      }
 catch (      ProcessCanceledException e) {
        WindowManager.getInstance().getStatusBar(project).setInfo(IdeBundle.message("jar.build.cancelled"));
      }
catch (      IOException e) {
        Messages.showErrorDialog(project,e.toString(),IdeBundle.message("jar.build.error.title"));
      }
    }
  }
,IdeBundle.message("jar.build.progress.title"),true,project);
}
