{
  if (object instanceof PsiElement) {
    final Object rootElement=myModel.size() > 1 ? myModel.getElement(1) : null;
    if (rootElement instanceof Module) {
      final Module module=(Module)rootElement;
      myModel.removeAllElements();
      myModel.addElement(module.getProject());
      ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(module);
      myModel.addElement(module);
      myModel.traverseToRoot((PsiElement)object,new HashSet<VirtualFile>(Arrays.asList(moduleRootManager.getContentRoots())));
    }
 else {
      myModel.updateModel((PsiElement)object);
    }
  }
 else   if (object instanceof Module) {
    myModel.removeAllElements();
    myModel.addElement(((Module)object).getProject());
    myModel.addElement(object);
  }
  immediateUpdateList(true);
  select();
  if (myHint != null) {
    immediateUpdateList(false);
    final Dimension dimension=getPreferredSize();
    final Rectangle bounds=myHint.getBounds();
    myHint.setBounds(bounds.x,bounds.y,dimension.width,dimension.height);
    select();
  }
  validate();
  click();
}
