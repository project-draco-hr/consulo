{
  myList=new JBList();
  final int selectionMode=myAllowMultipleSelections ? ListSelectionModel.MULTIPLE_INTERVAL_SELECTION : ListSelectionModel.SINGLE_SELECTION;
  myList.setSelectionMode(selectionMode);
  rebuildListContent();
  new DoubleClickListener(){
    @Override protected boolean onDoubleClick(    MouseEvent e){
      close(OK_EXIT_CODE);
      return true;
    }
  }
.installOn(myList);
  myList.setCellRenderer(new MyListCellRenderer());
  if (myAllContents.size() > 0) {
    myList.setSelectedIndex(0);
  }
  myList.addKeyListener(new KeyAdapter(){
    @Override public void keyReleased(    KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_DELETE) {
        int newSelectionIndex=-1;
        for (        int i : getSelectedIndices()) {
          removeContentAt(myAllContents.get(i));
          if (newSelectionIndex < 0) {
            newSelectionIndex=i;
          }
        }
        rebuildListContent();
        if (myAllContents.size() <= 0) {
          close(CANCEL_EXIT_CODE);
          return;
        }
        newSelectionIndex=Math.min(newSelectionIndex,myAllContents.size() - 1);
        myList.setSelectedIndex(newSelectionIndex);
      }
 else       if (e.getKeyCode() == KeyEvent.VK_ENTER) {
        close(OK_EXIT_CODE);
      }
 else {
        final char aChar=e.getKeyChar();
        if (aChar >= '0' && aChar <= '9') {
          int idx=aChar == '0' ? 9 : aChar - '1';
          if (idx < myAllContents.size()) {
            myList.setSelectedIndex(idx);
          }
        }
      }
    }
  }
);
  mySplitter=new Splitter(true);
  mySplitter.setFirstComponent(ScrollPaneFactory.createScrollPane(myList));
  mySplitter.setSecondComponent(new JPanel());
  updateViewerForSelection();
  myList.addListSelectionListener(new ListSelectionListener(){
    @Override public void valueChanged(    ListSelectionEvent e){
      updateViewerForSelection();
    }
  }
);
  mySplitter.setPreferredSize(new Dimension(500,500));
  new ListSpeedSearch(myList);
  return mySplitter;
}
