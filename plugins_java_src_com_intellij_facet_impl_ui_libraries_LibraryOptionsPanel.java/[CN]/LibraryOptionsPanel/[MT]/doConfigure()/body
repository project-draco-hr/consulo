{
switch (myButtonEnumModel.getSelected()) {
case DOWNLOAD:
    final LibraryDownloadSettings oldDownloadSettings=mySettings.getDownloadSettings();
  LOG.assertTrue(oldDownloadSettings != null);
final LibraryDownloadSettings newDownloadSettings=DownloadingOptionsDialog.showDialog(myPanel,oldDownloadSettings,mySettings.getCompatibleVersions(),true);
if (newDownloadSettings != null) {
mySettings.setDownloadSettings(newDownloadSettings);
}
break;
case USE_LIBRARY:
final Object item=myExistingLibraryComboBox.getSelectedItem();
if (item instanceof LibraryEditor) {
EditLibraryDialog dialog=new EditLibraryDialog(myPanel,mySettings,(LibraryEditor)item);
dialog.show();
if (item instanceof ExistingLibraryEditor) {
new WriteAction(){
protected void run(final Result result){
((ExistingLibraryEditor)item).commit();
}
}
.execute();
}
}
break;
case SETUP_LIBRARY_LATER:
break;
}
updateState();
}
