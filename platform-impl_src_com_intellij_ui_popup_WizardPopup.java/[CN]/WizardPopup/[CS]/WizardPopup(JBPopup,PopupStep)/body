{
  myParent=(WizardPopup)aParent;
  myStep=aStep;
  if (myStep.isSpeedSearchEnabled() && myStep.isMnemonicsNavigationEnabled()) {
    throw new IllegalArgumentException("Cannot have both options enabled at the same time: speed search and mnemonics navigation");
  }
  mySpeedSearch.setEnabled(myStep.isSpeedSearchEnabled());
  final JComponent content=createContent();
  myScrollPane=new JScrollPane(content);
  myScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
  myScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
  myScrollPane.getHorizontalScrollBar().setBorder(null);
  myScrollPane.getActionMap().get("unitScrollLeft").setEnabled(false);
  myScrollPane.getActionMap().get("unitScrollRight").setEnabled(false);
  myScrollPane.setBorder(null);
  final Project project=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext());
  init(project,myScrollPane,getPreferredFocusableComponent(),true,true,true,null,false,aStep.getTitle(),null,true,null,false,null,null,false,null,true,false,true,null,0f,null,true,false,new Component[0],null,true);
  mySpeedSearchPatternField=new JTextField();
  if (SystemInfo.isMac) {
    Font f=mySpeedSearchPatternField.getFont();
    mySpeedSearchPatternField.setFont(f.deriveFont(f.getStyle(),f.getSize() - 2));
  }
  registerAction("disposeAll",KeyEvent.VK_ESCAPE,InputEvent.SHIFT_MASK,new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      if (mySpeedSearch.isHoldingFilter()) {
        mySpeedSearch.reset();
      }
 else {
        disposeAll();
      }
    }
  }
);
  AbstractAction goBackAction=new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      goBack();
    }
  }
;
  registerAction("goBack3",KeyEvent.VK_ESCAPE,0,goBackAction);
  myMnemonicsSearch=new MnemonicsSearch(this){
    protected void select(    Object value){
      onSelectByMnemonic(value);
    }
  }
;
}
