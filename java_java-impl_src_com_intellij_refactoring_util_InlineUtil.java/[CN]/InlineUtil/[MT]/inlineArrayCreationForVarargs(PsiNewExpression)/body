{
  PsiExpressionList argumentList=(PsiExpressionList)arrayCreation.getParent();
  if (argumentList == null)   return;
  PsiExpression[] args=argumentList.getExpressions();
  PsiArrayInitializerExpression arrayInitializer=arrayCreation.getArrayInitializer();
  try {
    if (arrayInitializer == null) {
      arrayCreation.delete();
      return;
    }
    PsiExpression[] initializers=arrayInitializer.getInitializers();
    if (initializers.length > 0) {
      PsiElement lastInitializerSibling=initializers[initializers.length - 1];
      while (lastInitializerSibling != null) {
        final PsiElement nextSibling=lastInitializerSibling.getNextSibling();
        if (nextSibling.getNode().getElementType() == JavaTokenType.RBRACE)         break;
        lastInitializerSibling=nextSibling;
      }
      if (lastInitializerSibling instanceof PsiWhiteSpace) {
        lastInitializerSibling=PsiTreeUtil.skipSiblingsBackward(lastInitializerSibling,PsiWhiteSpace.class);
      }
      if (lastInitializerSibling.getNode().getElementType() == JavaTokenType.COMMA) {
        lastInitializerSibling=lastInitializerSibling.getPrevSibling();
      }
      argumentList.addRange(initializers[0],lastInitializerSibling);
    }
    args[args.length - 1].delete();
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
