{
  scope.accept(new JavaRecursiveElementVisitor(){
    @Override public void visitTypeElement(    PsiTypeElement typeElement){
      PsiType type=typeElement.getType();
      if (type instanceof PsiClassType) {
        JavaResolveResult resolveResult=((PsiClassType)type).resolveGenerics();
        PsiElement resolved=resolveResult.getElement();
        if (resolved instanceof PsiTypeParameter) {
          PsiType newType=resolveResult.getSubstitutor().putAll(substitutor).substitute((PsiTypeParameter)resolved);
          try {
            typeElement.replace(factory.createTypeElement(newType));
            return;
          }
 catch (          IncorrectOperationException e) {
            LOG.error(e);
          }
        }
      }
      super.visitTypeElement(typeElement);
    }
  }
);
}
