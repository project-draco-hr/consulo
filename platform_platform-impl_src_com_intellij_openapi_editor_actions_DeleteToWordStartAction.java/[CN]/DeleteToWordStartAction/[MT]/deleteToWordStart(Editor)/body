{
  final CaretModel caretModel=editor.getCaretModel();
  int endOffset=caretModel.getOffset();
  Document document=editor.getDocument();
  final SelectionModel selectionModel=editor.getSelectionModel();
  int startOffset=-1;
  if (!selectionModel.hasSelection() && !selectionModel.hasBlockSelection()) {
    int i=CharArrayUtil.shiftBackward(document.getCharsSequence(),Math.max(0,endOffset - 1)," \t\n");
    if (i >= 0 && i < endOffset - 1) {
      startOffset=i + 1;
    }
  }
  if (startOffset < 0) {
    EditorActionUtil.moveCaretToPreviousWord(editor,false);
    startOffset=caretModel.getOffset();
  }
  document.deleteString(startOffset,endOffset);
}
