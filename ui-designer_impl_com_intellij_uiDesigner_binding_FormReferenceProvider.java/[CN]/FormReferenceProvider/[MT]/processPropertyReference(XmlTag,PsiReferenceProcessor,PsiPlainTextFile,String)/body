{
  final XmlAttribute valueAttribute=tag.getAttribute(UIFormXmlConstants.ATTRIBUTE_VALUE,Utils.FORM_NAMESPACE);
  if (valueAttribute != null) {
    FormEnumConstantReference reference=ApplicationManager.getApplication().runReadAction(new Computable<FormEnumConstantReference>(){
      @Nullable public FormEnumConstantReference compute(){
        PsiClass psiClass=file.getManager().findClass(className,file.getProject().getAllScope());
        if (psiClass != null) {
          PsiMethod getter=PropertyUtil.findPropertyGetter(psiClass,tag.getName(),false,true);
          if (getter != null) {
            final PsiType returnType=getter.getReturnType();
            if (returnType instanceof PsiClassType) {
              PsiClassType propClassType=(PsiClassType)returnType;
              PsiClass propClass=propClassType.resolve();
              if (propClass != null && propClass.isEnum()) {
                return new FormEnumConstantReference(file,getValueRange(valueAttribute),propClassType);
              }
            }
          }
        }
        return null;
      }
    }
);
    if (reference != null) {
      processor.execute(reference);
    }
  }
}
