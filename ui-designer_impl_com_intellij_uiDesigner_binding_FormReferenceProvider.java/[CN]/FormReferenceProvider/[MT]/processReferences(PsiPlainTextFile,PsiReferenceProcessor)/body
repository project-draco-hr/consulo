{
  final PsiManager manager=file.getManager();
  final PsiElementFactory elementFactory=manager.getElementFactory();
  final PsiFile _f=elementFactory.createFileFromText("a.xml",file.getText());
  final XmlFile xmlFile=(XmlFile)_f;
  final XmlDocument document=xmlFile.getDocument();
  final XmlTag rootTag=document.getRootTag();
  if (rootTag == null || !Utils.FORM_NAMESPACE.equals(rootTag.getNamespace())) {
    return;
  }
  @NonNls final String name=rootTag.getName();
  if (!"form".equals(name)) {
    return;
  }
  PsiReference classReference=null;
  final XmlAttribute classToBind=rootTag.getAttribute("bind-to-class",Utils.FORM_NAMESPACE);
  if (classToBind != null) {
    final String className=classToBind.getValue().replace('$','.');
    final XmlAttributeValue valueElement=classToBind.getValueElement();
    final PsiReference[] referencesByString=new JavaClassReferenceProvider().getReferencesByString(className,file,new ReferenceType(ReferenceType.JAVA_CLASS),valueElement.getTextRange().getStartOffset() + 1);
    if (referencesByString.length < 1) {
      return;
    }
    for (    PsiReference aReferencesByString : referencesByString) {
      processor.execute(aReferencesByString);
    }
    classReference=referencesByString[referencesByString.length - 1];
  }
  processReferences(rootTag,classReference,file,processor);
}
