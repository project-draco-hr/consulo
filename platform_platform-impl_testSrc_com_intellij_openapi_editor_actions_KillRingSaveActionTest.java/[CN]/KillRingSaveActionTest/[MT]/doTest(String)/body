{
  if (GraphicsEnvironment.isHeadless()) {
    return;
  }
  configureFromFileText(getTestName(false) + ".java",text);
  Pair<String,String> parseResult=parse();
  String textBefore=myEditor.getDocument().getText();
  killRingSave();
  if (parseResult.first == null) {
    return;
  }
  Transferable contents=CopyPasteManager.getInstance().getContents();
  if (!(contents instanceof KillRingTransferable)) {
    System.err.println("xxx: Unexpected transferable at " + getClass() + ": "+ contents);
  }
  assertEquals(textBefore,myEditor.getDocument().getText());
}
