{
  if (GraphicsEnvironment.isHeadless()) {
    return;
  }
  configureFromFileText(getTestName(false) + ".java",text);
  Pair<String,String> parseResult=parse();
  String textBefore=myEditor.getDocument().getText();
  killRingSave();
  if (parseResult.first == null) {
    return;
  }
  Transferable contents=CopyPasteManager.getInstance().getContents();
  assertTrue(contents instanceof KillRingTransferable);
  assertEquals(parseResult.first,contents.getTransferData(DataFlavor.stringFlavor));
  assertEquals(textBefore,myEditor.getDocument().getText());
}
