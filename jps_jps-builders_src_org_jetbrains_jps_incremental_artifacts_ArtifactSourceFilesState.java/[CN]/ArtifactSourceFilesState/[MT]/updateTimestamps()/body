{
  for (  String filePath : myDeletedFiles) {
    final ArtifactSourceTimestampStorage.PerArtifactTimestamp[] state=myTimestampStorage.getState(filePath);
    if (state == null)     continue;
    for (int i=0, length=state.length; i < length; i++) {
      if (state[i].myArtifactId == myArtifactId) {
        final ArtifactSourceTimestampStorage.PerArtifactTimestamp[] newState=ArrayUtil.remove(state,i);
        myTimestampStorage.update(filePath,newState.length > 0 ? newState : null);
        break;
      }
    }
  }
  for (  String filePath : myChangedFiles) {
    final ArtifactSourceTimestampStorage.PerArtifactTimestamp[] state=myTimestampStorage.getState(filePath);
    File file=new File(FileUtil.toSystemDependentName(filePath));
    final long timestamp=file.lastModified();
    myTimestampStorage.update(filePath,updateTimestamp(state,timestamp));
  }
}
