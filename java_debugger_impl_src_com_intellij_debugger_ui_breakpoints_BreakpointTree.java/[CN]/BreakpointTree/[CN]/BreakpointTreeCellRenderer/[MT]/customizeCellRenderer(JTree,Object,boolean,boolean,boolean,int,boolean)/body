{
  if (UIUtil.isUnderGTKLookAndFeel()) {
    final Color background=selected ? UIUtil.getTreeSelectionBackground() : UIUtil.getTreeTextBackground();
    setBackground(background);
  }
  if (value instanceof CheckedTreeNode) {
    final CheckedTreeNode node=(CheckedTreeNode)value;
    final TreeDescriptor descriptor=getDescriptor(node);
    descriptor.customizeCellRenderer(getTextRenderer(),node,selected,node.isChecked(),expanded,leaf,hasFocus);
    if (descriptor instanceof BreakpointDescriptor) {
      myCheckbox.setEnabled(node.isEnabled() && !((BreakpointDescriptor)descriptor).isSlave());
    }
  }
}
