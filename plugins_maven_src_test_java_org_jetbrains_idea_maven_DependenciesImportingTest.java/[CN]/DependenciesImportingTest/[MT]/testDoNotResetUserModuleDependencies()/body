{
  VirtualFile m1=createModulePom("m1","<groupId>test</groupId>" + "<artifactId>m1</artifactId>" + "<version>1</version>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>test</groupId>"+ "    <artifactId>m2</artifactId>"+ "    <version>1</version>"+ "  </dependency>"+ "</dependencies>");
  VirtualFile m2=createModulePom("m2","<groupId>test</groupId>" + "<artifactId>m2</artifactId>" + "<version>1</version>");
  importSeveralProjects(m1,m2);
  assertModuleModuleDeps("m1","m2");
  Module module=createModule("my-module");
  ModifiableRootModel model=ModuleRootManager.getInstance(getModule("m1")).getModifiableModel();
  model.addModuleOrderEntry(module);
  model.commit();
  assertModuleModuleDeps("m1","m2","my-module");
  importSeveralProjects(m1,m2);
  assertModuleModuleDeps("m1","my-module","m2");
}
