{
  FilePath current=path;
  while (current != null) {
    VirtualFile vf=current.getVirtualFile();
    if (vf == null) {
      current.hardRefresh();
      vf=current.getVirtualFile();
      if (vf == null) {
        return;
      }
    }
    if (!VfsUtil.isAncestor(myRoot,vf,true))     return;
    myToBeAdded.add(current);
    current=current.getParentPath();
  }
}
