{
  final String newValue=((JTextField)editorComponent).getText();
  final TreePath path=getEditingPath();
  final Object node=getNodeFor(path);
  RenameablePackagingElement currentElement=null;
  if (node instanceof PackagingElementNode) {
    final PackagingElement<?> element=((PackagingElementNode)node).getElementIfSingle();
    if (element instanceof RenameablePackagingElement) {
      currentElement=(RenameablePackagingElement)element;
    }
  }
  final boolean stopped=super.stopCellEditing();
  if (stopped && currentElement != null) {
    final RenameablePackagingElement finalCurrentElement=currentElement;
    myArtifactsEditor.getLayoutTreeComponent().editLayout(new Runnable(){
      public void run(){
        finalCurrentElement.rename(newValue);
      }
    }
);
    myArtifactsEditor.queueValidation();
    myArtifactsEditor.getLayoutTreeComponent().updatePropertiesPanel(true);
    addSubtreeToUpdate((DefaultMutableTreeNode)path.getLastPathComponent());
    requestFocusToTree();
  }
  return stopped;
}
