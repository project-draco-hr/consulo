{
  vcs.createDirectory(p("dir1"));
  vcs.createDirectory(p("dir1/dir2"));
  vcs.createFile(p("dir1/dir2/file"),null);
  vcs.apply();
  vcs.rename(p("dir1/dir2"),"new dir");
  vcs.apply();
  assertTrue(vcs.hasEntry(p("dir1/new dir")));
  assertTrue(vcs.hasEntry(p("dir1/new dir/file")));
  assertFalse(vcs.hasEntry(p("dir1/dir2")));
  vcs.revert();
  assertTrue(vcs.hasEntry(p("dir1/dir2")));
  assertTrue(vcs.hasEntry(p("dir1/dir2/file")));
  assertFalse(vcs.hasEntry(p("dir1/new dir")));
}
