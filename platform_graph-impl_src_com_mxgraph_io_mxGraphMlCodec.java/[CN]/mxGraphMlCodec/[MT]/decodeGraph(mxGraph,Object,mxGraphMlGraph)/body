{
  Object[] vertexes=graph.getChildVertices(parent);
  List<mxGraphMlEdge> gmlEdges=gmlGraph.getEdges();
  gmlEdges=encodeEdges(gmlEdges,parent,graph);
  gmlGraph.setEdges(gmlEdges);
  for (  Object vertex : vertexes) {
    List<mxGraphMlNode> Gmlnodes=gmlGraph.getNodes();
    mxCell v=(mxCell)vertex;
    String id=v.getId();
    mxGraphMlNode gmlNode=new mxGraphMlNode(id,null);
    addNodeData(gmlNode,v);
    Gmlnodes.add(gmlNode);
    gmlGraph.setNodes(Gmlnodes);
    mxGraphMlGraph gmlGraphx=new mxGraphMlGraph();
    gmlGraphx=decodeGraph(graph,vertex,gmlGraphx);
    if (!gmlGraphx.isEmpty()) {
      List<mxGraphMlGraph> nodeGraphs=gmlNode.getNodeGraph();
      nodeGraphs.add(gmlGraphx);
      gmlNode.setNodeGraph(nodeGraphs);
    }
  }
  return gmlGraph;
}
