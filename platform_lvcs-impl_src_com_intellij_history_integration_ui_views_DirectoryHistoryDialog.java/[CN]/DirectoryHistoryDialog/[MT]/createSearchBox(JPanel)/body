{
  final SearchTextFieldWithStoredHistory field=new SearchTextFieldWithStoredHistory(getPropertiesKey() + ".searchHistory");
  field.addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      scheduleRevisionsUpdate(new Consumer<DirectoryHistoryDialogModel>(){
        public void consume(        DirectoryHistoryDialogModel m){
          m.setFilter(field.getText());
          field.addCurrentTextToHistory();
        }
      }
);
    }
  }
);
  new AnAction(){
    @Override public void actionPerformed(    AnActionEvent e){
      field.requestFocusInWindow();
    }
  }
.registerCustomShortcutSet(CommonShortcuts.getFind(),root,this);
  return field;
}
