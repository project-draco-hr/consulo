{
  final Project project=myTarget.getProject();
  final PsiElement parent=myTarget.getParent().getParent();
  final LocalInspectionsPass pass=new LocalInspectionsPass(myFile,myFile.getViewProvider().getDocument(),parent.getTextRange().getStartOffset(),parent.getTextRange().getEndOffset());
  final InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(project).getInspectionProfile();
  for (  PsiLiteralExpression target : targets) {
    final Object value=target.getValue();
    if (value instanceof String) {
      final InspectionProfileEntry toolById=((InspectionProfileImpl)inspectionProfile).getToolById(((String)value),target);
      if (toolById instanceof LocalInspectionToolWrapper) {
        final LocalInspectionToolWrapper tool=new LocalInspectionToolWrapper(((LocalInspectionToolWrapper)toolById).getTool());
        final InspectionManagerEx managerEx=((InspectionManagerEx)InspectionManagerEx.getInstance(project));
        final GlobalInspectionContextImpl context=managerEx.createNewGlobalContext(false);
        tool.initialize(context);
        ((RefManagerImpl)context.getRefManager()).inspectionReadActionStarted();
        ProgressManager.getInstance().run(new Task.Modal(project,"Collecting information...",true){
          @Override public void run(          @NotNull ProgressIndicator indicator){
            pass.doInspectInBatch(managerEx,Collections.<InspectionProfileEntry>singletonList(tool),false);
          }
          @Override public void onSuccess(){
            for (            HighlightInfo info : pass.getInfos()) {
              final PsiElement element=CollectHighlightsUtil.findCommonParent(myFile,info.startOffset,info.endOffset);
              if (element != null) {
                addOccurrence(element);
              }
            }
          }
        }
);
      }
    }
  }
}
