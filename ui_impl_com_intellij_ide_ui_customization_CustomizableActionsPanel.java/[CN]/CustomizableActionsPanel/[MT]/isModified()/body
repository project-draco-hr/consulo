{
  if (mySelectedSchema == null) {
    return CustomizableActionsSchemas.ACTIVE_SCHEMA != CustomizableActionsSchemas.DEFAULT_SCHEMA;
  }
  final CustomizableActionsSchemas allSchemas=CustomizableActionsSchemas.getInstance();
  if (!mySelectedSchema.getName().equals(allSchemas.getActiveSchema().getName())) {
    return true;
  }
  ArrayList<String> currentNames=new ArrayList<String>();
  for (int i=0; i < myCustomizationSchemas.size(); i++) {
    final CustomActionsSchema customActionsSchema=(CustomActionsSchema)myCustomizationSchemas.elementAt(i);
    currentNames.add(customActionsSchema.getName());
    if (customActionsSchema != mySelectedSchema && customActionsSchema.isModified()) {
      return true;
    }
  }
  final CustomActionsSchema[] storedSchemas=allSchemas.getCustomActionsSchemas();
  if (storedSchemas != null) {
    for (int i=0; i < storedSchemas.length; i++) {
      CustomActionsSchema customActionsSchema=storedSchemas[i];
      if (!currentNames.contains(customActionsSchema.getName())) {
        return true;
      }
    }
    if (storedSchemas.length != myCustomizationSchemas.size())     return true;
  }
  if (Comparing.strEqual(mySelectedSchema.getName(),CustomizableActionsSchemas.DEFAULT_NAME))   return false;
  final CustomActionsSchema storedSchema=allSchemas.getCustomActionsSchema(mySelectedSchema.getName());
  if (storedSchema == null) {
    mySelectedSchema.setModified(true);
    return true;
  }
  CustomizationUtil.optimizeSchema(myActionsTree,mySelectedSchema);
  if (storedSchema.getActions().size() != mySelectedSchema.getActions().size()) {
    mySelectedSchema.setModified(true);
    return true;
  }
  for (int i=0; i < mySelectedSchema.getActions().size(); i++) {
    if (!mySelectedSchema.getActions().get(i).equals(storedSchema.getActions().get(i))) {
      mySelectedSchema.setModified(true);
      return true;
    }
  }
  mySelectedSchema.setModified(false);
  return false;
}
