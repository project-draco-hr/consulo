{
  final TreePath selectionPath=myTree.getSelectionPath();
  Object userObject=null;
  if (selectionPath != null) {
    userObject=((DefaultMutableTreeNode)selectionPath.getLastPathComponent()).getUserObject();
    if (userObject instanceof String) {
      final AnAction action=actionManager.getAction((String)userObject);
      if (action != null && action.getTemplatePresentation() != null && action.getTemplatePresentation().getIcon() != null) {
        mySetIconButton.setEnabled(!action.isDefaultIcon());
        return;
      }
    }
  }
  mySetIconButton.setEnabled(myTextField.getText().length() != 0 && selectionPath != null && new DefaultMutableTreeNode(selectionPath).isLeaf() && !(userObject instanceof Separator));
}
