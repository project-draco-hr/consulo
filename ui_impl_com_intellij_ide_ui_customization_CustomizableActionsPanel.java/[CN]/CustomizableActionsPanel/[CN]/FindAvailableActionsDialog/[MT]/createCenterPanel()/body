{
  final CustomizableActionsSchemas schemas=CustomizableActionsSchemas.getInstance();
  Group rootGroup=ActionsTreeUtil.createMainGroup(null,null,QuickListsManager.getInstance().getAllQuickLists());
  DefaultMutableTreeNode root=ActionsTreeUtil.createNode(rootGroup);
  DefaultTreeModel model=new DefaultTreeModel(root);
  myTree=new JTree();
  myTree.setModel(model);
  myTree.setCellRenderer(new MyTreeCellRenderer());
  final ActionManager actionManager=ActionManager.getInstance();
  mySetIconButton=new JButton(IdeBundle.message("button.set.icon"));
  mySetIconButton.setEnabled(false);
  mySetIconButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final TreePath selectionPath=myTree.getSelectionPath();
      if (selectionPath != null) {
        doSetIcon((DefaultMutableTreeNode)selectionPath.getLastPathComponent(),myTextField.getText());
        myTree.repaint();
      }
    }
  }
);
  myTextField=createBrowseField();
  myTextField.getTextField().getDocument().addDocumentListener(new DocumentAdapter(){
    protected void textChanged(    DocumentEvent e){
      enableSetIconButton(actionManager);
    }
  }
);
  JPanel northPanel=new JPanel(new BorderLayout());
  northPanel.add(myTextField,BorderLayout.CENTER);
  northPanel.add(new JLabel(IdeBundle.message("label.icon.path")),BorderLayout.WEST);
  northPanel.add(mySetIconButton,BorderLayout.EAST);
  northPanel.setBorder(BorderFactory.createEmptyBorder(0,0,5,0));
  JPanel panel=new JPanel(new BorderLayout());
  panel.add(northPanel,BorderLayout.NORTH);
  panel.add(ScrollPaneFactory.createScrollPane(myTree),BorderLayout.CENTER);
  myTree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      enableSetIconButton(actionManager);
      final TreePath selectionPath=myTree.getSelectionPath();
      if (selectionPath != null) {
        final DefaultMutableTreeNode node=(DefaultMutableTreeNode)selectionPath.getLastPathComponent();
        final String actionId=getActionId(node);
        if (actionId != null) {
          myTextField.setText(schemas.getIconPath(actionId));
        }
      }
    }
  }
);
  return panel;
}
