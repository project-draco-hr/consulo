{
  List<String> expectedMessages=Arrays.asList(messages.split("-----"));
  final String RECORD_SEPARATOR="@";
  boolean fullBody=GitVersionSpecialty.STARTED_USING_RAW_BODY_IN_FORMAT.existsIn(myVcs.getVersion());
  String data=fullBody ? "%B" : "%s%b";
  String output=git("log -%s --pretty=%s%s",String.valueOf(commitNum),data,RECORD_SEPARATOR);
  List<String> actualMessages=Arrays.asList(output.split(RECORD_SEPARATOR));
  for (int i=0; i < expectedMessages.size(); i++) {
    String expectedMessage=StringUtil.convertLineSeparators(expectedMessages.get(i).trim());
    String actualMessage=StringUtil.convertLineSeparators(actualMessages.get(i).trim());
    if (!fullBody) {
      expectedMessage=expectedMessage.replace("\n","").replace(" ","");
      actualMessage=actualMessage.replace("\n","").replace(" ","");
    }
    expectedMessage=virtualCommits.replaceVirtualHashes(expectedMessage);
    assertEquals("Commit doesn't match",expectedMessage,trimHash(actualMessage));
  }
}
