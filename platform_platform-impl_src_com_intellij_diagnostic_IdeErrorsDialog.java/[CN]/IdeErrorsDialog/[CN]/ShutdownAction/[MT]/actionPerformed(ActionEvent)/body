{
  final boolean canRestart=ApplicationManager.getApplication().isRestartCapable();
  int rc=Messages.showYesNoDialog(getRootPane(),"Are you sure you would like to " + (canRestart ? "restart" : "shutdown") + " "+ ApplicationNamesInfo.getInstance().getFullProductName()+ "?","Confirm",Messages.getQuestionIcon());
  if (rc != 0)   return;
  myMessagePool.setJvmIsShuttingDown();
  LaterInvocator.invokeLater(new Runnable(){
    public void run(){
      final Application app=ApplicationManager.getApplication();
      if (app.isRestartCapable()) {
        app.restart();
      }
 else {
        app.exit();
      }
    }
  }
,ModalityState.NON_MODAL);
  doOKAction();
}
