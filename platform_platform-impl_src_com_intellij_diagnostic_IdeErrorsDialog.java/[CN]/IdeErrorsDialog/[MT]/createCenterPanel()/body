{
  setTitle(DiagnosticBundle.message("error.list.title"));
  JPanel root=new JPanel(new BorderLayout());
  JPanel top=new JPanel(new BorderLayout());
  JPanel toolbar=new JPanel(new FlowLayout());
  myImmediatePopupCheckbox=new JCheckBox(DiagnosticBundle.message("error.list.popup.immediately.checkbox"));
  myImmediatePopupCheckbox.setSelected(PropertiesComponent.getInstance().isTrueValue(IMMEDIATE_POPUP_OPTION));
  myImmediatePopupCheckbox.setVisible(((ApplicationImpl)ApplicationManager.getApplication()).isInternal());
  myCountLabel=new JLabel();
  myInfoLabel=new JLabel();
  ActionToolbar navToolbar=createNavigationToolbar();
  toolbar.add(navToolbar.getComponent());
  toolbar.add(myCountLabel);
  top.add(toolbar,BorderLayout.WEST);
  root.add(top,BorderLayout.NORTH);
  myDetailsPane=new JTextPane();
  myDetailsPane.setBackground(UIUtil.getTextFieldBackground());
  myDetailsPane.setEditable(false);
  JPanel infoPanel=new JPanel(new BorderLayout());
  JPanel gapPanel=new JPanel(new FlowLayout(FlowLayout.LEFT,7,0));
  gapPanel.add(myInfoLabel);
  infoPanel.add(gapPanel,BorderLayout.NORTH);
  infoPanel.add(ScrollPaneFactory.createScrollPane(myDetailsPane),BorderLayout.CENTER);
  myMoreInfoPane=new JTextPane();
  myMoreInfoPane.setBackground(UIUtil.getTextFieldBackground());
  final JScrollPane scrollPane=ScrollPaneFactory.createScrollPane(myMoreInfoPane);
  scrollPane.setPreferredSize(new Dimension(100,50));
  final LabeledComponent<JScrollPane> labeledComponent=LabeledComponent.create(scrollPane,DiagnosticBundle.message("diagnostic.error.report.additional.info.label"));
  labeledComponent.setBorder(BorderFactory.createEmptyBorder(4,0,0,0));
  infoPanel.add(labeledComponent,BorderLayout.SOUTH);
  myMoreInfoPane.getDocument().addDocumentListener(new DocumentAdapter(){
    @Override protected void textChanged(    DocumentEvent e){
      if (myMoreInfoPane.isEditable()) {
        final AbstractMessage message=getSelectedMessage();
        if (message != null) {
          message.setAdditionalInfo(myMoreInfoPane.getText());
        }
      }
    }
  }
);
  root.add(infoPanel,BorderLayout.CENTER);
  JPanel controlsPane=new JPanel(new BorderLayout());
  myCredentialsPane=Box.createHorizontalBox();
  myCredentialsLabel=new JLabel(DiagnosticBundle.message("diagnostic.error.report.submit.error.anonymously"));
  myCredentialsPane.add(myCredentialsLabel);
  myCredentialsPane.add(Box.createHorizontalGlue());
  JButton specifyCredentialsButton=new JButton(DiagnosticBundle.message("diagnostic.error.report.use.jetbrains.account.button.label"));
  specifyCredentialsButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      new JetBrainsAccountDialog(getRootPane()).show();
      updateCredentialsPane();
    }
  }
);
  myCredentialsPane.add(specifyCredentialsButton);
  controlsPane.add(myCredentialsPane,BorderLayout.CENTER);
  myCredentialsPane.setBorder(BorderFactory.createEmptyBorder(4,0,0,0));
  controlsPane.add(myImmediatePopupCheckbox,BorderLayout.SOUTH);
  root.add(controlsPane,BorderLayout.SOUTH);
  root.setPreferredSize(new Dimension(600,550));
  rebuildHeaders();
  moveSelectionToEarliestMessage();
  updateControls();
  return root;
}
