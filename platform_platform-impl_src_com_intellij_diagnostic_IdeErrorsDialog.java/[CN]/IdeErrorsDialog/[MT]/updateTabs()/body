{
  myMute=true;
  try {
    final AbstractMessage message=getSelectedMessage();
    if (myCommentsTabForm != null) {
      if (message != null) {
        String msg=message.getMessage();
        int i=msg.indexOf("\n");
        if (i != -1) {
          msg=msg.substring(0,i);
        }
        msg=StringUtil.first(msg,200,true);
        myCommentsTabForm.setErrorText(msg);
      }
 else {
        myCommentsTabForm.setErrorText(null);
      }
      if (message != null) {
        myCommentsTabForm.setCommentText(message.getAdditionalInfo());
        myCommentsTabForm.setCommentsTextEnabled(true);
      }
 else {
        myCommentsTabForm.setCommentText(null);
        myCommentsTabForm.setCommentsTextEnabled(false);
      }
    }
    myDetailsTabForm.setDetailsText(message != null ? getDetailsText(message) : null);
    if (message != null) {
      myDetailsTabForm.setCommentsText(message.getAdditionalInfo());
      myDetailsTabForm.setCommentsTextEnabled(true);
    }
 else {
      myDetailsTabForm.setCommentsText(null);
      myDetailsTabForm.setCommentsTextEnabled(false);
    }
    List<Attachment> attachments=message instanceof LogMessageEx ? ((LogMessageEx)message).getAttachments() : Collections.<Attachment>emptyList();
    if (!attachments.isEmpty()) {
      if (myTabs.indexOfComponent(myAttachmentsTabForm.getContentPane()) == -1) {
        myTabs.addTab(DiagnosticBundle.message("error.attachments.tab.title"),myAttachmentsTabForm.getContentPane());
      }
      myAttachmentsTabForm.setAttachments(attachments);
    }
 else {
      int index=myTabs.indexOfComponent(myAttachmentsTabForm.getContentPane());
      if (index != -1) {
        myTabs.removeTabAt(index);
      }
    }
  }
  finally {
    myMute=false;
  }
}
