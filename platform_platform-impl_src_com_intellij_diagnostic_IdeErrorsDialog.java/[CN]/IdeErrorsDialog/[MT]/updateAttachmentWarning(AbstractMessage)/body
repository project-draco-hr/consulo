{
  final List<Attachment> includedAttachments;
  if (message instanceof LogMessageEx && !(includedAttachments=ContainerUtil.filter(((LogMessageEx)message).getAttachments(),new Condition<Attachment>(){
    @Override public boolean value(    final Attachment attachment){
      return attachment.isIncluded();
    }
  }
)).isEmpty()) {
    myAttachmentWarningPanel.setVisible(true);
    if (includedAttachments.size() == 1) {
      myAttachmentWarningLabel.setHtmlText(DiagnosticBundle.message("diagnostic.error.report.include.attachment.warning",includedAttachments.get(0).getName()));
    }
 else {
      myAttachmentWarningLabel.setHtmlText(DiagnosticBundle.message("diagnostic.error.report.include.attachments.warning",includedAttachments.size()));
    }
  }
 else {
    myAttachmentWarningPanel.setVisible(false);
  }
}
