{
  String[] nameComponents=patchFileName.split("/");
  String patchName=nameComponents[nameComponents.length - 1];
  if (patchName.length() == 0) {
    return null;
  }
  final PsiFile[] psiFiles=FilenameIndex.getFilesByName(myProject,patchName,GlobalSearchScope.projectScope(myProject));
  if (psiFiles.length == 1) {
    PsiDirectory parent=psiFiles[0].getContainingDirectory();
    for (int i=nameComponents.length - 2; i >= 0; i--) {
      if (!parent.getName().equals(nameComponents[i]) || Comparing.equal(parent.getVirtualFile(),myProject.getBaseDir())) {
        return new Result(parent.getVirtualFile().getPresentableUrl(),i + 1);
      }
      parent=parent.getParentDirectory();
    }
    if (parent == null)     return null;
    return new Result(parent.getVirtualFile().getPresentableUrl(),0);
  }
  return null;
}
