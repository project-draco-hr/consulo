{
  Runnable runnable=new Runnable(){
    public void run(){
      Window[] windows=Window.getWindows();
      Window targetWindow=null;
      for (      Window each : windows) {
        if (each.isActive()) {
          targetWindow=each;
          break;
        }
      }
      if (targetWindow == null) {
        targetWindow=JOptionPane.getRootFrame();
      }
      if (targetWindow == null) {
        final IdeFrame frame=IdeFocusManager.findInstance().getLastFocusedFrame();
        if (frame == null) {
          final Project[] projects=ProjectManager.getInstance().getOpenProjects();
          showOverChangesView(projects == null || projects.length == 0 ? ProjectManager.getInstance().getDefaultProject() : projects[0],message,type);
          return;
        }
        PopupUtil.showBalloonForComponent(frame.getComponent(),message,type,true);
      }
 else {
        PopupUtil.showBalloonForComponent(targetWindow,message,type,true);
      }
    }
  }
;
  UIUtil.invokeLaterIfNeeded(runnable);
}
