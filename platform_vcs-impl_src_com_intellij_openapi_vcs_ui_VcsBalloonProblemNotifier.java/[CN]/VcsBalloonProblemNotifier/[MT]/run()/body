{
  final Collection<Project> projects;
  if (myProject != null) {
    projects=Collections.singletonList(myProject);
  }
 else {
    ProjectManager projectManager=ProjectManager.getInstance();
    projects=Arrays.asList(projectManager.getOpenProjects());
  }
  for (  Project project : projects) {
    doForProject(project);
  }
}
