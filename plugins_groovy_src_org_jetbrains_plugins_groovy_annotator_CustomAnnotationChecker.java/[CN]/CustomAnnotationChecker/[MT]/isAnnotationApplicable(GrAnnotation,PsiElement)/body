{
  PsiElement ownerToUse=parent instanceof PsiModifierList ? parent.getParent() : parent;
  PsiAnnotation.TargetType[] elementTypeFields=GrAnnotationImpl.getApplicableElementTypeFields(ownerToUse);
  if (elementTypeFields.length != 0 && !GrAnnotationImpl.isAnnotationApplicableTo(annotation,elementTypeFields)) {
    String annotationTargetText=JavaErrorMessages.message("annotation.target." + elementTypeFields[0]);
    GrCodeReferenceElement ref=annotation.getClassReference();
    return JavaErrorMessages.message("annotation.not.applicable",ref.getText(),annotationTargetText);
  }
  return null;
}
