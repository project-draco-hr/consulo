{
  if (myHaveInstanceRefs)   return;
  if (PsiUtil.isSuperReference(referenceExpression)) {
    registerInstanceRef();
    return;
  }
  if (PsiUtil.isThisReference(referenceExpression)) {
    if (!(referenceExpression.getParent() instanceof GrReferenceExpression)) {
      registerInstanceRef();
    }
    return;
  }
  GrExpression qualifier=referenceExpression.getQualifierExpression();
  if (qualifier == null || PsiUtil.isThisOrSuperRef(qualifier)) {
    GroovyResolveResult result=referenceExpression.advancedResolve();
    PsiElement element=result.getElement();
    if (isPrintOrPrintln(element))     return;
    GroovyPsiElement resolveContext=result.getCurrentFileResolveContext();
    if (qualifier == null && resolveContext != null)     return;
    if (element instanceof PsiClass && ((PsiClass)element).getContainingClass() == null)     return;
    if (element instanceof PsiMember && !((PsiMember)element).hasModifierProperty(PsiModifier.STATIC)) {
      registerInstanceRef();
    }
    if (element == null) {
      registerInstanceRef();
    }
  }
 else {
    super.visitReferenceExpression(referenceExpression);
  }
}
