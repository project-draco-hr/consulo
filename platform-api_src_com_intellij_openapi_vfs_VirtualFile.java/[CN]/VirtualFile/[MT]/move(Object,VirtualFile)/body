{
  if (getFileSystem() != newParent.getFileSystem()) {
    throw new IOException(VfsBundle.message("file.move.error",newParent.getPresentableUrl()));
  }
  Charset charsetBefore=EncodingManager.getInstance().getEncoding(this,true);
  getFileSystem().moveFile(requestor,this,newParent);
  EncodingManager.getInstance().restoreEncoding(this,charsetBefore);
}
