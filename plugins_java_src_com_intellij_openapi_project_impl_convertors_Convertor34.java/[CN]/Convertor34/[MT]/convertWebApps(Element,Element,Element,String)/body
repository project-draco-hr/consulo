{
  Element webRootContainer=findNamedChild(projectElement,"component","WebRootContainer");
  if (webRootContainer == null)   return;
  List roots=webRootContainer.getChildren("root");
  for (Iterator iterator=roots.iterator(); iterator.hasNext(); ) {
    Element root=(Element)iterator.next();
    String name=root.getAttributeValue("name");
    String url=root.getAttributeValue("url");
    if (name == null || url == null)     continue;
    String filepath=VirtualFileManager.extractPath(url);
    VirtualFile moduleDirectory=LocalFileSystem.getInstance().findFileByPath(filepath);
    if (moduleDirectory != null) {
      Element module=createModule(projectElement);
      module.setAttribute("type","J2EE_WEB_MODULE");
      Element rootManager=createWebModuleRootManager(module,moduleDirectory,projectRootManager,mainModule);
      module.addContent(rootManager);
      Element buildComponent=createWebModuleBuildComponent();
      module.addContent(buildComponent);
      Element moduleProperties=createWebModuleProperties(moduleDirectory);
      module.addContent(moduleProperties);
      Document moduleDocument=new Document(module);
      String moduleName=(!"".equals(name) ? name : moduleDirectory.getName());
      if (moduleName.equals(mainModule))       moduleName="web" + moduleName;
      try {
        final String modulePath=moduleDirectory.getPath() + "/" + moduleName+ ModuleFileType.DOT_DEFAULT_EXTENSION;
        JDOMUtil.writeDocument(moduleDocument,modulePath,"\n");
        addModule(modulePath,moduleManager);
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          @Override public void run(){
            LocalFileSystem.getInstance().refreshAndFindFileByIoFile(new File(modulePath));
          }
        }
);
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
}
