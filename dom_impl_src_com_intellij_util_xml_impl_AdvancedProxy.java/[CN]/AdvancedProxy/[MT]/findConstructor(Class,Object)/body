{
  if (constructorArgs.length == 0) {
    try {
      Constructor constructor=ourConstructors.get(aClass);
      if (constructor == null) {
        constructor=aClass.getConstructor(ArrayUtil.EMPTY_CLASS_ARRAY);
        ourConstructors.put(aClass,constructor);
      }
      return constructor;
    }
 catch (    NoSuchMethodException e) {
      throw new AssertionError("Cannot find constructor for arguments: " + Arrays.asList(constructorArgs) + " in class "+ aClass);
    }
  }
  loop:   for (  final Constructor constructor : aClass.getDeclaredConstructors()) {
    final Class[] parameterTypes=constructor.getParameterTypes();
    if (parameterTypes.length == constructorArgs.length) {
      for (int i=0; i < parameterTypes.length; i++) {
        Class parameterType=parameterTypes[i];
        final Object constructorArg=constructorArgs[i];
        if (!parameterType.isInstance(constructorArg) && constructorArg != null) {
          continue loop;
        }
      }
      return constructor;
    }
  }
  throw new AssertionError("Cannot find constructor for arguments: " + Arrays.asList(constructorArgs));
}
