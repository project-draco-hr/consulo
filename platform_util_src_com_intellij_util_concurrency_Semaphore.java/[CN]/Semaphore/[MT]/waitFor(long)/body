{
  try {
    if (mySemaphore == 0)     return true;
    final long startTime=System.currentTimeMillis();
    long waitTime=timeout;
    while (mySemaphore > 0) {
      wait(waitTime);
      final long elapsed=System.currentTimeMillis() - startTime;
      if (elapsed < timeout) {
        waitTime=timeout - elapsed;
      }
 else {
        break;
      }
    }
    return mySemaphore == 0;
  }
 catch (  InterruptedException e) {
    LOG.debug(e);
    throw new RuntimeException(e);
  }
}
