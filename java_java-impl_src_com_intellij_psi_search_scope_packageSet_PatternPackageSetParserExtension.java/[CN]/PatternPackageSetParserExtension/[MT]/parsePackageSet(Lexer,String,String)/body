{
  if (scope == PatternPackageSet.SCOPE_ANY && modulePattern == null) {
    error(AnalysisScopeBundle.message("error.packageset.common.expectations"),lexer);
  }
  if (scope != PatternPackageSet.SCOPE_ANY && scope != PatternPackageSet.SCOPE_LIBRARY && scope != PatternPackageSet.SCOPE_PROBLEM && scope != PatternPackageSet.SCOPE_SOURCE && scope != PatternPackageSet.SCOPE_TEST) {
    return null;
  }
  return new PatternPackageSet(parseAspectJPattern(lexer),scope,modulePattern);
}
