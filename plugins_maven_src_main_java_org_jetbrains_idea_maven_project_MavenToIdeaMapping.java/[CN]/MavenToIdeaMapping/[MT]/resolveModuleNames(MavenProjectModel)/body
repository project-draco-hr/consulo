{
  final List<String> duplicateNames=collectDuplicateModuleNames(mavenProjectModel);
  mavenProjectModel.visit(new MavenProjectModel.MavenProjectVisitorPlain(){
    public void visit(    MavenProjectModel.Node node){
      MavenId id=node.getId();
      String name=node.getLinkedModule() != null ? node.getLinkedModule().getName() : generateModuleName(id,duplicateNames);
      projectNodeToModuleName.put(node,name);
      libraryNameToModuleName.put(getLibraryName(id),name);
      projectNames.add(name);
      ProjectId projectId=new ProjectId(id);
      projectIdToModuleName.put(projectId,name);
      projectIdToFile.put(projectId,node.getFile());
    }
  }
);
}
