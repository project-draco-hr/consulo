{
  JTree tree=getCurrentTree();
  if (tree == null)   return PsiMethod.EMPTY_ARRAY;
  TreePath[] paths=tree.getSelectionPaths();
  ArrayList<Object> elements=new ArrayList<Object>();
  for (int i=0; i < paths.length; i++) {
    TreePath path=paths[i];
    Object node=path.getLastPathComponent();
    if (!(node instanceof DefaultMutableTreeNode))     continue;
    Object userObject=((DefaultMutableTreeNode)node).getUserObject();
    if (!(userObject instanceof CallHierarchyNodeDescriptor))     continue;
    elements.add(((CallHierarchyNodeDescriptor)userObject).getEnclosingElement());
  }
  return elements.toArray(new Object[elements.size()]);
}
