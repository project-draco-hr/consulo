{
  VirtualFile file=event.getFile();
  VirtualFile parent=file.getParent();
  String oldName=(String)event.getOldValue();
  String newName=(String)event.getNewValue();
  VirtualFile repo=VcsUtil.getVcsRootFor(project,file);
  if (repo == null || parent == null) {
    return;
  }
  HgMoveCommand command=new HgMoveCommand(project);
  HgFile source=new HgFile(repo,new File(parent.getPath(),oldName));
  HgFile target=new HgFile(repo,new File(parent.getPath(),newName));
  command.execute(source,target);
}
