{
  if (event.isFromRefresh()) {
    return;
  }
  final VirtualFile file=event.getFile();
  if (!VcsUtil.isFileForVcs(file,project,vcs)) {
    return;
  }
  if (!isFileProcessable(file) || file.isDirectory()) {
    return;
  }
  VirtualFile repo=VcsUtil.getVcsRootFor(project,file);
  if (repo == null) {
    return;
  }
  FilePath path=getFilePath(file);
  addFile(repo,path,false);
  markDirty(path);
}
