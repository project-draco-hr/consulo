{
  final PsiElement parent=ParenthesesUtils.getParentSkipParentheses(expression);
  if (parent instanceof PsiPolyadicExpression) {
    final PsiPolyadicExpression polyadicExpression=(PsiPolyadicExpression)parent;
    final PsiType type=polyadicExpression.getType();
    if (!TypeUtils.typeEquals(CommonClassNames.JAVA_LANG_STRING,type)) {
      return true;
    }
    final PsiExpression[] operands=polyadicExpression.getOperands();
    int index=-1;
    for (int i=0, length=operands.length; i < length; i++) {
      final PsiExpression operand=operands[i];
      if (expression.equals(operand)) {
        index=i;
      }
    }
    if (index > 0) {
      if (!TypeUtils.typeEquals(CommonClassNames.JAVA_LANG_STRING,operands[index - 1].getType())) {
        return true;
      }
    }
 else     if (operands.length > 1) {
      if (!TypeUtils.typeEquals(CommonClassNames.JAVA_LANG_STRING,operands[index + 1].getType())) {
        return true;
      }
    }
 else {
      return true;
    }
  }
 else   if (parent instanceof PsiExpressionList) {
    final PsiExpressionList expressionList=(PsiExpressionList)parent;
    final PsiElement grandParent=expressionList.getParent();
    if (!(grandParent instanceof PsiMethodCallExpression)) {
      return true;
    }
    final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)grandParent;
    final PsiReferenceExpression methodExpression1=methodCallExpression.getMethodExpression();
    final String name=methodExpression1.getReferenceName();
    final PsiExpression[] expressions=expressionList.getExpressions();
    if ("insert".equals(name)) {
      if (expressions.length < 2 || !expression.equals(ParenthesesUtils.stripParentheses(expressions[1]))) {
        return true;
      }
      if (!isCallToMethodIn(methodCallExpression,"java.lang.StringBuilder","java.lang.StringBuffer")) {
        return true;
      }
    }
 else     if ("append".equals(name)) {
      if (expressions.length < 1 || !expression.equals(ParenthesesUtils.stripParentheses(expressions[0]))) {
        return true;
      }
      if (!isCallToMethodIn(methodCallExpression,"java.lang.StringBuilder","java.lang.StringBuffer")) {
        return true;
      }
    }
 else     if ("print".equals(name) || "println".equals(name)) {
      if (!isCallToMethodIn(methodCallExpression,"java.io.PrintStream","java.io.PrintWriter")) {
        return true;
      }
    }
  }
 else {
    return true;
  }
  return false;
}
