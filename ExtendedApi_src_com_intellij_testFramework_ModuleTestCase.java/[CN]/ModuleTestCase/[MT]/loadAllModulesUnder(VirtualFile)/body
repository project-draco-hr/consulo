{
  ModuleImpl module=null;
  final VirtualFile[] children=rootDir.getChildren();
  for (int i=0; i < children.length; i++) {
    VirtualFile child=children[i];
    if (child.isDirectory()) {
      final ModuleImpl childModule=loadAllModulesUnder(child);
      if (module == null)       module=childModule;
    }
 else     if (child.getName().endsWith(".iml")) {
      String modulePath=child.getPath();
      module=(ModuleImpl)loadModule(new File(modulePath));
      readJdomExternalizables(module);
    }
  }
  return module;
}
