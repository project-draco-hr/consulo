{
  myDelegate=delegate;
  BreakpointItem breakpointItem=null;
  for (  BreakpointItem item : breakpointItems) {
    if (item.getBreakpoint() == baseBreakpoint) {
      breakpointItem=item;
      break;
    }
  }
  final Ref<Object> hackedSelection=Ref.create();
  myDetailController=new DetailController(new MasterController(){
    JLabel fake=new JLabel();
    @Override public ItemWrapper[] getSelectedItems(){
      if (hackedSelection.get() == null) {
        return new ItemWrapper[0];
      }
      return new ItemWrapper[]{((BreakpointItem)hackedSelection.get())};
    }
    @Override public JLabel getPathLabel(){
      return fake;
    }
  }
);
  final ItemWrapperListRenderer listRenderer=new ItemWrapperListRenderer(project,null);
  ComboBoxModel model=new CollectionComboBoxModel(breakpointItems,breakpointItem);
  myComboBox=new ComboBox(model);
  myComboBox.setRenderer(new ItemWrapperListRenderer(project,null){
    @Override protected void customizeCellRenderer(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      super.customizeCellRenderer(list,value,index,selected,hasFocus);
      if (selected) {
        if (hackedSelection.get() != value) {
          hackedSelection.set(value);
          myDetailController.selectionChanged();
        }
      }
    }
  }
);
  myComboBox.addItemListener(new ItemListener(){
    @Override public void itemStateChanged(    ItemEvent event){
      myDelegate.breakpointChosen(project,((BreakpointItem)myComboBox.getSelectedItem()));
    }
  }
);
}
