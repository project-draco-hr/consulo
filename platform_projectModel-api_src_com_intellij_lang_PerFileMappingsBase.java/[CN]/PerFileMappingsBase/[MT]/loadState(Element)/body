{
synchronized (myMappings) {
    final THashMap<String,T> dialectMap=new THashMap<>();
    for (    T dialect : getAvailableValues()) {
      String key=serialize(dialect);
      if (key != null) {
        dialectMap.put(key,dialect);
      }
    }
    myMappings.clear();
    final List<Element> files=state.getChildren("file");
    for (    Element fileElement : files) {
      final String url=fileElement.getAttributeValue("url");
      final String dialectID=fileElement.getAttributeValue(getValueAttribute());
      final VirtualFile file=url.equals("PROJECT") ? null : VirtualFileManager.getInstance().findFileByUrl(url);
      T dialect=dialectMap.get(dialectID);
      if (dialect == null) {
        dialect=handleUnknownMapping(file,dialectID);
        if (dialect == null)         continue;
      }
      if (file != null || url.equals("PROJECT")) {
        myMappings.put(file,dialect);
      }
    }
  }
}
