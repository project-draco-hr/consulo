{
  AntStructuredElement antElement=(AntStructuredElement)element;
  final XmlTag sourceElement=antElement.getSourceElement();
  final XmlAttribute[] attributes=sourceElement.getAttributes();
  if (attributes.length > 0) {
    final List<PsiReference> refs=PsiReferenceListSpinAllocator.alloc();
    try {
      boolean isTarget=antElement instanceof AntTarget;
      boolean isSet="isset".equals(sourceElement.getName());
      for (      XmlAttribute attr : attributes) {
        @NonNls final String attName=attr.getName();
        if (isTarget && ("if".equals(attName) || "unless".equals(attName))) {
          getAttributeReference(antElement,attr,refs);
        }
 else         if (isSet && "property".equals(attName)) {
          getAttributeReference(antElement,attr,refs);
        }
 else {
          getAttributeReferences(antElement,attr,refs);
        }
      }
      if (refs.size() > 0) {
        return refs.toArray(new PsiReference[refs.size()]);
      }
    }
  finally {
      PsiReferenceListSpinAllocator.dispose(refs);
    }
  }
  return PsiReference.EMPTY_ARRAY;
}
