{
  final AntStructuredElement antElement=(AntStructuredElement)element;
  final XmlTag sourceElement=antElement.getSourceElement();
  final XmlAttribute[] attributes=sourceElement.getAttributes();
  if (attributes.length > 0) {
    final List<PsiReference> refs=PsiReferenceListSpinAllocator.alloc();
    try {
      final boolean isSet="isset".equals(sourceElement.getName());
      for (      final XmlAttribute attr : attributes) {
        @NonNls final String attName=attr.getName();
        if ((AntFileImpl.IF_ATTR.equals(attName) || AntFileImpl.UNLESS_ATTR.equals(attName))) {
          getAttributeReference(antElement,attr,refs);
        }
 else         if (isSet && AntFileImpl.PROPERTY.equals(attName)) {
          getAttributeReference(antElement,attr,refs);
        }
 else {
          getAttributeReferences(antElement,attr,refs);
        }
      }
      if (refs.size() > 0) {
        return refs.toArray(new PsiReference[refs.size()]);
      }
    }
  finally {
      PsiReferenceListSpinAllocator.dispose(refs);
    }
  }
  return PsiReference.EMPTY_ARRAY;
}
