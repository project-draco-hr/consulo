{
  final String appHome=PathManager.getHomePath();
  if (appHome == null) {
    LOG.debug("IDEA home path is null, bundled Ant won't be configured");
    return null;
  }
  File antHome=new File(appHome,"lib" + File.separator + "ant");
  if (!antHome.exists()) {
    File communityAntHome=new File(appHome,"community" + File.separator + "lib"+ File.separator+ "ant");
    if (communityAntHome.exists()) {
      antHome=communityAntHome;
    }
  }
  if (!antHome.exists()) {
    LOG.debug("Bundled Ant not found at " + antHome.getAbsolutePath());
    return null;
  }
  String antLib=new File(antHome,"lib").getAbsolutePath();
  return new JpsAntInstallationImpl(antHome,"Bundled Ant",Collections.<String>emptyList(),Collections.singletonList(antLib));
}
