{
  cancelCurrentFindRequest();
  myAlarm.cancelAllRequests();
  myAlarm.addRequest(new Runnable(){
    public void run(){
      new Thread(new Runnable(){
        public void run(){
          final ProgressIndicator progress=new MyProgressIndicator();
          myCurrentProgress=progress;
          ProgressManager.getInstance().runProcess(new Runnable(){
            public void run(){
              ApplicationManager.getApplication().runReadAction(new Runnable(){
                public void run(){
                  UsageInfo[] usages=new UsageInfo[0];
                  Set<PsiFile> elementsToSearch=null;
                  try {
                    if (myBuilder.isBackward()) {
                      elementsToSearch=searchIn;
                      usages=FindDependencyUtil.findBackwardDependencies(myBuilder,searchFor,searchIn);
                    }
 else {
                      elementsToSearch=searchFor;
                      usages=FindDependencyUtil.findDependencies(myBuilder,searchIn,searchFor);
                    }
                  }
 catch (                  ProcessCanceledException e) {
                  }
catch (                  Exception e) {
                    LOG.error(e);
                  }
                  if (!progress.isCanceled()) {
                    final UsageInfo[] finalUsages=usages;
                    final PsiElement[] _elementsToSearch=elementsToSearch != null ? elementsToSearch.toArray(new PsiElement[elementsToSearch.size()]) : PsiElement.EMPTY_ARRAY;
                    ApplicationManager.getApplication().invokeLater(new Runnable(){
                      public void run(){
                        showUsages(new UsageInfoToUsageConverter.TargetElementsDescriptor(_elementsToSearch),finalUsages);
                      }
                    }
,ModalityState.stateForComponent(UsagesPanel.this));
                  }
                }
              }
);
              myCurrentProgress=null;
            }
          }
,progress);
        }
      }
).start();
    }
  }
,300);
}
