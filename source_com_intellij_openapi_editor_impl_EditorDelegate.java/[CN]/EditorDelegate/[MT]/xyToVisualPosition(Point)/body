{
  VisualPosition windowPosition=myDelegate.offsetToVisualPosition(myDocument.getTextRange().getStartOffset());
  VisualPosition pos=myDelegate.xyToVisualPosition(p);
  return new VisualPosition(pos.line - windowPosition.line,pos.column - windowPosition.column);
}
