{
  OpenFileDescriptor openFileDescriptor=new OpenFileDescriptor(myProject,myVirtualFile);
  Editor editor=FileEditorManager.getInstance(myProject).openTextEditor(openFileDescriptor,true);
  if (editor == null) {
    Messages.showMessageDialog("Cannot open text editor for file " + myVirtualFile.getPresentableUrl(),"Cannot Open Editor",Messages.getInformationIcon());
    return;
  }
  EditorGutter gutterComponent=editor.getGutter();
  gutterComponent.closeAllAnnotations();
  final LineAnnotationAspect[] aspects=myFileAnnotation.getAspects();
  for (int i=0; i < aspects.length; i++) {
    final LineAnnotationAspect aspect=aspects[i];
    gutterComponent.registerTextAnnotation(new TextAnnotationGutterProvider(){
      public String getLineText(      int line,      Editor editor){
        return aspect.getValue(line);
      }
      public void gutterClosed(){
      }
    }
);
  }
}
