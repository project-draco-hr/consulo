{
  final TemplateBuilderImpl builder=new TemplateBuilderImpl(tag);
  final ASTNode selected=pair.first;
  final ASTNode other=pair.second;
  builder.replaceElement(selected.getPsi(),PRIMARY_VARIABLE_NAME,new EmptyExpression(){
    public Result calculateQuickResult(    final ExpressionContext context){
      return new TextResult(selected.getText());
    }
    public Result calculateResult(    final ExpressionContext context){
      return new TextResult(selected.getText());
    }
  }
,true);
  if (other != null) {
    builder.replaceElement(other.getPsi(),OTHER_VARIABLE_NAME,PRIMARY_VARIABLE_NAME,false);
  }
  return builder.buildInlineTemplate();
}
