{
  Project lastOpenedProject=null;
  int line=-1;
  for (int i=0, argsSize=args.size(); i < argsSize; i++) {
    String arg=args.get(i);
    if (arg.equals("-l") || arg.equals("--line")) {
      i++;
      if (i == args.size()) {
        break;
      }
      try {
        line=Integer.parseInt(args.get(i));
      }
 catch (      NumberFormatException e) {
        line=-1;
      }
    }
 else {
      if (line != -1) {
        final VirtualFile virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByPath(arg);
        if (virtualFile != null) {
          lastOpenedProject=doOpenFile(virtualFile,line);
        }
 else {
          Messages.showErrorDialog("Cannot find file '" + arg + "'","Cannot find file");
        }
      }
 else {
        lastOpenedProject=doOpenFileOrProject(arg);
      }
    }
  }
  return lastOpenedProject;
}
