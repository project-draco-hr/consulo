{
  Component orig=super.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
  if (myPluginDescriptor != null) {
    final PluginNode pluginNode=(PluginNode)myPluginDescriptor;
    myNameLabel.setText(myPluginDescriptor.getName());
    final Color fg=orig.getForeground();
    final Color bg=orig.getBackground();
    final Color grayedFg=isSelected ? fg : Color.DARK_GRAY;
    myNameLabel.setForeground(fg);
    myStatusLabel.setForeground(grayedFg);
    myPanel.setBackground(bg);
    myNameLabel.setBackground(bg);
    myNameLabel.setIcon(IconLoader.getIcon("/nodes/plugin.png"));
    String category=myPluginDescriptor.getCategory();
    if (category != null) {
      myCategoryLabel.setText(category);
      myCategoryLabel.setForeground(grayedFg);
    }
    final IdeaPluginDescriptor installed=PluginManager.getPlugin(pluginNode.getPluginId());
    if (isDownloaded(pluginNode) || (installed != null && InstalledPluginsTableModel.wasUpdated(installed.getPluginId()))) {
      if (!isSelected)       myNameLabel.setForeground(FileStatus.ADDED.getColor());
      myStatusLabel.setText("[Downloaded]");
      myPanel.setToolTipText(IdeBundle.message("plugin.download.status.tooltip"));
      myStatusLabel.setBorder(BorderFactory.createEmptyBorder(0,LEFT_MARGIN,0,0));
    }
 else     if (pluginNode.getStatus() == PluginNode.STATUS_INSTALLED) {
      PluginId pluginId=pluginNode.getPluginId();
      final boolean hasNewerVersion=InstalledPluginsTableModel.hasNewerVersion(pluginId);
      if (!isSelected)       myNameLabel.setForeground(FileStatus.MODIFIED.getColor());
      if (hasNewerVersion) {
        if (!isSelected) {
          myNameLabel.setForeground(Color.RED);
        }
        myNameLabel.setIcon(IconLoader.getIcon("/nodes/pluginobsolete.png"));
      }
      myStatusLabel.setText("v." + pluginNode.getInstalledVersion() + (hasNewerVersion ? (" -> " + pluginNode.getVersion()) : ""));
      myStatusLabel.setBorder(BorderFactory.createEmptyBorder(0,LEFT_MARGIN,0,0));
    }
  }
  return myPanel;
}
