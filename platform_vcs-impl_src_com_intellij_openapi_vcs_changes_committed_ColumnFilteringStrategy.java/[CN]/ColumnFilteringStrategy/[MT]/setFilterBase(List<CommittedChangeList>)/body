{
  final Object oldSelection=myValueList.getSelectedValue();
  final Collection<String> values=new TreeSet<String>();
  for (  CommittedChangeList changeList : changeLists) {
    if (myProviderClass == null || myProviderClass.isInstance(changeList.getVcs().getCommittedChangesProvider())) {
      values.add(myColumn.getValue(ReceivedChangeList.unwrap(changeList)).toString());
    }
  }
  final String[] valueArray=ArrayUtil.toStringArray(values);
  myValueList.setModel(new AbstractListModel(){
    public int getSize(){
      return valueArray.length + 1;
    }
    public Object getElementAt(    final int index){
      if (index == 0) {
        return VcsBundle.message("committed.changes.filter.all");
      }
      return valueArray[index - 1];
    }
  }
);
  if (oldSelection != null) {
    myValueList.setSelectedValue(oldSelection,false);
  }
}
