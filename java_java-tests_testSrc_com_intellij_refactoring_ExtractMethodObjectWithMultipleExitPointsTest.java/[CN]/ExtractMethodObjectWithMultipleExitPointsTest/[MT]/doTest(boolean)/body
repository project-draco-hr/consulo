{
  final String testName=getTestName(false);
  configureByFile("/refactoring/extractMethodObject/multipleExitPoints/" + testName + ".java");
  int startOffset=myEditor.getSelectionModel().getSelectionStart();
  int endOffset=myEditor.getSelectionModel().getSelectionEnd();
  final PsiElement[] elements;
  PsiExpression expr=CodeInsightUtil.findExpressionInRange(myFile,startOffset,endOffset);
  if (expr != null) {
    elements=new PsiElement[]{expr};
  }
 else {
    elements=CodeInsightUtil.findStatementsInRange(myFile,startOffset,endOffset);
  }
  final ExtractMethodObjectProcessor processor=new ExtractMethodObjectProcessor(getProject(),getEditor(),elements,"Inner");
  final ExtractMethodObjectProcessor.MyExtractMethodProcessor extractProcessor=processor.getExtractProcessor();
  extractProcessor.setShowErrorDialogs(false);
  extractProcessor.prepare();
  extractProcessor.testPrepare();
  processor.setCreateInnerClass(createInnerClass);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      ExtractMethodObjectHandler.run(getProject(),getEditor(),processor,extractProcessor);
    }
  }
);
  checkResultByFile("/refactoring/extractMethodObject/multipleExitPoints/" + testName + ".java"+ ".after");
}
