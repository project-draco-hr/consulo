{
  final VirtualFile versionedParent=createDirInCommand(myWorkingCopyDir,"versionedParent");
  final String name="ign123";
  myVcs.createWCClient().doSetProperty(new File(versionedParent.getPath()),SvnPropertyKeys.SVN_IGNORE,SVNPropertyValue.create(name + "\n"),true,SVNDepth.EMPTY,null,null);
  checkin();
  update();
  final List<VirtualFile> ignored=new ArrayList<VirtualFile>();
  final VirtualFile ignChild=createDirInCommand(versionedParent,name);
  ignored.add(ignChild);
  VirtualFile current=ignChild;
  for (int i=0; i < 10; i++) {
    current=createDirInCommand(current,"dir" + i);
    ignored.add(current);
    VcsDirtyScopeManager.getInstance(myProject).markEverythingDirty();
    clManager.ensureUpToDate(false);
    Assert.assertTrue(clManager.getDefaultChangeList().getChanges().isEmpty());
  }
  testOneFile(current,"file.txt");
  final Random rnd=new Random(17);
  for (int i=0; i < 20; i++) {
    final int idx=rnd.nextInt(ignored.size());
    testOneFile(ignored.get(idx),"file" + i + ".txt");
  }
}
