{
  final VirtualFile versionedParent=createDirInCommand(myWorkingCopyDir,"versionedParent");
  final String name="ign123";
  final String name2="ign321";
  myVcs.createWCClient().doSetProperty(new File(versionedParent.getPath()),SvnPropertyKeys.SVN_IGNORE,SVNPropertyValue.create(name + "\n" + name2+ "\n"),true,SVNDepth.EMPTY,null,null);
  checkin();
  update();
  final List<VirtualFile> ignored=new ArrayList<VirtualFile>();
  final VirtualFile ignChild=createDirInCommand(versionedParent,name);
  final VirtualFile ignChild2=createDirInCommand(versionedParent,name2);
  ignored.add(ignChild);
  ignored.add(ignChild2);
  VirtualFile current=ignChild;
  for (int i=0; i < 10; i++) {
    current=createDirInCommand(current,"dir" + i);
    ignored.add(current);
  }
  current=ignChild2;
  for (int i=0; i < 10; i++) {
    current=createDirInCommand(current,"dir" + i);
    ignored.add(current);
  }
  final Random rnd=new Random(17);
  final List<VirtualFile> vf=new ArrayList<VirtualFile>();
  for (int i=0; i < 200; i++) {
    final int idx=rnd.nextInt(ignored.size());
    vf.add(createFileInCommand(ignored.get(idx),"file" + i + ".txt","***"));
  }
  for (int i=0; i < 50; i++) {
    final VirtualFile virtualFile=vf.get(rnd.nextInt(vf.size()));
    testImpl(virtualFile);
  }
}
