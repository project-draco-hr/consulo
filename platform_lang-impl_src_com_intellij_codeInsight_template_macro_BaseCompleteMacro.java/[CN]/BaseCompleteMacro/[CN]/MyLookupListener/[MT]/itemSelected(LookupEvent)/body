{
  LookupElement item=event.getItem();
  if (item == null)   return;
  char c=event.getCompletionChar();
  if (c != Lookup.REPLACE_SELECT_CHAR && c != Lookup.NORMAL_SELECT_CHAR && c != Lookup.COMPLETE_STATEMENT_SELECT_CHAR) {
    return;
  }
  for (  TemplateCompletionProcessor processor : Extensions.getExtensions(TemplateCompletionProcessor.EP_NAME)) {
    if (!processor.nextTabOnItemSelected(myContext,item)) {
      return;
    }
  }
  final Project project=myContext.getProject();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      new WriteCommandAction(project){
        @Override protected void run(        com.intellij.openapi.application.Result result) throws Throwable {
          final Editor editor=myContext.getEditor();
          if (editor != null) {
            TemplateState templateState=TemplateManagerImpl.getTemplateState(editor);
            if (templateState != null) {
              templateState.nextTab();
            }
          }
        }
      }
.execute();
    }
  }
,ModalityState.current(),project.getDisposed());
}
