{
  if (dataId.equals(DataConstants.EDITOR)) {
    PsiFile psiFile=(PsiFile)getData(DataConstants.PSI_FILE);
    return FileEditorManagerImpl.getEditorForInjectedLanguage(myEditor,psiFile);
  }
  if (DataConstants.PSI_ELEMENT.equals(dataId)) {
    final Editor editor=getEditor();
    final PsiFile psiFile=(PsiFile)getData(DataConstants.PSI_FILE);
    if (psiFile == null) {
      return null;
    }
    return TargetElementUtil.findTargetElement(editor,TargetElementUtil.THROW_STATEMENT_ACCEPTED | TargetElementUtil.THROWS_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED| TargetElementUtil.ELEMENT_NAME_ACCEPTED| TargetElementUtil.NEW_AS_CONSTRUCTOR| TargetElementUtil.LOOKUP_ITEM_ACCEPTED);
  }
  if (DataConstants.LANGUAGE.equals(dataId)) {
    final Editor editor=getEditor();
    final PsiFile psiFile=(PsiFile)getData(DataConstants.PSI_FILE);
    if (psiFile == null) {
      return null;
    }
    return PsiUtil.getLanguageAtOffset(psiFile,editor.getCaretModel().getOffset());
  }
  if (DataConstants.VIRTUAL_FILE.equals(dataId)) {
    return myFile.isValid() ? myFile : null;
  }
  if (DataConstants.PSI_FILE.equals(dataId)) {
    return myFile.isValid() ? PsiManager.getInstance(myProject).findFile(myFile) : null;
  }
  if (DataConstantsEx.TARGET_PSI_ELEMENT.equals(dataId)) {
    return null;
  }
  return null;
}
