{
  final Object o=((FileEditorManagerImpl)FileEditorManager.getInstance(myProject)).getData(dataId,myEditor);
  if (o != null)   return o;
  if (dataId.equals(DataConstants.EDITOR)) {
    return myEditor;
  }
  if (DataConstants.PSI_ELEMENT.equals(dataId)) {
    final PsiFile psiFile=getPsiFile();
    if (psiFile == null)     return null;
    final Editor editor=myEditor;
    return TargetElementUtil.findTargetElement(editor,TargetElementUtil.THROW_STATEMENT_ACCEPTED | TargetElementUtil.THROWS_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED| TargetElementUtil.ELEMENT_NAME_ACCEPTED| TargetElementUtil.NEW_AS_CONSTRUCTOR| TargetElementUtil.LOOKUP_ITEM_ACCEPTED);
  }
  if (DataConstants.LANGUAGE.equals(dataId)) {
    final Editor editor=myEditor;
    final PsiFile psiFile=getPsiFile();
    if (psiFile == null)     return null;
    return PsiUtil.getLanguageAtOffset(psiFile,editor.getCaretModel().getOffset());
  }
  if (DataConstants.VIRTUAL_FILE.equals(dataId)) {
    return myFile.isValid() ? myFile : null;
  }
  if (DataConstants.PSI_FILE.equals(dataId)) {
    return getPsiFile();
  }
  if (DataConstantsEx.TARGET_PSI_ELEMENT.equals(dataId)) {
    return null;
  }
  return null;
}
