{
  boolean myActionVisible=true;
  boolean myActionEnabled=true;
  if (myAction != null) {
    myAction.update(e);
    myActionEnabled=myAction.getTemplatePresentation().isEnabled();
    myActionVisible=myAction.getTemplatePresentation().isVisible();
  }
  final boolean enabled=isEnabled() && isContextComponentOk() && myActionEnabled;
  e.getPresentation().setEnabled(enabled);
  e.getPresentation().setVisible(isVisible() && myActionVisible);
  if (enabled) {
    updateButton(e);
  }
}
