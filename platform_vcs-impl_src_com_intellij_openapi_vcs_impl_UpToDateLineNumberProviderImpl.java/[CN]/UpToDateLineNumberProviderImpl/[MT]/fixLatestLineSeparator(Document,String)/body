{
  final CharSequence documentSequence=document.getCharsSequence();
  if (endsWithSeparator(documentSequence) && (!endsWithSeparator(content))) {
    int numCharsToCopy=1;
    final int docLen=documentSequence.length();
    if (docLen > 1) {
      final char beforeLatest=documentSequence.charAt(docLen - 2);
      if (('\r' == beforeLatest) || ('\n' == beforeLatest)) {
        numCharsToCopy=2;
      }
    }
    return content + documentSequence.subSequence(docLen - numCharsToCopy,docLen);
  }
  return content;
}
