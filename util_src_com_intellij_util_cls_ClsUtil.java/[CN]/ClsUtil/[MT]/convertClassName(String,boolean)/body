{
  String className=convertSlashesToDots ? internalClassName.replace('/','.') : internalClassName;
  int index=className.indexOf('$');
  if (index < 0)   return className;
  StringBuilder buffer=new StringBuilder(className);
  while (true) {
    if (className.length() == index + 1)     break;
    char c=className.charAt(index + 1);
    if (Character.isJavaIdentifierStart(c)) {
      buffer.setCharAt(index,'.');
    }
    index=className.indexOf('$',index + 1);
    if (index < 0)     break;
  }
  return buffer.toString();
}
