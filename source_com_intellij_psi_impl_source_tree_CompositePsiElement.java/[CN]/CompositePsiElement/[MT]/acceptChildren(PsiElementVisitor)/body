{
  TreeElement childNode=getFirstChildNode();
  while (childNode != null) {
    if (childNode instanceof ChameleonElement) {
      childNode=(TreeElement)childNode.getTransformedFirstOrSelf();
      if (childNode == null)       break;
    }
    final PsiElement psi;
    if (childNode instanceof PsiElement) {
      psi=(PsiElement)childNode;
    }
 else {
      psi=childNode.getPsi();
    }
    psi.accept(visitor);
    childNode=childNode.getTreeNext();
  }
}
