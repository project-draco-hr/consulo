{
  DockContainer container=getFactory(DockableEditorContainerFactory.TYPE).createContainer(null);
  register(container);
  final DockWindow window=createWindowFor(null,container);
  window.show(true);
  final EditorWindow editorWindow=((DockableEditorTabbedContainer)container).getSplitters().getOrCreateCurrentWindow(file);
  final Pair<FileEditor[],FileEditorProvider[]> result=fileEditorManager.openFileImpl2(editorWindow,file,true);
  container.add(EditorTabbedContainer.createDockableEditor(myProject,null,file,new Presentation(file.getName()),editorWindow),null);
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      window.myUiContainer.setPreferredSize(null);
    }
  }
);
  return result;
}
