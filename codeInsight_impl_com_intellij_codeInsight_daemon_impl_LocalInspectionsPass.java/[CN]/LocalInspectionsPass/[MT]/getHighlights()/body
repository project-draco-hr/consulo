{
  ArrayList<HighlightInfo> highlights=new ArrayList<HighlightInfo>();
  for (int i=0; i < myDescriptors.size(); i++) {
    ProblemDescriptor problemDescriptor=myDescriptors.get(i);
    String message=renderDescriptionMessage(problemDescriptor);
    HighlightInfoType highlightInfoType=myLevels.get(i);
    HighlightInfo highlightInfo=highlightInfoFromDescriptor(problemDescriptor,highlightInfoType,message,message);
    highlights.add(highlightInfo);
    LocalInspectionTool tool=myTools.get(i);
    List<IntentionAction> options=getStandardIntentionOptions(tool,problemDescriptor.getPsiElement());
    final QuickFix[] fixes=problemDescriptor.getFixes();
    if (fixes != null && fixes.length > 0) {
      for (int k=0; k < fixes.length; k++) {
        QuickFixAction.registerQuickFixAction(highlightInfo,new QuickFixWrapper(problemDescriptor,k),options,tool.getDisplayName());
      }
    }
 else {
      QuickFixAction.registerQuickFixAction(highlightInfo,new EmptyIntentionAction(tool.getDisplayName(),options),options,tool.getDisplayName());
    }
  }
  return highlights;
}
