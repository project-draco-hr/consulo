{
  InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(myProject).getInspectionProfile(myFile);
  for (int i=0; i < myInjectedPsiInspectionResults.size(); i++) {
    InjectedPsiInspectionUtil.InjectedPsiInspectionResult result=myInjectedPsiInspectionResults.get(i);
    LocalInspectionTool tool=result.tool;
    HighlightSeverity severity=inspectionProfile.getErrorLevel(HighlightDisplayKey.find(tool.getShortName())).getSeverity();
    int injectedPsiOffset=result.injectedPsi.getContext().getTextRange().getStartOffset() + result.rangeInsideHost.getStartOffset();
    for (int j=0; j < result.foundProblems.size(); j++) {
      ProblemDescriptor descriptor=result.foundProblems.get(j);
      HighlightInfoType level=highlightTypeFromDescriptor(descriptor,tool,severity);
      HighlightInfo info=createHighlightInfo(descriptor,tool,level);
      if (info == null)       continue;
      HighlightInfo patched=HighlightInfo.createHighlightInfo(info.type,info.startOffset + injectedPsiOffset,info.endOffset + injectedPsiOffset,info.description,info.toolTip);
      infos.add(patched);
    }
  }
}
