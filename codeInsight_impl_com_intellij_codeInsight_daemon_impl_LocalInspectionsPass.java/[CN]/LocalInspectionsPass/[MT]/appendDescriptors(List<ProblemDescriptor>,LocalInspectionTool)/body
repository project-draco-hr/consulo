{
  if (problemDescriptors == null)   return;
  InspectionProfile inspectionProfile=InspectionProjectProfileManager.getInstance(myProject).getInspectionProfile(myFile);
  final HighlightSeverity severity=inspectionProfile.getErrorLevel(HighlightDisplayKey.find(tool.getShortName())).getSeverity();
  for (  ProblemDescriptor problemDescriptor : problemDescriptors) {
    ProgressManager.getInstance().checkCanceled();
    if (!InspectionManagerEx.inspectionResultSuppressed(problemDescriptor.getPsiElement(),tool.getID())) {
      myDescriptors.add(problemDescriptor);
      ProblemHighlightType highlightType=problemDescriptor.getHighlightType();
      HighlightInfoType type=null;
      if (highlightType == ProblemHighlightType.GENERIC_ERROR_OR_WARNING) {
        type=SeverityRegistrar.getHighlightInfoTypeBySeverity(severity);
      }
 else       if (highlightType == ProblemHighlightType.LIKE_DEPRECATED) {
        type=HighlightInfoType.DEPRECATED;
      }
 else       if (highlightType == ProblemHighlightType.LIKE_UNKNOWN_SYMBOL) {
        if (JavaDocReferenceInspection.SHORT_NAME.equals(tool.getShortName())) {
          type=HighlightInfoType.JAVADOC_WRONG_REF;
        }
 else {
          type=HighlightInfoType.WRONG_REF;
        }
      }
 else       if (highlightType == ProblemHighlightType.LIKE_UNUSED_SYMBOL) {
        type=HighlightInfoType.UNUSED_SYMBOL;
      }
      myLevels.add(type);
      myTools.add(tool);
    }
  }
}
