{
  final String basePath=getTestDataPath() + TEST_ROOT;
  final VirtualFile pageTextFile=LocalFileSystem.getInstance().findFileByPath(basePath + pageText);
  assertNotNull(pageTextFile);
  final VirtualFile expectedTextFile=LocalFileSystem.getInstance().findFileByPath(basePath + expected);
  assertNotNull(expectedTextFile);
class JavadocExternalTestFilter extends JavaDocExternalFilter {
    public JavadocExternalTestFilter(    Project project){
      super(project);
    }
    @Override public void doBuildFromStream(    String surl,    Reader input,    StringBuffer data,    boolean search4Encoding) throws IOException {
      super.doBuildFromStream(surl,input,data,search4Encoding);
    }
  }
  JavadocExternalTestFilter filter=new JavadocExternalTestFilter(getProject());
  final StringBuffer extractedData=new StringBuffer();
  filter.doBuildFromStream(url,new StringReader(LoadTextUtil.loadText(pageTextFile).toString()),extractedData,false);
  assertEquals(LoadTextUtil.loadText(expectedTextFile).toString(),extractedData.toString());
}
