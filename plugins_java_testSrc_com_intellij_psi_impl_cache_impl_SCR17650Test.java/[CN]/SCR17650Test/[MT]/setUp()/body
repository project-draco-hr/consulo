{
  super.setUp();
  final File root=FileUtil.createTempFile(getName(),"");
  root.delete();
  root.mkdir();
  myFilesToDelete.add(root);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        VirtualFile rootVFile=LocalFileSystem.getInstance().refreshAndFindFileByPath(root.getAbsolutePath().replace(File.separatorChar,'/'));
        myDir=rootVFile.createChildDirectory(null,"contentAndLibrary");
        VirtualFile file1=myDir.createChildData(null,"A.java");
        VfsUtil.saveText(file1,"package p; public class A{ public void foo(); }");
        VfsUtilCore.copyFile(null,getClassFile(),myDir);
        PsiTestUtil.addSourceRoot(myModule,myDir);
        ModuleRootModificationUtil.addModuleLibrary(myModule,myDir.getUrl());
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
);
}
