{
  Project project=e.getData(DataKeys.PROJECT);
  Change[] changes=e.getData(DataKeys.CHANGES);
  boolean enabled=false;
  if (project != null) {
    final ChangeList changeList=ChangesUtil.getChangeListIfOnlyOne(project,changes);
    if (changes != null && changeList != null) {
      for (      Change c : changes) {
        final AbstractVcs vcs=ChangesUtil.getVcsForChange(c,project);
        if (vcs != null && vcs.getCheckinEnvironment() != null) {
          enabled=true;
        }
      }
    }
  }
  e.getPresentation().setEnabled(enabled);
}
