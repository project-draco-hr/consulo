{
  super(myWindowManager.getCommandProcessor());
  myWindowedDecorator=new WindowedDecorator(myProject,info.copy(),decorator);
  Window window=myWindowedDecorator.getFrame();
  final Rectangle bounds=info.getFloatingBounds();
  if (bounds != null) {
    bounds.setBounds(bounds.x + DIVIDER_WIDTH,bounds.y + DIVIDER_WIDTH,bounds.width - 2 * DIVIDER_WIDTH,bounds.height - 2 * DIVIDER_WIDTH);
  }
  if (bounds != null && bounds.width > 0 && bounds.height > 0 && myWindowManager.isInsideScreenBounds(bounds.x,bounds.y,bounds.width)) {
    window.setBounds(bounds);
  }
 else {
    Dimension size=decorator.getSize();
    if (size.width == 0 || size.height == 0) {
      size=decorator.getPreferredSize();
    }
    window.setSize(size);
    window.setLocationRelativeTo(myFrame);
  }
  myId2WindowedDecorator.put(info.getId(),myWindowedDecorator);
  myWindowedDecorator.addDisposable(new Disposable(){
    @Override public void dispose(){
      if (myId2WindowedDecorator.get(info.getId()) != null) {
        hideToolWindow(info.getId(),false);
      }
    }
  }
);
}
