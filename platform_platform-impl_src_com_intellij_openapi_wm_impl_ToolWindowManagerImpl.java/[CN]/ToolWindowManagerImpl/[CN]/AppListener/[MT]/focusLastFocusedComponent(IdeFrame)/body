{
  final KeyboardFocusManager mgr=KeyboardFocusManager.getCurrentKeyboardFocusManager();
  if (ideFrame == myWindowManager.getFrame(myProject)) {
    final Component owner=mgr.getFocusOwner();
    Component old=myFocusedComponentOnDeactivation != null ? myFocusedComponentOnDeactivation.get() : null;
    if (owner == null && old != null && old.isShowing()) {
      requestFocus(old,false);
    }
    myFocusedComponentOnDeactivation=null;
  }
}
