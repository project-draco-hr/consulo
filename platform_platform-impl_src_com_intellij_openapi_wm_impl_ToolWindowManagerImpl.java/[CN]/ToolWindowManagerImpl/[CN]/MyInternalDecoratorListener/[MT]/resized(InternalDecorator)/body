{
  if (!source.isShowing())   return;
  final WindowInfoImpl info=getInfo(source.getToolWindow().getId());
  if (info.isFloating()) {
    final Window owner=SwingUtilities.getWindowAncestor(source);
    if (owner != null) {
      info.setFloatingBounds(owner.getBounds());
    }
  }
 else {
    if (ToolWindowAnchor.TOP == info.getAnchor() || ToolWindowAnchor.BOTTOM == info.getAnchor()) {
      info.setWeight((float)source.getHeight() / (float)myToolWindowsPane.getMyLayeredPane().getHeight());
      float newSideWeight=(float)source.getWidth() / (float)myToolWindowsPane.getMyLayeredPane().getWidth();
      if (newSideWeight < 1.0f) {
        info.setSideWeight(newSideWeight);
      }
    }
 else {
      info.setWeight((float)source.getWidth() / (float)myToolWindowsPane.getMyLayeredPane().getWidth());
      float newSideWeight=(float)source.getHeight() / (float)myToolWindowsPane.getMyLayeredPane().getHeight();
      if (newSideWeight < 1.0f) {
        info.setSideWeight(newSideWeight);
      }
    }
  }
}
