{
  if (!source.isShowing()) {
    return;
  }
  final WindowInfoImpl info=getInfo(source.getToolWindow().getId());
  InternalDecorator another=null;
  if (info.isFloating()) {
    final Window owner=SwingUtilities.getWindowAncestor(source);
    if (owner != null) {
      info.setFloatingBounds(owner.getBounds());
    }
  }
 else {
    ToolWindowAnchor anchor=info.getAnchor();
    if (source.getParent() instanceof Splitter) {
      float sizeInSplit=anchor.isSplitVertically() ? source.getHeight() : source.getWidth();
      Splitter splitter=(Splitter)source.getParent();
      if (splitter.getSecondComponent() == source) {
        sizeInSplit+=splitter.getDividerWidth();
        another=(InternalDecorator)splitter.getFirstComponent();
      }
 else {
        another=(InternalDecorator)splitter.getSecondComponent();
      }
      if (anchor.isSplitVertically()) {
        info.setSideWeight(sizeInSplit / (float)splitter.getHeight());
      }
 else {
        info.setSideWeight(sizeInSplit / (float)splitter.getWidth());
      }
    }
    float paneWeight=anchor.isHorizontal() ? (float)source.getHeight() / (float)myToolWindowsPane.getMyLayeredPane().getHeight() : (float)source.getWidth() / (float)myToolWindowsPane.getMyLayeredPane().getWidth();
    info.setWeight(paneWeight);
    if (another != null && anchor.isSplitVertically()) {
      paneWeight=anchor.isHorizontal() ? (float)another.getHeight() / (float)myToolWindowsPane.getMyLayeredPane().getHeight() : (float)another.getWidth() / (float)myToolWindowsPane.getMyLayeredPane().getWidth();
      another.getWindowInfo().setWeight(paneWeight);
    }
  }
}
