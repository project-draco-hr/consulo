{
  if (myWindowManager.getCommandProcessor().getCommandCount() > 0 || component == null) {
    return;
  }
  final KeyboardFocusManager mgr=KeyboardFocusManager.getCurrentKeyboardFocusManager();
  final Component owner=mgr.getFocusOwner();
  if (owner instanceof EditorComponentImpl && cause instanceof FocusEvent) {
    JFrame frame=WindowManager.getInstance().getFrame(myProject);
    Component oppositeComponent=((FocusEvent)cause).getOppositeComponent();
    if (oppositeComponent != null && UIUtil.getWindow(oppositeComponent) != frame) {
      return;
    }
  }
  IdeFocusManager.getInstance(myProject).doWhenFocusSettlesDown(new ExpirableRunnable.ForProject(myProject){
    @Override public void run(){
      if (mgr.getFocusOwner() == owner) {
        activateEditorComponent(false);
      }
    }
  }
);
}
