{
  Window activeWindow=myWindowManager.getMostRecentFocusedWindow();
  if (activeWindow instanceof FloatingDecorator) {
    IdeFocusManager ideFocusManager=IdeFocusManager.findInstanceByComponent(activeWindow);
    IdeFrame lastFocusedFrame=ideFocusManager.getLastFocusedFrame();
    JComponent frameComponent=lastFocusedFrame != null ? lastFocusedFrame.getComponent() : null;
    Window lastFocusedWindow=frameComponent != null ? SwingUtilities.getWindowAncestor(frameComponent) : null;
    activeWindow=ObjectUtils.notNull(lastFocusedWindow,activeWindow);
  }
  FileEditorManagerEx fem=FileEditorManagerEx.getInstanceEx(myProject);
  EditorsSplitters splitters=activeWindow != null ? fem.getSplittersFor(activeWindow) : null;
  return splitters != null ? splitters : fem.getSplitters();
}
