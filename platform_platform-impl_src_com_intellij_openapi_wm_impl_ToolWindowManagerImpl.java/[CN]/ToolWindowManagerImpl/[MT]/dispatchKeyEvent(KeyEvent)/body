{
  if (e.getKeyCode() != KeyEvent.VK_CONTROL && e.getKeyCode() != KeyEvent.VK_ALT && e.getKeyCode() != KeyEvent.VK_SHIFT && e.getKeyCode() != KeyEvent.VK_META) {
    if (e.getModifiers() == 0) {
      resetHoldState();
    }
    return false;
  }
  if (e.getID() != KeyEvent.KEY_PRESSED && e.getID() != KeyEvent.KEY_RELEASED)   return false;
  Component parent=UIUtil.findUltimateParent(e.getComponent());
  if (parent instanceof IdeFrame) {
    if (((IdeFrame)parent).getProject() != myProject) {
      resetHoldState();
      return false;
    }
  }
  Keymap keymap=KeymapManager.getInstance().getActiveKeymap();
  Shortcut[] baseShortcut=keymap.getShortcuts("ActivateProjectToolWindow");
  int baseModifiers=0;
  for (  Shortcut each : baseShortcut) {
    if (each instanceof KeyboardShortcut) {
      KeyStroke keyStroke=((KeyboardShortcut)each).getFirstKeyStroke();
      baseModifiers=keyStroke.getModifiers();
      if (baseModifiers > 0) {
        break;
      }
    }
  }
  if (baseModifiers == 0) {
    resetHoldState();
    return false;
  }
  Set<Integer> vks=QuickAccessSettings.getModifiersVKs(baseModifiers);
  if (vks.contains(e.getKeyCode())) {
    boolean pressed=e.getID() == KeyEvent.KEY_PRESSED;
    if (SwitchManager.areAllModifiersPressed(e.getModifiers(),vks) || !pressed) {
      processState(pressed);
    }
 else {
      resetHoldState();
    }
  }
  return false;
}
