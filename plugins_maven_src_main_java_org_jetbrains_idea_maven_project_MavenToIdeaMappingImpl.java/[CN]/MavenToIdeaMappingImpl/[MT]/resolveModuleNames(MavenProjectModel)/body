{
  final List<String> duplicateNames=collectDuplicateModuleNames(mavenProjectModel);
  mavenProjectModel.visit(new MavenProjectModel.MavenProjectVisitorPlain(){
    public void visit(    MavenProjectModel.Node node){
      final MavenId id=node.getId();
      final String name=node.getLinkedModule() != null ? node.getLinkedModule().getName() : generateModuleName(id,duplicateNames);
      projectIdToModuleName.put(id,name);
      projectToModuleName.put(node,name);
      libraryNameToModuleName.put(getLibraryName(id),name);
      projectNames.add(name);
    }
  }
);
}
