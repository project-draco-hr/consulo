{
  if (!directory.isDirectory())   return;
  File[] subdirectories=directory.listFiles(DirectoryFilter.getInstance());
  for (int i=0; i < subdirectories.length; i++) {
    File subdirectory=subdirectories[i];
    if (isAdminDir(subdirectory)) {
      FileUtil.copyDir(subdirectory,translatePath(subdirectory));
    }
 else {
      saveCVSInfo(subdirectory);
    }
  }
  File createdDirectory=translatePath(directory);
  if (doesNotContainFileEntry(createdDirectory) && doesNotContainDirectoriesExceptCvs(createdDirectory)) {
    FileUtil.delete(createdDirectory);
  }
}
