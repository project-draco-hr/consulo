{
  PsiClass aClass=createClass(myDialog.getClassName());
  myTargetClass.add(aClass);
  PsiNewExpression newExpr=(PsiNewExpression)myAnonClass.getParent();
  StringBuffer buf=new StringBuffer("new ");
  buf.append(aClass.getName());
  buf.append("(");
  boolean isFirstParameter=true;
  for (int idx=0; idx < myVariableInfos.length; idx++) {
    VariableInfo info=myVariableInfos[idx];
    if (info.passAsParameter) {
      if (isFirstParameter) {
        isFirstParameter=false;
      }
 else {
        buf.append(",");
      }
      buf.append(info.variable.getName());
    }
  }
  buf.append(")");
  PsiExpression newClassExpression=myManager.getElementFactory().createExpressionFromText(buf.toString(),null);
  newClassExpression=(PsiExpression)CodeStyleManager.getInstance(myProject).reformat(newClassExpression);
  newExpr.replace(newClassExpression);
}
