{
  PsiElementFactory factory=constructor.getManager().getElementFactory();
  for (  VariableInfo info : myVariableInfos) {
    if (info.saveInField) {
      String text=info.fieldName + "=a;";
      boolean useThis=info.passAsParameter && info.parameterName.equals(info.fieldName);
      if (useThis) {
        text="this." + text;
      }
      PsiExpressionStatement statement=(PsiExpressionStatement)factory.createStatementFromText(text,null);
      statement=(PsiExpressionStatement)CodeStyleManager.getInstance(myProject).reformat(statement);
      statement=(PsiExpressionStatement)constructor.getBody().add(statement);
      PsiAssignmentExpression assignment=(PsiAssignmentExpression)statement.getExpression();
      PsiReferenceExpression rExpr=(PsiReferenceExpression)assignment.getRExpression();
      PsiIdentifier identifier=(PsiIdentifier)rExpr.getReferenceNameElement();
      if (info.passAsParameter) {
        identifier.replace(factory.createIdentifier(info.parameterName));
      }
 else {
        TextRange range=rExpr.getTextRange();
        BlockSupport blockSupport=myProject.getComponent(BlockSupport.class);
        blockSupport.reparseRange(statement.getContainingFile(),range.getStartOffset(),range.getEndOffset(),"...");
      }
    }
  }
}
