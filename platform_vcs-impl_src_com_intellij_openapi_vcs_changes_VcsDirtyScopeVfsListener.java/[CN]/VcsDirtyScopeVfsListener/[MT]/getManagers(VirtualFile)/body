{
  final Collection<VcsDirtyScopeManager> result=new HashSet<VcsDirtyScopeManager>();
  if (file == null) {
    return result;
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      final Collection<Project> projects=myProjectLocator.getProjectsForFile(file);
      for (      Project project : projects) {
        final VcsDirtyScopeManager manager=VcsDirtyScopeManager.getInstance(project);
        if (manager != null) {
          result.add(manager);
        }
      }
    }
  }
);
  return result;
}
