{
  final FileAndDirsCollector dirtyFilesAndDirs=new FileAndDirsCollector();
  for (  VFileEvent event : events) {
    final String path=event.getPath();
    if (event instanceof VFileDeleteEvent) {
      final VirtualFile file=((VFileDeleteEvent)event).getFile();
      if (!file.isInLocalFileSystem()) {
        return;
      }
      dirtyFilesAndDirs.add(file);
    }
 else     if (event instanceof VFileMoveEvent) {
      final VirtualFile file=((VFileMoveEvent)event).getFile();
      dirtyFilesAndDirs.addToFiles(file);
    }
 else     if (event instanceof VFilePropertyChangeEvent) {
      final VirtualFile file=((VFilePropertyChangeEvent)event).getFile();
      dirtyFilesAndDirs.addToFiles(file);
    }
  }
  dirtyFilesAndDirs.markDirty();
}
