{
  if (scopeRoot == null)   return true;
  final boolean[] stopped=new boolean[]{false};
  scopeRoot.accept(new JavaRecursiveElementWalkingVisitor(){
    @Override public void visitReferenceExpression(    PsiReferenceExpression expression){
      if (!stopped[0]) {
        visitElement(expression);
      }
    }
    @Override public void visitClass(    PsiClass aClass){
      stopped[0]=!processor.process(aClass);
      super.visitClass(aClass);
    }
  }
);
  return !stopped[0];
}
