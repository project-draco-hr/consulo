{
  if (!(element instanceof GenericDomValue))   return null;
  PsiElement psiElement;
  if (element instanceof GenericAttributeValue) {
    psiElement=((GenericAttributeValue)element).getXmlAttributeValue();
    if (psiElement == null)     return null;
  }
 else {
    if (element.getXmlTag().getValue().getTextElements().length == 0)     return null;
    psiElement=element.getXmlElement();
  }
  Converter converter=((GenericDomValue)element).getConverter();
  if (converter instanceof PsiReferenceConverter) {
    return ((PsiReferenceConverter)converter).createReferences(psiElement);
  }
  GenericDomValue domElement=(GenericDomValue)element;
  final Class clazz=DomUtil.getGenericValueType(domElement.getDomElementType());
  if (PsiType.class.isAssignableFrom(clazz)) {
    return new PsiReference[]{new PsiTypeReference(this,(GenericDomValue<PsiType>)domElement)};
  }
  if (PsiClass.class.isAssignableFrom(clazz)) {
    JavaClassReferenceProvider provider=new JavaClassReferenceProvider();
    return provider.getReferencesByElement(psiElement);
  }
  if (Integer.class.isAssignableFrom(clazz)) {
    return new PsiReference[]{new GenericDomValueReference(this,domElement){
      public Object[] getVariants(){
        return new Object[]{"239","42"};
      }
    }
};
  }
  if (String.class.isAssignableFrom(clazz)) {
    return null;
  }
  PsiReferenceFactory provider=myProviders.get(clazz);
  if (provider != null) {
    return provider.getReferencesByElement(psiElement);
  }
  return new PsiReference[]{new GenericDomValueReference(this,domElement)};
}
