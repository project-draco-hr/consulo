{
  if (!(element instanceof XmlTag || element instanceof XmlAttributeValue))   return GenericReference.EMPTY_ARRAY;
  PsiElement originalElement=element.getUserData(PsiUtil.ORIGINAL_KEY);
  if (originalElement != null) {
    element=originalElement;
  }
  final XmlTag tag=PsiTreeUtil.getParentOfType(element,XmlTag.class,false);
  final DomElement domElement=DomManager.getDomManager(element.getManager().getProject()).getDomElement(tag);
  if (domElement == null)   return GenericReference.EMPTY_ARRAY;
  if (element instanceof XmlAttributeValue) {
    final XmlAttributeValue value=(XmlAttributeValue)element;
    final String name=((XmlAttribute)value.getParent()).getLocalName();
    final DomAttributeChildDescription childDescription=domElement.getGenericInfo().getAttributeChildDescription(name);
    if (childDescription != null) {
      final GenericReference reference=createReference(childDescription.getValues(domElement).get(0));
      if (reference != null) {
        return new GenericReference[]{reference};
      }
    }
  }
 else {
    final GenericDomValueReference reference=createReference(domElement);
    if (reference != null) {
      return new GenericReference[]{reference};
    }
  }
  return GenericReference.EMPTY_ARRAY;
}
