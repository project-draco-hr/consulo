{
  if (!(element instanceof XmlTag))   return GenericReference.EMPTY_ARRAY;
  PsiElement originalElement=element.getUserData(PsiUtil.ORIGINAL_KEY);
  if (originalElement != null) {
    element=originalElement;
  }
  final XmlTag tag=(XmlTag)element;
  final DomElement domElement=DomManager.getDomManager(element.getManager().getProject()).getDomElement(tag);
  if (domElement == null)   return GenericReference.EMPTY_ARRAY;
  List<GenericDomValueReference> result=new ArrayList<GenericDomValueReference>();
  for (  final DomAttributeChildDescription description : domElement.getGenericInfo().getAttributeChildrenDescriptions()) {
    if (tag.getAttribute(description.getXmlElementName(),null) != null) {
      final GenericDomValueReference reference=createReference(description.getDomAttributeValue(domElement));
      if (reference != null) {
        result.add(reference);
      }
    }
  }
  final GenericDomValueReference reference=createReference(domElement);
  if (reference != null) {
    result.add(reference);
  }
  return result.toArray(new GenericReference[result.size()]);
}
