{
  if (lineNumber < 0) {
    return psiFile;
  }
  final Document document=PsiDocumentManager.getInstance(psiFile.getProject()).getDocument(psiFile);
  if (lineNumber >= document.getLineCount()) {
    return psiFile;
  }
  int startOffset=document.getLineStartOffset(lineNumber);
  if (startOffset == -1) {
    return null;
  }
  PsiElement element;
  while (true) {
    final CharSequence charsSequence=document.getCharsSequence();
    for (; startOffset < charsSequence.length(); startOffset++) {
      char c=charsSequence.charAt(startOffset);
      if (c != ' ' && c != '\t') {
        break;
      }
    }
    element=psiFile.findElementAt(startOffset);
    if (element instanceof PsiComment) {
      startOffset=element.getTextRange().getEndOffset() + 1;
    }
 else {
      break;
    }
  }
  if (element != null && element.getParent() instanceof PsiForStatement) {
    return ((PsiForStatement)element.getParent()).getInitialization();
  }
 else {
    return element;
  }
}
