{
  final boolean isOK=ShowSettingsUtil.getInstance().editConfigurable(project,"#com.intellij.codeInspection.ex.EditInspectionToolsSettingsAction",new Configurable(){
    private InspectionToolsPanel myPanel=new InspectionToolsPanel(inspectionProfile.getName(),project,canChooseDifferentProfile,manager);
    public String getDisplayName(){
      final String title=ApplicationBundle.message("title.errors");
      return canChooseDifferentProfile ? title : (title + ": \'" + inspectionProfile.getName()+ "\' inspection profile");
    }
    public Icon getIcon(){
      return IconLoader.getIcon("/general/configurableErrorHighlighting.png");
    }
    public String getHelpTopic(){
      return "preferences.errorHighlight";
    }
    public JComponent createComponent(){
      if (selectedToolShortName != null) {
        myPanel.selectInspectionTool(selectedToolShortName);
      }
      return myPanel;
    }
    public boolean isModified(){
      return myPanel.isModified();
    }
    public void apply() throws ConfigurationException {
      if (canChooseDifferentProfile) {
        myPanel.apply();
        final InspectionProfileImpl editedProfile=(InspectionProfileImpl)myPanel.getSelectedProfile();
        InspectionProfileManager.getInstance().setRootProfile(editedProfile.getName());
        inspectionProfile.copyFrom(editedProfile);
      }
 else {
        final InspectionProfileImpl editedProfile=(InspectionProfileImpl)myPanel.getSelectedProfile();
        inspectionProfile.copyFrom(editedProfile);
        myPanel.initDescriptors();
      }
    }
    public void reset(){
      myPanel.reset();
    }
    public void disposeUIResources(){
      if (myPanel != null) {
        myPanel.saveVisibleState();
        myPanel=null;
      }
    }
  }
);
  return isOK;
}
