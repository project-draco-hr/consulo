{
  ArrayList<File> files=new ArrayList<File>();
  for (  final File file : filesToRemove) {
    if (CvsUtil.fileIsLocallyAdded(file)) {
      CvsUtil.removeEntryFor(file);
    }
 else {
      files.add(file);
    }
  }
  if (files.isEmpty())   return CvsHandler.NULL;
  Collection<File> filesToBeRemoved=files;
  if (showDialog) {
    AbstractDeleteConfirmationDialog dialog=AbstractDeleteConfirmationDialog.createDialog(project,files,dialogOptions);
    dialog.show();
    if (!dialog.isOK())     return CvsHandler.NULL;
    if (dialog.getFilesToRemove().isEmpty())     return CvsHandler.NULL;
    filesToBeRemoved=dialog.getFilesToRemove();
  }
  return CommandCvsHandler.createRemoveFilesHandler(project,filesToBeRemoved);
}
