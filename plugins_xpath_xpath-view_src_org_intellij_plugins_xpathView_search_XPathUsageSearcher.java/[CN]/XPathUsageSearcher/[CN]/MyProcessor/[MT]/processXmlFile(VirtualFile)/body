{
  myIndicator.setText(findBundleMessage("find.searching.for.string.in.file.progress",myExpression.expression,t.getPresentableUrl()));
  final PsiFile psiFile=myManager.findFile(t);
  if (psiFile instanceof XmlFile) {
    final XmlFile t1=(XmlFile)psiFile;
    final XmlDocument document;
    FileViewProvider fileViewProvider=t1.getViewProvider();
    if (fileViewProvider instanceof TemplateLanguageFileViewProvider) {
      final PsiFile root=fileViewProvider.getPsi(((TemplateLanguageFileViewProvider)fileViewProvider).getTemplateDataLanguage());
      if (root instanceof XmlFile) {
        document=((XmlFile)root).getDocument();
      }
 else {
        document=null;
      }
    }
 else {
      document=t1.getDocument();
    }
    if (document != null) {
      process(document);
    }
  }
  myIndicator.setFraction(++myFileCount / (double)myTotalFileCount);
}
