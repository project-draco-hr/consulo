{
  if (visitedClasses.contains(aClass))   return;
  visitedClasses.add(aClass);
  for (  PsiField field : aClass.getFields()) {
    String name=field.getName();
    if (!allFields.containsKey(name)) {
      allFields.put(name,new CandidateInfo(field,substitutor));
    }
    if (includeSynthetic) {
      if (field instanceof GrField && field.getName() != null) {
        final GrField property=(GrField)field;
        final PsiMethod getter=property.getGetter();
        if (getter != null)         addMethod(allMethods,getter,substitutor);
        final PsiMethod setter=property.getSetter();
        if (setter != null)         addMethod(allMethods,setter,substitutor);
      }
    }
  }
  for (  PsiMethod method : aClass.getMethods()) {
    addMethod(allMethods,method,substitutor);
  }
  String qName=aClass.getQualifiedName();
  if (qName != null) {
    List<PsiMethod> defaultMethods=GroovyPsiManager.getInstance(aClass.getProject()).getDefaultMethods(qName);
    for (    PsiMethod defaultMethod : defaultMethods) {
      addMethod(allMethods,defaultMethod,substitutor);
    }
  }
  for (  PsiClassType superType : aClass.getSuperTypes()) {
    PsiClass superClass=superType.resolve();
    if (superClass != null) {
      final PsiSubstitutor superSubstitutor=TypeConversionUtil.getSuperClassSubstitutor(superClass,aClass,substitutor);
      processClass(superClass,allFields,allMethods,visitedClasses,superSubstitutor,includeSynthetic);
    }
  }
}
