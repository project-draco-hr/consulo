{
  VirtualFile vFile=file.getVirtualFile();
  String newName=myNewName + "." + vFile.getExtension();
  FileDocumentManager.getInstance().saveDocument(PsiDocumentManager.getInstance(file.getProject()).getDocument(file));
  try {
    vFile.rename(file.getManager(),newName);
  }
 catch (  IOException e) {
    throw new IncorrectOperationException(e.toString());
  }
  DaemonCodeAnalyzer.getInstance(project).updateVisibleHighlighters(editor);
}
