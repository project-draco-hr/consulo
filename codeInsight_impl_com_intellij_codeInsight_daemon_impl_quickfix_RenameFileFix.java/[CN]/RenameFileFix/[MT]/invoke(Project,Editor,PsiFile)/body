{
  VirtualFile vFile=file.getVirtualFile();
  String newName=myNewName + "." + vFile.getExtension();
  FileDocumentManager.getInstance().saveDocument(PsiDocumentManager.getInstance(file.getProject()).getDocument(file));
  try {
    vFile.rename(file.getManager(),newName);
  }
 catch (  IOException e) {
    MessagesEx.error(project,e.getMessage()).showNow();
  }
  DaemonCodeAnalyzer.getInstance(project).updateVisibleHighlighters(editor);
}
