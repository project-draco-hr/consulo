{
  final SvnUpdateClientI updateClient;
  if (!isSwitch && SvnConfiguration.UseAcceleration.commandLine.equals(configuration.myUseAcceleration) && Svn17Detector.is17(myVcs.getProject(),root)&& SvnAuthenticationManager.HTTP.equals(sourceUrl.getProtocol())) {
    updateClient=new SvnCommandLineUpdateClient(myVcs.getProject(),null);
  }
 else {
    updateClient=new SvnSvnkitUpdateClient(myVcs.createUpdateClient());
  }
  updateClient.setEventHandler(myHandler);
  updateClient.setUpdateLocksOnDemand(configuration.UPDATE_LOCK_ON_DEMAND);
  return updateClient;
}
