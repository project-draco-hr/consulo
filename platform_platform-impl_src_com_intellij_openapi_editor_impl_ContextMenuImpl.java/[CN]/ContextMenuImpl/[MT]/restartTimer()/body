{
  if (myTimer != null && myTimer.isRunning()) {
    myTimer.stop();
  }
  myTimer=new Timer(500,new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      if (myDisposed)       return;
      if (myTimer != null && myTimer.isRunning())       myTimer.stop();
      myTimer=new Timer(50,new ActionListener(){
        public void actionPerformed(        ActionEvent e){
          if (myShow) {
            if (myVisible) {
              scheduleHide();
              return;
            }
            if (myLayeredPane.getIndexOf(ContextMenuImpl.this) == -1) {
              myCurrentOpacity=0;
              myLayeredPane.add(ContextMenuImpl.this,JLayeredPane.POPUP_LAYER);
              ContextMenuImpl.this.setVisible(true);
              myLayeredPane.revalidate();
            }
            myCurrentOpacity+=20;
            if (myCurrentOpacity > 100) {
              myCurrentOpacity=100;
              myVisible=true;
              myTimer.stop();
              scheduleHide();
            }
            repaint();
          }
 else {
            if (!myVisible) {
              if (myTimer != null && myTimer.isRunning())               myTimer.stop();
              return;
            }
            myCurrentOpacity-=20;
            if (myCurrentOpacity < 0) {
              myCurrentOpacity=0;
              myVisible=false;
              myLayeredPane.remove(ContextMenuImpl.this);
              myLayeredPane.revalidate();
            }
            repaint();
          }
        }
      }
);
      myTimer.setRepeats(true);
      myTimer.start();
    }
  }
);
  myTimer.setRepeats(false);
  myTimer.start();
}
