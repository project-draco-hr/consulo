{
  setLayout(new BorderLayout(0,0));
  myEditor=editor;
  myLayeredPane=layeredPane;
  final ActionManager actionManager=ActionManager.getInstance();
  editor.addEditorMouseListener(new EditorMouseAdapter(){
    @Override public void mouseExited(    final EditorMouseEvent e){
      if (!isInsideActivationArea(container,e.getMouseEvent().getPoint())) {
        toggleContextToolbar(false);
      }
    }
  }
);
  editor.addEditorMouseMotionListener(new EditorMouseMotionAdapter(){
    @Override public void mouseMoved(    final EditorMouseEvent e){
      toggleContextToolbar(isInsideActivationArea(container,e.getMouseEvent().getPoint()));
    }
  }
);
  AnAction action=actionManager.getAction("EditorContextBarMenu");
  if (action == null) {
    action=new DefaultActionGroup();
    actionManager.registerAction(ACTION_GROUP,action);
  }
  if (action instanceof ActionGroup) {
    myActionGroup=(ActionGroup)action;
  }
  myComponent=createComponent();
  add(myComponent);
  setVisible(false);
  setOpaque(false);
}
