{
  if (parentType == null) {
    parentType=getTreeParent() != null ? getTreeParent().getElementType() : null;
  }
  if (parentType == REFERENCE_EXPRESSION) {
{
      final VariableResolverProcessor processor=new VariableResolverProcessor(this);
      PsiScopesUtil.resolveAndWalk(processor,this,null);
      JavaResolveResult[] result=processor.getResult();
      if (result.length > 0) {
        return result;
      }
    }
{
      final PsiElement classNameElement=getReferenceNameElement();
      if (!(classNameElement instanceof PsiIdentifier))       return JavaResolveResult.EMPTY_ARRAY;
      final String className=classNameElement.getText();
      final ClassResolverProcessor processor=new ClassResolverProcessor(className,this);
      PsiScopesUtil.resolveAndWalk(processor,this,null);
      JavaResolveResult[] result=processor.getResult();
      if (result.length > 0) {
        return processor.getResult();
      }
    }
    final String packageName=getCachedTextSkipWhiteSpaceAndComments();
    final PsiManager manager=getManager();
    final PsiPackage aPackage=manager.findPackage(packageName);
    if (aPackage == null) {
      if (!manager.isPartOfPackagePrefix(packageName)) {
        return JavaResolveResult.EMPTY_ARRAY;
      }
 else {
        return CandidateInfo.RESOLVE_RESULT_FOR_PACKAGE_PREFIX_PACKAGE;
      }
    }
    return new JavaResolveResult[]{new CandidateInfo(aPackage,PsiSubstitutor.EMPTY)};
  }
 else   if (parentType == METHOD_CALL_EXPRESSION) {
    final PsiMethodCallExpression methodCall=(PsiMethodCallExpression)getParent();
    final MethodResolverProcessor processor=new MethodResolverProcessor(methodCall);
    try {
      PsiScopesUtil.setupAndRunProcessor(processor,methodCall,false);
    }
 catch (    MethodProcessorSetupFailedException e) {
      return JavaResolveResult.EMPTY_ARRAY;
    }
    return processor.getResult();
  }
 else {
    final VariableResolverProcessor processor=new VariableResolverProcessor(this);
    PsiScopesUtil.resolveAndWalk(processor,this,null);
    return processor.getResult();
  }
}
