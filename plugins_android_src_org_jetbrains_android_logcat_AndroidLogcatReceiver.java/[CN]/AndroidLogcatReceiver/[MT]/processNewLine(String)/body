{
  Matcher matcher=LOG_PATTERN.matcher(line);
  if (myLastMessageHeader == null && matcher.matches()) {
    myLastMessageHeader=new LogMessageHeader();
    myLastMessageHeader.myTime=matcher.group(1);
    myLastMessageHeader.myPid=Integer.valueOf(matcher.group(2));
    myLastMessageHeader.myLogLevel=getByLetterString(matcher.group(4));
    myLastMessageHeader.myTag=matcher.group(5).trim();
  }
 else {
    if (line.length() == 0)     return;
    String text=myLastMessageHeader == null ? SHIFT + line : getFullMessage(line,myLastMessageHeader);
    if (myLastMessageHeader == null) {
      myLastMessageHeader=new LogMessageHeader();
      myLastMessageHeader.myLogLevel=myPrevLogLevel;
    }
    try {
      myWriter.write(text + '\n');
    }
 catch (    IOException ignored) {
      LOG.info(ignored);
    }
    myPrevLogLevel=myLastMessageHeader.myLogLevel;
    myLastMessageHeader=null;
  }
}
