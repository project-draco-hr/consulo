{
  if (myDocument != null) {
    uninstallDocumentListener(true);
  }
  myDocument=document;
  installDocumentListener();
  if (myEditor != null) {
    boolean isFocused=isFocusOwner();
    EditorEx newEditor=createEditor();
    releaseEditor(myEditor);
    myEditor=newEditor;
    add(myEditor.getComponent(),BorderLayout.CENTER);
    validate();
    if (isFocused) {
      myEditor.getContentComponent().requestFocus();
    }
  }
}
