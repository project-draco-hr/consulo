{
  if (myDocument != null) {
    uninstallDocumentListener(true);
  }
  myDocument=document;
  installDocumentListener();
  if (myEditor == null)   return;
  boolean isFocused=isFocusOwner();
  Editor editor=myEditor;
  myEditor=createEditor();
  releaseEditor(editor);
  add(myEditor.getComponent());
  validate();
  if (isFocused) {
    myEditor.getContentComponent().requestFocus();
  }
}
