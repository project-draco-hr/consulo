{
  final boolean isOneLineMode=isOneLineMode();
  editor.setOneLineMode(isOneLineMode);
  EditorColorsManager colorsManager=EditorColorsManager.getInstance();
  final EditorColorsScheme defaultScheme=UIUtil.isUnderDarcula() ? colorsManager.getGlobalScheme() : colorsManager.getScheme(EditorColorsManager.DEFAULT_SCHEME_NAME);
  EditorColorsScheme customGlobalScheme=isOneLineMode ? defaultScheme : null;
  editor.setColorsScheme(editor.createBoundColorSchemeDelegate(customGlobalScheme));
  EditorColorsScheme colorsScheme=editor.getColorsScheme();
  editor.getSettings().setCaretRowShown(false);
  setupEditorFont(editor);
  updateBorder(editor);
  editor.setBackgroundColor(getBackgroundColor(isEnabled(),colorsScheme));
}
