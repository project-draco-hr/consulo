{
  if (UIUtil.isUnderAquaLookAndFeel() || UIUtil.isUnderBuildInLaF()) {
    editor.setBorder(UIUtil.isUnderBuildInLaF() ? new DarculaEditorTextFieldBorder() : new MacUIUtil.EditorTextFieldBorder(this));
    editor.addFocusListener(new FocusChangeListener(){
      @Override public void focusGained(      Editor editor){
        repaint();
      }
      @Override public void focusLost(      Editor editor){
        repaint();
      }
    }
);
  }
 else {
    editor.setBorder(BorderFactory.createCompoundBorder(UIUtil.getTextFieldBorder(),BorderFactory.createEmptyBorder(2,2,2,2)));
  }
}
