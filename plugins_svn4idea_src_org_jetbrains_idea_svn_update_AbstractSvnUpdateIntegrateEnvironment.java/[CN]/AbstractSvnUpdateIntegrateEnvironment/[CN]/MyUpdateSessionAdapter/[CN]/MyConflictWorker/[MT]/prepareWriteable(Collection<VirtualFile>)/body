{
  final List<VirtualFile> writeable=new ArrayList<VirtualFile>();
  for (  VirtualFile vf : files) {
    if (myVcs.equals(myPlVcsManager.getVcsFor(vf))) {
      writeable.add(vf);
    }
  }
  final ReadonlyStatusHandler.OperationStatus operationStatus=ReadonlyStatusHandler.getInstance(myVcs.getProject()).ensureFilesWritable(writeable);
  writeable.removeAll(Arrays.asList(operationStatus.getReadonlyFiles()));
  return writeable;
}
