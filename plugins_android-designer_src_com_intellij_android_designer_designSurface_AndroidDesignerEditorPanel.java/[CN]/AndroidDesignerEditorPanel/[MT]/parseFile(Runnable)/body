{
  final RadViewComponent[] rootComponents=new RadViewComponent[1];
  final MetaManager metaManager=ViewsMetaManager.getInstance(getProject());
  final String layoutXmlText=ApplicationManager.getApplication().runReadAction(new Computable<String>(){
    RadViewComponent myComponent;
    @Override public String compute(){
      XmlTag root=myXmlFile.getRootTag();
      if (root != null) {
        root.accept(new XmlRecursiveElementVisitor(){
          @Override public void visitXmlTag(          XmlTag tag){
            myComponent=new RadViewComponent(myComponent);
            myComponent.setTag(tag);
            myComponent.setMetaModel(metaManager.getModelByTag(tag.getName()));
            if (rootComponents[0] == null) {
              rootComponents[0]=myComponent;
            }
            super.visitXmlTag(tag);
            myComponent=(RadViewComponent)myComponent.getParent();
          }
        }
);
      }
      return myXmlFile.getText();
    }
  }
);
  createRenderer(layoutXmlText,new ThrowableRunnable<Throwable>(){
    @Override public void run() throws Throwable {
      checkRenderer();
      RootView rootView=new RootView(mySession.getImage(),30,20);
      updateRootComponent(rootComponents,mySession.getRootViews(),rootView);
      JPanel rootPanel=new JPanel(null);
      rootPanel.setBackground(Color.WHITE);
      rootPanel.add(rootView);
      removeNativeRoot();
      myRootComponent=rootComponents[0];
      myLayeredPane.add(rootPanel,LAYER_COMPONENT);
      runnable.run();
    }
  }
);
}
