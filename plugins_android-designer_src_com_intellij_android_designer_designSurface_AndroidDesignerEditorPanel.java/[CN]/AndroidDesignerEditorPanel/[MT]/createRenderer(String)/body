{
  mySession=ApplicationManager.getApplication().executeOnPooledThread(new Callable<RenderSession>(){
    @Override public RenderSession call() throws Exception {
      AndroidPlatform platform=AndroidPlatform.getInstance(myModule);
      IAndroidTarget target=platform.getTarget();
      AndroidFacet facet=AndroidFacet.getInstance(myModule);
      LayoutDeviceManager layoutDeviceManager=new LayoutDeviceManager();
      layoutDeviceManager.loadDevices(platform.getSdkData());
      LayoutDevice layoutDevice=layoutDeviceManager.getCombinedList().get(0);
      LayoutDeviceConfiguration deviceConfiguration=layoutDevice.getConfigurations().get(0);
      FolderConfiguration config=new FolderConfiguration();
      config.set(deviceConfiguration.getConfiguration());
      config.setUiModeQualifier(new UiModeQualifier(UiMode.NORMAL));
      config.setNightModeQualifier(new NightModeQualifier(NightMode.NIGHT));
      config.setLanguageQualifier(new LanguageQualifier());
      config.setRegionQualifier(new RegionQualifier());
      float xdpi=deviceConfiguration.getDevice().getXDpi();
      float ydpi=deviceConfiguration.getDevice().getYDpi();
      ThemeData theme=new ThemeData("Theme",false);
      return RenderUtil.createRenderSession(getProject(),layoutXmlText,myFile,target,facet,config,xdpi,ydpi,theme);
    }
  }
).get();
}
