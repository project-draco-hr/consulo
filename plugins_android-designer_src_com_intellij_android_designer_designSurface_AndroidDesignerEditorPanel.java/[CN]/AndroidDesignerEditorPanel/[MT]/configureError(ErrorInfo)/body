{
  List<FixableIssueMessage> warnMessages=null;
  Throwable renderCreator=null;
  if (info.myThrowable instanceof MyThrowable) {
    renderCreator=info.myThrowable;
    info.myThrowable=((MyThrowable)info.myThrowable).original;
  }
  if (info.myThrowable instanceof AndroidSdkNotConfiguredException) {
    info.myShowLog=false;
    info.myShowStack=false;
    if (AndroidMavenUtil.isMavenizedModule(getModule())) {
      info.myMessages.add(new FixableMessageInfo(true,AndroidBundle.message("android.maven.cannot.parse.android.sdk.error",getModule().getName()),"","",null,null));
    }
 else {
      info.myMessages.add(new FixableMessageInfo(true,"Please ","configure"," Android SDK",new Runnable(){
        @Override public void run(){
          AndroidSdkUtils.openModuleDependenciesConfigurable(getModule());
        }
      }
,null));
    }
  }
 else   if (info.myThrowable instanceof DeviceIsNotSpecifiedException) {
    info.myShowLog=false;
    info.myShowStack=false;
    info.myMessages.add(new FixableMessageInfo(true,"Device is not specified, click ","here"," to launch AVD Manager",new Runnable(){
      @Override public void run(){
        new RunAndroidAvdManagerAction().doAction(getProject());
      }
    }
,null));
  }
 else   if (((info.myThrowable instanceof ClassNotFoundException || info.myThrowable instanceof NoClassDefFoundError) && myParseTime && !info.myThrowable.toString().contains("jetbrains")&& !info.myThrowable.toString().contains("intellij")) || info.myThrowable instanceof ProcessCanceledException) {
    info.myShowLog=false;
  }
 else {
    boolean renderError=info.myThrowable instanceof RenderingException;
    if (renderError) {
      RenderingException exception=(RenderingException)info.myThrowable;
      warnMessages=exception.getWarnMessages();
      if (StringUtil.isEmpty(exception.getPresentableMessage())) {
        Throwable[] causes=exception.getCauses();
        if (causes.length == 0) {
          info.myThrowable=new Exception(AndroidBundle.message("android.layout.preview.default.error.message"),exception);
        }
 else         if (causes.length == 1) {
          info.myThrowable=causes[0];
        }
 else {
          info.myThrowable=new RenderingException(AndroidBundle.message("android.layout.preview.default.error.message"),causes);
        }
      }
    }
    if (warnMessages == null) {
      info.myShowMessage=myParseTime || renderError;
      info.myShowLog=!renderError;
      info.myShowStack=renderError;
    }
 else {
      info.myShowLog=false;
      info.myShowStack=true;
    }
  }
  showWarnings(warnMessages);
  StringBuilder builder=new StringBuilder();
  builder.append("ActiveTool: ").append(myToolProvider.getActiveTool());
  builder.append("\nSDK: ");
  try {
    AndroidPlatform platform=AndroidPlatform.getInstance(getModule());
    IAndroidTarget target=platform.getTarget();
    builder.append(target.getFullName()).append(" - ").append(target.getVersion());
  }
 catch (  Throwable e) {
    builder.append("<unknown>");
  }
  if (renderCreator != null) {
    builder.append("\nCreateRendererStack:\n");
    ByteArrayOutputStream stream=new ByteArrayOutputStream();
    renderCreator.printStackTrace(new PrintStream(stream));
    builder.append(stream.toString());
  }
  if (info.myThrowable instanceof IndexOutOfBoundsException && myRootComponent != null && mySession != null) {
    builder.append("\n-------- RadTree --------\n");
    ModelParser.printTree(builder,myRootComponent,0);
    builder.append("\n-------- ViewTree(").append(mySession.getRootViews().size()).append(") --------\n");
    for (    ViewInfo viewInfo : mySession.getRootViews()) {
      ModelParser.printTree(builder,viewInfo,0);
    }
  }
  info.myMessage=builder.toString();
}
