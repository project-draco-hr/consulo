{
  super(module,file);
  myGlassLayer.addKeyListener(new KeyAdapter(){
    @Override public void keyPressed(    final KeyEvent event){
      if (event.getKeyCode() == KeyEvent.VK_F2) {
        myToolProvider.setActiveTool(new CreationTool(true,new ComponentCreationFactory(){
          @Override @NotNull public RadComponent create() throws Exception {
            return new RadViewComponent(null,event.isControlDown() ? "swing" : "android");
          }
        }
));
      }
    }
  }
);
  try {
    AndroidPlatform platform=AndroidPlatform.getInstance(module);
    IAndroidTarget target=platform.getTarget();
    AndroidFacet facet=AndroidFacet.getInstance(module);
    LayoutDeviceManager layoutDeviceManager=new LayoutDeviceManager();
    layoutDeviceManager.loadDevices(platform.getSdkData());
    LayoutDevice layoutDevice=layoutDeviceManager.getCombinedList().get(0);
    LayoutDeviceConfiguration deviceConfiguration=layoutDevice.getConfigurations().get(0);
    FolderConfiguration config=new FolderConfiguration();
    config.set(deviceConfiguration.getConfiguration());
    config.setUiModeQualifier(new UiModeQualifier(UiMode.NORMAL));
    config.setNightModeQualifier(new NightModeQualifier(NightMode.NIGHT));
    config.setLanguageQualifier(new LanguageQualifier());
    config.setRegionQualifier(new RegionQualifier());
    float xdpi=deviceConfiguration.getDevice().getXDpi();
    float ydpi=deviceConfiguration.getDevice().getYDpi();
    ThemeData theme=new ThemeData("Theme",false);
    String layoutXmlText=new String(file.contentsToByteArray());
synchronized (RENDERING_LOCK) {
      mySession=RenderUtil.createRenderSession(module.getProject(),layoutXmlText,file,target,facet,config,xdpi,ydpi,theme);
    }
    InputStream stream=file.getInputStream();
    SAXParser parser=SAXParserFactory.newInstance().newSAXParser();
    parser.parse(stream,new DefaultHandler(){
      RadViewComponent myComponent;
      @Override public void startElement(      String uri,      String localName,      String qName,      Attributes attributes) throws SAXException {
        myComponent=new RadViewComponent(myComponent,qName);
        if (myRootComponent == null) {
          myRootComponent=myComponent;
        }
      }
      @Override public void endElement(      String uri,      String localName,      String qName) throws SAXException {
        if (myComponent != null) {
          myComponent=(RadViewComponent)myComponent.getParent();
        }
      }
    }
);
    stream.close();
    Result result=mySession.getResult();
    if (!result.isSuccess()) {
      Throwable exception=result.getException();
      if (exception != null) {
        throw exception;
      }
 else {
        throw new Exception("No session result");
      }
    }
    RootView rootView=new RootView(mySession.getImage(),30,20);
    updateRootComponent(mySession.getRootViews(),rootView);
    JPanel rootPanel=new JPanel(null);
    rootPanel.setBackground(Color.WHITE);
    rootPanel.add(rootView);
    myLayeredPane.add(rootPanel,LAYER_COMPONENT);
    showDesignerCard();
  }
 catch (  Throwable e) {
    showError("Parse error: ",e);
  }
}
