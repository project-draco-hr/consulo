{
  myProject=project;
  myDateOrRevisionOrTagSettings=new DateOrRevisionOrTagSettings(new TagsProviderOnEnvironment(){
    @Override @Nullable protected CvsEnvironment getCvsEnvironment(){
      return createConfigurationWithCurrentSettings();
    }
  }
,project);
  myPanel.setSize(myPanel.getPreferredSize());
  myCvsRootConfigurationPanel.setLayout(new BorderLayout());
  myCvsRootConfigurationPanelView=new CvsRootAsStringConfigurationPanel(readOnly,myIsUpdating);
  myCvsRootConfigurationPanel.add(myCvsRootConfigurationPanelView.getPanel(),BorderLayout.CENTER);
  myConnectionSettingsPanel.setLayout(new CardLayout());
  myExtConnectionSettingsEditor=new ExtConnectionDualPanel(project);
  mySshConnectionSettingsEditor=new SshConnectionSettingsPanel(project);
  myLocalConnectionSettingsPanel=new LocalConnectionSettingsPanel(project);
  myConnectionSettingsPanel.add(myExtConnectionSettingsEditor.getPanel(),CvsMethod.EXT_METHOD.getDisplayName());
  myConnectionSettingsPanel.add(new JPanel(),CvsMethod.PSERVER_METHOD.getDisplayName());
  myConnectionSettingsPanel.add(mySshConnectionSettingsEditor.getPanel(),CvsMethod.SSH_METHOD.getDisplayName());
  myConnectionSettingsPanel.add(myLocalConnectionSettingsPanel.getPanel(),CvsMethod.LOCAL_METHOD.getDisplayName());
  myConnectionSettingsPanel.add(new JPanel(),EMPTY);
  myDateOrRevisionOrTagSettingsPanel.setLayout(new BorderLayout(4,2));
  myDateOrRevisionOrTagSettingsPanel.add(myDateOrRevisionOrTagSettings.getPanel(),BorderLayout.CENTER);
  myTestButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (!myPanel.isEnabled())       return;
      testConfiguration();
    }
  }
);
  addCvsRootChangeListener(new CvsRootChangeListener(){
    @Override public void onCvsRootChanged(){
      setExtPanelEnabling();
    }
  }
);
  myProxySettingsPanel.setLayout(new CardLayout());
  myProxySettingsNonEmptyPanel=new ProxySettingsPanel();
  myProxySettingsPanel.add(myProxySettingsNonEmptyPanel.getPanel(),NON_EMPTY_PROXY_SETTINGS);
  myProxySettingsPanel.add(new JPanel(),EMPTY);
  if (readOnly) {
    setEnabled(myDateOrRevisionOrTagSettingsPanel,false);
  }
}
