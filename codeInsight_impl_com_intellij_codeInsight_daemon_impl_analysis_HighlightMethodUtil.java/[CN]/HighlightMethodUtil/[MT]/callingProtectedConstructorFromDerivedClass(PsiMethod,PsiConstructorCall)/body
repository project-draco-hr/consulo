{
  if (!constructor.hasModifierProperty(PsiModifier.PROTECTED))   return false;
  PsiClass constructorClass=constructor.getContainingClass();
  if (constructorClass == null)   return false;
  if (place instanceof PsiNewExpression && ((PsiNewExpression)place).getAnonymousClass() != null)   return false;
  PsiElement curElement=place;
  while (true) {
    PsiClass aClass=PsiTreeUtil.getParentOfType(curElement,PsiClass.class);
    if (aClass == null)     return false;
    curElement=aClass;
    if (aClass.isInheritor(constructorClass,true) && !JavaPsiFacade.getInstance(aClass.getProject()).arePackagesTheSame(aClass,constructorClass)) {
      return true;
    }
  }
}
