{
  if (superMethod == null)   return null;
  PsiManager manager=superMethod.getManager();
  PsiModifierList superModifierList=superMethod.getModifierList();
  PsiModifierList modifierList=method.getModifierList();
  if (superModifierList.hasModifierProperty(PsiModifier.PRIVATE))   return null;
  if (superModifierList.hasModifierProperty(PsiModifier.PACKAGE_LOCAL) && !manager.arePackagesTheSame(aClass,superClass)) {
    return null;
  }
  boolean isMethodStatic=modifierList.hasModifierProperty(PsiModifier.STATIC);
  boolean isSuperMethodStatic=superModifierList.hasModifierProperty(PsiModifier.STATIC);
  if (isMethodStatic != isSuperMethodStatic) {
    TextRange textRange=includeRealPositionInfo ? HighlightUtil.getMethodDeclarationTextRange(method) : new TextRange(0,0);
    @NonNls final String messageKey=isMethodStatic ? "static.method.cannot.override.instance.method" : "instance.method.cannot.override.static.method";
    String message=JavaErrorMessages.message(messageKey,HighlightUtil.formatMethod(method),HighlightUtil.formatClass(aClass),HighlightUtil.formatMethod(superMethod),HighlightUtil.formatClass(superClass));
    HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,textRange,message);
    if (!isSuperMethodStatic || HighlightUtil.getIncompatibleModifier(PsiModifier.STATIC,modifierList) == null) {
      QuickFixAction.registerQuickFixAction(highlightInfo,new ModifierFix(method,PsiModifier.STATIC,isSuperMethodStatic),null);
    }
    if (manager.isInProject(superMethod) && (!isMethodStatic || HighlightUtil.getIncompatibleModifier(PsiModifier.STATIC,superModifierList) == null)) {
      QuickFixAction.registerQuickFixAction(highlightInfo,new ModifierFix(superMethod,PsiModifier.STATIC,isMethodStatic,true),null);
    }
    return highlightInfo;
  }
  return null;
}
