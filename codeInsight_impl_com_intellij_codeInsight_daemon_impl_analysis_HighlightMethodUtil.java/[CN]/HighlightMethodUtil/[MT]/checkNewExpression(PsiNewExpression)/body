{
  PsiType type=expression.getType();
  if (!(type instanceof PsiClassType))   return null;
  PsiClassType.ClassResolveResult typeResult=((PsiClassType)type).resolveGenerics();
  PsiClass aClass=typeResult.getElement();
  if (aClass == null)   return null;
  if (aClass instanceof PsiAnonymousClass) {
    type=((PsiAnonymousClass)aClass).getBaseClassType();
    typeResult=((PsiClassType)type).resolveGenerics();
    aClass=typeResult.getElement();
    if (aClass == null)     return null;
  }
  PsiJavaCodeReferenceElement classReference=expression.getClassOrAnonymousClassReference();
  return checkConstructorCall(typeResult,expression,type,classReference);
}
