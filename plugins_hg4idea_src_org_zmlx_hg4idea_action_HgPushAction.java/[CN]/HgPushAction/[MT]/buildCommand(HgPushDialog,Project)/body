{
  return new HgGlobalCommand(){
    public VirtualFile getRepo(){
      return dialog.getRepository();
    }
    public void execute(){
      HgPushCommand command=new HgPushCommand(project,dialog.getRepository(),dialog.getTarget());
      command.setRevision(dialog.getRevision());
      command.setForce(dialog.isForce());
      command.setBranch(dialog.getBranch());
      command.execute(new HgCommandResultHandler(){
        @Override public void process(        @Nullable HgCommandResult result){
          int commitsNum=getNumberOfPushedCommits(result);
          String title=null;
          String description=null;
          if (commitsNum >= 0) {
            title="Pushed successfully";
            description="Pushed " + commitsNum + " "+ StringUtil.pluralize("commit",commitsNum)+ ".";
          }
          new HgCommandResultNotifier(project).process(result,title,description);
        }
      }
);
    }
  }
;
}
