{
  try {
    Class<?> aClass=object.getClass();
    Binding binding=getClassBinding(aClass,aClass,null);
    if (binding instanceof BeanBinding) {
      return ((BeanBinding)binding).serialize(object,true,filter);
    }
 else {
      return (Element)binding.serialize(object,null,filter);
    }
  }
 catch (  XmlSerializationException e) {
    throw e;
  }
catch (  Exception e) {
    throw new XmlSerializationException("Can't serialize instance of " + object.getClass(),e);
  }
}
