{
  myEditor=editor;
  FoldRegion[] foldRegions=myEditor.getFoldingModel().getAllFoldRegions();
  Arrays.sort(foldRegions,FOLD_REGIONS_COMPARATOR);
  TIntArrayList foldBeginings=new TIntArrayList();
  for (int i=0; i < foldRegions.length; i++) {
    FoldRegion foldRegion=foldRegions[i];
    if (!foldRegion.isValid() || foldRegion.isExpanded())     continue;
    foldBeginings.add(getStartLine(foldRegion));
    myCollapsed.add(foldRegion);
  }
  myFoldBeginings=foldBeginings.toNativeArray();
}
