{
  super(project);
  myProject=project;
  myShowDialog=(myProject != null && (!myProject.isDefault()) && !HgUtil.isHgRoot(myProject.getBaseDir()));
  myFileDescriptor=new FileChooserDescriptor(false,true,false,false,false,false){
    public void validateSelectedFiles(    VirtualFile[] files) throws Exception {
      if (HgUtil.isHgRoot(files[0])) {
        throw new ConfigurationException(HgVcsMessages.message("hg4idea.init.this.is.hg.root",files[0].getPresentableUrl()));
      }
      updateEverything();
    }
  }
;
  myFileDescriptor.setHideIgnored(false);
  init();
}
