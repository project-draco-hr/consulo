{
  myVcs.addGitReferenceListener(myReferenceListener);
  myChangeManager.addChangeListListener(myChangesListener);
synchronized (myStateLock) {
    updateRootCollection();
    if (myCurrentConfiguration == null) {
      if (calculateSpecialStatus() == SpecialStatus.NORMAL) {
        try {
          detectLocals();
        }
 catch (        VcsException e) {
          LOG.info("Exception during detecting local configurations",e);
          GitUIUtil.checkGitExecutableAndShowNotification(myProject,e);
        }
      }
    }
    referencesChanged();
  }
  if (isWidgetEnabled()) {
    installWidget();
  }
}
