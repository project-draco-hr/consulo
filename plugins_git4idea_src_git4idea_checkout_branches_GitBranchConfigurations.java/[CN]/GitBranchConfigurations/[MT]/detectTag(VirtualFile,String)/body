{
  try {
    GitSimpleHandler h=new GitSimpleHandler(myProject,root,GitCommand.DESCRIBE);
    h.addParameters("--tags","--exact",ref);
    h.setNoSSH(true);
    return h.run().trim();
  }
 catch (  VcsException e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("describe HEAD failed for root: " + root.getPath());
    }
    try {
      return GitRevisionNumber.resolve(myProject,root,ref).asString();
    }
 catch (    VcsException e1) {
      throw new RuntimeException("Unexpected exception at this time, the failure should have been detected at current(): ",e1);
    }
  }
}
