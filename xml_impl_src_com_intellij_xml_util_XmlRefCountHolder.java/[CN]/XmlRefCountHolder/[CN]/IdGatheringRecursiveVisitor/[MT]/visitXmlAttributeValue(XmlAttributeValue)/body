{
  final PsiElement element=value.getParent();
  if (!(element instanceof XmlAttribute))   return;
  final XmlAttribute attribute=(XmlAttribute)element;
  final XmlTag tag=attribute.getParent();
  if (tag == null)   return;
  final XmlElementDescriptor descriptor=tag.getDescriptor();
  if (descriptor == null)   return;
  final XmlAttributeDescriptor attributeDescriptor=descriptor.getAttributeDescriptor(attribute);
  if (attributeDescriptor == null)   return;
  if (attributeDescriptor.hasIdType()) {
    updateMap(attribute,value,false);
  }
 else {
    final PsiReference[] references=value.getReferences();
    for (    PsiReference r : references) {
      if (r instanceof IdReferenceProvider.GlobalAttributeValueSelfReference) {
        updateMap(attribute,value,r.isSoft());
      }
    }
  }
  if (attributeDescriptor.hasIdRefType() && PsiTreeUtil.getChildOfType(value,OuterLanguageElement.class) == null) {
    myHolder.registerIdReference(value);
  }
  String s=value.getValue();
  if (s != null) {
    int pos=s.indexOf(':');
    if (pos > 0) {
      myHolder.addUsedPrefix(s.substring(0,pos));
    }
  }
  super.visitXmlAttributeValue(value);
}
