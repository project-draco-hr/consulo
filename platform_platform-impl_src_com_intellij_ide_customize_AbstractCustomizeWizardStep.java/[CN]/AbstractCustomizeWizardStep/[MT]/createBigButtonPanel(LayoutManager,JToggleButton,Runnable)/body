{
  final JPanel panel=new JPanel(layout){
    @Override public Color getBackground(){
      return anchorButton.isSelected() ? getSelectionBackground() : super.getBackground();
    }
  }
;
  panel.setOpaque(anchorButton.isSelected());
  new ClickListener(){
    @Override public boolean onClick(    @NotNull MouseEvent event,    int clickCount){
      anchorButton.setSelected(true);
      return true;
    }
  }
.installOn(panel);
  anchorButton.addItemListener(new ItemListener(){
    boolean curState=anchorButton.isSelected();
    @Override public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED && curState != anchorButton.isSelected()) {
        action.run();
      }
      curState=anchorButton.isSelected();
      panel.setOpaque(curState);
      panel.repaint();
    }
  }
);
  return panel;
}
