{
  Map map=(Map)context;
  map.clear();
  for (  Object childNode : childNodes) {
    if (XmlSerializerImpl.isIgnoredNode(childNode)) {
      continue;
    }
    Element entry=(Element)childNode;
    Object k=null;
    Object v=null;
    if (!entry.getName().equals(getEntryAttributeName())) {
      LOG.warn("unexpected entry for serialized Map will be skipped: " + entry);
      continue;
    }
    Attribute keyAttr=entry.getAttribute(getKeyAttributeName());
    if (keyAttr != null) {
      k=myKeyBinding.deserialize(context,keyAttr);
    }
 else {
      if (myMapAnnotation != null && !myMapAnnotation.surroundKeyWithTag()) {
        for (        Object child : JDOMUtil.getContent(entry)) {
          if (myKeyBinding.isBoundTo(child)) {
            k=myKeyBinding.deserialize(context,child);
            break;
          }
        }
      }
 else {
        k=Binding.deserializeList(myKeyBinding,context,XmlSerializerImpl.getFilteredContent(entry.getChild(getKeyAttributeName())));
      }
    }
    Attribute valueAttr=entry.getAttribute(getValueAttributeName());
    if (valueAttr != null) {
      v=myValueBinding.deserialize(context,valueAttr);
    }
 else {
      if (myMapAnnotation != null && !myMapAnnotation.surroundValueWithTag()) {
        for (        Content child : entry.getContent()) {
          if (myValueBinding.isBoundTo(child)) {
            v=myValueBinding.deserialize(context,child);
            break;
          }
        }
      }
 else {
        v=Binding.deserializeList(myValueBinding,context,XmlSerializerImpl.getFilteredContent(entry.getChild(getValueAttributeName())));
      }
    }
    map.put(k,v);
  }
  return map;
}
