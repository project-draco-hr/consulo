{
  final IdReferenceProvider idReferenceProvider=new IdReferenceProvider();
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,idReferenceProvider.getIdForAttributeNames(),idReferenceProvider.getIdForFilter(),true,idReferenceProvider,PsiReferenceRegistrar.DEFAULT_PRIORITY);
  final DtdReferencesProvider dtdReferencesProvider=new DtdReferencesProvider();
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlEntityRef.class),dtdReferencesProvider);
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlDoctype.class),dtdReferencesProvider);
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlElementDecl.class),dtdReferencesProvider);
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlAttlistDecl.class),dtdReferencesProvider);
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlElementContentSpec.class),dtdReferencesProvider);
  registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlToken.class),dtdReferencesProvider);
  URIReferenceProvider uriProvider=new URIReferenceProvider();
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,null,dtdReferencesProvider.getSystemReferenceFilter(),uriProvider);
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,new String[]{"href"},new ScopeFilter(new ParentElementFilter(new AndFilter(new AndFilter(XmlTagFilter.INSTANCE,new XmlTextFilter("include")),new NamespaceFilter(XmlUtil.XINCLUDE_URI)),2)),true,uriProvider);
  final SchemaReferencesProvider schemaReferencesProvider=new SchemaReferencesProvider();
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,schemaReferencesProvider.getCandidateAttributeNamesForSchemaReferences(),new ScopeFilter(new ParentElementFilter(new NamespaceFilter(XmlUtil.SCHEMA_URIS),2)),schemaReferencesProvider);
  registrar.registerReferenceProvider(xmlAttributeValue(xmlAttribute().withNamespace(XmlUtil.XML_SCHEMA_INSTANCE_URI)).withLocalName("type"),schemaReferencesProvider);
  registrar.registerReferenceProvider(xmlAttributeValue(xmlAttribute().withNamespace(XmlUtil.XML_SCHEMA_INSTANCE_URI)).withLocalName("noNamespaceSchemaLocation","schemaLocation"),uriProvider);
  registrar.registerReferenceProvider(xmlAttributeValue().withLocalName("schemaLocation","namespace").withSuperParent(2,xmlTag().withNamespace(XmlUtil.SCHEMA_URIS).withLocalName(string().oneOf("import","include","redefine"))),uriProvider);
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,null,URIReferenceProvider.ELEMENT_FILTER,true,uriProvider);
  XmlUtil.registerXmlAttributeValueReferenceProvider(registrar,new String[]{"encoding"},new ScopeFilter(new ParentElementFilter(new ClassFilter(XmlProcessingInstruction.class))),true,new XmlEncodingReferenceProvider());
}
