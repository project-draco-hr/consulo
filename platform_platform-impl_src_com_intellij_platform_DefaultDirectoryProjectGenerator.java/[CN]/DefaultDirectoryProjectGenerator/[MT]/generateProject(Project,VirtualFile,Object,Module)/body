{
  new WriteAction<Object>(){
    @Override protected void run(    Result<Object> result) throws Throwable {
      ModuleManager moduleManager=ModuleManager.getInstance(project);
      ModifiableModuleModel modifiableModel=moduleManager.getModifiableModel();
      Module newModule=modifiableModel.newModule(baseDir.getName(),baseDir.getPath());
      ModuleRootManager moduleRootManager=ModuleRootManager.getInstance(newModule);
      ModifiableRootModel modifiableModelForModule=moduleRootManager.getModifiableModel();
      modifiableModelForModule.addContentEntry(baseDir);
      modifiableModelForModule.commit();
      modifiableModel.commit();
    }
  }
.execute();
}
