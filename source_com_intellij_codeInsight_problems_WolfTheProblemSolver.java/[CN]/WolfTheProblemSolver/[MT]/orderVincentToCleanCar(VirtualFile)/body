{
  final Document document=FileDocumentManager.getInstance().getDocument(file);
  if (willBeHighlightedAnyway(file))   return;
  final PsiFile psiFile=PsiManager.getInstance(myProject).findFile(file);
  if (psiFile == null)   return;
  ProgressManager.getInstance().runProcess(new Runnable(){
    public void run(){
      try {
        ProblemsToolWindow.getInstance(myProject).setProgressText("Checking '" + file.getPresentableUrl() + "'");
        GeneralHighlightingPass pass=new GeneralHighlightingPass(myProject,psiFile,document,0,document.getTextLength(),false,true);
        pass.doCollectInformation(myProgress);
      }
  finally {
        ProblemsToolWindow.getInstance(myProject).setProgressText("");
      }
    }
  }
,myProgress);
}
