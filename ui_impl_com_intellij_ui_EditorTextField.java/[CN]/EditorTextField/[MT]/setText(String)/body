{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
        public void run(){
          myDocument.replaceString(0,myDocument.getTextLength(),text);
          if (myEditor != null) {
            myEditor.getCaretModel().moveToOffset(myDocument.getTextLength());
          }
        }
      }
,null,null);
    }
  }
);
}
