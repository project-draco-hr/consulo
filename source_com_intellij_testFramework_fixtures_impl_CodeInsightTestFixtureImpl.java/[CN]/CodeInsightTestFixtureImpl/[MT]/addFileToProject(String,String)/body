{
  VirtualFile root=ModuleRootManager.getInstance(myProjectFixture.getModule()).getSourceRoots()[0];
  if (root.getParent() == null) {
    root=LocalFileSystem.getInstance().findFileByPath(getTempDirPath());
  }
  final VirtualFile[] virtualFile=new VirtualFile[1];
  final VirtualFile dir=VfsUtil.createDirectories(root.getPath() + "/" + StringUtil.getPackageName(relativePath,'/'));
  new WriteCommandAction.Simple(getProject()){
    protected void run() throws Throwable {
      virtualFile[0]=dir.createChildData(this,StringUtil.getShortName(relativePath,'/'));
      VfsUtil.saveText(virtualFile[0],fileText);
    }
  }
.execute();
  return getPsiManager().findFile(virtualFile[0]);
}
