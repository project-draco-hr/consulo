{
  final Project project=myProjectFixture.getProject();
  PsiDocumentManager.getInstance(project).commitAllDocuments();
  Document document=myEditor.getDocument();
  GeneralHighlightingPass action1=new GeneralHighlightingPass(project,myFile,document,0,myFile.getTextLength(),true);
  action1.doCollectInformation(new MockProgressIndicator());
  Collection<HighlightInfo> highlights1=action1.getHighlights();
  PostHighlightingPass action2=new PostHighlightingPass(project,myFile,myEditor,0,myFile.getTextLength());
  action2.doCollectInformation(new MockProgressIndicator());
  Collection<HighlightInfo> highlights2=action2.getHighlights();
  Collection<HighlightInfo> highlights3=null;
  if (!myAvailableTools.isEmpty()) {
    LocalInspectionsPass inspectionsPass=new LocalInspectionsPass(myFile,myEditor.getDocument(),0,myFile.getTextLength());
    inspectionsPass.doCollectInformation(new MockProgressIndicator());
    highlights3=inspectionsPass.getHighlights();
  }
  ExternalToolPass action4=new ExternalToolPass(myFile,myEditor,0,myFile.getTextLength());
  action4.doCollectInformation(new MockProgressIndicator());
  Collection<HighlightInfo> highlights4=action4.getHighlights();
  ArrayList<HighlightInfo> list=new ArrayList<HighlightInfo>();
  list.addAll(highlights1);
  list.addAll(highlights2);
  if (highlights3 != null) {
    list.addAll(highlights3);
  }
  list.addAll(highlights4);
  return list;
}
