{
  final String extension=fileType.getDefaultExtension();
  final File tempFile=File.createTempFile("aaa","." + extension,new File(getTempDirPath()));
  final FileTypeManager fileTypeManager=FileTypeManager.getInstance();
  if (fileTypeManager.getFileTypeByExtension(extension) != fileType) {
    fileTypeManager.associateExtension(fileType,extension);
  }
  final VirtualFile vFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(tempFile);
  VfsUtil.saveText(vFile,text);
  configureInner(vFile,SelectionAndCaretMarkupLoader.fromFile(vFile,getProject()));
  return myFile;
}
