{
  new WriteCommandAction.Simple(myProjectFixture.getProject()){
    protected void run() throws Throwable {
      configureByFilesInner(fileBefore);
      LookupItem[] lookupItems=completeBasic();
      UsefulTestCase.assertNotNull(lookupItems);
      UsefulTestCase.assertSameElements(ContainerUtil.map(lookupItems,new Function<LookupItem,String>(){
        public String fun(        final LookupItem lookupItem){
          return lookupItem.getLookupString();
        }
      }
),expectedItems);
    }
  }
.execute().throwException();
}
