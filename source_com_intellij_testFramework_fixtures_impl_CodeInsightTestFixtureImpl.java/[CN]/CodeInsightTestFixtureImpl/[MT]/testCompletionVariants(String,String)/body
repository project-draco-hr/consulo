{
  new WriteCommandAction.Simple(myProjectFixture.getProject()){
    protected void run() throws Throwable {
      configureByFilesInner(fileBefore);
      LookupItem[] lookupItems=completeBasic();
      UsefulTestCase.assertNotNull("No lookup was shown, probably there was only one lookup element that was inserted automatically",lookupItems);
      UsefulTestCase.assertSameElements(ContainerUtil.map(lookupItems,new Function<LookupItem,String>(){
        public String fun(        final LookupItem lookupItem){
          return lookupItem.getLookupString();
        }
      }
),expectedItems);
    }
  }
.execute().throwException();
}
