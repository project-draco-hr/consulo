{
  assertInitialized();
  new WriteCommandAction(getProject()){
    protected void run(    Result result) throws Throwable {
      EditorActionManager actionManager=EditorActionManager.getInstance();
      final DataContext dataContext=DataManager.getInstance().getDataContext();
      if (c == '\b') {
        performEditorAction(IdeActions.ACTION_EDITOR_BACKSPACE);
        return;
      }
      if (c == '\n') {
        if (LookupManager.getActiveLookup(getEditor()) != null) {
          performEditorAction(IdeActions.ACTION_CHOOSE_LOOKUP_ITEM);
          return;
        }
        performEditorAction(IdeActions.ACTION_EDITOR_ENTER);
        return;
      }
      if (c == '\t') {
        if (LookupManager.getInstance(getProject()).getActiveLookup() != null) {
          performEditorAction(IdeActions.ACTION_CHOOSE_LOOKUP_ITEM_REPLACE);
          return;
        }
      }
      actionManager.getTypedAction().actionPerformed(getEditor(),c,dataContext);
    }
  }
.execute();
}
