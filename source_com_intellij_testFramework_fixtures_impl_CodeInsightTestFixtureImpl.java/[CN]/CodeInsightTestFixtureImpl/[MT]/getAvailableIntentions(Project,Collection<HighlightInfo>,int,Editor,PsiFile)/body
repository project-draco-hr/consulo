{
  final List<IntentionAction> availableActions=new ArrayList<IntentionAction>();
  for (  HighlightInfo info : infos) {
    if (info.quickFixActionRanges != null) {
      for (      Pair<HighlightInfo.IntentionActionDescriptor,TextRange> pair : info.quickFixActionRanges) {
        if (offset > 0 && !pair.getSecond().contains(offset)) {
          continue;
        }
        final HighlightInfo.IntentionActionDescriptor actionDescriptor=pair.first;
        final IntentionAction action=actionDescriptor.getAction();
        if (action.isAvailable(project,editor,file)) {
          availableActions.add(action);
          final List<IntentionAction> actions=actionDescriptor.getOptions(file.findElementAt(editor.getCaretModel().getOffset()));
          if (actions != null) {
            for (            IntentionAction intentionAction : actions) {
              if (intentionAction.isAvailable(project,editor,file)) {
                availableActions.add(intentionAction);
              }
            }
          }
        }
      }
    }
  }
  for (  IntentionAction intentionAction : IntentionManager.getInstance().getIntentionActions()) {
    if (intentionAction.isAvailable(project,editor,file)) {
      availableActions.add(intentionAction);
    }
  }
  return availableActions;
}
