{
  final boolean physicalExists=new File(fileSystemPath).exists();
  if (physicalExists) {
    int index=vfsPath.lastIndexOf('/');
    while (index >= 0) {
      String parentPath=vfsPath.substring(0,index);
      final VirtualFileImpl vParent=(VirtualFileImpl)findFileByPath(parentPath,true,false);
      if (vParent != null) {
        final String path=vfsPath;
        getManager().addEventToFireByRefresh(new Runnable(){
          public void run(){
            if (vParent.findSingleChild(new File(path).getName(),false) != null)             return;
            final VirtualFileImpl newVFile=new VirtualFileImpl(path);
            vParent.addChild(newVFile);
            fireFileCreated(null,newVFile);
          }
        }
,asynchronous,modalityState);
        break;
      }
      vfsPath=parentPath;
      index=vfsPath.lastIndexOf('/');
    }
  }
}
