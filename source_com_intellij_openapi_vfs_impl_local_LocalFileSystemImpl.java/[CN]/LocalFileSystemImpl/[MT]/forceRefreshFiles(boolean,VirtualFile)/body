{
  if (files.length == 0)   return;
  final Runnable runnable=new Runnable(){
    public void run(){
      final ModalityState modalityState=EventQueue.isDispatchThread() ? ModalityState.current() : ModalityState.NON_MMODAL;
      getManager().beforeRefreshStart(asynchronous,modalityState,null);
      for (      VirtualFile file : files) {
        LOG.assertTrue(!file.isDirectory());
        ((VirtualFileImpl)file).refreshInternal(false,modalityState,true,asynchronous);
      }
      getManager().afterRefreshFinish(asynchronous,modalityState);
    }
  }
;
  if (asynchronous) {
    getSynchronizeExecutor().submit(new Runnable(){
      public void run(){
        runnable.run();
      }
    }
);
  }
 else {
    runnable.run();
  }
}
