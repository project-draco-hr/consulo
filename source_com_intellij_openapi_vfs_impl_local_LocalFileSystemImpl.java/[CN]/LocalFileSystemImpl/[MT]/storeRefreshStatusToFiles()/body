{
  if (FileWatcher.isAvailable()) {
    final String[] dirtyFiles;
synchronized (myDirtyFiles) {
      dirtyFiles=myDirtyFiles.toArray(new String[myDirtyFiles.size()]);
      myDirtyFiles.clear();
    }
    for (    String dirtyFile : dirtyFiles) {
      String path=dirtyFile.replace(File.separatorChar,'/');
      VirtualFile file=findFileByPathIfCached(path);
      if (file instanceof NewVirtualFile) {
        ((NewVirtualFile)file).markDirty();
      }
    }
    final String[] deletedFiles;
synchronized (myDeletedFiles) {
      deletedFiles=myDeletedFiles.toArray(new String[myDeletedFiles.size()]);
      myDeletedFiles.clear();
    }
    for (    String deletedFile : deletedFiles) {
      String path=deletedFile.replace(File.separatorChar,'/');
      VirtualFile file=findFileByPathIfCached(path);
      if (file instanceof NewVirtualFile) {
        ((NewVirtualFile)file).markDirty();
      }
    }
  }
}
