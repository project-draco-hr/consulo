{
synchronized (LOCK) {
    if (!myFilePathsToWatchManual.isEmpty()) {
      final String filePath=file.getPath();
      for (int i=0; i < myFilePathsToWatchManual.size(); i++) {
        String pathToWatchManual=myFilePathsToWatchManual.get(i);
        if (FileUtil.startsWith(filePath,pathToWatchManual)) {
          ((VirtualFileImpl)file).refreshInternal(recursive,modalityState,false,asynchronous);
          if ((isRoot || recursive) && ((VirtualFileImpl)file).areChildrenCached()) {
            VirtualFile[] children=file.getChildren();
            for (int j=0; j < children.length; j++) {
              VirtualFile child=children[j];
              refreshInner(child,recursive,modalityState,asynchronous,false,true);
            }
          }
          return;
        }
      }
    }
  }
  if (storeStatus) {
    storeRefreshStatusToFiles();
  }
  refreshInner(file,recursive,modalityState,asynchronous,isRoot,noWatcher);
}
