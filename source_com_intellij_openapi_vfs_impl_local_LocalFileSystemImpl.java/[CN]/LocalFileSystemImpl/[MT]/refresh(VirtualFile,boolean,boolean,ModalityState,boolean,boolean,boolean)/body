{
  final List<String> manualPaths;
synchronized (LOCK) {
    manualPaths=new ArrayList<String>(myFilePathsToWatchManual);
  }
  if (!manualPaths.isEmpty()) {
    final String filePath=file.getPath();
    for (int i=0; i < manualPaths.size(); i++) {
      String pathToWatchManual=manualPaths.get(i);
      if (FileUtil.startsWith(filePath,pathToWatchManual)) {
        ((VirtualFileImpl)file).refreshInternal(recursive,modalityState,false,asynchronous,noWatcher);
        if ((isRoot || recursive) && ((VirtualFileImpl)file).areChildrenCached()) {
          VirtualFile[] children=file.getChildren();
          for (int j=0; j < children.length; j++) {
            VirtualFile child=children[j];
            refreshInner(child,recursive,modalityState,asynchronous,false,true);
          }
        }
        return;
      }
    }
  }
  if (storeStatus) {
    storeRefreshStatusToFiles();
  }
  refreshInner(file,recursive,modalityState,asynchronous,isRoot,noWatcher);
}
