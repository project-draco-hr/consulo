{
  final VirtualFileImpl dir=(VirtualFileImpl)vDir;
  final boolean handled=auxCreateFile(vDir,fileName);
  File physicalFile=new File(dir.getPhysicalFile(),fileName);
  if (!handled) {
    VirtualFile file=dir.findChild(fileName);
    if (file != null || physicalFile.exists()) {
      throw new IOException(VfsBundle.message("file.already.exists.error",physicalFile.getPath()));
    }
    new FileOutputStream(physicalFile).close();
  }
  VirtualFileImpl child=new VirtualFileImpl(dir,physicalFile,false);
  dir.addChild(child);
  fireFileCreated(requestor,child);
  return child;
}
