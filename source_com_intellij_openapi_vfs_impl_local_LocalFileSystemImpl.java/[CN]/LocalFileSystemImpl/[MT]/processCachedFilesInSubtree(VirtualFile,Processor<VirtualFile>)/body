{
  if (file.getFileSystem() != this)   return true;
  if (!processFile(file,processor))   return false;
  if (file.isDirectory()) {
    final Collection<VirtualFile> unaccountedFiles=new HashSet<VirtualFile>(myUnaccountedFiles.values());
    for (    final VirtualFile unaccounted : unaccountedFiles) {
      if (unaccounted != null && VfsUtil.isAncestor(file,unaccounted,true)) {
        if (!processFile(unaccounted,processor))         return false;
      }
    }
  }
  return true;
}
