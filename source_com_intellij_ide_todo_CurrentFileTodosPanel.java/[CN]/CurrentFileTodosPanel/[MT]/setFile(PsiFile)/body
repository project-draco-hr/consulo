{
  if (isDisposed()) {
    return;
  }
  if (file != null && getSelectedFile() == file.getVirtualFile())   return;
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  CurrentFileTodosTreeBuilder builder=(CurrentFileTodosTreeBuilder)myTodoTreeBuilder;
  builder.setFile(file);
  if (myTodoTreeBuilder.isUpdatable()) {
    Object selectableElement=builder.getTodoTreeStructure().getFirstSelectableElement();
    if (selectableElement != null) {
      builder.buildNodeForElement(selectableElement);
      DefaultMutableTreeNode node=builder.getNodeForElement(selectableElement);
      LOG.assertTrue(node != null);
      myTodoTreeBuilder.getTree().getSelectionModel().setSelectionPath(new TreePath(node.getPath()));
    }
  }
}
