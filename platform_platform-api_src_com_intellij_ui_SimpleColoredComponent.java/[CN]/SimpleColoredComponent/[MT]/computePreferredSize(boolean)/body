{
  int width=myIpad.left;
  if (myIcon != null) {
    width+=myIcon.getIconWidth() + myIconTextGap;
  }
  final Insets borderInsets=myBorder != null ? myBorder.getBorderInsets(this) : new Insets(0,0,0,0);
  width+=borderInsets.left;
  Font font=getFont();
  if (font == null) {
    font=UIUtil.getLabelFont();
  }
  LOG.assertTrue(font != null);
  width+=computeTextWidth(font,mainTextOnly);
  width+=myIpad.right + borderInsets.right;
  int height=myIpad.top + myIpad.bottom;
  final FontMetrics metrics=getFontMetrics(font);
  int textHeight=metrics.getHeight();
  textHeight+=borderInsets.top + borderInsets.bottom;
  if (myIcon != null) {
    height+=Math.max(myIcon.getIconHeight(),textHeight);
  }
 else {
    height+=textHeight;
  }
  final Insets insets=getInsets();
  if (insets != null) {
    width+=insets.left + insets.right;
    height+=insets.top + insets.bottom;
  }
  if (isOracleRetina) {
    width++;
  }
  return new Dimension(width,height);
}
