{
  int curX=myIpad.left;
  if (myIcon != null) {
    curX+=myIcon.getIconWidth() + myIconTextGap;
  }
  Font font=getFont();
  LOG.assertTrue(font != null);
  for (int i=0; i < myAttributes.size(); i++) {
    SimpleTextAttributes attributes=myAttributes.get(i);
    if (font.getStyle() != attributes.getStyle()) {
      font=font.deriveFont(attributes.getStyle());
    }
    final FontMetrics metrics=getFontMetrics(font);
    final int curWidth=metrics.stringWidth(myFragments.get(i));
    if (x >= curX && x < curX + curWidth) {
      return i;
    }
    curX+=curWidth;
    final Integer fixedWidth=myAligns.get(i);
    if (fixedWidth != null && curX < fixedWidth.intValue()) {
      curX=fixedWidth.intValue();
    }
  }
  return -1;
}
