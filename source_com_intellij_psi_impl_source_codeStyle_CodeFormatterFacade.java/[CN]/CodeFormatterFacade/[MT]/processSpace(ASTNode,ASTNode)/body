{
  this.child1=child1;
  this.child2=child2;
  ASTNode parent=child1 != null ? child1.getTreeParent() : ((child2 != null) ? child2.getTreeParent() : null);
  if ((child1 == null || child2 == null) && !(SourceTreeToPsiMap.treeElementToPsi(parent) instanceof PsiFile)) {
    if (parent != null)     myHelper.makeSpace(parent,child1,child2,"");
    return child2;
  }
  child2=myCodeFormatter.format(SourceTreeToPsiMap.treeElementToPsi(parent),child1,child2,mySettings,myHelper);
  if (child1 != null && child1.getElementType() == END_OF_LINE_COMMENT) {
    if (myHelper.getLineBreakCount((CompositeElement)parent,child1,child2) == 0) {
      myHelper.makeVerticalSpace((CompositeElement)parent,child1,child2,0);
    }
  }
  return child2;
}
