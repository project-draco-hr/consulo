{
  File file=doCreateTempFile(dir,prefix,suffix,true);
  if (deleteOnExit) {
    file.deleteOnExit();
  }
  if (!file.isDirectory()) {
    throw new IOException("Cannot create directory: " + file);
  }
  return file;
}
