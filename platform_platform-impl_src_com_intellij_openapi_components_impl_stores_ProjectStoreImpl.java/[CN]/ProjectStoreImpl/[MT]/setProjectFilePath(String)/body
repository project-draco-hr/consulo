{
  final StateStorageManager stateStorageManager=getStateStorageManager();
  final LocalFileSystem fs=LocalFileSystem.getInstance();
  final File file=new File(filePath);
  myScheme=StorageScheme.DIRECTORY_BASED;
  final File dirStore=file.isDirectory() ? new File(file,Project.DIRECTORY_STORE_FOLDER) : new File(file.getParentFile(),Project.DIRECTORY_STORE_FOLDER);
  stateStorageManager.addMacro(StoragePathMacros.PROJECT_FILE,new File(dirStore,"misc.xml").getPath());
  final File ws=new File(dirStore,"workspace.xml");
  stateStorageManager.addMacro(StoragePathMacros.WORKSPACE_FILE,ws.getPath());
  stateStorageManager.addMacro(StoragePathMacros.PROJECT_CONFIG_DIR,dirStore.getPath());
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      VfsUtil.markDirtyAndRefresh(false,true,true,fs.refreshAndFindFileByIoFile(dirStore));
    }
  }
,ModalityState.defaultModalityState());
  myPresentableUrl=null;
}
