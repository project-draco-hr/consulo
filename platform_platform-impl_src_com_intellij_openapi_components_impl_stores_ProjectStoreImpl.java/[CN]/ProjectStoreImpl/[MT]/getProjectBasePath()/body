{
  if (myProject.isDefault())   return null;
  final String path=getProjectFilePath();
  if (!StringUtil.isEmptyOrSpaces(path)) {
    return getBasePath(new File(path));
  }
  StateStorage storage=getStateStorageManager().getStateStorage(StoragePathMacros.PROJECT_FILE,RoamingType.PER_USER);
  if (!(storage instanceof FileBasedStorage)) {
    return null;
  }
  return getBasePath(((FileBasedStorage)storage).getFile());
}
