{
  final List<String> args=new ArrayList<String>();
  args.add(target.getPath(IAndroidTarget.AAPT));
  args.add("package");
  args.add("-m");
  if (nonConstantIds) {
    args.add("--non-constant-id");
  }
  if (resourceDirsOsPaths.length > 1) {
    args.add("--auto-add-overlay");
  }
  if (extraPackages.length > 0) {
    args.add("--extra-packages");
    args.add(toPackagesString(extraPackages));
  }
  if (customPackage != null) {
    args.add("--custom-package");
    args.add(customPackage);
  }
  args.add("-J");
  args.add(outDirOsPath);
  args.add("-M");
  args.add(manifestFileOsPath);
  for (  String libResFolderOsPath : resourceDirsOsPaths) {
    args.add("-S");
    args.add(libResFolderOsPath);
  }
  args.add("-I");
  args.add(target.getPath(IAndroidTarget.ANDROID_JAR));
  LOG.info(AndroidCommonUtils.command2string(args));
  return AndroidExecutionUtil.doExecute(ArrayUtil.toStringArray(args));
}
