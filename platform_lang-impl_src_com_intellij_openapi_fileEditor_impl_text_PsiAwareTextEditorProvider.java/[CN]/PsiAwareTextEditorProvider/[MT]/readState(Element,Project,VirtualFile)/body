{
  final TextEditorState state=(TextEditorState)super.readState(element,project,file);
  Element child=element.getChild(FOLDING_ELEMENT);
  Document document=FileDocumentManager.getInstance().getCachedDocument(file);
  if (child != null && document != null) {
    state.FOLDING_STATE=CodeFoldingManager.getInstance(project).readFoldingState(child,document);
  }
 else {
    state.FOLDING_STATE=null;
  }
  return state;
}
