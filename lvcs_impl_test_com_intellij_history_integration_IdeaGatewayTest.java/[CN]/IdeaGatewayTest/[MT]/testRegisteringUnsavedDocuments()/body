{
  vcs.createDirectory("root");
  vcs.createFile("root/f1",null,-1);
  vcs.createFile("root/f2",null,-1);
  gw.addUnsavedDocument("root/f1","one");
  gw.addUnsavedDocument("root/f2","two");
  assertEquals(3,vcs.getRevisionsFor("root").size());
  assertEquals(1,vcs.getRevisionsFor("root/f1").size());
  assertEquals(1,vcs.getRevisionsFor("root/f2").size());
  Clock.setCurrentTimestamp(123);
  gw.registerUnsavedDocuments(vcs);
  List<Revision> rr1=vcs.getRevisionsFor("root/f1");
  List<Revision> rr2=vcs.getRevisionsFor("root/f2");
  assertEquals(2,rr1.size());
  assertEquals(c("one"),rr1.get(0).getEntry().getContent());
  assertEquals(123,rr1.get(0).getEntry().getTimestamp());
  assertEquals(2,rr2.size());
  assertEquals(c("two"),rr2.get(0).getEntry().getContent());
  assertEquals(123,rr2.get(0).getEntry().getTimestamp());
  assertEquals(4,vcs.getRevisionsFor("root").size());
}
