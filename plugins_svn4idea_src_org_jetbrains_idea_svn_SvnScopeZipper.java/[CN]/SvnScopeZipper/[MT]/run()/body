{
  final Set<FilePath> files=myIn.getDirtyFilesNoExpand();
  for (  FilePath file : files) {
    if (file.isDirectory()) {
      final VirtualFile vFile=file.getVirtualFile();
      final MyDirNonRecursive me=createOrGet(file);
      me.setInterestedInParent(true);
      if (vFile != null && vFile.isValid()) {
        for (        VirtualFile child : vFile.getChildren()) {
          me.add(new FilePathImpl(child));
        }
      }
    }
    final FilePath parent=file.getParentPath();
    if (parent != null) {
      final MyDirNonRecursive item=createOrGet(parent);
      item.add(file);
    }
  }
}
