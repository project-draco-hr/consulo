{
  assertIsDispatchThread();
  if (myHighlighter != null) {
    getDocument().removeDocumentListener(myHighlighter);
  }
  getDocument().addDocumentListener(highlighter);
  highlighter.setEditor(this);
  highlighter.setText(getDocument().getCharsSequence());
  myHighlighter=highlighter;
  if (myPanel != null) {
    reinitSettings();
  }
}
