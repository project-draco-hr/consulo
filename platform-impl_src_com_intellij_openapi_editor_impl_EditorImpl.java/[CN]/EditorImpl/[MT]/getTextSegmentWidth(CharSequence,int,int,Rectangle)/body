{
  int x=xStart;
  final int textLength=text.length();
  for (int i=0; i < textLength && xStart < clip.x + clip.width; i++) {
    if (text.charAt(i) == '\t') {
      x=EditorUtil.nextTabStop(x,this);
    }
 else {
      x+=EditorUtil.charWidth(text.charAt(i),fontType,this);
    }
    if (x > clip.x + clip.width) {
      break;
    }
  }
  return x - xStart;
}
