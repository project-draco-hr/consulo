{
  if (!isShowing() || myScrollPane == null || myDocument.isInBulkUpdate()) {
    return;
  }
  assertIsDispatchThread();
  if (endOffset > myDocument.getTextLength()) {
    endOffset=myDocument.getTextLength();
  }
  if (startOffset < endOffset) {
    int startLine=myDocument.getLineNumber(startOffset);
    int endLine=myDocument.getLineNumber(endOffset);
    repaintLines(startLine,endLine);
  }
}
