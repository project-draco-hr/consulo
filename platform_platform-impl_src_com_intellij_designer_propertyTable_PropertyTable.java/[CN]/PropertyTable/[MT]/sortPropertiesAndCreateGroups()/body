{
  if (!mySorted && !myShowGroups)   return;
  Collections.sort(myProperties,new Comparator<Property>(){
    @Override public int compare(    Property o1,    Property o2){
      if (myShowGroups) {
        int result=getGroupComparator().compare(o1.getGroup(),o2.getGroup());
        if (result != 0)         return result;
      }
      return mySorted ? getPropertyComparator().compare(o1,o2) : 0;
    }
  }
);
  if (myShowGroups) {
    for (int i=0; i < myProperties.size() - 1; i++) {
      Property prev=i == 0 ? null : myProperties.get(i - 1);
      Property each=myProperties.get(i);
      String eachGroup=each.getGroup();
      String prevGroup=prev == null ? null : prev.getGroup();
      if (prevGroup != null || eachGroup != null) {
        if (!StringUtil.equalsIgnoreCase(eachGroup,prevGroup)) {
          myProperties.add(i,new GroupProperty(each.getGroup()));
          i++;
        }
      }
    }
  }
}
