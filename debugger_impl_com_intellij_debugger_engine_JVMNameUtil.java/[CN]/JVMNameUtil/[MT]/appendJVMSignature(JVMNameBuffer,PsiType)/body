{
  final PsiType psiType=TypeConversionUtil.erasure(type);
  if (psiType instanceof PsiArrayType) {
    buffer.append(new JVMRawText("["));
    appendJVMSignature(buffer,((PsiArrayType)psiType).getComponentType());
  }
 else   if (psiType instanceof PsiClassType) {
    buffer.append("L");
    final JVMName jvmName=getJVMQualifiedName(psiType);
    if (jvmName instanceof JVMRawText) {
      buffer.append(((JVMRawText)jvmName).getName().replace('.','/'));
    }
 else {
      buffer.append(new JVMName(){
        public String getName(        DebugProcessImpl process) throws EvaluateException {
          return jvmName.getName(process).replace('.','/');
        }
        public String getDisplayName(        DebugProcessImpl debugProcess){
          return jvmName.getDisplayName(debugProcess);
        }
      }
);
    }
    buffer.append(";");
  }
 else   if (psiType instanceof PsiPrimitiveType) {
    buffer.append(getPrimitiveSignature(psiType.getCanonicalText()));
  }
 else {
    LOG.assertTrue(false,"unknown type " + (type != null ? type.getCanonicalText() : "null"));
  }
}
