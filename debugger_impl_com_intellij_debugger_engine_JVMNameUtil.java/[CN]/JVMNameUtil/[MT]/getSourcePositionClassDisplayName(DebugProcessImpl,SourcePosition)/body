{
  final PsiFile positionFile=position.getFile();
  if (positionFile instanceof JspFile) {
    return positionFile.getName() + ":" + position.getLine();
  }
  final PsiClass psiClass=getClassAt(position);
  if (psiClass != null) {
    final String qName=psiClass.getQualifiedName();
    if (qName != null) {
      return qName;
    }
  }
  if (debugProcess != null && debugProcess.isAttached()) {
    List<ReferenceType> allClasses=debugProcess.getPositionManager().getAllClasses(position);
    if (allClasses.size() > 0) {
      return allClasses.get(0).name();
    }
  }
  return DebuggerBundle.message("string.file.line.position",positionFile.getName(),position.getLine());
}
