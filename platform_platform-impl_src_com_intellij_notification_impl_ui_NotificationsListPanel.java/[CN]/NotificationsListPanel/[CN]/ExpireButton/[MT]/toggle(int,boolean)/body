{
  if (hide) {
    setIndex(index);
    setVisible(false);
    return;
  }
  if (getParent() == null) {
    final Window window=SwingUtilities.getWindowAncestor(myList);
    if (!(window instanceof JDialog))     return;
    final JLayeredPane layeredPane=((JDialog)window).getLayeredPane();
    if (layeredPane == null)     return;
    layeredPane.add(this);
    layeredPane.addComponentListener(new ComponentAdapter(){
      @Override public void componentResized(      ComponentEvent e){
        toggle(-1,true);
      }
    }
);
  }
  if (getParent() != null) {
    final Dimension preferredSize=getPreferredSize();
    final Rectangle cellBounds=myList.getCellBounds(index,index);
    Point location=new Point(cellBounds.x + cellBounds.width - preferredSize.width,cellBounds.y);
    location=SwingUtilities.convertPoint(myList,location,getParent());
    setIndex(index);
    setBounds(location.x,location.y,preferredSize.width,preferredSize.height);
  }
  setVisible(true);
}
