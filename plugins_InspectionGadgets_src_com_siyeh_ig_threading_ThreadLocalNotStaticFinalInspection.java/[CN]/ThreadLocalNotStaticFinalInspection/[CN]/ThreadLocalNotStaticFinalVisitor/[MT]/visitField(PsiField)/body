{
  super.visitField(field);
  final PsiType type=field.getType();
  if (!(type instanceof PsiClassType)) {
    return;
  }
  final PsiClassType classType=(PsiClassType)type;
  final PsiClass aClass=classType.resolve();
  if (aClass == null) {
    return;
  }
  if (!ClassUtils.isSubclass(aClass,"java.lang.ThreadLocal")) {
    return;
  }
  final PsiModifierList modifierList=field.getModifierList();
  if (modifierList == null) {
    return;
  }
  if (modifierList.hasModifierProperty(PsiModifier.STATIC) && modifierList.hasModifierProperty(PsiModifier.FINAL)) {
    return;
  }
  registerFieldError(field,field);
}
