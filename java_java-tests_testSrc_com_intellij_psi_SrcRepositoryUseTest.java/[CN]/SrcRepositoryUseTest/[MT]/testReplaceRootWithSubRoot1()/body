{
  final PsiClass aClass=myJavaFacade.findClass("pack.MyInterface1",GlobalSearchScope.allScope(myProject));
  final PsiFile psiFile=aClass.getContainingFile();
  ((PsiJavaFile)psiFile).getClasses();
  psiFile.getText();
  assertNotNull(aClass);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      VirtualFile newSourceRoot=psiFile.getVirtualFile().getParent();
      final ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
      final ContentEntry[] content=rootModel.getContentEntries();
      boolean contentToChangeFound=false;
      for (      ContentEntry contentEntry : content) {
        final SourceFolder[] sourceFolders=contentEntry.getSourceFolders();
        for (        SourceFolder sourceFolder : sourceFolders) {
          contentEntry.removeSourceFolder(sourceFolder);
        }
        final VirtualFile contentRoot=contentEntry.getFile();
        if (contentRoot != null && VfsUtil.isAncestor(contentRoot,newSourceRoot,false)) {
          contentEntry.addSourceFolder(newSourceRoot,false);
          contentToChangeFound=true;
        }
      }
      assertTrue(contentToChangeFound);
      rootModel.commit();
    }
  }
);
  assertEquals("MyInterface1",aClass.getName());
}
