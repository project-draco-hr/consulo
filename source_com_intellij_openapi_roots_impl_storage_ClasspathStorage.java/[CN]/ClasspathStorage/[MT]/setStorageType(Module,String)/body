{
  final String oldStorageType=getStorageType(module);
  if (oldStorageType.equals(storageID)) {
    return;
  }
  if (!oldStorageType.equals(DEFAULT_STORAGE)) {
    getProvider(oldStorageType).cancel(module);
  }
  if (storageID.equals(DEFAULT_STORAGE)) {
    module.clearOption(CLASSPATH_OPTION);
    module.clearOption(CLASSPATH_DIR_OPTION);
  }
 else {
    module.setOption(CLASSPATH_OPTION,storageID);
    final String relPath=PathUtil.getRelative(getModuleDir(module),getStorageRoot(module,null));
    if (!relPath.equals(".")) {
      module.setOption(CLASSPATH_DIR_OPTION,relPath);
    }
  }
}
