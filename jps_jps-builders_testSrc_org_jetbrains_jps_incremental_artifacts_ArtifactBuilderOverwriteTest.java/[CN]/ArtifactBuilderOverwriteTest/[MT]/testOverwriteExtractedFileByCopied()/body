{
  String file=createFile("x.txt","1");
  String jar=createArchive("x.jar","x.txt","2");
  JpsArtifact a=addArtifact(root().fileCopy(file).extractedDir(jar,""));
  buildAll();
  assertOutput(a,fs().file("x.txt","1"));
  buildAllAndAssertUpToDate();
  delete(jar);
  createArchive("x.jar","x.txt","3");
  buildAll();
  assertOutput(a,fs().file("x.txt","1"));
  delete(file);
  buildAll();
  assertOutput(a,fs().file("x.txt","3"));
}
