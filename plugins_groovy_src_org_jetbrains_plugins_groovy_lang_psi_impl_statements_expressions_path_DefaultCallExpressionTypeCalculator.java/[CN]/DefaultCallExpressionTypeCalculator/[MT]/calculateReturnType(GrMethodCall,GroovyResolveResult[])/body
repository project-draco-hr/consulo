{
  GrExpression invoked=callExpression.getInvokedExpression();
  if (invoked instanceof GrReferenceExpression) {
    GrReferenceExpression refExpr=(GrReferenceExpression)invoked;
    PsiManager manager=callExpression.getManager();
    PsiType result=null;
    for (    GroovyResolveResult resolveResult : resolveResults) {
      PsiType returnType=calculateReturnTypeInner(callExpression,refExpr,resolveResult);
      if (returnType == null)       return null;
      if (!(returnType instanceof GrLiteralClassType)) {
        returnType=TypesUtil.substituteBoxAndNormalizeType(returnType,resolveResult.getSubstitutor(),resolveResult.getSpreadState(),callExpression);
        LOG.assertTrue(returnType != null);
      }
      if (result == null || returnType.isAssignableFrom(result)) {
        result=returnType;
      }
 else       if (!result.isAssignableFrom(returnType)) {
        result=TypesUtil.getLeastUpperBound(result,returnType,manager);
      }
    }
    return result;
  }
 else {
    return extractReturnTypeFromType(invoked.getType(),false,callExpression);
  }
}
