{
  myDirectory=aDirectory;
  final boolean showModules=DependencyUISettings.getInstance().UI_SHOW_MODULES;
  myDirName=showModules ? aDirectory.getName() : myDirectory.getVirtualFile().getPresentableUrl();
  myCompactPackages=compactPackages;
  if (showFQName) {
    if (!showModules) {
      myFQName=myDirName;
    }
 else {
      final ProjectFileIndex index=ProjectRootManager.getInstance(myDirectory.getProject()).getFileIndex();
      final VirtualFile directory=myDirectory.getVirtualFile();
      final VirtualFile contentRoot=index.getContentRootForFile(directory);
      if (contentRoot != null) {
        myFQName=VfsUtil.getRelativePath(directory,contentRoot.getParent(),File.separatorChar);
      }
    }
  }
  setUserObject(toString());
}
