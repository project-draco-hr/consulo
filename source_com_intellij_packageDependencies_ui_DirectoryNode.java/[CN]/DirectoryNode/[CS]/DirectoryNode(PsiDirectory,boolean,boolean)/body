{
  myDirectory=aDirectory;
  final VirtualFile directory=myDirectory.getVirtualFile();
  final ProjectFileIndex index=ProjectRootManager.getInstance(myDirectory.getProject()).getFileIndex();
  final boolean showModules=DependencyUISettings.getInstance().UI_SHOW_MODULES;
  if (showModules) {
    myDirName=aDirectory.getName();
    if (showFQName) {
      final VirtualFile contentRoot=index.isInSource(directory) ? index.getSourceRootForFile(directory) : index.getContentRootForFile(directory);
      if (contentRoot != null) {
        myFQName=VfsUtil.getRelativePath(directory,contentRoot,'/');
      }
    }
  }
 else {
    myDirName=PatternPackageSet.getRelativePath(directory,index,true);
    if (showFQName) {
      myFQName=myDirName;
    }
  }
  myCompactPackages=compactPackages;
  setUserObject(toString());
}
