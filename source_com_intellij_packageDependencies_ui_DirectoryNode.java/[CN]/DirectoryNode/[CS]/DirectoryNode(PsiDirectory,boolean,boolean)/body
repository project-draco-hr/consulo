{
  myDirectory=aDirectory;
  VirtualFile directory=myDirectory.getVirtualFile();
  final ProjectFileIndex index=ProjectRootManager.getInstance(myDirectory.getProject()).getFileIndex();
  myDirName=aDirectory.getName();
  if (showFQName) {
    final VirtualFile contentRoot=index.getContentRootForFile(directory);
    if (contentRoot != null) {
      if (directory == contentRoot) {
        myFQName=myDirName;
      }
 else {
        final VirtualFile sourceRoot=index.getSourceRootForFile(directory);
        if (directory == sourceRoot) {
          myFQName=myDirName;
        }
 else         if (sourceRoot != null) {
          myFQName=VfsUtil.getRelativePath(directory,sourceRoot,'/');
        }
 else {
          myFQName=VfsUtil.getRelativePath(directory,contentRoot,'/');
        }
      }
    }
 else {
      myFQName=PatternPackageSet.getLibRelativePath(directory,index);
    }
    myDirName=myFQName;
  }
  myCompactPackages=compactPackages;
}
