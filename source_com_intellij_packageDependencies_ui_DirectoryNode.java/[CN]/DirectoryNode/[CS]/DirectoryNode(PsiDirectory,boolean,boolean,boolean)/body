{
  myDirectory=aDirectory;
  VirtualFile directory=myDirectory.getVirtualFile();
  final ProjectFileIndex index=ProjectRootManager.getInstance(myDirectory.getProject()).getFileIndex();
  myDirName=aDirectory.getName();
  myShowModules=showModules;
  if (showModules) {
    if (showFQName) {
      final VirtualFile contentRoot=index.getContentRootForFile(directory);
      if (contentRoot != null) {
        myFQName=VfsUtil.getRelativePath(directory,contentRoot.getParent(),'/');
      }
 else {
        myFQName=PatternPackageSet.getLibRelativePath(directory,index);
      }
      myDirName=myFQName;
    }
  }
 else {
    if (showFQName) {
      myFQName=PatternPackageSet.getRelativePath(directory,index,true);
    }
  }
  myCompactPackages=compactPackages;
}
