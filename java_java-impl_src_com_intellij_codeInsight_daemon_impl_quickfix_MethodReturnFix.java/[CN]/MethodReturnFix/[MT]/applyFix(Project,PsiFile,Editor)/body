{
  if (!CodeInsightUtilBase.prepareFileForWrite(myMethod.getContainingFile()))   return;
  PsiMethod method=myFixWholeHierarchy ? myMethod.findDeepestSuperMethod() : myMethod;
  if (method == null)   method=myMethod;
  ChangeSignatureProcessor processor=new ChangeSignatureProcessor(myMethod.getProject(),method,false,null,method.getName(),myReturnType,RemoveUnusedParameterFix.getNewParametersInfo(method,null));
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    processor.run();
  }
 else {
    processor.run();
  }
  if (method.getContainingFile() != file) {
    UndoUtil.markPsiFileForUndo(file);
  }
}
