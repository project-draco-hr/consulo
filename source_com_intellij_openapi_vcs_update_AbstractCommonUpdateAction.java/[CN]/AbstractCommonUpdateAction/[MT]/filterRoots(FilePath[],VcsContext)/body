{
  final ArrayList<FilePath> result=new ArrayList<FilePath>();
  for (int i=0; i < roots.length; i++) {
    FilePath file=roots[i];
    AbstractVcs vcs=VcsUtil.getVcsFor(vcsContext.getProject(),file);
    if (vcs != null) {
      if (vcs.fileExistsInVcs(file)) {
        UpdateEnvironment updateEnvironment=myActionInfo.getEnvironment(vcs);
        if (updateEnvironment != null) {
          result.add(file);
        }
      }
    }
  }
  return result.toArray(new FilePath[result.size()]);
}
