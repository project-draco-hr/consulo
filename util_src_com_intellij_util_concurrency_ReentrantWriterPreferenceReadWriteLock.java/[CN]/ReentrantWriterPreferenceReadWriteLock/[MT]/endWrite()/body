{
  --writeHolds_;
  if (writeHolds_ > 0)   return null;
 else {
    activeWriter_=null;
    hasWriteLock.set(false);
    if (waitingReaders_ > 0 && allowReader())     return readerLock_;
 else     if (waitingWriters_ > 0)     return writerLock_;
 else     return null;
  }
}
