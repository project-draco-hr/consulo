{
  final Project project=location.getProject();
  if (PatternConfigurationProducer.isMultipleElementsSelected(context)) {
    return null;
  }
  myMethodLocation=getTestMethod(location);
  if (myMethodLocation == null)   return null;
  RunnerAndConfigurationSettings settings=cloneTemplateConfiguration(project,context);
  final JUnitConfiguration configuration=(JUnitConfiguration)settings.getConfiguration();
  setupConfigurationModule(context,configuration);
  final Module originalModule=configuration.getConfigurationModule().getModule();
  configuration.beMethodConfiguration(myMethodLocation);
  configuration.restoreOriginalModule(originalModule);
  JavaRunConfigurationExtensionManager.getInstance().extendCreatedConfiguration(configuration,location);
  return settings;
}
