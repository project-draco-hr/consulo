{
  List<ContentEntry> contentEntries=new ArrayList<ContentEntry>();
  for (  final VirtualFile file : files) {
    if (isAlreadyAdded(file)) {
      continue;
    }
    final ContentEntry contentEntry=myModel.addContentEntry(file);
    contentEntries.add(contentEntry);
  }
  if (contentEntries.size() > 0) {
    final ContentEntry[] contentEntriesArray=contentEntries.toArray(new ContentEntry[contentEntries.size()]);
    addSourceRoots(myProject,contentEntriesArray,new Runnable(){
      public void run(){
        for (        ContentEntry contentEntry : contentEntriesArray) {
          addContentEntryPanel(contentEntry);
        }
        myEditorsPanel.revalidate();
        myEditorsPanel.repaint();
        selectContentEntry(contentEntriesArray[contentEntriesArray.length - 1]);
      }
    }
);
  }
}
