{
  java.util.List<ContentEntry> contentEntries=new ArrayList<ContentEntry>();
  for (int idx=0; idx < files.length; idx++) {
    final VirtualFile file=files[idx];
    if (isAlreadyAdded(file)) {
      continue;
    }
    final ContentEntry contentEntry=myModel.addContentEntry(file);
    contentEntries.add(contentEntry);
  }
  if (contentEntries.size() > 0) {
    final ContentEntry[] contentEntriesArray=contentEntries.toArray(new ContentEntry[contentEntries.size()]);
    addSourceRoots(myProject,contentEntriesArray,new Runnable(){
      public void run(){
        for (int idx=0; idx < contentEntriesArray.length; idx++) {
          addContentEntryPanel(contentEntriesArray[idx]);
        }
        myEditorsPanel.revalidate();
        myEditorsPanel.repaint();
        selectContentEntry(contentEntriesArray[contentEntriesArray.length - 1]);
      }
    }
);
  }
}
