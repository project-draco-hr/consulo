{
  Change selectedChange=changes[index];
  changes=filterDirectoryAndBinaryChanges(changes);
  if (changes.length == 0) {
    return;
  }
  index=0;
  for (int i=0; i < changes.length; i++) {
    if (changes[i] == selectedChange) {
      index=i;
      break;
    }
  }
  final DiffTool tool=DiffManager.getInstance().getDiffTool();
  final SimpleDiffRequest diffReq=createDiffRequest(changes,index,project,actionsFactory);
  if (diffReq != null) {
    if (showFrame) {
      diffReq.addHint(DiffTool.HINT_SHOW_FRAME);
    }
 else {
      diffReq.addHint(DiffTool.HINT_SHOW_MODAL_DIALOG);
    }
    if (changes.length > 1) {
      diffReq.addHint(DiffTool.HINT_ALLOW_NO_DIFFERENCES);
    }
    tool.show(diffReq);
  }
}
