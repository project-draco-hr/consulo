{
  if (commitContext == null)   return null;
  if (Boolean.TRUE.equals(commitContext.getUserData(ourPutBaseRevisionTextKey))) {
    final File file=new File(myBaseDir,path);
    FilePath filePathOn=VcsContextFactory.SERVICE.getInstance().createFilePathOn(file);
    final Change change=myChangeListManager.getChange(filePathOn);
    List<FilePath> paths=commitContext.getUserData(ourBaseRevisionPaths);
    if (change == null || change.getBeforeRevision() == null || paths == null || !paths.contains(filePathOn))     return null;
    try {
      final String content=change.getBeforeRevision().getContent();
      return content;
    }
 catch (    VcsException e) {
      LOG.info(e);
    }
  }
 else {
    final Map<String,String> map=commitContext.getUserData(ourStoredTexts);
    if (map != null) {
      final File file=new File(myBaseDir,path);
      return map.get(file.getPath());
    }
  }
  return null;
}
