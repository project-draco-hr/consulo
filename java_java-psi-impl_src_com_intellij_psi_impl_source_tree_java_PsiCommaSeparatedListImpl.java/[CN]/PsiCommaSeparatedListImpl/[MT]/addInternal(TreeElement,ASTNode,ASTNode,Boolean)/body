{
  if (myTypesOfElements.contains(first.getElementType()) && myTypesOfElements.contains(last.getElementType())) {
    final CharTable treeCharTab=SharedImplUtil.findCharTableByTree(this);
    final TreeElement firstAdded=super.addInternal(first,last,anchor,before);
    for (ASTNode child=((ASTNode)first).getTreeNext(); child != null; child=child.getTreeNext()) {
      if (child.getElementType() == COMMA)       break;
      if (myTypesOfElements.contains(child.getElementType())) {
        TreeElement comma=Factory.createSingleLeafElement(COMMA,",",0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,first,Boolean.FALSE);
        break;
      }
    }
    for (ASTNode child=((ASTNode)first).getTreePrev(); child != null; child=child.getTreePrev()) {
      if (child.getElementType() == COMMA)       break;
      if (myTypesOfElements.contains(child.getElementType())) {
        TreeElement comma=Factory.createSingleLeafElement(COMMA,",",0,1,treeCharTab,getManager());
        super.addInternal(comma,comma,child,Boolean.FALSE);
        break;
      }
    }
    return firstAdded;
  }
  return super.addInternal(first,last,anchor,before);
}
