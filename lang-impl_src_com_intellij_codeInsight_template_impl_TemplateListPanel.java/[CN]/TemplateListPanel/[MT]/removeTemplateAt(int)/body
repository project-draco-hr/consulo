{
  JTree tree=myTreeTable.getTree();
  TreePath path=tree.getPathForRow(row);
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
  LOG.assertTrue(node.getUserObject() instanceof TemplateImpl);
  TemplateImpl template=(TemplateImpl)node.getUserObject();
  myTemplates.remove(new TemplateKey(template));
  DefaultMutableTreeNode parent=(DefaultMutableTreeNode)node.getParent();
  TreePath treePathToSelect=(parent.getChildAfter(node) != null || parent.getChildCount() == 1 ? tree.getPathForRow(row + 1) : tree.getPathForRow(row - 1));
  DefaultMutableTreeNode toSelect=treePathToSelect != null ? (DefaultMutableTreeNode)treePathToSelect.getLastPathComponent() : null;
  removeNodeFromParent(node);
  if (parent.getChildCount() == 0)   removeNodeFromParent(parent);
  if (toSelect != null) {
    setSelectedNode(toSelect);
  }
}
