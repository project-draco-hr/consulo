{
  int selected=myTreeTable.getSelectedRow();
  if (selected < 0)   return;
  TemplateKey templateKey=getTemplateKey(selected);
  if (templateKey != null) {
    int result=Messages.showOkCancelDialog(this,CodeInsightBundle.message("template.delete.confirmation.text"),CodeInsightBundle.message("template.delete.confirmation.title"),Messages.getQuestionIcon());
    if (result != DialogWrapper.OK_EXIT_CODE)     return;
    removeTemplateAt(selected);
    isModified=true;
  }
  TemplateGroup group=getGroup(selected);
  if (group != null) {
    int result=Messages.showOkCancelDialog(this,CodeInsightBundle.message("template.delete.group.confirmation.text"),CodeInsightBundle.message("template.delete.confirmation.title"),Messages.getQuestionIcon());
    if (result != DialogWrapper.OK_EXIT_CODE)     return;
    JTree tree=myTreeTable.getTree();
    TreePath path=tree.getPathForRow(selected);
    myTemplateGroups.remove(group);
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)path.getLastPathComponent();
    removeNodeFromParent(node);
    isModified=true;
  }
}
