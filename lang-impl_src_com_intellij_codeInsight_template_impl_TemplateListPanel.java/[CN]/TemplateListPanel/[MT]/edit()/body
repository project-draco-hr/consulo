{
  int selected=myTreeTable.getSelectedRow();
  if (selected < 0)   return;
  TemplateImpl template=getTemplate(selected);
  if (template == null)   return;
  EditTemplateDialog dialog=new EditTemplateDialog(this,CodeInsightBundle.message("dialog.edit.live.template.title"),template,getTemplateGroups(),(String)myExpandByCombo.getSelectedItem());
  dialog.show();
  if (!dialog.isOK())   return;
  TemplateGroup group=getTemplateGroup(template);
  LOG.assertTrue(group != null,template.getGroupName());
  group.removeTemplate(template);
  dialog.apply();
  TemplateGroup newGroup=getTemplateGroup(template);
  AbstractTableModel model=(AbstractTableModel)myTreeTable.getModel();
  if (newGroup == null) {
    newGroup=new TemplateGroup(template.getGroupName());
    myTemplateGroups.add(newGroup);
    model.fireTableStructureChanged();
  }
  newGroup.addTemplate(template);
  model.fireTableRowsUpdated(selected,selected);
  myTreeTable.setRowSelectionInterval(selected,selected);
  updateTemplateTextArea();
  isModified=true;
}
