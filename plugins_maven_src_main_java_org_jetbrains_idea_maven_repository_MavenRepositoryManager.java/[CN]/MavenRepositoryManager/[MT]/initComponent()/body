{
  StartupManager.getInstance(myProject).registerStartupActivity(new Runnable(){
    public void run(){
      try {
        if (ApplicationManager.getApplication().isUnitTestMode())         return;
        if (!MavenProjectsManager.getInstance(myProject).isMavenProject())         return;
        initIndex();
        StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
          public void run(){
            try {
              ensureHasLocalRepository();
            }
 catch (            MavenRepositoryException e) {
              showErrorWhenProjectIsOpen(new MavenException(e));
            }
          }
        }
);
      }
 catch (      MavenException e) {
        showErrorWhenProjectIsOpen(e);
      }
    }
  }
);
}
