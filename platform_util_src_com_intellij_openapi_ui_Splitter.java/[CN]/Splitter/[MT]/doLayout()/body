{
  if (mySkipNextLayouting) {
    mySkipNextLayouting=false;
    return;
  }
  int width=getWidth();
  int height=getHeight();
  int total=isVertical() ? height : width;
  if (total <= 0)   return;
  if (!isNull(myFirstComponent) && myFirstComponent.isVisible() && !isNull(mySecondComponent)&& mySecondComponent.isVisible()) {
    Rectangle firstRect=new Rectangle();
    Rectangle dividerRect=new Rectangle();
    Rectangle secondRect=new Rectangle();
    int d=getDividerWidth();
    double size1;
    if (total <= d) {
      size1=0;
      d=total;
    }
 else {
      size1=myProportion * total;
      double size2=total - size1 - d;
      if (isHonorMinimumSize()) {
        double mSize1=isVertical() ? myFirstComponent.getMinimumSize().getHeight() : myFirstComponent.getMinimumSize().getWidth();
        double mSize2=isVertical() ? mySecondComponent.getMinimumSize().getHeight() : mySecondComponent.getMinimumSize().getWidth();
        if (size1 + size2 < mSize1 + mSize2) {
          double proportion=mSize1 / (mSize1 + mSize2);
          size1=proportion * total;
        }
 else {
          if (size1 < mSize1) {
            size1=mSize1;
          }
 else           if (size2 < mSize2) {
            size2=mSize2;
            size1=total - size2 - d;
          }
        }
      }
    }
    int iSize1=(int)Math.round(Math.floor(size1));
    int iSize2=(int)Math.round(total - size1 - d);
    if (isVertical()) {
      firstRect.setBounds(0,0,width,iSize1);
      dividerRect.setBounds(0,iSize1,width,d);
      secondRect.setBounds(0,iSize1 + d,width,iSize2);
    }
 else {
      firstRect.setBounds(0,0,iSize1,height);
      dividerRect.setBounds(iSize1,0,d,height);
      secondRect.setBounds((iSize1 + d),0,iSize2,height);
    }
    myDivider.setVisible(true);
    myFirstComponent.setBounds(firstRect);
    myDivider.setBounds(dividerRect);
    mySecondComponent.setBounds(secondRect);
    myFirstComponent.revalidate();
    mySecondComponent.revalidate();
  }
 else   if (!isNull(myFirstComponent) && myFirstComponent.isVisible()) {
    hideNull(mySecondComponent);
    myDivider.setVisible(false);
    myFirstComponent.setBounds(0,0,width,height);
    myFirstComponent.revalidate();
  }
 else   if (!isNull(mySecondComponent) && mySecondComponent.isVisible()) {
    hideNull(myFirstComponent);
    myDivider.setVisible(false);
    mySecondComponent.setBounds(0,0,width,height);
    mySecondComponent.revalidate();
  }
 else {
    myDivider.setVisible(false);
    if (myFirstComponent != null) {
      myFirstComponent.setBounds(0,0,0,0);
      myFirstComponent.revalidate();
    }
 else {
      hideNull(myFirstComponent);
    }
    if (mySecondComponent != null) {
      mySecondComponent.setBounds(0,0,0,0);
      mySecondComponent.revalidate();
    }
 else {
      hideNull(mySecondComponent);
    }
  }
  myDivider.revalidate();
}
