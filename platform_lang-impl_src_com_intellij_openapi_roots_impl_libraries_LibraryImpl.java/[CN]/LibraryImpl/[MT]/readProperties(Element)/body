{
  final String typeId=element.getAttributeValue(LIBRARY_TYPE_ATTR);
  if (typeId == null)   return;
  myType=LibraryTypeService.getInstance().findTypeById(typeId);
  if (myType == null)   return;
  myProperties=myType.createDefaultProperties();
  final Element propertiesElement=element.getChild(PROPERTIES_ELEMENT);
  if (propertiesElement != null) {
    final Class<?> stateClass=ReflectionUtil.getRawType(ReflectionUtil.resolveVariableInHierarchy(PersistentStateComponent.class.getTypeParameters()[0],myProperties.getClass()));
    myProperties.loadState(XmlSerializer.deserialize(propertiesElement,stateClass));
  }
}
