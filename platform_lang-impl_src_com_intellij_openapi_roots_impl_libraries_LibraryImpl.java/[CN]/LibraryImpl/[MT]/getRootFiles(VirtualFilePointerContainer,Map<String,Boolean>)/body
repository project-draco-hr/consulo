{
  final List<VirtualFile> expanded=new ArrayList<VirtualFile>();
  for (  VirtualFile file : container.getFiles()) {
    if (file.isDirectory()) {
      final Boolean expandRecursively=jarDirectories.get(file.getUrl());
      if (expandRecursively != null) {
        addChildren(file,expanded,expandRecursively.booleanValue());
        continue;
      }
    }
    expanded.add(file);
  }
  return VfsUtil.toVirtualFileArray(expanded);
}
