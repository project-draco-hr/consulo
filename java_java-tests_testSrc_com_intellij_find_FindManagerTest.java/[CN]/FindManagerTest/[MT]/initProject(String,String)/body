{
  final String testDir=JavaTestUtil.getJavaTestDataPath() + "/find/" + folderName;
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        mySourceDirs=new VirtualFile[sourceDirs.length];
        for (int i=0; i < sourceDirs.length; i++) {
          String sourceDir=sourceDirs[i];
          mySourceDirs[i]=LocalFileSystem.getInstance().refreshAndFindFileByPath(new File(testDir + File.separatorChar + sourceDir).getCanonicalPath().replace(File.separatorChar,'/'));
        }
        VirtualFile projectDir=LocalFileSystem.getInstance().refreshAndFindFileByPath(new File(testDir).getCanonicalPath().replace(File.separatorChar,'/'));
        final ModuleRootManager rootManager=ModuleRootManager.getInstance(myModule);
        final ModifiableRootModel rootModel=rootManager.getModifiableModel();
        rootModel.clear();
        final ContentEntry contentEntry=rootModel.addContentEntry(projectDir);
        for (        VirtualFile sourceDir : mySourceDirs) {
          contentEntry.addSourceFolder(sourceDir,false);
        }
        Sdk jdk=JavaSdkImpl.getMockJdk17();
        rootModel.setSdk(jdk);
        rootModel.commit();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
}
