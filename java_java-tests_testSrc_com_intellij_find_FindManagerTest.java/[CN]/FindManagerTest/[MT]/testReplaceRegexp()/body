{
  FindManager findManager=FindManager.getInstance(myProject);
  FindModel findModel=new FindModel();
  findModel.setStringToFind("bug(?=here)");
  findModel.setStringToReplace("x$0y");
  findModel.setWholeWordsOnly(false);
  findModel.setFromCursor(false);
  findModel.setGlobal(true);
  findModel.setMultipleFiles(false);
  findModel.setProjectScope(true);
  findModel.setRegularExpressions(true);
  findModel.setPromptOnReplace(false);
  findManager.setFindNextModel(null);
  findManager.getFindInFileModel().copyFrom(findModel);
  String text="bughere\n" + "bughere";
  configureByText(FileTypes.PLAIN_TEXT,text);
  boolean succ=FindUtil.replace(getProject(),getEditor(),0,findModel);
  assertTrue(succ);
  assertEquals("xbugyhere\n" + "xbugyhere",getEditor().getDocument().getText());
}
