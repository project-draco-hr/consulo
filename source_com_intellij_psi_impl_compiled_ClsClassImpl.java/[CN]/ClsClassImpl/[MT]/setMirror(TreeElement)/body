{
  setMirrorCheckingType(element,null);
  PsiClass mirror=(PsiClass)SourceTreeToPsiMap.treeElementToPsi(element);
  final PsiDocComment docComment=getDocComment();
  if (docComment != null) {
    ((ClsElementImpl)docComment).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getDocComment()));
  }
  ((ClsElementImpl)getModifierList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getModifierList()));
  ((ClsElementImpl)getNameIdentifier()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getNameIdentifier()));
  if (!isAnnotationType() && !isEnum()) {
    ((ClsElementImpl)getExtendsList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getExtendsList()));
  }
  ((ClsElementImpl)getImplementsList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getImplementsList()));
  ((ClsElementImpl)getTypeParameterList()).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirror.getTypeParameterList()));
  PsiField[] fields=getFields();
  PsiField[] mirrorFields=mirror.getFields();
  if (LOG.assertTrue(fields.length == mirrorFields.length)) {
    for (int i=0; i < fields.length; i++) {
      ((ClsElementImpl)fields[i]).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirrorFields[i]));
    }
  }
  PsiMethod[] methods=getMethods();
  PsiMethod[] mirrorMethods=mirror.getMethods();
  if (LOG.assertTrue(methods.length == mirrorMethods.length)) {
    for (int i=0; i < methods.length; i++) {
      ((ClsElementImpl)methods[i]).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirrorMethods[i]));
    }
  }
  PsiClass[] classes=getInnerClasses();
  PsiClass[] mirrorClasses=mirror.getInnerClasses();
  if (LOG.assertTrue(classes.length == mirrorClasses.length)) {
    for (int i=0; i < classes.length; i++) {
      ((ClsElementImpl)classes[i]).setMirror((TreeElement)SourceTreeToPsiMap.psiElementToTree(mirrorClasses[i]));
    }
  }
}
