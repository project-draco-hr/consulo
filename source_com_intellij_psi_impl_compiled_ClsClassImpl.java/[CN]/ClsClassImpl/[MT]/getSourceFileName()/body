{
  long repositoryId=getRepositoryId();
  if (repositoryId < 0) {
    try {
      String sourceFileName=getClassFileData().readUtf8Attribute(readClassAttribute("SourceFile"));
      if (sourceFileName == null) {
        sourceFileName=obtainSourceFileNameFromClassFileName();
        return sourceFileName;
      }
      int slashIndex=sourceFileName.lastIndexOf('/');
      if (slashIndex >= 0) {
        sourceFileName=sourceFileName.substring(slashIndex + 1,sourceFileName.length());
      }
      return sourceFileName;
    }
 catch (    ClsFormatException e) {
      return null;
    }
  }
 else {
    ClsFileImpl file=(ClsFileImpl)getContainingFile();
    String sourceFileName=getRepositoryManager().getFileView().getSourceFileName(file.getRepositoryId());
    if (sourceFileName == null || sourceFileName.length() == 0) {
      sourceFileName=obtainSourceFileNameFromClassFileName();
    }
    return sourceFileName;
  }
}
