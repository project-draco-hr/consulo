{
  String exec=System.getenv(GIT_EXECUTABLE_PATH);
  if (exec != null) {
    myClientBinaryPath=new File(exec);
  }
  if (exec == null || !myClientBinaryPath.exists()) {
    final File pluginRoot=new File(PluginPathManager.getPluginHomePath("git4idea"));
    myClientBinaryPath=new File(pluginRoot,"tests/git4idea/tests/data/bin");
  }
  myMainRepo=initRepositories();
  myProjectDir=new File(myMainRepo.getDirFixture().getTempDirPath());
  if (EventQueue.isDispatchThread()) {
    initProject(myProjectDir);
  }
 else {
    SwingUtilities.invokeAndWait(new Runnable(){
      @Override public void run(){
        try {
          initProject(myProjectDir);
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
);
  }
  activateVCS(GitVcs.NAME);
  myTraceClient=true;
  doActionSilently(VcsConfiguration.StandardConfirmation.ADD);
  doActionSilently(VcsConfiguration.StandardConfirmation.REMOVE);
}
