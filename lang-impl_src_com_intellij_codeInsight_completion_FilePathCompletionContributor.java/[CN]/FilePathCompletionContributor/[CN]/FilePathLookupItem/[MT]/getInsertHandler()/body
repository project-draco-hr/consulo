{
  return new InsertHandler<LookupElement>(){
    public void handleInsert(    InsertionContext context,    LookupElement item){
      if (!(item instanceof FilePathLookupItem)) {
        return;
      }
      final FilePathLookupItem _item=(FilePathLookupItem)item;
      final PsiFile psiFile=_item.myFile;
      if (psiFile.isValid()) {
        final PsiReference psiReference=context.getFile().findReferenceAt(context.getSelectionEndOffset());
        final PsiReference fileReference=getReference(psiReference);
        LOG.assertTrue(fileReference != null);
        fileReference.bindToElement(psiFile);
      }
    }
  }
;
}
