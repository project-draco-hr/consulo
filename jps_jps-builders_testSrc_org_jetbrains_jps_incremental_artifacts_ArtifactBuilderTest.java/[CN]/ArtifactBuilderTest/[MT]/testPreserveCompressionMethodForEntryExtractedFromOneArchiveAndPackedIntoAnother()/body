{
  String path=createFile("data/a.jar");
  ZipOutputStream output=new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(new File(path))));
  try {
    ZipEntry entry=new ZipEntry("a.txt");
    byte[] text="text".getBytes();
    entry.setMethod(ZipEntry.STORED);
    entry.setSize(text.length);
    CRC32 crc32=new CRC32();
    crc32.update(text);
    entry.setCrc(crc32.getValue());
    output.putNextEntry(entry);
    output.write(text);
    output.closeEntry();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    output.close();
  }
  JpsArtifact a=addArtifact(archive("b.jar").extractedDir(path,""));
  buildAll();
  assertOutput(a,fs().archive("b.jar").file("a.txt","text"));
  final String jarPath=a.getOutputPath() + "/b.jar";
  ZipFile zipFile=new ZipFile(new File(jarPath));
  try {
    ZipEntry entry=zipFile.getEntry("a.txt");
    assertNotNull(entry);
    assertEquals(ZipEntry.STORED,entry.getMethod());
  }
  finally {
    zipFile.close();
  }
}
