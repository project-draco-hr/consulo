{
  final String firstFile=createFile("src/A.txt");
  final String manifestFile=createFile("src/MANIFEST.MF");
  final String lastFile=createFile("src/Z.txt");
  final Artifact a=addArtifact(archive("a.jar").dir("META-INF").fileCopy(firstFile).fileCopy(manifestFile).fileCopy(lastFile));
  buildArtifacts(a);
  final String jarPath=a.getOutputPath() + "/a.jar";
  assertNotNull(jarPath);
  JarFile jarFile=new JarFile(new File(FileUtil.toSystemDependentName(jarPath)));
  try {
    final Enumeration<JarEntry> entries=jarFile.entries();
    assertTrue(entries.hasMoreElements());
    final JarEntry firstEntry=entries.nextElement();
    assertEquals(JarFile.MANIFEST_NAME,firstEntry.getName());
  }
  finally {
    jarFile.close();
  }
}
