{
  super(project,true);
  myProject=project;
  myClass=aClass;
  myHelper=helper;
  String title=REFACTORING_NAME;
  String qName=myClass.getQualifiedName();
  if (qName != null) {
    title+=" - " + qName;
  }
  setTitle(title);
  myFields=myHelper.getApplicableFields(myClass);
  myFieldNames=new String[myFields.length];
  myCheckedMarks=new boolean[myFields.length];
  myFinalMarks=new boolean[myFields.length];
  myGetterNames=new String[myFields.length];
  mySetterNames=new String[myFields.length];
  myGetterPrototypes=new PsiMethod[myFields.length];
  mySetterPrototypes=new PsiMethod[myFields.length];
  for (int idx=0; idx < myFields.length; idx++) {
    PsiField field=myFields[idx];
    myCheckedMarks[idx]=preselectedFields.contains(field);
    myFinalMarks[idx]=field.hasModifierProperty(PsiModifier.FINAL);
    myFieldNames[idx]=PsiFormatUtil.formatVariable(field,PsiFormatUtilBase.SHOW_NAME | PsiFormatUtilBase.SHOW_TYPE | PsiFormatUtilBase.TYPE_AFTER,PsiSubstitutor.EMPTY);
    myGetterNames[idx]=myHelper.suggestGetterName(field);
    mySetterNames[idx]=myHelper.suggestSetterName(field);
    myGetterPrototypes[idx]=myHelper.generateMethodPrototype(field,myGetterNames[idx],true);
    mySetterPrototypes[idx]=myHelper.generateMethodPrototype(field,mySetterNames[idx],false);
  }
  init();
}
