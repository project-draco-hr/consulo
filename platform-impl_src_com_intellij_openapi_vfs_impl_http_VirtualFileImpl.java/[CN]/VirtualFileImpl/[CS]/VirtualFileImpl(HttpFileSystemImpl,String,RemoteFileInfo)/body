{
  myFileSystem=fileSystem;
  myPath=path;
  myFileInfo=fileInfo;
  myFileInfo.addDownloadingListener(new FileDownloadingAdapter(){
    public void fileDownloaded(    final VirtualFile localFile){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          FileDocumentManager.getInstance().reloadFiles(VirtualFileImpl.this);
        }
      }
);
    }
  }
);
  int lastSlash=path.lastIndexOf('/');
  if (lastSlash == path.length() - 1) {
    myParentPath=null;
    myName=path;
  }
 else {
    int prevSlash=path.lastIndexOf('/',lastSlash - 1);
    if (prevSlash < 0) {
      myParentPath=path.substring(0,lastSlash + 1);
      myName=path.substring(lastSlash + 1);
    }
 else {
      myParentPath=path.substring(0,lastSlash);
      myName=path.substring(lastSlash + 1);
    }
  }
}
