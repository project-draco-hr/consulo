{
  final Set<PsiElement> filesOrDirs=new HashSet<PsiElement>();
  for (  PsiElement element : elements) {
    final PsiFile file=element.getContainingFile();
    if (file != null) {
      filesOrDirs.add(file);
    }
 else     if (element instanceof PsiDirectory) {
      filesOrDirs.add(element);
    }
  }
  final ResourceBundle[] bundles=ResourceBundle.ARRAY_DATA_KEY.getData(dataContext);
  LOG.assertTrue(bundles != null);
  for (  ResourceBundle bundle : bundles) {
    filesOrDirs.addAll(bundle.getPropertiesFiles(project));
  }
  final PsiElement initialTargetElement=LangDataKeys.TARGET_PSI_ELEMENT.getData(dataContext);
  MoveFilesOrDirectoriesUtil.doMove(project,filesOrDirs.toArray(new PsiElement[filesOrDirs.size()]),new PsiElement[]{initialTargetElement},null);
}
