{
  Color color=UIUtil.getListForeground();
  if (value instanceof NodeDescriptor) {
    final NodeDescriptor descriptor=(NodeDescriptor)value;
    setIcon(descriptor.getClosedIcon());
    final Color elementColor=descriptor.getColor();
    if (elementColor != null) {
      color=elementColor;
    }
  }
  final String text=value.toString();
  append(text != null ? text : "",new SimpleTextAttributes(Font.PLAIN,color));
  if (value instanceof AbstractTreeNode) {
    String locationString=((AbstractTreeNode)value).getPresentation().getLocationString();
    if (locationString != null && locationString.length() > 0) {
      append(" (" + locationString + ")",SimpleTextAttributes.GRAY_ATTRIBUTES);
    }
  }
}
