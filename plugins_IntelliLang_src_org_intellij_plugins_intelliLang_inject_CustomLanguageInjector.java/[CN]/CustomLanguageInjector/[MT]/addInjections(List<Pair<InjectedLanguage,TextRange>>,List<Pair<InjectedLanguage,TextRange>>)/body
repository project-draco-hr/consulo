{
  for (Iterator<Pair<InjectedLanguage,TextRange>> it=l.iterator(); it.hasNext(); ) {
    final Pair<InjectedLanguage,TextRange> p1=it.next();
    for (    Pair<InjectedLanguage,TextRange> p2 : list) {
      if (p1.second.intersects(p2.second)) {
        it.remove();
        break;
      }
    }
  }
  if (!l.isEmpty()) {
    if (!(list instanceof ArrayList)) {
      list=new ArrayList<Pair<InjectedLanguage,TextRange>>(list);
    }
    list.addAll(l);
  }
  return list;
}
