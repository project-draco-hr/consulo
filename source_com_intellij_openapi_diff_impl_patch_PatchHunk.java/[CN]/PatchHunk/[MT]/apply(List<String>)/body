{
  ApplyPatchStatus result=null;
  int curLine=findStartLine(lines);
  for (  PatchLine line : myLines) {
switch (line.getType()) {
case CONTEXT:
      if (!line.getText().equals(lines.get(curLine))) {
        throw new ApplyPatchException("Context mismatch");
      }
    curLine++;
  break;
case ADD:
if (curLine < lines.size() && lines.get(curLine).equals(line.getText())) {
  result=ApplyPatchStatus.and(result,ApplyPatchStatus.ALREADY_APPLIED);
}
 else {
  lines.add(curLine,line.getText());
  result=ApplyPatchStatus.and(result,ApplyPatchStatus.SUCCESS);
}
curLine++;
break;
case REMOVE:
if (!line.getText().equals(lines.get(curLine))) {
result=ApplyPatchStatus.and(result,ApplyPatchStatus.ALREADY_APPLIED);
}
 else {
lines.remove(curLine);
result=ApplyPatchStatus.and(result,ApplyPatchStatus.SUCCESS);
}
break;
}
}
if (result != null) {
return result;
}
return ApplyPatchStatus.SUCCESS;
}
