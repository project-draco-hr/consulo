{
  if (curLine >= lines.size()) {
    throw new ApplyPatchException("Unexpected end of document. Expected line:\n" + patchLineText);
  }
  if (!patchLineText.equals(lines.get(curLine))) {
    throw new ApplyPatchException("Context mismatch. Expected line:\n" + patchLineText + "\nFound line:\n"+ lines.get(curLine));
  }
}
