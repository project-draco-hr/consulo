{
  StringBuilder detailsBuffer=new StringBuilder();
  for (  String detail : details) {
    detailsBuffer.append(detail).append(",");
  }
  if (details.length > 0 && detailsBuffer.length() > 0) {
    detailsBuffer.setLength(detailsBuffer.length() - 1);
  }
  Attachment attachment=detailsBuffer.length() > 0 ? new Attachment("current context",detailsBuffer.toString()) : null;
  logger.error(createEvent(message,ExceptionUtil.getThrowableText(new Throwable()),null,null,attachment));
}
