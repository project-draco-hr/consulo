{
  myPathsToProcessCollapseState.add(path);
  myCollapseStateAlarm.cancelAllRequests();
  myCollapseStateAlarm.addRequest(new Runnable(){
    @Override public void run(){
      List<TreePath> paths=ContainerUtilRt.newArrayList(myPathsToProcessCollapseState);
      myPathsToProcessCollapseState.clear();
      Collections.sort(paths,PATH_COMPARATOR);
      for (      TreePath treePath : paths) {
        applyCollapseState(treePath);
      }
      final TreePath rootPath=new TreePath(getModel().getRoot());
      if (isCollapsed(rootPath)) {
        expandPath(rootPath);
      }
    }
  }
,COLLAPSE_STATE_PROCESSING_DELAY_MILLIS);
}
