{
  super(model);
  myExpandedStateHolder=expandedStateHolder;
  setRootVisible(false);
  addTreeWillExpandListener(new TreeWillExpandListener(){
    @Override public void treeWillExpand(    TreeExpansionEvent event) throws ExpandVetoException {
      if (!mySuppressCollapseTracking) {
        myExpandedStateHolder.put(getPath(event.getPath()),true);
      }
    }
    @Override public void treeWillCollapse(    TreeExpansionEvent event) throws ExpandVetoException {
      if (!mySuppressCollapseTracking) {
        myExpandedStateHolder.put(getPath(event.getPath()),false);
      }
    }
  }
);
  model.addTreeModelListener(new TreeModelAdapter(){
    @Override public void treeStructureChanged(    TreeModelEvent e){
      scheduleCollapseStateAppliance(e.getTreePath());
    }
    @Override public void treeNodesInserted(    TreeModelEvent e){
      scheduleCollapseStateAppliance(e.getTreePath());
    }
  }
);
  new TreeSpeedSearch(this);
  getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0),"Enter");
  getActionMap().put("Enter",new AbstractAction(){
    @Override public void actionPerformed(    ActionEvent e){
      ExternalTaskExecutionInfo task=produce();
      if (task == null) {
        return;
      }
      ExternalSystemUtil.runTask(task.getSettings(),task.getExecutorId(),project,externalSystemId);
    }
  }
);
}
