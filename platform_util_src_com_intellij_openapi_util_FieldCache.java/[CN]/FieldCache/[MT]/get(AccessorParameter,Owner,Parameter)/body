{
  r.lock();
  T result;
  try {
    result=getValue(owner,a);
  }
  finally {
    r.unlock();
  }
  if (result == null) {
    w.lock();
    try {
      result=getValue(owner,a);
      if (result == null) {
        RecursionGuard.StackStamp stamp=ourGuard.markStack();
        result=compute(owner,p);
        if (stamp.mayCacheNow()) {
          putValue(result,owner,a);
        }
      }
    }
  finally {
      w.unlock();
    }
  }
  return result;
}
