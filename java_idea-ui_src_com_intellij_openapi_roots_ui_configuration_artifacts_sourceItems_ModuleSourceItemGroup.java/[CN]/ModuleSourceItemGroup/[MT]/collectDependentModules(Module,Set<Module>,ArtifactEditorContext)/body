{
  if (!modules.add(module))   return;
  for (  OrderEntry entry : context.getModulesProvider().getRootModel(module).getOrderEntries()) {
    if (entry instanceof ModuleOrderEntry) {
      final ModuleOrderEntry moduleEntry=(ModuleOrderEntry)entry;
      final Module dependency=moduleEntry.getModule();
      final DependencyScope scope=moduleEntry.getScope();
      if (dependency != null && scope.isForProductionRuntime()) {
        collectDependentModules(dependency,modules,context);
      }
    }
  }
}
