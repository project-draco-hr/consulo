{
  DefaultActionGroup toolbarGroup=new DefaultActionGroup();
  toolbarGroup.add(leadGroup);
  toolbarGroup.addSeparator();
  toolbarGroup.add(new SelectFilteringAction(project,this));
  toolbarGroup.add(new SelectGroupingAction(this));
  final ExpandAllAction expandAllAction=new ExpandAllAction(myChangesTree);
  final CollapseAllAction collapseAllAction=new CollapseAllAction(myChangesTree);
  expandAllAction.registerCustomShortcutSet(new CustomShortcutSet(KeymapManager.getInstance().getActiveKeymap().getShortcuts(IdeActions.ACTION_EXPAND_ALL)),myChangesTree);
  collapseAllAction.registerCustomShortcutSet(new CustomShortcutSet(KeymapManager.getInstance().getActiveKeymap().getShortcuts(IdeActions.ACTION_COLLAPSE_ALL)),myChangesTree);
  toolbarGroup.add(expandAllAction);
  toolbarGroup.add(collapseAllAction);
  toolbarGroup.add(ActionManager.getInstance().getAction(IdeActions.ACTION_COPY));
  toolbarGroup.add(new ContextHelpAction(myHelpId));
  if (tailGroup != null) {
    toolbarGroup.add(tailGroup);
  }
  for (  AnAction anAction : extra) {
    toolbarGroup.add(anAction);
  }
  return ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,toolbarGroup,true);
}
