{
  if (usedMacros == null)   return;
  int idx=0;
  for (  String protocol : PROTOCOLS) {
    if (StringUtil.startsWithConcatenationOf(macroReplacement,protocol,"://")) {
      idx=protocol.length() + 3;
    }
 else     if (StringUtil.startsWithConcatenationOf(macroReplacement,protocol,":/")) {
      idx=protocol.length() + 2;
    }
 else     if (StringUtil.startsWithConcatenationOf(macroReplacement,protocol,":")) {
      idx=protocol.length() + 1;
    }
  }
  macroReplacement=macroReplacement.substring(idx);
  if (macroReplacement.length() >= 2 && macroReplacement.startsWith("$") && macroReplacement.endsWith("$")) {
    macroReplacement=macroReplacement.substring(1,macroReplacement.length() - 1);
  }
  usedMacros.add(macroReplacement);
}
