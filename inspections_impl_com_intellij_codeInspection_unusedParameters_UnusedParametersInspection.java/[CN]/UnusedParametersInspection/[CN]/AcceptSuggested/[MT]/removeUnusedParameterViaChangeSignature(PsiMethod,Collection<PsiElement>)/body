{
  ArrayList<ParameterInfoImpl> newParameters=new ArrayList<ParameterInfoImpl>();
  PsiParameter[] oldParameters=psiMethod.getParameterList().getParameters();
  for (int i=0; i < oldParameters.length; i++) {
    PsiParameter oldParameter=oldParameters[i];
    if (!parametersToDelete.contains(oldParameter)) {
      newParameters.add(new ParameterInfoImpl(i,oldParameter.getName(),oldParameter.getType()));
    }
  }
  ParameterInfoImpl[] parameterInfos=newParameters.toArray(new ParameterInfoImpl[newParameters.size()]);
  ChangeSignatureProcessor csp=new ChangeSignatureProcessor(psiMethod.getProject(),psiMethod,false,null,psiMethod.getName(),psiMethod.getReturnType(),parameterInfos);
  csp.run();
}
