{
  myLinearGraph=linearGraph;
  myColorGetter=new ColorGetterByLayoutIndex(linearGraph,myPermanentGraph,colorManager);
  myGraphElementComparator=new GraphElementComparatorByLayoutIndex(new NotNullFunction<Integer,Integer>(){
    @NotNull @Override public Integer fun(    Integer nodeIndex){
      int nodeId=linearGraph.getNodeId(nodeIndex);
      if (nodeId < 0)       return nodeId;
      return myPermanentGraph.getPermanentGraphLayout().getLayoutIndex(nodeId);
    }
  }
);
}
