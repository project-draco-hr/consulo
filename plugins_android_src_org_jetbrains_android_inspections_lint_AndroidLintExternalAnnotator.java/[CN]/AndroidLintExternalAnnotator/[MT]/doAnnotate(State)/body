{
  final IntellijLintClient client=new IntellijLintClient(state);
  try {
    final LintDriver lint=new LintDriver(new BuiltinIssueRegistry(),client);
    lint.analyze(Collections.singletonList(new File(state.getMainFile().getPath())),null);
  }
  finally {
    Disposer.dispose(client);
  }
  return state;
}
