{
  if (!(expression instanceof PsiReferenceExpression)) {
    return;
  }
  final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)expression;
  final PsiElement element=referenceExpression.resolve();
  if (!(element instanceof PsiLocalVariable)) {
    return;
  }
  final PsiLocalVariable variable=(PsiLocalVariable)element;
  final PsiElement variableParent=variable.getParent();
  if (!(variableParent instanceof PsiDeclarationStatement)) {
    return;
  }
  final PsiDeclarationStatement declarationStatement=(PsiDeclarationStatement)variableParent;
  final PsiElement parent=declarationStatement.getParent();
  if (!(parent instanceof PsiForStatement)) {
    return;
  }
  final PsiForStatement forStatement=(PsiForStatement)parent;
  final PsiStatement initialization=forStatement.getInitialization();
  if (initialization == null) {
    return;
  }
  if (!initialization.equals(declarationStatement)) {
    return;
  }
  if (!isInForStatementBody(expression,forStatement)) {
    return;
  }
  registerError(expression,Boolean.FALSE);
}
