{
  MavenProjectsManager projectsManager=MavenProjectsManager.getInstance(module.getProject());
  final MavenRunnerParameters parameters=new MavenRunnerParameters(true,projectsManager.findProject(module).getDirectory(),Collections.singletonList("process-resources"),projectsManager.getExplicitProfiles());
  final Map<CompilerMessageCategory,List<String>> result=new HashMap<CompilerMessageCategory,List<String>>();
  result.put(CompilerMessageCategory.ERROR,new ArrayList<String>());
  try {
    JavaParameters javaParams=ApplicationManager.getApplication().runReadAction(new Computable<JavaParameters>(){
      @Nullable @Override public JavaParameters compute(){
        try {
          return MavenExternalParameters.createJavaParameters(module.getProject(),parameters);
        }
 catch (        ExecutionException e) {
          LOG.info(e);
          result.get(CompilerMessageCategory.ERROR).add(e.getMessage());
          return null;
        }
      }
    }
);
    if (javaParams == null) {
      return result;
    }
    GeneralCommandLine commandLine=CommandLineBuilder.createFromJavaParameters(javaParams);
    final StringBuildingOutputProcessor processor=new StringBuildingOutputProcessor();
    boolean success=AndroidUtils.executeCommand(commandLine,processor,WaitingStrategies.WaitForever.getInstance()) == ExecutionStatus.SUCCESS;
    String message=processor.getMessage();
    if (!success) {
      LOG.info(message);
      String lcmessage=message.toLowerCase();
      int buildErrorIndex=lcmessage.indexOf(BUILD_ERROR_INDICATOR);
      if (buildErrorIndex >= 0) {
        result.get(CompilerMessageCategory.ERROR).add(message.substring(buildErrorIndex));
      }
    }
  }
 catch (  ExecutionException e) {
    LOG.info(e);
    result.get(CompilerMessageCategory.ERROR).add(e.getMessage());
  }
  return result;
}
