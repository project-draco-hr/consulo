{
  try {
    final String outputPath=releasePackage ? outputFilePath + RELEASE_SUFFIX : outputFilePath;
    final Map<AndroidCompilerMessageKind,List<String>> messages=AndroidApt.packageResources(target,-1,manifestFile.getPath(),resourceDirPaths,assetsDirPath != null ? new String[]{assetsDirPath} : ArrayUtil.EMPTY_STRING_ARRAY,outputPath,null,!releasePackage,0,new FileFilter(){
      @Override public boolean accept(      File pathname){
        return true;
      }
    }
);
    AndroidJpsUtil.addMessages(context,messages,BUILDER_NAME);
    return messages.get(AndroidCompilerMessageKind.ERROR).size() == 0;
  }
 catch (  final IOException e) {
    AndroidJpsUtil.reportExceptionError(context,null,e,BUILDER_NAME);
    return false;
  }
}
