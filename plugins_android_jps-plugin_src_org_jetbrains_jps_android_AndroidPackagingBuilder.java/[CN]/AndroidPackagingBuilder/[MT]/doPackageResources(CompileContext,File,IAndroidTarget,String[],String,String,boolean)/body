{
  try {
    final String outputPath=releasePackage ? outputFilePath + ".release" : outputFilePath;
    final Map<AndroidCompilerMessageKind,List<String>> messages=AndroidApt.packageResources(target,-1,manifestFile.getPath(),resourceDirPaths,assetsDirPath,outputPath,null,!releasePackage,0);
    AndroidJpsUtil.addMessages(context,messages,BUILDER_NAME);
    return messages.get(AndroidCompilerMessageKind.ERROR).size() == 0;
  }
 catch (  final IOException e) {
    AndroidJpsUtil.reportExceptionError(context,null,e,BUILDER_NAME);
    return false;
  }
}
