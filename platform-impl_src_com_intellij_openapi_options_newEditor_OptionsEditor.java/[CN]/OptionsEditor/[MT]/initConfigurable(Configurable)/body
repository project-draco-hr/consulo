{
  final ActionCallback result=new ActionCallback();
  final ConfigurableContent content;
  if (configurable instanceof MasterDetails) {
    content=new Details((MasterDetails)configurable);
  }
 else {
    content=new Simple(configurable);
  }
  if (!myConfigurable2Content.containsKey(configurable)) {
    if (configurable instanceof Place.Navigator) {
      ((Place.Navigator)configurable).setHistory(myHistory);
    }
    configurable.reset();
  }
  LOG.assertTrue(!ApplicationManager.getApplication().isDispatchThread());
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    public void run(){
      myConfigurable2Content.put(configurable,content);
      result.setDone();
    }
  }
);
  return result;
}
