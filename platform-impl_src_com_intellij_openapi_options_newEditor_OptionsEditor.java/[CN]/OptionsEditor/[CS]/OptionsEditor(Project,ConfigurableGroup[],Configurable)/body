{
  myProject=project;
  myGroups=groups;
  myFilter=new Filter();
  myContext=new OptionsEditorContext(myFilter);
  mySearch=new MySearchField(){
    @Override protected void onTextKeyEvent(    final KeyEvent e){
      myTree.processTextEvent(e);
    }
  }
;
  myTree=new OptionsTree(myProject,groups,getContext()){
    @Override protected void onTreeKeyEvent(    final KeyEvent e){
      mySearch.keyEventToTextField(e);
    }
  }
;
  getContext().addColleague(myTree);
  Disposer.register(this,myTree);
  mySearch.addDocumentListener(new DocumentListener(){
    public void insertUpdate(    final DocumentEvent e){
      myFilter.update(e);
    }
    public void removeUpdate(    final DocumentEvent e){
      myFilter.update(e);
    }
    public void changedUpdate(    final DocumentEvent e){
      myFilter.update(e);
    }
  }
);
  final DefaultActionGroup toolbarActions=new DefaultActionGroup();
  toolbarActions.add(new BackAction(myTree));
  toolbarActions.add(new ForwardAction(myTree));
  final ActionToolbar tb=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,toolbarActions,true);
  tb.setTargetComponent(this);
  final JComponent toolbar=tb.getComponent();
  final JPanel left=new JPanel(new BorderLayout());
  myToolbar=toolbar;
  left.add(myToolbar,BorderLayout.NORTH);
  left.add(myTree,BorderLayout.CENTER);
  left.add(mySearch,BorderLayout.SOUTH);
  setLayout(new BorderLayout());
  myMainSplitter=new Splitter(false);
  myMainSplitter.setFirstComponent(left);
  myMainSplitter.setHonorComponentsMinimumSize(false);
  myLoadingDecorator=new LoadingDecorator(myOwnDetails.getComponent(),project);
  myMainSplitter.setSecondComponent(myLoadingDecorator.getComponent());
  myMainSplitter.setProportion(readPropertion(.3f,MAIN_SPLITTER_PROPORTION));
  myContentWrapper.mySplitter.setProportion(readPropertion(.2f,DETAILS_SPLITTER_PROPORTION));
  add(myMainSplitter,BorderLayout.CENTER);
  myColleague=new MyColleague();
  getContext().addColleague(myColleague);
  if (preselectedConfigurable != null) {
    myTree.select(preselectedConfigurable);
  }
 else {
    myTree.selectFirst();
  }
  Toolkit.getDefaultToolkit().addAWTEventListener(this,MouseEvent.MOUSE_EVENT_MASK | KeyEvent.KEY_EVENT_MASK);
  myModificationChecker=new MergingUpdateQueue("OptionsModificationChecker",1000,false,this,this,this);
  mySpotlightUpdate=new MergingUpdateQueue("OptionsSplotlight",500,false,this,this,this);
  IdeGlassPaneUtil.installPainter(myContentWrapper,mySpotlightPainter,this);
}
