{
  String path=null;
  boolean resultUnderApp=false;
  for (  MavenProject p : allProjects) {
    final List<MavenArtifact> dependencies=p.findDependencies(mavenId);
    if (dependencies.size() > 0 && containsCompileDependency(dependencies)) {
      final VirtualFile projectDir=p.getDirectoryFile();
      final boolean app=APK_PACKAGING_TYPE.equals(p.getPackaging());
      if (path == null || !resultUnderApp && app) {
        path=projectDir.getPath() + '/' + GEN_EXTERNAL_APKLIBS_DIRNAME;
        resultUnderApp=app;
      }
    }
  }
  if (path == null) {
    path=project.getDirectoryFile().getPath() + '/' + GEN_EXTERNAL_APKLIBS_DIRNAME;
  }
  return path;
}
