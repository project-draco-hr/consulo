{
  myProject=(ProjectEx)project;
  myConnection=project.getMessageBus().connectStrongly();
  myConnection.subscribe(FileTypeManager.FILE_TYPES,new FileTypeListener(){
    public void beforeFileTypesChanged(    FileTypeEvent event){
      beforeRootsChange(true);
    }
    public void fileTypesChanged(    FileTypeEvent event){
      rootsChanged(true);
    }
  }
);
  myProjectFileIndex=new ProjectFileIndexImpl(myProject,directoryIndex,fileTypeManager);
  startupManager.registerStartupActivity(new Runnable(){
    public void run(){
      myStartupActivityPerformed=true;
    }
  }
);
}
