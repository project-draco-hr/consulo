{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  myRootsChangeCounter--;
  if (myRootsChangeCounter > 0)   return;
  if (myProject.isDisposed())   return;
  clearScopesCaches();
  Module[] modules=ModuleManager.getInstance(myProject).getModules();
  for (  Module module : modules) {
    ((ModuleImpl)module).clearScopesCache();
  }
  myModificationCount++;
  myModuleRootEventDispatcher.getMulticaster().rootsChanged(new ModuleRootEventImpl(myProject,filetypes));
  doSynchronize();
  addRootsToWatch();
}
