{
  PsiManager manager=directory.getManager();
  final VirtualFile virtualFile=directory.getVirtualFile();
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(manager.getProject()).getFileIndex();
  VirtualFile root=fileIndex.getSourceRootForFile(virtualFile);
  if (root == null) {
    root=fileIndex.getClassRootForFile(virtualFile);
  }
  if (root != null) {
    return root.getPresentableUrl();
  }
 else {
    return null;
  }
}
