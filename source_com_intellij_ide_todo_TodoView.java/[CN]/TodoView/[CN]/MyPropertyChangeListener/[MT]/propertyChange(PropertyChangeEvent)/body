{
  if (TodoConfiguration.PROP_TODO_PATTERNS.equals(e.getPropertyName())) {
    myRebuildInProgress=true;
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        ApplicationManager.getApplication().runProcessWithProgressSynchronously(new Runnable(){
          public void run(){
            ApplicationManager.getApplication().runReadAction(new Runnable(){
              public void run(){
                PsiSearchHelper searchHelper=PsiManager.getInstance(myProject).getSearchHelper();
                searchHelper.findFilesWithTodoItems();
              }
            }
);
            ApplicationManager.getApplication().invokeLater(new Runnable(){
              public void run(){
                updateFilters();
                myRebuildInProgress=false;
              }
            }
,ModalityState.NON_MMODAL);
          }
        }
,IdeBundle.message("progress.looking.for.todos"),false,myProject);
      }
    }
,ModalityState.NON_MMODAL);
  }
 else   if (TodoConfiguration.PROP_TODO_FILTERS.equals(e.getPropertyName())) {
    if (!myRebuildInProgress) {
      updateFilters();
    }
  }
}
