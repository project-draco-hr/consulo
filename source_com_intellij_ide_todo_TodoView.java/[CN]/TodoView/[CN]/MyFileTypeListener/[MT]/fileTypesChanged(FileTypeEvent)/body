{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      final ProgressWindow progressWindow=new ProgressWindow(false,null);
      progressWindow.setTitle("Looking for TODOs...");
      progressWindow.setText("Please wait...");
      final Runnable process=new Runnable(){
        public void run(){
          if (myAllTodos == null)           return;
          ApplicationManager.getApplication().runReadAction(new Runnable(){
            public void run(){
              myAllTodos.rebuildCache();
              myCurrentFileTodos.rebuildCache();
            }
          }
);
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            public void run(){
              myAllTodos.updateTree();
              myCurrentFileTodos.updateTree();
            }
          }
,ModalityState.NON_MMODAL);
        }
      }
;
      Thread thread=new Thread(new Runnable(){
        public void run(){
          ProgressManager.getInstance().runProcess(process,progressWindow);
        }
      }
,"Todo finder");
      thread.start();
    }
  }
);
}
