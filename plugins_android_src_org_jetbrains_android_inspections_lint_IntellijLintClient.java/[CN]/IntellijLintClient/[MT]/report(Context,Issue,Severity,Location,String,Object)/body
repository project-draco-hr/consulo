{
  if (location != null) {
    final File file=location.getFile();
    if (file != null) {
      final VirtualFile vFile=LocalFileSystem.getInstance().findFileByIoFile(file);
      if (myState.getMainFile().equals(vFile)) {
        final Position start=location.getStart();
        final Position end=location.getEnd();
        final TextRange textRange=start != null && end != null && start.getOffset() <= end.getOffset() ? new TextRange(start.getOffset(),end.getOffset()) : TextRange.EMPTY_RANGE;
        myState.getProblems().add(new ProblemData(issue,message,textRange));
      }
    }
  }
}
