{
  if (expression.getParent() instanceof GrSafeCastExpression) {
    final PsiType type=((GrSafeCastExpression)expression.getParent()).getType();
    if (type instanceof PsiClassType) {
      return (PsiClassType)type;
    }
  }
  if (expression.getParent() instanceof GrTypeCastExpression) {
    final PsiType type=((GrTypeCastExpression)expression.getParent()).getType();
    if (type instanceof PsiClassType) {
      return (PsiClassType)type;
    }
  }
  for (  PsiType type : GroovyExpectedTypesProvider.getDefaultExpectedTypes(expression)) {
    if (type instanceof PsiClassType) {
      final String text=type.getCanonicalText();
      if (!CommonClassNames.JAVA_LANG_OBJECT.equals(text) && !CommonClassNames.JAVA_LANG_STRING.equals(text)) {
        return (PsiClassType)type;
      }
    }
  }
  return null;
}
