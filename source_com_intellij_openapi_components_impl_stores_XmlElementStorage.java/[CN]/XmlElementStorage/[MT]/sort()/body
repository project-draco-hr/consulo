{
  final Node node=getRootElement();
  if (node == null)   return;
  final Node[] nodes=DOMUtil.toArray(node.getChildNodes());
  for (  Node n : nodes) {
    node.removeChild(n);
  }
  Arrays.sort(nodes,new Comparator<Node>(){
    public int compare(    Node n1,    Node n2){
      int r=n1.getNodeName().toLowerCase().compareTo(n2.getNodeName().toLowerCase());
      if (r == 0) {
        if (n1 instanceof Element && n2 instanceof Element) {
          Element e1=(Element)n1;
          Element e2=(Element)n2;
          final String name1=e1.getAttribute(ATTR_NAME);
          final String name2=e2.getAttribute(ATTR_NAME);
          if (name1 != null && name2 != null) {
            r=name1.compareTo(name2);
          }
        }
 else {
          r=n1.getNodeValue().compareTo(n2.getNodeValue());
        }
      }
      return r;
    }
  }
);
  for (  Node n : nodes) {
    node.appendChild(n);
  }
}
