{
  if (usage instanceof PsiJavaCodeReferenceElement) {
    if (refElement instanceof PsiPackage && !options.isIncludeSubpackages) {
      if (((PsiJavaCodeReferenceElement)usage).resolve() instanceof PsiPackage) {
        PsiElement parent=usage.getParent();
        if (parent instanceof PsiJavaCodeReferenceElement && ((PsiJavaCodeReferenceElement)parent).resolve() instanceof PsiPackage) {
          return false;
        }
      }
    }
    if (!(usage instanceof PsiReferenceExpression)) {
      if (options.isSkipImportStatements) {
        PsiElement parent=usage.getParent();
        while (parent instanceof PsiJavaCodeReferenceElement) {
          parent=parent.getParent();
        }
        if (parent instanceof PsiImportStatement) {
          return false;
        }
      }
      if (options.isSkipPackageStatements) {
        PsiElement parent=usage.getParent();
        while (parent instanceof PsiJavaCodeReferenceElement) {
          parent=parent.getParent();
        }
        if (parent instanceof PsiPackageStatement) {
          return false;
        }
      }
    }
  }
  return true;
}
