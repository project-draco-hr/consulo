{
  PsiSearchHelper helper=method.getManager().getSearchHelper();
  if (method.isConstructor()) {
    if (!options.isIncludeOverloadUsages) {
      addConstructorUsages(method,helper,searchScope,result,options);
    }
 else {
      PsiMethod[] constructors=method.getContainingClass().getConstructors();
      for (      PsiMethod constructor : constructors) {
        addConstructorUsages(constructor,helper,searchScope,result,options);
      }
    }
  }
 else {
    helper.processReferencesIncludingOverriding(new PsiReferenceProcessor(){
      public boolean execute(      PsiReference ref){
        return addResult(result,ref,options,method);
      }
    }
,method,searchScope,!options.isIncludeOverloadUsages);
    PsiReference[] refs=EjbUsagesUtil.findEjbMethodReferences(method,helper,searchScope,!options.isIncludeOverloadUsages);
    addResults(result,refs,options,method);
  }
}
