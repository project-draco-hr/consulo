{
  final CodeFoldingManagerImpl foldingManager=(CodeFoldingManagerImpl)CodeFoldingManager.getInstance(project);
  foldingManager.updateFoldRegions(editor,true);
  Runnable operation=new Runnable(){
    public void run(){
      for (      FoldingTransferableData.FoldingData data : ((FoldingTransferableData)value).getData()) {
        FoldRegion region=foldingManager.findFoldRegion(editor,data.startOffset + bounds.getStartOffset(),data.endOffset + bounds.getStartOffset());
        if (region != null) {
          region.setExpanded(data.isExpanded);
        }
      }
    }
  }
;
  editor.getFoldingModel().runBatchFoldingOperation(operation);
}
