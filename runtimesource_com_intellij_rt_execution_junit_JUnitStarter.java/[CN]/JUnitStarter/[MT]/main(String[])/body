{
  SegmentedOutputStream out=new SegmentedOutputStream(System.out);
  SegmentedOutputStream err=new SegmentedOutputStream(System.err);
  if (!canWorkWithJUnitVersion(err)) {
    err.flush();
    System.exit(-3);
  }
  if (!checkVersion(args,err)) {
    err.flush();
    System.exit(-3);
  }
  Vector argList=new Vector();
  for (int i=0; i < args.length; i++) {
    String arg=args[i];
    argList.addElement(arg);
  }
  boolean isJUnit4=removeVersionParameters(argList);
  String[] array=new String[argList.size()];
  argList.copyInto(array);
  int exitCode=prepareStreamsAndStart(array,isJUnit4,out,err);
  System.exit(exitCode);
}
