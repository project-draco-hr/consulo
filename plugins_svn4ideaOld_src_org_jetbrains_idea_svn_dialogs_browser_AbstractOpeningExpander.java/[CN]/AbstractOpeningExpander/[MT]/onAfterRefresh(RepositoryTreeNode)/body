{
  myKeepingExpander.onAfterRefresh(node);
  if (node.isLeaf()) {
    return;
  }
  final String myUrl=node.getURL().toString();
  final ExpandVariants expandVariant=expandNode(myUrl);
  if (ExpandVariants.DO_NOTHING.equals(expandVariant)) {
    return;
  }
  myBrowser.expandNode(node);
  if (ExpandVariants.EXPAND_AND_EXIT.equals(expandVariant)) {
    removeSelf();
  }
 else {
    final Enumeration children=node.children();
    while (children.hasMoreElements()) {
      final TreeNode treeNode=(TreeNode)children.nextElement();
      if (treeNode instanceof RepositoryTreeNode) {
        final RepositoryTreeNode repositoryTreeNode=(RepositoryTreeNode)treeNode;
        final String childUrl=repositoryTreeNode.getURL().toString();
        if (checkChild(childUrl)) {
          if ((mySelectionPath != null) && (mySelectionPath.equals(childUrl))) {
            myBrowser.setSelectedNode(repositoryTreeNode);
          }
          repositoryTreeNode.reload(this,false);
          return;
        }
      }
    }
    removeSelf();
  }
}
