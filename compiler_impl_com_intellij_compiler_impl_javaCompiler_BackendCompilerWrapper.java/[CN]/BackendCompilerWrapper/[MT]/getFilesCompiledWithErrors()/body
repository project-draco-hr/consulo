{
  CompilerMessage[] messages=myCompileContext.getMessages(CompilerMessageCategory.ERROR);
  Set<VirtualFile> compiledWithErrors=Collections.emptySet();
  if (messages.length > 0) {
    compiledWithErrors=new HashSet<VirtualFile>(messages.length);
    for (int idx=0; idx < messages.length; idx++) {
      CompilerMessage message=messages[idx];
      final VirtualFile file=message.getVirtualFile();
      if (file != null) {
        compiledWithErrors.add(file);
      }
    }
  }
  return compiledWithErrors;
}
