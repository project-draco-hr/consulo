{
  final List<ModuleChunk> chunks=getModuleChunks(moduleToFilesMap);
  List<VirtualFile> files=ContainerUtil.concat(moduleToFilesMap.values());
  LOG.debug("------ Make started. Files to compile: " + files.size() + " "+ StringUtil.first(files.toString(),500,true));
  myProcessedFilesCount=0;
  myTotalFilesToCompile=files.size();
  long start=System.currentTimeMillis();
  for (  final ModuleChunk chunk : chunks) {
    try {
      boolean success=compileChunk(chunk);
      if (!success)       return;
    }
 catch (    IOException e) {
      throw new CompilerException(e.getMessage(),e);
    }
  }
  long end=System.currentTimeMillis();
  String time=(end - start) / 1000 / 60 + "m" + ((end - start) % 60000) / 1000 + "s";
  BackendCompiler compiler=((CompilerConfigurationImpl)CompilerConfiguration.getInstance(myProject)).getDefaultCompiler();
  LOG.debug("Compilation took " + time + "; for "+ compiler.getPresentableName()+ ". ");
}
