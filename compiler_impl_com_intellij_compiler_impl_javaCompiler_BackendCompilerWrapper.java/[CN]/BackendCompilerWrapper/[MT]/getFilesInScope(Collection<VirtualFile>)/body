{
  final List<VirtualFile> filesInScope=new ArrayList<VirtualFile>(dependentFiles.size());
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      for (      VirtualFile dependentFile : dependentFiles) {
        if (myCompileContext.getCompileScope().belongs(dependentFile.getUrl())) {
          filesInScope.add(dependentFile);
        }
      }
    }
  }
);
  return filesInScope;
}
