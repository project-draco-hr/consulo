{
  final List<VirtualFile> filesInScope=new ArrayList<VirtualFile>(dependentFiles.length);
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      for (      VirtualFile dependentFile : dependentFiles) {
        if (myCompileContext.getCompileScope().belongs(dependentFile.getUrl())) {
          filesInScope.add(dependentFile);
        }
      }
    }
  }
);
  return filesInScope.toArray(new VirtualFile[filesInScope.size()]);
}
