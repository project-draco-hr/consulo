{
  artifact=getOriginalArtifact(artifact);
  if (myModifiableModel != null) {
    final CompositePackagingElement<?> rootElement=myModifiableModel.getArtifactByOriginal(artifact).getRootElement();
    if (rootElement != artifact.getRootElement()) {
      myModifiableRoots.put(artifact,rootElement);
    }
  }
  CompositePackagingElement<?> root=myModifiableRoots.get(artifact);
  if (root == null) {
    root=ArtifactUtil.copyFromRoot(artifact.getRootElement(),myProject);
    myModifiableRoots.put(artifact,root);
  }
  return root;
}
