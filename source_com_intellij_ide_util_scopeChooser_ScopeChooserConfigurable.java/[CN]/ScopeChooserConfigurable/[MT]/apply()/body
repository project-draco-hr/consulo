{
  final Set<MyNode> roots=new HashSet<MyNode>();
  if (canApply(roots,ProjectBundle.message("rename.message.prefix.scope"),ProjectBundle.message("rename.scope.title"))) {
    super.apply();
    processScopes();
    myState.order.clear();
    final DefaultMutableTreeNode node=(DefaultMutableTreeNode)((DefaultMutableTreeNode)myTree.getSelectionPath().getLastPathComponent()).getParent();
    for (int i=0; i < node.getChildCount(); i++) {
      myState.order.add(((MyNode)node.getChildAt(i)).getDisplayName());
    }
  }
}
