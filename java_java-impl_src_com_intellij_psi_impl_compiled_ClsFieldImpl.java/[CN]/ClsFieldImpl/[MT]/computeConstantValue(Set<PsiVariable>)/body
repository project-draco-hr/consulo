{
  if (!hasModifierProperty(PsiModifier.FINAL))   return null;
  PsiExpression initializer=getInitializer();
  if (initializer == null)   return null;
  final PsiClass containingClass=getContainingClass();
  final String qName=containingClass != null ? containingClass.getQualifiedName() : null;
  if ("java.lang.Float".equals(qName)) {
    @NonNls final String name=getName();
    if ("POSITIVE_INFINITY".equals(name))     return new Float(Float.POSITIVE_INFINITY);
    if ("NEGATIVE_INFINITY".equals(name))     return new Float(Float.NEGATIVE_INFINITY);
    if ("NaN".equals(name))     return new Float(Float.NaN);
  }
 else   if ("java.lang.Double".equals(qName)) {
    @NonNls final String name=getName();
    if ("POSITIVE_INFINITY".equals(name))     return new Double(Double.POSITIVE_INFINITY);
    if ("NEGATIVE_INFINITY".equals(name))     return new Double(Double.NEGATIVE_INFINITY);
    if ("NaN".equals(name))     return new Double(Double.NaN);
  }
  return PsiConstantEvaluationHelperImpl.computeCastTo(initializer,getType(),visitedVars);
}
