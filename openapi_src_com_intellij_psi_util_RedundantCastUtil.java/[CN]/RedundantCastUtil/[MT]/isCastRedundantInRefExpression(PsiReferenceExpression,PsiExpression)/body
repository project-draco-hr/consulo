{
  final PsiElement resolved=refExpression.resolve();
  final Ref<Boolean> result=new Ref<Boolean>(Boolean.FALSE);
  refExpression.getManager().performActionWithFormatterDisabled(new Runnable(){
    public void run(){
      try {
        final PsiElementFactory elementFactory=refExpression.getManager().getElementFactory();
        final PsiExpression copyExpression=elementFactory.createExpressionFromText(refExpression.getText(),refExpression);
        if (copyExpression instanceof PsiReferenceExpression) {
          final PsiReferenceExpression copy=(PsiReferenceExpression)copyExpression;
          final PsiExpression qualifier=copy.getQualifierExpression();
          if (qualifier != null) {
            qualifier.replace(castOperand);
            result.set(Boolean.valueOf(copy.resolve() == resolved));
          }
        }
      }
 catch (      IncorrectOperationException e) {
      }
    }
  }
);
  return result.get().booleanValue();
}
