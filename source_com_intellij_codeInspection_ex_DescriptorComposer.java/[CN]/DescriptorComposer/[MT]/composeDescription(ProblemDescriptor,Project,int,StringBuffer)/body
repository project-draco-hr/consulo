{
  PsiElement expression=description.getPsiElement();
  StringBuffer anchor=new StringBuffer();
  if (expression != null) {
    VirtualFile vFile=expression.getContainingFile().getVirtualFile();
    anchor.append("<a HREF=\"");
    try {
      anchor.append(new URL(vFile.getUrl() + "#descr:" + i));
    }
 catch (    MalformedURLException e) {
      LOG.error(e);
    }
    anchor.append("\">");
    anchor.append(expression.getText().replaceAll("\\$","\\\\\\$"));
    anchor.append("</a>");
  }
 else {
    anchor.append("<font style=\"font-family:verdana; font-weight:bold; color:#FF0000\";>invalidated item</font>");
  }
  String descriptionTemplate=description.getDescriptionTemplate();
  if (descriptionTemplate != null) {
    String res=descriptionTemplate.replaceAll("#ref",anchor.toString());
    res=res.replaceAll("#loc","at line " + description.getLineNumber());
    buf.append(res);
  }
 else {
    buf.append("No error message provided.");
  }
}
