{
  final CreateActivityAction action=new CreateActivityAction();
  VirtualFile manifestFile=myFixture.findFileInTempDir(SdkConstants.FN_ANDROID_MANIFEST_XML);
  VirtualFile dir=manifestFile.getParent();
  final Project project=myFixture.getProject();
  final PsiDirectory psiDir=PsiManager.getInstance(project).findDirectory(dir);
  executeWritingCommand(new Runnable(){
    @Override public void run(){
      try {
        action.createActivity("MyActivity","",psiDir);
        String expectedFileName="f1.xml";
        myFixture.copyFileToProject(TEST_FOLDER + '/' + expectedFileName,expectedFileName);
        VirtualFile actual=myFixture.findFileInTempDir(SdkConstants.FN_ANDROID_MANIFEST_XML);
        VirtualFile expected=myFixture.findFileInTempDir(expectedFileName);
        IdeaTestUtil.assertFilesEqual(expected,actual);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
}
