{
  List<ZipFile> toClose=null;
synchronized (ourLock) {
    Iterator<CacheRecord> i=ourPathCache.values().iterator();
    while (i.hasNext() && (limit == 0 || toClose == null || toClose.size() < limit)) {
      CacheRecord record=i.next();
      if (record.count <= 0 && (timeout == 0 || record.released <= timeout)) {
        i.remove();
        ourFileCache.remove(record.file);
        if (toClose == null)         toClose=ContainerUtil.newArrayList();
        toClose.add(record.file);
      }
    }
  }
  return toClose;
}
