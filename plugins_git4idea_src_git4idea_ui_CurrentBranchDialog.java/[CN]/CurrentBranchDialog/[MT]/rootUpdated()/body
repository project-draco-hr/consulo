{
  VirtualFile root=getRoot();
  GitBranch current=GitBranch.current(myProject,root);
  myRepositoryComboBox.removeAllItems();
  myRepositoryComboBox.addItem(REMOTE_NONE);
  if (current != null) {
    myRepositoryComboBox.addItem(REMOTE_THIS);
    for (    GitRemote r : GitRemote.list(myProject,root)) {
      myRepositoryComboBox.addItem(r.name());
    }
  }
  myTrackedRepository=current == null ? null : current.getTrackedRemoteName(myProject,root);
  if (myTrackedRepository == null) {
    myTrackedRepository=REMOTE_NONE;
  }
 else   if (".".equals(myTrackedRepository)) {
    myTrackedRepository=REMOTE_THIS;
  }
  myTrackedBranch=current == null ? null : current.getTrackedBranchName(myProject,root);
  if (myTrackedBranch == null) {
    myTrackedBranch=BRANCH_NONE;
  }
 else   if (myTrackedBranch.startsWith(GitBranch.REFS_HEADS_PREFIX)) {
    myTrackedBranch=myTrackedBranch.substring(GitBranch.REFS_HEADS_PREFIX.length());
  }
  myRepositoryComboBox.setSelectedItem(myTrackedRepository);
  myBranches.clear();
  GitBranch.list(myProject,root,true,true,myBranches);
  trackedRemoteUpdated();
}
