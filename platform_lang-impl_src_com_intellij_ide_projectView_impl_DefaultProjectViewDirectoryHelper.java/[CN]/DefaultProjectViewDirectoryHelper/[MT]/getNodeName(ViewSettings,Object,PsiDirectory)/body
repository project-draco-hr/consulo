{
  PsiPackage aPackage=PsiPackageManager.getInstance(getProject()).findAnyPackage(directory);
  PsiPackage parentPackage;
  if (!ProjectRootsUtil.isSourceRoot(directory) && aPackage != null && !aPackage.getQualifiedName().isEmpty() && parentValue instanceof PsiDirectory) {
    parentPackage=PsiPackageManager.getInstance(getProject()).findAnyPackage(((PsiDirectory)parentValue));
  }
 else   if (ProjectRootsUtil.isSourceRoot(directory) && aPackage != null) {
    aPackage=null;
    parentPackage=null;
  }
 else {
    parentPackage=null;
  }
  return TreeViewUtil.getNodeName(settings,aPackage,parentPackage,directory.getName(),isShowFQName(settings,parentValue,directory));
}
