{
  vcs.createDirectory("myRoot",null);
  vcs.apply();
  TestVirtualFile f=new TestVirtualFile("file","content",null);
  TestVirtualFile oldParent=new TestVirtualFile("anotherRoot",null);
  TestVirtualFile newParent=new TestVirtualFile("myRoot",null);
  newParent.addChild(f);
  fileFilter.setFilesNotUnderContentRoot(oldParent);
  fileManager.fireFileMoved(f,oldParent,newParent);
  Entry e=vcs.findEntry("myRoot/file");
  assertNotNull(e);
  assertEquals(c("content"),e.getContent());
}
