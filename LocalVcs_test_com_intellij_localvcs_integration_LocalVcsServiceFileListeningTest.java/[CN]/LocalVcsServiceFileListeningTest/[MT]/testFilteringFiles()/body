{
  vcs=EasyMock.createMock(LocalVcs.class);
  EasyMock.expect(vcs.getRoots()).andReturn(Collections.<Entry>emptyList());
  vcs.apply();
  EasyMock.replay(vcs);
  initAndStartup(vcs);
  VirtualFile f=new TestVirtualFile(null,null,null);
  fileFilter.setFilesNotUnderContentRoot(f);
  fileManager.fireFileCreated(new VirtualFileEvent(null,f,null,null));
  fileManager.fireContentChanged(new VirtualFileEvent(null,f,null,null));
  fileManager.fireBeforePropertyChange(new VirtualFilePropertyEvent(null,f,VirtualFile.PROP_NAME,null,null));
  fileManager.fireFileMoved(new VirtualFileMoveEvent(null,f,f,f));
  fileManager.fireBeforeFileDeletion(new VirtualFileEvent(null,f,null,null));
  EasyMock.verify(vcs);
}
