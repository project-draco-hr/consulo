{
  if (ProjectFacetManager.getInstance(project).getFacets(AndroidFacet.ID,baseScope.getAffectedModules()).size() == 0) {
    return null;
  }
  final List<Module> genModules=new ArrayList<Module>();
  for (  Module module : baseScope.getAffectedModules()) {
    final AndroidFacet facet=AndroidFacet.getInstance(module);
    if (facet == null) {
      continue;
    }
    AndroidCompileUtil.createGenModulesAndSourceRoots(facet);
    final Module genModule=AndroidCompileUtil.getGenModule(module);
    if (genModule != null) {
      genModules.add(genModule);
    }
  }
  if (genModules.size() == 0) {
    return null;
  }
  final Module[] genModulesArray=genModules.toArray(new Module[genModules.size()]);
  return new CompositeScope(baseScope,new ModuleCompileScope(project,genModulesArray,false));
}
