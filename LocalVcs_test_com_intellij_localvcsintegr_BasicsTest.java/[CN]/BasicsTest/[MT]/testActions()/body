{
  VirtualFile f=root.createChildData(null,"file.java");
  f.setBinaryContent(new byte[]{0});
  assertEquals(0,getVcsContentOf(f)[0]);
  setDocumentTextFor(f,new byte[]{1});
  assertEquals(0,getVcsContentOf(f)[0]);
  LocalVcsAction a=getVcsComponent().startAction("name");
  assertEquals(1,getVcsContentOf(f)[0]);
  setDocumentTextFor(f,new byte[]{2});
  a.finish();
  assertEquals(2,getVcsContentOf(f)[0]);
  List<Revision> rr=getVcsRevisionsFor(f);
  assertEquals("name",rr.get(0).getCauseAction());
  assertNull(rr.get(1).getName());
}
