{
  final FileInputStream stream=new FileInputStream(convertToIOFileAndCheck(file));
  try {
    long l=file.getLength();
    if (l > Integer.MAX_VALUE)     throw new IOException("File is too large: " + l + ", "+ file);
    final int length=(int)l;
    if (length < 0)     throw new IOException("Invalid file length: " + length + ", "+ file);
    return FileUtil.loadBytes(stream,length);
  }
  finally {
    stream.close();
  }
}
