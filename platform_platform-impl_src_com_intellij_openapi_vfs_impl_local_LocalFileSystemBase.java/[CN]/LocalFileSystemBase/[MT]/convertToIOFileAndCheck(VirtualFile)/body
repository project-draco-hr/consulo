{
  final File ioFile=convertToIOFile(file);
  int intFlags=getBooleanAttributes(ioFile);
  if (intFlags != -1) {
    if ((intFlags & BA_EXISTS) != 0 && (intFlags & BA_REGULAR) == 0) {
      throw new FileNotFoundException("Not a file: " + ioFile);
    }
    return ioFile;
  }
  if (ioFile.exists() && !ioFile.isFile()) {
    throw new FileNotFoundException("Not a file: " + ioFile);
  }
  return ioFile;
}
