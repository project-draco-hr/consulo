{
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    r.run();
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      if (p.isDisposed())       return;
      r.run();
    }
  }
,state);
}
