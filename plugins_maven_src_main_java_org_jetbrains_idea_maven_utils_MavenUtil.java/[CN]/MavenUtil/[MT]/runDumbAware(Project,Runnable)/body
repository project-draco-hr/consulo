{
  if (DumbService.isDumbAware(r)) {
    r.run();
  }
 else {
    DumbService.getInstance(project).runWhenSmart(new Runnable(){
      public void run(){
        if (project.isDisposed())         return;
        r.run();
      }
    }
);
  }
}
