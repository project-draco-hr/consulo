{
  final MasterDetailsComponent.MyNode existing=findFacetNode(facet,moduleNode);
  if (existing != null)   return existing;
  final FacetConfigurable facetConfigurable=new FacetConfigurable(facet,getFacetConfigurator(),myTreeUpdater);
  final MasterDetailsComponent.MyNode facetNode=new MasterDetailsComponent.MyNode(facetConfigurable);
  myNodes.put(facet,facetNode);
  MasterDetailsComponent.MyNode parent=moduleNode;
  final Facet underlyingFacet=facet.getUnderlyingFacet();
  if (underlyingFacet != null) {
    parent=myNodes.get(underlyingFacet);
    LOG.assertTrue(parent != null);
  }
  myConfigurable.addNode(facetNode,parent);
  return facetNode;
}
