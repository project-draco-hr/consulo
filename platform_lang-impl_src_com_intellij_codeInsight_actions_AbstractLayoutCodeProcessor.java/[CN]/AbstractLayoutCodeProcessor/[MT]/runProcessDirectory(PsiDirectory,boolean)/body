{
  final ArrayList<PsiFile> array=new ArrayList<PsiFile>();
  collectFilesToProcess(array,directory,getIgnoreRoots(directory.getProject()),recursive);
  final String where=CodeInsightBundle.message("process.scope.directory",directory.getVirtualFile().getPresentableUrl());
  runProcessOnFiles(where,array);
}
