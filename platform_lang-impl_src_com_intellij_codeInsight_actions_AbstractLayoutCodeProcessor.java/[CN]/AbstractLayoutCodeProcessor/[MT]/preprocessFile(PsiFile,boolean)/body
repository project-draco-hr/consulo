{
  final FutureTask<Boolean> previousTask=getPreviousProcessorTask(file,processChangedTextOnly);
  final FutureTask<Boolean> currentTask=prepareTask(file,processChangedTextOnly);
  return new FutureTask<Boolean>(new Callable<Boolean>(){
    @Override public Boolean call() throws Exception {
      if (previousTask != null) {
        previousTask.run();
        if (!previousTask.get() || previousTask.isCancelled())         return false;
      }
      currentTask.run();
      return currentTask.get() && !currentTask.isCancelled();
    }
  }
);
}
