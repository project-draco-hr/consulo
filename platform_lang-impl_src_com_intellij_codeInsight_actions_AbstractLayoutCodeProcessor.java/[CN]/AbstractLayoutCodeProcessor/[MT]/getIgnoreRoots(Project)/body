{
  Set<VirtualFile> result=new HashSet<VirtualFile>();
  VirtualFile projectBaseDir=project.getBaseDir();
  if (projectBaseDir != null && projectBaseDir.isDirectory()) {
    VirtualFile projectVirtualDirectory=projectBaseDir.findChild(Project.DIRECTORY_STORE_FOLDER);
    if (projectVirtualDirectory != null) {
      result.add(projectVirtualDirectory);
    }
  }
  VirtualFile projectFile=project.getProjectFile();
  if (projectFile != null) {
    result.add(projectFile);
  }
  VirtualFile workspaceFile=project.getWorkspaceFile();
  if (workspaceFile != null) {
    result.add(workspaceFile);
  }
  for (  Module m : ModuleManager.getInstance(project).getModules()) {
    VirtualFile moduleFile=m.getModuleFile();
    if (moduleFile != null) {
      result.add(moduleFile);
    }
  }
  return result;
}
