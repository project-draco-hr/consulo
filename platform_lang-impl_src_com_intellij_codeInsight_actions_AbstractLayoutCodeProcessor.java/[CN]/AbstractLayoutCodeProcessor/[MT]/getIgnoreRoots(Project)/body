{
  Set<VirtualFile> result=new HashSet<VirtualFile>();
  String location=project.getBasePath();
  if (location != null) {
    File projectDir=new File(location,Project.DIRECTORY_STORE_FOLDER);
    if (projectDir.isDirectory()) {
      VirtualFile projectVirtualDirectory=LocalFileSystem.getInstance().findFileByIoFile(projectDir);
      if (projectVirtualDirectory != null) {
        result.add(projectVirtualDirectory);
      }
    }
  }
  VirtualFile projectFile=project.getProjectFile();
  if (projectFile != null) {
    result.add(projectFile);
  }
  VirtualFile workspaceFile=project.getWorkspaceFile();
  if (workspaceFile != null) {
    result.add(workspaceFile);
  }
  for (  Module m : ModuleManager.getInstance(project).getModules()) {
    VirtualFile moduleFile=m.getModuleFile();
    if (moduleFile != null) {
      result.add(moduleFile);
    }
  }
  return result;
}
