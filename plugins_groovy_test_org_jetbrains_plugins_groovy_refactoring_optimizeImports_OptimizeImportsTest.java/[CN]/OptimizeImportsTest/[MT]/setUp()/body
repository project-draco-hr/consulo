{
  super.setUp();
  final ModifiableRootModel rootModel=ModuleRootManager.getInstance(getModule()).getModifiableModel();
  VirtualFile root=LocalFileSystem.getInstance().findFileByPath(TestUtils.getTestDataPath() + "/optimizeImports");
  assertNotNull(root);
  ContentEntry contentEntry=rootModel.addContentEntry(root);
  rootModel.setJdk(JavaSdk.getInstance().createJdk("java sdk",TestUtils.getMockJdkHome(),false));
  final VirtualFile sourceRoot=root.findChild(getTestName(true));
  assertNotNull(sourceRoot);
  contentEntry.addSourceFolder(sourceRoot,false);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      rootModel.commit();
    }
  }
);
  GroovyPsiManager.getInstance(getProject()).buildGDK();
}
