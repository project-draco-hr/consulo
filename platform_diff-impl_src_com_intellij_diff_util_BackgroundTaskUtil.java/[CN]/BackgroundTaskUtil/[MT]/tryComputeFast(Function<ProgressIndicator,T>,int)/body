{
  final Ref<T> resultRef=new Ref<T>();
  ProgressIndicator indicator=executeAndTryWait(new Function<ProgressIndicator,Runnable>(){
    @Override public Runnable fun(    final ProgressIndicator indicator){
      final T result=backgroundTask.fun(indicator);
      return new Runnable(){
        @Override public void run(){
          resultRef.set(result);
        }
      }
;
    }
  }
,null,waitMillis,false);
  indicator.cancel();
  return resultRef.get();
}
