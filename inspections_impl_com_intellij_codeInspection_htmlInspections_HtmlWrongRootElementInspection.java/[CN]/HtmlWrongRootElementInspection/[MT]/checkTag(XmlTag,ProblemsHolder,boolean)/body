{
  if (!(tag.getParent() instanceof XmlTag)) {
    final PsiFile psiFile=tag.getContainingFile();
    if (!(psiFile instanceof XmlFile)) {
      return;
    }
    XmlFile xmlFile=(XmlFile)psiFile;
    final XmlDocument document=xmlFile.getDocument();
    if (document == null) {
      return;
    }
    XmlProlog prolog=document.getProlog();
    if (prolog == null || prolog.getUserData(DO_NOT_VALIDATE_KEY) != null) {
      return;
    }
    XmlDoctype doctype=prolog.getDoctype();
    if (doctype == null) {
      return;
    }
    XmlElement nameElement=doctype.getNameElement();
    if (nameElement == null) {
      return;
    }
    String name=tag.getName();
    String text=nameElement.getText();
    if (tag instanceof HtmlTag) {
      name=name.toLowerCase();
      text=text.toLowerCase();
    }
    if (!name.equals(text)) {
      name=XmlUtil.findLocalNameByQualifiedName(name);
      if (!name.equals(text)) {
        holder.registerProblem(tag,XmlErrorMessages.message("wrong.root.element"),ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
      }
    }
  }
}
