{
  try {
    IndexingContext index=getIndex(indexId);
    TopDocs docs=null;
    try {
      BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);
      docs=index.getIndexSearcher().search(query,null,maxResult);
    }
 catch (    BooleanQuery.TooManyClauses ignore) {
    }
    if (docs == null || docs.scoreDocs.length == 0)     return Collections.emptySet();
    Set<MavenArtifactInfo> result=new THashSet<MavenArtifactInfo>();
    for (int i=0; i < docs.scoreDocs.length; i++) {
      int docIndex=docs.scoreDocs[i].doc;
      Document doc=index.getIndexReader().document(docIndex);
      ArtifactInfo a=IndexUtils.constructArtifactInfo(doc,index);
      if (a == null)       continue;
      a.repository=getRepositoryPathOrUrl(index);
      result.add(MavenModelConverter.convertArtifactInfo(a));
    }
    return result;
  }
 catch (  Exception e) {
    throw new MavenServerIndexerException(wrapException(e));
  }
}
