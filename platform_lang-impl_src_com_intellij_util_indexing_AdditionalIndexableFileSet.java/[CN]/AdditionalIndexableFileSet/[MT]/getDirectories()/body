{
  Set<VirtualFile> directories=cachedDirectories;
  if (directories == null || filesInvalidated(directories) || filesInvalidated(cachedFiles)) {
    directories=collectFilesAndDirectories();
  }
  return directories;
}
