{
  final Graph<PsiPackage> graph=GraphGenerator.create(CachingSemiGraph.create(new GraphGenerator.SemiGraph<PsiPackage>(){
    public Collection<PsiPackage> getNodes(){
      return getAllScopePackages().values();
    }
    public Iterator<PsiPackage> getIn(    PsiPackage psiPack){
      final Set<PsiPackage> psiPackages=myPackageDependencies.get(psiPack);
      if (psiPackages == null) {
        return new HashSet<PsiPackage>().iterator();
      }
      return psiPackages.iterator();
    }
  }
));
  return graph;
}
