{
  if (toRemove.isEmpty()) {
    return;
  }
  Map<DataNode<ModuleData>,Collection<DataNode<ContentRootData>>> byModule=ExternalSystemUtil.groupBy(toRemove,ExternalSystemProjectKeys.MODULE);
  for (  Map.Entry<DataNode<ModuleData>,Collection<DataNode<ContentRootData>>> entry : byModule.entrySet()) {
    final Module module=myProjectStructureHelper.findIdeModule(entry.getKey().getData(),project);
    if (module == null) {
      LOG.warn(String.format("Can't import content roots. Reason: target module (%s) is not found at the ide. Content roots: %s",entry.getKey(),entry.getValue()));
      continue;
    }
    List<ModuleAwareContentRoot> contentRoots=ContainerUtilRt.newArrayList();
    for (    DataNode<ContentRootData> holder : entry.getValue()) {
      ModuleAwareContentRoot contentRoot=myProjectStructureHelper.findIdeContentRoot(holder.getData().getId(holder),project);
      if (contentRoot != null) {
        contentRoots.add(contentRoot);
      }
    }
    doRemoveData(contentRoots,project,synchronous);
  }
}
