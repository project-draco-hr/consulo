{
  LookupImpl lookup=(LookupImpl)LookupManager.getActiveLookup(editor);
  if (lookup == null) {
    myOriginalHandler.execute(editor,dataContext);
    return;
  }
  if (lookup.getMinPrefixLength() > lookup.getInitialMinPrefixLength()) {
    for (    final LookupElement item : lookup.getItems()) {
      final PrefixMatcher oldMatcher=item.getPrefixMatcher();
      final String oldPrefix=oldMatcher.getPrefix();
      final String newPrefix=oldPrefix.substring(0,oldPrefix.length() - 1);
      item.setPrefixMatcher(oldMatcher.cloneWithPrefix(newPrefix));
    }
    lookup.updateList();
    Point point=lookup.calculatePosition();
    Dimension preferredSize=lookup.getComponent().getPreferredSize();
    lookup.setBounds(point.x,point.y,preferredSize.width,preferredSize.height);
    lookup.getList().repaint();
  }
 else {
    lookup.hide();
  }
  myOriginalHandler.execute(editor,dataContext);
}
