{
  if (!ApplicationManagerEx.getApplicationEx().isInternal()) {
    return new JavaElementVisitor(){
    }
;
  }
  return new JavaElementVisitor(){
    @Override public void visitMethodCallExpression(    PsiMethodCallExpression expression){
      PsiReferenceExpression methodExpression=expression.getMethodExpression();
      PsiElement resolved=methodExpression.resolve();
      if (!(resolved instanceof PsiMethod))       return;
      PsiMethod method=(PsiMethod)resolved;
      PsiClass clazz=method.getContainingClass();
      if (clazz == null)       return;
      String methodName=method.getName();
      if ("java.io.File".equals(clazz.getQualifiedName()) && ("equals".equals(methodName) || "compareTo".equals(methodName) || "hashCode".equals(methodName))) {
        holder.registerProblem(methodExpression,"Do not use File.equals/hashCode/compareTo as they don't honor case-sensitivity on MacOS. Use FileUtil.filesEquals/fileHashCode/compareFiles instead",ProblemHighlightType.LIKE_DEPRECATED);
      }
    }
  }
;
}
