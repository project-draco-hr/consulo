{
  myDelegate=delegate;
  AnAction action=ActionManager.getInstance().getAction("Arrangement.Rule.Edit");
  Presentation presentation=action.getTemplatePresentation().clone();
  Icon editIcon=presentation.getIcon();
  Dimension buttonSize=new Dimension(editIcon.getIconWidth(),editIcon.getIconHeight());
  myEditButton=new ActionButton(action,presentation,ArrangementConstants.RULE_TREE_PLACE,buttonSize);
  myEditButton.setVisible(false);
  FontMetrics metrics=getFontMetrics(getFont());
  int maxWidth=0;
  for (int i=0; i <= 99; i++) {
    maxWidth=Math.max(metrics.stringWidth(String.valueOf(i)),maxWidth);
  }
  int height=metrics.getHeight() - metrics.getDescent() - metrics.getLeading();
  int diameter=Math.max(maxWidth,height) * 5 / 3;
  myRowIndexControl=new ArrangementRuleIndexControl(diameter,height);
  setOpaque(false);
  init();
}
