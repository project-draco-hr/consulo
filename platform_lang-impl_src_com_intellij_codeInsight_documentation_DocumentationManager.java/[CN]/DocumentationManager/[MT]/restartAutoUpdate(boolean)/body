{
  if (state && myToolWindow != null) {
    if (myAutoUpdateRequest == null) {
      myAutoUpdateRequest=new Runnable(){
        public void run(){
          final DataContext dataContext=DataManager.getInstance().getDataContext();
          final Editor editor=PlatformDataKeys.EDITOR.getData(dataContext);
          if (editor != null) {
            final PsiFile file=PsiUtilBase.getPsiFileInEditor(editor,myProject);
            final Editor injectedEditor=InjectedLanguageUtil.getEditorForInjectedLanguageNoCommit(editor,file);
            if (injectedEditor != null) {
              final PsiFile psiFile=PsiUtilBase.getPsiFileInEditor(injectedEditor,myProject);
              if (psiFile != null) {
                showJavaDocInfo(injectedEditor,psiFile,false);
                return;
              }
            }
            if (file != null) {
              showJavaDocInfo(editor,file,false);
            }
          }
        }
      }
;
      IdeEventQueue.getInstance().addIdleListener(myAutoUpdateRequest,500);
    }
  }
 else {
    if (myAutoUpdateRequest != null) {
      IdeEventQueue.getInstance().removeIdleListener(myAutoUpdateRequest);
      myAutoUpdateRequest=null;
    }
  }
}
