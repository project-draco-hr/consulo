{
  ComponentSaveSession saveSession=startSave();
  Set<String> componentNames;
  try {
    componentNames=saveSession.analyzeExternalChanges(changedFiles);
    if (componentNames == null) {
      return Collections.emptyList();
    }
    for (    Pair<VirtualFile,StateStorage> pair : changedFiles) {
      if (pair.second == null) {
        return Collections.emptyList();
      }
    }
    Collection<String> currentNotReloadableComponents=getNotReloadableComponents(componentNames);
    StorageUtil.logStateDiffInfo(changedFiles,componentNames);
    if (!currentNotReloadableComponents.isEmpty()) {
      return currentNotReloadableComponents;
    }
  }
  finally {
    finishSave(saveSession);
  }
  if (!componentNames.isEmpty()) {
    messageBus.syncPublisher(BatchUpdateListener.TOPIC).onBatchUpdateStarted();
    try {
      doReload(changedFiles,componentNames);
      reinitComponents(componentNames,false);
    }
  finally {
      messageBus.syncPublisher(BatchUpdateListener.TOPIC).onBatchUpdateFinished();
    }
  }
  return null;
}
