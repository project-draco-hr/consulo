{
  String name=getStateSpec(component).name();
  if (changedStorages == null || !reloadData) {
    doAddComponent(name,component);
  }
  if (optimizeTestLoading()) {
    return name;
  }
  Class<T> stateClass=getComponentStateClass(component);
  T state=null;
  StateStorage defaultsStorage=getDefaultsStorage();
  if (defaultsStorage != null) {
    state=defaultsStorage.getState(component,name,stateClass,null);
  }
  Storage[] storageSpecs=getComponentStorageSpecs(component,StateStorageOperation.READ);
  for (  Storage storageSpec : storageSpecs) {
    StateStorage stateStorage=getStateStorageManager().getStateStorage(storageSpec);
    if (stateStorage != null && (stateStorage.hasState(component,name,stateClass,reloadData) || (changedStorages != null && changedStorages.contains(stateStorage)))) {
      state=stateStorage.getState(component,name,stateClass,state);
      if (state instanceof Element) {
        break;
      }
    }
  }
  if (state != null) {
    component.loadState(state);
  }
  validateUnusedMacros(name,true);
  return name;
}
