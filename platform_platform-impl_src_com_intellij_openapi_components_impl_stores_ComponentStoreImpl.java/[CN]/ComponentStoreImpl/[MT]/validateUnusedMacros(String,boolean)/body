{
  final Project project=getProject();
  if (project == null)   return;
  if (!ApplicationManager.getApplication().isHeadlessEnvironment() && !ApplicationManager.getApplication().isUnitTestMode()) {
    if (service && componentName != null && project.isInitialized()) {
      final TrackingPathMacroSubstitutor substitutor=getStateStorageManager().getMacroSubstitutor();
      if (substitutor != null) {
        final Collection<String> macros=substitutor.getUnknownMacros(componentName);
        if (!macros.isEmpty()) {
          Notifications.Bus.notify(new UnknownMacroNotification("Load Error","Component load error: undefined path variables!",String.format("<p><i>%s</i> %s undefined. <a href=\"\">Fix it!</a></p>",StringUtil.join(macros,", "),macros.size() == 1 ? "is" : "are"),NotificationType.ERROR,new NotificationListener(){
            public void hyperlinkUpdate(            @NotNull Notification notification,            @NotNull HyperlinkEvent event){
              ((ProjectEx)project).checkUnknownMacros();
            }
          }
,macros),NotificationDisplayType.STICKY_BALLOON,project);
        }
      }
    }
  }
}
