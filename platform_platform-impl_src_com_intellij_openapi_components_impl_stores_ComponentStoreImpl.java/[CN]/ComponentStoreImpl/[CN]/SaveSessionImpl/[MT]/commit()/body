{
  final StateStorageManager storageManager=getStateStorageManager();
  final StateStorageManager.ExternalizationSession session=storageManager.startExternalization();
  final String[] names=ArrayUtil.toStringArray(myComponents.keySet());
  for (  String name : names) {
    Object component=myComponents.get(name);
    if (component instanceof PersistentStateComponent) {
      commitPersistentComponent((PersistentStateComponent<?>)component,session);
    }
 else     if (component instanceof JDOMExternalizable) {
      commitJdomExternalizable((JDOMExternalizable)component,session);
    }
  }
  myStorageManagerSaveSession=storageManager.startSave(session);
}
