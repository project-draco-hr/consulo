{
  final String name=settings.getName();
  final PsiType type=settings.getSelectedType();
  final String modifier=settings.getVisibilityModifier();
  List<String> modifiers=new ArrayList<String>();
  if (context.getScope() instanceof GroovyScriptClass) {
    modifiers.add("@" + GroovyCommonClassNames.GROOVY_TRANSFORM_FIELD);
  }
  if (settings.isStatic())   modifiers.add(PsiModifier.STATIC);
  if (!PsiModifier.PACKAGE_LOCAL.equals(modifier))   modifiers.add(modifier);
  if (settings.declareFinal())   modifiers.add(PsiModifier.FINAL);
  final String[] arr_modifiers=ArrayUtil.toStringArray(modifiers);
  final GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(context.getProject());
  if (context.getScope() instanceof GroovyScriptClass) {
    return factory.createVariableDeclaration(arr_modifiers,((GrExpression)null),type,name);
  }
 else {
    return factory.createFieldDeclaration(arr_modifiers,name,null,type);
  }
}
