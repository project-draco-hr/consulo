{
  if (myRootModel != null) {
    return myRootModel.getModuleLibraryTable().getLibraries();
  }
  OrderEntry[] orderEntries=ModuleRootManager.getInstance(myModule).getOrderEntries();
  List<Library> libraries=new ArrayList<Library>();
  for (  OrderEntry orderEntry : orderEntries) {
    if (orderEntry instanceof LibraryOrderEntry) {
      final LibraryOrderEntry entry=(LibraryOrderEntry)orderEntry;
      if (entry.isModuleLevel()) {
        libraries.add(entry.getLibrary());
      }
    }
  }
  return libraries.toArray(new Library[libraries.size()]);
}
