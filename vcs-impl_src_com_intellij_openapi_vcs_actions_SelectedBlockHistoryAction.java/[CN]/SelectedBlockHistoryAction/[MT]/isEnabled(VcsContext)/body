{
  VirtualFile[] selectedFiles=context.getSelectedFiles();
  if (selectedFiles == null)   return false;
  if (selectedFiles.length == 0)   return false;
  VirtualFile file=selectedFiles[0];
  Project project=context.getProject();
  if (project == null)   return false;
  AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(file);
  if (vcs == null)   return false;
  VcsHistoryProvider vcsHistoryProvider=vcs.getVcsBlockHistoryProvider();
  if (vcsHistoryProvider == null)   return false;
  if (!AbstractVcs.fileInVcsByFileStatus(project,new FilePathImpl(file)))   return false;
  VcsSelection selection=VcsSelectionUtil.getSelection(context);
  if (selection == null) {
    return false;
  }
  return true;
}
