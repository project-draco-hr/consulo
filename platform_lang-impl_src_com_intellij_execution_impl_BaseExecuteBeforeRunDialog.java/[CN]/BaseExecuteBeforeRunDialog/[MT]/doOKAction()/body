{
  final RunManagerImpl runManager=(RunManagerImpl)RunManagerEx.getInstanceEx(myProject);
  for (Enumeration nodes=myRoot.depthFirstEnumeration(); nodes.hasMoreElements(); ) {
    final DefaultMutableTreeNode node=(DefaultMutableTreeNode)nodes.nextElement();
    final Descriptor descriptor=(Descriptor)node.getUserObject();
    final boolean isChecked=descriptor.isChecked();
    if (descriptor instanceof ConfigurationTypeDescriptor) {
      ConfigurationTypeDescriptor typeDesc=(ConfigurationTypeDescriptor)descriptor;
      for (      ConfigurationFactory factory : typeDesc.getConfigurationType().getConfigurationFactories()) {
        RunnerAndConfigurationSettings settings=runManager.getConfigurationTemplate(factory);
        update(settings.getConfiguration(),isChecked,runManager);
      }
    }
 else     if (descriptor instanceof ConfigurationDescriptor) {
      ConfigurationDescriptor configDesc=(ConfigurationDescriptor)descriptor;
      update(configDesc.getConfiguration(),isChecked,runManager);
    }
  }
  ((RunManagerImpl)RunManagerEx.getInstanceEx(myProject)).fireBeforeRunTasksUpdated();
  close(OK_EXIT_CODE);
}
