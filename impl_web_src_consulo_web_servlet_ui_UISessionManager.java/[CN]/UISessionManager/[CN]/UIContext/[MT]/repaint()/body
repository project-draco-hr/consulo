{
  UIAccess.assertIsUIThread();
  final WBaseGwtComponent rootComponent=myRootComponent;
  List<UIComponent> components=new ArrayList<UIComponent>();
  rootComponent.visitChanges(components);
  if (!components.isEmpty()) {
    AutoBean<UIServerEvent> bean=ourEventFactory.serverEvent();
    UIServerEvent serverEvent=bean.as();
    serverEvent.setSessionId(myId);
    serverEvent.setType(UIServerEventType.stateChanged);
    serverEvent.setComponents(components);
    send(bean);
  }
}
