{
  assertNotNull("Application components damaged",ProjectManager.getInstance());
  final IOException[] exception=new IOException[1];
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      try {
        final VirtualFile[] children=ourSourceRoot.getChildren();
        for (int i=0; i < children.length; i++) {
          children[i].delete(this);
        }
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
);
  if (exception[0] != null)   throw exception[0];
  assertFalse(PsiManager.getInstance(getProject()).isDisposed());
  if (!myAssertionsInTestDetected) {
    if (IdeaLogger.ourErrorsOccurred != null) {
      throw IdeaLogger.ourErrorsOccurred;
    }
  }
  ourApplication.setDataProvider(null);
  ourTestCase=null;
  ((PsiManagerImpl)ourPsiManager).cleanupForNextTest();
  super.tearDown();
  assertEquals(0,EditorFactory.getInstance().getAllEditors().length);
}
