{
  CoreEnvironment env=new CoreEnvironment(getTestRootDisposable());
  ProjectModelEnvironment.register(env);
  final String projectPath=PathManagerEx.getTestDataPath("/core/loadingTest");
  VirtualFile vFile=StandardFileSystems.local().findFileByPath(projectPath);
  CoreProjectLoader.loadProject(env.getProject(),vFile);
  final ModuleManager moduleManager=ModuleManager.getInstance(env.getProject());
  final Module[] modules=moduleManager.getModules();
  assertEquals(1,modules.length);
  ProjectRootManager projectRootManager=ProjectRootManager.getInstance(env.getProject());
  assertEquals("1.6",projectRootManager.getProjectSdkName());
  ModuleRootManager rootManager=ModuleRootManager.getInstance(modules[0]);
  final ContentEntry[] contentEntries=rootManager.getContentEntries();
  assertEquals(1,contentEntries.length);
  assertNotNull(contentEntries[0].getFile());
  final OrderEntry[] orderEntries=rootManager.getOrderEntries();
  assertEquals(2,orderEntries.length);
  LibraryOrderEntry libraryOrderEntry=(LibraryOrderEntry)orderEntries[1];
  assertNotNull(libraryOrderEntry.getLibrary());
}
