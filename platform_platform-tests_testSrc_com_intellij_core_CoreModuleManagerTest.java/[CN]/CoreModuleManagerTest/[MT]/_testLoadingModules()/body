{
  CoreApplicationEnvironment appEnv=new CoreApplicationEnvironment(getTestRootDisposable());
  new ProjectModel.InitApplicationEnvironment(appEnv);
  CoreProjectEnvironment prjEnv=new CoreProjectEnvironment(getTestRootDisposable(),appEnv);
  new ProjectModel.InitProjectEnvironment(prjEnv);
  final String projectPath=PathManagerEx.getTestDataPath("/core/loadingTest");
  VirtualFile vFile=StandardFileSystems.local().findFileByPath(projectPath);
  CoreProjectLoader.loadProject(prjEnv.getProject(),vFile);
  final ModuleManager moduleManager=ModuleManager.getInstance(prjEnv.getProject());
  final Module[] modules=moduleManager.getModules();
  assertEquals(1,modules.length);
  ProjectRootManager projectRootManager=ProjectRootManager.getInstance(prjEnv.getProject());
  assertEquals("1.6",projectRootManager.getProjectSdkName());
  ModuleRootManager rootManager=ModuleRootManager.getInstance(modules[0]);
  final ContentEntry[] contentEntries=rootManager.getContentEntries();
  assertEquals(1,contentEntries.length);
  assertNotNull(contentEntries[0].getFile());
  final OrderEntry[] orderEntries=rootManager.getOrderEntries();
  assertEquals(2,orderEntries.length);
  LibraryOrderEntry libraryOrderEntry=(LibraryOrderEntry)orderEntries[1];
  assertNotNull(libraryOrderEntry.getLibrary());
}
