{
  PsiFile hostFile=InjectedLanguageFacadeImpl.getTopLevelFile(file);
  final Commenter commenter=LanguageCommenters.INSTANCE.forLanguage(hostFile.getLanguage());
  String comment=commenter.getLineCommentPrefix();
  if (comment == null) {
    comment=commenter.getBlockCommentPrefix();
  }
  Pattern pattern=Pattern.compile("^" + comment.replace("*","\\*") + actionPattern,Pattern.DOTALL);
  Matcher matcher=pattern.matcher(contents);
  assertTrue("No comment found in " + file.getVirtualFile(),matcher.matches());
  final String text=matcher.group(1);
  final Boolean actionShouldBeAvailable=Boolean.valueOf(matcher.group(2));
  return Pair.create(text,actionShouldBeAvailable);
}
