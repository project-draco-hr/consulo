def convertsink(ui, path, type):
    if (type and (type not in [s[0] for s in sink_converters])):
        raise util.Abort((_('%s: invalid destination repository type') % type))
    for (name, sink) in sink_converters:
        try:
            if ((not type) or (name == type)):
                return sink(ui, path)
        except NoRepo as inst:
            ui.note((_('convert: %s\n') % inst))
    raise util.Abort((_('%s: unknown repository type') % path))
