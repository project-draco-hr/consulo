def readauthormap(self, authorfile):
    afile = open(authorfile, 'r')
    for line in afile:
        line = line.strip()
        if ((not line) or line.startswith('#')):
            continue
        try:
            (srcauthor, dstauthor) = line.split('=', 1)
        except ValueError:
            msg = _('Ignoring bad line in author map file %s: %s\n')
            self.ui.warn((msg % (authorfile, line.rstrip())))
            continue
        srcauthor = srcauthor.strip()
        dstauthor = dstauthor.strip()
        if (self.authors.get(srcauthor) in (None, dstauthor)):
            msg = _('mapping author %s to %s\n')
            self.ui.debug((msg % (srcauthor, dstauthor)))
            self.authors[srcauthor] = dstauthor
            continue
        m = _('overriding mapping for author %s, was %s, will be %s\n')
        self.ui.status((m % (srcauthor, self.authors[srcauthor], dstauthor)))
    afile.close()
