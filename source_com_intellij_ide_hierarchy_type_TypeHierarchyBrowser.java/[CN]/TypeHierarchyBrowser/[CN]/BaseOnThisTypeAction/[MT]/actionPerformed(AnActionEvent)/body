{
  final DataContext dataContext=event.getDataContext();
  final TypeHierarchyBrowser browser=(TypeHierarchyBrowser)dataContext.getData(TYPE_HIERARCHY_BROWSER_DATA_CONSTANT);
  if (browser == null)   return;
  final PsiClass selectedClass=browser.getSelectedClass();
  if (selectedClass == null)   return;
  final String[] name=new String[]{browser.myCurrentViewName};
  browser.dispose();
  browser.setHierarchyBase(selectedClass);
  browser.validate();
  if (browser.myIsInterface && TypeHierarchyTreeStructure.TYPE.equals(name)) {
    name[0]=SubtypesHierarchyTreeStructure.TYPE;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      browser.changeView(name[0]);
    }
  }
);
}
