{
  myProject=project;
  myShowModules=settings.UI_SHOW_MODULES;
  myGroupByScopeType=settings.UI_GROUP_BY_SCOPE_TYPE;
  myFlattenPackages=settings.UI_FLATTEN_PACKAGES;
  myCompactEmptyMiddlePackages=settings.UI_COMPACT_EMPTY_MIDDLE_PACKAGES;
  myShowFiles=settings.UI_SHOW_FILES;
  myGroupByFiles=settings.UI_GROUP_BY_FILES;
  myShowIndividualLibs=showIndividualLibs;
  myShowModuleGroups=settings.UI_SHOW_MODULE_GROUPS;
  myMarker=marker;
  myAddUnmarkedFiles=!settings.UI_FILTER_LEGALS;
  myRoot=new RootNode();
  myFileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  myPsiManager=PsiManager.getInstance(project);
  createMaps(ScopeType.LIB);
  createMaps(ScopeType.SOURCE);
  createMaps(ScopeType.TEST);
  if (myGroupByScopeType) {
    mySourceRoot=new GeneralGroupNode(PRODUCTION_NAME,Icons.PACKAGE_OPEN_ICON,Icons.PACKAGE_ICON);
    myTestRoot=new GeneralGroupNode(TEST_NAME,TEST_ICON,TEST_ICON);
    myLibsRoot=new GeneralGroupNode(LIBRARY_NAME,LIB_ICON_OPEN,LIB_ICON_CLOSED);
    myRoot.add(mySourceRoot);
    myRoot.add(myTestRoot);
    myRoot.add(myLibsRoot);
  }
}
