{
  if (libraryOrJdk == null || !myShowModules) {
    return getScopeNode(ScopeType.LIB);
  }
  if (!myShowIndividualLibs) {
    if (myGroupByScopeType)     return getScopeNode(ScopeType.LIB);
    if (myAllLibsNode == null) {
      myAllLibsNode=new GeneralGroupNode("Libraries",LIB_ICON_OPEN,LIB_ICON_CLOSED);
      getScopeNode(ScopeType.LIB).add(myAllLibsNode);
    }
    return myAllLibsNode;
  }
  LibraryNode node=getMap(myLibraryNodes,ScopeType.LIB).get(libraryOrJdk);
  if (node != null)   return node;
  node=new LibraryNode(libraryOrJdk);
  getMap(myLibraryNodes,ScopeType.LIB).put(libraryOrJdk,node);
  getScopeNode(ScopeType.LIB).add(node);
  return node;
}
