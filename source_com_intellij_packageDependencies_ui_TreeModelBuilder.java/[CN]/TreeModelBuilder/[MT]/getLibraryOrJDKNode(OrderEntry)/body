{
  if (libraryOrJdk == null || !myShowModules) {
    return getRootNode(ScopeType.LIB);
  }
  if (!myShowIndividualLibs) {
    if (myGroupByScopeType)     return getRootNode(ScopeType.LIB);
    if (myAllLibsNode == null) {
      myAllLibsNode=new GeneralGroupNode(AnalysisScopeBundle.message("dependencies.libraries.node.text"),LIB_ICON_OPEN,LIB_ICON_CLOSED);
      getRootNode(ScopeType.LIB).add(myAllLibsNode);
    }
    return myAllLibsNode;
  }
  LibraryNode node=getMap(myLibraryNodes,ScopeType.LIB).get(libraryOrJdk);
  if (node != null)   return node;
  node=new LibraryNode(libraryOrJdk);
  getMap(myLibraryNodes,ScopeType.LIB).put(libraryOrJdk,node);
  getRootNode(ScopeType.LIB).add(node);
  return node;
}
