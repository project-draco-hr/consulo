{
  if (!ourTotalFilesCount.containsKey(project)) {
    myFileIndex.iterateContent(new ContentIterator(){
      public boolean processFile(      VirtualFile fileOrDir){
        if (!fileOrDir.isDirectory()) {
          counting(fileOrDir);
        }
        return true;
      }
    }
);
    if (!myGroupByFiles) {
      VirtualFile[] roots=getLibraryRoots(project);
      for (      VirtualFile root : roots) {
        countFilesRecursively(root);
      }
    }
    ourTotalFilesCount.put(project,myTotalFileCount);
  }
  myTotalFileCount=ourTotalFilesCount.get(project);
}
