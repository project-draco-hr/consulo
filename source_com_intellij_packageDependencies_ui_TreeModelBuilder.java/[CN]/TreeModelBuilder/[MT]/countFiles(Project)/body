{
  final Integer fileCount=project.getUserData(FILE_COUNT);
  if (fileCount == null) {
    myFileIndex.iterateContent(new ContentIterator(){
      public boolean processFile(      VirtualFile fileOrDir){
        if (!fileOrDir.isDirectory()) {
          counting(fileOrDir);
        }
        return true;
      }
    }
);
    if (!myGroupByFiles) {
      for (      VirtualFile root : LibraryUtil.getLibraryRoots(project)) {
        countFilesRecursively(root);
      }
    }
    project.putUserData(FILE_COUNT,myTotalFileCount);
  }
 else {
    myTotalFileCount=fileCount.intValue();
  }
}
