{
  if (file.isDirectory()) {
    VirtualFile[] children=file.getChildren();
    for (    VirtualFile aChildren : children) {
      processFilesRecursively(aChildren,psiManager);
    }
  }
 else   if (myFileIndex.isInLibrarySource(file) && myFileIndex.isJavaSourceFile(file) || myFileIndex.isLibraryClassFile(file)) {
    final PsiFile psiFile=psiManager.findFile(file);
    if (psiFile != null) {
      buildFileNode(psiFile);
    }
  }
}
