{
  if (!mySucceeded)   return;
  final Collection<VirtualFile> variants=filterVariants(patch,foundByName);
  if ((variants != null) && (!variants.isEmpty())) {
    final FilePatchInProgress filePatchInProgress=new FilePatchInProgress(patch,variants,myBaseDir);
    myResult.add(filePatchInProgress);
    registerFolderDecision(patch.getBeforeName(),filePatchInProgress.getBase());
  }
 else {
    mySucceeded=false;
  }
}
