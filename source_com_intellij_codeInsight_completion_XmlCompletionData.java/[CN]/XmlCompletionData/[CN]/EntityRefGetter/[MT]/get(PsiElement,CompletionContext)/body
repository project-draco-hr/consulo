{
  final XmlTag parentOfType=PsiTreeUtil.getParentOfType(context,XmlTag.class);
  if (parentOfType != null) {
    final XmlElementDescriptor descriptor=parentOfType.getDescriptor();
    final List<String> results=new ArrayList<String>();
    if (descriptor != null) {
      final XmlFile descriptorFile=descriptor.getNSDescriptor().getDescriptorFile();
      if (!parentOfType.getContainingFile().equals(descriptorFile)) {
        final PsiElementProcessor processor=new PsiElementProcessor(){
          public boolean execute(          final PsiElement element){
            if (element instanceof XmlEntityDecl) {
              final XmlEntityDecl xmlEntityDecl=(XmlEntityDecl)element;
              if (xmlEntityDecl.isInternalReference())               results.add(xmlEntityDecl.getName());
            }
            return true;
          }
        }
;
        XmlUtil.processXmlElements(descriptorFile,processor,true);
        return results.toArray(new Object[results.size()]);
      }
    }
  }
  return new Object[0];
}
