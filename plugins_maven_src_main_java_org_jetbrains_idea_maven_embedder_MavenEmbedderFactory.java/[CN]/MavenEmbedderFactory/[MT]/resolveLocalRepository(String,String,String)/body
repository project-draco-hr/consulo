{
  if (!StringUtil.isEmpty(override)) {
    return new File(override);
  }
  final File userSettingsFile=resolveUserSettingsFile(userSettings);
  if (userSettingsFile != null) {
    final String fromUserSettings=MavenEmbedderFactory.getRepositoryFromSettings(userSettingsFile);
    if (!StringUtil.isEmpty(fromUserSettings)) {
      return new File(fromUserSettings);
    }
  }
  final File globalSettingsFile=resolveGlobalSettingsFile(mavenHome);
  if (globalSettingsFile != null) {
    final String fromGlobalSettings=MavenEmbedderFactory.getRepositoryFromSettings(globalSettingsFile);
    if (!StringUtil.isEmpty(fromGlobalSettings)) {
      return new File(fromGlobalSettings);
    }
  }
  return new File(new File(System.getProperty(PROP_USER_HOME),DOT_M2_DIR),REPOSITORY_DIR);
}
