{
  if (name == null)   return null;
  final XmlFile file=getFile();
  if (name.indexOf('$') >= 0)   name=name.replace('$','.');
  final Module module=ModuleUtil.findModuleForPsiElement(file);
  if (module != null) {
    final PsiClass aClass=file.getManager().findClass(name,GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module));
    if (aClass != null)     return aClass;
  }
  return file.getManager().findClass(name,file.getResolveScope());
}
