{
  int maxCount=-1;
  for (  PsiReference reference : expression.getReferences()) {
    if (reference instanceof PsiPolyVariantReference) {
      for (      ResolveResult result : ((PsiPolyVariantReference)reference).multiResolve(false)) {
        if (result.isValidResult() && result.getElement() instanceof Property) {
          String value=((Property)result.getElement()).getValue();
          MessageFormat format;
          try {
            format=new MessageFormat(value);
          }
 catch (          Exception e) {
            continue;
          }
          try {
            int count=format.getFormatsByArgumentIndex().length;
            maxCount=Math.max(maxCount,count);
          }
 catch (          IllegalArgumentException ignored) {
          }
        }
      }
    }
  }
  return maxCount;
}
