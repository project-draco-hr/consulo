{
  myDescriptors=new ArrayList<ProblemDescriptor>();
  myLevels=new ArrayList<HighlightInfoType>();
  myTools=new ArrayList<LocalInspectionTool>();
  Map<LocalInspectionTool,LocalInspectionToolWrapper> tool2Wrapper=new THashMap<LocalInspectionTool,LocalInspectionToolWrapper>(toolWrappers.length);
  for (  InspectionTool toolWrapper : toolWrappers) {
    tool2Wrapper.put(((LocalInspectionToolWrapper)toolWrapper).getTool(),(LocalInspectionToolWrapper)toolWrapper);
  }
  LocalInspectionTool[] tools=tool2Wrapper.keySet().toArray(new LocalInspectionTool[tool2Wrapper.size()]);
  inspect(tools,progress,iManager,false);
  addDescriptorsFromInjectedResults(tool2Wrapper,iManager);
  for (int i=0; i < myTools.size(); i++) {
    final LocalInspectionTool tool=myTools.get(i);
    ProblemDescriptor descriptor=myDescriptors.get(i);
    LocalInspectionToolWrapper toolWrapper=tool2Wrapper.get(tool);
    toolWrapper.addProblemDescriptors(Collections.singletonList(descriptor),true);
  }
}
