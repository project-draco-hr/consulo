{
  Set<String> names=new THashSet<String>();
  String packageName=null;
  if (file instanceof PsiJavaFile) {
    packageName=((PsiJavaFile)file).getPackageName();
  }
  final PsiElement[] roots=file.getPsiRoots();
  for (int i=0; i < roots.length; i++) {
    PsiElement root=roots[i];
    addNamesToImport(names,root,packageName,namesToImportStaticly);
  }
  addUnresolvedImportNames(names,file,namesToImportStaticly);
  return names.toArray(new String[names.size()]);
}
