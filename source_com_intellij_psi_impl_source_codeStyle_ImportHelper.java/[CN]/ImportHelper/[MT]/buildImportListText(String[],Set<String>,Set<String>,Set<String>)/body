{
  final Set<String> importedPackagesOrClasses=new THashSet<String>();
  @NonNls final StringBuilder buffer=new StringBuilder();
  for (  String name : names) {
    String packageOrClassName=getPackageOrClassName(name);
    final boolean implicitlyImported=JAVA_LANG_PACKAGE.equals(packageOrClassName);
    boolean useOnDemand=implicitlyImported || packagesOrClassesToImportOnDemand.contains(packageOrClassName);
    if (useOnDemand && namesToUseSingle.contains(name)) {
      useOnDemand=false;
    }
    if (useOnDemand && (importedPackagesOrClasses.contains(packageOrClassName) || implicitlyImported))     continue;
    buffer.append("import ");
    if (namesToImportStaticly.contains(name))     buffer.append("static ");
    if (useOnDemand) {
      importedPackagesOrClasses.add(packageOrClassName);
      buffer.append(packageOrClassName);
      buffer.append(".*");
    }
 else {
      buffer.append(name);
    }
    buffer.append(";\n");
  }
  return buffer.toString();
}
