{
  Set<String> names=new THashSet<String>();
  collectNamesToImport(names,file,namesToImportStaticly);
  final JspFile jspFile=PsiUtil.getJspFile(file);
  if (jspFile != null) {
    for (    PsiFile includingFile : JspSpiUtil.getReferencingFiles(jspFile)) {
      final PsiFile javaRoot=includingFile.getViewProvider().getPsi(StdLanguages.JAVA);
      if (javaRoot instanceof PsiJavaFile && file != javaRoot) {
        collectNamesToImport(names,(PsiJavaFile)javaRoot,namesToImportStaticly);
      }
    }
    for (    PsiFile includingFile : JspSpiUtil.getIncludedFiles(jspFile)) {
      final PsiFile javaRoot=includingFile.getViewProvider().getPsi(StdLanguages.JAVA);
      if (javaRoot instanceof PsiJavaFile && file != javaRoot) {
        collectNamesToImport(names,(PsiJavaFile)javaRoot,namesToImportStaticly);
      }
    }
  }
  addUnresolvedImportNames(names,file,namesToImportStaticly);
  return ArrayUtil.toStringArray(names);
}
