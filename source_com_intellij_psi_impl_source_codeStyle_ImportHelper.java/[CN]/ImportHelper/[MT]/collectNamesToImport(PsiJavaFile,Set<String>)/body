{
  Set<String> names=new THashSet<String>();
  collectNamesToImport(names,file,namesToImportStaticly);
  if (PsiUtil.isInJspFile(file)) {
    final PsiFile[] includingFiles=JspSpiUtil.getReferencingFiles(PsiUtil.getJspFile(file));
    for (    PsiFile includingFile : includingFiles) {
      final PsiFile javaRoot=includingFile.getViewProvider().getPsi(StdLanguages.JAVA);
      if (javaRoot instanceof PsiJavaFile && file != javaRoot) {
        collectNamesToImport(names,(PsiJavaFile)javaRoot,namesToImportStaticly);
      }
    }
  }
  addUnresolvedImportNames(names,file,namesToImportStaticly);
  return names.toArray(new String[names.size()]);
}
