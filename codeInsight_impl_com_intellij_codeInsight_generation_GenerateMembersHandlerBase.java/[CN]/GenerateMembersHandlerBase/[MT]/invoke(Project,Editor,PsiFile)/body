{
  if (!file.isWritable()) {
    if (!FileDocumentManager.fileForDocumentCheckedOutSuccessfully(editor.getDocument(),project)) {
      return;
    }
  }
  final PsiClass aClass=OverrideImplementUtil.getContextClass(project,editor,file,false);
  if (aClass == null || aClass.isInterface())   return;
  LOG.assertTrue(aClass.isValid());
  LOG.assertTrue(aClass.getContainingFile() != null);
  final ClassMember[] members=chooseOriginalMembers(aClass,project);
  if (members == null)   return;
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      doGenerate(project,editor,aClass,members);
    }
  }
);
}
