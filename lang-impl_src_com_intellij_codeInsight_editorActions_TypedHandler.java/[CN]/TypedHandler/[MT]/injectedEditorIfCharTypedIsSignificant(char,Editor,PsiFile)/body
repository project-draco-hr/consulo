{
  boolean significant=charTyped == '"' || charTyped == '\'' || charTyped == '[' || charTyped == '(' || charTyped == ']' || charTyped == ')' || charTyped == '{' || charTyped == '}' || charTyped == '.';
  if (!significant) {
    return editor;
  }
  int offset=editor.getCaretModel().getOffset();
  List<DocumentWindow> injected=InjectedLanguageUtil.getCachedInjectedDocuments(oldFile);
  for (  DocumentWindow documentWindow : injected) {
    if (documentWindow.containsRange(offset,offset)) {
      PsiFile injectedFile=PsiDocumentManager.getInstance(oldFile.getProject()).getPsiFile(documentWindow);
      return InjectedLanguageUtil.getInjectedEditorForInjectedFile(editor,injectedFile);
    }
  }
  return editor;
}
