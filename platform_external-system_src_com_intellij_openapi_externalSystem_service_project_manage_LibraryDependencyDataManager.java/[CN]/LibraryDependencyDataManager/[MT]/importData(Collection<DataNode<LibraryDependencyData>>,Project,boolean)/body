{
  if (toImport.isEmpty()) {
    return;
  }
  Map<DataNode<ModuleData>,Collection<DataNode<LibraryDependencyData>>> byModule=ExternalSystemUtil.groupBy(toImport,MODULE);
  for (  Map.Entry<DataNode<ModuleData>,Collection<DataNode<LibraryDependencyData>>> entry : byModule.entrySet()) {
    Module module=myProjectStructureHelper.findIdeModule(entry.getKey().getData(),project);
    if (module == null) {
      myModuleManager.importData(Collections.singleton(entry.getKey()),project,true);
      module=myProjectStructureHelper.findIdeModule(entry.getKey().getData(),project);
      if (module == null) {
        LOG.warn(String.format("Can't import library dependencies %s. Reason: target module (%s) is not found at the ide",entry.getValue(),entry.getKey()));
        continue;
      }
    }
    doImportData(entry.getValue(),entry.getKey().getData().getOwner(),project,module,synchronous);
  }
}
