{
  myFilter.setName(myNameField.getText().trim());
  if (myFilter.getName().length() == 0) {
    Messages.showMessageDialog(myTable,IdeBundle.message("error.filter.name.should.be.specified"),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
    return;
  }
  for (int i=0; i < myFilters.size(); i++) {
    TodoFilter filter=myFilters.get(i);
    if (myFilterIndex != i && myFilter.getName().equals(filter.getName())) {
      Messages.showMessageDialog(myTable,IdeBundle.message("error.filter.with.the.same.name.already.exists"),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
      return;
    }
  }
  if (myFilter.isEmpty()) {
    Messages.showMessageDialog(myTable,IdeBundle.message("error.filter.should.contain.at.least.one.pattern"),CommonBundle.getErrorTitle(),Messages.getErrorIcon());
    return;
  }
  super.doOKAction();
}
