{
  if (myProject == null) {
    myProcessHandler.removeProcessListener(myListener);
    return;
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      if (myProcessHandler.isProcessTerminated() || myProcessHandler.isProcessTerminating())       return;
      List<ThreadState> threadStates=null;
      final long start=System.currentTimeMillis();
      while ((System.currentTimeMillis() - start) < 1000) {
        final String stdout=myListener.getOutput().getStdout();
        threadStates=ThreadDumpParser.parse(stdout);
        if (threadStates == null || threadStates.isEmpty()) {
          try {
            Thread.sleep(50);
          }
 catch (          InterruptedException e1) {
          }
          threadStates=null;
          continue;
        }
        break;
      }
      myProcessHandler.removeProcessListener(myListener);
      if (threadStates != null && !threadStates.isEmpty()) {
        showThreadDump(myListener.getOutput().getStdout(),threadStates);
      }
    }
  }
);
}
