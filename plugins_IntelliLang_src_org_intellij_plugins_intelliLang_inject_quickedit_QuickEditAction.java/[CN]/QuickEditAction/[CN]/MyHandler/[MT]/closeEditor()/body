{
  boolean unsplit=false;
  if (mySplittedWindow != null && !mySplittedWindow.isDisposed()) {
    final EditorWithProviderComposite[] editors=mySplittedWindow.getEditors();
    if (editors.length == 1 && editors[0].getFile() == myNewVirtualFile) {
      unsplit=true;
    }
  }
  FileEditorManager.getInstance(myProject).closeFile(myNewVirtualFile);
  if (unsplit) {
    for (    EditorWindow editorWindow : mySplittedWindow.findSiblings()) {
      editorWindow.unsplit(true);
    }
  }
}
