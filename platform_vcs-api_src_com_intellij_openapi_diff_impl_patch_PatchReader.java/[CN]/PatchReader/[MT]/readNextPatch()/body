{
  while (myLineIndex < myLines.length) {
    String curLine=myLines[myLineIndex];
    if (curLine.startsWith("--- ") && (myDiffFormat == null || myDiffFormat == DiffFormat.UNIFIED)) {
      myDiffFormat=DiffFormat.UNIFIED;
      return readPatch(curLine);
    }
 else     if (curLine.startsWith(CONTEXT_FILE_PREFIX) && (myDiffFormat == null || myDiffFormat == DiffFormat.CONTEXT)) {
      myDiffFormat=DiffFormat.CONTEXT;
      return readPatch(curLine);
    }
    myLineIndex++;
  }
  return null;
}
