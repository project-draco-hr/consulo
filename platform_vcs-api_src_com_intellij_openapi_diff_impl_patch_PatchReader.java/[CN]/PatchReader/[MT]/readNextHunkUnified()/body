{
  while (myLineIndex < myLines.length) {
    String curLine=myLines[myLineIndex];
    if (curLine.startsWith("--- ") && myLineIndex < myLines.length - 1 && myLines[myLineIndex + 1].startsWith("+++ ")) {
      return null;
    }
    if (curLine.startsWith("@@ ")) {
      break;
    }
    myLineIndex++;
  }
  if (myLineIndex == myLines.length) {
    return null;
  }
  Matcher m=ourUnifiedHunkStartPattern.matcher(myLines[myLineIndex]);
  if (!m.matches()) {
    throw new PatchSyntaxException(myLineIndex,"Unknown hunk start syntax");
  }
  int startLineBefore=Integer.parseInt(m.group(1));
  final String linesBeforeText=m.group(3);
  int linesBefore=linesBeforeText == null ? 1 : Integer.parseInt(linesBeforeText);
  int startLineAfter=Integer.parseInt(m.group(4));
  final String linesAfterText=m.group(6);
  int linesAfter=linesAfterText == null ? 1 : Integer.parseInt(linesAfterText);
  PatchHunk hunk=new PatchHunk(startLineBefore - 1,startLineBefore + linesBefore - 1,startLineAfter - 1,startLineAfter + linesAfter - 1);
  myLineIndex++;
  PatchLine lastLine=null;
  while (myLineIndex < myLines.length) {
    String curLine=myLines[myLineIndex];
    if (lastLine != null && curLine.startsWith(NO_NEWLINE_SIGNATURE)) {
      lastLine.setSuppressNewLine(true);
      myLineIndex++;
      continue;
    }
    if (curLine.startsWith("--- ")) {
      break;
    }
    lastLine=parsePatchLine(curLine,1);
    if (lastLine == null) {
      break;
    }
    hunk.addLine(lastLine);
    myLineIndex++;
  }
  return hunk;
}
