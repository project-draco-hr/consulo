{
  FileChooserDescriptor descriptor=createFileChooserDescriptor();
  VirtualFile[] files=FileChooser.chooseFiles(myPanel,descriptor);
  files=adjustAddedFileSet(myPanel,files);
  java.util.List<VirtualFile> added=new ArrayList<VirtualFile>(files.length);
  for (int i=0; i < files.length; i++) {
    VirtualFile vFile=files[i];
    if (addElement(vFile)) {
      added.add(vFile);
    }
  }
  return added.toArray(new VirtualFile[added.size()]);
}
