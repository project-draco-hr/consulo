{
  String text=label.getText();
  Icon icon=label.isEnabled() ? label.getIcon() : label.getDisabledIcon();
  if ((icon == null) && (StringUtil.isEmpty(text))) {
    return 0;
  }
  Rectangle paintIconR=new Rectangle();
  Rectangle paintTextR=new Rectangle();
  Rectangle paintViewR=new Rectangle(10000,10000);
  SwingUtilities.layoutCompoundLabel(label,getFontMetrics(getFont()),text,icon,label.getVerticalAlignment(),label.getHorizontalAlignment(),label.getVerticalTextPosition(),label.getHorizontalTextPosition(),paintViewR,paintIconR,paintTextR,label.getIconTextGap());
  return paintTextR.width;
}
