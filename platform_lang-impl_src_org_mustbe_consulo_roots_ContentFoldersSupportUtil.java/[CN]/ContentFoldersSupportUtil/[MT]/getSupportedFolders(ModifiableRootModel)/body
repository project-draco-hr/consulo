{
  Set<ContentFolderTypeProvider> providers=new LinkedHashSet<ContentFolderTypeProvider>();
  for (  ModuleExtension moduleExtension : moduleRootManager.getExtensions()) {
    ContentFoldersSupport annotation=moduleExtension.getClass().getAnnotation(ContentFoldersSupport.class);
    if (annotation == null) {
      annotation=moduleExtension.getClass().getSuperclass().getAnnotation(ContentFoldersSupport.class);
    }
    if (annotation != null) {
      for (      Class<? extends ContentFolderTypeProvider> o : annotation.value()) {
        ContentFolderTypeProvider folderTypeProvider=ContentFolderTypeProvider.EP_NAME.findExtension(o);
        if (folderTypeProvider != null) {
          providers.add(folderTypeProvider);
        }
      }
    }
  }
  providers.add(ExcludedContentFolderTypeProvider.getInstance());
  return providers;
}
