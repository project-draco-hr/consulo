{
  myTreeBuilder=treeBuilder;
  final JTree tree=myTreeBuilder.getTree();
  final JComponent component=tree instanceof TreeTableTree ? ((TreeTableTree)tree).getTreeTable() : tree;
  myUpdateQueue=new MergingUpdateQueue("UpdateQeue",300,component.isShowing(),component){
    @Override protected Alarm createAlarm(    Alarm.ThreadToUse thread,    Disposable parent){
      return new Alarm(thread,parent){
        @Override protected boolean isEdt(){
          return AbstractTreeUpdater.this.isEdt();
        }
      }
;
    }
  }
;
  myUpdateQueue.setRestartTimerOnAdd(false);
  final UiNotifyConnector uiNotifyConnector=new UiNotifyConnector(component,myUpdateQueue);
  Disposer.register(this,myUpdateQueue);
  Disposer.register(this,uiNotifyConnector);
}
