{
  myRenderers.clear();
  myModels.clear();
  while (myMatchRulesRoot.getChildCount() > 0)   myTreeModel.removeNodeFromParent(myMatchRulesRoot.getFirstChild());
  if (settings == null) {
    return;
  }
  if (myGroupingsRoot != null) {
    myGroupingRulesManager.applyRules(settings.getGroupings(),myGroupingsRoot,myTreeModel);
  }
  List<StdArrangementMatchRule> rules=settings.getRules();
  map(rules);
  expandAll(myTree,new TreePath(myTreeModel.getRoot()));
  if (ArrangementConstants.LOG_RULE_MODIFICATION) {
    LOG.info("Arrangement tree is refreshed. Given rules:");
    for (    StdArrangementMatchRule rule : rules) {
      LOG.info("  " + rule.toString());
    }
    LOG.info("Following models have been built:");
    myModels.forEachValue(new TObjectProcedure<ArrangementRuleEditingModelImpl>(){
      @Override public boolean execute(      ArrangementRuleEditingModelImpl model){
        LOG.info(String.format("  row %d, model '%s'",model.getRow(),model.getRule()));
        return true;
      }
    }
);
  }
}
