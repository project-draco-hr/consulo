{
  DefaultMutableTreeNode childTreeNode=new DefaultMutableTreeNode(settingsNode.getCurrent());
  parentTreeNode.add(childTreeNode);
  List<HierarchicalArrangementSettingsNode> children=settingsNode.getChildren();
  ArrangementMatcherSettings settings=template == null ? new ArrangementMatcherSettings() : template.clone();
  settings.addCondition(settingsNode.getCurrent());
  if (children.isEmpty()) {
    mySettings.put(row,settings);
    return row + 1;
  }
 else {
    row++;
    for (    HierarchicalArrangementSettingsNode node : children) {
      row=map(childTreeNode,node,settings,row);
    }
    return row;
  }
}
