{
  myAlarm.cancelAllRequests();
  Object[] values=myModels.getValues();
  Set<ArrangementRuleEditingModelImpl> activeModels=ContainerUtil.newHashSet(getActiveModels());
  boolean emptyRuleRemoved=false;
  for (  Object value : values) {
    ArrangementRuleEditingModelImpl model=(ArrangementRuleEditingModelImpl)value;
    if (model != null && !activeModels.contains(model) && model.getRule() == ArrangementRuleEditingModel.EMPTY_RULE) {
      model.destroy();
      emptyRuleRemoved=true;
    }
  }
  if (!emptyRuleRemoved || activeModels.isEmpty() || !getActiveModels().isEmpty()) {
    return;
  }
  doClearSelection();
  for (  Object value : myModels.getValues()) {
    ArrangementRuleEditingModelImpl model=(ArrangementRuleEditingModelImpl)value;
    if (activeModels.contains(model)) {
      mySelectionModel.addSelectionPath(new TreePath(model.getBottomMost().getPath()));
    }
  }
}
