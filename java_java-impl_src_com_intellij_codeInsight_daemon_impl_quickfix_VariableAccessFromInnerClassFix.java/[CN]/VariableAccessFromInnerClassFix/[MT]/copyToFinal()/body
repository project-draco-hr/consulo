{
  PsiManager psiManager=myClass.getManager();
  PsiElementFactory factory=JavaPsiFacade.getInstance(psiManager.getProject()).getElementFactory();
  PsiExpression initializer=factory.createExpressionFromText(myVariable.getName(),myClass);
  String newName=suggestNewName(psiManager.getProject(),myVariable);
  PsiType type=myVariable.getType();
  PsiDeclarationStatement copyDecl=factory.createVariableDeclarationStatement(newName,type,initializer);
  PsiVariable newVariable=(PsiVariable)copyDecl.getDeclaredElements()[0];
  PsiUtil.setModifierProperty(newVariable,PsiModifier.FINAL,true);
  PsiElement statement=getStatementToInsertBefore();
  if (statement == null)   return;
  statement.getParent().addBefore(copyDecl,statement);
  PsiExpression newExpression=factory.createExpressionFromText(newName,myVariable);
  replaceReferences(myClass,myVariable,newExpression);
}
