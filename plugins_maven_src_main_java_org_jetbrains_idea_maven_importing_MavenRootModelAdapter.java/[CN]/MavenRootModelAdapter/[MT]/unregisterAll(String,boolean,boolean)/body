{
  Url url=toUrl(path);
  for (  ContentEntry eachEntry : myRootModel.getContentEntries()) {
    if (unregisterSources) {
      for (      ContentFolder eachFolder : eachEntry.getFolders(ContentFolderType.PRODUCTION)) {
        String ancestor=under ? url.getUrl() : eachFolder.getUrl();
        String child=under ? eachFolder.getUrl() : url.getUrl();
        if (isEqualOrAncestor(ancestor,child)) {
          eachEntry.removeFolder(eachFolder);
        }
      }
    }
    for (    ContentFolder eachFolder : eachEntry.getFolders(ContentFolderType.EXCLUDED)) {
      String ancestor=under ? url.getUrl() : eachFolder.getUrl();
      String child=under ? eachFolder.getUrl() : url.getUrl();
      if (isEqualOrAncestor(ancestor,child)) {
        if (eachFolder.isSynthetic()) {
          CompilerPathsManager compilerPathsManager=CompilerPathsManager.getInstance(myRootModel.getProject());
          compilerPathsManager.setExcludeOutput(getModule(),false);
        }
 else {
          eachEntry.removeFolder(eachFolder);
        }
      }
    }
  }
}
