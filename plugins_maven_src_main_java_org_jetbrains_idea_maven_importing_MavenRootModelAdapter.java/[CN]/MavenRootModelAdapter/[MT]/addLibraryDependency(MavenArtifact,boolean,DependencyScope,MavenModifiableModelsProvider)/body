{
  String libraryName=makeLibraryName(artifact);
  Library library=provider.getLibraryByName(libraryName);
  if (library == null) {
    library=provider.createLibrary(libraryName);
  }
  Library.ModifiableModel libraryModel=provider.getLibraryModel(library);
  updateUrl(libraryModel,OrderRootType.CLASSES,artifact,null,true);
  if (!MavenConstants.SCOPE_SYSTEM.equals(artifact.getScope())) {
    updateUrl(libraryModel,OrderRootType.SOURCES,artifact,MavenConstants.CLASSIFIER_SOURCES,false);
    updateUrl(libraryModel,JavadocOrderRootType.getInstance(),artifact,MavenConstants.CLASSIFIER_JAVADOC,false);
  }
  LibraryOrderEntry e=myRootModel.addLibraryEntry(library);
  e.setExported(isExportable);
  e.setScope(scope);
}
