{
  String libraryName=makeLibraryName(artifact);
  Library library=provider.getLibraryByName(libraryName);
  if (library == null) {
    library=provider.createLibrary(libraryName);
  }
  Library.ModifiableModel libraryModel=provider.getLibraryModel(library);
  setUrl(libraryModel,OrderRootType.CLASSES,artifact,null);
  setUrl(libraryModel,OrderRootType.SOURCES,artifact,MavenConstants.CLASSIFIER_SOURCES);
  setUrl(libraryModel,JavadocOrderRootType.getInstance(),artifact,MavenConstants.CLASSIFIER_JAVADOC);
  LibraryOrderEntry e=myRootModel.addLibraryEntry(library);
  e.setExported(isExportable);
  e.setScope(scope);
  removeOldLibraryDependency(artifact);
}
