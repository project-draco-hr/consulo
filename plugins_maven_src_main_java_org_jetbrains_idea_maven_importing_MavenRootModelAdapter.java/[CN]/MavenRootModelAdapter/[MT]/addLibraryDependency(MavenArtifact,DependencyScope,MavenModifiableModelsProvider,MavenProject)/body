{
  String libraryName=artifact.getLibraryName();
  Library library=provider.getLibraryByName(libraryName);
  if (library == null) {
    library=provider.createLibrary(libraryName);
  }
  Library.ModifiableModel libraryModel=provider.getLibraryModel(library);
  updateUrl(libraryModel,OrderRootType.CLASSES,artifact,null,null,true);
  if (!MavenConstants.SCOPE_SYSTEM.equals(artifact.getScope())) {
    updateUrl(libraryModel,OrderRootType.SOURCES,artifact,MavenExtraArtifactType.SOURCES,project,false);
    updateUrl(libraryModel,JavadocOrderRootType.getInstance(),artifact,MavenExtraArtifactType.DOCS,project,false);
  }
  LibraryOrderEntry e=myRootModel.addLibraryEntry(library);
  e.setScope(scope);
}
