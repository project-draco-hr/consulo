{
  String libraryName=makeLibraryName(artifact);
  Library library=provider.getLibraryByName(libraryName);
  if (library == null) {
    library=provider.createLibrary(libraryName);
  }
  Library.ModifiableModel libraryModel=provider.getModifiableModel(library);
  setUrl(libraryModel,OrderRootType.CLASSES,artifact,null);
  setUrl(libraryModel,OrderRootType.SOURCES,artifact,MavenConstants.SOURCES_CLASSIFIER);
  setUrl(libraryModel,JavadocOrderRootType.getInstance(),artifact,MavenConstants.JAVADOC_CLASSIFIER);
  provider.commit(libraryModel);
  myRootModel.addLibraryEntry(library).setExported(isExportable);
  removeOldLibraryDependency(artifact);
}
