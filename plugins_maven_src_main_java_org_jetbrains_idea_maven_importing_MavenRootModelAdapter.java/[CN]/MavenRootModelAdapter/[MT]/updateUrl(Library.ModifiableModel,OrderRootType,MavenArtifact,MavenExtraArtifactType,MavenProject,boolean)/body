{
  String classifier=null;
  String extension=null;
  if (artifactType != null) {
    Pair<String,String> result=project.getClassifierAndExtension(artifact,artifactType);
    classifier=result.first;
    extension=result.second;
  }
  String newUrl=artifact.getUrlForExtraArtifact(classifier,extension);
  for (  String url : library.getUrls(type)) {
    if (newUrl.equals(url))     return;
    if (clearAll || isRepositoryUrl(artifact,url,classifier,extension)) {
      library.removeRoot(url,type);
    }
  }
  library.addRoot(newUrl,type);
}
