{
  final PsiDirectory value=getValue();
  if (value == null) {
    return false;
  }
  if (!VfsUtil.isAncestor(value.getVirtualFile(),file,false)) {
    return false;
  }
  final Project project=value.getManager().getProject();
  final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(project).getFileIndex();
  final Module module=fileIndex.getModuleForFile(value.getVirtualFile());
  if (module == null) {
    return fileIndex.getModuleForFile(file) == null;
  }
  final ModuleFileIndex moduleFileIndex=ModuleRootManager.getInstance(module).getFileIndex();
  return moduleFileIndex.isInContent(file);
}
