{
  if (caretCount <= 0) {
    throw new IllegalArgumentException("Caret count must be positive");
  }
  if (caretCount == 1) {
    return Collections.singletonList(input);
  }
  List<String> result=new ArrayList<String>(caretCount);
  String[] lines=input.split("\n",-1);
  for (int i=0; i < caretCount; i++) {
    if (lines.length == 0) {
      result.add("");
    }
 else     if (lines.length == 1) {
      result.add(lines[0]);
    }
 else     if (lines.length % caretCount == 0) {
      StringBuilder b=new StringBuilder();
      int linesPerSegment=lines.length / caretCount;
      for (int j=0; j < linesPerSegment; j++) {
        if (j > 0) {
          b.append('\n');
        }
        b.append(lines[i * linesPerSegment + j]);
      }
      result.add(b.toString());
    }
 else {
      result.add(i < lines.length ? lines[i] : "");
    }
  }
  return result;
}
