{
  LOG.assertTrue(!isRunning());
  myModalityProgress=modalityProgress;
  ModalityState currentModality=ApplicationManager.getApplication().getCurrentModalityState();
  myModalityState=myModalityProgress != null ? ((ModalityStateEx)currentModality).appendProgress(myModalityProgress) : currentModality;
}
