{
  UpdateCommand updateCommand=new UpdateCommand();
  addFilesToCommand(root,updateCommand);
  updateCommand.setCleanCopy(myUpdateSettings.getCleanCopy());
  updateCommand.setResetStickyOnes(myUpdateSettings.getResetAllSticky());
  updateCommand.setBuildDirectories(myUpdateSettings.getCreateDirectories());
  updateCommand.setKeywordSubst(myUpdateSettings.getKeywordSubstitution());
  myUpdateSettings.getRevisionOrDate().setForCommand(updateCommand);
  if (myUpdateSettings.getBranch1ToMergeWith() != null) {
    updateCommand.setMergeRevision1(myUpdateSettings.getBranch1ToMergeWith());
  }
  if (myUpdateSettings.getBranch2ToMergeWith() != null) {
    updateCommand.setMergeRevision2(myUpdateSettings.getBranch2ToMergeWith());
  }
  return updateCommand;
}
