{
  super.setUp();
  myProjectFixture=IdeaTestFixtureFactory.getFixtureFactory().createFixtureBuilder(getTestName(true)).getFixture();
  myProjectFixture.setUp();
  myProject=myProjectFixture.getProject();
  myProjectRoot=myProject.getBaseDir();
  cd(myProjectRoot);
  hg("version");
  createRepository(myProjectRoot);
  HgVcs hgVcs=HgVcs.getInstance(myProject);
  assertNotNull(hgVcs);
  hgVcs.getGlobalSettings().setHgExecutable(HgExecutor.getHgExecutable());
  myRepository=myProjectRoot;
  setUpHgrc(myRepository);
  HgVcs vcs=HgVcs.getInstance(myProject);
  assertNotNull(vcs);
  myMergeProvider=vcs.getMergeProvider();
  assertNotNull(myMergeProvider);
  prepareSecondRepository();
}
