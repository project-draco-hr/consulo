{
  LocalSearchScope scope=new LocalSearchScope(codeFragment);
  Variables:   for (Iterator<PsiVariable> iterator=inputVariables.iterator(); iterator.hasNext(); ) {
    PsiVariable variable=iterator.next();
    for (    PsiReference ref : ReferencesSearch.search(variable,scope)) {
      PsiElement element=ref.getElement();
      int elementOffset=myControlFlow.getStartOffset(element);
      if (elementOffset >= myFlowStart && elementOffset <= myFlowEnd) {
        if (!isInExitStatements(element,myExitStatements))         continue Variables;
      }
      if (elementOffset == -1) {
        final PsiClass psiClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
        if (psiClass != null) {
          final TextRange textRange=psiClass.getTextRange();
          if (myControlFlow.getElement(myFlowStart).getTextOffset() <= textRange.getStartOffset() && textRange.getEndOffset() <= myControlFlow.getElement(myFlowEnd).getTextRange().getEndOffset()) {
            continue Variables;
          }
        }
      }
    }
    iterator.remove();
  }
}
