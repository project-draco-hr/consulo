{
  if (session.isAsynchronous()) {
    myQueue.submit(new Runnable(){
      public void run(){
        try {
          myRefreshIndicator.start();
          try {
            session.scan();
          }
  finally {
            myRefreshIndicator.stop();
          }
        }
  finally {
          ApplicationManager.getApplication().invokeLater(new Runnable(){
            public void run(){
              ApplicationManager.getApplication().runWriteAction(new Runnable(){
                public void run(){
                  session.fireEvents();
                }
              }
);
            }
          }
,ModalityState.NON_MODAL);
        }
      }
    }
);
  }
 else {
    session.scan();
    session.fireEvents();
  }
}
