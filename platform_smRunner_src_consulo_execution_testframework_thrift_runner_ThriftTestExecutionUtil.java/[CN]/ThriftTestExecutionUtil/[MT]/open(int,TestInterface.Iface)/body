{
  TServerSocket localhost=null;
  try {
    localhost=new TServerSocket(new InetSocketAddress("localhost",port));
  }
 catch (  TTransportException e) {
    throw new IllegalArgumentException(e);
  }
  TestInterface.Processor<TestInterface.Iface> processor=new TestInterface.Processor<TestInterface.Iface>(iface);
  TSimpleServer server=new TSimpleServer(new TServer.Args(localhost).processor(processor));
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      server.serve();
    }
  }
);
  return server;
}
