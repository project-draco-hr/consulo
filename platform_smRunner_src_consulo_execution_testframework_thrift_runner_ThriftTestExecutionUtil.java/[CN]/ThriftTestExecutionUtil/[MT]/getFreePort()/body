{
  ServerSocket serverSocket=null;
  try {
    serverSocket=new ServerSocket(0);
    return serverSocket.getLocalPort();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    if (serverSocket != null) {
      try {
        serverSocket.close();
      }
 catch (      IOException e) {
      }
    }
  }
  throw new IllegalArgumentException("Cant get free port");
}
