{
  Module[] modules=ModuleManager.getInstance(getProject()).getModules();
  final GroovyScriptRunner scriptRunner=findConfiguration();
  if (scriptRunner == null) {
    return Arrays.asList(modules);
  }
  ArrayList<Module> res=new ArrayList<Module>();
  for (  Module module : modules) {
    if (scriptRunner.isValidModule(module)) {
      res.add(module);
    }
  }
  return res;
}
