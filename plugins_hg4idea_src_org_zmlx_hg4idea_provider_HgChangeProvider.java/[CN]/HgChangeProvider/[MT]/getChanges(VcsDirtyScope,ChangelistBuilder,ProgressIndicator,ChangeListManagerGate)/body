{
  Set<VirtualFile> processedRoots=new LinkedHashSet<VirtualFile>();
  for (  FilePath filePath : dirtyScope.getRecursivelyDirtyDirectories()) {
    process(builder,filePath,processedRoots);
  }
  for (  FilePath filePath : dirtyScope.getDirtyFiles()) {
    process(builder,filePath,processedRoots);
  }
  processUnsavedChanges(builder,dirtyScope.getDirtyFilesNoExpand());
}
