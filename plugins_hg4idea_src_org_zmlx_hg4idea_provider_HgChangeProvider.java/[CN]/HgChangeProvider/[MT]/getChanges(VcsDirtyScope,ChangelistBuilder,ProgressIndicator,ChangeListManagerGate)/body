{
  final Collection<HgChange> changes=new HashSet<HgChange>();
  for (  FilePath filePath : dirtyScope.getRecursivelyDirtyDirectories()) {
    changes.addAll(process(builder,filePath));
  }
  for (  FilePath filePath : dirtyScope.getDirtyFiles()) {
    changes.addAll(process(builder,filePath));
  }
  processUnsavedChanges(builder,dirtyScope.getDirtyFilesNoExpand(),changes);
}
