{
  VirtualFile repo=VcsUtil.getVcsRootFor(project,filePath);
  if (repo == null || processedRoots.contains(repo)) {
    return;
  }
  Set<HgChange> hgChanges=new HgStatusCommand(project).execute(repo);
  if (hgChanges == null || hgChanges.isEmpty()) {
    return;
  }
  sendChanges(builder,hgChanges,new HgResolveCommand(project).list(repo),new HgWorkingCopyRevisionsCommand(project).identify(repo),new HgWorkingCopyRevisionsCommand(project).firstParent(repo));
  processedRoots.add(repo);
}
