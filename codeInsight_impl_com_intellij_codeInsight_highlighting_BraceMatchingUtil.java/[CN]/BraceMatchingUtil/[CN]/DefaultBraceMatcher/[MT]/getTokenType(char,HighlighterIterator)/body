{
  IElementType tokenType=(!iterator.atEnd()) ? getToken(iterator) : null;
  if (tokenType == TokenType.WHITE_SPACE) {
    iterator.retreat();
    if (!iterator.atEnd()) {
      tokenType=getToken(iterator);
      iterator.advance();
    }
  }
  if (tokenType instanceof IJavaElementType) {
    if (ch == '}')     return JavaTokenType.RBRACE;
    if (ch == '{')     return JavaTokenType.LBRACE;
    if (ch == ']')     return JavaTokenType.RBRACKET;
    if (ch == '[')     return JavaTokenType.LBRACKET;
    if (ch == ')')     return JavaTokenType.RPARENTH;
    if (ch == '(')     return JavaTokenType.LPARENTH;
    if (ch == '<')     return JavaTokenType.LT;
    if (ch == '>')     return JavaTokenType.GT;
  }
 else   if (tokenType instanceof IJspElementType) {
    if (ch == ']')     return ELTokenType.JSP_EL_RBRACKET;
    if (ch == '[')     return ELTokenType.JSP_EL_LBRACKET;
    if (ch == ')')     return ELTokenType.JSP_EL_RPARENTH;
    if (ch == '(')     return ELTokenType.JSP_EL_LPARENTH;
  }
  return null;
}
