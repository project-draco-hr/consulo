{
  CaretModel caretModel=editor.getCaretModel();
  SoftWrapModel softWrapModel=editor.getSoftWrapModel();
  int offset=caretModel.getOffset();
  SoftWrap softWrap=softWrapModel.getSoftWrap(offset);
  if (softWrap == null) {
    return false;
  }
  return editor.offsetToVisualLine(offset) == caretModel.getVisualPosition().line;
}
