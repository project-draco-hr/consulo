{
  JTree tree=(JTree)e.getSource();
  Object tag=null;
  HaveTooltip haveTooltip=null;
  final TreePath path=tree.getPathForLocation(e.getX(),e.getY());
  if (path != null) {
    int dx=getRendererRelativeX(e,tree,path);
    final TreeNode treeNode=(TreeNode)path.getLastPathComponent();
    if (myLastHitNode == null || myLastHitNode.get() != treeNode) {
      if (doCacheLastNode()) {
        myLastHitNode=new WeakReference<>(treeNode);
      }
      myRenderer.getTreeCellRendererComponent(tree,treeNode,false,false,treeNode.isLeaf(),tree.getRowForPath(path),false);
    }
    tag=myRenderer.getFragmentTagAt(dx);
    if (tag != null && treeNode instanceof HaveTooltip) {
      haveTooltip=(HaveTooltip)treeNode;
    }
  }
  showTooltip(tree,e,haveTooltip);
  return tag;
}
