{
  super.setUp();
  final IdeaTestFixtureFactory factory=IdeaTestFixtureFactory.getFixtureFactory();
  myTestFixture=createFixture(factory);
  myTestFixture.setTestDataPath(getTestDataBasePath() + getTestDataPath());
  Class<? extends LocalInspectionTool>[] inspectionClasses=new DefaultInspectionProvider().getInspectionClasses();
  if (getName().contains("Inspection")) {
    inspectionClasses=ArrayUtil.mergeArrays(inspectionClasses,ApplicationLoader.getInspectionClasses());
  }
  myTestFixture.setUp();
  myTestFixture.enableInspections(inspectionClasses);
  new WriteAction(){
    protected void run(    Result result) throws Throwable {
      ResourceUtil.copyFiles(HighlightingTestBase.this);
      init();
    }
  }
.execute().throwException();
}
