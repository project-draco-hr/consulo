{
  PsiElement parent=exp.getParent();
  if (!(parent instanceof PsiExpressionList)) {
    return false;
  }
  parent=parent.getParent();
  if (!(parent instanceof PsiMethodCallExpression)) {
    return false;
  }
  final PsiMethodCallExpression methodCall=(PsiMethodCallExpression)parent;
  final PsiReferenceExpression methodExpression=methodCall.getMethodExpression();
  final PsiType type=methodExpression.getType();
  if (type == null) {
    return false;
  }
  final String className=type.getCanonicalText();
  if (!"java.lang.StringBuffer".equals(className) && !"java.lang.StringBuilder".equals(className)) {
    return false;
  }
  final String methodName=methodExpression.getReferenceName();
  return "append".equals(methodName);
}
