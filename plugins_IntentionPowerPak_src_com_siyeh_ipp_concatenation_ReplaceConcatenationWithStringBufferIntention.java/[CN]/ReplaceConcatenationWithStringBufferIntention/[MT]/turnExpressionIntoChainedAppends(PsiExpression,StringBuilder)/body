{
  if (ConcatenationUtils.isConcatenation(expression)) {
    final PsiBinaryExpression concatenation=(PsiBinaryExpression)expression;
    final PsiExpression lhs=concatenation.getLOperand();
    turnExpressionIntoChainedAppends(lhs,result);
    final PsiExpression rhs=concatenation.getROperand();
    turnExpressionIntoChainedAppends(rhs,result);
  }
 else {
    final PsiExpression strippedExpression=ParenthesesUtils.stripParentheses(expression);
    result.append(".append(");
    if (strippedExpression != null) {
      result.append(strippedExpression.getText());
    }
    result.append(')');
  }
}
