{
  for (  Pair<PsiFile,HighlightInfo> pair : runGeneralHighlighting(originalFile,highlightErrorElements,runAnnotators)) {
    PsiFile file=pair.first;
    HighlightInfo info=pair.second;
    TextRange range=new TextRange(info.startOffset,info.endOffset);
    PsiElement element=file.findElementAt(info.startOffset);
    while (element != null && !element.getTextRange().contains(range)) {
      element=element.getParent();
    }
    if (element == null) {
      element=file;
    }
    GlobalInspectionUtil.createProblem(element,info.description,HighlightInfo.convertType(info.type),range.shiftRight(-element.getNode().getStartOffset()),manager,problemDescriptionsProcessor,globalContext);
  }
}
