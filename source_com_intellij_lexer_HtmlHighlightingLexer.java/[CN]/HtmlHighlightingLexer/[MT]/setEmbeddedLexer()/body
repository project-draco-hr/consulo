{
  Lexer newLexer=null;
  if (hasSeenStyle()) {
    if (styleLexer == null) {
      styleLexer=(ourStyleFileType != null) ? ourStyleFileType.getHighlighter(null).getHighlightingLexer() : null;
      if (styleLexer != null) {
        LOG.assertTrue(styleLexer.getLastState() < MAX_EMBEDDED_LEXER_STATE);
      }
    }
    newLexer=styleLexer;
  }
 else   if (hasSeenScript()) {
    if (scriptLexer == null) {
      scriptLexer=(ourScriptFileType != null) ? ourScriptFileType.getHighlighter(null).getHighlightingLexer() : null;
      if (scriptLexer != null) {
        LOG.assertTrue(scriptLexer.getLastState() < MAX_EMBEDDED_LEXER_STATE);
      }
    }
    newLexer=scriptLexer;
  }
  if (newLexer != null) {
    embeddedLexer=newLexer;
    embeddedLexer.start(getBuffer(),HtmlHighlightingLexer.super.getTokenStart(),skipToTheEndOfTheEmbeddment());
  }
}
