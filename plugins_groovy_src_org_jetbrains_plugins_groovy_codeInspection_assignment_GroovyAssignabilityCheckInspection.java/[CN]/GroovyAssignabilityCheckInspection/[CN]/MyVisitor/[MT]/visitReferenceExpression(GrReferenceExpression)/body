{
  super.visitReferenceExpression(referenceExpression);
  GroovyResolveResult resolveResult=referenceExpression.advancedResolve();
  GroovyResolveResult[] results=referenceExpression.multiResolve(false);
  PsiElement resolved=resolveResult.getElement();
  final PsiElement parent=referenceExpression.getParent();
  if (resolved == null) {
    GrExpression qualifier=referenceExpression.getQualifierExpression();
    if (qualifier == null && GroovyAnnotator.isDeclarationAssignment(referenceExpression))     return;
  }
  if (parent instanceof GrCall) {
    if (checkCannotInferArgumentTypes(referenceExpression))     return;
    final PsiType type=referenceExpression.getType();
    if (resolved != null) {
      if (resolved instanceof PsiMethod && !resolveResult.isInvokedOnProperty()) {
        if (!checkMethodApplicability(resolveResult,referenceExpression))         return;
      }
 else {
        if (!checkCallApplicability(type,referenceExpression))         return;
      }
      if (!checkUnknownParams(referenceExpression))       return;
    }
 else     if (results.length > 0) {
      for (      GroovyResolveResult result : results) {
        resolved=result.getElement();
        if (resolved instanceof PsiMethod && !resolveResult.isInvokedOnProperty()) {
          if (!checkMethodApplicability(result,referenceExpression))           return;
        }
 else {
          if (!checkCallApplicability(type,referenceExpression))           return;
        }
      }
      if (!checkUnknownParams(referenceExpression))       return;
      registerError(getElementToHighlight(referenceExpression,PsiUtil.getArgumentsList(referenceExpression)),GroovyBundle.message("method.call.is.ambiguous"));
    }
  }
}
