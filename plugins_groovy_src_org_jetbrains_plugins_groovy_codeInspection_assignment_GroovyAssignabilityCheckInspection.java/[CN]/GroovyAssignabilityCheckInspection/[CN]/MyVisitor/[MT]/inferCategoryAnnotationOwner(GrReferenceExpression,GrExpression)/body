{
  if (qualifier == null) {
    GrMethod container=PsiTreeUtil.getParentOfType(place,GrMethod.class,true,GrMember.class);
    if (container != null && !container.hasModifierProperty(PsiModifier.STATIC)) {
      return container.getContainingClass();
    }
  }
 else   if (PsiUtil.isThisReference(qualifier)) {
    PsiElement resolved=((GrReferenceExpression)qualifier).resolve();
    if (resolved instanceof PsiClass) {
      return (PsiClass)resolved;
    }
  }
  return null;
}
