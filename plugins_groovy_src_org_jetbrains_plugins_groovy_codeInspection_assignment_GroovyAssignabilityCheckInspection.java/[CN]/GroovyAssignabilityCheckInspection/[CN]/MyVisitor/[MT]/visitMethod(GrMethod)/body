{
  super.visitMethod(method);
  final GrOpenBlock block=method.getBlock();
  if (block == null)   return;
  final PsiType expectedType=method.getReturnType();
  if (expectedType == null || PsiType.VOID.equals(expectedType))   return;
  ControlFlowUtils.visitAllExitPoints(block,new ControlFlowUtils.ExitPointVisitor(){
    @Override public boolean visitExitPoint(    Instruction instruction,    @Nullable GrExpression returnValue){
      if (returnValue != null && !(returnValue.getParent() instanceof GrReturnStatement)) {
        checkAssignability(expectedType,returnValue,returnValue);
      }
      return true;
    }
  }
);
}
