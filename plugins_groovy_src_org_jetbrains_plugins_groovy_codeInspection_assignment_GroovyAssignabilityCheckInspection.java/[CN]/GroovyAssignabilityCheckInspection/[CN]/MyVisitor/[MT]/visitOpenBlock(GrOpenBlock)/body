{
  super.visitOpenBlock(block);
  final PsiElement element=block.getParent();
  if (!(element instanceof GrMethod))   return;
  GrMethod method=(GrMethod)element;
  final PsiType expectedType=method.getReturnType();
  if (PsiType.VOID.equals(expectedType))   return;
  final GrStatement[] statements=block.getStatements();
  if (statements.length == 0)   return;
  final GrStatement last=statements[statements.length - 1];
  if (!(last instanceof GrExpression))   return;
  final GrExpression expression=(GrExpression)last;
  if (expectedType == null)   return;
  checkAssignability(expectedType,expression,last);
}
