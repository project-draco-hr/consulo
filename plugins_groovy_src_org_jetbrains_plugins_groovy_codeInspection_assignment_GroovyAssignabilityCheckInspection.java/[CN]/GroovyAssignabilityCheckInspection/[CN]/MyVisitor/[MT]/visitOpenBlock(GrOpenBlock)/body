{
  super.visitOpenBlock(block);
  final PsiElement element=block.getParent();
  if (!(element instanceof GrMethod))   return;
  GrMethod method=(GrMethod)element;
  final PsiType expectedType=method.getReturnType();
  if (expectedType == null || PsiType.VOID.equals(expectedType))   return;
  ControlFlowUtils.visitAllExitPoints(block,new ControlFlowUtils.ExitPointVisitor(){
    @Override public boolean visitExitPoint(    Instruction instruction,    @Nullable GrExpression returnValue){
      if (returnValue != null && !(returnValue.getParent() instanceof GrReturnStatement)) {
        checkAssignability(expectedType,returnValue,returnValue);
      }
      return true;
    }
  }
);
}
