{
  List<Pair<String,String>> paths=null;
  if (CHOOSE_SOURCE_PANEL.equals(myCurrentMode)) {
    final List<JavaModuleSourceRoot> selectedElements=mySourcePathsChooser.getMarkedElements();
    if (selectedElements.size() > 0) {
      paths=new ArrayList<Pair<String,String>>(selectedElements.size());
      for (      final JavaModuleSourceRoot root : selectedElements) {
        paths.add(Pair.create(FileUtil.toSystemIndependentName(root.getDirectory().getAbsolutePath()),root.getPackagePrefix()));
      }
    }
  }
 else {
    if (myRbCreateSource.isSelected()) {
      final String sourceDirectoryPath=getSourceDirectoryPath();
      if (sourceDirectoryPath != null) {
        paths=Collections.singletonList(Pair.create(sourceDirectoryPath,""));
      }
    }
  }
  myBuilder.setContentEntryPath(getContentRootPath());
  if (paths != null) {
    myBuilder.setSourcePaths(paths);
  }
 else {
    myBuilder.setSourcePaths(new ArrayList<Pair<String,String>>());
  }
}
