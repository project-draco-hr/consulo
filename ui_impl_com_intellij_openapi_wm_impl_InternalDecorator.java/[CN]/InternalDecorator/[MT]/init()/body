{
  enableEvents(ComponentEvent.COMPONENT_EVENT_MASK);
  myTitlePanel.addTitle(myTitleTabs);
  final JPanel buttonPanel=new JPanel(new GridBagLayout());
  buttonPanel.setOpaque(false);
  buttonPanel.setBorder(BorderFactory.createEmptyBorder(0,0,0,2));
  buttonPanel.add(myToggleFloatingModeButton,new GridBagConstraints(0,0,1,1,1,0,GridBagConstraints.EAST,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myFloatingDockSeparator,new GridBagConstraints(1,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myToggleDockModeButton,new GridBagConstraints(2,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myDockAutoHideSeparator,new GridBagConstraints(3,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myToggleAutoHideModeButton,new GridBagConstraints(4,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myAutoHideHideSeparator,new GridBagConstraints(5,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  buttonPanel.add(myHideButton,new GridBagConstraints(6,0,1,1,0,0,GridBagConstraints.CENTER,GridBagConstraints.NONE,new Insets(0,0,0,0),0,0));
  myTitlePanel.addButtons(buttonPanel,myHideSideButton);
  final JPanel contentPane=new JPanel(new BorderLayout());
  contentPane.add(myTitlePanel,BorderLayout.NORTH);
  JPanel innerPanel=new JPanel(new BorderLayout());
  innerPanel.setBorder(BorderFactory.createEmptyBorder(2,2,2,2));
  JComponent toolWindowComponent=myToolWindow.getComponent();
  innerPanel.add(toolWindowComponent,BorderLayout.CENTER);
  final NonOpaquePanel inner=new NonOpaquePanel(innerPanel);
  inner.setBorder(new InnerPanelBorder());
  contentPane.add(inner,BorderLayout.CENTER);
  add(contentPane,BorderLayout.CENTER);
  registerKeyboardAction(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      ToolWindowManager.getInstance(myProject).activateEditorComponent();
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
}
