{
  ProjectWideFacetListenersRegistry.getInstance(project).registerListener(AndroidFacet.ID,new ProjectWideFacetAdapter<AndroidFacet>(){
    @Override public void firstFacetAdded(){
      final ToolWindowManager manager=ToolWindowManager.getInstance(project);
      final ToolWindow toolWindow=manager.getToolWindow(AndroidLogcatToolWindowFactory.TOOL_WINDOW_ID);
      if (toolWindow == null) {
        final ToolWindow window=manager.registerToolWindow(AndroidLogcatToolWindowFactory.TOOL_WINDOW_ID,false,ToolWindowAnchor.BOTTOM,project);
        window.setSplitMode(true,null);
        createToolWindowContent(project,window);
      }
    }
    @Override public void allFacetsRemoved(){
      final ToolWindow toolWindow=ToolWindowManager.getInstance(project).getToolWindow(AndroidLogcatToolWindowFactory.TOOL_WINDOW_ID);
      if (toolWindow != null) {
        ToolWindowManager.getInstance(project).unregisterToolWindow(AndroidLogcatToolWindowFactory.TOOL_WINDOW_ID);
        Disposer.dispose(toolWindow.getContentManager());
      }
    }
  }
);
}
