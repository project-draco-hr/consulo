{
  if (myTargetDir == BAD_LINK)   return null;
  if (myTargetDir != null)   return (VirtualDirectoryImpl)myTargetDir;
  final VirtualFile file=findFile(myTargetPath,false);
  if (!(file instanceof VirtualDirectoryImpl) || file == this || FileUtil.isAncestor(new File(file.getPath()),new File(getPath()),true)) {
    myTargetDir=BAD_LINK;
    return null;
  }
 else {
    myTargetDir=(VirtualDirectoryImpl)file;
  }
  return (VirtualDirectoryImpl)myTargetDir;
}
