{
  if (project.isDefault()) {
    return project.getName();
  }
  String location=project.getPresentableUrl();
  if (location == null) {
    return null;
  }
  String projectName=FileUtil.toSystemIndependentName(location);
  if (projectName.endsWith("/")) {
    projectName=projectName.substring(0,projectName.length() - 1);
  }
  final int lastSlash=projectName.lastIndexOf('/');
  if (lastSlash >= 0 && lastSlash + 1 < projectName.length()) {
    projectName=projectName.substring(lastSlash + 1);
  }
  if (StringUtil.endsWithIgnoreCase(projectName,ProjectFileType.DOT_DEFAULT_EXTENSION)) {
    projectName=projectName.substring(0,projectName.length() - ProjectFileType.DOT_DEFAULT_EXTENSION.length());
  }
  projectName=projectName.toLowerCase(Locale.US);
  return projectName;
}
