{
  if (occurence.outermostType == null || !(occurence.outermostType instanceof PsiArrayType)) {
    processNonArrayExpression(myVisitor,expression,referencedElement);
  }
 else {
    PsiType type=occurence.outermostType;
    PsiExpression result=RefactoringUtil.outermostParenthesizedExpression(expression);
    while (type instanceof PsiArrayType && result.getParent() instanceof PsiArrayAccessExpression) {
      type=((PsiArrayType)type).getComponentType();
      result=RefactoringUtil.outermostParenthesizedExpression((PsiArrayAccessExpression)result.getParent());
    }
    if (type == null || !(type instanceof PsiArrayType)) {
      processNonArrayExpression(myVisitor,result,referencedElement);
    }
  }
}
