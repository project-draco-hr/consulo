{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  List<LineMarkerInfo> array=new ArrayList<LineMarkerInfo>();
  Set<PsiMethod> methods=new HashSet<PsiMethod>();
  for (  PsiElement element : elements) {
    ProgressManager.getInstance().checkCanceled();
    if (element instanceof PsiIdentifier) {
      if (element.getParent() instanceof PsiMethod) {
        final PsiMethod method=((PsiMethod)element.getParent());
        if (element.equals(method.getNameIdentifier()) && PsiUtil.canBeOverriden(method)) {
          methods.add(method);
        }
      }
 else       if (element.getParent() instanceof PsiClass && !(element.getParent() instanceof PsiTypeParameter)) {
        collectInheritingClasses(element,array);
      }
    }
  }
  if (!methods.isEmpty()) {
    collectOverridingMethods(methods,array);
  }
  return array;
}
