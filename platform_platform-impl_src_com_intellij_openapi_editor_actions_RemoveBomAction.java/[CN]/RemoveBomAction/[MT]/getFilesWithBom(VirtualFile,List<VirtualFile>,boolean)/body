{
  if (root.isDirectory()) {
    for (    VirtualFile child : root.getChildren()) {
      if (!all && !result.isEmpty()) {
        return;
      }
      getFilesWithBom(child,result,all);
    }
  }
 else   if (root.getBOM() != null) {
    result.add(root);
  }
}
