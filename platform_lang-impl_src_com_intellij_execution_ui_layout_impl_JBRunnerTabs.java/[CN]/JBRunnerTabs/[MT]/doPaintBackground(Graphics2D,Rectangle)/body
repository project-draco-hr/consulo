{
  g2d.setColor(UIUtil.getPanelBackground());
  g2d.fill(clip);
  g2d.setColor(new Color(0,0,0,50));
  g2d.fill(clip);
  List<TabInfo> visibleInfos=getVisibleInfos();
  Insets insets=getTabsBorder().getEffectiveBorder();
  int maxOffset=0;
  int maxLength=0;
  for (int i=visibleInfos.size() - 1; i >= 0; i--) {
    TabInfo visibleInfo=visibleInfos.get(i);
    TabLabel tabLabel=myInfo2Label.get(visibleInfo);
    Rectangle r=tabLabel.getBounds();
    if (r.width == 0 || r.height == 0)     continue;
    maxOffset=r.x + r.width;
    maxLength=r.height;
    break;
  }
  maxOffset++;
  Rectangle r2=getBounds();
  Rectangle rectangle;
  int y=r2.y + insets.top;
  int height=maxLength - insets.top - insets.bottom;
  height-=TabsUtil.ACTIVE_TAB_UNDERLINE_HEIGHT;
  rectangle=new Rectangle(maxOffset,y,r2.width - maxOffset - insets.left- insets.right,height);
  g2d.setPaint(UIUtil.getPanelBackground());
  g2d.fillRect(rectangle.x,rectangle.y,rectangle.width,rectangle.height);
  g2d.fillRect(0,0,rectangle.x + rectangle.width,5);
  g2d.fillRect(2,maxLength,getSize().width,getSize().height);
  g2d.drawLine(0,0,0,getSize().height);
}
