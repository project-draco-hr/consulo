{
  final PsiClass psiClass=getPsiClass(e);
  if (psiClass == null)   return;
  final VirtualFile virtualFile=psiClass.getContainingFile().getVirtualFile();
  final Module module=ModuleUtilCore.findModuleForPsiElement(psiClass);
  if (module == null)   return;
  final String className=ClassUtil.getJVMClassName(psiClass);
  final Project project=getEventProject(e);
  CompilerManager.getInstance(project).compile(new VirtualFile[]{virtualFile},new CompileStatusNotification(){
    @Override public void finished(    boolean aborted,    int errors,    int warnings,    CompileContext compileContext){
      if (aborted || errors > 0)       return;
      generateAndShowXml(module,className);
    }
  }
);
}
