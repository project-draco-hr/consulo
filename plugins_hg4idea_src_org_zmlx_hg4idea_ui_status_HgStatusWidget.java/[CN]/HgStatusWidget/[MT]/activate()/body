{
  busConnection=getProject().getMessageBus().connect();
  busConnection.subscribe(HgVcs.BRANCH_TOPIC,new HgCurrentBranchStatusUpdater(hgCurrentBranchStatus));
  remoteUpdater=new HgRemoteStatusUpdater(this,vcs,incomingChangesStatus,outgoingChangesStatus,projectSettings);
  int checkIntervalSeconds=HgGlobalSettings.getIncomingCheckIntervalSeconds();
  changesUpdaterScheduledFuture=JobScheduler.getScheduler().scheduleWithFixedDelay(new Runnable(){
    public void run(){
      remoteUpdater.update(getProject());
    }
  }
,5,checkIntervalSeconds,TimeUnit.SECONDS);
  StatusBar statusBar=WindowManager.getInstance().getStatusBar(getProject());
  if (null != statusBar) {
    statusBar.addWidget(this);
  }
}
