{
  Change c=new ChangeFileContentChange(p("file"),"new content");
  c.applyTo(new Snapshot(){
    @Override public Entry getEntry(    Path path){
      return new FileEntry(null,null,"content");
    }
  }
);
  os.writeChange(c);
  Change read=is.readChange();
  assertEquals(ChangeFileContentChange.class,read.getClass());
  ChangeFileContentChange result=((ChangeFileContentChange)read);
  assertEquals(p("file"),result.getPath());
  assertEquals("new content",result.getNewContent());
  assertEquals("content",result.getOldContent());
}
