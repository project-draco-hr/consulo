{
  RootEntry root=new RootEntry("");
  root.createDirectory(1,"/entry",null);
  root.createFile(2,"/entry/file","",null);
  root.createDirectory(3,"/entry/dir",null);
  Change c=new DeleteChange("/entry");
  c.applyTo(root);
  os.writeChange(c);
  Entry result=((DeleteChange)is.readChange()).getAffectedEntry();
  assertEquals(DirectoryEntry.class,result.getClass());
  assertEquals("entry",result.getName());
  assertEquals(2,result.getChildren().size());
  assertEquals(p("entry/file"),result.getChildren().get(0).getPath());
  assertEquals(p("entry/dir"),result.getChildren().get(1).getPath());
}
