{
  final VirtualFile[] roots=myVcsManager.getRootsUnderVcs(myVcs);
  for (Iterator<Map.Entry<VirtualFile,GitRepository>> iterator=myRepositories.entrySet().iterator(); iterator.hasNext(); ) {
    if (!ArrayUtil.contains(iterator.next().getValue().getRoot(),roots)) {
      iterator.remove();
    }
  }
  for (  VirtualFile root : roots) {
    if (!myRepositories.containsKey(root)) {
      GitRepository repository=createGitRepository(root);
      myRepositories.put(root,repository);
    }
  }
}
