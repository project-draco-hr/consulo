{
  ArrayList<Object> result=new ArrayList<Object>(elements.size());
  for (  T element : elements) {
    String name=namer.fun(element);
    if (name != null) {
      Icon icon=getIcon(element);
      if (icon != null && (iconFlags & Iconable.ICON_FLAG_VISIBILITY) != 0) {
        RowIcon baseIcon=new RowIcon(2);
        Icon emptyIcon=new EmptyIcon(Icons.PUBLIC_ICON.getIconWidth(),Icons.PUBLIC_ICON.getIconHeight());
        baseIcon.setIcon(icon,0);
        baseIcon.setIcon(emptyIcon,1);
        icon=baseIcon;
      }
      Object value=LookupValueFactory.createLookupValue(name,icon);
      result.add(value);
    }
  }
  return result.toArray();
}
