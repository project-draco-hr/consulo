{
  ArrayList<Object> result=new ArrayList<Object>(elements.size());
  for (  T element : elements) {
    if (element instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)element;
      String tail=PsiFormatUtil.formatMethod(method,PsiSubstitutor.EMPTY,PsiFormatUtil.SHOW_PARAMETERS,PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_TYPE);
      final PsiType returnType=method.getReturnType();
      final Object value=LookupValueFactory.createLookupValueWithHintAndTail(method.getName(),method.getIcon(Iconable.ICON_FLAG_VISIBILITY | Iconable.ICON_FLAG_READ_STATUS),returnType == null ? null : returnType.getPresentableText(),tail);
      result.add(value);
    }
    String name=namer.fun(element);
    if (name != null) {
      Icon icon=getIcon(element);
      Object value=LookupValueFactory.createLookupValue(name,icon);
      result.add(value);
    }
  }
  return result.toArray();
}
