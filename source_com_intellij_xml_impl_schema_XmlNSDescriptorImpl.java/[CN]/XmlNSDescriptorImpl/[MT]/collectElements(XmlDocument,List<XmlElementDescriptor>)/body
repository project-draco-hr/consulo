{
  XmlTag rootTag=document.getRootTag();
  if (rootTag == null)   return;
  XmlTag[] tags=rootTag.getSubTags();
  for (  XmlTag tag : tags) {
    if (equalsToSchemaName(tag,"element")) {
      String name=tag.getAttributeValue("name");
      if (name != null) {
        final XmlElementDescriptor elementDescriptor=getElementDescriptor(name,getDefaultNamespace());
        if (elementDescriptor != null) {
          result.add(elementDescriptor);
        }
      }
    }
 else     if (equalsToSchemaName(tag,"include")) {
      final String schemaLocation=tag.getAttributeValue("schemaLocation");
      if (schemaLocation != null) {
        final XmlFile xmlFile=XmlUtil.findXmlFile(rootTag.getContainingFile(),schemaLocation);
        if (xmlFile != null) {
          final XmlDocument includedDocument=xmlFile.getDocument();
          if (includedDocument != null) {
            collectElements(includedDocument,result);
          }
        }
      }
    }
  }
}
