{
  List<XmlElementDescriptor> result=new ArrayList<XmlElementDescriptor>();
  if (substituions == null) {
    XmlDocument document=myFile.getDocument();
    substituions=new HashMap<String,List<XmlTag>>();
    XmlTag rootTag=document.getRootTag();
    XmlTag[] tags=rootTag.getSubTags();
    for (int i=0; i < tags.length; i++) {
      XmlTag tag=tags[i];
      if (equalsToSchemaName(tag,"element")) {
        final String substAttr=tag.getAttributeValue("substitutionGroup");
        if (substAttr != null) {
          String substLocalName=XmlUtil.findLocalNameByQualifiedName(substAttr);
          List<XmlTag> list=substituions.get(substLocalName);
          if (list == null) {
            list=new LinkedList<XmlTag>();
            substituions.put(substLocalName,list);
          }
          list.add(tag);
        }
      }
    }
  }
  List<XmlTag> substitutions=substituions.get(localName);
  if (substitutions == null)   return XmlElementDescriptor.EMPTY_ARRAY;
  for (Iterator<XmlTag> i=substitutions.iterator(); i.hasNext(); ) {
    XmlTag tag=i.next();
    final String substAttr=tag.getAttributeValue("substitutionGroup");
    if (substAttr != null && checkElementNameEquivalence(localName,namespace,substAttr,tag)) {
      result.add(new XmlElementDescriptorImpl(tag));
    }
  }
  return result.toArray(new XmlElementDescriptor[result.size()]);
}
