{
  final MovedFileData movedFile=myMovedFiles.get(file);
  if (movedFile != null) {
    myBeforePaths.add(new FilePathImpl(file.getParent(),file.getName(),file.isDirectory()));
    final IOException[] exc=new IOException[1];
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      @Override public void run(){
        try {
          final VirtualFile moveResult=movedFile.doMove();
        }
 catch (        IOException e) {
          exc[0]=e;
        }
      }
    }
);
    if (exc[0] != null) {
      throw exc[0];
    }
  }
}
