{
  VirtualFile child=myBaseDirectory;
  final int size=(pieces.length - 1);
  for (int i=0; i < size; i++) {
    final String piece=pieces[i];
    if (StringUtil.isEmptyOrSpaces(piece)) {
      continue;
    }
    if ("..".equals(piece)) {
      child=child.getParent();
      continue;
    }
    VirtualFile nextChild=child.findChild(piece);
    if (nextChild == null) {
      nextChild=VfsUtil.createDirectories(child.getPath() + '/' + piece);
      myCreatedDirectories.add(nextChild);
    }
    child=nextChild;
  }
  return child;
}
