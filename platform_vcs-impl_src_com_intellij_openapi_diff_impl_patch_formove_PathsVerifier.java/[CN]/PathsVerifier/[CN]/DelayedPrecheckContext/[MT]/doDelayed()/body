{
  final List<FilePatch> result=new LinkedList<FilePatch>();
  if (!myOverrideExisting.isEmpty()) {
    final String prompt=myOverrideExisting.size() == 1 ? "The following file already exists. Do you want to override it?" : "The following files already exist. Do you want to override them?";
    final String title="Override existing files";
    final Collection<FilePath> selected=AbstractVcsHelper.getInstance(myProject).selectFilePathsToProcess(new ArrayList<FilePath>(myOverrideExisting.keySet()),title,"\nThe following files should be created by patch, but they already exist.\nDo you want to override them?\n",title,"The following file should be created by patch, but it already exists.\nDo you want to override it?\n{0}",VcsShowConfirmationOption.STATIC_SHOW_CONFIRMATION);
    if (selected != null) {
      for (      FilePath path : selected) {
        myOverrideExisting.remove(path);
      }
    }
    result.addAll(myOverrideExisting.values());
    if (selected != null) {
      myOverridenPaths.addAll(selected);
    }
  }
  result.addAll(mySkipDeleted.values());
  return result;
}
