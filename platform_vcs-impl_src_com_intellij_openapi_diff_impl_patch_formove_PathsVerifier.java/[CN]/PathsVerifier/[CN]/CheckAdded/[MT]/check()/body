{
  final String[] pieces=RelativePathCalculator.split(myAfterName);
  final VirtualFile parent=makeSureParentPathExists(pieces);
  if (parent == null) {
    setErrorMessage(fileNotFoundMessage(myAfterName));
    return false;
  }
  final VirtualFile file=createFile(parent,pieces[pieces.length - 1]);
  myAddedPaths.add(new FilePathImpl(file));
  if (!checkExistsAndValid(file,myAfterName)) {
    return false;
  }
  addPatch(myPatch,file);
  return true;
}
