{
  File tmpFileWithUniqueName=FileUtil.createTempFile(oldParent,"tempFileToMove",null,false);
  File newParentFile=VfsUtilCore.virtualToIoFile(myNewParent);
  File destFile=new File(newParentFile,tmpFileWithUniqueName.getName());
  while (destFile.exists()) {
    destFile=new File(newParentFile,FileUtil.createTempFile(oldParent,FileUtil.getNameWithoutExtension(destFile.getName()),null,false).getName());
  }
  myCurrent.rename(PatchApplier.class,destFile.getName());
  myCurrent.move(PatchApplier.class,myNewParent);
  myCurrent.rename(PatchApplier.class,myNewName);
}
