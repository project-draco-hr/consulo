{
  if (myJdk == null) {
    try {
      myJdk=myProject.createSdk("JavaSDK","jdk",System.getProperty("java.home"),null);
      final List<String> paths=new LinkedList<String>();
      paths.add(FileUtil.toSystemIndependentName(ClasspathBootstrap.getResourcePath(Object.class).getCanonicalPath()));
      myJdk.setClasspath(paths);
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  final Module module=myProject.createModule(moduleName,Closure.IDENTITY);
  module.forceInit();
  module.setSdk(myJdk);
  module.addDependency(myJdk,PredefinedDependencyScopes.getCOMPILE(),false);
  if (srcPath != null) {
    module.getContentRoots().add(srcPath);
    module.getSourceRoots().add(srcPath);
    module.setOutputPath("out/production/" + moduleName);
  }
  return module;
}
