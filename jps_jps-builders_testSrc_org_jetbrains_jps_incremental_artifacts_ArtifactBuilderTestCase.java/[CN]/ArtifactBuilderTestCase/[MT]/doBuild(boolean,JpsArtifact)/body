{
  BuildResult result;
  ProjectDescriptor descriptor=createProjectDescriptor(new BuildLoggingManager(myArtifactBuilderLogger,new JavaBuilderLoggerImpl()));
  try {
    myArtifactBuilderLogger.clear();
    final CompileScope scope=new AllProjectScope(descriptor.jpsProject,new HashSet<JpsArtifact>(Arrays.asList(artifacts)),force);
    result=doBuild(descriptor,scope,!force,false,false);
  }
  finally {
    descriptor.release();
  }
  return result;
}
