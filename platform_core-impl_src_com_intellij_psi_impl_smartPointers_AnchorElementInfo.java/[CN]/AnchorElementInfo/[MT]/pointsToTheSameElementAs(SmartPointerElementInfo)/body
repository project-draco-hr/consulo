{
  if (other instanceof AnchorElementInfo) {
    AnchorElementInfo otherAnchor=(AnchorElementInfo)other;
    if ((getStubId() == -1) != (otherAnchor.getStubId() == -1)) {
      return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
        @Override public Boolean compute(){
          return Comparing.equal(restoreElement(),other.restoreElement());
        }
      }
);
    }
    if (myStubElementTypeAndId != otherAnchor.myStubElementTypeAndId) {
      return false;
    }
  }
  return super.pointsToTheSameElementAs(other);
}
