{
  PsiElement element=restoreElement();
  if (element != null) {
    PsiElement anchor=AnchorElementInfoFactory.getAnchor(element);
    if (anchor == null)     anchor=element;
    myType=AnchorTypeInfo.obtainInfo(anchor,myType.getFileLanguage());
    setRange(anchor.getTextRange());
    MarkerCache cache=myManager.getMarkerCache(getVirtualFile());
    if (cache != null) {
      cache.rangeChanged();
    }
    myStubElementTypeAndId=pack(-1,null);
  }
}
