{
  if (tabPlacement != UISettings.TABS_NONE) {
    if (myTabbedPane == null) {
      final EditorWithProviderComposite editor=getSelectedEditor();
      myPanel.removeAll();
      createTabs(tabPlacement);
      setEditor(editor,true);
    }
 else {
      myTabbedPane.setTabPlacement(tabPlacement);
    }
  }
 else   if (myTabbedPane != null) {
    final boolean focusEditor=ToolWindowManager.getInstance(getManager().getProject()).isEditorComponentActive();
    final VirtualFile currentFile=getSelectedFile();
    if (currentFile != null) {
      currentFile.putUserData(FileEditorManagerImpl.CLOSING_TO_REOPEN,Boolean.TRUE);
    }
    final VirtualFile[] files=getFiles();
    for (    VirtualFile file : files) {
      closeFile(file,false);
    }
    disposeTabs();
    if (currentFile != null) {
      currentFile.putUserData(FileEditorManagerImpl.CLOSING_TO_REOPEN,null);
      getManager().openFileImpl2(this,currentFile,focusEditor && myOwner.getCurrentWindow() == this);
    }
 else {
      myPanel.repaint();
    }
  }
}
