{
  if (myTabbedPane == null)   return;
  FileEditorManagerEx.getInstanceEx(getManager().getProject()).getReady(this).doWhenDone(new Runnable(){
    @Override public void run(){
      if (myTabbedPane == null)       return;
      final boolean closeNonModifiedFilesFirst=UISettings.getInstance().CLOSE_NON_MODIFIED_FILES_FIRST;
      final EditorComposite selectedComposite=getSelectedEditor();
      try {
        doTrimSize(limit,fileToIgnore,closeNonModifiedFilesFirst,transferFocus);
      }
  finally {
        setSelectedEditor(selectedComposite,false);
      }
    }
  }
);
}
