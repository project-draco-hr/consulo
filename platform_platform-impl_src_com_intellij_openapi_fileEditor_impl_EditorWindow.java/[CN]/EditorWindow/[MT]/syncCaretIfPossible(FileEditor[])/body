{
  if (toSync == null) {
    return;
  }
  final EditorWithProviderComposite from=getSelectedEditor();
  if (from == null) {
    return;
  }
  final FileEditor caretSource=from.getSelectedEditor();
  if (!(caretSource instanceof TextEditor)) {
    return;
  }
  final Editor editorFrom=((TextEditor)caretSource).getEditor();
  final int offset=editorFrom.getCaretModel().getOffset();
  if (offset <= 0) {
    return;
  }
  final int scrollOffset=editorFrom.getScrollingModel().getVerticalScrollOffset();
  for (  FileEditor fileEditor : toSync) {
    if (!(fileEditor instanceof TextEditor)) {
      continue;
    }
    final Editor editor=((TextEditor)fileEditor).getEditor();
    if (editorFrom.getDocument() == editor.getDocument()) {
      editor.getCaretModel().moveToOffset(offset);
      final ScrollingModel scrollingModel=editor.getScrollingModel();
      scrollingModel.scrollVertically(scrollOffset);
      SwingUtilities.invokeLater(new Runnable(){
        @Override public void run(){
          if (!editor.isDisposed()) {
            scrollingModel.scrollToCaret(ScrollType.MAKE_VISIBLE);
          }
        }
      }
);
    }
  }
}
