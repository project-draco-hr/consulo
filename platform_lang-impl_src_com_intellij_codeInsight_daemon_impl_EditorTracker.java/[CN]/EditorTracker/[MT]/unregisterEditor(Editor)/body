{
  Window oldWindow=myEditorToWindowMap.get(editor);
  if (oldWindow != null) {
    myEditorToWindowMap.remove(editor);
    List<Editor> editorsList=myWindowToEditorsMap.get(oldWindow);
    boolean removed=editorsList.remove(editor);
    LOG.assertTrue(removed);
    if (editorsList.isEmpty()) {
      myWindowToEditorsMap.remove(oldWindow);
      final WindowAdapter listener=myWindowToWindowFocusListenerMap.remove(oldWindow);
      if (listener != null) {
        oldWindow.removeWindowFocusListener(listener);
        oldWindow.removeWindowListener(listener);
      }
    }
  }
}
