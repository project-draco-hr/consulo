{
  myIdeFrame=((WindowManagerEx)myWindowManager).getFrame(myProject);
  myProject.getMessageBus().connect(myProject).subscribe(FileEditorManagerListener.FILE_EDITOR_MANAGER,new FileEditorManagerAdapter(){
    public void selectionChanged(    FileEditorManagerEvent event){
      if (myIdeFrame.getFocusOwner() == null)       return;
      setActiveWindow(myIdeFrame);
    }
  }
);
  myEditorFactoryListener=new MyEditorFactoryListener();
  myEditorFactory.addEditorFactoryListener(myEditorFactoryListener);
  Disposer.register(myProject,new Disposable(){
    public void dispose(){
      myEditorFactoryListener.dispose(null);
      myEditorFactory.removeEditorFactoryListener(myEditorFactoryListener);
    }
  }
);
}
