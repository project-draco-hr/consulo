{
  myIdeFrame=((WindowManagerEx)myWindowManager).getFrame(myProject);
  myFileEditorManager.addFileEditorManagerListener(new FileEditorManagerAdapter(){
    public void selectionChanged(    FileEditorManagerEvent event){
      if (myIdeFrame.getFocusOwner() == null)       return;
      setActiveWindow(myIdeFrame);
    }
  }
,myProject);
  if (myIdeFrame != null) {
    myIdeFrame.addWindowFocusListener(myIdeFrameFocusListener);
    Disposer.register(myProject,new Disposable(){
      public void dispose(){
        myIdeFrame.removeWindowFocusListener(myIdeFrameFocusListener);
      }
    }
);
  }
  myEditorFactoryListener=new MyEditorFactoryListener();
  myEditorFactory.addEditorFactoryListener(myEditorFactoryListener);
  Disposer.register(myProject,new Disposable(){
    public void dispose(){
      myEditorFactoryListener.dispose(null);
      myEditorFactory.removeEditorFactoryListener(myEditorFactoryListener);
    }
  }
);
}
