{
  Collection<MyRepoModel<?,?,?>> selectedNodes=getSelectedRepoNode();
  MyRepoModel<?,?,?> selectedModel=ObjectUtils.assertNotNull(ContainerUtil.getFirstItem(selectedNodes));
  final PushSupport activePushSupport=selectedModel.getSupport();
  final PushTarget commonTarget=getCommonTarget(selectedNodes);
  if (commonTarget != null && activePushSupport.isSilentForcePushAllowed(commonTarget))   return true;
  return Messages.showOkCancelDialog(myProject,DvcsBundle.message("push.force.confirmation.text",commonTarget != null ? " to <b>" + commonTarget.getPresentation() + "</b>" : ""),"Force Push","&Force Push",CommonBundle.getCancelButtonText(),Messages.getWarningIcon(),commonTarget != null ? new DialogWrapper.DoNotAskOption(){
    @Override public boolean isToBeShown(){
      return true;
    }
    @Override public void setToBeShown(    boolean toBeShown,    int exitCode){
      if (!toBeShown && exitCode == OK) {
        activePushSupport.saveSilentForcePushTarget(commonTarget);
      }
    }
    @Override public boolean canBeHidden(){
      return true;
    }
    @Override public boolean shouldSaveOptionsOnCancel(){
      return false;
    }
    @NotNull @Override public String getDoNotShowMessage(){
      return "Don't warn about this target";
    }
  }
 : null) == OK;
}
