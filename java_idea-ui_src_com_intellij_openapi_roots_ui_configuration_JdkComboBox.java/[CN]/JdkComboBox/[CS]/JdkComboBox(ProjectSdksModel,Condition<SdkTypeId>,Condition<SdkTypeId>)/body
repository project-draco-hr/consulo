{
  super(new JdkComboBoxModel(jdkModel,getSdkFilter(filter)));
  myFilter=filter;
  myCreationFilter=creationFilter;
  setRenderer(new ProjectJdkListRenderer(){
    @Override public void doCustomize(    JList list,    Object value,    int index,    boolean selected,    boolean hasFocus){
      if (JdkComboBox.this.isEnabled()) {
        setIcon(EMPTY_ICON);
        if (value instanceof InvalidJdkComboBoxItem) {
          final String str=value.toString();
          append(str,SimpleTextAttributes.ERROR_ATTRIBUTES);
        }
 else         if (value instanceof ProjectJdkComboBoxItem) {
          final Sdk jdk=jdkModel.getProjectSdk();
          if (jdk != null) {
            setIcon(((SdkType)jdk.getSdkType()).getIcon());
            append(ProjectBundle.message("project.roots.project.jdk.inherited"),SimpleTextAttributes.REGULAR_ATTRIBUTES);
            append(" (" + jdk.getName() + ")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
          }
 else {
            final String str=value.toString();
            append(str,SimpleTextAttributes.ERROR_ATTRIBUTES);
          }
        }
 else {
          super.doCustomize(list,value != null ? ((JdkComboBoxItem)value).getJdk() : new NoneJdkComboBoxItem(),index,selected,hasFocus);
        }
      }
    }
  }
);
}
