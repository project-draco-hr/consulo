{
  if (newStatement instanceof GrBlockStatement) {
    GrBlockStatement blockStatement=(GrBlockStatement)newStatement;
    final GrOpenBlock openBlock=blockStatement.getBlock();
    final GrStatement[] statements=openBlock.getStatements();
    if (statements.length == 0) {
      oldStatement.removeStatement();
    }
 else {
      final PsiElement parent=oldStatement.getParent();
      if (parent instanceof GrStatementOwner) {
        GrStatementOwner statementOwner=(GrStatementOwner)parent;
        for (        GrStatement statement : statements) {
          statementOwner.addStatementBefore(statement,oldStatement);
        }
        oldStatement.removeStatement();
      }
 else       if (parent instanceof GrControlStatement) {
        oldStatement.replace(newStatement);
      }
    }
  }
 else {
    oldStatement.replaceWithStatement(newStatement);
  }
}
