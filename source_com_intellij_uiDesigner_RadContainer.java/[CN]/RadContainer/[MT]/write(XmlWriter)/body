{
  if (isXY()) {
    writer.startElement("xy");
  }
 else   if (isGrid()) {
    writer.startElement("grid");
  }
 else {
    throw new IllegalArgumentException("unknown layout: " + getLayout());
  }
  try {
    writeId(writer);
    writeBinding(writer);
    final AbstractLayout layout=(AbstractLayout)getLayout();
    if (isGrid()) {
      final GridLayoutManager _layout=(GridLayoutManager)layout;
      writer.addAttribute("row-count",_layout.getRowCount());
      writer.addAttribute("column-count",_layout.getColumnCount());
      writer.addAttribute("same-size-horizontally",_layout.isSameSizeHorizontally());
      writer.addAttribute("same-size-vertically",_layout.isSameSizeVertically());
    }
    writer.addAttribute("hgap",layout.getHGap());
    writer.addAttribute("vgap",layout.getVGap());
    final Insets margin=layout.getMargin();
    writer.startElement("margin");
    try {
      writer.addAttribute("top",margin.top);
      writer.addAttribute("left",margin.left);
      writer.addAttribute("bottom",margin.bottom);
      writer.addAttribute("right",margin.right);
    }
  finally {
      writer.endElement();
    }
    writeConstraints(writer);
    writeProperties(writer);
    writeBorder(writer);
    writeChildren(writer);
  }
  finally {
    writer.endElement();
  }
}
