{
  if (ourRunnableCallback == null) {
    final ID runnableClass=allocateObjcClassPair(getObjcClass("NSObject"),"IdeaRunnable");
    registerObjcClassPair(runnableClass);
    final Callback callback=new Callback(){
      public void callback(      ID self,      String selector,      ID keyObject){
        final String key=toStringViaUTF8(keyObject);
        RunnableInfo info;
synchronized (RUNNABLE_LOCK) {
          info=ourMainThreadRunnables.remove(key);
        }
        if (info == null)         return;
        ID pool=null;
        try {
          if (info.myUseAutoreleasePool) {
            pool=invoke("NSAutoreleasePool","new");
          }
          info.myRunnable.run();
        }
  finally {
          if (pool != null) {
            invoke(pool,"release");
          }
        }
      }
    }
;
    if (!addMethod(runnableClass,createSelector("run:"),callback,"v@:*")) {
      throw new RuntimeException("Unable to add method to objective-c runnableClass class!");
    }
    ourRunnableCallback=callback;
  }
}
