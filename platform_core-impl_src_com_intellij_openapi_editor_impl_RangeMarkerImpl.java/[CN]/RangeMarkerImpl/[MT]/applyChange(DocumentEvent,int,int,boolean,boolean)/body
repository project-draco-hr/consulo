{
  if (intervalStart == intervalEnd) {
    return processIfOnePoint(e,intervalStart,intervalEnd,isGreedyToRight);
  }
  final int offset=e.getOffset();
  final int oldLength=e.getOldLength();
  final int newLength=e.getNewLength();
  if (intervalEnd < offset || !isGreedyToRight && intervalEnd == offset) {
    return new ProperTextRange(intervalStart,intervalEnd);
  }
  if (intervalStart > offset + oldLength || !isGreedyToLeft && intervalStart == offset + oldLength) {
    return new ProperTextRange(intervalStart + newLength - oldLength,intervalEnd + newLength - oldLength);
  }
  if (intervalStart <= offset && intervalEnd >= offset + oldLength) {
    return new ProperTextRange(intervalStart,intervalEnd + newLength - oldLength);
  }
  if (intervalStart >= offset && intervalStart <= offset + oldLength && intervalEnd > offset + oldLength) {
    return new ProperTextRange(offset + newLength,intervalEnd + newLength - oldLength);
  }
  if (intervalEnd >= offset && intervalEnd <= offset + oldLength && intervalStart < offset) {
    return new ProperTextRange(intervalStart,offset);
  }
  return null;
}
