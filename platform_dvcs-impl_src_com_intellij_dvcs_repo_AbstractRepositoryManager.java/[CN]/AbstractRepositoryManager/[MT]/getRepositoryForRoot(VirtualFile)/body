{
  if (root == null) {
    return null;
  }
  try {
    REPO_LOCK.readLock().lock();
    if (Disposer.isDisposed(this)) {
      throw new ProcessCanceledException();
    }
    T repo=myRepositories.get(root);
    return repo != null ? repo : myExternalRepositories.get(root);
  }
  finally {
    REPO_LOCK.readLock().unlock();
  }
}
