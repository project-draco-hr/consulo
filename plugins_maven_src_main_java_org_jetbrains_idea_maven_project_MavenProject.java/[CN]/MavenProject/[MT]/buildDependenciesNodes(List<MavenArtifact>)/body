{
  List<MavenArtifactNode> result=new ArrayList<MavenArtifactNode>();
  for (  MavenArtifact each : artifacts) {
    List<MavenArtifactNode> currentScope=result;
    for (    String eachKey : each.getTrail()) {
      MavenArtifactNode node=findNodeFor(eachKey,currentScope,true);
      if (node == null) {
        node=findNodeFor(eachKey,result,false);
        if (node == null) {
          MavenArtifact artifact=findArtifactFor(eachKey,artifacts);
          if (artifact == null)           break;
          node=new MavenArtifactNode(artifact,new ArrayList<MavenArtifactNode>());
        }
        currentScope.add(node);
      }
      currentScope=node.getDependencies();
    }
  }
  return result;
}
