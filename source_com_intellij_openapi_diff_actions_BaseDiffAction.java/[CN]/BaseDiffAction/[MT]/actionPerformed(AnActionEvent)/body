{
  DiffRequest diffData;
  try {
    diffData=getDiffData(e.getDataContext());
  }
 catch (  DataAccessor.NoDataException e1) {
    diffData=null;
  }
  if (diffData == null)   return;
  final DiffContent[] contents=diffData.getContents();
  final FileDocumentManager documentManager=FileDocumentManager.getInstance();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      for (int i=0; i < contents.length; i++) {
        DiffContent content=contents[i];
        if (content.getFile() != null)         documentManager.saveDocument(content.getDocument());
      }
    }
  }
);
  DiffManager.getInstance().getDiffTool().show(diffData);
}
