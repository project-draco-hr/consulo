{
  boolean modelChanged=false;
  Set<Library> libraries=new HashSet<Library>(getSuitableLibraries(packagingEditor));
  Set<Module> modules=new HashSet<Module>(getSuitableModules(packagingEditor));
  List<ContainerElement> elements=new ArrayList<ContainerElement>(Arrays.asList(getModifiedElements(packagingEditor)));
  PackagingConfiguration configuration=packagingEditor.getModifiedConfiguration();
  for (  ContainerElement element : elements) {
    boolean remove=false;
    if (element instanceof LibraryLink) {
      Library library=((LibraryLink)element).getLibrary();
      remove=library != null && !libraries.contains(library);
    }
 else     if (element instanceof ModuleLink) {
      Module module=((ModuleLink)element).getModule();
      remove=module != null && !modules.contains(module);
    }
    if (remove) {
      configuration.removeContainerElement(element);
      modelChanged=true;
    }
  }
  return modelChanged;
}
