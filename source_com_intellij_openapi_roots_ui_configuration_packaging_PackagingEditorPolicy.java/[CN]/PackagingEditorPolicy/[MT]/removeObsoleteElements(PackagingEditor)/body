{
  boolean modelChanged=false;
  List<Library> libraries=getSuitableLibraries(packagingEditor);
  List<Module> modules=getSuitableModules(packagingEditor);
  List<ContainerElement> elements=new ArrayList<ContainerElement>(Arrays.asList(getModifiedElements(packagingEditor)));
  PackagingConfiguration configuration=packagingEditor.getModifiedConfiguration();
  for (  ContainerElement element : elements) {
    boolean remove;
    if (element instanceof LibraryLink) {
      Library library=((LibraryLink)element).getLibrary();
      remove=library != null && !libraries.contains(library);
    }
 else     if (element instanceof ModuleLink) {
      Module module=((ModuleLink)element).getModule();
      remove=module != null && !modules.contains(module);
    }
 else {
      remove=isObsolete(element,packagingEditor);
    }
    if (remove) {
      configuration.removeContainerElement(element);
      modelChanged=true;
    }
  }
  return modelChanged;
}
