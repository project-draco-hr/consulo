{
  try {
    myPostponedCounter++;
    return computable.compute();
  }
  finally {
    if (--myPostponedCounter == 0) {
      if (!ApplicationManager.getApplication().isWriteAccessAllowed()) {
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          public void run(){
            doPostponedFormatting();
          }
        }
);
      }
 else       doPostponedFormatting();
    }
  }
}
