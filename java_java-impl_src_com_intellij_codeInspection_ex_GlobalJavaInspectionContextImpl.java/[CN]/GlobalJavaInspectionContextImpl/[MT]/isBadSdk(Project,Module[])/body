{
  boolean anyModuleAcceptsSdk=false;
  boolean anyModuleUsesProjectSdk=false;
  Sdk projectSdk=ProjectRootManager.getInstance(project).getProjectJdk();
  for (  Module module : modules) {
    if (ModuleRootManager.getInstance(module).isSdkInherited()) {
      anyModuleUsesProjectSdk=true;
      if (module.getModuleType().isValidSdk(module,projectSdk)) {
        anyModuleAcceptsSdk=true;
      }
    }
  }
  return anyModuleUsesProjectSdk && !anyModuleAcceptsSdk;
}
