{
  final ProjectFromSourcesBuilderImpl projectBuilder=new ProjectFromSourcesBuilderImpl(context,modulesProvider);
  myProjectBuilder=projectBuilder;
  final Icon icon=context.getStepIcon();
  if (context.isCreatingNewProject()) {
    addStep(sequence,new ProjectNameStep(context,this),specific);
  }
  addStep(sequence,new RootsDetectionStep(projectBuilder,context,sequence,icon,"reference.dialogs.new.project.fromCode.source"),specific);
  for (  ProjectStructureDetector detector : ProjectStructureDetector.EP_NAME.getExtensions()) {
    for (    ModuleWizardStep step : detector.createWizardSteps(projectBuilder,projectBuilder.getProjectDescriptor(detector),icon)) {
      sequence.addSpecificStep(detector.getDetectorId(),step);
    }
  }
}
