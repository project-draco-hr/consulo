{
  return new SubstrateRef(){
    @NotNull @Override public ASTNode getNode(){
      return node;
    }
    @Override public boolean isValid(){
      FileASTNode fileElement=SharedImplUtil.findFileElement(node);
      PsiElement file=fileElement == null ? null : fileElement.getPsi();
      return file != null && file.isValid();
    }
    @NotNull @Override public PsiFile getContainingFile(){
      PsiFile file=SharedImplUtil.getContainingFile(node);
      if (file == null)       throw new PsiInvalidElementAccessException(node.getPsi());
      return file;
    }
  }
;
}
