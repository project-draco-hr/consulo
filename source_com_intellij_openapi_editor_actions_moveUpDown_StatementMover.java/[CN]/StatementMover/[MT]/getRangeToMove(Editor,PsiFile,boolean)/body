{
  if (!(file instanceof PsiJavaFile))   return null;
  LineRange result=super.getRangeToMove(editor,file,isDown);
  result=expandLineRangeToCoverPsiElements(result,editor,file);
  if (result == null)   return null;
  final int startOffset=editor.logicalPositionToOffset(new LogicalPosition(result.startLine,0));
  final int endOffset=editor.logicalPositionToOffset(new LogicalPosition(result.endLine + 1,0));
  final PsiElement[] statements=CodeInsightUtil.findStatementsInRange(file,startOffset,endOffset);
  if (statements == null || statements.length == 0)   return null;
  result.firstElement=statements[0];
  result.lastElement=statements[statements.length - 1];
  return result;
}
