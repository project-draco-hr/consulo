{
  return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    public Boolean compute(){
      Object newElement=updateElement();
      boolean changed=false;
      if (getElement() != newElement) {
        changed=true;
      }
      if (newElement == null)       return changed;
      Color oldColor=myColor;
      String oldName=myName;
      Icon oldOpenIcon=myOpenIcon;
      Icon oldClosedIcon=myClosedIcon;
      List<ColoredFragment> oldFragments=new ArrayList<ColoredFragment>(myColoredText);
      myColor=Color.black;
      updateFileStatus();
      doUpdate();
      myName=getName();
      return changed || !Comparing.equal(new Object[]{myOpenIcon,myClosedIcon,myName,oldFragments,myColor},new Object[]{oldOpenIcon,oldClosedIcon,oldName,oldFragments,oldColor});
    }
  }
).booleanValue();
}
