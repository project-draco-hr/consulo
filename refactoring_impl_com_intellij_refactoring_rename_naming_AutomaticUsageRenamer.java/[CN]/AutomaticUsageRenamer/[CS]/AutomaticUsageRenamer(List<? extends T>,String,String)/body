{
  myOldName=oldName;
  myNewName=newName;
  List<T> elements=new ArrayList<T>(renamedElements);
  Collections.sort(elements,new Comparator<T>(){
    private int compareNullable(    @Nullable String s1,    @Nullable String s2){
      if (s1 != null) {
        return s2 == null ? 1 : s1.compareTo(s2);
      }
      return s2 == null ? 0 : -1;
    }
    public int compare(    T o1,    T o2){
      int i=compareNullable(getSourceName(o1),getSourceName(o2));
      if (i != 0)       return i;
      return getName(o1).compareTo(getName(o2));
    }
  }
);
  for (  T element : elements) {
    String suggestedNewName=suggestName(element);
    if (!getName(element).equals(suggestedNewName)) {
      myElements.add(element);
      setRename(element,suggestedNewName);
    }
  }
}
