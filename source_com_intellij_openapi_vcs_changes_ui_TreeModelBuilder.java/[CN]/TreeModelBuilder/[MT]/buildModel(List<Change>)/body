{
  final HashMap<FilePath,ChangesBrowserNode> foldersCache=new HashMap<FilePath,ChangesBrowserNode>();
  final HashMap<Module,ChangesBrowserNode> moduleCache=new HashMap<Module,ChangesBrowserNode>();
  for (  Change change : changes) {
    insertChangeNode(change,foldersCache,moduleCache,root);
  }
  collapseDirectories(model,root);
  sortNodes();
  return model;
}
