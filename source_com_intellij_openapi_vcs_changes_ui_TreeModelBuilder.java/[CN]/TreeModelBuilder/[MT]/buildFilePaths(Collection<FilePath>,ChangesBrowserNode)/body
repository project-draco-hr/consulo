{
  final HashMap<FilePath,ChangesBrowserNode> foldersCache=new HashMap<FilePath,ChangesBrowserNode>();
  final HashMap<Module,ChangesBrowserNode> moduleCache=new HashMap<Module,ChangesBrowserNode>();
  for (  FilePath file : filePaths) {
    ChangesBrowserNode oldNode=foldersCache.get(file);
    if (oldNode == null) {
      final ChangesBrowserNode node=ChangesBrowserNode.create(myProject,file);
      model.insertNodeInto(node,getParentNodeFor(node,foldersCache,moduleCache,baseNode),0);
      foldersCache.put(file,node);
    }
  }
}
