{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  List<LibraryImpl> addedLibraries=new ArrayList<LibraryImpl>(model.myLibraries);
  addedLibraries.removeAll(myModel.myLibraries);
  List<LibraryImpl> removedLibraries=new ArrayList<LibraryImpl>(myModel.myLibraries);
  removedLibraries.removeAll(model.myLibraries);
  for (  LibraryImpl library : removedLibraries) {
    fireBeforeLibraryRemoved(library);
  }
  myModel=model;
  for (  LibraryImpl library : removedLibraries) {
    fireAfterLibraryRemoved(library);
  }
  for (  LibraryImpl library : addedLibraries) {
    fireLibraryAdded(library);
  }
}
