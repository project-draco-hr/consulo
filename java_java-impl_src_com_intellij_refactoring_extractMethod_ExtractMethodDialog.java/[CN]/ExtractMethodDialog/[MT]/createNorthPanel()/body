{
  final JPanel main=new JPanel(new BorderLayout());
  final JPanel namePanel=new JPanel(new VerticalFlowLayout(VerticalFlowLayout.TOP,0,2,true,false));
  final JLabel nameLabel=new JLabel();
  nameLabel.setText(RefactoringBundle.message("changeSignature.name.prompt"));
  namePanel.add(nameLabel);
  namePanel.setBorder(IdeBorderFactory.createEmptyBorder(0,4,0,0));
  namePanel.add(myNameField);
  nameLabel.setLabelFor(myNameField);
  myNameField.getDocument().addDocumentListener(new DocumentAdapter(){
    public void documentChanged(    DocumentEvent e){
      update();
    }
  }
);
  myVisibilityPanel=createVisibilityPanel();
  final JPanel visibilityAndName=new JPanel(new BorderLayout());
  visibilityAndName.add(myVisibilityPanel,BorderLayout.WEST);
  visibilityAndName.add(namePanel,BorderLayout.CENTER);
  main.add(visibilityAndName,BorderLayout.CENTER);
  setOKActionEnabled(false);
  setOKActionEnabled(JavaPsiFacade.getInstance(myProject).getNameHelper().isIdentifier(myNameField.getText()));
  final JPanel options=new JPanel(new BorderLayout());
  options.add(createOptionsPanel(),BorderLayout.WEST);
  main.add(options,BorderLayout.SOUTH);
  return main;
}
