{
  try {
    myTempFile=File.createTempFile("idea_junit",".tmp");
    myTempFile.deleteOnExit();
    myJavaParameters.getProgramParametersList().add("@" + myTempFile.getAbsolutePath());
    final PrintWriter writer=new PrintWriter(new FileWriter(myTempFile));
    try {
      writer.println(packageName);
      for (      final PsiElement element : elements) {
        final String name;
        if (element instanceof PsiClass) {
          name=JavaExecutionUtil.getRuntimeQualifiedName((PsiClass)element);
        }
 else         if (element instanceof PsiMethod) {
          PsiMethod method=(PsiMethod)element;
          name=JavaExecutionUtil.getRuntimeQualifiedName(method.getContainingClass()) + "," + method.getName();
        }
 else {
          LOG.error("invalid element " + element);
          return;
        }
        writer.println(name);
      }
    }
  finally {
      writer.close();
    }
  }
 catch (  IOException e) {
    LOG.error(e);
  }
}
