{
  final ProcessHandler handler=startProcess();
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new DefaultExecutionResult(null,handler);
  }
  final JUnitConsoleProperties consoleProperties=new JUnitConsoleProperties(myConfiguration);
  final JUnitTreeConsoleView consoleView=new JUnitTreeConsoleView(consoleProperties,getRunnerSettings(),getConfigurationSettings());
  consoleView.attachToProcess(handler);
  RerunFailedTestsAction rerunFailedTestsAction=new RerunFailedTestsAction(consoleView.getComponent());
  rerunFailedTestsAction.init(consoleProperties,myRunnerSettings,myConfigurationSettings);
  rerunFailedTestsAction.setModelProvider(new Getter<TestFrameworkRunningModel>(){
    public TestFrameworkRunningModel get(){
      return consoleView.getModel();
    }
  }
);
  return new DefaultExecutionResult(consoleView,handler,rerunFailedTestsAction);
}
