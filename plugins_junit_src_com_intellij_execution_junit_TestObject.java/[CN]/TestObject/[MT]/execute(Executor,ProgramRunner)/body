{
  final JUnitConsoleProperties consoleProperties=new JUnitConsoleProperties(myConfiguration);
  final JUnitTreeConsoleView consoleView=new JUnitTreeConsoleView(consoleProperties,getRunnerSettings(),getConfigurationSettings());
  consoleView.initUI();
  final ProcessHandler handler=startProcess(consoleView);
  consoleView.attachToProcess(handler);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new DefaultExecutionResult(null,handler);
  }
  RerunFailedTestsAction rerunFailedTestsAction=new RerunFailedTestsAction(consoleView.getComponent());
  rerunFailedTestsAction.init(consoleProperties,myRunnerSettings,myConfigurationSettings);
  rerunFailedTestsAction.setModelProvider(new Getter<TestFrameworkRunningModel>(){
    public TestFrameworkRunningModel get(){
      return consoleView.getModel();
    }
  }
);
  final DefaultExecutionResult result=new DefaultExecutionResult(consoleView,handler);
  result.setRestartActions(rerunFailedTestsAction);
  return result;
}
