{
  e.getPresentation().setText(CommonActionsPanel.Buttons.EDIT.getText());
  e.getPresentation().setIcon(CommonActionsPanel.Buttons.EDIT.getIcon());
  e.getPresentation().setEnabled(true);
  Project project=e.getProject();
  FavoritesViewTreeBuilder treeBuilder=FavoritesTreeViewPanel.FAVORITES_TREE_BUILDER_KEY.getData(e.getDataContext());
  String listName=FavoritesTreeViewPanel.FAVORITES_LIST_NAME_DATA_KEY.getData(e.getDataContext());
  if (project == null || treeBuilder == null || listName == null) {
    e.getPresentation().setEnabled(false);
    return;
  }
  FavoritesManager favoritesManager=FavoritesManager.getInstance(project);
  FavoritesListProvider provider=favoritesManager.getListProvider(listName);
  Set<Object> selection=treeBuilder.getSelectedElements();
  if (provider != null) {
    e.getPresentation().setEnabled(provider.willHandle(CommonActionsPanel.Buttons.EDIT,project,selection));
    e.getPresentation().setText(provider.getCustomName(CommonActionsPanel.Buttons.EDIT));
  }
}
