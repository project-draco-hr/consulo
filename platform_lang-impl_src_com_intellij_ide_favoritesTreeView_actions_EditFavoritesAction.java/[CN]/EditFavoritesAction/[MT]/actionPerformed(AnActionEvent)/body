{
  Project project=e.getProject();
  FavoritesViewTreeBuilder treeBuilder=FavoritesTreeViewPanel.FAVORITES_TREE_BUILDER_KEY.getData(e.getDataContext());
  String listName=FavoritesTreeViewPanel.FAVORITES_LIST_NAME_DATA_KEY.getData(e.getDataContext());
  if (project == null || treeBuilder == null || listName == null) {
    return;
  }
  FavoritesManager favoritesManager=FavoritesManager.getInstance(project);
  FavoritesListProvider provider=favoritesManager.getListProvider(listName);
  Set<Object> selection=treeBuilder.getSelectedElements();
  if (provider != null && provider.willHandle(CommonActionsPanel.Buttons.EDIT,project,selection)) {
    provider.handle(CommonActionsPanel.Buttons.EDIT,project,selection,treeBuilder.getTree());
    return;
  }
  favoritesManager.renameList(project,listName);
}
