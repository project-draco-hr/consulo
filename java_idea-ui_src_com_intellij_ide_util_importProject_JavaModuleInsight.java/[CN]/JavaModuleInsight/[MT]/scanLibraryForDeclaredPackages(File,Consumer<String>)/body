{
  final ZipFile zip=new ZipFile(file);
  try {
    final Enumeration<? extends ZipEntry> entries=zip.entries();
    while (entries.hasMoreElements()) {
      final String entryName=entries.nextElement().getName();
      if (StringUtil.endsWithIgnoreCase(entryName,".class")) {
        final int index=entryName.lastIndexOf('/');
        if (index > 0) {
          final String packageName=entryName.substring(0,index).replace('/','.');
          result.consume(packageName);
        }
      }
    }
  }
  finally {
    zip.close();
  }
}
