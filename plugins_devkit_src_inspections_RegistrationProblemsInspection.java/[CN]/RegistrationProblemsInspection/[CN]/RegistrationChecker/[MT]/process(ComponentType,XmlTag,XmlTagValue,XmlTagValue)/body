{
  if (impl == null) {
    addProblem(component,DevKitBundle.message("inspections.registration.problems.missing.implementation.class"),ProblemHighlightType.GENERIC_ERROR_OR_WARNING);
  }
 else {
    final PsiClass implClass=myPsiManager.findClass(impl.getTrimmedText(),myScope);
    if (implClass == null) {
      addProblem(impl,DevKitBundle.message("inspections.registration.problems.cannot.resolve.class",DevKitBundle.message("class.implementation")),ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
    }
 else {
      final PsiClass componentClass=myPsiManager.findClass(type.myClassName,myScope);
      if (componentClass != null && !implClass.isInheritor(componentClass,true)) {
        addProblem(impl,DevKitBundle.message("inspections.registration.problems.component.should.implement",type.myClassName),ProblemHighlightType.GENERIC_ERROR_OR_WARNING,ImplementOrExtendFix.createFix(componentClass,implClass,myOnTheFly));
      }
      if (isAbstract(implClass)) {
        addProblem(impl,DevKitBundle.message("inspections.registration.problems.abstract"),ProblemHighlightType.GENERIC_ERROR_OR_WARNING);
      }
    }
    if (intf != null) {
      final PsiClass intfClass=myPsiManager.findClass(intf.getTrimmedText(),myScope);
      if (intfClass == null) {
        addProblem(intf,DevKitBundle.message("inspections.registration.problems.cannot.resolve.class",DevKitBundle.message("class.interface")),ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
      }
 else       if (implClass != null) {
        final String fqn=intfClass.getQualifiedName();
        if (type == ComponentType.MODULE) {
          if (!checkInterface(fqn,intf)) {
            final String[] keys=makeQualifiedModuleInterfaceNames(component,fqn);
            for (            String key : keys) {
              checkInterface(key,intf);
              myInterfaceClasses.add(key);
            }
          }
        }
 else {
          checkInterface(fqn,intf);
          myInterfaceClasses.add(fqn);
        }
        if (intfClass != implClass && !implClass.isInheritor(intfClass,true)) {
          addProblem(impl,DevKitBundle.message("inspections.registration.problems.component.incompatible.interface",fqn),ProblemHighlightType.GENERIC_ERROR_OR_WARNING);
        }
      }
    }
  }
  return true;
}
