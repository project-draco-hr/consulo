{
  if (!inputString.equals(myProject.getName())) {
    myProject.setProjectName(inputString);
    myProject.save();
  }
  if (myModule != null && !inputString.equals(myModule.getName())) {
    final ModifiableModuleModel modifiableModel=ModuleManager.getInstance(myProject).getModifiableModel();
    try {
      modifiableModel.renameModule(myModule,inputString);
    }
 catch (    ModuleWithNameAlreadyExists moduleWithNameAlreadyExists) {
      Messages.showErrorDialog(myProject,IdeBundle.message("error.module.already.exists",inputString),IdeBundle.message("title.rename.module"));
      return false;
    }
    final Ref<Boolean> success=Ref.create(Boolean.TRUE);
    CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
      public void run(){
        ApplicationManager.getApplication().runWriteAction(new Runnable(){
          public void run(){
            modifiableModel.commit();
          }
        }
);
      }
    }
,IdeBundle.message("command.renaming.module",myModule.getName()),null);
    return success.get().booleanValue();
  }
  return true;
}
