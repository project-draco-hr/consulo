{
  IntentionActionWithTextCaching wrapped=(IntentionActionWithTextCaching)value;
  IntentionAction action=wrapped.getAction();
  Color bg;
  Color fg;
  if (!isSelected) {
    fg=list.getForeground();
    bg=list.getBackground();
  }
 else {
    fg=list.getSelectionForeground();
    bg=list.getSelectionBackground();
  }
  myLabel.setText(" " + wrapped.getText() + " ");
  myLabel.setFont(list.getFont());
  myLabel.setForeground(fg);
  myLabel.setBackground(bg);
  if (mySettings.isShowLightBulb(action)) {
    if (myQuickFixes.contains(action)) {
      myBulbButton.setIcon(ourQuickFixIcon);
    }
 else {
      myBulbButton.setIcon(ourIntentionIcon);
    }
  }
 else {
    if (myQuickFixes.contains(action)) {
      myBulbButton.setIcon(ourQuickFixOffIcon);
    }
 else {
      myBulbButton.setIcon(ourIntentionOffIcon);
    }
  }
  myBulbButton.setBorderPainted(false);
  myBulbButton.getModel().setArmed(false);
  myBulbButton.getModel().setPressed(false);
  if (myLastItemIndex == index) {
    if (isInBulbButton(myLastMousePoint)) {
      myBulbButton.getModel().setArmed(myMousePressed);
      myBulbButton.getModel().setPressed(myMousePressed);
      myBulbButton.setBorderPainted(true);
    }
  }
  myBulbButton.setBackground(list.getBackground());
  myArrowButton.setBorderPainted(false);
  myArrowButton.setIcon(EmptyIcon.create(ourArrowIcon.getIconWidth(),ourArrowIcon.getIconHeight()));
  if (wrapped.getOptionIntentions().size() + wrapped.getOptionFixes().size() > 0) {
    myArrowButton.setIcon(ourArrowIcon);
    myArrowButton.getModel().setArmed(false);
    myArrowButton.getModel().setPressed(false);
    if (myLastItemIndex == index) {
      if (isInArrowButton(myLastMousePoint)) {
        myArrowButton.getModel().setArmed(myMousePressed);
        myArrowButton.getModel().setPressed(myMousePressed);
        myArrowButton.setBorderPainted(true);
      }
    }
  }
  myArrowButton.setBackground(list.getBackground());
  myPanel.setBackground(list.getBackground());
  return myPanel;
}
