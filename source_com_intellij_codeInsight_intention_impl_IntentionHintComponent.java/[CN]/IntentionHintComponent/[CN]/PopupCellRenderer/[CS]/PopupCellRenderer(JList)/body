{
  myCompositeActionsList=list;
  myPanel.setLayout(new BorderLayout());
  myPanel.add(myBulbButton,BorderLayout.WEST);
  myPanel.add(myLabel,BorderLayout.CENTER);
  myPanel.add(myArrowButton,BorderLayout.EAST);
  myBulbButton.setIcon(mySmartTagIcon);
  myBulbButton.setMargin(new Insets(0,0,0,0));
  myBulbButton.setContentAreaFilled(false);
  myLabel.setOpaque(true);
  mySettings=IntentionManagerSettings.getInstance();
  myBulbButton.setBorderPainted(false);
  myArrowButton.setMargin(new Insets(0,0,0,0));
  myArrowButton.setBorderPainted(false);
  myArrowButton.setContentAreaFilled(false);
  myArrowButton.setPreferredSize(new Dimension(ourArrowIcon.getIconWidth() + 4,-1));
  myArrowButton.setMinimumSize(new Dimension(ourArrowIcon.getIconWidth() + 4,-1));
  myArrowButton.setMaximumSize(new Dimension(ourArrowIcon.getIconWidth() + 4,-1));
  myCompositeActionsList.addMouseMotionListener(new MouseMotionListener(){
    public void mouseDragged(    MouseEvent e){
      updateLastPoint(e);
    }
    public void mouseMoved(    MouseEvent e){
      updateLastPoint(e);
    }
  }
);
  myCompositeActionsList.addMouseListener(new MouseAdapter(){
    public void mouseEntered(    MouseEvent e){
      updateLastPoint(e);
    }
    public void mouseExited(    MouseEvent e){
      myLastMousePoint=null;
      myLastItemIndex=-1;
      myCompositeActionsList.repaint();
    }
    public void mousePressed(    MouseEvent e){
      e.consume();
      myMousePressed=true;
      myCompositeActionsList.repaint();
    }
    public void mouseClicked(    MouseEvent e){
      Point point=e.getPoint();
      int index=myCompositeActionsList.locationToIndex(point);
      IntentionActionWithTextCaching action=((IntentionActionWithTextCaching)myCompositeActionsList.getModel().getElementAt(index));
      if (isInBulbButton(point)) {
        mySettings.setShowLightBulb(action.getAction(),!mySettings.isShowLightBulb(action.getAction()));
        e.consume();
        myCompositeActionsList.repaint();
      }
 else       if (isInArrowButton(point) && action.getOptionIntentions().size() + action.getOptionFixes().size() > 0) {
        openChildPopup(action);
        e.consume();
      }
    }
    public void mouseReleased(    MouseEvent e){
      e.consume();
      myMousePressed=false;
      myCompositeActionsList.repaint();
    }
  }
);
}
