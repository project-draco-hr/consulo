{
  if (myList.getSelectedIndex() < 0)   return;
  final IntentionAction action=((IntentionActionWithTextCaching)myList.getSelectedValue()).getAction();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      HintManager hintManager=HintManager.getInstance();
      hintManager.hideAllHints();
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          final PsiFile file=PsiDocumentManager.getInstance(myProject).getPsiFile(myEditor.getDocument());
          PsiDocumentManager.getInstance(myProject).commitAllDocuments();
          if (action.isAvailable(myProject,myEditor,file)) {
            Runnable runnable=new Runnable(){
              public void run(){
                try {
                  action.invoke(myProject,myEditor,file);
                  DaemonCodeAnalyzer.getInstance(myProject).updateVisibleHighlighters(myEditor);
                }
 catch (                IncorrectOperationException e1) {
                  LOG.error(e1);
                }
              }
            }
;
            if (action.startInWriteAction()) {
              final Runnable _runnable=runnable;
              runnable=new Runnable(){
                public void run(){
                  ApplicationManager.getApplication().runWriteAction(_runnable);
                }
              }
;
            }
            CommandProcessor.getInstance().executeCommand(myProject,runnable,action.getText(),null);
          }
        }
      }
);
    }
  }
);
}
