{
  afterStartNotified(new Runnable(){
    public void run(){
      LOG.assertTrue(isStartNotified(),"Start notify is not called");
      if (!isProcessTerminating() && !isProcessTerminated()) {
        myState=STATE_TERMINATING;
        try {
          fireProcessWillTerminate(willBeDestroyed);
        }
 catch (        Throwable e) {
          LOG.error(e);
        }
      }
      LOG.assertTrue(isStartNotified(),"All events should be fired after startNotify is called");
      try {
        myEventMulticaster.processTerminated(new ProcessEvent(ProcessHandler.this,exitCode));
      }
 catch (      Throwable e) {
        LOG.error(e);
      }
 finally {
        myState=STATE_TERMINATED;
        myWaitSemaphore.up();
      }
    }
  }
);
}
