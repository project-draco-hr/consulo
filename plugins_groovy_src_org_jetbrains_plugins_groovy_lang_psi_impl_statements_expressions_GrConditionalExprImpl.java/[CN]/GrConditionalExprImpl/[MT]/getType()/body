{
  GrExpression thenBranch=getThenBranch();
  GrExpression elseBranch=getElseBranch();
  if (thenBranch == null) {
    if (elseBranch != null)     return elseBranch.getType();
  }
 else {
    if (elseBranch == null)     return thenBranch.getType();
    PsiType thenType=thenBranch.getType();
    PsiType elseType=elseBranch.getType();
    if (thenType == null || elseType == null)     return elseType;
    if (elseType.equals(thenType))     return thenType;
    return GenericsUtil.getLeastUpperBound(thenType,elseType,getManager());
  }
  return null;
}
