{
  res.add(0,atCaret);
  if (doNotStepInto(atCaret)) {
    if (!recurse)     return;
    recurse=false;
  }
  final PsiElement[] children=atCaret.getChildren();
  for (  PsiElement child : children) {
    if (atCaret instanceof PsiStatement && child instanceof PsiStatement)     continue;
    collectAllElements(child,res,recurse);
  }
}
