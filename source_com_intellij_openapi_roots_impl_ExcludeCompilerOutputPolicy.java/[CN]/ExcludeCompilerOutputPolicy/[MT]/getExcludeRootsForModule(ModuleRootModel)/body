{
  ArrayList<VirtualFilePointer> result=new ArrayList<VirtualFilePointer>();
  final CompilerModuleExtension extension=rootModel.getModuleExtension(CompilerModuleExtension.class);
  if (extension == null) {
    return VirtualFilePointer.EMPTY_ARRAY;
  }
  if (extension.isCompilerOutputPathInherited()) {
    result.add(CompilerProjectExtension.getInstance(myProject).getCompilerOutputPointer());
  }
 else {
    if (!extension.isExcludeOutput())     return VirtualFilePointer.EMPTY_ARRAY;
    final VirtualFilePointer outputPath=extension.getCompilerOutputPointer();
    if (outputPath != null)     result.add(outputPath);
    final VirtualFilePointer outputPathForTests=extension.getCompilerOutputForTestsPointer();
    if (outputPathForTests != null)     result.add(outputPathForTests);
  }
  return result.isEmpty() ? VirtualFilePointer.EMPTY_ARRAY : result.toArray(new VirtualFilePointer[result.size()]);
}
