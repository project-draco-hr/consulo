{
  FileType type=content.getContentType();
  VirtualFile file=content.getHighlightFile();
  Language language=content.getUserData(DiffUserDataKeys.LANGUAGE);
  EditorHighlighterFactory highlighterFactory=EditorHighlighterFactory.getInstance();
  if (language != null) {
    SyntaxHighlighter syntaxHighlighter=SyntaxHighlighterFactory.getSyntaxHighlighter(language,project,file);
    return highlighterFactory.createEditorHighlighter(syntaxHighlighter,EditorColorsManager.getInstance().getGlobalScheme());
  }
  if (file != null) {
    if ((type == null || type == PlainTextFileType.INSTANCE) || file.getFileType() == type || file instanceof LightVirtualFile) {
      return highlighterFactory.createEditorHighlighter(project,file);
    }
  }
  if (type != null) {
    return highlighterFactory.createEditorHighlighter(project,type);
  }
  return null;
}
