{
  if (end <= changeStart) {
    return new UpdatedLineRange(start,end,false);
  }
  if (start >= changeEnd) {
    return new UpdatedLineRange(start + shift,end + shift,false);
  }
  if (start <= changeStart && end >= changeEnd) {
    return new UpdatedLineRange(start,end + shift,false);
  }
  int newChangeEnd=changeEnd + shift;
  if (start >= changeStart && end <= changeEnd) {
    return greedy ? new UpdatedLineRange(changeStart,newChangeEnd,true) : new UpdatedLineRange(newChangeEnd,newChangeEnd,true);
  }
  if (start < changeStart) {
    return greedy ? new UpdatedLineRange(start,newChangeEnd,true) : new UpdatedLineRange(start,changeStart,true);
  }
 else {
    return greedy ? new UpdatedLineRange(changeStart,end + shift,true) : new UpdatedLineRange(newChangeEnd,end + shift,true);
  }
}
