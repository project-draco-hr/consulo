{
  indicator.checkCanceled();
  List<LineFragment> fragments;
  if (config.innerFragments) {
    fragments=ComparisonManager.getInstance().compareLinesInner(text1,text2,config.policy,indicator);
  }
 else {
    fragments=ComparisonManager.getInstance().compareLines(text1,text2,config.policy,indicator);
  }
  indicator.checkCanceled();
  return ComparisonManager.getInstance().processBlocks(fragments,text1,text2,config.policy,config.squashFragments,config.trimFragments);
}
