{
  LineFragmentCache oldCache=request.getUserData(DiffUserDataKeysEx.LINE_FRAGMENT_CACHE);
  LineFragmentCache cache;
  if (oldCache == null || !oldCache.checkStamps(stamp1,stamp2)) {
    cache=new LineFragmentCache(stamp1,stamp2);
  }
 else {
    cache=new LineFragmentCache(oldCache);
  }
  cache.putData(config.policy,fragments,isInnerFragments);
  request.putUserData(DiffUserDataKeysEx.LINE_FRAGMENT_CACHE,cache);
}
