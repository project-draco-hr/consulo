{
  CommandProcessor.getInstance().executeCommand(getProject(),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        @Override public void run(){
          String oldText=myDummyFile.getText();
          String expectedNewText=oldText.substring(0,myInsertOffset) + s + oldText.substring(myInsertOffset);
          try {
            doReparseAndCheck(s,expectedNewText,0);
          }
 catch (          IncorrectOperationException e) {
            LOGGER.error(e);
          }
          myInsertOffset+=s.length();
        }
      }
);
    }
  }
,"asd",null);
}
