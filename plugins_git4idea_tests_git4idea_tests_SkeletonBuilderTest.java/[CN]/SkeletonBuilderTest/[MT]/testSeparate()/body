{
  final List<CommitHashPlusParents> list=read("1\n2\n3\n4\n5");
  final SkeletonBuilder builder=new SkeletonBuilder(2,2);
  for (  CommitHashPlusParents commitHashPlusParents : list) {
    builder.consume(commitHashPlusParents);
  }
  builder.finished();
  final TreeSkeleton result=builder.getResult();
  for (int i=0; i < 5; i++) {
    final TreeSkeletonImpl.Commit commit=(TreeSkeletonImpl.Commit)result.get(i);
    Assert.assertEquals("" + (i + 1),new String(commit.getHash()));
    Assert.assertEquals(0,commit.getWireNumber());
  }
  final Iterator<TreeSkeletonImpl.WireEvent> iterator=result.createWireEventsIterator(0);
  for (int i=0; i < 5; i++) {
    final TreeSkeletonImpl.WireEvent we=iterator.next();
    Assert.assertEquals(true,we.isEnd());
    Assert.assertEquals(true,we.isStart());
    Assert.assertEquals(i,we.getCommitIdx());
  }
  assertWires(result.getUsedWires(0).getUsed());
  assertWires(result.getUsedWires(1).getUsed());
  assertWires(result.getUsedWires(2).getUsed());
  assertWires(result.getUsedWires(3).getUsed());
  assertWires(result.getUsedWires(4).getUsed());
  final Iterator<TreeSkeletonImpl.WireEvent> iterator2=result.createWireEventsIterator(4);
  for (int i=4; i < 5; i++) {
    final TreeSkeletonImpl.WireEvent we=iterator2.next();
    Assert.assertEquals(true,we.isEnd());
    Assert.assertEquals(true,we.isStart());
    Assert.assertEquals(i,we.getCommitIdx());
  }
  final Iterator<TreeSkeletonImpl.WireEvent> iterator3=result.createWireEventsIterator(2);
  for (int i=2; i < 5; i++) {
    final TreeSkeletonImpl.WireEvent we=iterator3.next();
    Assert.assertEquals(true,we.isEnd());
    Assert.assertEquals(true,we.isStart());
    Assert.assertEquals(i,we.getCommitIdx());
  }
}
