{
  int childCount=apacheNode.jjtGetNumChildren();
  for (int i=0; i < childCount; i++) {
    Node apacheChild=apacheNode.jjtGetChild(i);
    collectAttributes(referenced,defined,apacheChild,properties,includeDummies);
    if (apacheChild instanceof ASTReference) {
      ASTReference apacheReference=(ASTReference)apacheChild;
      String s=apacheReference.literal();
      s=referenceToAttribute(s,includeDummies);
      if (s != null && s.length() > 0 && properties.getProperty(s) == null) {
        referenced.add(s);
      }
    }
 else     if (apacheChild instanceof ASTSetDirective) {
      ASTReference lhs=(ASTReference)apacheChild.jjtGetChild(0);
      String attr=referenceToAttribute(lhs.literal(),false);
      if (attr != null) {
        defined.add(attr);
      }
    }
  }
}
