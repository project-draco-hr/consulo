{
  super.init(configuration);
  File modifiedPatternsPath=new File(PathManager.getConfigPath());
  modifiedPatternsPath=new File(modifiedPatternsPath,INCLUDES_PATH);
  try {
    Field pathsField=FileResourceLoader.class.getDeclaredField("paths");
    pathsField.setAccessible(true);
    Collection<String> paths=(Collection)pathsField.get(this);
    paths.clear();
    paths.add(modifiedPatternsPath.getAbsolutePath());
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      for (      PathManagerEx.TestDataLookupStrategy strategy : ar(PathManagerEx.TestDataLookupStrategy.COMMUNITY_FROM_ULTIMATE,PathManagerEx.TestDataLookupStrategy.COMMUNITY)) {
        File testsDir=new File(new File(PathManagerEx.getTestDataPath(strategy),"ide"),"fileTemplates");
        paths.add(testsDir.getAbsolutePath());
      }
    }
  }
 catch (  Exception e) {
    LOG.error(e);
    throw new RuntimeException(e);
  }
}
