{
  final JavaPsiFacade manager=getJavaFacade();
  final PsiClass aClass=manager.findClass(myInnerClassName,GlobalSearchScope.moduleScope(myModule));
  final MoveInnerProcessor moveInnerProcessor=new MoveInnerProcessor(myProject,null);
  final PsiElement targetContainer=myPackageName != null ? findDirectory(myPackageName) : MoveInnerImpl.getTargetContainer(aClass,false);
  assertNotNull(targetContainer);
  moveInnerProcessor.setup(aClass,myNewClassName,isPassOuterClass(),myParameterName,mySearchInComments,mySearchInNonJava,targetContainer);
  moveInnerProcessor.run();
  PostprocessReformattingAspect.getInstance(getProject()).doPostponedFormatting();
  PsiDocumentManager.getInstance(myProject).commitAllDocuments();
  FileDocumentManager.getInstance().saveAllDocuments();
}
