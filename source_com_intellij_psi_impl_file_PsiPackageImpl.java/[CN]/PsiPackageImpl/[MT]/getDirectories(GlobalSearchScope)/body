{
  final List<PsiDirectory> result=new ArrayList<PsiDirectory>();
  final Collection<PsiDirectory> directories=getAllDirectories();
  for (  final PsiDirectory directory : directories) {
    if (scope.contains(directory.getVirtualFile())) {
      result.add(directory);
    }
  }
  return result.toArray(new PsiDirectory[result.size()]);
}
