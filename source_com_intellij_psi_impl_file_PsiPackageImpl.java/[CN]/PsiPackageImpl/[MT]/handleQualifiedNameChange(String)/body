{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  final String oldQualifedName=myQualifiedName;
  final boolean anyChanged=changePackagePrefixes(oldQualifedName,newQualifiedName);
  if (anyChanged) {
    UndoManager.getInstance(myManager.getProject()).undoableActionPerformed(new UndoableAction(){
      public void undo() throws UnexpectedUndoException {
        changePackagePrefixes(newQualifiedName,oldQualifedName);
      }
      public void redo() throws UnexpectedUndoException {
        changePackagePrefixes(oldQualifedName,newQualifiedName);
      }
      public DocumentReference[] getAffectedDocuments(){
        return new DocumentReference[0];
      }
      public boolean isComplex(){
        return true;
      }
    }
);
  }
}
