{
  myProcessor=processor;
  myDirectoryFilter=directoryFilter;
  final ProjectLevelVcsManager plVcsManager=ProjectLevelVcsManager.getInstance(project);
  final AbstractVcs vcs=plVcsManager.getVcsFor(root);
  myRootPresentFilter=(vcs == null) ? null : new MyRootFilter(root,vcs.getName());
  myExcludedFileIndex=PeriodicalTasksCloser.getInstance().safeGetService(project,ExcludedFileIndex.class);
  myQueue=new LinkedList<VirtualFile>();
  myQueue.add(root);
}
