{
  TaskRepository repository=new YouTrackRepository();
  String format="foo \n bar";
  repository.setCommitMessageFormat(format);
  myManager.setRepositories(Collections.singletonList(repository));
  TaskManagerImpl.Config config=myManager.getState();
  Element element=XmlSerializer.serialize(config);
  ByteArrayOutputStream stream=new ByteArrayOutputStream();
  JDOMUtil.writeDocument(new Document(element),stream,"\n");
  Document document=JDOMUtil.loadDocument(new ByteArrayInputStream(stream.toByteArray()));
  TaskManagerImpl.Config deserialize=XmlSerializer.deserialize(document,TaskManagerImpl.Config.class);
  myManager.loadState(deserialize);
  TaskRepository[] repositories=myManager.getAllRepositories();
  assertEquals(format,repositories[0].getCommitMessageFormat());
}
