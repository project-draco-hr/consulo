{
  try {
    VirtualFile modulePom=createModulePom();
    MavenId id=MavenDomUtil.describe(myPsiFile);
    String groupId=id.getGroupId() == null ? "groupId" : id.getGroupId();
    String artifactId=modulePom.getParent().getName();
    String version=id.getVersion() == null ? "version" : id.getVersion();
    MavenUtil.runOrApplyMavenProjectFileTemplate(project,modulePom,new MavenId(groupId,artifactId,version),myWithParent ? id : null,myPsiFile.getVirtualFile(),true);
  }
 catch (  IOException e) {
    MavenUtil.showError(project,"Cannot create a module",e);
  }
}
