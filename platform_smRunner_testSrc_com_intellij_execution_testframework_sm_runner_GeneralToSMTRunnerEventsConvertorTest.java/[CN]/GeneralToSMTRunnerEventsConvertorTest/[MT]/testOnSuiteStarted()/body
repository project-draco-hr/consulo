{
  onTestSuiteStarted("suite1");
  onTestStarted("test1");
  final SMTestProxy test1=myEventsProcessor.getProxyByFullTestName(myEventsProcessor.getFullTestName("test1"));
  assertEquals("suite1",test1.getParent().getName());
  onTestSuiteStarted("suite2");
  onTestSuiteStarted("suite3");
  onTestStarted("test2");
  final SMTestProxy test2=myEventsProcessor.getProxyByFullTestName(myEventsProcessor.getFullTestName("test2"));
  assertEquals("suite3",test2.getParent().getName());
  assertEquals("suite2",test2.getParent().getParent().getName());
  myEventsProcessor.onTestFinished(new TestFinishedEvent("test2",10));
  myEventsProcessor.onSuiteFinished(new TestSuiteFinishedEvent("suite3"));
  onTestStarted("test3");
  final SMTestProxy test3=myEventsProcessor.getProxyByFullTestName(myEventsProcessor.getFullTestName("test3"));
  assertEquals("suite2",test3.getParent().getName());
  myEventsProcessor.onSuiteFinished(new TestSuiteFinishedEvent("suite2"));
  myEventsProcessor.onSuiteFinished(new TestSuiteFinishedEvent("suite1"));
}
