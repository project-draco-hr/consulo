{
  final PsiElement loopForLoopCondition=RefactoringUtil.getLoopForLoopCondition(occurence);
  if (loopForLoopCondition == null)   return;
  final List<PsiVariable> referencedVariables=RefactoringUtil.collectReferencedVariables(occurence);
  final List<PsiVariable> modifiedInBody=new ArrayList<PsiVariable>();
  for (  PsiVariable psiVariable : referencedVariables) {
    if (RefactoringUtil.isModifiedInScope(psiVariable,loopForLoopCondition)) {
      modifiedInBody.add(psiVariable);
    }
  }
  if (!modifiedInBody.isEmpty()) {
    for (    PsiVariable variable : modifiedInBody) {
      final String message=RefactoringBundle.message("is.modified.in.loop.body",RefactoringUIUtil.getDescription(variable,false));
      conflicts.add(ConflictsUtil.capitalize(message));
    }
    conflicts.add(RefactoringBundle.message("introducing.variable.may.break.code.logic"));
  }
}
