{
  if (dataContext instanceof MyDataContext || dataContext.getData(INVOKING_DEFAULT) != null) {
    LOG.error("Recursive invokation: " + dataContext);
    RenameHandlerRegistry.getInstance().getRenameHandler(dataContext).invoke(elementToRename.getProject(),editor,elementToRename.getContainingFile(),dataContext);
    return;
  }
  final boolean startedRename=new VariableInplaceRenamer((PsiNameIdentifierOwner)elementToRename,editor).performInplaceRename();
  if (!startedRename) {
    DataContext ourDataContext=new MyDataContext(dataContext);
    RenameHandlerRegistry.getInstance().getRenameHandler(ourDataContext).invoke(elementToRename.getProject(),editor,elementToRename.getContainingFile(),ourDataContext);
  }
}
