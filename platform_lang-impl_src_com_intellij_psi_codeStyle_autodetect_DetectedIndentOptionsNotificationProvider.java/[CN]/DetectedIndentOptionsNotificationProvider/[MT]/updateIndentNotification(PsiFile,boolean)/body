{
  VirtualFile vFile=file.getVirtualFile();
  if (vFile == null)   return;
  if (!ApplicationManager.getApplication().isHeadlessEnvironment() || ApplicationManager.getApplication().isUnitTestMode() && myShowNotificationInTest) {
    Project project=file.getProject();
    FileEditorManager fileEditorManager=FileEditorManager.getInstance(project);
    if (fileEditorManager == null)     return;
    FileEditor fileEditor=fileEditorManager.getSelectedEditor(vFile);
    if (fileEditor != null) {
      Boolean notifiedFlag=fileEditor.getUserData(NOTIFIED_FLAG);
      if (notifiedFlag == null || enforce) {
        fileEditor.putUserData(NOTIFIED_FLAG,Boolean.TRUE);
        EditorNotifications.getInstance(project).updateNotifications(vFile);
      }
    }
  }
}
