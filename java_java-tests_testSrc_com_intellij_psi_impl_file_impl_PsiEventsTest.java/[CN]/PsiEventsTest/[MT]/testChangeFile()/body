{
  FileManager fileManager=myPsiManager.getFileManager();
  VirtualFile file=myPrjDir1.createChildData(null,"a.txt");
  VfsUtil.saveText(file,"aaa");
  PsiFile psiFile=fileManager.findFile(file);
  psiFile.getText();
  EventsTestListener listener=new EventsTestListener();
  myPsiManager.addPsiTreeChangeListener(listener,getTestRootDisposable());
  VfsUtil.saveText(file,"bbb");
  PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
  assertEquals("beforeChildrenChange\n" + "beforeChildReplacement\n" + "childReplaced\n"+ "childrenChanged\n",listener.getEventsString());
}
