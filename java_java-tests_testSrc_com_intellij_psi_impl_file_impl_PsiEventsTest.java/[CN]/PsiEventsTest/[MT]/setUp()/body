{
  super.setUp();
  final File root=FileUtil.createTempFile(getName(),"");
  root.delete();
  root.mkdir();
  myFilesToDelete.add(root);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      try {
        VirtualFile rootVFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(root);
        myPrjDir1=rootVFile.createChildDirectory(null,"prj1");
        mySrcDir1=myPrjDir1.createChildDirectory(null,"src1");
        mySrcDir2=myPrjDir1.createChildDirectory(null,"src2");
        myPrjDir2=rootVFile.createChildDirectory(null,"prj2");
        mySrcDir3=myPrjDir2;
        myClsDir1=myPrjDir1.createChildDirectory(null,"cls1");
        myExcludedDir1=mySrcDir1.createChildDirectory(null,"excluded");
        PsiTestUtil.addContentRoot(myModule,myPrjDir1);
        PsiTestUtil.addSourceRoot(myModule,mySrcDir1);
        PsiTestUtil.addSourceRoot(myModule,mySrcDir2);
        PsiTestUtil.addContentRoot(myModule,myPrjDir2);
        PsiTestUtil.addExcludedRoot(myModule,myExcludedDir1);
        ModuleRootModificationUtil.addModuleLibrary(myModule,myClsDir1.getUrl());
        PsiTestUtil.addSourceRoot(myModule,mySrcDir3);
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
);
}
