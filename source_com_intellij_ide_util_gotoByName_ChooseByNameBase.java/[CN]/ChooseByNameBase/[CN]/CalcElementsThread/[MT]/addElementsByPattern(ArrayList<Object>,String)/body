{
  ArrayList<String> namesList=new ArrayList<String>();
  boolean ov=getNamesByPattern(myCheckboxState,myCancelled,namesList,pattern);
  if (myCancelled[0])   throw new ProcessCanceledException();
  Collections.sort(namesList,UCS_COMPARATOR);
  All:   for (int i=0; i < namesList.size(); i++) {
    if (myCancelled[0])     throw new ProcessCanceledException();
    final Object o=namesList.get(i);
    final String name=(String)o;
    final Object[] elements=myModel.getElementsByName(name,myCheckboxState);
    for (int j=0; j < elements.length; j++) {
      final Object element=elements[j];
      elementsArray.add(element);
      if (elementsArray.size() >= myMaximumListSizeLimit) {
        ov=true;
        break All;
      }
    }
  }
  if (ov) {
    elementsArray.add(OUR_EXTRA_ELEMENT);
  }
}
