{
  if (dataId.equals(DataConstants.PSI_ELEMENT)) {
    Object element=getChosenElement();
    if (element instanceof PsiElement) {
      return element;
    }
  }
 else   if (dataId.equals(DataConstantsEx.PSI_ELEMENT_ARRAY)) {
    List<PsiElement> result=new ArrayList<PsiElement>();
    final Object[] chosenElements=getChosenElements();
    for (    Object element : chosenElements) {
      if (element instanceof PsiElement) {
        result.add((PsiElement)element);
      }
    }
    return result.toArray(new PsiElement[result.size()]);
  }
  return null;
}
