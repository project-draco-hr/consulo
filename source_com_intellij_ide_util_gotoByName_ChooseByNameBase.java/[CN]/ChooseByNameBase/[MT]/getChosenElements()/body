{
  if (myListIsUpToDate) {
    final List<Object> values=new ArrayList<Object>(Arrays.asList(myList.getSelectedValues()));
    values.remove(OUR_EXTRA_ELEMENT);
    return values.toArray(new Object[values.size()]);
  }
  final String text=myTextField.getText();
  final boolean checkBoxState=myCheckBox.isSelected();
  ensureNamesLoaded(checkBoxState);
  final String[] names=checkBoxState ? myNames[1] : myNames[0];
  Object uniqueElement=null;
  for (int i=0; names != null && i < names.length; i++) {
    final String name=names[i];
    if (name.equalsIgnoreCase(text)) {
      final Object[] elements=myModel.getElementsByName(name,checkBoxState);
      if (elements.length > 1)       return null;
      if (elements.length == 0)       continue;
      if (uniqueElement != null)       return null;
      uniqueElement=elements[0];
    }
  }
  return uniqueElement == null ? ArrayUtil.EMPTY_OBJECT_ARRAY : new Object[]{uniqueElement};
}
