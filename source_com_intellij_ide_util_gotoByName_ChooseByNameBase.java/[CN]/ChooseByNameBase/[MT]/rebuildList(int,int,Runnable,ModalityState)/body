{
  myListIsUpToDate=false;
  myAlarm.cancelAllRequests();
  choosenElementMightChange();
  tryToCancel();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      final String text=myTextField.getText();
      if (!isShowListForEmptyPattern() && (text == null || text.trim().length() == 0)) {
        myListModel.clear();
        hideList();
        return;
      }
      final Runnable request=new Runnable(){
        public void run(){
          final Runnable request=this;
          LOG.info("Rebuild " + hashCode() + " started");
          final CalcElementsCallback callback=new CalcElementsCallback(){
            public void run(            final ArrayList<?> elements){
synchronized (myRebuildMutex) {
                LOG.info("Rebuild callback " + hashCode() + " of "+ request.hashCode()+ " started");
                ApplicationManager.getApplication().assertIsDispatchThread();
                if (myDisposedFlag) {
                  LOG.info("Rebuild callback " + hashCode() + " of "+ request.hashCode()+ " disposed");
                  return;
                }
                setElementsToList(pos,elements);
                myListIsUpToDate=true;
                choosenElementMightChange();
                if (postRunnable != null) {
                  postRunnable.run();
                }
                LOG.info("Rebuild callback " + hashCode() + " of "+ request.hashCode()+ " finished");
              }
            }
          }
;
          tryToCancel();
          myCalcElementsThread=new CalcElementsThread(text,myCheckBox.isSelected(),callback,modalityState);
          myCalcElementsThread.setCanCancel(postRunnable == null);
          myCalcElementsThread.start();
        }
      }
;
      if (delay > 0) {
        LOG.info("Rebuild " + this + " posted with delay "+ delay,new Throwable());
        myAlarm.addRequest(request,delay);
      }
 else {
        LOG.info("Rebuild " + this + " posted",new Throwable());
        request.run();
      }
    }
  }
,modalityState);
}
