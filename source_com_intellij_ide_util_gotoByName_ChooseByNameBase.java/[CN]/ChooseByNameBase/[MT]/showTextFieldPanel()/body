{
  final JLayeredPane layeredPane=getLayeredPane();
  final Dimension preferredTextFieldPanelSize=myTextFieldPanel.getPreferredSize();
  final int x=(layeredPane.getWidth() - preferredTextFieldPanelSize.width) / 2;
  final int paneHeight=layeredPane.getHeight();
  final int y=paneHeight / 3 - preferredTextFieldPanelSize.height / 2;
  myTextFieldPanel.setBounds(x,y,preferredTextFieldPanelSize.width,preferredTextFieldPanelSize.height);
  layeredPane.add(myTextFieldPanel,new Integer(500));
  layeredPane.moveToFront(myTextFieldPanel);
  VISIBLE_LIST_SIZE_LIMIT=Math.max(10,(paneHeight - (y + preferredTextFieldPanelSize.height)) / (preferredTextFieldPanelSize.height / 2) - 1);
  myTextFieldPanel.registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      doClose(false);
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  myList.registerKeyboardAction(new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      doClose(false);
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
  if (myTextField.requestFocusInWindow() || SystemInfo.isMac) {
    myTextField.requestFocus();
  }
  myTextFieldPanel.validate();
  myTextFieldPanel.paintImmediately(0,0,myTextFieldPanel.getWidth(),myTextFieldPanel.getHeight());
}
