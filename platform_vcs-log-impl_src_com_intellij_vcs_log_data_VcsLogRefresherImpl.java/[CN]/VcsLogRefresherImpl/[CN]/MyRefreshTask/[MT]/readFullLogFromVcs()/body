{
  final StopWatch sw=StopWatch.start("read full log from VCS");
  final LogInfo logInfo=new LogInfo();
  new ProviderIterator(){
    @Override void each(    @NotNull VirtualFile root,    @NotNull VcsLogProvider provider) throws VcsException {
      final List<GraphCommit<Integer>> graphCommits=ContainerUtil.newArrayList();
      VcsLogProvider.LogData data=provider.readAllHashes(root,new Consumer<TimedVcsCommit>(){
        @Override public void consume(        @NotNull TimedVcsCommit commit){
          graphCommits.add(compactCommit(commit));
        }
      }
);
      logInfo.put(root,graphCommits);
      logInfo.put(root,data.getRefs());
      myUserRegistry.addUsers(data.getUsers());
      sw.rootCompleted(root);
    }
  }
.iterate(myProviders);
  myUserRegistry.flush();
  sw.report();
  return logInfo;
}
