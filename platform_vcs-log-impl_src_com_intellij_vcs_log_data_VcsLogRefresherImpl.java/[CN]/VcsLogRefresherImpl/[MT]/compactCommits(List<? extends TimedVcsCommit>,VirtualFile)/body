{
  StopWatch sw=StopWatch.start("compacting commits");
  List<GraphCommit<Integer>> map=ContainerUtil.map(commits,new Function<TimedVcsCommit,GraphCommit<Integer>>(){
    @NotNull @Override public GraphCommit<Integer> fun(    @NotNull TimedVcsCommit commit){
      return compactCommit(commit,root);
    }
  }
);
  myHashMap.flush();
  sw.report();
  return map;
}
