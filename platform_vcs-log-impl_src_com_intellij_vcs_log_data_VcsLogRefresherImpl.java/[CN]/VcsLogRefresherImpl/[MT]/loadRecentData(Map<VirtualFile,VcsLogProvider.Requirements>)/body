{
  final StopWatch sw=StopWatch.start("loading commits");
  final LogInfo logInfo=new LogInfo();
  new ProviderIterator(){
    @Override public void each(    @NotNull VirtualFile root,    @NotNull VcsLogProvider provider) throws VcsException {
      VcsLogProvider.DetailedLogData data=provider.readFirstBlock(root,requirements.get(root));
      storeUsersAndDetails(data.getCommits());
      logInfo.put(root,compactCommits(data.getCommits()));
      logInfo.put(root,data.getRefs());
      sw.rootCompleted(root);
    }
  }
.iterate(getProvidersForRoots(requirements.keySet()));
  myUserRegistry.flush();
  sw.report();
  return logInfo;
}
