{
  String command=getCommandText(project,editor);
  if (StringUtil.isEmptyOrSpaces(command))   return;
  String profile=getProfileText(file);
  RunContentDescriptor descriptor=getConsoleView(project,file);
  ConsoleViewImpl consoleView=(ConsoleViewImpl)descriptor.getExecutionConsole();
  prepareEngine(project,engine,descriptor);
  try {
    long ts=System.currentTimeMillis();
    consoleView.print("> " + command,ConsoleViewContentType.USER_INPUT);
    consoleView.print("\n",ConsoleViewContentType.USER_INPUT);
    String script=profile == null ? command : profile + "\n" + command;
    Object o=engine.eval(script);
    String prefix="[" + (StringUtil.formatDuration(System.currentTimeMillis() - ts)) + "]";
    consoleView.print(prefix + "=> " + o,ConsoleViewContentType.NORMAL_OUTPUT);
    consoleView.print("\n",ConsoleViewContentType.NORMAL_OUTPUT);
  }
 catch (  Throwable e) {
    Throwable ex=ExceptionUtil.getRootCause(e);
    consoleView.print(ex.getClass().getSimpleName() + ": " + ex.getMessage(),ConsoleViewContentType.ERROR_OUTPUT);
    consoleView.print("\n",ConsoleViewContentType.ERROR_OUTPUT);
  }
  selectContent(descriptor);
}
