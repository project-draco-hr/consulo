{
  AbstractButton button=(AbstractButton)c;
  ButtonModel model=button.getModel();
  if (model.isEnabled()) {
    FontMetrics metrics=SwingUtilities2.getFontMetrics(c,g);
    int mnemonicIndex=button.getDisplayedMnemonicIndex();
    Color fg=button.getForeground();
    if (fg instanceof UIResource && button instanceof JButton && ((JButton)button).isDefaultButton()) {
      final Color selectedFg=UIManager.getColor("Button.selectedButtonForeground");
      if (selectedFg != null) {
        fg=selectedFg;
      }
    }
    g.setColor(fg);
    SwingUtilities2.drawStringUnderlineCharAt(c,g,text,mnemonicIndex,textRect.x + getTextShiftOffset(),textRect.y + metrics.getAscent() + getTextShiftOffset());
  }
 else {
    super.paintText(g,c,textRect,text);
  }
}
