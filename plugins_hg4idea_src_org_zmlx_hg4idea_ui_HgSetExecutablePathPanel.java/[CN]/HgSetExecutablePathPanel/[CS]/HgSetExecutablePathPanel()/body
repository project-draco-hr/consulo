{
  FileChooserDescriptor descriptor=new FileChooserDescriptor(true,false,false,false,false,false){
    public void validateSelectedFiles(    VirtualFile[] files) throws Exception {
      HgVersionCommand command=new HgVersionCommand();
      String path=files[0].getPath();
      if (!command.isValid(path)) {
        throw new ConfigurationException(HgVcsMessages.message("hg4idea.configuration.executable.error",path));
      }
      for (      ActionListener okListener : okListeners) {
        okListener.actionPerformed(null);
      }
    }
  }
;
  addBrowseFolderListener(HgVcsMessages.message("hg4idea.configuration.title"),HgVcsMessages.message("hg4idea.configuration.description"),null,descriptor);
}
