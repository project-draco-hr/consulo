{
  Element element=new Element("PropertiesSeparatorManager");
  for (  VirtualFile file : mySeparators.keySet()) {
    String url;
    if (file instanceof ResourceBundleAsVirtualFile) {
      ResourceBundle resourceBundle=((ResourceBundleAsVirtualFile)file).getResourceBundle();
      url=((ResourceBundleImpl)resourceBundle).getUrl();
    }
 else {
      url=file.getUrl();
    }
    String separator=mySeparators.get(file);
    StringBuilder encoded=new StringBuilder(separator.length());
    for (int i=0; i < separator.length(); i++) {
      char c=separator.charAt(i);
      encoded.append("\\u");
      encoded.append(Character.forDigit(c >> 12,16));
      encoded.append(Character.forDigit((c >> 8) & 0xf,16));
      encoded.append(Character.forDigit((c >> 4) & 0xf,16));
      encoded.append(Character.forDigit(c & 0xf,16));
    }
    Element fileElement=new Element(FILE_ELEMENT);
    fileElement.setAttribute(URL_ELEMENT,url);
    fileElement.setAttribute(SEPARATOR_ATTR,encoded.toString());
    element.addContent(fileElement);
  }
  return element;
}
