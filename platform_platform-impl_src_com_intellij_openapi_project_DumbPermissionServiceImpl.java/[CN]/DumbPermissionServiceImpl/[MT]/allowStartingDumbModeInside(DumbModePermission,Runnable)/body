{
  ModalityState modality=ModalityState.defaultModalityState();
  DumbModePermission prev=myPermissions.put(modality,permission);
  try {
    runnable.run();
  }
  finally {
    if (prev == null) {
      myPermissions.remove(modality);
    }
 else {
      myPermissions.put(modality,prev);
    }
  }
}
