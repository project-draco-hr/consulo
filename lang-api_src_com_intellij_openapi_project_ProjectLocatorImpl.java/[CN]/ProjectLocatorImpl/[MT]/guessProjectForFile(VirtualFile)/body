{
  ProjectManager projectManager=ProjectManager.getInstance();
  if (projectManager == null)   return null;
  final Project[] projects=projectManager.getOpenProjects();
  if (projects.length == 1)   return projects[0];
  for (  Project project : projects) {
    if (ProjectRootManager.getInstance(project).getFileIndex().isInContent(file)) {
      return project;
    }
  }
  return projects.length == 0 ? null : projects[0];
}
