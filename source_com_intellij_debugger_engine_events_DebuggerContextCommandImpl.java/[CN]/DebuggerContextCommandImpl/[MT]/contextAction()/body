{
  final SuspendManager suspendManager=myDebuggerContext.getDebugProcess().getSuspendManager();
  final ThreadReferenceProxyImpl debuggerContextThread=myDebuggerContext.getThreadProxy();
  if (suspendManager.isSuspended(debuggerContextThread)) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Context thread " + getSuspendContext().getThread());
      LOG.debug("Debug thread" + debuggerContextThread);
    }
    threadAction();
  }
 else {
    SuspendContextImpl suspendContextForThread=SuspendManagerUtil.findContextByThread(suspendManager,debuggerContextThread);
    if (suspendContextForThread != null) {
      SuspendManagerUtil.postponeCommand(suspendContextForThread,this);
    }
 else {
      notifyCancelled();
    }
  }
}
