{
  final SuspendManager suspendManager=myDebuggerContext.getDebugProcess().getSuspendManager();
  Set<SuspendContextImpl> suspendingContexts=SuspendManagerUtil.getSuspendingContexts(suspendManager,myDebuggerContext.getThreadProxy());
  if (suspendingContexts.isEmpty()) {
    SuspendContextImpl threadContext=SuspendManagerUtil.findContextByThread(suspendManager,myDebuggerContext.getThreadProxy());
    if (threadContext != null) {
      SuspendManagerUtil.postponeCommand(threadContext,this);
    }
 else {
      notifyCancelled();
    }
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Context thread " + getSuspendContext().getThread());
      LOG.debug("Debug thread" + myDebuggerContext.getThreadProxy());
    }
    threadAction();
  }
}
