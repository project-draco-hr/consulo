{
  final SuspendManager suspendManager=myDebuggerContext.getDebugProcess().getSuspendManager();
  if (SuspendManagerUtil.hasSuspendingContexts(suspendManager,myDebuggerContext.getThreadProxy())) {
    final SuspendContextImpl suspendContext=getSuspendContext();
    if (!suspendContext.isResumed()) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Context thread " + suspendContext.getThread());
        LOG.debug("Debug thread" + myDebuggerContext.getThreadProxy());
      }
      threadAction();
    }
  }
 else {
    SuspendContextImpl threadContext=SuspendManagerUtil.findContextByThread(suspendManager,myDebuggerContext.getThreadProxy());
    if (threadContext != null) {
      SuspendManagerUtil.postponeCommand(threadContext,this);
    }
 else {
      notifyCancelled();
    }
  }
}
