{
  startElement(statement);
  int pc=myCurrentFlow.getSize();
  PsiElement[] elements=statement.getDeclaredElements();
  for (  PsiElement element : elements) {
    ProgressManager.getInstance().checkCanceled();
    if (element instanceof PsiClass) {
      element.accept(this);
    }
 else     if (element instanceof PsiVariable) {
      PsiExpression initializer=((PsiVariable)element).getInitializer();
      if (initializer != null) {
        myStartStatementStack.pushStatement(initializer,false);
        myEndStatementStack.pushStatement(initializer,false);
        initializer.accept(this);
        myStartStatementStack.popStatement();
        myEndStatementStack.popStatement();
      }
      if (element instanceof PsiLocalVariable && initializer != null || element instanceof PsiField) {
        if (element instanceof PsiLocalVariable && !myPolicy.isLocalVariableAccepted((PsiLocalVariable)element))         continue;
        if (myAssignmentTargetsAreElements) {
          startElement(element);
        }
        generateWriteInstruction((PsiVariable)element);
        if (myAssignmentTargetsAreElements) {
          finishElement(element);
        }
      }
    }
  }
  if (pc == myCurrentFlow.getSize()) {
    emitEmptyInstruction();
  }
  finishElement(statement);
}
