{
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (myFakeDialog != null) {
        myFakeDialog.dispose();
        myFakeDialog=null;
      }
    }
  }
);
  final List<VirtualFile> resultFiles=new ArrayList<VirtualFile>();
  if (result != null && OK == result.intValue()) {
    ID fileNamesArray=invoke(panel,"filenames");
    ID enumerator=invoke(fileNamesArray,"objectEnumerator");
    while (true) {
      final ID filename=invoke(enumerator,"nextObject");
      if (filename == null || 0 == filename.intValue())       break;
      String s=Foundation.toStringViaUTF8(filename);
      if (s != null) {
        VirtualFile virtualFile=LocalFileSystem.getInstance().findFileByPath(s);
        if (virtualFile != null && virtualFile.isValid())         resultFiles.add(virtualFile);
      }
    }
    myResultFiles=resultFiles;
  }
}
