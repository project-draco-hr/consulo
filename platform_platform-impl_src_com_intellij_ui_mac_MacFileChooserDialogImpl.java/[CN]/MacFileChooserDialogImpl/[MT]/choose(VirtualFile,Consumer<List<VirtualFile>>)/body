{
  ExtensionsInitializer.initialize();
  myCallback=callback;
  myModalityState=ModalityState.current();
  final VirtualFile lastOpenedFile=FileChooserUtil.getLastOpenedFile(myProject);
  final VirtualFile selectFile=FileChooserUtil.getFileToSelect(myChooserDescriptor,myProject,toSelect,lastOpenedFile);
  final String selectPath=selectFile != null ? FileUtil.toSystemDependentName(selectFile.getPath()) : null;
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      showNativeChooserAsSheet(MacFileChooserDialogImpl.this,selectPath);
    }
  }
);
}
