{
  MacFileChooserDialogImpl dialog=ourImplMap.get(self);
  if (dialog == null) {
    return true;
  }
  if (url == null || url.intValue() == 0) {
    return false;
  }
  ID filename=Foundation.invoke(url,"path");
  String fileName=Foundation.toStringViaUTF8(filename);
  if (fileName == null) {
    return false;
  }
  VirtualFile file=LocalFileSystem.getInstance().findFileByPath(fileName);
  return file == null || (!checkDirectories && file.isDirectory()) || dialog.myChooserDescriptor.isFileSelectable(file);
}
