{
  final ID autoReleasePool=createAutoReleasePool();
  try {
    final ID delegate=invoke(Foundation.getClass("NSOpenPanelDelegate_"),"new");
    final Pointer select=toSelect == null ? null : Foundation.cfString(toSelect.getPath());
    Foundation.cfRetain(delegate);
    invoke(delegate,"performSelectorOnMainThread:withObject:waitUntilDone:",Foundation.createSelector("showOpenPanel:"),select,false);
  }
  finally {
    invoke(autoReleasePool,"release");
  }
}
