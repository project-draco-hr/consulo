{
  final IdeMenuBar bar=getMenuBar();
  if (bar != null) {
    bar.disableUpdates();
  }
  final ID autoReleasePool=createAutoReleasePool();
  try {
    final ID delegate=invoke(Foundation.getObjcClass("NSOpenPanelDelegate_"),"new");
    Foundation.cfRetain(delegate);
    ourImplMap.put(delegate,impl);
    final ID select=toSelect == null ? null : Foundation.nsString(toSelect);
    invoke(delegate,"performSelectorOnMainThread:withObject:waitUntilDone:",Foundation.createSelector("showOpenPanel:"),select,false);
  }
  finally {
    invoke(autoReleasePool,"release");
  }
}
