{
  myTextAnnotationGuttersSize=0;
  final FontMetrics fontMetrics=myEditor.getFontMetrics(Font.PLAIN);
  final int lineCount=myEditor.getDocument().getLineCount();
  for (int j=0; j < myTextAnnotationGutters.size(); j++) {
    TextAnnotationGutterProvider gutterProvider=myTextAnnotationGutters.get(j);
    int gutterSize=0;
    for (int i=0; i < lineCount; i++) {
      String lineText=gutterProvider.getLineText(i,myEditor);
      if (!StringUtil.isEmpty(lineText)) {
        gutterSize=Math.max(gutterSize,fontMetrics.stringWidth(lineText));
      }
    }
    if (gutterSize > 0)     gutterSize+=GAP_BETWEEN_ANNOTATIONS;
    myTextAnnotationGutterSizes.set(j,gutterSize);
    myTextAnnotationGuttersSize+=gutterSize;
  }
}
