{
  final int off=JBUI.scale(2);
  int height=width + off;
  int y;
switch (type) {
case COLLAPSED:
    y=myEditor.visibleLineToY(visualLine) + myEditor.getLineHeight() - myEditor.getDescent() - width;
  if (y <= clip.y + clip.height && y + height >= clip.y) {
    drawSquareWithPlus(g,anchorX,y,width,active);
  }
break;
case EXPANDED_TOP:
y=myEditor.visibleLineToY(visualLine) + myEditor.getLineHeight() - myEditor.getDescent() - width;
if (y <= clip.y + clip.height && y + height >= clip.y) {
drawDirectedBox(g,anchorX,y,width,height,width - off,active);
}
break;
case EXPANDED_BOTTOM:
y=myEditor.visibleLineToY(visualLine) + myEditor.getLineHeight() - myEditor.getDescent();
if (y - height <= clip.y + clip.height && y >= clip.y) {
drawDirectedBox(g,anchorX,y,width,-height,-width + off,active);
}
break;
}
}
