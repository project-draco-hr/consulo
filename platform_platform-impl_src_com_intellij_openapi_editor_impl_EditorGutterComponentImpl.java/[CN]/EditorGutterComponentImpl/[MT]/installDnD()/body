{
  DnDSupport.createBuilder(this).setBeanProvider(new Function<DnDActionInfo,DnDDragStartBean>(){
    @Override public DnDDragStartBean fun(    DnDActionInfo info){
      final GutterMark renderer=getGutterRenderer(info.getPoint());
      return renderer != null && (info.isCopy() || info.isMove()) ? new DnDDragStartBean(renderer) : null;
    }
  }
).setDropHandler(new DnDDropHandler(){
    @Override public void drop(    DnDEvent e){
      final Object attachedObject=e.getAttachedObject();
      if (attachedObject instanceof GutterIconRenderer && checkDumbAware(attachedObject,myEditor.getProject())) {
        final GutterDraggableObject draggableObject=((GutterIconRenderer)attachedObject).getDraggableObject();
        if (draggableObject != null) {
          final int line=convertPointToLineNumber(e.getPoint());
          if (line != -1) {
            draggableObject.copy(line,myEditor.getVirtualFile());
          }
        }
      }
    }
  }
).setImageProvider(new NullableFunction<DnDActionInfo,DnDImage>(){
    @Override public DnDImage fun(    DnDActionInfo info){
      return new DnDImage(IconUtil.toImage(scaleIcon(getGutterRenderer(info.getPoint()).getIcon())));
    }
  }
).install();
}
