{
  int middleCount=0;
  int middleSize=0;
  int x=getLineMarkerAreaOffset() + 2;
  final int y=myEditor.logicalPositionToXY(new LogicalPosition(line,0)).y;
  for (  GutterMark r : row) {
    if (!checkDumbAware(r,myEditor.getProject()))     continue;
    final GutterIconRenderer.Alignment alignment=((GutterIconRenderer)r).getAlignment();
    final Icon icon=scaleIcon(r.getIcon());
    if (alignment == GutterIconRenderer.Alignment.LEFT) {
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
    }
 else     if (alignment == GutterIconRenderer.Alignment.CENTER) {
      middleCount++;
      middleSize+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
    }
  }
  final int leftSize=x - getLineMarkerAreaOffset();
  x=getLineMarkerAreaOffset() + myIconsAreaWidth - 2;
  for (  GutterMark r : row) {
    if (!checkDumbAware(r,myEditor.getProject()))     continue;
    if (((GutterIconRenderer)r).getAlignment() == GutterIconRenderer.Alignment.RIGHT) {
      Icon icon=scaleIcon(r.getIcon());
      x-=icon.getIconWidth();
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x-=GAP_BETWEEN_ICONS;
    }
  }
  int rightSize=myIconsAreaWidth + getLineMarkerAreaOffset() - x + 1;
  if (middleCount > 0) {
    middleSize-=GAP_BETWEEN_ICONS;
    x=getLineMarkerAreaOffset() + leftSize + (myIconsAreaWidth - leftSize - rightSize- middleSize) / 2;
    for (    GutterMark r : row) {
      if (!checkDumbAware(r,myEditor.getProject()))       continue;
      if (((GutterIconRenderer)r).getAlignment() == GutterIconRenderer.Alignment.CENTER) {
        Icon icon=scaleIcon(r.getIcon());
        processor.process(x,y + getTextAlignmentShift(icon),r);
        x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
      }
    }
  }
}
