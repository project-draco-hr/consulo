{
  int off=(int)((float)width / 4);
  int height=width + off;
  int baseHeight=height - width / 2;
  int y=getFoldAnchorY(visualLine,width);
switch (type) {
case COLLAPSED:
    if (y <= clip.y + clip.height && y + height >= clip.y) {
      drawSquareWithPlus(g,anchorX,y,width,active);
    }
  break;
case EXPANDED_TOP:
if (y <= clip.y + clip.height && y + height >= clip.y) {
  drawDirectedBox(g,anchorX,y,width,height,baseHeight,active);
}
break;
case EXPANDED_BOTTOM:
y+=width;
if (y - height <= clip.y + clip.height && y >= clip.y) {
drawDirectedBox(g,anchorX,y,width,-height,-baseHeight,active);
}
break;
}
}
