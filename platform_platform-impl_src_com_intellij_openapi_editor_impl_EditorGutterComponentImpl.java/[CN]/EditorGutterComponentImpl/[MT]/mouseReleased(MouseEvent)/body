{
  if (e.isPopupTrigger()) {
    invokePopup(e);
    return;
  }
  if (myPopupInvokedOnPressed) {
    myPopupInvokedOnPressed=false;
    return;
  }
  GutterIconRenderer renderer=getGutterRenderer(e);
  AnAction clickAction=null;
  if (renderer != null) {
    clickAction=(InputEvent.BUTTON2_MASK & e.getModifiers()) > 0 ? renderer.getMiddleButtonClickAction() : renderer.getClickAction();
  }
  if (clickAction != null) {
    clickAction.actionPerformed(new AnActionEvent(e,myEditor.getDataContext(),"ICON_NAVIGATION",clickAction.getTemplatePresentation(),ActionManager.getInstance(),e.getModifiers()));
    e.consume();
    repaint();
  }
 else {
    ActiveGutterRenderer lineRenderer=getActiveRendererByMouseEvent(e);
    if (lineRenderer != null) {
      lineRenderer.doAction(myEditor,e);
    }
 else {
      fireEventToTextAnnotationListeners(e);
    }
  }
}
