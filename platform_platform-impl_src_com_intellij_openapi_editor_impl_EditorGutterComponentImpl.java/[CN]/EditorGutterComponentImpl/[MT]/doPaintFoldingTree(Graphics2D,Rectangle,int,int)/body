{
  int anchorX=getFoldingAreaOffset();
  int width=getFoldingAnchorWidth();
  FoldRegion[] visibleFoldRegions=((FoldingModelImpl)myEditor.getFoldingModel()).fetchVisible();
  for (  FoldRegion visibleFoldRegion : visibleFoldRegions) {
    if (!visibleFoldRegion.isValid())     continue;
    if (visibleFoldRegion.getStartOffset() > lastVisibleOffset)     continue;
    if (getEndOffset(visibleFoldRegion) < firstVisibleOffset)     continue;
    drawAnchor(visibleFoldRegion,width,clip,g,anchorX,false,false);
  }
  if (myActiveFoldRegion != null) {
    drawAnchor(myActiveFoldRegion,width,clip,g,anchorX,true,true);
    drawAnchor(myActiveFoldRegion,width,clip,g,anchorX,true,false);
  }
}
