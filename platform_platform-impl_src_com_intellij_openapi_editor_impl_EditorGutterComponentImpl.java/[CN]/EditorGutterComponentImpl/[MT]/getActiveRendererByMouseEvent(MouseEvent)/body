{
  final ActiveGutterRenderer[] gutterRenderer={null};
  if (findFoldingAnchorAt(e.getX(),e.getY()) == null) {
    if (!e.isConsumed() && e.getX() <= getWhitespaceSeparatorOffset()) {
      Rectangle clip=myEditor.getScrollingModel().getVisibleArea();
      int firstVisibleOffset=myEditor.logicalPositionToOffset(myEditor.xyToLogicalPosition(new Point(0,clip.y - myEditor.getLineHeight())));
      int lastVisibleOffset=myEditor.logicalPositionToOffset(myEditor.xyToLogicalPosition(new Point(0,clip.y + clip.height + myEditor.getLineHeight())));
      processRangeHighlighters(new RangeHighlighterProcessor(){
        public void process(        RangeHighlighter highlighter){
          if (gutterRenderer[0] != null)           return;
          Rectangle rectangle=getLineRendererRectangle(highlighter);
          if (rectangle == null)           return;
          int startY=rectangle.y;
          int endY=startY + rectangle.height;
          if (startY == endY) {
            endY+=myEditor.getLineHeight();
          }
          if (startY < e.getY() && e.getY() <= endY) {
            final LineMarkerRenderer renderer=highlighter.getLineMarkerRenderer();
            if (renderer instanceof ActiveGutterRenderer && ((ActiveGutterRenderer)renderer).canDoAction(e)) {
              gutterRenderer[0]=(ActiveGutterRenderer)renderer;
            }
          }
        }
      }
,firstVisibleOffset,lastVisibleOffset);
    }
  }
  return gutterRenderer[0];
}
