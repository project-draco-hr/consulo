{
  ProjectFileIndex fileIndex=ProjectRootManager.getInstance(viewProvider.getManager().getProject()).getFileIndex();
  if (!viewProvider.isPhysical() || fileIndex.isInSource(viewProvider.getVirtualFile())) {
    return new PsiJavaFileImpl(viewProvider);
  }
 else {
    return new PsiPlainTextFileImpl(viewProvider);
  }
}
