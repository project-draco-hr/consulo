{
  final AnAction menu=amgr.getAction(REFACTORING_MENU_ID);
  if (menu instanceof DefaultActionGroup) {
    final DefaultActionGroup actionGroup=((DefaultActionGroup)menu);
    final AnAction[] children=actionGroup.getChildren(null);
    for (int i=0; i < children.length; i++) {
      final AnAction child=children[i];
      if (child == action) {
        if (!(child instanceof HookedAction)) {
          replaceAction(child,i,newAction,actionGroup,amgr);
        }
        break;
      }
    }
  }
}
