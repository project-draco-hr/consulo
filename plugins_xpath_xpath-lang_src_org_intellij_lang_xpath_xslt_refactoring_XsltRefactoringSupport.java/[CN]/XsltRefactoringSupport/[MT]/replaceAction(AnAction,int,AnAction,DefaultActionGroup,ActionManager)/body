{
  AnAction[] children=actionGroup.getChildren(null);
  actionGroup.remove(child);
  final Constraints constraint;
  if (i == 0) {
    constraint=new Constraints(Anchor.FIRST,null);
  }
 else {
    final AnAction prevChild=children[i - 1];
    if (prevChild instanceof Separator) {
      if (i < children.length - 1) {
        constraint=new Constraints(Anchor.BEFORE,amgr.getId(children[i + 1]));
      }
 else {
        constraint=new Constraints(Anchor.LAST,null);
      }
    }
 else {
      constraint=new Constraints(Anchor.AFTER,amgr.getId(prevChild));
    }
  }
  actionGroup.add(newAction,constraint);
}
