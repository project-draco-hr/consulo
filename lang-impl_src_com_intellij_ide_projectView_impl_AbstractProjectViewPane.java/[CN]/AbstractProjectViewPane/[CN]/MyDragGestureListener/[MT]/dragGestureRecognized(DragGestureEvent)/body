{
  if ((dge.getDragAction() & DnDConstants.ACTION_COPY_OR_MOVE) == 0)   return;
  DataContext dataContext=DataManager.getInstance().getDataContext();
  ProjectView projectView=(ProjectView)dataContext.getData(ProjectViewImpl.PROJECT_VIEW_DATA_CONSTANT);
  if (projectView == null)   return;
  final AbstractProjectViewPane currentPane=projectView.getCurrentProjectViewPane();
  final TreeNode[] nodes=currentPane.getSelectedTreeNodes();
  if (nodes != null) {
    final Object[] elements=currentPane.getSelectedElements();
    final PsiElement[] psiElements=currentPane.getSelectedPSIElements();
    try {
      Object transferableWrapper=new TransferableWrapper(){
        public TreeNode[] getTreeNodes(){
          return nodes;
        }
        public PsiElement[] getPsiElements(){
          return psiElements;
        }
      }
;
      if ((psiElements != null && psiElements.length > 0) || canDragElements(elements)) {
        dge.startDrag(DragSource.DefaultMoveNoDrop,new MyTransferable(transferableWrapper),myDragSourceListener);
      }
    }
 catch (    InvalidDnDOperationException idoe) {
    }
  }
}
