{
  super.customizeCellRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
  final ContentEntryEditor contentEntryEditor=myTreeEditor.getContentEntryEditor();
  if (contentEntryEditor == null) {
    return;
  }
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  if (!(node.getUserObject() instanceof NodeDescriptor)) {
    return;
  }
  NodeDescriptor descriptor=(NodeDescriptor)node.getUserObject();
  final Object element=descriptor.getElement();
  if (element instanceof FileElement) {
    final VirtualFile file=((FileElement)element).getFile();
    if (file != null && file.isDirectory()) {
      final ContentEntry contentEntry=contentEntryEditor.getContentEntry();
      final String prefix=getPrefix(contentEntry,file);
      if (prefix.length() > 0) {
        append(" (" + prefix + ")",new SimpleTextAttributes(Font.PLAIN,Color.GRAY));
      }
      final Icon updatedIcon=updateIcon(contentEntry,file,getIcon(),expanded);
      setIcon(updatedIcon);
    }
  }
}
