{
  for (  ExcludeFolder excludeFolder : entry.getExcludeFolders()) {
    final String excludePath=VfsUtil.urlToPath(excludeFolder.getUrl());
    if (FileUtil.isAncestor(excludePath,path,false)) {
      return IconSet.getExcludeIcon(expanded);
    }
  }
  final SourceFolder[] sourceFolders=entry.getSourceFolders();
  for (  SourceFolder sourceFolder : sourceFolders) {
    final String sourcePath=VfsUtil.urlToPath(sourceFolder.getUrl());
    if (sourcePath.equals(path)) {
      return IconSet.getSourceRootIcon(sourceFolder.isTestSource(),expanded);
    }
  }
  Icon icon=originalIcon;
  String currentRoot=null;
  for (  SourceFolder sourceFolder : sourceFolders) {
    final String sourcePath=VfsUtil.urlToPath(sourceFolder.getUrl());
    if (FileUtil.isAncestor(sourcePath,path,true)) {
      if (currentRoot != null && FileUtil.isAncestor(sourcePath,currentRoot,false)) {
        continue;
      }
      icon=IconSet.getSourceFolderIcon(sourceFolder.isTestSource(),expanded);
      currentRoot=sourcePath;
    }
  }
  return icon;
}
