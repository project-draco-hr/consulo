{
  final Library library=((LibraryTableBase.ModifiableModelEx)myModuleLibrariesModel).createLibrary(null,libraryType);
  final Library.ModifiableModel libModel=library.getModifiableModel();
  for (  OrderRoot root : roots) {
    if (root.isJarDirectory()) {
      libModel.addJarDirectory(root.getFile(),false,root.getType());
    }
 else {
      libModel.addRoot(root.getFile(),root.getType());
    }
  }
  libModel.commit();
  return library;
}
