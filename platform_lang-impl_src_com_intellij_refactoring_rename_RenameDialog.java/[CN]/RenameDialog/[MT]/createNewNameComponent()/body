{
  String[] suggestedNames=getSuggestedNames();
  myNameSuggestionsField=new NameSuggestionsField(suggestedNames,myProject,FileTypes.PLAIN_TEXT,myEditor){
    @Override protected boolean shouldSelectAll(){
      return myEditor == null || myEditor.getSettings().isPreselectRename();
    }
  }
;
  if (myPsiElement instanceof PsiFile && myEditor == null) {
    myNameSuggestionsField.selectNameWithoutExtension();
  }
  myNameChangedListener=new NameSuggestionsField.DataChanged(){
    @Override public void dataChanged(){
      processNewNameChanged();
    }
  }
;
  myNameSuggestionsField.addDataChangedListener(myNameChangedListener);
}
