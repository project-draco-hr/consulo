{
  VcsRevisionNumber loadedRevisionNumber;
  Pair<VcsRevisionNumber,Long> currentRevision;
  while (true) {
    loadedRevisionNumber=loader.getCurrentRevision();
    currentRevision=cache.getCurrent(path,vcsKey);
    if (loadedRevisionNumber.equals(currentRevision.getFirst()))     return loadedRevisionNumber;
    if (cache.putCurrent(path,loadedRevisionNumber,vcsKey,currentRevision.getSecond())) {
      return loadedRevisionNumber;
    }
  }
}
