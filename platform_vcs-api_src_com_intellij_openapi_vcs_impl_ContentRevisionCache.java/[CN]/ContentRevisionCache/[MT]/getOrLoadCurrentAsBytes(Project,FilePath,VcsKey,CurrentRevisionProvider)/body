{
  ContentRevisionCache cache=ProjectLevelVcsManager.getInstance(project).getContentRevisionCache();
  VcsRevisionNumber currentRevision;
  Pair<VcsRevisionNumber,byte[]> loaded;
  while (true) {
    currentRevision=putIntoCurrentCache(cache,path,vcsKey,loader);
    loaded=loader.get();
    if (loaded.getFirst().equals(currentRevision))     break;
  }
  cache.put(path,currentRevision,vcsKey,UniqueType.REPOSITORY_CONTENT,loaded.getSecond());
  return loaded;
}
