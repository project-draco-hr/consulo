{
  final VirtualFile[] files=FileChooser.chooseFiles(parentComponent,FileChooserDescriptorFactory.createSingleFolderDescriptor());
  if (files.length != 1)   return null;
  final VirtualFile dir=files[0];
  final AbstractGroovyLibraryManager manager=GroovyFacetEditor.findManager(dir);
  if (manager == null)   return null;
  final String path=dir.getPath();
  final String sdkVersion=manager.getSDKVersion(path);
  if (AbstractConfigUtils.UNDEFINED_VERSION.equals(sdkVersion)) {
    return null;
  }
  return new NewLibraryConfiguration(manager.getLibraryPrefix() + "-" + sdkVersion){
    @Override public void addRoots(    @NotNull LibraryEditor editor){
      manager.fillLibrary(path,editor);
    }
  }
;
}
