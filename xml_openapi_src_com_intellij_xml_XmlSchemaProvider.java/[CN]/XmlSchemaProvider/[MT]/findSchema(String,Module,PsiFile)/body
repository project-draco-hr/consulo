{
  final boolean dumb=DumbService.getInstance(file.getProject()).isDumb();
  if (file.getProject().isDefault())   return null;
  for (  XmlSchemaProvider provider : Extensions.getExtensions(EP_NAME)) {
    if (dumb && !DumbService.isDumbAware(provider)) {
      continue;
    }
    if (file instanceof XmlFile && !provider.isAvailable((XmlFile)file)) {
      continue;
    }
    final XmlFile schema=provider.getSchema(namespace,module,file);
    if (schema != null) {
      return schema;
    }
  }
  return null;
}
