{
  Editor editor=getEditor(file);
  HighlightUsagesHandler.invoke(myProject,editor,getTestPsiFile(file));
  RangeHighlighter[] highlighters=editor.getMarkupModel().getAllHighlighters();
  List<HighlightInfo> actual=new ArrayList<HighlightInfo>();
  for (  RangeHighlighter each : highlighters) {
    int offset=each.getStartOffset();
    PsiElement element=getTestPsiFile(file).findElementAt(offset);
    element=PsiTreeUtil.getParentOfType(element,XmlTag.class);
    String text=editor.getDocument().getText().substring(offset,each.getEndOffset());
    actual.add(new HighlightInfo(element,text));
  }
  assertUnorderedElementsAreEqual(actual,expected);
}
