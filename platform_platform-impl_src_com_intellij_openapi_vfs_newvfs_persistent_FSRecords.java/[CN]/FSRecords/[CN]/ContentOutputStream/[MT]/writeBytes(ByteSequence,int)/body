{
  final int page;
  RefCountingStorage contentStorage=getContentStorage();
  try {
    w.lock();
    incModCount(fileId);
    checkFileIsValid(myFileId);
    int recordId=getContentRecordId(myFileId);
    if (recordId == 0 || contentStorage.getRefCount(recordId) > 1) {
      recordId=contentStorage.acquireNewRecord();
      setContentRecordId(myFileId,recordId);
    }
    page=recordId;
  }
  finally {
    w.unlock();
  }
  contentStorage.writeBytes(page,bytes,myFixedSize);
}
