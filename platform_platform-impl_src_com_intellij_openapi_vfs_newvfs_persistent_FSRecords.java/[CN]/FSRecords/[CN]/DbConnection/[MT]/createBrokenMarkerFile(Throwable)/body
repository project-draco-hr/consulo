{
  File brokenMarker=getCorruptionMarkerFile();
  try {
    final ByteArrayOutputStream out=new ByteArrayOutputStream();
    final PrintStream stream=new PrintStream(out);
    new Exception().printStackTrace(stream);
    if (reason != null) {
      stream.print("\nReason:\n");
      reason.printStackTrace(stream);
    }
    stream.close();
    LOG.info("Creating VFS corruption marker; Trace=\n" + out.toString());
    final FileWriter writer=new FileWriter(brokenMarker);
    writer.write("These files are corrupted and must be rebuilt from the scratch on next startup");
    writer.close();
  }
 catch (  IOException e) {
  }
}
