{
  try {
    r.lock();
    try {
      final DataInputStream input=readAttribute(parentId,CHILDREN_ATT);
      if (input == null)       return NameId.EMPTY_ARRAY;
      int count=DataInputOutputUtil.readINT(input);
      NameId[] result=count == 0 ? NameId.EMPTY_ARRAY : new NameId[count];
      for (int i=0; i < count; i++) {
        int id=DataInputOutputUtil.readINT(input);
        id=id >= 0 ? id + parentId : -id;
        int nameId=getNameId(id);
        result[i]=new NameId(id,nameId,FileNameCache.getVFileName(nameId));
      }
      input.close();
      return result;
    }
  finally {
      r.unlock();
    }
  }
 catch (  Throwable e) {
    throw DbConnection.handleError(e);
  }
}
