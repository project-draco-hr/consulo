{
  try {
synchronized (att.getId()) {
      try {
        r.lock();
        DataInputStream stream=readAttribute(fileId,att.getId());
        if (stream != null) {
          try {
            int actualVersion=DataInputOutputUtil.readINT(stream);
            if (actualVersion != att.getVersion()) {
              stream.close();
              return null;
            }
          }
 catch (          IOException e) {
            stream.close();
            return null;
          }
        }
        return stream;
      }
  finally {
        r.unlock();
      }
    }
  }
 catch (  Throwable e) {
    throw DbConnection.handleError(e);
  }
}
