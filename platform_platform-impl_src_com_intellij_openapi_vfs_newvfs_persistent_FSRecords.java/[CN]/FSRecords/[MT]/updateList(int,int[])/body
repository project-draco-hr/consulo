{
synchronized (lock) {
    try {
      DbConnection.markDirty();
      final DataOutputStream record=writeAttribute(id,CHILDREN_ATT);
      record.writeInt(children.length);
      for (      int child : children) {
        if (child == id) {
          LOG.error("Cyclic parent child relations");
        }
 else {
          record.writeInt(child);
        }
      }
      record.close();
    }
 catch (    Throwable e) {
      throw DbConnection.handleError(e);
    }
  }
}
