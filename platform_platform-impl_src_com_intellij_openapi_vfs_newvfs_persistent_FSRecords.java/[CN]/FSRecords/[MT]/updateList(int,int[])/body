{
  try {
    w.lock();
    DbConnection.markDirty();
    final DataOutputStream record=writeAttribute(id,CHILDREN_ATT,false);
    DataInputOutputUtil.writeINT(record,children.length);
    for (    int child : children) {
      if (child == id) {
        LOG.error("Cyclic parent child relations");
      }
 else {
        child=child > id ? child - id : -child;
        DataInputOutputUtil.writeINT(record,child);
      }
    }
    record.close();
  }
 catch (  Throwable e) {
    throw DbConnection.handleError(e);
  }
 finally {
    w.unlock();
  }
}
