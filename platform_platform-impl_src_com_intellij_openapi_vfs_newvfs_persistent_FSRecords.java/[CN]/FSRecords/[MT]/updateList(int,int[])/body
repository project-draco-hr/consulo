{
  w.lock();
  try {
    DbConnection.markDirty();
    final DataOutputStream record=writeAttribute(id,ourChildrenAttr);
    DataInputOutputUtil.writeINT(record,children.length);
    int prevId=id;
    Arrays.sort(children);
    for (    int child : children) {
      if (child == id) {
        LOG.error("Cyclic parent child relations");
      }
 else {
        DataInputOutputUtil.writeINT(record,child - prevId);
        prevId=child;
      }
    }
    record.close();
  }
 catch (  Throwable e) {
    throw DbConnection.handleError(e);
  }
 finally {
    w.unlock();
  }
}
