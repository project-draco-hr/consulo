{
  myProject=project;
  myConnection=myProject.getMessageBus().connect(myProject);
  myVcs=SvnVcs.getInstance(myProject);
  final Runnable focus=new Runnable(){
    public void run(){
      IdeFocusManager.getInstance(myProject).requestFocus(myRefreshLabel,true);
    }
  }
;
  myConnection.subscribe(SvnVcs.ROOTS_RELOADED,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          final List<WCInfo> infoList=myVcs.getAllWcInfos();
          updateList(infoList);
          myRefreshLabel.setEnabled(true);
          SwingUtilities.invokeLater(focus);
        }
      }
,ModalityState.NON_MODAL);
    }
  }
);
  final JPanel holderPanel=new JPanel(new BorderLayout());
  myPanel=new JPanel(new GridBagLayout());
  final JPanel panel=new JPanel(new BorderLayout());
  panel.add(myPanel,BorderLayout.NORTH);
  holderPanel.add(panel,BorderLayout.WEST);
  myRefreshLabel=new LinkLabel("Refresh",null,new LinkListener(){
    public void linkSelected(    LinkLabel aSource,    Object aLinkData){
      if (myRefreshLabel.isEnabled()) {
        myVcs.invokeRefreshSvnRoots(false);
        myRefreshLabel.setEnabled(false);
      }
    }
  }
);
  myHolder=new JScrollPane(holderPanel);
  setFocusableForLinks(myRefreshLabel);
  initView();
}
