{
  ChangeFormatDialog dialog=new ChangeFormatDialog(myProject,new File(wcInfo.getPath()),false,!wcInfo.isIsWcRoot());
  dialog.setData(wcInfo.getFormat().getOption());
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  final String newMode=dialog.getUpgradeMode();
  if (!wcInfo.getFormat().getOption().equals(newMode)) {
    final WorkingCopyFormat newFormat=WorkingCopyFormat.getInstance(newMode);
    ApplicationManager.getApplication().saveAll();
    final Task.Backgroundable task=new SvnFormatWorker(myProject,newFormat,wcInfo){
      @Override public void onSuccess(){
        super.onSuccess();
        myRefreshLabel.doClick();
      }
    }
;
    ProgressManager.getInstance().run(task);
  }
}
