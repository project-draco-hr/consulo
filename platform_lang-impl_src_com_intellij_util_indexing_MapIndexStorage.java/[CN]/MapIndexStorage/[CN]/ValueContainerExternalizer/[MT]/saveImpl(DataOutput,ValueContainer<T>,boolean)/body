{
  for (final Iterator<T> valueIterator=container.getValueIterator(); valueIterator.hasNext(); ) {
    final T value=valueIterator.next();
    myExternalizer.save(out,value);
    final ValueContainer.IntIterator ids=container.getInputIdsIterator(value);
    if (ids != null) {
      DataInputOutputUtil.writeSINT(out,ids.size());
      while (ids.hasNext()) {
        final int id=ids.next();
        DataInputOutputUtil.writeSINT(out,asRemovedData ? -id : id);
      }
    }
 else {
      DataInputOutputUtil.writeSINT(out,0);
    }
  }
}
