{
  myFile=file;
  myHandleType.add(HandleType.USE_FILE_SYSTEM);
  myHandleType.selectFirst();
  AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(file);
  if (vcs == null) {
    myEditFileProvider=null;
  }
 else {
    boolean fileExistsInVcs=vcs.fileExistsInVcs(new FilePathImpl(file));
    if (fileExistsInVcs) {
      myEditFileProvider=vcs.getEditFileProvider();
      if (myEditFileProvider != null) {
        HandleType handleType=HandleType.createForVcs(vcs);
        myHandleType.add(handleType);
        myHandleType.select(handleType);
      }
    }
 else {
      myEditFileProvider=null;
    }
  }
}
