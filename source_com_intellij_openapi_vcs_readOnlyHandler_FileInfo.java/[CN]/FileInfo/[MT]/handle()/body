{
  final VirtualFile file=getFile();
  if (getUseVersionControl()) {
    myEditFileProvider.editFiles(new VirtualFile[]{file});
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        file.refresh(false,false);
      }
    }
);
  }
 else {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        try {
          ReadOnlyAttributeUtil.setReadOnlyAttribute(file,false);
        }
 catch (        IOException e) {
        }
      }
    }
);
  }
}
