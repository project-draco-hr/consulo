{
  if (parent instanceof PsiClass) {
    if (parent instanceof PsiCompiledElement) {
      parent=parent.getNavigationElement();
    }
    if (parent instanceof PsiClass && !(parent instanceof PsiCompiledElement)) {
      final List<PsiElement> elements=new ArrayList<PsiElement>();
      new JavaRecursiveElementWalkingVisitor(){
        @Override public void visitAnonymousClass(        PsiAnonymousClass aClass){
          elements.add(aClass);
        }
      }
.visitElement(parent);
      if (!elements.isEmpty()) {
        return elements.toArray(new PsiElement[elements.size()]);
      }
    }
  }
  return PsiElement.EMPTY_ARRAY;
}
