{
  Map<String,Long> result=new HashMap<String,Long>();
  LinkedHashSet<String> paths=Utils.collectRelativePaths(dir);
  for (  String each : paths) {
    if (ignoredFiles.contains(each))     continue;
    ui.setStatus(each);
    ui.checkCancelled();
    result.put(each,digestFile(new File(dir,each)));
  }
  return result;
}
