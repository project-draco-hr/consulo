{
  TestVirtualFile root=new TestVirtualFile("root",null);
  TestVirtualFile f1=new TestVirtualFile("goodFile",null,null);
  TestVirtualFile f2=new TestVirtualFile("badFile",null,null);
  TestVirtualFile f3=new TestVirtualFile("badDir",null);
  root.addChild(f1);
  root.addChild(f2);
  root.addChild(f2);
  filter.setNotAllowedFiles(f2,f3);
  updateWith(root);
  assertTrue(vcs.hasEntry("root/goodFile"));
  assertFalse(vcs.hasEntry("root/badFile"));
  assertFalse(vcs.hasEntry("root/badDir"));
}
