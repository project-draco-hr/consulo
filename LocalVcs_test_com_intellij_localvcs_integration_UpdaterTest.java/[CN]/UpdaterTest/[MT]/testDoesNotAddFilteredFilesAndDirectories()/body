{
  TestVirtualFile root=new TestVirtualFile("root");
  TestVirtualFile f1=new TestVirtualFile("goodFile",null,-1);
  TestVirtualFile f2=new TestVirtualFile("badFile",null,-1);
  TestVirtualFile f3=new TestVirtualFile("badDir");
  root.addChild(f1);
  root.addChild(f2);
  root.addChild(f2);
  filter.setNotAllowedFiles(f2,f3);
  updateWith(root);
  assertTrue(vcs.hasEntry("root/goodFile"));
  assertFalse(vcs.hasEntry("root/badFile"));
  assertFalse(vcs.hasEntry("root/badDir"));
}
