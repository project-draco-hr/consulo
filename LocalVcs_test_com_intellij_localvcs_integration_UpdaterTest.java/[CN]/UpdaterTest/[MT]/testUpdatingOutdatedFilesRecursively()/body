{
  TestVirtualFile root=new TestVirtualFile("root",null);
  TestVirtualFile dir=new TestVirtualFile("dir",null);
  TestVirtualFile file=new TestVirtualFile("file","new content",333L);
  root.addChild(dir);
  dir.addChild(file);
  vcs.createDirectory("root",null);
  vcs.createDirectory("root/dir",null);
  vcs.createFile("root/dir/file",b("old content"),111L);
  vcs.apply();
  updateWith(root);
  Entry e=vcs.findEntry("root/dir/file");
  assertEquals(c("new content"),e.getContent());
  assertEquals(333L,e.getTimestamp());
}
