{
  vcs.createDirectory("root/dir",1L);
  vcs.createFile("root/dir/file",b("content"),1L);
  vcs.apply();
  Entry e1=vcs.getEntry("root/dir");
  Entry e2=vcs.getEntry("root/dir/file");
  TestVirtualFile dir=new TestVirtualFile("dir",1L);
  TestVirtualFile file=new TestVirtualFile("file","new content",1L);
  root.addChild(dir);
  dir.addChild(file);
  update();
  assertSame(e1,vcs.getEntry("root/dir"));
  assertSame(e2,vcs.getEntry("root/dir/file"));
  assertEquals(c("content"),e2.getContent());
}
