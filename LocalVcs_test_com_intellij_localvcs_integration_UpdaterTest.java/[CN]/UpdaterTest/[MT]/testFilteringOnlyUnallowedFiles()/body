{
  TestVirtualFile f1=new TestVirtualFile("file1","",null);
  TestVirtualFile f2=new TestVirtualFile("file2","",null);
  root.addChild(f1);
  root.addChild(f2);
  reset(filter);
  expect(filter.isAllowed(f1)).andReturn(false);
  expect(filter.isAllowed(f2)).andReturn(true);
  replay(filter);
  update();
  assertFalse(vcs.hasEntry("root/file1"));
  assertTrue(vcs.hasEntry("root/file2"));
}
