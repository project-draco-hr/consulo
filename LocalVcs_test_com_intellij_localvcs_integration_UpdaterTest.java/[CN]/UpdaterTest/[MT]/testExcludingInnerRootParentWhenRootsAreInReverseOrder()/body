{
  vcs.createDirectory("outer",null);
  vcs.createDirectory("outer/dir",null);
  vcs.createDirectory("outer/dir/inner",null);
  vcs.apply();
  TestVirtualFile outer=new TestVirtualFile("outer",null);
  TestVirtualFile dir=new TestVirtualFile("dir",null);
  TestVirtualFile inner=new TestVirtualFile("inner",null);
  outer.addChild(dir);
  dir.addChild(inner);
  filter.setFilesNotUnderContentRoot(dir);
  updateWith(inner,outer);
  assertEquals(2,vcs.getRoots().size());
  assertEquals("outer",vcs.getRoots().get(0).getPath());
  assertEquals("outer/dir/inner",vcs.getRoots().get(1).getPath());
  assertFalse(vcs.hasEntry("outer/dir"));
}
