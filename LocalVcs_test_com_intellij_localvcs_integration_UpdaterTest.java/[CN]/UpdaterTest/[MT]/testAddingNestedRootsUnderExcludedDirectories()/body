{
  TestVirtualFile root1=new TestVirtualFile("root",null);
  TestVirtualFile dir=new TestVirtualFile("excluded",null);
  TestVirtualFile root2=new TestVirtualFile("nested",null);
  root1.addChild(dir);
  dir.addChild(root2);
  filter.setFilesNotUnderContentRoot(dir);
  updateWith(root1,root2);
  assertEquals(2,vcs.getRoots().size());
  assertEquals("root",vcs.getRoots().get(0).getPath());
  assertEquals("root/excluded/nested",vcs.getRoots().get(1).getPath());
  assertFalse(vcs.hasEntry("root/excluded"));
}
