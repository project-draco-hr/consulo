{
  super.visitNewExpression(expression);
  if (!TypeUtils.expressionHasTypeOrSubtype(expression,"java.lang.Throwable")) {
    return;
  }
  final PsiThrowStatement throwStatement=PsiTreeUtil.getParentOfType(expression,PsiThrowStatement.class);
  if (throwStatement != null) {
    return;
  }
  final PsiElement parent=PsiTreeUtil.getParentOfType(expression,PsiAssignmentExpression.class,PsiVariable.class);
  final PsiLocalVariable variable;
  if (parent instanceof PsiAssignmentExpression) {
    final PsiAssignmentExpression assignmentExpression=(PsiAssignmentExpression)parent;
    final PsiExpression rhs=assignmentExpression.getRExpression();
    if (!PsiTreeUtil.isAncestor(rhs,expression,false)) {
      return;
    }
    final PsiExpression lhs=assignmentExpression.getLExpression();
    if (!(lhs instanceof PsiReferenceExpression)) {
      return;
    }
    final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)lhs;
    final PsiElement target=referenceExpression.resolve();
    if (!(target instanceof PsiLocalVariable)) {
      return;
    }
    variable=(PsiLocalVariable)target;
  }
 else   if (parent instanceof PsiVariable) {
    if (!(parent instanceof PsiLocalVariable)) {
      return;
    }
    variable=(PsiLocalVariable)parent;
  }
 else {
    variable=null;
  }
  if (variable != null) {
    final Query<PsiReference> query=ReferencesSearch.search(variable,variable.getUseScope());
    for (    PsiReference reference : query) {
      final PsiElement usage=reference.getElement();
      if (PsiTreeUtil.getParentOfType(usage,PsiThrowStatement.class) != null) {
        return;
      }
    }
  }
  registerError(expression,expression);
}
