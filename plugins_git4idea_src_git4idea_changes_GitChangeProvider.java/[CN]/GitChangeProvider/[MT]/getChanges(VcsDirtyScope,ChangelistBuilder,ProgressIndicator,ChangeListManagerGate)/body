{
  Collection<VirtualFile> roots=dirtyScope.getAffectedContentRoots();
  for (  VirtualFile root : roots) {
    ChangeCollector c=new ChangeCollector(myProject,root);
    for (    Change file : c.changes()) {
      builder.processChange(file);
    }
    for (    VirtualFile f : c.unversioned()) {
      builder.processUnversionedFile(f);
    }
  }
}
