{
  Collection<VirtualFile> roots=GitUtil.gitRootsForPaths(dirtyScope.getAffectedContentRoots());
  final MyNonChangedHolder holder=new MyNonChangedHolder(myProject,dirtyScope.getDirtyFilesNoExpand());
  for (  VirtualFile root : roots) {
    ChangeCollector c=new ChangeCollector(myProject,dirtyScope,root);
    final Collection<Change> changes=c.changes();
    holder.changed(changes);
    for (    Change file : changes) {
      builder.processChange(file,GitVcs.getKey());
    }
    for (    VirtualFile f : c.unversioned()) {
      builder.processUnversionedFile(f);
    }
    holder.feedBuilder(builder);
  }
}
