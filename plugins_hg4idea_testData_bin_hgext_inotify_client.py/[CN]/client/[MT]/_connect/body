def _connect(self):
    sockpath = os.path.join(self.root, '.hg', 'inotify.sock')
    try:
        self.sock.connect(sockpath)
    except socket.error as err:
        if (err[0] == 'AF_UNIX path too long'):
            sockpath = os.readlink(sockpath)
            self.sock.connect(sockpath)
        else:
            raise
