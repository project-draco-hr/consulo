{
  final List<LocalChangeList> changeListList=myWorker.getListsCopy();
  for (  LocalChangeList list : changeListList) {
    Element listNode=new Element(ChangeListManagerSerialization.NODE_LIST);
    element.addContent(listNode);
    if (list.isDefault()) {
      listNode.setAttribute(ChangeListManagerSerialization.ATT_DEFAULT,ChangeListManagerSerialization.ATT_VALUE_TRUE);
    }
    if (list.isReadOnly()) {
      listNode.setAttribute(ChangeListManagerSerialization.ATT_READONLY,ChangeListManagerSerialization.ATT_VALUE_TRUE);
    }
    listNode.setAttribute(ChangeListManagerSerialization.ATT_NAME,list.getName());
    listNode.setAttribute(ChangeListManagerSerialization.ATT_COMMENT,list.getComment());
    for (    Change change : list.getChanges()) {
      writeChange(listNode,change);
    }
  }
  final IgnoredFileBean[] filesToIgnore=myIgnoredIdeaLevel.getFilesToIgnore();
  for (  IgnoredFileBean bean : filesToIgnore) {
    Element fileNode=new Element(ChangeListManagerSerialization.NODE_IGNORED);
    element.addContent(fileNode);
    String path=bean.getPath();
    if (path != null) {
      fileNode.setAttribute("path",path);
    }
    String mask=bean.getMask();
    if (mask != null) {
      fileNode.setAttribute("mask",mask);
    }
  }
}
