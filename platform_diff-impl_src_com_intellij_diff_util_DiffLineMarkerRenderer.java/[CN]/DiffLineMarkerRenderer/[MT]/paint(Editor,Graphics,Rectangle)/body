{
  Color color=myDiffType.getColor(editor);
  EditorGutterComponentEx gutter=((EditorEx)editor).getGutterComponentEx();
  Graphics2D g2=(Graphics2D)g;
  int x1=0;
  int x2=x1 + gutter.getWidth();
  int y=range.y;
  int height=range.height;
  if (height > 2) {
    if (myIgnoredFoldingOutline) {
      int xOutline=gutter.getWhitespaceSeparatorOffset();
      g.setColor(myDiffType.getIgnoredColor(editor));
      g.fillRect(xOutline,y,x2 - xOutline,height);
      g.setColor(color);
      g.fillRect(x1,y,xOutline - x1,height);
    }
 else {
      g.setColor(color);
      g.fillRect(x1,y,x2 - x1,height);
    }
    DiffDrawUtil.drawChunkBorderLine(g2,x1,x2,y - 1,color);
    DiffDrawUtil.drawChunkBorderLine(g2,x1,x2,y + height - 1,color);
  }
 else {
    DiffDrawUtil.drawDoubleChunkBorderLine(g2,x1,x2,y - 1,color);
  }
}
