{
  EditorGutterComponentEx gutter=((EditorEx)editor).getGutterComponentEx();
  Graphics2D g2=(Graphics2D)g;
  int x1=0;
  int x2=x1 + gutter.getWidth();
  int y, height;
  if (myEmptyRange && myLastLine) {
    y=DiffDrawUtil.lineToY(editor,DiffUtil.getLineCount(editor.getDocument()));
    height=0;
  }
 else {
    int startLine=editor.getDocument().getLineNumber(myHighlighter.getStartOffset());
    int endLine=editor.getDocument().getLineNumber(myHighlighter.getEndOffset()) + 1;
    y=DiffDrawUtil.lineToY(editor,startLine);
    height=myEmptyRange ? 0 : DiffDrawUtil.lineToY(editor,endLine) - y;
  }
  int annotationsOffset=gutter.getAnnotationsAreaOffset();
  int annotationsWidth=gutter.getAnnotationsAreaWidth();
  if (annotationsWidth != 0) {
    drawMarker(editor,g2,x1,annotationsOffset,y,height,false);
    x1=annotationsOffset + annotationsWidth;
  }
  if (myIgnoredFoldingOutline) {
    int xOutline=gutter.getWhitespaceSeparatorOffset();
    drawMarker(editor,g2,xOutline,x2,y,height,true);
    drawMarker(editor,g2,x1,xOutline,y,height,false);
  }
 else {
    drawMarker(editor,g2,x1,x2,y,height,false);
  }
}
