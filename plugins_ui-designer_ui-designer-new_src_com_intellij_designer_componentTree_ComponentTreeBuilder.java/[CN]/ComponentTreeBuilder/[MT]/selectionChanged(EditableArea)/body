{
  if (mySurfaceArea == area) {
    mySelectionMode=true;
    final int selectionOperation=++mySelectionOperation;
    myTreeArea.setRawSelection(mySurfaceArea.getSelection(),new Runnable(){
      @Override public void run(){
        mySelectionMode=selectionOperation == mySelectionOperation;
      }
    }
);
  }
 else   if (!mySelectionMode) {
    try {
      removeListeners();
      mySurfaceArea.setSelection(myTreeArea.getSelection());
    }
  finally {
      addListeners();
    }
  }
}
