{
  HashMap<String,ArrayList<KeyboardShortcut>> result=new HashMap<String,ArrayList<KeyboardShortcut>>();
  String[] actionIds=getActionIds(keyboardShortcut.getFirstKeyStroke());
  for (  String id : actionIds) {
    if (id.equals(actionId)) {
      continue;
    }
    if (actionId.startsWith(EDITOR_ACTION_PREFIX) && id.equals("$" + actionId.substring(6))) {
      continue;
    }
    if (StringUtil.startsWithChar(actionId,'$') && id.equals(EDITOR_ACTION_PREFIX + actionId.substring(1))) {
      continue;
    }
    final String useShortcutOf=myKeymapManager.getActionBinding(id);
    if (useShortcutOf != null && useShortcutOf.equals(actionId)) {
      continue;
    }
    Shortcut[] shortcuts=getShortcuts(id);
    for (    Shortcut shortcut1 : shortcuts) {
      if (!(shortcut1 instanceof KeyboardShortcut)) {
        continue;
      }
      KeyboardShortcut shortcut=(KeyboardShortcut)shortcut1;
      if (!shortcut.getFirstKeyStroke().equals(keyboardShortcut.getFirstKeyStroke())) {
        continue;
      }
      if (keyboardShortcut.getSecondKeyStroke() != null && shortcut.getSecondKeyStroke() != null && !keyboardShortcut.getSecondKeyStroke().equals(shortcut.getSecondKeyStroke())) {
        continue;
      }
      ArrayList<KeyboardShortcut> list=result.get(id);
      if (list == null) {
        list=new ArrayList<KeyboardShortcut>();
        result.put(id,list);
      }
      list.add(shortcut);
    }
  }
  return result;
}
