{
  final PsiCatchSection catchSection=(PsiCatchSection)parent;
  FeatureUsageTracker.getInstance().triggerFeatureUsed("codeassists.highlight.throws");
  PsiTryStatement tryStatement=catchSection.getTryStatement();
  final PsiParameter param=catchSection.getParameter();
  if (param == null)   return null;
  final PsiParameter[] catchBlockParameters=tryStatement.getCatchBlockParameters();
  final Collection<PsiClassType> allThrownExceptions=ExceptionUtil.collectUnhandledExceptions(tryStatement.getTryBlock(),tryStatement.getTryBlock());
  Condition<PsiType> filter=new Condition<PsiType>(){
    @Override public boolean value(    PsiType type){
      for (      PsiParameter parameter : catchBlockParameters) {
        boolean isAssignable=parameter.getType().isAssignableFrom(type);
        if (parameter != param) {
          if (isAssignable)           return false;
        }
 else {
          return isAssignable;
        }
      }
      return false;
    }
  }
;
  ArrayList<PsiClassType> filtered=new ArrayList<PsiClassType>();
  for (  PsiClassType type : allThrownExceptions) {
    if (filter.value(type))     filtered.add(type);
  }
  return new HighlightExceptionsHandler(editor,file,target,filtered.toArray(new PsiClassType[filtered.size()]),tryStatement.getTryBlock(),filter);
}
