{
  int count=0;
  while (true) {
    IElementType tokenType=lexer.getTokenType();
    if (tokenType == null)     break;
    if (!typeBitSet.isInSet(tokenType))     break;
    if (parent != null) {
      TreeUtil.addChildren(parent,ParseUtil.createTokenElement(lexer,context.getCharTable()));
    }
    lexer.advance();
    count++;
  }
  return count;
}
