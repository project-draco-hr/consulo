{
  myDualView.setShowGrid(true);
  myDualView.getTreeView().addMouseListener(new PopupHandler(){
    public void invokePopup(    Component comp,    int x,    int y){
      ActionPopupMenu popupMenu=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UPDATE_POPUP,myPopupActions);
      popupMenu.getComponent().show(comp,x,y);
    }
  }
);
  myDualView.getFlatView().addMouseListener(new PopupHandler(){
    public void invokePopup(    Component comp,    int x,    int y){
      ActionPopupMenu popupMenu=ActionManager.getInstance().createActionPopupMenu(ActionPlaces.UPDATE_POPUP,myPopupActions);
      popupMenu.getComponent().show(comp,x,y);
    }
  }
);
  myDualView.requestFocus();
  myDualView.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      updateMessage();
    }
  }
);
  myDualView.setRootVisible(false);
  myDualView.expandAll();
  final TreeCellRenderer defaultCellRenderer=myDualView.getTree().getCellRenderer();
  final Getter<VcsHistorySession> sessionGetter=new Getter<VcsHistorySession>(){
    public VcsHistorySession get(){
      return myHistorySession;
    }
  }
;
  myDualView.setTreeCellRenderer(new MyTreeCellRenderer(defaultCellRenderer,sessionGetter));
  myDualView.setCellWrapper(new MyCellWrapper(sessionGetter));
  final TableView flatView=myDualView.getFlatView();
  TableViewModel sortableModel=flatView.getTableViewModel();
  sortableModel.setSortable(true);
  final RowSorter<? extends TableModel> rowSorter=flatView.getRowSorter();
  if (rowSorter != null) {
    rowSorter.setSortKeys(Arrays.asList(new RowSorter.SortKey(0,SortOrder.DESCENDING)));
  }
}
