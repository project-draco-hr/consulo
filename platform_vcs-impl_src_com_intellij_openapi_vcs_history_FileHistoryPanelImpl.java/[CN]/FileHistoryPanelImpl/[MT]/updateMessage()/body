{
  List selection=getSelection();
  final VcsFileRevision revision;
  if (selection.size() != 1) {
    revision=null;
    myComments.setText("");
    myOriginalComment="";
  }
 else {
    revision=getFirstSelectedRevision();
    if (revision != null) {
      final String message=revision.getCommitMessage();
      myOriginalComment=message;
      @NonNls final String text=IssueLinkHtmlRenderer.formatTextIntoHtml(myVcs.getProject(),message);
      myComments.setText(text);
      myComments.setCaretPosition(0);
    }
  }
  if (myListener != null) {
    myListener.consume(revision);
  }
}
