{
  if (!myRevisionToVirtualFile.containsKey(revision)) {
    FilePath filePath=(revision instanceof VcsFileRevisionEx ? ((VcsFileRevisionEx)revision).getPath() : myFilePath);
    myRevisionToVirtualFile.put(revision,new VcsVirtualFile(filePath.getPath(),revision,VcsFileSystem.getInstance()));
  }
  return myRevisionToVirtualFile.get(revision);
}
