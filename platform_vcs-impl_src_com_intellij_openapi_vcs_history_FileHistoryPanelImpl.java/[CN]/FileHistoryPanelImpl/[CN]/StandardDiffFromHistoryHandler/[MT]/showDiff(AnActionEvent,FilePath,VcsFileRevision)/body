{
  final TableView<TreeNodeOnVcsRevision> flatView=myDualView.getFlatView();
  final int selectedRow=flatView.getSelectedRow();
  if (selectedRow == (flatView.getRowCount() - 1)) {
    VcsHistoryUtil.showDifferencesInBackground(myVcs.getProject(),filePath,myBottomRevisionForShowDiff != null ? myBottomRevisionForShowDiff : VcsFileRevision.NULL,revision,true);
  }
 else {
    VcsHistoryUtil.showDifferencesInBackground(myVcs.getProject(),myFilePath,flatView.getRow(selectedRow + 1),revision,true);
  }
}
