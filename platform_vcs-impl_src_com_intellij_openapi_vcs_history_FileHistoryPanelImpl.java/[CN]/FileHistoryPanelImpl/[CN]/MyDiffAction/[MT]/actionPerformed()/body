{
  List<TreeNodeOnVcsRevision> sel=getSelection();
  int selectionSize=sel.size();
  if (selectionSize > 1) {
    showDifferences(myVcs.getProject(),sel.get(0),sel.get(sel.size() - 1));
  }
 else   if (selectionSize == 1) {
    final TableView flatView=myDualView.getFlatView();
    final TableViewModel model=flatView.getTableViewModel();
    final int selectedRow=flatView.getSelectedRow();
    if (selectedRow == (model.getRowCount() - 1)) {
      showDifferences(myVcs.getProject(),VcsFileRevision.NULL,getFirstSelectedRevision());
    }
 else {
      showDifferences(myVcs.getProject(),(VcsFileRevision)model.getRowValue(selectedRow + 1),getFirstSelectedRevision());
    }
  }
}
