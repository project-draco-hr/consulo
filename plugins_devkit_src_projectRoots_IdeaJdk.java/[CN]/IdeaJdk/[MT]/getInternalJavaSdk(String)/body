{
  String jreHome=getJreHome(sdkHome);
  ProjectJdk internalJdk=JavaSdk.getInstance().createJdk("",jreHome);
  if (internalJdk.getVersionString() != null) {
    final String internalToolsPath=getInternalToolsPath(sdkHome);
    if (internalToolsPath != null) {
      final VirtualFile tools=LocalFileSystem.getInstance().findFileByPath(FileUtil.toSystemIndependentName(internalToolsPath));
      if (tools != null) {
        final SdkModificator sdkModificator=internalJdk.getSdkModificator();
        sdkModificator.addRoot(tools,ProjectRootType.CLASS);
        sdkModificator.commitChanges();
      }
    }
  }
 else {
    return null;
  }
  return internalJdk;
}
