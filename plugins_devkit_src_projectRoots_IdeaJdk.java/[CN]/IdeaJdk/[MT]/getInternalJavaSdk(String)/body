{
  if (SystemInfo.isLinux || SystemInfo.isWindows) {
    final String oldJrePath=sdkHome + File.separator + JRE_DIR_NAME;
    String jreHome=oldJrePath + File.separator + JRE_DIR_NAME;
    if (new File(jreHome).exists()) {
      return JavaSdk.getInstance().createJdk("",jreHome);
    }
    if (new File(oldJrePath).exists()) {
      return JavaSdk.getInstance().createJdk("",oldJrePath);
    }
  }
  final String jrePath=System.getProperty(JAVA_HOME_PROPERTY);
  final File parent=new File(jrePath).getParentFile();
  if (JavaSdk.checkForJdk(parent)) {
    return JavaSdk.getInstance().createJdk("",parent.getPath(),false);
  }
  return JavaSdk.getInstance().createJdk("",jrePath);
}
