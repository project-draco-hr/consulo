{
  ArrayList<VirtualFile> result=new ArrayList<VirtualFile>();
  JarFileSystem jfs=JarFileSystem.getInstance();
  File lib=new File(home + File.separator + LIB_DIR_NAME);
  File[] jars=lib.listFiles();
  if (jars != null) {
    for (int i=0; i < jars.length; i++) {
      File jar=jars[i];
      @NonNls String name=jar.getName();
      if (jar.isFile() && !name.equals("idea.jar") && (name.endsWith(".jar") || name.endsWith(".zip"))) {
        result.add(jfs.findFileByPath(jar.getPath() + JarFileSystem.JAR_SEPARATOR));
      }
    }
  }
  return result.toArray(new VirtualFile[result.size()]);
}
