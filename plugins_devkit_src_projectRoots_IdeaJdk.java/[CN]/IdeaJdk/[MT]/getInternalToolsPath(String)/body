{
  @NonNls final String toolsJar="tools.jar";
  if (SystemInfo.isLinux || SystemInfo.isWindows) {
    final File tools=new File(new File(new File(sdkHome,JRE_DIR_NAME),LIB_DIR_NAME),toolsJar);
    if (tools.exists()) {
      return tools.getPath();
    }
  }
  final String javaHome=System.getProperty(JAVA_HOME_PROPERTY);
  File tools=new File(new File(javaHome,LIB_DIR_NAME),toolsJar);
  if (tools.exists()) {
    return tools.getPath();
  }
 else {
    tools=new File(new File(new File(javaHome).getParentFile(),LIB_DIR_NAME),toolsJar);
    if (tools.exists()) {
      return tools.getPath();
    }
  }
  ProjectJdk jdk=JavaSdk.getInstance().createJdk("",javaHome);
  if (jdk.getVersionString() != null) {
    return jdk.getToolsPath();
  }
  return null;
}
