{
  if (SystemInfo.isLinux || SystemInfo.isWindows) {
    @NonNls String jreHome=sdkHome + File.separator + JRE_DIR_NAME;
    if (new File(jreHome).exists()) {
      return jreHome;
    }
  }
  final String jrePath=System.getProperty(JAVA_HOME_PROPERTY);
  final File parent=new File(jrePath).getParentFile();
  if (JavaSdk.checkForJdk(parent)) {
    return parent.getPath();
  }
  return jrePath;
}
