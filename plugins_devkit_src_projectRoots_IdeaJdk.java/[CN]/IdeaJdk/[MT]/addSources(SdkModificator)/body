{
  final Sdk internalJavaSdk=getInternalJavaSdk(sdkModificator.getHomePath());
  if (internalJavaSdk != null) {
    if (!addOrderEntries(OrderRootType.SOURCES,ProjectRootType.SOURCE,internalJavaSdk,sdkModificator)) {
      if (SystemInfo.isMac) {
        ProjectJdk[] jdks=ProjectJdkTable.getInstance().getAllJdks();
        for (        ProjectJdk jdk : jdks) {
          if (jdk.getSdkType() instanceof JavaSdk) {
            addOrderEntries(OrderRootType.SOURCES,ProjectRootType.SOURCE,jdk,sdkModificator);
            break;
          }
        }
      }
 else {
        final File jdkHome=new File(internalJavaSdk.getHomePath()).getParentFile();
        @NonNls final String srcZip="src.zip";
        final File jarFile=new File(jdkHome,srcZip);
        if (jarFile.exists()) {
          JarFileSystem jarFileSystem=JarFileSystem.getInstance();
          String path=jarFile.getAbsolutePath().replace(File.separatorChar,'/') + JarFileSystem.JAR_SEPARATOR;
          jarFileSystem.setNoCopyJarForPath(path);
          sdkModificator.addRoot(jarFileSystem.findFileByPath(path),ProjectRootType.SOURCE);
        }
      }
    }
  }
}
