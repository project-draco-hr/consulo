{
  GitRepositoryManager manager=GitUtil.getRepositoryManager(project);
  if (manager == null) {
    return;
  }
  final GitRepository repository=manager.getRepositoryForRoot(root);
  final GitUntrackedFilesHolder untrackedFilesHolder=(repository == null ? null : repository.getUntrackedFilesHolder());
  for (  List<String> paths : VcsFileUtil.chunkPaths(root,files)) {
    GitSimpleHandler handler=new GitSimpleHandler(project,root,GitCommand.ADD);
    handler.endOptions();
    handler.addParameters(paths);
    handler.setNoSSH(true);
    handler.run();
  }
  for (  FilePath path : files) {
    VirtualFile vf=path.getVirtualFile();
    if (untrackedFilesHolder != null && vf != null) {
      untrackedFilesHolder.remove(vf);
    }
  }
}
