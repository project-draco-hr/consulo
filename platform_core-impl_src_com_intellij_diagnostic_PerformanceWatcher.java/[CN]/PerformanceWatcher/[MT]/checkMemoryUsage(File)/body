{
  Runtime rt=Runtime.getRuntime();
  long maxMemory=rt.maxMemory();
  long usedMemory=rt.totalMemory() - rt.freeMemory();
  long freeMemory=maxMemory - usedMemory;
  if (freeMemory < maxMemory / 5) {
    LOG.info("High memory usage (free " + freeMemory / 1024 / 1024 + " of " + maxMemory / 1024 / 1024 + " MB) while dumping threads to " + file);
  }
}
