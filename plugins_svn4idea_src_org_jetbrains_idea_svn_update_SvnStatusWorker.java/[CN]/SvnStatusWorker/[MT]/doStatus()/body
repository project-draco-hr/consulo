{
  try {
    SVNStatusClient statusClient=myVcs.createStatusClient();
    statusClient.setIgnoreExternals(false);
    final ProgressIndicator progress=ProgressManager.getInstance().getProgressIndicator();
    if (progress != null) {
      progress.setText(SvnBundle.message("progress.text.update.computing.post.update.status",myRoot.getAbsolutePath()));
    }
    final VcsKey vcsKey=SvnVcs.getKey();
    statusClient.doStatus(myRoot,true,false,false,false,new ISVNStatusHandler(){
      public void handleStatus(      SVNStatus status){
        if (status.getFile() == null) {
          return;
        }
        if (myIsTotalUpdate && status.getContentsStatus() == SVNStatusType.STATUS_UNVERSIONED && status.getFile().isDirectory()) {
          myTouchedFiles.add(status.getFile());
        }
        if (status.getContentsStatus() == SVNStatusType.STATUS_EXTERNAL || status.getContentsStatus() == SVNStatusType.STATUS_IGNORED || status.getContentsStatus() == SVNStatusType.STATUS_MISSING || status.getContentsStatus() == SVNStatusType.STATUS_INCOMPLETE) {
        }
 else         if (status.getContentsStatus() != SVNStatusType.STATUS_NONE || status.getPropertiesStatus() == SVNStatusType.STATUS_NONE) {
          String path=status.getFile().getAbsolutePath();
          if (status.getContentsStatus() == SVNStatusType.STATUS_ADDED) {
            myPostUpdateFiles.getGroupById(FileGroup.LOCALLY_ADDED_ID).add(path,vcsKey,null);
          }
 else           if (status.getContentsStatus() == SVNStatusType.STATUS_CONFLICTED) {
            FileGroup group=myPostUpdateFiles.getGroupById(FileGroup.MERGED_WITH_CONFLICT_ID);
            if (group != null && (group.getFiles() == null || !group.getFiles().contains(path))) {
              group.add(path,vcsKey,null);
            }
          }
 else           if (status.getContentsStatus() == SVNStatusType.STATUS_DELETED) {
            myPostUpdateFiles.getGroupById(FileGroup.LOCALLY_REMOVED_ID).add(path,vcsKey,null);
          }
 else           if (status.getContentsStatus() == SVNStatusType.STATUS_REPLACED) {
            myPostUpdateFiles.getGroupById(FileGroup.LOCALLY_ADDED_ID).add(path,vcsKey,null);
          }
 else           if (status.getContentsStatus() == SVNStatusType.STATUS_MODIFIED || status.getPropertiesStatus() == SVNStatusType.STATUS_MODIFIED) {
            myPostUpdateFiles.getGroupById(FileGroup.MODIFIED_ID).add(path,vcsKey,null);
          }
 else           if (status.getContentsStatus() == SVNStatusType.STATUS_UNVERSIONED || status.getContentsStatus() == SVNStatusType.STATUS_OBSTRUCTED) {
            if (status.getFile().isFile() || !SVNWCUtil.isVersionedDirectory(status.getFile())) {
              myPostUpdateFiles.getGroupById(FileGroup.UNKNOWN_ID).add(path,vcsKey,null);
            }
          }
        }
      }
    }
);
  }
 catch (  SVNException e) {
    myExceptions.add(new VcsException(e));
  }
}
