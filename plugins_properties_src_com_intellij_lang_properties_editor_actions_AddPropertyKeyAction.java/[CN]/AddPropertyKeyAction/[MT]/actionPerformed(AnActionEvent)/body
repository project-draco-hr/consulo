{
  final Project project=e.getData(CommonDataKeys.PROJECT);
  final List<PropertiesFile> propertiesFiles=myResourceBundle.getPropertiesFiles(project);
  final String message=Messages.showInputDialog(project,PropertiesBundle.message("add.dialog.property.name"),PropertiesBundle.message("add.dialog.property.title"),AllIcons.General.QuestionDialog,null,new InputValidator(){
    @Override public boolean checkInput(    String inputString){
      if (StringUtil.isEmptyOrSpaces(inputString)) {
        return false;
      }
      boolean hasInAll=true;
      for (      PropertiesFile propertiesFile : propertiesFiles) {
        if (propertiesFile.findPropertyByKey(inputString) == null) {
          hasInAll=false;
        }
      }
      return !hasInAll && !inputString.contains(" ");
    }
    @Override public boolean canClose(    String inputString){
      return checkInput(inputString);
    }
  }
);
  if (message == null) {
    return;
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      for (      PropertiesFile propertiesFile : propertiesFiles) {
        final String temp=message.trim();
        propertiesFile.addProperty(temp,temp);
      }
    }
  }
);
}
