{
  super(project,false,confirmationOption,prompt,true);
  myFileList=new ChangesTreeList<FilePath>(project,originalFiles,true,true,null,null){
    protected DefaultTreeModel buildTreeModel(    final List<FilePath> changes,    ChangeNodeDecorator changeNodeDecorator){
      return new TreeModelBuilder(project,false).buildModelFromFilePaths(changes);
    }
    protected List<FilePath> getSelectedObjects(    final ChangesBrowserNode node){
      return node.getAllFilePathsUnder();
    }
    @Nullable protected FilePath getLeadSelectedObject(    final ChangesBrowserNode node){
      final Object userObject=node.getUserObject();
      if (userObject instanceof FilePath) {
        return (FilePath)userObject;
      }
      return null;
    }
  }
;
  if (okActionName != null) {
    getOKAction().putValue(Action.NAME,okActionName);
  }
  if (cancelActionName != null) {
    getCancelAction().putValue(Action.NAME,cancelActionName);
  }
  myFileList.setChangesToDisplay(originalFiles);
  init();
}
