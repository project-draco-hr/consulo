{
  myProcessor=new SchemeProcessor<CodeStyleSchemeImpl>(){
    public CodeStyleSchemeImpl readScheme(    final Document schemeContent) throws IOException, JDOMException, InvalidDataException {
      return CodeStyleSchemeImpl.readScheme(schemeContent);
    }
    public Document writeScheme(    final CodeStyleSchemeImpl scheme) throws WriteExternalException {
      return ((CodeStyleSchemeImpl)scheme).saveToDocument();
    }
    public void showReadErrorMessage(    final Exception e,    final String schemeName,    final String filePath){
      Messages.showErrorDialog(PsiBundle.message("codestyle.cannot.read.scheme.file.message",filePath),PsiBundle.message("codestyle.cannot.read.scheme.file.title"));
    }
    public void showWriteErrorMessage(    final Exception e,    final String schemeName,    final String filePath){
      Messages.showErrorDialog(PsiBundle.message("codestyle.cannot.save.scheme.file",filePath,e.getLocalizedMessage()),CommonBundle.getErrorTitle());
    }
    public boolean shouldBeSaved(    final CodeStyleSchemeImpl scheme){
      return !scheme.isDefault();
    }
    public void initScheme(    final CodeStyleSchemeImpl scheme){
      ((CodeStyleSchemeImpl)scheme).init(CodeStyleSchemesImpl.this);
    }
  }
;
  mySchemesManager=schemesManagerFactory.createSchemesManager(FILE_SPEC,myProcessor,RoamingType.PER_USER);
}
