{
  myProject=project;
  if (!ApplicationManager.getApplication().isHeadlessEnvironment()) {
    myContentManager=new NotNullLazyValue<ContentManager>(){
      @NotNull @Override protected ContentManager compute(){
        ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
        ToolWindow toolWindow=toolWindowManager.registerToolWindow(ToolWindowId.INSPECTION,true,ToolWindowAnchor.BOTTOM,myProject);
        ContentManager contentManager=toolWindow.getContentManager();
        toolWindow.setIcon(AllIcons.Toolwindows.ToolWindowInspection);
        new ContentManagerWatcher(toolWindow,contentManager);
        return contentManager;
      }
    }
;
  }
 else {
    myContentManager=new NotNullLazyValue<ContentManager>(){
      @NotNull @Override protected ContentManager compute(){
        return ContentFactory.SERVICE.getInstance().createContentManager(new TabbedPaneContentUI(),true,myProject);
      }
    }
;
  }
}
