{
  if (LOG.isDebugEnabled()) {
    LOG.debug("PsiManager.runPreStartupActivity()");
  }
  myFileManager.runStartupActivity();
  myCacheManager.initialize();
  StartupManagerEx startupManager=StartupManagerEx.getInstanceEx(myProject);
  if (startupManager != null) {
    FileSystemSynchronizer synchronizer=startupManager.getFileSystemSynchronizer();
    if (PsiManagerConfiguration.getInstance().REPOSITORY_ENABLED) {
      final CacheUpdater repositoryUpdater=myRepositoryManager.getCacheUpdater();
      if (repositoryUpdater != null) {
        synchronizer.registerCacheUpdater(repositoryUpdater);
      }
      CacheUpdater[] updaters=myCacheManager.getCacheUpdaters();
      for (      CacheUpdater updater : updaters) {
        synchronizer.registerCacheUpdater(updater);
      }
    }
  }
}
