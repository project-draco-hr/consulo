{
  Set<VirtualFile> rebasingRoots=new TreeSet<VirtualFile>(GitUtil.VIRTUAL_FILE_COMPARATOR);
  for (  final VirtualFile root : roots) {
    if (GitRebaseUtils.isRebaseInTheProgress(root)) {
      rebasingRoots.add(root);
    }
  }
  if (!rebasingRoots.isEmpty()) {
    final StringBuilder files=new StringBuilder();
    for (    VirtualFile r : rebasingRoots) {
      files.append(GitBundle.message("update.root.rebasing.item",r.getPresentableUrl()));
      myExceptions.add(new VcsException(GitBundle.message("update.root.rebasing",r.getPresentableUrl())));
    }
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      public void run(){
        Messages.showErrorDialog(myProject,GitBundle.message("update.root.rebasing.message",files.toString()),GitBundle.message("update.root.rebasing.title"));
      }
    }
);
    return true;
  }
  return false;
}
