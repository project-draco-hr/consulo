{
  try {
    GitStashUtils.popLastStash(myProject,root);
    for (    LocalChangeList changeList : listsCopy) {
      final Collection<Change> changes=changeList.getChanges();
      if (!changes.isEmpty()) {
        LOG.debug("After unstash: moving " + changes.size() + " changes to '"+ changeList.getName()+ "'");
        changeManager.moveChangesTo(changeList,changes.toArray(new Change[changes.size()]));
      }
    }
  }
 catch (  final VcsException ue) {
    myExceptions.add(ue);
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      public void run(){
        GitUIUtil.showOperationError(myProject,ue,"Auto-unstash");
      }
    }
);
  }
}
