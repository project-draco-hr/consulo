{
  final List<PsiElement> result=new ArrayList<PsiElement>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      for (      PsiElement id : requests.keySet()) {
        if (id != null && id.isValid()) {
          result.add(id);
        }
      }
      Collections.sort(result,new Comparator<PsiElement>(){
        public int compare(        PsiElement o1,        PsiElement o2){
          final PsiFile psiFile1=o1.getContainingFile();
          LOG.assertTrue(psiFile1 != null);
          final PsiFile psiFile2=o2.getContainingFile();
          LOG.assertTrue(psiFile2 != null);
          return psiFile1.getName().compareTo(psiFile2.getName());
        }
      }
);
    }
  }
);
  return result;
}
