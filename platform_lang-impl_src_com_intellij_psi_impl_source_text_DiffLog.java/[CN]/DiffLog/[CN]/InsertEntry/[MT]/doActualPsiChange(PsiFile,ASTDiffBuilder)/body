{
  ASTNode anchor=null;
  ASTNode firstChildNode=myOldParent.getFirstChildNode();
  for (int i=0; i < myPos; i++) {
    anchor=anchor == null ? firstChildNode : anchor.getTreeNext();
  }
  ((TreeElement)myNewNode).rawRemove();
  if (anchor != null) {
    ((TreeElement)anchor).rawInsertAfterMe((TreeElement)myNewNode);
  }
 else {
    if (firstChildNode != null) {
      ((TreeElement)firstChildNode).rawInsertBeforeMe((TreeElement)myNewNode);
    }
 else {
      ((CompositeElement)myOldParent).rawAddChildren((TreeElement)myNewNode);
    }
  }
  astDiffBuilder.nodeInserted(myOldParent,myNewNode,myPos);
  ((TreeElement)myNewNode).clearCaches();
  ((CompositeElement)myOldParent).subtreeChanged();
  DebugUtil.checkTreeStructure(myOldParent);
}
