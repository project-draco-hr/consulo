{
  myProject=project;
  myPaletteManager=PaletteManager.getInstance(myProject);
  myProviders=Extensions.getExtensions(PaletteItemProvider.EP_NAME,project);
  for (  PaletteItemProvider provider : myProviders) {
    provider.addListener(myPropertyChangeListener);
  }
  setLayout(new GridLayout(1,1));
  myScrollPane.addMouseListener(new MyScrollPanePopupHandler());
  myScrollPane.setBorder(null);
  KeyStroke escStroke=KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0);
  new ClearActiveItemAction().registerCustomShortcutSet(new CustomShortcutSet(escStroke),myScrollPane);
  refreshPalette();
  DragSource.getDefaultDragSource().addDragSourceListener(new DragSourceAdapter(){
    @Override public void dragDropEnd(    DragSourceDropEvent event){
      if (!event.getDropSuccess() && event.getDragSourceContext().getComponent() instanceof PaletteComponentList) {
        clearActiveItem();
      }
    }
  }
);
}
