{
  Map<OrderRootType,Collection<File>> libraryFiles=ContainerUtilRt.newHashMap();
  for (  LibraryPathType pathType : LibraryPathType.values()) {
    final Set<String> paths=toImport.getPaths(pathType);
    if (paths.isEmpty()) {
      continue;
    }
    libraryFiles.put(myLibraryPathTypeMapper.map(pathType),ContainerUtil.map(paths,PATH_TO_FILE));
  }
  Library library=myProjectStructureHelper.findIdeLibrary(toImport,project);
  if (library != null) {
    syncPaths(toImport,library,project,synchronous);
    return;
  }
  importLibrary(toImport.getName(),toImport.getOwner(),libraryFiles,project,synchronous);
}
