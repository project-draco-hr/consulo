{
  final Component focused=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
  if (focused == null)   return null;
  if (focused == comp || SwingUtilities.isDescendingFrom(focused,comp))   return focused;
  final JBPopup popup=FocusTrackback.getChildPopup(comp);
  if (popup != null && popup.isFocused())   return focused;
  return null;
}
