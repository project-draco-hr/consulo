{
  Document base=getDocument(FragmentSide.SIDE1);
  String[] baseLines=DiffUtil.convertToLines(base.getText());
  Document version=getDocument(FragmentSide.SIDE2);
  String[] versionLines=DiffUtil.convertToLines(version.getText());
  DiffFragment[] fragments=ComparisonPolicy.DEFAULT.buildDiffFragmentsFromLines(baseLines,versionLines);
  final ArrayList<Change> result=new ArrayList<Change>();
  new DiffFragmemntsEnumerator(fragments){
    protected void process(    DiffFragment fragment){
      if (fragment.isEqual())       return;
      Context context=getContext();
      TextRange range1=context.createRange(FragmentSide.SIDE1);
      TextRange range2=context.createRange(FragmentSide.SIDE2);
      result.add(new SimpleChange(ChangeType.fromDiffFragment(context.getFragment()),range1,range2,ChangeList.this));
    }
  }
.execute();
  return result;
}
