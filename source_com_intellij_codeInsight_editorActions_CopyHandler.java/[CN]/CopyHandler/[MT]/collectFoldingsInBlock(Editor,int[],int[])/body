{
  final ArrayList<TextBlockTransferable.FoldingData> list=new ArrayList<TextBlockTransferable.FoldingData>();
  final FoldRegion[] regions=editor.getFoldingModel().getAllFoldRegions();
  for (int i=0; i < regions.length; i++) {
    final FoldRegion region=regions[i];
    if (!region.isValid())     continue;
    for (int j=0; j < startOffsets.length; j++) {
      if (startOffsets[j] <= region.getStartOffset() && region.getEndOffset() <= endOffsets[j]) {
        list.add(new TextBlockTransferable.FoldingData(region.getStartOffset() - startOffsets[j],region.getEndOffset() - startOffsets[j],region.isExpanded()));
      }
    }
  }
  return list.toArray(new TextBlockTransferable.FoldingData[list.size()]);
}
