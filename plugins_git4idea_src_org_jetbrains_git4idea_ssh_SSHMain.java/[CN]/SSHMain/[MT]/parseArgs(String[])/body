{
  if (args.length != 3 && args.length != 5) {
    System.err.println(GitBundle.message("sshmain.invalid.amount.of.arguments",Arrays.asList(args)));
    System.exit(1);
  }
  int i=0;
  int xmlRcpPort=Integer.parseInt(args[i++]);
  Integer port=null;
  if ("-p".equals(args[i])) {
    i++;
    port=Integer.parseInt(args[i++]);
  }
  String host=args[i++];
  String user;
  int atIndex=host.indexOf('@');
  if (atIndex == -1) {
    user=null;
  }
 else {
    user=host.substring(0,atIndex);
    host=host.substring(atIndex + 1);
  }
  String command=args[i];
  return new SSHMain(xmlRcpPort,host,user,port,command);
}
