{
  IElementType tokenType=token.getNode().getElementType();
  if (tokenType == mREGEX_CONTENT || tokenType == mREGEX_LITERAL) {
    return GrStringUtil.escapeSymbolsForSlashyStrings(s);
  }
  if (tokenType == mDOLLAR_SLASH_REGEX_CONTENT || tokenType == mDOLLAR_SLASH_REGEX_LITERAL) {
    return GrStringUtil.escapeSymbolsForDollarSlashyStrings(s);
  }
  if (tokenType == mGSTRING_CONTENT || tokenType == mGSTRING_LITERAL || tokenType == GroovyElementTypes.GSTRING_INJECTION) {
    return GrStringUtil.escapeSymbolsForGString(s,!token.getParent().getText().contains("\"\"\""),false);
  }
  if (tokenType == mSTRING_LITERAL) {
    return GrStringUtil.escapeSymbolsForString(s,!token.getText().contains("'''"),false);
  }
  return super.escapeCharCharacters(s,token);
}
