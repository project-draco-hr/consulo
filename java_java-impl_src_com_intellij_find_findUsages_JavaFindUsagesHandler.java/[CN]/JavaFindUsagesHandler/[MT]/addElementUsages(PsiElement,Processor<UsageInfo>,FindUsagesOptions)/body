{
  final SearchScope searchScope=options.searchScope;
  if (element instanceof PsiMethod && ((PsiMethod)element).isConstructor()) {
    PsiMethod method=(PsiMethod)element;
    final PsiClass parentClass=method.getContainingClass();
    if (parentClass != null) {
      MethodReferencesSearch.search(new MethodReferencesSearch.SearchParameters(method,searchScope,!((JavaMethodFindUsagesOptions)options).isIncludeOverloadUsages,options.fastTrack)).forEach(new ReadActionProcessor<PsiReference>(){
        public boolean processInReadAction(        final PsiReference ref){
          return addResult(result,ref,options);
        }
      }
);
    }
    return;
  }
  final ReadActionProcessor<PsiReference> consumer=new ReadActionProcessor<PsiReference>(){
    public boolean processInReadAction(    final PsiReference ref){
      return addResult(result,ref,options);
    }
  }
;
  if (element instanceof PsiMethod) {
    final boolean strictSignatureSearch=!((JavaMethodFindUsagesOptions)options).isIncludeOverloadUsages;
    MethodReferencesSearch.search(new MethodReferencesSearch.SearchParameters((PsiMethod)element,searchScope,strictSignatureSearch,options.fastTrack)).forEach(consumer);
  }
 else {
    ReferencesSearch.search(new ReferencesSearch.SearchParameters(element,searchScope,false,options.fastTrack)).forEach(consumer);
  }
}
