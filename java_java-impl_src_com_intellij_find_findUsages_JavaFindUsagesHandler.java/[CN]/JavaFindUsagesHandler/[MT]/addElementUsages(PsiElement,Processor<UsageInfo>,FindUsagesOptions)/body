{
  final SearchScope searchScope=options.searchScope;
  if (element instanceof PsiMethod && ((PsiMethod)element).isConstructor()) {
    PsiMethod method=(PsiMethod)element;
    if (options.isIncludeOverloadUsages) {
      for (      PsiMethod constructor : method.getContainingClass().getConstructors()) {
        addConstructorUsages(constructor,searchScope,result,options);
      }
    }
 else {
      addConstructorUsages(method,searchScope,result,options);
    }
    return;
  }
  final ReadActionProcessor<PsiReference> consumer=new ReadActionProcessor<PsiReference>(){
    public boolean processInReadAction(    final PsiReference ref){
      return addResult(result,ref,options,element);
    }
  }
;
  if (options.fastTrack != null) {
    SearchRequestor.collectRequests(element,options,options.fastTrack);
    return;
  }
  if (element instanceof PsiMethod) {
    final boolean strictSignatureSearch=!options.isIncludeOverloadUsages;
    MethodReferencesSearch.search(new MethodReferencesSearch.SearchParameters((PsiMethod)element,searchScope,strictSignatureSearch,options.fastTrack)).forEach(consumer);
  }
 else {
    ReferencesSearch.search(new ReferencesSearch.SearchParameters(element,searchScope,false,options.fastTrack)).forEach(consumer);
  }
}
