{
  if (toImport.size() != 1) {
    throw new IllegalArgumentException(String.format("Expected to get a single project but got %d: %s",toImport.size(),toImport));
  }
  JavaProjectData projectData=toImport.iterator().next().getData();
  JavaSdkVersion version=projectData.getJdkVersion();
  JavaSdk javaSdk=JavaSdk.getInstance();
  Sdk sdk=ProjectRootManagerEx.getInstanceEx(project).getProjectSdk();
  if (sdk instanceof JavaSdk) {
    JavaSdkVersion currentVersion=javaSdk.getVersion(sdk);
    if (currentVersion == null || !currentVersion.isAtLeast(version)) {
      Sdk newJdk=ExternalSystemUtil.findJdk(version);
      if (newJdk != null) {
        NewProjectUtil.applyJdkToProject(project,newJdk);
      }
    }
  }
  setLanguageLevel(projectData.getLanguageLevel(),project,synchronous);
}
