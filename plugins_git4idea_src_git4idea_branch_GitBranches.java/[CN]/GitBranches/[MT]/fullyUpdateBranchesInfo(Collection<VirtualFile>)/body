{
  if (roots == null) {
    return;
  }
  final Task.Backgroundable task=new Task.Backgroundable(myProject,""){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      Map<VirtualFile,GitBranch> currentBranches=new HashMap<VirtualFile,GitBranch>();
      for (      VirtualFile root : roots) {
        try {
          GitBranch currentBranch=GitBranch.current(myProject,root);
          currentBranches.put(root,currentBranch);
          notifyListeners();
        }
 catch (        VcsException e) {
          LOG.info("Exception while trying to get current branch for root " + root,e);
        }
      }
synchronized (myCurrentBranchesLock) {
        myCurrentBranches=currentBranches;
      }
    }
  }
;
  GitVcs.runInBackground(task);
}
