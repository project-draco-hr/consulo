{
  if (e instanceof PsiLiteralExpression) {
    return myHelper.computeConstantExpression(e);
  }
 else   if (e instanceof PsiReferenceExpression) {
    final PsiReferenceExpression ref=(PsiReferenceExpression)e;
    final PsiElement psiElement=ref.resolve();
    if (psiElement != null) {
      final Object o=myHelper.computeConstantExpression(e);
      if (o != null) {
        return o;
      }
 else       if (psiElement instanceof PsiModifierListOwner) {
        final Object substituted=calcSubstituted((PsiModifierListOwner)psiElement);
        if (substituted != null) {
          return substituted;
        }
 else         if (psiElement instanceof PsiVariable) {
          final Collection<PsiExpression> values=DfaUtil.getCachedVariableValues(((PsiVariable)psiElement),ref);
          for (          PsiExpression value : values) {
            final Object computedValue=myHelper.computeConstantExpression(value);
            if (computedValue != null) {
              return computedValue;
            }
          }
        }
      }
      return null;
    }
 else {
    }
  }
 else   if (e instanceof PsiParenthesizedExpression) {
    return computeSimpleExpression(((PsiParenthesizedExpression)e).getExpression());
  }
 else   if (e instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression c=(PsiMethodCallExpression)e;
    final PsiMethod m=(PsiMethod)c.getMethodExpression().resolve();
    if (m != null && m.getReturnType() != PsiType.VOID) {
      return calcSubstituted(m);
    }
  }
  return myHelper.computeConstantExpression(e);
}
