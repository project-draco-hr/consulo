{
  StringBuilder messageBuilder=new StringBuilder(VcsBundle.message("apply.patch.create.dirs.prompt.header"));
  for (  String missingDir : missingDirs) {
    messageBuilder.append(missingDir).append("\r\n");
  }
  messageBuilder.append(VcsBundle.message("apply.patch.create.dirs.prompt.footer"));
  int rc=Messages.showYesNoCancelDialog(myProject,messageBuilder.toString(),VcsBundle.message("patch.apply.dialog.title"),Messages.getQuestionIcon());
  if (rc == 0) {
    CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
      public void run(){
        for (        String dir : missingDirs) {
          try {
            VfsUtil.createDirectories(dir);
          }
 catch (          IOException e) {
            Messages.showErrorDialog(myProject,"Error creating directories: " + e.getMessage(),VcsBundle.message("patch.apply.dialog.title"));
          }
        }
      }
    }
,"Creating directories for new files in patch",null);
  }
 else   if (rc != 1) {
    return false;
  }
  return true;
}
