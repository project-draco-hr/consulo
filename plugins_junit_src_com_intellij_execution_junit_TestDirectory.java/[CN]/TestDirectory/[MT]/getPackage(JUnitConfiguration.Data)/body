{
  final String dirName=data.getDirName();
  final VirtualFile file=LocalFileSystem.getInstance().findFileByPath(FileUtil.toSystemIndependentName(dirName));
  if (file == null) {
    throw new CantRunException("Directory \'" + dirName + "\' is not found");
  }
  final PsiDirectory directory=PsiManager.getInstance(myProject).findDirectory(file);
  if (directory == null) {
    throw new CantRunException("Directory \'" + dirName + "\' is not found");
  }
  final PsiPackage aPackage=JavaDirectoryService.getInstance().getPackage(directory);
  if (aPackage == null) {
    throw new CantRunException("Package not found in directory");
  }
  return aPackage;
}
