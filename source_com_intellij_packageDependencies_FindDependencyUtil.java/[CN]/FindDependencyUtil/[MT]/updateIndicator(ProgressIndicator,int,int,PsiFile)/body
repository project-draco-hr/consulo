{
  if (indicator != null) {
    if (indicator.isCanceled())     throw new ProcessCanceledException();
    indicator.setFraction(((double)++count) / totalCount);
    final VirtualFile virtualFile=psiFile.getVirtualFile();
    if (virtualFile != null) {
      indicator.setText(AnalysisScopeBundle.message("find.dependencies.progress.text",virtualFile.getPresentableUrl()));
    }
  }
  return count;
}
