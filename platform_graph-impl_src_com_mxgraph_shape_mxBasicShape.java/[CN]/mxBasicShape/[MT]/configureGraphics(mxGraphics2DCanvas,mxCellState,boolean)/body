{
  Map<String,Object> style=state.getStyle();
  if (background) {
    Paint fillPaint=hasGradient(canvas,state) ? canvas.createFillPaint(getGradientBounds(canvas,state),style) : null;
    if (fillPaint != null) {
      canvas.getGraphics().setPaint(fillPaint);
      return true;
    }
 else {
      Color color=getFillColor(canvas,state);
      canvas.getGraphics().setColor(color);
      return color != null;
    }
  }
 else {
    canvas.getGraphics().setPaint(null);
    Color color=getStrokeColor(canvas,state);
    canvas.getGraphics().setColor(color);
    canvas.getGraphics().setStroke(canvas.createStroke(style));
    return color != null;
  }
}
