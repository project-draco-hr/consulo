{
  try {
    URL curl=BrowserUtil.getURL(url);
    if (curl != null) {
      final String urlString=curl.toString();
      String[] commandLine;
      if (SystemInfo.isWindows && isUseDefaultBrowser()) {
        commandLine=new String[command.length + 2];
        System.arraycopy(command,0,commandLine,0,command.length);
        commandLine[commandLine.length - 2]="\"\"";
        commandLine[commandLine.length - 1]="\"" + redirectUrl(url,urlString) + "\"";
      }
 else {
        commandLine=new String[command.length + 1];
        System.arraycopy(command,0,commandLine,0,command.length);
        if (SystemInfo.isWindows) {
          commandLine[commandLine.length - 1]="\"" + urlString + "\"";
        }
 else {
          commandLine[commandLine.length - 1]=urlString.replaceAll(" ","%20");
        }
      }
      Runtime.getRuntime().exec(commandLine);
    }
 else {
      showErrorMessage(IdeBundle.message("error.malformed.url",url),CommonBundle.getErrorTitle());
    }
  }
 catch (  final IOException e) {
    showErrorMessage(IdeBundle.message("error.cannot.start.browser",e.getMessage()),CommonBundle.getErrorTitle());
  }
}
