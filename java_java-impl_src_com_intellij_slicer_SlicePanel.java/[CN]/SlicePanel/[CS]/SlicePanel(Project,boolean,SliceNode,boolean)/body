{
  super(new BorderLayout());
  ApplicationManager.getApplication().assertIsDispatchThread();
  myProject=project;
  myTree=createTree();
  myBuilder=new SliceTreeBuilder(myTree,project,dataFlowToThis,rootNode,splitByLeafExpressions);
  myBuilder.setCanYieldUpdate(!ApplicationManager.getApplication().isUnitTestMode());
  Disposer.register(this,myBuilder);
  myBuilder.addSubtreeToUpdate((DefaultMutableTreeNode)myTree.getModel().getRoot(),new Runnable(){
    public void run(){
      if (isDisposed || myBuilder.isDisposed() || myProject.isDisposed())       return;
      final SliceNode rootNode=myBuilder.getRootSliceNode();
      myBuilder.expand(rootNode,new Runnable(){
        public void run(){
          if (isDisposed || myBuilder.isDisposed() || myProject.isDisposed())           return;
          myBuilder.select(rootNode.myCachedChildren.get(0));
        }
      }
);
      treeSelectionChanged();
    }
  }
);
  layoutPanel();
}
