{
  myEditor=editor;
  myCaretModel=editor.getCaretModel();
  myDocument=editor.getDocument();
  myBlankLineIndentPreserved=isBlankLineIndentPreserved(settings,language);
  int caretOffset=getCaretOffset();
  int lineStartOffset=getLineStartOffsetByTotalOffset(caretOffset);
  int lineEndOffset=getLineEndOffsetByTotalOffset(caretOffset);
  boolean shouldFixCaretPosition=rangeHasWhiteSpaceSymbolsOnly(myDocument.getCharsSequence(),lineStartOffset,lineEndOffset);
  if (shouldFixCaretPosition) {
    initRestoreInfo(caretOffset);
  }
}
