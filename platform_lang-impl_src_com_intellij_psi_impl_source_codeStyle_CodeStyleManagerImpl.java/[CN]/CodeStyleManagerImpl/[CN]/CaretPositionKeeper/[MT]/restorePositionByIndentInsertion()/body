{
  if (myBeforeCaretRangeMarker == null || !myBeforeCaretRangeMarker.isValid() || myCaretIndentToRestore == null || myBlankLineIndentPreserved) {
    return;
  }
  int newCaretLineStartOffset=myBeforeCaretRangeMarker.getEndOffset();
  myBeforeCaretRangeMarker.dispose();
  if (myCaretModel.getVisualPosition().column == myVisualColumnToRestore) {
    return;
  }
  insertWhiteSpaceIndentIfNeeded(newCaretLineStartOffset);
}
