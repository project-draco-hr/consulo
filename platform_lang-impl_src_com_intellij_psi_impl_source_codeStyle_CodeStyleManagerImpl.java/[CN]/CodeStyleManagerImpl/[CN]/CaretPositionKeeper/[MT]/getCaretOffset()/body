{
  int caretOffset=myCaretModel.getOffset();
  caretOffset=Math.max(Math.min(caretOffset,myDocument.getTextLength() - 1),0);
  return caretOffset;
}
