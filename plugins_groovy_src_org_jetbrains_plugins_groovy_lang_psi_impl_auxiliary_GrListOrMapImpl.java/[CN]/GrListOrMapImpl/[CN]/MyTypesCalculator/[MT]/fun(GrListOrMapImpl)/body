{
  final GlobalSearchScope scope=listOrMap.getResolveScope();
  if (listOrMap.isMap()) {
    JavaPsiFacade facade=JavaPsiFacade.getInstance(listOrMap.getProject());
    return inferMapInitializerType(listOrMap,facade,scope);
  }
  PsiElement parent=listOrMap.getParent();
  if (parent.getParent() instanceof GrVariableDeclaration) {
    GrTypeElement typeElement=((GrVariableDeclaration)parent.getParent()).getTypeElementGroovy();
    if (typeElement != null) {
      PsiType declaredType=typeElement.getType();
      if (declaredType instanceof PsiArrayType)       return declaredType;
    }
  }
  return getTupleType(listOrMap.getInitializers(),listOrMap);
}
