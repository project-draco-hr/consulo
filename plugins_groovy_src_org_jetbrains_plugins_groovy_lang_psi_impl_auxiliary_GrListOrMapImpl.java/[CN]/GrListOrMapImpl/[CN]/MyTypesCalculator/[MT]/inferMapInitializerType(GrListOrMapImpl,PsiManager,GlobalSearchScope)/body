{
  PsiClass mapClass=manager.findClass("java.util.Map",scope);
  PsiElementFactory factory=manager.getElementFactory();
  if (mapClass != null) {
    PsiTypeParameter[] typeParameters=mapClass.getTypeParameters();
    if (typeParameters.length == 2) {
      GrNamedArgument[] namedArgs=listOrMap.getNamedArguments();
      GrExpression[] values=new GrExpression[namedArgs.length];
      for (int i=0; i < values.length; i++) {
        GrExpression expr=namedArgs[i].getExpression();
        if (expr == null)         return null;
        values[i]=expr;
      }
      PsiType initializerType=getInitializerType(values);
      PsiSubstitutor substitutor=PsiSubstitutor.EMPTY.put(typeParameters[0],factory.createTypeByFQClassName("java.lang.Object",scope)).put(typeParameters[1],initializerType);
      return factory.createType(mapClass,substitutor);
    }
 else {
      return manager.getElementFactory().createType(mapClass);
    }
  }
  return null;
}
