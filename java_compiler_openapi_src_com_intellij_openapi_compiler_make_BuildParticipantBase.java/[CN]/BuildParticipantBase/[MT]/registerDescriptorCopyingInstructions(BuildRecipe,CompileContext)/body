{
  final ConfigFile[] deploymentDescriptors=getDeploymentDescriptors();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      registerDescriptorCopyingInstructions(BuildParticipantBase.this.myModule,deploymentDescriptors,instructions);
      final CustomConfigFile[] customDescriptors=getCustomDescriptors();
      for (      CustomConfigFile descriptor : customDescriptors) {
        final String url=descriptor.getUrl();
        final VirtualFile virtualFile=VirtualFileManager.getInstance().findFileByUrl(url);
        if (virtualFile != null) {
          File file=VfsUtil.virtualToIoFile(virtualFile);
          instructions.addFileCopyInstruction(file,false,myModule,descriptor.getOutputDirectoryPath() + "/" + virtualFile.getName(),null);
        }
      }
    }
  }
);
}
