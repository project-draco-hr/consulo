{
  for (int i=0; i < groupsRoot.getChildCount(); i++) {
    ArrangementCheckBoxNode<?> child=(ArrangementCheckBoxNode<?>)groupsRoot.getChildAt(i);
    child.setSelected(false);
  }
  for (int i=0; i < rules.size(); i++) {
    ArrangementGroupingRule rule=rules.get(i);
    int index=getIndex(groupsRoot,rule.getRule());
    if (index < 0) {
      return;
    }
    ArrangementCheckBoxNode<?> child=(ArrangementCheckBoxNode<?>)groupsRoot.getChildAt(index);
    child.setSelected(true);
    if (i != index) {
      model.removeNodeFromParent(child);
      int insertionIndex=i < index ? i : i - 1;
      model.insertNodeInto(child,groupsRoot,insertionIndex);
    }
    if (child.getChildCount() > 0) {
      ArrangementComboBoxNode<ArrangementEntryOrderType> orderTypeNode=(ArrangementComboBoxNode<ArrangementEntryOrderType>)child.getChildAt(0);
      orderTypeNode.setSelectedValue(rule.getOrderType());
    }
  }
}
