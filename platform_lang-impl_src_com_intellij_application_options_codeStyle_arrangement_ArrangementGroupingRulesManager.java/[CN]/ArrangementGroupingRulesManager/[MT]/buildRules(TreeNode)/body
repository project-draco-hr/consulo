{
  List<ArrangementGroupingRule> result=new ArrayList<ArrangementGroupingRule>();
  for (int i=0; i < groupsRoot.getChildCount(); i++) {
    ArrangementCheckBoxNode<ArrangementGroupingType> groupNode=(ArrangementCheckBoxNode<ArrangementGroupingType>)groupsRoot.getChildAt(i);
    if (!groupNode.isSelected()) {
      continue;
    }
    ArrangementGroupingType groupingType=groupNode.getValue();
    if (groupNode.getChildCount() < 1) {
      result.add(new ArrangementGroupingRule(groupingType));
      continue;
    }
    ArrangementComboBoxNode<ArrangementEntryOrderType> orderNode=(ArrangementComboBoxNode<ArrangementEntryOrderType>)groupNode.getChildAt(0);
    ArrangementEntryOrderType orderType=orderNode.getSelectedValue();
    result.add(new ArrangementGroupingRule(groupingType,orderType));
  }
  return result;
}
