{
  XmlTag contextTag=context != null ? PsiTreeUtil.getContextOfType(context,XmlTag.class,false) : null;
  final XmlElementDescriptorImpl elementDescriptor=(XmlElementDescriptorImpl)XmlUtil.findXmlDescriptorByType(getDeclaration(),contextTag);
  if (elementDescriptor != null && elementDescriptor.getType() instanceof ComplexTypeDescriptor) {
    return processEnumerationImpl(((ComplexTypeDescriptor)elementDescriptor.getType()).getDeclaration(),processor);
  }
  final String namespacePrefix=getDeclaration().getNamespacePrefix();
  XmlTag type=getDeclaration().findFirstSubTag(((namespacePrefix.length() > 0) ? namespacePrefix + ":" : "") + "simpleType");
  if (type != null) {
    return processEnumerationImpl(type,processor);
  }
  return false;
}
