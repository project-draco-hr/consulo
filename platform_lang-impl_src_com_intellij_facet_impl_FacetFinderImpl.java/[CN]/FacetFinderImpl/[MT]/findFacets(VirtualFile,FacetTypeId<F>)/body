{
  final Map<VirtualFile,List<Facet>> map=getRootToFacetsMap(type);
  if (!map.isEmpty()) {
    while (file != null) {
      final List<F> list=(List<F>)((List)map.get(file));
      if (list != null) {
        return list;
      }
      file=file.getParent();
    }
  }
  return Collections.<F>emptyList();
}
