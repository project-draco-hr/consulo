{
  CachedValue<Map<VirtualFile,List<Facet>>> cachedValue=myCachedMaps.get(type);
  if (cachedValue == null) {
    cachedValue=myCachedValuesManager.createCachedValue(new CachedValueProvider<Map<VirtualFile,List<Facet>>>(){
      @Override public Result<Map<VirtualFile,List<Facet>>> compute(){
        Map<VirtualFile,List<Facet>> map=computeRootToFacetsMap(type);
        return Result.create(map,getAllFacetsOfTypeModificationTracker(type));
      }
    }
,false);
    myCachedMaps.put(type,cachedValue);
  }
  final Map<VirtualFile,List<Facet>> value=cachedValue.getValue();
  LOG.assertTrue(value != null);
  return value;
}
