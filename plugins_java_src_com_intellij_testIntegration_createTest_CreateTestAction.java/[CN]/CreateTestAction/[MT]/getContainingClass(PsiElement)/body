{
  final PsiClass psiClass=PsiTreeUtil.getParentOfType(element,PsiClass.class,false);
  if (psiClass == null) {
    final PsiFile containingFile=element.getContainingFile();
    if (containingFile instanceof PsiClassOwner) {
      final PsiClass[] classes=((PsiClassOwner)containingFile).getClasses();
      if (classes.length == 1) {
        return classes[0];
      }
    }
  }
  return psiClass;
}
