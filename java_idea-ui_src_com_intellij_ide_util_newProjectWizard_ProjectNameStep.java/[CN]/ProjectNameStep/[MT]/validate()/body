{
  final String name=myNamePathComponent.getNameValue();
  if (name.length() == 0) {
    final ApplicationInfo info=ApplicationManager.getApplication().getComponent(ApplicationInfo.class);
    throw new ConfigurationException(IdeBundle.message("prompt.new.project.file.name",info.getVersionName(),myWizardContext.getPresentationName()));
  }
  final String projectFileDirectory=getProjectFileDirectory();
  if (projectFileDirectory.length() == 0) {
    throw new ConfigurationException(IdeBundle.message("prompt.enter.project.file.location",myWizardContext.getPresentationName()));
  }
  final boolean shouldPromptCreation=myNamePathComponent.isPathChangedByUser();
  if (!ProjectWizardUtil.createDirectoryIfNotExists(IdeBundle.message("directory.project.file.directory",myWizardContext.getPresentationName()),projectFileDirectory,shouldPromptCreation)) {
    return false;
  }
  final File file=new File(projectFileDirectory);
  if (!file.canWrite()) {
    throw new ConfigurationException(String.format("Directory '%s' is not writable!\nPlease choose another project location.",projectFileDirectory));
  }
  boolean shouldContinue=true;
  final File projectFile=new File(getProjectFilePath());
  if (projectFile.exists()) {
    int answer=Messages.showYesNoDialog(IdeBundle.message("prompt.overwrite.project.file",projectFile.getAbsolutePath(),myWizardContext.getPresentationName()),IdeBundle.message("title.file.already.exists"),Messages.getQuestionIcon());
    shouldContinue=(answer == 0);
  }
  return shouldContinue;
}
