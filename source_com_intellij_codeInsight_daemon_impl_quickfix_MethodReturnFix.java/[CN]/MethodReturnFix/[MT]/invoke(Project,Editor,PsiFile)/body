{
  if (!CodeInsightUtil.prepareFileForWrite(myMethod.getContainingFile()))   return;
  PsiMethod method=myFixWholeHierarchy ? PsiSuperMethodUtil.findDeepestSuperMethod(myMethod) : myMethod;
  if (method == null)   method=myMethod;
  ChangeSignatureProcessor processor=new ChangeSignatureProcessor(myMethod.getProject(),method,false,null,method.getName(),myReturnType,RemoveUnusedParameterFix.getNewParametersInfo(method,null));
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    processor.testRun();
  }
 else {
    processor.run();
  }
  if (method.getContainingFile() != file) {
    QuickFixAction.spoilDocument(project,file);
  }
}
