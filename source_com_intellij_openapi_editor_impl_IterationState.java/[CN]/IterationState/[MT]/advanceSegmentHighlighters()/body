{
  if (myNextDocumentHighlighter != null) {
    if (myNextDocumentHighlighter.getAffectedAreaStartOffset() <= myStartOffset) {
      myCurrentHighlighters.add(myNextDocumentHighlighter);
      myNextDocumentHighlighter=null;
    }
  }
  if (myNextViewHighlighter != null) {
    if (myNextViewHighlighter.getAffectedAreaStartOffset() <= myStartOffset) {
      myCurrentHighlighters.add(myNextViewHighlighter);
      myNextViewHighlighter=null;
    }
  }
  RangeHighlighterImpl highlighter;
  while (myNextDocumentHighlighter == null && myCurrentDocHighlighterIdx < myDocumentHighlighters.size()) {
    highlighter=myDocumentHighlighters.get(myCurrentDocHighlighterIdx++);
    if (!skipHighlighter(highlighter)) {
      if (highlighter.getAffectedAreaStartOffset() > myStartOffset) {
        myNextDocumentHighlighter=highlighter;
        break;
      }
 else {
        myCurrentHighlighters.add(highlighter);
      }
    }
  }
  while (myNextViewHighlighter == null && myCurrentViewHighlighterIdx < myViewHighlighters.size()) {
    highlighter=myViewHighlighters.get(myCurrentViewHighlighterIdx++);
    if (!skipHighlighter(highlighter)) {
      if (highlighter.getAffectedAreaStartOffset() > myStartOffset) {
        myNextViewHighlighter=highlighter;
        break;
      }
 else {
        myCurrentHighlighters.add(highlighter);
      }
    }
  }
  if (myCurrentHighlighters.size() == 1) {
    if ((myCurrentHighlighters.get(0)).getAffectedAreaEndOffset() <= myStartOffset) {
      myCurrentHighlighters=new ArrayList<RangeHighlighterImpl>();
    }
  }
 else   if (myCurrentHighlighters.size() > 0) {
    ArrayList<RangeHighlighterImpl> copy=new ArrayList<RangeHighlighterImpl>(myCurrentHighlighters.size());
    for (int i=0; i < myCurrentHighlighters.size(); i++) {
      highlighter=myCurrentHighlighters.get(i);
      if (highlighter.getAffectedAreaEndOffset() > myStartOffset) {
        copy.add(highlighter);
      }
    }
    myCurrentHighlighters=copy;
  }
}
