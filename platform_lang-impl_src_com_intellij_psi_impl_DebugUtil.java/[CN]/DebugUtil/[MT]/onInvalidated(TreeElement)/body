{
  treeElement.acceptTree(new RecursiveTreeElementWalkingVisitor(){
    @Override protected void visitNode(    TreeElement element){
      Processor<PsiElement> callback=element.getUserData(TRACK_INVALIDATION_KEY);
      if (callback != null) {
        PsiElement psi=element.getPsi();
        if (psi != null)         callback.process(psi);
      }
    }
  }
);
}
