{
  final GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(myLocalSettings.PATH_TO_CVS_CLIENT);
  commandLine.addParameter("-v");
  execute(commandLine);
  try {
    StringBuilder responseBuilder=new StringBuilder();
    while (true) {
      int c=myInputStream.read();
      if (c == -1) {
        break;
      }
      responseBuilder.append((char)c);
    }
    String[] lines=responseBuilder.toString().split("\n");
    for (    String line : lines) {
      if (line.trim().endsWith("(client)")) {
        throw new AuthenticationException("CVS client does not support server mode operation",null);
      }
      if (line.trim().length() > 0) {
        break;
      }
    }
  }
 catch (  IOException e) {
    throw new AuthenticationException("Can't read CVS version",e);
  }
  closeInternal();
}
