{
  String name=getNewName();
  String type=myReturnTypeField.getText().trim();
  StringBuilder builder=new StringBuilder();
  if (myPublicRadioButton.isSelected() && type.length() == 0) {
    builder.append(GrModifier.DEF);
  }
  if (myPrivateRadioButton.isSelected()) {
    builder.append(GrModifier.PRIVATE).append(' ');
  }
 else   if (myProtectedRadioButton.isSelected()) {
    builder.append(GrModifier.PROTECTED).append(' ');
  }
  builder.append(type).append(' ');
  builder.append(name).append('(');
  final List<GrParameterInfo> infos=myParameterModel.getParameterInfos();
  if (infos.size() > 0) {
    final List<String> paramsText=ContainerUtil.map(infos,new Function<GrParameterInfo,String>(){
      public String fun(      GrParameterInfo grParameterInfo){
        return generateParameterText(grParameterInfo);
      }
    }
);
    builder.append("\n").append(INDENT);
    builder.append(StringUtil.join(paramsText,",\n" + INDENT));
    builder.append('\n');
  }
  builder.append(')');
  final PsiTypeCodeFragment[] exceptions=myExceptionTableModel.getTypeCodeFragments();
  if (exceptions.length > 0) {
    builder.append("\nthrows\n");
    final List<String> exceptionNames=ContainerUtil.map(exceptions,new Function<PsiTypeCodeFragment,String>(){
      public String fun(      PsiTypeCodeFragment fragment){
        return fragment.getText();
      }
    }
);
    builder.append(INDENT).append(StringUtil.join(exceptionNames,",\n" + INDENT));
  }
  return builder.toString();
}
