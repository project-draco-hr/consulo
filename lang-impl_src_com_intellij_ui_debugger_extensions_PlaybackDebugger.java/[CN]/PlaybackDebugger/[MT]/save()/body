{
  BufferedWriter writer=null;
  try {
    if (!maybeCreateFile())     return;
    final OutputStream os=getCurrentScriptFile().getOutputStream(this);
    writer=new BufferedWriter(new OutputStreamWriter(os));
    final String toWrite=myText.getText();
    writer.write(toWrite != null ? toWrite : "");
  }
 catch (  IOException e) {
    Messages.showErrorDialog(e.getMessage(),"Cannot save script");
  }
 finally {
    if (writer != null) {
      try {
        writer.close();
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
}
