{
  myComponent=new JPanel(new BorderLayout());
  final DocumentListener docListener=new DocumentListener(){
    public void insertUpdate(    DocumentEvent e){
      myChanged=true;
    }
    public void removeUpdate(    DocumentEvent e){
      myChanged=true;
    }
    public void changedUpdate(    DocumentEvent e){
      myChanged=true;
    }
  }
;
  final DefaultActionGroup controlGroup=new DefaultActionGroup();
  controlGroup.add(new RunOnFameActivationAction());
  controlGroup.add(new ActivateFrameAndRun());
  controlGroup.addSeparator();
  controlGroup.add(new StopAction());
  controlGroup.addSeparator();
  controlGroup.add(new SaveAction());
  JPanel north=new JPanel(new BorderLayout());
  north.add(ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,controlGroup,true).getComponent(),BorderLayout.WEST);
  final JPanel right=new JPanel(new BorderLayout());
  myCurrentScript.getDocument().addDocumentListener(docListener);
  right.add(myCurrentScript,BorderLayout.CENTER);
  final DefaultActionGroup loadGroup=new DefaultActionGroup();
  loadGroup.add(new LoadFromFileAction());
  loadGroup.addSeparator();
  loadGroup.add(new SetScriptDirAction());
  final ActionToolbar tb=ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,loadGroup,true);
  tb.setLayoutPolicy(ActionToolbar.NOWRAP_LAYOUT_POLICY);
  right.add(tb.getComponent(),BorderLayout.EAST);
  north.add(right,BorderLayout.CENTER);
  myComponent.add(north,BorderLayout.NORTH);
  myText=new JTextArea();
  myText.getDocument().addDocumentListener(docListener);
  final String text=System.getProperty("idea.playback.script");
  if (text != null) {
    myText.setText(text);
  }
  final Splitter script2Log=new Splitter(true);
  script2Log.setFirstComponent(new JScrollPane(myText));
  myList=new JList(myMessage);
  myList.setCellRenderer(new MyListRenderer());
  script2Log.setSecondComponent(new JScrollPane(myList));
  myComponent.add(script2Log,BorderLayout.CENTER);
  myVfsListener=new VirtualFileAdapter(){
    @Override public void contentsChanged(    VirtualFileEvent event){
      final VirtualFile file=getCurrentScriptFile();
      if (file != null && file.equals(event.getFile())) {
        loadFrom(event.getFile());
      }
    }
  }
;
  LocalFileSystem.getInstance().addVirtualFileListener(myVfsListener);
}
