{
  if (element == myRootElement) {
    ArrayList<LibraryTableTreeContentElement> elements=new ArrayList<LibraryTableTreeContentElement>(3);
    Library library=myRootElement.getLibrary();
    final String[] sources=myParentEditor.getLibraryEditor(library).getUrls(OrderRootType.SOURCES);
    if (sources.length > 0) {
      elements.add(new SourcesElement(myRootElement));
    }
    final String[] javadocs=myParentEditor.getLibraryEditor(library).getUrls(OrderRootType.JAVADOC);
    if (javadocs.length > 0) {
      elements.add(new JavadocElement(myRootElement));
    }
    final String[] classes=myParentEditor.getLibraryEditor(library).getUrls(OrderRootType.CLASSES);
    if (classes.length > 0) {
      elements.add(new ClassesElement(myRootElement));
    }
    final String[] annotations=myParentEditor.getLibraryEditor(library).getUrls(OrderRootType.ANNOTATIONS);
    if (annotations.length > 0) {
      elements.add(new AnnotationElement(myRootElement));
    }
    return elements.toArray();
  }
  if (element instanceof ClassesElement) {
    return buildItems(element,((ClassesElement)element).getParent().getLibrary(),OrderRootType.CLASSES);
  }
  if (element instanceof SourcesElement) {
    return buildItems(element,((SourcesElement)element).getParent().getLibrary(),OrderRootType.SOURCES);
  }
  if (element instanceof JavadocElement) {
    return buildItems(element,((JavadocElement)element).getParent().getLibrary(),OrderRootType.JAVADOC);
  }
  if (element instanceof AnnotationElement) {
    return buildItems(element,((AnnotationElement)element).getParent().getLibrary(),OrderRootType.ANNOTATIONS);
  }
  return ArrayUtil.EMPTY_OBJECT_ARRAY;
}
