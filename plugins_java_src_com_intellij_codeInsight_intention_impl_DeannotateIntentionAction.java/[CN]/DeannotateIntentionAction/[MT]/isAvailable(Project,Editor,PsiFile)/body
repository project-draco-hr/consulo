{
  PsiModifierListOwner listOwner=getContainer(editor,file);
  if (listOwner != null) {
    final ExternalAnnotationsManager externalAnnotationsManager=ExternalAnnotationsManager.getInstance(project);
    final PsiAnnotation[] annotations=externalAnnotationsManager.findExternalAnnotations(listOwner);
    if (annotations != null && annotations.length > 0) {
      if (annotations.length == 1) {
        myAnnotationName=annotations[0].getQualifiedName();
      }
      final List<PsiFile> files=externalAnnotationsManager.findExternalAnnotationsFiles(listOwner);
      if (files == null || files.isEmpty())       return false;
      final VirtualFile virtualFile=files.get(0).getVirtualFile();
      return virtualFile != null && (virtualFile.isWritable() || virtualFile.isInLocalFileSystem());
    }
  }
  return false;
}
