{
  for (  String vcsName : myVcsNameToConfigurableMap.keySet()) {
    Configurable configurable=myVcsNameToConfigurableMap.get(vcsName);
    if (configurable != null && configurable.isModified())     try {
      configurable.apply();
    }
 catch (    ConfigurationException e) {
      Messages.showErrorDialog("Unable to save settings. " + e.getMessage(),"Unable To Save Settings");
    }
  }
  final VcsWrapper wrapper=new VcsWrapper((AbstractVcs)myVcses.getSelectedValue());
  myVcsesToUpdate.setSelectedItem(wrapper);
  final ComboBoxModel model=myVcsesToUpdate.getModel();
  for (int i=0; i < model.getSize(); i++) {
    final Object vcsWrapper=model.getElementAt(i);
    if (vcsWrapper instanceof DefaultVcsWrapper) {
      final DefaultVcsWrapper defaultVcsWrapper=(DefaultVcsWrapper)vcsWrapper;
      if (new VcsWrapper(defaultVcsWrapper.getDefaultVcs()).equals(wrapper)) {
        myVcsesToUpdate.setSelectedIndex(i);
        break;
      }
    }
  }
  super.doOKAction();
}
