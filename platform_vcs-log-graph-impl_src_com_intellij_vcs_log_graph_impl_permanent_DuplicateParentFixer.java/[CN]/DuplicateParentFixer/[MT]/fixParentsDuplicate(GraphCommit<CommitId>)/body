{
  List<CommitId> parents=commit.getParents();
  if (parents.size() <= 1)   return commit;
  if (parents.size() == 2) {
    CommitId commitId0=parents.get(0);
    if (!commitId0.equals(parents.get(1))) {
      return commit;
    }
 else {
      return new DelegateGraphCommit<CommitId>(commit,Collections.singletonList(commitId0));
    }
  }
  Set<CommitId> allParents=new HashSet<CommitId>(parents);
  if (parents.size() == allParents.size())   return commit;
  List<CommitId> correctParents=ContainerUtil.newArrayList();
  for (  CommitId commitId : parents) {
    if (allParents.remove(commitId)) {
      correctParents.add(commitId);
    }
  }
  return new DelegateGraphCommit<CommitId>(commit,correctParents);
}
