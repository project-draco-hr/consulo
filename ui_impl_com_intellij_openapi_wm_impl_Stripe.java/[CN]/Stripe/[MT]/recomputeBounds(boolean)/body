{
  final boolean horizontal=isHorizontal();
  int eachX=-1;
  int eachY=0;
  Dimension size=new Dimension();
  final int gap=1;
  Dimension max=new Dimension();
  for (  StripeButton eachButton : myButtons) {
    final Dimension eachSize=eachButton.getPreferredSize();
    max.width=Math.max(eachSize.width,max.width);
    max.height=Math.max(eachSize.height,max.height);
  }
  for (  StripeButton eachButton : myButtons) {
    if (!eachButton.isVisible())     continue;
    final Dimension eachSize=eachButton.getPreferredSize();
    if (eachX == -1) {
      if (horizontal) {
        final Insets insets=eachButton.getInsets();
        eachX=eachSize.height - (insets == null ? 0 : insets.top);
      }
 else {
        eachX=0;
      }
    }
    if (setBounds) {
      final int width=horizontal ? eachSize.width : max.width;
      final int height=horizontal ? max.height : eachSize.height;
      eachButton.setBounds(eachX,eachY,width,height);
    }
    if (horizontal) {
      final int deltaX=eachSize.width + gap;
      eachX+=deltaX;
      size.width+=deltaX;
      size.height=eachSize.height;
    }
 else {
      final int deltaY=eachSize.height + gap;
      eachY+=deltaY;
      size.width=eachSize.width;
      size.height+=deltaY;
    }
  }
  return size;
}
