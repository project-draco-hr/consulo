{
  for (  Block block : list) {
    final TextRange textRange=block.getTextRange();
    if (range.contains(textRange)) {
      result.add(new InjectedLanguageBlockWrapper(block,myOffset,range));
    }
 else     if (textRange.intersectsStrict(range)) {
      collectBlocksIntersectingRange(block.getSubBlocks(),result,range);
    }
  }
}
