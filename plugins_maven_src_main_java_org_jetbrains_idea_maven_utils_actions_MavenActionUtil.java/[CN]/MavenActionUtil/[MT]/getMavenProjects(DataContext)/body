{
  Set<MavenProject> result=new LinkedHashSet<MavenProject>();
  for (  VirtualFile each : getFiles(context)) {
    MavenProject project=getProjectsManager(context).findProject(each);
    if (project != null)     result.add(project);
  }
  if (result.isEmpty()) {
    for (    Module each : getModules(context)) {
      MavenProject project=getProjectsManager(context).findProject(each);
      if (project != null)       result.add(project);
    }
  }
  return new ArrayList<MavenProject>(result);
}
