{
  Transferable[] allContents=CopyPasteManager.getInstance().getAllContents();
  ArrayList<Transferable> contents=new ArrayList<Transferable>();
  ArrayList shortened=new ArrayList();
  for (int i=0; i < allContents.length; i++) {
    Transferable content=allContents[i];
    try {
      String fullString=(String)content.getTransferData(DataFlavor.stringFlavor);
      if (fullString != null) {
        fullString=StringUtil.convertLineSeparators(fullString,"\n");
        contents.add(content);
        int lastNewLineIdx=fullString.indexOf('\n');
        shortened.add(lastNewLineIdx == -1 ? fullString : fullString.substring(0,lastNewLineIdx) + " ...");
      }
    }
 catch (    UnsupportedFlavorException e) {
    }
catch (    IOException e) {
    }
  }
  myAllContents=contents.toArray(new Transferable[contents.size()]);
  myList.setListData(shortened.toArray(new String[shortened.size()]));
}
