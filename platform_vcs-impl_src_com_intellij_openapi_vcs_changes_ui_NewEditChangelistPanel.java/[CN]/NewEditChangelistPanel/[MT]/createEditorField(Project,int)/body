{
  final EditorTextFieldProvider service=ServiceManager.getService(project,EditorTextFieldProvider.class);
  final EditorTextField editorField;
  final EnumSet<EditorCustomization.Feature> enabledFeatures=EnumSet.of(EditorCustomization.Feature.SPELL_CHECK);
  final EnumSet<EditorCustomization.Feature> disabledFeatures=EnumSet.noneOf(EditorCustomization.Feature.class);
  if (defaultLines == 1) {
    disabledFeatures.add(EditorCustomization.Feature.HORIZONTAL_SCROLLBAR);
    enabledFeatures.add(EditorCustomization.Feature.ONE_LINE);
  }
 else {
    enabledFeatures.add(EditorCustomization.Feature.SOFT_WRAP);
  }
  editorField=service.getEditorField(FileTypes.PLAIN_TEXT.getLanguage(),project,enabledFeatures,disabledFeatures);
  final int height=editorField.getFontMetrics(editorField.getFont()).getHeight();
  editorField.getComponent().setMinimumSize(new Dimension(100,(int)(height * 1.3)));
  return editorField;
}
