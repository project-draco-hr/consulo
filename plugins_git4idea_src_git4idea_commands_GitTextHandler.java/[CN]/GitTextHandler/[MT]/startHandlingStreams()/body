{
  myHandler=new OSProcessHandler(myProcess,myCommandLine.getCommandLineString()){
    @Override public Charset getCharset(){
      Charset charset=GitTextHandler.this.getCharset();
      return charset == null ? super.getCharset() : charset;
    }
  }
;
  myHandler.addProcessListener(new ProcessListener(){
    public void startNotified(    final ProcessEvent event){
    }
    public void processTerminated(    final ProcessEvent event){
      final int exitCode=event.getExitCode();
      setExitCode(exitCode);
      cleanupEnv();
      GitTextHandler.this.processTerminated(exitCode);
      listeners().processTerminated(exitCode);
    }
    public void processWillTerminate(    final ProcessEvent event,    final boolean willBeDestroyed){
    }
    public void onTextAvailable(    final ProcessEvent event,    final Key outputType){
      GitTextHandler.this.onTextAvailable(event.getText(),outputType);
    }
  }
);
  myHandler.startNotify();
}
