{
  final PsiElement scope=getScope();
  final PsiElement element=getNameElement();
  if (element == null)   return new MyReference(null);
  final String name=element.getText();
  PsiType[] signature=getSignature();
  final PsiMethod[] methods=getAllMethods(scope,this);
  nextMethod:   for (int i=0; i < methods.length; i++) {
    PsiMethod method=methods[i];
    if (!method.getName().equals(name))     continue;
    if (signature == null) {
      return new MyReference(method);
    }
 else {
      final PsiParameter[] parameters=method.getParameterList().getParameters();
      if (parameters.length != signature.length)       continue;
      for (int j=0; j < parameters.length; j++) {
        PsiParameter parameter=parameters[j];
        if (!TypeConversionUtil.erasure(parameter.getType()).equals(signature[j]))         continue nextMethod;
      }
      return new MyReference(method){
        public Object[] getVariants(){
          final List<PsiMethod> lst=new ArrayList<PsiMethod>();
          for (int i=0; i < methods.length; i++) {
            final PsiMethod method=methods[i];
            if (name.equals(method.getName())) {
              lst.add(method);
            }
          }
          return lst.toArray();
        }
      }
;
    }
  }
  if (signature != null)   return new MyReference(null);
  final PsiVariable[] vars=getAllVariables(scope,this);
  for (int i=0; i < vars.length; i++) {
    PsiVariable var=vars[i];
    if (!var.getName().equals(name))     continue;
    return new MyReference(var);
  }
  return new MyReference(null);
}
