{
  TreePath[] paths=e.getPaths();
  boolean enabled=true;
  for (  TreePath treePath : paths) {
    if (!e.isAddedPath(treePath))     continue;
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)treePath.getLastPathComponent();
    Object userObject=node.getUserObject();
    if (!(userObject instanceof FileNodeDescriptor)) {
      enabled=false;
      break;
    }
    FileElement descriptor=((FileNodeDescriptor)userObject).getElement();
    VirtualFile file=descriptor.getFile();
    enabled=myChooserDescriptor.isFileSelectable(file);
  }
  setOKActionEnabled(enabled);
}
