{
  final Object[] path=event.getPath().getPath();
  Set<VirtualFile> toAdd=new HashSet<VirtualFile>();
  for (  Object o : path) {
    final DefaultMutableTreeNode node=((DefaultMutableTreeNode)o);
    Object userObject=node.getUserObject();
    if (userObject instanceof FileNodeDescriptor) {
      final VirtualFile file=((FileNodeDescriptor)userObject).getElement().getFile();
      if (file != null && myRequests.get(file) == null) {
        toAdd.add(file);
      }
    }
  }
  if (toAdd.size() > 0) {
    final Set<LocalFileSystem.WatchRequest> requests=LocalFileSystem.getInstance().addRootsToWatch(toAdd,false);
    for (    LocalFileSystem.WatchRequest request : requests) {
      myRequests.put(request.getRoot(),request);
    }
  }
}
