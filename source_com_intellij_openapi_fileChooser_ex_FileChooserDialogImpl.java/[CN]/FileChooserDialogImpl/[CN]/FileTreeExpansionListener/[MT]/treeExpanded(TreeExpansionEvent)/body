{
  final Object[] path=event.getPath().getPath();
  Set<String> toAdd=new HashSet<String>();
  for (  Object o : path) {
    final DefaultMutableTreeNode node=((DefaultMutableTreeNode)o);
    Object userObject=node.getUserObject();
    if (userObject instanceof FileNodeDescriptor) {
      final VirtualFile file=((FileNodeDescriptor)userObject).getElement().getFile();
      if (file != null && file.isDirectory()) {
        final String rootPath=file.getPath();
        if (myRequests.get(rootPath) == null) {
          toAdd.add(rootPath);
        }
      }
    }
  }
  if (toAdd.size() > 0) {
    final Set<LocalFileSystem.WatchRequest> requests=LocalFileSystem.getInstance().addRootsToWatch(toAdd,false);
    for (    LocalFileSystem.WatchRequest request : requests) {
      myRequests.put(request.getRootPath(),request);
    }
  }
}
