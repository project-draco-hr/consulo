{
  init();
  VirtualFile selectFile=null;
  if (toSelect == null && ourLastFile == null) {
    if (project != null && project.getBaseDir() != null) {
      selectFile=project.getBaseDir();
    }
  }
 else {
    selectFile=(toSelect == null) ? ourLastFile : toSelect;
  }
  final VirtualFile file=selectFile;
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (file == null || !file.isValid()) {
        return;
      }
      if (select(file)) {
        return;
      }
      VirtualFile parent=file.getParent();
      if (parent != null) {
        select(parent);
      }
    }
  }
);
  show();
  return myChosenFiles;
}
