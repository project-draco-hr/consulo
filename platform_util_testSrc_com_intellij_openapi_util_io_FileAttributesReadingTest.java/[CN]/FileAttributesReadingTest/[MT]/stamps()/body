{
  FileAttributes attributes=FileSystemUtil.getAttributes(myTempDirectory);
  assumeTrue(attributes != null && attributes.lastModified > (attributes.lastModified / 1000) * 1000);
  long t1=System.currentTimeMillis();
  TimeoutUtil.sleep(10);
  File file=IoTestUtil.createTestFile(myTempDirectory,"test.txt");
  TimeoutUtil.sleep(10);
  long t2=System.currentTimeMillis();
  attributes=getAttributes(file);
  assertTrue(attributes.lastModified + " not in " + t1+ ".."+ t2,t1 <= attributes.lastModified && attributes.lastModified <= t2);
  t1=System.currentTimeMillis();
  TimeoutUtil.sleep(10);
  FileUtil.writeToFile(file,myTestData);
  TimeoutUtil.sleep(10);
  t2=System.currentTimeMillis();
  attributes=getAttributes(file);
  assertTrue(attributes.lastModified + " not in " + t1+ ".."+ t2,t1 <= attributes.lastModified && attributes.lastModified <= t2);
  ProcessBuilder cmd=SystemInfo.isWindows ? new ProcessBuilder("attrib","-A",file.getPath()) : new ProcessBuilder("chmod","644",file.getPath());
  assertEquals(0,cmd.start().waitFor());
  attributes=getAttributes(file);
  assertTrue(attributes.lastModified + " not in " + t1+ ".."+ t2,t1 <= attributes.lastModified && attributes.lastModified <= t2);
}
