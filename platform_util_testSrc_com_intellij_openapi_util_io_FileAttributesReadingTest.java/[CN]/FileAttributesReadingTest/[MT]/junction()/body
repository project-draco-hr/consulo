{
  assumeTrue(SystemInfo.isWindows);
  final File target=FileUtil.createTempDirectory(myTempDirectory,"temp.",".dir");
  final File path=FileUtil.createTempFile(myTempDirectory,"junction.",".dir",false);
  final File junction=IoTestUtil.createJunction(target.getPath(),path.getAbsolutePath());
  FileAttributes attributes=getAttributes(junction);
  assertEquals(FileAttributes.Type.DIRECTORY,attributes.type);
  assertEquals(0,attributes.flags);
  assertTrue(attributes.isWritable());
  final String resolved1=FileSystemUtil.resolveSymLink(junction);
  assertEquals(SystemInfo.isWinVistaOrNewer ? target.getPath() : junction.getPath(),resolved1);
  FileUtil.delete(target);
  attributes=getAttributes(junction);
  assertEquals(FileAttributes.Type.DIRECTORY,attributes.type);
  assertEquals(0,attributes.flags);
  assertTrue(attributes.isWritable());
  final String resolved2=FileSystemUtil.resolveSymLink(junction);
  assertEquals(SystemInfo.isWinVistaOrNewer ? null : junction.getPath(),resolved2);
}
