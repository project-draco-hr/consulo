{
  assumeTrue(SystemInfo.areSymLinksSupported);
  final File file=FileUtil.createTempFile(myTempDirectory,"test.",".txt");
  FileUtil.writeToFile(file,myTestData);
  assertTrue(file.setLastModified(file.lastModified() - 5000));
  assertTrue(file.setWritable(false,false));
  final File link1=IoTestUtil.createTempLink(file.getPath(),new File(myTempDirectory,"link1").getPath());
  final File link2=IoTestUtil.createTempLink(link1.getPath(),new File(myTempDirectory,"link2").getPath());
  final FileAttributes attributes=getAttributes(link2);
  assertEquals(FileAttributes.Type.FILE,attributes.type);
  assertEquals(FileAttributes.SYM_LINK,attributes.flags);
  assertEquals(myTestData.length,attributes.length);
  assertTimestampsEqual(file.lastModified(),attributes.lastModified);
  assertFalse(attributes.isWritable());
  final String target=FileSystemUtil.resolveSymLink(link2);
  assertEquals(file.getPath(),target);
}
