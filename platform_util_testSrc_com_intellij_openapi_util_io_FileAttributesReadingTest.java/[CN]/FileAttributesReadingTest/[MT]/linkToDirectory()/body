{
  assumeTrue(SystemInfo.areSymLinksSupported);
  final File file=FileUtil.createTempDirectory(myTempDirectory,"test.",".tmp");
  if (SystemInfo.isUnix)   assertTrue(file.setWritable(false,false));
  assertTrue(file.setLastModified(file.lastModified() - 5000));
  final File link=IoTestUtil.createSymLink(file.getPath(),new File(myTempDirectory,"link").getPath());
  final FileAttributes attributes=getAttributes(link);
  assertEquals(FileAttributes.Type.DIRECTORY,attributes.type);
  assertEquals(FileAttributes.SYM_LINK,attributes.flags);
  assertEquals(file.length(),attributes.length);
  assertTimestampsEqual(file.lastModified(),attributes.lastModified);
  if (SystemInfo.isUnix)   assertFalse(attributes.isWritable());
  final String target=FileSystemUtil.resolveSymLink(link);
  assertEquals(file.getPath(),target);
}
