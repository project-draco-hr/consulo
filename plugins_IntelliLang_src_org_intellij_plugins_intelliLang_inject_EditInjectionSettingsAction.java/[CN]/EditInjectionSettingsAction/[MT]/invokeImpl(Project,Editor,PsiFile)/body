{
  final PsiFile psiFile=InjectedLanguageUtil.findInjectedPsiNoCommit(file,editor.getCaretModel().getOffset());
  if (psiFile == null)   return;
  final PsiLanguageInjectionHost host=InjectedLanguageManager.getInstance(project).getInjectionHost(psiFile);
  if (host == null)   return;
  final LanguageInjectionSupport support=psiFile.getUserData(LanguageInjectionSupport.SETTINGS_EDITOR);
  if (support == null)   return;
  try {
    if (!support.editInjectionInPlace(host)) {
      ShowSettingsUtil.getInstance().editConfigurable(project,new InjectionsSettingsUI(project,Configuration.getProjectInstance(project)));
    }
  }
  finally {
    FileContentUtil.reparseFiles(project,Collections.<VirtualFile>emptyList(),true);
  }
}
