{
  List<PsiElement> result=new ArrayList<PsiElement>();
  final PsiElement[] elements1=scope1.myScope;
  final PsiElement[] elements2=scope2.myScope;
  for (  final PsiElement element1 : elements1) {
    for (    final PsiElement element2 : elements2) {
      final PsiElement element=intersectScopeElements(element1,element2);
      if (element != null) {
        result.add(element);
      }
    }
  }
  return new LocalSearchScope(PsiUtilBase.toPsiElementArray(result),null,scope1.myIgnoreInjectedPsi || scope2.myIgnoreInjectedPsi);
}
