{
  final FocusCommand cmd=myFocusCommandOnAppActivation;
  ActionCallback callback=myCallbackOnActivation;
  myFocusCommandOnAppActivation=null;
  myCallbackOnActivation=null;
  if (cmd != null) {
    requestFocus(cmd,true).notifyWhenDone(callback);
  }
 else {
    final Component owner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
    final Component old=myFocusedComponentOnDeactivation != null ? myFocusedComponentOnDeactivation.get() : null;
    if (owner == null && old != null) {
      requestFocus(old,false);
    }
  }
}
