{
  checkId(toolWindowId);
  final Stripe stripe=myToolWindowsPane.getStripeFor(toolWindowId);
  final ToolWindowImpl window=getInternalDecorator(toolWindowId).getToolWindow();
  if (!window.isAvailable()) {
    window.setPlaceholderMode(true);
    stripe.updateState();
    stripe.revalidate();
    stripe.repaint();
  }
  final JLabel label=new JLabel(text);
  label.setBorder(null);
  final JPanel content=new NonOpaquePanel(new BorderLayout((int)(label.getIconTextGap() * 1.5),(int)(label.getIconTextGap() * 1.5)));
  content.add(label,BorderLayout.CENTER);
  final NonOpaquePanel north=new NonOpaquePanel(new BorderLayout());
  north.add(new JLabel(icon),BorderLayout.NORTH);
  content.add(north,BorderLayout.WEST);
  content.setBorder(new EmptyBorder(2,4,2,4));
  final Balloon balloon=new Balloon(content,Color.darkGray,new Color(186,238,186,230)){
    protected void onHidden(){
      window.setPlaceholderMode(false);
      stripe.updateState();
      stripe.revalidate();
      stripe.repaint();
    }
  }
;
  final StripeButton button=stripe.getButtonFor(toolWindowId);
  final ToolWindowAnchor anchor=getInfo(toolWindowId).getAnchor();
  Balloon.Position position=Balloon.BELOW;
  if (ToolWindowAnchor.TOP == anchor) {
    position=Balloon.BELOW;
  }
 else   if (ToolWindowAnchor.BOTTOM == anchor) {
    position=Balloon.UNDER;
  }
 else   if (ToolWindowAnchor.LEFT == anchor) {
    position=Balloon.AT_RIGHT;
  }
 else   if (ToolWindowAnchor.RIGHT == anchor) {
    position=Balloon.AT_LEFT;
  }
  final Balloon.Position position1=position;
  final Runnable show=new Runnable(){
    public void run(){
      if (button.isShowing()) {
        final Point point=new Point(button.getBounds().width / 2,button.getHeight() / 2 - 2);
        balloon.show(new RelativePoint(button,point),position1);
      }
 else {
        final Rectangle bounds=myToolWindowsPane.getBounds();
        final Point target=UIUtil.getCenterPoint(bounds,new Dimension(1,1));
        if (ToolWindowAnchor.TOP == anchor) {
          target.y=0;
        }
 else         if (ToolWindowAnchor.BOTTOM == anchor) {
          target.y=bounds.height;
        }
 else         if (ToolWindowAnchor.LEFT == anchor) {
          target.x=0;
        }
 else         if (ToolWindowAnchor.RIGHT == anchor) {
          target.x=bounds.width;
        }
        balloon.setShowPointer(false);
        balloon.show(new RelativePoint(myToolWindowsPane,target),position1);
      }
    }
  }
;
  if (!button.isValid()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        show.run();
      }
    }
);
  }
 else {
    show.run();
  }
}
