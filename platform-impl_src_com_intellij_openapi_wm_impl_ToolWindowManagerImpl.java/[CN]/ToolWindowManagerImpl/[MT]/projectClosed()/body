{
  UIManager.removePropertyChangeListener(myUIManagerPropertyChangeListener);
  LafManager.getInstance().removeLafManagerListener(myLafManagerListener);
  final ArrayList<FinalizableCommand> commandsList=new ArrayList<FinalizableCommand>();
  final String[] ids=getToolWindowIds();
  ((IdeRootPane)myFrame.getRootPane()).setToolWindowsPane(null);
  myWindowManager.releaseFrame(myFrame);
  appendUpdateToolWindowsPaneCmd(commandsList);
  for (int i=0; i < ids.length; i++) {
    final String id=ids[i];
    deactivateToolWindowImpl(id,true,commandsList);
  }
  final JComponent editorComponent=FileEditorManagerEx.getInstanceEx(myProject).getComponent();
  myEditorComponentFocusWatcher.deinstall(editorComponent);
  appendSetEditorComponentCmd(null,commandsList);
  execute(commandsList);
}
