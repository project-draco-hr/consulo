{
  final WindowInfoImpl toBeActivatedInfo=getInfo(id);
  final WindowInfoImpl[] infos=myLayout.getInfos();
  for (int i=0; i < infos.length; i++) {
    final WindowInfoImpl info=infos[i];
    if (id.equals(info.getId())) {
      continue;
    }
    if (toBeActivatedInfo.isDocked() || toBeActivatedInfo.isSliding()) {
      deactivateToolWindowImpl(info.getId(),info.isAutoHide() || info.isSliding(),commandList);
    }
 else {
      deactivateToolWindowImpl(info.getId(),info.isAutoHide() && info.isFloating() && !hasModalChild(info),commandList);
    }
  }
}
