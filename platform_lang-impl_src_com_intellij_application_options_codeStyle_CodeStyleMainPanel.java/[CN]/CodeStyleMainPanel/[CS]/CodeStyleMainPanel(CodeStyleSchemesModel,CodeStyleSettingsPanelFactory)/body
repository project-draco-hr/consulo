{
  super(new BorderLayout());
  myModel=model;
  myFactory=factory;
  mySchemesPanel=new CodeStyleSchemesPanel(model);
  model.addListener(new CodeStyleSettingsListener(){
    public void currentSchemeChanged(    final Object source){
      if (source != mySchemesPanel) {
        mySchemesPanel.onSelectedSchemeChanged();
      }
      onCurrentSchemeChanged();
    }
    public void schemeListChanged(){
      mySchemesPanel.resetSchemesCombo();
    }
    public void currentSettingsChanged(){
      ensureCurrentPanel().onSomethingChanged();
    }
    public void usePerProjectSettingsOptionChanged(){
      mySchemesPanel.usePerProjectSettingsOptionChanged();
    }
    public void schemeChanged(    final CodeStyleScheme scheme){
      ensurePanel(scheme).resetFromClone();
    }
  }
);
  addWaitCard();
  add(mySchemesPanel.getPanel(),BorderLayout.NORTH);
  DetailsComponent detComp=new DetailsComponent();
  detComp.setPaintBorder(false);
  detComp.setContent(mySettingsPanel);
  detComp.setText(getDisplayName());
  add(detComp.getComponent(),BorderLayout.CENTER);
  mySchemesPanel.resetSchemesCombo();
  mySchemesPanel.onSelectedSchemeChanged();
  onCurrentSchemeChanged();
}
