{
  final String filePart;
  if (url.startsWith(JarFileSystem.PROTOCOL_PREFIX) && url.endsWith(JarFileSystem.JAR_SEPARATOR)) {
    filePart=url.substring(JarFileSystem.PROTOCOL_PREFIX.length(),url.length() - JarFileSystem.JAR_SEPARATOR.length());
  }
 else   if (url.startsWith(LocalFileSystem.PROTOCOL_PREFIX)) {
    filePart=url.substring(JarFileSystem.PROTOCOL_PREFIX.length());
  }
 else {
    throw new IllegalArgumentException("Unknown url type: " + url);
  }
  return new File(filePart.replace('/',File.separatorChar));
}
