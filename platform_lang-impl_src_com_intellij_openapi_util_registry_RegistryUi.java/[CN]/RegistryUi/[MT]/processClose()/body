{
  if (Registry.getInstance().isRestartNeeded()) {
    final ApplicationEx app=(ApplicationEx)ApplicationManager.getApplication();
    final ApplicationInfo info=ApplicationInfo.getInstance();
    final int r=Messages.showOkCancelDialog(myContent,"You need to restart " + info.getVersionName() + " for the changes to take effect","Restart Required",(app.isRestartCapable() ? "Restart Now" : "Shutdown Now"),(app.isRestartCapable() ? "Restart Later" : "Shutdown Later"),Messages.getQuestionIcon());
    if (r == 0) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          app.restart(true);
        }
      }
,ModalityState.NON_MODAL);
    }
  }
}
