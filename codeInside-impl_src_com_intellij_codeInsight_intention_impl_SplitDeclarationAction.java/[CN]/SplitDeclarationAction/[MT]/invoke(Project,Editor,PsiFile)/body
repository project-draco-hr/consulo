{
  if (!CodeInsightUtil.prepareFileForWrite(file))   return;
  PsiManager psiManager=PsiManager.getInstance(project);
  int offset=editor.getCaretModel().getOffset();
  PsiElement token=file.findElementAt(offset);
  PsiDeclarationStatement decl=PsiTreeUtil.getParentOfType(token,PsiDeclarationStatement.class);
  if (decl != null) {
    invokeOnDeclarationStatement(decl,psiManager,project);
  }
 else {
    PsiField field=PsiTreeUtil.getParentOfType(token,PsiField.class);
    if (field != null) {
      field.normalizeDeclaration();
    }
  }
}
