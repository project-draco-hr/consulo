{
  if (initialized)   return;
  final ID delegateClass=allocateObjcClassPair(getObjcClass("NSObject"),"NSApplicationDelegate");
  if (!addMethod(delegateClass,createSelector("applicationDockMenu:"),APPLICATION_DOCK_MENU,"@:@")) {
    throw new RuntimeException("Unable to add method to objective-c delegate class!");
  }
  if (!addMethod(delegateClass,createSelector("handleDockRecentProject:"),RECENT_PROJECT_FROM_DOCK_MENU_SELECTED,"@:@")) {
    throw new RuntimeException("Unable to add method to objective-c delegate class!");
  }
  registerObjcClassPair(delegateClass);
  ID delegate=invoke(invoke(delegateClass,"alloc"),"init");
  invoke(invoke("NSApplication","sharedApplication"),"setDelegate:",delegate);
  initialized=true;
}
