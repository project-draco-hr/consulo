{
  invalidate();
  if (value instanceof CheckedTreeNode) {
    CheckedTreeNode node=(CheckedTreeNode)value;
    NodeState state=getNodeStatus(node);
    myCheckbox.setVisible(true);
    myCheckbox.setSelected(state != NodeState.CLEAR);
    myCheckbox.setEnabled(node.isEnabled() && state != NodeState.PARTIAL);
    myCheckbox.setBackground(null);
    setBackground(null);
  }
 else {
    myCheckbox.setVisible(false);
  }
  myTextRenderer.getTreeCellRendererComponent(tree,value,selected,expanded,leaf,row,hasFocus);
  customizeRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
  revalidate();
  if (tree.getUI() instanceof UIUtil.MacTreeUI) {
    myTextRenderer.setOpaque(false);
    setOpaque(false);
  }
  return this;
}
