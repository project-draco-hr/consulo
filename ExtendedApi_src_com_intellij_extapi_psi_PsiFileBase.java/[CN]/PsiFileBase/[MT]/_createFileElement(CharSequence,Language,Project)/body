{
  final ParserDefinition parserDefinition=language.getParserDefinition();
  final PsiParser parser=parserDefinition.createParser();
  final IElementType root=parserDefinition.getFileNodeType();
  final Lexer lexer=parserDefinition.createLexer();
  char[] text=CharArrayUtil.fromSequence(docText);
  lexer.start(text,0,docText.length());
  final FileElement fileRoot=(FileElement)parser.parse(root,new PsiBuilderImpl(lexer,null,true,parserDefinition.getWhitespaceTokens(),parserDefinition.getCommentTokens()));
  LOG.assertTrue(fileRoot.getElementType() == root,"Parsing file text returns rootElement with type different from declared in parser definition");
  return fileRoot;
}
