{
  boolean dispatched=false;
  if (e instanceof MouseEvent) {
    final MouseEvent me=(MouseEvent)e;
    Window eventWindow=me.getComponent() instanceof Window ? ((Window)me.getComponent()) : SwingUtilities.getWindowAncestor(me.getComponent());
    final Window thisGlassWindow=SwingUtilities.getWindowAncestor(myRootPane);
    if (eventWindow != thisGlassWindow)     return false;
  }
  if (e.getID() == MouseEvent.MOUSE_PRESSED || e.getID() == MouseEvent.MOUSE_RELEASED || e.getID() == MouseEvent.MOUSE_CLICKED) {
    dispatched=preprocess((MouseEvent)e,false);
  }
 else   if (e.getID() == MouseEvent.MOUSE_MOVED || e.getID() == MouseEvent.MOUSE_DRAGGED) {
    dispatched=preprocess((MouseEvent)e,true);
  }
 else {
    return false;
  }
  if (isVisible()) {
    boolean cursorSet=false;
    MouseEvent me=(MouseEvent)e;
    if (me.getComponent() != null) {
      final Point point=SwingUtilities.convertPoint(me.getComponent(),me.getPoint(),myRootPane.getContentPane());
      if (myRootPane.getMenuBar() != null && myRootPane.getMenuBar().isVisible()) {
        point.y+=myRootPane.getMenuBar().getHeight();
      }
      final Component target=SwingUtilities.getDeepestComponentAt(myRootPane.getContentPane().getParent(),point.x,point.y);
      if (target != null) {
        setCursor(target.getCursor());
        cursorSet=true;
      }
    }
    if (!cursorSet) {
      setCursor(Cursor.getDefaultCursor());
    }
  }
  return dispatched;
}
