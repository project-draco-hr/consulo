{
  CompositeElement treeParent=expression.getTreeParent();
  IElementType parentType=treeParent == null ? null : treeParent.getElementType();
  expression.resolveAllQualifiers();
  final JavaResolveResult[] result=expression.resolve(parentType);
  if (incompleteCode && parentType != JavaElementType.REFERENCE_EXPRESSION && result.length == 0) {
    return expression.resolve(JavaElementType.REFERENCE_EXPRESSION);
  }
  return result;
}
