{
  CompositeElement treeParent=expression.getTreeParent();
  IElementType parentType=treeParent != null ? treeParent.getElementType() : null;
  final JavaResolveResult[] result=expression.resolve(parentType);
  if (incompleteCode && parentType != JavaElementType.REFERENCE_EXPRESSION && result.length == 0) {
    return expression.resolve(JavaElementType.REFERENCE_EXPRESSION);
  }
  return result;
}
