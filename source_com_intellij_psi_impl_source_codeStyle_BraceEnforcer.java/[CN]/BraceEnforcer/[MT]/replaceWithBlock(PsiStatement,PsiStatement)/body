{
  final PsiElementFactory factory=statement.getManager().getElementFactory();
  String oldText=blockCandidate.getText();
  StringBuffer buf=new StringBuffer(oldText.length() + 3);
  buf.append('{');
  buf.append(oldText);
  buf.append("\n}");
  try {
    CodeEditUtil.replaceChild((CompositeElement)SourceTreeToPsiMap.psiElementToTree(statement),SourceTreeToPsiMap.psiElementToTree(blockCandidate),SourceTreeToPsiMap.psiElementToTree(factory.createStatementFromText(buf.toString(),null)));
    CodeStyleManager.getInstance(statement.getProject()).reformat(statement);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
