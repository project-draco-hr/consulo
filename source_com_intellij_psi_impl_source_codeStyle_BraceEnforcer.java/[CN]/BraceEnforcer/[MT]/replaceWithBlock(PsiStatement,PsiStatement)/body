{
  LOG.assertTrue(statement != null);
  if (!statement.isValid()) {
    LOG.assertTrue(false);
  }
  final PsiManager manager=statement.getManager();
  LOG.assertTrue(manager != null);
  final PsiElementFactory factory=manager.getElementFactory();
  String oldText=blockCandidate.getText();
  StringBuffer buf=new StringBuffer(oldText.length() + 3);
  buf.append('{');
  buf.append(oldText);
  buf.append("\n}");
  try {
    CodeEditUtil.replaceChild((CompositeElement)SourceTreeToPsiMap.psiElementToTree(statement),SourceTreeToPsiMap.psiElementToTree(blockCandidate),SourceTreeToPsiMap.psiElementToTree(factory.createStatementFromText(buf.toString(),null)));
    CodeStyleManager.getInstance(statement.getProject()).reformat(statement);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
