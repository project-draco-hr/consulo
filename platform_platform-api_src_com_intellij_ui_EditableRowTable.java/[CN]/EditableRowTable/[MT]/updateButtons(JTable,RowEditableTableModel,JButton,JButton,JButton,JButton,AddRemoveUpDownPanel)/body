{
  if (table.isEnabled()) {
    final int index=table.getSelectedRow();
    if (0 <= index && index < tableModel.getRowCount()) {
      final boolean downEnable=index < tableModel.getRowCount() - 1;
      final boolean upEnable=index > 0;
      if (p != null) {
        p.setEnabled(AddRemoveUpDownPanel.Buttons.REMOVE,true);
        p.setEnabled(AddRemoveUpDownPanel.Buttons.UP,upEnable);
        p.setEnabled(AddRemoveUpDownPanel.Buttons.DOWN,downEnable);
      }
 else {
        remove.setEnabled(true);
        up.setEnabled(upEnable);
        down.setEnabled(downEnable);
      }
    }
 else {
      if (p != null) {
        p.setEnabled(AddRemoveUpDownPanel.Buttons.REMOVE,false);
        p.setEnabled(AddRemoveUpDownPanel.Buttons.UP,false);
        p.setEnabled(AddRemoveUpDownPanel.Buttons.DOWN,false);
      }
 else {
        remove.setEnabled(false);
        up.setEnabled(false);
        down.setEnabled(false);
      }
    }
    if (p != null) {
      p.setEnabled(AddRemoveUpDownPanel.Buttons.ADD,true);
    }
 else {
      add.setEnabled(true);
    }
  }
}
