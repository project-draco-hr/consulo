{
  DebuggerTreeNodeImpl[] selectedNodes=getSelectedNodes(e.getDataContext());
  boolean enabled;
  if (selectedNodes != null) {
    enabled=true;
    if (getPanel(e.getDataContext()) instanceof MainWatchPanel) {
      for (int i=0; i < selectedNodes.length; i++) {
        DebuggerTreeNodeImpl node=selectedNodes[i];
        NodeDescriptorImpl descriptor=node.getDescriptor();
        if (!(descriptor instanceof ValueDescriptorImpl)) {
          enabled=false;
          break;
        }
      }
    }
  }
 else {
    final Editor editor=(Editor)e.getDataContext().getData(DataConstants.EDITOR);
    enabled=DebuggerUtilsEx.getEditorText(editor) != null;
  }
  e.getPresentation().setVisible(enabled);
}
