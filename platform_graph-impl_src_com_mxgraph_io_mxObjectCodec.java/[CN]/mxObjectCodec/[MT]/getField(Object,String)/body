{
  Class<?> type=obj.getClass();
  if (fields == null) {
    fields=new HashMap<Class,Map<String,Field>>();
  }
  Map<String,Field> map=fields.get(type);
  if (map == null) {
    map=new HashMap<String,Field>();
    fields.put(type,map);
  }
  Field field=map.get(fieldname);
  if (field != null) {
    return field;
  }
  while (type != null) {
    try {
      field=type.getDeclaredField(fieldname);
      if (field != null) {
        map.put(fieldname,field);
        return field;
      }
    }
 catch (    Exception e) {
    }
    type=type.getSuperclass();
  }
  return null;
}
