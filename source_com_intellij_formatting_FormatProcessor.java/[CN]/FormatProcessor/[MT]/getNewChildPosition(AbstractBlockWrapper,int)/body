{
  final List<Block> subBlocks=parent.getBlock().getSubBlocks();
  for (int i=0; i < subBlocks.size(); i++) {
    Block block=subBlocks.get(i);
    if (block.getTextRange().getStartOffset() >= offset)     return i;
  }
  return subBlocks.size();
}
