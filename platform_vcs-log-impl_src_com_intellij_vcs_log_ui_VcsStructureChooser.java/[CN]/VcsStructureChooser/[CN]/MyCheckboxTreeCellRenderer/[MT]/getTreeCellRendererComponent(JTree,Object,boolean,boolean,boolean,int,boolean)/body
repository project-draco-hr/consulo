{
  invalidate();
  final VirtualFile file=getFile(value);
  final DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  if (file == null) {
    if (value instanceof DefaultMutableTreeNode) {
      final Object uo=node.getUserObject();
      if (uo instanceof String) {
        myColoredRenderer.getTreeCellRendererComponent(tree,value,selected,expanded,leaf,row,hasFocus);
        return myColoredRenderer;
      }
    }
    return myEmpty;
  }
  myCheckbox.setVisible(true);
  final TreeNodeState state=mySelectionManager.getState(node);
  myCheckbox.setEnabled(TreeNodeState.CLEAR.equals(state) || TreeNodeState.SELECTED.equals(state));
  myCheckbox.setSelected(!TreeNodeState.CLEAR.equals(state));
  myCheckbox.setOpaque(false);
  myCheckbox.setBackground(null);
  setBackground(null);
  myTextRenderer.getListCellRendererComponent(myFictive,file,0,selected,hasFocus);
  revalidate();
  return this;
}
