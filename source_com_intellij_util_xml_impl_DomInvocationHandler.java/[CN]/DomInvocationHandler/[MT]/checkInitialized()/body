{
synchronized (PsiLock.LOCK) {
    if (myInitialized)     return;
    try {
      final HashSet<XmlTag> usedTags=new HashSet<XmlTag>();
      final XmlTag tag=getXmlTag();
      for (      Map.Entry<Method,Pair<String,Integer>> entry : myMethodsMap.getFixedChildrenEntries()) {
        final Pair<String,Integer> pair=entry.getValue();
        final String qname=pair.getFirst();
        final Integer index=pair.getSecond();
        XmlTag subTag=findSubTag(tag,qname,index);
        final Method method=entry.getKey();
        final IndexedElementInvocationHandler handler=createIndexedChild(method,subTag,qname,index);
        myManager.createDomElement(method.getReturnType(),subTag,handler);
        myFixedChildren.put(pair,handler);
        usedTags.add(subTag);
      }
      if (tag != null) {
        for (        Map.Entry<Method,String> entry : myMethodsMap.getCollectionChildrenEntries()) {
          String qname=entry.getValue();
          for (          XmlTag subTag : tag.findSubTags(qname)) {
            if (!usedTags.contains(subTag)) {
              createCollectionElement(myMethodsMap.getCollectionChildrenClass(qname),subTag);
              usedTags.add(subTag);
            }
          }
        }
      }
    }
  finally {
      myInitialized=true;
    }
  }
}
