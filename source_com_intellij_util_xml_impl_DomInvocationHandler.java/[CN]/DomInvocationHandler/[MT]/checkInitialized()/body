{
synchronized (PsiLock.LOCK) {
    if (myInitialized)     return;
    try {
      final HashSet<XmlTag> usedTags=new HashSet<XmlTag>();
      final XmlTag tag=getXmlTag();
      for (      Map.Entry<Method,Pair<String,Integer>> entry : myMethodsMap.getFixedChildrenEntries()) {
        final Pair<String,Integer> pair=entry.getValue();
        final XmlTag subTag=findSubTag(tag,pair.getFirst(),pair.getSecond());
        getOrCreateIndexedChild(entry.getKey(),subTag,pair);
        usedTags.add(subTag);
      }
      if (tag != null) {
        for (        Map.Entry<Method,String> entry : myMethodsMap.getCollectionChildrenEntries()) {
          String qname=entry.getValue();
          for (          XmlTag subTag : tag.findSubTags(qname)) {
            if (!usedTags.contains(subTag)) {
              createCollectionElement(myMethodsMap.getCollectionChildrenType(qname),subTag);
              usedTags.add(subTag);
            }
          }
        }
      }
    }
  finally {
      myInitialized=true;
    }
  }
}
