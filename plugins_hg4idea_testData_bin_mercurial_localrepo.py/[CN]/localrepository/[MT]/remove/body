def remove(self, list, unlink=False):
    if unlink:
        for f in list:
            try:
                util.unlink(self.wjoin(f))
            except OSError as inst:
                if (inst.errno != errno.ENOENT):
                    raise
    wlock = self.wlock()
    try:
        for f in list:
            if (unlink and os.path.exists(self.wjoin(f))):
                self.ui.warn((_('%s still exists!\n') % f))
            elif (self.dirstate[f] == 'a'):
                self.dirstate.forget(f)
            elif (f not in self.dirstate):
                self.ui.warn((_('%s not tracked!\n') % f))
            else:
                self.dirstate.remove(f)
    finally:
        wlock.release()
