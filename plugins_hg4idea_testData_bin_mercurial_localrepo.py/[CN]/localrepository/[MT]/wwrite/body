def wwrite(self, filename, data, flags):
    data = self._filter('decode', filename, data)
    try:
        os.unlink(self.wjoin(filename))
    except OSError:
        pass
    if ('l' in flags):
        self.wopener.symlink(data, filename)
    else:
        self.wopener(filename, 'w').write(data)
        if ('x' in flags):
            util.set_flags(self.wjoin(filename), False, True)
