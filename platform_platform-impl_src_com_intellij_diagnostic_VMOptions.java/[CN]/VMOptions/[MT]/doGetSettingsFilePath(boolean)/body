{
  final String vmOptionsFile=System.getProperty("jb.vmOptionsFile");
  if (!StringUtil.isEmptyOrSpaces(vmOptionsFile)) {
    return vmOptionsFile;
  }
  if (SystemInfo.isMac) {
    if (customLocation) {
      return PathManager.getConfigPath() + "/idea.vmoptions";
    }
 else {
      return PathManager.getBinPath() + "/idea.vmoptions";
    }
  }
  final String productName=ApplicationNamesInfo.getInstance().getProductName().toLowerCase();
  final String platformSuffix=SystemInfo.is64Bit ? "64" : "";
  final String osSuffix=SystemInfo.isWindows ? ".exe" : "";
  return PathManager.getBinPath() + File.separatorChar + productName+ platformSuffix+ osSuffix+ ".vmoptions";
}
