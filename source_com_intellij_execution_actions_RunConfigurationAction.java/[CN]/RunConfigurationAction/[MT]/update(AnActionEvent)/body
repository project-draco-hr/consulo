{
  final Presentation presentation=e.getPresentation();
  final DataContext dataContext=e.getDataContext();
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (ActionPlaces.MAIN_MENU.equals(e.getPlace())) {
    presentation.setDescription("Open run/debug configurations dropdown");
    presentation.setEnabled(findFrame(dataContext) != null);
    return;
  }
  if (project == null) {
    updateButton(null,null,presentation);
    presentation.setEnabled(false);
  }
 else {
    final RunManager runManager=RunManager.getInstance(project);
    RunnerAndConfigurationSettings selected=runManager.getSelectedConfiguration();
    updateButton(selected == null ? null : selected.getConfiguration(),project,presentation);
    presentation.setEnabled(true);
  }
}
