{
  Project project=vcsContext.getProject();
  if (project == null || !ProjectLevelVcsManager.getInstance(project).hasActiveVcss()) {
    presentation.setEnabledAndVisible(false);
  }
 else   if (!approximatelyHasRoots(vcsContext)) {
    presentation.setEnabled(false);
  }
 else {
    presentation.setText(getActionName(vcsContext) + "...");
    presentation.setEnabled(!ProjectLevelVcsManager.getInstance(project).isBackgroundVcsOperationRunning());
    presentation.setVisible(true);
  }
}
