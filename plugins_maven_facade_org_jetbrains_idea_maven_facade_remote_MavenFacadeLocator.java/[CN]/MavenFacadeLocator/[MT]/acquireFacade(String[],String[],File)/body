{
  final Process process=Runtime.getRuntime().exec(cmdArray,envP,dir);
  final Ref<Pair<Integer,String>> result=Ref.create(null);
  final Runnable target=new Runnable(){
    public void run(){
      try {
        eatOutStreams(process,result);
      }
 catch (      Exception e) {
        if (result.isNull()) {
synchronized (result) {
            result.notifyAll();
          }
        }
      }
    }
  }
;
  final Thread thread=new Thread(target,"Process Streams Reader");
  thread.setDaemon(true);
  thread.start();
synchronized (result) {
    if (result.isNull()) {
      result.wait();
    }
  }
  if (result.isNull())   throw new RuntimeException();
 else   return Pair.create((MavenFacade)LocateRegistry.getRegistry(result.get().first).lookup(result.get().second),process);
}
