{
  TextRange textRange=calculateRangeToProcess(editor);
  if (textRange == null)   return new ProgressableTextEditorHighlightingPass.EmptyPass(myProject,editor.getDocument(),LocalInspectionsPass.IN_PROGRESS_ICON,LocalInspectionsPass.PRESENTABLE_NAME);
  TextRange visibleRange=VisibleHighlightingPassFactory.calculateVisibleRange(editor);
  return new LocalInspectionsPass(file,editor.getDocument(),textRange.getStartOffset(),textRange.getEndOffset(),visibleRange){
    List<LocalInspectionTool> getInspectionTools(    InspectionProfileWrapper profile){
      List<LocalInspectionTool> tools=super.getInspectionTools(profile);
      List<LocalInspectionTool> result=new ArrayList<LocalInspectionTool>(tools.size());
      for (      LocalInspectionTool tool : tools) {
        if (!tool.runForWholeFile())         result.add(tool);
      }
      return result;
    }
  }
;
}
