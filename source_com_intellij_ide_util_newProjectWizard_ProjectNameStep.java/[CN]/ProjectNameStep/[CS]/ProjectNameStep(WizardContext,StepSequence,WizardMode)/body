{
  myWizardContext=wizardContext;
  mySequence=sequence;
  myMode=mode;
  myNamePathComponent=new NamePathComponent(IdeBundle.message("label.project.name"),IdeBundle.message("label.project.files.location"),IdeBundle.message("title.select.project.file.directory",IdeBundle.message("project.new.wizard.project.identification")),IdeBundle.message("description.select.project.file.directory",StringUtil.capitalize(IdeBundle.message("project.new.wizard.project.identification"))),true,false);
  final String baseDir=myWizardContext.getProjectFileDirectory();
  final String projectName=myWizardContext.getProjectName();
  final String initialProjectName=projectName != null ? projectName : ProjectWizardUtil.findNonExistingFileName(baseDir,"untitled","");
  myNamePathComponent.setPath(projectName == null ? (baseDir + File.separator + initialProjectName) : baseDir);
  myNamePathComponent.setNameValue(initialProjectName);
  myNamePathComponent.getNameComponent().setSelectionStart(0);
  myNamePathComponent.getNameComponent().setSelectionEnd(initialProjectName.length());
  myPanel=new JPanel(new GridBagLayout());
  myPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createEtchedBorder(),BorderFactory.createEmptyBorder(10,10,10,10)));
  myPanel.add(myNamePathComponent,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(0,4,0,0),0,0));
  JPanel projectFileFormatPanel=new JPanel(new BorderLayout());
  myPanel.add(projectFileFormatPanel,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,1.0,0.0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(2,6,0,0),0,0));
  myNamePathComponent.setVisible(myWizardContext.getProject() == null);
  projectFileFormatPanel.setVisible(myWizardContext.getProject() == null);
  projectFileFormatPanel.add(new JLabel("Project storage format"),BorderLayout.WEST);
  projectFileFormatPanel.add(myStorageFormatCombo,BorderLayout.CENTER);
  myStorageFormatCombo.insertItemAt(DIR_BASED,0);
  myStorageFormatCombo.insertItemAt(FILE_BASED,1);
  myStorageFormatCombo.setSelectedItem(FILE_BASED);
  myAdditionalContentPanel=new JPanel(new GridBagLayout());
  myPanel.add(myAdditionalContentPanel,new GridBagConstraints(0,GridBagConstraints.RELATIVE,1,1,1.0,1.0,GridBagConstraints.NORTHWEST,GridBagConstraints.BOTH,new Insets(0,0,0,0),0,0));
}
