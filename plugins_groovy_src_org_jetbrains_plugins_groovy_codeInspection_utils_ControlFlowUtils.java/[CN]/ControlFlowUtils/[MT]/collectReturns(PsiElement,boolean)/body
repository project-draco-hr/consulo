{
  final Instruction[] flow;
  if (element instanceof GrCodeBlock) {
    flow=((GrCodeBlock)element).getControlFlow();
  }
 else {
    flow=new ControlFlowBuilder(element.getProject()).buildControlFlow((GroovyPsiElement)element,null,null);
  }
  boolean[] visited=new boolean[flow.length];
  final List<GrStatement> res=new ArrayList<GrStatement>();
  visitAllExitPointsInner(flow[flow.length - 1],flow[0],visited,new ExitPointVisitor(){
    @Override public boolean visitExitPoint(    Instruction instruction,    @Nullable GrExpression returnValue){
      final PsiElement element=instruction.getElement();
      if (allExitPoints) {
        if (element instanceof GrStatement) {
          res.add((GrStatement)element);
        }
      }
 else       if (element instanceof GrReturnStatement) {
        res.add(((GrReturnStatement)element));
      }
      return true;
    }
  }
);
  return res;
}
