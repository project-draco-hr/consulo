{
  final Artifact[] artifacts=ArtifactManager.getInstance(myProject).getArtifacts();
  Set<ArtifactPointer> pointers=new THashSet<ArtifactPointer>();
  for (  Artifact artifact : artifacts) {
    pointers.add(ArtifactPointerManager.getInstance(myProject).createPointer(artifact));
  }
  pointers.addAll(task.getArtifactPointers());
  ArtifactChooser chooser=new ArtifactChooser(new ArrayList<ArtifactPointer>(pointers));
  chooser.markElements(task.getArtifactPointers());
  DialogBuilder builder=new DialogBuilder(myProject);
  builder.setTitle("Select Artifacts");
  builder.addOkAction();
  builder.addCancelAction();
  builder.setCenterPanel(chooser);
  builder.setPreferedFocusComponent(chooser);
  if (builder.show() == DialogWrapper.OK_EXIT_CODE) {
    task.setArtifactPointers(chooser.getMarkedElements());
  }
}
