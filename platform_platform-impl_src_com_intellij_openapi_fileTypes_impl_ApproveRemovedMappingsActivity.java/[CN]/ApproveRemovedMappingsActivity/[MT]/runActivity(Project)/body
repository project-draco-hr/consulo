{
  final Map<FileNameMatcher,Pair<FileType,Boolean>> map=((FileTypeManagerImpl)FileTypeManager.getInstance()).getRemovedMappings();
  if (!map.isEmpty()) {
    UIUtil.invokeAndWaitIfNeeded(new Runnable(){
      @Override public void run(){
        for (Iterator<Map.Entry<FileNameMatcher,Pair<FileType,Boolean>>> iterator=map.entrySet().iterator(); iterator.hasNext(); ) {
          Map.Entry<FileNameMatcher,Pair<FileType,Boolean>> entry=iterator.next();
          if (entry.getValue().getSecond()) {
            continue;
          }
          final FileNameMatcher matcher=entry.getKey();
          final FileType fileType=entry.getValue().getFirst();
          if (Messages.showYesNoDialog(project,"Do you want to reassign " + matcher.getPresentableString() + " files to "+ fileType.getName()+ "?","File Extension Recognized",Messages.getQuestionIcon()) == Messages.YES) {
            ApplicationManager.getApplication().runWriteAction(new Runnable(){
              public void run(){
                FileTypeManager.getInstance().associate(fileType,matcher);
              }
            }
);
            iterator.remove();
          }
 else {
            entry.setValue(Pair.create(fileType,true));
          }
        }
      }
    }
);
  }
}
