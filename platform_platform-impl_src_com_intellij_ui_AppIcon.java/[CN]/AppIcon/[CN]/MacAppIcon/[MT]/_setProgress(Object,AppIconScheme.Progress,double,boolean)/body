{
  assertIsDispatchThread();
  if (getAppImage() == null)   return false;
  myCurrentProcessId=processId;
  if (Math.abs(myLastValue - value) < 0.02d)   return true;
  try {
    int progressHeight=(int)(myAppImage.getHeight() * 0.15);
    int xInset=(int)(myAppImage.getWidth() * 0.05);
    int yInset=(int)(myAppImage.getHeight() * 0.15);
    int bound=(int)(myAppImage.getWidth() * 0.03);
    Rectangle progressRec=new Rectangle(new Point(xInset,myAppImage.getHeight() - progressHeight - yInset),new Dimension(myAppImage.getWidth() - xInset * 2,progressHeight));
    AppImage appImg=createAppImage();
    Rectangle bgRec=new Rectangle(progressRec.x - bound,progressRec.y - bound,progressRec.width + bound * 2,progressRec.height + bound * 2);
    appImg.myG2d.setColor(Color.white);
    appImg.myG2d.fillRect(bgRec.x,bgRec.y,bgRec.width,bgRec.height);
    appImg.myG2d.setColor(isOk ? scheme.getOkColor() : scheme.getErrorColor());
    int currentWidth=(int)Math.ceil(progressRec.width * value);
    appImg.myG2d.fillRect(progressRec.x,progressRec.y,currentWidth,progressRec.height);
    appImg.myG2d.setColor(Color.black);
    appImg.myG2d.drawRect(bgRec.x,bgRec.y,bgRec.width - 1,bgRec.height - 1);
    setDockIcon(appImg.myImg);
    myLastValue=value;
  }
 catch (  Exception e) {
    LOG.error(e);
  }
 finally {
    myCurrentProcessId=null;
  }
  return true;
}
