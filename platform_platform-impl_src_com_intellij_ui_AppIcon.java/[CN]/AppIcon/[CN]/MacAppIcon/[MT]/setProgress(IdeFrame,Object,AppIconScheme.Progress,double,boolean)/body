{
  if (getAppImage() == null)   return;
  if (myCurrentProcessId != null && !myCurrentProcessId.equals(processId))   return;
  myCurrentProcessId=processId;
  if (Math.abs(myLastValue - value) < myUpdateFraction)   return;
  try {
    int progressHeight=65;
    int xInset=30;
    int yInset=25;
    int arc=25;
    Rectangle progressRec=new Rectangle(new Point(xInset,myAppImage.getHeight() - yInset - progressHeight),new Dimension(myAppImage.getWidth() - xInset * 2,progressHeight));
    BufferedImage current=new BufferedImage(myAppImage.getWidth(),myAppImage.getHeight(),BufferedImage.TYPE_INT_ARGB);
    Graphics2D g=current.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g.drawImage(getAppImage(),null,null);
    g.setColor(Color.black);
    g.fillRoundRect(progressRec.x,progressRec.y,progressRec.width,progressRec.height,arc,arc);
    g.setColor(isOk ? scheme.getOkColor() : scheme.getErrorColor());
    int currentWidth=(int)Math.ceil(progressRec.width * value);
    g.fillRoundRect(progressRec.x,progressRec.y,currentWidth,progressRec.height,arc,arc);
    setDockIcon(current);
    myLastValue=value;
  }
 catch (  Exception e) {
    LOG.error(e);
  }
 finally {
    myCurrentProcessId=null;
  }
}
