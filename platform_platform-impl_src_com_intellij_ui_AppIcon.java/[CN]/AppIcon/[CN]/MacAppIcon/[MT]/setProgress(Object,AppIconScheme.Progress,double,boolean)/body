{
  assertIsDispatchThread();
  if (getAppImage() == null)   return false;
  if (myCurrentProcessId != null && !myCurrentProcessId.equals(processId))   return false;
  myCurrentProcessId=processId;
  if (Math.abs(myLastValue - value) < 0.02d)   return true;
  try {
    int progressHeight=(int)(myAppImage.getHeight() * 0.15);
    int xInset=(int)(myAppImage.getWidth() * 0.05);
    int yInset=(int)(myAppImage.getHeight() * 0.15);
    int bound=(int)(myAppImage.getWidth() * 0.03);
    Rectangle progressRec=new Rectangle(new Point(xInset,myAppImage.getHeight() - progressHeight - yInset),new Dimension(myAppImage.getWidth() - xInset * 2,progressHeight));
    BufferedImage current=new BufferedImage(myAppImage.getWidth(),myAppImage.getHeight(),BufferedImage.TYPE_INT_ARGB);
    Graphics2D g=current.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g.drawImage(getAppImage(),null,null);
    Rectangle bgRec=new Rectangle(progressRec.x - bound,progressRec.y - bound,progressRec.width + bound * 2,progressRec.height + bound * 2);
    g.setColor(Color.white);
    g.fillRect(bgRec.x,bgRec.y,bgRec.width,bgRec.height);
    g.setColor(isOk ? scheme.getOkColor() : scheme.getErrorColor());
    int currentWidth=(int)Math.ceil(progressRec.width * value);
    g.fillRect(progressRec.x,progressRec.y,currentWidth,progressRec.height);
    g.setColor(Color.black);
    g.drawRect(bgRec.x,bgRec.y,bgRec.width - 1,bgRec.height - 1);
    setDockIcon(current);
    myLastValue=value;
  }
 catch (  Exception e) {
    LOG.error(e);
  }
 finally {
    myCurrentProcessId=null;
  }
  return true;
}
