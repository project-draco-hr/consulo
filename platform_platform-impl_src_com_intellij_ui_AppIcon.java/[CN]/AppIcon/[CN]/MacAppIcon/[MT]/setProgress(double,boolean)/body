{
  try {
    int progressHeight=45;
    int xInset=30;
    int yInset=10;
    int arc=25;
    Rectangle progressRec=new Rectangle(new Point(xInset,myAppImage.getHeight() - yInset - progressHeight),new Dimension(myAppImage.getWidth() - xInset * 2,progressHeight));
    myCurrentImage=new BufferedImage(myAppImage.getWidth(),myAppImage.getHeight(),BufferedImage.TYPE_INT_ARGB);
    Graphics2D g=myCurrentImage.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g.drawImage(myAppImage,null,null);
    g.setColor(Color.black);
    g.fillRoundRect(progressRec.x,progressRec.y,progressRec.width,progressRec.height,arc,arc);
    g.setColor(isOk ? Color.green : Color.red);
    int currentWidth=(int)Math.ceil(progressRec.width * progress);
    g.fillRoundRect(progressRec.x,progressRec.y,currentWidth,progressRec.height,arc,arc);
    setDockIcon(myCurrentImage);
  }
 catch (  Exception e) {
    LOG.error(e);
  }
 finally {
    myProgressShown=true;
  }
}
