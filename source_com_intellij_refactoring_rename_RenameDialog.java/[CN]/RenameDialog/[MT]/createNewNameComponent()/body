{
  String[] suggestedNames=getSuggestedNames();
  myNameSuggestionsField=new NameSuggestionsField(suggestedNames,myProject,StdLanguages.JAVA.equals(myPsiElement.getLanguage()) ? StdFileTypes.JAVA : StdFileTypes.PLAIN_TEXT);
  myNameSuggestionsField.addDataChangedListener(new NameSuggestionsField.DataChanged(){
    public void dataChanged(){
      validateButtons();
    }
  }
);
  if (myPsiElement instanceof PsiVariable) {
    myNameSuggestionsField.getComponent().registerKeyboardAction(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        completeVariable(myNameSuggestionsField.getEditor());
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,KeyEvent.CTRL_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
}
