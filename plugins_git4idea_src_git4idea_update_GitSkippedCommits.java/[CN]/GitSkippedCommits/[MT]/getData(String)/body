{
  if (PlatformDataKeys.PROJECT.is(dataId)) {
    return myProject;
  }
  TreePath selectionPath=myTree.getSelectionPath();
  DefaultMutableTreeNode node=selectionPath == null ? null : (DefaultMutableTreeNode)selectionPath.getLastPathComponent();
  Object o=node == null ? null : node.getUserObject();
  if (o instanceof Commit) {
    Commit c=(Commit)o;
    if (VcsDataKeys.VCS_VIRTUAL_FILE.is(dataId)) {
      return c.root;
    }
    if (VcsDataKeys.VCS_FILE_REVISION.is(dataId)) {
      return new GitFileRevision(myProject,VcsUtil.getFilePath(c.root.getPath()),c.commitInfo.revision,true);
    }
  }
  return super.getData(dataId);
}
