{
  super.update(e);
  Presentation p=e.getPresentation();
  List<File> files=getFiles(e);
  if (files.isEmpty()) {
    p.setEnabled(false);
    return;
  }
  List<VirtualFile> virtualFiles=collectVirtualFiles(files);
  String text;
  boolean enabled=true;
  if (files.size() == 1 && virtualFiles.isEmpty()) {
    text="Create ''{0}''";
  }
 else {
    enabled=virtualFiles.size() == files.size();
    text="Open ''{0}''";
  }
  p.setText(MessageFormat.format(text,files.get(0).getName()));
  p.setEnabled(enabled);
}
