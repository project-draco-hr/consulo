def normallookup(self, f):
    'Mark a file normal, but possibly dirty.'
    if ((self._pl[1] != nullid) and (f in self._map)):
        entry = self._map[f]
        if ((entry[0] == 'r') and (entry[2] in ((-1), (-2)))):
            source = self._copymap.get(f)
            if (entry[2] == (-1)):
                self.merge(f)
            elif (entry[2] == (-2)):
                self.normaldirty(f)
            if source:
                self.copy(source, f)
            return
        if ((entry[0] == 'm') or ((entry[0] == 'n') and (entry[2] == (-2)))):
            return
    self._dirty = True
    self._addpath(f)
    self._map[f] = ('n', 0, (-1), (-1))
    if (f in self._copymap):
        del self._copymap[f]
