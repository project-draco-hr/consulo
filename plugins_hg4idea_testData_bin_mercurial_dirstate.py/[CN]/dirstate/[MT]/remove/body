def remove(self, f):
    'Mark a file removed.'
    self._dirty = True
    self._droppath(f)
    size = 0
    if ((self._pl[1] != nullid) and (f in self._map)):
        entry = self._map[f]
        if (entry[0] == 'm'):
            size = (-1)
        elif ((entry[0] == 'n') and (entry[2] == (-2))):
            size = (-2)
    self._map[f] = ('r', 0, size, 0)
    if ((size == 0) and (f in self._copymap)):
        del self._copymap[f]
