{
  myDvcsIsUsed=dvcsIsUsed;
  if (myChanges.size() > 0) {
    myIncludeBaseRevisionTextCheckBox.setVisible(true);
    final VcsConfiguration configuration=VcsConfiguration.getInstance(myProject);
    boolean turnOn=dvcsIsUsed || configuration.INCLUDE_TEXT_INTO_PATCH;
    myIncludeBaseRevisionTextCheckBox.setSelected(turnOn);
    myIncludeBaseRevisionTextCheckBox.addActionListener(new ActionListener(){
      @Override public void actionPerformed(      ActionEvent e){
        mySelectFilesToAddTextsToPatchPanel.setEnabled(myIncludeBaseRevisionTextCheckBox.isSelected());
        mySplitterWithSecondHideable.setEnabledColor(myIncludeBaseRevisionTextCheckBox.isSelected());
      }
    }
);
    final Runnable inclusionListener=new Runnable(){
      @Override public void run(){
        if (mySelectFilesToAddTextsToPatchPanel != null) {
          myIncludedChanges=mySelectFilesToAddTextsToPatchPanel.getIncludedChanges();
          mySplitterWithSecondHideable.setText("Selected: " + (myIncludedChanges.size() == myChanges.size() ? "All" : ("" + myIncludedChanges.size() + " of "+ myChanges.size())));
        }
      }
    }
;
    initSplitter(inclusionListener);
    inclusionListener.run();
  }
}
