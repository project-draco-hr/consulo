{
  myDvcsIsUsed=dvcsIsUsed;
  if (myChanges.size() > 0) {
    myIncludeBaseRevisionTextCheckBox.setVisible(true);
    final Runnable inclusionListener=new Runnable(){
      @Override public void run(){
        if (mySelectFilesToAddTextsToPatchPanel != null) {
          myIncludedChanges=mySelectFilesToAddTextsToPatchPanel.getIncludedChanges();
          myHideableTitledPanel.setTitle("&Selected: " + (myIncludedChanges.size() == myChanges.size() ? "All" : (myIncludedChanges.size() + " of " + myChanges.size())));
        }
      }
    }
;
    initPanelWithSelectedFiles(inclusionListener);
    inclusionListener.run();
    final VcsConfiguration configuration=VcsConfiguration.getInstance(myProject);
    boolean turnOn=dvcsIsUsed || configuration.INCLUDE_TEXT_INTO_PATCH;
    myIncludeBaseRevisionTextCheckBox.setSelected(turnOn);
    myIncludeBaseRevisionTextCheckBox.addActionListener(new ActionListener(){
      @Override public void actionPerformed(      ActionEvent e){
        myHideableTitledPanel.setEnabled(myIncludeBaseRevisionTextCheckBox.isSelected());
        mySelectFilesToAddTextsToPatchPanel.setEnabled(myIncludeBaseRevisionTextCheckBox.isSelected());
      }
    }
);
    myHideableTitledPanel.setEnabled(myIncludeBaseRevisionTextCheckBox.isSelected());
    mySelectFilesToAddTextsToPatchPanel.setEnabled(myIncludeBaseRevisionTextCheckBox.isSelected());
  }
}
