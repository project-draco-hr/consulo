{
  List<VirtualFile> filtered=ContainerUtil.mapNotNull(files,new NullableFunction<VirtualFile,VirtualFile>(){
    @Override public VirtualFile fun(    @NotNull VirtualFile file){
      return file.isDirectory() ? file : null;
    }
  }
);
  return VfsUtil.toVirtualFileArray(filtered);
}
