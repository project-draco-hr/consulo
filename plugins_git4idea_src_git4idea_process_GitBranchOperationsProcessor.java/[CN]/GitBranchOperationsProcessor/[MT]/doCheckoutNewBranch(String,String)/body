{
  GitSimpleEventDetector unmergedDetector=new GitSimpleEventDetector(GitSimpleEventDetector.Event.UNMERGED);
  GitCommandResult result=Git.checkoutNewBranch(myRepository,name,unmergedDetector,reference);
  if (result.success()) {
    updateRepository();
    notifySuccess(String.format("Branch <b><code>%s</code></b> was created",name));
  }
 else   if (unmergedDetector.hasHappened()) {
    GitConflictResolver gitConflictResolver=prepareConflictResolverForUnmergedFilesBeforeCheckout();
    if (gitConflictResolver.merge()) {
      doCheckoutNewBranch(name,reference);
    }
  }
 else {
    showErrorMessage("Couldn't create new branch " + name,result.getErrorOutput());
  }
}
