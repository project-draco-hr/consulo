{
  GitUnmergedFilesDetector unmergedDetector=new GitUnmergedFilesDetector();
  GitCommandResult result=Git.checkoutNewBranch(myRepository,name,unmergedDetector);
  if (result.success()) {
    updateRepository();
    notifySuccess(String.format("Branch <b><code>%s</code></b> was created",name));
  }
 else   if (unmergedDetector.isUnmergedFilesDetected()) {
    GitConflictResolver gitConflictResolver=prepareConflictResolverForUnmergedFilesBeforeCheckout();
    if (gitConflictResolver.merge()) {
      doCheckoutNewBranch(name);
    }
  }
 else {
    showErrorMessage("Couldn't create new branch " + name,result.getErrorOutput());
  }
}
