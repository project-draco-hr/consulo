{
  if (myActivityName == null)   return true;
  final String activityPath=state.getPackageName() + '/' + myActivityName;
  ProcessHandler processHandler=state.getProcessHandler();
  if (state.isStopped())   return false;
  processHandler.notifyTextAvailable("Launching application: " + activityPath + ".\n",STDOUT);
  AndroidRunningState.MyReceiver receiver=state.new MyReceiver();
  boolean debug=state.isDebugMode();
  while (true) {
    if (state.isStopped())     return false;
    String command="am start " + (debug ? "-D " : "") + "-n \""+ activityPath+ "\"";
    boolean deviceNotResponding=false;
    try {
      state.executeDeviceCommandAndWriteToConsole(device,command,receiver);
    }
 catch (    ShellCommandUnresponsiveException e) {
      LOG.info(e);
      deviceNotResponding=true;
    }
    if (!deviceNotResponding && receiver.getErrorType() != 2) {
      break;
    }
    processHandler.notifyTextAvailable("Device is not ready. Waiting for " + AndroidRunningState.WAITING_TIME + " sec.\n",STDOUT);
synchronized (state.getRunningLock()) {
      try {
        state.getRunningLock().wait(AndroidRunningState.WAITING_TIME * 1000);
      }
 catch (      InterruptedException e) {
      }
    }
    receiver=state.new MyReceiver();
  }
  boolean success=receiver.getErrorType() == AndroidRunningState.NO_ERROR;
  if (success) {
    processHandler.notifyTextAvailable(receiver.getOutput().toString(),STDOUT);
  }
 else {
    processHandler.notifyTextAvailable(receiver.getOutput().toString(),STDERR);
  }
  return success;
}
