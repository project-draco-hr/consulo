{
  super(project,true);
  myFiles=files;
  setTitle(CodeInsightBundle.message("dialog.reformat.files.title"));
  myOptimizeImports.setSelected(isOptmizeImportsOptionOn());
  boolean canTargetVcsChanges=false;
  for (  VirtualFile file : files) {
    if (FormatChangedTextUtil.hasChanges(file,project)) {
      canTargetVcsChanges=true;
      break;
    }
  }
  myOnlyChangedText.setEnabled(canTargetVcsChanges);
  myOnlyChangedText.setSelected(canTargetVcsChanges && PropertiesComponent.getInstance().getBoolean(LayoutCodeConstants.PROCESS_CHANGED_TEXT_KEY,false));
  myOptimizeImports.setSelected(isOptmizeImportsOptionOn());
  init();
}
