{
  PsiFile psiFile;
synchronized (myPsiFileLock) {
    psiFile=myPsiFile;
  }
  if (psiFile != null && psiFile.isValid()) {
    return psiFile;
  }
  VirtualFile virtualFile=getVirtualFile();
  if (virtualFile == null || !virtualFile.isValid())   return null;
  psiFile=PsiManager.getInstance(myProject).findFile(virtualFile);
synchronized (myPsiFileLock) {
    myPsiFile=psiFile;
  }
  return psiFile;
}
