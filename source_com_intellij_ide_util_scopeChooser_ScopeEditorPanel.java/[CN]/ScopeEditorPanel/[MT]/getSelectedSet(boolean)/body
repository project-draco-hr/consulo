{
  int[] rows=myPackageTree.getSelectionRows();
  if (rows == null || rows.length != 1)   return null;
  PackageDependenciesNode node=(PackageDependenciesNode)myPackageTree.getPathForRow(rows[0]).getLastPathComponent();
  if (node instanceof ModuleNode) {
    if (!recursively)     return null;
    return new PatternPackageSet("*..*",getSelectedScopeType(node),((ModuleNode)node).getModuleName());
  }
 else   if (node instanceof PackageNode) {
    String pattern=((PackageNode)node).getPackageQName();
    if (pattern != null) {
      pattern+=recursively ? "..*" : ".*";
    }
 else {
      pattern=recursively ? "*..*" : "*";
    }
    return getPatternSet(node,pattern);
  }
 else   if (node instanceof FileNode) {
    if (recursively)     return null;
    FileNode fNode=(FileNode)node;
    String fqName=fNode.getFQName();
    if (fqName != null)     return getPatternSet(node,fqName);
  }
 else   if (node instanceof GeneralGroupNode) {
    return new PatternPackageSet("*..*",getSelectedScopeType(node),null);
  }
  return null;
}
