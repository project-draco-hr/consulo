{
  myTreeExpantionMonitor.freeze();
  TreeModelBuilder.TreeModel model=TreeModelBuilder.createTreeModel(myProject,myIsFirstUpdate,false,myTreeMarker);
  myIsFirstUpdate=false;
  if (myErrorMessage == null) {
    myMatchingCountLabel.setText(IdeBundle.message("label.scope.contains.files",model.getMarkedFileCount(),model.getTotalFileCount()));
    myMatchingCountLabel.setForeground(new JLabel().getForeground());
  }
 else {
    showErrorMessage();
  }
  myPackageTree.setModel(model);
  myTreeExpantionMonitor.restore();
}
