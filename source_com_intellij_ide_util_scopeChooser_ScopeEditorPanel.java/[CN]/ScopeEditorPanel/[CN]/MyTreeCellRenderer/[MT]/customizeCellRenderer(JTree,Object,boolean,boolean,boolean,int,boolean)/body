{
  if (value instanceof PackageDependenciesNode) {
    PackageDependenciesNode node=(PackageDependenciesNode)value;
    if (expanded) {
      setIcon(node.getOpenIcon());
    }
 else {
      setIcon(node.getClosedIcon());
    }
    setForeground(selected && hasFocus ? UIUtil.getTreeSelectionForeground() : UIUtil.getTreeForeground());
    if (!selected && node.hasMarked() && !DependencyUISettings.getInstance().UI_FILTER_LEGALS) {
      setForeground(node.hasUnmarked() ? PARTIAL_INCLUDED : WHOLE_INCLUDED);
    }
    if (node instanceof DirectoryNode) {
      final DirectoryNode directoryNode=(DirectoryNode)node;
      append(directoryNode.getDirName(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
      final String locationString=directoryNode.getLocationString();
      if (locationString != null) {
        append(" (" + locationString + ")",SimpleTextAttributes.GRAY_ATTRIBUTES);
      }
    }
 else {
      append(value.toString(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
    }
  }
}
