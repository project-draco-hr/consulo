{
  super.getTreeCellRendererComponent(tree,value,sel,expanded,leaf,row,hasFocus);
  if (value instanceof PackageDependenciesNode) {
    PackageDependenciesNode node=(PackageDependenciesNode)value;
    if (expanded) {
      setIcon(node.getOpenIcon());
    }
 else {
      setIcon(node.getClosedIcon());
    }
    if (!sel && node.hasMarked() && !DependencyUISettings.getInstance().UI_FILTER_LEGALS) {
      setForeground(node.hasUnmarked() ? PARTIAL_INCLUDED : WHOLE_INCLUDED);
    }
    if (node instanceof DirectoryNode && node.toString().length() == 0) {
      final DirectoryNode directoryNode=(DirectoryNode)node;
      setText(directoryNode.getDirName());
    }
  }
  return this;
}
