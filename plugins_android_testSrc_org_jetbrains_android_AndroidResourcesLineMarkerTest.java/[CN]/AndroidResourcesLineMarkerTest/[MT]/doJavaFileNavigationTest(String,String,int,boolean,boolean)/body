{
  VirtualFile file=myFixture.copyFileToProject(BASE_PATH + srcPath,destPath);
  myFixture.configureFromExistingVirtualFile(file);
  if (testGotoDeclaration) {
    PsiElement[] targets=GotoDeclarationAction.findAllTargetElements(getProject(),myFixture.getEditor(),myFixture.getCaretOffset());
    assertNotNull(targets);
    assertEquals(expectedTargets,targets.length);
  }
  GotoResourceAction action=new GotoResourceAction();
  DataContext dataContext=DataManager.getInstance().getDataContextFromFocus().getResult();
  AnActionEvent event=new AnActionEvent(null,dataContext,"",action.getTemplatePresentation(),ActionManager.getInstance(),0);
  action.update(event);
  assertEquals(expectedEnabled,event.getPresentation().isEnabled());
  PsiElement[] targets=GotoResourceAction.findTargets(dataContext);
  assertEquals(expectedTargets,targets.length);
}
