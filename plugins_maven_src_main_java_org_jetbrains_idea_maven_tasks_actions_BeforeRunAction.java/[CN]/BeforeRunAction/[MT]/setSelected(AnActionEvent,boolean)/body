{
  final Project project=e.getData(PlatformDataKeys.PROJECT);
  final MavenTask task=MavenTasksManager.getMavenTask(e.getDataContext());
  if (project != null && task != null) {
    final MavenTasksManager eventsHandler=MavenTasksManager.getInstance(project);
    final DialogWrapper dialog=new ExecuteOnRunDialog(project,TasksBundle.message("maven.event.execute.before.run.debug")){
      protected boolean isAssigned(      ConfigurationType type,      RunConfiguration configuration){
        return task.equals(eventsHandler.getAssignedTask(type,configuration));
      }
      protected void assign(      final ConfigurationType type,      RunConfiguration configuration){
        eventsHandler.assignTask(type,configuration,task);
      }
      protected void clearAll(){
        eventsHandler.clearAssignments(task);
      }
    }
;
    dialog.show();
    if (dialog.isOK()) {
      eventsHandler.updateTaskShortcuts(task);
      update(e);
    }
  }
}
