{
  myProject=new Project(new GantBinding(),mySourceToClassCallback);
  myRoot=new File(prjDir).getAbsolutePath();
  myProjectSnapshot=myHomeDir + File.separator + myJPSDir+ File.separator+ myRoot.replace(File.separatorChar,myFileSeparatorReplacement);
  IdeaProjectLoader.loadFromPath(myProject,getAbsolutePath(myIDEADir),setupScript);
  for (  Module m : myProject.getModules().values()) {
    myModules.put(m.getName(),new ModuleWrapper(m));
  }
  for (  Library l : myProject.getLibraries().values()) {
    myLibraries.put(l.getName(),new LibraryWrapper(l));
  }
  myHistory=loadSnapshot();
  if (myHistory != null)   mySourceToClass.inherit(myHistory.mySourceToClass);
}
