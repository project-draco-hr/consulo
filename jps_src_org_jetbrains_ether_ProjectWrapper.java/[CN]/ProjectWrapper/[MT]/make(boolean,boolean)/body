{
  if (structureChanged() && !force) {
    System.out.println("Project \"" + myRoot + "\" structure changed, performing rebuild.");
    rebuild();
    return;
  }
  final List<Module> modules=new ArrayList<Module>();
  for (  Map.Entry<String,ModuleHistory> entry : myPresent.myModuleHistories.entrySet()) {
    if (entry.getValue().isDirty())     modules.add(myProject.getModules().get(entry.getKey()));
  }
  if (modules.isEmpty() && !force) {
    System.out.println("All module are up-to-date.");
    return;
  }
  System.out.println("Rebuilding modules:");
  for (  Module m : modules)   System.out.println("  " + m.getName());
  makeModules(modules,tests);
}
