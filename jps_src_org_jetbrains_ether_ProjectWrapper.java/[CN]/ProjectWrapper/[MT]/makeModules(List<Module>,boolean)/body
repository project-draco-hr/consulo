{
  final Set<Module> modules=new HashSet<Module>();
  new Object(){
    public void run(    final List<Module> initial){
      for (      Module module : initial) {
        if (modules.contains(module))         return;
        modules.add(module);
        final List<Module> successors=new ArrayList<Module>();
        for (        Module.ModuleDependency dep : module.getDependencies()) {
          final ClasspathItem cpi=dep.getItem();
          if (cpi instanceof Module) {
            successors.add((Module)cpi);
          }
        }
        run(successors);
      }
    }
  }
.run(initial);
  myProject.makeSelected(modules,tests);
}
