{
  if (myAction.myEditConfiguration) {
    final Object o=wrapper.getValue();
    if (o instanceof RunnerAndConfigurationSettingsImpl) {
      return doFinalStep(new Runnable(){
        @Override public void run(){
          myAction.editConfiguration(myProject,(RunnerAndConfigurationSettings)o);
        }
      }
);
    }
  }
  if (finalChoice && wrapper.available(myAction.getExecutor())) {
    return doFinalStep(new Runnable(){
      @Override public void run(){
        if (myAction.getExecutor() == myAction.myAlternativeExecutor) {
          PropertiesComponent.getInstance().setValue(myAction.myAddKey,Boolean.toString(true));
        }
        wrapper.perform(myProject,myAction.getExecutor(),DataManager.getInstance().getDataContext());
      }
    }
);
  }
 else {
    return wrapper.getNextStep(myProject,myAction);
  }
}
