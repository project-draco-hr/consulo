{
  if (myIndentFromParent != null) {
    final AbstractBlockWrapper firstIndentedParent=findFirstIndentedParent();
    final IndentData indentData=new IndentData(myIndentFromParent.getIndentSpaces(),myIndentFromParent.getSpaces());
    if (firstIndentedParent == null) {
      return indentData;
    }
 else {
      final WhiteSpace whiteSpace=firstIndentedParent.getWhiteSpace();
      return new IndentData(whiteSpace.getIndentOffset(),whiteSpace.getSpaces()).add(indentData);
    }
  }
  if (myParent == null)   return new IndentData(0);
  if (getIndent().isAbsolute()) {
    setCanUseFirstChildIndentAsBlockIndent(false);
    AbstractBlockWrapper current=this;
    while (current != null && current.getStartOffset() == getStartOffset()) {
      current.setCanUseFirstChildIndentAsBlockIndent(false);
      current=current.myParent;
    }
  }
  ArrayList<IndentData> ignored=new ArrayList<IndentData>();
  IndentData result=myParent.getChildOffset(this,options,this.getStartOffset());
  if (!ignored.isEmpty()) {
    result=result.add(ignored.get(ignored.size() - 1));
  }
  return result;
}
