{
  final Project project=(Project)e.getDataContext().getData(DataConstants.PROJECT);
  if (project == null) {
    return;
  }
  final String s=Messages.showInputDialog(project,"Input new favorites list name","Add New Favorites List",Messages.getInformationIcon(),"new",new InputValidator(){
    public boolean checkInput(    String inputString){
      return inputString != null && inputString.trim().length() > 0;
    }
    public boolean canClose(    String inputString){
      return inputString != null && inputString.trim().length() > 0;
    }
  }
);
  final FavoritesViewImpl favoritesView=FavoritesViewImpl.getInstance(project);
  final FavoritesTreeViewPanel favoritesTreeViewPanel=favoritesView.addNewFavoritesList(s);
  final ToolWindowManager windowManager=ToolWindowManager.getInstance(project);
  windowManager.getToolWindow(ToolWindowId.FAVORITES_VIEW).activate(null);
  favoritesView.setSelectedContent(favoritesView.getContent(favoritesTreeViewPanel));
}
