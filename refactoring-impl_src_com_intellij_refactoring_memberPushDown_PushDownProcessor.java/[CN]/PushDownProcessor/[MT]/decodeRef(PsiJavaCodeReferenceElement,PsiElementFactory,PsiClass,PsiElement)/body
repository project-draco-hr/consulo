{
  try {
    if (toGet.getCopyableUserData(REMOVE_QUALIFIER_KEY) != null) {
      toGet.putCopyableUserData(REMOVE_QUALIFIER_KEY,null);
      final PsiElement qualifier=ref.getQualifier();
      if (qualifier != null)       qualifier.delete();
    }
 else     if (toGet.getCopyableUserData(REPLACE_QUALIFIER_KEY) != null) {
      toGet.putCopyableUserData(REPLACE_QUALIFIER_KEY,null);
      final PsiElement qualifier=ref.getQualifier();
      if (qualifier != null) {
        if (ref instanceof PsiReferenceExpression) {
          qualifier.replace(factory.createReferenceExpression(targetClass));
        }
 else {
          qualifier.replace(factory.createReferenceElementByType(factory.createType(targetClass)));
        }
      }
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
