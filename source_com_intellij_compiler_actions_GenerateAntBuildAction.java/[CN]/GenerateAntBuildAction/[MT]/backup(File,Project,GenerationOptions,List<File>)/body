{
  if (!genOptions.backupPreviouslyGeneratedFiles || !file.exists()) {
    return true;
  }
  final String path=file.getPath();
  final int extensionIndex=path.lastIndexOf(".");
  final String extension=path.substring(extensionIndex,path.length());
  final String backupPath=path.substring(0,extensionIndex) + "_" + new Date(file.lastModified()).toString().replaceAll("\\s+","_").replaceAll(":","-")+ extension;
  final File backupFile=new File(backupPath);
  boolean ok;
  try {
    FileUtil.rename(file,backupFile);
    ok=true;
  }
 catch (  IOException e) {
    Messages.showErrorDialog(project,CompilerBundle.message("error.ant.files.backup.failed",path),ActionsBundle.actionText(IdeActions.ACTION_GENERATE_ANT_BUILD));
    ok=false;
  }
  filesToRefresh.add(backupFile);
  return ok;
}
