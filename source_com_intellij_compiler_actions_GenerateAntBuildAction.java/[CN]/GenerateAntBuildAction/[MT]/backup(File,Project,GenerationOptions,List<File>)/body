{
  if (!genOptions.backupPreviouslyGeneratedFiles || !file.exists()) {
    return true;
  }
  final String path=file.getPath();
  final int extensionIndex=path.lastIndexOf(".");
  final String extension=path.substring(extensionIndex,path.length());
  final String backupPath=path.substring(0,extensionIndex) + "_" + new Date(file.lastModified()).toString().replaceAll("\\s+","_").replaceAll(":","-")+ extension;
  final File backupFile=new File(backupPath);
  final boolean ok=file.renameTo(backupFile);
  if (!ok) {
    Messages.showErrorDialog(project,"Failed to backup file " + path,"Backup Error");
  }
  filesToRefresh.add(backupFile);
  return ok;
}
