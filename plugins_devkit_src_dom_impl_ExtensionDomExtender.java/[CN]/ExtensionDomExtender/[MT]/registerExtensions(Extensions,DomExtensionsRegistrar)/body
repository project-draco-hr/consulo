{
  final XmlElement xmlElement=extensions.getXmlElement();
  if (xmlElement == null)   return new Object[0];
  final XmlFile xmlFile=(XmlFile)xmlElement.getContainingFile();
  final PsiManager psiManager=xmlFile.getManager();
  IdeaPlugin ideaPlugin=extensions.getParentOfType(IdeaPlugin.class,true);
  if (ideaPlugin == null)   return new Object[0];
  registerExtensions(extensions,ideaPlugin,registrar,psiManager);
  List<Object> deps=new ArrayList<Object>();
  final GenericAttributeValue<IdeaPlugin> extensionNs=extensions.getDefaultExtensionNs();
  final IdeaPlugin plugin=extensionNs.getValue();
  if (plugin != null) {
    registerExtensions(extensions,plugin,registrar,psiManager);
    deps.add(plugin.<DomElement>getRoot());
  }
  deps.add(ProjectRootManager.getInstance(xmlFile.getProject()));
  deps.add(ideaPlugin.getRoot());
  return deps.toArray(new Object[deps.size()]);
}
