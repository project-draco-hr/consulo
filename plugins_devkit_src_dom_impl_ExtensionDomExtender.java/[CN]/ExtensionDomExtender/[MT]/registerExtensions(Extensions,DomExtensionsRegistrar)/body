{
  final XmlElement xmlElement=extensions.getXmlElement();
  if (xmlElement == null)   return;
  IdeaPlugin ideaPlugin=extensions.getParentOfType(IdeaPlugin.class,true);
  if (ideaPlugin == null)   return;
  String prefix=getEpPrefix(extensions);
  for (  IdeaPlugin plugin : getVisiblePlugins(ideaPlugin)) {
    final String pluginId=StringUtil.notNullize(plugin.getPluginId(),"com.intellij");
    for (    ExtensionPoints points : plugin.getExtensionPoints()) {
      for (      ExtensionPoint point : points.getExtensionPoints()) {
        registerExtensionPoint(registrar,point,prefix,pluginId);
      }
    }
  }
}
