{
  super(module.getProject(),false);
  setTitle("Edit Profiles");
  getOKAction().putValue(DEFAULT_ACTION,null);
  getCancelAction().putValue(DEFAULT_ACTION,null);
  myProfileModel=new CollectionListModel<Profile>();
  for (  Profile profile : profiles) {
    myProfileModel.add(new ProfileWrapper(profile));
  }
  myProfileList=new JBList();
  myProfileList.setModel(myProfileModel);
  myProfileList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  myProfileList.setCellRenderer(new DefaultListCellRenderer(){
    @Override public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      Profile profile=(Profile)value;
      String name=profile.getName();
      if (StringUtil.isEmpty(name)) {
        name="[None]";
      }
      return super.getListCellRendererComponent(list,name,index,isSelected,cellHasFocus);
    }
  }
);
  myProfileList.addListSelectionListener(new ListSelectionListener(){
    @Override public void valueChanged(    ListSelectionEvent e){
      updateProfilePanel();
    }
  }
);
  ToolbarDecorator decorator=ToolbarDecorator.createDecorator(myProfileList);
  decorator.setAddAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      addProfile();
    }
  }
);
  decorator.setRemoveAction(new AnActionButtonRunnable(){
    @Override public void run(    AnActionButton button){
      removeProfile();
    }
  }
);
  decorator.setUpAction(null);
  decorator.setDownAction(null);
  myProfileManager=new ProfileManager(module,EmptyRunnable.INSTANCE);
  myContentPanel=new JPanel(new GridBagLayout());
  myContentPanel.setPreferredSize(new Dimension(600,500));
  myContentPanel.add(decorator.createPanel(),new GridBagConstraints(0,0,3,1,0,1,GridBagConstraints.LINE_START,GridBagConstraints.BOTH,new Insets(0,0,0,0),0,0));
  myContentPanel.add(new JLabel("Profile name:"),new GridBagConstraints(0,1,1,1,0,0,GridBagConstraints.LINE_START,GridBagConstraints.NONE,new Insets(10,0,10,0),0,0));
  myProfileNameField=new JTextField();
  myProfileNameField.setEditable(false);
  myContentPanel.add(myProfileNameField,new GridBagConstraints(1,1,2,1,1,0,GridBagConstraints.LINE_START,GridBagConstraints.HORIZONTAL,new Insets(10,0,10,0),0,0));
  myDeviceElement=new ProfileElement(myContentPanel,"Device:",myProfileManager.getDeviceAction());
  myDeviceConfigurationElement=new ProfileElement(myContentPanel,"Configuration:",myProfileManager.getDeviceConfigurationAction());
  myTargetElement=new ProfileElement(myContentPanel,"Target:",myProfileManager.getTargetAction());
  myLocaleElement=new ProfileElement(myContentPanel,"Locale:",myProfileManager.getLocaleAction());
  myDockModeElement=new ProfileElement(myContentPanel,"Dock Mode:",myProfileManager.getDockModeAction());
  myNightModeElement=new ProfileElement(myContentPanel,"Night Mode:",myProfileManager.getNightModeAction());
  myThemeElement=new ProfileElement(myContentPanel,"Theme:",myProfileManager.getThemeAction());
  init();
  initValidation();
  if (!profiles.isEmpty()) {
    myProfileList.setSelectedIndex(0);
  }
}
