{
  Presentation presentation=e.getPresentation();
  DataContext dataContext=e.getDataContext();
  VirtualFile file=(VirtualFile)dataContext.getData(DataConstants.VIRTUAL_FILE);
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  boolean haveSmthToDo;
  if (project == null || file == null || file.isDirectory()) {
    haveSmthToDo=false;
  }
 else {
    haveSmthToDo=FileTypeManager.getInstance().getFileTypeByFile(file) == StdFileTypes.UNKNOWN;
  }
  presentation.setVisible(haveSmthToDo || ActionPlaces.MAIN_MENU.equals(e.getPlace()));
  presentation.setEnabled(haveSmthToDo);
}
