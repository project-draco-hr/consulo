{
  List<SimpleRowElement> result=new SmartList<SimpleRowElement>();
  int position=0;
  for (  GraphElement element : getSortedVisibleElementsInRow(visibleRowIndex)) {
    if (element instanceof GraphNode) {
      result.add(new SimpleRowElement(element,SimplePrintElement.Type.NODE,position));
    }
    if (element instanceof GraphEdge) {
      GraphEdge edge=(GraphEdge)element;
      int edgeSize=edge.getDownNodeIndex() - edge.getUpNodeIndex();
      int upOffset=visibleRowIndex - edge.getUpNodeIndex();
      int downOffset=edge.getDownNodeIndex() - visibleRowIndex;
      if (edgeSize >= LONG_EDGE_SIZE) {
        if (!showLongEdges) {
          addArrowIfNeeded(result,position,edge,upOffset,downOffset,LONG_EDGE_PART_SIZE);
        }
 else {
          if (SHOW_ARROW_WHEN_SHOW_LONG_EDGES)           addArrowIfNeeded(result,position,edge,upOffset,downOffset,LONG_EDGE_PART_SIZE);
          if (edgeSize >= VERY_LONG_EDGE_SIZE)           addArrowIfNeeded(result,position,edge,upOffset,downOffset,VERY_LONG_EDGE_PART_SIZE);
        }
      }
    }
    position++;
  }
  return result;
}
