{
  myFileTypeManager=fileTypeManager;
  myProjectRootManager=projectRootManager;
  myProjectFileIndex=myProjectRootManager.getFileIndex();
  myManager=(PsiManagerImpl)psiManager;
  myFileManager=(FileManagerImpl)myManager.getFileManager();
  myConnection=psiManager.getProject().getMessageBus().connect(psiManager.getProject());
  startupManager.registerPreStartupActivity(new Runnable(){
    @Override public void run(){
      myConnection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkVirtualFileListenerAdapter(PsiVFSListener.this));
    }
  }
);
}
