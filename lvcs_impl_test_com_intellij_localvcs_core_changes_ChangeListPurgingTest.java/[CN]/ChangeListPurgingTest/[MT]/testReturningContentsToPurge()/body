{
  createFile(r,1,"f",c("one"),-1);
  applyAndAdd(cs(1,new ChangeFileContentChange("f",c("two"),-1)));
  applyAndAdd(cs(2,new ChangeFileContentChange("f",c("three"),-1)));
  ChangeFileContentChange c1=new ChangeFileContentChange("f",c("four"),-1);
  ChangeFileContentChange c2=new ChangeFileContentChange("f",c("five"),-1);
  applyAndAdd(cs(3,c1,c2));
  applyAndAdd(cs(4,new ChangeFileContentChange("f",c("six"),-1)));
  List<Content> contents=cl.purgeObsolete(1);
  assertEquals(1,cl.getChanges().size());
  assertEquals(4,contents.size());
  assertEquals(c("one"),contents.get(0));
  assertEquals(c("two"),contents.get(1));
  assertEquals(c("three"),contents.get(2));
  assertEquals(c("four"),contents.get(3));
}
