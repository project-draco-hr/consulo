{
  final ProgressManager progressManager=ProgressManager.getInstance();
  final PsiSearchHelper searchHelper=PsiSearchHelper.SERVICE.getInstance(nameIdentifierOwner.getProject());
  final GlobalSearchScope scope=GlobalSearchScope.projectScope(nameIdentifierOwner.getProject());
  final String name=nameIdentifierOwner.getName();
  final boolean isCheapToSearch=name != null && searchHelper.isCheapEnoughToSearch(name,scope,null,progressManager.getProgressIndicator()) != PsiSearchHelper.SearchCostResult.TOO_MANY_OCCURRENCES;
  return isCheapToSearch ? ReferencesSearch.search(nameIdentifierOwner).findAll().size() : -1;
}
