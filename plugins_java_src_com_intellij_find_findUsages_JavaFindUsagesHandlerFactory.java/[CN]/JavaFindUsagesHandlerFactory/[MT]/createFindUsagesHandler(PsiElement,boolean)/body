{
  if (element instanceof PsiDirectory) {
    final PsiPackage psiPackage=JavaDirectoryService.getInstance().getPackage((PsiDirectory)element);
    return psiPackage == null ? null : new JavaFindUsagesHandler(psiPackage,this);
  }
  if (element instanceof PsiMethod && !forHighlightUsages) {
    final PsiMethod[] methods=SuperMethodWarningUtil.checkSuperMethods((PsiMethod)element,JavaFindUsagesHandler.ACTION_STRING);
    if (methods.length > 1) {
      return new JavaFindUsagesHandler(element,methods,this);
    }
    if (methods.length == 1) {
      return new JavaFindUsagesHandler(methods[0],this);
    }
    return FindUsagesHandler.NULL_HANDLER;
  }
  return new JavaFindUsagesHandler(element,this);
}
