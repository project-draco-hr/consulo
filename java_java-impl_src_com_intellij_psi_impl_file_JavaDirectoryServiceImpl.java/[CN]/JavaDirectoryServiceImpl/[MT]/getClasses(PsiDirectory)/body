{
  LOG.assertTrue(dir.isValid());
  List<PsiClass> classes=null;
  for (  PsiFile file : dir.getFiles()) {
    FileViewProvider viewProvider=file.getViewProvider();
    if (file instanceof PsiClassOwner && file == viewProvider.getPsi(viewProvider.getBaseLanguage())) {
      PsiClass[] psiClasses=((PsiClassOwner)file).getClasses();
      if (psiClasses.length == 0)       continue;
      if (classes == null)       classes=new ArrayList<PsiClass>();
      ContainerUtil.addAll(classes,psiClasses);
    }
  }
  return classes == null ? PsiClass.EMPTY_ARRAY : classes.toArray(new PsiClass[classes.size()]);
}
