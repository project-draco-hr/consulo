{
  EditorFactory editorFactory=EditorFactory.getInstance();
  Document editorDocument=editorFactory.createDocument(text);
  EditorEx editor=(EditorEx)editorFactory.createViewer(editorDocument);
  EditorColorsScheme scheme=EditorColorsManager.getInstance().getGlobalScheme();
  editor.setColorsScheme(scheme);
  EditorSettings settings=editor.getSettings();
  settings.setLineNumbersShown(true);
  settings.setWhitespacesShown(true);
  settings.setLineMarkerAreaShown(false);
  settings.setFoldingOutlineShown(false);
  settings.setAdditionalColumnsCount(0);
  settings.setAdditionalLinesCount(0);
  settings.setRightMarginShown(true);
  settings.setRightMargin(60);
  LogicalPosition pos=new LogicalPosition(line,column);
  editor.getCaretModel().moveToLogicalPosition(pos);
  if (selectedLine >= 0) {
    editor.getSelectionModel().setSelection(editorDocument.getLineStartOffset(selectedLine),editorDocument.getLineEndOffset(selectedLine));
  }
  editor.setHighlighter(HighlighterFactory.createJavaHighlighter(scheme,LanguageLevel.HIGHEST));
  return editor;
}
