{
  AddFieldBreakpointDialog dialog=new AddFieldBreakpointDialog(myProject){
    protected boolean validateData(){
      String className=getClassName();
      if (className.length() == 0) {
        Messages.showMessageDialog(myProject,"Cannot add watchpoint: a class name is not specified","Add Field Watchpoint",Messages.getErrorIcon());
        return false;
      }
      String fieldName=getFieldName();
      if (fieldName.length() == 0) {
        Messages.showMessageDialog(myProject,"Cannot add watchpoint: a field name is not specified","Add Field Watchpoint",Messages.getErrorIcon());
        return false;
      }
      PsiClass psiClass=PsiManager.getInstance(myProject).findClass(className,GlobalSearchScope.allScope(myProject));
      if (psiClass != null) {
        PsiFile psiFile=psiClass.getContainingFile();
        Document document=PsiDocumentManager.getInstance(myProject).getDocument(psiFile);
        if (document != null) {
          PsiField field=psiClass.findFieldByName(fieldName,true);
          if (field != null) {
            int line=document.getLineNumber(field.getTextOffset());
            FieldBreakpoint fieldBreakpoint=getBreakpointManager().addFieldBreakpoint(document,line,fieldName);
            if (fieldBreakpoint != null) {
              myFieldBreakpointsPanel.addBreakpoint(fieldBreakpoint);
              myFieldBreakpointsPanel.getTable().requestFocus();
              updateTitles();
              return true;
            }
          }
 else {
            Messages.showMessageDialog(myProject,"Cannot create a field watchpoint for \"" + className + "."+ fieldName+ "\".\nField \""+ fieldName+ "\" not found","Error",Messages.getErrorIcon());
          }
        }
      }
 else {
        Messages.showMessageDialog(myProject,"Cannot create a field watchpoint for \"" + className + "."+ fieldName+ "\".\nNo sources for class \""+ className+ "\"","Error",Messages.getErrorIcon());
      }
      return false;
    }
  }
;
  dialog.show();
}
