{
  if (file.isFile())   return false;
  if (myProgressIndicator != null) {
    myProgressIndicator.setText(com.intellij.CvsBundle.message("progress.text.prune.empty.directories"));
    myProgressIndicator.setText2(com.intellij.CvsBundle.message("progress.text.processing",file.getAbsolutePath()));
  }
  final File[] subFiles=file.listFiles();
  if (subFiles == null)   return true;
  boolean canPrune=true;
  File adminDirectory=null;
  for (  File subFile : subFiles) {
    if (isAdminDirectory(subFile)) {
      adminDirectory=subFile;
    }
 else {
      canPrune&=execute(subFile);
    }
  }
  if (adminDirectory == null)   return false;
  canPrune&=!containsFileEntries(file);
  if (canPrune) {
    return FileUtil.delete(file);
  }
 else {
    return false;
  }
}
