{
  if (file.isFile())   return false;
  if (myProgressIndicator != null) {
    myProgressIndicator.setText(CvsBundle.message("progress.text.prune.empty.directories"));
    myProgressIndicator.setText2(CvsBundle.message("progress.text.processing",file.getAbsolutePath()));
  }
  final File[] subFiles=file.listFiles();
  if (subFiles == null)   return true;
  boolean canPrune=true;
  if (!new File(file,CvsUtil.CVS).isDirectory())   return false;
  for (  File subFile : subFiles) {
    if (!isAdminDirectory(subFile)) {
      canPrune&=execute(subFile);
    }
  }
  canPrune&=!containsFileEntries(file);
  if (!canPrune)   return false;
  if (!FileUtil.delete(file))   return false;
  CvsUtil.removeEntryFor(file);
  return true;
}
