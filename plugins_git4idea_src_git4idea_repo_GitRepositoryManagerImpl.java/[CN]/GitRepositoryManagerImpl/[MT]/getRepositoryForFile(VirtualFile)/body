{
  final VcsRoot vcsRoot=myVcsManager.getVcsRootObjectFor(file);
  if (vcsRoot == null) {
    return null;
  }
  final AbstractVcs vcs=vcsRoot.vcs;
  if (!myVcs.equals(vcs)) {
    LOG.info(String.format("getRepositoryForFile returned non-Git (%s) root for file %s",vcs != null ? vcs.getDisplayName() : vcs,file));
    return null;
  }
  return getRepositoryForRoot(vcsRoot.path);
}
