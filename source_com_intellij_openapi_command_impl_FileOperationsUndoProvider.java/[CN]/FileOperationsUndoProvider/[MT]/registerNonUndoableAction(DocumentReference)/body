{
  if (myUndoManager.undoableActionsForDocumentAreEmpty(r))   return;
  myUndoManager.undoableActionPerformed(new NonUndoableAction(){
    public DocumentReference[] getAffectedDocuments(){
      return new DocumentReference[]{r};
    }
    public boolean isComplex(){
      return true;
    }
  }
);
}
