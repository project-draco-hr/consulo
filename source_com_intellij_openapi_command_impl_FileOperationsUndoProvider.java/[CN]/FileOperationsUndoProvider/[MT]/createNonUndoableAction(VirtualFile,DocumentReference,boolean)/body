{
  if (getLocalVcs() == null || !getLocalVcs().isUnderVcs(vFile) || myUndoManager.undoableActionsForDocumentAreEmpty(newRef)) {
    return;
  }
  myUndoManager.undoableActionPerformed(new NonUndoableAction(){
    public DocumentReference[] getAffectedDocuments(){
      return new DocumentReference[]{newRef};
    }
    public boolean isComplex(){
      return isComplex;
    }
  }
);
}
