{
  myUndoManager=(UndoManagerImpl)undoManager;
  myProject=project;
  if (myProject != null) {
    virtualFileManager().addVirtualFileListener(this);
    if (LocalVcs.getInstance(myProject) != null) {
      LocalVcs.getInstance(myProject).getLocalVcsPurgingProvider().registerLocker(this);
    }
  }
}
