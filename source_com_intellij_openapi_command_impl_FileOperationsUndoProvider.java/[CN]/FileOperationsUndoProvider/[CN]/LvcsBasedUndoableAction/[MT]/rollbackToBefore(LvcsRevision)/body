{
  try {
    LocalVcsChanges.rollback(getChanges(r));
    return true;
  }
 catch (  final IOException e) {
    Application app=ApplicationManager.getApplication();
    Runnable runnable=new Runnable(){
      public void run(){
        Messages.showErrorDialog(CommonBundle.message("cannot.undo.command.error.message",e.getLocalizedMessage()),CommonBundle.message("cannot.undo.dialog.title"));
      }
    }
;
    if (app.isDispatchThread()) {
      runnable.run();
    }
 else {
      app.invokeLater(runnable);
    }
    return false;
  }
}
