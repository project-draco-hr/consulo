{
  if (instruction == null || variableName == null)   return null;
  if (tooComplex.contains(instruction))   return null;
  TypeDfaState cache=varTypes.get().get(instruction.num());
  if (!cache.containsVariable(variableName)) {
    Set<Instruction> interesting=collectRequiredInstructions(instruction,variableName);
    List<TypeDfaState> dfaResult=performTypeDfa(scope,flow,interesting);
    if (dfaResult == null) {
      tooComplex.addAll(interesting);
    }
 else {
      cacheDfaResult(dfaResult);
    }
  }
  DFAType dfaType=getCachedInferredType(variableName,instruction);
  return dfaType == null ? null : dfaType.getResultType();
}
