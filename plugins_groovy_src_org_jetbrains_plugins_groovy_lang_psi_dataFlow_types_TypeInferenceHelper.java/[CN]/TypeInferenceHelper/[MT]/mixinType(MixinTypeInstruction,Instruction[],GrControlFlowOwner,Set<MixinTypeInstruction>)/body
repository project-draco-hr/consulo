{
  if (!trace.add(instruction)) {
    return null;
  }
  String varName=instruction.getVariableName();
  if (varName == null) {
    return null;
  }
  ReadWriteVariableInstruction originalInstr=instruction.getInstructionToMixin(flow);
  if (originalInstr == null) {
    LOG.error(scope.getContainingFile().getName() + ":" + scope.getText());
  }
  DFAType original=getInferredType(varName,originalInstr,flow,scope,trace);
  final PsiType mixin=instruction.inferMixinType();
  if (mixin == null) {
    return original;
  }
  if (original == null) {
    original=DFAType.create(null);
  }
  original.addMixin(mixin,instruction.getConditionInstruction());
  trace.remove(instruction);
  return original;
}
