{
  final Dimension size=super.getPreferredSize();
  size.height=TabsUtil.getTabsHeight();
  if (myActionPanel != null && !myActionPanel.isVisible()) {
    final Dimension actionPanelSize=myActionPanel.getPreferredSize();
    size.width+=actionPanelSize.width;
  }
  final JBTabsPosition pos=myTabs.getTabsPosition();
switch (pos) {
case top:
case bottom:
    if (myTabs.hasUnderline())     size.height+=myTabs.getActiveTabUnderlineHeight() - 1;
  break;
case left:
case right:
size.width+=getSelectedOffset();
break;
}
return size;
}
