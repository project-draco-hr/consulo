{
  if (!myFastMode) {
    return JavaPsiFacade.getInstance(myProject).getShortNamesCache().getAllClassNames();
  }
  final List<String> names=new ArrayList<String>();
  myFastMode=ClassInheritorsSearch.search(myBaseClass,myScope,true).forEach(new Processor<PsiClass>(){
    private int count;
    @Override public boolean process(    PsiClass aClass){
      if (count++ > 1000) {
        return false;
      }
      if ((myClassFilter.isAccepted(aClass)) && aClass.getName() != null) {
        names.add(aClass.getName());
      }
      return true;
    }
  }
);
  if (!myFastMode) {
    return getNames(checkBoxState);
  }
  if ((myClassFilter.isAccepted(myBaseClass)) && myBaseClass.getName() != null) {
    names.add(myBaseClass.getName());
  }
  return names.toArray(new String[names.size()]);
}
