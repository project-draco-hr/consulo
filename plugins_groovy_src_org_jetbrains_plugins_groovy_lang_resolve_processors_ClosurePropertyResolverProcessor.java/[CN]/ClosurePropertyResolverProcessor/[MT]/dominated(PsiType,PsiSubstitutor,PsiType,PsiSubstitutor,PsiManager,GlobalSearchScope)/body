{
  if (closureType1 instanceof GrClosureType && !(closureType2 instanceof GrClosureType))   return true;
  if (!(closureType1 instanceof GrClosureType) && closureType2 instanceof GrClosureType)   return false;
  if (!(closureType1 instanceof GrClosureType) && !(closureType2 instanceof GrClosureType))   return false;
  final GrClosureSignature signature1=((GrClosureType)closureType1).getSignature();
  final GrClosureSignature signature2=((GrClosureType)closureType2).getSignature();
  GrClosureParameter[] params1=signature1.getParameters();
  GrClosureParameter[] params2=signature2.getParameters();
  if (myArgumentTypes == null && params1.length != params2.length)   return false;
  if (params1.length < params2.length) {
    if (params1.length == 0)     return false;
    final PsiType lastType=params1[params1.length - 1].getType();
    return lastType instanceof PsiArrayType;
  }
  for (int i=0; i < params2.length; i++) {
    PsiType type1=substitutor1.substitute(params1[i].getType());
    PsiType type2=substitutor2.substitute(params2[i].getType());
    if (!typesAgree(manager,scope,type1,type2))     return false;
  }
  return true;
}
