{
  if (!(e instanceof KeyEvent))   return e;
  KeyboardSettingsExternalizable externalizable=KeyboardSettingsExternalizable.getInstance();
  if (!Registry.is("ide.non.english.keyboard.layout.fix") || externalizable == null || !externalizable.isNonEnglishKeyboardSupportEnabled())   return e;
  KeyEvent ke=(KeyEvent)e;
  Component sourceComponent=WindowManagerEx.getInstanceEx().getMostRecentFocusedWindow();
switch (ke.getID()) {
case KeyEvent.KEY_PRESSED:
    break;
case KeyEvent.KEY_RELEASED:
  break;
}
Integer keyCodeFromChar=CharToVKeyMap.get(ke.getKeyChar());
if (keyCodeFromChar == ke.getKeyCode() || keyCodeFromChar == KeyEvent.VK_UNDEFINED) {
return e;
}
if (keyCodeFromChar != null) {
if (keyCodeFromChar != ke.getKeyCode()) {
  ke.setKeyCode(keyCodeFromChar);
}
}
return ke;
}
