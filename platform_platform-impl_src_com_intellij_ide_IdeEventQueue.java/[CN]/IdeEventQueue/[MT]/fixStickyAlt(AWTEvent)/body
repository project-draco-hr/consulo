{
  if (Registry.is("actionSystem.win.suppressAlt.new")) {
    if (UIUtil.isUnderWindowsLookAndFeel() && e instanceof InputEvent && (((InputEvent)e).getModifiers() & (InputEvent.ALT_MASK | InputEvent.ALT_DOWN_MASK)) != 0 && !(e instanceof KeyEvent && ((KeyEvent)e).getKeyCode() == KeyEvent.VK_ALT)) {
      try {
        if (ourStickyAltField == null) {
          Class<?> aClass=Class.forName("com.sun.java.swing.plaf.windows.WindowsRootPaneUI$AltProcessor");
          ourStickyAltField=ReflectionUtil.getDeclaredField(aClass,"menuCanceledOnPress");
        }
        if (ourStickyAltField != null) {
          ourStickyAltField.set(null,true);
        }
      }
 catch (      Exception exception) {
        LOG.error(exception);
      }
    }
  }
 else   if (SystemInfo.isWindowsXP && e instanceof KeyEvent && ((KeyEvent)e).getKeyCode() == KeyEvent.VK_ALT) {
    ((KeyEvent)e).consume();
  }
}
