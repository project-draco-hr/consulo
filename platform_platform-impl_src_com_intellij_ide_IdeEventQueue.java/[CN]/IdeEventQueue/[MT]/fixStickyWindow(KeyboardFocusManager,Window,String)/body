{
  Window showingWindow=wnd;
  if (wnd != null && !wnd.isShowing()) {
    while (showingWindow != null) {
      if (showingWindow.isShowing())       break;
      showingWindow=(Window)showingWindow.getParent();
    }
    if (showingWindow == null) {
      final Frame[] allFrames=Frame.getFrames();
      for (      Frame each : allFrames) {
        if (each.isShowing()) {
          showingWindow=each;
          break;
        }
      }
    }
    if (showingWindow != null && showingWindow != wnd) {
      final Method setActive=ReflectionUtil.findMethod(KeyboardFocusManager.class.getDeclaredMethods(),resetMethod,Window.class);
      if (setActive != null) {
        try {
          setActive.setAccessible(true);
          setActive.invoke(mgr,(Window)showingWindow);
        }
 catch (        Exception exc) {
          LOG.info(exc);
        }
      }
    }
  }
}
