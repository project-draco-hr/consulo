{
  addIdleTimeCounterRequest();
  final KeyboardFocusManager keyboardFocusManager=KeyboardFocusManager.getCurrentKeyboardFocusManager();
  keyboardFocusManager.addPropertyChangeListener("permanentFocusOwner",new PropertyChangeListener(){
    public void propertyChange(    final PropertyChangeEvent e){
      final Application application=ApplicationManager.getApplication();
      if (application == null) {
        return;
      }
      application.assertIsDispatchThread();
      final Window focusedWindow=keyboardFocusManager.getFocusedWindow();
      final Component focusOwner=keyboardFocusManager.getFocusOwner();
      if (mySuspendMode && focusedWindow != null && focusOwner != null && focusOwner != myFocusOwner && !(focusOwner instanceof Window)) {
        exitSuspendMode();
      }
    }
  }
);
  Registry.get("actionSystem.idleTime").addListener(new RegistryValueListener(){
    public void beforeValueChanged(    RegistryValue value){
    }
    public void afterValueChanged(    RegistryValue value){
      installIdleMessageBusSync();
    }
  }
,null);
  installIdleMessageBusSync();
}
