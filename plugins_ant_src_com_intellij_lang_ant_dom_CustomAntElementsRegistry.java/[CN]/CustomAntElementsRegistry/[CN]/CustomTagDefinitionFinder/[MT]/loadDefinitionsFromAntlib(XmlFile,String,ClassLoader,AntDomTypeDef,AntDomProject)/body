{
  final AntDomAntlib antLib=AntSupport.getAntLib(xmlFile);
  if (antLib != null) {
    final List<AntDomTypeDef> defs=new ArrayList<AntDomTypeDef>();
    defs.addAll(antLib.getTaskdefs());
    defs.addAll(antLib.getTypedefs());
    if (!defs.isEmpty()) {
      for (      AntDomTypeDef def : defs) {
        final String tagName=def.getName().getStringValue();
        final String className=def.getClassName().getStringValue();
        if (tagName != null && className != null) {
          registerElement(typedef != null ? typedef : def,tagName,uri,className,loader);
        }
 else {
          defineCustomElementsFromResources(def,uri,antProject,loader);
        }
      }
    }
  }
}
