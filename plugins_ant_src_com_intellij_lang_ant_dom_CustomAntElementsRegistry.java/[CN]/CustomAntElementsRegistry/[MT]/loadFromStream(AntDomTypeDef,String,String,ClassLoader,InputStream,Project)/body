{
  if (isXmlFormat(typedef,resource)) {
  }
 else {
    final StringBuilder builder=StringBuilderSpinAllocator.alloc();
    try {
      int nextByte;
      try {
        while ((nextByte=stream.read()) >= 0) {
          builder.append((char)nextByte);
        }
      }
  finally {
        stream.close();
      }
      final PropertiesFile propFile=(PropertiesFile)createDummyFile("dummy.properties",StdFileTypes.PROPERTIES,builder,project);
      for (      final Property property : propFile.getProperties()) {
        registerElement(typedef,property.getUnescapedKey(),nsPrefix,property.getValue(),loader);
      }
    }
 catch (    IOException e) {
      LOG.info(e);
    }
 finally {
      StringBuilderSpinAllocator.dispose(builder);
    }
  }
}
