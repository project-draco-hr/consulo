{
  if (myExecutionResult == null) {
    throw new IllegalStateException("Missing ExecutionResult");
  }
  if (myRunProfile == null) {
    throw new IllegalStateException("Missing RunProfile");
  }
  myContentPanel=new JPanel(new BorderLayout(2,0));
  myContentPanel.setBorder(BorderFactory.createEmptyBorder(2,2,2,2));
  final Disposable disposable=new Disposable(){
    public void dispose(){
      for (      Disposable disposable : myDisposeables) {
        disposable.dispose();
      }
    }
  }
;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new MyRunContentDescriptor(myRunProfile,myExecutionResult,myReuseProhibited,myContentPanel,disposable);
  }
  if (myComponent == null) {
    final ExecutionConsole console=myExecutionResult.getExecutionConsole();
    if (console != null) {
      if (myRunProfile instanceof RunConfigurationBase && !((RunConfigurationBase)myRunProfile).needAdditionalConsole()) {
        myComponent=console.getComponent();
      }
 else {
        if (myComponent == null) {
          myComponent=console.getComponent();
        }
        if (myRunProfile instanceof RunConfigurationBase) {
          myManager.initLogConsoles((RunConfigurationBase)myRunProfile,myExecutionResult.getProcessHandler());
        }
      }
    }
  }
  MyRunContentDescriptor contentDescriptor=new MyRunContentDescriptor(myRunProfile,myExecutionResult,myReuseProhibited,myContentPanel,disposable);
  if (myComponent != null) {
    myContentPanel.add(myComponent,BorderLayout.CENTER);
  }
  myContentPanel.add(createActionToolbar(contentDescriptor,myContentPanel),BorderLayout.WEST);
  return contentDescriptor;
}
