{
  if (myExecutionResult == null) {
    throw new IllegalStateException("Missing ExecutionResult");
  }
  if (myRunProfile == null) {
    throw new IllegalStateException("Missing RunProfile");
  }
  myUi=RunnerLayoutUi.Factory.getInstance(myProject).create("JavaRunner",myRunner.getInfo().getId(),myRunProfile.getName(),this);
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    return new MyRunContentDescriptor(myRunProfile,myExecutionResult,myReuseProhibited,myUi.getComponent(),this);
  }
  final ExecutionConsole console=myExecutionResult.getExecutionConsole();
  if (console != null) {
    final Content consoleContent=myUi.createContent("Console",console.getComponent(),"Console",IconLoader.getIcon("/debugger/console.png"),console.getPreferredFocusableComponent());
    myUi.addContent(consoleContent,0,RunnerLayoutUi.PlaceInGrid.bottom,false);
    if (myRunProfile instanceof RunConfigurationBase) {
      myManager.initLogConsoles((RunConfigurationBase)myRunProfile,myExecutionResult.getProcessHandler());
    }
  }
  MyRunContentDescriptor contentDescriptor=new MyRunContentDescriptor(myRunProfile,myExecutionResult,myReuseProhibited,myUi.getComponent(),this);
  myUi.setLeftToolbar(createActionToolbar(contentDescriptor,myUi.getComponent()),ActionPlaces.UNKNOWN);
  return contentDescriptor;
}
