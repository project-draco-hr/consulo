{
  final Collection<LookupElement> lookupSet=new LinkedHashSet<LookupElement>();
  getVariantsFromContributors(CompletionContributor.EP_NAME,parameters,null,new Consumer<LookupElement>(){
    public void consume(    final LookupElement lookupElement){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          if (lookupSet.add(lookupElement)) {
            consumer.consume(lookupElement);
          }
        }
      }
);
    }
  }
);
  return lookupSet.toArray(new LookupElement[lookupSet.size()]);
}
