{
  super(ApplicationNamesInfo.getInstance().getFullProductName() + " Initial Configuration Wizard");
  loadDisabledPlugins(new File(PathManager.getConfigPath()));
  for (  ApplicationInfoEx.PluginChooserPage page : pluginChooserPages) {
    if (page.getCategory() == null) {
      myOtherStep=new SelectPluginsStep(page.getTitle(),myDisabledPluginIds,null);
    }
 else {
      addSelectPluginsStep(page.getCategory(),page.getTitle(),page.getDependentPlugin());
    }
  }
  if (myOtherStep != null) {
    add(myOtherStep);
  }
  final IdeaPluginDescriptor[] pluginDescriptors=PluginManager.loadDescriptors();
  for (  IdeaPluginDescriptor pluginDescriptor : pluginDescriptors) {
    if (pluginDescriptor.getPluginId().getIdString().equals("com.intellij")) {
      continue;
    }
    PluginManager.initClassLoader(getClass().getClassLoader(),(IdeaPluginDescriptorImpl)pluginDescriptor);
    SelectPluginsStep step=myStepMap.get(pluginDescriptor.getCategory());
    if (step != null) {
      step.addPlugin(pluginDescriptor);
    }
 else     if (myOtherStep != null) {
      myOtherStep.addPlugin(pluginDescriptor);
    }
  }
  for (  SelectPluginsStep step : myStepMap.values()) {
    step.fillPlugins();
  }
  myOtherStep.fillPlugins();
}
