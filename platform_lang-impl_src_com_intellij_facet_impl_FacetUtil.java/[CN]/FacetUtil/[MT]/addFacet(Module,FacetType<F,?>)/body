{
  final ModifiableFacetModel model=FacetManager.getInstance(module).createModifiableModel();
  final F facet=createFacet(module,type);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      model.addFacet(facet);
      model.commit();
    }
  }
);
  return facet;
}
