{
  if (canvas == null && tagName.equalsIgnoreCase("graph")) {
    scale=mxUtils.getDouble(attrs,"scale",1);
    canvas=createCanvas(attrs);
    if (canvas != null) {
      canvas.setScale(scale);
    }
  }
 else   if (canvas != null) {
    boolean edge=tagName.equalsIgnoreCase("edge");
    boolean group=tagName.equalsIgnoreCase("group");
    boolean vertex=tagName.equalsIgnoreCase("vertex");
    if ((edge && attrs.containsKey("points")) || ((vertex || group) && attrs.containsKey("x") && attrs.containsKey("y")&& attrs.containsKey("width")&& attrs.containsKey("height"))) {
      mxCellState state=new mxCellState(null,null,attrs);
      String label=parseState(state,edge);
      canvas.drawCell(state);
      canvas.drawLabel(label,state,isHtmlLabels());
    }
  }
}
