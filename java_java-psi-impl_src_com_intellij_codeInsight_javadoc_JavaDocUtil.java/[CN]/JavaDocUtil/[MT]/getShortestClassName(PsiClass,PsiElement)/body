{
  @NonNls String shortName=aClass.getName();
  if (shortName == null) {
    shortName="null";
  }
  PsiClass containingClass=aClass.getContainingClass();
  while (containingClass != null && containingClass.isPhysical()) {
    shortName=containingClass.getName() + "." + shortName;
    containingClass=containingClass.getContainingClass();
  }
  String qName=aClass.getQualifiedName();
  if (qName == null)   return shortName;
  final PsiManager manager=aClass.getManager();
  return manager.areElementsEquivalent(aClass,JavaPsiFacade.getInstance(manager.getProject()).getResolveHelper().resolveReferencedClass(shortName,context)) ? shortName : qName;
}
