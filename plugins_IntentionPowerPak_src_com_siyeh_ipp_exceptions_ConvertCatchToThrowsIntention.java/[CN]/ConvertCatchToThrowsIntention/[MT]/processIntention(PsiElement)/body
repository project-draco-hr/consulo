{
  final PsiCatchSection catchSection=(PsiCatchSection)element.getParent();
  final PsiMethod method=PsiTreeUtil.getParentOfType(catchSection,PsiMethod.class);
  if (method == null) {
    return;
  }
  final PsiReferenceList throwsList=method.getThrowsList();
  final PsiType catchType=catchSection.getCatchType();
  addToThrowsList(throwsList,catchType);
  final PsiTryStatement tryStatement=catchSection.getTryStatement();
  final PsiCatchSection[] catchSections=tryStatement.getCatchSections();
  if (catchSections.length > 1 || tryStatement.getResourceList() != null) {
    catchSection.delete();
  }
 else {
    final PsiCodeBlock tryBlock=tryStatement.getTryBlock();
    if (tryBlock == null) {
      return;
    }
    final PsiElement first=tryBlock.getFirstBodyElement();
    final PsiElement last=tryBlock.getLastBodyElement();
    if (first != null && last != null) {
      tryStatement.getParent().addRangeAfter(first,last,tryStatement);
    }
    tryStatement.delete();
  }
}
