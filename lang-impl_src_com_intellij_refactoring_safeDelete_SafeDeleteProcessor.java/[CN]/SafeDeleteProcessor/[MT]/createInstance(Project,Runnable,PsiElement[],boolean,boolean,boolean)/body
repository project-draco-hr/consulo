{
  ArrayList<PsiElement> elements=new ArrayList<PsiElement>(Arrays.asList(elementsToDelete));
  HashSet<PsiElement> elementsToDeleteSet=new HashSet<PsiElement>(Arrays.asList(elementsToDelete));
  for (  PsiElement psiElement : elementsToDelete) {
    for (    SafeDeleteProcessorDelegate delegate : Extensions.getExtensions(SafeDeleteProcessorDelegate.EP_NAME)) {
      if (delegate.handlesElement(psiElement)) {
        Collection<PsiElement> addedElements=delegate.getAdditionalElementsToDelete(psiElement,elementsToDeleteSet,askForAccessors);
        if (addedElements != null) {
          elements.addAll(addedElements);
        }
        break;
      }
    }
  }
  return new SafeDeleteProcessor(project,prepareSuccessfulCallBack,elements.toArray(new PsiElement[elements.size()]),isSearchInComments,isSearchNonJava);
}
