{
  final SeverityRegistrar severityRegistrar=SeverityRegistrar.getInstance(project);
  HighlightInfo[] highlights=DaemonCodeAnalyzerImpl.getHighlights(editor.getDocument(),severityRegistrar.getSeverityByIndex(0),project);
  if (highlights.length == 0) {
    showMessageWhenNoHighlights(project,file,editor);
    return;
  }
  DaemonCodeAnalyzerSettings settings=DaemonCodeAnalyzerSettings.getInstance();
  if (settings.NEXT_ERROR_ACTION_GOES_TO_ERRORS_FIRST) {
    for (int idx=severityRegistrar.getSeveritiesCount() - 1; idx >= 0; idx--) {
      HighlightInfo[] errors=DaemonCodeAnalyzerImpl.getHighlights(editor.getDocument(),severityRegistrar.getSeverityByIndex(idx),project);
      if (errors.length != 0) {
        highlights=errors;
        break;
      }
    }
  }
  int offsetToGo=myGoForward ? Integer.MAX_VALUE : Integer.MIN_VALUE;
  HighlightInfo infoToGo=null;
  for (  HighlightInfo info : highlights) {
    int startOffset=getNavigationPositionFor(info);
    boolean isItBetter=myGoForward ? startOffset > caretOffset && startOffset < offsetToGo : startOffset < caretOffset && startOffset > offsetToGo;
    if (isItBetter) {
      offsetToGo=startOffset;
      infoToGo=info;
    }
  }
  if (infoToGo == null) {
    gotoNextError(project,editor,file,myGoForward ? -1 : editor.getDocument().getTextLength());
  }
 else {
    navigateToError(project,editor,infoToGo);
  }
}
