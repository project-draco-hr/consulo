{
  if (myExceptionalThreadWithReadAccessRunnable == null || !isExceptionalThreadWithReadAccess()) {
    return false;
  }
  ProgressIndicator progressIndicator=ProgressManager.getInstance().getProgressIndicator();
  if (!progressIndicator.isModal())   return false;
  if (!((ProgressIndicatorEx)progressIndicator).isModalityEntered())   return false;
  return ((ModalityStateEx)getCurrentModalityState()).contains(progressIndicator);
}
