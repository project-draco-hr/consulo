{
  final Component frame=UIUtil.findUltimateParent(window);
  if (frame instanceof IdeFrame) {
    final IdeFrame ideFrame=(IdeFrame)frame;
    if (myActive != active) {
      myActive=active;
      System.setProperty("idea.active",Boolean.valueOf(myActive).toString());
      for (      ApplicationListener each : myListeners) {
        if (active) {
          each.applicationActivated(ideFrame);
        }
 else {
          each.applicationDeactivated(ideFrame);
        }
      }
    }
  }
}
