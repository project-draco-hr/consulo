{
  myModel=model;
  final JTree tree=myModel.getTree();
  final MouseAdapter userSelectionListener=new MouseAdapter(){
    @Override public void mousePressed(    MouseEvent e){
      final TreePath treePath=tree.getPathForLocation(e.getX(),e.getY());
      if (treePath != null) {
        final Object component=treePath.getLastPathComponent();
        if (component instanceof DefaultMutableTreeNode) {
          final Object userObject=((DefaultMutableTreeNode)component).getUserObject();
          if (userObject instanceof NodeDescriptor) {
            myLastSelected=(TestProxy)((NodeDescriptor)userObject).getElement();
          }
        }
      }
    }
  }
;
  tree.addMouseListener(userSelectionListener);
  Disposer.register(myModel,new Disposable(){
    @Override public void dispose(){
      tree.removeMouseListener(userSelectionListener);
    }
  }
);
  choosePolicy();
}
