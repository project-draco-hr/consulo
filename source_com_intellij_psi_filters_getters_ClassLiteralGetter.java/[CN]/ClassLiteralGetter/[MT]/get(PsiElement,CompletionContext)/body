{
  for (  final Object element : myBaseGetter.get(context,completionContext)) {
    if (element instanceof PsiClassType) {
      PsiClassType.ClassResolveResult resolveResult=((PsiClassType)element).resolveGenerics();
      PsiClass psiClass=resolveResult.getElement();
      if (psiClass != null && CommonClassNames.JAVA_LANG_CLASS.equals(psiClass.getQualifiedName())) {
        final PsiTypeParameter[] typeParameters=psiClass.getTypeParameters();
        if (typeParameters.length == 1) {
          PsiType substitution=resolveResult.getSubstitutor().substitute(typeParameters[0]);
          boolean addInheritors=false;
          if (substitution instanceof PsiWildcardType) {
            final PsiWildcardType wildcardType=(PsiWildcardType)substitution;
            substitution=wildcardType.getBound();
            addInheritors=wildcardType.isExtends();
          }
          final List<LookupElement<PsiExpression>> result=new ArrayList<LookupElement<PsiExpression>>();
          createLookupElement(substitution,context,2,result);
          if (addInheritors && substitution != null && !CommonClassNames.JAVA_LANG_OBJECT.equals(substitution.getCanonicalText())) {
            for (            final PsiType type : CodeInsightUtil.addSubtypes(substitution,context,true)) {
              createLookupElement(type,context,1,result);
            }
          }
          return result.toArray(new Object[result.size()]);
        }
      }
    }
  }
  return ArrayUtil.EMPTY_OBJECT_ARRAY;
}
