{
  indicator.checkCanceled();
  List<InlineChunk> words1=getInlineChunks(text1);
  List<InlineChunk> words2=getInlineChunks(text2);
  FairDiffIterable wordChanges=diff(words1,words2,indicator);
  FairDiffIterable correctedWordChanges=preferBigChunks(words1,words2,wordChanges,indicator);
  FairDiffIterable delimitersIterable=matchAdjustmentDelimiters(text1,text2,words1,words2,correctedWordChanges,indicator);
  DiffIterable iterable=matchAdjustmentWhitespaces(text1,text2,delimitersIterable,policy,indicator);
  return convertIntoFragments(iterable);
}
