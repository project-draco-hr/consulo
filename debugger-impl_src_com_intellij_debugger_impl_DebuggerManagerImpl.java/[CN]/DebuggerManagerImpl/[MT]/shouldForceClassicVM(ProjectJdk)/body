{
  if (SystemInfo.isMac) {
    return false;
  }
  if (jdk == null)   return false;
  String version=PathUtil.getJdkMainAttribute(jdk,Attributes.Name.IMPLEMENTATION_VERSION);
  if (version != null) {
    if (version.compareTo("1.4") >= 0) {
      return false;
    }
    if (version.startsWith("1.2") && SystemInfo.isWindows) {
      return true;
    }
    version=version + ".0";
    if (version.startsWith("1.3.0") && SystemInfo.isWindows) {
      return true;
    }
    if ((version.startsWith("1.3.1_07") || version.startsWith("1.3.1_08")) && SystemInfo.isWindows) {
      return false;
    }
  }
  return DebuggerSettings.getInstance().FORCE_CLASSIC_VM;
}
