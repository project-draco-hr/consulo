{
  Module module=facet.getModule();
  ModifiableRootModel model=ModuleRootManager.getInstance(module).getModifiableModel();
  List<Library> addedLibraries=new ArrayList<Library>();
  for (  Library library : myAddedLibraries) {
    model.addLibraryEntry(library);
    addedLibraries.add(library);
  }
  if (!myAddedRoots.isEmpty()) {
    VirtualFile[] roots=myAddedRoots.toArray(new VirtualFile[myAddedRoots.size()]);
    Library library=createLibrary(roots,module.getProject());
    model.addLibraryEntry(library);
    addedLibraries.add(library);
  }
  if (model.isChanged()) {
    model.commit();
  }
 else {
    model.dispose();
  }
  for (  Library addedLibrary : addedLibraries) {
    myDescription.onLibraryAdded(facet,addedLibrary);
  }
}
