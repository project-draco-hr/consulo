{
  JComponent component=getDropTarget(e);
  Point location=null;
  int action=0;
  if (e instanceof DropTargetDropEvent) {
    location=((DropTargetDropEvent)e).getLocation();
    action=((DropTargetDropEvent)e).getDropAction();
  }
 else   if (e instanceof DropTargetDragEvent) {
    location=((DropTargetDragEvent)e).getLocation();
    action=((DropTargetDragEvent)e).getDropAction();
  }
  if (location != null) {
    location=convertPoint(location);
    Rectangle r=graphComponent.getViewport().getViewRect();
    location.translate(r.x,r.y);
  }
  int mod=(action == TransferHandler.COPY) ? InputEvent.CTRL_MASK : 0;
  return new MouseEvent(component,0,System.currentTimeMillis(),mod,location.x,location.y,1,false,MouseEvent.BUTTON1);
}
