{
  if (canImport) {
    mouseDragged(createEvent(e));
    mxGraphTransferHandler handler=getGraphTransferHandler(e);
    if (handler != null) {
      mxGraph graph=graphComponent.getGraph();
      double scale=graph.getView().getScale();
      Point pt=SwingUtilities.convertPoint(graphComponent,e.getLocation(),graphComponent.getGraphControl());
      pt=graphComponent.snapScaledPoint(new mxPoint(pt)).getPoint();
      handler.setLocation(new Point(pt));
      int dx=0;
      int dy=0;
      if (centerPreview && transferBounds != null) {
        dx-=Math.round(transferBounds.getWidth() * scale / 2);
        dy-=Math.round(transferBounds.getHeight() * scale / 2);
      }
      handler.setOffset(new Point((int)graph.snap(dx / scale),(int)graph.snap(dy / scale)));
      pt.translate(dx,dy);
      if (transferBounds != null && dragImage != null) {
        dx=(int)Math.round((dragImage.getIconWidth() - 2 - transferBounds.getWidth() * scale) / 2);
        dy=(int)Math.round((dragImage.getIconHeight() - 2 - transferBounds.getHeight() * scale) / 2);
        pt.translate(-dx,-dy);
      }
      if (!handler.isLocalDrag() && previewBounds != null) {
        setPreviewBounds(new Rectangle(pt,previewBounds.getSize()));
      }
    }
  }
 else {
    e.rejectDrag();
  }
}
