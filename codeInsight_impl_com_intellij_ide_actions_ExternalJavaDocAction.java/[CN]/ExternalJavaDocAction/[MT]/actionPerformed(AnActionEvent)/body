{
  DataContext dataContext=e.getDataContext();
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  if (project == null) {
    return;
  }
  PsiElement element=(PsiElement)dataContext.getData(DataConstants.PSI_ELEMENT);
  if (element == null) {
    Messages.showMessageDialog(project,IdeBundle.message("message.please.select.element.for.javadoc"),IdeBundle.message("title.no.element.selected"),Messages.getErrorIcon());
    return;
  }
  PsiFile context=(PsiFile)dataContext.getData(DataConstants.PSI_FILE);
  Editor editor=(Editor)dataContext.getData(DataConstants.EDITOR);
  PsiElement originalElement=(context != null && editor != null) ? context.findElementAt(editor.getCaretModel().getOffset()) : null;
  try {
    element.putUserData(JavaDocManager.ORIGINAL_ELEMENT_KEY,SmartPointerManager.getInstance(originalElement.getProject()).createSmartPsiElementPointer(originalElement));
  }
 catch (  RuntimeException ex) {
  }
  JavaDocManager.getInstance(project).openJavaDoc(element);
}
