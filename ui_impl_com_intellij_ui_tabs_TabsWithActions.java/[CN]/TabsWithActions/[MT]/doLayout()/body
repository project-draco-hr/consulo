{
  final TabsWithActions.Max max=computeMaxSize();
  myHeaderFitSize=new Dimension(getSize().width,Math.max(max.myLabel.height,max.myToolbar.height));
  Insets insets=getInsets();
  if (insets == null) {
    insets=new Insets(0,0,0,0);
  }
  int currentX=insets.left + getArcSize();
  final TabInfo selected=getSelectedInfo();
  mySelectedBounds=null;
  for (  TabInfo eachInfo : myInfos) {
    final JLabel label=myInfo2Label.get(eachInfo);
    final Dimension eachSize=label.getPreferredSize();
    label.setBounds(currentX,insets.top,eachSize.width,myHeaderFitSize.height);
    currentX+=eachSize.width;
    final JComponent comp=eachInfo.getComponent();
    if (selected == eachInfo) {
      comp.setBounds(insets.left,myHeaderFitSize.height + insets.top,getWidth() - insets.left - insets.right,getHeight() - insets.top - insets.bottom- myHeaderFitSize.height);
      mySelectedBounds=label.getBounds();
    }
 else {
      comp.setBounds(0,0,0,0);
    }
    final JComponent eachToolbar=myInfo2Toolbar.get(eachInfo);
    if (eachToolbar != null) {
      eachToolbar.setBounds(0,0,0,0);
    }
  }
  final JComponent selectedToolbar=myInfo2Toolbar.get(selected);
  if (selectedToolbar != null) {
    final int toolbarInset=getArcSize() * 2;
    if (currentX + selectedToolbar.getMinimumSize().width + toolbarInset < getWidth()) {
      selectedToolbar.setBounds(currentX + toolbarInset,insets.top,getSize().width - currentX - insets.left- toolbarInset,myHeaderFitSize.height - 1);
    }
 else {
      selectedToolbar.setBounds(0,0,0,0);
    }
  }
}
