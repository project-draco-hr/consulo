{
  final Thread thread=new Thread(new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runReadAction(new Runnable(){
        public void run(){
          StdErrorReporter.super.startProcessing();
        }
      }
);
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          if (!myErrorsDetected) {
            SwingUtilities.invokeLater(new Runnable(){
              public void run(){
                removeCompileContents(null);
                WindowManager.getInstance().getStatusBar(myProject).setInfo(XmlBundle.message("xml.validate.no.errors.detected.status.message"));
              }
            }
);
          }
        }
      }
);
    }
  }
,VALIDATE_XML_THREAD_NAME);
  myErrorsView.setProcessController(new NewErrorTreeViewPanel.ProcessController(){
    public void stopProcess(){
      if (thread != null) {
        thread.stop();
      }
    }
    public boolean isProcessStopped(){
      return thread == null || !thread.isAlive();
    }
  }
);
  openMessageView();
  thread.start();
  ToolWindowManager.getInstance(myProject).getToolWindow(ToolWindowId.MESSAGES_WINDOW).activate(null);
}
