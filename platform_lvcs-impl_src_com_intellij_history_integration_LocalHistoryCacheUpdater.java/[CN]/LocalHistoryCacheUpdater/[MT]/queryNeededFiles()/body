{
  myVfsRoots=selectParentlessRootsAndSort(myGateway.getContentRoots());
  myProcessor=new CacheUpdaterProcessor(myVcs);
  myVcs.beginChangeSet();
  deleteObsoleteRoots();
  createAndUpdateRoots();
  return myProcessor.queryNeededFiles();
}
