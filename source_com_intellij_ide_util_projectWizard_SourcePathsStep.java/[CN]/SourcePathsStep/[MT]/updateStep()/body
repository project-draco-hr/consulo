{
  final String contentEntryPath=myBuilder.getContentEntryPath();
  if (isContentEntryChanged()) {
    final MyProgressIndicator progress=new MyProgressIndicator();
    progress.setText(IdeBundle.message("progress.searching.for.sources",myBuilder.getContentEntryPath().replace('/',File.separatorChar)));
    ((CardLayout)myContentPanel.getLayout()).show(myContentPanel,PROGRESS_PANEL);
    myContentPanel.revalidate();
    myProgressIndicator=progress;
    new SwingWorker(){
      public Object construct(){
        final Ref<List<Pair<String,String>>> foundPaths=Ref.create(null);
        ProgressManager.getInstance().runProcess(new Runnable(){
          public void run(){
            foundPaths.set(calcSourcePaths(contentEntryPath));
          }
        }
,progress);
        return foundPaths.get();
      }
      public void finished(){
        myProgressIndicator=null;
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            final List<Pair<String,String>> foundPaths=(List<Pair<String,String>>)get();
            if (foundPaths.size() > 0) {
              myCurrentMode=CHOOSE_SOURCE_PANEL;
              mySourcePathsChooser.setElements(foundPaths,true);
            }
 else {
              myCurrentMode=CREATE_SOURCE_PANEL;
              updateFullPathField();
            }
            updateStepUI(progress.isCanceled() ? null : myBuilder.getContentEntryPath());
            if (CHOOSE_SOURCE_PANEL.equals(myCurrentMode)) {
              mySourcePathsChooser.selectElements(foundPaths.subList(0,1));
            }
 else             if (CREATE_SOURCE_PANEL.equals(myCurrentMode)) {
              myTfSourceDirectoryName.selectAll();
            }
          }
        }
);
      }
    }
.start();
  }
 else {
    updateStepUI(contentEntryPath);
  }
}
