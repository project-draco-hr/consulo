{
  final VirtualFile fileOrDir=file.getVirtualFile();
  if (fileOrDir == null)   return;
  if (!fileOrDir.isInLocalFileSystem())   return;
  final Module module=ModuleUtil.findModuleForFile(fileOrDir,myPsiManager.getProject());
  if (file instanceof PsiJavaFile) {
    final PsiJavaFile javaFile=(PsiJavaFile)file;
    if (containsPackagePrefix(module,javaFile.getPackageName())) {
      mySourceFiles.add(PathUtil.getLocalPath(javaFile.getVirtualFile()));
    }
 else {
      myPackages.add(javaFile.getPackageName());
    }
  }
}
