{
  if (method == null)   return;
  String name=method.getName();
  if (!JavaPsiFacade.getInstance(method.getProject()).getNameHelper().isIdentifier(name))   return;
  boolean isAbstract=isAbstractInJava(method);
  PsiModifierList modifierList=method.getModifierList();
  if (prefix) {
    text.append("\n");
    text.append("  ");
  }
  writeMethodModifiers(text,modifierList,JAVA_MODIFIERS);
  if (method.hasTypeParameters()) {
    appendTypeParameters(text,method);
    text.append(" ");
  }
  PsiType retType=method.getReturnType();
  if (retType == null)   retType=TypesUtil.getJavaLangObject(method);
  if (!method.hasModifierProperty(PsiModifier.STATIC)) {
    final List<MethodSignatureBackedByPsiMethod> superSignatures=method.findSuperMethodSignaturesIncludingStatic(true);
    for (    MethodSignatureBackedByPsiMethod superSignature : superSignatures) {
      final PsiType superType=superSignature.getSubstitutor().substitute(superSignature.getMethod().getReturnType());
      if (superType != null && !superType.isAssignableFrom(retType) && !(PsiUtil.resolveClassInType(superType) instanceof PsiTypeParameter)) {
        retType=superType;
      }
    }
  }
  text.append(getTypeText(retType,method,false));
  text.append(" ");
  text.append(name);
  writeParameterList(text,parameters);
  final PsiReferenceList throwsList=method.getThrowsList();
  final PsiClassType[] exceptions=throwsList.getReferencedTypes();
  if (exceptions.length > 0) {
    text.append("throws ");
    for (int i=0; i < exceptions.length; i++) {
      PsiClassType exception=exceptions[i];
      if (i != 0) {
        text.append(",");
      }
      text.append(getTypeText(exception,method,false));
      text.append(" ");
    }
  }
  if (!isAbstract) {
    text.append("{\n");
    text.append("    return ");
    text.append(getDefaultValueText(getTypeText(retType,method,false)));
    text.append(";");
    text.append("\n  }");
  }
 else {
    text.append(";");
  }
  text.append("\n");
}
