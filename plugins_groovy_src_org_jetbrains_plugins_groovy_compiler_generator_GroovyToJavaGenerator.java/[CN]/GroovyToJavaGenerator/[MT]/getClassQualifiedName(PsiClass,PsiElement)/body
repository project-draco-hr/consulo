{
  if (context != null) {
    psiClass=findAccessibleSuperClass(context,psiClass);
  }
  if (psiClass == null) {
    return null;
  }
  if (psiClass instanceof GrTypeDefinition) {
    if (!myAllToCompile.contains(psiClass.getContainingFile().getVirtualFile())) {
      final PsiClass container=psiClass.getContainingClass();
      if (container != null) {
        return getClassQualifiedName(container,null) + "$" + psiClass.getName();
      }
    }
  }
  return psiClass.getQualifiedName();
}
