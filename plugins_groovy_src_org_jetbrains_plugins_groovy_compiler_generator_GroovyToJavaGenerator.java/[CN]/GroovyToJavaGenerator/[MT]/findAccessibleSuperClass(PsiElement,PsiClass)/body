{
  if (initialClass == null) {
    return null;
  }
  PsiClass curClass=initialClass;
  final PsiResolveHelper resolveHelper=JavaPsiFacade.getInstance(context.getProject()).getResolveHelper();
  while (curClass != null && !resolveHelper.isAccessible(curClass,context,null)) {
    curClass=curClass.getSuperClass();
  }
  if (curClass != null && !initialClass.isEquivalentTo(curClass)) {
    final String qname=curClass.getQualifiedName();
    if (qname != null) {
      return qname;
    }
  }
  return null;
}
