{
  if (method == null)   return;
  String name=method.getName();
  if (!JavaPsiFacade.getInstance(method.getProject()).getNameHelper().isIdentifier(name))   return;
  boolean isAbstract=method.hasModifierProperty(PsiModifier.ABSTRACT);
  PsiModifierList modifierList=method.getModifierList();
  text.append("\n");
  text.append("  ");
  writeMethodModifiers(text,modifierList,JAVA_MODIFIERS);
  if (method.hasTypeParameters()) {
    appendTypeParameters(text,method);
    text.append(" ");
  }
  PsiType retType;
  if (method instanceof GrMethod) {
    retType=((GrMethod)method).getDeclaredReturnType();
    if (retType == null)     retType=TypesUtil.getJavaLangObject(method);
  }
 else   retType=method.getReturnType();
  text.append(getTypeText(retType,false));
  text.append(" ");
  text.append(name);
  text.append("(");
  int i=0;
  while (i < parameters.length) {
    PsiParameter parameter=parameters[i];
    if (parameter == null)     continue;
    if (i > 0)     text.append(", ");
    text.append(getTypeText(parameter.getType(),i == parameters.length - 1));
    text.append(" ");
    text.append(parameter.getName());
    i++;
  }
  text.append(")");
  text.append(" ");
  if (!isAbstract) {
    text.append("{\n");
    text.append("    return ");
    text.append(getDefaultValueText(getTypeText(retType,false)));
    text.append(";");
    text.append("\n  }");
  }
 else {
    text.append(";");
  }
  text.append("\n");
}
