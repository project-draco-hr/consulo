{
  final Property property=literal.getUserData(CACHE);
  if (property == NULL)   return null;
  if (property != null && isValid(property,literal))   return property;
  if (isI18nProperty(project,literal)) {
    final PsiReference[] references=literal.getReferences();
    for (    PsiReference reference : references) {
      if (reference instanceof PsiPolyVariantReference) {
        final ResolveResult[] results=((PsiPolyVariantReference)reference).multiResolve(false);
        for (        ResolveResult result : results) {
          final PsiElement element=result.getElement();
          if (element instanceof Property) {
            Property p=(Property)element;
            literal.putUserData(CACHE,p);
            return p;
          }
        }
      }
 else {
        final PsiElement element=reference.resolve();
        if (element instanceof Property) {
          Property p=(Property)element;
          literal.putUserData(CACHE,p);
          return p;
        }
      }
    }
  }
  return null;
}
