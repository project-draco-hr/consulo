{
  if (!(element instanceof PsiJavaFile) || quick) {
    return FoldingDescriptor.EMPTY;
  }
  final PsiJavaFile file=(PsiJavaFile)element;
  final List<FoldingDescriptor> result=new ArrayList<FoldingDescriptor>();
  boolean hasJsp=ContainerUtil.intersects(Arrays.asList(StdLanguages.JSP,StdLanguages.JSPX),file.getViewProvider().getLanguages());
  file.accept(hasJsp ? new JavaRecursiveElementVisitor(){
    @Override public void visitLiteralExpression(    PsiLiteralExpression expression){
      checkLiteral(expression,result);
    }
  }
 : new JavaRecursiveElementWalkingVisitor(){
    @Override public void visitLiteralExpression(    PsiLiteralExpression expression){
      checkLiteral(expression,result);
    }
  }
);
  return result.toArray(new FoldingDescriptor[result.size()]);
}
