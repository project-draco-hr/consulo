{
  myRootPane=new JPanel(new BorderLayout());
  myTree=new CheckboxTree(new ExtensionTreeCellRenderer(),new ExtensionCheckedTreeNode(null,myState),new CheckboxTreeBase.CheckPolicy(true,true,false,true));
  myTree.setRootVisible(false);
  myTree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  myTree.addTreeSelectionListener(new TreeSelectionListener(){
    @Override public void valueChanged(    final TreeSelectionEvent e){
      final List<MutableModuleExtension> selected=TreeUtil.collectSelectedObjectsOfType(myTree,MutableModuleExtension.class);
      if (selected.isEmpty()) {
        return;
      }
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          myRootPane.removeAll();
          myRootPane.add(createPanel(selected.get(0)));
        }
      }
);
    }
  }
);
  myRootPane.add(createPanel(null),BorderLayout.CENTER);
  return myRootPane;
}
