{
  myConfigurablePanelExtension=extension;
  final Runnable updateOnCheck=new Runnable(){
    @Override @RequiredDispatchThread public void run(){
      extensionChanged(extension);
    }
  }
;
  JComponent configurablePanel=null;
  if (extension instanceof MutableModuleExtension2) {
    final consulo.ui.Component component=((MutableModuleExtension2)extension).createConfigurablePanel2(DesktopUIAccessImpl.ourInstance,updateOnCheck);
    configurablePanel=(JComponent)component;
  }
 else {
    configurablePanel=extension.createConfigurablePanel(updateOnCheck);
  }
  if (configurablePanel instanceof Disposable) {
    registerDisposable((Disposable)configurablePanel);
  }
  return configurablePanel;
}
