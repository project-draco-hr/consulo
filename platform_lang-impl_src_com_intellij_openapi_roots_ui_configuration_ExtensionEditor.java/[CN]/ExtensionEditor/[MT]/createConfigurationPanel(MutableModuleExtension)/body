{
  myConfigurablePanelExtension=extension;
  final Runnable updateOnCheck=new Runnable(){
    @Override @RequiredDispatchThread public void run(){
      extensionChanged(extension);
    }
  }
;
  JComponent configurablePanel=null;
  final consulo.ui.Component component=extension.createConfigurationComponent(updateOnCheck);
  if (component != null) {
    configurablePanel=(JComponent)component;
  }
 else {
    configurablePanel=extension.createConfigurablePanel(updateOnCheck);
  }
  if (configurablePanel instanceof Disposable) {
    registerDisposable((Disposable)configurablePanel);
  }
  return configurablePanel;
}
