{
  myProject=project;
  myMap=(ApplicationManager.getApplication().isUnitTestMode()) ? new HashMap<String,Bunch>() : new SoftHashMap<String,Bunch>();
  myConnection=project.getMessageBus().connect();
  myConnection.subscribe(CommittedChangesCache.COMMITTED_TOPIC,new CommittedChangesListener(){
    public void changesLoaded(    final RepositoryLocation location,    final List<CommittedChangeList> changes){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          myMap.clear();
          setRefreshTime(System.currentTimeMillis());
        }
      }
);
    }
    @Override public void changesCleared(){
    }
    public void incomingChangesUpdated(    @Nullable final List<CommittedChangeList> receivedChanges){
    }
    public void refreshErrorStatusChanged(    @Nullable final VcsException lastError){
    }
  }
);
  Disposer.register(myProject,this);
  setRefreshTime(0);
}
