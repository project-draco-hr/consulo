{
  Object value=null;
  if (myNodePopup != null) {
    value=myNodePopup.getSelectedValue();
  }
  if (value == null)   value=myModel.getSelectedValue();
  if (value == null) {
    final int modelSize=myModel.size();
    if (modelSize > 0) {
      value=myModel.getElement(modelSize - 1);
    }
  }
  return value != null && klass.isAssignableFrom(value.getClass()) ? (T)value : null;
}
