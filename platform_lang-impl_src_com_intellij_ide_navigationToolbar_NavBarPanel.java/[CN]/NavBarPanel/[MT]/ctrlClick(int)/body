{
  if (isNodePopupShowing()) {
    cancelPopup();
    if (myModel.getSelectedIndex() == index) {
      return;
    }
  }
  final Object object=myModel.getElement(index);
  final List<Object> objects=myModel.getChildren(object);
  if (!objects.isEmpty()) {
    final Object[] siblings=new Object[objects.size()];
    final Icon[] icons=new Icon[objects.size()];
    for (int i=0; i < objects.size(); i++) {
      siblings[i]=objects.get(i);
      icons[i]=NavBarPresentation.getIcon(siblings[i],false);
    }
    final NavBarItem item=getItem(index);
    myNodePopup=new NavBarPopup(this,siblings,index < myModel.size() - 1 ? objects.indexOf(myModel.getElement(index + 1)) : 0);
    if (item != null && item.isShowing()) {
      myNodePopup.show(item);
    }
  }
}
