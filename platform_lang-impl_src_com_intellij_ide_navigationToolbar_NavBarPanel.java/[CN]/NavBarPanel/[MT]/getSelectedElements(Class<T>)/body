{
  Object[] values=null;
  if (myNodePopup != null) {
    values=myNodePopup.getSelectedValues();
  }
  if (values == null) {
    final T selectedElement=getSelectedElement(klass);
    return selectedElement == null ? null : Arrays.asList(selectedElement);
  }
 else {
    List<T> result=new ArrayList<T>();
    for (    Object value : values) {
      if (value != null && klass.isAssignableFrom(value.getClass())) {
        result.add((T)value);
      }
    }
    return result;
  }
}
