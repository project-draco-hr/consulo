{
  if (context != null) {
    myUpdateQueue.queueModelUpdate(context);
  }
  myUpdateQueue.queueRebuildUi();
  myUpdateQueue.queueSelect(new Runnable(){
    @Override public void run(){
      if (!myList.isEmpty()) {
        myModel.setSelectedIndex(Math.max(myList.size() - 2,0));
        IdeFocusManager.getInstance(myProject).requestFocus(NavBarPanel.this,true);
        restorePopup();
      }
    }
  }
);
  myUpdateQueue.flush();
}
