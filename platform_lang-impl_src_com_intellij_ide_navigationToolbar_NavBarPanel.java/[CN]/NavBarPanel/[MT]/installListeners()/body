{
  final MyPsiTreeChangeAdapter psiListener=new MyPsiTreeChangeAdapter();
  final MyProblemListener problemListener=new MyProblemListener();
  final MyFileStatusListener fileStatusListener=new MyFileStatusListener();
  PsiManager.getInstance(myProject).addPsiTreeChangeListener(psiListener);
  WolfTheProblemSolver.getInstance(myProject).addProblemListener(problemListener);
  FileStatusManager.getInstance(myProject).addFileStatusListener(fileStatusListener);
  KeyboardFocusManager.getCurrentKeyboardFocusManager().addPropertyChangeListener(myFocusListener);
  final MessageBusConnection busConnection=myProject.getMessageBus().connect();
  busConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new MyModuleRootListener());
  busConnection.subscribe(NavBarModelListener.NAV_BAR,new NavBarModelListener(){
    public void modelChanged(){
      queueRebuildUi();
    }
    public void selectionChanged(){
      updateItems();
      scrollSelectionToVisible();
    }
  }
);
  if (myDetacher != null)   uninstallListeners();
  myDetacher=new Runnable(){
    public void run(){
      busConnection.disconnect();
      WolfTheProblemSolver.getInstance(myProject).removeProblemListener(problemListener);
      PsiManager.getInstance(myProject).removePsiTreeChangeListener(psiListener);
      FileStatusManager.getInstance(myProject).removeFileStatusListener(fileStatusListener);
    }
  }
;
}
