{
  if (!isRebuildUiNeeded())   return;
  myList.clear();
  for (int index=0; index < myModel.size(); index++) {
    final Object object=myModel.get(index);
    Icon closedIcon=NavBarPresentation.getIcon(object,false);
    Icon openIcon=NavBarPresentation.getIcon(object,true);
    if (closedIcon == null && openIcon != null)     closedIcon=openIcon;
    if (openIcon == null && closedIcon != null)     openIcon=closedIcon;
    if (openIcon == null) {
      openIcon=closedIcon=EmptyIcon.create(5);
    }
    final MyItemLabel label=new MyItemLabel(object,index,wrapIcon(openIcon,closedIcon,index),NavBarPresentation.getPresentableText(object,getWindow()),myPresentation.getTextAttributes(object,false));
    installActions(index,label);
    myList.add(label);
  }
  rebuildComponent();
  if (myRunWhenListRebuilt != null) {
    Runnable r=myRunWhenListRebuilt;
    myRunWhenListRebuilt=null;
    r.run();
  }
}
