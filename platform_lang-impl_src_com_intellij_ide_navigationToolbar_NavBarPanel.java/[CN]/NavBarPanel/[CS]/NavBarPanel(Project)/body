{
  super(new FlowLayout(FlowLayout.LEFT,isDecorated() ? 0 : 5,0));
  myProject=project;
  myModel=new NavBarModel(myProject);
  myIdeView=new NavBarIdeView(this);
  myPresentation=new NavBarPresentation(myProject);
  myUpdateQueue=new NavBarUpdateQueue(this);
  PopupHandler.installPopupHandler(this,IdeActions.GROUP_NAVBAR_POPUP,ActionPlaces.NAVIGATION_BAR);
  if (!isDecorated()) {
    setBorder(new EmptyBorder(1,0,1,4));
  }
  setOpaque(false);
  myCopyPasteDelegator=new CopyPasteDelegator(myProject,NavBarPanel.this){
    @NotNull protected PsiElement[] getSelectedElements(){
      final PsiElement element=getSelectedElement(PsiElement.class);
      return element == null ? PsiElement.EMPTY_ARRAY : new PsiElement[]{element};
    }
  }
;
  myUpdateQueue.queueModelUpdateFromFocus();
  myUpdateQueue.queueRebuildUi();
  Disposer.register(project,this);
}
