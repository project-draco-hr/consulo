{
  super(new FlowLayout(FlowLayout.LEFT,5,0),UIUtil.isUnderGTKLookAndFeel() ? Color.WHITE : UIUtil.getListBackground());
  myProject=project;
  myModel=new NavBarModel(myProject);
  myIdeView=new NavBarIdeView(this);
  myPresentation=new NavBarPresentation(myProject);
  IdeEventQueue.getInstance().addActivityListener(myUserActivityRunnable);
  myUpdateQueue=new MergingUpdateQueue("NavBar",Registry.intValue("navbar.updateMergeTime"),true,MergingUpdateQueue.ANY_COMPONENT,project,null);
  PopupHandler.installPopupHandler(this,IdeActions.GROUP_PROJECT_VIEW_POPUP,ActionPlaces.NAVIGATION_BAR);
  setBorder(new NavBarBorder(false,-1));
  myCopyPasteDelegator=new CopyPasteDelegator(myProject,NavBarPanel.this){
    @NotNull protected PsiElement[] getSelectedElements(){
      final PsiElement element=getSelectedElement(PsiElement.class);
      return element == null ? PsiElement.EMPTY_ARRAY : new PsiElement[]{element};
    }
  }
;
  queueModelUpdateFromFocus();
  queueRebuildUi();
}
