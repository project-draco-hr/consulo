{
  List<VirtualFile> result=new ArrayList<VirtualFile>();
  for (  LightFilePointer pointer : myRoots.get(rootType)) {
    final VirtualFile file=pointer.getFile();
    if (file == null) {
      continue;
    }
    if (file.isDirectory()) {
      final String url=file.getUrl();
      if (myJarDirectories.contains(rootType,url)) {
        LibraryImpl.collectJarFiles(file,result,myJarDirectories.isRecursive(rootType,url));
        continue;
      }
    }
    result.add(file);
  }
  return VfsUtil.toVirtualFileArray(result);
}
