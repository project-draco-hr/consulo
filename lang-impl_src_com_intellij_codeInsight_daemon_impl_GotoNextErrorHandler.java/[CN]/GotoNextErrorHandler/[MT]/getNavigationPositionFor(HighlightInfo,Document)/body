{
  int shift=info.isAfterEndOfLine ? 1 : info.navigationShift;
  int offset=info.highlighter.getStartOffset() + shift;
  return Math.min(offset,document.getTextLength());
}
