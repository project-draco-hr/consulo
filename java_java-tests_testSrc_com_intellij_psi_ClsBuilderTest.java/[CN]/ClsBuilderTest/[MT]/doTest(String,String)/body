{
  VirtualFile vFile=findFile(classname);
  final PsiFileStub stub=ClsStubBuilder.build(vFile,vFile.contentsToByteArray());
  final String butWas=((StubBase)stub).printTree();
  final String goldFilePath=JavaTestUtil.getJavaTestDataPath() + "/psi/cls/stubBuilder/" + goldFile;
  String expected="";
  try {
    expected=FileUtil.loadTextAndClose(new FileReader(goldFilePath));
    expected=StringUtil.convertLineSeparators(expected);
  }
 catch (  FileNotFoundException e) {
    System.out.println("No expected data found at:" + goldFilePath);
    System.out.println("Creating one.");
    final FileWriter fileWriter=new FileWriter(goldFilePath);
    fileWriter.write(butWas);
    fileWriter.close();
    fail("No test data found. Created one");
  }
  assertEquals(expected,butWas);
}
