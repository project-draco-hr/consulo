{
  if (!method.isWritable()) {
    if (!CommonRefactoringUtil.checkReadOnlyStatus(project,method))     return;
  }
  final String actionString=RefactoringBundle.message("to.refactor");
  PsiMethod newMethod=SuperMethodWarningUtil.checkSuperMethod(method,actionString);
  if (newMethod == null)   return;
  newMethod=(PsiMethod)EjbUtil.checkDeclMethod(newMethod,actionString);
  if (newMethod == null)   return;
  if (!newMethod.equals(method)) {
    invoke(newMethod,project);
    return;
  }
  if (!method.isWritable()) {
    if (!CommonRefactoringUtil.checkReadOnlyStatus(project,method))     return;
  }
  final PsiClass containingClass=method.getContainingClass();
  final ChangeSignatureDialog dialog=new ChangeSignatureDialog(project,method,containingClass != null && !containingClass.isInterface());
  dialog.show();
}
