{
  if (revision == null || revision.length() == 0)   return null;
  if (revision.length() > 40) {
    String datestr=revision.substring(0,revision.indexOf("["));
    String rev=revision.substring(revision.indexOf("[") + 1,40);
    Date d=new Date(Date.parse(datestr));
    return new GitRevisionNumber(rev,d);
  }
  if (path != null) {
    VirtualFile root=GitUtil.getGitRoot(myProject,path);
    try {
      return GitRevisionNumber.resolve(myProject,root,revision);
    }
 catch (    VcsException e) {
      log.error("Unexpected problem with resolving the git revision number: ",e);
    }
  }
  return new GitRevisionNumber(revision);
}
