{
  PsiElement navTarget=new WriteCommandAction<PsiElement>(element.getFile().getProject(),element.getFile()){
    @Override protected void run(    Result<PsiElement> result) throws Throwable {
      Extensions extensions=RegisterInspectionFix.getExtension(element.getRootElement(),candidate.epName);
      Extension extension=extensions.addExtension(candidate.epName);
      XmlTag tag=extension.getXmlTag();
      PsiElement navTarget=null;
      if (KeyedFactoryEPBean.class.getName().equals(candidate.beanClassName) || KeyedLazyInstanceEP.class.getName().equals(candidate.beanClassName)) {
        XmlAttribute attr=tag.setAttribute("key","");
        navTarget=attr.getValueElement();
      }
 else       if (LanguageExtensionPoint.class.getName().equals(candidate.beanClassName)) {
        XmlAttribute attr=tag.setAttribute("language","");
        navTarget=attr.getValueElement();
      }
      tag.setAttribute(candidate.attributeName,myExtensionClass.getQualifiedName());
      result.setResult(navTarget != null ? navTarget : extension.getXmlTag());
    }
  }
.execute().throwException().getResultObject();
  PsiNavigateUtil.navigate(navTarget);
}
