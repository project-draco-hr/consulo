{
  myUsageInfo=usageInfo;
  myMergedUsageInfos=usageInfo;
  Pair<Integer,Integer> data=ApplicationManager.getApplication().runReadAction(new Computable<Pair<Integer,Integer>>(){
    @Override public Pair<Integer,Integer> compute(){
      PsiElement element=getElement();
      PsiFile psiFile=usageInfo.getFile();
      Document document=psiFile == null ? null : PsiDocumentManager.getInstance(getProject()).getDocument(psiFile);
      int offset;
      int lineNumber;
      if (document == null) {
        offset=element.getTextOffset();
        lineNumber=-1;
      }
 else {
        int startOffset=myUsageInfo.getNavigationOffset();
        if (startOffset == -1) {
          offset=element == null ? 0 : element.getTextOffset();
          lineNumber=-1;
        }
 else {
          offset=-1;
          lineNumber=getLineNumber(document,startOffset);
        }
      }
      return Pair.create(offset,lineNumber);
    }
  }
);
  myOffset=data.first;
  myLineNumber=data.second;
  myModificationStamp=getCurrentModificationStamp();
}
