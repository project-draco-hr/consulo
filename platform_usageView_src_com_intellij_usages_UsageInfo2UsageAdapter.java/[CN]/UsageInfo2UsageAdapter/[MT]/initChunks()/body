{
  PsiFile psiFile=getPsiFile();
  Document document=psiFile == null ? null : PsiDocumentManager.getInstance(getProject()).getDocument(psiFile);
  TextChunk[] chunks;
  if (document == null) {
    PsiElement element=getElement();
    chunks=new TextChunk[]{new TextChunk(new TextAttributes(),element.getText())};
  }
 else {
    chunks=ChunkExtractor.extractChunks(psiFile,this);
  }
  myTextChunks=new SoftReference<TextChunk[]>(chunks);
  return chunks;
}
