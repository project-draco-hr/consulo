{
  extend(CompletionType.SMART,and(JavaSmartCompletionContributor.INSIDE_EXPRESSION,not(psiElement().afterLeaf("."))),new ExpectedTypeBasedCompletionProvider(){
    protected void addCompletions(    final CompletionParameters parameters,    final CompletionResultSet result,    final Collection<ExpectedTypeInfo> infos){
      final boolean empty=result.runRemainingContributors(parameters,true).isEmpty();
      @NonNls final String prefix=result.getPrefixMatcher().getPrefix();
      if (empty && StringUtil.startsWithChar(prefix,'n')) {
        for (        final ExpectedTypeInfo info : infos) {
          if (!(info.getType() instanceof PsiPrimitiveType)) {
            final LookupItem item=(LookupItem)BasicExpressionCompletionContributor.createKeywordLookupItem(parameters.getPosition(),PsiKeyword.NULL);
            item.setAttribute(LookupItem.TYPE,PsiType.NULL);
            result.addElement(JavaSmartCompletionContributor.decorate(item,infos));
            return;
          }
        }
      }
    }
  }
);
}
