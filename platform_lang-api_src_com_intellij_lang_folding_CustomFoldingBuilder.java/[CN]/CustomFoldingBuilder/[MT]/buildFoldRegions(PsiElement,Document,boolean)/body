{
  List<FoldingDescriptor> descriptors=new ArrayList<FoldingDescriptor>();
  if (CustomFoldingProvider.getAllProviders().length > 0) {
    myDefaultProvider=null;
    addCustomFoldingRegionsRecursively(root.getNode(),descriptors);
  }
  buildLanguageFoldRegions(descriptors,root,document,quick);
  return descriptors.toArray(new FoldingDescriptor[descriptors.size()]);
}
