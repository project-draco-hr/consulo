{
  if (myAnnotationWrap != null) {
    try {
      return myAnnotationWrap;
    }
  finally {
      myAnnotationWrap=null;
    }
  }
  final ASTNode parent=child.getTreeParent();
  int role=((CompositeElement)parent).getChildRole(child);
  if (myNode.getElementType() == ElementType.BINARY_EXPRESSION) {
    if (role == ChildRole.OPERATION_SIGN && !mySettings.BINARY_OPERATION_SIGN_ON_NEXT_LINE)     return null;
    if (role == ChildRole.ROPERAND && mySettings.BINARY_OPERATION_SIGN_ON_NEXT_LINE)     return null;
    return defaultWrap;
  }
 else   if (child.getElementType() == ElementType.EXTENDS_LIST || child.getElementType() == ElementType.IMPLEMENTS_LIST) {
    return Formatter.getInstance().createWrap(getWrapType(mySettings.EXTENDS_KEYWORD_WRAP),true);
  }
 else   if (child.getElementType() == ElementType.THROWS_LIST) {
    return Formatter.getInstance().createWrap(getWrapType(mySettings.THROWS_KEYWORD_WRAP),true);
  }
 else   if (myNode.getElementType() == ElementType.EXTENDS_LIST || myNode.getElementType() == ElementType.IMPLEMENTS_LIST) {
    if (role == ChildRole.REFERENCE_IN_LIST) {
      return defaultWrap;
    }
 else {
      return null;
    }
  }
 else   if (myNode.getElementType() == ElementType.CONDITIONAL_EXPRESSION) {
    if (role == ChildRole.COLON && !mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)     return null;
    if (role == ChildRole.QUEST && !mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)     return null;
    if (role == ChildRole.THEN_EXPRESSION && mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)     return null;
    if (role == ChildRole.ELSE_EXPRESSION && mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)     return null;
    return defaultWrap;
  }
 else   if (myNode.getElementType() == ElementType.REFERENCE_EXPRESSION) {
    if (role == ChildRole.DOT) {
      return getReservedWrap();
    }
 else {
      return defaultWrap;
    }
  }
 else   if (myNode.getElementType() == ElementType.FOR_STATEMENT) {
    if (role == ChildRole.FOR_INITIALIZATION || role == ChildRole.CONDITION || role == ChildRole.FOR_UPDATE) {
      return defaultWrap;
    }
 else {
      return null;
    }
  }
 else   if (myNode.getElementType() == ElementType.METHOD) {
    if (role == ChildRole.THROWS_LIST) {
      return defaultWrap;
    }
 else {
      return null;
    }
  }
 else   if (myNode.getElementType() == ElementType.MODIFIER_LIST) {
    if (child.getElementType() == ElementType.ANNOTATION) {
      return getReservedWrap();
    }
    ASTNode prevElement=getPrevElement(child);
    if (prevElement != null && prevElement.getElementType() == ElementType.ANNOTATION) {
      return getReservedWrap();
    }
 else {
      return null;
    }
  }
 else   if (myNode.getElementType() == ElementType.ASSERT_STATEMENT) {
    if (role == ChildRole.CONDITION) {
      return defaultWrap;
    }
    if (role == ChildRole.ASSERT_DESCRIPTION && !mySettings.ASSERT_STATEMENT_COLON_ON_NEXT_LINE) {
      return defaultWrap;
    }
    if (role == ChildRole.COLON && mySettings.ASSERT_STATEMENT_COLON_ON_NEXT_LINE) {
      return defaultWrap;
    }
    return null;
  }
 else {
    return defaultWrap;
  }
}
