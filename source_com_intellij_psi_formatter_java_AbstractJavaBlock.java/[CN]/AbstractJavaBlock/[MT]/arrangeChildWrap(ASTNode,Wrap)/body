{
  if (myAnnotationWrap != null) {
    try {
      return myAnnotationWrap;
    }
  finally {
      myAnnotationWrap=null;
    }
  }
  final ASTNode parent=child.getTreeParent();
  int role=((CompositeElement)parent).getChildRole(child);
  final IElementType nodeType=myNode.getElementType();
  if (nodeType == ElementType.BINARY_EXPRESSION) {
    if (role == ChildRole.OPERATION_SIGN && !mySettings.BINARY_OPERATION_SIGN_ON_NEXT_LINE)     return null;
    if (role == ChildRole.ROPERAND && mySettings.BINARY_OPERATION_SIGN_ON_NEXT_LINE)     return null;
    return defaultWrap;
  }
 else {
    final IElementType childType=child.getElementType();
    if (childType == ElementType.EXTENDS_LIST || childType == ElementType.IMPLEMENTS_LIST) {
      return Wrap.createWrap(getWrapType(mySettings.EXTENDS_KEYWORD_WRAP),true);
    }
 else     if (childType == ElementType.THROWS_LIST) {
      return Wrap.createWrap(getWrapType(mySettings.THROWS_KEYWORD_WRAP),true);
    }
 else     if (nodeType == ElementType.EXTENDS_LIST || nodeType == ElementType.IMPLEMENTS_LIST) {
      if (role == ChildRole.REFERENCE_IN_LIST) {
        return defaultWrap;
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.THROWS_LIST) {
      if (role == ChildRole.REFERENCE_IN_LIST) {
        return defaultWrap;
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.CONDITIONAL_EXPRESSION) {
      if (role == ChildRole.COLON && !mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)       return null;
      if (role == ChildRole.QUEST && !mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)       return null;
      if (role == ChildRole.THEN_EXPRESSION && mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)       return null;
      if (role == ChildRole.ELSE_EXPRESSION && mySettings.TERNARY_OPERATION_SIGNS_ON_NEXT_LINE)       return null;
      return defaultWrap;
    }
 else     if (isAssignment()) {
      if (role == ChildRole.INITIALIZER_EQ && mySettings.PLACE_ASSIGNMENT_SIGN_ON_NEXT_LINE)       return defaultWrap;
      if (role == ChildRole.OPERATION_SIGN && mySettings.PLACE_ASSIGNMENT_SIGN_ON_NEXT_LINE)       return defaultWrap;
      if (role == ChildRole.INITIALIZER && !mySettings.PLACE_ASSIGNMENT_SIGN_ON_NEXT_LINE)       return defaultWrap;
      if (role == ChildRole.ROPERAND && !mySettings.PLACE_ASSIGNMENT_SIGN_ON_NEXT_LINE)       return defaultWrap;
      return null;
    }
 else     if (nodeType == ElementType.REFERENCE_EXPRESSION) {
      if (role == ChildRole.DOT) {
        return getReservedWrap();
      }
 else {
        return defaultWrap;
      }
    }
 else     if (nodeType == ElementType.FOR_STATEMENT) {
      if (role == ChildRole.FOR_INITIALIZATION || role == ChildRole.CONDITION || role == ChildRole.FOR_UPDATE) {
        return defaultWrap;
      }
      if (role == ChildRole.LOOP_BODY) {
        return Wrap.createWrap(WrapType.NORMAL,true);
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.METHOD) {
      if (role == ChildRole.THROWS_LIST) {
        return defaultWrap;
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.MODIFIER_LIST) {
      if (childType == ElementType.ANNOTATION) {
        return getReservedWrap();
      }
      ASTNode prevElement=getPrevElement(child);
      if (prevElement != null && prevElement.getElementType() == ElementType.ANNOTATION) {
        return getReservedWrap();
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.ASSERT_STATEMENT) {
      if (role == ChildRole.CONDITION) {
        return defaultWrap;
      }
      if (role == ChildRole.ASSERT_DESCRIPTION && !mySettings.ASSERT_STATEMENT_COLON_ON_NEXT_LINE) {
        return defaultWrap;
      }
      if (role == ChildRole.COLON && mySettings.ASSERT_STATEMENT_COLON_ON_NEXT_LINE) {
        return defaultWrap;
      }
      return null;
    }
 else     if (nodeType == ElementType.CODE_BLOCK) {
      if (role == ChildRole.STATEMENT_IN_BLOCK) {
        return defaultWrap;
      }
 else {
        return null;
      }
    }
 else     if (nodeType == ElementType.IF_STATEMENT) {
      if (role == ChildRole.THEN_BRANCH || role == ChildRole.ELSE_BRANCH) {
        if (childType == ElementType.BLOCK_STATEMENT) {
          return null;
        }
 else {
          return Wrap.createWrap(WrapType.NORMAL,true);
        }
      }
    }
 else     if (nodeType == ElementType.FOREACH_STATEMENT || nodeType == ElementType.WHILE_STATEMENT) {
      if (role == ChildRole.LOOP_BODY) {
        if (childType == ElementType.BLOCK_STATEMENT) {
          return null;
        }
 else {
          return Wrap.createWrap(WrapType.NORMAL,true);
        }
      }
    }
 else     if (nodeType == ElementType.DO_WHILE_STATEMENT) {
      if (role == ChildRole.LOOP_BODY) {
        return Wrap.createWrap(WrapType.NORMAL,true);
      }
 else       if (role == ChildRole.WHILE_KEYWORD) {
        return Wrap.createWrap(WrapType.NORMAL,true);
      }
    }
  }
  return defaultWrap;
}
