{
  int caretOffset=0;
  int tailOffset=context.getTailOffset();
  final Integer bracketsAttr=(Integer)item.getUserData(LookupItem.BRACKETS_COUNT_ATTR);
  final Editor editor=context.getEditor();
  if (bracketsAttr != null) {
    int count=bracketsAttr.intValue();
    if (count > 0) {
      caretOffset=tailOffset + 1;
    }
    for (int i=0; i < count; i++) {
      editor.getDocument().insertString(tailOffset,"[]");
    }
  }
  editor.getCaretModel().moveToOffset(caretOffset);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
  editor.getSelectionModel().removeSelection();
  AfterNewClassInsertHandler.addImportForItem(context.getFile(),context.getStartOffset(),item);
}
