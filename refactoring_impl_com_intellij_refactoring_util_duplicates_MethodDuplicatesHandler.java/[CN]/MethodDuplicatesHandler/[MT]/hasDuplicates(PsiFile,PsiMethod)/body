{
  final PsiCodeBlock body=method.getBody();
  LOG.assertTrue(body != null);
  final PsiStatement[] statements=body.getStatements();
  final DuplicatesFinder duplicatesFinder;
  final PsiElement[] pattern;
  if (statements.length != 1 || !(statements[0] instanceof PsiReturnStatement)) {
    pattern=statements;
  }
 else {
    final PsiExpression returnValue=((PsiReturnStatement)statements[0]).getReturnValue();
    if (returnValue != null) {
      pattern=new PsiElement[]{returnValue};
    }
 else {
      pattern=statements;
    }
  }
  duplicatesFinder=new DuplicatesFinder(pattern,Arrays.asList(method.getParameterList().getParameters()),new ArrayList<PsiVariable>());
  return duplicatesFinder.findDuplicates(file);
}
