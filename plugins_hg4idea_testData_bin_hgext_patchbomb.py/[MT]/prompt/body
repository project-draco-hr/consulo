def prompt(ui, prompt, default=None, rest=':'):
    if (not ui.interactive()):
        if (default is not None):
            return default
        raise util.Abort(_(('%s Please enter a valid value' % (prompt + rest))))
    if default:
        prompt += (' [%s]' % default)
    prompt += rest
    while True:
        r = ui.prompt(prompt, default=default)
        if r:
            return r
        if (default is not None):
            return default
        ui.warn(_('Please enter a valid value.\n'))
