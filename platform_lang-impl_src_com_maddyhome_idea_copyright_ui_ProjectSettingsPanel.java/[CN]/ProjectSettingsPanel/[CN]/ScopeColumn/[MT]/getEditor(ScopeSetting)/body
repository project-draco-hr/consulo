{
  return new AbstractTableCellEditor(){
    private PackageSetChooserCombo myScopeChooser;
    @Nullable public Object getCellEditorValue(){
      return myScopeChooser.getSelectedScope();
    }
    public Component getTableCellEditorComponent(    final JTable table,    Object value,    boolean isSelected,    int row,    int column){
      myScopeChooser=new PackageSetChooserCombo(myProject,value == null ? null : ((NamedScope)value).getName(),false,false){
        @Override protected NamedScope[] createModel(){
          final NamedScope[] model=super.createModel();
          final ArrayList<NamedScope> filteredScopes=new ArrayList<NamedScope>(Arrays.asList(model));
          CustomScopesProviderEx.filterNoSettingsScopes(myProject,filteredScopes);
          return filteredScopes.toArray(new NamedScope[filteredScopes.size()]);
        }
      }
;
      ((JBComboBoxTableCellEditorComponent)myScopeChooser.getChildComponent()).setCell(table,row,column);
      return myScopeChooser;
    }
  }
;
}
