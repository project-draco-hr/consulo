{
  for (  MavenProjectModel each : model.getProjects()) {
    String name;
    if (each.getIdeaModule() != null) {
      name=each.getIdeaModule().getName();
    }
 else     if (each.isValid()) {
      name=each.getMavenId().artifactId;
    }
 else {
      name=each.getDirectoryFile().getName();
    }
    each.setModuleName(name);
  }
  Map<String,Integer> counts=collectNamesCounts(model);
  for (  MavenProjectModel each : model.getProjects()) {
    if (!each.isValid())     continue;
    String name=each.getModuleName();
    if (counts.get(name) > 1) {
      each.setModuleName(name + " (" + each.getMavenId().groupId+ ")");
    }
  }
  for (  MavenProjectModel each : model.getProjects()) {
    List<MavenProjectModel> withSameName=getProjectsWithName(model,each.getModuleName());
    if (withSameName.size() > 1) {
      int i=1;
      for (      MavenProjectModel eachWithSameName : withSameName) {
        String name=eachWithSameName.getModuleName();
        eachWithSameName.setModuleName(name + " (" + i+ ")");
        i++;
      }
    }
  }
}
