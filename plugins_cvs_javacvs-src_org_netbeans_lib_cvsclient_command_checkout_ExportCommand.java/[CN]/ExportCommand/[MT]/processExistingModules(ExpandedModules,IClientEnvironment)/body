{
  final ICvsFileSystem cvsFileSystem=clientEnvironment.getCvsFileSystem();
  for (Iterator it=expandedModules.getModules().iterator(); it.hasNext(); ) {
    final String moduleName=(String)it.next();
    if (moduleName.equals(".")) {
      addFileObject(DirectoryObject.getRoot());
      break;
    }
    final File moduleFile=cvsFileSystem.getLocalFileSystem().getFile(moduleName);
    final AbstractFileObject abstractFileObject;
    final DirectoryObject directoryObject;
    if (moduleFile.isFile()) {
      abstractFileObject=cvsFileSystem.getLocalFileSystem().getFileObject(moduleFile);
      directoryObject=abstractFileObject.getParent();
    }
 else {
      directoryObject=cvsFileSystem.getLocalFileSystem().getDirectoryObject(moduleFile);
      abstractFileObject=directoryObject;
    }
    if (clientEnvironment.getAdminReader().hasCvsDirectory(directoryObject,cvsFileSystem)) {
      addFileObject(abstractFileObject);
    }
  }
}
