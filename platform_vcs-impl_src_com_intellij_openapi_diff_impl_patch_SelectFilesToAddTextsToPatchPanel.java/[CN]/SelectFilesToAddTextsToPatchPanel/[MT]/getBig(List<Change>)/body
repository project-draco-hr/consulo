{
  final Set<Change> exclude=new HashSet<>();
  for (  Change change : changes) {
    VirtualFile virtualFile=getVfFromChange(change);
    if (virtualFile != null) {
      if (isBig(virtualFile)) {
        exclude.add(change);
      }
      continue;
    }
    ContentRevision beforeRevision=change.getBeforeRevision();
    if (beforeRevision != null) {
      try {
        String content=beforeRevision.getContent();
        if (content == null) {
          final FilePath file=beforeRevision.getFile();
          LOG.info("null content for " + (file.getPath()) + ", is dir: "+ (file.isDirectory()));
          continue;
        }
        if (content.length() > VcsConfiguration.ourMaximumFileForBaseRevisionSize) {
          exclude.add(change);
        }
      }
 catch (      VcsException e) {
        LOG.info(e);
      }
    }
  }
  return exclude;
}
