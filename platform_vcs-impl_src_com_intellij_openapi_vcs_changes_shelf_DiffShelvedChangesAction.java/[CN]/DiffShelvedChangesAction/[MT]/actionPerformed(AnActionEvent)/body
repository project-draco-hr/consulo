{
  Project project=e.getData(PlatformDataKeys.PROJECT);
  final ShelvedChangeList[] changeLists=e.getData(ShelvedChangesViewManager.SHELVED_CHANGELIST_KEY);
  List<ShelvedChange> shelvedChanges=e.getData(ShelvedChangesViewManager.SHELVED_CHANGE_KEY);
  if ((shelvedChanges == null || shelvedChanges.isEmpty()) && changeLists != null && changeLists.length > 0) {
    shelvedChanges=changeLists[0].getChanges();
  }
  if (shelvedChanges != null && shelvedChanges.size() > 0) {
    ShelvedChange c=shelvedChanges.get(0);
    Change change=c.getChange(project);
    if (isConflictingChange(change)) {
      try {
        if (showConflictingChangeDiff(project,c)) {
          return;
        }
      }
 catch (      Exception ex) {
      }
    }
  }
  ActionManager.getInstance().getAction("ChangesView.Diff").actionPerformed(e);
}
