{
  final Set<VirtualFile> roots=new HashSet<VirtualFile>();
  if (depth > MAXIMUM_SCAN_DEPTH) {
    return roots;
  }
  if (myProject.isDisposed() || !dir.isDirectory()) {
    return roots;
  }
  if (hasGitDir(dir)) {
    roots.add(dir);
  }
  for (  VirtualFile child : dir.getChildren()) {
    roots.addAll(scanForRootsInsideDir(child,depth + 1));
  }
  return roots;
}
