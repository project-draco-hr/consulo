{
  Set<VirtualFile> roots=new HashSet<VirtualFile>();
  if (depth > 2) {
    return roots;
  }
  if (!dir.isDirectory()) {
    return roots;
  }
  if (hasGitDir(dir)) {
    roots.add(dir);
  }
  for (  VirtualFile child : dir.getChildren()) {
    roots.addAll(scanForRootsInsideDir(child,depth + 1));
  }
  return roots;
}
