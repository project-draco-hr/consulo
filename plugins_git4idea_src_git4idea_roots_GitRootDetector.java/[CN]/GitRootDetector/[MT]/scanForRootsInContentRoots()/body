{
  Set<VirtualFile> gitRoots=new HashSet<VirtualFile>();
  VirtualFile[] roots=myPlatformFacade.getProjectRootManager(myProject).getContentRoots();
  for (  VirtualFile contentRoot : roots) {
    Set<VirtualFile> rootsInsideRoot=scanForRootsInsideDir(contentRoot);
    if (!rootsInsideRoot.contains(contentRoot)) {
      VirtualFile rootAbove=scanForSingleRootAboveDir(contentRoot);
      if (rootAbove != null) {
        rootsInsideRoot.add(rootAbove);
      }
    }
    gitRoots.addAll(rootsInsideRoot);
  }
  return gitRoots;
}
