{
  VirtualFile projectDir=myProject.getBaseDir();
  if (projectDir == null) {
    return new GitRootDetectInfo(Collections.<VirtualFile>emptyList(),false);
  }
  final Collection<VirtualFile> roots=scanForRootsInsideProject(projectDir);
  if (roots.contains(projectDir)) {
    return new GitRootDetectInfo(roots,true);
  }
  VirtualFile rootAbove=scanForSingleRootAboveProject(projectDir);
  if (rootAbove != null) {
    roots.add(rootAbove);
    return new GitRootDetectInfo(roots,true);
  }
  return new GitRootDetectInfo(roots,false);
}
