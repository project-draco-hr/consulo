{
  VirtualFile projectDir=myProject.getBaseDir();
  if (projectDir == null) {
    return new GitRootDetectInfo(Collections.<VirtualFile>emptyList(),false,false);
  }
  final Set<VirtualFile> roots=scanForRootsInsideDir(projectDir);
  roots.addAll(scanForRootsInContentRoots());
  if (roots.contains(projectDir)) {
    return new GitRootDetectInfo(roots,true,false);
  }
  VirtualFile rootAbove=scanForSingleRootAboveDir(projectDir);
  if (rootAbove != null) {
    roots.add(rootAbove);
    return new GitRootDetectInfo(roots,true,true);
  }
  return new GitRootDetectInfo(roots,false,false);
}
