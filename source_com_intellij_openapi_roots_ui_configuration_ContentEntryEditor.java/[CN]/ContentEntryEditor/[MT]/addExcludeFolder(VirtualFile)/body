{
  try {
    final boolean isCompilerOutput=isCompilerOutput(file);
    boolean isExplodedDirectory=isExplodedDirectory(file);
    if (isCompilerOutput || isExplodedDirectory) {
      if (isCompilerOutput) {
        myCompilerExtension.setExcludeOutput(true);
      }
      if (isExplodedDirectory) {
        myRootModel.setExcludeExplodedDirectory(true);
      }
      return null;
    }
 else {
      final ExcludeFolder excludeFolder=myContentEntry.addExcludeFolder(file);
      return excludeFolder;
    }
  }
  finally {
    myEventDispatcher.getMulticaster().folderExcluded(this,file);
    update();
  }
}
