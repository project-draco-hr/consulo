{
  long t=0;
  if (DEBUG) {
    t=System.currentTimeMillis();
    ProfilingUtil.startCPUProfiling();
  }
  boolean wasInputEvent=myIsInInputEvent;
  myIsInInputEvent=(e instanceof InputEvent) || (e instanceof InputMethodEvent) || (e instanceof WindowEvent)|| (e instanceof ActionEvent);
  AWTEvent oldEvent=myCurrentEvent;
  myCurrentEvent=e;
  JobSchedulerImpl.suspend();
  try {
    _dispatchEvent(e);
  }
  finally {
    myIsInInputEvent=wasInputEvent;
    myCurrentEvent=oldEvent;
    JobSchedulerImpl.resume();
    if (DEBUG) {
      final long processTime=System.currentTimeMillis() - t;
      if (processTime > 100) {
        final String path=ProfilingUtil.captureCPUSnapshot();
        LOG.debug("Long event: " + processTime + "ms - "+ toDebugString(e));
        LOG.debug("Snapshot taken: " + path);
      }
 else {
        ProfilingUtil.stopCPUProfiling();
      }
    }
  }
}
