{
  final GrExpression oldQualifier=getQualifierExpression();
  final ASTNode node=getNode();
  final PsiElement refNameElement=getReferenceNameElement();
  if (newQualifier == null) {
    if (oldQualifier != null) {
      if (refNameElement != null) {
        node.removeRange(node.getFirstChildNode(),refNameElement.getNode());
      }
    }
  }
 else {
    if (oldQualifier != null) {
      node.replaceChild(oldQualifier.getNode(),newQualifier.getNode());
    }
 else {
      if (refNameElement != null) {
        node.addChild(newQualifier.getNode(),refNameElement.getNode());
        node.addLeaf(GroovyTokenTypes.mDOT,".",refNameElement.getNode());
      }
    }
  }
}
