{
  final GrExpression qualifier=getQualifierExpression();
  if (qualifier == null) {
    final PsiElement context=PsiUtil.getFileOrClassContext(this);
    PsiClass contextClass=null;
    if (context instanceof PsiClass) {
      contextClass=(PsiClass)context;
    }
 else     if (context instanceof GroovyFile)     contextClass=((GroovyFile)context).getScriptClass();
    if (contextClass == null)     return null;
    return JavaPsiFacade.getElementFactory(getProject()).createType(contextClass);
  }
 else {
    return qualifier.getType();
  }
}
