{
  if (forCompletion)   return CompletionProcessor.createPropertyCompletionProcessor(refExpr);
  Kind kind=((GrReferenceExpressionImpl)refExpr).getKind();
  ResolverProcessor processor;
  if (kind == Kind.METHOD_OR_PROPERTY) {
    final PsiType[] argTypes=PsiUtil.getArgumentTypes(refExpr,false,false);
    PsiType thisType=getThisType(refExpr);
    processor=new MethodResolverProcessor(name,refExpr,false,thisType,argTypes,refExpr.getTypeArguments());
  }
 else {
    processor=new PropertyResolverProcessor(name,refExpr);
  }
  return processor;
}
