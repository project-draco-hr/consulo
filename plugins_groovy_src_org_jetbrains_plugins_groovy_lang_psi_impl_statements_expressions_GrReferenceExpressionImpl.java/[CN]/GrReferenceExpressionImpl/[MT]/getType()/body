{
  PsiElement resolved=resolve();
  if (resolved instanceof PsiClass) {
    return getManager().getElementFactory().createType((PsiClass)resolved);
  }
 else   if (resolved instanceof PsiVariable) {
    return ((PsiVariable)resolved).getType();
  }
 else   if (resolved instanceof PsiMethod) {
  }
 else   if (resolved instanceof GrReferenceExpression) {
    PsiElement parent=resolved.getParent();
    if (parent instanceof GrAssignmentExpression) {
      GrAssignmentExpression assignment=(GrAssignmentExpression)parent;
      if (resolved.equals(assignment.getLValue())) {
        GrExpression rValue=assignment.getRValue();
        if (rValue != null) {
          PsiType rType=rValue.getType();
          if (rType != null)           return rType;
        }
      }
    }
  }
  return null;
}
