{
  Kind kind=((GrReferenceExpressionImpl)refExpr).getKind();
  ResolverProcessor processor;
  if (kind == Kind.METHOD_OR_PROPERTY) {
    final PsiType[] argTypes=checkArguments ? PsiUtil.getArgumentTypes(refExpr,false) : null;
    if (refExpr.getContainingFile() instanceof GspGroovyFile) {
      processor=new MethodOrGspTagResolverProcessor(name,refExpr,forCompletion,false,argTypes);
    }
 else {
      processor=new MethodResolverProcessor(name,refExpr,forCompletion,false,argTypes);
    }
  }
 else {
    processor=new PropertyResolverProcessor(name,refExpr,forCompletion);
  }
  return processor;
}
