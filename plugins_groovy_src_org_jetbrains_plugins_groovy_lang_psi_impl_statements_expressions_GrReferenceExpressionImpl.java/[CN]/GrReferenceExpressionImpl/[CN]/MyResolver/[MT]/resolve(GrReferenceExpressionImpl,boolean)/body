{
  GrExpression qualifier=refExpr.getQualifierExpression();
  String name=refExpr.getReferenceName();
  if (name == null)   return null;
  ResolverProcessor processor=getResolveProcessor(refExpr,name);
  if (qualifier == null) {
    ResolveUtil.treeWalkUp(refExpr,processor);
  }
 else {
    PsiType qualifierType=qualifier.getType();
    if (qualifierType instanceof PsiClassType) {
      PsiClass qualifierClass=((PsiClassType)qualifierType).resolve();
      if (qualifierClass != null) {
        qualifierClass.processDeclarations(processor,PsiSubstitutor.EMPTY,null,refExpr);
      }
    }
  }
  return processor.getCandidates();
}
