{
  PsiType qualifierType=qualifier.getType();
  if (qualifierType instanceof PsiClassType) {
    PsiClassType.ClassResolveResult result=((PsiClassType)qualifierType).resolveGenerics();
    PsiClass clazz=result.getElement();
    if (clazz != null) {
      PsiClass listClass=ResolveUtil.findListClass(refExpr.getManager(),refExpr.getResolveScope());
      if (listClass != null && listClass.getTypeParameters().length == 1) {
        PsiSubstitutor substitutor=TypeConversionUtil.getClassSubstitutor(listClass,clazz,result.getSubstitutor());
        if (substitutor != null) {
          PsiType componentType=substitutor.substitute(listClass.getTypeParameters()[0]);
          if (componentType != null) {
            processClassQualifierType(refExpr,processor,componentType);
          }
        }
      }
    }
  }
 else   if (qualifierType instanceof PsiArrayType) {
    processClassQualifierType(refExpr,processor,((PsiArrayType)qualifierType).getComponentType());
  }
}
