{
  if (qualifier == null) {
    ResolveUtil.treeWalkUp(refExpr,processor);
  }
 else {
    PsiType qualifierType=qualifier.getType();
    if (qualifierType instanceof PsiClassType) {
      PsiClass qualifierClass=((PsiClassType)qualifierType).resolve();
      if (qualifierClass != null) {
        qualifierClass.processDeclarations(processor,PsiSubstitutor.EMPTY,null,refExpr);
        if (!(qualifierClass instanceof GrTypeDefinition)) {
          addDefaultMethods(qualifierClass,processor,new HashSet<PsiClass>());
        }
      }
    }
  }
}
