{
  final SuspendManager suspendManager=myDebuggerContext.getDebugProcess().getSuspendManager();
  final ThreadReferenceProxyImpl debuggerContextThread=myDebuggerContext.getThreadProxy();
  final boolean isSuspendedByContext;
  try {
    isSuspendedByContext=suspendManager.isSuspended(debuggerContextThread);
  }
 catch (  ObjectCollectedException e) {
    notifyCancelled();
    return;
  }
  if (isSuspendedByContext) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Context thread " + getSuspendContext().getThread());
      LOG.debug("Debug thread" + debuggerContextThread);
    }
    threadAction();
  }
 else {
    SuspendContextImpl suspendContextForThread=SuspendManagerUtil.findContextByThread(suspendManager,debuggerContextThread);
    if (suspendContextForThread != null) {
      suspendContextForThread.postponeCommand(this);
    }
 else {
      notifyCancelled();
    }
  }
}
