{
  List<Element> files=element.getChildren("file");
  final Map<VirtualFile,Charset> mapping=new HashMap<VirtualFile,Charset>();
  for (  Element fileElement : files) {
    String url=fileElement.getAttributeValue("url");
    String charsetName=fileElement.getAttributeValue("charset");
    Charset charset=CharsetToolkit.forName(charsetName);
    if (charset == null)     continue;
    VirtualFile file=url.equals("PROJECT") ? null : VirtualFileManager.getInstance().findFileByUrl(url);
    if (file != null || url.equals("PROJECT")) {
      mapping.put(file,charset);
    }
  }
  myMapping.clear();
  myMapping.putAll(mapping);
  myUseUTFGuessing=Boolean.parseBoolean(element.getAttributeValue("useUTFGuessing"));
  myNative2AsciiForPropertiesFiles=Boolean.parseBoolean(element.getAttributeValue("native2AsciiForPropertiesFiles"));
  myDefaultCharsetForPropertiesFiles=CharsetToolkit.forName(element.getAttributeValue("defaultCharsetForPropertiesFiles"));
  myModificationCount++;
}
