{
  final File file=new File(VfsUtil.urlToPath(url));
  if (file.exists()) {
    return;
  }
  try {
    String text=getText(templateName);
    final VirtualFile virtualFile;
    if (!FileUtil.createParentDirs(file) || (virtualFile=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(file.getParentFile())) == null) {
      throw new IOException(IdeBundle.message("error.message.unable.to.create.file",file.getPath()));
    }
    final VirtualFile childData=virtualFile.createChildData(this,file.getName());
    DeploymentItemUtil.setFileText(project,childData,text);
  }
 catch (  final IOException e) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        Messages.showErrorDialog(IdeBundle.message("message.text.error.creating.deployment.descriptor",e.getLocalizedMessage()),IdeBundle.message("message.text.creating.deployment.descriptor"));
      }
    }
);
  }
}
