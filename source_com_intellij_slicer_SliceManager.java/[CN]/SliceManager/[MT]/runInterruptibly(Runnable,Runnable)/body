{
  myCanceled=false;
  ProgressIndicatorBase progress=new ProgressIndicatorBase();
  try {
    ProgressManager.getInstance().runProcess(runnable,progress);
  }
 catch (  ProcessCanceledException e) {
    myCanceled=true;
    progress.cancel();
    onCancel.run();
    throw e;
  }
}
