{
  List<GroovyStructureViewElement> children=new ArrayList<GroovyStructureViewElement>();
  if (myElement instanceof GroovyFileBase) {
    for (    GrTopStatement topStatement : ((GroovyFileBase)myElement).getTopStatements()) {
      if (topStatement instanceof GrTypeDefinition || topStatement instanceof GrMethod) {
        addNewChild(children,topStatement);
      }
 else       if (topStatement instanceof GrVariableDeclaration) {
        addVariables(children,((GrVariableDeclaration)topStatement));
      }
    }
  }
 else   if (myElement instanceof GrTypeDefinition) {
    GrMembersDeclaration[] declarations=((GrTypeDefinition)myElement).getMemberDeclarations();
    if (declarations.length == 0)     return children.toArray(StructureViewTreeElement.EMPTY_ARRAY);
    for (    GrMembersDeclaration declaration : declarations) {
      if (declaration instanceof GrVariableDeclaration) {
        addVariables(children,(GrVariableDeclaration)declaration);
      }
 else {
        addNewChild(children,declaration);
      }
    }
  }
  return children.toArray(new StructureViewTreeElement[children.size()]);
}
