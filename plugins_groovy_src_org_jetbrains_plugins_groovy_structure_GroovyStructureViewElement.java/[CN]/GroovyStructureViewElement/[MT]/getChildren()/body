{
  List<GroovyStructureViewElement> children=new ArrayList<GroovyStructureViewElement>();
  GroovyPsiElement element=myElementPointer.getElement();
  if (element instanceof GroovyFileBase) {
    GrTopStatement[] topStatements=((GroovyFileBase)element).getTopStatements();
    for (    GrTopStatement topStatement : topStatements) {
      if (topStatement instanceof GrTypeDefinition || topStatement instanceof GrMethod) {
        addNewChild(children,topStatement);
      }
 else       if (topStatement instanceof GrVariableDeclaration) {
        addVariables(children,((GrVariableDeclaration)topStatement));
      }
    }
  }
 else   if (element instanceof GrTypeDefinition) {
    GrMembersDeclaration[] declarations=((GrTypeDefinition)element).getMemberDeclarations();
    if (declarations == null)     return children.toArray(StructureViewTreeElement.EMPTY_ARRAY);
    for (    GrMembersDeclaration declaration : declarations) {
      if (declaration instanceof GrVariableDeclaration) {
        addVariables(children,(GrVariableDeclaration)declaration);
      }
 else {
        addNewChild(children,declaration);
      }
    }
  }
  return children.toArray(StructureViewTreeElement.EMPTY_ARRAY);
}
