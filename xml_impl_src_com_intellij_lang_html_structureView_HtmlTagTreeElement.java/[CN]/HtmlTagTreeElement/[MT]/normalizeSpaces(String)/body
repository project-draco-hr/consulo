{
  final StringBuilder buf=new StringBuilder();
  for (  char ch : text.toCharArray()) {
    if (ch <= ' ' || Character.isSpaceChar(ch)) {
      if (buf.length() == 0 || buf.charAt(buf.length() - 1) != ' ') {
        buf.append(' ');
      }
    }
 else {
      buf.append(ch);
    }
  }
  return buf.toString();
}
