{
  LOG.assertTrue(aClass.isValid());
  ApplicationManager.getApplication().assertReadAccessAllowed();
  Collection<CandidateInfo> candidates=getMethodsToOverrideImplement(aClass,toImplement);
  Collection<CandidateInfo> secondary=toImplement || aClass.isInterface() ? Collections.<CandidateInfo>emptyList() : getMethodsToOverrideImplement(aClass,true);
  final MemberChooser<PsiMethodMember> chooser=showOverrideImplementChooser(editor,aClass,toImplement,candidates,secondary);
  if (chooser == null)   return;
  final List<PsiMethodMember> selectedElements=chooser.getSelectedElements();
  if (selectedElements == null || selectedElements.isEmpty())   return;
  LOG.assertTrue(aClass.isValid());
  new WriteCommandAction(project,aClass.getContainingFile()){
    protected void run(    final Result result) throws Throwable {
      overrideOrImplementMethodsInRightPlace(editor,aClass,selectedElements,chooser.isCopyJavadoc(),chooser.isInsertOverrideAnnotation());
    }
  }
.execute();
}
