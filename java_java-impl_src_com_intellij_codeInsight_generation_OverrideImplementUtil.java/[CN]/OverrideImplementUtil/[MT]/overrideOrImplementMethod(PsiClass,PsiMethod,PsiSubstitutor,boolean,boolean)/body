{
  if (!method.isValid() || !substitutor.isValid())   return Collections.emptyList();
  List<PsiMethod> results=new ArrayList<PsiMethod>();
  for (  final MethodImplementor implementor : getImplementors()) {
    final PsiMethod[] prototypes=implementor.createImplementationPrototypes(aClass,method);
    if (implementor.isBodyGenerated()) {
      ContainerUtil.addAll(results,prototypes);
    }
 else {
      for (      PsiMethod prototype : prototypes) {
        results.add(decorateMethod(aClass,method,toCopyJavaDoc,insertOverrideIfPossible,prototype));
      }
    }
  }
  if (results.isEmpty()) {
    PsiMethod method1=GenerateMembersUtil.substituteGenericMethod(method,substitutor,aClass);
    PsiElementFactory factory=JavaPsiFacade.getInstance(method.getProject()).getElementFactory();
    PsiMethod result=(PsiMethod)factory.createClass("Dummy").add(method1);
    if (result instanceof PsiAnnotationMethod) {
      PsiAnnotationMemberValue defaultValue=((PsiAnnotationMethod)result).getDefaultValue();
      if (defaultValue != null) {
        PsiElement defaultKeyword=defaultValue;
        while (!(defaultKeyword instanceof PsiKeyword) && defaultKeyword != null) {
          defaultKeyword=defaultKeyword.getPrevSibling();
        }
        if (defaultKeyword == null)         defaultKeyword=defaultValue;
        defaultValue.getParent().deleteChildRange(defaultKeyword,defaultValue);
      }
    }
    results.add(decorateMethod(aClass,method,toCopyJavaDoc,insertOverrideIfPossible,result));
  }
  for (Iterator<PsiMethod> iterator=results.iterator(); iterator.hasNext(); ) {
    if (aClass.findMethodBySignature(iterator.next(),false) != null) {
      iterator.remove();
    }
  }
  return results;
}
