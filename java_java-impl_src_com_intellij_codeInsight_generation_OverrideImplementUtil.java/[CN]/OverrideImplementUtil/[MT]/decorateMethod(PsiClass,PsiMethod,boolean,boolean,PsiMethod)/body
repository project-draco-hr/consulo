{
  PsiUtil.setModifierProperty(result,PsiModifier.ABSTRACT,aClass.isInterface());
  PsiUtil.setModifierProperty(result,PsiModifier.NATIVE,false);
  if (!toCopyJavaDoc) {
    PsiDocComment comment=result.getDocComment();
    if (comment != null) {
      comment.delete();
    }
  }
  final PsiTypeParameterList list=result.getTypeParameterList();
  if (list != null) {
    final PsiClass containingClass=method.getContainingClass();
    if (containingClass != null) {
      for (      PsiClassType classType : aClass.getSuperTypes()) {
        if (InheritanceUtil.isInheritorOrSelf(PsiUtil.resolveClassInType(classType),containingClass,true) && classType.isRaw()) {
          list.replace(JavaPsiFacade.getElementFactory(aClass.getProject()).createTypeParameterList());
          break;
        }
      }
    }
  }
  annotateOnOverrideImplement(result,aClass,method,insertOverrideIfPossible);
  if (CodeStyleSettingsManager.getSettings(aClass.getProject()).REPEAT_SYNCHRONIZED && method.hasModifierProperty(PsiModifier.SYNCHRONIZED)) {
    result.getModifierList().setModifierProperty(PsiModifier.SYNCHRONIZED,true);
  }
  final PsiCodeBlock body=JavaPsiFacade.getInstance(method.getProject()).getElementFactory().createCodeBlockFromText("{}",null);
  PsiCodeBlock oldBody=result.getBody();
  if (oldBody != null) {
    oldBody.replace(body);
  }
 else {
    result.add(body);
  }
  setupMethodBody(result,method,aClass);
  final Project project=method.getProject();
  CodeStyleManager codeStyleManager=CodeStyleManager.getInstance(project);
  CommonCodeStyleSettings javaSettings=CodeStyleSettingsManager.getSettings(project).getCommonSettings(JavaLanguage.INSTANCE);
  boolean keepBreaks=javaSettings.KEEP_LINE_BREAKS;
  javaSettings.KEEP_LINE_BREAKS=false;
  result=(PsiMethod)JavaCodeStyleManager.getInstance(project).shortenClassReferences(result);
  result=(PsiMethod)codeStyleManager.reformat(result);
  javaSettings.KEEP_LINE_BREAKS=keepBreaks;
  return result;
}
