{
  final MavenProjectModel project=findProject(f);
  if (project == null)   return;
  List<MavenProjectModel> list;
  if (myRootProjects.contains(project)) {
    list=myRootProjects;
  }
 else {
    list=visit(new Visitor<List<MavenProjectModel>>(){
      public void visit(      MavenProjectModel node){
        if (node.getModules().contains(project)) {
          setResult(node.getModules());
        }
      }
    }
);
  }
  if (list == null)   return;
  list.remove(project);
  doRemove(project);
  MavenEmbedder e=MavenEmbedderFactory.createEmbedderForRead(mavenSettings,this);
  try {
    Set<VirtualFile> updatedFiles=new HashSet<VirtualFile>();
    for (    MavenProjectModel each : findChildProjects(project)) {
      doUpdate(each,e,false,updatedFiles,p,false);
    }
  }
  finally {
    MavenEmbedderFactory.releaseEmbedder(e);
  }
}
