{
  if (thenBranch instanceof PsiBlockStatement) {
    PsiBlockStatement blockStatement=(PsiBlockStatement)thenBranch;
    PsiStatement[] statements=blockStatement.getCodeBlock().getStatements();
    if (statements.length > 0) {
      ifStatement.getParent().addRangeAfter(statements[0],statements[statements.length - 1],ifStatement);
    }
  }
 else {
    ifStatement.getParent().addAfter(thenBranch,ifStatement);
  }
}
