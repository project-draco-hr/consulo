{
  Collection<String> commonBranches=null;
  for (  GitRepository repository : myRepositories) {
    GitBranchesCollection branchesCollection=repository.getBranches();
    Collection<String> names=local ? GitBranchUtil.convertBranchesToNames(branchesCollection.getLocalBranches()) : GitBranchUtil.getBranchNamesWithoutRemoteHead(branchesCollection.getRemoteBranches());
    if (commonBranches == null) {
      commonBranches=names;
    }
 else {
      commonBranches.retainAll(names);
    }
  }
  if (commonBranches != null) {
    ArrayList<String> common=new ArrayList<String>(commonBranches);
    Collections.sort(common);
    return common;
  }
 else {
    return Collections.emptyList();
  }
}
