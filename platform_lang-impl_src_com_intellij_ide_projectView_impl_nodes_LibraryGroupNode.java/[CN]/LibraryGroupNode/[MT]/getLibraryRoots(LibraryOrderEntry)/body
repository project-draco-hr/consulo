{
  final ArrayList<VirtualFile> files=new ArrayList<VirtualFile>();
  final Library library=orderEntry.getLibrary();
  if (library == null)   return VirtualFile.EMPTY_ARRAY;
  OrderRootType[] rootTypes=LibraryType.DEFAULT_EXTERNAL_ROOT_TYPES;
  if (library instanceof LibraryEx) {
    LibraryType libraryType=((LibraryEx)library).getType();
    if (libraryType != null) {
      rootTypes=libraryType.getExternalRootTypes();
    }
  }
  for (  OrderRootType rootType : rootTypes) {
    files.addAll(Arrays.asList(library.getFiles(rootType)));
  }
  return VfsUtil.toVirtualFileArray(files);
}
