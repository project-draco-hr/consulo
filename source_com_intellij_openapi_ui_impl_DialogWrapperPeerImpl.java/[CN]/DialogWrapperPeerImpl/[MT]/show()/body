{
  LOG.assertTrue(EventQueue.isDispatchThread(),"Access is allowed from event dispatch thread only");
  new AnCancelAction().registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0)),getRootPane());
  if (!myCanBeParent && myWindowManager != null) {
    myWindowManager.doNotSuggestAsParent(myDialog);
  }
  if (myDialog.isModal() && !isProgressDialog()) {
    ((CommandProcessorEx)CommandProcessor.getInstance()).enterModal();
    LaterInvocatorEx.enterModal(myDialog);
  }
  try {
    myDialog.show();
  }
  finally {
    if (myDialog.isModal() && !isProgressDialog()) {
      ((CommandProcessorEx)CommandProcessor.getInstance()).leaveModal();
      LaterInvocatorEx.leaveModal(myDialog);
    }
  }
}
