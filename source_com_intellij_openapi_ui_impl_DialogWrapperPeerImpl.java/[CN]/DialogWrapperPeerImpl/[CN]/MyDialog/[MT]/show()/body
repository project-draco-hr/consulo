{
  final DialogWrapper dialogWrapper=getDialogWrapper();
  pack();
  setSize((int)(getWidth() * dialogWrapper.getHorizontalStretch()),(int)(getHeight() * dialogWrapper.getVerticalStretch()));
  myDimensionServiceKey=dialogWrapper.getDimensionKey();
  Point location=null;
  if (myDimensionServiceKey != null) {
    location=DimensionService.getInstance().getLocation(myDimensionServiceKey);
    Dimension size=DimensionService.getInstance().getSize(myDimensionServiceKey);
    if (size != null) {
      myInitialSize=(Dimension)size.clone();
      setSize(myInitialSize);
    }
  }
  if (myInitialSize == null) {
    myInitialSize=getSize();
  }
  if (location == null) {
    location=dialogWrapper.getInitialLocation();
  }
  if (location != null) {
    setLocation(location);
  }
 else {
    setLocationRelativeTo(getOwner());
  }
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      DialogWrapper dialogWrapper=getDialogWrapper();
      if (dialogWrapper == null || !dialogWrapper.isShowing()) {
        return;
      }
      JButton defaultButton=getRootPane().getDefaultButton();
      JComponent component=dialogWrapper.getPreferredFocusedComponent();
      if (component == null) {
        component=defaultButton;
      }
      if (component != null) {
        component.requestFocus();
      }
      Application application=ApplicationManager.getApplication();
      if (application != null && application.hasComponent(UISettings.class)) {
        if (defaultButton != null && UISettings.getInstance().MOVE_MOUSE_ON_DEFAULT_BUTTON) {
          Point p=defaultButton.getLocationOnScreen();
          Rectangle r=defaultButton.getBounds();
          try {
            Robot robot=new Robot();
            robot.mouseMove(p.x + r.width / 2,p.y + r.height / 2);
          }
 catch (          AWTException exc) {
            exc.printStackTrace();
          }
        }
      }
    }
  }
);
  super.show();
}
