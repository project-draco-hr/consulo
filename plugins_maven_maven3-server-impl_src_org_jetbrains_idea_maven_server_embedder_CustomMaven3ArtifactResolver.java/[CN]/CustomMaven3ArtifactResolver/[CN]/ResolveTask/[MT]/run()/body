{
  try {
    Thread.currentThread().setContextClassLoader(classLoader);
    resolve(artifact,remoteRepositories,session);
  }
 catch (  ArtifactNotFoundException anfe) {
synchronized (result) {
      result.addMissingArtifact(artifact);
    }
  }
catch (  ArtifactResolutionException e) {
synchronized (result) {
      result.addErrorArtifactException(e);
    }
  }
 finally {
    latch.countDown();
  }
}
