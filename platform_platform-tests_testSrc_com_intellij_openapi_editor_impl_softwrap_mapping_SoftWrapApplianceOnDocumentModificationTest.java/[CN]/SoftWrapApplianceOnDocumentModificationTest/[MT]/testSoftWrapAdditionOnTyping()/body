{
  String text="this is a test string that is expected to end just before right margin<caret>";
  init(100,text);
  int offset=myEditor.getDocument().getTextLength() + 1;
  assertTrue(getSoftWrapModel().getRegisteredSoftWraps().isEmpty());
  type(" thisisalongtokenthatisnotexpectedtobebrokenintopartsduringsoftwrapping");
  SoftWrap softWrap=myEditor.getSoftWrapModel().getSoftWrap(offset);
  if (softWrap == null) {
    fail(String.format("Expected soft wrap to be located on offset %d. Actual: %s. Document text: %s",offset,getSoftWrapModel().getRegisteredSoftWraps(),myEditor.getDocument().getCharsSequence()));
  }
}
