{
  String text="line1<caret>\n" + "second line that is long enough to be soft wrapped";
  init(100,text);
  TIntHashSet offsetsBefore=collectSoftWrapStartOffsets(1);
  assertTrue(!offsetsBefore.isEmpty());
  type('2');
  final TIntHashSet offsetsAfter=collectSoftWrapStartOffsets(1);
  assertSame(offsetsBefore.size(),offsetsAfter.size());
  offsetsBefore.forEach(new TIntProcedure(){
    @Override public boolean execute(    int value){
      assertTrue(offsetsAfter.contains(value + 1));
      return true;
    }
  }
);
}
