{
  String text="Line1\n" + "Long line2 that is expected to be soft-wrapped<caret>";
  init(20,text);
  List<SoftWrap> softWrapsBeforeModification=new ArrayList<SoftWrap>(getSoftWrapModel().getRegisteredSoftWraps());
  assertTrue(softWrapsBeforeModification.size() > 0);
  int offset=myEditor.getCaretModel().getOffset();
  VisualPosition positionBeforeModification=myEditor.offsetToVisualPosition(offset);
  type("\n123");
  myEditor.getSelectionModel().setSelection(offset + 1,myEditor.getDocument().getTextLength());
  delete();
  assertEquals(softWrapsBeforeModification,getSoftWrapModel().getRegisteredSoftWraps());
  assertEquals(positionBeforeModification,myEditor.offsetToVisualPosition(offset));
}
