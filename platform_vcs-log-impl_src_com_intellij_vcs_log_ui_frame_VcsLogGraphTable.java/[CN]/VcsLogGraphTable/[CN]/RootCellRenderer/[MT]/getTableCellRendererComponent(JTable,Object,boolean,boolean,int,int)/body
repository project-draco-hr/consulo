{
  String text;
  Color color;
  if (value instanceof VirtualFile) {
    VirtualFile root=(VirtualFile)value;
    int readableRow=TableScrollingUtil.getReadableRow(table,Math.round(HEIGHT_CELL * 0.5f));
    if (row < readableRow) {
      text="";
    }
 else     if (row == 0 || !value.equals(table.getModel().getValueAt(row - 1,column)) || readableRow == row) {
      text=root.getName();
    }
 else {
      text="";
    }
    color=getRootBackgroundColor(root,myUi.getColorManager());
  }
 else {
    text=null;
    color=UIUtil.getTableBackground(isSelected);
  }
  myColor=color;
  myBorderColor=myRenderer.getTableCellRendererComponent(table,text,isSelected,hasFocus,row,column).getBackground();
  setForeground(UIUtil.getTableForeground(false));
  if (myUi.isShowRootNames()) {
    setText(text);
    isNarrow=false;
  }
 else {
    setText("");
    isNarrow=true;
  }
  return this;
}
