{
  indicator.checkCanceled();
  indicator.setIndeterminate(true);
  indicator.setText(IdeBundle.message("progress.indexing.scanning"));
  int count=queryNeededFiles(indicator);
  indicator.setIndeterminate(false);
  indicator.setText(IdeBundle.message("progress.indexing.updating"));
  if (count > 0) {
    processFiles(indicator,true);
  }
  updatingDone();
}
