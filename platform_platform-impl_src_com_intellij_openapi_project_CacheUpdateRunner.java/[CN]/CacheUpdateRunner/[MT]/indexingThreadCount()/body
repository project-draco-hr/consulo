{
  int threadsCount=Registry.intValue("caches.indexerThreadsCount");
  if (threadsCount <= 0) {
    int coresToLeaveForOtherActivity=ApplicationManager.getApplication().isUnitTestMode() ? 0 : 1;
    threadsCount=Math.max(1,Math.min(PROC_COUNT - coresToLeaveForOtherActivity,4));
  }
  return threadsCount;
}
