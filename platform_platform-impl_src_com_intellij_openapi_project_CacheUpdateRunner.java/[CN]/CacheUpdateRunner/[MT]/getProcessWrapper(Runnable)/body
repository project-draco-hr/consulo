{
  return ApplicationManager.getApplication().isWriteAccessAllowed() ? new Runnable(){
    @Override public void run(){
      boolean old=ApplicationImpl.setExceptionalThreadWithReadAccessFlag(true);
      try {
        process.run();
      }
  finally {
        ApplicationImpl.setExceptionalThreadWithReadAccessFlag(old);
      }
    }
  }
 : process;
}
