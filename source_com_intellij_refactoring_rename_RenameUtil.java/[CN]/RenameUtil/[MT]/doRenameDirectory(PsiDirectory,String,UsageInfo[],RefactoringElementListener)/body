{
  for (int i=0; i < usages.length; i++) {
    UsageInfo usage=usages[i];
    if (PsiTreeUtil.getParentOfType(usage.getElement(),PsiPackageStatement.class) != null)     continue;
    rename(usage,newName);
  }
  for (int i=0; i < usages.length; i++) {
    UsageInfo usage=usages[i];
    if (PsiTreeUtil.getParentOfType(usage.getElement(),PsiPackageStatement.class) == null)     continue;
    rename(usage,newName);
  }
  aDirectory.setName(newName);
  listener.elementRenamed(aDirectory);
}
