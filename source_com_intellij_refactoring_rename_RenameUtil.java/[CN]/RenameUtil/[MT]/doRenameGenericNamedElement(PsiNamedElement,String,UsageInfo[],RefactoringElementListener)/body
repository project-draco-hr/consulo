{
  for (int i=0; i < usages.length; i++) {
    UsageInfo usage=usages[i];
    rename(usage,newName);
  }
  boolean hasWritableMetaData=false;
  if (namedElement instanceof PsiMetaOwner) {
    final PsiMetaData metaData=((PsiMetaOwner)namedElement).getMetaData();
    if (metaData instanceof PsiWritableMetaData) {
      hasWritableMetaData=true;
      ((PsiWritableMetaData)metaData).setName(newName);
    }
  }
  if (!hasWritableMetaData) {
    namedElement.setName(newName);
  }
  listener.elementRenamed(namedElement);
}
