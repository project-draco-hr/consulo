{
  editorFactory.getEventMulticaster().addDocumentListener(new DocumentAdapter(){
    @Override public void documentChanged(    DocumentEvent e){
      queueUpdateEncodingFromContent(e.getDocument());
    }
  }
,this);
  editorFactory.addEditorFactoryListener(new EditorFactoryAdapter(){
    @Override public void editorCreated(    @NotNull EditorFactoryEvent event){
      queueUpdateEncodingFromContent(event.getEditor().getDocument());
    }
  }
,this);
}
