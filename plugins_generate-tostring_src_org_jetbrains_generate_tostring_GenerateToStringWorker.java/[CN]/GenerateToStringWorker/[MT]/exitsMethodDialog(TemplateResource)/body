{
  final DuplicatonPolicy dupPolicy=config.getReplaceDialogInitialOption();
  if (dupPolicy == DuplicatonPolicy.ASK) {
    PsiMethod existingMethod=psi.findMethodByName(clazz,template.getTargetMethodName());
    if (existingMethod != null) {
      return MethodExistsDialog.showDialog(template.getTargetMethodName());
    }
  }
 else   if (dupPolicy == DuplicatonPolicy.REPLACE) {
    return ReplacePolicy.getInstance();
  }
  return DuplicatePolicy.getInstance();
}
