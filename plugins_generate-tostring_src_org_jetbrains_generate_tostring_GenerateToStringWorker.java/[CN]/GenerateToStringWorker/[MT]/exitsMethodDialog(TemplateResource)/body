{
  final DuplicationPolicy dupPolicy=config.getReplaceDialogInitialOption();
  if (dupPolicy == DuplicationPolicy.ASK) {
    PsiMethod existingMethod=PsiAdapter.findMethodByName(clazz,template.getTargetMethodName());
    if (existingMethod != null) {
      return MethodExistsDialog.showDialog(template.getTargetMethodName());
    }
  }
 else   if (dupPolicy == DuplicationPolicy.REPLACE) {
    return ReplacePolicy.getInstance();
  }
  return DuplicatePolicy.getInstance();
}
