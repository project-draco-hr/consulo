{
  VirtualFile[] selectedFiles=context.getSelectedFiles();
  if (selectedFiles == null)   return false;
  if (selectedFiles.length == 0)   return false;
  VirtualFile file=selectedFiles[0];
  Project project=context.getProject();
  if (project == null)   return false;
  AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(file);
  if (vcs == null)   return false;
  final AnnotationProvider annotationProvider=vcs.getAnnotationProvider();
  if (annotationProvider == null)   return false;
  return hasTextEditor(file);
}
