{
  if (location == null)   return null;
  final ReferenceType refType=location.declaringType();
  if (refType == null)   return null;
  final String originalQName=refType.name();
  int dollar=originalQName.indexOf('$');
  final String qName=dollar >= 0 ? originalQName.substring(0,dollar) : originalQName;
  final GlobalSearchScope searchScope=myDebugProcess.getSession().getSearchScope();
  Module[] modules=ModuleManager.getInstance(project).getModules();
  for (  Module module : modules) {
    GroovyModuleCachesManager manager=GroovyModuleCachesManager.getInstance(module);
    GrTypeDefinition typeDefinition=manager.getModuleFilesCache().getClassByName(qName);
    if (typeDefinition != null) {
      return typeDefinition.getContainingFile();
    }
  }
  return null;
}
