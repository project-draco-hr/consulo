{
  String qName=getOuterClassName(position);
  if (qName != null) {
    return myDebugProcess.getRequestsManager().createClassPrepareRequest(requestor,qName);
  }
  qName=findEnclosingName(position);
  if (qName == null)   throw new NoDataException();
  ClassPrepareRequestor waitRequestor=new ClassPrepareRequestor(){
    public void processClassPrepare(    DebugProcess debuggerProcess,    ReferenceType referenceType){
      final CompoundPositionManager positionManager=((DebugProcessImpl)debuggerProcess).getPositionManager();
      if (positionManager.locationsOfLine(referenceType,position).size() > 0) {
        requestor.processClassPrepare(debuggerProcess,referenceType);
      }
 else {
        final List<ReferenceType> positionClasses=positionManager.getAllClasses(position);
        if (positionClasses.contains(referenceType)) {
          requestor.processClassPrepare(debuggerProcess,referenceType);
        }
      }
    }
  }
;
  return myDebugProcess.getRequestsManager().createClassPrepareRequest(waitRequestor,qName + "$*");
}
