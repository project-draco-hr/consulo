{
  final byte[] bytes=loadRevisionContent(revision);
  if (file != null) {
    return new String(bytes,file.getCharset());
  }
  EncodingManager e=project != null ? EncodingProjectManager.getInstance(project) : null;
  if (e == null) {
    e=EncodingManager.getInstance();
  }
  return CharsetToolkit.bytesToString(bytes,e.getDefaultCharset());
}
