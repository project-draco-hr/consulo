{
  if (!TemplateResource.isValidTemplate(methodBody.getText())) {
    Messages.showWarningDialog("The template is incompatible with this version of the plugin.","Incompatible Template");
    return;
  }
  try {
    StringWriter sw=new StringWriter();
    VelocityContext vc=new VelocityContext();
    VelocityEngine velocity=VelocityFactory.getVelocityEngine();
    velocity.evaluate(vc,sw,"org.intellij.idea.plugin.tostring.view.ConfigUI$OnSyntaxCheck",methodBody.getText());
    Messages.showMessageDialog("Syntax check complete - no errors found","Syntax Check",Messages.getInformationIcon());
  }
 catch (  ParseErrorException e) {
    Messages.showMessageDialog("Syntax Error:\n" + e.getMessage(),"Syntax Error",Messages.getErrorIcon());
  }
catch (  Exception e) {
    throw new PluginException("Error syntax checking template",e);
  }
}
