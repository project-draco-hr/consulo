{
  TemplateResourceLocator.createTemplateFolderIfMissing();
  JFileChooser chooser=new JFileChooser(TemplateResourceLocator.getTemplateFolder());
  chooser.setDialogType(JFileChooser.CUSTOM_DIALOG);
  chooser.setApproveButtonToolTipText("Save Template");
  chooser.setMultiSelectionEnabled(false);
  chooser.setDialogTitle("Save Template");
  chooser.setDragEnabled(false);
  int choiceSave=chooser.showSaveDialog(ConfigUI.this);
  if (choiceSave == JFileChooser.APPROVE_OPTION) {
    try {
      String filename=chooser.getSelectedFile().getPath();
      if (FileUtil.getFileExtension(filename) == null)       filename+=DEFAULT_TEMPLATE_FILENAME_EXTENSION;
      TemplateResource res=new TemplateResource(FileUtil.stripFilename(filename),methodBody.getText());
      boolean existsTemplate=false;
      int choiceOverwrite=JOptionPane.OK_OPTION;
      if (FileUtil.existsFile(filename)) {
        existsTemplate=true;
        choiceOverwrite=Messages.showYesNoCancelDialog("A file already exists with the filename. Overwrite existing file?","File Exists",Messages.getWarningIcon());
      }
      if (choiceOverwrite == JOptionPane.OK_OPTION) {
        FileUtil.saveFile(filename,res.getTemplate());
        if (!existsTemplate)         templates.addItem(res);
      }
    }
 catch (    IOException e) {
      throw new TemplateResourceException("Error saving template",e);
    }
  }
  reloadTemplates();
}
