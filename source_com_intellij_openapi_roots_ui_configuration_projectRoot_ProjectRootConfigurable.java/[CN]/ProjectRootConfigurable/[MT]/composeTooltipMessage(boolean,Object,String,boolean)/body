{
  StringBuffer buf=new StringBuffer();
  if (invalid) {
    if (object instanceof Module) {
      final Module module=(Module)object;
      final Map<String,Set<String>> problems=myValidityCache.get(module);
      if (problems.containsKey(NO_JDK)) {
        buf.append(NO_JDK).append("\n");
      }
      final Set<String> deletedLibraries=problems.get(DELETED_LIBRARIES);
      if (deletedLibraries != null) {
        buf.append(ProjectBundle.message("project.roots.library.problem.message",deletedLibraries.size()));
        for (        String problem : deletedLibraries) {
          if (deletedLibraries.size() > 1) {
            buf.append(" - ");
          }
          buf.append("\'").append(problem).append("\'").append("\n");
        }
      }
    }
 else {
      buf.append(ProjectBundle.message("project.roots.tooltip.library.misconfigured",displayName)).append("\n");
    }
  }
  if (unused) {
    buf.append(ProjectBundle.message("project.roots.tooltip.unused",displayName));
  }
  return buf;
}
