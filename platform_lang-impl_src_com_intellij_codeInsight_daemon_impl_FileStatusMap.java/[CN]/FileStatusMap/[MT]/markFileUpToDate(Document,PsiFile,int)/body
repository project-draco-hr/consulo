{
synchronized (myDocumentToStatusMap) {
    FileStatus status=myDocumentToStatusMap.get(document);
    if (status == null) {
      status=new FileStatus(file,document);
      myDocumentToStatusMap.put(document,status);
    }
    status.defensivelyMarked=false;
    if (passId == Pass.WOLF) {
      status.wolfPassFinfished=true;
    }
 else     if (status.dirtyScopes.containsKey(passId)) {
      RangeMarker marker=status.dirtyScopes.get(passId);
      if (marker != null) {
        ((DocumentEx)document).removeRangeMarker((RangeMarkerEx)marker);
        status.dirtyScopes.put(passId,null);
      }
    }
  }
}
