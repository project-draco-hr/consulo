{
  dirtyScopes.forEachEntry(new TIntObjectProcedure<RangeMarker>(){
    @Override public boolean execute(    int id,    RangeMarker oldScope){
      RangeMarker newScope=combineScopes(oldScope,scope,fileLength,document);
      if (newScope != oldScope) {
        dirtyScopes.put(id,newScope);
      }
      return true;
    }
  }
);
}
