{
  final PsiManager manager=variable.getManager();
  final PsiElementFactory factory=manager.getElementFactory();
  final PsiDeclarationStatement newDeclaration=factory.createVariableDeclarationStatement(variable.getName(),variable.getType(),initializer,true);
  if (variable.hasModifierProperty(PsiModifier.FINAL)) {
    final PsiLocalVariable newVariable=(PsiLocalVariable)newDeclaration.getDeclaredElements()[0];
    newVariable.getModifierList().setModifierProperty(PsiModifier.FINAL,true);
  }
  return newDeclaration;
}
