{
  final PsiManager manager=variable.getManager();
  final PsiElementFactory factory=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory();
  final PsiDeclarationStatement newDeclaration=factory.createVariableDeclarationStatement(variable.getName(),variable.getType(),initializer);
  if (variable.hasModifierProperty(PsiModifier.FINAL)) {
    final PsiLocalVariable newVariable=(PsiLocalVariable)newDeclaration.getDeclaredElements()[0];
    final PsiModifierList modifierList=newVariable.getModifierList();
    modifierList.setModifierProperty(PsiModifier.FINAL,true);
  }
  return newDeclaration;
}
