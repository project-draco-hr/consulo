{
  setLayout(new BorderLayout(10,10));
  IconLoader.activate();
  if (SystemInfo.isMac) {
    myLafNames.put(DEFAULT,IconLoader.getIcon("/lafs/OSXAqua.png"));
    myLafNames.put(DARCULA,IconLoader.getIcon("/lafs/OSXDarcula.png"));
  }
 else   if (SystemInfo.isWindows) {
    myLafNames.put(INTELLIJ,IconLoader.getIcon("/lafs/WindowsIntelliJ.png"));
    myLafNames.put(DARCULA,IconLoader.getIcon("/lafs/WindowsDarcula.png"));
  }
 else {
    myLafNames.put(INTELLIJ,IconLoader.getIcon("/lafs/LinuxIntelliJ.png"));
    myLafNames.put(DARCULA,IconLoader.getIcon("/lafs/LinuxDarcula.png"));
  }
  myColumnMode=myLafNames.size() > 2;
  JPanel buttonsPanel=new JPanel(new GridLayout(myColumnMode ? myLafNames.size() : 1,myColumnMode ? 1 : myLafNames.size(),5,5));
  ButtonGroup group=new ButtonGroup();
  String myDefaultLafName=null;
  for (  Map.Entry<String,Icon> entry : myLafNames.entrySet()) {
    final String lafName=entry.getKey();
    Icon icon=entry.getValue();
    final JRadioButton radioButton=new JRadioButton(lafName,myDefaultLafName == null);
    radioButton.setOpaque(false);
    if (myDefaultLafName == null) {
      radioButton.setSelected(true);
      myDefaultLafName=lafName;
    }
    final JPanel panel=createBigButtonPanel(new BorderLayout(10,10),radioButton,new Runnable(){
      @Override public void run(){
        applyLaf(lafName,CustomizeUIThemeStepPanel.this);
      }
    }
);
    panel.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
    panel.add(radioButton,BorderLayout.NORTH);
    final JLabel label=new JLabel(myColumnMode ? IconUtil.scale(icon,.2) : icon){
      @Override public Dimension getPreferredSize(){
        Dimension size=super.getPreferredSize();
        if (myColumnMode)         size.width*=2;
        return size;
      }
    }
;
    label.setVerticalAlignment(SwingConstants.TOP);
    panel.add(label,BorderLayout.CENTER);
    group.add(radioButton);
    buttonsPanel.add(panel);
  }
  add(buttonsPanel,BorderLayout.CENTER);
  myPreviewLabel=new JLabel();
  myPreviewLabel.setHorizontalAlignment(SwingConstants.CENTER);
  myPreviewLabel.setVerticalAlignment(SwingConstants.CENTER);
  if (myColumnMode) {
    add(buttonsPanel,BorderLayout.WEST);
    add(myPreviewLabel,BorderLayout.CENTER);
  }
  applyLaf(myDefaultLafName,this);
  myInitial=false;
}
