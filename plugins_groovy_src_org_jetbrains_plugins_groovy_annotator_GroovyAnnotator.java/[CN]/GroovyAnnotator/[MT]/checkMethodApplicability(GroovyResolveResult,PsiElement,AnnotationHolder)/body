{
  final PsiElement element=methodResolveResult.getElement();
  if (!(element instanceof PsiMethod))   return;
  final PsiMethod method=(PsiMethod)element;
  PsiType[] argumentTypes=PsiUtil.getArgumentTypes(place,true);
  if ("call".equals(method.getName()) && place instanceof GrReferenceExpression) {
    final GrExpression qualifierExpression=((GrReferenceExpression)place).getQualifierExpression();
    if (qualifierExpression != null) {
      final PsiType type=qualifierExpression.getType();
      if (type instanceof GrClosureType) {
        if (!PsiUtil.isApplicable(argumentTypes,(GrClosureType)type,element.getManager())) {
          highlightInapplicableMethodUsage(methodResolveResult,place,holder,method,argumentTypes);
          return;
        }
      }
    }
  }
  if (argumentTypes != null && !PsiUtil.isApplicable(argumentTypes,method,methodResolveResult.getSubstitutor(),methodResolveResult.getCurrentFileResolveContext() instanceof GrMethodCallExpression)) {
    if (GroovyPropertyUtils.isSimplePropertyGetter(method)) {
      if (method instanceof GrMethod || method instanceof GrAccessorMethod) {
        final PsiType returnType=PsiUtil.getSmartReturnType(method);
        if (returnType instanceof GrClosureType) {
          if (PsiUtil.isApplicable(argumentTypes,((GrClosureType)returnType),element.getManager())) {
            return;
          }
        }
      }
      PsiType returnType=method.getReturnType();
      if (returnType != null) {
        final PsiClassType closureType=JavaPsiFacade.getElementFactory(element.getProject()).createTypeByFQClassName(GrClosableBlock.GROOVY_LANG_CLOSURE,GlobalSearchScope.allScope(element.getProject()));
        if (TypesUtil.isAssignable(closureType,returnType,element.getManager(),returnType.getResolveScope())) {
          return;
        }
      }
    }
    highlightInapplicableMethodUsage(methodResolveResult,place,holder,method,argumentTypes);
  }
}
