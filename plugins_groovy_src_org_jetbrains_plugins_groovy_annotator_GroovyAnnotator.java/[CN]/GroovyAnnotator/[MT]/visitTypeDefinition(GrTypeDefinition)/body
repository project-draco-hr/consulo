{
  final PsiElement parent=typeDefinition.getParent();
  if (!(typeDefinition.isAnonymous() || parent instanceof GrTypeDefinitionBody || parent instanceof GroovyFile|| typeDefinition instanceof GrTypeParameter)) {
    final TextRange range=getClassHeaderTextRange(typeDefinition);
    final Annotation errorAnnotation=myHolder.createErrorAnnotation(range,GroovyBundle.message("class.definition.is.not.expected.here"));
    errorAnnotation.registerFix(new GrMoveClassToCorrectPlaceFix(typeDefinition));
  }
  checkTypeDefinition(myHolder,typeDefinition);
  checkTypeDefinitionModifiers(myHolder,typeDefinition);
  checkDuplicateMethod(typeDefinition.getMethods(),myHolder);
  checkImplementedMethodsOfClass(myHolder,typeDefinition);
  checkConstructors(myHolder,typeDefinition);
}
