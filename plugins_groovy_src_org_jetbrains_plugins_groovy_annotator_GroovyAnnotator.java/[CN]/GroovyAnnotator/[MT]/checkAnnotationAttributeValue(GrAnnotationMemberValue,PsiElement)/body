{
  if (value instanceof GrLiteral)   return false;
  if (value instanceof GrClosableBlock)   return false;
  if (value instanceof GrReferenceExpression) {
    PsiElement resolved=((GrReferenceExpression)value).resolve();
    if (resolved instanceof PsiClass)     return false;
    if (resolved instanceof PsiEnumConstant)     return false;
    if (resolved instanceof GrAccessorMethod)     resolved=((GrAccessorMethod)resolved).getProperty();
    if (resolved instanceof PsiField) {
      GrExpression initializer;
      try {
        if (resolved instanceof GrField) {
          initializer=((GrField)resolved).getInitializerGroovy();
        }
 else {
          final PsiExpression _initializer=((PsiField)resolved).getInitializer();
          initializer=_initializer != null ? (GrExpression)ExpressionConverter.getExpression(_initializer,GroovyFileType.GROOVY_LANGUAGE,value.getProject()) : null;
        }
      }
 catch (      IncorrectOperationException e) {
        initializer=null;
      }
      if (initializer != null) {
        return checkAnnotationAttributeValue(initializer,toHighlight);
      }
    }
  }
  if (value instanceof GrAnnotationArrayInitializer) {
    for (    GrAnnotationMemberValue expression : ((GrAnnotationArrayInitializer)value).getInitializers()) {
      if (checkAnnotationAttributeValue(expression,toHighlight))       return true;
    }
    return false;
  }
  myHolder.createErrorAnnotation(toHighlight,GroovyBundle.message("expected.0.to.be.inline.constant",value.getText()));
  return true;
}
