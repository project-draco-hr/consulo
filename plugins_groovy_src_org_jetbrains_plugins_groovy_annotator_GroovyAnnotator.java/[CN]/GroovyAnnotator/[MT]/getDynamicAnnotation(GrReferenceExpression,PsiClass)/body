{
  if (targetClass instanceof GrTypeDefinition && PsiUtil.isInStaticContext(referenceExpression,(GrMemberOwner)targetClass))   return null;
  final PsiFile containingFile=referenceExpression.getContainingFile();
  VirtualFile file;
  if (containingFile != null) {
    file=containingFile.getVirtualFile();
    if (file == null)     return null;
  }
 else   return null;
  Module module=ProjectRootManager.getInstance(referenceExpression.getProject()).getFileIndex().getModuleForFile(file);
  if (module == null)   return null;
  final String qualifiedName=targetClass.getQualifiedName();
  if (qualifiedName == null)   return null;
  if (referenceExpression.getParent() instanceof GrMethodCallExpression) {
    final DynamicVirtualMethod methodVirtualElement=getDynamicMethodElement(referenceExpression,targetClass,module,qualifiedName);
    if (methodVirtualElement != null)     return methodVirtualElement;
  }
 else {
    final DynamicVirtualProperty propertyVirtualElement=getDynamicPropertyElement(referenceExpression,targetClass,module,qualifiedName);
    if (propertyVirtualElement != null)     return propertyVirtualElement;
  }
  return null;
}
