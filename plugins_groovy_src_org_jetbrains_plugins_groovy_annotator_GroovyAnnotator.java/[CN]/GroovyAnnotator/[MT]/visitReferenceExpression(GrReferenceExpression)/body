{
  PsiElement refNameElement=referenceExpression.getReferenceNameElement();
  if (refNameElement == null)   return;
  checkStringNameIdentifier(referenceExpression);
  boolean cannotBeDynamic=PsiUtil.isCompileStatic(referenceExpression) || isPropertyAccessInStaticMethod(referenceExpression);
  GroovyResolveResult resolveResult=getBestResolveResult(referenceExpression);
  if (resolveResult.getElement() != null) {
    if (!isStaticOk(resolveResult)) {
      createAnnotationForRef(referenceExpression,cannotBeDynamic,GroovyBundle.message("cannot.reference.nonstatic",referenceExpression.getReferenceName()));
    }
    return;
  }
  if (ResolveUtil.isKeyOfMap(referenceExpression)) {
    Annotation annotation=myHolder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(DefaultHighlighter.MAP_KEY);
    return;
  }
  if (GrHighlightUtil.shouldHighlightAsUnresolved(referenceExpression)) {
    Annotation annotation=createAnnotationForRef(referenceExpression,cannotBeDynamic,GroovyBundle.message("cannot.resolve",referenceExpression.getReferenceName()));
    if (referenceExpression.getQualifier() == null) {
      if (isCall(referenceExpression)) {
        registerStaticImportFix(referenceExpression,annotation);
      }
 else {
        registerCreateClassByTypeFix(referenceExpression,annotation);
        registerAddImportFixes(referenceExpression,annotation);
      }
    }
    registerReferenceFixes(referenceExpression,annotation,cannotBeDynamic);
    UnresolvedReferenceQuickFixProvider.registerReferenceFixes(referenceExpression,new QuickFixActionRegistrarAdapter(annotation));
    OrderEntryFix.registerFixes(new QuickFixActionRegistrarAdapter(annotation),referenceExpression);
  }
}
