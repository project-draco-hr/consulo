{
  final PsiElement element=resolveResult.getElement();
  if (!(element instanceof GrVariable))   return;
  final GrVariable variable=(GrVariable)element;
  final PsiType type=variable.getTypeGroovy();
  if (!(type instanceof GrClosureType))   return;
  GrParameter[] parameters=((GrClosureType)type).getClosureParameters();
  PsiType[] argumentTypes=PsiUtil.getArgumentTypes(place,false);
  if (argumentTypes == null)   return;
  final PsiType[] paramTypes=PsiUtil.skipOptionalParametersAndSubstitute(argumentTypes.length,parameters,PsiSubstitutor.EMPTY);
  if (!areTypesCompatibleForCallingClosure(argumentTypes,paramTypes,place.getManager(),place.getResolveScope())) {
    final String typesString=buildArgTypesList(argumentTypes);
    String message=GroovyBundle.message("cannot.apply.method.or.closure",variable.getName(),typesString);
    PsiElement elementToHighlight=PsiUtil.getArgumentsElement(place);
    if (elementToHighlight == null)     elementToHighlight=place;
    holder.createWarningAnnotation(elementToHighlight,message);
  }
}
