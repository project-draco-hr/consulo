{
  GrPackageDefinition packageDefinition=PsiTreeUtil.getParentOfType(refElement,GrPackageDefinition.class);
  if (packageDefinition == null && refElement.getQualifier() == null) {
    PsiElement parent=refElement.getParent();
    if (parent instanceof GrNewExpression && refElement.getManager().areElementsEquivalent(((GrNewExpression)parent).getReferenceElement(),refElement)) {
      annotation.registerFix(CreateClassFix.createClassFromNewAction((GrNewExpression)parent));
    }
 else {
      if (shouldBeInterface(refElement)) {
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.INTERFACE));
      }
 else       if (shouldBeClass(refElement)) {
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.CLASS));
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.ENUM));
      }
 else       if (shouldBeAnnotation(refElement)) {
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.ANNOTATION));
      }
 else {
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.CLASS));
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.INTERFACE));
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.ENUM));
        annotation.registerFix(CreateClassFix.createClassFixAction(refElement,CreateClassKind.ANNOTATION));
      }
    }
  }
}
