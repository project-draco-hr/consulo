{
  GrPackageDefinition packageDefinition=PsiTreeUtil.getParentOfType(refElement,GrPackageDefinition.class);
  if (packageDefinition == null && refElement.getQualifier() == null) {
    PsiElement parent=refElement.getParent();
    if (parent instanceof GrNewExpression && refElement.getManager().areElementsEquivalent(((GrNewExpression)parent).getReferenceElement(),refElement)) {
      annotation.registerFix(CreateClassFix.createClassFromNewAction((GrNewExpression)parent));
    }
 else {
      annotation.registerFix(CreateClassFix.createClassFixAction(refElement));
    }
  }
}
