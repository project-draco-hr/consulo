{
  StringBuilder builder=new StringBuilder(text.length());
  String quote=GrStringUtil.getStartQuote(text);
  if (quote.isEmpty())   return;
  String substring=text.substring(quote.length());
  if (!GrStringUtil.parseStringCharacters(substring,new StringBuilder(text.length()),null)) {
    myHolder.createErrorAnnotation(literal,GroovyBundle.message("illegal.escape.character.in.string.literal"));
    return;
  }
  int[] offsets=new int[substring.length() + 1];
  boolean result=GrStringUtil.parseStringCharacters(substring,builder,offsets);
  LOG.assertTrue(result);
  if (!builder.toString().endsWith(quote) || substring.charAt(offsets[builder.length() - quote.length()]) == '\\') {
    myHolder.createErrorAnnotation(literal,GroovyBundle.message("string.end.expected"));
  }
}
