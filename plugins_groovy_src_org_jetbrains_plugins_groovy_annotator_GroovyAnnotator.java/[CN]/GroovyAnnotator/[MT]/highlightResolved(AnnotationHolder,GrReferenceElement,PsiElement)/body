{
  final PsiElement refNameElement=getElementToHighlight(refElement);
  if (resolved instanceof PsiField || resolved instanceof GrVariable && isScriptField((GrVariable)resolved)) {
    boolean isStatic=((PsiVariable)resolved).hasModifierProperty(PsiModifier.STATIC);
    Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(isStatic ? DefaultHighlighter.STATIC_FIELD : DefaultHighlighter.INSTANCE_FIELD);
  }
 else   if (resolved instanceof GrAccessorMethod) {
    boolean isStatic=((GrAccessorMethod)resolved).hasModifierProperty(PsiModifier.STATIC);
    Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(isStatic ? DefaultHighlighter.STATIC_PROPERTY_REFERENCE : DefaultHighlighter.INSTANCE_PROPERTY_REFERENCE);
  }
 else   if (resolved instanceof PsiMethod) {
    boolean isStatic=((PsiMethod)resolved).hasModifierProperty(PsiModifier.STATIC);
    if (GroovyPropertyUtils.isSimplePropertyAccessor((PsiMethod)resolved)) {
      Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
      annotation.setTextAttributes(isStatic ? DefaultHighlighter.STATIC_PROPERTY_REFERENCE : DefaultHighlighter.INSTANCE_PROPERTY_REFERENCE);
    }
 else {
      Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
      annotation.setTextAttributes(isStatic ? DefaultHighlighter.STATIC_METHOD_ACCESS : DefaultHighlighter.METHOD_CALL);
    }
  }
 else   if (resolved instanceof PsiTypeParameter) {
    Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(DefaultHighlighter.TYPE_PARAMETER);
  }
 else   if (resolved instanceof PsiClass) {
    if (((PsiClass)resolved).isAnnotationType()) {
      Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
      annotation.setTextAttributes(DefaultHighlighter.ANNOTATION);
    }
 else {
      Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
      annotation.setTextAttributes(DefaultHighlighter.CLASS_REFERENCE);
    }
  }
 else   if (resolved instanceof GrParameter) {
    boolean reassigned=isReassigned((GrParameter)resolved);
    Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(reassigned ? DefaultHighlighter.REASSIGNED_PARAMETER : DefaultHighlighter.PARAMETER);
  }
 else   if (resolved instanceof GrVariable) {
    boolean reassigned=isReassigned((GrVariable)resolved);
    Annotation annotation=holder.createInfoAnnotation(refNameElement,null);
    annotation.setTextAttributes(reassigned ? DefaultHighlighter.REASSIGNED_LOCAL_VARIABLE : DefaultHighlighter.LOCAL_VARIABLE);
  }
}
