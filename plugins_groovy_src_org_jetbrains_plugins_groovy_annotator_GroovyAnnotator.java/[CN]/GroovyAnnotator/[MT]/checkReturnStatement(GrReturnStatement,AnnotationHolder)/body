{
  final GrExpression value=returnStatement.getReturnValue();
  if (value != null) {
    final PsiType type=value.getType();
    if (type != null) {
      final GrParametersOwner owner=PsiTreeUtil.getParentOfType(returnStatement,GrMethod.class,GrClosableBlock.class);
      if (owner instanceof PsiMethod) {
        final PsiMethod method=(PsiMethod)owner;
        if (method.isConstructor()) {
          holder.createErrorAnnotation(value,GroovyBundle.message("cannot.return.from.constructor"));
        }
 else {
          final PsiType methodType=method.getReturnType();
          final PsiType returnType=value.getType();
          if (methodType != null) {
            if (PsiType.VOID.equals(methodType)) {
              holder.createErrorAnnotation(value,GroovyBundle.message("cannot.return.from.void.method"));
            }
 else             if (returnType != null) {
              checkAssignability(holder,methodType,returnType,value);
            }
          }
        }
      }
    }
  }
}
