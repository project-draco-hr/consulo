{
  if (text.length() > INTERN_THRESHOLD)   return text.toString();
  int idx;
synchronized (staticEntries) {
    idx=staticEntries.index(text);
    if (idx >= 0) {
      return staticEntries.get(idx);
    }
  }
synchronized (this) {
    idx=entries.index(text);
    if (idx >= 0) {
      return entries.get(idx);
    }
    final char[] buf=new char[text.length()];
    CharArrayUtil.getChars(text,buf,0);
    final CharSequence entry=new String(buf);
    boolean added=entries.add(entry);
    assert added;
    return entry;
  }
}
