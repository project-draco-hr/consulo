{
  myLock.readLock().lock();
  try {
    final Map<PsiAnchor,RefElement> refTable=getRefTable();
    for (    RefElement refElement : refTable.values()) {
      refElement.accept(visitor);
    }
    if (myModules != null) {
      for (      RefModule refModule : myModules.values()) {
        refModule.accept(visitor);
      }
    }
    for (    RefManagerExtension extension : myExtensions.values()) {
      extension.iterate(visitor);
    }
  }
  finally {
    myLock.readLock().unlock();
  }
}
