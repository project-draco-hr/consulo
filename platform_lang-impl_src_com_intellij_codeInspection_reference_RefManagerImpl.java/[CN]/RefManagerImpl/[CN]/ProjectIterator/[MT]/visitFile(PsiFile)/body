{
  final VirtualFile virtualFile=file.getVirtualFile();
  if (virtualFile != null) {
    myContext.incrementJobDoneAmount(GlobalInspectionContextImpl.BUILD_GRAPH,ProjectUtil.calcRelativeToProjectPath(virtualFile,myProject));
  }
  final FileViewProvider viewProvider=file.getViewProvider();
  final Set<Language> relevantLanguages=viewProvider.getLanguages();
  for (  Language language : relevantLanguages) {
    visitElement(viewProvider.getPsi(language));
  }
  myPsiManager.dropResolveCaches();
  myPsiManager.dropFileCaches(file);
}
