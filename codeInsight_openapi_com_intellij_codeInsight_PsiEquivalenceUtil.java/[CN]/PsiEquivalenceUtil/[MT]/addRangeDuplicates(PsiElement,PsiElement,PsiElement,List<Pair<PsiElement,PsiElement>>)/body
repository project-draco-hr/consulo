{
  final PsiElement[] children=getFilteredChildren(scope);
  NextChild:   for (int i=0; i < children.length; ) {
    PsiElement child=children[i];
    if (child != first) {
      int j=i;
      PsiElement next=first;
      do {
        if (!areElementsEquivalent(children[j],next))         break;
        j++;
        if (next == last) {
          result.add(new Pair<PsiElement,PsiElement>(child,children[j - 1]));
          i=j + 1;
          continue NextChild;
        }
        next=PsiTreeUtil.skipSiblingsForward(next,PsiWhiteSpace.class);
      }
 while (true);
      if (i == j) {
        addRangeDuplicates(child,first,last,result);
      }
    }
    i++;
  }
}
