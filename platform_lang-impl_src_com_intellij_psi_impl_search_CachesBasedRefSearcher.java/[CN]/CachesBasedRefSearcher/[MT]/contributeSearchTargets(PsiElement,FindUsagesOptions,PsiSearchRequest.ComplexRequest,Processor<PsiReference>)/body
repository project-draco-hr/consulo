{
  final boolean ignoreAccessScope=false;
  final SearchScope scope=options.searchScope;
  contributeSearchTargets(refElement,options,collector,consumer,ignoreAccessScope,scope);
  collector.addRequest(PsiSearchRequest.custom(new Computable<Boolean>(){
    public Boolean compute(){
      ourProcessing.set(true);
      try {
        return ReferencesSearch.search(refElement,scope,ignoreAccessScope).forEach(consumer);
      }
  finally {
        ourProcessing.set(null);
      }
    }
  }
));
}
