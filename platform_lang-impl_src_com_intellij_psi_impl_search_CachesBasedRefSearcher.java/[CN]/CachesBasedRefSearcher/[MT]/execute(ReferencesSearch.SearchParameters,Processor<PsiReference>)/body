{
  if (ourProcessing.get() != null) {
    return true;
  }
  final PsiElement refElement=p.getElementToSearch();
  final PsiSearchRequest.ComplexRequest collector=PsiSearchRequest.composite();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final FindUsagesOptions options=new FindUsagesOptions(p.getScope());
      options.isUsages=true;
      contributeSearchTargets(refElement,options,collector,consumer,p.isIgnoreAccessScope(),options.searchScope);
      SearchRequestor.contributeTargets(refElement,options,collector,consumer);
    }
  }
);
  return refElement.getManager().getSearchHelper().processRequest(collector);
}
