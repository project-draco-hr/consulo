{
  if (p instanceof MySearchParameters) {
    return true;
  }
  final PsiElement refElement=p.getElementToSearch();
  final SearchRequestCollector collector=new SearchRequestCollector();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      final FindUsagesOptions options=new MyFindUsagesOptions(p);
      options.isUsages=true;
      contributeSearchTargets(refElement,options,collector,p.isIgnoreAccessScope(),options.searchScope);
      SearchRequestor.collectRequests(refElement,options,collector);
    }
  }
);
  return refElement.getManager().getSearchHelper().processRequests(collector,consumer);
}
