{
  UISettings settings=UISettings.getInstance();
  Project project=e.getProject();
  settings.PRESENTATION_MODE=!settings.PRESENTATION_MODE;
  if (project != null) {
    hideToolWindows(project);
  }
  settings.fireUISettingsChanged();
  if (project != null) {
    Window frame=IdeFrameImpl.getActiveFrame();
    if (frame instanceof IdeFrameImpl) {
      final PropertiesComponent propertiesComponent=PropertiesComponent.getInstance(project);
      if (settings.PRESENTATION_MODE) {
        propertiesComponent.setValue("full.screen.before.presentation.mode",String.valueOf(((IdeFrameImpl)frame).isInFullScreen()));
        ((IdeFrameImpl)frame).toggleFullScreen(true);
      }
 else {
        final String value=propertiesComponent.getValue("full.screen.before.presentation.mode");
        ((IdeFrameImpl)frame).toggleFullScreen("true".equalsIgnoreCase(value));
      }
    }
  }
  Font tooltipFont=UIManager.getFont("ToolTip.font");
  if (settings.PRESENTATION_MODE) {
    Font font=new Font(tooltipFont.getName(),tooltipFont.getStyle(),settings.PRESENTATION_MODE_FONT_SIZE);
    UIManager.put("old.tooltip.font",tooltipFont);
    UIManager.put("ToolTip.font",font);
  }
 else {
    UIManager.put("ToolTip.font",UIManager.getFont("old.tooltip.font"));
  }
  LafManager.getInstance().updateUI();
  EditorUtil.reinitSettings();
}
