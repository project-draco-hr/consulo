{
  final InspectionTool tool=getSelectedTool();
  if (getSelectionCount() == 0 || !(tool instanceof DescriptorProviderInspection && !(tool instanceof CommonInspectionToolWrapper)))   return EMPTY_DESCRIPTORS;
  final TreePath[] paths=getSelectionPaths();
  final LinkedHashSet<CommonProblemDescriptor> descriptors=new LinkedHashSet<CommonProblemDescriptor>();
  for (  TreePath path : paths) {
    Object node=path.getLastPathComponent();
    traverseDescriptors((InspectionTreeNode)node,descriptors);
  }
  return descriptors.toArray(new CommonProblemDescriptor[descriptors.size()]);
}
