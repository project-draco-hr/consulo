{
  List<Change> changes=getChangesBetween(left,right);
  Writer writer=new OutputStreamWriter(new FileOutputStream(filePath));
  try {
    List<FilePatch> patches=PatchBuilder.buildPatch(changes,gw.getBaseDir(),false,isReverse);
    UnifiedDiffWriter.write(patches,writer);
  }
  finally {
    writer.close();
  }
}
