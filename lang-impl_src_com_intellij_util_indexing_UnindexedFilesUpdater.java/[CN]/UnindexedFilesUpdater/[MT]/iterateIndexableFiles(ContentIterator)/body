{
  final ProjectFileIndex projectFileIndex=myRootManager.getFileIndex();
  final Module[] modules=ModuleManager.getInstance(myProject).getModules();
  projectFileIndex.iterateContent(processor);
  Set<VirtualFile> visitedRoots=new HashSet<VirtualFile>();
  for (  Module module : modules) {
    OrderEntry[] orderEntries=ModuleRootManager.getInstance(module).getOrderEntries();
    for (    OrderEntry orderEntry : orderEntries) {
      if (orderEntry instanceof LibraryOrderEntry || orderEntry instanceof JdkOrderEntry) {
        VirtualFile[] roots=orderEntry.getFiles(OrderRootType.SOURCES);
        for (        VirtualFile root : roots) {
          if (!visitedRoots.contains(root)) {
            visitedRoots.add(root);
            iterateRecursively(root,processor);
          }
        }
      }
    }
  }
}
