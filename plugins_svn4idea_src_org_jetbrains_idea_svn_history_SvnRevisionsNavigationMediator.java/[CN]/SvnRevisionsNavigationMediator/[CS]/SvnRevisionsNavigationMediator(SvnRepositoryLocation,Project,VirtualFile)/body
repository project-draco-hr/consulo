{
  myProject=project;
  final SvnVcs vcs=SvnVcs.getInstance(project);
  myChunks=new LinkedList<List<Fragment>>();
  final SVNURL[] repositoryRoot=new SVNURL[1];
  final long[] youngRevision=new long[1];
  final VcsException[] exception=new VcsException[1];
  Runnable process=new Runnable(){
    @Override public void run(){
      SVNRepository repository=null;
      try {
        repository=vcs.createRepository(location.getURL());
        youngRevision[0]=repository.getLatestRevision();
        repositoryRoot[0]=repository.getRepositoryRoot(false);
      }
 catch (      SVNException e) {
        exception[0]=new VcsException(e);
      }
 finally {
        if (repository != null) {
          repository.closeSession();
        }
      }
    }
  }
;
  underProgress(exception,process);
  final Iterator<ChangesBunch> visualIterator=project.isDefault() ? null : CommittedChangesCache.getInstance(project).getBackBunchedIterator(vcs,vcsRoot,location,CHUNK_SIZE);
  final Iterator<ChangesBunch> internalIterator=project.isDefault() ? null : LoadedRevisionsCache.getInstance(project).iterator(location.getURL());
  myInternallyCached=(internalIterator == null) ? null : new InternallyCachedProvider(internalIterator,myProject);
  myVisuallyCached=(visualIterator == null) ? null : new VisuallyCachedProvider(visualIterator,myProject,location);
  myChunkFactory=new BunchFactory(myInternallyCached,myVisuallyCached,new LiveProvider(vcs,location,youngRevision[0],new SvnLogUtil(myProject,vcs,location,repositoryRoot[0])));
  myCurrentIdx=-1;
  underProgress(exception,new Runnable(){
    @Override public void run(){
      try {
        goBack();
      }
 catch (      VcsException e) {
        exception[0]=e;
      }
    }
  }
);
}
