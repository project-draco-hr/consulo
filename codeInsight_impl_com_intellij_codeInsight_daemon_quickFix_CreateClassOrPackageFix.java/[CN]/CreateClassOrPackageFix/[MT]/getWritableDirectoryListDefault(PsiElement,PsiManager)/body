{
  final List<PsiDirectory> writableDirectoryList=new ArrayList<PsiDirectory>();
  if (context instanceof PsiPackage) {
    for (    PsiDirectory directory : ((PsiPackage)context).getDirectories()) {
      if (directory.isWritable()) {
        writableDirectoryList.add(directory);
      }
    }
  }
 else {
    for (    VirtualFile root : ProjectRootManager.getInstance(psiManager.getProject()).getContentSourceRoots()) {
      PsiDirectory directory=psiManager.findDirectory(root);
      if (directory != null && directory.isWritable()) {
        writableDirectoryList.add(directory);
      }
    }
  }
  return writableDirectoryList;
}
