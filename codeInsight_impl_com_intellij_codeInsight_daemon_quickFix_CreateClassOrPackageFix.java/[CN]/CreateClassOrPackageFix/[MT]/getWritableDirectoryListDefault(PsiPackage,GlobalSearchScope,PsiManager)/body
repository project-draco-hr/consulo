{
  final List<PsiDirectory> writableDirectoryList=new ArrayList<PsiDirectory>();
  if (context != null) {
    for (    PsiDirectory directory : context.getDirectories()) {
      if (directory.isWritable() && scope.contains(directory.getVirtualFile())) {
        writableDirectoryList.add(directory);
      }
    }
  }
 else {
    for (    VirtualFile root : ProjectRootManager.getInstance(psiManager.getProject()).getContentSourceRoots()) {
      PsiDirectory directory=psiManager.findDirectory(root);
      if (directory != null && directory.isWritable() && scope.contains(directory.getVirtualFile())) {
        writableDirectoryList.add(directory);
      }
    }
  }
  return writableDirectoryList;
}
