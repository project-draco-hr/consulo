{
  final Module module=facet.getModule();
  final GlobalSearchScope moduleScope=facet.getModule().getModuleScope();
  if (facet.getConfiguration().LIBRARY_PROJECT) {
    removeGenModule(module);
  }
  initializeGenSourceRoot(module,AndroidRootUtil.getBuildconfigGenSourceRootPath(facet),true,true);
  initializeGenSourceRoot(module,AndroidRootUtil.getRenderscriptGenSourceRootPath(facet),FileTypeIndex.getFiles(AndroidRenderscriptFileType.INSTANCE,moduleScope).size() > 0,true);
  if (AndroidAptCompiler.isToCompileModule(module,facet.getConfiguration())) {
    initializeGenSourceRoot(module,AndroidRootUtil.getAptGenSourceRootPath(facet),true,true);
  }
 else {
    final VirtualFile aptSourceRoot=initializeGenSourceRoot(module,AndroidRootUtil.getAptGenSourceRootPath(facet),true,false);
    if (aptSourceRoot != null) {
      excludeAllBuildConfigsFromCompilation(facet,aptSourceRoot);
    }
    includeAaptGenSourceRootToCompilation(facet);
  }
  initializeGenSourceRoot(module,AndroidRootUtil.getAidlGenSourceRootPath(facet),FileTypeIndex.getFiles(AndroidIdlFileType.ourFileType,moduleScope).size() > 0,true);
}
