{
  final String genModuleName=getGenModuleName(module);
  final ModuleManager moduleManager=ModuleManager.getInstance(module.getProject());
  final Module genModule=moduleManager.findModuleByName(genModuleName);
  if (genModule != null) {
    return genModule;
  }
  final File moduleDir=new File(module.getModuleFilePath()).getParentFile();
  final String moduleDirPath=FileUtil.toSystemIndependentName(moduleDir.getPath());
  return ApplicationManager.getApplication().runWriteAction(new Computable<Module>(){
    @Override public Module compute(){
      return moduleManager.newModule(moduleDirPath + '/' + genModuleName+ ModuleFileType.DOT_DEFAULT_EXTENSION,StdModuleTypes.JAVA);
    }
  }
);
}
