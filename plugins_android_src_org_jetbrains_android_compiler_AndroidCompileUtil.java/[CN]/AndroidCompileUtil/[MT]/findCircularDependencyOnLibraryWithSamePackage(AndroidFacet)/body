{
  final Manifest manifest=facet.getManifest();
  final String aPackage=manifest != null ? manifest.getPackage().getValue() : null;
  if (aPackage == null) {
    return null;
  }
  for (  AndroidFacet depFacet : AndroidUtils.getAllAndroidDependencies(facet.getModule(),true)) {
    final Manifest depManifest=depFacet.getManifest();
    final String depPackage=depManifest != null ? depManifest.getPackage().getValue() : null;
    if (aPackage.equals(depPackage)) {
      final List<AndroidFacet> depDependencies=AndroidUtils.getAllAndroidDependencies(depFacet.getModule(),false);
      if (depDependencies.contains(facet)) {
        return depFacet.getModule();
      }
    }
  }
  return null;
}
