{
  final String path=context.getCompileScope().getUserData(AndroidProguardCompiler.PROGUARD_CFG_PATH_KEY);
  if (path != null) {
    final Boolean includeSystemProguardFile=context.getCompileScope().getUserData(AndroidProguardCompiler.INCLUDE_SYSTEM_PROGUARD_FILE);
    return new ProguardRunningOptions(path,Boolean.TRUE.equals(includeSystemProguardFile));
  }
  final AndroidFacetConfiguration configuration=facet.getConfiguration();
  if (configuration.RUN_PROGUARD) {
    final VirtualFile proguardCfgFile=AndroidRootUtil.getProguardCfgFile(facet);
    final String proguardCfgPath=proguardCfgFile != null ? FileUtil.toSystemDependentName(proguardCfgFile.getPath()) : null;
    return new ProguardRunningOptions(proguardCfgPath,configuration.isIncludeSystemProguardCfgPath());
  }
  return null;
}
