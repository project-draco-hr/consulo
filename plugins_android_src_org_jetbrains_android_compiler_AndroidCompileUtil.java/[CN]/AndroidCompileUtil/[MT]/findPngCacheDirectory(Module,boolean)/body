{
  final Project project=module.getProject();
  final CompilerProjectExtension extension=CompilerProjectExtension.getInstance(project);
  if (extension == null) {
    return null;
  }
  final VirtualFile projectOutputDirectory=extension.getCompilerOutput();
  if (projectOutputDirectory == null) {
    return null;
  }
  final String pngCacheDirPath=projectOutputDirectory.getPath() + '/' + PNG_CACHE_DIR_NAME+ '/'+ module.getName();
  final String pngCacheDirOsPath=FileUtil.toSystemDependentName(pngCacheDirPath);
  final File pngCacheDir=new File(pngCacheDirOsPath);
  if (pngCacheDir.exists()) {
    return pngCacheDir.isDirectory() ? pngCacheDirOsPath : null;
  }
  if (!createIfNotFound) {
    return null;
  }
  if (!pngCacheDir.mkdirs()) {
    return null;
  }
  return pngCacheDirOsPath;
}
