{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      if (context.getProject().isDisposed())       return;
      for (      CompilerMessageCategory category : messages.keySet()) {
        List<String> messageList=messages.get(category);
        for (        String message : messageList) {
          String url=null;
          int line=-1;
          Matcher matcher=AndroidCommonUtils.COMPILER_MESSAGE_PATTERN.matcher(message);
          if (matcher.matches()) {
            String fileName=matcher.group(1);
            if (new File(fileName).exists()) {
              url=getPresentableFile("file://" + fileName,presentableFilesMap);
              line=Integer.parseInt(matcher.group(2));
            }
          }
          context.addMessage(category,(module != null ? '[' + module.getName() + "] " : "") + message,url,line,-1);
        }
      }
    }
  }
);
}
