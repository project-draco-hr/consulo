{
  if (isSyncSearch()) {
    THashSet<PsiClass> classes=new THashSet<PsiClass>();
    boolean isJUnit4=ConfigurationUtil.findAllTestClasses(classFilter,classes);
    callback.found(classes,isJUnit4);
    return;
  }
  final THashSet<PsiClass> classes=new THashSet<PsiClass>();
  final boolean[] isJunit4=new boolean[1];
  ProgressManager.getInstance().run(new Task.Backgroundable(classFilter.getProject(),ExecutionBundle.message("seaching.test.progress.title"),true){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      isJunit4[0]=ConfigurationUtil.findAllTestClasses(classFilter,classes);
    }
    @Override public void onSuccess(){
      callback.found(classes,isJunit4[0]);
    }
    @Override public DumbModeAction getDumbModeAction(){
      return DumbModeAction.WAIT;
    }
  }
);
}
