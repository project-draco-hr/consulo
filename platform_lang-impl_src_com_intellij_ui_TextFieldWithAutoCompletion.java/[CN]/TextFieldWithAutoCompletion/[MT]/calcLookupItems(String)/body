{
  final List<LookupElement> items=new ArrayList<LookupElement>();
  if (prefix == null || prefix.length() == 0) {
    for (    LookupElement variant : myVariants) {
      items.add(variant);
    }
  }
 else {
    final NameUtil.Matcher matcher=NameUtil.buildMatcher(prefix,0,true,true);
    for (    LookupElement variant : myVariants) {
      if (matcher.matches(variant.getLookupString())) {
        items.add(variant);
      }
    }
  }
  Collections.sort(items,new Comparator<LookupElement>(){
    public int compare(    final LookupElement item1,    final LookupElement item2){
      return item1.getLookupString().compareTo(item2.getLookupString());
    }
  }
);
  return items.toArray(new LookupElement[items.size()]);
}
