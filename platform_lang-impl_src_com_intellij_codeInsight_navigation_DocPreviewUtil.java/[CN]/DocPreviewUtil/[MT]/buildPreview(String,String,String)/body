{
  if (fullText == null) {
    return header;
  }
  Map<String,String> links=new HashMap<String,String>();
  process(fullText,new LinksCollector(links));
  if (qName != null) {
    links.put(qName,DocumentationManager.PSI_ELEMENT_PROTOCOL + qName);
  }
  String result=header.replace("\n","<br/>");
  for (  Map.Entry<String,String> entry : links.entrySet()) {
    String visibleName=entry.getKey();
    int i=visibleName.lastIndexOf('.');
    if (i > 0 && i < visibleName.length() - 1) {
      visibleName=visibleName.substring(i + 1);
    }
    result=result.replace(entry.getKey(),String.format("<a href=\"%s\">%s</a>",entry.getValue(),visibleName));
  }
  return result;
}
