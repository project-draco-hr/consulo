{
  byte da=decodeTable[a];
  byte db=decodeTable[b];
  byte dc=decodeTable[c];
  byte dd=decodeTable[d];
  if ((da == -1) || (db == -1) || ((dc == -1) && (c != '='))|| ((dd == -1) && (d != '='))) {
    throw new IllegalArgumentException("Invalid character [" + (a & 0xFF) + ", "+ (b & 0xFF)+ ", "+ (c & 0xFF)+ ", "+ (d & 0xFF)+ "]");
  }
  output[outIndex++]=(byte)((da << 2) | db >>> 4);
  if (c == '=') {
    return 1;
  }
  output[outIndex++]=(byte)((db << 4) | dc >>> 2);
  if (d == '=') {
    return 2;
  }
  output[outIndex]=(byte)((dc << 6) | dd);
  return 3;
}
