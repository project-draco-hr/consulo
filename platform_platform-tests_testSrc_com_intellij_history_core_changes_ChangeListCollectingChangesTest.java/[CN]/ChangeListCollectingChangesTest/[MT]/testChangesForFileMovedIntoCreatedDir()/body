{
  add(facade,createDirectory(r,"dir1"));
  ChangeSet cs1=addChangeSet(facade,createFile(r,"dir1/file"));
  ChangeSet cs2=addChangeSet(facade,createDirectory(r,"dir2"));
  ChangeSet cs3=addChangeSet(facade,new MoveChange(nextId(),"dir2/file","dir1"));
  assertEquals(array(cs3,cs1),getChangesFor("dir2/file"));
  assertEquals(array(cs3,cs2),getChangesFor("dir2"));
}
