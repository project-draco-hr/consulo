{
  try {
    @Nullable final PsiMethod psiMethod;
    if (element == null) {
      LOG.assertTrue(refMethod != null);
      psiMethod=(PsiMethod)refMethod.getElement();
    }
 else {
      psiMethod=(PsiMethod)element;
    }
    if (psiMethod == null)     return;
    final Project project=psiMethod.getProject();
    final PsiManager psiManager=PsiManager.getInstance(project);
    final List<PsiJavaCodeReferenceElement> refsToDelete=new ArrayList<PsiJavaCodeReferenceElement>();
    for (    CommonProblemDescriptor problem : problems) {
      final PsiElement psiElement=((ProblemDescriptor)problem).getPsiElement();
      if (psiElement instanceof PsiJavaCodeReferenceElement) {
        final PsiJavaCodeReferenceElement classRef=(PsiJavaCodeReferenceElement)psiElement;
        final PsiType psiType=JavaPsiFacade.getInstance(psiManager.getProject()).getElementFactory().createType(classRef);
        removeException(refMethod,psiType,refsToDelete,psiMethod);
      }
 else {
        final PsiReferenceList throwsList=psiMethod.getThrowsList();
        final PsiClassType[] classTypes=throwsList.getReferencedTypes();
        for (        PsiClassType classType : classTypes) {
          final String text=classType.getClassName();
          if (Comparing.strEqual(myHint,text)) {
            removeException(refMethod,classType,refsToDelete,psiMethod);
            break;
          }
        }
      }
    }
    for (    final PsiJavaCodeReferenceElement aRefsToDelete : refsToDelete) {
      aRefsToDelete.delete();
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
