{
  if (highlightElement == null)   highlightElement=expression;
  final GrReferenceExpression referenceExpression=(GrReferenceExpression)expression;
  if (GroovyTokenTypes.mDOT.equals(referenceExpression.getDotTokenType())) {
    final GrExpression qualifier=referenceExpression.getQualifierExpression();
    if (qualifier instanceof GrMethodCallExpression) {
      final GrExpression expression1=((GrMethodCallExpression)qualifier).getInvokedExpression();
      if (!(expression1 instanceof GrReferenceExpression))       return;
      if (GroovyTokenTypes.mOPTIONAL_DOT.equals(((GrReferenceExpression)expression1).getDotTokenType())) {
        holder.registerProblem(highlightElement,GroovyInspectionBundle.message("call.can.throw.npe"),new SecondUnsafeCallQuickFix());
      }
    }
 else     if (qualifier instanceof GrReferenceExpression) {
      if (GroovyTokenTypes.mOPTIONAL_DOT.equals(((GrReferenceExpression)qualifier).getDotTokenType())) {
        holder.registerProblem(highlightElement,GroovyInspectionBundle.message("call.can.throw.npe"),new SecondUnsafeCallQuickFix());
      }
    }
  }
}
