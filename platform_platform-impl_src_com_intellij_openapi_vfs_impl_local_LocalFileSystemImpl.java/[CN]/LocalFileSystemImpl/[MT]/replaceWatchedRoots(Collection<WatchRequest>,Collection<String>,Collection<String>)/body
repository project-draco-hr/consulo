{
  recursiveRoots=ObjectUtils.notNull(recursiveRoots,Collections.emptyList());
  flatRoots=ObjectUtils.notNull(flatRoots,Collections.emptyList());
  Set<WatchRequest> result=new HashSet<>();
synchronized (myLock) {
    boolean update=doAddRootsToWatch(recursiveRoots,flatRoots,result) | doRemoveWatchedRoots(watchRequests);
    if (update) {
      myNormalizedTree=null;
      setUpFileWatcher();
    }
  }
  return result;
}
