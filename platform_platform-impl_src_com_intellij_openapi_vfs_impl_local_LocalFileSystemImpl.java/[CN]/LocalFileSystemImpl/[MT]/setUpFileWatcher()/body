{
  final Application application=ApplicationManager.getApplication();
  if (application.isDisposeInProgress() || !myWatcher.isOperational())   return;
  final AccessToken token=application.acquireReadActionLock();
  try {
synchronized (myLock) {
      final WatchRequestImpl[] watchRequests=normalizeRootsForRefresh();
      final List<String> myRecursiveRoots=new ArrayList<String>();
      final List<String> myFlatRoots=new ArrayList<String>();
      for (      WatchRequestImpl watchRequest : watchRequests) {
        if (watchRequest.isToWatchRecursively()) {
          myRecursiveRoots.add(watchRequest.myFSRootPath);
        }
 else {
          myFlatRoots.add(watchRequest.myFSRootPath);
        }
      }
      myWatcher.setWatchRoots(myRecursiveRoots,myFlatRoots);
    }
  }
  finally {
    token.finish();
  }
}
