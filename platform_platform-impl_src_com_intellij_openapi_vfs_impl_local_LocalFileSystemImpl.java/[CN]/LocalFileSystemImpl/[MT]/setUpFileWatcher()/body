{
  final Application application=ApplicationManager.getApplication();
  if (application.isDisposeInProgress() || !myWatcher.isOperational())   return;
  application.runReadAction(new Runnable(){
    public void run(){
synchronized (myLock) {
        final WatchRequestImpl[] watchRequests=normalizeRootsForRefresh();
        final List<String> myRecursiveRoots=new ArrayList<String>();
        final List<String> myFlatRoots=new ArrayList<String>();
        for (        WatchRequestImpl watchRequest : watchRequests) {
          if (watchRequest.isToWatchRecursively()) {
            myRecursiveRoots.add(watchRequest.myFSRootPath);
          }
 else {
            myFlatRoots.add(watchRequest.myFSRootPath);
          }
        }
        myWatcher.setWatchRoots(myRecursiveRoots,myFlatRoots);
      }
    }
  }
);
}
