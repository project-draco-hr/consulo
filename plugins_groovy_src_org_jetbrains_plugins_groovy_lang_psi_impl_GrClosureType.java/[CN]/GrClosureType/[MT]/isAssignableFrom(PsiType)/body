{
  if (type instanceof GrClosureType) {
    GrClosureType other=(GrClosureType)type;
    GrClosureSignature otherSignature=other.mySignature;
    final PsiType myReturnType=mySignature.getReturnType();
    final PsiType otherReturnType=otherSignature.getReturnType();
    if (myReturnType == null || otherReturnType == null) {
      return myReturnType == null && otherReturnType == null;
    }
    if (!myReturnType.isAssignableFrom(otherReturnType))     return false;
    final GrClosureParameter[] myParameters=mySignature.getParameters();
    final GrClosureParameter[] otherParameters=otherSignature.getParameters();
    if (myParameters.length != otherParameters.length)     return false;
    for (int i=0; i < myParameters.length; i++) {
      if (myParameters[i].isOptional() != otherParameters[i].isOptional())       return false;
      final PsiType otherParamType=otherParameters[i].getType();
      final PsiType myParamType=myParameters[i].getType();
      if (myParamType == null || otherParamType == null) {
        if (myParamType != null || otherParamType != null)         return false;
      }
 else       if (!otherParamType.isAssignableFrom(myParamType))       return false;
    }
    return true;
  }
  return super.isAssignableFrom(type);
}
