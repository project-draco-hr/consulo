{
  final XmlNSDescriptor nsDescriptor=getNSDescriptor();
  if (nsDescriptor != null) {
    final ReferenceProvidersRegistry registry=ReferenceProvidersRegistry.getInstance(myElementDecl.getProject());
    final List<XmlToken> refs=new ArrayList<XmlToken>(1);
    final PsiElementProcessor psiElementProcessor=new PsiElementProcessor(){
      public boolean execute(      PsiElement child){
        if (child instanceof XmlToken) {
          final XmlToken token=(XmlToken)child;
          if (token.getTokenType() == XmlTokenType.XML_NAME) {
            final String text=child.getText();
            if (text.equals(getName())) {
              refs.add(token);
            }
          }
        }
        return true;
      }
    }
;
    XmlUtil.processXmlElements((XmlElement)nsDescriptor.getDeclaration().getContainingFile(),psiElementProcessor,true);
    try {
      for (      XmlToken token : refs) {
        registry.getManipulator(token).handleContentChange(token,new TextRange(0,token.getTextLength()),name);
      }
    }
 catch (    IncorrectOperationException e) {
    }
  }
  myName=name;
}
