{
  final PsiFile file=myElementDecl.getContainingFile();
  if (!(file instanceof XmlFile))   return null;
  final XmlDocument document=((XmlFile)file).getDocument();
  XmlNSDescriptor descriptor=(XmlNSDescriptor)document.getMetaData();
  if (descriptor == null) {
    final XmlDoctype doctype=document.getProlog().getDoctype();
    if (doctype != null) {
      if (doctype.getMarkupDecl() != null) {
        descriptor=(XmlNSDescriptor)doctype.getMarkupDecl().getMetaData();
      }
    }
  }
  return descriptor;
}
