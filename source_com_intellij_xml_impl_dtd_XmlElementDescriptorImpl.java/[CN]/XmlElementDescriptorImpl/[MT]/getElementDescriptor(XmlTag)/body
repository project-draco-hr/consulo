{
  HashMap<String,XmlElementDescriptor> elementDescriptorsMap=myElementDescriptorsMap;
  if (elementDescriptorsMap == null) {
synchronized (PsiLock.LOCK) {
      elementDescriptorsMap=myElementDescriptorsMap;
      if (elementDescriptorsMap == null) {
        final XmlElementDescriptor[] descriptors=getElementsDescriptors(element);
        elementDescriptorsMap=new HashMap<String,XmlElementDescriptor>(descriptors.length);
        for (        final XmlElementDescriptor descriptor : descriptors) {
          elementDescriptorsMap.put(descriptor.getName(),descriptor);
        }
        myElementDescriptorsMap=elementDescriptorsMap;
      }
    }
  }
  return elementDescriptorsMap.get(element.getName());
}
