{
  if (myElementDescriptors != null)   return myElementDescriptors;
  final List<XmlElementDescriptor> result=new ArrayList<XmlElementDescriptor>();
  final XmlElementContentSpec contentSpecElement=myElementDecl.getContentSpecElement();
  final XmlNSDescriptor NSDescriptor=getNSDescriptor();
  contentSpecElement.processElements(new PsiElementProcessor(){
    public boolean execute(    PsiElement child){
      if (child instanceof XmlToken) {
        final XmlToken token=(XmlToken)child;
        if (token.getTokenType() == XmlTokenType.XML_NAME) {
          final String text=child.getText();
          XmlElementDescriptor element=null;
          if (NSDescriptor instanceof XmlNSDescriptorImpl) {
            element=((XmlNSDescriptorImpl)NSDescriptor).getElementDescriptor(text);
          }
 else           if (NSDescriptor instanceof XmlNSDescriptorSequence) {
            final List<XmlNSDescriptor> sequence=((XmlNSDescriptorSequence)NSDescriptor).getSequence();
            for (            XmlNSDescriptor xmlNSDescriptor : sequence) {
              if (xmlNSDescriptor instanceof XmlNSDescriptorImpl) {
                element=((XmlNSDescriptorImpl)xmlNSDescriptor).getElementDescriptor(text);
                if (element != null)                 break;
              }
            }
          }
 else {
            element=null;
          }
          if (element != null) {
            result.add(element);
          }
        }
 else         if (token.getTokenType() == XmlTokenType.XML_CONTENT_ANY) {
          XmlElementDescriptor[] elements=((XmlNSDescriptorImpl)NSDescriptor).getElements();
          result.addAll(Arrays.asList(elements));
        }
      }
      return true;
    }
  }
,getDeclaration());
  return myElementDescriptors=result.toArray(new XmlElementDescriptor[result.size()]);
}
