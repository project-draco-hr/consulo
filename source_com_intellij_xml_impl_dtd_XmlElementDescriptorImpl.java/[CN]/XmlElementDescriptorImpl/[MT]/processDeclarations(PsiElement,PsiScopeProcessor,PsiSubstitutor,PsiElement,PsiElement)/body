{
  final ElementClassHint hint=processor.getHint(ElementClassHint.class);
  final XmlTag tag=(XmlTag)context;
  final PsiMetaData meta=tag.getMetaData();
  if (meta == null) {
    return true;
  }
  if (hint == null || hint.shouldProcess(XmlAttributeDecl.class)) {
    final XmlAttlistDecl[] decls=getAttlistDecls();
    for (int i=0; i < decls.length; i++) {
      if (decls[i].getNameElement() != null && decls[i].getNameElement().getText().equals(meta.getName())) {
        final XmlAttributeDecl[] attributes=decls[i].getAttributeDecls();
        for (int j=0; j < attributes.length; j++) {
          if (!processor.execute(attributes[j],substitutor))           return false;
        }
      }
    }
  }
  if (hint == null || hint.shouldProcess(XmlElementDecl.class)) {
    final XmlElementDescriptor[] decls=getElementsDescriptors(tag);
    for (int i=0; i < decls.length; i++) {
      final XmlElementDescriptor decl=decls[i];
      if (!processor.execute(decl.getDeclaration(),substitutor))       return false;
    }
  }
  return true;
}
