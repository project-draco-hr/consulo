{
  XmlToken xmlToken=((XmlToken)element);
  String oldText=xmlToken.getText();
  String newText=oldText.substring(0,range.getStartOffset()) + newContent + oldText.substring(range.getEndOffset());
  IElementType tokenType=xmlToken.getTokenType();
  char[] buffer=newText.toCharArray();
  FileElement holder=new DummyHolder(element.getManager(),null).getTreeElement();
  LeafElement leaf=Factory.createLeafElement(tokenType,buffer,0,buffer.length,-1,holder.getCharTable());
  TreeUtil.addChildren(holder,leaf);
  return xmlToken.getParent().replace(leaf.getPsi());
}
