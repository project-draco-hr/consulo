{
  final List<String> commandLine=new ArrayList<String>();
  final VirtualFile homeDirectory=jdk.getHomeDirectory();
  if (homeDirectory == null) {
    throw new IllegalArgumentException(CompilerBundle.message("javac.error.jdk.home.missing",jdk.getName()));
  }
  commandLine.add(jdk.getVMExecutablePath());
  CompilerUtil.addLocaleOptions(commandLine,false);
  commandLine.add("-classpath");
  commandLine.add(jdk.getToolsPath() + File.pathSeparator + PathUtilEx.getIdeaRtJarPath());
  commandLine.add(JavacResourcesReader.class.getName());
  return commandLine.toArray(new String[commandLine.size()]);
}
