{
  if (file instanceof NewVirtualFile && file.isValid()) {
    Timestamps timestamps=myTimestampsCache.get(file);
    if (timestamps == null) {
synchronized (myTimestampsCache) {
        timestamps=myTimestampsCache.get(file);
        if (timestamps == null) {
          final DataInputStream stream=Timestamps.PERSISTENCE.readAttribute(file);
          try {
            timestamps=new Timestamps(stream);
          }
 catch (          IOException e) {
            throw new RuntimeException(e);
          }
          myTimestampsCache.put(file,timestamps);
        }
      }
    }
    return timestamps;
  }
  return null;
}
