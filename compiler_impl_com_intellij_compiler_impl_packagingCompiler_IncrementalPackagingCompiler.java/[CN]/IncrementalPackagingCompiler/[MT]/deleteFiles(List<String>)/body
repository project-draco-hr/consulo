{
  final THashSet<String> deletedJars=new THashSet<String>();
  LOG.debug("Deleting outdated files...");
  List<File> filesToRefresh=new ArrayList<File>();
  for (  String fullPath : paths) {
    int end=fullPath.indexOf(JarFileSystem.JAR_SEPARATOR);
    String filePath=end != -1 ? fullPath.substring(0,end) : fullPath;
    if (end != -1) {
      deletedJars.add(filePath);
    }
    File file=new File(FileUtil.toSystemDependentName(filePath));
    filesToRefresh.add(file);
    boolean deleted=FileUtil.delete(file);
    if (!deleted && LOG.isDebugEnabled()) {
      LOG.debug("Cannot delete file " + file);
    }
    if (deleted) {
      getOutputItemsCache().remove(fullPath);
    }
  }
  CompilerUtil.refreshIOFiles(filesToRefresh);
  return deletedJars;
}
