{
  final Project projectToUpdate=updateCurrent ? currentProject : ProjectManagerEx.getInstanceEx().newProject(myNewProjectFilePath,true,false);
  if (!beforeProjectOpen(currentProject,projectToUpdate)) {
    return null;
  }
  if (!updateCurrent) {
    setProjectParameters(projectToUpdate);
    ProjectUtil.closePreviousProject(currentProject);
    ProjectUtil.updateLastProjectLocation(myNewProjectFilePath);
    ProjectManagerEx.getInstanceEx().openProject(projectToUpdate);
  }
  afterProjectOpen(projectToUpdate);
  return projectToUpdate;
}
