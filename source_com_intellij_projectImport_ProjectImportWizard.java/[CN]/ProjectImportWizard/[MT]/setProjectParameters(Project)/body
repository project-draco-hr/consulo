{
  final ProjectRootManagerEx rootManager=ProjectRootManagerEx.getInstanceEx(project);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      if (myNewProjectJdk != null) {
        final String versionString=myNewProjectJdk.getVersionString();
        if (versionString != null) {
          rootManager.setProjectJdk(myNewProjectJdk);
          rootManager.setLanguageLevel(ProjectUtil.getDefaultLanguageLevel(versionString));
        }
      }
      if (myNewCompileOutput != null) {
        rootManager.setCompilerOutputUrl(getUrl(myNewCompileOutput));
      }
    }
  }
);
}
