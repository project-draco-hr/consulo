{
  final Object o=getSelectedObject();
  if (o instanceof SdkImpl) {
    final SdkImpl selected=(SdkImpl)o;
    String defaultNewName=SdkConfigurationUtil.createUniqueSdkName(selected.getName(),mySdksTreeModel.getSdks());
    final String newName=Messages.showInputDialog("Enter bundle name:","Copy Bundle",null,defaultNewName,new NonEmptyInputValidator(){
      @Override public boolean checkInput(      String inputString){
        return super.checkInput(inputString) && mySdksTreeModel.findSdk(inputString) == null;
      }
    }
);
    if (newName == null)     return;
    SdkImpl sdk=(SdkImpl)selected.clone();
    sdk.setName(newName);
    sdk.setBundled(false);
    mySdksTreeModel.doAdd(sdk,new Consumer<Sdk>(){
      @Override public void consume(      Sdk sdk){
        addSdkNode(sdk,true);
      }
    }
);
  }
}
