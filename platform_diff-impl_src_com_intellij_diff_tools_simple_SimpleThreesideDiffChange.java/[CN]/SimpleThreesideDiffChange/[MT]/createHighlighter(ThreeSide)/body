{
  Editor editor=side.select(myEditors);
  Document document=editor.getDocument();
  TextDiffType type=getDiffType();
  int startLine=myFragment.getStartLine(side);
  int endLine=myFragment.getEndLine(side);
  int start;
  int end;
  if (startLine == endLine) {
    start=end=startLine < DiffUtil.getLineCount(document) ? document.getLineStartOffset(startLine) : document.getTextLength();
  }
 else {
    start=document.getLineStartOffset(startLine);
    end=document.getLineEndOffset(endLine - 1);
    if (end < document.getTextLength())     end++;
  }
  myHighlighters.addAll(DiffDrawUtil.createHighlighter(editor,start,end,type));
  if (startLine == endLine) {
    if (startLine != 0)     myHighlighters.addAll(DiffDrawUtil.createLineMarker(editor,endLine - 1,type,SeparatorPlacement.BOTTOM,true));
  }
 else {
    myHighlighters.addAll(DiffDrawUtil.createLineMarker(editor,startLine,type,SeparatorPlacement.TOP));
    myHighlighters.addAll(DiffDrawUtil.createLineMarker(editor,endLine - 1,type,SeparatorPlacement.BOTTOM));
  }
}
