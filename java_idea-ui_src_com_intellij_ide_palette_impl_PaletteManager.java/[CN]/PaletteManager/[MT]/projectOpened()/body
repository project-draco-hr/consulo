{
  if (!ApplicationManager.getApplication().isHeadlessEnvironment()) {
    StartupManager.getInstance(myProject).registerPostStartupActivity(new Runnable(){
      public void run(){
        myPaletteWindow=new PaletteWindow(myProject);
        myPaletteToolWindow=ToolWindowManager.getInstance(myProject).registerToolWindow(IdeBundle.message("toolwindow.palette"),myPaletteWindow,ToolWindowAnchor.RIGHT,myProject,true);
        myPaletteToolWindow.setIcon(IconLoader.getIcon("/general/toolWindowPalette.png"));
        setContent();
        final MyFileEditorManagerListener myListener=new MyFileEditorManagerListener();
        myFileEditorManager.addFileEditorManagerListener(myListener,myProject);
      }
    }
);
  }
}
