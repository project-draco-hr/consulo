{
  if (isCanceled() && isCancelable()) {
    throw new ProcessCanceledException();
  }
  if (CoreProgressManager.sleepIfNeeded()) {
    if (isCanceled() && isCancelable()) {
      throw new ProcessCanceledException();
    }
  }
}
