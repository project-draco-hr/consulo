{
  final JavaFxExpression rightOperand=getRightOperand();
  if (rightOperand != null) {
    final JavaFxExpression leftOperand=getLeftOperand();
    final IElementType operator=getOperator();
    final PsiType leftOperandType=leftOperand.getType();
    final PsiType rightOperandType=rightOperand.getType();
    if (leftOperandType instanceof JavaFxPrimitiveType && rightOperandType instanceof JavaFxPrimitiveType) {
      if (operator == JavaFxTokenTypes.AND_KEYWORD || operator == JavaFxTokenTypes.OR_KEYWORD) {
        return JavaFxPrimitiveType.BOOLEAN;
      }
      if (JavaFxTokenTypes.RELATIONAL_OPERATORS.contains(operator)) {
        return JavaFxPrimitiveType.BOOLEAN;
      }
      if (operator == JavaFxTokenTypes.MOD_KEYWORD) {
        return JavaFxPrimitiveType.INTEGER;
      }
      if (operator == JavaFxTokenTypes.PLUS || operator == JavaFxTokenTypes.MINUS) {
        if (leftOperandType == JavaFxPrimitiveType.NUMBER || rightOperandType == JavaFxPrimitiveType.NUMBER) {
          return JavaFxPrimitiveType.NUMBER;
        }
        if (leftOperandType == JavaFxPrimitiveType.DURATION || rightOperandType == JavaFxPrimitiveType.DURATION) {
          return JavaFxPrimitiveType.DURATION;
        }
        return JavaFxPrimitiveType.INTEGER;
      }
      if (operator == JavaFxTokenTypes.MULT) {
        if (leftOperandType == JavaFxPrimitiveType.DURATION || rightOperandType == JavaFxPrimitiveType.DURATION) {
          return JavaFxPrimitiveType.DURATION;
        }
        if (leftOperandType == JavaFxPrimitiveType.NUMBER || rightOperandType == JavaFxPrimitiveType.NUMBER) {
          return JavaFxPrimitiveType.NUMBER;
        }
        return JavaFxPrimitiveType.INTEGER;
      }
      if (operator == JavaFxTokenTypes.DIV) {
        if (leftOperandType == JavaFxPrimitiveType.DURATION || rightOperandType == JavaFxPrimitiveType.DURATION) {
          if (leftOperandType == rightOperandType) {
            return JavaFxPrimitiveType.NUMBER;
          }
          return JavaFxPrimitiveType.DURATION;
        }
        if (leftOperandType == JavaFxPrimitiveType.NUMBER || rightOperandType == JavaFxPrimitiveType.NUMBER) {
          return JavaFxPrimitiveType.NUMBER;
        }
        return JavaFxPrimitiveType.INTEGER;
      }
    }
 else     if (operator == JavaFxTokenTypes.EQEQ || operator == JavaFxTokenTypes.NOTEQ) {
      return JavaFxPrimitiveType.BOOLEAN;
    }
  }
  return null;
}
