{
  mySelectedExpr=selectedExpr;
  mySettings=settings;
  myAnchorElement=settings.isReplaceAll() ? anchorStatementIfAll : anchorElementIfOne;
  myProject=selectedExpr.getProject();
  myFieldName=settings.getFieldName();
  myType=type;
  myOccurrences=occurrences;
  myReplaceAll=settings.isReplaceAll();
  myOccurrenceManager=occurrenceManager;
  myAnchorStatementIfAll=anchorStatementIfAll;
  myAnchorElementIfOne=anchorElementIfOne;
  myOutOfCodeBlockExtraction=selectedExpr.getUserData(ElementToWorkOn.OUT_OF_CODE_BLOCK);
  myDeleteSelf=myOutOfCodeBlockExtraction != null;
  myElement=getPhysicalElement(selectedExpr);
  if (myElement.getParent() instanceof PsiExpressionStatement && getNormalizedAnchor(myAnchorElement).equals(myAnchorElement) && selectedExpr.isPhysical()) {
    PsiStatement statement=(PsiStatement)myElement.getParent();
    if (statement.getParent() instanceof PsiCodeBlock) {
      myDeleteSelf=true;
    }
  }
  myEditor=editor;
  myParentClass=parentClass;
}
