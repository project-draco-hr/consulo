{
  String path=getPath();
  if (!StringUtil.isEmptyOrSpaces(extraArtifactClassifier)) {
    int repoEnd=path.lastIndexOf(getRelativePath());
    if (repoEnd == -1) {
      int dotPos=path.lastIndexOf(".");
      if (dotPos != -1) {
        String withoutExtension=path.substring(0,dotPos);
        path=MessageFormat.format("{0}-{1}.{2}",withoutExtension,extraArtifactClassifier,customExtension == null ? myExtension : customExtension);
      }
    }
 else {
      String repoPath=path.substring(0,repoEnd);
      path=repoPath + getRelativePathForExtraArtifact(extraArtifactClassifier,customExtension);
    }
  }
  return VirtualFileManager.constructUrl(JarFileSystem.PROTOCOL,path) + JarFileSystem.JAR_SEPARATOR;
}
