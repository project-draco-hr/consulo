{
  if (newName == null || newName.length() == 0) {
    return false;
  }
  final Condition<String> inputValidator=RenameInputValidatorRegistry.getInstance().getInputValidator(psiElement);
  if (inputValidator != null) {
    return inputValidator.value(newName);
  }
  if (psiElement instanceof PsiFile || psiElement instanceof PsiDirectory) {
    return newName.indexOf(File.separatorChar) < 0 && newName.indexOf('/') < 0;
  }
  if (psiElement instanceof XmlTag || psiElement instanceof XmlAttribute || psiElement instanceof XmlElementDecl|| psiElement instanceof XmlAttributeDecl) {
    return newName.trim().matches("([\\d\\w\\_\\.\\-]+:)?[\\d\\w\\_\\.\\-]+");
  }
  if (psiElement instanceof XmlAttributeValue) {
    return true;
  }
  if (psiElement instanceof Property) {
    return true;
  }
  PsiFile f=psiElement.getContainingFile();
  Language language=f == null ? null : f.getLanguageDialect();
  if (language == null)   language=psiElement.getLanguage();
  return language.getNamesValidator().isIdentifier(newName.trim(),project);
}
