{
  if (element instanceof PsiDirectory) {
    final PsiPackage aPackage=((PsiDirectory)element).getPackage();
    if (aPackage != null)     element=aPackage;
  }
  if (element instanceof PsiPackage) {
    return nonJava ? ((PsiPackage)element).getQualifiedName() : ((PsiPackage)element).getName();
  }
 else   if (element instanceof PsiClass) {
    return nonJava ? ((PsiClass)element).getQualifiedName() : ((PsiClass)element).getName();
  }
 else   if (element instanceof XmlTag) {
    return ((XmlTag)element).getValue().getTrimmedText();
  }
 else   if (element instanceof XmlAttribute) {
    return ((XmlAttribute)element).getValue();
  }
 else   if (element instanceof PsiNamedElement) {
    return ((PsiNamedElement)element).getName();
  }
 else {
    LOG.error("Unknown element type");
    return null;
  }
}
