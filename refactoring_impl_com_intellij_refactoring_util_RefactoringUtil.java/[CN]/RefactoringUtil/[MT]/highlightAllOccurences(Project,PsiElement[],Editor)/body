{
  ArrayList<RangeHighlighter> highlighters=new ArrayList<RangeHighlighter>();
  HighlightManager highlightManager=HighlightManager.getInstance(project);
  EditorColorsManager colorsManager=EditorColorsManager.getInstance();
  TextAttributes attributes=colorsManager.getGlobalScheme().getAttributes(EditorColors.SEARCH_RESULT_ATTRIBUTES);
  if (occurences.length > 1) {
    for (    PsiElement occurrence : occurences) {
      final RangeMarker rangeMarker=occurrence.getUserData(ElementToWorkOn.TEXT_RANGE);
      if (rangeMarker != null) {
        highlightManager.addRangeHighlight(editor,rangeMarker.getStartOffset(),rangeMarker.getEndOffset(),attributes,true,highlighters);
      }
 else {
        final TextRange textRange=occurrence.getTextRange();
        highlightManager.addRangeHighlight(editor,textRange.getStartOffset(),textRange.getEndOffset(),attributes,true,highlighters);
      }
    }
  }
  return highlighters;
}
