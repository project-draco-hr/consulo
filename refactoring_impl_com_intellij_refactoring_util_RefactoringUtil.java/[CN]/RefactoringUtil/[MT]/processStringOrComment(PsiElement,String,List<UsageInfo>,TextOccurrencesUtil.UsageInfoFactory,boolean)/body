{
  String elementText=element.getText();
  for (int index=0; index < elementText.length(); index++) {
    index=elementText.indexOf(stringToSearch,index);
    if (index < 0)     break;
    final PsiReference referenceAt=element.findReferenceAt(index);
    if (!ignoreReferences && referenceAt != null && referenceAt.resolve() != null)     continue;
    if (index > 0) {
      char c=elementText.charAt(index - 1);
      if (Character.isJavaIdentifierPart(c) && c != '$') {
        if (index < 2 || elementText.charAt(index - 2) != '\\')         continue;
      }
    }
    if (index + stringToSearch.length() < elementText.length()) {
      char c=elementText.charAt(index + stringToSearch.length());
      if (Character.isJavaIdentifierPart(c) && c != '$') {
        continue;
      }
    }
    UsageInfo usageInfo=factory.createUsageInfo(element,index,index + stringToSearch.length());
    if (usageInfo != null) {
      results.add(usageInfo);
    }
    index+=stringToSearch.length();
  }
}
