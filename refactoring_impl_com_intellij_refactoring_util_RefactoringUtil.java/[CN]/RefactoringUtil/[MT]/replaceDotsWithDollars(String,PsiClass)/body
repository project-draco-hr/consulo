{
  StringBuilder qNameBuffer=new StringBuilder(qName);
  int fromIndex=qNameBuffer.length();
  PsiElement parent=aClass.getParent();
  while (parent instanceof PsiClass) {
    final int dotIndex=qNameBuffer.lastIndexOf(".",fromIndex);
    if (dotIndex < 0)     break;
    qNameBuffer.replace(dotIndex,dotIndex + 1,"$");
    fromIndex=dotIndex - 1;
    parent=parent.getParent();
  }
  return qNameBuffer.toString();
}
