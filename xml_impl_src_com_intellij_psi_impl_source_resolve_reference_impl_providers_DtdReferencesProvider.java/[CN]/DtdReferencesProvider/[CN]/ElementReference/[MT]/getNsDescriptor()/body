{
  final XmlElement parentThatProvidesMetaData=PsiTreeUtil.getParentOfType(PsiUtil.getOriginalElement(myElement,(Class<XmlElement>)myElement.getClass()),XmlDocument.class,XmlMarkupDecl.class);
  if (parentThatProvidesMetaData instanceof XmlDocument) {
    final XmlDocument document=(XmlDocument)parentThatProvidesMetaData;
    XmlNSDescriptor rootTagNSDescriptor=document.getRootTagNSDescriptor();
    if (rootTagNSDescriptor == null)     rootTagNSDescriptor=(XmlNSDescriptor)document.getMetaData();
    return rootTagNSDescriptor;
  }
 else   if (parentThatProvidesMetaData instanceof XmlMarkupDecl) {
    final XmlMarkupDecl markupDecl=(XmlMarkupDecl)parentThatProvidesMetaData;
    final PsiMetaData psiMetaData=markupDecl.getMetaData();
    if (psiMetaData instanceof XmlNSDescriptor) {
      return (XmlNSDescriptor)psiMetaData;
    }
  }
  return null;
}
