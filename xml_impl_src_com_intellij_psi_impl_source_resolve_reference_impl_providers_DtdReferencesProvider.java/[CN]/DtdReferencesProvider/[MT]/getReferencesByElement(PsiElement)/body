{
  XmlElement nameElement=null;
  if (element instanceof XmlDoctype) {
    nameElement=((XmlDoctype)element).getNameElement();
  }
 else   if (element instanceof XmlElementDecl) {
    nameElement=((XmlElementDecl)element).getNameElement();
  }
 else   if (element instanceof XmlAttlistDecl) {
    nameElement=((XmlAttlistDecl)element).getNameElement();
  }
 else   if (element instanceof XmlElementContentSpec) {
    final PsiElement[] children=element.getChildren();
    final List<PsiReference> psiRefs=new ArrayList<PsiReference>(children.length);
    for (    final PsiElement child : children) {
      if (child instanceof XmlToken && ((XmlToken)child).getTokenType() == XmlTokenType.XML_NAME) {
        psiRefs.add(new ElementReference((XmlElement)element,(XmlElement)child));
      }
    }
    return psiRefs.toArray(new PsiReference[psiRefs.size()]);
  }
  if (nameElement != null) {
    return new PsiReference[]{new ElementReference((XmlElement)element,nameElement)};
  }
  if (element instanceof XmlEntityRef) {
    element=element.getLastChild();
  }
  if (element instanceof XmlToken && ((XmlToken)element).getTokenType() == XmlTokenType.XML_CHAR_ENTITY_REF) {
    return new PsiReference[]{new EntityReference(element)};
  }
  return PsiReference.EMPTY_ARRAY;
}
