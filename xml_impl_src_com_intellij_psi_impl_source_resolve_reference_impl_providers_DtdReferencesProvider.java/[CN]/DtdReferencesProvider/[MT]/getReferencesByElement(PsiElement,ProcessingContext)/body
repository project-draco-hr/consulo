{
  XmlElement nameElement=null;
  if (element instanceof XmlDoctype) {
    nameElement=((XmlDoctype)element).getNameElement();
  }
 else   if (element instanceof XmlElementDecl) {
    nameElement=((XmlElementDecl)element).getNameElement();
  }
 else   if (element instanceof XmlAttlistDecl) {
    nameElement=((XmlAttlistDecl)element).getNameElement();
  }
 else   if (element instanceof XmlElementContentSpec) {
    final List<PsiReference> psiRefs=new ArrayList<PsiReference>();
    element.accept(new PsiRecursiveElementVisitor(){
      @Override public void visitElement(      PsiElement child){
        if (child instanceof XmlToken && ((XmlToken)child).getTokenType() == XmlTokenType.XML_NAME) {
          psiRefs.add(new ElementReference((XmlElement)element,(XmlElement)child));
        }
        super.visitElement(child);
      }
    }
);
    return psiRefs.toArray(new PsiReference[psiRefs.size()]);
  }
  if (nameElement != null) {
    return new PsiReference[]{new ElementReference((XmlElement)element,nameElement)};
  }
  if (element instanceof XmlEntityRef || (element instanceof XmlToken && ((XmlToken)element).getTokenType() == XmlTokenType.XML_CHAR_ENTITY_REF)) {
    return new PsiReference[]{new EntityReference(element)};
  }
  return PsiReference.EMPTY_ARRAY;
}
