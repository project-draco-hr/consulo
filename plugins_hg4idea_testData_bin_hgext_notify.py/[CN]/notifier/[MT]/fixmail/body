def fixmail(self, addr):
    'try to clean up email addresses.'
    addr = util.email(addr.strip())
    if self.domain:
        a = addr.find('@localhost')
        if (a != (-1)):
            addr = addr[:a]
        if ('@' not in addr):
            return ((addr + '@') + self.domain)
    return addr
