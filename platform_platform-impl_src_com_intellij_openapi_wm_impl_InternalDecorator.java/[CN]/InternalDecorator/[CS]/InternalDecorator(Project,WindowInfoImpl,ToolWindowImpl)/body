{
  super(new BorderLayout());
  myProject=project;
  myToolWindow=toolWindow;
  myToolWindow.setDecorator(this);
  myDivider=new MyDivider();
  myTitlePanel=new TitlePanel();
  myTitleTabs=toolWindow.getContentUI().getTabComponent();
  myToggleFloatingModeAction=new ToggleFloatingModeAction();
  myToggleSideModeAction=new ToggleSideModeAction();
  myFloatingDockSeparator=new Separator();
  myFloatingDockSeparator.setBorder(BorderFactory.createEmptyBorder(0,2,0,2));
  myToggleDockModeAction=new ToggleDockModeAction();
  myDockAutoHideSeparator=new Separator();
  myToggleAutoHideModeAction=new TogglePinnedModeAction();
  myAutoHideHideSeparator=new Separator();
  myHideAction=new HideAction();
  HideSideAction hideSideAction=new HideSideAction();
  myToggleContentUiTypeAction=new ToggleContentUiTypeAction();
  myToggleFloatingModeButton=new MyTitleButton(myToggleFloatingModeAction);
  myToggleDockModeButton=new MyTitleButton(myToggleDockModeAction);
  myToggleAutoHideModeButton=new MyTitleButton(myToggleAutoHideModeAction);
  myHideButton=new MyTitleButton(myHideAction);
  myHideSideButton=new MyTitleButton(hideSideAction);
  myListenerList=new EventListenerList();
  MyKeymapManagerListener keymapManagerListener=new MyKeymapManagerListener();
  final KeymapManagerEx keymapManager=KeymapManagerEx.getInstanceEx();
  myWeakKeymapManagerListener=new WeakKeymapManagerListener(keymapManager,keymapManagerListener);
  keymapManager.addKeymapManagerListener(myWeakKeymapManagerListener);
  init();
  myToolWindowHandler=new ToolWindowHandler();
  myToolWindow.addPropertyChangeListener(myToolWindowHandler);
  apply(info);
}
