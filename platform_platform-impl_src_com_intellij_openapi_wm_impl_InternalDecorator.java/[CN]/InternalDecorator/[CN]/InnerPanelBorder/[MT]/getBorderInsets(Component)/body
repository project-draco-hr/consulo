{
  UISettings settings=UISettings.getInstance();
  ToolWindowManagerImpl mgr=((ToolWindowImpl)myWindow).getToolWindowManager();
  if (!mgr.isToolWindowRegistered(((ToolWindowImpl)myWindow).getId()))   return new Insets(0,0,0,0);
  List<String> topIds=mgr.getIdsOn(ToolWindowAnchor.TOP);
  boolean tHasSplitToTheRight=!myWindow.isSplitMode() && hasSplitModeVisible(mgr,topIds,true);
  boolean tHasSplitToTheLeft=myWindow.isSplitMode() && hasSplitModeVisible(mgr,topIds,false);
  List<String> bottomIds=mgr.getIdsOn(ToolWindowAnchor.BOTTOM);
  boolean hasSplitToTheRight=!myWindow.isSplitMode() && hasSplitModeVisible(mgr,bottomIds,true);
  boolean hasSplitToTheLeft=myWindow.isSplitMode() && hasSplitModeVisible(mgr,bottomIds,false);
  List<String> leftIds=mgr.getIdsOn(ToolWindowAnchor.LEFT);
  boolean hasSplitUnderLeft=!myWindow.isSplitMode() && hasSplitModeVisible(mgr,leftIds,true);
  List<String> rightIds=mgr.getIdsOn(ToolWindowAnchor.RIGHT);
  boolean hasSplitUnderRight=!myWindow.isSplitMode() && hasSplitModeVisible(mgr,rightIds,true);
  Insets insets=new Insets(0,0,0,0);
  if (myWindow.getAnchor() == ToolWindowAnchor.TOP) {
    insets.left=tHasSplitToTheLeft ? 1 : 0;
    insets.right=tHasSplitToTheRight ? 1 : 0;
  }
 else   if (myWindow.getAnchor() == ToolWindowAnchor.BOTTOM) {
    insets.left=hasSplitToTheLeft ? 1 : 0;
    insets.right=hasSplitToTheRight ? 1 : 0;
  }
 else   if (myWindow.getAnchor() == ToolWindowAnchor.LEFT) {
    insets.right=1;
    insets.bottom=hasSplitUnderLeft ? 1 : 0;
  }
 else   if (myWindow.getAnchor() == ToolWindowAnchor.RIGHT) {
    insets.left=1;
    insets.bottom=hasSplitUnderRight ? 1 : 0;
  }
  return insets;
}
