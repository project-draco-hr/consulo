{
  super.processMouseMotionEvent(e);
  if (MouseEvent.MOUSE_DRAGGED == e.getID()) {
    myDragging=true;
    final ToolWindowAnchor anchor=myInfo.getAnchor();
    final boolean isVertical=anchor == ToolWindowAnchor.TOP || anchor == ToolWindowAnchor.BOTTOM;
    setCursor(isVertical ? Cursor.getPredefinedCursor(Cursor.S_RESIZE_CURSOR) : Cursor.getPredefinedCursor(Cursor.E_RESIZE_CURSOR));
    final Point point=e.getPoint();
    final Container windowPane=InternalDecorator.this.getParent();
    myLastPoint=SwingUtilities.convertPoint(this,point,windowPane);
    myLastPoint.x=Math.min(Math.max(myLastPoint.x,0),windowPane.getWidth());
    myLastPoint.y=Math.min(Math.max(myLastPoint.y,0),windowPane.getHeight());
    final Rectangle bounds=InternalDecorator.this.getBounds();
    if (anchor == ToolWindowAnchor.TOP) {
      if (myLastPoint.y < DIVIDER_WIDTH) {
        myLastPoint.y=DIVIDER_WIDTH;
      }
      InternalDecorator.this.setBounds(0,0,bounds.width,myLastPoint.y);
    }
 else     if (anchor == ToolWindowAnchor.LEFT) {
      if (myLastPoint.x < DIVIDER_WIDTH) {
        myLastPoint.x=DIVIDER_WIDTH;
      }
      InternalDecorator.this.setBounds(0,0,myLastPoint.x,bounds.height);
    }
 else     if (anchor == ToolWindowAnchor.BOTTOM) {
      if (myLastPoint.y > windowPane.getHeight() - DIVIDER_WIDTH) {
        myLastPoint.y=windowPane.getHeight() - DIVIDER_WIDTH;
      }
      InternalDecorator.this.setBounds(0,myLastPoint.y,bounds.width,windowPane.getHeight() - myLastPoint.y);
    }
 else     if (anchor == ToolWindowAnchor.RIGHT) {
      if (myLastPoint.x > windowPane.getWidth() - DIVIDER_WIDTH) {
        myLastPoint.x=windowPane.getWidth() - DIVIDER_WIDTH;
      }
      InternalDecorator.this.setBounds(myLastPoint.x,0,windowPane.getWidth() - myLastPoint.x,bounds.height);
    }
    InternalDecorator.this.validate();
  }
}
