{
  if (goIntoNested) {
    FilterDescendantVirtualFiles.filter(Arrays.asList(roots));
  }
  final VcsRootIterator rootIterator=new VcsRootIterator(vcs.getProject(),vcs);
  final List<Real> result=new ArrayList<Real>();
  for (  VirtualFile root : roots) {
    result.addAll(getForOne(root,vcs,goIntoNested,rootIterator));
  }
  if (!goIntoNested) {
    final List<Real> filtered=new ArrayList<Real>(result.size());
    filterOutSuperfluousChildren(vcs,result,filtered);
    return filtered;
  }
  return result;
}
