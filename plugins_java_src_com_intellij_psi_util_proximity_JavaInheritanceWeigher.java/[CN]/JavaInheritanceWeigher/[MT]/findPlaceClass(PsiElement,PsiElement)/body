{
  if (position.getParent() instanceof PsiReferenceExpression) {
    final PsiExpression qualifierExpression=((PsiReferenceExpression)position.getParent()).getQualifierExpression();
    if (qualifierExpression != null) {
      final PsiType type=qualifierExpression.getType();
      if (type instanceof PsiClassType) {
        final PsiClass psiClass=((PsiClassType)type).resolve();
        if (psiClass != null) {
          return psiClass;
        }
      }
    }
  }
  return PsiTreeUtil.getContextOfType(element,PsiClass.class,false);
}
