{
  if (modules.size() == 0)   return new ArrayList<Module>(0);
  final com.intellij.util.containers.HashSet<Module> result=new com.intellij.util.containers.HashSet<Module>();
  final Project project=modules.iterator().next().getProject();
  final ModuleManager moduleManager=ModuleManager.getInstance(project);
  for (  final Module module : modules) {
    result.add(module);
    result.addAll(moduleManager.getModuleDependentModules(module));
  }
  return result;
}
