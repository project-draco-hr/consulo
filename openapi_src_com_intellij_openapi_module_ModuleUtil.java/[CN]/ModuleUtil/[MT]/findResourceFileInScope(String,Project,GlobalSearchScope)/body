{
  int index=resourceName.lastIndexOf('/');
  String packageName=index >= 0 ? resourceName.substring(0,index).replace('/','.') : "";
  final String fileName=index >= 0 ? resourceName.substring(index + 1) : resourceName;
  return new FilteredQuery<VirtualFile>(ProjectRootManager.getInstance(project).getFileIndex().getDirsByPackageName(packageName,false),new Condition<VirtualFile>(){
    public boolean value(    final VirtualFile file){
      final VirtualFile child=file.findChild(fileName);
      return child != null && scope.contains(child);
    }
  }
).findFirst();
}
