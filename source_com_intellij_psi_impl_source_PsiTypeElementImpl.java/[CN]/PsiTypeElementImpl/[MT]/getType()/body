{
  if (myCachedType != null)   return myCachedType;
  TreeElement element=getFirstChildNode();
  while (element != null) {
    if (element.getTreeNext() == null && PRIMITIVE_TYPE_BIT_SET.contains(element.getElementType())) {
      myCachedType=getManager().getElementFactory().createPrimitiveType(element.getText());
    }
 else     if (element.getElementType() == ElementType.TYPE) {
      PsiType componentType=((PsiTypeElement)SourceTreeToPsiMap.treeElementToPsi(element)).getType();
      myCachedType=getLastChildNode().getElementType() == ElementType.ELLIPSIS ? new PsiEllipsisType(componentType) : componentType.createArrayType();
    }
 else     if (element.getElementType() == ElementType.JAVA_CODE_REFERENCE) {
      myCachedType=new PsiClassReferenceType(getReferenceElement());
    }
 else     if (element.getElementType() == ElementType.QUEST) {
      PsiType temp=createWildcardType();
      myCachedType=temp;
    }
    if (element.getTextLength() != 0)     break;
    element=element.getTreeNext();
  }
  return myCachedType;
}
