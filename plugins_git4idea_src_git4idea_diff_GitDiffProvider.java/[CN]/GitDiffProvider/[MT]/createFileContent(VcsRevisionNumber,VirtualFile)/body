{
  if (selectedFile.isDirectory()) {
    return null;
  }
  final String path=selectedFile.getPath();
  if (GitUtil.gitRootOrNull(selectedFile) == null) {
    return null;
  }
  try {
    FilePath filePath=VcsUtil.getFilePath(path);
    for (    VcsFileRevision f : GitHistoryUtils.history(myProject,filePath)) {
      GitFileRevision gitRevision=(GitFileRevision)f;
      if (f.getRevisionNumber().equals(revisionNumber)) {
        return GitContentRevision.createRevision(gitRevision.getPath(),(GitRevisionNumber)revisionNumber,myProject,selectedFile.getCharset());
      }
    }
    GitContentRevision candidate=(GitContentRevision)GitContentRevision.createRevision(filePath,(GitRevisionNumber)revisionNumber,myProject,selectedFile.getCharset());
    try {
      candidate.getContent();
      return candidate;
    }
 catch (    VcsException e) {
    }
  }
 catch (  VcsException e) {
    GitVcs.getInstance(myProject).showErrors(Collections.singletonList(e),GitBundle.message("diff.find.error",path));
  }
  return null;
}
