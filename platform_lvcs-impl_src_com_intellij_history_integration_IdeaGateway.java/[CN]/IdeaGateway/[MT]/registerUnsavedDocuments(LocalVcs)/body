{
  vcs.beginChangeSet();
  for (  Document d : getUnsavedDocuments()) {
    VirtualFile f=getFile(d);
    if (shouldNotRegister(f))     continue;
    registerDocumentContents(vcs,f,d);
  }
  vcs.endChangeSet(null);
}
