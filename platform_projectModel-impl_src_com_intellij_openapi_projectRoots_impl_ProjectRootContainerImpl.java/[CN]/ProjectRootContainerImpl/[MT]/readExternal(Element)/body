{
  for (  OrderRootType type : OrderRootType.getAllTypes()) {
    read(element,type);
  }
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      myFiles=new HashMap<OrderRootType,VirtualFile[]>();
      for (      OrderRootType rootType : myRoots.keySet()) {
        CompositeProjectRoot root=myRoots.get(rootType);
        if (myNoCopyArchive) {
          addNoCopyArchiveForPaths(root);
        }
        myFiles.put(rootType,root.getVirtualFiles());
      }
    }
  }
);
  for (  OrderRootType type : OrderRootType.getAllTypes()) {
    final VirtualFile[] newRoots=getRootFiles(type);
    final VirtualFile[] oldRoots=VirtualFile.EMPTY_ARRAY;
    if (!Comparing.equal(oldRoots,newRoots)) {
      fireRootsChanged();
    }
  }
}
