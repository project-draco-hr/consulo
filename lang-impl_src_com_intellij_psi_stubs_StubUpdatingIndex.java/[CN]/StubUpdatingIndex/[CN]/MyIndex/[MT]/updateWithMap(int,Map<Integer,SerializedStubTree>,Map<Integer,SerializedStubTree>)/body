{
  super.updateWithMap(inputId,oldData,newData);
  final Map<StubIndexKey,Map<Object,TIntArrayList>> oldStubTree=getStubTree(oldData);
  final Map<StubIndexKey,Map<Object,TIntArrayList>> newStubTree=getStubTree(newData);
  Set<StubIndexKey> allIndices=new HashSet<StubIndexKey>();
  allIndices.addAll(oldStubTree.keySet());
  allIndices.addAll(newStubTree.keySet());
  for (  StubIndexKey key : allIndices) {
    final Map oldMap=oldStubTree.get(key);
    final Map newMap=newStubTree.get(key);
    ((StubIndexImpl)StubIndex.getInstance()).updateIndex(key,inputId,oldMap != null ? oldMap : Collections.emptyMap(),newMap != null ? newMap : Collections.emptyMap());
  }
}
