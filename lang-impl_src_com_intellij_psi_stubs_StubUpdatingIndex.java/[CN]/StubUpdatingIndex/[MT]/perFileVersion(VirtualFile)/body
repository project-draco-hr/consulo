{
  final FileType fileType=file.getFileType();
  if (fileType instanceof LanguageFileType) {
    Language l=((LanguageFileType)fileType).getLanguage();
    ParserDefinition parserDefinition=LanguageParserDefinitions.INSTANCE.forLanguage(l);
    if (parserDefinition != null) {
      final IFileElementType type=parserDefinition.getFileNodeType();
      if (type instanceof IStubFileElementType) {
        return ((IStubFileElementType)type).getStubVersion();
      }
    }
  }
 else   if (fileType.isBinary()) {
    final BinaryFileStubBuilder builder=BinaryFileStubBuilders.INSTANCE.forFileType(fileType);
    if (builder != null)     return builder.getStubVersion();
  }
  return 0;
}
