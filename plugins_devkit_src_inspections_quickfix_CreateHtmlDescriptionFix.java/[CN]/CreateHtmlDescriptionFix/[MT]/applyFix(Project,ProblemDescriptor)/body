{
  final List<VirtualFile> virtualFiles=DescriptionNotFoundInspection.getPotentialRoots(myModule);
  final VirtualFile[] roots=prepare(virtualFiles.toArray(new VirtualFile[virtualFiles.size()]));
  if (roots.length == 1) {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        createDescription(roots[0]);
      }
    }
);
  }
 else {
    List<String> options=new ArrayList<String>();
    for (    VirtualFile file : roots) {
      options.add(file.getPresentableUrl() + File.separator + DESCRIPTIONS_FOLDER+ File.separator+ myFilename);
    }
    final JList files=new JList(ArrayUtil.toStringArray(options));
    final PopupChooserBuilder builder=JBPopupFactory.getInstance().createListPopupBuilder(files);
    final JBPopup popup=builder.setTitle(DevKitBundle.message("select.target.location.of.description",myFilename)).setItemChoosenCallback(new Runnable(){
      public void run(){
        final int index=files.getSelectedIndex();
        if (0 <= index && index < roots.length) {
          ApplicationManager.getApplication().runWriteAction(new Runnable(){
            public void run(){
              createDescription(roots[index]);
            }
          }
);
        }
      }
    }
).createPopup();
    final Editor editor=FileEditorManager.getInstance(myModule.getProject()).getSelectedTextEditor();
    if (editor == null)     return;
    popup.showInBestPositionFor(editor);
  }
}
