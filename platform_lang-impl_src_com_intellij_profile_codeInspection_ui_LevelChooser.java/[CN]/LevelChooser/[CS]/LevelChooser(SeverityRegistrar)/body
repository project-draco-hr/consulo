{
  final JComboBox comboBox=getComboBox();
  final DefaultComboBoxModel model=new DefaultComboBoxModel();
  comboBox.setModel(model);
  fillModel(model,severityRegistrar);
  getButton().setToolTipText("Edit severities (" + getButton().getToolTipText(null) + ")");
  comboBox.setRenderer(new ListCellRendererWrapper<HighlightSeverity>(comboBox.getRenderer()){
    @Override public void customize(    final JList list,    final HighlightSeverity value,    final int index,    final boolean selected,    final boolean hasFocus){
      if (value != null) {
        setText(SingleInspectionProfilePanel.renderSeverity(value));
        setIcon(HighlightDisplayLevel.find(value).getIcon());
      }
    }
  }
);
  addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      final SeverityEditorDialog dlg=new SeverityEditorDialog(LevelChooser.this,(HighlightSeverity)getComboBox().getSelectedItem(),severityRegistrar);
      dlg.show();
      if (dlg.isOK()) {
        final Object item=getComboBox().getSelectedItem();
        fillModel(model,severityRegistrar);
        final HighlightInfoType type=dlg.getSelectedType();
        if (type != null) {
          getComboBox().setSelectedItem(type.getSeverity(null));
        }
 else {
          getComboBox().setSelectedItem(item);
        }
      }
    }
  }
);
}
