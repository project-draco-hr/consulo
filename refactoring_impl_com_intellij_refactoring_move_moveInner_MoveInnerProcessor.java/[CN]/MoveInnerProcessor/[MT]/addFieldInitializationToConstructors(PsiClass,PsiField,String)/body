{
  PsiMethod[] constructors=aClass.getConstructors();
  PsiElementFactory factory=JavaPsiFacade.getInstance(myProject).getElementFactory();
  if (constructors.length > 0) {
    for (    PsiMethod constructor : constructors) {
      if (parameterName != null) {
        PsiParameterList parameterList=constructor.getParameterList();
        PsiParameter parameter=factory.createParameter(parameterName,field.getType());
        parameterList.addAfter(parameter,null);
      }
      PsiCodeBlock body=constructor.getBody();
      if (body == null)       continue;
      PsiStatement[] statements=body.getStatements();
      if (statements.length > 0) {
        PsiStatement first=statements[0];
        if (first instanceof PsiExpressionStatement) {
          PsiExpression expression=((PsiExpressionStatement)first).getExpression();
          if (expression instanceof PsiMethodCallExpression) {
            @NonNls String text=((PsiMethodCallExpression)expression).getMethodExpression().getText();
            if ("this".equals(text)) {
              continue;
            }
          }
        }
      }
      createAssignmentStatement(constructor,field.getName(),parameterName);
    }
  }
 else {
    PsiMethod constructor=factory.createConstructor();
    if (parameterName != null) {
      PsiParameterList parameterList=constructor.getParameterList();
      PsiParameter parameter=factory.createParameter(parameterName,field.getType());
      parameterList.add(parameter);
    }
    createAssignmentStatement(constructor,field.getName(),parameterName);
    aClass.add(constructor);
  }
}
