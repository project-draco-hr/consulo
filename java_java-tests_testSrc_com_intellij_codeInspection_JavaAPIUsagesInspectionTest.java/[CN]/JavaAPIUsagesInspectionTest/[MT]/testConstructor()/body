{
  ModifiableRootModel model=ModuleRootManager.getInstance(getModule()).getModifiableModel();
  LanguageLevelModuleExtension extension=model.getModuleExtension(LanguageLevelModuleExtension.class);
  final LanguageLevel languageLevel=extension.getLanguageLevel();
  try {
    extension.setLanguageLevel(LanguageLevel.JDK_1_4);
    model.commit();
    doTest();
  }
  finally {
    model=ModuleRootManager.getInstance(getModule()).getModifiableModel();
    extension=model.getModuleExtension(LanguageLevelModuleExtension.class);
    extension.setLanguageLevel(languageLevel);
    model.commit();
  }
}
