{
  if (suiteClassNames.length == 0) {
    return null;
  }
  Vector result=new Vector();
  for (int i=0; i < suiteClassNames.length; i++) {
    String suiteClassName=suiteClassNames[i];
    if (suiteClassName.charAt(0) == '@') {
      try {
        final Map classMethods=new HashMap();
        BufferedReader reader=new BufferedReader(new FileReader(suiteClassName.substring(1)));
        try {
          reader.readLine();
          final String packageName=reader.readLine();
          String line;
          while ((line=reader.readLine()) != null) {
            String className=line;
            final int idx=line.indexOf(',');
            if (idx != -1) {
              className=line.substring(0,idx);
              Set methodNames=(Set)classMethods.get(className);
              if (methodNames == null) {
                methodNames=new HashSet();
                classMethods.put(className,methodNames);
              }
              methodNames.add(line.substring(idx + 1));
            }
            appendTestClass(result,className);
          }
          String suiteName=packageName.length() == 0 ? "<default package>" : packageName;
          Class[] classes=getArrayOfClasses(result);
          Request allClasses;
          try {
            Class.forName("org.junit.runner.Computer");
            allClasses=JUnit46ClassesRequestBuilder.getClassesRequest(suiteName,classes);
          }
 catch (          ClassNotFoundException e) {
            try {
              Class.forName("org.junit.internal.requests.ClassesRequest");
              allClasses=JUnit4ClassesRequestBuilder.getClassesRequest(suiteName,classes);
            }
 catch (            ClassNotFoundException e1) {
              allClasses=JUnit45ClassesRequestBuilder.getClassesRequest(suiteName,classes);
            }
          }
          return classMethods.isEmpty() ? allClasses : allClasses.filterWith(new Filter(){
            public boolean shouldRun(            Description description){
              if (description.isTest()) {
                final Set methods=(Set)classMethods.get(JUnit4ReflectionUtil.getClassName(description));
                return methods == null || methods.contains(JUnit4ReflectionUtil.getMethodName(description));
              }
              return true;
            }
            public String describe(){
              return "Failed tests";
            }
          }
);
        }
  finally {
          reader.close();
        }
      }
 catch (      IOException e) {
        e.printStackTrace();
        System.exit(1);
      }
    }
 else {
      int index=suiteClassName.indexOf(',');
      if (index != -1) {
        final Class clazz=loadTestClass(suiteClassName.substring(0,index));
        final Request classRequest=new ClassRequest(clazz){
          public Runner getRunner(){
            try {
              return new IgnoreIgnoredTestJUnit4ClassRunner(clazz);
            }
 catch (            InitializationError ignored) {
            }
            return super.getRunner();
          }
        }
;
        return classRequest.filterWith(Description.createTestDescription(clazz,suiteClassName.substring(index + 1)));
      }
      appendTestClass(result,suiteClassName);
    }
  }
  return result.size() == 1 ? Request.aClass((Class)result.get(0)) : Request.classes(getArrayOfClasses(result));
}
