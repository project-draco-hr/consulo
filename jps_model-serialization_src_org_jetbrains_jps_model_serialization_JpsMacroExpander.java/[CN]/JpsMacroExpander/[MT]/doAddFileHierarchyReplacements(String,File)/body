{
  if (file == null)   return;
  doAddFileHierarchyReplacements(macro + "/..",file.getParentFile());
  final String path=FileUtil.toSystemIndependentName(file.getPath());
  if (StringUtil.endsWithChar(path,'/')) {
    myExpandMacroMap.put(macro + "/",path);
    myExpandMacroMap.put(macro,path.substring(0,path.length() - 1));
  }
 else {
    myExpandMacroMap.put(macro,path);
  }
}
