{
  super(new BorderLayout());
  if (list instanceof ComponentWithEmptyText) {
    ((ComponentWithEmptyText)list).getEmptyText().setText(UIBundle.message("message.noMatchesFound"));
  }
  myList=list;
  myScroller=scroller;
  mySearchField.getTextEditor().setFocusable(false);
  mySearchField.setVisible(false);
  add(mySearchField,BorderLayout.NORTH);
  add(myScroller,BorderLayout.CENTER);
  mySpeedSearch=new MySpeedSearch();
  mySpeedSearch.setEnabled(namer != null);
  myList.addKeyListener(new KeyAdapter(){
    public void keyPressed(    final KeyEvent e){
      mySpeedSearch.process(e);
    }
  }
);
  final int selectedIndex=myList.getSelectedIndex();
  final int modelSize=myList.getModel().getSize();
  myModel=new NameFilteringListModel<T>(myList,namer,new Condition<String>(){
    public boolean value(    String s){
      return mySpeedSearch.shouldBeShowing(s);
    }
  }
,mySpeedSearch);
  if (myModel.getSize() == modelSize) {
    myList.setSelectedIndex(selectedIndex);
  }
  setBackground(list.getBackground());
}
