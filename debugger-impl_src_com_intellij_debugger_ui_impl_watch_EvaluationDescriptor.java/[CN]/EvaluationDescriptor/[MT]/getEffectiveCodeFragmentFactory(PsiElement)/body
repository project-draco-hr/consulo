{
  if (myCodeFragmentFactory != null) {
    return myCodeFragmentFactory;
  }
  return ApplicationManager.getApplication().runReadAction(new Computable<CodeFragmentFactory>(){
    public CodeFragmentFactory compute(){
      final List<CodeFragmentFactory> codeFragmentFactories=DebuggerUtilsEx.getCodeFragmentFactories(psiContext);
      return codeFragmentFactories.get(0);
    }
  }
);
}
