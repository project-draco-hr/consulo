{
  ModuleRootsProcessor rootsProcessor=ModuleRootsProcessor.findRootsProcessor(rootModel);
  if (type.equals(SourcesOrderRootType.getInstance())) {
    if (includeProduction) {
      Predicate<ContentFolderTypeProvider> predicate=includeTests ? ContentFolderScopes.productionAndTest() : ContentFolderScopes.production();
      if (rootsProcessor != null) {
        rootsProcessor.processFiles(rootModel,predicate,new CommonProcessors.CollectProcessor<VirtualFile>(result));
      }
 else {
        for (        ContentEntry entry : rootModel.getContentEntries()) {
          Collections.addAll(result,funForSources.fun(entry,predicate));
        }
      }
    }
 else {
      if (rootsProcessor != null) {
        rootsProcessor.processFiles(rootModel,ContentFolderScopes.test(),new CommonProcessors.CollectProcessor<VirtualFile>(result));
      }
 else {
        for (        ContentEntry entry : rootModel.getContentEntries()) {
          Collections.addAll(result,funForSources.fun(entry,ContentFolderScopes.test()));
        }
      }
    }
  }
 else   if (type.equals(BinariesOrderRootType.getInstance())) {
    if (myWithoutSelfModuleOutput && myOrderEnumerator.isRootModuleModel(rootModel)) {
      if (includeTests && includeProduction) {
        Collections.addAll(result,funForRuntime.fun(rootModel,ContentFolderScopes.productionAndTest()));
      }
    }
 else {
      Collections.addAll(result,funForRuntime.fun(rootModel,includeTests ? ContentFolderScopes.productionAndTest() : ContentFolderScopes.production()));
    }
  }
}
