{
  @NonNls String defaultPath=commitMessage.replace(' ','_').replace('.','_').replace(File.separatorChar,'_').replace('\t','_').replace('\n','_').replace(':','_').replace('/','_');
  if (defaultPath.length() == 0) {
    defaultPath="unnamed";
  }
  String path=defaultPath + PATCH_EXTENSION;
  int index=0;
  while (new File(file,path).exists()) {
    index++;
    path=defaultPath + index + PATCH_EXTENSION;
  }
  return new File(file,path);
}
