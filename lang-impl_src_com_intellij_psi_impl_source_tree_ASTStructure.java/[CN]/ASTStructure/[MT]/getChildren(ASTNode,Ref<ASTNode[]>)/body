{
  ASTNode child=astNode.getFirstChildNode();
  if (child == null)   return 0;
  ASTNode[] store=into.get();
  if (store == null) {
    store=new ASTNode[10];
    into.set(store);
  }
  int count=0;
  while (child != null) {
    if (count >= store.length) {
      ASTNode[] newStore=new ASTNode[(count * 3) / 2];
      System.arraycopy(store,0,newStore,0,count);
      into.set(newStore);
      store=newStore;
    }
    store[count++]=child;
    child=child.getTreeNext();
  }
  return count;
}
