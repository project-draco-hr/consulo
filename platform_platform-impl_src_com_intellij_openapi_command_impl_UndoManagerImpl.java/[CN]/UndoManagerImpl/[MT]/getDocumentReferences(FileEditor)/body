{
  List<DocumentReference> documentReferences=new ArrayList<DocumentReference>();
  Document[] documents=editor == null ? null : TextEditorProvider.getDocuments(editor);
  if (documents != null) {
    for (    Document d : documents) {
      documentReferences.add(DocumentReferenceByDocument.createDocumentReference(getOriginal(d)));
    }
  }
  if (editor instanceof DocumentReferenceEditor) {
    documentReferences.addAll(Arrays.asList(((DocumentReferenceEditor)editor).getDocumentReferences()));
  }
  return documentReferences.toArray(new DocumentReference[documentReferences.size()]);
}
