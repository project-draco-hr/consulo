{
  ParsingContext context=new ParsingContext(table);
  FilterLexer filterLexer=new FilterLexer(lexer,new FilterLexer.SetFilter(XML_WHITE_SPACE_OR_COMMENT_BIT_SET));
  filterLexer.start(buffer,startOffset,endOffset);
  final FileElement holderElement=new DummyHolder(SharedImplUtil.getManagerByTree(parent),null,table).getTreeElement();
  final Set<String> names=new HashSet<String>();
  while (parent instanceof XmlTag) {
    names.add(((XmlTag)parent).getName());
    parent=parent.getTreeParent();
  }
  context.getXmlParsing()._parseTag(holderElement,filterLexer,names);
  while (filterLexer.getTokenType() != null) {
    context.getXmlParsing().addToken(holderElement,filterLexer);
  }
  ParseUtil.insertMissingTokens(holderElement,lexer,startOffset,endOffset,WhiteSpaceAndCommentsProcessor.INSTANCE,context);
  ASTNode result=holderElement.getFirstChildNode();
  return result;
}
