{
  super.writeExternal(element);
  element.setAttribute(VERSION_TAG,VALID_VERSION);
  element.setAttribute(IS_LOCKED,String.valueOf(myLockedProfile));
  for (  final String toolName : myDisplayLevelMap.keySet()) {
    final ToolState state=getToolState(toolName);
    final HighlightDisplayKey key=HighlightDisplayKey.find(toolName);
    if (key != null) {
      final Element inspectionElement=new Element(INSPECTION_TOOL_TAG);
      inspectionElement.setAttribute(CLASS_TAG,toolName);
      final Map<String,Element> scopesElements=state.writeExternal(inspectionElement);
      final Tools toolList=myTools.get(toolName);
      LOG.assertTrue(toolList != null);
      toolList.writeExternal(inspectionElement,scopesElements);
      element.addContent(inspectionElement);
    }
 else {
      final Element toolElement=state.getToolElement();
      LOG.assertTrue(toolElement != null);
      toolElement.detach();
      element.addContent(toolElement);
    }
  }
}
