{
  super.writeExternal(element);
  element.setAttribute(VERSION_TAG,VALID_VERSION);
  element.setAttribute(IS_LOCKED,String.valueOf(myLockedProfile));
  Map<String,Boolean> diffMap=getDisplayLevelMap();
  if (diffMap != null) {
    diffMap=new TreeMap<String,Boolean>(diffMap);
    for (    String toolName : myDeinstalledInspectionsSettings.keySet()) {
      diffMap.put(toolName,false);
    }
    for (    final String toolName : diffMap.keySet()) {
      if (diffMap.get(toolName).booleanValue())       continue;
      final HighlightDisplayKey key=HighlightDisplayKey.find(toolName);
      if (key != null) {
        final Tools toolList=myTools.get(toolName);
        LOG.assertTrue(toolList != null);
        final Element inspectionElement=new Element(INSPECTION_TOOL_TAG);
        inspectionElement.setAttribute(CLASS_TAG,toolName);
        toolList.writeExternal(inspectionElement);
        element.addContent(inspectionElement);
      }
 else {
        final Element toolElement=myDeinstalledInspectionsSettings.get(toolName);
        LOG.assertTrue(toolElement != null);
        toolElement.detach();
        element.addContent(toolElement);
      }
    }
  }
}
