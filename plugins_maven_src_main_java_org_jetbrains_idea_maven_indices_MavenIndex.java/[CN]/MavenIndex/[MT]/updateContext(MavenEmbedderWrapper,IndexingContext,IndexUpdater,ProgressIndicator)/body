{
  if (Kind.LOCAL == myKind) {
    progress.setIndeterminate(true);
    try {
      myIndexer.scan(context,new MyScanningListener(),false);
    }
  finally {
      progress.setIndeterminate(false);
    }
  }
 else {
    IndexUpdateRequest request=new IndexUpdateRequest(context);
    request.setResourceFetcher(new MavenIndexFetcher(myRepositoryId,getRepositoryUrl(),embedder.<WagonManager>getComponent(WagonManager.class),new TransferListenerAdapter(progress)));
    updater.fetchAndUpdateIndex(request);
  }
}
