{
  try {
    if (fullUpdate) {
      if (myKind == Kind.LOCAL) {
        FileUtil.delete(getContextDir());
      }
    }
    IndexingContext context=createContext(indexer);
    try {
      if (fullUpdate)       updateContext(context,indexer,updater,proxyInfo,progress);
      updateData(context,progress);
    }
  finally {
      indexer.removeIndexingContext(context,false);
    }
    isBroken=false;
    myFailureMessage=null;
  }
 catch (  IOException e) {
    handleUpdateException(e);
  }
catch (  UnsupportedExistingLuceneIndexException e) {
    handleUpdateException(e);
  }
  save();
}
