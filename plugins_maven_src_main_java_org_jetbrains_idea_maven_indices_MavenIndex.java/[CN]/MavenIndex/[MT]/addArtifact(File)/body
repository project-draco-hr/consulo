{
  doIndexTask(new IndexTask<Object>(){
    public Object doTask() throws Exception {
      ArtifactContext artifactContext=myArtifactContextProducer.getArtifactContext(myData.context,artifactFile);
      if (artifactContext == null)       return null;
      myIndexer.addArtifactToIndex(artifactContext,myData.context);
      ArtifactInfo artifactInfo=artifactContext.getArtifactInfo();
      String groupId=artifactInfo.groupId;
      String artifactId=artifactInfo.artifactId;
      String version=artifactInfo.version;
      if (groupId == null || artifactId == null || version == null)       return null;
      myData.groups.enumerate(groupId);
      myData.hasGroupCache.put(groupId,true);
      String groupWithArtifact=groupId + ":" + artifactId;
      myData.groupsWithArtifacts.enumerate(groupWithArtifact);
      myData.hasArtifactCache.put(groupWithArtifact,true);
      addToCache(myData.groupToArtifactMap,groupId,artifactId);
      String groupWithArtifactWithVersion=groupWithArtifact + ":" + version;
      myData.groupsWithArtifactsWithVersions.enumerate(groupWithArtifactWithVersion);
      myData.hasVersionCache.put(groupWithArtifactWithVersion,true);
      addToCache(myData.groupWithArtifactToVersionMap,groupWithArtifact,version);
      myData.flush();
      return null;
    }
  }
,null);
}
