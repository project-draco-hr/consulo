{
  return doIndexTask(new IndexTask<Set<ArtifactInfo>>(){
    public Set<ArtifactInfo> doTask() throws Exception {
      TopDocs docs=null;
      try {
        BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);
        docs=myData.context.getIndexSearcher().search(query,(Filter)null,maxResult);
      }
 catch (      BooleanQuery.TooManyClauses ignore) {
      }
      if (docs.scoreDocs.length == 0)       return Collections.emptySet();
      Set<ArtifactInfo> result=new THashSet<ArtifactInfo>();
      for (int i=0; i < docs.scoreDocs.length; i++) {
        int docIndex=docs.scoreDocs[i].doc;
        Document doc=myData.context.getIndexReader().document(docIndex);
        ArtifactInfo artifactInfo=myData.context.constructArtifactInfo(doc);
        if (artifactInfo == null)         continue;
        artifactInfo.repository=myRepositoryPathOrUrl;
        result.add(artifactInfo);
      }
      return result;
    }
  }
,Collections.<ArtifactInfo>emptySet());
}
