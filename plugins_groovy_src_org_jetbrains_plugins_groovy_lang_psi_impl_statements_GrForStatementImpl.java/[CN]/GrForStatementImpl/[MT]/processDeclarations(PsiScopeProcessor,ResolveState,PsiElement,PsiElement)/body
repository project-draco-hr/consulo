{
  GrForClause forClause=getClause();
  final GrVariable varScope=PsiTreeUtil.getParentOfType(place,GrVariable.class);
  if (forClause == null)   return true;
  GrVariable var=forClause.getDeclaredVariable();
  if (var == null)   return true;
  final PsiModifierList modifierList=var.getModifierList();
  boolean isAvailableOutsideOfFor=modifierList == null || modifierList.getTextLength() == 0;
  if (lastParent != null && !(lastParent instanceof GrForInClause) || lastParent == null && isAvailableOutsideOfFor) {
    if (!var.equals(varScope) && !ResolveUtil.processElement(processor,var,state))     return false;
  }
  return true;
}
