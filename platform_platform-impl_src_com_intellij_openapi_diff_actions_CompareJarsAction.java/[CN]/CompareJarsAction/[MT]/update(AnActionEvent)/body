{
  final VirtualFile[] files=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
  if (files != null && files.length > 0 && files.length < 3) {
    if (isJar(files[0]) && (files.length == 1 || isJar(files[1]))) {
      e.getPresentation().setEnabled(true);
      e.getPresentation().setVisible(true);
      e.getPresentation().setText(files.length == 1 ? "Compare Jar File with..." : "Compare Jar Files");
      return;
    }
  }
  e.getPresentation().setEnabled(false);
  e.getPresentation().setVisible(false);
}
