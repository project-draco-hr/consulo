{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
synchronized (VcsDirtyScopeImpl.this) {
        myAffectedContentRoots.add(myVcsManager.getVcsRootFor(newcomer));
        for (Iterator<FilePath> it=myDirtyFiles.iterator(); it.hasNext(); ) {
          FilePath oldBoy=it.next();
          if (oldBoy.isUnder(newcomer,false)) {
            it.remove();
          }
        }
        for (Iterator<FilePath> it=myDirtyDirectoriesRecursively.iterator(); it.hasNext(); ) {
          FilePath oldBoy=it.next();
          if (newcomer.isUnder(oldBoy,false)) {
            return;
          }
          if (oldBoy.isUnder(newcomer,false)) {
            it.remove();
          }
        }
        myDirtyDirectoriesRecursively.add(newcomer);
      }
    }
  }
);
}
