{
  LOG.assertTrue(isAutopopupCompletion());
  if (focusLookup) {
    final CompletionPhase phase=CompletionServiceImpl.getCompletionPhase();
    if (!(phase instanceof CompletionPhase.Restarted)) {
      ((CompletionPhase.BgCalculation)phase).focusLookupWhenDone=true;
    }
  }
 else {
    myLookup.setAdvertisementText("Press " + CompletionContributor.getActionShortcut(IdeActions.ACTION_CHOOSE_LOOKUP_ITEM_REPLACE) + " to choose the first suggestion");
  }
}
