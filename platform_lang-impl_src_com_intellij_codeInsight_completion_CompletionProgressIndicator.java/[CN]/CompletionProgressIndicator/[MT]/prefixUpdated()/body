{
  final CharSequence text=myEditor.getDocument().getCharsSequence();
  final int caretOffset=myEditor.getCaretModel().getOffset();
  for (  Pair<Integer,ElementPattern<String>> pair : myRestartingPrefixConditions) {
    int start=pair.first;
    if (caretOffset >= start) {
      final String newPrefix=text.subSequence(start,caretOffset).toString();
      if (pair.second.accepts(newPrefix)) {
        scheduleRestart();
        myRestartingPrefixConditions.clear();
        return;
      }
    }
  }
  hideAutopopupIfMeaningless();
  updateFocus();
}
