{
  if (myLookup.isAvailableToUser()) {
    return;
  }
  final List<CompletionContributor> list=CompletionContributor.forParameters(myParameters);
  for (  final CompletionContributor contributor : list) {
    if (myLookup.getAdvertisementText() != null)     return;
    if (!myLookup.isCalculating() && !myLookup.isVisible())     return;
    @SuppressWarnings("deprecation") String s=contributor.advertise(myParameters);
    if (myLookup.getAdvertisementText() != null)     return;
    if (s != null) {
      myLookup.setAdvertisementText(s);
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          if (isAutopopupCompletion() && !myLookup.isAvailableToUser()) {
            return;
          }
          if (!CompletionServiceImpl.isPhase(CompletionPhase.BgCalculation.class,CompletionPhase.ItemsCalculated.class)) {
            return;
          }
          if (CompletionServiceImpl.getCompletionPhase().indicator != CompletionProgressIndicator.this) {
            return;
          }
          updateLookup();
        }
      }
,myQueue.getModalityState());
      return;
    }
  }
}
