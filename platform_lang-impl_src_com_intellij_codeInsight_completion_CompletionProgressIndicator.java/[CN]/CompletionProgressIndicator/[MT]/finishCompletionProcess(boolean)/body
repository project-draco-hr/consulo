{
  cancel();
  ApplicationManager.getApplication().assertIsDispatchThread();
  Disposer.dispose(myQueue);
  CompletionProgressIndicator currentCompletion=CompletionServiceImpl.getCompletionService().getCurrentCompletion();
  LOG.assertTrue(currentCompletion == this,currentCompletion + "!=" + this);
  CompletionServiceImpl.getCompletionService().setCurrentCompletion(null);
  CompletionServiceImpl.assertPhase(CompletionPhase.BgCalculation.class,CompletionPhase.ItemsCalculated.class,CompletionPhase.Synchronous.class,CompletionPhase.Restarted.class);
  CompletionServiceImpl.setCompletionPhase(CompletionPhase.NoCompletion);
  if (disposeOffsetMap) {
    disposeOffsetMaps();
  }
}
