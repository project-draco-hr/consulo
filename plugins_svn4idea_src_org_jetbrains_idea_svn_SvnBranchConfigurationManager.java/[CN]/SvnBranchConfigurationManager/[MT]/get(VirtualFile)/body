{
  SvnBranchConfiguration configuration=myConfigurationBean.myConfigurationMap.get(vcsRoot.getPath());
  if (configuration == null) {
    if (ApplicationManager.getApplication().isDispatchThread()) {
      final Ref<VcsException> exceptionRef=new Ref<VcsException>();
      ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
        public void run(){
          try {
            ProgressManager.getInstance().getProgressIndicator().setText(SvnBundle.message("loading.data.for.root.text",vcsRoot.getPresentableUrl()));
            final SvnBranchConfiguration loadedConfiguration=load(vcsRoot);
            setConfiguration(vcsRoot,loadedConfiguration,false);
          }
 catch (          VcsException e) {
            exceptionRef.set(e);
          }
        }
      }
,SvnBundle.message("loading.default.branches.configuration.text"),false,myProject);
      if (!exceptionRef.isNull()) {
        setConfiguration(vcsRoot,new SvnBranchConfiguration(),true);
        throw exceptionRef.get();
      }
      configuration=myConfigurationBean.myConfigurationMap.get(vcsRoot.getPath());
    }
 else {
      configuration=load(vcsRoot);
      setConfiguration(vcsRoot,configuration,false);
    }
  }
  return configuration;
}
