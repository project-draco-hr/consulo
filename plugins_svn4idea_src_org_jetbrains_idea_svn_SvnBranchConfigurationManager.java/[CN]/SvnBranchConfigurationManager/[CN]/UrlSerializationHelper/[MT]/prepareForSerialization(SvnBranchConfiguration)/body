{
  final Ref<Boolean> withUserInfo=new Ref<Boolean>();
  final String trunkUrl=serializeUrl(configuration.getTrunkUrl(),withUserInfo);
  if (Boolean.FALSE.equals(withUserInfo.get())) {
    return configuration;
  }
  final List<String> branches=configuration.getBranchUrls();
  final List<String> newBranchesList=new ArrayList<String>(branches.size());
  for (  String s : branches) {
    newBranchesList.add(serializeUrl(s,withUserInfo));
  }
  final Map<String,List<SvnBranchItem>> map=configuration.getBranchMap();
  final Map<String,List<SvnBranchItem>> newMap=new HashMap<String,List<SvnBranchItem>>(map.size(),1.0f);
  for (  Map.Entry<String,List<SvnBranchItem>> entry : map.entrySet()) {
    final List<SvnBranchItem> items=entry.getValue();
    if (items != null) {
      final List<SvnBranchItem> newItems=new ArrayList<SvnBranchItem>();
      for (      SvnBranchItem item : items) {
        newItems.add(new SvnBranchItem(serializeUrl(item.getUrl(),withUserInfo),new java.util.Date(item.getCreationDateMillis()),item.getRevision()));
      }
      newMap.put(serializeUrl(entry.getKey(),withUserInfo),newItems);
    }
  }
  final SvnBranchConfiguration result=new SvnBranchConfiguration();
  result.setTrunkUrl(trunkUrl);
  result.setBranchUrls(newBranchesList);
  result.setBranchMap(newMap);
  result.setUserinfoInUrl(withUserInfo.isNull() ? false : withUserInfo.get());
  return result;
}
