{
  final PsiFile file=context.getFile();
  final Project project=context.getProject();
  JavaCompletionUtil.initOffsets(file,project,context.getOffsetMap(),context.getCompletionType());
  if (file instanceof PsiJavaFile) {
    autoImport(file,context.getStartOffset() - 1,context.getEditor());
  }
  if (context.getCompletionType() == CompletionType.BASIC && file instanceof PsiJavaFile) {
    if (semicolonNeeded(context)) {
      context.setFileCopyPatcher(new DummyIdentifierPatcher(CompletionInitializationContext.DUMMY_IDENTIFIER.trim() + ";"));
      return;
    }
    final PsiElement element=file.findElementAt(context.getStartOffset());
    if (psiElement().inside(PsiAnnotation.class).accepts(element)) {
      return;
    }
    context.setFileCopyPatcher(new DummyIdentifierPatcher(CompletionInitializationContext.DUMMY_IDENTIFIER.trim()));
  }
}
