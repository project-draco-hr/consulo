{
  if (patch instanceof TextFilePatch) {
    return create((TextFilePatch)patch);
  }
 else   if (patch instanceof BinaryFilePatch) {
    return create((BinaryFilePatch)patch);
  }
 else   if (patch instanceof ShelveChangesManager.ShelvedBinaryFilePatch) {
    return create((ShelveChangesManager.ShelvedBinaryFilePatch)patch);
  }
  throw new IllegalStateException();
}
