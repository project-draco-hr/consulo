{
  PsiReference[] references=element.getReferences();
  for (  PsiReference reference : references) {
    if (!(reference instanceof FileReferenceOwner) || XmlHighlightVisitor.skipValidation(element)) {
      continue;
    }
    boolean isHtml=HtmlUtil.isHtmlTagContainingFile(element);
    if (isHtml ^ isForHtml()) {
      continue;
    }
    if (isHtml) {
      PsiElement parent=element.getParent();
      if (parent instanceof XmlAttribute && "href".equals(((XmlAttribute)parent).getLocalName())) {
        continue;
      }
    }
    if (XmlHighlightVisitor.hasBadResolve(reference,false)) {
      holder.registerProblem(reference,ProblemsHolder.unresolvedReferenceMessage(reference),isHtml ? ProblemHighlightType.GENERIC_ERROR_OR_WARNING : ProblemHighlightType.LIKE_UNKNOWN_SYMBOL);
    }
  }
}
