{
  final PsiClass cls=getProviderClass(PsiUtil.getTopLevelClass(getElement()));
  if (cls != null) {
    PsiMethod[] methods=cls.getAllMethods();
    @NonNls String val=getValue();
    for (    PsiMethod method : methods) {
      PsiAnnotation dataProviderAnnotation=AnnotationUtil.findAnnotation(method,DataProvider.class.getName());
      if (dataProviderAnnotation != null) {
        PsiNameValuePair[] values=dataProviderAnnotation.getParameterList().getAttributes();
        for (        PsiNameValuePair value : values) {
          if ("name".equals(value.getName())) {
            final PsiAnnotationMemberValue dataProviderMethodName=value.getValue();
            if (dataProviderMethodName != null && val.equals(StringUtil.unquoteString(dataProviderMethodName.getText()))) {
              return method;
            }
          }
        }
        if (val.equals(method.getName())) {
          return method;
        }
      }
    }
  }
  return null;
}
