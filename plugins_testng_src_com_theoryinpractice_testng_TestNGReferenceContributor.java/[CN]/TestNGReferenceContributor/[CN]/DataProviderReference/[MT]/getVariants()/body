{
  final List<Object> list=new ArrayList<Object>();
  final PsiClass topLevelClass=PsiUtil.getTopLevelClass(getElement());
  final PsiClass cls=getProviderClass(topLevelClass);
  final boolean needToBeStatic=cls != topLevelClass;
  if (cls != null) {
    final PsiMethod current=PsiTreeUtil.getParentOfType(getElement(),PsiMethod.class);
    final PsiMethod[] methods=cls.getAllMethods();
    for (    PsiMethod method : methods) {
      if (current != null && method.getName().equals(current.getName()))       continue;
      if (needToBeStatic) {
        if (!method.hasModifierProperty(PsiModifier.STATIC))         continue;
      }
 else {
        if (cls != method.getContainingClass() && method.hasModifierProperty(PsiModifier.PRIVATE))         continue;
      }
      final PsiAnnotation dataProviderAnnotation=AnnotationUtil.findAnnotation(method,DataProvider.class.getName());
      if (dataProviderAnnotation != null) {
        boolean nameFoundInAttributes=false;
        PsiNameValuePair[] values=dataProviderAnnotation.getParameterList().getAttributes();
        for (        PsiNameValuePair value : values) {
          if ("name".equals(value.getName())) {
            final PsiAnnotationMemberValue memberValue=value.getValue();
            if (memberValue != null) {
              list.add(LookupValueFactory.createLookupValue(StringUtil.unquoteString(memberValue.getText()),null));
              nameFoundInAttributes=true;
              break;
            }
          }
        }
        if (!nameFoundInAttributes) {
          list.add(LookupValueFactory.createLookupValue(method.getName(),null));
        }
      }
    }
  }
  return list.toArray();
}
