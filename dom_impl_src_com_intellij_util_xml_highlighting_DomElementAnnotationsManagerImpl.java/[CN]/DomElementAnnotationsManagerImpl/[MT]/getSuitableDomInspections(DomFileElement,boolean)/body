{
  Class rootType=fileElement.getRootElementClass();
  final InspectionProfile profile=getInspectionProfile(fileElement);
  final List<DomElementsInspection> inspections=new SmartList<DomElementsInspection>();
  for (  final InspectionProfileEntry profileEntry : profile.getInspectionTools(fileElement.getFile())) {
    if (!enabledOnly || profile.isToolEnabled(HighlightDisplayKey.find(profileEntry.getShortName()),fileElement.getFile())) {
      ContainerUtil.addIfNotNull(getSuitableInspection(profileEntry,rootType),inspections);
    }
  }
  return inspections;
}
