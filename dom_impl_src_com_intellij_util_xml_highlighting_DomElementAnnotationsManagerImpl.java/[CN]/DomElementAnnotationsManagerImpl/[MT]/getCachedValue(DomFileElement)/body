{
  final CachedValuesManager cachedValuesManager=PsiManager.getInstance(fileElement.getManager().getProject()).getCachedValuesManager();
  return cachedValuesManager.createCachedValue(new CachedValueProvider<DomElementsProblemsHolder>(){
    public Result<DomElementsProblemsHolder> compute(){
      final DomElementsProblemsHolder holder=new DomElementsProblemsHolderImpl();
      final DomElement rootElement=fileElement.getRootElement();
      final Class<?> type=DomReflectionUtil.getRawType(rootElement.getDomElementType());
      final List<DomElementsAnnotator> list=myClass2Annotator.get(type);
      if (list != null) {
        for (        DomElementsAnnotator annotator : list) {
          annotator.annotate(rootElement,holder);
        }
      }
 else {
        myAnnotationBasedDomElementsAnnotator.annotate(rootElement,holder);
      }
      return new Result<DomElementsProblemsHolder>(holder,fileElement.getFile());
    }
  }
,false);
}
