{
synchronized (LOCK) {
    final DomFileElement<DomElement> root=element.getRoot();
    if (!isHolderOutdated(root)) {
      final DomElementsProblemsHolder holder=getProblemHolder(element);
      if (holder instanceof DomElementsProblemsHolderImpl) {
        DomElementsProblemsHolderImpl holderImpl=(DomElementsProblemsHolderImpl)holder;
        final List<DomElementsInspection> suitableInspections=getSuitableDomInspections(root,true);
        final DomElementsInspection mockInspection=getMockInspection(root);
        final boolean annotatorsFinished=mockInspection == null || holderImpl.isInspectionCompleted(mockInspection);
        final boolean inspectionsFinished=areInspectionsFinished(holderImpl,suitableInspections);
        if (annotatorsFinished) {
          if (suitableInspections.isEmpty() || inspectionsFinished)           return DomHighlightStatus.INSPECTIONS_FINISHED;
          return DomHighlightStatus.ANNOTATORS_FINISHED;
        }
      }
    }
    return DomHighlightStatus.NONE;
  }
}
