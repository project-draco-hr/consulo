{
  final PsiManager psiManager=field.getManager();
  final Project project=psiManager.getProject();
  final GlobalSearchScope scope=GlobalSearchScope.allScope(project);
  final String qualifiedName=StringUtil.getQualifiedName(newPackageName,newClassName);
  @NonNls String getter=null;
  if (myGenerateAccessors) {
    getter=PropertyUtil.suggestGetterName(field);
  }
 else {
    final PsiMethod fieldGetter=PropertyUtil.findPropertyGetter(sourceClass,field.getName(),false,false);
    if (fieldGetter != null && isInMovedElement(fieldGetter)) {
      getter=fieldGetter.getName();
    }
  }
  @NonNls String setter=null;
  if (myGenerateAccessors) {
    setter=PropertyUtil.suggestSetterName(field);
  }
 else {
    final PsiMethod fieldSetter=PropertyUtil.findPropertySetter(sourceClass,field.getName(),false,false);
    if (fieldSetter != null && isInMovedElement(fieldSetter)) {
      setter=fieldSetter.getName();
    }
  }
  final boolean isStatic=field.hasModifierProperty(PsiModifier.STATIC);
  for (  PsiReference reference : ReferencesSearch.search(field,scope)) {
    final PsiElement element=reference.getElement();
    if (isInMovedElement(element)) {
      continue;
    }
    if (element instanceof PsiReferenceExpression) {
      final PsiReferenceExpression exp=(PsiReferenceExpression)element;
      if (RefactoringUtil.isPlusPlusOrMinusMinus(exp.getParent())) {
        usages.add(isStatic ? new ReplaceStaticVariableIncrementDecrement(exp,qualifiedName) : new ReplaceInstanceVariableIncrementDecrement(exp,delegateFieldName,setter,getter,field.getName()));
      }
 else       if (RefactoringUtil.isAssignmentLHS(exp)) {
        usages.add(isStatic ? new ReplaceStaticVariableAssignment(exp,qualifiedName) : new ReplaceInstanceVariableAssignment(PsiTreeUtil.getParentOfType(exp,PsiAssignmentExpression.class),delegateFieldName,setter,getter,field.getName()));
      }
 else {
        usages.add(isStatic ? new ReplaceStaticVariableAccess(exp,qualifiedName,enumConstants.contains(field)) : new ReplaceInstanceVariableAccess(exp,delegateFieldName,getter,field.getName()));
      }
      if (!isStatic) {
        delegationRequired=true;
      }
    }
 else     if (element instanceof PsiDocTagValue) {
      usages.add(new BindJavadocReference(element,qualifiedName,field.getName()));
    }
  }
}
