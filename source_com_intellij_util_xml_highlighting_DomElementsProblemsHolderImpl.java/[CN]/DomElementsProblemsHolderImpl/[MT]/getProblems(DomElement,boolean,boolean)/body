{
  if (!withChildren)   return getProblems(domElement);
  final Set<DomElementProblemDescription> problems=new HashSet<DomElementProblemDescription>();
  domElement.accept(new DomElementVisitor(){
    public void visitDomElement(    DomElement element){
      problems.addAll(getProblems(element,includeXmlProblems));
      element.acceptChildren(this);
    }
  }
);
  return new ArrayList<DomElementProblemDescription>(problems);
}
