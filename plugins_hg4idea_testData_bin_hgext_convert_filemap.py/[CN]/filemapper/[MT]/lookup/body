def lookup(self, name, mapping):
    for (pre, suf) in rpairs(name):
        try:
            return (mapping[pre], pre, suf)
        except KeyError:
            pass
    return ('', name, '')
