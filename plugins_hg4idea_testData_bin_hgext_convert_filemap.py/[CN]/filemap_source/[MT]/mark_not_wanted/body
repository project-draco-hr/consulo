def mark_not_wanted(self, rev, p):
    if (p is None):
        self.parentmap[rev] = SKIPREV
        self.wantedancestors[rev] = set((SKIPREV,))
        return
    self.parentmap[rev] = self.parentmap[p]
    self.wantedancestors[rev] = self.wantedancestors[p]
