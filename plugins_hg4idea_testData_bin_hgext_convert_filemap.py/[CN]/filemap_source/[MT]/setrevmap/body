def setrevmap(self, revmap):
    self._rebuilt = (not revmap)
    seen = {SKIPREV: SKIPREV, }
    dummyset = set()
    converted = []
    for rev in revmap.order:
        mapped = revmap[rev]
        wanted = (mapped not in seen)
        if wanted:
            seen[mapped] = rev
            self.parentmap[rev] = rev
        else:
            self.parentmap[rev] = seen[mapped]
        self.wantedancestors[rev] = dummyset
        arg = seen[mapped]
        if (arg == SKIPREV):
            arg = None
        converted.append((rev, wanted, arg))
    self.convertedorder = converted
    return self.base.setrevmap(revmap)
