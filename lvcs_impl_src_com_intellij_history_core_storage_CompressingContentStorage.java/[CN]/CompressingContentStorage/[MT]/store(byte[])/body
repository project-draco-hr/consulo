{
  try {
    ByteArrayOutputStream output=new ByteArrayOutputStream();
    OutputStream s=createDeflaterOutputStream(output);
    s.write(content);
    s.close();
    myDeflater.reset();
    return mySubject.store(output.toByteArray());
  }
 catch (  IOException e) {
    throw new BrokenStorageException(e);
  }
}
