{
  try {
    ByteArrayOutputStream output=new ByteArrayOutputStream();
    myDeflater.reset();
    OutputStream s=createDeflaterOutputStream(output);
    try {
      s.write(content);
    }
  finally {
      s.close();
      myDeflater.reset();
    }
    return mySubject.store(output.toByteArray());
  }
 catch (  IOException e) {
    throw new BrokenStorageException(e);
  }
}
