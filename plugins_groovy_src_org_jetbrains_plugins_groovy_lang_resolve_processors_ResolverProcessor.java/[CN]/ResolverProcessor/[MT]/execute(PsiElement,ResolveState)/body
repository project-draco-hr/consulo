{
  if (element instanceof PsiLocalVariable) {
    return true;
  }
  if (myResolveTargetKinds.contains(getResolveKind(element))) {
    PsiNamedElement namedElement=(PsiNamedElement)element;
    PsiSubstitutor substitutor=state.get(PsiSubstitutor.KEY);
    if (substitutor == null)     substitutor=PsiSubstitutor.EMPTY;
    if (myTypeArguments.length > 0 && namedElement instanceof PsiClass) {
      substitutor=substitutor.putAll((PsiClass)namedElement,myTypeArguments);
    }
    if (namedElement instanceof PsiClass) {
      final PsiClass aClass=(PsiClass)namedElement;
      if (myProcessedClasses == null)       myProcessedClasses=new HashSet<String>();
      if (!myProcessedClasses.add(aClass.getQualifiedName())) {
        return true;
      }
    }
    boolean isAccessible=isAccessible(namedElement);
    final GroovyPsiElement resolveContext=state.get(RESOLVE_CONTEXT);
    boolean isStaticsOK=isStaticsOK(namedElement,resolveContext);
    addCandidate(new GroovyResolveResultImpl(namedElement,resolveContext,substitutor,isAccessible,isStaticsOK));
    return !isAccessible;
  }
  return true;
}
