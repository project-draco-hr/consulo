{
  if (origin.equals(getActiveTask()))   return;
  saveActiveTask();
  if (clearContext) {
    myContextManager.clearContext();
  }
  myContextManager.restoreContext(origin);
  final LocalTask task=doActivate(origin,true);
  if (!isVcsEnabled())   return;
  List<ChangeListInfo> changeLists=task.getChangeLists();
  if (!changeLists.isEmpty()) {
    String id=changeLists.get(0).id;
    LocalChangeList changeList=myChangeListManager.getChangeList(id);
    if (changeList != null) {
      myChangeListManager.setDefaultChangeList(changeList);
    }
    return;
  }
  if (createChangelist) {
    String name=getChangelistName(origin);
    String comment=TaskUtil.getChangeListComment(origin);
    createChangeList(task,name,comment);
  }
}
