{
  myConfig.clearContext=clearContext;
  saveActiveTask();
  if (clearContext) {
    myContextManager.clearContext();
  }
  myContextManager.restoreContext(origin);
  final LocalTask task=doActivate(origin,true);
  if (isVcsEnabled()) {
    List<ChangeListInfo> changeLists=getOpenChangelists(task);
    if (changeLists.isEmpty()) {
      myConfig.createChangelist=createChangelist;
    }
    if (createChangelist) {
      if (changeLists.isEmpty()) {
        String name=getChangelistName(task);
        String comment=TaskUtil.getChangeListComment(this,origin);
        createChangeList(task,name,comment);
      }
 else {
        String id=changeLists.get(0).id;
        LocalChangeList changeList=myChangeListManager.getChangeList(id);
        if (changeList != null) {
          myChangeListManager.setDefaultChangeList(changeList);
        }
      }
    }
  }
}
