{
synchronized (myTasks) {
    final List<LocalTaskImpl> filteredTasks=ContainerUtil.filter(myTasks.values(),new Condition<LocalTaskImpl>(){
      @Override public boolean value(      final LocalTaskImpl task){
        return withClosed || !task.isClosedLocally();
      }
    }
);
    return filteredTasks.toArray(new LocalTaskImpl[filteredTasks.size()]);
  }
}
