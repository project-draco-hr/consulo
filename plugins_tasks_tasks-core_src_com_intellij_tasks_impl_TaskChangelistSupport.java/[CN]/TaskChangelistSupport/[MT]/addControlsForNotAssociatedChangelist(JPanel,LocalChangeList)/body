{
  final JCheckBox checkBox=new JCheckBox("Associate with:");
  checkBox.setMnemonic('A');
  checkBox.setToolTipText("Reload context (e.g. open editors) when changelist is set active");
  ButtonGroup group=new ButtonGroup();
  final JRadioButton withCurrent=new JRadioButton("current task");
  withCurrent.setMnemonic('c');
  group.add(withCurrent);
  JRadioButton withNew=new JRadioButton("new task");
  withNew.setMnemonic('n');
  group.add(withNew);
  JPanel panel=new JPanel(new BorderLayout());
  panel.add(withCurrent,BorderLayout.NORTH);
  panel.add(withNew,BorderLayout.SOUTH);
  bottomPanel.add(Box.createHorizontalStrut(UIUtil.DEFAULT_HGAP));
  bottomPanel.add(checkBox);
  bottomPanel.add(Box.createHorizontalStrut(UIUtil.DEFAULT_HGAP));
  bottomPanel.add(panel);
  checkBox.setSelected(myTaskManager.getState().associateWithTaskForNewChangelist);
  if (myTaskManager.getState().associateWithCurrentTaskForNewChangelist) {
    withCurrent.setSelected(true);
  }
 else {
    withNew.setSelected(true);
  }
  return new Consumer<LocalChangeList>(){
    public void consume(    LocalChangeList changeList){
      myTaskManager.getState().associateWithTaskForNewChangelist=checkBox.isSelected();
      myTaskManager.getState().associateWithCurrentTaskForNewChangelist=withCurrent.isSelected();
      if (checkBox.isSelected()) {
        myTaskManager.associateWithTask(changeList,withCurrent.isSelected());
      }
    }
  }
;
}
