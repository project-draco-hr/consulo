{
  String url=null;
  if (path.startsWith("/")) {
    final String relativePath=new File(myRootPath).getParent() + "/" + path;
    final File file=new File(relativePath);
    if (file.exists()) {
      url=VfsUtil.pathToUrl(relativePath);
    }
 else     if (new File(path).exists()) {
      url=VfsUtil.pathToUrl(path);
    }
 else     if (path.indexOf('/') < path.length() - 1) {
      final String relativeToOtherModule=path.substring(path.indexOf('/',1) + 1);
      final Module otherModule=ModuleManager.getInstance(myProject).findModuleByName(path.substring(1,path.indexOf('/',1)));
      if (otherModule != null) {
        final VirtualFile[] contentRoots=ModuleRootManager.getInstance(otherModule).getContentRoots();
        if (contentRoots.length > 0) {
          final File relativeToOtherModuleFile=new File(contentRoots[0].getPath(),relativeToOtherModule);
          if (relativeToOtherModuleFile.exists()) {
            url=VfsUtil.pathToUrl(relativeToOtherModuleFile.getPath());
          }
        }
      }
 else       if (myCurrentRoots != null) {
        for (        String currentRoot : myCurrentRoots) {
          final File relativeToOtherModuleFile=new File(currentRoot,relativeToOtherModule);
          if (relativeToOtherModuleFile.exists()) {
            url=VfsUtil.pathToUrl(relativeToOtherModuleFile.getPath());
            break;
          }
        }
      }
    }
  }
  if (url == null) {
    final String absPath=myRootPath + "/" + path;
    if (new File(absPath).exists()) {
      url=VfsUtil.pathToUrl(absPath);
    }
 else {
      url=VfsUtil.pathToUrl(path);
    }
  }
  final VirtualFile localFile=VirtualFileManager.getInstance().findFileByUrl(url);
  if (localFile != null) {
    final VirtualFile jarFile=JarFileSystem.getInstance().getJarRootForLocalFile(localFile);
    if (jarFile != null) {
      url=jarFile.getUrl();
    }
  }
  return url;
}
