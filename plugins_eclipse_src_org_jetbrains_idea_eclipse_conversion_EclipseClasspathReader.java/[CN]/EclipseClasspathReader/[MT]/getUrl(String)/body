{
  String url=null;
  if (path.startsWith("/")) {
    final String relativePath=new File(myRootPath).getParent() + "/" + path;
    final File file=new File(relativePath);
    if (file.exists()) {
      url=VfsUtil.pathToUrl(relativePath);
    }
 else     if (new File(path).exists()) {
      url=VfsUtil.pathToUrl(path);
    }
 else {
      final String rootPath=getRootPath(path);
      final String relativeToRootPath=getRelativeToRootPath(path);
      final Module otherModule=ModuleManager.getInstance(myProject).findModuleByName(rootPath);
      if (otherModule != null) {
        url=relativeToOtherModule(otherModule,relativeToRootPath);
      }
 else       if (myCurrentRoots != null) {
        url=relativeToContentRoots(myCurrentRoots,rootPath,relativeToRootPath);
      }
    }
  }
  if (url == null) {
    final String absPath=myRootPath + "/" + path;
    if (new File(absPath).exists()) {
      url=VfsUtil.pathToUrl(absPath);
    }
 else {
      url=VfsUtil.pathToUrl(path);
    }
  }
  final VirtualFile localFile=VirtualFileManager.getInstance().findFileByUrl(url);
  if (localFile != null) {
    final VirtualFile jarFile=JarFileSystem.getInstance().getJarRootForLocalFile(localFile);
    if (jarFile != null) {
      url=jarFile.getUrl();
    }
  }
  return url;
}
