{
  final LibraryTablesRegistrar tablesRegistrar=LibraryTablesRegistrar.getInstance();
  Library lib=tablesRegistrar.getLibraryTable().getLibraryByName(name);
  if (lib == null) {
    lib=tablesRegistrar.getLibraryTable(myProject).getLibraryByName(name);
  }
  if (lib == null) {
    for (    LibraryTable table : tablesRegistrar.getCustomLibraryTables()) {
      lib=table.getLibraryByName(name);
      if (lib != null) {
        break;
      }
    }
  }
  if (lib != null) {
    rootModel.addLibraryEntry(lib).setExported(exported);
  }
 else {
    unknownLibraries.add(name);
    rootModel.addInvalidLibrary(name,notFoundLibraryLevel).setExported(exported);
  }
}
