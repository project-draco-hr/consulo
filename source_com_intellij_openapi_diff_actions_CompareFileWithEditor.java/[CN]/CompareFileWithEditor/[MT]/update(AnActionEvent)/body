{
  boolean enabled=true;
  Presentation presentation=e.getPresentation();
  try {
    FileEditorContents diffData=getDiffData(e.getDataContext());
    presentation.setText(DiffBundle.message("diff.compare.element.type.with.editor.action.name",diffData.getElementPresentation().getKind().getTypeNum()));
  }
 catch (  DataAccessor.NoDataException e1) {
    presentation.setText(DiffBundle.message("compare.with.editor.action.name"));
    enabled=false;
  }
  if (ActionPlaces.isPopupPlace(e.getPlace())) {
    presentation.setVisible(enabled);
  }
 else {
    presentation.setEnabled(enabled);
  }
}
