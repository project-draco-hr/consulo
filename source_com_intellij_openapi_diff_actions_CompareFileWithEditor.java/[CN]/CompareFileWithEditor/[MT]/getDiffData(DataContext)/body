{
  if (!checkSelection(dataContext))   throw new DataAccessor.NoDataException("Wrong selection");
  Project project=DataAccessor.PROJECT.getNotNull(dataContext);
  PsiElement element=PRIMARY_SOURCE.getNotNull(dataContext);
  PsiFile psiFile=element.getContainingFile();
  if (psiFile != null)   element=psiFile;
  Document document=EDITING_DOCUMENT.getNotNull(dataContext);
  if (isSameFile(document,element))   throw new DataAccessor.NoDataException("Same file");
  DiffContent diffContent=DiffContentFactory.fromPsiElement(element);
  if (diffContent == null || diffContent.getDocument() == null)   throw new DataAccessor.NoDataException("No content");
  return new FileEditorContents(document,element,project);
}
