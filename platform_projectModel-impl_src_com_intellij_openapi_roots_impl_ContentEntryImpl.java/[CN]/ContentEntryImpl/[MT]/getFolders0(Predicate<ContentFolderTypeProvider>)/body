{
  List<ContentFolder> list=new ArrayList<ContentFolder>();
  for (  ContentFolder contentFolder : myContentFolders) {
    if (predicate.apply(contentFolder.getType())) {
      list.add(contentFolder);
    }
  }
  if (predicate.apply(ExcludedContentFolderTypeProvider.getInstance())) {
    for (    DirectoryIndexExcludePolicy excludePolicy : Extensions.getExtensions(DirectoryIndexExcludePolicy.EP_NAME,getRootModel().getProject())) {
      final VirtualFilePointer[] files=excludePolicy.getExcludeRootsForModule(getRootModel());
      for (      VirtualFilePointer file : files) {
        ContentFolderImpl contentFolder=new ContentFolderImpl(file,null,ExcludedContentFolderTypeProvider.getInstance(),this);
        Disposer.register(this,contentFolder);
        contentFolder.setSynthetic();
        list.add(contentFolder);
      }
    }
  }
  return list;
}
