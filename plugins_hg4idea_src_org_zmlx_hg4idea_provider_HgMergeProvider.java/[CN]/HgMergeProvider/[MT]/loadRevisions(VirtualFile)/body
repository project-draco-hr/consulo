{
  final MergeData mergeData=new MergeData();
  final VcsRunnable runnable=new VcsRunnable(){
    public void run() throws VcsException {
      final HgWorkingCopyRevisionsCommand command=new HgWorkingCopyRevisionsCommand(myProject);
      final Pair<HgRevisionNumber,HgRevisionNumber> parents=command.parents(HgUtil.getHgRootOrThrow(myProject,file),file);
      final HgRevisionNumber grandParent=command.parents(HgUtil.getHgRootOrThrow(myProject,file),file,parents.second).first;
      final HgFile hgFile=new HgFile(myProject,file);
      final HgContentRevision server=new HgContentRevision(myProject,hgFile,parents.first);
      final HgContentRevision local=new HgContentRevision(myProject,hgFile,parents.second);
      final HgContentRevision base=new HgContentRevision(myProject,hgFile,grandParent);
      mergeData.ORIGINAL=base.getContentAsBytes();
      mergeData.CURRENT=local.getContentAsBytes();
      mergeData.LAST=server.getContentAsBytes();
    }
  }
;
  VcsUtil.runVcsProcessWithProgress(runnable,VcsBundle.message("multiple.file.merge.loading.progress.title"),false,myProject);
  return mergeData;
}
