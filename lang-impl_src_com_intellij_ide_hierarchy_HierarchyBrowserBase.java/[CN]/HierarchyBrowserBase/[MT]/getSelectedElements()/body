{
  JTree currentTree=getCurrentTree();
  if (currentTree == null)   return PsiElement.EMPTY_ARRAY;
  TreePath[] paths=currentTree.getSelectionPaths();
  ArrayList<PsiElement> psiElements=new ArrayList<PsiElement>();
  for (  TreePath path : paths) {
    PsiElement psiElement=extractPsiElement(path);
    if (psiElement == null || !psiElement.isValid())     continue;
    psiElements.add(psiElement);
  }
  return psiElements.toArray(new PsiElement[psiElements.size()]);
}
