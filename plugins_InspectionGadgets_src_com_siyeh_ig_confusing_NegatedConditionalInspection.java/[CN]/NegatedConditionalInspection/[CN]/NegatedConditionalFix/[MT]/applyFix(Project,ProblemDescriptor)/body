{
  if (ReadonlyStatusHandler.getInstance(project).ensureFilesWritable(new VirtualFile[]{descriptor.getPsiElement().getContainingFile().getVirtualFile()}).hasReadonlyFiles())   return;
  final PsiConditionalExpression exp=(PsiConditionalExpression)descriptor.getPsiElement().getParent();
  final PsiExpression elseBranch=exp.getElseExpression();
  final PsiExpression thenBranch=exp.getThenExpression();
  final PsiExpression condition=exp.getCondition();
  final String negatedCondition=BoolUtils.getNegatedExpressionText(condition);
  final String newStatement=negatedCondition + '?' + elseBranch.getText()+ ':'+ thenBranch.getText();
  replaceExpression(project,exp,newStatement);
}
