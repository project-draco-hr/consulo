{
  String range;
  GitRevisionNumber newRev;
  if (newRevision == null) {
    range=oldRevision;
    newRev=null;
  }
 else {
    range=oldRevision + ".." + newRevision;
    newRev=loadRevision(project,root,newRevision);
  }
  String output=getDiffOutput(project,root,range,dirtyPaths);
  Collection<Change> changes=new ArrayList<Change>();
  parseChanges(project,root,newRev,loadRevision(project,root,oldRevision),output,changes,Collections.<String>emptySet());
  return changes;
}
