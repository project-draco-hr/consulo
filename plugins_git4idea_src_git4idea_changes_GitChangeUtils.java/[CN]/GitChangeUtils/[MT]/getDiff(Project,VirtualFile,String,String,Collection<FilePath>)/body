{
  LOG.assertTrue(oldRevision != null || newRevision != null,"Both old and new revisions can't be null");
  String range;
  GitRevisionNumber newRev;
  GitRevisionNumber oldRev;
  if (newRevision == null) {
    range=oldRevision + "..";
    oldRev=loadRevision(project,root,oldRevision);
    newRev=null;
  }
 else   if (oldRevision == null) {
    range=".." + newRevision;
    oldRev=null;
    newRev=loadRevision(project,root,newRevision);
  }
 else {
    range=oldRevision + ".." + newRevision;
    oldRev=loadRevision(project,root,oldRevision);
    newRev=loadRevision(project,root,newRevision);
  }
  String output=getDiffOutput(project,root,range,dirtyPaths);
  Collection<Change> changes=new ArrayList<Change>();
  parseChanges(project,root,newRev,oldRev,output,changes,Collections.<String>emptySet());
  return changes;
}
