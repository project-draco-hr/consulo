{
  if (element == null)   return;
  for (Iterator i=element.getChildren().iterator(); i.hasNext(); ) {
    try {
      Element child=(Element)i.next();
      if ("component".equals(child.getName())) {
        String interfaceClass=child.getChildText("interface-class");
        String implClass=child.getChildText("implementation-class");
        if (interfaceClass == null)         interfaceClass=implClass;
        Map<String,String> options=null;
        final List optionElements=child.getChildren("option");
        if (optionElements.size() != 0) {
          options=new HashMap<String,String>();
          for (Iterator j=optionElements.iterator(); j.hasNext(); ) {
            Element e=(Element)j.next();
            String name=e.getAttributeValue("name");
            String value=e.getAttributeValue("value");
            options.put(name,value);
          }
        }
        if (!isComponentSuitable(options))         continue;
        ClassLoader loader=null;
        if (descriptor != null) {
          loader=descriptor.getLoader();
        }
        if (loader == null) {
          loader=getClass().getClassLoader();
        }
        registerComponent(Class.forName(interfaceClass,true,loader),Class.forName(implClass,true,loader),options,true,isTrue(options,"lazy"));
      }
    }
 catch (    Exception e) {
      if (descriptor != null) {
        LOG.error(new PluginException(e,descriptor));
      }
 else {
        LOG.error(e);
      }
    }
catch (    Error e) {
      if (descriptor != null) {
        LOG.error(new PluginException(e,descriptor));
      }
 else {
        throw e;
      }
    }
  }
}
