{
  SoftReference reference=intermediateCache.get(realKey);
  if (reference != null) {
    if (depth == 0) {
      throw new AssertionError("Memoized values with empty stack");
    }
    return reference.get();
  }
  return null;
}
