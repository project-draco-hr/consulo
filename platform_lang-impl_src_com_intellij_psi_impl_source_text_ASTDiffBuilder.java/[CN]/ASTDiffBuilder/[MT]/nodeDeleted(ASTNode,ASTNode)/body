{
  PsiElement psiParent=parent.getPsi();
  PsiElement psiChild=myIsPhysicalScope ? child.getPsi() : null;
  if (psiParent != null && psiChild != null) {
    PsiTreeChangeEventImpl event=new PsiTreeChangeEventImpl(myPsiManager);
    event.setParent(psiParent);
    event.setChild(psiChild);
    myPsiManager.beforeChildRemoval(event);
  }
  myEvent.addElementaryChange(child,ChangeInfoImpl.create(ChangeInfo.REMOVED,child));
  ((TreeElement)child).rawRemove();
  ((CompositeElement)parent).subtreeChanged();
  if (DEBUG) {
    DebugUtil.checkTreeStructure(parent);
  }
}
