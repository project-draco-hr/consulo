{
  final PsiAnnotationMemberValue value=delegatesTo.findAttributeValue("value");
  if (value instanceof GrReferenceExpression) {
    return extractTypeFromClassType(((GrReferenceExpression)value).getType());
  }
 else   if (value instanceof PsiClassObjectAccessExpression) {
    return extractTypeFromClassType(((PsiClassObjectAccessExpression)value).getType());
  }
 else   if (value == null || value instanceof PsiLiteralExpression && ((PsiLiteralExpression)value).getType() == PsiType.NULL || value instanceof GrLiteral && ((GrLiteral)value).getType() == PsiType.NULL) {
    String target=inferStringAttribute(delegatesTo,"target");
    if (target == null)     return null;
    final int parameter=findTargetParameter(delegatesTo,target);
    if (parameter >= 0) {
      return map[parameter].type;
    }
  }
 else   if (value instanceof PsiExpression) {
    return ((PsiExpression)value).getType();
  }
  return null;
}
