{
  afterStartNotified(new Runnable(){
    public void run(){
      LOG.assertTrue(isStartNotified(),"Start notify is not called");
      if (myState.compareAndSet(STATE_RUNNING,STATE_TERMINATING)) {
        try {
          fireProcessWillTerminate(willBeDestroyed);
        }
 catch (        Throwable e) {
          LOG.error(e);
        }
      }
      if (myState.compareAndSet(STATE_TERMINATING,STATE_TERMINATED)) {
        try {
          myEventMulticaster.processTerminated(new ProcessEvent(ProcessHandler.this,exitCode));
        }
 catch (        Throwable e) {
          LOG.error(e);
        }
 finally {
          myWaitSemaphore.up();
        }
      }
    }
  }
);
}
