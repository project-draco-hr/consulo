{
  final DetectedJavaChangeInfo fromMethod=createFromMethod(method);
  if (fromMethod == null)   return null;
  if (!this.equals(fromMethod)) {
    if (!createParametersInfo(fromMethod.newParms))     return null;
    if ((fromMethod.newReturnType != null && getNewReturnType() == null) || (fromMethod.newReturnType == null && getNewReturnType() != null) || (fromMethod.newReturnType != null && getNewReturnType() != null && !Comparing.strEqual(getNewReturnType().getTypeText(),fromMethod.newReturnType.getTypeText()))) {
      final String visibility=getNewVisibility();
      if (Comparing.strEqual(visibility,PsiModifier.PRIVATE) && !isArrayToVarargs() && !isExceptionSetOrOrderChanged()&& !isExceptionSetChanged()&& !isNameChanged()&& !isParameterSetOrOrderChanged()&& !isParameterNamesChanged()&& !isParameterTypesChanged()) {
        return null;
      }
    }
    try {
      final DetectedJavaChangeInfo javaChangeInfo=new DetectedJavaChangeInfo(newVisibility,method,fromMethod.newReturnType,fromMethod.newParms,getNewExceptions(),method.getName(),getOldName()){
        @Override protected void fillOldParams(        PsiMethod method){
          oldParameterNames=DetectedJavaChangeInfo.this.getOldParameterNames();
          oldParameterTypes=DetectedJavaChangeInfo.this.getOldParameterTypes();
          if (!method.isConstructor()) {
            try {
              isReturnTypeChanged=isReturnTypeChanged || (DetectedJavaChangeInfo.this.getNewReturnType() != null ? !Comparing.strEqual(DetectedJavaChangeInfo.this.getNewReturnType().getTypeText(),newReturnType.getTypeText()) : newReturnType != null);
            }
 catch (            IncorrectOperationException e) {
              isReturnTypeChanged=true;
            }
          }
          for (int i=0, length=Math.min(newParms.length,oldParameterNames.length); i < length; i++) {
            ParameterInfoImpl parm=newParms[i];
            if (parm.getName().equals(oldParameterNames[i]) && parm.getTypeText().equals(oldParameterTypes[i])) {
              parm.oldParameterIndex=i;
            }
          }
        }
      }
;
      javaChangeInfo.setSuperMethod(getSuperMethod());
      return javaChangeInfo;
    }
 catch (    IncorrectOperationException e) {
      return null;
    }
  }
  return this;
}
