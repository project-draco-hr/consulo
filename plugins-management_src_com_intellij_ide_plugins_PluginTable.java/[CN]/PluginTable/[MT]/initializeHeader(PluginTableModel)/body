{
  final JTableHeader header=getTableHeader();
  header.setDefaultRenderer(new PluginTableHeaderRenderer(model));
  header.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      int column=getTableHeader().getColumnModel().getColumnIndexAtX(e.getX());
      if (model.sortableProvider.getSortColumn() == column) {
        if (model.sortableProvider.getSortOrder() == SortableColumnModel.SORT_DESCENDING) {
          model.sortableProvider.setSortOrder(SortableColumnModel.SORT_ASCENDING);
        }
 else {
          model.sortableProvider.setSortOrder(SortableColumnModel.SORT_DESCENDING);
        }
      }
 else {
        model.sortableProvider.setSortOrder(SortableColumnModel.SORT_ASCENDING);
        model.sortableProvider.setSortColumn(column);
      }
      final IdeaPluginDescriptor[] selectedObjects=getSelectedObjects();
      model.sortByColumn(column);
      if (selectedObjects != null) {
        select(selectedObjects);
      }
      header.repaint();
    }
  }
);
  header.setReorderingAllowed(false);
}
