{
  final WebFacet webFacet=JavaeeUtil.addFacet(module,WebFacetType.getInstance());
  final AppEngineFacet appEngine=FacetManager.getInstance(module).addFacet(AppEngineFacet.getFacetType(),"AppEngine",webFacet);
  final String sdkPath=FileUtil.toSystemIndependentName(getTestDataPath()) + "sdk/" + version;
  appEngine.getConfiguration().setSdkHomePath(sdkPath);
  final ModifiableRootModel model=ModuleRootManager.getInstance(module).getModifiableModel();
  final Library library=model.getModuleLibraryTable().createLibrary();
  final Library.ModifiableModel libraryModel=library.getModifiableModel();
  libraryModel.addJarDirectory(VfsUtil.pathToUrl(sdkPath) + "/lib",true);
  libraryModel.commit();
  model.commit();
}
