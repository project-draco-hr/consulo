{
  if (element instanceof XmlText) {
    insertText(((XmlText)element).getValue(),displayToPhysical(physicalOffset));
  }
 else {
    final XmlTagImpl tag=(XmlTagImpl)getParentTag();
    final XmlText rightPart=tag.splitText(this,physicalOffset);
    if (rightPart != null) {
      tag.addBefore(element,rightPart);
    }
 else {
      tag.addAfter(element,this);
    }
  }
  return this;
}
