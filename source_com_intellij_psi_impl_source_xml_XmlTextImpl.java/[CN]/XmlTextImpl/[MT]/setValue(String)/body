{
  final ASTNode firstEncodedElement=getPolicy().encodeXmlTextContents(s);
  if (firstEncodedElement == null) {
    delete();
    return;
  }
  final PomModel model=getProject().getModel();
  final XmlAspect aspect=model.getModelAspect(XmlAspect.class);
  model.runTransaction(new PomTransactionBase(this){
    public PomModelEvent run() throws IncorrectOperationException {
      final String oldText=getText();
      replaceAllChildrenToChildrenOf(firstEncodedElement.getTreeParent());
      clearCaches();
      return XmlTextChangedImpl.createXmlTextChanged(model,XmlTextImpl.this,oldText);
    }
  }
,aspect);
}
