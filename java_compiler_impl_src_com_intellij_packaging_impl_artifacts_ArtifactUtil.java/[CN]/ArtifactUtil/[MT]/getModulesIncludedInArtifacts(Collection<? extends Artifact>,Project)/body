{
  final Set<Module> modules=new HashSet<Module>();
  final PackagingElementResolvingContext resolvingContext=ArtifactManager.getInstance(project).getResolvingContext();
  for (  Artifact artifact : artifacts) {
    processPackagingElements(artifact,ModuleOutputElementType.MODULE_OUTPUT_ELEMENT_TYPE,new Processor<ModuleOutputPackagingElement>(){
      @Override public boolean process(      ModuleOutputPackagingElement moduleOutputPackagingElement){
        ContainerUtil.addIfNotNull(modules,moduleOutputPackagingElement.findModule(resolvingContext));
        return true;
      }
    }
,resolvingContext,true);
  }
  return modules;
}
