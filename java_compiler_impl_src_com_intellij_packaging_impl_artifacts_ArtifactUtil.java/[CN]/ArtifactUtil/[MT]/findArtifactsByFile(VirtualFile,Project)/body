{
  final List<Artifact> artifacts=new ArrayList<Artifact>();
  for (  final Artifact artifact : ArtifactManager.getInstance(project).getArtifacts()) {
    processPackagingElements(artifact,PackagingElementFactoryImpl.FILE_COPY_ELEMENT_TYPE,new Processor<FileCopyPackagingElement>(){
      public boolean process(      FileCopyPackagingElement fileCopyPackagingElement){
        final VirtualFile root=fileCopyPackagingElement.findFile();
        if (VfsUtil.isAncestor(root,file,false)) {
          artifacts.add(artifact);
          return false;
        }
        return true;
      }
    }
,ArtifactManager.getInstance(project).getResolvingContext(),true);
  }
  return artifacts;
}
