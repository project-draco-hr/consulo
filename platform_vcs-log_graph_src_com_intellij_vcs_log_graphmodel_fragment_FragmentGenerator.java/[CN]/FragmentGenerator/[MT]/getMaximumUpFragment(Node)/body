{
  GraphFragment fragment=shortFragmentGenerator.getUpShortFragment(startNode);
  if (fragment == null) {
    return null;
  }
  Set<Node> intermediateNodes=new HashSet<Node>(fragment.getIntermediateNodes());
  Node endNode=fragment.getDownNode();
  while ((fragment=shortFragmentGenerator.getUpShortFragment(endNode)) != null && !isUnhiddenNodes.fun(endNode)) {
    intermediateNodes.addAll(fragment.getIntermediateNodes());
    intermediateNodes.add(endNode);
    endNode=fragment.getUpNode();
  }
  if (intermediateNodes.isEmpty()) {
    return null;
  }
 else {
    return new SimpleGraphFragment(endNode,startNode,intermediateNodes);
  }
}
