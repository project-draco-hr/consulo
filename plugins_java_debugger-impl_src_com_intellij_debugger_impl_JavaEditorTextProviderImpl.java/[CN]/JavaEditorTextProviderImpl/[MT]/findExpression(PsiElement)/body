{
  PsiElement e=PsiTreeUtil.getParentOfType(element,PsiVariable.class,PsiExpression.class,PsiMethod.class);
  if (e instanceof PsiVariable) {
  }
 else   if (e instanceof PsiMethod && element.getParent() != e) {
    e=null;
  }
 else   if (e instanceof PsiReferenceExpression) {
    if (e.getParent() instanceof PsiCallExpression) {
      e=e.getParent();
    }
 else     if (e.getParent() instanceof PsiReferenceExpression) {
      PsiElement resolve=((PsiReferenceExpression)e).resolve();
      if (resolve instanceof PsiClass) {
        e=e.getParent();
      }
    }
  }
  if (e instanceof PsiNewExpression) {
    if (((PsiNewExpression)e).getAnonymousClass() != null)     return null;
  }
  return e;
}
