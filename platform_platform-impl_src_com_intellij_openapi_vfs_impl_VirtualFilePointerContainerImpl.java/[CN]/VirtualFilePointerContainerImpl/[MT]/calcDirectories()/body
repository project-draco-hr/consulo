{
  if (myList.isEmpty())   return VirtualFile.EMPTY_ARRAY;
  final ArrayList<VirtualFile> result=new ArrayList<VirtualFile>(myList.size());
  for (  VirtualFilePointer smartVirtualFilePointer : myList) {
    final VirtualFile file=smartVirtualFilePointer.getFile();
    if (file != null && file.isDirectory()) {
      LOG.assertTrue(file.isValid());
      result.add(file);
    }
  }
  return VfsUtil.toVirtualFileArray(result);
}
