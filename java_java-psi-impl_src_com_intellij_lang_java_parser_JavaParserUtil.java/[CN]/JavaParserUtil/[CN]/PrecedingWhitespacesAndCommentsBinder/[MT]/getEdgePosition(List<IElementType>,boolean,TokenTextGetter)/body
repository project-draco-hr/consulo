{
  if (tokens.size() == 0)   return 0;
  for (int idx=tokens.size() - 1; idx >= 0; idx--) {
    if (tokens.get(idx) == JavaDocElementType.DOC_COMMENT)     return idx;
  }
  int result=tokens.size();
  for (int idx=tokens.size() - 1; idx >= 0; idx--) {
    final IElementType tokenType=tokens.get(idx);
    if (ElementType.JAVA_WHITESPACE_BIT_SET.contains(tokenType)) {
      if (StringUtil.getLineBreakCount(getter.get(idx)) > 1)       break;
    }
 else     if (ElementType.JAVA_PLAIN_COMMENT_BIT_SET.contains(tokenType)) {
      if (atStreamEdge || (idx == 0 && myAfterEmptyImport) || (idx > 0 && ElementType.JAVA_WHITESPACE_BIT_SET.contains(tokens.get(idx - 1)) && StringUtil.containsLineBreak(getter.get(idx - 1)))) {
        result=idx;
      }
    }
 else     break;
  }
  return result;
}
