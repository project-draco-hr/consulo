{
  final RangeMarker marker=myMap.get(key);
  if (marker == null)   return -1;
  if (!marker.isValid()) {
    removeOffset(key);
    return -1;
  }
  final int endOffset=marker.getEndOffset();
  if (marker.getStartOffset() != endOffset) {
    addOffset(key,endOffset);
  }
  return endOffset;
}
