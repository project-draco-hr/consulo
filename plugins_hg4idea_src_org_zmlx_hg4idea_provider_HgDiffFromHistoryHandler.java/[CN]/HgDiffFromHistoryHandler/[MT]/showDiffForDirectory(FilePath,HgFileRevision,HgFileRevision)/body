{
  HgRepositoryLocation repository=getLocationFor(path);
  calculateDiffInBackground(repository,path,rev1,rev2,new Consumer<List<Change>>(){
    @Override public void consume(    List<Change> changes){
      showDirDiffDialog(path,rev1 != null ? rev1.getRevisionNumber().getChangeset() : null,rev2 != null ? rev2.getRevisionNumber().getChangeset() : null,changes);
    }
  }
);
}
