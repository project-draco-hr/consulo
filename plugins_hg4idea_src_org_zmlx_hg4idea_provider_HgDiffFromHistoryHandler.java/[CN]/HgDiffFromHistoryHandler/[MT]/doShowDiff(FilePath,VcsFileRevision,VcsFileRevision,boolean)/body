{
  if (!filePath.isDirectory()) {
    VcsHistoryUtil.showDifferencesInBackground(myProject,filePath,revision1,revision2,autoSort);
  }
 else   if (revision2 instanceof CurrentRevision) {
    HgFileRevision left=(HgFileRevision)revision1;
    showDiffForDirectory(filePath,left,null);
  }
 else   if (revision1.equals(VcsFileRevision.NULL)) {
    HgFileRevision right=(HgFileRevision)revision2;
    showDiffForDirectory(filePath,null,right);
  }
 else {
    HgFileRevision left=(HgFileRevision)revision1;
    HgFileRevision right=(HgFileRevision)revision2;
    if (autoSort) {
      Pair<VcsFileRevision,VcsFileRevision> pair=VcsHistoryUtil.sortRevisions(revision1,revision2);
      left=(HgFileRevision)pair.first;
      right=(HgFileRevision)pair.second;
    }
    showDiffForDirectory(filePath,left,right);
  }
}
