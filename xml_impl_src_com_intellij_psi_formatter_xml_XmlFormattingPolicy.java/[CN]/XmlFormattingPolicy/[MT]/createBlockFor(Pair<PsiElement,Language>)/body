{
  final FormattingModelBuilder builder=LanguageFormatting.INSTANCE.forContext(root.getSecond(),root.getFirst());
  if (builder != null) {
    final Block result=builder.createModel(root.getFirst(),getSettings()).getRootBlock();
    if (result instanceof XmlBlock) {
      final XmlFormattingPolicy policy=getPolicy((XmlBlock)result);
      policy.setRootModels(myRootToBlockMap);
      policy.doNotProcessJsp();
    }
    return result;
  }
 else {
    return null;
  }
}
