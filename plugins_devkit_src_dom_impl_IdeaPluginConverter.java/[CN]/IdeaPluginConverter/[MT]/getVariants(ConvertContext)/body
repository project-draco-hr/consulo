{
  Collection<IdeaPlugin> plugins=collectAllVisiblePlugins(context.getFile());
  return new THashSet<IdeaPlugin>(plugins,new TObjectHashingStrategy<IdeaPlugin>(){
    @Override public int computeHashCode(    IdeaPlugin object){
      return StringUtil.notNullize(object.getPluginId()).hashCode();
    }
    @Override public boolean equals(    IdeaPlugin o1,    IdeaPlugin o2){
      return StringUtil.notNullize(o1.getPluginId()).equals(o2.getPluginId());
    }
  }
);
}
