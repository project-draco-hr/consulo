{
  Project project=xmlFile.getProject();
  Module module=ModuleUtil.findModuleForPsiElement(xmlFile);
  GlobalSearchScope scope=module == null ? GlobalSearchScope.allScope(project) : GlobalSearchScope.moduleWithDependenciesAndLibrariesScope(module,true);
  List<DomFileElement<IdeaPlugin>> files=DomService.getInstance().getFileElements(IdeaPlugin.class,project,scope);
  return ContainerUtil.map(files,new Function<DomFileElement<IdeaPlugin>,IdeaPlugin>(){
    public IdeaPlugin fun(    DomFileElement<IdeaPlugin> ideaPluginDomFileElement){
      return ideaPluginDomFileElement.getRootElement();
    }
  }
);
}
