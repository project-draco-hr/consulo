{
  final PsiElement parent=e.getParent();
  if (e.getContainingFile() instanceof JspFile && e.getLanguage() instanceof JavaLanguage) {
    final JspFile psiFile=(JspFile)e.getContainingFile();
    if (e.getParent().getTextLength() == psiFile.getTextLength()) {
      PsiFile baseRoot=psiFile.getBaseLanguageRoot();
      PsiElement elt=baseRoot.getNode().findLeafElementAt(e.getTextRange().getStartOffset()).getPsi();
      return elt;
    }
  }
  return parent;
}
