{
  NewCompilerCache<?,?,?> cache=myNewCachesMap.get(compiler);
  if (cache == null) {
    final NewCompilerCache<?,?,?> newCache=new NewCompilerCache<Key,SourceState,OutputState>(compiler,NewCompilerRunner.getNewCompilerCacheDir(myProject,compiler));
    myNewCachesMap.put(compiler,newCache);
    myCacheDisposables.add(new Disposable(){
      @Override public void dispose(){
        newCache.close();
      }
    }
);
    cache=newCache;
  }
  return (NewCompilerCache<Key,SourceState,OutputState>)cache;
}
