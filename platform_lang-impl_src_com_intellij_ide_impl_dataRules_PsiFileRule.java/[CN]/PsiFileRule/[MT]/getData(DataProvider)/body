{
  final PsiElement element=LangDataKeys.PSI_ELEMENT.getData(dataProvider);
  if (element != null) {
    return element.getContainingFile();
  }
  Project project=PlatformDataKeys.PROJECT.getData(dataProvider);
  if (project != null) {
    VirtualFile vFile=PlatformDataKeys.VIRTUAL_FILE.getData(dataProvider);
    if (vFile != null) {
      return PsiManager.getInstance(project).findFile(vFile);
    }
  }
  return null;
}
