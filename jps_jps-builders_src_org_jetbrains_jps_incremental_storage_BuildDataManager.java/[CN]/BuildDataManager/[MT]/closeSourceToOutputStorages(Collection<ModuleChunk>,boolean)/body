{
  final Map<String,SourceToOutputMapping> storageMap=testSources ? myTestSourceToOutputs : myProductionSourceToOutputs;
synchronized (mySourceToOutputLock) {
    for (    ModuleChunk chunk : chunks) {
      for (      Module module : chunk.getModules()) {
        final String moduleName=module.getName().toLowerCase(Locale.US);
        final SourceToOutputMapping mapping=storageMap.remove(moduleName);
        if (mapping != null) {
          mapping.close();
        }
      }
    }
  }
}
