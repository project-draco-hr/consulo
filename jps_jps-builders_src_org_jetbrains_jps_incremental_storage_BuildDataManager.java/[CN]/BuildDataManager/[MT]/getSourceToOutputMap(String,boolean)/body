{
  final Map<String,SourceToOutputMapping> storageMap=testSources ? myTestSourceToOutputs : myProductionSourceToOutputs;
  SourceToOutputMapping mapping;
synchronized (mySourceToOutputLock) {
    mapping=storageMap.get(moduleName);
    if (mapping == null) {
      mapping=createStorage(getSourceToOutputRoot(moduleName,testSources),new StorageFactory<SourceToOutputMapping>(){
        public SourceToOutputMapping create(        File dataFile) throws Exception {
          return new SourceToOutputMapping(dataFile);
        }
      }
);
      storageMap.put(moduleName,mapping);
    }
  }
  return mapping;
}
