{
  final PsiElement semi=PsiImplUtil.findTailingSemicolon(first);
  final Document document=PsiDocumentManager.getInstance(first.getProject()).getDocument(first.getContainingFile());
  if (document == null)   return CANNOT_JOIN;
  final Integer endOffset=second.getTextRange().getStartOffset();
  if (semi != null) {
    final Integer offset=semi.getTextRange().getEndOffset();
    document.replaceString(offset,endOffset," ");
    return offset + 1;
  }
 else {
    final Integer offset=first.getTextRange().getEndOffset();
    document.replaceString(offset,endOffset,"; ");
    return offset + 2;
  }
}
