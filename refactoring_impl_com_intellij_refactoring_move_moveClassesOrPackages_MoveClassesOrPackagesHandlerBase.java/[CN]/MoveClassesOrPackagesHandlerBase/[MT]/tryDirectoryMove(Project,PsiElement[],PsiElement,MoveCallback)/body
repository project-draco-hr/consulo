{
  if (targetElement instanceof PsiDirectory) {
    final PsiElement[] adjustedElements=MoveClassesOrPackagesImpl.adjustForMove(project,sourceElements,targetElement);
    if (adjustedElements != null) {
      if (CommonRefactoringUtil.checkReadOnlyStatusRecursively(project,Arrays.asList(adjustedElements),true)) {
        new MoveClassesOrPackagesToNewDirectoryDialog((PsiDirectory)targetElement,adjustedElements,callback).show();
      }
    }
    return true;
  }
  return false;
}
