{
  if (!(element instanceof PsiMethodCallExpression)) {
    return false;
  }
  final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)element;
  final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
  @NonNls final String callName=methodExpression.getReferenceName();
  if (!"append".equals(callName)) {
    return false;
  }
  final PsiMethod method=methodCallExpression.resolveMethod();
  final PsiClass containingClass;
  if (method == null) {
    final PsiExpression qualifierExpression=methodExpression.getQualifierExpression();
    if (qualifierExpression == null) {
      return false;
    }
    final PsiType type=qualifierExpression.getType();
    if (!(type instanceof PsiClassType)) {
      return false;
    }
    final PsiClassType classType=(PsiClassType)type;
    containingClass=classType.resolve();
  }
 else {
    containingClass=method.getContainingClass();
  }
  if (containingClass == null) {
    return false;
  }
  final String name=containingClass.getQualifiedName();
  if ("java.lang.StringBuffer".equals(name) || "java.lang.StringBuilder".equals(name)) {
    return true;
  }
  final Project project=containingClass.getProject();
  final JavaPsiFacade psiFacade=JavaPsiFacade.getInstance(project);
  final PsiClass appendableClass=psiFacade.findClass("java.lang.Appendable",GlobalSearchScope.allScope(project));
  if (appendableClass == null) {
    return false;
  }
  return containingClass.isInheritor(appendableClass,true);
}
