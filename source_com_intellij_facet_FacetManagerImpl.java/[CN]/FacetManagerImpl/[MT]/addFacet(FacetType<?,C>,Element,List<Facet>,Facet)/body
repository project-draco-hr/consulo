{
  final C configuration=type.createDefaultConfiguration();
  final Element config=element.getChild(CONFIGURATION_ELEMENT);
  if (config != null) {
    configuration.readExternal(config);
  }
  String name=element.getAttributeValue(NAME_ATTRIBUTE);
  if (name == null) {
    name=type.getDefaultFacetName();
  }
  final Facet facet=createFacet(type,myModule,name,configuration,underlyingFacet);
  facet.setImplicit(Boolean.parseBoolean(element.getAttributeValue(IMPLICIT_ATTRIBUTE)));
  if (facet instanceof JDOMExternalizable) {
    ((JDOMExternalizable)facet).readExternal(config);
  }
  facets.add(facet);
  addFacets(facets,element,facet);
}
