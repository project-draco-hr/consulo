{
  PsiElement context=exp.getParent();
  PsiExpression wrappedExp=exp;
  while (context instanceof PsiParenthesizedExpression) {
    wrappedExp=(PsiExpression)context;
    context=context.getParent();
  }
  final ExpectedTypeVisitor visitor=new ExpectedTypeVisitor(wrappedExp);
  context.accept(visitor);
  return visitor.getExpectedType();
}
