{
  final PsiClass containingClass=method.getContainingClass();
  if (referencingClass.equals(containingClass)) {
    return true;
  }
  if (containingClass == null) {
    return false;
  }
  if (method.hasModifierProperty(PsiModifier.PUBLIC)) {
    return true;
  }
  if (method.hasModifierProperty(PsiModifier.PRIVATE)) {
    return false;
  }
  if (method.hasModifierProperty(PsiModifier.PROTECTED)) {
    return referencingClass.isInheritor(containingClass,true) || ClassUtils.inSamePackage(containingClass,referencingClass);
  }
  return ClassUtils.inSamePackage(containingClass,referencingClass);
}
