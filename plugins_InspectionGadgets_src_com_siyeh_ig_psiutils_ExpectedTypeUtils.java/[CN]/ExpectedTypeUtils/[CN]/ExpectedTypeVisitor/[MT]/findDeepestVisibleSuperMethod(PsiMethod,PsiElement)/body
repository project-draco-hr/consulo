{
  if (method.isConstructor()) {
    return null;
  }
  if (method.hasModifierProperty(PsiModifier.STATIC)) {
    return null;
  }
  if (method.hasModifierProperty(PsiModifier.PRIVATE)) {
    return null;
  }
  final PsiClass aClass=method.getContainingClass();
  if (aClass == null) {
    return null;
  }
  final PsiMethod[] allMethods=aClass.getAllMethods();
  PsiMethod topSuper=null;
  for (  PsiMethod superMethod : allMethods) {
    final PsiClass superClass=superMethod.getContainingClass();
    if (!isVisibleFrom(superMethod,element)) {
      continue;
    }
    if (superClass.equals(aClass)) {
      continue;
    }
    PsiSubstitutor superClassSubstitutor=TypeConversionUtil.getClassSubstitutor(superClass,aClass,PsiSubstitutor.EMPTY);
    if (superClassSubstitutor == null) {
      superClassSubstitutor=PsiSubstitutor.EMPTY;
    }
    final String name=method.getName();
    final MethodSignature signature=method.getSignature(PsiSubstitutor.EMPTY);
    final boolean looksLikeSuperMethod=name.equals(superMethod.getName()) && !superMethod.hasModifierProperty(PsiModifier.STATIC) && PsiUtil.isAccessible(superMethod,aClass,aClass)&& signature.equals(superMethod.getSignature(superClassSubstitutor));
    if (looksLikeSuperMethod) {
      if (topSuper != null && superClass.isInheritor(topSuper.getContainingClass(),true)) {
        continue;
      }
      topSuper=superMethod;
    }
  }
  return topSuper;
}
