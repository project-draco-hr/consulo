{
  final DataContext dc=e.getDataContext();
  myProject=CommonDataKeys.PROJECT.getData(dc);
  final Change[] changes=VcsDataKeys.CHANGE_LEAD_SELECTION.getData(dc);
  if (myProject == null || changes == null || changes.length != 1) {
    myEnabled=false;
    myChange=null;
    return;
  }
  final Change change=changes[0];
  myEnabled=change instanceof ConflictedSvnChange && ((ConflictedSvnChange)change).getConflictState().isTree();
  if (myEnabled) {
    myChange=(ConflictedSvnChange)change;
  }
 else {
    myChange=null;
  }
}
