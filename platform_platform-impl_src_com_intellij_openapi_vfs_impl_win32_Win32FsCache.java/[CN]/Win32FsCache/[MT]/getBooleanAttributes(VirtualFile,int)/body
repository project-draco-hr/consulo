{
  FileInfo info=getInfo(file);
  if (info == null)   return 0;
  int result=0;
  if ((flags & FileUtil.BA_EXISTS) != 0) {
    result|=FileUtil.BA_EXISTS;
  }
  if ((flags & FileUtil.BA_DIRECTORY) != 0) {
    result|=(info.attributes & FileInfo.FILE_ATTRIBUTE_DIRECTORY) == 0 ? 0 : FileUtil.BA_DIRECTORY;
  }
  if ((flags & FileUtil.BA_REGULAR) != 0) {
    result|=(info.attributes & (FileInfo.FILE_ATTRIBUTE_DIRECTORY | FileInfo.FILE_ATTRIBUTE_DEVICE | FileInfo.FILE_ATTRIBUTE_REPARSE_POINT)) != 0 ? 0 : FileUtil.BA_REGULAR;
  }
  if ((flags & FileUtil.BA_HIDDEN) != 0) {
    result|=(info.attributes & FileInfo.FILE_ATTRIBUTE_HIDDEN) == 0 ? 0 : FileUtil.BA_HIDDEN;
  }
  return result;
}
