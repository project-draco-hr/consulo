{
  String path=file.getPath();
  FileInfo[] fileInfo=myKernel.listChildren(path);
  if (fileInfo == null || fileInfo.length == 0) {
    return ArrayUtil.EMPTY_STRING_ARRAY;
  }
  String[] names=new String[fileInfo.length];
  TIntObjectHashMap<THashMap<String,FileAttributes>> map=getMap();
  int parentId=((VirtualFileWithId)file).getId();
  THashMap<String,FileAttributes> nestedMap=map.get(parentId);
  if (nestedMap == null) {
    nestedMap=new THashMap<String,FileAttributes>(fileInfo.length,FileUtil.PATH_HASHING_STRATEGY);
    map.put(parentId,nestedMap);
  }
  for (int i=0, length=fileInfo.length; i < length; i++) {
    FileInfo info=fileInfo[i];
    String name=info.getName();
    nestedMap.put(name,info.toFileAttributes());
    names[i]=name;
  }
  return names;
}
