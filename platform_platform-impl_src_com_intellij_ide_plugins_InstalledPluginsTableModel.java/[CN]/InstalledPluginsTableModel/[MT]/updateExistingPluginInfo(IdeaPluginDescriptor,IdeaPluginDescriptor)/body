{
  int state=StringUtil.compareVersionNumbers(descr.getVersion(),existing.getVersion());
  final PluginId pluginId=existing.getPluginId();
  if (state > 0 && !PluginManager.isIncompatible(descr) && !updatedPlugins.contains(descr.getPluginId())) {
    NewVersions2Plugins.put(pluginId,1);
    UpdateSettings.getInstance().myOutdatedPlugins.add(pluginId.getIdString());
    final IdeaPluginDescriptorImpl plugin=(IdeaPluginDescriptorImpl)existing;
    plugin.setDownloadsCount(descr.getDownloads());
    plugin.setVendor(descr.getVendor());
    plugin.setVendorEmail(descr.getVendorEmail());
    plugin.setVendorUrl(descr.getVendorUrl());
    plugin.setUrl(descr.getUrl());
  }
 else {
    UpdateSettings.getInstance().myOutdatedPlugins.remove(pluginId.getIdString());
    if (NewVersions2Plugins.remove(pluginId) != null) {
      updatedPlugins.add(pluginId);
    }
  }
}
