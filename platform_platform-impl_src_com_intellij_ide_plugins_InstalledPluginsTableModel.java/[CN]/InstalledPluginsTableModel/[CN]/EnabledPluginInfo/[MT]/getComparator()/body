{
  return new Comparator<IdeaPluginDescriptorImpl>(){
    public int compare(    final IdeaPluginDescriptorImpl o1,    final IdeaPluginDescriptorImpl o2){
      final Boolean enabled1=myEnabled.get(o1.getPluginId());
      final Boolean enabled2=myEnabled.get(o2.getPluginId());
      if (enabled1 != null && enabled1.booleanValue()) {
        if (enabled2 != null && enabled2.booleanValue()) {
          return 0;
        }
        return 1;
      }
 else {
        if (enabled2 == null || !enabled2.booleanValue()) {
          return 0;
        }
        return -1;
      }
    }
  }
;
}
