{
  final List<VirtualFile> expanded=new ArrayList<VirtualFile>();
  for (  VirtualFile file : myRoots.get(rootType).getFiles()) {
    if (file.isDirectory()) {
      final Boolean expandRecursively=myJarDirectories.get(file.getUrl());
      if (expandRecursively != null) {
        addChildren(file,expanded,expandRecursively.booleanValue());
        continue;
      }
    }
    expanded.add(file);
  }
  return expanded.toArray(new VirtualFile[expanded.size()]);
}
