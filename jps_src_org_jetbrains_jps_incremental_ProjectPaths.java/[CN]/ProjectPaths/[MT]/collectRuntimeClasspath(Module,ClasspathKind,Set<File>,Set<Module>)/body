{
  if (!processed.contains(module)) {
    processed.add(module);
    for (    ClasspathItem it : module.getClasspath(kind)) {
      if (it instanceof Module) {
        if (kind.isTestsIncluded()) {
          classpath.add(getModuleOutput(module,true));
        }
        classpath.add(getModuleOutput(module,false));
        collectRuntimeClasspath((Module)it,kind,classpath,processed);
      }
 else {
        for (        String root : it.getClasspathRoots(kind)) {
          classpath.add(new File(root));
        }
      }
    }
  }
}
