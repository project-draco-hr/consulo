{
  myProject=project;
  myVcsManager=vcsManager;
  myVcsMap=new MultiMap<VcsKey,VcsCheckinHandlerFactory>();
  myRegisteredBeforeCheckinHandlers=new ArrayList<BaseCheckinHandlerFactory>();
  StartupManager.getInstance(myProject).runWhenProjectIsInitialized(new DumbAwareRunnable(){
    @Override public void run(){
      myRegisteredBeforeCheckinHandlers.addAll(Arrays.asList(Extensions.<CheckinHandlerFactory>getExtensions(CheckinHandlerFactory.EP_NAME)));
      final VcsCheckinHandlerFactory[] vcsCheckinHandlerFactories=Extensions.getExtensions(VcsCheckinHandlerFactory.EP_NAME,myProject);
      for (      VcsCheckinHandlerFactory factory : vcsCheckinHandlerFactories) {
        myVcsMap.putValue(factory.getKey(),factory);
      }
    }
  }
);
}
