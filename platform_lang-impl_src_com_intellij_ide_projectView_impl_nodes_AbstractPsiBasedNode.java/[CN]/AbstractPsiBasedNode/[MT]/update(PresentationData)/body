{
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      if (!validate()) {
        return;
      }
      final PsiElement value=extractPsiFromValue();
      LOG.assertTrue(value.isValid());
      int flags=getIconableFlags();
      try {
        Icon icon=value.getIcon(flags);
        data.setIcon(icon);
      }
 catch (      IndexNotReadyException ignored) {
      }
      data.setPresentableText(myName);
      try {
        if (isDeprecated()) {
          data.setAttributesKey(CodeInsightColors.DEPRECATED_ATTRIBUTES);
        }
      }
 catch (      IndexNotReadyException ignored) {
      }
      updateImpl(data);
      for (      ProjectViewNodeDecorator decorator : Extensions.getExtensions(ProjectViewNodeDecorator.EP_NAME,myProject)) {
        decorator.decorate(AbstractPsiBasedNode.this,data);
      }
      Iconable.LastComputedIcon.put(value,data.getIcon(false),flags);
    }
  }
);
}
