{
  PsiFile psiFile=e.getData(DataKeys.PSI_FILE);
  Project project=e.getData(DataKeys.PROJECT);
  Editor editor=e.getData(DataKeys.EDITOR);
  if (psiFile != null && project != null && editor != null) {
    List<HighlightInfo.IntentionActionDescriptor> quickFixes=QuickFixAction.getAvailableActions(editor,psiFile,-1);
    Map<Anchor,List<AnAction>> children=new HashMap<Anchor,List<AnAction>>();
    ArrayList<AnAction> first=new ArrayList<AnAction>();
    children.put(Anchor.FIRST,first);
    ArrayList<AnAction> last=new ArrayList<AnAction>();
    children.put(Anchor.LAST,last);
    extractActions(quickFixes,children);
    if (first.size() > 0 && last.size() > 0) {
      first.add(new Separator());
    }
    first.addAll(last);
    if (first.size() > 0) {
      return first.toArray(new AnAction[first.size()]);
    }
  }
  return AnAction.EMPTY_ARRAY;
}
