{
  boolean noIcon=false;
  boolean error=false;
  if (value instanceof DefaultMutableTreeNode) {
    value=((DefaultMutableTreeNode)value).getUserObject();
  }
  if (value instanceof SVNRepository) {
    value="/";
  }
 else   if (value instanceof SVNDirEntry) {
    value=((SVNDirEntry)value).getName();
  }
 else   if (value == RepositoryTreeModel.LOADING_NODE) {
    noIcon=true;
    value=CommonBundle.getLoadingTreeNodeText();
  }
 else   if (value instanceof RepositoryTreeModel.ErrorNode) {
    noIcon=true;
    RepositoryTreeModel.ErrorNode node=(RepositoryTreeModel.ErrorNode)value;
    value=node.getMessage();
    error=node.isError();
  }
 else {
    noIcon=true;
    value=value.toString();
  }
  Component result=myRedener.getTreeCellRendererComponent(tree,value,sel,expanded,leaf,row,hasFocus);
  if (noIcon) {
    myRedener.setIcon(null);
    if (error) {
      myRedener.setForeground(Color.red);
    }
  }
  return result;
}
