{
  TreePath selection=myRepositoryTree.getSelectionPath();
  if (selection == null) {
    return null;
  }
  Object element=selection.getLastPathComponent();
  if (element instanceof SVNDirEntry) {
    RepositoryTreeModel model=(RepositoryTreeModel)myRepositoryTree.getModel();
    String rootURL=model.getRootURL();
    if (rootURL != null) {
      String path=SVNEncodingUtil.uriEncode(((SVNDirEntry)element).getPath());
      String url=SVNPathUtil.append(rootURL,path);
      if (url != null && url.endsWith("/") && url.length() > 1) {
        url=url.substring(0,url.length() - 1);
      }
      return url;
    }
  }
  return null;
}
