{
  TreePath selection=myRepositoryTree.getSelectionPath();
  if (selection == null) {
    return null;
  }
  Object element=selection.getLastPathComponent();
  if (element instanceof SVNDirEntry) {
    RepositoryTreeModel model=(RepositoryTreeModel)myRepositoryTree.getModel();
    String rootURL=model.getRootURL();
    if (rootURL != null) {
      String path=PathUtil.encode(((SVNDirEntry)element).getPath());
      String url=PathUtil.append(rootURL,path);
      return PathUtil.removeTrailingSlash(url);
    }
  }
  return null;
}
