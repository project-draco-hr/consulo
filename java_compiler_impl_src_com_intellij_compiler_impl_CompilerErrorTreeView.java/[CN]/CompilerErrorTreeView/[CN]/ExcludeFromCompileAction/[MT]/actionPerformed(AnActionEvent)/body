{
  VirtualFile file=getSelectedFile();
  if (file != null && file.isValid()) {
    ExcludeEntryDescription description=new ExcludeEntryDescription(file,false,true,myProject);
    ((CompilerConfigurationImpl)CompilerConfiguration.getInstance(myProject)).getExcludedEntriesConfiguration().addExcludeEntryDescription(description);
    FileStatusManager.getInstance(myProject).fileStatusesChanged();
    final Project project=myProject;
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        if (!project.isDisposed()) {
          project.save();
          CompileServerManager.getInstance().sendReloadRequest(project);
          BuildManager.getInstance().clearState(project);
        }
      }
    }
);
  }
}
