{
  if (!RefactoringMessageUtil.checkReadOnlyStatus(myProject,myTargetClass))   return;
  PsiMethod patternMethod=createPatternMethod();
  final List<PsiReference> docRefs=new ArrayList<PsiReference>();
  for (int i=0; i < usages.length; i++) {
    UsageInfo usage=usages[i];
    if (usage instanceof InheritorUsageInfo) {
      final PsiClass inheritor=((InheritorUsageInfo)usage).getInheritor();
      addMethodToClass(inheritor,patternMethod);
    }
 else     if (usage instanceof MethodCallUsageInfo) {
      correctMethodCall(((MethodCallUsageInfo)usage).getMethodCallExpression(),false);
    }
 else     if (usage instanceof JavadocUsageInfo) {
      docRefs.add(usage.getElement().getReference());
    }
  }
  try {
    if (myTargetClass.isInterface())     patternMethod.getBody().delete();
    final PsiMethod method=addMethodToClass(myTargetClass,patternMethod);
    myMethod.delete();
    for (Iterator<PsiReference> it=docRefs.iterator(); it.hasNext(); ) {
      PsiReference reference=it.next();
      reference.bindToElement(method);
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
