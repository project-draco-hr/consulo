{
  final MavenException[] mavenEx=new MavenException[1];
  final CanceledException[] canceledEx=new CanceledException[1];
  if (inBackground) {
    ProgressManager.getInstance().run(new Task.Backgroundable(project,title,true){
      public void run(      ProgressIndicator i){
        try {
          p.run(new Progress());
        }
 catch (        MavenException e) {
          mavenEx[0]=e;
        }
catch (        CanceledException e) {
          canceledEx[0]=e;
        }
      }
    }
);
  }
 else {
    ProgressManager.getInstance().run(new Task.Modal(project,title,true){
      public void run(      ProgressIndicator i){
        try {
          p.run(new Progress());
        }
 catch (        MavenException e) {
          mavenEx[0]=e;
        }
catch (        CanceledException e) {
          canceledEx[0]=e;
        }
      }
    }
);
  }
  if (mavenEx[0] != null)   throw mavenEx[0];
  if (canceledEx[0] != null)   throw canceledEx[0];
}
