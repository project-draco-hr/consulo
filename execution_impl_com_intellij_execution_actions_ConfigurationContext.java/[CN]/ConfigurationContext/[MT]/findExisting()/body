{
  final RuntimeConfiguration configuration=(RuntimeConfiguration)myDataContext.getData(DataConstantsEx.RUNTIME_CONFIGURATION);
  final ConfigurationType type;
  if (configuration != null) {
    type=configuration.getType();
  }
 else {
    type=getConfiguration().getType();
  }
  if (!(type instanceof LocatableConfigurationType))   return null;
  final LocatableConfigurationType factoryLocatable=(LocatableConfigurationType)type;
  final RunnerAndConfigurationSettingsImpl[] configurations=getRunManager().getConfigurationSettings(type);
  for (  final RunnerAndConfigurationSettingsImpl existingConfiguration : configurations) {
    if (factoryLocatable.isConfigurationByElement(existingConfiguration.getConfiguration(),getProject(),myLocation.getPsiElement())) {
      return existingConfiguration;
    }
  }
  return null;
}
