{
  if (icon.getIconHeight() == 16 && icon.getIconWidth() == 16)   return icon;
  final int w=icon.getIconWidth();
  final int h=icon.getIconHeight();
  final BufferedImage image=GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration().createCompatibleImage(16,16,Color.TRANSLUCENT);
  final Graphics2D g=image.createGraphics();
  icon.paintIcon(null,g,0,0);
  g.dispose();
  final BufferedImage img=new BufferedImage(16,16,Color.TRANSLUCENT);
  for (int col=0; col < 16; col++) {
    for (int row=0; row < 16; row++) {
      img.setRGB(col,row,col < w && row < h ? image.getRGB(col,row) : Color.TRANSLUCENT);
    }
  }
  return new ImageIcon(img);
}
