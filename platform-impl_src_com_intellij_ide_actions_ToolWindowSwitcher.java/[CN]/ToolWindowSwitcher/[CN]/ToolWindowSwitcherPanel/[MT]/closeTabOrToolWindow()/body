{
  final Object value=getSelectedList().getSelectedValue();
  if (value instanceof VirtualFile) {
    final VirtualFile virtualFile=(VirtualFile)value;
    final FileEditorManager editorManager=FileEditorManager.getInstance(project);
    if (editorManager instanceof FileEditorManagerImpl) {
      final JList jList=getSelectedList();
      ((FileEditorManagerImpl)editorManager).closeFile(virtualFile,false);
      final int selectedIndex=jList.getSelectedIndex();
      if (jList.getModel().getSize() == 1) {
        goLeft();
        ((DefaultListModel)jList.getModel()).removeElementAt(selectedIndex);
        this.remove(jList);
        this.remove(separator);
      }
 else {
        goForward();
        ((DefaultListModel)jList.getModel()).removeElementAt(selectedIndex);
        jList.setSize(jList.getPreferredSize());
      }
      pack();
    }
  }
 else   if (value instanceof ToolWindow) {
    final ToolWindow toolWindow=(ToolWindow)value;
    if (twManager instanceof ToolWindowManagerImpl) {
      ToolWindowManagerImpl manager=(ToolWindowManagerImpl)twManager;
      manager.hideToolWindow(ids.get(toolWindow),false,false);
    }
 else {
      toolWindow.hide(null);
    }
  }
}
