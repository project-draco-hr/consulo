{
  ArrayList<Object> oldUsages=new ArrayList<Object>();
  addAll(oldUsages,usages[0]);
  final ObjectUpcastedUsageInfo[] objectUpcastedUsageInfos=objectUpcastedUsages(usages[0]);
  if (myPrepareSuccessfulSwingThreadCallback != null) {
    ArrayList<String> conflicts=new ArrayList<String>();
    if (objectUpcastedUsageInfos.length > 0) {
      final String message="Instances of " + ConflictsUtil.getDescription(myClass,true) + " upcasted to "+ ConflictsUtil.htmlEmphasize("java.lang.Object")+ " were found. If you continue, they will be shown "+ "in a separate Find tab.";
      conflicts.add(message);
    }
    analyzeConflicts(usages[0],conflicts);
    if (!conflicts.isEmpty()) {
      ConflictsDialog conflictsDialog=new ConflictsDialog(conflicts.toArray(new String[conflicts.size()]),myProject);
      conflictsDialog.show();
      if (!conflictsDialog.isOK())       return false;
    }
    if (objectUpcastedUsageInfos.length > 0) {
      showObjectUpcastedUsageView(objectUpcastedUsageInfos);
      setPreviewUsages(true);
    }
  }
  ArrayList<UsageInfo> filteredUsages=filterUsages(oldUsages);
  usages[0]=filteredUsages.toArray(new UsageInfo[filteredUsages.size()]);
  prepareSuccessful();
  return true;
}
