{
  PsiMethod methodToAdd=(PsiMethod)method.copy();
  PsiCodeBlock oldBody=methodToAdd.getBody();
  StringBuffer buffer=new StringBuffer();
  if (oldBody == null) {
    buffer.append(getMethodHeaderText(method));
  }
  appendDelegationBody(buffer,methodToAdd,method,delegationTarget);
  if (oldBody != null) {
    PsiCodeBlock newBody;
    newBody=myFactory.createCodeBlockFromText(buffer.toString(),method);
    oldBody.replace(newBody);
  }
 else {
    methodToAdd=myFactory.createMethodFromText(buffer.toString(),method);
  }
  if (methodToAdd.getDocComment() != null) {
    methodToAdd.getDocComment().delete();
  }
  methodToAdd.getModifierList().setModifierProperty(PsiModifier.ABSTRACT,false);
  methodToAdd=(PsiMethod)CodeStyleManager.getInstance(myProject).reformat(methodToAdd);
  return methodToAdd;
}
