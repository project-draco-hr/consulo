{
  PsiDocumentManager.getInstance(getProject()).commitDocument(document);
  PsiFile psiFile=PsiDocumentManager.getInstance(getProject()).getPsiFile(document);
  PsiElement[] children=((PsiCodeFragment)psiFile).getChildren();
  int nonWhite=0;
  for (int i=0; i < children.length; i++) {
    PsiElement child=children[i];
    if (!(child instanceof PsiWhiteSpace)) {
      nonWhite++;
      if (nonWhite > 1) {
        mySwitchAction.setEnabled(false);
        return;
      }
    }
  }
  mySwitchAction.setEnabled(true);
}
