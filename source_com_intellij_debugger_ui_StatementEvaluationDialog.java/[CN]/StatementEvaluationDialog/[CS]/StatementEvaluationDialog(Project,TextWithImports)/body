{
  super(project,text);
  setTitle("Code Fragment Evaluation");
  myPanel=new JPanel(new BorderLayout());
  final Splitter splitter=new Splitter(true);
  splitter.setHonorComponentsMinimumSize(true);
  final DebuggerStatementEditor statementEditor=getStatementEditor();
  splitter.setFirstComponent(statementEditor);
  final EvaluationDialog.MyEvaluationPanel evaluationPanel=getEvaluationPanel();
  splitter.setSecondComponent(evaluationPanel);
  final Dimension statementSize=DimensionService.getInstance().getSize(STATEMENT_EDITOR_DIMENSION_KEY);
  final Dimension evaluationSize=DimensionService.getInstance().getSize(EVALUATION_PANEL_DIMENSION_KEY);
  if (statementSize != null && evaluationSize != null) {
    final float proportion=(float)statementSize.height / (float)(statementSize.height + evaluationSize.height);
    splitter.setProportion(proportion);
  }
  myPanel.add(splitter,BorderLayout.CENTER);
  setDebuggerContext(getDebuggerContext());
  KeyStroke codeFragment=KeyStroke.getKeyStroke(KeyEvent.VK_E,KeyEvent.ALT_MASK);
  KeyStroke resultStroke=KeyStroke.getKeyStroke(KeyEvent.VK_R,KeyEvent.ALT_MASK);
  KeyStroke altEnter=KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,KeyEvent.CTRL_MASK);
  new AnAction(){
    public void actionPerformed(    AnActionEvent e){
      getStatementEditor().requestFocus();
    }
  }
.registerCustomShortcutSet(new CustomShortcutSet(codeFragment),getRootPane());
  new AnAction(){
    public void actionPerformed(    AnActionEvent e){
      getEvaluationPanel().getWatchTree().requestFocus();
    }
  }
.registerCustomShortcutSet(new CustomShortcutSet(resultStroke),getRootPane());
  new AnAction(){
    public void actionPerformed(    AnActionEvent e){
      doOKAction();
    }
  }
.registerCustomShortcutSet(new CustomShortcutSet(altEnter),getRootPane());
  getEditor().addDocumentListener(new DocumentAdapter(){
    public void documentChanged(    final DocumentEvent e){
      DebuggerInvocationUtil.invokeLater(getProject(),new Runnable(){
        public void run(){
          updateSwitchButton(e.getDocument());
        }
      }
);
    }
  }
);
  this.init();
}
