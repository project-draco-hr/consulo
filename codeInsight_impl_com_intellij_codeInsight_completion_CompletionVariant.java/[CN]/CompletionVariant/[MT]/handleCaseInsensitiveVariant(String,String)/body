{
  final int length=prefix.length();
  if (length == 0)   return uniqueText;
  boolean isAllLower=true;
  boolean isAllUpper=true;
  boolean sameCase=true;
  for (int i=0; i < length && (isAllLower || isAllUpper || sameCase); i++) {
    final char c=prefix.charAt(i);
    isAllLower=isAllLower && Character.isLowerCase(c);
    isAllUpper=isAllUpper && Character.isUpperCase(c);
    sameCase=sameCase && Character.isLowerCase(c) == Character.isLowerCase(uniqueText.charAt(i));
  }
  if (sameCase)   return uniqueText;
  if (isAllLower)   return uniqueText.toLowerCase();
  if (isAllUpper)   return uniqueText.toUpperCase();
  return uniqueText;
}
