{
  final boolean isDirectory=element instanceof PsiDirectory;
  if (!isDirectory) {
    EditorHelper.openInEditor(element);
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      myBuilder.selectElement(element,PsiUtilBase.getVirtualFile(element));
      if (!isDirectory) {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            if (myMoveFocus) {
              ToolWindowManager.getInstance(myProject).activateEditorComponent();
            }
          }
        }
);
      }
    }
  }
,ModalityState.NON_MODAL);
}
