{
  if (mySortedFacets == null) {
    final Facet[] allFacets=getAllFacets();
    if (allFacets.length == 0) {
      mySortedFacets=Facet.EMPTY_ARRAY;
    }
 else {
      LinkedHashSet<Facet> facets=new LinkedHashSet<Facet>();
      for (      Facet facet : allFacets) {
        addUnderlyingFacets(facets,facet);
      }
      mySortedFacets=facets.toArray(new Facet[facets.size()]);
    }
  }
  return mySortedFacets;
}
