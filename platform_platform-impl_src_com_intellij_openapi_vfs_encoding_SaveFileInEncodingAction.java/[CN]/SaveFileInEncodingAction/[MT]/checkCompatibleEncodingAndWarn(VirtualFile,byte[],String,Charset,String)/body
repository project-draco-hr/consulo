{
  if (isCompatibleCharset(virtualFile,bytes,text,charset) == null) {
    int res=Messages.showDialog("Encoding '" + charset.displayName() + "' does not support some characters from the text.","Incompatible Encoding: " + charset.displayName(),new String[]{action + " anyway","Cancel"},1,AllIcons.General.WarningDialog);
    if (res != 0)     return false;
  }
  return true;
}
