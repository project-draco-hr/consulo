{
  final Set<VirtualFile> roots=new HashSet<VirtualFile>();
  ArtifactUtil.processPackagingElements(artifact,FileCopyElementType.getInstance(),new Processor<FileCopyPackagingElement>(){
    @Override public boolean process(    FileCopyPackagingElement fileCopyPackagingElement){
      final VirtualFile root=fileCopyPackagingElement.getLibraryRoot();
      if (root != null) {
        roots.add(root);
      }
      return true;
    }
  }
,context,true);
  final List<Library> result=new ArrayList<Library>();
  for (  Library library : librariesList) {
    if (!roots.containsAll(Arrays.asList(library.getFiles(BinariesOrderRootType.getInstance())))) {
      result.add(library);
    }
  }
  return result;
}
