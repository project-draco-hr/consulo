{
  char[] chars=pattern.toCharArray();
  int end=buffer.length() - chars.length;
  if (fromIndex > end) {
    fromIndex=end;
  }
  SearchLoop:   for (int i=fromIndex; i >= 0; i--) {
    for (int j=0; j < chars.length; j++) {
      if (chars[j] != buffer.charAt(i + j))       continue SearchLoop;
    }
    return i;
  }
  return -1;
}
