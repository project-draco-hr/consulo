{
  if (key == VcsDataKeys.CHANGES) {
    List<Change> list=myViewer.getSelectedChanges();
    if (list.isEmpty())     list=myViewer.getChanges();
    sink.put(VcsDataKeys.CHANGES,list.toArray(new Change[list.size()]));
  }
 else   if (key == VcsDataKeys.CHANGE_LISTS) {
    sink.put(VcsDataKeys.CHANGE_LISTS,getSelectedChangeLists());
  }
 else   if (key == VcsDataKeys.CHANGE_LEAD_SELECTION) {
    final Change highestSelection=myViewer.getHighestLeadSelection();
    sink.put(VcsDataKeys.CHANGE_LEAD_SELECTION,(highestSelection == null) ? new Change[]{} : new Change[]{highestSelection});
  }
 else   if (key == CommonDataKeys.VIRTUAL_FILE_ARRAY) {
    sink.put(CommonDataKeys.VIRTUAL_FILE_ARRAY,getSelectedFiles());
  }
 else   if (key == CommonDataKeys.NAVIGATABLE_ARRAY) {
    sink.put(CommonDataKeys.NAVIGATABLE_ARRAY,ChangesUtil.getNavigatableArray(myProject,getSelectedFiles()));
  }
 else   if (VcsDataKeys.IO_FILE_ARRAY.equals(key)) {
    sink.put(VcsDataKeys.IO_FILE_ARRAY,getSelectedIoFiles());
  }
 else   if (key == DATA_KEY) {
    sink.put(DATA_KEY,this);
  }
 else   if (VcsDataKeys.SELECTED_CHANGES_IN_DETAILS.equals(key)) {
    final List<Change> selectedChanges=getSelectedChanges();
    sink.put(VcsDataKeys.SELECTED_CHANGES_IN_DETAILS,selectedChanges.toArray(new Change[selectedChanges.size()]));
  }
}
