{
  final PsiElementFactory factory=PsiManager.getInstance(project).getElementFactory();
  final PsiType type=factory.createType(fieldClass);
  LOG.assertTrue(type != null);
  try {
    final PsiField field=factory.createField(fieldName,type);
    PsiField lastUiField=null;
    for (    PsiField uiField : boundClass.getFields()) {
      if (FormEditingUtil.bindingExists(editor.getRootContainer(),uiField.getName())) {
        lastUiField=uiField;
      }
    }
    if (lastUiField != null) {
      boundClass.addAfter(field,lastUiField);
    }
 else {
      boundClass.add(field);
    }
  }
 catch (  final IncorrectOperationException exc) {
    if (showErrors) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          Messages.showErrorDialog(editor,UIDesignerBundle.message("error.cannot.create.field.reason",fieldName,exc.getMessage()),CommonBundle.getErrorTitle());
        }
      }
);
    }
  }
}
