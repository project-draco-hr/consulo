{
  RefElement refElement=(RefElement)myProcessor.getElement(descriptor);
  if (refElement.isValid() && refElement instanceof RefMethod) {
    List<RefElement> refElements=new ArrayList<RefElement>(1);
    RefMethod refMethod=(RefMethod)refElement;
    final List<PsiElement> psiElements=new ArrayList<PsiElement>();
    if (myNeedToDEleteHierarchy) {
      deleteHierarchy(refMethod,psiElements,refElements);
    }
 else {
      deleteMethod(refMethod,psiElements,refElements);
    }
    ArrayList<RefElement> deletedRefs=new ArrayList<RefElement>(1);
    for (    RefElement element : refElements) {
      RefUtil.getInstance().removeRefElement(element,deletedRefs);
    }
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        SafeDeleteHandler.invoke(project,psiElements.toArray(new PsiElement[psiElements.size()]),false);
      }
    }
);
  }
}
