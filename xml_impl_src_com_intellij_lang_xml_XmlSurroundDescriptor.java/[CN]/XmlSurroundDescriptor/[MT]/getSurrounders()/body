{
  List<TemplateSurrounder> surrounders=new ArrayList<TemplateSurrounder>();
  TemplateImpl[] templates=TemplateSettings.getInstance().getTemplates();
  for (  TemplateImpl template : templates) {
    if (template.isDeactivated() || !template.isSelectionTemplate())     continue;
    if (template.getTemplateContext().isInContext(TemplateContext.XML_CONTEXT) || template.getTemplateContext().isInContext(TemplateContext.HTML_CONTEXT) || template.getTemplateContext().isInContext(TemplateContext.JSP_CONTEXT)) {
      surrounders.add(new TemplateSurrounder(template));
    }
  }
  return surrounders.toArray(new Surrounder[surrounders.size()]);
}
