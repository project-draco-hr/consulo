{
  TreeElement fileNode=TreeUtil.getFileElement((TreeElement)child);
  final LeafElement leaf=fileNode.findLeafElementAt(endOffset);
  if (leaf != null && leaf.getStartOffset() == endOffset && endOffset > 0) {
    return fileNode.findLeafElementAt(endOffset - 1);
  }
  return leaf;
}
