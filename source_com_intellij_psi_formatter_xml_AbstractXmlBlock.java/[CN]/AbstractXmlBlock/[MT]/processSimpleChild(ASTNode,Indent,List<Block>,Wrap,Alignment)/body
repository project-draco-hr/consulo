{
  if (myXmlFormattingPolicy.processJsp() && (child.getElementType() == JspElementType.JSP_XML_TEXT || child.getPsi() instanceof OuterLanguageElement)) {
    final Pair<PsiElement,Language> root=JspTextBlock.findPsiRootAt(child,myXmlFormattingPolicy.processJavaTree());
    if (root != null) {
      createJspTextNode(result,child,indent);
      return;
    }
  }
  if (isXmlTag(child)) {
    result.add(new XmlTagBlock(child,wrap,alignment,myXmlFormattingPolicy,indent != null ? indent : Indent.getNoneIndent()));
  }
 else {
    result.add(new XmlBlock(child,wrap,alignment,myXmlFormattingPolicy,indent,null));
  }
}
