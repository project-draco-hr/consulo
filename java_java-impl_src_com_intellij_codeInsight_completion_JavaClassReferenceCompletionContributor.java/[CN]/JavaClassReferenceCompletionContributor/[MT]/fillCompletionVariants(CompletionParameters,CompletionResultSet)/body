{
  PsiElement position=parameters.getPosition();
  JavaClassReference reference=findJavaClassReference(position.getContainingFile(),parameters.getOffset());
  if (reference == null) {
    return;
  }
  if (parameters.getCompletionType() == CompletionType.CLASS_NAME || parameters.isExtendedCompletion()) {
    JavaClassNameCompletionContributor.addAllClasses(parameters,result);
  }
 else {
    CompletionData data=CompletionUtil.getCompletionDataByElement(position,parameters.getOriginalFile());
    if (data != null) {
      LegacyCompletionContributor.completeReference(parameters,result,data);
    }
  }
  result.stopHere();
}
