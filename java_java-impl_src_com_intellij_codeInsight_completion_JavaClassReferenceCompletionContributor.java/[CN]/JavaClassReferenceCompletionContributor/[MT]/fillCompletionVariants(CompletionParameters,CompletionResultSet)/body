{
  if (parameters.getCompletionType() == CompletionType.SMART) {
    return;
  }
  PsiElement position=parameters.getPosition();
  JavaClassReference reference=findJavaClassReference(position.getContainingFile(),parameters.getOffset());
  if (reference == null) {
    return;
  }
  if (parameters.getCompletionType() == CompletionType.CLASS_NAME) {
    JavaClassNameCompletionContributor.addAllClasses(parameters,result);
  }
 else {
    LegacyCompletionContributor.completeReference(parameters,result);
  }
  result.stopHere();
}
