{
  int start=0;
  WordState state=WordState.NO_WORD;
  for (int i=0; i < text.length(); i++) {
    char c=text.charAt(i);
switch (state) {
case NO_WORD:
      if (!isWordStart(c)) {
        state=WordState.WORD;
      }
 else {
        state=WordState.PREV_UC;
      }
    break;
case PREV_UC:
  if (!isWordStart(c)) {
    start=startNewWord(text,result,start,i - 1);
    state=WordState.WORD;
  }
 else {
    state=WordState.PREV_UC;
  }
break;
case WORD:
if (isWordStart(c)) {
start=startNewWord(text,result,start,i);
state=WordState.PREV_UC;
}
break;
}
}
startNewWord(text,result,start,text.length());
}
