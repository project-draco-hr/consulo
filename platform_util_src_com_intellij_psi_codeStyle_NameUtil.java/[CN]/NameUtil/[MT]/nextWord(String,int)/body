{
  if (!Character.isLetterOrDigit(text.charAt(start))) {
    return start + 1;
  }
  int i=start;
  boolean prevIsLetterOrDigit=i > 0 && Character.isLetterOrDigit(text.charAt(i - 1));
  while (i < text.length()) {
    char c=text.charAt(i);
    if (!isWordStart(c)) {
      if (!Character.isLetterOrDigit(c)) {
        break;
      }
      if (prevIsLetterOrDigit) {
        break;
      }
    }
    prevIsLetterOrDigit=true;
    i++;
  }
  if (i > start + 1) {
    if (i == text.length() || !Character.isLetterOrDigit(text.charAt(i))) {
      return i;
    }
    return i - 1;
  }
  prevIsLetterOrDigit=i > 0 && Character.isLetterOrDigit(text.charAt(i - 1));
  while (i < text.length()) {
    char c=text.charAt(i);
    if (!Character.isLetterOrDigit(c))     break;
    if (isWordStart(c))     break;
    if (!prevIsLetterOrDigit)     break;
    prevIsLetterOrDigit=true;
    i++;
  }
  return i;
}
