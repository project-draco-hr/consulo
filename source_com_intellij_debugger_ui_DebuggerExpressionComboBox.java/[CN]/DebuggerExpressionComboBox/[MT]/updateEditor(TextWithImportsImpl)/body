{
  if (!myComboBox.isEditable())   return;
  boolean focusOwner=myEditor != null ? myEditor.getEditorComponent().isFocusOwner() : false;
  int offset=0;
  TextWithImportsImpl oldItem=null;
  if (focusOwner) {
    offset=myEditor.getEditor().getCaretModel().getOffset();
    oldItem=(TextWithImportsImpl)myEditor.getItem();
  }
  myEditor=new MyEditorComboBoxEditor(getProject(),StdFileTypes.JAVA);
  myComboBox.setEditor(myEditor);
  myComboBox.setRenderer(new EditorComboBoxRenderer(myEditor));
  myComboBox.setMaximumRowCount(MAX_ROWS);
  myEditor.setItem(item);
  if (focusOwner) {
    myEditor.getEditorComponent().requestFocus();
    if (oldItem.equals(item)) {
      myEditor.getEditor().getCaretModel().moveToOffset(offset);
    }
  }
}
