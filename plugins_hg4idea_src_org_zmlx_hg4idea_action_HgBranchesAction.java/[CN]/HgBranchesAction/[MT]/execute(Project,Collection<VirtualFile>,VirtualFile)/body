{
  HgRepository repository;
  if (selectedRepo != null) {
    repository=HgRepositoryImpl.getInstance(selectedRepo,project,project);
  }
 else {
    VirtualFile selectedRoot=HgUtil.getRootForSelectedFile(project);
    if (selectedRoot != null) {
      repository=HgRepositoryImpl.getInstance(selectedRoot,project,project);
    }
 else {
      return;
    }
  }
  HgBranchPopup.getInstance(project,repository).asListPopup().showInFocusCenter();
}
