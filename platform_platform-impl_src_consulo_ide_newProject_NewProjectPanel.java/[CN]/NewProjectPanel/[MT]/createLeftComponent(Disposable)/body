{
  NewModuleContext context=new NewModuleContext();
  for (  NewModuleBuilder newModuleBuilder : NewModuleBuilder.EP_NAME.getExtensions()) {
    newModuleBuilder.setupContext(context);
  }
  DListItem.Builder root=DListItem.builder();
  Map<String,DListItem.Builder> map=new HashMap<String,DListItem.Builder>();
  for (  Pair<String[],NewModuleBuilderProcessor> pair : context.getSetup()) {
    String[] path=pair.getFirst();
    NewModuleBuilderProcessor processor=pair.getSecond();
    DListItem.Builder prev=root;
    for (int i=0; i < path.length; i++) {
      String item=path[i];
      DListItem.Builder builder=map.get(item);
      if (builder == null) {
        Pair<String,Icon> itemInfo=context.getItem(item);
        map.put(item,builder=DListItem.builder().withName(itemInfo.getFirst()).withIcon(itemInfo.getSecond()).withAttach(processor));
        prev.withItems(builder);
      }
      prev=builder;
    }
  }
  DListWithChildren list=new DListWithChildren();
  list.select(root.create());
  return list;
}
