{
  if (!super.applyFix(refElements))   return false;
  final ArrayList<PsiElement> psiElements=new ArrayList<PsiElement>();
  for (  RefElement refElement : refElements) {
    PsiElement psiElement=refElement.getElement();
    if (psiElement == null)     continue;
    if (myFilter.getElementProblemCount((RefJavaElement)refElement) == 0)     continue;
    psiElements.add(psiElement);
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      final Project project=getContext().getProject();
      SafeDeleteHandler.invoke(project,psiElements.toArray(new PsiElement[psiElements.size()]),false,new Runnable(){
        public void run(){
          removeElements(refElements,project,UnusedDeclarationInspection.this);
        }
      }
);
    }
  }
);
  return false;
}
