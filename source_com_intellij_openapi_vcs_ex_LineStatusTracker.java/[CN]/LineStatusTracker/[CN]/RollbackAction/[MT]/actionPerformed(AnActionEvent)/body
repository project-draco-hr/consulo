{
  CommandProcessor.getInstance().executeCommand(myLineStatusTracker.getProject(),new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          if (!myLineStatusTracker.getDocument().isWritable()) {
            final ReadonlyStatusHandler.OperationStatus operationStatus=ReadonlyStatusHandler.getInstance(myLineStatusTracker.getProject()).ensureFilesWritable(new VirtualFile[]{myLineStatusTracker.getVirtualFile()});
            if (operationStatus.hasReadonlyFiles())             return;
          }
          myLineStatusTracker.rollbackChanges(myRange);
        }
      }
);
    }
  }
,"Rollback Change",null);
}
