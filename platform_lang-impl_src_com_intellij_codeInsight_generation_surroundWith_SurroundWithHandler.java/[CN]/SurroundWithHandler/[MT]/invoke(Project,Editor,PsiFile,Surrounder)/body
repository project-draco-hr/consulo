{
  if (!CodeInsightUtilBase.prepareEditorForWrite(editor))   return;
  if (file instanceof PsiCompiledElement) {
    HintManager.getInstance().showErrorHint(editor,"Can't modify decompiled code");
    return;
  }
  List<AnAction> applicable=buildSurroundActions(project,editor,file,surrounder);
  if (applicable != null) {
    showPopup(editor,applicable);
  }
 else   if (!ApplicationManager.getApplication().isUnitTestMode()) {
    HintManager.getInstance().showErrorHint(editor,"Couldn't find Surround With variants applicable to the current context");
  }
}
