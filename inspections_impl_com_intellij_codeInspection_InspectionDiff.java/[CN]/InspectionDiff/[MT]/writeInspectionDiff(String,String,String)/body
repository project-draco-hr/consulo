{
  try {
    InputStream oldStream=oldPath != null ? new BufferedInputStream(new FileInputStream(oldPath)) : null;
    InputStream newStream=new BufferedInputStream(new FileInputStream(newPath));
    Document oldDoc=oldStream != null ? JDOMUtil.loadDocument(oldStream) : null;
    Document newDoc=JDOMUtil.loadDocument(newStream);
    OutputStream outStream=System.out;
    if (outPath != null) {
      outStream=new BufferedOutputStream(new FileOutputStream(outPath + File.separator + new File(oldPath).getName()));
    }
    Document delta=createDelta(oldDoc,newDoc);
    JDOMUtil.writeDocument(delta,outStream,"\n");
  }
 catch (  Exception e) {
    System.out.println(e);
    e.printStackTrace();
  }
}
