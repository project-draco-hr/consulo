{
  myEditor=editor.getEditor();
  myEditor.addEditorMouseMotionListener(this);
  myEditor.getContentComponent().addKeyListener(this);
  Document document=myEditor.getDocument();
  myFile=PsiDocumentManager.getInstance(myEditor.getProject()).getPsiFile(document);
  final JComponent component=editor.getEditor().getComponent();
  myQueue=new MergingUpdateQueue("ImageOrColorPreview",100,component.isShowing(),component);
  Disposer.register(this,new UiNotifyConnector(editor.getComponent(),myQueue));
}
