{
  final Runnable uploadAction=new Runnable(){
    public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        public void run(){
          doUpload(sdkPath,explodedPath);
        }
      }
);
    }
  }
;
  final CompilerManager compilerManager=CompilerManager.getInstance(myProject);
  final Module module=webFacet.getModule();
  final CompileScope compileScope=compilerManager.createModuleCompileScope(module,true);
  if (!compilerManager.isUpToDate(compileScope)) {
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        final int answer=Messages.showYesNoDialog(myProject,"Exploded directory may be out of date. Do you want to build it?","Upload Application",null);
        if (answer == 0) {
          compilerManager.make(compileScope,new CompileStatusNotification(){
            public void finished(            boolean aborted,            int errors,            int warnings,            CompileContext compileContext){
              if (!aborted && errors == 0) {
                uploadAction.run();
              }
            }
          }
);
        }
 else {
          uploadAction.run();
        }
      }
    }
);
  }
 else {
    uploadAction.run();
  }
}
