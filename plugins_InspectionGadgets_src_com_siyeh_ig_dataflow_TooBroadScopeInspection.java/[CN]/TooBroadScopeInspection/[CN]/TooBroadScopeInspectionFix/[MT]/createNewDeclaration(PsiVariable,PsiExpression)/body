{
  final PsiManager manager=variable.getManager();
  final PsiElementFactory factory=manager.getElementFactory();
  String name=variable.getName();
  if (name == null) {
    name="";
  }
  final PsiDeclarationStatement newDeclaration=factory.createVariableDeclarationStatement(name,variable.getType(),initializer);
  final PsiLocalVariable newVariable=(PsiLocalVariable)newDeclaration.getDeclaredElements()[0];
  final PsiModifierList newModifierList=newVariable.getModifierList();
  final PsiModifierList modifierList=variable.getModifierList();
  if (newModifierList != null && modifierList != null) {
    newModifierList.setModifierProperty(PsiModifier.FINAL,variable.hasModifierProperty(PsiModifier.FINAL));
    final PsiAnnotation[] annotations=modifierList.getAnnotations();
    for (    PsiAnnotation annotation : annotations) {
      newModifierList.add(annotation);
    }
  }
  return newDeclaration;
}
