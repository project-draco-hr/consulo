{
  final THashSet<TextEditorHighlightingPass> ids=new THashSet<TextEditorHighlightingPass>();
  myRegisteredPassFactories.forEachKey(new TIntProcedure(){
    @Override public boolean execute(    int passId){
      PassConfig passConfig=myRegisteredPassFactories.get(passId);
      TextEditorHighlightingPassFactory factory=passConfig.passFactory;
      if (factory instanceof MainHighlightingPassFactory) {
        final TextEditorHighlightingPass pass=((MainHighlightingPassFactory)factory).createMainHighlightingPass(psiFile,document,highlightInfoProcessor);
        if (pass != null) {
          ids.add(pass);
          pass.setId(passId);
        }
      }
      return true;
    }
  }
);
  return new ArrayList<TextEditorHighlightingPass>(ids);
}
