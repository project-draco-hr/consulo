{
  if (myPopup == null) {
    final JList list=new JList(myModel);
    myPopup=JBPopupFactory.getInstance().createListPopupBuilder(list).setMovable(false).setRequestFocus(false).setItemChoosenCallback(new Runnable(){
      public void run(){
        final String value=(String)list.getSelectedValue();
        getTextEditor().setText(value != null ? value : "");
        myPopup=null;
      }
    }
).createPopup();
    myPopup.showUnderneathOf(this);
  }
}
