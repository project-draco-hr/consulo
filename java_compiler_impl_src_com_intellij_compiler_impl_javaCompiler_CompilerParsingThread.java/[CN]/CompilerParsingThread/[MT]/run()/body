{
  if (CompileDriver.ourDebugMode) {
    ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
      @Override public void run(){
        while (true) {
          final String line=readLine(myCompilerOutStreamReader);
          if (CompileDriver.ourDebugMode) {
            System.out.println("RAW_LIne read: #" + line + "#");
          }
          if (line == null) {
            myLines.offer(TERMINATION_STRING);
            break;
          }
          myLines.offer(line);
        }
      }
    }
);
  }
  processing=true;
  try {
    while (true) {
      if (!myIsUnitTestMode && myProcess == null) {
        break;
      }
      if (myProcessExited || isCanceled()) {
        break;
      }
      if (!myOutputParser.processMessageLine(this)) {
        break;
      }
    }
    if (myClassFileToProcess != null) {
      processCompiledClass(myClassFileToProcess);
      myClassFileToProcess=null;
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
    myError=e;
    LOG.info(e);
  }
 finally {
    killProcess();
    processing=false;
  }
}
