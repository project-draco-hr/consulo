{
  final Window popupWindow=SwingUtilities.windowForComponent(myComponent);
  if (popupWindow != null) {
    myStartPoint=new RelativePoint(e).getScreenPoint();
    myDirection=getDirection(myStartPoint,popupWindow.getBounds());
    if (SystemInfo.isMac && myDirection != Cursor.SE_RESIZE_CURSOR) {
      myDirection=Cursor.DEFAULT_CURSOR;
    }
    if (myDirection == Cursor.DEFAULT_CURSOR) {
      myStartPoint=null;
    }
 else {
      final BufferedImage image=new BufferedImage(myComponent.getWidth(),myComponent.getHeight(),BufferedImage.TYPE_INT_RGB);
      Graphics2D g2=(Graphics2D)image.getGraphics();
      g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN,1));
      myComponent.setBorder(BorderFactory.createMatteBorder(2,2,2,2,Color.black.brighter()));
      UIUtil.setEnabled(myComponent,false,true);
      myComponent.setResizable(false);
      myComponent.paint(g2);
      myComponent.setResizable(true);
      myComponent.setDraggedState(true);
    }
  }
}
