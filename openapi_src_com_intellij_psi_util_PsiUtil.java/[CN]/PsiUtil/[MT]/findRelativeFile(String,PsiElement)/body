{
  if (base instanceof PsiFile) {
    PsiFile baseFile=(PsiFile)base;
    if (baseFile.getOriginalFile() != null)     return findRelativeFile(uri,baseFile.getOriginalFile());
    VirtualFile file=VfsUtil.findRelativeFile(uri,baseFile.getVirtualFile());
    if (file == null)     return null;
    return base.getManager().findFile(file);
  }
 else   if (base instanceof PsiDirectory) {
    PsiDirectory baseDir=(PsiDirectory)base;
    VirtualFile file=VfsUtil.findRelativeFile(uri,baseDir.getVirtualFile());
    if (file == null)     return null;
    return base.getManager().findFile(file);
  }
  return null;
}
