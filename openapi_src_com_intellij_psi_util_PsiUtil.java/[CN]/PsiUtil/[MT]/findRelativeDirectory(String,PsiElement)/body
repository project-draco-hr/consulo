{
  if (base instanceof PsiFile) {
    PsiFile baseFile=(PsiFile)base;
    if (baseFile.getOriginalFile() != null)     return findRelativeDirectory(uri,baseFile.getOriginalFile());
    VirtualFile file=UriUtil.findRelativeFile(uri,baseFile.getVirtualFile());
    if (file == null)     return null;
    return base.getManager().findDirectory(file);
  }
 else   if (base instanceof PsiDirectory) {
    PsiDirectory baseDir=(PsiDirectory)base;
    VirtualFile file=UriUtil.findRelativeFile(uri,baseDir.getVirtualFile());
    if (file == null)     return null;
    return base.getManager().findDirectory(file);
  }
  return null;
}
