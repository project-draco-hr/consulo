{
  if (element == null) {
    return null;
  }
  if (element instanceof PsiFileSystemItem) {
    return ((PsiFileSystemItem)element).getVirtualFile();
  }
  if (!element.isValid()) {
    return null;
  }
  final PsiFile containingFile=element.getContainingFile();
  if (containingFile == null) {
    return null;
  }
  return containingFile.getVirtualFile();
}
