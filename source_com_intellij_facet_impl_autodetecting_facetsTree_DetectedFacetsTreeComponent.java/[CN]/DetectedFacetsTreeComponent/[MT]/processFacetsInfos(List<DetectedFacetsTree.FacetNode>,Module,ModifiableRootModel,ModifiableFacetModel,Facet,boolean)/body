{
  for (  DetectedFacetsTree.FacetNode facetNode : facets) {
    boolean createFacet=createFacets && facetNode.isChecked();
    FacetInfo facetInfo=((FacetInfoNode)facetNode).getFacetInfo();
    FacetType type=facetInfo.getFacetType();
    Facet facet=null;
    if (createFacet) {
      facet=FacetManagerImpl.createFacet(type,module,facetInfo.getName(),facetInfo.getConfiguration(),underlyingFacet);
      facetModel.addFacet(facet);
    }
 else {
      FacetAutodetectingManager.getInstance(module.getProject()).disableAutodetectionInFiles(type,module,facetNode.getFile().getUrl());
    }
    processFacetsInfos(facetNode.getChildren(),module,rootModel,facetModel,facet,createFacet);
  }
}
