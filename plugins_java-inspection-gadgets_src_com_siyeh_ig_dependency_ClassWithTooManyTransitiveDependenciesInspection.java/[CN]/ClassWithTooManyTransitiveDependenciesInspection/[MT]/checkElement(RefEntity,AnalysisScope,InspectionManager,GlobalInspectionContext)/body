{
  if (!(refEntity instanceof RefClass)) {
    return null;
  }
  final RefClass refClass=(RefClass)refEntity;
  final PsiClass aClass=refClass.getElement();
  if (ClassUtils.isInnerClass(aClass)) {
    return null;
  }
  final Set<RefClass> dependencies=DependencyUtils.calculateTransitiveDependenciesForClass(refClass);
  final int numDependencies=dependencies.size();
  if (numDependencies <= limit) {
    return null;
  }
  final String errorString=InspectionGadgetsBundle.message("class.with.too.many.transitive.dependencies.problem.descriptor",refEntity.getName(),numDependencies,limit);
  return new CommonProblemDescriptor[]{inspectionManager.createProblemDescriptor(errorString)};
}
