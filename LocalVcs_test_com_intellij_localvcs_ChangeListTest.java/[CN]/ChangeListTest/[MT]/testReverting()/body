{
  cl.applyChangeSetTo(r,cs(new CreateFileChange(1,p("file1"),null)));
  cl.labelLastChangeSet("1");
  cl.applyChangeSetTo(r,cs(new CreateFileChange(2,p("file2"),null)));
  cl.labelLastChangeSet("2");
  RootEntry copy=r.copy();
  cl.revertUpToChangeSetOn(copy,cl.getChangeSets().get(1));
  assertTrue(copy.hasEntry(1));
  assertTrue(copy.hasEntry(2));
  copy=r.copy();
  cl.revertUpToChangeSetOn(copy,cl.getChangeSets().get(0));
  assertTrue(copy.hasEntry(1));
  assertFalse(copy.hasEntry(2));
}
