{
  cl.applyChangeSetTo(r,cs(new CreateDirectoryChange(1,p("dir1")),new CreateDirectoryChange(2,p("dir2"))));
  cl.labelLastChangeSet("1");
  cl.applyChangeSetTo(r,cs(new CreateFileChange(3,p("dir1/file"),null)));
  cl.labelLastChangeSet("2");
  cl.applyChangeSetTo(r,cs(new MoveChange(p("dir1/file"),p("dir2"))));
  cl.labelLastChangeSet("3");
  List<ChangeSet> cs1=getChangeSetsFor("dir1");
  List<ChangeSet> cs2=getChangeSetsFor("dir2");
  assertEquals(3,cs1.size());
  assertEquals("1",cs1.get(0).getLabel());
  assertEquals("2",cs1.get(1).getLabel());
  assertEquals("3",cs1.get(2).getLabel());
  assertEquals(2,cs2.size());
  assertEquals("1",cs2.get(0).getLabel());
  assertEquals("3",cs2.get(1).getLabel());
}
