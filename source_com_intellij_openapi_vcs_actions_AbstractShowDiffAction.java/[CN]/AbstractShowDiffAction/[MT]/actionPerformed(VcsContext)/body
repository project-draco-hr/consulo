{
  final Project project=vcsContext.getProject();
  final VirtualFile selectedFile=vcsContext.getSelectedFiles()[0];
  final AbstractVcs vcs=ProjectLevelVcsManager.getInstance(project).getVcsFor(selectedFile);
  final DiffProvider diffProvider=vcs.getDiffProvider();
  VcsRevisionNumber revisionNumber=getRevisionNumber(diffProvider,selectedFile);
  if (revisionNumber != null) {
    showDiff(diffProvider,revisionNumber,selectedFile,project);
  }
}
