{
  myHolder.add(HighlightUtil.checkMethodReferencesFeature(expression,myLanguageLevel,myFile));
  JavaResolveResult result;
  try {
    result=expression.advancedResolve(true);
  }
 catch (  IndexNotReadyException e) {
    return;
  }
  if (myRefCountHolder != null) {
    myRefCountHolder.registerReference(expression,result);
  }
  final PsiElement method=result.getElement();
  if (method != null && !result.isAccessible()) {
    final String accessProblem=HighlightUtil.buildProblemWithAccessDescription(expression,result);
    HighlightInfo info=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip(accessProblem).create();
    myHolder.add(info);
  }
  if (!myHolder.hasErrorResults()) {
    final PsiType functionalInterfaceType=expression.getFunctionalInterfaceType();
    if (functionalInterfaceType != null && LambdaUtil.dependsOnTypeParams(functionalInterfaceType,functionalInterfaceType,expression)) {
      HighlightInfo result1=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip("Cyclic inference").create();
      myHolder.add(result1);
    }
 else {
      final PsiElement referenceNameElement=expression.getReferenceNameElement();
      if (referenceNameElement instanceof PsiKeyword) {
        if (!PsiMethodReferenceUtil.isValidQualifier(expression)) {
          final PsiElement qualifier=expression.getQualifier();
          String description="Cannot find class " + qualifier.getText();
          HighlightInfo result1=HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(qualifier).descriptionAndTooltip(description).create();
          myHolder.add(result1);
        }
      }
    }
    if (!myHolder.hasErrorResults()) {
      final PsiClassType.ClassResolveResult resolveResult=PsiUtil.resolveGenericsClassInType(functionalInterfaceType);
      final PsiClass psiClass=resolveResult.getElement();
      if (psiClass != null && !PsiUtil.isAccessible(myFile.getProject(),psiClass,expression,null)) {
        myHolder.add(HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip(HighlightUtil.buildProblemWithAccessDescription(expression,resolveResult)).create());
      }
    }
    if (functionalInterfaceType != null && LambdaUtil.getFunctionalInterfaceMethod(functionalInterfaceType) != null && !myHolder.hasErrorResults()) {
      final String errorMessage=PsiMethodReferenceUtil.checkMethodReferenceContext(expression);
      if (errorMessage != null) {
        myHolder.add(HighlightInfo.newHighlightInfo(HighlightInfoType.ERROR).range(expression).descriptionAndTooltip(errorMessage).create());
      }
    }
  }
  if (!myHolder.hasErrorResults()) {
    myHolder.add(HighlightUtil.checkUnhandledExceptions(expression,expression.getTextRange()));
  }
}
