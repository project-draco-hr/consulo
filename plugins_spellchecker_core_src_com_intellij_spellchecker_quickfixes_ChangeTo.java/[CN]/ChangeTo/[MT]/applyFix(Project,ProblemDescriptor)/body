{
  PsiDocumentManager documentManager=PsiDocumentManager.getInstance(project);
  PsiFile psiFile=descriptor.getPsiElement().getContainingFile();
  Document document=documentManager.getDocument(psiFile);
  int psiElementOffset=descriptor.getPsiElement().getTextRange().getStartOffset();
  final Editor editor=FileEditorManager.getInstance(project).getSelectedTextEditor();
  if (editor == null)   return;
  editor.offsetToLogicalPosition(psiElementOffset + textRange.getStartOffset());
  editor.getSelectionModel().setSelection(psiElementOffset + textRange.getStartOffset(),psiElementOffset + textRange.getEndOffset());
  String word=editor.getSelectionModel().getSelectedText();
  SpellCheckerManager manager=SpellCheckerManager.getInstance(project);
  List<String> variants=manager.getSuggestions(word);
  List<LookupItem<String>> lookupItems=new ArrayList<LookupItem<String>>();
  for (  String variant : variants) {
    final LookupItem<String> lookupItem=new LookupItem<String>(variant,variant);
    lookupItems.add(lookupItem);
  }
  LookupItem[] items=new LookupItem[lookupItems.size()];
  items=lookupItems.toArray(items);
  LookupManager lookupManager=LookupManager.getInstance(project);
  lookupManager.showLookup(editor,items,null);
}
