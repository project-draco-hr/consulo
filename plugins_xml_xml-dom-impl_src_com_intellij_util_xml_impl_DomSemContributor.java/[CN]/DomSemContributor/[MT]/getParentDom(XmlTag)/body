{
  LinkedHashSet<XmlTag> allParents=new LinkedHashSet<XmlTag>();
  PsiElement each=tag;
  while (each instanceof XmlTag && allParents.add((XmlTag)each)) {
    each=PhysicalDomParentStrategy.getParentTagCandidate((XmlTag)each);
  }
  ArrayList<XmlTag> list=new ArrayList<XmlTag>(allParents);
  Collections.reverse(list);
  DomManagerImpl manager=DomManagerImpl.getDomManager(tag.getProject());
  for (  XmlTag xmlTag : list) {
    manager.getDomHandler(xmlTag);
  }
  return manager.getDomHandler(tag);
}
