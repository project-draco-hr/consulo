{
  final List<AbstractTestProxy> failed=getFailedTests();
  final DataContext dataContext=e.getDataContext();
  final TestNGConfiguration configuration=myConsoleProperties.getConfiguration();
  boolean isDebug=myConsoleProperties.isDebug();
  try {
    final RunProfile profile=new MyRunProfile(configuration,failed);
    final Executor executor=isDebug ? DefaultDebugExecutor.getDebugExecutorInstance() : DefaultRunExecutor.getRunExecutorInstance();
    final ProgramRunner runner=RunnerRegistry.getInstance().getRunner(executor.getId(),profile);
    LOG.assertTrue(runner != null);
    runner.execute(executor,new ExecutionEnvironment(profile,myRunnerSettings,myConfigurationPerRunnerSettings,dataContext));
  }
 catch (  ExecutionException e1) {
    LOG.error(e1);
  }
}
