{
  VirtualFile[] contentRoots=ModuleRootManager.getInstance(module).getContentRoots();
  GlobalSearchScope result=null;
  PsiManager psiManager=PsiManager.getInstance(module.getProject());
  for (  VirtualFile root : contentRoots) {
    PsiDirectory directory=psiManager.findDirectory(root);
    if (directory != null) {
      GlobalSearchScope moduleContent=GlobalSearchScope.directoryScope(directory,true);
      if (result == null) {
        result=moduleContent;
      }
 else {
        result=result.uniteWith(moduleContent);
      }
    }
  }
  if (result == null) {
    result=GlobalSearchScope.EMPTY_SCOPE;
  }
  return result;
}
