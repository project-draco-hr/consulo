{
  final VirtualFile[] children=directory.getChildren();
  if (children == null)   return;
  for (int i=0; i < children.length; i++) {
    VirtualFile child=children[i];
    if (!child.isDirectory() && (fileMaskRegExp == null || fileMaskRegExp.matcher(child.getName()).matches())) {
      vFileList.add(child);
    }
 else     if (isRecursive) {
      addVirtualFilesUnderDirectory(child,vFileList,isRecursive,fileMaskRegExp);
    }
  }
}
