{
  if (PsiUtil.isInJspFile(this)) {
    if (getTreeParent().getElementType() == JavaElementType.DECLARATION_STATEMENT && getTreeParent().getTreeParent() instanceof JspCodeBlock && getTreeParent().getTreeParent().getTreeParent().getElementType() == JspElementType.HOLDER_METHOD) {
      final JspFile jspFile=PsiUtil.getJspFile(this);
      final JspContextManager contextManager=JspContextManager.getInstance(getProject());
      if (contextManager == null) {
        return super.getUseScope();
      }
      final Set<PsiFile> allIncluded=new THashSet<PsiFile>(10);
      final JspFile rootContext=contextManager.getRootContextFile(jspFile);
      allIncluded.add(rootContext);
      JspSpiUtil.visitAllIncludedFilesRecursively(rootContext,new PsiElementVisitor(){
        @Override public void visitReferenceExpression(        final PsiReferenceExpression expression){
        }
        @Override public void visitFile(        final PsiFile file){
          allIncluded.add(file);
        }
      }
);
      return new LocalSearchScope(allIncluded.toArray(new PsiFile[allIncluded.size()]));
    }
  }
  return super.getUseScope();
}
