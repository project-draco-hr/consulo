{
  CheckUtil.checkWritable(this);
  final CharTable treeCharTab=SharedImplUtil.findCharTableByTree(this);
  CompositeElement statement=getTreeParent();
  PsiElement[] variables=((PsiDeclarationStatement)SourceTreeToPsiMap.treeElementToPsi(statement)).getDeclaredElements();
  if (variables.length > 1) {
    ASTNode type=SourceTreeToPsiMap.psiElementToTree(getTypeElement());
    ASTNode modifierList=SourceTreeToPsiMap.psiElementToTree(getModifierList());
    ASTNode last=statement;
    for (int i=1; i < variables.length; i++) {
      CompositeElement variable=(CompositeElement)SourceTreeToPsiMap.psiElementToTree(variables[i]);
      ASTNode comma=TreeUtil.skipElementsBack(variable.getTreePrev(),ElementType.WHITE_SPACE_OR_COMMENT_BIT_SET);
      if (comma != null && comma.getElementType() == JavaTokenType.COMMA) {
        CodeEditUtil.removeChildren(statement,comma,variable.getTreePrev());
      }
      CodeEditUtil.removeChild(statement,variable);
      final CharTable charTableByTree=SharedImplUtil.findCharTableByTree(statement);
      variable.putUserData(CharTable.CHAR_TABLE_KEY,charTableByTree);
      CompositeElement statement1=Factory.createCompositeElement(DECLARATION_STATEMENT);
      statement1.putUserData(CharTable.CHAR_TABLE_KEY,charTableByTree);
      statement1.addChild(variable,null);
      ASTNode space=Factory.createSingleLeafElement(JavaTokenType.WHITE_SPACE,new char[]{' '},0,1,treeCharTab,getManager());
      variable.addChild(space,variable.getFirstChildNode());
      ASTNode typeClone=(ASTNode)type.clone();
      typeClone.putUserData(CharTable.CHAR_TABLE_KEY,treeCharTab);
      variable.addChild(typeClone,variable.getFirstChildNode());
      if (modifierList.getTextLength() > 0) {
        space=Factory.createSingleLeafElement(JavaTokenType.WHITE_SPACE,new char[]{' '},0,1,treeCharTab,getManager());
        variable.addChild(space,variable.getFirstChildNode());
      }
      ASTNode modifierListClone=(ASTNode)modifierList.clone();
      modifierListClone.putUserData(CharTable.CHAR_TABLE_KEY,treeCharTab);
      variable.addChild(modifierListClone,variable.getFirstChildNode());
      ASTNode semicolon=Factory.createSingleLeafElement(JavaTokenType.SEMICOLON,new char[]{';'},0,1,treeCharTab,getManager());
      SourceTreeToPsiMap.psiElementToTree(variables[i - 1]).addChild(semicolon,null);
      CodeEditUtil.addChild(statement.getTreeParent(),statement1,last.getTreeNext());
      last=statement1;
    }
  }
  SharedImplUtil.normalizeBrackets(this);
}
