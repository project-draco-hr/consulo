{
  ConcurrentMap<Key,Object> map=getOrCreateMap();
  if (oldValue == null) {
    return newValue == null || map.putIfAbsent(key,newValue) == null;
  }
  if (newValue == null) {
    return map.remove(key,oldValue);
  }
  return map.replace(key,oldValue,newValue);
}
