{
  Object v=getOrCreateMap().get(key);
  if (v != null) {
    return (T)v;
  }
  while (true) {
    try {
      @SuppressWarnings("unchecked") T prev=(T)getOrCreateMap().putIfAbsent(key,value);
      return prev == null ? value : prev;
    }
 catch (    ConcurrentModificationException ignored) {
    }
  }
}
