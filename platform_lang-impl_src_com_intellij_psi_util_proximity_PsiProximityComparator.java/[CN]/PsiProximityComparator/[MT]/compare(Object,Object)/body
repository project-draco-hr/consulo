{
  PsiElement element1=o1 instanceof PsiElement ? (PsiElement)o1 : null;
  PsiElement element2=o2 instanceof PsiElement ? (PsiElement)o2 : null;
  if (element1 == null)   return element2 == null ? 0 : 1;
  if (element2 == null)   return -1;
  final WeighingComparable<PsiElement,ProximityLocation> proximity1=myProximities.get(element1);
  final WeighingComparable<PsiElement,ProximityLocation> proximity2=myProximities.get(element2);
  if (proximity1 == null || proximity2 == null) {
    return 0;
  }
  if (!proximity1.equals(proximity2)) {
    return -proximity1.compareTo(proximity2);
  }
  if (myContext == null)   return 0;
  Module contextModule=ModuleUtil.findModuleForPsiElement(myContext);
  if (contextModule == null)   return 0;
  StatisticsManager statisticsManager=StatisticsManager.getInstance();
  final ProximityLocation location=new ProximityLocation(myContext,contextModule);
  int count1=statisticsManager.getUseCount(STATISTICS_KEY,element1,location);
  int count2=statisticsManager.getUseCount(STATISTICS_KEY,element1,location);
  return count2 - count1;
}
