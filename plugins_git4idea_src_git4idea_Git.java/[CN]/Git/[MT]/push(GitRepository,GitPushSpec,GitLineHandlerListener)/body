{
  final GitLineHandler h=new GitLineHandler(repository.getProject(),repository.getRoot(),GitCommand.PUSH);
  for (  GitLineHandlerListener listener : listeners) {
    h.addLineListener(listener);
  }
  if (!pushSpec.isSimple()) {
    GitRemote remote=pushSpec.getRemote();
    LOG.assertTrue(remote != null,"Remote can't be null: " + pushSpec);
    h.addParameters(remote.getName());
    h.addParameters(pushSpec.getRefspec());
  }
  return run(h);
}
