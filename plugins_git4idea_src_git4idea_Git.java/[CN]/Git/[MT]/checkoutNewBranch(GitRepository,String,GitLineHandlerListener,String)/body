{
  final GitLineHandler h=new GitLineHandler(repository.getProject(),repository.getRoot(),GitCommand.CHECKOUT);
  h.addParameters("-b");
  h.addParameters(branchName);
  if (reference != null && !reference.isEmpty()) {
    h.addParameters(reference);
  }
  if (listener != null) {
    h.addLineListener(listener);
  }
  return run(h);
}
