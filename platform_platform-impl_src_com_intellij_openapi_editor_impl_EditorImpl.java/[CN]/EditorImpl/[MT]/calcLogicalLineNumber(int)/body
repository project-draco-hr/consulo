{
  int textLength=myDocument.getTextLength();
  if (textLength == 0)   return 0;
  if (offset > textLength || offset < 0) {
    throw new IndexOutOfBoundsException("Wrong offset: " + offset + " textLength: "+ textLength);
  }
  return mySoftWrapModel.offsetToLogicalPosition(offset).line;
}
