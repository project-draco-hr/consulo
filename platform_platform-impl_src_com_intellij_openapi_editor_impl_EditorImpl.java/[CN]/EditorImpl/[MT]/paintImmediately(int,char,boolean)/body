{
  Graphics g=myEditorComponent.getGraphics();
  if (g == null)   return;
  TextAttributes attributes=((LexerEditorHighlighter)myHighlighter).getAttributes((DocumentImpl)myDocument,offset,c);
  int fontType=attributes.getFontType();
  Font font=fontFor(fontType);
  FontMetrics fontMetrics=getFontMetrics(fontType);
  int charWidth=fontMetrics.charWidth(c);
  int delta=charWidth;
  if (!insert && offset < myDocument.getTextLength()) {
    delta-=fontMetrics.charWidth(myDocument.getCharsSequence().charAt(offset));
  }
  Rectangle tailArea=lineRectangleBetween(offset,myDocument.getLineEndOffset(offsetToLogicalLine(offset)));
  if (tailArea.isEmpty()) {
    tailArea.width+=EditorUtil.getSpaceWidth(fontType,this);
  }
  Color lineColor=getCaretRowBackground();
  Rectangle newArea=lineRectangleBetween(offset,offset);
  newArea.width+=charWidth;
  String newText=Character.toString(c);
  Point point=newArea.getLocation();
  int ascent=getAscent();
  Color color=attributes.getForegroundColor() == null ? getForegroundColor() : attributes.getForegroundColor();
  EditorUIUtil.setupAntialiasing(g);
  if (delta != 0) {
    shift(g,tailArea,delta);
  }
  fill(g,newArea,lineColor);
  print(g,newText,point,ascent,font,color);
}
