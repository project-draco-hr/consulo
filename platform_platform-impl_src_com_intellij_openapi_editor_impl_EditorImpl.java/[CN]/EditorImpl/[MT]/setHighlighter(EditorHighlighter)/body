{
  assertIsDispatchThread();
  final Document document=getDocument();
  if (myHighlighter != null && !isDisposed()) {
    document.removeDocumentListener(myHighlighter);
  }
  document.addDocumentListener(highlighter);
  highlighter.setEditor(this);
  highlighter.setText(document.getCharsSequence());
  myHighlighter=highlighter;
  EditorHighlighterCache.rememberEditorHighlighterForCachesOptimization(document,highlighter);
  if (myPanel != null) {
    reinitSettings();
  }
}
