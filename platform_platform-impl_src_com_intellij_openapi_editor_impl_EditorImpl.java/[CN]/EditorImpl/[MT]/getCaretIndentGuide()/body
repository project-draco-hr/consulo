{
  if (!mySettings.isIndentGuidesShown())   return null;
  final int indentSize=getIndentSize();
  if (indentSize == 0)   return null;
  final LogicalPosition caretPosition=myCaretModel.getLogicalPosition();
  int startLine=caretPosition.line;
  int endLine=startLine;
  final int caretIndent=caretPosition.column / indentSize;
  final int indents=getIndents(startLine);
  if (caretIndent * indentSize != caretPosition.column)   return null;
  if (caretIndent > indents || indents == 0)   return null;
  if (caretIndent > 0 && caretPosition.column % indentSize == 0) {
    while (startLine > 0) {
      if (getIndents(startLine - 1) <= caretIndent)       break;
      startLine--;
    }
    while (endLine < myDocument.getLineCount() - 1) {
      if (getIndents(endLine + 1) <= caretIndent)       break;
      endLine++;
    }
    if (startLine < endLine) {
      return new IndentGuideDescriptor(caretIndent,startLine,endLine,indentSize);
    }
  }
  return null;
}
