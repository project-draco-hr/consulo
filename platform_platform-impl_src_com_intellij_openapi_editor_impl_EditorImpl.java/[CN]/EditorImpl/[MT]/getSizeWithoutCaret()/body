{
  Dimension size=mySizeContainer.getContentSize();
  if (isOneLineMode())   return new Dimension(size.width,getLineHeight());
  if (mySettings.isAdditionalPageAtBottom()) {
    int lineHeight=getLineHeight();
    int visibleAreaHeight=getScrollingModel().getVisibleArea().height;
    int virtualPageHeight;
    if (visibleAreaHeight <= 0 && myVirtualPageHeight > 0) {
      virtualPageHeight=myVirtualPageHeight;
    }
 else {
      myVirtualPageHeight=virtualPageHeight=Math.max(visibleAreaHeight - 2 * lineHeight,lineHeight);
    }
    if (myVirtualPageHeight > 0) {
      return new Dimension(size.width,size.height + virtualPageHeight);
    }
    return size;
  }
  return getContentSize();
}
