{
  myFoldingModel.onBulkDocumentUpdateFinished();
  mySoftWrapModel.onBulkDocumentUpdateFinished();
  myCaretModel.onBulkDocumentUpdateFinished();
  clearTextWidthCache();
  setMouseSelectionState(MOUSE_SELECTION_STATE_NONE);
  if (myUseNewRendering) {
    myView.reset();
  }
 else {
    mySizeContainer.reset();
  }
  validateSize();
  updateGutterSize();
  repaintToScreenBottom(0);
  updateCaretCursor();
  restoreCaretRelativePosition();
}
