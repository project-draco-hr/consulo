{
  if (!isShowing() || myScrollPane == null || myDocument.isInBulkUpdate()) {
    return;
  }
  endOffset=Math.min(endOffset,myDocument.getTextLength());
  assertIsDispatchThread();
  if (startOffset <= endOffset) {
    int startLine=myDocument.getLineNumber(startOffset);
    int endLine=myDocument.getLineNumber(endOffset);
    repaintLines(startLine,endLine);
  }
}
