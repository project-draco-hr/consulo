{
  if (!isShowing() || myScrollPane == null || myDocument.isInBulkUpdate()) {
    return;
  }
  int startOffsetToUse=startOffset;
  int endOffsetToUse=Math.min(endOffset,myDocument.getTextLength());
  assertIsDispatchThread();
  if (startOffsetToUse <= endOffsetToUse) {
    int startLine=myDocument.getLineNumber(startOffsetToUse);
    int endLine=myDocument.getLineNumber(endOffsetToUse);
    repaintLines(startLine,endLine);
  }
}
