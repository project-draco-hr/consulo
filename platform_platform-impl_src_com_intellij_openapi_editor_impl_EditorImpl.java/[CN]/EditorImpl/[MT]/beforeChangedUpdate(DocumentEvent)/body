{
  if (isStickySelection()) {
    setStickySelection(false);
  }
  if (myDocument.isInBulkUpdate() || myScrollingModel == null) {
    return;
  }
  Rectangle visibleArea=getScrollingModel().getVisibleArea();
  Point pos=visualPositionToXY(getCaretModel().getVisualPosition());
  myCaretUpdateVShift=pos.y - visibleArea.y;
  if (!mySoftWrapModel.isSoftWrappingEnabled()) {
    mySizeContainer.beforeChange(e);
  }
}
