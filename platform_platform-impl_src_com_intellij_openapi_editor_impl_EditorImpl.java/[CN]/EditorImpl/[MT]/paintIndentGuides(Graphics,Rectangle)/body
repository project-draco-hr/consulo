{
  if (mySettings.isIndentGuidesShown()) {
    int y=clip.y;
    int line=xyToLogicalPosition(new Point(0,y)).line;
    final int indentSize=getIndentSize();
    int gapWidth=EditorUtil.getSpaceWidth(Font.PLAIN,this) * indentSize;
    do {
      final int indents=getIndents(line);
      for (int n=1; n < indents; n++) {
        int x=n * gapWidth + 1;
        UIUtil.drawDottedLine((Graphics2D)g,x,y,x,y + getLineHeight(),getBackroundColor(),myScheme.getColor(EditorColors.WHITESPACES_COLOR));
      }
      line++;
      y=logicalLineToY(line);
    }
 while (y < clip.y + clip.height);
    if (myCaretIndentGuide != null) {
      int x=myCaretIndentGuide.indentLevel * gapWidth + 1;
      int y1=logicalLineToY(myCaretIndentGuide.startLine);
      int y2=logicalLineToY(myCaretIndentGuide.endLine);
      UIUtil.drawDottedLine((Graphics2D)g,x,y1,x,y2,getBackroundColor(),getForegroundColor());
    }
  }
}
