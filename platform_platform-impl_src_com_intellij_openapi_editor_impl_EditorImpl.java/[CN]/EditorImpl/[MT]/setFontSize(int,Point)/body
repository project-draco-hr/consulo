{
  int oldFontSize=myScheme.getEditorFontSize();
  Rectangle visibleArea=myScrollingModel.getVisibleArea();
  Point zoomCenterRelative=zoomCenter == null ? new Point() : zoomCenter;
  Point zoomCenterAbsolute=new Point(visibleArea.x + zoomCenterRelative.x,visibleArea.y + zoomCenterRelative.y);
  LogicalPosition zoomCenterLogical=xyToLogicalPosition(zoomCenterAbsolute).withoutVisualPositionInfo();
  int oldLineHeight=getLineHeight();
  int intraLineOffset=zoomCenterAbsolute.y % oldLineHeight;
  myScheme.setEditorFontSize(fontSize);
  fontSize=myScheme.getEditorFontSize();
  myPropertyChangeSupport.firePropertyChange(PROP_FONT_SIZE,oldFontSize,fontSize);
  myScrollPane.getViewport().invalidate();
  Point shiftedZoomCenterAbsolute=logicalPositionToXY(zoomCenterLogical);
  myScrollingModel.disableAnimation();
  try {
    myScrollingModel.scrollToOffsets(visibleArea.x == 0 ? 0 : shiftedZoomCenterAbsolute.x - zoomCenterRelative.x,shiftedZoomCenterAbsolute.y - zoomCenterRelative.y + (intraLineOffset * getLineHeight() + oldLineHeight / 2) / oldLineHeight);
  }
  finally {
    myScrollingModel.enableAnimation();
  }
}
