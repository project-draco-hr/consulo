{
  int startLine=e.getOldLength() == 0 ? myOldEndLine : getVisualPositionLine(e.getOffset());
  int newEndLine=e.getNewLength() == 0 ? startLine : getVisualPositionLine(e.getOffset() + e.getNewLength());
  int oldEndLine=myOldEndLine;
  update(startLine,newEndLine,oldEndLine);
}
