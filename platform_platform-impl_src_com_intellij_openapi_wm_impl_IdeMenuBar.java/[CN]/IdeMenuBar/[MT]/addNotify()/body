{
  super.addNotify();
  updateMenuActions();
  Window window=SwingUtilities.getWindowAncestor(this);
  if (SystemInfo.isWindows && window instanceof IdeFrameEx) {
    boolean fullScreen=((IdeFrameEx)window).isInFullScreen();
    if (fullScreen) {
      setState(State.COLLAPSING);
      restartAnimator();
    }
 else {
      if (myAnimator != null) {
        myAnimator.suspend();
      }
      setState(State.EXPANDED);
    }
  }
  myActionManager.addTimerListener(1000,new WeakTimerListener(myActionManager,myTimerListener));
  UISettingsListener UISettingsListener=new UISettingsListener(){
    public void uiSettingsChanged(    final UISettings source){
      updateMnemonicsVisibility();
      myPresentationFactory.reset();
    }
  }
;
  UISettings.getInstance().addUISettingsListener(UISettingsListener,myDisposable);
  Disposer.register(ApplicationManager.getApplication(),myDisposable);
  if (myActivationWatcher != null) {
    myActivationWatcher.start();
  }
}
