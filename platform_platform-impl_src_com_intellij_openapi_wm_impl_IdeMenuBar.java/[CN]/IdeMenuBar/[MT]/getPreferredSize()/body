{
  Dimension dimension=super.getPreferredSize();
  if (myState.isInProgress()) {
    dimension.height=COLLAPSED_HEIGHT + (int)((myState == State.COLLAPSING ? (1 - myProgress) : myProgress) * (dimension.height - COLLAPSED_HEIGHT));
  }
 else   if (myState == State.COLLAPSED) {
    dimension.height=COLLAPSED_HEIGHT;
  }
  return dimension;
}
