{
  final Module module=super.createModule(path);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      final ModifiableRootModel model=ModuleRootManager.getInstance(module).getModifiableModel();
      final LibraryTable.ModifiableModel modifiableModel=model.getModuleLibraryTable().getModifiableModel();
      final Library library=modifiableModel.createLibrary("junit");
      final Library.ModifiableModel libModel=library.getModifiableModel();
      libModel.addRoot(VfsUtil.getUrlForLibraryRoot(new File(PathUtil.getJarPathForClass(TestCase.class))),OrderRootType.CLASSES);
      libModel.commit();
      model.commit();
    }
  }
);
  return module;
}
