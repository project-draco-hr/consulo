{
  boolean bulkMode=endIndex - startIndex > 50;
  if (bulkMode)   ((DocumentEx)document).setInBulkUpdate(true);
  try {
    for (int i=startIndex; i <= endIndex; i++) {
      EditorActionUtil.indentLine(project,editor,i,blockIndent);
      if (bulkMode && i == endIndex) {
        ((DocumentEx)document).setInBulkUpdate(false);
        bulkMode=false;
      }
    }
  }
  finally {
    if (bulkMode)     ((DocumentEx)document).setInBulkUpdate(false);
  }
}
