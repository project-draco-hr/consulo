{
  if (CodeInsightSettings.getInstance().SELECT_AUTOPOPUP_SUGGESTIONS_BY_CHARS && psiFile.getUserData(GroovyShellAction.GROOVY_SHELL_FILE) == Boolean.TRUE) {
    return ThreeState.YES;
  }
  if (com.intellij.psi.impl.PsiImplUtil.isLeafElementOfType(contextElement,TokenSets.STRING_LITERALS)) {
    @SuppressWarnings("ConstantConditions") PsiElement parent=contextElement.getParent();
    if (parent != null) {
      for (      PsiReference reference : parent.getReferences()) {
        if (!reference.isSoft() && reference.getRangeInElement().shiftRight(parent.getTextOffset()).containsOffset(offset)) {
          return ThreeState.NO;
        }
      }
    }
    return ThreeState.YES;
  }
  if (psiElement().afterLeaf("def").accepts(contextElement)) {
    return ThreeState.YES;
  }
  return ThreeState.UNSURE;
}
