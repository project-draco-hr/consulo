{
  if (!ourCanUseSnappy || string.length() < STRING_COMPRESSION_THRESHOLD)   return string;
  try {
    return Snappy.compress(string.toString(),Charset.defaultCharset());
  }
 catch (  IOException ex) {
    ex.printStackTrace();
    return string;
  }
}
