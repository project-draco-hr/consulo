{
  final Map<String,String> parameters=new HashMap<String,String>();
  if (replaceParameters) {
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      public void run(){
        ProjectTemplateParameterFactory[] extensions=Extensions.getExtensions(ProjectTemplateParameterFactory.EP_NAME);
        for (        ProjectTemplateParameterFactory extension : extensions) {
          String value=extension.detectParameterValue(project);
          if (value != null) {
            parameters.put(value,extension.getParameterId());
          }
        }
      }
    }
);
  }
  return parameters;
}
