{
  final Ref<VirtualFile> result=new Ref<VirtualFile>();
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      try {
        VirtualFile file=parent.createChildData(this,name);
        if (content != null) {
          file.setBinaryContent(CharsetToolkit.getUtf8Bytes(content));
        }
        result.set(file);
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
,"",null);
  return result.get();
}
