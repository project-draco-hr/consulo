{
  if (newer == null) {
    VirtualFile dir=fs.findFileByPath(older.getParent().getPath());
    VirtualFile f=dir.createChildData(null,older.getName());
    f.setBinaryContent(older.getContent().getBytes(),-1,older.getTimestamp());
    return;
  }
  VirtualFile f=fs.findFileByPath(newer.getPath());
  if (older == null) {
    f.delete(null);
    return;
  }
  if (!older.getName().equals(f.getName())) {
    f.rename(null,older.getName());
  }
  if (f.getTimeStamp() != older.getTimestamp()) {
    f.setBinaryContent(older.getContent().getBytes(),-1,older.getTimestamp());
  }
}
