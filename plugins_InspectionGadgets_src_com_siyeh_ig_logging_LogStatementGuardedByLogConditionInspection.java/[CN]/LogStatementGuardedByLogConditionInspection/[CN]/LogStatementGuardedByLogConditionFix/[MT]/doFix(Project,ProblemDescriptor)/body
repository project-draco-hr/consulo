{
  final PsiElement element=descriptor.getPsiElement();
  final PsiMethodCallExpression methodCallExpression=(PsiMethodCallExpression)element.getParent();
  final PsiStatement statement=PsiTreeUtil.getParentOfType(methodCallExpression,PsiStatement.class);
  if (statement == null) {
    return;
  }
  final List<PsiStatement> logStatements=new ArrayList();
  logStatements.add(statement);
  final PsiReferenceExpression methodExpression=methodCallExpression.getMethodExpression();
  final String referenceName=methodExpression.getReferenceName();
  if (referenceName == null) {
    return;
  }
  PsiStatement previousStatement=PsiTreeUtil.getPrevSiblingOfType(statement,PsiStatement.class);
  while (previousStatement != null && isSameLogMethodCall(previousStatement,referenceName)) {
    logStatements.add(0,previousStatement);
    previousStatement=PsiTreeUtil.getPrevSiblingOfType(previousStatement,PsiStatement.class);
  }
  PsiStatement nextStatement=PsiTreeUtil.getNextSiblingOfType(statement,PsiStatement.class);
  while (nextStatement != null && isSameLogMethodCall(nextStatement,referenceName)) {
    logStatements.add(nextStatement);
    nextStatement=PsiTreeUtil.getNextSiblingOfType(nextStatement,PsiStatement.class);
  }
  final PsiElementFactory factory=JavaPsiFacade.getInstance(project);
  final PsiExpression qualifier=methodExpression.getQualifierExpression();
  final StringBuilder ifStatementText=new StringBuilder("if (");
  ifStatementText.append(qualifier.getText());
  ifStatementText.append('.');
  final String conditionMethodText=loggerMethodAndconditionMethodTextMap.get(referenceName);
  ifStatementText.append(conditionMethodText);
  ifStatementText.append(") {}");
  final PsiStatement ifStatement=factory.createStatementFromText(ifStatementText.toString(),statement);
  final PsiElement[] children=ifStatement.getChildren();
  final PsiBlockStatement blockStatement=(PsiBlockStatement)children[0];
  final PsiCodeBlock codeBlock=blockStatement.getCodeBlock();
  for (  PsiStatement logStatement : logStatements) {
    codeBlock.add(logStatement);
  }
  final PsiStatement firstStatement=logStatements.get(0);
  final PsiElement parent=firstStatement.getParent();
  parent.addBefore(ifStatement,firstStatement);
}
