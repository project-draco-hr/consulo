{
  if (ourGitExecutable != null) {
    return ourGitExecutable;
  }
  String exec=System.getenv(GIT_EXECUTABLE_ENV);
  if (exec != null && new File(exec).exists()) {
    log("Using Git from IDEA_TEST_GIT_EXECUTABLE: " + exec);
    return exec;
  }
  exec=System.getenv(TEAMCITY_GIT_EXECUTABLE_ENV);
  if (exec != null && new File(exec).exists()) {
    log("Using Git from TEAMCITY_GIT_PATH: " + exec);
    return exec;
  }
  throw new IllegalStateException("Git executable not found. " + "Please define IDEA_TEST_GIT_EXECUTABLE environment variable pointing to the Git executable.");
}
