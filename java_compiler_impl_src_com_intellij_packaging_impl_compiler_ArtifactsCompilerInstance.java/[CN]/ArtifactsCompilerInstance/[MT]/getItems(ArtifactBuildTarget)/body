{
  myBuilderContext=new ArtifactsProcessingItemsBuilderContext(myContext);
  final Artifact artifact=target.getArtifact();
  final Set<Artifact> selfIncludingArtifacts=new ReadAction<Set<Artifact>>(){
    protected void run(    final Result<Set<Artifact>> result){
      result.setResult(ArtifactValidationUtil.getInstance(getProject()).getSelfIncludingArtifacts());
    }
  }
.execute().getResultObject();
  if (selfIncludingArtifacts.contains(artifact)) {
    myContext.addMessage(CompilerMessageCategory.ERROR,"Artifact '" + artifact.getName() + "' includes itself in the output layout",null,-1,-1);
    return Collections.emptyList();
  }
  final String outputPath=artifact.getOutputPath();
  if (outputPath == null || outputPath.length() == 0) {
    myContext.addMessage(CompilerMessageCategory.ERROR,"Cannot build '" + artifact.getName() + "' artifact: output path is not specified",null,-1,-1);
    return Collections.emptyList();
  }
  new ReadAction(){
    protected void run(    final Result result){
      collectItems(artifact,outputPath);
    }
  }
.execute();
  return new ArrayList<ArtifactCompilerCompileItem>(myBuilderContext.getProcessingItems());
}
