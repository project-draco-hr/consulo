{
  final Ref<VcsException> refEx=new Ref<VcsException>();
  final Ref<List<CommittedChangeList>> changes=new Ref<List<CommittedChangeList>>();
  boolean completed=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      try {
        changes.set(myProvider.getCommittedChanges(mySettings,myLocation,myMaxCount));
      }
 catch (      VcsException ex) {
        refEx.set(ex);
      }
    }
  }
,"Loading changes",true,myProject);
  if (!refEx.isNull()) {
    LOG.info(refEx.get());
    Messages.showErrorDialog(myProject,"Error refreshing view: " + StringUtil.join(refEx.get().getMessages(),"\n"),"Committed Changes");
  }
 else   if (completed) {
    myChangesFromProvider=changes.get();
    updateFilteredModel(false);
  }
}
