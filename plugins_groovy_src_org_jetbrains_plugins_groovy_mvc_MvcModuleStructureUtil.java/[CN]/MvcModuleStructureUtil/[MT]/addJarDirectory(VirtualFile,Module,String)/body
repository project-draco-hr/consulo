{
  final VirtualFile libDir=root.findFileByRelativePath("lib");
  if (libDir == null || !libDir.isDirectory() || ProjectRootManager.getInstance(module.getProject()).getFileIndex().isIgnored(libDir)) {
    return null;
  }
  final Library library=findUserLibrary(module,libName);
  if (library != null && library.isJarDirectory(libDir.getUrl())) {
    return null;
  }
  return new Consumer<ModifiableRootModel>(){
    public void consume(    ModifiableRootModel model){
      Library.ModifiableModel libModel=modifyDefaultLibrary(model,libName);
      libModel.addJarDirectory(libDir,false);
      libModel.commit();
    }
  }
;
}
