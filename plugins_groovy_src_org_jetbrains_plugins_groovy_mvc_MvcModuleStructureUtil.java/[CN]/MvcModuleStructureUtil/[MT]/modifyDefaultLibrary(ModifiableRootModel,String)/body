{
  LibraryTable libTable=model.getModuleLibraryTable();
  for (  Library library : libTable.getLibraries()) {
    if (library.getName() != null && library.getName().startsWith(libName)) {
      return library.getModifiableModel();
    }
  }
  Library library=LibraryUtil.createLibrary(libTable,libName + " (" + model.getModule().getName()+ ')');
  for (  OrderEntry entry : model.getOrderEntries()) {
    if (!(entry instanceof LibraryOrderEntry))     continue;
    LibraryOrderEntry libraryEntry=(LibraryOrderEntry)entry;
    if (libraryEntry.isModuleLevel() && libraryEntry.getLibrary() == library) {
      libraryEntry.setExported(true);
    }
  }
  return library.getModifiableModel();
}
