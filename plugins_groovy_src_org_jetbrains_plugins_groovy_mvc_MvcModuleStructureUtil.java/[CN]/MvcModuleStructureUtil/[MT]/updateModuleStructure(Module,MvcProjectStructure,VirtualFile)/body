{
  List<Consumer<ModifiableRootModel>> actions=getUpdateProjectStructureActions(Collections.singletonList(root),structure);
  if (!actions.isEmpty()) {
    final ModifiableRootModel model=ModuleRootManager.getInstance(module).getModifiableModel();
    boolean success=false;
    try {
      for (      final Consumer<ModifiableRootModel> action : actions) {
        action.consume(model);
      }
      model.commit();
      success=true;
    }
  finally {
      if (!success) {
        model.dispose();
      }
    }
  }
}
