{
  final Collection<String> libraries=new TreeSet<String>();
  final List<Module> result=new ArrayList<Module>();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      result.addAll(convertModules(project,ideaProjectModel.getModules(),getParameters().linkConverted,getParameters().converterOptions,libraries,model));
    }
  }
);
  createEclipseLibrary(project,libraries,IdeaXml.ECLIPSE_LIBRARY);
  if (libraries.size() != 0) {
    StringBuffer message=new StringBuffer();
    for (    String name : libraries) {
      message.append("\n");
      message.append(name);
    }
    Messages.showErrorDialog(project,EclipseBundle.message("eclipse.import.warning.undefinded.libraries",message.toString()),getTitle());
  }
  return result;
}
