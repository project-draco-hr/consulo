{
  final StringBuilder out=new StringBuilder();
  final char[] chars=contents.toCharArray();
  for (int i=0; i < chars.length; i++) {
    if (chars[i] == '\'') {
      if (i > 0 && chars[i - 1] == '\\') {
        out.append('\'');
      }
 else {
        out.append("\\\'");
      }
    }
 else {
      out.append(chars[i]);
    }
  }
  return out.toString();
}
