{
  if (myClasses.length == 1) {
    selected((T[])ArrayUtil.toObjectArray(myClasses[0].getClass(),myClasses[0]));
  }
 else   if (myClasses.length > 0) {
    PsiElementListCellRenderer<T> renderer=createRenderer();
    Arrays.sort(myClasses,renderer.getComparator());
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      selected(myClasses);
      return;
    }
    Vector<Object> model=new Vector<Object>(Arrays.asList(myClasses));
    model.insertElementAt(CodeInsightBundle.message("highlight.thrown.exceptions.chooser.all.entry"),0);
    myList=new JBList(model);
    myList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    myList.setCellRenderer(renderer);
    final PopupChooserBuilder builder=new PopupChooserBuilder(myList);
    renderer.installSpeedSearch(builder);
    final Runnable callback=new Runnable(){
      @Override public void run(){
        int idx=myList.getSelectedIndex();
        if (idx < 0)         return;
        if (idx > 0) {
          selected((T[])ArrayUtil.toObjectArray(myClasses[idx - 1].getClass(),myClasses[idx - 1]));
        }
 else {
          selected(myClasses);
        }
      }
    }
;
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        builder.setTitle(myTitle).setItemChoosenCallback(callback).createPopup().showInBestPositionFor(myEditor);
      }
    }
);
  }
}
