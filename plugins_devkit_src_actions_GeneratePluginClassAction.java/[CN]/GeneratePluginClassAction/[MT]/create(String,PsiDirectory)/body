{
  if (myFilesToPatch.size() == 0) {
    return CANCELED;
  }
  final PsiClass klass=JavaDirectoryService.getInstance().createClass(directory,newName,getClassTemplateName());
  DescriptorUtil.patchPluginXml(this,klass,myFilesToPatch.toArray(new XmlFile[myFilesToPatch.size()]));
  return new PsiElement[]{klass};
}
