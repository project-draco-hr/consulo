{
  String caption=MergeUtil.getResolveActionTitle(result,myMergeRequest,myMergeContext);
  return new AbstractAction(caption){
    @Override public void actionPerformed(    ActionEvent e){
      if ((result == MergeResult.LEFT || result == MergeResult.RIGHT) && myContentModified && Messages.showYesNoDialog(myPanel.getRootPane(),DiffBundle.message("merge.dialog.resolve.side.with.discard.message",result == MergeResult.LEFT ? 0 : 1),DiffBundle.message("merge.dialog.resolve.side.with.discard.title"),Messages.getQuestionIcon()) != Messages.YES) {
        return;
      }
      if (result == MergeResult.RESOLVED) {
        if ((getChangesCount() != 0 || getConflictsCount() != 0) && Messages.showYesNoDialog(myPanel.getRootPane(),DiffBundle.message("merge.dialog.apply.partially.resolved.changes.confirmation.message",getChangesCount(),getConflictsCount()),DiffBundle.message("apply.partially.resolved.merge.dialog.title"),Messages.getQuestionIcon()) != Messages.YES) {
          return;
        }
      }
      if (result == MergeResult.CANCEL && !MergeUtil.showExitWithoutApplyingChangesDialog(TextMergeViewer.this,myMergeRequest,myMergeContext)) {
        return;
      }
      destroyChangedBlocks();
      myMergeContext.finishMerge(result);
    }
  }
;
}
