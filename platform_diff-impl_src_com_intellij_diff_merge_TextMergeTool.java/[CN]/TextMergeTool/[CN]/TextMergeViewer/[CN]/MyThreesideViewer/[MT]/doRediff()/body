{
  myStatusPanel.setBusy(true);
  getEditor(ThreeSide.BASE).setViewer(true);
  setInitialOutputContent();
  List<DiffContent> contents=myRequest.getContents();
  final List<CharSequence> sequences=ContainerUtil.map(contents,new Function<DiffContent,CharSequence>(){
    @Override public CharSequence fun(    DiffContent diffContent){
      return ((DocumentContent)diffContent).getDocument().getImmutableCharSequence();
    }
  }
);
  final long outputModificationStamp=myMergeRequest.getOutputContent().getDocument().getModificationStamp();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      ProgressManager.getInstance().run(new Task.Modal(getProject(),"Computing differences...",true){
        private Runnable myCallback;
        @Override public void run(        @NotNull ProgressIndicator indicator){
          myCallback=doPerformRediff(sequences,outputModificationStamp,indicator);
        }
        @Override public void onCancel(){
          myMergeContext.finishMerge(MergeResult.CANCEL);
        }
        @Override public void onSuccess(){
          if (isDisposed())           return;
          myCallback.run();
        }
      }
);
    }
  }
);
}
