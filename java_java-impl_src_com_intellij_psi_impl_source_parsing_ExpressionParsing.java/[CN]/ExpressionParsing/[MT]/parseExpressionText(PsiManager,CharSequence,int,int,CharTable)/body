{
  final LanguageLevel level=LanguageLevelProjectExtension.getInstance(manager.getProject()).getLanguageLevel();
  Lexer originalLexer=new JavaLexer(level);
  FilterLexer lexer=new FilterLexer(originalLexer,new FilterLexer.SetFilter(StdTokenSets.WHITE_SPACE_OR_COMMENT_BIT_SET));
  lexer.start(buffer,startOffset,endOffset);
  JavaParsingContext context=new JavaParsingContext(table,level);
  CompositeElement expression=context.getExpressionParsing().parseExpression(lexer);
  if (expression == null)   return null;
  expression.putUserData(CharTable.CHAR_TABLE_KEY,table);
  if (lexer.getTokenType() != null)   return null;
  final FileElement dummyRoot=DummyHolderFactory.createHolder(manager,null,table).getTreeElement();
  dummyRoot.rawAddChildren(expression);
  ParseUtil.insertMissingTokens(dummyRoot,originalLexer,0,buffer.length(),-1,WhiteSpaceAndCommentsProcessor.INSTANCE,context);
  return expression;
}
