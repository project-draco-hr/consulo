{
  final Document doc=editor.getDocument();
  int caretOffset=editor.getCaretModel().getOffset();
  if (caretOffset >= doc.getTextLength()) {
    return;
  }
  final int lineNumber=doc.getLineNumber(caretOffset);
  int lineEndOffset=doc.getLineEndOffset(lineNumber);
  if (editor.isColumnMode() && editor.getCaretModel().supportsMultipleCarets() && caretOffset == lineEndOffset) {
    return;
  }
  int start;
  int end;
  if (caretOffset >= lineEndOffset) {
    start=lineEndOffset;
    end=lineEndOffset + 1;
  }
 else {
    start=caretOffset;
    end=lineEndOffset;
    if (lineEndOffset < doc.getTextLength() && CharArrayUtil.isEmptyOrSpaces(doc.getCharsSequence(),caretOffset,lineEndOffset)) {
      end++;
    }
  }
  delete(editor,start,end);
}
