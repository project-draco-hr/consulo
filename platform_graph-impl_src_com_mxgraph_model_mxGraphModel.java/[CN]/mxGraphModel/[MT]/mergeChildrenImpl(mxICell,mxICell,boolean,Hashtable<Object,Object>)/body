{
  beginUpdate();
  try {
    int childCount=from.getChildCount();
    for (int i=0; i < childCount; i++) {
      mxICell cell=from.getChildAt(i);
      String id=cell.getId();
      mxICell target=(mxICell)((id != null && (!isEdge(cell) || !cloneAllEdges)) ? getCell(id) : null);
      if (target == null) {
        mxCell clone=(mxCell)cell.clone();
        clone.setId(id);
        target=to.insert(clone);
        cellAdded(target);
      }
      mapping.put(cell,target);
      mergeChildrenImpl(cell,target,cloneAllEdges,mapping);
    }
  }
  finally {
    endUpdate();
  }
}
