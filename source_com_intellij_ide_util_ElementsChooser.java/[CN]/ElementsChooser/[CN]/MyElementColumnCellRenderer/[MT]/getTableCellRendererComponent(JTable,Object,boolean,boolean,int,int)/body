{
  final Color color=UIManager.getColor("Table.focusCellBackground");
  Component component;
  T t=(T)value;
  try {
    UIManager.put("Table.focusCellBackground",table.getSelectionBackground());
    component=super.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
    setText(getItemText(t));
    if (component instanceof JLabel) {
      ((JLabel)component).setBorder(noFocusBorder);
    }
  }
  finally {
    UIManager.put("Table.focusCellBackground",color);
  }
  final MyTableModel model=(MyTableModel)table.getModel();
  component.setEnabled(ElementsChooser.this.isEnabled() && (myColorUnmarkedElements ? model.isElementMarked(row) : true));
  ElementProperties properties=myElementToPropertiesMap.get(t);
  if (properties != null) {
    if (component instanceof JLabel) {
      ((JLabel)component).setIcon(properties.getIcon());
    }
    final Color propertiesColor=properties.getColor();
    if (propertiesColor != null) {
      component.setForeground(propertiesColor);
    }
  }
 else {
    if (component instanceof JLabel) {
      ((JLabel)component).setIcon(null);
    }
  }
  return component;
}
