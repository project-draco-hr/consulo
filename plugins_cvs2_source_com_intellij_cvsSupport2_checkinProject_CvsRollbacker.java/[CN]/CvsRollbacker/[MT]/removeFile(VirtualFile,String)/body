{
  final IOException[] exception=new IOException[1];
  final boolean[] result=new boolean[1];
  Runnable action=new Runnable(){
    public void run(){
      Runnable writeAction=new Runnable(){
        public void run(){
          ApplicationManager.getApplication().runWriteAction(new Runnable(){
            public void run(){
              final VirtualFile file=parent.findChild(name);
              if (file == null) {
                result[0]=false;
                return;
              }
              try {
                file.delete(this);
              }
 catch (              IOException e) {
                exception[0]=e;
                result[0]=false;
                return;
              }
              result[0]=true;
            }
          }
);
        }
      }
;
      CommandProcessor.getInstance().executeCommand(myProject,writeAction,com.intellij.CvsBundle.message("command.name.rollback.file.creation"),null);
    }
  }
;
  if (ApplicationManager.getApplication().isDispatchThread()) {
    action.run();
  }
 else {
    ApplicationManager.getApplication().invokeAndWait(action,ModalityState.defaultModalityState());
  }
  if (exception[0] != null)   throw exception[0];
  return result[0];
}
