{
  final PsiClass psiClass=PsiUtil.resolveClassInType(expectedType);
  if (psiClass != null) {
    processMembers(position,results,psiClass,PsiTreeUtil.getParentOfType(position,PsiAnnotation.class) != null);
  }
  if (expectedType instanceof PsiPrimitiveType && PsiType.DOUBLE.isAssignableFrom(expectedType)) {
    final PsiElement parent=position.getParent();
    if (parent instanceof PsiReferenceExpression) {
      final PsiElement refParent=parent.getParent();
      if (refParent instanceof PsiExpressionList) {
        final PsiClass aClass=getCalledClass(refParent.getParent());
        if (aClass != null) {
          processMembers(position,results,aClass,false);
        }
      }
 else       if (refParent instanceof PsiBinaryExpression) {
        final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)refParent;
        if (parent == binaryExpression.getROperand() && JavaTokenType.EQEQ == binaryExpression.getOperationSign().getTokenType()) {
          final PsiClass aClass=getCalledClass(binaryExpression.getLOperand());
          if (aClass != null) {
            processMembers(position,results,aClass,false);
          }
        }
      }
    }
  }
}
