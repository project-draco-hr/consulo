{
  if (call instanceof PsiMethodCallExpression) {
    for (    final JavaResolveResult result : ((PsiMethodCallExpression)call).getMethodExpression().multiResolve(true)) {
      final PsiElement element=result.getElement();
      if (element instanceof PsiMethod) {
        final PsiClass aClass=((PsiMethod)element).getContainingClass();
        if (aClass != null) {
          return aClass;
        }
      }
    }
  }
  if (call instanceof PsiNewExpression) {
    final PsiJavaCodeReferenceElement reference=((PsiNewExpression)call).getClassReference();
    if (reference != null) {
      for (      final JavaResolveResult result : reference.multiResolve(true)) {
        final PsiElement element=result.getElement();
        if (element instanceof PsiClass) {
          return (PsiClass)element;
        }
      }
    }
  }
  return null;
}
