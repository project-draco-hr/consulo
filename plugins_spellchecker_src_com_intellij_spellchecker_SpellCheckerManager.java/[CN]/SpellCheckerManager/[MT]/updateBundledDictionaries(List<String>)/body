{
  for (  BundledDictionaryProvider provider : Extensions.getExtensions(BundledDictionaryProvider.EP_NAME)) {
    for (    String dictionary : provider.getBundledDictionaries()) {
      boolean dictionaryShouldBeLoad=settings == null || !settings.getBundledDisabledDictionariesPaths().contains(dictionary);
      boolean dictionaryIsLoad=spellChecker.isDictionaryLoad(dictionary);
      if (dictionaryIsLoad && !dictionaryShouldBeLoad) {
        spellChecker.removeDictionary(dictionary);
      }
 else       if (!dictionaryIsLoad && dictionaryShouldBeLoad) {
        final Class<? extends BundledDictionaryProvider> loaderClass=provider.getClass();
        final InputStream stream=loaderClass.getResourceAsStream(dictionary);
        if (stream != null) {
          spellChecker.loadDictionary(new StreamLoader(stream,dictionary));
        }
 else {
          LOG.warn("Couldn't load dictionary '" + dictionary + "' with loader '"+ loaderClass+ "'");
        }
      }
    }
  }
  if (settings != null && settings.getDictionaryFoldersPaths() != null) {
    final Set<String> disabledDictionaries=settings.getDisabledDictionariesPaths();
    for (    String folder : settings.getDictionaryFoldersPaths()) {
      SPFileUtil.processFilesRecursively(folder,new Consumer<String>(){
        @Override public void consume(        final String s){
          boolean dictionaryShouldBeLoad=!disabledDictionaries.contains(s);
          boolean dictionaryIsLoad=spellChecker.isDictionaryLoad(s);
          if (dictionaryIsLoad && !dictionaryShouldBeLoad) {
            spellChecker.removeDictionary(s);
          }
 else           if (!dictionaryIsLoad && dictionaryShouldBeLoad) {
            spellChecker.loadDictionary(new FileLoader(s,s));
          }
        }
      }
);
    }
  }
  if (removedDictionaries != null && !removedDictionaries.isEmpty()) {
    for (    final String name : removedDictionaries) {
      spellChecker.removeDictionary(name);
    }
  }
  restartInspections();
}
