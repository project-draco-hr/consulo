{
  if (CommonDataKeys.PROJECT.is(dataId)) {
    return myProject;
  }
 else   if (PlatformDataKeys.EDITOR.is(dataId) || OpenFileDescriptor.NAVIGATE_IN_EDITOR.is(dataId)) {
    if (myProject == null)     return null;
    return FileEditorManager.getInstance(myProject).getSelectedTextEditor();
  }
 else {
    Editor editor=(Editor)getData(PlatformDataKeys.EDITOR.getName());
    if (editor != null) {
      FileEditorManagerEx manager=FileEditorManagerEx.getInstanceEx(myProject);
      return manager.getData(dataId,editor,manager.getSelectedFiles()[0]);
    }
 else     if (LangDataKeys.IDE_VIEW.is(dataId)) {
      VirtualFile[] contentRoots=ProjectRootManager.getInstance(myProject).getContentRoots();
      final PsiDirectory psiDirectory=PsiManager.getInstance(myProject).findDirectory(contentRoots[0]);
      if (contentRoots.length > 0) {
        return new IdeView(){
          @Override public void selectElement(          PsiElement element){
          }
          @Override public PsiDirectory[] getDirectories(){
            return new PsiDirectory[]{psiDirectory};
          }
          @Override public PsiDirectory getOrChooseDirectory(){
            return psiDirectory;
          }
        }
;
      }
    }
    return null;
  }
}
