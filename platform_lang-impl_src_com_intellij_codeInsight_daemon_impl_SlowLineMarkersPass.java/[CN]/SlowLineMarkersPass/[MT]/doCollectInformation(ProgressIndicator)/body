{
  final FileViewProvider viewProvider=myFile.getViewProvider();
  final Set<Language> relevantLanguages=viewProvider.getLanguages();
  List<LineMarkerInfo> markers=new SmartList<LineMarkerInfo>();
  for (  Language language : relevantLanguages) {
    PsiElement psiRoot=viewProvider.getPsi(language);
    if (psiRoot == null || !HighlightingLevelManager.getInstance(myProject).shouldHighlight(psiRoot))     continue;
    List<PsiElement> elements=CollectHighlightsUtil.getElementsInRange(psiRoot,myBounds.getStartOffset(),myBounds.getEndOffset());
    final List<LineMarkerProvider> providers=LineMarkersPass.getMarkerProviders(language,myProject);
    addLineMarkers(elements,providers,markers,progress);
    LineMarkersPass.collectLineMarkersForInjected(markers,elements,this,myFile,progress);
  }
  myMarkers=LineMarkersPass.mergeLineMarkers(markers,myEditor);
}
