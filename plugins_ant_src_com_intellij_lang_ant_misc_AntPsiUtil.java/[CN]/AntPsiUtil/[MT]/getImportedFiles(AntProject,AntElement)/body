{
  final HashSet<PsiElement> set=PsiElementHashSetSpinAllocator.alloc();
  try {
    if (anchor == null) {
      for (      AntImport antImport : project.getImports()) {
        final AntFile file=antImport.getImportedFile();
        if (file != null) {
          set.add(file);
        }
      }
    }
 else {
      for (      PsiElement child : project.getChildren()) {
        if (child == anchor)         break;
        if (child instanceof AntImport) {
          final AntFile file=((AntImport)child).getImportedFile();
          if (file != null) {
            set.add(file);
          }
        }
      }
    }
    return (set.size() > 0) ? set.toArray(new AntFile[set.size()]) : NO_FILES;
  }
  finally {
    PsiElementHashSetSpinAllocator.dispose(set);
  }
}
