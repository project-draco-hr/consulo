{
  Collection<String> finalUrls=new ArrayList<String>(remote.getUrls().size());
  Collection<String> additionalPushUrls=new ArrayList<String>();
  for (  final String remoteUrl : remote.getUrls()) {
    boolean substituted=false;
    for (    Url url : urls) {
      String insteadOf=url.getInsteadOf();
      String pushInsteadOf=url.getPushInsteadOf();
      if (insteadOf != null && remoteUrl.startsWith(insteadOf)) {
        finalUrls.add(substituteUrl(remoteUrl,url,insteadOf));
        substituted=true;
        break;
      }
 else       if (pushInsteadOf != null && remoteUrl.startsWith(pushInsteadOf)) {
        additionalPushUrls.add(substituteUrl(remoteUrl,url,pushInsteadOf));
        finalUrls.add(remoteUrl);
        substituted=true;
        break;
      }
    }
    if (!substituted) {
      finalUrls.add(remoteUrl);
    }
  }
  return Pair.create(finalUrls,additionalPushUrls);
}
