{
  final StringBuilder builder=new StringBuilder();
  builder.append("for(");
  final GrForClause clause=forStatement.getClause();
  ExpressionContext forContext=context.extend();
  if (clause instanceof GrForInClause) {
    final GrExpression expression=((GrForInClause)clause).getIteratedExpression();
    final GrVariable declaredVariable=clause.getDeclaredVariable();
    LOG.assertTrue(declaredVariable != null);
    writeVariableWithoutSemicolonAndInitializer(builder,declaredVariable);
    builder.append(" : ");
    if (expression != null) {
      final ExpressionContext context=forContext.copy();
      expression.accept(new ExpressionGenerator(builder,context));
    }
  }
 else   if (clause instanceof GrTraditionalForClause) {
    final GrTraditionalForClause cl=(GrTraditionalForClause)clause;
    final GrCondition initialization=cl.getInitialization();
    final GrExpression condition=cl.getCondition();
    final GrExpression update=cl.getUpdate();
    if (initialization instanceof GrParameter) {
      StringBuilder partBuilder=new StringBuilder();
      writeVariableWithoutSemicolonAndInitializer(partBuilder,(GrParameter)initialization);
      final GrExpression initializer=((GrParameter)initialization).getDefaultInitializer();
      if (initializer != null) {
        final ExpressionContext partContext=forContext.copy();
        initializer.accept(new ExpressionGenerator(partBuilder,partContext));
        for (        String statement : partContext.myStatements) {
          builder.append(statement).append(", ");
        }
        builder.append(partBuilder);
      }
    }
 else {
      if (initialization != null) {
        StringBuilder partBuilder=new StringBuilder();
        final ExpressionContext partContext=forContext.copy();
        genForPart(builder,initialization,new CodeBlockGenerator(partBuilder,partContext));
      }
    }
    builder.append(";");
    if (condition != null) {
      genForPart(builder,condition,forContext.copy());
    }
    builder.append(";");
    if (update != null) {
      genForPart(builder,update,forContext.copy());
    }
  }
  builder.append(")");
  final GrStatement body=forStatement.getBody();
  if (body != null) {
    body.accept(new CodeBlockGenerator(builder,forContext));
  }
}
