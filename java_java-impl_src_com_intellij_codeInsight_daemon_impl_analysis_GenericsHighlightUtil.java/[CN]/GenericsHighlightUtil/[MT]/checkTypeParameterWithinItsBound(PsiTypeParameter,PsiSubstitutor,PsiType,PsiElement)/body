{
  if (!(type instanceof PsiClassType))   return null;
  final PsiClass referenceClass=((PsiClassType)type).resolve();
  if (referenceClass == null)   return null;
  final PsiClassType[] bounds=classParameter.getSuperTypes();
  for (  PsiClassType type1 : bounds) {
    PsiType bound=substitutor.substitute(type1);
    if (!TypeConversionUtil.isAssignable(bound,type,false)) {
      PsiClass boundClass=bound instanceof PsiClassType ? ((PsiClassType)bound).resolve() : null;
      @NonNls final String messageKey=boundClass == null || referenceClass.isInterface() == boundClass.isInterface() ? "generics.type.parameter.is.not.within.its.bound.extend" : "generics.type.parameter.is.not.within.its.bound.implement";
      String description=JavaErrorMessages.message(messageKey,HighlightUtil.formatClass(referenceClass),HighlightUtil.formatType(bound));
      final HighlightInfo highlightInfo=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,typeElement2Highlight,description);
      if (bound instanceof PsiClassType) {
        QuickFixAction.registerQuickFixAction(highlightInfo,QUICK_FIX_FACTORY.createExtendsListFix(referenceClass,(PsiClassType)bound,true),null);
      }
      return highlightInfo;
    }
  }
  return null;
}
