{
  final JLayeredPane layeredPane=myTextField.getRootPane().getLayeredPane();
  final Rectangle bounds=myTextFieldPanel.getBounds();
  bounds.y+=myTextFieldPanel.getHeight();
  final Dimension preferredScrollPaneSize=myListScrollPane.getPreferredSize();
  preferredScrollPaneSize.width=Math.max(myTextFieldPanel.getWidth(),preferredScrollPaneSize.width);
  if (bounds.y + preferredScrollPaneSize.height > layeredPane.getHeight()) {
    preferredScrollPaneSize.height=layeredPane.getHeight() - bounds.y;
  }
  if (preferredScrollPaneSize.width > layeredPane.getWidth() - bounds.x) {
    bounds.x=layeredPane.getX() + Math.max(1,layeredPane.getWidth() - preferredScrollPaneSize.width);
    if (preferredScrollPaneSize.width > layeredPane.getWidth() - bounds.x) {
      preferredScrollPaneSize.width=layeredPane.getWidth() - bounds.x;
      final JScrollBar horizontalScrollBar=myListScrollPane.getHorizontalScrollBar();
      if (horizontalScrollBar != null) {
        preferredScrollPaneSize.height+=horizontalScrollBar.getPreferredSize().getHeight();
      }
    }
  }
  Rectangle prefferedBounds=new Rectangle(bounds.x,bounds.y,preferredScrollPaneSize.width,preferredScrollPaneSize.height);
  if (myListScrollPane.isVisible()) {
    myListScrollPane.setBounds(prefferedBounds);
  }
  layeredPane.add(myListScrollPane,new Integer(600));
  layeredPane.moveToFront(myListScrollPane);
  myListScrollPane.validate();
  myListScrollPane.setVisible(true);
}
