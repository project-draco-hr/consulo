{
  JPanel panel=new JPanel(new GridBagLayout());
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.insets=new Insets(4,4,4,4);
  gbConstraints.weighty=0;
  gbConstraints.gridwidth=GridBagConstraints.RELATIVE;
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.weightx=0;
  myRbPackage=new JRadioButton(RefactoringBundle.message("migration.entry.package"));
  panel.add(myRbPackage,gbConstraints);
  gbConstraints.gridwidth=GridBagConstraints.RELATIVE;
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.weightx=0;
  myRbClass=new JRadioButton(RefactoringBundle.message("migration.entry.class"));
  panel.add(myRbClass,gbConstraints);
  gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
  gbConstraints.fill=GridBagConstraints.BOTH;
  gbConstraints.weightx=1;
  panel.add(new JPanel(),gbConstraints);
  ButtonGroup buttonGroup=new ButtonGroup();
  buttonGroup.add(myRbPackage);
  buttonGroup.add(myRbClass);
  gbConstraints.weightx=0;
  gbConstraints.gridwidth=GridBagConstraints.RELATIVE;
  gbConstraints.fill=GridBagConstraints.NONE;
  JLabel oldNamePrompt=new JLabel(RefactoringBundle.message("migration.entry.old.name"));
  panel.add(oldNamePrompt,gbConstraints);
  gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
  gbConstraints.fill=GridBagConstraints.HORIZONTAL;
  gbConstraints.weightx=1;
  final LanguageTextField.DocumentCreator documentCreator=new LanguageTextField.DocumentCreator(){
    @Override public Document createDocument(    String value,    @Nullable Language language,    Project project){
      PsiPackage defaultPackage=JavaPsiFacade.getInstance(project).findPackage("");
      final JavaCodeFragment fragment=JavaCodeFragmentFactory.getInstance(project).createReferenceCodeFragment("",defaultPackage,true,true);
      return PsiDocumentManager.getInstance(project).getDocument(fragment);
    }
  }
;
  myOldNameField=new LanguageTextField(JavaLanguage.INSTANCE,myProject,"",documentCreator);
  panel.add(myOldNameField,gbConstraints);
  gbConstraints.weightx=0;
  gbConstraints.gridwidth=GridBagConstraints.RELATIVE;
  gbConstraints.fill=GridBagConstraints.NONE;
  JLabel newNamePrompt=new JLabel(RefactoringBundle.message("migration.entry.new.name"));
  panel.add(newNamePrompt,gbConstraints);
  gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
  gbConstraints.fill=GridBagConstraints.HORIZONTAL;
  gbConstraints.weightx=1;
  myNewNameField=new LanguageTextField(JavaLanguage.INSTANCE,myProject,"",documentCreator);
  panel.setPreferredSize(new Dimension(300,panel.getPreferredSize().height));
  panel.add(myNewNameField,gbConstraints);
  final com.intellij.openapi.editor.event.DocumentAdapter documentAdapter=new com.intellij.openapi.editor.event.DocumentAdapter(){
    @Override public void documentChanged(    com.intellij.openapi.editor.event.DocumentEvent e){
      validateOKButton();
    }
  }
;
  myOldNameField.getDocument().addDocumentListener(documentAdapter);
  myNewNameField.getDocument().addDocumentListener(documentAdapter);
  return panel;
}
