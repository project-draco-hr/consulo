{
  MavenRunConfigurationType type=ConfigurationTypeUtil.findConfigurationType(MavenRunConfigurationType.class);
  final RunnerAndConfigurationSettings settings=RunManagerEx.getInstanceEx(project).createConfiguration(generateName(project,params),type.myFactory);
  MavenRunConfiguration runConfiguration=(MavenRunConfiguration)settings.getConfiguration();
  runConfiguration.setRunnerParameters(params);
  runConfiguration.setGeneralSettings(generalSettings);
  runConfiguration.setRunnerSettings(runnerSettings);
  return settings;
}
