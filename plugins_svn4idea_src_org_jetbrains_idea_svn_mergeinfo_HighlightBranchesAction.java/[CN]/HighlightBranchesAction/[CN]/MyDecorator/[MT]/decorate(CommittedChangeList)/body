{
  if ((!isEnabled()) || (getSelected() == null) || (mySelectedRoot == null)) {
    return null;
  }
  final List<Pair<String,SimpleTextAttributes>> decoration=new ArrayList<Pair<String,SimpleTextAttributes>>();
  final Map<Long,SvnMergeInfoPersistentCache.MergeCheckResult> map=getCurrentCache();
  if (map != null) {
    final SvnMergeInfoPersistentCache.MergeCheckResult result=map.get(list.getNumber());
    if (result != null) {
      String beforeText=getBeforeText(result);
      if (beforeText != null) {
        decoration.add(new Pair<String,SimpleTextAttributes>(beforeText,ourIntegratedAttributes));
      }
    }
    decoration.add(new Pair<String,SimpleTextAttributes>(SvnBundle.message("committed.changes.merge.status.refreshing.text"),ourRefreshAttributes));
    return decoration;
  }
  if ((myVcs != null) && (myVcs.getName().equals(list.getVcs().getName()))) {
    final SvnMergeInfoPersistentCache.MergeCheckResult state=myMergeInfoCache.getState(mySelectedRoot,(SvnChangeList)list,(WCInfoWithBranches.Branch)getSelected());
    final String integrationText=getBeforeText(state);
    if (integrationText != null) {
      decoration.add(new Pair<String,SimpleTextAttributes>(integrationText,ourIntegratedAttributes));
    }
    return decoration;
  }
  return null;
}
