{
  if (file == null || isFromActiveChangelist(file) || ChangesUtil.isInternalOperation(file)) {
    return;
  }
  myChangeListManager.invokeAfterUpdate(new Runnable(){
    public void run(){
      if (!isFromActiveChangelist(file)) {
        String path=file.getPath();
        Conflict conflict=myConflicts.get(path);
        boolean newConflict=false;
        if (conflict == null) {
          conflict=new Conflict();
          myConflicts.put(path,conflict);
          newConflict=true;
        }
        conflict.timestamp=System.currentTimeMillis();
        conflict.changelistId=myChangeListManager.getDefaultChangeList().getId();
        if (newConflict && myOptions.HIGHLIGHT_CONFLICTS) {
          myFileStatusManager.fileStatusChanged(file);
          myEditorNotifications.updateNotifications(file);
        }
      }
    }
  }
,InvokeAfterUpdateMode.SILENT,null,null);
}
