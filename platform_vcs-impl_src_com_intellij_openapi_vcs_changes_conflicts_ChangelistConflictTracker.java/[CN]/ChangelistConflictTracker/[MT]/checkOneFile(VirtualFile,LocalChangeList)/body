{
  if (file == null || Comparing.equal(myChangeListManager.getChangeList(file),defaultList) || ChangesUtil.isInternalOperation(file)) {
    return;
  }
  String path=file.getPath();
  Conflict conflict=myConflicts.get(path);
  boolean newConflict=false;
  if (conflict == null) {
    conflict=new Conflict();
    myConflicts.put(path,conflict);
    newConflict=true;
  }
  conflict.timestamp=System.currentTimeMillis();
  conflict.changelistId=defaultList.getId();
  if (newConflict && myOptions.HIGHLIGHT_CONFLICTS) {
    myFileStatusManager.fileStatusChanged(file);
    myEditorNotifications.updateNotifications(file);
  }
}
