{
  if (myCommitting)   return;
  myCommitting=true;
  try {
    final CommitListener multicaster=myDispatcher.getMulticaster();
    multicaster.beforeCommit(this);
    new WriteCommandAction(getProject(),getDomWrapper().getFile()){
      protected void run(      Result result) throws Throwable {
        doCommit(value);
      }
    }
.execute();
    multicaster.afterCommit(this);
  }
  finally {
    myCommitting=false;
  }
}
