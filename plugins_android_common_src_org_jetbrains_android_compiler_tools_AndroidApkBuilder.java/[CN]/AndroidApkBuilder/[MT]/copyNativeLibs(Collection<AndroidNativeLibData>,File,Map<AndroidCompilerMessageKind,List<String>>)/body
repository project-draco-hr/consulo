{
  for (  AndroidNativeLibData lib : libs) {
    final String path=lib.getPath();
    final File srcFile=new File(path);
    if (!srcFile.exists()) {
      map.get(WARNING).add("File not found: " + FileUtil.toSystemDependentName(path) + ". The native library won't be placed into APK");
      continue;
    }
    final File dstDir=new File(targetDir,lib.getArchitecture());
    final File dstFile=new File(dstDir,lib.getTargetFileName());
    if (dstFile.exists()) {
      map.get(WARNING).add("Duplicate native library " + dstFile.getName() + "; "+ dstFile.getPath()+ " already exists");
      continue;
    }
    if (!dstDir.exists() && !dstDir.mkdirs()) {
      map.get(ERROR).add("Cannot create directory: " + FileUtil.toSystemDependentName(dstDir.getPath()));
      continue;
    }
    FileUtil.copy(srcFile,dstFile);
  }
  return map.get(ERROR).size() == 0;
}
