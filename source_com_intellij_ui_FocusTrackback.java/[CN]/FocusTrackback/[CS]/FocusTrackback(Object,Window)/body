{
  myRequestor=requestor;
  myParentWindow=parent;
  if (ApplicationManager.getApplication().isUnitTestMode() || SystemInfo.isWindows)   return;
  register(parent);
  final ArrayList<FocusTrackback> stack=getStackForRoot(myRoot);
  if (stack.indexOf(this) == 0) {
    final KeyboardFocusManager manager=KeyboardFocusManager.getCurrentKeyboardFocusManager();
    myFocusOwner=manager.getPermanentFocusOwner();
    if (myFocusOwner == null) {
      final Window window=manager.getActiveWindow();
      if (window instanceof Provider) {
        myFocusOwner=((Provider)window).getFocusTrackback().getFocusOwner();
      }
    }
  }
 else {
    myFocusOwner=stack.get(0).getFocusOwner();
  }
}
