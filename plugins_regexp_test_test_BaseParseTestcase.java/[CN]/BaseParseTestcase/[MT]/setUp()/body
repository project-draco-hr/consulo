{
  super.setUp();
  final IdeaTestFixtureFactory fixtureFactory=IdeaTestFixtureFactory.getFixtureFactory();
  final TestFixtureBuilder<IdeaProjectTestFixture> builder=fixtureFactory.createFixtureBuilder(getName());
  myFixture=fixtureFactory.createCodeInsightFixture(builder.getFixture());
  myFixture.setTestDataPath(getTestDataPath());
  myFixture.setUp();
  final Project project=myFixture.getProject();
  new WriteCommandAction(project){
    @Override protected void run(    Result result) throws Throwable {
      FileTypeManager.getInstance().registerFileType(RegExpFileType.INSTANCE,new String[]{"regexp"});
    }
  }
.execute();
}
