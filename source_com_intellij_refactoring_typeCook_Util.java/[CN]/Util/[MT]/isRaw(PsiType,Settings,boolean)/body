{
  if (t instanceof PsiClassType) {
    final PsiClassType.ClassResolveResult resolveResult=resolveType(t);
    if (resolveResult.getElement() == null) {
      return false;
    }
    if (PsiClassType.isRaw(resolveResult)) {
      return true;
    }
    final PsiSubstitutor subst=resolveResult.getSubstitutor();
    final PsiClass element=resolveResult.getElement();
    final PsiManager manager=element.getManager();
    if (settings.cookObjects() && upper && t.equals(PsiType.getJavaLangObject(manager,GlobalSearchScope.allScope(manager.getProject())))) {
      return true;
    }
    final Iterator<PsiTypeParameter> iterator=PsiUtil.typeParametersIterator(element);
    while (iterator.hasNext()) {
      final PsiType actual=subst.substitute(iterator.next());
      if (!(actual instanceof PsiTypeParameter) && isRaw(actual,settings,false))       return true;
    }
    return false;
  }
 else   if (t instanceof PsiArrayType) {
    return settings.preserveRawArrays() ? false : isRaw(((PsiArrayType)t).getComponentType(),settings,upper);
  }
  return false;
}
