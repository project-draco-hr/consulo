{
  type=avoidAnonymous(type);
  if (type == null) {
    return PsiClassType.ClassResolveResult.EMPTY;
  }
  if (type instanceof PsiClassType) {
    return ((PsiClassType)type).resolveGenerics();
  }
 else   if (type instanceof PsiArrayType) {
    return resolveType(((PsiArrayType)type).getComponentType());
  }
 else   if (type instanceof SubtypeOf) {
    return resolveType(((SubtypeOf)type).getSuperType());
  }
 else   if (type instanceof SupertypeOf) {
    return resolveType(((SupertypeOf)type).getSubType());
  }
 else {
    return PsiClassType.ClassResolveResult.EMPTY;
  }
}
