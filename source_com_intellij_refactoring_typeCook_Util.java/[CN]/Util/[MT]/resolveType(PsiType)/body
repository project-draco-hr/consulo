{
  final PsiClassType.ClassResolveResult resolveResult=PsiUtil.resolveGenericsClassInType(type);
  final PsiClass aClass=resolveResult.getElement();
  if (aClass instanceof PsiAnonymousClass) {
    final PsiClassType baseClassType=((PsiAnonymousClass)aClass).getBaseClassType();
    return resolveType(resolveResult.getSubstitutor().substitute(baseClassType));
  }
  return resolveResult;
}
