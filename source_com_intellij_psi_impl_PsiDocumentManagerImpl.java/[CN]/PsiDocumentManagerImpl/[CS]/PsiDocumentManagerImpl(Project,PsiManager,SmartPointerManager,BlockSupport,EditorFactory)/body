{
  myProject=project;
  myPsiManager=psiManager;
  mySmartPointerManager=(SmartPointerManagerImpl)smartPointerManager;
  myBlockSupport=(BlockSupportImpl)blockSupport;
  myPsiManager.addPsiTreeChangeListener(mySynchronizer=new PsiToDocumentSynchronizer(this,mySmartPointerManager));
  editorFactory.getEventMulticaster().addDocumentListener(this);
}
