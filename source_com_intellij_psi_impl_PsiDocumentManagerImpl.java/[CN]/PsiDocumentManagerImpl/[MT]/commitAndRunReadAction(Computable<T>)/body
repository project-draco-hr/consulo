{
  final Ref<T> ref=Ref.create(null);
  commitAndRunReadAction(new Runnable(){
    public void run(){
      ref.set(computation.compute());
    }
  }
);
  return ref.get();
}
