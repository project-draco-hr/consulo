{
  String missingJarsText="";
  List<VirtualFile> roots=new ArrayList<VirtualFile>();
  roots.addAll(myAddedJars);
  for (  Library library : myUsedLibraries) {
    roots.addAll(Arrays.asList(myLibrariesContainer.getLibraryFiles(library,OrderRootType.CLASSES)));
  }
  RequiredLibrariesInfo.RequiredClassesNotFoundInfo info=new RequiredLibrariesInfo(myLibraryCompositionSettings.getLibraryInfos()).checkLibraries(VfsUtil.toVirtualFileArray(roots));
  if (info != null) {
    missingJarsText=ProjectBundle.message("label.text.libraries.are.missing",info.getMissingJarsText());
  }
 else {
    missingJarsText=ProjectBundle.message("label.text.all.library.files.found");
  }
  myMissingLibrariesLabel.setText(UIUtil.toHtml(missingJarsText));
  ((CardLayout)myMissingLibrariesPanel.getLayout()).show(myMissingLibrariesPanel,"shown");
  if (info == null) {
    myDownloadMissingJarsCheckBox.setSelected(false);
  }
  myNewLibraryPanel.setVisible(info != null || !myAddedJars.isEmpty());
  myLibraryPropertiesPanel.setVisible(!myAddedJars.isEmpty() || myDownloadMissingJarsCheckBox.isSelected());
  myDownloadMissingJarsCheckBox.setEnabled(info != null);
  myDirectoryField.setEnabled(myDownloadMissingJarsCheckBox.isSelected());
  UIUtil.setEnabled(myMirrorsPanel,myDownloadMissingJarsCheckBox.isSelected(),true);
}
