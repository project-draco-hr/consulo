{
  if (last instanceof PsiTypeParameterList || last instanceof PsiModifierList) {
    return true;
  }
  if (visited != null && visited.contains(aClass))   return true;
  PsiSubstitutor substitutor=state.get(PsiSubstitutor.KEY);
  isRaw=isRaw || PsiUtil.isRawSubstitutor(aClass,substitutor);
  ParameterizedCachedValue<MembersMap,PsiClass> cache=getValues(aClass);
  boolean upToDate=cache.hasUpToDateValue();
  LanguageLevel languageLevel=PsiUtil.getLanguageLevel(place);
  if (upToDate) {
    final NameHint nameHint=processor.getHint(NameHint.KEY);
    if (nameHint != null) {
      String name=nameHint.getName(state);
      return processCachedMembersByName(aClass,processor,state,visited,last,place,isRaw,substitutor,cache.getValue(aClass),name,languageLevel);
    }
  }
  return processDeclarationsInClassNotCached(aClass,processor,state,visited,last,place,isRaw,languageLevel);
}
