{
  if (type1 instanceof PsiArrayType) {
    if (!(type2 instanceof PsiArrayType))     return false;
    return compareParamTypes(manager,((PsiArrayType)type1).getComponentType(),((PsiArrayType)type2).getComponentType());
  }
  if (!(type1 instanceof PsiClassType) || !(type2 instanceof PsiClassType)) {
    return type1.equals(type2);
  }
  PsiClass class1=((PsiClassType)type1).resolve();
  PsiClass class2=((PsiClassType)type2).resolve();
  if (class1 instanceof PsiTypeParameter && class2 instanceof PsiTypeParameter) {
    return Comparing.equal(class1.getName(),class2.getName()) && ((PsiTypeParameter)class1).getIndex() == ((PsiTypeParameter)class2).getIndex();
  }
  return manager.areElementsEquivalent(class1,class2);
}
