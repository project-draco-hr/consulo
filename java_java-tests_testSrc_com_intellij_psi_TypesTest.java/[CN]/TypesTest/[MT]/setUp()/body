{
  super.setUp();
  final ModifiableRootModel rootModel=setupGenericSampleClasses();
  final String testPath=PathManagerEx.getTestDataPath().replace(File.separatorChar,'/') + "/psi/types/" + getTestName(true);
  final VirtualFile[] testRoot=new VirtualFile[]{null};
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      testRoot[0]=LocalFileSystem.getInstance().refreshAndFindFileByPath(testPath);
    }
  }
);
  if (testRoot[0] != null) {
    final ContentEntry testContentEntry=rootModel.addContentEntry(testRoot[0]);
    testContentEntry.addSourceFolder(testRoot[0],false);
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      rootModel.commit();
    }
  }
);
}
