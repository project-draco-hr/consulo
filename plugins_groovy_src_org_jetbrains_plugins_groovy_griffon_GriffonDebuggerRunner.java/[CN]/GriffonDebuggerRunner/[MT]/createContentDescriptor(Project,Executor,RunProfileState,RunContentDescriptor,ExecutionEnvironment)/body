{
  final JavaCommandLine javaCommandLine=(JavaCommandLine)state;
  final JavaParameters params=javaCommandLine.getJavaParameters();
  if (!params.getVMParametersList().hasProperty("griffon.full.stacktrace")) {
    params.getVMParametersList().add("-Dgriffon.full.stacktrace=true");
  }
  String address=null;
  try {
    for (    String s : params.getProgramParametersList().getList()) {
      if (s.startsWith("run-")) {
        address=DebuggerUtils.getInstance().findAvailableDebugAddress(true);
        params.getProgramParametersList().replaceOrAppend(s,s + " --debug --debugPort=" + address);
        break;
      }
    }
  }
 catch (  ExecutionException ignored) {
  }
  if (address == null) {
    return super.createContentDescriptor(project,executor,state,contentToReuse,env);
  }
  RemoteConnection connection=new RemoteConnection(true,"127.0.0.1",address,false);
  return attachVirtualMachine(project,executor,state,contentToReuse,env,connection,true);
}
