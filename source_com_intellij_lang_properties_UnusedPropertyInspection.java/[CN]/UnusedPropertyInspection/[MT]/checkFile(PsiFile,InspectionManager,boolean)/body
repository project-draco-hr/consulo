{
  if (!(file instanceof PropertiesFile))   return null;
  List<ProblemDescriptor> descriptors=new SmartList<ProblemDescriptor>();
  PsiSearchHelper searchHelper=file.getManager().getSearchHelper();
  List<Property> properties=((PropertiesFile)file).getProperties();
  Module module=ModuleUtil.findModuleForPsiElement(file);
  if (module == null)   return null;
  final GlobalSearchScope searchScope=GlobalSearchScope.moduleWithDependentsScope(module);
  for (  Property property : properties) {
    PsiReferenceProcessor.FindElement processor=new PsiReferenceProcessor.FindElement();
    searchHelper.processReferences(processor,property,searchScope,false);
    if (!processor.isFound()) {
      ASTNode[] nodes=property.getNode().getChildren(null);
      PsiElement key=nodes.length == 0 ? property : nodes[0].getPsi();
      ProblemDescriptor descriptor=manager.createProblemDescriptor(key,"Unused property",QUICK_FIX,ProblemHighlightType.LIKE_UNUSED_SYMBOL);
      descriptors.add(descriptor);
    }
  }
  return descriptors.toArray(new ProblemDescriptor[descriptors.size()]);
}
