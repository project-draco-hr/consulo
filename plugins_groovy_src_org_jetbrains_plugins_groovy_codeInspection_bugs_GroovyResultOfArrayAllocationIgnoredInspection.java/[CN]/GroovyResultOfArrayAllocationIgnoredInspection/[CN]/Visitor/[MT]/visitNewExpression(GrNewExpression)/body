{
  super.visitNewExpression(newExpression);
  final PsiElement parent=newExpression.getParent();
  if (!(parent instanceof GrCodeBlock)) {
    return;
  }
  if (newExpression.getArrayCount() == 0) {
    return;
  }
  if (parent instanceof GrOpenBlock) {
    final GrOpenBlock openBlock=(GrOpenBlock)parent;
    if (ControlFlowUtils.openBlockCompletesWithStatement(openBlock,newExpression)) {
      return;
    }
  }
  final GrCodeReferenceElement referenceElement=newExpression.getReferenceElement();
  if (referenceElement != null) {
    registerError(referenceElement,Boolean.FALSE);
  }
 else {
    registerError(newExpression,Boolean.TRUE);
  }
}
