{
  XmlEntityDecl xmlEntityDecl=XmlEntityRefImpl.resolveEntity((XmlElement)myElement,getCanonicalText(),myElement.getContainingFile());
  if (xmlEntityDecl != null && !xmlEntityDecl.isPhysical()) {
    PsiNamedElement element=XmlUtil.findRealNamedElement(xmlEntityDecl);
    if (element != null)     xmlEntityDecl=(XmlEntityDecl)element;
  }
  return xmlEntityDecl;
}
