{
  super(parent,true);
  myEditor=editor;
  myBundle=bundle;
  myBundleName=bundleName;
  setTitle(UIDesignerBundle.message("title.chooser.value"));
  fillPropertyList();
  myModel=new MyTableModel();
  myTable=new JBTable(myModel);
  myTable.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  new MySpeedSearch(myTable);
  myCenterPanel=ScrollPaneFactory.createScrollPane(myTable);
  myTable.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0),OK_ACTION);
  myTable.getActionMap().put(OK_ACTION,new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      getOKAction().actionPerformed(e);
    }
  }
);
  final Project projectGuess=PlatformDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext(parent));
  final Dimension size=DimensionService.getInstance().getSize(getDimensionServiceKey(),projectGuess);
  final FontMetrics metrics=myTable.getFontMetrics(myTable.getFont());
  int minWidth=200;
  int maxWidth=size != null ? size.width / 2 : Integer.MAX_VALUE;
  if (minWidth > maxWidth) {
    minWidth=maxWidth;
  }
  int width=minWidth;
  for (int i=myPairs.size() - 1; i >= 0; i--) {
    final Pair<String,String> pair=myPairs.get(i);
    width=Math.max(width,metrics.stringWidth(pair.getFirst()));
  }
  width+=20;
  width=Math.max(width,metrics.stringWidth(myModel.getColumnName(0)));
  width=Math.max(width,minWidth);
  width=Math.min(width,maxWidth);
  final TableColumnModel columnModel=myTable.getColumnModel();
  final TableColumn keyColumn=columnModel.getColumn(0);
  keyColumn.setMaxWidth(width);
  keyColumn.setMinWidth(width);
  final TableCellRenderer defaultRenderer=myTable.getDefaultRenderer(String.class);
  if (defaultRenderer instanceof JComponent) {
    final JComponent component=(JComponent)defaultRenderer;
    component.putClientProperty("html.disable",Boolean.TRUE);
  }
  selectKey(keyToPreselect);
  init();
  new DoubleClickListener(){
    @Override protected boolean onDoubleClick(    MouseEvent e){
      doOKAction();
      return true;
    }
  }
.installOn(myTable);
}
