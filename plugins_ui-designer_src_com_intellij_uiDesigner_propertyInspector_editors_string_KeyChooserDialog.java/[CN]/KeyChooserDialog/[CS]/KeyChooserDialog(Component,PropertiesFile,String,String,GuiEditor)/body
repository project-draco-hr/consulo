{
  super(parent,true);
  myEditor=editor;
  myBundle=bundle;
  myBundleName=bundleName;
  setTitle(UIDesignerBundle.message("title.chooser.value"));
  fillPropertyList();
  myModel=new MyTableModel();
  myTable=new JBTable(myModel);
  myTable.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  new MySpeedSearch(myTable);
  myCenterPanel=ScrollPaneFactory.createScrollPane(myTable);
  myTable.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0),OK_ACTION);
  myTable.getActionMap().put(OK_ACTION,new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      getOKAction().actionPerformed(e);
    }
  }
);
  final FontMetrics metrics=myTable.getFontMetrics(myTable.getFont());
  int width=0;
  for (int i=myPairs.size() - 1; i >= 0; i--) {
    final Pair<String,String> pair=myPairs.get(i);
    width=Math.max(width,metrics.stringWidth(pair.getFirst()));
  }
  width+=30;
  width=Math.max(width,metrics.stringWidth(myModel.getColumnName(0)));
  final TableColumn keyColumn=myTable.getColumnModel().getColumn(0);
  keyColumn.setMaxWidth(width);
  keyColumn.setMinWidth(width);
  final TableCellRenderer defaultRenderer=myTable.getDefaultRenderer(String.class);
  if (defaultRenderer instanceof JComponent) {
    final JComponent component=(JComponent)defaultRenderer;
    component.putClientProperty("html.disable",Boolean.TRUE);
  }
  selectKey(keyToPreselect);
  init();
  myTable.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      if (!e.isPopupTrigger() && e.getClickCount() == 2) {
        doOKAction();
      }
    }
  }
);
}
