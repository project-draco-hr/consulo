{
  List<Element> expectedProblems=new ArrayList<Element>(expectedDoc.getRootElement().getChildren("problem"));
  List<Element> reportedProblems=new ArrayList<Element>(doc.getRootElement().getChildren("problem"));
  Element[] expectedArray=expectedProblems.toArray(new Element[expectedProblems.size()]);
  boolean failed=false;
  expected:   for (  Element expectedProblem : expectedArray) {
    Element[] reportedArrayed=reportedProblems.toArray(new Element[reportedProblems.size()]);
    for (    Element reportedProblem : reportedArrayed) {
      if (compareProblemWithExpected(reportedProblem,expectedProblem,checkRange)) {
        expectedProblems.remove(expectedProblem);
        reportedProblems.remove(reportedProblem);
        continue expected;
      }
    }
    Document missing=new Document((Element)expectedProblem.clone());
    System.out.println("The following haven't been reported as expected: " + new String(JDOMUtil.printDocument(missing,"\n")));
    failed=true;
  }
  for (  Element reportedProblem : reportedProblems) {
    Document extra=new Document((Element)reportedProblem.clone());
    System.out.println("The following has been unexpectedly reported: " + new String(JDOMUtil.printDocument(extra,"\n")));
    failed=true;
  }
  Assert.assertFalse(failed);
}
