{
  PsiElement element=TargetElementUtil.findTargetElement(myEditor,TargetElementUtil.ELEMENT_NAME_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED);
  PsiCall callToInline=InlineToAnonymousClassHandler.findCallToInline(myEditor);
  PsiClass classToInline=(PsiClass)element;
  assertEquals(null,InlineToAnonymousClassHandler.getCannotInlineMessage(classToInline));
  final InlineToAnonymousClassProcessor processor=new InlineToAnonymousClassProcessor(getProject(),classToInline,callToInline,inlineThisOnly);
  Ref<UsageInfo[]> refUsages=new Ref<UsageInfo[]>(processor.findUsages());
  ArrayList<String> conflicts=processor.getConflicts(refUsages);
  assertEquals(0,conflicts.size());
  processor.run();
}
