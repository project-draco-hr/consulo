{
  PsiElement element=TargetElementUtil.findTargetElement(myEditor,TargetElementUtil.ELEMENT_NAME_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED);
  PsiCall callToInline=InlineToAnonymousClassHandler.findCallToInline(myEditor);
  PsiClass classToInline=(PsiClass)element;
  assertEquals(null,InlineToAnonymousClassHandler.getCannotInlineMessage(classToInline));
  final InlineToAnonymousClassProcessor processor=new InlineToAnonymousClassProcessor(getProject(),classToInline,callToInline,inlineThisOnly);
  UsageInfo[] usages=processor.findUsages();
  Ref<UsageInfo[]> refUsages=new Ref<UsageInfo[]>(usages);
  ArrayList<String> conflicts=processor.getConflicts(usages);
  assertEquals(0,conflicts.size());
  processor.run();
}
