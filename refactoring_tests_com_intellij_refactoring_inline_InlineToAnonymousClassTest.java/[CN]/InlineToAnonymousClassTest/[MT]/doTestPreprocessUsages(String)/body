{
  String name=getTestName(false);
  @NonNls String fileName="/refactoring/inlineToAnonymousClass/" + name + ".java";
  configureByFile(fileName);
  PsiElement element=TargetElementUtil.findTargetElement(myEditor,TargetElementUtil.ELEMENT_NAME_ACCEPTED | TargetElementUtil.REFERENCED_ELEMENT_ACCEPTED);
  assertInstanceOf(element,PsiClass.class);
  assertEquals(null,InlineToAnonymousClassHandler.getCannotInlineMessage((PsiClass)element));
  final InlineToAnonymousClassProcessor processor=new InlineToAnonymousClassProcessor(getProject(),(PsiClass)element,null,false);
  Ref<UsageInfo[]> refUsages=new Ref<UsageInfo[]>(processor.findUsages());
  String message=processor.getPreprocessUsagesMessage(refUsages);
  assertEquals(expectedMessage,message);
}
