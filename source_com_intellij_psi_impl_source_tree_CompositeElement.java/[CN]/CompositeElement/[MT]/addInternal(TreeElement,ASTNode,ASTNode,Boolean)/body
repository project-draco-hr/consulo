{
  ASTNode anchorBefore;
  if (anchor != null) {
    anchorBefore=before.booleanValue() ? anchor : anchor.getTreeNext();
  }
 else {
    if (before != null && !before.booleanValue()) {
      anchorBefore=firstChild;
    }
 else {
      anchorBefore=null;
    }
  }
  return (TreeElement)CodeEditUtil.addChildren(this,first,last,anchorBefore);
}
