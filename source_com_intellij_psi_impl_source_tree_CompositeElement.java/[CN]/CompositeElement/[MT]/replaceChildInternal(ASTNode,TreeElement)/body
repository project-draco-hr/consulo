{
  if (getElementType() == JavaElementType.PARENTH_EXPRESSION) {
    getTreeParent().replaceChildInternal(this,newElement);
  }
 else {
    if (ElementType.EXPRESSION_BIT_SET.isInSet(child.getElementType())) {
      boolean needParenth=ReplaceExpressionUtil.isNeedParenthesis(child,newElement);
      if (needParenth) {
        newElement=SourceUtil.addParenthToReplacedChild(JavaElementType.PARENTH_EXPRESSION,newElement,getManager());
      }
    }
    CodeEditUtil.replaceChild(this,child,newElement);
  }
}
