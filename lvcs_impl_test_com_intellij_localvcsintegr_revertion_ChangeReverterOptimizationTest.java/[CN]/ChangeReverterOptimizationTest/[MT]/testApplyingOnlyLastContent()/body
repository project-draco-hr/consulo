{
  VirtualFile f=root.createChildData(null,"f.java");
  f.setBinaryContent(new byte[]{1},-1,11);
  f.setBinaryContent(new byte[]{2},-1,22);
  f.setBinaryContent(new byte[]{3},-1,33);
  f.setBinaryContent(new byte[]{4},-1,44);
  LoggingVirtualFileAdapter a=new LoggingVirtualFileAdapter();
  addFileListenerDuring(a,new RunnableAdapter(){
    @Override public void doRun() throws IOException {
      revertChange(root,2);
    }
  }
);
  assertEquals("contentChanged ",a.getLog());
  assertEquals(1,f.contentsToByteArray()[0]);
  assertEquals(11,f.getTimeStamp());
}
