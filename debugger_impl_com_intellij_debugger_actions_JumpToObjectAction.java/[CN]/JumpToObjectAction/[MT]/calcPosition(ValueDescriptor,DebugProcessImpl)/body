{
  final Value value=descriptor.getValue();
  if (value == null) {
    return null;
  }
  Type type=value.type();
  if (type == null) {
    return null;
  }
  try {
    if (type instanceof ArrayType) {
      type=((ArrayType)type).componentType();
    }
    if (type instanceof ClassType) {
      final List<Location> locations=((ClassType)type).allLineLocations();
      if (locations.size() > 0) {
        final Location location=locations.get(0);
        return ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
          public SourcePosition compute(){
            return debugProcess.getPositionManager().getSourcePosition(location);
          }
        }
);
      }
    }
  }
 catch (  ClassNotPreparedException e) {
    LOG.debug(e);
  }
catch (  AbsentInformationException e) {
    LOG.debug(e);
  }
  return null;
}
