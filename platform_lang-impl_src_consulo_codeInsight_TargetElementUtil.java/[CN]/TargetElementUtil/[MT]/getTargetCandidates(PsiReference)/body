{
  if (reference instanceof PsiPolyVariantReference) {
    final ResolveResult[] results=((PsiPolyVariantReference)reference).multiResolve(false);
    final ArrayList<PsiElement> navigatableResults=new ArrayList<PsiElement>(results.length);
    for (    ResolveResult r : results) {
      PsiElement element=r.getElement();
      if (EditSourceUtil.canNavigate(element) || element instanceof Navigatable && ((Navigatable)element).canNavigateToSource()) {
        navigatableResults.add(element);
      }
    }
    return navigatableResults;
  }
  PsiElement resolved=reference.resolve();
  if (resolved instanceof NavigationItem) {
    return Collections.singleton(resolved);
  }
  Collection<PsiElement> targetCandidates=TargetElementUtilEx.EP_NAME.composite().getTargetCandidates(reference);
  if (targetCandidates != null) {
    return targetCandidates;
  }
  return Collections.emptyList();
}
