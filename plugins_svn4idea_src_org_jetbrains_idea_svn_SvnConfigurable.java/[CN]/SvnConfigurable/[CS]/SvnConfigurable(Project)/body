{
  myProject=project;
  myUseDefaultCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      boolean enabled=!myUseDefaultCheckBox.isSelected();
      myConfigurationDirectoryText.setEnabled(enabled);
      myConfigurationDirectoryLabel.setEnabled(enabled);
      SvnConfiguration configuration=SvnConfiguration.getInstance(myProject);
      String path=configuration.getConfigurationDirectory();
      if (!enabled || path == null) {
        myConfigurationDirectoryText.setText(IdeaSubversionConfigurationDirectory.getPath());
      }
 else {
        myConfigurationDirectoryText.setText(path);
      }
    }
  }
);
  myCommandLineClient.addBrowseFolderListener("Subversion","Select path to Subversion executable (1.7+)",project,FileChooserDescriptorFactory.createSingleFileNoJarsDescriptor());
  myClearAuthButton.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      String path=myConfigurationDirectoryText.getText();
      if (path != null) {
        int result=Messages.showYesNoDialog(myComponent,SvnBundle.message("confirmation.text.delete.stored.authentication.information"),SvnBundle.message("confirmation.title.clear.authentication.cache"),Messages.getWarningIcon());
        if (result == 0) {
          SvnConfiguration.RUNTIME_AUTH_CACHE.clear();
          SvnConfiguration.getInstance(myProject).clearAuthenticationDirectory(myProject);
        }
      }
    }
  }
);
  final FileChooserDescriptor descriptor=createFileDescriptor();
  myConfigurationDirectoryText.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      @NonNls String path=myConfigurationDirectoryText.getText().trim();
      path="file://" + path.replace(File.separatorChar,'/');
      VirtualFile root=VirtualFileManager.getInstance().findFileByUrl(path);
      String oldValue=PropertiesComponent.getInstance().getValue("FileChooser.showHiddens");
      PropertiesComponent.getInstance().setValue("FileChooser.showHiddens",Boolean.TRUE.toString());
      VirtualFile file=FileChooser.chooseFile(myComponent,descriptor,root);
      PropertiesComponent.getInstance().setValue("FileChooser.showHiddens",oldValue);
      if (file == null) {
        return;
      }
      myConfigurationDirectoryText.setText(file.getPath().replace('/',File.separatorChar));
    }
  }
);
  myConfigurationDirectoryText.setEditable(false);
  myConfigurationDirectoryLabel.setLabelFor(myConfigurationDirectoryText);
  myUseCommonProxy.setText(SvnBundle.message("use.idea.proxy.as.default",ApplicationNamesInfo.getInstance().getProductName()));
  myEditProxiesButton.addActionListener(new ConfigureProxiesListener(myProject));
  myMaximumNumberOfRevisionsCheckBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      myNumRevsInAnnotations.setEnabled(myMaximumNumberOfRevisionsCheckBox.isSelected());
    }
  }
);
  myNumRevsInAnnotations.setEnabled(myMaximumNumberOfRevisionsCheckBox.isSelected());
  ButtonGroup bg=new ButtonGroup();
  bg.add(myNoAcceleration);
  bg.add(myJavaHLAcceleration);
  bg.add(myWithCommandLineClient);
  final boolean internal=ApplicationManager.getApplication().isInternal();
  myJavaHLAcceleration.setEnabled(internal);
  myJavaHLAcceleration.setVisible(internal);
  myJavaHLInfo.setVisible(internal);
}
