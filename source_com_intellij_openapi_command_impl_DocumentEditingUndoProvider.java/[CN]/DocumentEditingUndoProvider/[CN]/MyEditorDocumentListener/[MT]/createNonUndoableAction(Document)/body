{
  UndoManagerImpl undoManager=getUndoManager();
  if (undoManager.undoableActionsForDocumentAreEmpty(DocumentReferenceByDocument.createDocumentReference(document))) {
    return;
  }
  undoManager.undoableActionPerformed(new NonUndoableAction(){
    public DocumentReference[] getAffectedDocuments(){
      return new DocumentReference[]{DocumentReferenceByDocument.createDocumentReference(document)};
    }
    public boolean isComplex(){
      return false;
    }
  }
);
}
