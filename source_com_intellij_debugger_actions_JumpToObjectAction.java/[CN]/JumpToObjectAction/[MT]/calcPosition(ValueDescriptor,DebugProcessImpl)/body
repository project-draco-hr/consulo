{
  Value value=descriptor.getValue();
  if (value != null) {
    Type type=value.type();
    if (type != null) {
      if (type instanceof ArrayType) {
        type=((ArrayType)type).componentType();
      }
      if (type instanceof ClassType) {
        List<Location> locations=((ClassType)type).allLineLocations();
        if (locations.size() > 0) {
          final Location location=locations.get(0);
          return ApplicationManager.getApplication().runReadAction(new Computable<SourcePosition>(){
            public SourcePosition compute(){
              return debugProcess.getPositionManager().getSourcePosition(location);
            }
          }
);
        }
      }
    }
  }
  return null;
}
