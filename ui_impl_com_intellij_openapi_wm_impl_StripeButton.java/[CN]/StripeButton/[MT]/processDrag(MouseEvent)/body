{
  if (!isDraggingNow()) {
    myDragPane=findLayeredPane(e);
    if (myDragPane == null)     return;
    final BufferedImage image=new BufferedImage(getWidth(),getHeight(),BufferedImage.TYPE_INT_RGB);
    paint(image.getGraphics());
    myDragButtonImage=new JLabel(new ImageIcon(image));
    myDragPane.add(myDragButtonImage,JLayeredPane.POPUP_LAYER);
    myDragButtonImage.setSize(myDragButtonImage.getPreferredSize());
  }
  if (!isDraggingNow())   return;
  Point xy=SwingUtilities.convertPoint(e.getComponent(),e.getPoint(),myDragPane);
  xy.x-=myPressedPoint.x;
  xy.y-=myPressedPoint.y;
  myDragButtonImage.setLocation(xy);
  final Point screenPoint=e.getPoint();
  SwingUtilities.convertPointToScreen(screenPoint,e.getComponent());
  final Stripe stripe=myPane.getStripeFor(screenPoint);
}
