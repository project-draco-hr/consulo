{
  final MavenDomDependency dep=getDependency(file,editor);
  final VirtualFile[] files;
  if (myFileChooser == null) {
    final FileChooserDescriptor descriptor=new FileChooserDescriptor(true,false,true,true,false,false);
    final PsiFile currentValue=dep != null ? dep.getSystemPath().getValue() : null;
    final VirtualFile toSelect=currentValue == null ? null : currentValue.getVirtualFile();
    files=FileChooser.chooseFiles(descriptor,project,toSelect);
  }
 else {
    files=myFileChooser.produce();
  }
  if (files == null || files.length == 0)   return;
  final PsiFile selectedFile=PsiManager.getInstance(project).findFile(files[0]);
  if (selectedFile == null)   return;
  if (dep != null) {
    new WriteCommandAction(project){
      protected void run(      Result result) throws Throwable {
        dep.getSystemPath().setValue(selectedFile);
      }
    }
.execute();
  }
}
