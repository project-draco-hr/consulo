{
  if (!myShouldMerge) {
    myResult.addElement(element);
    return;
  }
  if (lastElement != null) {
    if (lastElement.getLookupString().equals(element.getLookupString())) {
      number++;
      lastElement=LookupElementBuilder.create(element.getLookupString()).withTailText(" (" + number + " variants...)",true);
      return;
    }
    myResult.addElement(lastElement);
  }
  lastElement=element;
  number=1;
}
