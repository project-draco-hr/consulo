{
  MavenRunConfigurationType type=ConfigurationTypeUtil.findConfigurationType(MavenRunConfigurationType.class);
  final RunnerAndConfigurationSettingsImpl settings=RunManagerEx.getInstanceEx(project).createConfiguration(generateName(project,params),type.myFactory);
  MavenRunConfiguration runConfiguration=(MavenRunConfiguration)settings.getConfiguration();
  runConfiguration.setRunnerParameters(params);
  if (generalSettings != null)   runConfiguration.setGeneralSettings(generalSettings);
  if (runnerSettings != null)   runConfiguration.setRunnerSettings(runnerSettings);
  if (resetBeforeRunTasks)   resetBeforeRunTasks(RunManager.getInstance(project),runConfiguration);
  return settings;
}
