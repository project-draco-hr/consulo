{
  PsiElement resolve=qualifierResult.getElement();
  if (resolve == null)   throw new MethodProcessorSetupFailedException("Cant determine qualifier class!");
  if (resolve instanceof PsiTypeParameter) {
    final PsiType paramType=qualifierResult.getSubstitutor().substitute((PsiTypeParameter)resolve);
    qualifierResult=PsiUtil.resolveGenericsClassInType(paramType);
    resolve=qualifierResult.getElement();
  }
 else   if (resolve instanceof PsiClass) {
    PsiExpression qualifier=methodCall.getMethodExpression().getQualifierExpression();
    if (qualifier instanceof PsiSuperExpression) {
      processor.setAccessClass((PsiClass)PsiUtil.getAccessObjectClass(qualifier).getElement());
    }
 else     processor.setAccessClass((PsiClass)resolve);
  }
  processor.setIsConstructor(false);
  processor.setName(methodCall.getMethodExpression().getReferenceName());
  return processScope(resolve,processor,qualifierResult.getSubstitutor(),methodCall,methodCall);
}
