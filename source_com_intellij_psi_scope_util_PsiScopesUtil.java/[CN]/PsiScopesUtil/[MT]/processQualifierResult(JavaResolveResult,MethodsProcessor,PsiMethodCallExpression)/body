{
  PsiElement resolve=qualifierResult.getElement();
  if (resolve == null)   throw new MethodProcessorSetupFailedException("Cant determine qualifier class!");
  if (resolve instanceof PsiTypeParameter) {
    final PsiType paramType=qualifierResult.getSubstitutor().substitute((PsiTypeParameter)resolve);
    qualifierResult=PsiUtil.resolveGenericsClassInType(paramType);
    resolve=qualifierResult.getElement();
  }
 else   if (resolve instanceof PsiClass) {
    PsiExpression qualifier=methodCall.getMethodExpression().getQualifierExpression();
    processor.setAccessClass((PsiClass)PsiUtil.getAccessObjectClass(qualifier).getElement());
  }
  processor.setIsConstructor(false);
  processor.setName(methodCall.getMethodExpression().getReferenceName());
  return resolve.processDeclarations(processor,ResolveState.initial().put(PsiSubstitutor.KEY,qualifierResult.getSubstitutor()),methodCall,methodCall);
}
