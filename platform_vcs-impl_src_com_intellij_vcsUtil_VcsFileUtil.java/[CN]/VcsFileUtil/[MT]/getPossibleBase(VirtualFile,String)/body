{
  if (file == null || path.length == 0)   return null;
  VirtualFile current=file;
  final List<VirtualFile> backTrace=new ArrayList<VirtualFile>();
  int idx=path.length - 1;
  while (current != null) {
    if (SystemInfo.isFileSystemCaseSensitive ? current.getName().equals(path[idx]) : current.getName().equalsIgnoreCase(path[idx])) {
      if (idx == 0) {
        return current;
      }
      --idx;
    }
 else     if (idx != path.length - 1) {
      int diff=path.length - 1 - idx- 1;
      for (int i=0; i < diff; i++) {
        current=backTrace.remove(backTrace.size() - 1);
      }
      idx=path.length - 1;
      continue;
    }
    backTrace.add(current);
    current=current.getParent();
  }
  return null;
}
