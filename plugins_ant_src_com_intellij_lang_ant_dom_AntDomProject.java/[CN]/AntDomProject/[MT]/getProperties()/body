{
  Map<String,String> properties=myProperties;
  if (properties == null) {
    final ReflectedProject reflected=ReflectedProject.getProject(getClassLoader());
    Map<String,String> externals=Collections.emptyMap();
    final PsiFile containingFile=getXmlTag().getContainingFile();
    if (containingFile != null) {
      final AntBuildFileImpl buildFile=(AntBuildFileImpl)containingFile.getCopyableUserData(AntBuildFile.ANT_BUILD_FILE_KEY);
      if (buildFile != null) {
        externals=buildFile.getExternalProperties();
      }
    }
    myProperties=(properties=loadPredefinedProperties(reflected.getProperties(),externals));
  }
  return properties;
}
