{
  if (myProperties == null) {
    final ReflectedProject reflected=ReflectedProject.getProject(getClassLoader());
synchronized (this) {
      if (myProperties == null) {
        Map<String,String> externals=Collections.emptyMap();
        final PsiFile containingFile=getXmlTag().getContainingFile();
        if (containingFile != null) {
          final AntBuildFileImpl buildFile=(AntBuildFileImpl)containingFile.getCopyableUserData(AntBuildFile.ANT_BUILD_FILE_KEY);
          if (buildFile != null) {
            externals=buildFile.getExternalProperties();
          }
        }
        myProperties=loadPredefinedProperties(reflected.getProperties(),externals);
      }
    }
  }
  return myProperties;
}
