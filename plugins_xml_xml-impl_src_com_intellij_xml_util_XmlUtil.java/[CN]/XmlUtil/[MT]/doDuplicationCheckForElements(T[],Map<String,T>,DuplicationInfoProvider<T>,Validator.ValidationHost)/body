{
  for (  T t : elements) {
    final String name=provider.getName(t);
    if (name == null)     continue;
    final String nameKey=provider.getNameKey(t,name);
    if (presentNames.containsKey(nameKey)) {
      final T psiElement=presentNames.get(nameKey);
      final String message=XmlErrorMessages.message("duplicate.declaration",nameKey);
      if (psiElement != null) {
        presentNames.put(nameKey,null);
        host.addMessage(provider.getNodeForMessage(psiElement),message,Validator.ValidationHost.ErrorType.ERROR);
      }
      host.addMessage(provider.getNodeForMessage(t),message,Validator.ValidationHost.ErrorType.ERROR);
    }
 else {
      presentNames.put(nameKey,t);
    }
  }
}
