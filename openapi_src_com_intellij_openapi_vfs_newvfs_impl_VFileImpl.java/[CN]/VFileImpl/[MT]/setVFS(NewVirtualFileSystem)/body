{
  if (newVfs != myFS) {
    myFS=newVfs;
    myId=newVfs.getId(getParent(),getName());
    if (myChildrenCache != null) {
      final VirtualFileManagement management=VirtualFileManagement.getInstance();
      for (      VirtualFile child : myChildrenCache.values()) {
        if (management.findFSForChild(this,child.getName()) == newVfs) {
          ((VFileImpl)child).setVFS(newVfs);
        }
      }
    }
  }
}
