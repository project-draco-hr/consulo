{
  if (selected == null)   return null;
  for (  AbstractTreeNode selectedElement : selected) {
    Object element=selectedElement.getValue();
    if (PlatformDataKeys.VIRTUAL_FILE.is(dataName)) {
      if (element instanceof ResourceBundle) {
        return new ResourceBundleAsVirtualFile((ResourceBundle)element);
      }
    }
    if (LangDataKeys.PSI_ELEMENT_ARRAY.is(dataName)) {
      if (element instanceof ResourceBundle) {
        List<PropertiesFile> propertiesFiles=((ResourceBundle)element).getPropertiesFiles(myProject);
        return propertiesFiles.toArray(new PropertiesFile[propertiesFiles.size()]);
      }
    }
    if (PlatformDataKeys.DELETE_ELEMENT_PROVIDER.is(dataName)) {
      if (element instanceof ResourceBundle) {
        return new ResourceBundleDeleteProvider((ResourceBundle)element);
      }
    }
  }
  if (ResourceBundle.ARRAY_DATA_KEY.is(dataName)) {
    final List<ResourceBundle> selectedElements=new ArrayList<ResourceBundle>();
    for (    AbstractTreeNode node : selected) {
      final Object value=node.getValue();
      if (value instanceof ResourceBundle) {
        selectedElements.add((ResourceBundle)value);
      }
    }
    return selectedElements.isEmpty() ? null : selectedElements.toArray(new ResourceBundle[selectedElements.size()]);
  }
  return null;
}
