{
  super(project,true);
  myProject=project;
  setModal(false);
  setCancelButtonText("Close");
  setOKButtonText("Evaluate");
  myEditor=createEditor();
  myEvaluationPanel=new MyEvaluationPanel(myProject);
  setDebuggerContext(getDebuggerContext());
  initDialogData(text);
  myContextListener=new DebuggerContextListener(){
    public void changeEvent(    DebuggerContextImpl newContext,    int event){
      boolean close=true;
      for (Iterator iterator=DebuggerManagerEx.getInstanceEx(myProject).getSessions().iterator(); iterator.hasNext(); ) {
        DebuggerSession session=(DebuggerSession)iterator.next();
        if (!session.isStopped()) {
          close=false;
          break;
        }
      }
      if (close) {
        close(CANCEL_EXIT_CODE);
      }
 else {
        setDebuggerContext(newContext);
      }
    }
  }
;
  DebuggerManagerEx.getInstanceEx(myProject).getContextManager().addListener(myContextListener);
  setHorizontalStretch(1f);
  setVerticalStretch(1f);
}
