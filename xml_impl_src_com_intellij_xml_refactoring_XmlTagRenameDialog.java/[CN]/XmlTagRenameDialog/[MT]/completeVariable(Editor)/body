{
  String prefix=myNameSuggestionsField.getName();
  Set<LookupItem> set=new LinkedHashSet<LookupItem>();
  final PsiReference reference=myTag.getReference();
  if (reference != null) {
    final Object[] variants=reference.getVariants();
    for (    Object variant : variants) {
      LookupItemUtil.addLookupItem(set,variant,"");
    }
    LookupItem[] lookupItems=set.toArray(new LookupItem[set.size()]);
    editor.getCaretModel().moveToOffset(prefix.length());
    editor.getSelectionModel().removeSelection();
    LookupManager.getInstance(getProject()).showLookup(editor,lookupItems,prefix,null,new CharFilter(){
      public int accept(      char c,      final String prefix,      final LookupElement element){
        if (Character.isJavaIdentifierPart(c))         return CharFilter.ADD_TO_PREFIX;
        return CharFilter.SELECT_ITEM_AND_FINISH_LOOKUP;
      }
    }
);
  }
}
