{
  boolean useTemporalFile=type instanceof ArchiveFileType || BinaryFileTypeDecompilers.INSTANCE.forFileType(type) != null;
  VirtualFile file;
  if (useTemporalFile) {
    if (type.getDefaultExtension().isEmpty()) {
      file=createTemporalFile(project,"tmp_","_" + name,content);
    }
 else {
      file=createTemporalFile(project,name + "_","." + type.getDefaultExtension(),content);
    }
  }
 else {
    file=new BinaryLightVirtualFile(name,type,content);
    file.setWritable(false);
  }
  return create(project,file);
}
