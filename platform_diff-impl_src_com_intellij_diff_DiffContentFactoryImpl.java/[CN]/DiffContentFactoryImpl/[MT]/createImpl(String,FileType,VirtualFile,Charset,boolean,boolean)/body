{
  LineSeparator separator=respectLineSeparators ? StringUtil.detectSeparators(text) : null;
  Document document=EditorFactory.getInstance().createDocument(StringUtil.convertLineSeparators(text));
  if (readOnly)   document.setReadOnly(true);
  return new DocumentContentImpl(document,type,highlightFile,separator,charset);
}
