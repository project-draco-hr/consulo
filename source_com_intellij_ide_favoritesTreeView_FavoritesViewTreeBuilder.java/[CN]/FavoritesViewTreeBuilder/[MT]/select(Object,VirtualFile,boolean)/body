{
  final Set<AbstractTreeNode> favorites=((FavoritesTreeStructure)getTreeStructure()).getFavorites();
  for (  AbstractTreeNode favorite : favorites) {
    Object currentValue=favorite.getValue();
    if (favorite.getValue() instanceof SmartPsiElementPointer) {
      currentValue=((SmartPsiElementPointer)favorite.getValue()).getElement();
    }
 else     if (currentValue instanceof PsiJavaFile) {
      final PsiClass[] classes=((PsiJavaFile)currentValue).getClasses();
      if (classes.length > 0) {
        currentValue=classes[0];
      }
    }
    if (Comparing.equal(element,currentValue)) {
      final DefaultMutableTreeNode nodeWithObject=findFirstLevelNodeWithObject((DefaultMutableTreeNode)getTree().getModel().getRoot(),favorite);
      if (nodeWithObject != null) {
        TreeUtil.selectInTree(nodeWithObject,requestFocus,getTree());
        return;
      }
    }
  }
  super.select(element,file,requestFocus);
}
