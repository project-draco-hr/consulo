{
  for (  Document d : getUnsavedDocuments()) {
    VirtualFile f=getDocumentFile(d);
    if (!getFileFilter().isAllowedAndUnderContentRoot(f))     continue;
    vcs.changeFileContent(f.getPath(),d.getText().getBytes(),Clock.getCurrentTimestamp());
  }
}
