{
  final ArrayList<PsiJavaPackage> packages=new ArrayList<PsiJavaPackage>();
  for (PsiJavaPackage cur=JavaDirectoryService.getInstance().getPackage(directory); cur != null; cur=cur.getParentPackage()) {
    packages.add(0,cur);
  }
  return new PackagePrefixFileSystemItem(directory,0,packages.toArray(new PsiJavaPackage[packages.size()]));
}
