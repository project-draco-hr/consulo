{
  final int topIdx=externalName.indexOf('$');
  if (topIdx > -1) {
    if (psiClass == null) {
      psiClass=psiManager.findClass(externalName.substring(0,topIdx),GlobalSearchScope.allScope(psiManager.getProject()));
    }
    if (psiClass == null)     return null;
    externalName=externalName.substring(topIdx + 1);
    final int nextIdx=externalName.indexOf("$");
    if (nextIdx > -1) {
      return findPsiClass(psiManager,externalName.substring(nextIdx),findNonQualifiedClassByIndex(externalName.substring(0,nextIdx),psiClass));
    }
 else {
      return findNonQualifiedClassByIndex(externalName,psiClass);
    }
  }
 else {
    return psiManager.findClass(externalName,GlobalSearchScope.allScope(psiManager.getProject()));
  }
}
