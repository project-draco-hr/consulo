{
  FileType fileType=file.getFileType();
  Language language=getLanguage(file,fileType);
  FileViewProviderFactory factory=language == null ? FileTypeFileViewProviders.INSTANCE.forFileType(fileType) : LanguageFileViewProviders.INSTANCE.forLanguage(language);
  FileViewProvider viewProvider=factory == null ? null : factory.createFileViewProvider(file,language,myManager,eventSystemEnabled);
  return viewProvider == null ? new SingleRootFileViewProvider(myManager,file,eventSystemEnabled,fileType) : viewProvider;
}
