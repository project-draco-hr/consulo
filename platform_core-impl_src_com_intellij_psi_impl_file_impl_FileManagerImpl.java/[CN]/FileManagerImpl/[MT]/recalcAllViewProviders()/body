{
  handleFileTypesChange(new FileTypesChanged(){
    @Override protected void updateMaps(){
      for (      final FileViewProvider provider : myVFileToViewProviderMap.values()) {
        if (!provider.getVirtualFile().isValid()) {
          continue;
        }
        for (        Language language : provider.getLanguages()) {
          final PsiFile psi=provider.getPsi(language);
          if (psi instanceof PsiFileImpl) {
            ((PsiFileImpl)psi).clearCaches();
          }
        }
      }
      removeInvalidFilesAndDirs(false);
    }
  }
);
}
