{
  DebugUtil.startPsiModification("removeFilesAndDirsRecursively");
  try {
    VfsUtilCore.visitChildrenRecursively(vFile,new VirtualFileVisitor(){
      @Override public boolean visitFile(      @NotNull VirtualFile file){
        if (file.isDirectory()) {
          myVFileToPsiDirMap.remove(file);
        }
 else {
          FileViewProvider viewProvider=myVFileToViewProviderMap.remove(file);
          if (viewProvider != null) {
            markInvalidated(viewProvider);
          }
        }
        return true;
      }
    }
);
  }
  finally {
    DebugUtil.finishPsiModification();
  }
}
