{
  String commitButtonText=executor != null ? executor.getActionText() : myCheckinProjectPanel.getCommitActionName();
  if (commitButtonText.endsWith("...")) {
    commitButtonText=commitButtonText.substring(0,commitButtonText.length() - 3);
  }
  final StringBuilder text=new StringBuilder();
  if (worker.getAddedOrEditedTodos().isEmpty() && worker.getInChangedTodos().isEmpty()) {
    text.append("No new, edited, or located in changed fragments TODO items found.\n").append(worker.getSkipped().size()).append(" file(s) were skipped.\nWould you like to review them?");
  }
 else {
    if (worker.getAddedOrEditedTodos().isEmpty()) {
      text.append("There were ").append(worker.getInChangedTodos().size()).append(" located in changed fragments TODO item(s) found.\n");
    }
 else     if (worker.getInChangedTodos().isEmpty()) {
      text.append("There were ").append(worker.getAddedOrEditedTodos().size()).append(" added or edited TODO item(s) found.\n");
    }
 else {
      text.append("There were ").append(worker.getAddedOrEditedTodos().size()).append(" added or edited,\nand ").append(worker.getInChangedTodos().size()).append(" located in changed fragments TODO item(s) found.\n");
    }
    if (!worker.getSkipped().isEmpty()) {
      text.append(worker.getSkipped().size()).append(" file(s) were skipped.\n");
    }
    text.append("Would you like to review them?");
  }
  final int answer=Messages.showDialog(text.toString(),"TODO",new String[]{VcsBundle.message("todo.in.new.review.button"),commitButtonText,CommonBundle.getCancelButtonText()},0,UIUtil.getWarningIcon());
  if (answer == 0) {
    return ReturnResult.CLOSE_WINDOW;
  }
 else   if (answer == 2 || answer == -1) {
    return ReturnResult.CANCEL;
  }
 else {
    return ReturnResult.COMMIT;
  }
}
