{
  List<ProblemDescriptor> allProblems=null;
  final PsiClassInitializer[] initializers=aClass.getInitializers();
  for (  PsiClassInitializer initializer : initializers) {
    final ProblemDescriptor[] problems=checkCodeBlock(initializer.getBody(),manager,isOnTheFly);
    if (problems != null) {
      if (allProblems == null) {
        allProblems=new ArrayList<ProblemDescriptor>(1);
      }
      allProblems.addAll(Arrays.asList(problems));
    }
  }
  return allProblems == null ? null : allProblems.toArray(new ProblemDescriptor[allProblems.size()]);
}
