{
  final byte flags=PsiMethodStubImpl.packFlags(psi.isConstructor(),psi instanceof PsiAnnotationMethod,psi.isVarArgs(),RecordUtil.isDeprecatedByDocComment(psi),RecordUtil.isDeprecatedByAnnotation(psi));
  String defValueText=null;
  if (psi instanceof PsiAnnotationMethod) {
    PsiAnnotationMemberValue defaultValue=((PsiAnnotationMethod)psi).getDefaultValue();
    if (defaultValue != null) {
      defValueText=defaultValue.getText();
    }
  }
  return new PsiMethodStubImpl(parentStub,StringRef.fromString(psi.getName()),TypeInfo.create(psi.getReturnTypeNoResolve(),psi.getReturnTypeElement()),flags,StringRef.fromString(defValueText));
}
