{
  int result=0;
  CharSequence text=softWrap.getText();
  for (int i=text.length() - 1; i >= 0; i--) {
    if (text.charAt(i) == '\n') {
      break;
    }
    result++;
  }
  if (SOFT_WRAP_DRAWING_WIDTH > 0) {
    result++;
  }
  return result;
}
