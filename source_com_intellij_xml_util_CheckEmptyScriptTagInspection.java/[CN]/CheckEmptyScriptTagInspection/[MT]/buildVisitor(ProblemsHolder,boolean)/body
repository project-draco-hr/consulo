{
  return new PsiElementVisitor(){
    public void visitReferenceExpression(    PsiReferenceExpression expression){
    }
    public void visitXmlTag(    final XmlTag tag){
      if ((SCRIPT_TAG_NAME.equals(tag.getName()) || (tag instanceof HtmlTag && SCRIPT_TAG_NAME.equalsIgnoreCase(tag.getLocalName()))) && tag.getLanguage() != StdLanguages.XML) {
        final ASTNode child=XmlChildRole.EMPTY_TAG_END_FINDER.findChild(tag.getNode());
        if (child != null) {
          final LocalQuickFix fix=new LocalQuickFix(){
            @NotNull public String getName(){
              return XmlBundle.message("html.inspections.check.empty.script.tag.fix.message");
            }
            public void applyFix(            @NotNull Project project,            @NotNull ProblemDescriptor descriptor){
              final StringBuilder builder=new StringBuilder(tag.getText());
              builder.replace(builder.length() - 2,builder.length(),"></" + SCRIPT_TAG_NAME + ">");
              try {
                final FileType fileType=tag.getContainingFile().getFileType();
                PsiFile file=tag.getManager().getElementFactory().createFileFromText("dummy." + (fileType == StdFileTypes.JSP || fileType == StdFileTypes.HTML ? "html" : "xml"),builder.toString());
                tag.replace(((XmlFile)file).getDocument().getRootTag());
              }
 catch (              IncorrectOperationException e) {
                LOG.error(e);
              }
            }
            @NotNull public String getFamilyName(){
              return getName();
            }
          }
;
          holder.registerProblem(tag,XmlBundle.message("html.inspections.check.empty.script.message"),fix);
        }
      }
    }
  }
;
}
