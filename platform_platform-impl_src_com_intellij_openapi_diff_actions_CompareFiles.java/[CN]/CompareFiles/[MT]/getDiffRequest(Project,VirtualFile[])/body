{
  if (files == null || files.length != 2)   return null;
  if (files[0].isDirectory() || files[1].isDirectory() || files[0].getFileType() instanceof ArchiveFileType|| files[1].getFileType() instanceof ArchiveFileType) {
    return null;
  }
  String title=DiffBundle.message("diff.element.qualified.name.vs.element.qualified.name.dialog.title",getVirtualFileContentTitle(files[0]),getVirtualFileContentTitle(files[1]));
  SimpleDiffRequest diffRequest=DiffContentFactory.compareVirtualFiles(project,files[0],files[1],title);
  if (diffRequest == null)   return null;
  diffRequest.setContentTitles(getVirtualFileContentTitle(files[0]),getVirtualFileContentTitle(files[1]));
  return diffRequest;
}
