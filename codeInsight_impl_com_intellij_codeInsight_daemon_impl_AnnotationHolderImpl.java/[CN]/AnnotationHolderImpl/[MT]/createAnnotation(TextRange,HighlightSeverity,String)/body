{
  if (!writable)   throw new IllegalStateException();
  String tooltip=message == null ? null : "<html><body>" + XmlStringUtil.escapeString(message) + "</body></html>";
  Annotation annotation=new Annotation(range.getStartOffset(),range.getEndOffset(),severity,message,tooltip);
  add(annotation);
  return annotation;
}
