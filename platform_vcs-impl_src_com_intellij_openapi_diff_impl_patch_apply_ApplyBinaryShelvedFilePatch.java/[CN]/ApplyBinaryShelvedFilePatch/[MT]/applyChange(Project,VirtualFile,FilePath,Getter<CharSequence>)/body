{
  try {
    ContentRevision contentRevision=myPatch.getShelvedBinaryFile().createChange(project).getAfterRevision();
    if (contentRevision != null) {
      assert(contentRevision instanceof ShelvedBinaryContentRevision);
      byte[] binaryContent=((ShelvedBinaryContentRevision)contentRevision).getBinaryContent();
      fileToPatch.setBinaryContent(binaryContent != null ? binaryContent : ArrayUtil.EMPTY_BYTE_ARRAY);
    }
  }
 catch (  VcsException e) {
    LOG.error("Couldn't apply shelved binary patch",e);
    return new Result(ApplyPatchStatus.FAILURE){
      @Override public ApplyPatchForBaseRevisionTexts getMergeData(){
        return null;
      }
    }
;
  }
  return SUCCESS;
}
