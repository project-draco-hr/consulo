{
  final Project project=getProject();
  Editor result=null;
  DockContainer c=DockManager.getInstance(myProject).getContainerFor(myStatusBar.getComponent());
  EditorsSplitters splitters=null;
  if (c instanceof DockableEditorTabbedContainer) {
    splitters=((DockableEditorTabbedContainer)c).getSplitters();
  }
  if (splitters != null && splitters.getCurrentWindow() != null) {
    EditorWithProviderComposite editor=splitters.getCurrentWindow().getSelectedEditor();
    if (editor != null) {
      FileEditor fileEditor=editor.getSelectedEditorWithProvider().getFirst();
      if (fileEditor instanceof TextEditor) {
        result=((TextEditor)fileEditor).getEditor();
      }
    }
  }
  if (result == null) {
    final FileEditorManager manager=FileEditorManager.getInstance(project);
    Editor editor=manager.getSelectedTextEditor();
    if (editor != null && WindowManager.getInstance().getStatusBar(editor.getComponent()) == myStatusBar) {
      result=editor;
    }
  }
  return result;
}
