{
  final Project project=getProject();
  if (project == null || project.isDisposed())   return null;
  FileEditor fileEditor=StatusBarUtil.getCurrentFileEditor(project,myStatusBar);
  Editor result=null;
  if (fileEditor instanceof TextEditor) {
    result=((TextEditor)fileEditor).getEditor();
  }
  if (result == null) {
    final FileEditorManager manager=FileEditorManager.getInstance(project);
    Editor editor=manager.getSelectedTextEditor();
    if (editor != null && WindowManager.getInstance().getStatusBar(editor.getComponent(),project) == myStatusBar) {
      result=editor;
    }
  }
  return result;
}
