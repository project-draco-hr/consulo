{
  if (isSelected(content) && requestFocus) {
    return requestFocus(content,forcedFocus);
  }
  if (!checkSelectionChangeShouldBeProcessed(content,implicit)) {
    return new ActionCallback.Rejected();
  }
  if (!myContents.contains(content)) {
    throw new IllegalArgumentException("Cannot find content:" + content.getDisplayName());
  }
  final boolean focused=isSelectionHoldsFocus();
  final Content[] old=getSelectedContents();
  Runnable selection=new Runnable(){
    public void run(){
      if (myDisposed || getIndexOfContent(content) == -1)       return;
      for (      Content each : old) {
        removeFromSelection(each);
      }
      addSelectedContent(content);
      if (requestFocus) {
        requestFocus(content,forcedFocus);
      }
    }
  }
;
  if (focused || requestFocus) {
    return getFocusManager().requestFocus(myFocusProxy,true).doWhenProcessed(selection);
  }
 else {
    selection.run();
    return new ActionCallback.Done();
  }
}
