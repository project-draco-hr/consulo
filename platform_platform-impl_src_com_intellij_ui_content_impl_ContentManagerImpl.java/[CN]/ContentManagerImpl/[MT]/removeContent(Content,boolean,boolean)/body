{
  ApplicationManager.getApplication().assertIsDispatchThread();
  int indexToBeRemoved=getIndexOfContent(content);
  if (indexToBeRemoved == -1)   return new ActionCallback.Rejected();
  try {
    Content selection=mySelection.isEmpty() ? null : mySelection.get(mySelection.size() - 1);
    int selectedIndex=selection != null ? myContents.indexOf(selection) : -1;
    if (!fireContentRemoveQuery(content,indexToBeRemoved,ContentManagerEvent.ContentOperation.undefined)) {
      return new ActionCallback.Rejected();
    }
    if (!content.isValid()) {
      return new ActionCallback.Rejected();
    }
    boolean wasSelected=isSelected(content);
    if (wasSelected) {
      removeFromSelection(content);
    }
    int indexToSelect=-1;
    if (wasSelected) {
      int i=indexToBeRemoved - 1;
      if (i >= 0) {
        indexToSelect=i;
      }
 else       if (getContentCount() > 1) {
        indexToSelect=0;
      }
    }
 else     if (selectedIndex > indexToBeRemoved) {
      indexToSelect=selectedIndex - 1;
    }
    myContents.remove(content);
    content.removePropertyChangeListener(this);
    fireContentRemoved(content,indexToBeRemoved,ContentManagerEvent.ContentOperation.remove);
    ((ContentImpl)content).setManager(null);
    if (dispose) {
      Disposer.dispose(content);
    }
    int newSize=myContents.size();
    ActionCallback result=new ActionCallback();
    if (newSize > 0 && trackSelection) {
      if (indexToSelect > -1) {
        final Content toSelect=myContents.get(indexToSelect);
        if (!isSelected(toSelect)) {
          if (myUI.isSingleSelection()) {
            setSelectedContentCB(toSelect).notify(result);
          }
 else {
            addSelectedContent(toSelect);
            result.setDone();
          }
        }
      }
    }
 else {
      mySelection.clear();
    }
    return result;
  }
  finally {
    if (ApplicationManager.getApplication().isDispatchThread()) {
      myUI.getComponent().updateUI();
    }
  }
}
