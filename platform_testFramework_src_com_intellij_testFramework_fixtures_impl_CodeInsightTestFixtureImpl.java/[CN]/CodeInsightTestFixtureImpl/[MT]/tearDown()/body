{
  if (SwingUtilities.isEventDispatchThread()) {
    LookupManager.getInstance(getProject()).hideActiveLookup();
    UIUtil.dispatchAllInvocationEvents();
  }
 else {
    ApplicationManager.getApplication().invokeAndWait(new Runnable(){
      @Override public void run(){
        LookupManager.getInstance(getProject()).hideActiveLookup();
      }
    }
,ModalityState.NON_MODAL);
    UIUtil.pump();
  }
  FileEditorManager editorManager=FileEditorManager.getInstance(getProject());
  VirtualFile[] openFiles=editorManager.getOpenFiles();
  for (  VirtualFile openFile : openFiles) {
    editorManager.closeFile(openFile);
  }
  myProjectFixture.tearDown();
  myTempDirFixture.tearDown();
  super.tearDown();
}
