{
  Project project=file.getProject();
  ensureIndexesUpToDate(project);
  DaemonCodeAnalyzerImpl codeAnalyzer=(DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(project);
  TextEditor textEditor=TextEditorProvider.getInstance().getTextEditor(editor);
  List<HighlightInfo> infos=codeAnalyzer.runPasses(file,editor.getDocument(),textEditor,toIgnore,canChangeDocument,null);
  infos.addAll(DaemonCodeAnalyzerImpl.getFileLevelHighlights(project,file));
  return infos;
}
