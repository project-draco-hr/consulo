{
  super.setUp();
  edt(new Runnable(){
    @Override public void run(){
      try {
        myProjectFixture.setUp();
        myTempDirFixture.setUp();
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
      myPsiManager=(PsiManagerImpl)PsiManager.getInstance(getProject());
      configureInspections(myInspections == null ? LocalInspectionTool.EMPTY_ARRAY : myInspections);
      DaemonCodeAnalyzerImpl daemonCodeAnalyzer=(DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(getProject());
      daemonCodeAnalyzer.prepareForTest();
      DaemonCodeAnalyzerSettings.getInstance().setImportHintEnabled(false);
      ensureIndexesUpToDate(getProject());
      ((StartupManagerImpl)StartupManagerEx.getInstanceEx(getProject())).runPostStartupActivities();
    }
  }
);
}
