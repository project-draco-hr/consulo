{
  super.setUp();
  myProjectFixture.setUp();
  myTempDirFixture.setUp();
  myPsiManager=(PsiManagerImpl)PsiManager.getInstance(getProject());
  configureInspections(myInspections == null ? LocalInspectionTool.EMPTY_ARRAY : myInspections);
  DaemonCodeAnalyzerImpl daemonCodeAnalyzer=(DaemonCodeAnalyzerImpl)DaemonCodeAnalyzer.getInstance(getProject());
  daemonCodeAnalyzer.prepareForTest();
  DaemonCodeAnalyzerSettings.getInstance().setImportHintEnabled(false);
  ensureIndexesUpToDate(getProject());
  ((StartupManagerImpl)StartupManagerEx.getInstanceEx(getProject())).runPostStartupActivities();
  LocalInspectionEP[] extensions=Extensions.getExtensions(LocalInspectionEP.LOCAL_INSPECTION);
  for (  LocalInspectionEP extension : extensions) {
    myExtensions.put(extension.shortName,extension);
  }
}
