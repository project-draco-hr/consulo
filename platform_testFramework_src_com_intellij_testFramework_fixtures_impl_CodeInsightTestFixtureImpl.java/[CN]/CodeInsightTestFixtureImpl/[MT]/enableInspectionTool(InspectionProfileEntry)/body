{
  final String shortName=tool.getShortName();
  final HighlightDisplayKey key=HighlightDisplayKey.find(shortName);
  if (key == null) {
    String id=tool instanceof LocalInspectionTool ? ((LocalInspectionTool)tool).getID() : shortName;
    HighlightDisplayKey.register(shortName,tool.getDisplayName(),id);
  }
  myAvailableTools.put(shortName,tool);
  InspectionTool inspectionTool;
  if (tool instanceof LocalInspectionTool) {
    LocalInspectionEP ep=myExtensions.get(tool.getShortName());
    inspectionTool=new LocalInspectionToolWrapper((LocalInspectionTool)tool,ep);
  }
 else {
    inspectionTool=(InspectionTool)tool;
  }
  myAvailableLocalTools.put(shortName,inspectionTool);
}
