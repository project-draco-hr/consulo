{
  try {
    if (myTempDirFixture instanceof LightTempDirTestFixtureImpl) {
      final VirtualFile file=myTempDirFixture.createFile(relativePath,fileText);
      return PsiManager.getInstance(getProject()).findFile(file);
    }
    return ((HeavyIdeaTestFixture)myProjectFixture).addFileToProject(rootPath,relativePath,fileText);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    ((PsiModificationTrackerImpl)PsiManager.getInstance(getProject()).getModificationTracker()).incCounter();
  }
}
