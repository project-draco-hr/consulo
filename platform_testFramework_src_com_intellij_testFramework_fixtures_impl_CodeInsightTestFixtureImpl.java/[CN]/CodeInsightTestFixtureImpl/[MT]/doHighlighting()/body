{
  final Project project=getProject();
  new WriteCommandAction.Simple(project){
    @Override protected void run() throws Throwable {
      PsiDocumentManager.getInstance(project).commitAllDocuments();
    }
  }
.execute().throwException();
  return ApplicationManager.getApplication().runReadAction(new Computable<List<HighlightInfo>>(){
    @Override public List<HighlightInfo> compute(){
      return instantiateAndRun(getFile(),getEditor(),ArrayUtil.EMPTY_INT_ARRAY,myAllowDirt);
    }
  }
);
}
