{
  int patternIndex=0;
  int nameIndex=0;
  int patternLen=pattern.length();
  int nameLen=name.length();
  if (myEnsureFirstSymbolsMatch) {
    while (nameIndex < nameLen && name.charAt(nameIndex) == '_') {
      nameIndex++;
    }
    if (patternLen == 0 || nameIndex >= nameLen)     return false;
    if (StringUtil.toLowerCase(name.charAt(nameIndex)) != pattern.charAt(0))     return false;
    nameIndex++;
    patternIndex++;
  }
  while (patternIndex < patternLen) {
    char c=pattern.charAt(patternIndex++);
    while (true) {
      if (nameIndex >= nameLen)       return false;
      if (StringUtil.toLowerCase(name.charAt(nameIndex++)) == c)       break;
    }
  }
  return true;
}
