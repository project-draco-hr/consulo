{
  if (startElement == null || endElement == null) {
    myStartElement=myEndElement=null;
    return;
  }
  LOG.assertTrue(startElement.isValid());
  LOG.assertTrue(endElement == startElement || endElement.isValid());
  LOG.assertTrue(endElement == startElement || startElement.getContainingFile() == endElement.getContainingFile(),"Both elements must be from the same file");
  Project project=startElement.getProject();
  myStartElement=SmartPointerManager.getInstance(project).createSmartPsiElementPointer(startElement);
  myEndElement=endElement == startElement ? null : SmartPointerManager.getInstance(project).createSmartPsiElementPointer(endElement);
}
