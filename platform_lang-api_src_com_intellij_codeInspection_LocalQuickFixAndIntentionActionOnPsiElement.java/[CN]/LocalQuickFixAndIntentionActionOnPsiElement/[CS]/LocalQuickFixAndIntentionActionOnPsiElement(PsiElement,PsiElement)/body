{
  if (startElement == null || endElement == null) {
    myStartElement=myEndElement=null;
    return;
  }
  LOG.assertTrue(startElement.isValid());
  LOG.assertTrue(endElement == startElement || endElement.isValid());
  PsiFile containingFile=startElement.getContainingFile();
  LOG.assertTrue(endElement == startElement || containingFile == endElement.getContainingFile());
  myStartElement=SmartPointerManager.getInstance(containingFile.getProject()).createSmartPsiElementPointer(startElement);
  myEndElement=endElement == startElement ? null : SmartPointerManager.getInstance(containingFile.getProject()).createSmartPsiElementPointer(endElement);
}
