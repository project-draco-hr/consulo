{
  if (name == null)   return Collections.emptyList();
  if (checkBases) {
    Map<String,List<Pair<PsiMember,PsiSubstitutor>>> allMethodsMap=getMap(aClass,type);
    List<Pair<PsiMember,PsiSubstitutor>> list=allMethodsMap.get(name);
    if (list == null)     return Collections.emptyList();
    List<PsiMember> ret=new ArrayList<PsiMember>(list.size());
    for (    final Pair<PsiMember,PsiSubstitutor> info : list) {
      ret.add(info.getFirst());
    }
    return ret;
  }
 else {
    PsiMember[] members=null;
switch (type) {
case METHOD:
      members=aClass.getMethods();
    break;
case CLASS:
  members=aClass.getInnerClasses();
break;
case FIELD:
members=aClass.getFields();
break;
}
List<PsiMember> list=new ArrayList<PsiMember>();
for (PsiMember member : members) {
if (name.equals(member.getName())) {
list.add(member);
}
}
return list;
}
}
