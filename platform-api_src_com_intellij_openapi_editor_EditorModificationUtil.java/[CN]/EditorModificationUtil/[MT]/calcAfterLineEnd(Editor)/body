{
  Document document=editor.getDocument();
  int columnNumber=editor.getCaretModel().getLogicalPosition().column;
  int lineNumber=editor.getCaretModel().getLogicalPosition().line;
  if (lineNumber >= document.getLineCount()) {
    return columnNumber;
  }
  int lineEndOffset=document.getLineEndOffset(lineNumber);
  int lineEndColumnNumber=editor.offsetToLogicalPosition(lineEndOffset).column;
  return columnNumber - lineEndColumnNumber;
}
