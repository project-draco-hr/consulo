{
  assertIsDispatchThread();
  int textLength=myDocument.getTextLength();
  if (startOffset > endOffset || startOffset >= textLength || endOffset < 0) {
    return;
  }
  int startLine=myDocument.getLineNumber(Math.max(0,startOffset));
  int endLine=myDocument.getLineNumber(Math.min(textLength,endOffset));
  myTextLayoutCache.invalidateLines(startLine,endLine);
  mySizeManager.invalidateRange(startOffset,endOffset);
}
