{
  if (!myUseProcessStdIn) {
    beforeExecution(consoleView);
  }
  String text=((LanguageConsoleImpl)consoleView).prepareExecuteAction(myAddToHistory && !myUseProcessStdIn,myPreserveMarkup,true);
  ((UndoManagerImpl)UndoManager.getInstance(consoleView.getProject())).invalidateActionsFor(DocumentReferenceManager.getInstance().create(consoleView.getCurrentEditor().getDocument()));
  if (myUseProcessStdIn) {
    consoleView.print(text,ConsoleViewContentType.USER_INPUT);
    consoleView.print("\n",ConsoleViewContentType.USER_INPUT);
  }
 else {
    addToCommandHistoryAndExecute(consoleView,text);
  }
}
