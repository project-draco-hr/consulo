{
  EditorEx editor=myConsole.getConsoleEditor();
  boolean enabled=!editor.isRendererMode() && isEnabled() && (myExecuteActionHandler.isEmptyCommandExecutionAllowed() || !StringUtil.isEmptyOrSpaces(editor.getDocument().getCharsSequence()));
  if (enabled) {
    Lookup lookup=LookupManager.getActiveLookup(editor);
    enabled=lookup == null || !lookup.isCompletion() || lookup.getCurrentItem() == null;
  }
  e.getPresentation().setEnabled(enabled);
}
