{
  final JRootPane rootPane=getRootPane();
  myScreen=new FlatWelcomeScreen(this);
  final IdeGlassPaneImpl glassPane=new IdeGlassPaneImpl(rootPane);
  setGlassPane(glassPane);
  glassPane.setVisible(false);
  setContentPane(myScreen.getWelcomePanel());
  setDefaultTitle();
  AppUIUtil.updateWindowIcon(this);
  setSize(getDefaultWindowSize());
  setResizable(false);
  Point location=DimensionService.getInstance().getLocationNoRealKey(WelcomeFrame.DIMENSION_KEY);
  Rectangle screenBounds=ScreenUtil.getScreenRectangle(location != null ? location : new Point(0,0));
  setLocation(new Point(screenBounds.x + (screenBounds.width - getWidth()) / 2,screenBounds.y + (screenBounds.height - getHeight()) / 3));
  ProjectManager.getInstance().addProjectManagerListener(new ProjectManagerAdapter(){
    @Override public void projectOpened(    Project project){
      Disposer.dispose(FlatWelcomeFrame.this);
    }
  }
,this);
  if (NotificationsManagerImpl.newEnabled()) {
    myBalloonLayout=new WelcomeBalloonLayoutImpl(rootPane,JBUI.insets(8),myScreen.getMainWelcomePanel().myEventListener,myScreen.getMainWelcomePanel().myEventLocation);
  }
 else {
    myBalloonLayout=new BalloonLayoutImpl(rootPane,JBUI.insets(8));
  }
  WelcomeFrame.setupCloseAction(this);
  MnemonicHelper.init(this);
  Disposer.register(ApplicationManager.getApplication(),this);
}
