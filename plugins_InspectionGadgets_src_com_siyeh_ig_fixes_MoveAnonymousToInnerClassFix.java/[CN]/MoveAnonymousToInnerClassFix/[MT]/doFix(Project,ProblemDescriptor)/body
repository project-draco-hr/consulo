{
  final PsiElement nameElement=descriptor.getPsiElement();
  final PsiAnonymousClass aClass=(PsiAnonymousClass)nameElement.getParent();
  final JavaRefactoringActionHandlerFactory factory=JavaRefactoringActionHandlerFactory.getInstance();
  final RefactoringActionHandler anonymousToInner=factory.createAnonymousToInnerHandler();
  final DataManager dataManager=DataManager.getInstance();
  final DataContext dataContext=dataManager.getDataContext();
  anonymousToInner.invoke(project,new PsiElement[]{aClass},dataContext);
}
