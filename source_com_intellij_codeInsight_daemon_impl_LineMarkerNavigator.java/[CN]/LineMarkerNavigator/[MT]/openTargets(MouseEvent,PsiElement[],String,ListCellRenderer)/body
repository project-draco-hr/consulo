{
  if (targets.length == 0)   return;
  final Project project=targets[0].getProject();
  if (targets.length == 1) {
    PsiElement target=targets[0].getNavigationElement();
    PsiFile file=target.getContainingFile();
    OpenFileDescriptor descriptor=new OpenFileDescriptor(project,file.getVirtualFile(),target.getTextOffset());
    FileEditorManager.getInstance(project).openTextEditor(descriptor,true);
  }
 else {
    final JList list=new JList(targets);
    list.setCellRenderer(listRenderer);
    ListPopup listPopup=new ListPopup(title,list,new Runnable(){
      public void run(){
        if (list.getSelectedIndex() < 0)         return;
        PsiElement selected=(PsiElement)list.getSelectedValue();
        LOG.assertTrue(selected.isValid());
        PsiElement element=selected.getNavigationElement();
        final PsiFile file=element.getContainingFile();
        OpenFileDescriptor descriptor=new OpenFileDescriptor(project,file.getVirtualFile(),element.getTextOffset());
        FileEditorManager.getInstance(project).openTextEditor(descriptor,true);
      }
    }
,project);
    final MouseEvent mouseEvent=e;
    Point p=new Point(mouseEvent.getPoint());
    SwingUtilities.convertPointToScreen(p,mouseEvent.getComponent());
    listPopup.show(p.x,p.y);
  }
}
