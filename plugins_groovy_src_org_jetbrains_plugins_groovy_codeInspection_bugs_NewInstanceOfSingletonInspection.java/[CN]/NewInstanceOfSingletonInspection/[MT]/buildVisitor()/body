{
  return new BaseInspectionVisitor(){
    @Override public void visitNewExpression(    GrNewExpression newExpression){
      super.visitNewExpression(newExpression);
      final GrCodeReferenceElement refElement=newExpression.getReferenceElement();
      if (refElement == null)       return;
      if (newExpression.getArrayDeclaration() != null)       return;
      final PsiElement resolved=refElement.resolve();
      if (resolved instanceof GrTypeDefinition && PsiClassCategory.hasAnnotation((GrTypeDefinition)resolved,GroovyCommonClassNames.GROOVY_LANG_SINGLETON)) {
        registerError(newExpression,GroovyInspectionBundle.message("new.instance.of.singleton"));
      }
    }
  }
;
}
