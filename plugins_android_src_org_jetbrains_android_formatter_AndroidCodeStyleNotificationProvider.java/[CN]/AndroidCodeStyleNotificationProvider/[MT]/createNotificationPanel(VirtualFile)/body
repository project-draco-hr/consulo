{
  if (file.getFileType() != XmlFileType.INSTANCE) {
    return null;
  }
  final Module module=ModuleUtilCore.findModuleForFile(file,myProject);
  if (module == null) {
    return null;
  }
  final AndroidFacet facet=AndroidFacet.getInstance(module);
  if (facet == null) {
    return null;
  }
  final VirtualFile parent=file.getParent();
  final VirtualFile resDir=parent != null ? parent.getParent() : null;
  if (resDir == null || !facet.getLocalResourceManager().isResourceDir(resDir)) {
    return null;
  }
  final CodeStyleSettings settings=CodeStyleSettingsManager.getSettings(myProject);
  final AndroidXmlCodeStyleSettings androidSettings=AndroidXmlCodeStyleSettings.getInstance(settings);
  if (androidSettings.USE_CUSTOM_SETTINGS) {
    return null;
  }
  if (NotificationsConfigurationImpl.getSettings(ANDROID_XML_CODE_STYLE_NOTIFICATION_GROUP).getDisplayType() == NotificationDisplayType.NONE) {
    return null;
  }
  NotificationsConfiguration.getNotificationsConfiguration().register(ANDROID_XML_CODE_STYLE_NOTIFICATION_GROUP,NotificationDisplayType.BALLOON,false);
  return new MyPanel();
}
