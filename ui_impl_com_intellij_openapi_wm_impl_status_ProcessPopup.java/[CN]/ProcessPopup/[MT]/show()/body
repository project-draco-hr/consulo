{
  final ComponentPopupBuilder builder=JBPopupFactory.getInstance().createComponentPopupBuilder(myRootContent,myActiveFocusedContent);
  builder.addListener(new JBPopupListener(){
    public void onClosed(    final JBPopup popup){
      myProgressPanel.hideProcessPopup();
    }
  }
);
  builder.setMovable(true);
  builder.setResizable(true);
  builder.setTitle(IdeBundle.message("progress.window.title"));
  builder.setDimensionServiceKey("ProcessPopupWindow",true);
  builder.setCancelOnClickOutside(false);
  builder.setRequestFocus(true);
  final IconButton hideButton=new IconButton("Hide",IconLoader.getIcon("/general/hideToolWindow.png"),IconLoader.getIcon("/general/hideToolWindow.png"),IconLoader.getIcon("/general/hideToolWindowInactive.png"));
  builder.setCancelButton(hideButton);
  myPopup=builder.createPopup();
  myPopup.showInCenterOf(myProgressPanel.getRootPane());
}
