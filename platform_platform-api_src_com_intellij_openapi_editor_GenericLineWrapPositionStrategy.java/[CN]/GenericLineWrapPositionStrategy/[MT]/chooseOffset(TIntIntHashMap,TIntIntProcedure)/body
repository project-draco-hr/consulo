{
  if (offset2Weight.isEmpty()) {
    return -1;
  }
  final int[] resultingWeight=new int[1];
  final int[] resultingOffset=new int[1];
  offset2Weight.forEachEntry(new TIntIntProcedure(){
    @Override public boolean execute(    int offset,    int weight){
      if (weight > resultingWeight[0]) {
        resultingWeight[0]=weight;
        resultingOffset[0]=offset;
      }
 else       if (weight == resultingWeight[0] && comparator.execute(offset,resultingOffset[0])) {
        resultingOffset[0]=offset;
      }
      return true;
    }
  }
);
  return resultingOffset[0];
}
