{
  final ActionCallback callback=new ActionCallback();
  final Update update=new Update(this){
    public void run(){
      if (configurable == null) {
        myTree.getSelectionModel().clearSelection();
        myContext.fireSelected(null,OptionsTree.this);
      }
 else {
        final EditorNode editorNode=myConfigurable2Node.get(configurable);
        FilteringTreeStructure.Node editorUiNode=myBuilder.getVisibleNodeFor(editorNode);
        if (!myBuilder.getSelectedElements().contains(editorUiNode)) {
          myBuilder.select(editorUiNode,new Runnable(){
            public void run(){
              fireSelected(configurable,callback);
            }
          }
);
        }
 else {
          myBuilder.scrollSelectionToVisible(new Runnable(){
            public void run(){
              fireSelected(configurable,callback);
            }
          }
,false);
        }
      }
    }
    @Override public void setRejected(){
      super.setRejected();
      callback.setRejected();
    }
  }
;
  mySelection.queue(update);
  return callback;
}
