{
  if (!EventQueue.isDispatchThread()) {
    EventQueue.invokeLater(new Runnable(){
      public void run(){
        updateBuildFile(file);
      }
    }
);
  }
 else {
    final Project project=file.getProject();
    if (project.isDisposed()) {
      return;
    }
    final AntConfiguration antConfiguration=AntConfiguration.getInstance(project);
    for (    final AntBuildFile buildFile : antConfiguration.getBuildFiles()) {
      if (file.equals(buildFile.getAntFile())) {
synchronized (myDirtyFiles) {
          myDirtyFiles.add(buildFile);
        }
        myAlarm.cancelAllRequests();
        myAlarm.addRequest(new Runnable(){
          public void run(){
            AntBuildFile[] files=null;
synchronized (myDirtyFiles) {
              if (myDirtyFiles.size() > 0) {
                files=myDirtyFiles.toArray(new AntBuildFile[myDirtyFiles.size()]);
                myDirtyFiles.clear();
              }
            }
            if (files != null) {
              for (              final AntBuildFile dirtyFile : files) {
                antConfiguration.updateBuildFile(dirtyFile);
              }
            }
          }
        }
,300);
        break;
      }
    }
  }
}
