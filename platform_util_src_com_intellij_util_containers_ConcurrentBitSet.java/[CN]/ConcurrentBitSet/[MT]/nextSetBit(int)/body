{
  if (fromIndex < 0) {
    throw new IndexOutOfBoundsException("bitIndex < 0: " + fromIndex);
  }
  int arrayIndex;
  AtomicLongArray array=null;
  for (arrayIndex=arrayIndex(fromIndex); arrayIndex < arrays.length() && (array=arrays.get(arrayIndex)) == null; arrayIndex++)   ;
  if (array == null) {
    return -1;
  }
  int wordIndexInArray=wordIndexInArray(fromIndex);
  long word=array.get(wordIndexInArray) & (WORD_MASK << fromIndex);
  while (true) {
    if (word != 0) {
      return ((1 << arrayIndex) - 1 + wordIndexInArray) * BITS_PER_WORD + Long.numberOfTrailingZeros(word);
    }
    if (++wordIndexInArray == array.length()) {
      wordIndexInArray=0;
      for (++arrayIndex; arrayIndex != arrays.length() && (array=arrays.get(arrayIndex)) == null; arrayIndex++)       ;
      if (array == null) {
        return -1;
      }
    }
    word=array.get(wordIndexInArray);
  }
}
