{
  invalidate();
  if (value instanceof CheckedTreeNode) {
    CheckedTreeNode node=(CheckedTreeNode)value;
    NodeState state=getNodeStatus(node);
    myCheckbox.setVisible(true);
    myCheckbox.setSelected(state != NodeState.CLEAR);
    myCheckbox.setEnabled(node.isEnabled() && state != NodeState.PARTIAL);
    myCheckbox.setBackground(null);
    setBackground(null);
    myTextRenderer.getTreeCellRendererComponent(tree,value,selected,expanded,leaf,row,hasFocus);
    customizeCellRenderer(tree,value,selected,expanded,leaf,row,hasFocus);
  }
 else {
    myCheckbox.setVisible(false);
  }
  revalidate();
  return this;
}
