{
  TreeNode parentNode=node.getParent();
  if (!(parentNode instanceof CheckedTreeNode))   return;
  CheckedTreeNode parent=(CheckedTreeNode)parentNode;
  if (!checked && isAllChildrenUnchecked(parent)) {
    changeNodeState(parent,false);
    adjustParents(parent,false);
  }
 else   if (checked && isAllChildrenChecked(parent)) {
    changeNodeState(parent,true);
    adjustParents(parent,true);
  }
}
