{
  ComponentPopupBuilder builder=JBPopupFactory.getInstance().createComponentPopupBuilder(component,null);
  builder.setResizable(true).setMovable(true).setDimensionServiceKey(project,FULL_VALUE_POPUP_DIMENSION_KEY,false).setRequestFocus(false);
  if (callback != null) {
    builder.setCancelCallback(new Computable<Boolean>(){
      @Override public Boolean compute(){
        callback.setObsolete();
        return true;
      }
    }
);
  }
  return builder.createPopup();
}
