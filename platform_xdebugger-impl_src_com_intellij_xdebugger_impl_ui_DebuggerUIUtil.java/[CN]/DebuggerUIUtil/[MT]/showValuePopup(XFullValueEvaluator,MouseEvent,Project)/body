{
  EditorTextField textArea=new EditorTextField(EditorFactory.getInstance().createDocument("Evaluating..."),project,PlainTextFileType.INSTANCE,true);
  textArea.setBackground(HintUtil.INFORMATION_COLOR);
  final FullValueEvaluationCallbackImpl callback=new FullValueEvaluationCallbackImpl(textArea);
  text.startEvaluation(callback);
  final JScrollPane component=ScrollPaneFactory.createScrollPane(textArea);
  final Dimension frameSize=WindowManager.getInstance().getFrame(project).getSize();
  Dimension size=DimensionService.getInstance().getSize(FULL_VALUE_POPUP_DIMENSION_KEY,project);
  if (size == null) {
    size=new Dimension(frameSize.width / 2,frameSize.height / 2);
  }
  component.setPreferredSize(size);
  component.setBorder(null);
  JBPopupFactory.getInstance().createComponentPopupBuilder(component,null).setResizable(true).setMovable(true).setDimensionServiceKey(project,FULL_VALUE_POPUP_DIMENSION_KEY,false).setRequestFocus(false).setCancelCallback(new Computable<Boolean>(){
    @Override public Boolean compute(){
      callback.setObsolete();
      return true;
    }
  }
).createPopup().show(new RelativePoint(event.getComponent(),new Point(event.getX() - size.width,event.getY() - size.height)));
}
