{
  return ApplicationManager.getApplication().runReadAction(new Computable<List<TextRange>>(){
    @Override public List<TextRange> compute(){
      List<TextRange> ranges=getTextRangeForMethod(worker,previousLineResult);
      if (ranges == null)       return null;
      final List<TextRange> result=new ArrayList<TextRange>();
      for (      TextRange range : ranges) {
        result.add(new TextRange(document.getLineNumber(range.getStartOffset()),document.getLineNumber(range.getEndOffset())));
      }
      return result;
    }
  }
);
}
