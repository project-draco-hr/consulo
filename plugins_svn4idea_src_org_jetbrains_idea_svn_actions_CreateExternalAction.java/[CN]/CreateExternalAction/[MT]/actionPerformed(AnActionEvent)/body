{
  final ActionExecuteHelper helper=new ActionExecuteHelper();
  checkState(e,helper);
  if (!helper.isOk())   return;
  final DataContext dc=e.getDataContext();
  final Project project=CommonDataKeys.PROJECT.getData(dc);
  final VirtualFile vf=PlatformDataKeys.VIRTUAL_FILE.getData(dc);
  final SelectCreateExternalTargetDialog dialog=new SelectCreateExternalTargetDialog(project,vf);
  dialog.show();
  if (DialogWrapper.OK_EXIT_CODE != dialog.getExitCode())   return;
  final String url=dialog.getSelectedURL();
  final boolean checkout=dialog.isCheckout();
  final String target=dialog.getLocalTarget().trim();
  ProgressManager.getInstance().run(new Task.Backgroundable(project,"Creating External",true,null){
    @Override public void run(    @NotNull ProgressIndicator indicator){
      doInBackground(project,vf,url,checkout,target);
    }
  }
);
}
