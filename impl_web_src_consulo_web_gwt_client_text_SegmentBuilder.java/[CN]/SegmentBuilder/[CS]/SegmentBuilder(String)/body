{
  myText=text;
  int otherSimpleOffset=-1;
  for (int i=0; i < text.length(); i++) {
    char c=text.charAt(i);
switch (c) {
case '&':
case '<':
case '>':
case '\"':
      if (otherSimpleOffset != -1) {
        mySegments.add(new SimpleSegment(new GwtTextRange(otherSimpleOffset,i),text.substring(otherSimpleOffset,i)));
        otherSimpleOffset=-1;
      }
    mySegments.add(new ReplaceSegment(new GwtTextRange(i,i + 1),mapChar(c)));
  break;
default :
if (otherSimpleOffset == -1) {
  otherSimpleOffset=i;
}
break;
}
}
if (otherSimpleOffset != -1) {
mySegments.add(new SimpleSegment(new GwtTextRange(otherSimpleOffset,text.length()),text.substring(otherSimpleOffset,text.length())));
}
}
