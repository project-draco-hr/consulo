{
  List<IgnoredFileBean> result=new ArrayList<IgnoredFileBean>();
  for (  VirtualFile fileToIgnore : myFilesToIgnore) {
    String path=ChangesUtil.getProjectRelativePath(myProject,new File(fileToIgnore.getPath()));
    if (path != null) {
      path=FileUtil.toSystemIndependentName(path);
      if (fileToIgnore.isDirectory()) {
        result.add(IgnoredBeanFactory.ignoreUnderDirectory(path,myProject));
      }
 else       if (!onlyDirs) {
        result.add(IgnoredBeanFactory.ignoreFile(path,myProject));
      }
    }
  }
  return result.toArray(new IgnoredFileBean[result.size()]);
}
