{
  final Element splitterElement=element.getChild("splitter");
  if (splitterElement != null) {
    LOG.info("splitter");
    final JPanel res=new JPanel(new BorderLayout());
    final boolean orientation="vertical".equals(splitterElement.getAttributeValue("split-orientation"));
    final float proportion=Float.valueOf(splitterElement.getAttributeValue("split-proportion")).floatValue();
    final Element first=splitterElement.getChild("split-first");
    final Element second=splitterElement.getChild("split-second");
    final Splitter splitter=new Splitter(orientation,proportion,0.1f,0.9f);
    splitter.setFirstComponent(readExternalPanel(first));
    splitter.setSecondComponent(readExternalPanel(second));
    res.add(splitter,BorderLayout.CENTER);
    return res;
  }
 else {
    final Element leaf=element.getChild("leaf");
    if (leaf != null) {
      final EditorWindow window=new EditorWindow(this);
      try {
        window.myInsideTabChange++;
        final List<Element> children=leaf.getChildren("file");
        VirtualFile currentFile=null;
        for (        final Element file : children) {
          final HistoryEntry entry=new HistoryEntry(getManager().myProject,file.getChild(HistoryEntry.TAG));
          getManager().openFileImpl3(window,entry.myFile,false,entry);
          if (getManager().isFileOpen(entry.myFile)) {
            window.setFilePinned(entry.myFile,Boolean.valueOf(file.getAttributeValue("pinned")).booleanValue());
            if (Boolean.valueOf(file.getAttributeValue("current-in-tab")).booleanValue()) {
              currentFile=entry.myFile;
            }
            if (Boolean.valueOf(file.getAttributeValue("current")).booleanValue()) {
              setCurrentWindow(window,false);
            }
          }
        }
        if (currentFile != null) {
          final EditorComposite editor=window.findFileComposite(currentFile);
          if (editor != null) {
            window.setSelectedEditor(editor,true);
          }
        }
      }
 catch (      InvalidDataException e) {
      }
 finally {
        window.myInsideTabChange--;
      }
      return window.myPanel;
    }
  }
  return null;
}
