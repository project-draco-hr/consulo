{
  Map<File,RootDescriptor> rootToDescriptorMap=ROOT_DESCRIPTOR_MAP.get(context);
  if (rootToDescriptorMap == null) {
    rootToDescriptorMap=new HashMap<File,RootDescriptor>();
    ROOT_DESCRIPTOR_MAP.set(context,rootToDescriptorMap);
  }
  Map<JpsModule,List<RootDescriptor>> moduleToRootMap=MODULE_ROOT_MAP.get(context);
  if (moduleToRootMap == null) {
    moduleToRootMap=new HashMap<JpsModule,List<RootDescriptor>>();
    MODULE_ROOT_MAP.set(context,moduleToRootMap);
  }
  final RootDescriptor d=rootToDescriptorMap.get(root);
  if (d != null) {
    return d;
  }
  List<RootDescriptor> moduleRoots=moduleToRootMap.get(module);
  if (moduleRoots == null) {
    moduleRoots=new ArrayList<RootDescriptor>();
    moduleToRootMap.put(module,moduleRoots);
  }
  final RootDescriptor descriptor=new RootDescriptor(module.getName(),root,new ModuleBuildTarget(module,JavaModuleBuildTargetType.getInstance(isTestRoot)),isTestRoot,true,true);
  rootToDescriptorMap.put(root,descriptor);
  moduleRoots.add(descriptor);
  return descriptor;
}
