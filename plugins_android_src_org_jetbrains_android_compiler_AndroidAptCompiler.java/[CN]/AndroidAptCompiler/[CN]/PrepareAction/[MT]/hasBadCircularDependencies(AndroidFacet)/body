{
  final List<AndroidFacet> dependencies=AndroidSdkUtils.getAllAndroidDependencies(facet.getModule(),true);
  final Manifest manifest=facet.getManifest();
  if (manifest == null) {
    return false;
  }
  final String aPackage=manifest.getPackage().getValue();
  if (aPackage == null || aPackage.length() == 0) {
    return false;
  }
  for (  AndroidFacet depFacet : dependencies) {
    final Manifest depManifest=depFacet.getManifest();
    if (depManifest != null) {
      if (!aPackage.equals(depManifest.getPackage().getValue())) {
        continue;
      }
    }
    final List<AndroidFacet> depDependencies=AndroidSdkUtils.getAllAndroidDependencies(depFacet.getModule(),true);
    if (depDependencies.contains(facet) && dependencies.contains(depFacet) && depFacet.getModule().getName().compareTo(facet.getModule().getName()) < 0) {
      return true;
    }
  }
  return false;
}
