{
  if (items != null && items.length > 0) {
    context.getProgressIndicator().setText("Generating " + AndroidUtils.R_JAVA_FILENAME + "...");
    Computable<GenerationItem[]> computation=new Computable<GenerationItem[]>(){
      public GenerationItem[] compute(){
        if (context.getProject().isDisposed()) {
          return EMPTY_GENERATION_ITEM_ARRAY;
        }
        return doGenerate(context,items);
      }
    }
;
    GenerationItem[] generationItems=computation.compute();
    List<VirtualFile> generatedVFiles=new ArrayList<VirtualFile>();
    for (    GenerationItem item : generationItems) {
      File generatedFile=((AptGenerationItem)item).myGeneratedFile;
      if (generatedFile != null) {
        CompilerUtil.refreshIOFile(generatedFile);
        VirtualFile generatedVFile=LocalFileSystem.getInstance().findFileByIoFile(generatedFile);
        if (generatedVFile != null) {
          generatedVFiles.add(generatedVFile);
        }
      }
    }
    if (context instanceof CompileContextEx) {
      ((CompileContextEx)context).markGenerated(generatedVFiles);
    }
    return generationItems;
  }
  return EMPTY_GENERATION_ITEM_ARRAY;
}
