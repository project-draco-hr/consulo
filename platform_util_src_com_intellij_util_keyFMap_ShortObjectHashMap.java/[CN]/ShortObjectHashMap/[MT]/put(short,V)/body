{
  V previous=null;
  int index=insertionIndex(key);
  boolean isNewMapping=true;
  if (index < 0) {
    index=-index - 1;
    previous=_values[index];
    isNewMapping=false;
  }
  byte previousState=_states[index];
  _set[index]=key;
  _states[index]=FULL;
  _values[index]=value;
  if (isNewMapping) {
    postInsertHook(previousState == FREE);
  }
  return previous;
}
