{
  ApplicationManager.getApplication().assertIsDispatchThread();
  RangeHighlighterImpl segmentHighlighter=new RangeHighlighterImpl(this,startOffset,endOffset,layer,targetArea,textProperties,isPersistent);
  myHighlighters.add(segmentHighlighter);
  myCachedHighlighters=null;
  myHighlighterList.addSegmentHighlighter(segmentHighlighter);
  fireSegmentHighlighterChanged(segmentHighlighter);
  return segmentHighlighter;
}
