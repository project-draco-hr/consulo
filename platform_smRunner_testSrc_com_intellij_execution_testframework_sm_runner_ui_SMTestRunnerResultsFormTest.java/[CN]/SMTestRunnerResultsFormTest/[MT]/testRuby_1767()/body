{
  TestConsoleProperties.HIDE_PASSED_TESTS.set(myConsoleProperties,true);
  myEventsProcessor.onStartTesting();
  myEventsProcessor.onSuiteStarted("suite",null);
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestStarted("test_failed",null);
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestFailure("test_failed","","",false,null,null);
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestFinished("test_failed",10);
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestStarted("test",null);
  myResultsViewer.performUpdate();
  assertEquals(2,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
  myEventsProcessor.onTestFinished("test",10);
  assertEquals(2,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
  myEventsProcessor.onSuiteFinished("suite");
  myEventsProcessor.onFinishTesting();
  assertEquals(1,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
}
