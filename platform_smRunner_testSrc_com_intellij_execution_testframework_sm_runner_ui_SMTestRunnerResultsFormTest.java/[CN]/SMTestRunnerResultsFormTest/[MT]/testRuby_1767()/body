{
  TestConsoleProperties.HIDE_PASSED_TESTS.set(myConsoleProperties,true);
  myEventsProcessor.onStartTesting();
  myEventsProcessor.onSuiteStarted(new TestSuiteStartedEvent("suite",null));
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestStarted(new TestStartedEvent("test_failed",null));
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestFailure(new TestFailedEvent("test_failed","","",false,null,null));
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestFinished(new TestFinishedEvent("test_failed",10));
  myResultsViewer.performUpdate();
  myEventsProcessor.onTestStarted(new TestStartedEvent("test",null));
  myResultsViewer.performUpdate();
  assertEquals(2,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
  myEventsProcessor.onTestFinished(new TestFinishedEvent("test",10));
  assertEquals(2,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
  myEventsProcessor.onSuiteFinished(new TestSuiteFinishedEvent("suite"));
  myEventsProcessor.onFinishTesting();
  assertEquals(1,myTreeModel.getChildCount(myTreeModel.getChild(myTreeModel.getRoot(),0)));
}
