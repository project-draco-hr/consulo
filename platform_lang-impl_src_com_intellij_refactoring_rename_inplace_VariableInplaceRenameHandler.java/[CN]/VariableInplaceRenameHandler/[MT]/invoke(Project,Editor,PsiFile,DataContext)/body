{
  PsiElement element=PsiElementRenameHandler.getElement(dataContext);
  if (element == null) {
    if (LookupManager.getActiveLookup(editor) != null) {
      element=PsiTreeUtil.getParentOfType(file.findElementAt(editor.getCaretModel().getOffset()),PsiNamedElement.class);
      if (element == null)       return;
    }
 else {
      return;
    }
  }
  editor.getScrollingModel().scrollToCaret(ScrollType.MAKE_VISIBLE);
  if (checkAvailable(element,editor,dataContext)) {
    doRename(element,editor,dataContext);
  }
}
