{
  final DataContext defaultContext=DataManager.getInstance().getDataContext();
  return new DataContext(){
    @Nullable public Object getData(    @NonNls String dataId){
      if (PlatformDataKeys.EDITOR.is(dataId)) {
        return getEditor();
      }
      if (PlatformDataKeys.PROJECT.is(dataId)) {
        return getProject();
      }
      if (LangDataKeys.PSI_FILE.is(dataId)) {
        return getFile();
      }
      if (LangDataKeys.PSI_ELEMENT.is(dataId)) {
        return getFile().findElementAt(getEditor().getCaretModel().getOffset());
      }
      return defaultContext.getData(dataId);
    }
  }
;
}
