{
  final ProjectData data=suite.getCoverageData();
  if (data == null) {
    return null;
  }
  return new Runnable(){
    public void run(){
      final Project project=getProject();
      final ProjectRootManager rootManager=ProjectRootManager.getInstance(project);
      final VirtualFile[] modulesContentRoots=dataManager.doInReadActionIfProjectOpen(new Computable<VirtualFile[]>(){
        public VirtualFile[] compute(){
          return rootManager.getContentRoots();
        }
      }
);
      if (modulesContentRoots == null) {
        return;
      }
      for (      VirtualFile root : modulesContentRoots) {
        annotate(root,suite,dataManager,data,project,new Annotator(){
          public void annotateSourceDirectory(          final String dirPath,          final DirCoverageInfo info){
            myDirCoverageInfos.put(dirPath,info);
          }
          public void annotateTestDirectory(          final String dirPath,          final DirCoverageInfo info){
            myTestDirCoverageInfos.put(dirPath,info);
          }
          public void annotateFile(          @NotNull final String filePath,          @NotNull final FileCoverageInfo info){
            myFileCoverageInfos.put(filePath,info);
          }
        }
);
      }
      dataManager.triggerPresentationUpdate();
    }
  }
;
}
