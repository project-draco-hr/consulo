{
  int braceLevel=0;
  while (true) {
    if (builder.eof()) {
      return false;
    }
    final IElementType type=builder.getTokenType();
    if (braceLevel == 0 && until.contains(type)) {
      return true;
    }
    if (GroovyTokenTypes.mLCURLY == type) {
      braceLevel++;
    }
 else     if (GroovyTokenTypes.mRCURLY == type) {
      braceLevel--;
    }
    builder.advanceLexer();
  }
}
