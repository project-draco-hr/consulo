{
  Runnable showErrorAction=new Runnable(){
    public void run(){
      if (suggestOffline) {
        int rc=Messages.showDialog(message,title,new String[]{CommonBundle.getOkButtonText(),"Work Offline"},0,Messages.getErrorIcon());
        if (rc == 1) {
          setOffline(true);
        }
      }
 else {
        Messages.showErrorDialog(message,title);
      }
    }
  }
;
  if (ApplicationManager.getApplication().isDispatchThread()) {
    showErrorAction.run();
  }
 else {
    ApplicationManager.getApplication().invokeLater(showErrorAction);
  }
}
