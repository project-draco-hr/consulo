{
  MetaModel metaModel=getClientProperty(MODEL_KEY);
  if (metaModel == null) {
    ModuleProvider moduleProvider=getRoot().getClientProperty(ModelParser.MODULE_KEY);
    MetaManager metaManager=ViewsMetaManager.getInstance(moduleProvider.getProject());
    PsiClass viewClass=ChooseClassDialog.findClass(moduleProvider.getModule(),getViewClass());
    while (viewClass != null) {
      metaModel=metaManager.getModelByTarget(viewClass.getQualifiedName());
      if (metaModel != null) {
        break;
      }
      viewClass=viewClass.getSuperClass();
    }
    if (metaModel == null) {
      metaModel=myMetaModel;
    }
    setClientProperty(MODEL_KEY,metaModel);
  }
  return metaModel;
}
