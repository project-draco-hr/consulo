{
  if (transferableDatas.size() > 0) {
    int size=0;
    for (    TextBlockTransferableData data : transferableDatas) {
      size+=data.getOffsetCount();
    }
    int[] offsets=new int[size];
    int index=0;
    for (    TextBlockTransferableData data : transferableDatas) {
      index=data.getOffsets(offsets,index);
    }
    text=StringUtil.convertLineSeparators(text,newSeparator,offsets);
    index=0;
    for (    TextBlockTransferableData data : transferableDatas) {
      index=data.setOffsets(offsets,index);
    }
    return text;
  }
 else {
    return StringUtil.convertLineSeparators(text,newSeparator);
  }
}
