{
  final TextOccurenceProcessor processor=new TextOccurenceProcessor(){
    public boolean execute(    PsiElement element,    int offsetInElement){
      if (element instanceof GrReferenceExpression && name.equals(((GrReferenceExpression)element).getReferenceName()) && ((GrReferenceExpression)element).resolve() == null) {
        return !consumer.process((PsiReference)element);
      }
      return true;
    }
  }
;
  return PsiManager.getInstance(project).getSearchHelper().processElementsWithWord(processor,searchScope,name,UsageSearchContext.IN_CODE,true);
}
