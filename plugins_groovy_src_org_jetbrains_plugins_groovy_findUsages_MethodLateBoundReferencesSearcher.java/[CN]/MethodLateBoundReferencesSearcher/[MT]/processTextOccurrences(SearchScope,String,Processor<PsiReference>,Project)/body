{
  final TextOccurenceProcessor processor=new TextOccurenceProcessor(){
    public boolean execute(    PsiElement element,    int offsetInElement){
      if (!(element instanceof GrReferenceExpression)) {
        return true;
      }
      final GrReferenceExpression ref=(GrReferenceExpression)element;
      if (!name.equals(ref.getReferenceName()) || PsiUtil.isLValue(ref) || ref.resolve() != null) {
        return true;
      }
      return consumer.process((PsiReference)element);
    }
  }
;
  return PsiManager.getInstance(project).getSearchHelper().processElementsWithWord(processor,searchScope,name,UsageSearchContext.IN_CODE,true);
}
