{
  final TextOccurenceProcessor processor=new TextOccurenceProcessor(){
    public boolean execute(    PsiElement element,    int offsetInElement){
      PsiReference ref=element.getReference();
      if (element instanceof GrReferenceExpression && name.equals(((GrReferenceExpression)element).getReferenceName()) && ref != null && ref.resolve() == null && !PsiUtil.isLValue((GroovyPsiElement)element)) {
        if (!consumer.process((PsiReference)element))         return false;
      }
      return true;
    }
  }
;
  return PsiManager.getInstance(project).getSearchHelper().processElementsWithWord(processor,searchScope,name,UsageSearchContext.IN_CODE,true);
}
