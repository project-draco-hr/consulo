{
  if (myEditor.getCaretModel().supportsMultipleCarets()) {
    Collection<Caret> carets=myEditor.getCaretModel().getAllCarets();
    int[] result=new int[carets.size()];
    int i=0;
    for (    Caret caret : carets) {
      result[i++]=caret.getSelectionEnd();
    }
    return result;
  }
 else {
    if (hasSelection()) {
      return new int[]{getSelectionEnd()};
    }
 else     if (!hasBlockSelection() || myBlockSelectionEnds == null) {
      return ArrayUtil.EMPTY_INT_ARRAY;
    }
 else {
      return myBlockSelectionEnds;
    }
  }
}
