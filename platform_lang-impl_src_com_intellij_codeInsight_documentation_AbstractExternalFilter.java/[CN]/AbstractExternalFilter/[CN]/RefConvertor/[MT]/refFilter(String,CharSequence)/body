{
  CharSequence toMatch=StringUtilRt.toUpperCase(read);
  StringBuilder ready=new StringBuilder();
  int prev=0;
  Matcher matcher=mySelector.matcher(toMatch);
  while (matcher.find()) {
    CharSequence before=read.subSequence(prev,matcher.start(1) - 1);
    final CharSequence href=read.subSequence(matcher.start(1),matcher.end(1));
    prev=matcher.end(1) + 1;
    ready.append(before);
    ready.append("\"");
    ready.append(ApplicationManager.getApplication().runReadAction(new Computable<String>(){
      @Override public String compute(){
        return convertReference(root,href.toString());
      }
    }
));
    ready.append("\"");
  }
  ready.append(read,prev,read.length());
  return ready;
}
