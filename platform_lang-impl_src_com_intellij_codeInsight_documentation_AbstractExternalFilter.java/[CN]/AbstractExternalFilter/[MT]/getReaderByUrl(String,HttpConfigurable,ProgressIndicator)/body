{
  if (surl.startsWith(JAR_PROTOCOL)) {
    VirtualFile file=VirtualFileManager.getInstance().findFileByUrl(BrowserUtil.getDocURL(surl));
    if (file == null) {
      return null;
    }
    return new StringReader(VfsUtilCore.loadText(file));
  }
  URL url=BrowserUtil.getURL(surl);
  if (url == null) {
    return null;
  }
  httpConfigurable.prepareURL(url.toString());
  final URLConnection urlConnection=url.openConnection();
  final String contentEncoding=guessEncoding(url);
  final InputStream inputStream=pi != null ? UrlConnectionUtil.getConnectionInputStreamWithException(urlConnection,pi) : urlConnection.getInputStream();
  return contentEncoding != null ? new MyReader(inputStream,contentEncoding) : new MyReader(inputStream);
}
