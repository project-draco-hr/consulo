def _bundle(repo, bases, heads, node, suffix, extranodes=None):
    'create a bundle with the specified revisions as a backup'
    cg = repo.changegroupsubset(bases, heads, 'strip', extranodes)
    backupdir = repo.join('strip-backup')
    if (not os.path.isdir(backupdir)):
        os.mkdir(backupdir)
    name = os.path.join(backupdir, ('%s-%s' % (short(node), suffix)))
    repo.ui.warn((_('saving bundle to %s\n') % name))
    return changegroup.writebundle(cg, name, 'HG10BZ')
