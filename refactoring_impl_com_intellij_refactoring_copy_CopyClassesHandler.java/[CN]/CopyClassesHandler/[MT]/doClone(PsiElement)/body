{
  element=getTopLevelClass(element);
  FeatureUsageTracker.getInstance().triggerFeatureUsed("refactoring.copyClass");
  PsiClass aClass=(PsiClass)element;
  Project project=element.getProject();
  CopyClassDialog dialog=new CopyClassDialog(aClass,null,project,true);
  dialog.setTitle(RefactoringBundle.message("copy.handler.clone.class"));
  dialog.show();
  if (dialog.isOK()) {
    String className=dialog.getClassName();
    PsiDirectory targetDirectory=element.getContainingFile().getContainingDirectory();
    copyClassImpl(className,project,aClass,targetDirectory,RefactoringBundle.message("copy.handler.clone.class"),true);
  }
}
