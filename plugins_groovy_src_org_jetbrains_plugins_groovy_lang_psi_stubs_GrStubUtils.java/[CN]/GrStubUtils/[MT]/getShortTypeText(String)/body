{
  if (text == null) {
    return "";
  }
  int i=text.length();
  while (i - 2 >= 0 && text.charAt(i - 2) == '[' && text.charAt(i - 1) == ']') {
    i-=2;
  }
  return PsiNameHelper.getShortClassName(text.substring(0,i)) + text.substring(i);
}
