{
  if (myRootStep != null) {
    ModuleWizardStep previousStep=null;
    final StepSequence stepSequence=getMode().getSteps(myWizardContext,myModulesProvider);
    if (stepSequence != null) {
      previousStep=stepSequence.getPreviousStep(mySteps.get(step));
      while (previousStep != null && !previousStep.isStepVisible()) {
        previousStep=stepSequence.getPreviousStep(previousStep);
      }
    }
    return previousStep == null ? 0 : mySteps.indexOf(previousStep);
  }
 else {
    return super.getPreviousStep(step);
  }
}
