{
  ModuleWizardStep nextStep=null;
  final StepSequence stepSequence=getSequence();
  if (stepSequence != null) {
    if (myRootStep == mySteps.get(step)) {
      return mySteps.indexOf(stepSequence.getFirstStep());
    }
    nextStep=stepSequence.getNextStep(mySteps.get(step));
    while (nextStep != null && !nextStep.isStepVisible()) {
      nextStep=stepSequence.getNextStep(nextStep);
    }
  }
  return nextStep == null ? step : mySteps.indexOf(nextStep);
}
