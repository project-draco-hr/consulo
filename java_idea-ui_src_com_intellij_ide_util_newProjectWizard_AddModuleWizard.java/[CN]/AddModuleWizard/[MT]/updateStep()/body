{
  final ModuleWizardStep currentStep=getCurrentStepObject();
  currentStep.updateStep();
  super.updateStep();
  updateButtons();
  final JButton nextButton=getNextButton();
  final JButton finishButton=getFinishButton();
  final boolean isLastStep=isLastStep(getCurrentStep());
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (!isShowing()) {
        return;
      }
      final JComponent preferredFocusedComponent=currentStep.getPreferredFocusedComponent();
      if (preferredFocusedComponent != null) {
        preferredFocusedComponent.requestFocus();
      }
 else {
        if (isLastStep) {
          finishButton.requestFocus();
        }
 else {
          nextButton.requestFocus();
        }
      }
      getRootPane().setDefaultButton(isLastStep ? finishButton : nextButton);
    }
  }
);
}
