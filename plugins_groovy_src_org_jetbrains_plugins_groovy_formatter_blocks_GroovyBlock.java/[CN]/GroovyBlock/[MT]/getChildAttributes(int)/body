{
  ASTNode astNode=getNode();
  final PsiElement psiParent=astNode.getPsi();
  if (psiParent instanceof GroovyFileBase) {
    return new ChildAttributes(Indent.getNoneIndent(),null);
  }
  if (psiParent instanceof GrSwitchStatement) {
    List<Block> subBlocks=getSubBlocks();
    if (newChildIndex > 0) {
      Block block=subBlocks.get(newChildIndex - 1);
      if (block instanceof GroovyBlock) {
        PsiElement anchorPsi=((GroovyBlock)block).getNode().getPsi();
        if (anchorPsi instanceof GrCaseSection) {
          for (          GrStatement statement : ((GrCaseSection)anchorPsi).getStatements()) {
            if (statement instanceof GrBreakStatement || statement instanceof GrContinueStatement || statement instanceof GrReturnStatement|| statement instanceof GrThrowStatement) {
              final Indent indent=GroovyIndentProcessor.getSwitchCaseIndent(myContext.getSettings());
              return new ChildAttributes(indent,null);
            }
          }
          int indentSize=myContext.getSettings().getIndentOptions().INDENT_SIZE;
          final int spaces=myContext.getSettings().INDENT_CASE_FROM_SWITCH ? 2 * indentSize : indentSize;
          return new ChildAttributes(Indent.getSpaceIndent(spaces),null);
        }
      }
    }
  }
  if (psiParent instanceof GrCaseLabel) {
    return new ChildAttributes(GroovyIndentProcessor.getSwitchCaseIndent(getContext().getSettings()),null);
  }
  if (psiParent instanceof GrCaseSection) {
    return getSwitchIndent((GrCaseSection)psiParent,newChildIndex);
  }
  if (TokenSets.BLOCK_SET.contains(astNode.getElementType()) || SWITCH_STATEMENT.equals(astNode.getElementType())) {
    return new ChildAttributes(Indent.getNormalIndent(),null);
  }
  if (CASE_SECTION.equals(astNode.getElementType())) {
    return new ChildAttributes(Indent.getNormalIndent(),null);
  }
  if (psiParent instanceof GrBinaryExpression || psiParent instanceof GrConditionalExpression || psiParent instanceof GrCommandArgumentList|| psiParent instanceof GrArgumentList|| psiParent instanceof GrParameterList|| psiParent instanceof GrListOrMap|| psiParent instanceof GrAnnotationArgumentList|| psiParent instanceof GrVariable|| psiParent instanceof GrAssignmentExpression) {
    return new ChildAttributes(Indent.getContinuationWithoutFirstIndent(),null);
  }
  if (psiParent instanceof GrDocComment || psiParent instanceof GrDocTag) {
    return new ChildAttributes(Indent.getSpaceIndent(GroovyIndentProcessor.GDOC_COMMENT_INDENT),null);
  }
  if (psiParent instanceof GrIfStatement || psiParent instanceof GrLoopStatement) {
    return new ChildAttributes(Indent.getNormalIndent(),null);
  }
  if (psiParent instanceof GrLabeledStatement && newChildIndex == 2) {
    final Indent indent=getContext().getGroovySettings().INDENT_LABEL_BLOCKS ? Indent.getLabelIndent() : Indent.getNoneIndent();
    return new ChildAttributes(indent,null);
  }
  return new ChildAttributes(Indent.getNoneIndent(),null);
}
