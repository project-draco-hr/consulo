{
  final AbstractVcs vcs=ProjectLevelVcsManager.getInstance(myProject).getVcsFor(root);
  if (vcs != null) {
    final CommittedChangesProvider committedChangesProvider=vcs.getCommittedChangesProvider();
    if (committedChangesProvider != null) {
      return new CompositeRepositoryLocation(committedChangesProvider,CommittedChangesCache.getInstance(myProject).getLocationCache().getLocation(vcs,root,false));
    }
  }
  return null;
}
