{
  Library.ModifiableModel model=myModelMap != null ? myModelMap.get(library) : library.getModifiableModel();
  LibraryTable.ModifiableModel libTableModel=myLibraryTableModelProvider.compute();
  if (model == null && libTableModel instanceof LibrariesModifiableModel) {
    model=((LibrariesModifiableModel)libTableModel).getLibraryEditor(library).getModel();
  }
  AndroidPlatform platform=AndroidPlatform.parse(library,model,myParsedSdks);
  String libName=library.getName();
  if (libName != null) {
    if (platform != null) {
      myCachedPlatforms.put(libName,platform);
      return true;
    }
 else {
      myCachedPlatforms.remove(libName);
    }
  }
  return false;
}
