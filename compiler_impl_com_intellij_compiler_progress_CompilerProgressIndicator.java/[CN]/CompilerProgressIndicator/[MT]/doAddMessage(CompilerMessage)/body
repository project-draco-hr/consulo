{
  if (IS_UNIT_TEST_MODE || isCanceled()) {
    return;
  }
  final Navigatable navigatable=message.getNavigatable();
  final VirtualFile file=message.getVirtualFile();
  final int type=translateCategory(message.getCategory());
  final String[] text=convertMessage(message);
  ProblemsToolWindow problemsToolWindow=myProblemsToolWindow;
  if (navigatable == null) {
    problemsToolWindow.addMessage(type,text,file,-1,-1,null);
  }
 else {
    final String groupName=file == null ? message.getCategory().getPresentableText() : file.getPresentableUrl();
    problemsToolWindow.addMessage(type,text,groupName,navigatable,message.getExportTextPrefix(),message.getRenderTextPrefix(),file);
  }
}
