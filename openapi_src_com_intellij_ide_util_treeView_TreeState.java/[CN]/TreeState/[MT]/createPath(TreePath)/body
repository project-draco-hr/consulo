{
  final ArrayList<PathElement> result=new ArrayList<PathElement>();
  for (int i=0; i < treePath.getPathCount(); i++) {
    final Object pathComponent=treePath.getPathComponent(i);
    if (pathComponent instanceof DefaultMutableTreeNode) {
      final Object userObject=((DefaultMutableTreeNode)pathComponent).getUserObject();
      if (userObject instanceof NodeDescriptor) {
        final NodeDescriptor nodeDescriptor=((NodeDescriptor)userObject);
        final String key=nodeDescriptor.toString();
        final String type=nodeDescriptor.getClass().getName();
        result.add(new PathElement(key,type,nodeDescriptor.getIndex()));
      }
 else {
        return null;
      }
    }
 else {
      return null;
    }
  }
  return result;
}
