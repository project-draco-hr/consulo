{
  final ArrayList<PathElement> result=new ArrayList<PathElement>();
  for (int i=0; i < treePath.getPathCount(); i++) {
    final Object pathComponent=treePath.getPathComponent(i);
    if (pathComponent instanceof DefaultMutableTreeNode) {
      final Object userObject=((DefaultMutableTreeNode)pathComponent).getUserObject();
      if (userObject instanceof NodeDescriptor) {
        final NodeDescriptor nodeDescriptor=(NodeDescriptor)userObject;
        result.add(new PathElement(getDescriptorKey(nodeDescriptor),getDescriptorType(nodeDescriptor),nodeDescriptor.getIndex(),nodeDescriptor));
      }
 else {
        result.add(new PathElement("","",0,userObject));
      }
    }
 else {
      return null;
    }
  }
  return result;
}
