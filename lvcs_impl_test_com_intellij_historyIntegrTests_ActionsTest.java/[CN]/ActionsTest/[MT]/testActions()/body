{
  VirtualFile f=root.createChildData(null,"f.java");
  f.setBinaryContent(new byte[]{0});
  assertEquals(0,getVcsContentOf(f)[0]);
  setDocumentTextFor(f,new byte[]{1});
  assertEquals(0,getVcsContentOf(f)[0]);
  LocalHistoryAction a=LocalHistory.startAction(myProject,"name");
  assertEquals(1,getVcsContentOf(f)[0]);
  setDocumentTextFor(f,new byte[]{2});
  a.finish();
  assertEquals(2,getVcsContentOf(f)[0]);
  List<Revision> rr=getVcsRevisionsFor(f);
  assertEquals(4,rr.size());
  assertEquals("name",rr.get(0).getCauseChangeName());
}
