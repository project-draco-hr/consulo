{
  VcsContext context=VcsContextFactory.SERVICE.getInstance().createContextOn(e);
  Editor editor=context.getEditor();
  if (editor != null) {
    return isAnnotated(editor);
  }
  VirtualFile selectedFile=context.getSelectedFile();
  if (selectedFile == null) {
    return false;
  }
  Project project=context.getProject();
  if (project == null)   return false;
  for (  FileEditor fileEditor : FileEditorManager.getInstance(project).getEditors(selectedFile)) {
    if (fileEditor instanceof TextEditor) {
      if (isAnnotated(((TextEditor)fileEditor).getEditor())) {
        return true;
      }
    }
  }
  return false;
}
