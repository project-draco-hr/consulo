{
  if (allowDirectories && virtualFile.isDirectory())   return true;
  FileDocumentManager documentManager=FileDocumentManager.getInstance();
  Document document=documentManager.getDocument(virtualFile);
  if (document == null)   return false;
  boolean canConvert=EncodingUtil.checkCanConvert(virtualFile) == null;
  boolean canReload=EncodingUtil.checkCanReload(virtualFile).second == null;
  return canConvert || canReload;
}
