{
  final String testFile=getTestName(true).replace('$','/') + ".test";
  final List<String> list=SimpleGroovyFileSetTestCase.readInput(PathUtil.getDataPath(RenameTest.class) + "/" + testFile);
  myFixture.configureByText(GroovyFileType.GROOVY_FILE_TYPE,list.get(0));
  PsiReference ref=myFixture.getFile().findReferenceAt(myFixture.getEditor().getCaretModel().getOffset());
  final PsiElement resolved=ref == null ? null : ref.resolve();
  if (resolved instanceof PsiMethod && !(resolved instanceof GrAccessorMethod)) {
    PsiMethod method=(PsiMethod)resolved;
    String name=method.getName();
    String newName=createNewNameForMethod(name);
    myFixture.renameElementAtCaret(newName);
  }
 else   if (resolved instanceof GrAccessorMethod) {
    new WriteCommandAction(myFixture.getProject()){
      protected void run(      Result result) throws Throwable {
        GrField field=((GrAccessorMethod)resolved).getProperty();
        RenameProcessor processor=new RenameProcessor(myFixture.getProject(),field,"newName",true,true);
        processor.addElement(resolved,createNewNameForMethod(((GrAccessorMethod)resolved).getName()));
        processor.run();
      }
    }
.execute();
  }
 else {
    myFixture.renameElementAtCaret("newName");
  }
  myFixture.checkResult(list.get(1));
}
