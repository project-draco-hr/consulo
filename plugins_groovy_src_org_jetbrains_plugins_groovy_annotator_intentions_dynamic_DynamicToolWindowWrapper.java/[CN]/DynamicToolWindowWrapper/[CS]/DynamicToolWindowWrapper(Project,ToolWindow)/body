{
  myProject=project;
  myDynamicToolWindow=dynamicToolWindow;
  buildWholePanel();
  DynamicPropertiesManager.getInstance(myProject).addDynamicChangeListener(new DynamicPropertyChangeListener(){
    public void dynamicPropertyChange(){
      storeState();
      rebuildTreePanel();
      restoreState();
    }
  }
);
  Disposer.register(myDynamicToolWindow.getContentManager(),new Disposable(){
    public void dispose(){
      storeState();
    }
  }
);
}
