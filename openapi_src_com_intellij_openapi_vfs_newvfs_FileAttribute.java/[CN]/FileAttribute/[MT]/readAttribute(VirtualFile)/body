{
  LOG.assertTrue(((NewVirtualFile)file).getId() > 0,"File must belong to managed FS in order to support attributes");
  final DataInputStream stream=((ManagingFS)file.getFileSystem()).readAttribute(file,this);
  if (stream != null) {
    try {
      int actualVersion=stream.readInt();
      if (actualVersion != myVersion) {
        stream.close();
        return null;
      }
    }
 catch (    IOException e) {
      return null;
    }
  }
  return stream;
}
