{
  ContextProvider provider=psiFile.getCopyableUserData(KEY);
  if (provider != null) {
    return provider;
  }
 else {
    final PsiElement context=psiFile.getContext();
    if (context != null) {
      provider=context.getCopyableUserData(KEY);
      if (provider != null) {
        return provider;
      }
    }
  }
  return getFromExtensionOrDefault(psiFile);
}
