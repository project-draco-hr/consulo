{
  final List<VirtualFile> files=new ArrayList<VirtualFile>();
  final FileIndex[] fileIndices=getFileIndices();
  for (int idx=0; idx < fileIndices.length; idx++) {
    final FileIndex fileIndex=fileIndices[idx];
    fileIndex.iterateContent(new CompilerContentIterator(fileType,fileIndex,inSourceOnly,files));
  }
  return files.toArray(new VirtualFile[files.size()]);
}
