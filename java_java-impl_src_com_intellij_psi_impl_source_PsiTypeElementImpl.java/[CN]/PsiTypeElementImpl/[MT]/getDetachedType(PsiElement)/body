{
  PatchedSoftReference<PsiType> cached=myCachedDetachedType;
  PsiType type=cached == null ? null : cached.get();
  if (type != null)   return type;
  try {
    String combinedAnnos=StringUtil.join(getApplicableAnnotations(),ANNOTATION_TEXT," ");
    String text=combinedAnnos.length() == 0 ? getText().trim() : combinedAnnos + " " + getText().trim();
    type=JavaPsiFacade.getInstance(getProject()).getElementFactory().createTypeFromText(text,context);
    myCachedDetachedType=new PatchedSoftReference<PsiType>(type);
  }
 catch (  IncorrectOperationException e) {
    return getType();
  }
  return type;
}
