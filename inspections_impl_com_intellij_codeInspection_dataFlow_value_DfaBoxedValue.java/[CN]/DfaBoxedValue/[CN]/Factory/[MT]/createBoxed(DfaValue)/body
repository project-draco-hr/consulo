{
  DfaBoxedValue boxedValue;
  if (isValueTooLargeToCacheInPrimitiveWrapper(valueToWrap)) {
    boxedValue=new DfaBoxedValue(valueToWrap,myFactory);
  }
 else {
    Object o=valueToWrap instanceof DfaConstValue ? ((DfaConstValue)valueToWrap).getValue() : valueToWrap instanceof DfaVariableValue ? ((DfaVariableValue)valueToWrap).getPsiVariable() : null;
    if (o == null)     return null;
    boxedValue=cachedValues.get(o);
    if (boxedValue == null) {
      boxedValue=new DfaBoxedValue(valueToWrap,myFactory);
      cachedValues.put(o,boxedValue);
    }
  }
  return boxedValue;
}
