{
  if (valueToWrap instanceof DfaUnboxedValue)   return ((DfaUnboxedValue)valueToWrap).getVariable();
  Object o=valueToWrap instanceof DfaConstValue ? ((DfaConstValue)valueToWrap).getValue() : valueToWrap instanceof DfaVariableValue ? ((DfaVariableValue)valueToWrap).getPsiVariable() : null;
  if (o == null)   return null;
  Map<Object,DfaBoxedValue> map=valueToWrap instanceof DfaVariableValue && ((DfaVariableValue)valueToWrap).isNegated() ? cachedNegatedValues : cachedValues;
  DfaBoxedValue boxedValue=map.get(o);
  if (boxedValue == null) {
    boxedValue=new DfaBoxedValue(valueToWrap,myFactory);
    map.put(o,boxedValue);
  }
  return boxedValue;
}
