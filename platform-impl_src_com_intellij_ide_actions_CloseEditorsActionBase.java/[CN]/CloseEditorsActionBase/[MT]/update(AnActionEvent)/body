{
  final Presentation presentation=event.getPresentation();
  final DataContext dataContext=event.getDataContext();
  final EditorWindow editorWindow=(EditorWindow)dataContext.getData(DataConstantsEx.EDITOR_WINDOW);
  final boolean inSplitter=editorWindow != null && editorWindow.inSplitter();
  presentation.setText(getPresentationText(inSplitter));
  final Project project=event.getData(PlatformDataKeys.PROJECT);
  if (project == null) {
    presentation.setEnabled(false);
    return;
  }
  presentation.setEnabled(getFilesToClose(event).size() > 0 && isValidForProject(project));
}
