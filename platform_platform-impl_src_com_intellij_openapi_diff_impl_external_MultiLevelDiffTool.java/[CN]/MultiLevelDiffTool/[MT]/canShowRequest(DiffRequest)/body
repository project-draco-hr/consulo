{
  boolean isFile=false;
  DiffContent[] contents=request.getContents();
  for (int i=0; i < contents.length; i++) {
    DiffContent content=contents[i];
    VirtualFile file=content.getFile();
    if (file != null && file.isInLocalFileSystem() && !file.isDirectory()) {
      isFile=true;
      break;
    }
  }
  AbstractProperty.AbstractPropertyContainer config=DiffManagerImpl.getInstanceEx().getProperties();
  if (isFile && DiffManagerImpl.ENABLE_FILES.value(config))   return false;
  if (!isFile && DiffManagerImpl.ENABLE_FOLDERS.value(config))   return false;
  return !(DiffViewerType.merge.equals(request.getType()) && contentsWriteable(request));
}
