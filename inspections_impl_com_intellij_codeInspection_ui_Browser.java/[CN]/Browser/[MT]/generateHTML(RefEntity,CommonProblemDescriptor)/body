{
  final StringBuffer buf=new StringBuffer();
  final Runnable action=new Runnable(){
    public void run(){
      getComposer().compose(buf,refEntity,descriptor);
    }
  }
;
  ApplicationManager.getApplication().runReadAction(action);
  uppercaseFirstLetter(buf);
  if (refEntity instanceof RefElement) {
    appendSuppressSection((RefElement)refEntity,buf);
  }
  insertHeaderFooter(buf);
  return buf.toString();
}
