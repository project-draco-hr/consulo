{
  InputValidatorEx validator=new InputValidatorEx(){
    public String getErrorText(    String inputString){
      if (!checkTemplateKey(inputString,callback)) {
        return XmlBundle.message("zen.coding.incorrect.abbreviation.error");
      }
      return null;
    }
    public boolean checkInput(    String inputString){
      return getErrorText(inputString) == null;
    }
    public boolean canClose(    String inputString){
      return checkInput(inputString);
    }
  }
;
  final String abbreviation=Messages.showInputDialog(callback.getProject(),XmlBundle.message("zen.coding.enter.abbreviation.dialog.label"),XmlBundle.message("zen.coding.title"),Messages.getQuestionIcon(),"",validator);
  if (abbreviation != null) {
    doWrap(selection,abbreviation,callback,listener);
  }
}
