{
synchronized (lock) {
    myFinalizationId=0;
    ensureReadOrWriteMaskExists();
    final int start=(int)(index - offset);
    final ByteBuffer b=getBuf();
    b.position(start);
    int count=Math.min(length,PAGE_SIZE - start);
    b.put(bytes,off,count);
    if (myWriteMask != null) {
      myWriteMask.set(start,start + count);
    }
    return count;
  }
}
