{
  if (myCache.getCachedIncomingChanges() == null) {
    requestLoadIncomingChanges();
    return;
  }
  LOG.info("Updating editors");
  final VirtualFile[] files=myFileEditorManager.getOpenFiles();
  for (  VirtualFile file : files) {
    final Pair<CommittedChangeList,Change> pair=myCache.getIncomingChangeList(file);
    final FileEditor[] fileEditors=myFileEditorManager.getEditors(file);
    for (    FileEditor editor : fileEditors) {
      final OutdatedRevisionPanel oldPanel=editor.getUserData(PANEL_KEY);
      if (pair != null) {
        if (oldPanel != null) {
          oldPanel.setChangeList(pair.first,pair.second);
        }
 else {
          initPanel(pair.first,pair.second,editor);
        }
      }
 else       if (oldPanel != null) {
        myFileEditorManager.removeTopComponent(editor,oldPanel);
        editor.putUserData(PANEL_KEY,null);
      }
    }
  }
}
