{
  List<VirtualFile> cache=myCache;
  long stamp=PsiManager.getInstance(myProject).getModificationTracker().getModificationCount();
  if (myLastStamp.get() != stamp) {
    cache=null;
  }
  if (cache != null && !cache.isEmpty()) {
    for (    VirtualFile file : cache) {
      if (!file.isValid()) {
        cache=null;
        break;
      }
    }
  }
  if (cache == null) {
    myCache=cache=calcClassRoots();
    myLastStamp.set(stamp);
  }
  return cache;
}
