{
  ZipInputStream zipStream=new ZipInputStream(inputStream);
  try {
    ZipEntry sizeEntry=zipStream.getNextEntry();
    if (sizeEntry == null || !sizeEntry.getName().equals(SIZE_ENTRY))     return null;
    byte[] bytes=FileUtil.loadBytes(zipStream,2);
    int size=ZipShort.getValue(bytes);
    JarMemoryLoader loader=new JarMemoryLoader();
    for (int i=0; i < size; i++) {
      ZipEntry entry=zipStream.getNextEntry();
      if (entry == null)       return loader;
      byte[] content=FileUtil.loadBytes(zipStream,(int)entry.getSize());
      MyResource resource=new MyResource(entry.getName(),new URL(baseUrl,entry.getName()),content);
      loader.myResources.put(entry.getName(),resource);
    }
    return loader;
  }
  finally {
    zipStream.close();
  }
}
