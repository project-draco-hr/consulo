{
  final XmlTag tag=ensureTagExists();
  final String attributeName=getXmlElementName();
  final String namespace=getXmlApiCompatibleNamespace(getParentHandler());
  final String oldValue=StringUtil.unescapeXml(tag.getAttributeValue(attributeName,namespace));
  final String newValue=XmlStringUtil.escapeString(value);
  if (Comparing.equal(oldValue,newValue,true))   return;
  getManager().runChange(new Runnable(){
    public void run(){
      try {
        XmlAttribute attribute=tag.setAttribute(attributeName,namespace,newValue);
        setXmlElement(attribute);
        getManager().cacheHandler(DomManagerImpl.DOM_ATTRIBUTE_HANDLER_KEY,attribute,AttributeChildInvocationHandler.this);
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
    }
  }
);
  final DomElement proxy=getProxy();
  final DomElement element=proxy;
  getManager().fireEvent(oldValue != null ? new DomEvent(proxy,false) : new DomEvent(element,true));
}
