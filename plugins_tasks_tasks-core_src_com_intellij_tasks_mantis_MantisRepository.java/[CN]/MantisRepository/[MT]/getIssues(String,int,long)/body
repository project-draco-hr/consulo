{
  MantisConnectPortType soap=createSoap();
  try {
    IssueData[] issues;
    if (myFilter == MantisFilter.LAST_TASKS) {
      issues=soap.mc_project_get_issues(getUsername(),getPassword(),BigInteger.valueOf(myProject.getId()),BigInteger.ZERO,BigInteger.valueOf(max));
    }
 else {
      issues=soap.mc_filter_get_issues(getUsername(),getPassword(),BigInteger.valueOf(myProject.getId()),BigInteger.valueOf(myFilter.getId()),BigInteger.ZERO,BigInteger.valueOf(max));
    }
    final List<Task> filteredTasks=TaskSearchSupport.filterTasks(request == null ? "" : request,ContainerUtil.mapNotNull(issues,new NullableFunction<IssueData,Task>(){
      public Task fun(      IssueData issueData){
        try {
          return createIssue(issueData);
        }
 catch (        Exception e) {
          return null;
        }
      }
    }
));
    return filteredTasks.toArray(new Task[filteredTasks.size()]);
  }
 catch (  Exception e) {
    IssueHeaderData[] issues;
    if (myFilter == MantisFilter.LAST_TASKS) {
      issues=soap.mc_project_get_issue_headers(getUsername(),getPassword(),BigInteger.valueOf(myProject.getId()),BigInteger.ZERO,BigInteger.valueOf(max));
    }
 else {
      issues=soap.mc_filter_get_issue_headers(getUsername(),getPassword(),BigInteger.valueOf(myProject.getId()),BigInteger.valueOf(myFilter.getId()),BigInteger.ZERO,BigInteger.valueOf(max));
    }
    final List<Task> filteredTasks=TaskSearchSupport.filterTasks(request == null ? "" : request,ContainerUtil.mapNotNull(issues,new NullableFunction<IssueHeaderData,Task>(){
      public Task fun(      IssueHeaderData issueHeaderData){
        try {
          return createIssue(issueHeaderData);
        }
 catch (        Exception e) {
          return null;
        }
      }
    }
));
    return filteredTasks.toArray(new Task[filteredTasks.size()]);
  }
}
