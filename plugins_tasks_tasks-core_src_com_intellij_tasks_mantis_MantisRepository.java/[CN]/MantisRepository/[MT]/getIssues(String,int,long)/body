{
  MantisConnectPortType soap=createSoap();
  List<Task> result=new ArrayList<Task>(max);
  int page=0;
  int issuesOnPage=StringUtils.isEmpty(request) ? max : max * 2;
  while (true) {
    final List<Task> issuesFromPage=getIssues(page,issuesOnPage,soap);
    final List<Task> filteredTasks=TaskSearchSupport.filterTasks(request != null ? request : "",issuesFromPage);
    result.addAll(filteredTasks);
    if (issuesFromPage.size() < issuesOnPage || result.size() >= max) {
      break;
    }
  }
  result=result.subList(0,Math.min(max,result.size()));
  return result;
}
