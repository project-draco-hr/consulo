{
  final List<ASTNode> children=visibleChildren(elem.getNode());
  if (elem instanceof GrMethodCallExpression) {
    GrExpression invokedExpression=((GrMethodCallExpression)elem).getInvokedExpression();
    if (invokedExpression instanceof GrQualifiedReference) {
      final PsiElement nameElement=((GrQualifiedReference)invokedExpression).getReferenceNameElement();
      if (nameElement != null) {
        List<ASTNode> grandChildren=visibleChildren(invokedExpression.getNode());
        int i=0;
        while (i < grandChildren.size() && nameElement != grandChildren.get(i).getPsi())         i++;
        if (i > 0) {
          processNestedChildrenPrefix(list,aligner,false,grandChildren,i,wrap);
        }
        if (i < grandChildren.size()) {
          LOG.assertTrue(nameElement == grandChildren.get(i).getPsi());
          list.add(new MethodCallWithoutQualifierBlock(nameElement,wrap,topLevel,children,elem,myContext));
        }
        return;
      }
    }
  }
  processNestedChildrenPrefix(list,aligner,topLevel,children,children.size(),wrap);
}
