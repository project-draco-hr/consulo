{
  final ProjectJdk[] jdks=getUsedJdks(project);
  if (jdks.length > 0) {
    add(new Comment("JDK definitions"),1);
    for (int idx=0; idx < jdks.length; idx++) {
      final ProjectJdk jdk=jdks[idx];
      if (jdk.getHomeDirectory() == null) {
        continue;
      }
      final File homeDir=VfsUtil.virtualToIoFile(jdk.getHomeDirectory());
      final String jdkName=jdk.getName();
      final String jdkHomeProperty=getJdkHomeProperty(jdkName);
      final FileSet fileSet=new FileSet(propertyRef(jdkHomeProperty));
      final String[] urls=jdk.getRootProvider().getUrls(OrderRootType.COMPILATION_CLASSES);
      for (int i=0; i < urls.length; i++) {
        final String path=GenerationUtils.trimJarSeparator(VirtualFileManager.extractPath(urls[i]));
        final File pathElement=new File(path);
        final String relativePath=FileUtil.getRelativePath(homeDir,pathElement);
        if (relativePath != null) {
          fileSet.add(new Include(relativePath.replace(File.separatorChar,'/')));
        }
      }
      final Path jdkPath=new Path(getJdkPathId(jdkName));
      jdkPath.add(fileSet);
      add(jdkPath);
    }
  }
  final ProjectJdk projectJdk=ProjectRootManager.getInstance(project).getProjectJdk();
  add(new Property(PROPERTY_PROJECT_JDK_HOME,projectJdk != null ? propertyRef(getJdkHomeProperty(projectJdk.getName())) : ""),1);
  add(new Property(PROPERTY_PROJECT_JDK_CLASSPATH,projectJdk != null ? getJdkPathId(projectJdk.getName()) : ""));
}
