{
  Collection<VirtualFile> filesToRefresh=new THashSet<VirtualFile>(added);
  filesToRefresh.addAll(removed);
  if (myFilesToRefresh.addAll(filesToRefresh)) {
    myUpdateProblemAlarm.cancelAllRequests();
    myUpdateProblemAlarm.addRequest(new Runnable(){
      public void run(){
        Set<VirtualFile> filesToRefresh=new THashSet<VirtualFile>(myFilesToRefresh);
        updateNodesContaining(filesToRefresh,myRootNode);
        myFilesToRefresh.removeAll(filesToRefresh);
      }
    }
,200,ModalityState.NON_MMODAL);
  }
}
