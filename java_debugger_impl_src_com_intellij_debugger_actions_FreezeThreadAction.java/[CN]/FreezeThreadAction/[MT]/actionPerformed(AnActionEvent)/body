{
  DebuggerTreeNodeImpl[] selectedNode=getSelectedNodes(e.getDataContext());
  final DebuggerContextImpl debuggerContext=getDebuggerContext(e.getDataContext());
  final DebugProcessImpl debugProcess=debuggerContext.getDebugProcess();
  for (int i=0; i < selectedNode.length; i++) {
    final DebuggerTreeNodeImpl debuggerTreeNode=selectedNode[i];
    ThreadDescriptorImpl threadDescriptor=((ThreadDescriptorImpl)debuggerTreeNode.getDescriptor());
    final ThreadReferenceProxyImpl thread=threadDescriptor.getThreadReference();
    if (!threadDescriptor.isFrozen()) {
      debugProcess.getManagerThread().schedule(new SuspendContextCommandImpl(debuggerContext.getSuspendContext()){
        public void contextAction() throws Exception {
          debugProcess.createFreezeThreadCommand(thread).run();
          debuggerTreeNode.calcValue();
        }
      }
);
    }
  }
}
