{
  myFoundComponent=null;
  myActions.clear();
  boolean hasSecondStroke=false;
  for (; component != null; component=component.getParent()) {
    if (!(component instanceof JComponent)) {
      continue;
    }
    ArrayList listOfActions=(ArrayList)((JComponent)component).getClientProperty(AnAction.ourClientProperty);
    if (listOfActions == null) {
      continue;
    }
    for (int i=0; i < listOfActions.size(); i++) {
      Object o=listOfActions.get(i);
      if (!(o instanceof AnAction)) {
        continue;
      }
      AnAction action=(AnAction)o;
      hasSecondStroke|=addAction(action,firstKeyStroke,secondKeyStroke);
    }
    if (myActions.size() > 0) {
      myFoundComponent=(JComponent)component;
      break;
    }
  }
  String[] actionIds;
  Keymap keymap=KeymapManager.getInstance().getActiveKeymap();
  if (secondKeyStroke == null) {
    actionIds=keymap.getActionIds(firstKeyStroke);
  }
 else {
    actionIds=keymap.getActionIds(firstKeyStroke,secondKeyStroke);
  }
  ActionManager actionManager=ActionManager.getInstance();
  for (int i=0; i < actionIds.length; i++) {
    String actionId=actionIds[i];
    AnAction action=actionManager.getAction(actionId);
    if (action != null) {
      if (isModalContext && !action.isEnabledInModalContext()) {
        continue;
      }
      hasSecondStroke|=addAction(action,firstKeyStroke,secondKeyStroke);
    }
  }
  return hasSecondStroke;
}
