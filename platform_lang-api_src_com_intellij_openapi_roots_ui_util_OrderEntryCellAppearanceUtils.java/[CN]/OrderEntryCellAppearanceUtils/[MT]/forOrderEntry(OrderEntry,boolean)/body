{
  if (orderEntry instanceof JdkOrderEntry) {
    JdkOrderEntry jdkLibraryEntry=(JdkOrderEntry)orderEntry;
    Sdk jdk=jdkLibraryEntry.getJdk();
    if (!orderEntry.isValid()) {
      final String oldJdkName=jdkLibraryEntry.getJdkName();
      return SimpleTextCellAppearance.invalid(oldJdkName != null ? oldJdkName : NO_JDK,CellAppearanceUtils.INVALID_ICON);
    }
    return forJdk(jdk,false,selected);
  }
 else   if (!orderEntry.isValid()) {
    return SimpleTextCellAppearance.invalid(orderEntry.getPresentableName(),CellAppearanceUtils.INVALID_ICON);
  }
 else   if (orderEntry instanceof LibraryOrderEntry) {
    LibraryOrderEntry libraryOrderEntry=(LibraryOrderEntry)orderEntry;
    final Library library=libraryOrderEntry.getLibrary();
    if (!libraryOrderEntry.isValid()) {
      return SimpleTextCellAppearance.invalid(orderEntry.getPresentableName(),CellAppearanceUtils.INVALID_ICON);
    }
    return forLibrary(library);
  }
 else   if (orderEntry.isSynthetic()) {
    String presentableName=orderEntry.getPresentableName();
    Icon icon=orderEntry instanceof ModuleSourceOrderEntry ? sourceFolderIcon(false) : null;
    return new SimpleTextCellAppearance(presentableName,icon,SimpleTextAttributes.SYNTHETIC_ATTRIBUTES);
  }
 else   if (orderEntry instanceof ModuleOrderEntry) {
    final Icon icon=((ModuleOrderEntry)orderEntry).getModule().getModuleType().getNodeIcon(false);
    return SimpleTextCellAppearance.normal(orderEntry.getPresentableName(),icon);
  }
 else   return CompositeAppearance.single(orderEntry.getPresentableName());
}
