{
  PsiElement elementAtStart=file.findElementAt(startOffset);
  PsiElement elementAtEnd=file.findElementAt(endOffset - 1);
  if (elementAtStart instanceof PsiWhiteSpace) {
    startOffset=elementAtStart.getTextRange().getEndOffset();
    elementAtStart=file.findElementAt(startOffset);
  }
  if (elementAtEnd instanceof PsiWhiteSpace) {
    endOffset=elementAtEnd.getTextRange().getStartOffset();
    elementAtEnd=file.findElementAt(endOffset - 1);
  }
  if (elementAtStart == null || elementAtEnd == null)   return null;
  XmlTagChild first=PsiTreeUtil.getParentOfType(elementAtStart,XmlTagChild.class);
  if (first == null)   return null;
  if (first.getTextRange().getStartOffset() != startOffset) {
    PsiElement elementAt=file.findElementAt(first.getTextRange().getStartOffset());
    if (!(elementAt instanceof PsiWhiteSpace) || elementAt.getTextRange().getEndOffset() != startOffset)     return null;
  }
  XmlTagChild last=first;
  while (last != null && last.getTextRange().getEndOffset() < endOffset) {
    last=PsiTreeUtil.getNextSiblingOfType(last,XmlTagChild.class);
  }
  if (last == null)   return null;
  if (last.getTextRange().getEndOffset() != elementAtEnd.getTextRange().getEndOffset()) {
    PsiElement elementAt=file.findElementAt(last.getTextRange().getEndOffset() - 1);
    if (!(elementAt instanceof PsiWhiteSpace) || elementAt.getTextRange().getStartOffset() != endOffset) {
      return null;
    }
  }
  return new Pair<XmlTagChild,XmlTagChild>(first,last);
}
