{
  if (!myEnabled)   return null;
  if (myTools == null || element == null)   return myDefaultState.isEnabled() ? (InspectionTool)myDefaultState.getTool() : null;
  final DependencyValidationManager manager=DependencyValidationManager.getInstance(element.getProject());
  for (  ScopeToolState state : myTools) {
    final PackageSet set=state.getScope().getValue();
    if (set != null && set.contains(element.getContainingFile(),manager)) {
      return state.isEnabled() ? (InspectionTool)state.getTool() : null;
    }
  }
  return myDefaultState.isEnabled() ? (InspectionTool)myDefaultState.getTool() : null;
}
