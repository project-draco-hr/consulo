{
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (project.isDisposed())       return;
      final List<PsiExpression> expressions=new ArrayList<PsiExpression>();
      for (      SmartPsiElementPointer ptr : myExpressions) {
        final PsiElement element=ptr.getElement();
        if (element != null) {
          expressions.add((PsiExpression)element);
        }
      }
      final PsiExpression[] expressionArray=expressions.toArray(new PsiExpression[expressions.size()]);
      final IntroduceConstantHandler handler=new IntroduceConstantHandler(){
        protected OccurrenceManager createOccurenceManager(        PsiExpression selectedExpr,        PsiClass parentClass){
          final OccurrenceFilter filter=new OccurrenceFilter(){
            public boolean isOK(            PsiExpression occurrence){
              return true;
            }
          }
;
          return new BaseOccurrenceManager(filter){
            protected PsiExpression[] defaultOccurrences(){
              return expressionArray;
            }
            protected PsiExpression[] findOccurrences(){
              return expressionArray;
            }
          }
;
        }
      }
;
      handler.invoke(project,expressionArray);
    }
  }
);
}
