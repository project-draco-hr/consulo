{
  final TableColumnModel columnModel=table.getTableHeader().getColumnModel();
  int index=0;
  final ArrayList<String> columnIndices=new ArrayList<String>();
  while (true) {
    final String order=storage.get(orderPropertyName(index));
    if (order == null)     break;
    columnIndices.add(order);
    index++;
    if (index == table.getColumnCount())     break;
  }
  index=0;
  for (  final String columnIndex : columnIndices) {
    final int modelColumnIndex=indexbyModelIndex(columnModel,Integer.parseInt(columnIndex));
    if (modelColumnIndex > 0 && modelColumnIndex < columnModel.getColumnCount()) {
      columnModel.moveColumn(modelColumnIndex,index);
    }
    index++;
  }
  for (int i=0; i < columnIndices.size(); i++) {
    final String width=storage.get(widthPropertyName(i));
    if (width != null && width.length() > 0) {
      try {
        columnModel.getColumn(i).setPreferredWidth(Integer.parseInt(width));
      }
 catch (      NumberFormatException e) {
        LOG.error("Bad width: " + width + " at column: "+ i+ " from: "+ storage+ " actual columns count: "+ columnModel.getColumnCount()+ " info count: "+ columnIndices.size(),e);
      }
    }
  }
}
