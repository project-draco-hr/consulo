{
  if (runWithActiveFrameOnly && !ApplicationManager.getApplication().isActive()) {
    final MessageBus bus=ApplicationManager.getApplication().getMessageBus();
    final MessageBusConnection connection=bus.connect(this);
    connection.subscribe(ApplicationActivationListener.TOPIC,new ApplicationActivationListener(){
      @Override public void applicationActivated(      IdeFrame ideFrame){
        connection.disconnect();
        addRequest(request,delay);
      }
      @Override public void applicationDeactivated(      IdeFrame ideFrame){
      }
    }
);
  }
 else {
    addRequest(request,delay);
  }
}
