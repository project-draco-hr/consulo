{
  final String pluginName=findPluginName(logMessage.getThrowable());
  final Object[] reporters=Extensions.getRootArea().getExtensionPoint(PluginManager.ERROR_HANDLER_EXTENSION_POINT).getExtensions();
  ErrorReportSubmitter submitter=null;
  for (int i=0; i < reporters.length; i++) {
    ErrorHandlerExtension reporterBean=(ErrorHandlerExtension)reporters[i];
    if (Comparing.equal(pluginName,reporterBean.getPluginName())) {
      final PluginDescriptor plugin=PluginManager.getPlugin(pluginName);
      final ClassLoader loader;
      if (plugin != null) {
        loader=plugin.getLoader();
      }
 else {
        loader=getClass().getClassLoader();
      }
      try {
        final Class submitterClass=Class.forName(reporterBean.getHandlerClass(),true,loader);
        submitter=(ErrorReportSubmitter)submitterClass.newInstance();
      }
 catch (      Exception e) {
        break;
      }
    }
  }
  if (submitter != null) {
    logMessage.setSubmitted(submitter.submit(getEvents(logMessage),getContentPane()));
  }
}
