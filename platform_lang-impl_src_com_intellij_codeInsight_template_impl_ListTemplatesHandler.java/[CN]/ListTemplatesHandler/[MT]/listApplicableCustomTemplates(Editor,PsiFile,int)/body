{
  final MultiMap<String,CustomLiveTemplateLookupElement> result=MultiMap.create();
  CustomTemplateCallback customTemplateCallback=new CustomTemplateCallback(editor,file,false);
  for (  CustomLiveTemplate customLiveTemplate : CustomLiveTemplate.EP_NAME.getExtensions()) {
    if (customLiveTemplate instanceof CustomLiveTemplateBase && TemplateManagerImpl.isApplicable(customLiveTemplate,editor,file)) {
      String customTemplatePrefix=((CustomLiveTemplateBase)customLiveTemplate).computeTemplateKeyWithoutContextChecking(customTemplateCallback);
      if (customTemplatePrefix != null) {
        result.putValues(customTemplatePrefix,((CustomLiveTemplateBase)customLiveTemplate).getLookupElements(file,editor,offset));
      }
    }
  }
  return result;
}
