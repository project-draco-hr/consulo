{
  final LookupImpl lookup=(LookupImpl)LookupManager.getInstance(project).createLookup(editor,LookupElement.EMPTY_ARRAY,prefix,new TemplatesArranger());
  for (  TemplateImpl template : matchingTemplates) {
    lookup.addItem(createTemplateElement(template),new PlainPrefixMatcher(prefix));
  }
  CustomTemplateCallback customTemplateCallback=new CustomTemplateCallback(editor,file,false);
  for (  CustomLiveTemplateLookupElement element : customTemplatesLookupElements) {
    String customTemplatePrefix=element.getCustomLiveTemplate().computeTemplateKeyWithoutContextChecking(customTemplateCallback);
    lookup.addItem(element,new PlainPrefixMatcher(customTemplatePrefix));
  }
  showLookup(lookup,file);
}
