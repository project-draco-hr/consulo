{
  if (getModel().getSize() == 0 && v)   return;
  if (v && JBPopupFactory.getInstance().getChildFocusedPopup(this) != null)   return;
  final boolean wasShown=isPopupVisible();
  super.setPopupVisible(v);
  if (!wasShown && v && isEditable()&& !wasShown&& !UIManager.getBoolean("ComboBox.isEnterSelectablePopup")) {
    final ComboBoxEditor editor=getEditor();
    final Object item=editor.getItem();
    final Object selectedItem=getSelectedItem();
    if (item == null || item != selectedItem) {
      configureEditor(editor,selectedItem);
    }
  }
}
