{
  if (obj == null)   return false;
  if (obj.getClass() != getClass())   return false;
  final XPathVariableReference ref=(XPathVariableReference)obj;
  final XPathVariable variable=resolve();
  if (variable != null)   return variable == ref.resolve();
  final QName name=ContextProvider.getContextProvider(this).getQName(this);
  if (name != null) {
    return Comparing.equal(name,ContextProvider.getContextProvider(ref).getQName(ref));
  }
  return Comparing.equal(getReferencedName(),ref.getReferencedName());
}
