{
  myIsTemplate=Boolean.valueOf(element.getAttributeValue(TEMPLATE_FLAG_ATTRIBUTE));
  final ConfigurationFactory factory=getFactory(element);
  if (factory == null)   return;
  if (myIsTemplate) {
    myConfiguration=myManager.getConfigurationTemplate(factory).getConfiguration();
  }
 else {
    final String name=element.getAttributeValue(NAME_ATTR);
    myConfiguration=myManager.createConfiguration(name,factory).getConfiguration();
  }
  myConfiguration.readExternal(element);
  List runners=element.getChildren(RUNNER_ELEMENT);
  for (Iterator iterator=runners.iterator(); iterator.hasNext(); ) {
    Element runnerElement=(Element)iterator.next();
    String id=runnerElement.getAttributeValue(RUNNER_ID);
    JavaProgramRunner runner=ExecutionRegistry.getInstance().findRunnerById(id);
    if (runner != null) {
      RunnerSettings settings=new RunnerSettings(runner.createConfigurationData(new InfoProvider(runner)),myConfiguration);
      settings.readExternal(runnerElement);
      myRunnerSettings.put(runner,settings);
    }
  }
  List configurations=element.getChildren(CONFIGURATION_ELEMENT);
  for (Iterator iterator=configurations.iterator(); iterator.hasNext(); ) {
    Element configurationElement=(Element)iterator.next();
    String id=configurationElement.getAttributeValue(RUNNER_ID);
    JavaProgramRunner runner=ExecutionRegistry.getInstance().findRunnerById(id);
    if (runner != null) {
      ConfigurationPerRunnerSettings settings=new ConfigurationPerRunnerSettings(runner.getInfo(),myConfiguration.createRunnerSettings(new InfoProvider(runner)));
      settings.readExternal(configurationElement);
      myConfigurationPerRunnerSettings.put(runner,settings);
    }
  }
}
