{
  final NodeManager nodeManager=builder.getNodeManager();
  try {
    final ValueDescriptor parentDescriptor=builder.getParentDescriptor();
    final Value childrenValue=evaluateChildren(evaluationContext.createEvaluationContext(value),parentDescriptor);
    NodeRenderer renderer=getLastChildrenRenderer(parentDescriptor);
    if (renderer == null || childrenValue == null || !renderer.isApplicable(childrenValue.type())) {
      renderer=DebugProcessImpl.getDefaultRenderer(childrenValue != null ? childrenValue.type() : null);
      parentDescriptor.putUserData(LAST_CHILDREN_RENDERER,renderer);
    }
    renderer.buildChildren(childrenValue,builder,evaluationContext);
  }
 catch (  final EvaluateException e) {
    List<DebuggerTreeNode> errorChildren=new ArrayList<DebuggerTreeNode>();
    errorChildren.add(nodeManager.createMessageNode(DebuggerBundle.message("error.unable.to.evaluate.expression") + " " + e.getMessage()));
    builder.setChildren(errorChildren);
  }
}
