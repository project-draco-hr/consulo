{
  if (dir.exists()) {
    final List<File> filesToDelete=collectJavaFilesRecursively(dir);
    if (!FileUtil.delete(dir)) {
      context.processMessage(new CompilerMessage(BUILDER_NAME,BuildMessage.Kind.ERROR,"Cannot delete " + dir.getPath()));
      return false;
    }
    for (    File file : filesToDelete) {
      context.markDeleted(file);
    }
  }
  return true;
}
