{
  visited.add(module);
  final AndroidFacet facet=AndroidJpsUtil.getFacet(module);
  File resDir=null;
  File resDirForCompilation=null;
  if (facet != null) {
    resDir=facet.getResourceDir();
    resDirForCompilation=facet.getResourceDirForCompilation();
  }
  for (  String sourceRootPath : module.getSourceRoots()) {
    final File sourceRoot=new File(sourceRootPath).getCanonicalFile();
    if (!sourceRoot.equals(resDir) && !sourceRoot.equals(resDirForCompilation)) {
      result.add(sourceRoot);
    }
  }
  for (  ClasspathItem classpathItem : module.getClasspath(ClasspathKind.PRODUCTION_COMPILE)) {
    if (classpathItem instanceof Module) {
      final Module depModule=(Module)classpathItem;
      if (!visited.contains(depModule)) {
        fillSourceRoots(depModule,visited,result);
      }
    }
  }
}
