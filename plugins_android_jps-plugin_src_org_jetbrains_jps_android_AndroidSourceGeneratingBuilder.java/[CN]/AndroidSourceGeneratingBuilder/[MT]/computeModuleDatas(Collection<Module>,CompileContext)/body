{
  final Map<Module,MyModuleData> moduleDataMap=new HashMap<Module,MyModuleData>();
  boolean success=true;
  for (  Module module : modules) {
    final AndroidFacet facet=AndroidJpsUtil.getFacet(module);
    if (facet == null) {
      continue;
    }
    final Pair<AndroidSdk,IAndroidTarget> pair=AndroidJpsUtil.getAndroidPlatform(module,context,BUILDER_NAME);
    if (pair == null) {
      success=false;
      continue;
    }
    final AndroidSdk androidSdk=pair.getFirst();
    final IAndroidTarget target=pair.getSecond();
    moduleDataMap.put(module,new MyModuleData(androidSdk.getSdkPath(),target,facet));
  }
  return success ? moduleDataMap : null;
}
