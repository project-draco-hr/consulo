{
  if (dir.exists()) {
    final List<File> filesToDelete=collectJavaFilesRecursively(dir);
    if (!FileUtil.delete(dir)) {
      context.processMessage(new CompilerMessage(compilerName,BuildMessage.Kind.ERROR,AndroidJpsBundle.message("android.jps.cannot.delete",dir.getPath())));
      return false;
    }
    for (    File file : filesToDelete) {
      context.markDeleted(file);
    }
  }
  return true;
}
