{
  if (!extension.isLibrary()) {
    return false;
  }
  final List<JpsAndroidModuleExtension> dependencies=AndroidJpsUtil.getAllAndroidDependencies(extension.getModule(),false);
  for (  JpsAndroidModuleExtension depExtension : dependencies) {
    final List<JpsAndroidModuleExtension> depDependencies=AndroidJpsUtil.getAllAndroidDependencies(depExtension.getModule(),true);
    if (depDependencies.contains(extension) && dependencies.contains(depExtension) && (depExtension.getModule().getName().compareTo(extension.getModule().getName()) < 0 || !depExtension.isLibrary())) {
      return true;
    }
  }
  return false;
}
