{
  for (  Map.Entry<Module,MyModuleData> entry : moduleDataMap.entrySet()) {
    final Module module=entry.getKey();
    final MyModuleData moduleData=entry.getValue();
    final AndroidFacet facet=moduleData.getFacet();
    if (facet.isLibrary()) {
      continue;
    }
    for (    ClasspathItem item : module.getClasspath(ClasspathKind.PRODUCTION_RUNTIME,false)) {
      if (item instanceof Module) {
        final Module depModule=(Module)item;
        final AndroidFacet depFacet=AndroidJpsUtil.getFacet(depModule);
        if (depFacet != null && !depFacet.isLibrary()) {
          String message="Suspicious module dependency " + module.getName() + " -> "+ depModule.getName()+ ": Android application module depends on other application module. Possibly, you should ";
          if (AndroidJpsUtil.isMavenizedModule(depModule)) {
            message+="change packaging type of module " + depModule.getName() + " to 'apklib' in pom.xml file or ";
          }
          message+="change dependency scope to 'Provided'.";
          context.processMessage(new CompilerMessage(BUILDER_NAME,BuildMessage.Kind.WARNING,message));
        }
      }
    }
  }
}
