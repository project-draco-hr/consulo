{
  final Ref<Boolean> success=Ref.create(true);
  FileUtil.processFilesRecursively(dir,new Processor<File>(){
    @Override public boolean process(    File file){
      if (file.isFile() && "java".equals(FileUtil.getExtension(file.getName()))) {
        try {
          context.markDirty(file);
        }
 catch (        IOException e) {
          AndroidJpsUtil.reportExceptionError(context,null,e,compilerName);
          success.set(false);
          return false;
        }
      }
      return true;
    }
  }
);
  return success.get();
}
