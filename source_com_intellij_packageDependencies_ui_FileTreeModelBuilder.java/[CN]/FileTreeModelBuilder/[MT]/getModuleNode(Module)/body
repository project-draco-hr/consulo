{
  if (module == null || !myShowModules) {
    return myRoot;
  }
  ModuleNode node=myModuleNodes.get(module);
  if (node != null)   return node;
  node=new ModuleNode(module);
  final ModuleManager moduleManager=ModuleManager.getInstance(myProject);
  final String[] groupPath=moduleManager.getModuleGroupPath(module);
  if (groupPath == null) {
    myModuleNodes.put(module,node);
    myRoot.add(node);
    return node;
  }
  myModuleNodes.put(module,node);
  if (myShowModuleGroups) {
    getParentModuleGroup(groupPath).add(node);
  }
 else {
    myRoot.add(node);
  }
  return node;
}
