{
  if (!(file instanceof GroovyFile))   return;
  final String packageName=((GroovyFile)file).getPackageName();
  final Module module=ModuleUtil.findModuleForFile(file.getVirtualFile(),project);
  PsiDirectory directory=PackageUtil.findOrCreateDirectoryForPackage(module,packageName,null,true);
  if (directory == null) {
    return;
  }
  String error=RefactoringMessageUtil.checkCanCreateFile(directory,file.getName());
  if (error != null) {
    Messages.showMessageDialog(project,error,CommonBundle.getErrorTitle(),Messages.getErrorIcon());
    return;
  }
  new MoveFilesOrDirectoriesProcessor(project,new PsiElement[]{file},directory,false,false,false,null,null).run();
}
