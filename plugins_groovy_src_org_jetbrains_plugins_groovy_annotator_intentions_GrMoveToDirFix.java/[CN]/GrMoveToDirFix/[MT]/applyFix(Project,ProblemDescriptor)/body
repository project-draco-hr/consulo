{
  PsiFile file=descriptor.getPsiElement().getContainingFile();
  if (!(file instanceof GroovyFile))   return;
  VirtualFile vfile=file.getVirtualFile();
  if (vfile == null)   return;
  final Module module=ModuleUtilCore.findModuleForFile(vfile,project);
  if (module == null)   return;
  final String packageName=((GroovyFile)file).getPackageName();
  PsiDirectory directory=PackageUtil.findOrCreateDirectoryForPackage(module,packageName,null,true);
  if (directory == null)   return;
  String error=RefactoringMessageUtil.checkCanCreateFile(directory,file.getName());
  if (error != null) {
    Messages.showMessageDialog(project,error,CommonBundle.getErrorTitle(),Messages.getErrorIcon());
    return;
  }
  new MoveFilesOrDirectoriesProcessor(project,new PsiElement[]{file},directory,false,false,false,null,null).run();
}
