{
  Project project=e.getData(PlatformDataKeys.PROJECT);
  if (project == null) {
    return true;
  }
  Class<? extends ModuleExtension<?>>[] moduleExtensionClasses=action.getModuleExtensionClasses();
  if (moduleExtensionClasses.length == 0) {
    return true;
  }
  if (action.isCanUseProjectAsDefault()) {
    for (    Module temp : ModuleManager.getInstance(project).getModules()) {
      boolean b=checkModuleForModuleExtensions(temp,moduleExtensionClasses);
      if (b) {
        return true;
      }
    }
  }
 else {
    Module module=e.getData(LangDataKeys.MODULE);
    if (module != null) {
      return checkModuleForModuleExtensions(module,moduleExtensionClasses);
    }
    VirtualFile[] virtualFiles=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
    if (virtualFiles != null) {
      for (      VirtualFile virtualFile : virtualFiles) {
        Module moduleForFile=ModuleUtilCore.findModuleForFile(virtualFile,project);
        if (moduleForFile != null) {
          return checkModuleForModuleExtensions(module,moduleExtensionClasses);
        }
      }
    }
  }
  return false;
}
