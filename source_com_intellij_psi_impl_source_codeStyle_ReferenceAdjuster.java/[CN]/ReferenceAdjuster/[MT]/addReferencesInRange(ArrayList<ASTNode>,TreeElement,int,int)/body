{
  if (parent.getElementType() == ElementType.JAVA_CODE_REFERENCE || parent.getElementType() == ElementType.REFERENCE_EXPRESSION) {
    array.add(parent);
    return;
  }
  if (parent.getPsi() instanceof PsiFile && PsiUtil.isInJspFile(parent.getPsi())) {
    final JspFile jspFile=(PsiUtil.getJspFile(parent.getPsi()));
    JspClass jspClass=(JspClass)jspFile.getJavaClass();
    addReferencesInRange(array,(TreeElement)jspClass.getNode(),startOffset,endOffset);
    return;
  }
  if (parent instanceof CompositeElement) {
    addReferencesInRangeForComposite(array,(CompositeElement)parent,startOffset,endOffset);
  }
}
