{
  if (myProject.isDefault()) {
    return true;
  }
  try {
    return ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
      @Override public Boolean compute(){
        return FileBasedIndex.getInstance().processValues(IdIndex.NAME,new IdIndexEntry(word,caseSensitively),null,new FileBasedIndex.ValueProcessor<Integer>(){
          final FileIndexFacade index=FileIndexFacade.getInstance(myProject);
          @Override public boolean process(          final VirtualFile file,          final Integer value){
            ProgressManager.checkCanceled();
            final int mask=value.intValue();
            if ((mask & occurrenceMask) != 0 && index.shouldBeFound(scope,file)) {
              if (!fileProcessor.process(file))               return false;
            }
            return true;
          }
        }
,scope);
      }
    }
);
  }
 catch (  IndexNotReadyException e) {
    throw new ProcessCanceledException();
  }
}
