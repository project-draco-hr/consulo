{
  final boolean productionOnly=myOrderEnumerator.isProductionOnly();
  if (type.equals(OrderRootType.SOURCES)) {
    Collections.addAll(result,rootModel.getSourceRoots(!productionOnly));
  }
 else   if (type.equals(OrderRootType.CLASSES)) {
    final CompilerModuleExtension extension=rootModel.getModuleExtension(CompilerModuleExtension.class);
    if (extension != null) {
      if (myWithoutSelfModuleOutput && myOrderEnumerator.isRootModuleModel(rootModel)) {
        if (!productionOnly) {
          Collections.addAll(result,extension.getOutputRoots(false));
        }
      }
 else {
        Collections.addAll(result,extension.getOutputRoots(!productionOnly));
      }
    }
  }
}
