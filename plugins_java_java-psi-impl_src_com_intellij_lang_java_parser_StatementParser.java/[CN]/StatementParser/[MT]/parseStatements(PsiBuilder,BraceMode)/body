{
  while (builder.getTokenType() != null) {
    final PsiBuilder.Marker statement=parseStatement(builder);
    if (statement != null)     continue;
    final IElementType tokenType=builder.getTokenType();
    if (tokenType == JavaTokenType.RBRACE) {
      if (braceMode == BraceMode.TILL_FIRST) {
        return;
      }
 else       if (braceMode == BraceMode.TILL_LAST) {
        if (builder.lookAhead(1) == null) {
          return;
        }
      }
    }
    final PsiBuilder.Marker error=builder.mark();
    builder.advanceLexer();
    if (tokenType == JavaTokenType.ELSE_KEYWORD) {
      error.error(JavaErrorMessages.message("else.without.if"));
    }
 else     if (tokenType == JavaTokenType.CATCH_KEYWORD) {
      error.error(JavaErrorMessages.message("catch.without.try"));
    }
 else     if (tokenType == JavaTokenType.FINALLY_KEYWORD) {
      error.error(JavaErrorMessages.message("finally.without.try"));
    }
 else {
      error.error(JavaErrorMessages.message("unexpected.token"));
    }
  }
}
