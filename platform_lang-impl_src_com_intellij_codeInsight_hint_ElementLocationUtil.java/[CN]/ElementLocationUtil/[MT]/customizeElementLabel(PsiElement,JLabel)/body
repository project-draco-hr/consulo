{
  if (element != null) {
    PsiFile file=element.getContainingFile();
    VirtualFile vfile=file == null ? null : file.getVirtualFile();
    if (vfile == null) {
      label.setText("");
      label.setIcon(null);
      return;
    }
    final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(element.getProject()).getFileIndex();
    final Module module=fileIndex.getModuleForFile(vfile);
    if (module != null) {
      label.setText(module.getName());
      label.setIcon(AllIcons.Nodes.Module);
    }
 else {
      final List<OrderEntry> entries=fileIndex.getOrderEntriesForFile(vfile);
      OrderEntry entry=null;
      for (      OrderEntry order : entries) {
        if (order instanceof LibraryOrderEntry || order instanceof ModuleExtensionWithSdkOrderEntry) {
          entry=order;
          break;
        }
      }
      if (entry != null) {
        label.setText(entry.getPresentableName());
        label.setIcon(AllIcons.Nodes.PpLibFolder);
      }
    }
  }
}
