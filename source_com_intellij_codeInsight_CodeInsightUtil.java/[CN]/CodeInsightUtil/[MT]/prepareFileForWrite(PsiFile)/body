{
  if (file == null) {
    return false;
  }
 else   if (!file.isWritable()) {
    final Project project=file.getProject();
    final Document document=PsiDocumentManager.getInstance(project).getDocument(file);
    final Editor editor=FileEditorManager.getInstance(project).openTextEditor(new OpenFileDescriptor(project,file.getVirtualFile()),true);
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        if (editor != null && editor.getComponent().isDisplayable()) {
          HintManager.getInstance().showErrorHint(editor,"File " + file.getVirtualFile().getPresentableUrl() + " is read-only");
        }
        document.fireReadOnlyModificationAttempt();
      }
    }
);
    return false;
  }
  return true;
}
