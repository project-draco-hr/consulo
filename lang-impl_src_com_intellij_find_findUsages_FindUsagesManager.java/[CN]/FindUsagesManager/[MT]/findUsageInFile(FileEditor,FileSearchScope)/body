{
  PsiElement[] elements=restorePsiElements(myLastSearchInFileData,true);
  if (elements == null)   return false;
  if (elements.length == 0)   return true;
  UsageInfoToUsageConverter.TargetElementsDescriptor descriptor=new UsageInfoToUsageConverter.TargetElementsDescriptor(elements);
  TextEditor textEditor=(TextEditor)editor;
  Document document=textEditor.getEditor().getDocument();
  PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
  if (psiFile == null)   return false;
  final FindUsagesHandler handler=getFindUsagesHandler(elements[0],false);
  if (handler == null)   return false;
  findUsagesInEditor(descriptor,handler,psiFile,direction,myLastSearchInFileData.myOptions,textEditor);
  return true;
}
