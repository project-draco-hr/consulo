{
  final PsiReferenceExpression expression=(PsiReferenceExpression)descriptor.getPsiElement();
  if (expression.getQualifierExpression() != null) {
    return;
  }
  final PsiField field=(PsiField)expression.resolve();
  if (field == null) {
    return;
  }
  final PsiClass fieldClass=field.getContainingClass();
  if (fieldClass == null) {
    return;
  }
  PsiClass containingClass=ClassUtils.getContainingClass(expression);
  @NonNls final String newExpression;
  if (InheritanceUtil.isInheritorOrSelf(containingClass,fieldClass,true)) {
    newExpression="this." + expression.getText();
  }
 else {
    containingClass=ClassUtils.getContainingClass(containingClass);
    if (containingClass == null) {
      return;
    }
    while (!InheritanceUtil.isInheritorOrSelf(containingClass,fieldClass,true)) {
      containingClass=ClassUtils.getContainingClass(containingClass);
      if (containingClass == null) {
        return;
      }
    }
    newExpression=containingClass.getQualifiedName() + ".this." + expression.getText();
  }
  replaceExpressionAndShorten(expression,newExpression);
}
