{
  final JPopupMenu popup=new JPopupMenu(InspectionsBundle.message("inspection.error.level.popup.menu.title"));
  TreeSet<HighlightSeverity> severities=new TreeSet<HighlightSeverity>();
  severities.add(HighlightSeverity.ERROR);
  severities.add(HighlightSeverity.WARNING);
  severities.add(HighlightSeverity.INFO);
  final Collection<HighlightInfoType.HighlightInfoTypeImpl> infoTypes=SeverityRegistrar.getRegisteredHighlightingInfoTypes();
  for (  HighlightInfoType.HighlightInfoTypeImpl info : infoTypes) {
    severities.add(info.getSeverity(null));
  }
  for (  HighlightSeverity severity : severities) {
    final HighlightDisplayLevel level=HighlightDisplayLevel.find(severity.toString());
    final JMenuItem item=new JMenuItem(renderSeverity(level.getSeverity()));
    item.setIcon(level.getIcon());
    item.addActionListener(new LevelSelection(level));
    popup.add(item);
  }
  return popup;
}
