{
  setFocusTraversalPolicy(new LayoutFocusTraversalPolicyExt());
  myFocusedCallback=focused;
  myTypeAheadDone=typeAheadDone;
  myTypeAheadCallback=typeAheadCallback;
  final long typeAhead=getDialogWrapper().getTypeAheadTimeoutMs();
  if (typeAhead <= 0) {
    myTypeAheadDone.setDone();
  }
  setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
  myWindowListener=new MyWindowListener();
  addWindowListener(myWindowListener);
  myComponentListener=new MyComponentListener();
  addComponentListener(myComponentListener);
}
