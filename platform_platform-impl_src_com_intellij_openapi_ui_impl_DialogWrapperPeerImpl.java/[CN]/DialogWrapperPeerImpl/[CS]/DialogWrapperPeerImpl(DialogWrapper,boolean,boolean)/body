{
  myWrapper=wrapper;
  myWindowManager=null;
  Application application=ApplicationManager.getApplication();
  if (application != null && application.hasComponent(WindowManager.class)) {
    myWindowManager=(WindowManagerEx)WindowManager.getInstance();
  }
  if (UIUtil.hasJdk6Dialogs()) {
    createDialog(null,canBeParent);
    if (tryToolkitModal && !isHeadless()) {
      UIUtil.setToolkitModal((MyDialog)myDialog);
    }
  }
 else {
    createDialog(JOptionPane.getRootFrame(),canBeParent);
  }
}
