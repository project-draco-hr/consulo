{
  myWrapper=wrapper;
  myWindowManager=null;
  Application application=ApplicationManager.getApplication();
  if (application != null && application.hasComponent(WindowManager.class)) {
    myWindowManager=(WindowManagerEx)WindowManager.getInstance();
  }
  createDialog(null,canBeParent);
  if (applicationModalIfPossible && !isHeadless()) {
    Dialog.ModalityType modalityType=Dialog.ModalityType.TOOLKIT_MODAL;
    if (Registry.is("ide.mac.modalDialogsOnFullscreen")) {
      modalityType=Dialog.ModalityType.APPLICATION_MODAL;
    }
    ((MyDialog)myDialog).setModalityType(modalityType);
  }
}
