{
  super.update(e);
  Presentation presentation=e.getPresentation();
  Object isSupported=presentation.getClientProperty(IS_LIBRARY_FRAME_FILTER_SUPPORTED);
  XDebugSession session=e.getData(XDebugSession.DATA_KEY);
  if (isSupported == null) {
    if (session == null) {
      presentation.setVisible(false);
      return;
    }
    isSupported=session.getDebugProcess().isLibraryFrameFilterSupported();
    presentation.putClientProperty(IS_LIBRARY_FRAME_FILTER_SUPPORTED,isSupported);
  }
  if (Boolean.TRUE.equals(isSupported)) {
    presentation.setVisible(true);
    final boolean shouldShow=!Boolean.TRUE.equals(presentation.getClientProperty(SELECTED_PROPERTY));
    presentation.setText(shouldShow ? ourTextWhenShowIsOn : ourTextWhenShowIsOff);
  }
 else {
    presentation.setVisible(false);
  }
}
