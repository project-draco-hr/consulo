{
  expression=(GrExpression)PsiUtil.skipParentheses(expression,false);
  if (expression == null)   return false;
  if (expression instanceof GrReferenceExpression) {
    final PsiElement resolved=((GrReferenceExpression)expression).resolve();
    if (resolved instanceof GrVariable) {
      if (GroovyRefactoringUtil.isLocalVariable((GrVariable)resolved)) {
        expression=((GrVariable)resolved).getInitializerGroovy();
        if (expression == null)         return false;
      }
    }
  }
  final Ref<Boolean> ref=new Ref<Boolean>(Boolean.TRUE);
  expression.accept(new GroovyRecursiveElementVisitor(){
    @Override public void visitReferenceExpression(    GrReferenceExpression refExpr){
      super.visitReferenceExpression(refExpr);
      final PsiElement resolved=refExpr.resolve();
      if (!(resolved instanceof GrVariable))       return;
      if (resolved instanceof GrField && scope.getManager().areElementsEquivalent(scope,((GrField)resolved).getContainingClass())) {
        return;
      }
      ref.set(Boolean.FALSE);
    }
  }
);
  return ref.get();
}
