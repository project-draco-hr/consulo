{
  myPanel=panel;
  myObject=object;
  myIndex=idx;
  isPopupElement=idx == -1;
  if (object != null) {
    Icon closedIcon=NavBarPresentation.getIcon(object,false);
    Icon openIcon=NavBarPresentation.getIcon(object,true);
    if (closedIcon == null && openIcon != null)     closedIcon=openIcon;
    if (openIcon == null && closedIcon != null)     openIcon=closedIcon;
    if (openIcon == null) {
      openIcon=closedIcon=EmptyIcon.create(5);
    }
    final NavBarPresentation presentation=myPanel.getPresentation();
    myText=NavBarPresentation.getPresentableText(object,myPanel.getWindow());
    myIcon=wrapIcon(openIcon,closedIcon,idx);
    myAttributes=presentation.getTextAttributes(object,false);
  }
 else {
    myText="Sample";
    myIcon=PlatformIcons.DIRECTORY_OPEN_ICON;
    myAttributes=SimpleTextAttributes.REGULAR_ATTRIBUTES;
  }
  Disposer.register(panel,this);
  setOpaque(false);
  setFont(UIUtil.isUnderAquaLookAndFeel() ? UIUtil.getLabelFont().deriveFont(11.0f) : getFont());
  if (isPopupElement || !NavBarPanel.isDecorated()) {
    setIpad(new Insets(1,2,1,2));
  }
 else {
    setIpad(new Insets(0,0,0,0));
    setMyBorder(null);
    setBorder(null);
  }
  update();
  myPadding=new JBInsets(3,3,3,3);
}
