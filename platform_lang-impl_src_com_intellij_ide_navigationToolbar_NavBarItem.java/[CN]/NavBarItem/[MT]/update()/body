{
  clear();
  setIcon(myIcon);
  final Component focusOwner=KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
  final boolean focused=isPopupElement || (focusOwner == myPanel && !myPanel.isNodePopupShowing());
  final NavBarModel model=myPanel.getModel();
  final boolean selected=isPopupElement ? myPanel.isSelectedInPopup(myObject) : model.getSelectedIndex() == myIndex;
  setPaintFocusBorder(!focused && selected && !isPopupElement);
  setFocusBorderAroundIcon(false);
  setBackground(selected && focused ? UIUtil.getListSelectionBackground() : (UIUtil.isUnderGTKLookAndFeel() ? Color.WHITE : UIUtil.getListBackground()));
  final Color fg=selected && focused ? UIUtil.getListSelectionForeground() : model.getSelectedIndex() < myIndex && model.getSelectedIndex() != -1 ? UIUtil.getInactiveTextColor() : myAttributes.getFgColor();
  final Color bg=selected && focused ? UIUtil.getListSelectionBackground() : myAttributes.getBgColor();
  append(myText,new SimpleTextAttributes(bg,fg,myAttributes.getWaveColor(),myAttributes.getStyle()));
  repaint();
}
