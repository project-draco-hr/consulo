{
  final FileTemplate[] templates=myCurrentTab.getTemplates();
  ArrayList allNames=new ArrayList();
  FileTemplate itemWithError=null;
  String errorMessage=null;
  String errorTitle=null;
  boolean errorInName=true;
  for (int i=0; i < templates.length; i++) {
    FileTemplate template=templates[i];
    boolean isClassTemplate=Comparing.strEqual(template.getName(),FileTemplateManager.INTERNAL_CLASS_TEMPLATE_NAME);
    boolean isInterfaceTemplate=Comparing.strEqual(template.getName(),FileTemplateManager.INTERNAL_INTERFACE_TEMPLATE_NAME);
    if (isClassTemplate || isInterfaceTemplate)     continue;
    String currName=template.getName();
    String currExt=template.getExtension();
    if (currName.length() == 0) {
      itemWithError=template;
      errorMessage="Please specify a name for this template";
      errorTitle="Template Name Not Specified";
      errorString[0]="Please specify template name";
      break;
    }
    if (allNames.contains(currName)) {
      itemWithError=template;
      errorMessage="Please specify a different name for this template";
      errorTitle="Template already exists";
      errorString[0]="Template with such name already exists. Please specify a different template name";
      break;
    }
    if (currExt.length() == 0) {
      itemWithError=template;
      errorMessage="Please specify an extension for this template";
      errorTitle="Template Extension Not Specified";
      errorString[0]="Please specify template extension";
      errorInName=false;
      break;
    }
    allNames.add(currName);
  }
  if (itemWithError == null) {
    return true;
  }
 else {
    final String _errorString=errorMessage;
    final String _errorTitle=errorTitle;
    final boolean _errorInName=errorInName;
    myTabbedPane.setSelectedIndex(Arrays.asList(myTabs).indexOf(list));
    selectTemplate(itemWithError);
    list.selectTemplate(itemWithError);
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      public void run(){
        if (showErrorDialog) {
          Messages.showMessageDialog(myMainPanel,_errorString,_errorTitle,Messages.getErrorIcon());
        }
        if (_errorInName) {
          myEditor.focusToNameField();
        }
 else {
          myEditor.focusToExtensionField();
        }
      }
    }
);
    return false;
  }
}
