{
  final List<ModuleBasedTarget<?>> result=new SmartList<ModuleBasedTarget<?>>();
  for (  BuildTarget<?> target : getAllTargets()) {
    if (!(target instanceof ModuleBasedTarget)) {
      continue;
    }
    final ModuleBasedTarget _target=(ModuleBasedTarget)target;
    if (module != null && !module.equals(_target.getModule())) {
      continue;
    }
switch (selector) {
case ALL:
      result.add(_target);
    break;
case PRODUCTION:
  if (!_target.isTests()) {
    result.add(_target);
  }
break;
case TEST:
if (_target.isTests()) {
result.add(_target);
}
}
}
return result;
}
