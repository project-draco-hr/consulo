{
  PsiElementFactory factory=JavaPsiFacade.getInstance(myElement.getProject()).getElementFactory();
  if (myElement instanceof PsiLiteralExpression) {
    PsiExpression newExpression=factory.createExpressionFromText("\"" + newElementName + "\"",myElement);
    return myElement.replace(newExpression);
  }
 else {
    ElementManipulator<PsiElement> manipulator=ElementManipulators.getManipulator(myElement);
    if (manipulator == null) {
      LOG.assertTrue(false,"Cannot find manipulator for " + myElement + " of class "+ myElement.getClass());
    }
    return manipulator.handleContentChange(myElement,getRangeInElement(),newElementName);
  }
}
