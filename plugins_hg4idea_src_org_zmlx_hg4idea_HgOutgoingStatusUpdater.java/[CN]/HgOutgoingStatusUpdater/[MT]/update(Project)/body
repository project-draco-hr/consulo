{
  if (!projectSettings.isCheckOutgoing()) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      new Task.Backgroundable(project,"Checking Outgoing Changesets",true){
        public void run(        @NotNull ProgressIndicator indicator){
          if (project.isDisposed())           return;
          HgOutgoingCommand command=new HgOutgoingCommand(project);
          VcsRoot[] roots=ProjectLevelVcsManager.getInstance(project).getAllVcsRoots();
          List<HgRevisionNumber> outgoing=new LinkedList<HgRevisionNumber>();
          for (          VcsRoot root : roots) {
            outgoing.addAll(command.execute(root.path));
          }
          status.setChanges(outgoing.size(),new OutgoingChangesetFormatter(outgoing));
          indicator.stop();
        }
      }
.queue();
    }
  }
,project.getDisposed());
}
