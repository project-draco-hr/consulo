{
  if (!projectSettings.isCheckOutgoing()) {
    return;
  }
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      new Task.Backgroundable(project,"Checking Outgoing Changesets",true){
        public void run(        @NotNull ProgressIndicator indicator){
          if (project.isDisposed())           return;
          HgOutgoingCommand command=new HgOutgoingCommand(project);
          VcsRoot[] roots=ProjectLevelVcsManager.getInstance(project).getAllVcsRoots();
          List<HgFileRevision> outgoing=new LinkedList<HgFileRevision>();
          for (          VcsRoot root : roots) {
            HgFile hgFile=new HgFile(root.path,new File("."));
            outgoing.addAll(command.execute(hgFile,LIMIT - outgoing.size()));
          }
          status.setChanges(outgoing.size(),new OutgoingChangesetFormatter(outgoing));
        }
      }
.queue();
    }
  }
,project.getDisposed());
}
