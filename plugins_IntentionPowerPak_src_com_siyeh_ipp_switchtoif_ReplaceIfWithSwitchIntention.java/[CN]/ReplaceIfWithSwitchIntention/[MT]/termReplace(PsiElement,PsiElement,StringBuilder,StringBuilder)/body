{
  if (target.equals(replace)) {
    out.append(stringToReplaceWith);
  }
 else   if (target.getChildren().length == 0) {
    out.append(target.getText());
  }
 else {
    final PsiElement[] children=target.getChildren();
    for (    final PsiElement child : children) {
      termReplace(child,replace,stringToReplaceWith,out);
    }
  }
}
