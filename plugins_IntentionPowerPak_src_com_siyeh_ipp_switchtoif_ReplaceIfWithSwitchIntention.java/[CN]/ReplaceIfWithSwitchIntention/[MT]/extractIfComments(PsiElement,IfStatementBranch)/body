{
  PsiComment comment=getPrevSiblingOfType(element,PsiComment.class,PsiStatement.class);
  while (comment != null) {
    final PsiElement sibling=comment.getPrevSibling();
    final String commentText;
    if (sibling instanceof PsiWhiteSpace) {
      final String whiteSpaceText=sibling.getText();
      if (whiteSpaceText.startsWith("\n")) {
        commentText=whiteSpaceText.substring(1) + comment.getText();
      }
 else {
        commentText=comment.getText();
      }
    }
 else {
      commentText=comment.getText();
    }
    out.addComment(commentText);
    comment=getPrevSiblingOfType(comment,PsiComment.class,PsiStatement.class);
  }
}
