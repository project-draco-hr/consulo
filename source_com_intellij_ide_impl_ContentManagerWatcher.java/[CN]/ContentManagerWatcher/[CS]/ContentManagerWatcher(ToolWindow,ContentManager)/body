{
  myToolWindow=toolWindow;
  myContentManager=contentManager;
  myToolWindow.setAvailable(contentManager.getContentCount() > 0,null);
  myPropertyChangeListener=new PropertyChangeListener(){
    public void propertyChange(    PropertyChangeEvent e){
      if (Content.PROP_DISPLAY_NAME.equals(e.getPropertyName())) {
        updateTitle();
      }
    }
  }
;
  contentManager.addContentManagerListener(new ContentManagerAdapter(){
    public void selectionChanged(    ContentManagerEvent e){
      updateTitle();
    }
    public void contentAdded(    ContentManagerEvent e){
      e.getContent().addPropertyChangeListener(myPropertyChangeListener);
      myToolWindow.setAvailable(true,null);
    }
    public void contentRemoved(    ContentManagerEvent e){
      e.getContent().removePropertyChangeListener(myPropertyChangeListener);
      myToolWindow.setAvailable(myContentManager.getContentCount() > 0,null);
    }
  }
);
  for (int i=0; i < myContentManager.getContentCount(); i++) {
    Content content=myContentManager.getContent(i);
    content.addPropertyChangeListener(myPropertyChangeListener);
  }
  updateTitle();
}
