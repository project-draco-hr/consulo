{
  for (  CharSpan fragment : myFragments) {
    fragment.removeByFlag(flag);
  }
  for (  GwtHighlightInfo highlightInfo : result) {
    GwtTextRange textRange=highlightInfo.getTextRange();
    for (int i=textRange.getStartOffset(); i < textRange.getEndOffset(); i++) {
      CharSpan fragment=myFragments[i];
      GwtTextAttributes textAttributes=highlightInfo.getTextAttributes();
      if (textAttributes != null) {
        add(fragment,textAttributes,highlightInfo.getTooltip(),highlightInfo.getSeverity(),flag);
      }
    }
  }
}
