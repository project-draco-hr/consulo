{
  for (int i=0; i < text.length(); i++) {
    char c=text.charAt(i);
    String labelText=mapChar(c);
    Fragment fragment=new Fragment();
    final int startIndex=i;
    if (c == ' ' || c == '\t') {
      for (int k=startIndex + 1; k < text.length(); k++) {
        char nextChar=text.charAt(k);
        if (nextChar == c) {
          labelText+=mapChar(nextChar);
          i++;
        }
 else {
          break;
        }
      }
    }
    fragment.range=new GwtTextRange(startIndex,i + 1);
    fragment.widget=new InlineHTML(labelText);
    fragment.widget.setStyleName(null);
    fragment.widget.getElement().setPropertyObject("range",fragment.range);
    fragment.lineWrap=labelText.isEmpty();
    if (fragment.lineWrap) {
      myLineCount++;
    }
    myFragments.add(fragment);
  }
}
