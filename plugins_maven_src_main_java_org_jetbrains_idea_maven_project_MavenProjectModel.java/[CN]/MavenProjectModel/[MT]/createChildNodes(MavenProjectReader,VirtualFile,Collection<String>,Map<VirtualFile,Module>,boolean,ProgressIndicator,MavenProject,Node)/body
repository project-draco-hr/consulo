{
  for (  String modulePath : ProjectUtil.collectRelativeModulePaths(mavenProject,profiles,new HashSet<String>())) {
    if (indicator != null && indicator.isCanceled()) {
      return false;
    }
    VirtualFile childFile=getMavenModuleFile(pomFile,modulePath);
    if (childFile != null) {
      Node existingRoot=findExistingRoot(childFile);
      if (existingRoot != null) {
        rootProjects.remove(existingRoot);
        node.mavenModules.add(existingRoot);
      }
 else       if (imported || unprocessedFiles.containsKey(childFile)) {
        Node module=createMavenTree(projectReader,childFile,profiles,unprocessedFiles,imported,indicator);
        if (module != null) {
          node.mavenModules.add(module);
        }
      }
    }
 else {
      LOG.info("Cannot find maven module " + modulePath);
    }
  }
  return true;
}
