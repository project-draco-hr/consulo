{
  for (  String modulePath : ProjectUtil.collectRelativeModulePaths(mavenModel,profiles,new HashSet<String>())) {
    p.checkCanceled();
    VirtualFile childFile=getMavenModuleFile(pomFile,modulePath);
    if (childFile == null) {
      LOG.info("Cannot find maven module " + modulePath);
      continue;
    }
    Node existingRoot=findExistingRoot(childFile);
    if (existingRoot != null) {
      rootProjects.remove(existingRoot);
      parentNode.mySubProjects.add(existingRoot);
    }
 else {
      Node module=createMavenTree(reader,childFile,existingModules,profiles,isExistingModuleTree,p);
      parentNode.mySubProjects.add(module);
    }
  }
}
