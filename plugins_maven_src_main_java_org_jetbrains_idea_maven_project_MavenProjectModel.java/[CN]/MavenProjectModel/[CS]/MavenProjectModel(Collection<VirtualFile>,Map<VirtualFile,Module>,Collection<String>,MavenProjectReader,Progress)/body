{
  Map<VirtualFile,Module> allFilesToImport=new HashMap<VirtualFile,Module>();
  for (  Map.Entry<VirtualFile,Module> entry : existingModules.entrySet()) {
    allFilesToImport.put(entry.getKey(),entry.getValue());
  }
  for (  VirtualFile file : filesToImport) {
    allFilesToImport.put(file,null);
  }
  while (allFilesToImport.size() != 0) {
    p.checkCanceled();
    VirtualFile nextFile=allFilesToImport.keySet().iterator().next();
    MavenProjectModel.Node node=createMavenTree(projectReader,nextFile,allFilesToImport,profiles,true,p);
    rootProjects.add(node);
  }
}
