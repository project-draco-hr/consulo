{
  if (!isValid())   return Collections.emptyList();
  List<Plugin> result=new ArrayList<Plugin>();
  collectPlugins(getMavenProject().getBuild(),result);
  List<Profile> profiles=(List<Profile>)getMavenProject().getModel().getProfiles();
  if (profiles == null)   return result;
  for (  Profile profile : profiles) {
    if (profiles.contains(profile.getId())) {
      collectPlugins(profile.getBuild(),result);
    }
  }
  return result;
}
