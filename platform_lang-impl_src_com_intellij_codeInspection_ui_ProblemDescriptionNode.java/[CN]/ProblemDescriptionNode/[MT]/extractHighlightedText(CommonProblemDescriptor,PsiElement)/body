{
  if (psiElement == null || !psiElement.isValid())   return "";
  String ref=psiElement.getText();
  if (descriptor instanceof ProblemDescriptorImpl) {
    TextRange textRange=((ProblemDescriptorImpl)descriptor).getTextRange();
    final TextRange elementRange=psiElement.getTextRange();
    if (textRange != null && elementRange != null) {
      textRange=textRange.shiftRight(-elementRange.getStartOffset());
      ref=textRange.substring(ref);
    }
  }
  return ref;
}
