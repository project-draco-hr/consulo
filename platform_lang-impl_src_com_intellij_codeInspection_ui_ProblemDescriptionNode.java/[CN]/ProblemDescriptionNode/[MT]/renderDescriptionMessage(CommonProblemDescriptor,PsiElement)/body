{
  String message=descriptor.getDescriptionTemplate();
  if (message == null)   return "";
  message=StringUtil.replace(message,"<code>","'");
  message=StringUtil.replace(message,"</code>","'");
  message=StringUtil.replace(message,"#loc","");
  if (message.contains("#ref")) {
    String ref=extractHighlightedText(descriptor,element);
    message=StringUtil.replace(message,"#ref",ref);
  }
  final int endIndex=message.indexOf("#end");
  if (endIndex > 0) {
    message=message.substring(0,endIndex);
  }
  message=StringUtil.unescapeXml(message).trim();
  return message;
}
