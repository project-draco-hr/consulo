{
  if (myClassesToIgnore.contains(componentClass)) {
    return null;
  }
  if (myClassesToReplace.containsKey(componentClass)) {
    return myClassesToReplace.get(componentClass);
  }
  Class replacementClass=FormEditingUtil.suggestReplacementClass(componentClass);
  int choice=JOptionPane.showOptionDialog(myDialogParent,UIDesignerBundle.message("snapshot.no.public.constructor",componentClass.getName()),UIDesignerBundle.message("snapshot.title"),JOptionPane.DEFAULT_OPTION,JOptionPane.QUESTION_MESSAGE,Messages.getQuestionIcon(),new String[]{UIDesignerBundle.message("snapshot.button.convert",replacementClass.getSimpleName()),UIDesignerBundle.message("snapshot.button.ignore"),CommonBundle.getCancelButtonText()},UIDesignerBundle.message("snapshot.button.convert",replacementClass.getSimpleName()));
  if (choice == 1) {
    myClassesToIgnore.add(componentClass);
    return null;
  }
  if (choice == 0) {
    myClassesToReplace.put(componentClass,replacementClass);
    return replacementClass;
  }
  throw new CancelSnapshotException();
}
