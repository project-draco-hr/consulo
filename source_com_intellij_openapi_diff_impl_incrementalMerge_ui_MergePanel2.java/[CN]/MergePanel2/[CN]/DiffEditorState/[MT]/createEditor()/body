{
  Document document=getDocument();
  if (document == null)   return null;
  Project project=myData.getProject();
  EditorEx editor;
  editor=DiffUtil.createEditor(document,project,myIndex != 1);
  if (editor == null)   return editor;
  if (myIndex == 0)   editor.setVerticalScrollbarOrientation(EditorEx.VERTICAL_SCROLLBAR_LEFT);
  if (myIndex != 1)   ((EditorMarkupModel)editor.getMarkupModel()).setErrorStripeVisible(true);
  editor.getSettings().setFoldingOutlineShown(false);
  ((FoldingModelEx)editor.getFoldingModel()).setFoldingEnabled(false);
  HashSet<EditorPlace.ViewProperty> notProcessedDefaults=new HashSet<EditorPlace.ViewProperty>(ALL_PROPERTIES);
  for (Iterator<EditorPlace.ViewProperty> iterator=myProperties.keySet().iterator(); iterator.hasNext(); ) {
    EditorPlace.ViewProperty viewProperty=iterator.next();
    notProcessedDefaults.remove(viewProperty);
    viewProperty.updateEditor(editor,myProperties.get(viewProperty),this);
  }
  for (Iterator<EditorPlace.ViewProperty> iterator=notProcessedDefaults.iterator(); iterator.hasNext(); ) {
    EditorPlace.ViewProperty viewProperty=iterator.next();
    viewProperty.updateEditor(editor,null,this);
  }
  return editor;
}
