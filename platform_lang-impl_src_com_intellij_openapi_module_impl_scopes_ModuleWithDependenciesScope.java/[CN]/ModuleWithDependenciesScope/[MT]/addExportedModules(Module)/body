{
  OrderEntry[] orderEntries=ModuleRootManager.getInstance(module).getOrderEntries();
  for (  OrderEntry orderEntry : orderEntries) {
    if (!orderEntry.isValid()) {
      continue;
    }
    if (orderEntry instanceof ModuleOrderEntry && ((ModuleOrderEntry)orderEntry).isExported()) {
      if (!myIncludeTests) {
        final DependencyScope scope=((ModuleOrderEntry)orderEntry).getScope();
        if (!scope.isForProductionCompile() && !scope.isForProductionRuntime()) {
          continue;
        }
      }
      Module exportedModule=((ModuleOrderEntry)orderEntry).getModule();
      if (!myModules.contains(exportedModule)) {
        myModules.add(exportedModule);
        addExportedModules(exportedModule);
      }
    }
  }
}
