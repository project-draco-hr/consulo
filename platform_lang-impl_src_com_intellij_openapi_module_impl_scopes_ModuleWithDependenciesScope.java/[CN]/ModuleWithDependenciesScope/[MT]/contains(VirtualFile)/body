{
  if (!myIncludeTests && myFileIndex.isInTestSourceContent(file))   return false;
  if (myModules != null) {
    final Module module=myProjectFileIndex.getModuleForFile(file);
    if (module != null)     return myModules.contains(module);
  }
  final List<OrderEntry> entries=myFileIndex.getOrderEntriesForFile(file);
  for (  OrderEntry orderEntry : entries) {
    if (myIncludeLibraries) {
      if (orderEntry instanceof LibraryOrderEntry || orderEntry instanceof JdkOrderEntry) {
        if (!myProjectFileIndex.isInLibraryClasses(file)) {
          continue;
        }
      }
      if (orderEntry instanceof ExportableOrderEntry) {
        DependencyScope scope=((ExportableOrderEntry)orderEntry).getScope();
        if (!myIncludeTests && (scope == DependencyScope.TEST || scope == DependencyScope.RUNTIME)) {
          continue;
        }
      }
      if (myIncludeOtherModules) {
        return true;
      }
 else {
        if (!(orderEntry instanceof ModuleOrderEntry))         return true;
      }
    }
 else {
      if (myIncludeOtherModules) {
        if (orderEntry instanceof ModuleSourceOrderEntry || orderEntry instanceof ModuleOrderEntry)         return true;
      }
 else {
        if (orderEntry instanceof ModuleSourceOrderEntry)         return true;
      }
    }
  }
  return false;
}
