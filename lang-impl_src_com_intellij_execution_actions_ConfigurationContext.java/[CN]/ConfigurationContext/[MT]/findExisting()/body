{
  final List<ConfigurationType> types=new ArrayList<ConfigurationType>();
  if (myRuntimeConfiguration != null) {
    types.add(myRuntimeConfiguration.getType());
  }
 else {
    if (myLocation != null) {
      final List<RuntimeConfigurationProducer> producers=PreferedProducerFind.findPreferedProducers(myLocation,this);
      if (producers == null)       return null;
      for (      RuntimeConfigurationProducer producer : producers) {
        types.add(producer.createProducer(myLocation,this).getConfigurationType());
      }
    }
  }
  for (  ConfigurationType type : types) {
    if (!(type instanceof LocatableConfigurationType))     continue;
    final LocatableConfigurationType factoryLocatable=(LocatableConfigurationType)type;
    final RunnerAndConfigurationSettingsImpl[] configurations=getRunManager().getConfigurationSettings(type);
    for (    final RunnerAndConfigurationSettingsImpl existingConfiguration : configurations) {
      if (factoryLocatable.isConfigurationByLocation(existingConfiguration.getConfiguration(),myLocation)) {
        return existingConfiguration;
      }
    }
  }
  return null;
}
