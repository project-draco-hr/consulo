{
  myFile=getVirtualFile(e);
  myProvider2State=new HashMap<FileEditorProvider,FileEditorState>();
  List<Element> providers=e.getChildren(PROVIDER_ELEMENT);
  for (  final Element provider1 : providers) {
    String typeId=provider1.getAttributeValue(EDITOR_TYPE_ID_ATTR);
    FileEditorProvider provider=FileEditorProviderManager.getInstance().getProvider(typeId);
    if (provider == null) {
      continue;
    }
    if (Boolean.valueOf(provider1.getAttributeValue(SELECTED_ATTR_VALUE))) {
      mySelectedProvider=provider;
    }
    Element stateElement=provider1.getChild(STATE_ELEMENT);
    if (stateElement == null) {
      throw new InvalidDataException();
    }
    FileEditorState state=provider.readState(stateElement,project,myFile);
    putState(provider,state);
  }
}
