{
  Project project=e.getData(DataKeys.PROJECT);
  if (project == null)   return;
  final String groupName=Messages.showInputDialog(project,UIDesignerBundle.message("message.enter.group.name"),UIDesignerBundle.message("title.add.group"),Messages.getQuestionIcon());
  if (groupName == null) {
    return;
  }
  Palette palette=Palette.getInstance(project);
  final ArrayList<GroupItem> groups=palette.getGroups();
  for (int i=groups.size() - 1; i >= 0; i--) {
    if (groupName.equals(groups.get(i).getName())) {
      Messages.showErrorDialog(project,UIDesignerBundle.message("error.group.name.unique"),CommonBundle.getErrorTitle());
      return;
    }
  }
  final GroupItem groupToBeAdded=new GroupItem(groupName);
  ArrayList<GroupItem> newGroups=new ArrayList<GroupItem>(groups);
  newGroups.add(groupToBeAdded);
  palette.setGroups(newGroups);
}
