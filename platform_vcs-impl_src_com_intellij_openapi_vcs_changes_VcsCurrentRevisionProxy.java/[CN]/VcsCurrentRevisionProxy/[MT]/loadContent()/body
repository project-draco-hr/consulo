{
  final VcsRevisionNumber currentRevision=myDiffProvider.getCurrentRevision(myFile);
  if (currentRevision == null) {
    throw new VcsException("Failed to fetch current revision");
  }
  final ContentRevision contentRevision=myDiffProvider.createFileContent(currentRevision,myFile);
  if (contentRevision == null) {
    throw new VcsException("Failed to create content for current revision");
  }
  Charset charset=myFile.getCharset();
  charset=charset == null ? EncodingManager.getInstance().getDefaultCharset() : charset;
  return new Pair<VcsRevisionNumber,byte[]>(currentRevision,contentRevision.getContent().getBytes(charset));
}
