{
  final FilePath file=getFile();
  final Pair<VcsRevisionNumber,byte[]> pair;
  try {
    pair=ContentRevisionCache.getOrLoadCurrentAsBytes(myProject,file,myVcsKey,new CurrentRevisionProvider(){
      @Override public VcsRevisionNumber getCurrentRevision() throws VcsException {
        return getCurrentRevisionNumber();
      }
      @Override public Pair<VcsRevisionNumber,byte[]> get() throws VcsException, IOException {
        return loadContent();
      }
    }
);
  }
 catch (  IOException e) {
    throw new VcsException(e);
  }
  return new ByteBackedContentRevision(){
    @Override public String getContent() throws VcsException {
      return ContentRevisionCache.getAsString(getContentAsBytes(),file,null);
    }
    @Nullable @Override public byte[] getContentAsBytes() throws VcsException {
      return pair.getSecond();
    }
    @NotNull @Override public FilePath getFile(){
      return file;
    }
    @NotNull @Override public VcsRevisionNumber getRevisionNumber(){
      return pair.getFirst();
    }
  }
;
}
