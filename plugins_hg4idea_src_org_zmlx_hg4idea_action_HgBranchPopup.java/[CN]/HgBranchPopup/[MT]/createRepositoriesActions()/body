{
  List<VirtualFile> repositories=HgUtil.getHgRepositories(myProject);
  if (repositories.size() == 1) {
    return null;
  }
  DefaultActionGroup popupGroup=new DefaultActionGroup(null,false);
  popupGroup.addSeparator("Repositories");
  boolean isMultiRepoConfig=repositories.size() > 1;
  for (  VirtualFile repository : repositories) {
    HgRepository repo=HgRepositoryImpl.getInstance(repository,myProject,myProject);
    popupGroup.add(new RootAction<HgRepository>(repo,isMultiRepoConfig ? myCurrentRepository : null,new HgBranchPopupActions(repo.getProject(),repo).createActions(null),HgUtil.getDisplayableBranchText(repo)));
  }
  return popupGroup;
}
