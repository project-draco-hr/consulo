{
  List attributes=element.getAttributes();
  List content=element.getContent();
  String space=null;
  if (attributes != null) {
    space=element.getAttributeValue("space",Namespace.XML_NAMESPACE);
  }
  Format previousFormat=currentFormat;
  if ("default".equals(space)) {
    currentFormat=userFormat;
  }
 else   if ("preserve".equals(space)) {
    currentFormat=preserveFormat;
  }
  out.write("<");
  printQualifiedName(out,element);
  int previouslyDeclaredNamespaces=namespaces.size();
  printElementNamespace(out,element,namespaces);
  printAdditionalNamespaces(out,element,namespaces);
  if (attributes != null)   printAttributes(out,attributes,element,namespaces);
  int start=skipLeadingWhite(content,0);
  int size=content.size();
  if (start >= size) {
    out.write("/>");
  }
 else {
    out.write(">");
    if (nextNonText(content,start) < size) {
      newline(out);
      printContentRange(out,content,start,size,level + 1,namespaces);
      newline(out);
      indent(out,level);
    }
 else {
      printTextRange(out,content,start,size);
    }
    out.write("</");
    printQualifiedName(out,element);
    out.write(">");
  }
  while (namespaces.size() > previouslyDeclaredNamespaces) {
    namespaces.pop();
  }
  currentFormat=previousFormat;
}
