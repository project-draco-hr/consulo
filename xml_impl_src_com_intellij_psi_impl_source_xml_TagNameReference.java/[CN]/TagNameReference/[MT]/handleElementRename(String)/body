{
  final XmlTag element=getTagElement();
  if (element == null)   return null;
  final String namespacePrefix=element.getNamespacePrefix();
  if ((newElementName.endsWith(TAG_EXTENSION) || newElementName.endsWith(TAGX_EXTENSION)) && PsiUtil.isInJspFile(element.getContainingFile())) {
    newElementName=newElementName.substring(0,newElementName.lastIndexOf('.'));
    if (namespacePrefix.length() > 0) {
      newElementName=namespacePrefix + ":" + newElementName;
    }
  }
 else   if (newElementName.indexOf(':') == -1) {
    if (namespacePrefix.length() > 0) {
      final PsiElement psiElement=resolve();
      if (psiElement instanceof PsiFile) {
        newElementName=newElementName.substring(0,newElementName.lastIndexOf('.'));
      }
      newElementName=namespacePrefix + ":" + newElementName;
    }
  }
  element.setName(newElementName);
  return element;
}
