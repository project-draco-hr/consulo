{
  if (isRtl || fontInfo.getFont().hasLayoutAttributes() || isComplexText(lineChars,start,end)) {
    return new ComplexTextFragment(lineChars,start,end,isRtl,fontInfo.getFont(),fontRenderContext);
  }
 else {
    return new SimpleTextFragment(lineChars,start,end,fontInfo);
  }
}
