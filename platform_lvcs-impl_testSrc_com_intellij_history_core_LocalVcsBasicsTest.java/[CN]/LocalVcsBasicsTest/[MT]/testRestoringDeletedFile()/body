{
  vcs.createDirectory("dir");
  long timestamp=-1;
  vcs.createFile("dir/f",null,timestamp,false);
  Entry e=vcs.getEntry("dir/f");
  vcs.delete("dir/f");
  vcs.restoreFile(e.getId(),"dir/f",cf("content"),123,true);
  Entry restored=vcs.findEntry("dir/f");
  assertNotNull(restored);
  assertEquals(e.getId(),restored.getId());
  assertEquals(c("content"),restored.getContent());
  assertEquals(123,restored.getTimestamp());
  assertTrue(restored.isReadOnly());
}
