{
  final PsiElement parent=statement == null ? null : statement.getParent();
  final boolean addParentheses;
  if (statement == null) {
    addParentheses=context != null && context.shouldInsertCurlyBrackets();
  }
 else {
    addParentheses=context != null && (context.shouldInsertCurlyBrackets() || context.myStatements.size() > 0) && parent instanceof GrControlStatement;
  }
  if (addParentheses) {
    codeBlockBuilder.append("{\n");
  }
  if (context != null) {
    insertStatementFromContextBefore(codeBlockBuilder,context);
  }
  codeBlockBuilder.append(statementBuilder);
  if (addParentheses) {
    codeBlockBuilder.append("}\n");
  }
}
