{
  if (!myClass.isValid() || !myParameterList.isValid()) {
    return false;
  }
  if (myClass.getTypeParameters().length >= myParameterList.getTypeArguments().length) {
    return false;
  }
  final PsiTypeParameterList classTypeParameterList=myClass.getTypeParameterList();
  if (classTypeParameterList == null) {
    return false;
  }
  final PsiElementFactory factory=JavaPsiFacade.getElementFactory(project);
  Map<PsiTypeParameter,Boolean> typeParameterBooleanMap=createTypeParameters(factory,classTypeParameterList.getTypeParameters(),myParameterList.getTypeParameterElements());
  if (isAddOneTypeParameter(typeParameterBooleanMap)) {
    setText(QuickFixBundle.message("add.type.parameter.text",myClass.getName()));
  }
 else {
    setText(QuickFixBundle.message("change.class.signature.text",myClass.getName(),parametersToSignatureText(typeParameterBooleanMap)));
  }
  return true;
}
