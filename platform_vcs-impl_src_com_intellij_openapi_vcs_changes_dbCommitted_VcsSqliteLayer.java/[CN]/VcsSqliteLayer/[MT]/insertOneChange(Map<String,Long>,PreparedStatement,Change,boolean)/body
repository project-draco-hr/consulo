{
  insert.setLong(6,visible ? 1 : 0);
  final ChangeTypeEnum type=ChangeTypeEnum.getChangeType(change);
  if (change.getBeforeRevision() == null) {
    insert.setLong(1,paths.get(getPath(change.getAfterRevision())));
    insert.setLong(3,type.getCode());
    SqliteUtil.insert(insert);
  }
 else   if (ChangeTypeEnum.MOVE.equals(type)) {
    final Long beforeId=paths.get(getPath(change.getBeforeRevision()));
    insert.setLong(1,beforeId);
    insert.setLong(3,ChangeTypeEnum.DELETE.getCode());
    SqliteUtil.insert(insert);
    insert.setLong(1,paths.get(getPath(change.getAfterRevision())));
    insert.setLong(4,beforeId);
    insert.setLong(3,type.getCode());
    SqliteUtil.insert(insert);
  }
 else   if (change.getAfterRevision() == null) {
    insert.setLong(1,paths.get(getPath(change.getBeforeRevision())));
    insert.setLong(3,type.getCode());
    SqliteUtil.insert(insert);
  }
 else {
    insert.setLong(1,paths.get(getPath(change.getAfterRevision())));
    insert.setLong(3,type.getCode());
    SqliteUtil.insert(insert);
  }
}
