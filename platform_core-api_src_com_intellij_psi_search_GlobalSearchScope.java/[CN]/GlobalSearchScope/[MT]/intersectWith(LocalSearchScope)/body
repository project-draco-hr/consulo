{
  PsiElement[] elements2=localScope2.getScope();
  List<PsiElement> result=new ArrayList<PsiElement>(elements2.length);
  for (  final PsiElement element2 : elements2) {
    if (PsiSearchScopeUtil.isInScope(this,element2)) {
      result.add(element2);
    }
  }
  return result.isEmpty() ? EMPTY_SCOPE : new LocalSearchScope(result.toArray(new PsiElement[result.size()]),null,localScope2.isIgnoreInjectedPsi());
}
