def add_iter(self, path, mask, onerror=None):
    'Add or modify watches over path and its subdirectories.\n\n        Yield each added or modified watch descriptor.\n\n        To ensure that this method runs to completion, you must\n        iterate over all of its results, even if you do not care what\n        they are.  For example:\n\n            for wd in w.add_iter(path, mask):\n                pass\n\n        By default, errors are ignored.  If optional arg "onerror" is\n        specified, it should be a function; it will be called with one\n        argument, an OSError instance.  It can report the error to\n        continue with the walk, or raise the exception to abort the\n        walk.'
    submask = (mask | inotify.IN_ONLYDIR)
    try:
        yield self.add(path, mask)
    except OSError as err:
        if (onerror and (err.errno not in self.ignored_errors)):
            onerror(err)
    for (root, dirs, names) in os.walk(path, topdown=False, onerror=onerror):
        for d in dirs:
            try:
                yield self.add(((root + '/') + d), submask)
            except OSError as err:
                if (onerror and (err.errno not in self.ignored_errors)):
                    onerror(err)
