{
  final Ref<T> refT=new Ref<T>();
  final TaskDescriptor pooled=new TaskDescriptor(myTaskTitle,Where.POOLED){
    @Override public void run(    ContinuationContext context){
      refT.set(calculateLong());
      if (!myWasCanceled) {
        context.next(new TaskDescriptor("final part",Where.AWT){
          @Override public void run(          ContinuationContext context){
            processResult(refT.get());
          }
        }
);
      }
    }
  }
;
  return new TaskDescriptor("short part",Where.AWT){
    @Override public void run(    ContinuationContext context){
      refT.set(calculate());
      if ((!myWasCanceled) && (!refT.isNull())) {
        processResult(refT.get());
        return;
      }
      context.next(pooled);
    }
  }
;
}
