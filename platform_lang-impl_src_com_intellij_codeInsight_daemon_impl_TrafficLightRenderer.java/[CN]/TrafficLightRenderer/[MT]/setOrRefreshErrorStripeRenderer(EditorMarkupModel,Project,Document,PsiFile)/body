{
  ApplicationManager.getApplication().assertIsDispatchThread();
  if (editorMarkupModel.isErrorStripeVisible()) {
    ErrorStripeRenderer renderer=editorMarkupModel.getErrorStripeRenderer();
    if (renderer instanceof TrafficLightRenderer) {
      ((TrafficLightRenderer)renderer).refresh();
      ((EditorMarkupModelImpl)editorMarkupModel).repaintVerticalScrollBar();
    }
 else {
      renderer=new TrafficLightRenderer(project,document,file);
      Disposer.register(((EditorImpl)editorMarkupModel.getEditor()).getDisposable(),(Disposable)renderer);
      editorMarkupModel.setErrorStripeRenderer(renderer);
    }
  }
}
