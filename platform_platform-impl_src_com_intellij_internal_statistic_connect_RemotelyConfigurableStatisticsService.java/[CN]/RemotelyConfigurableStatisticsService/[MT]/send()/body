{
  final String serviceUrl=ApplicationInfoEx.getInstanceEx().getStatisticsUrl();
  if (serviceUrl == null) {
    return new StatisticsResult(StatisticsResult.ResultCode.ERROR_IN_CONFIG,"ERROR");
  }
  if (!myConnectionService.isTransmissionPermitted()) {
    return new StatisticsResult(StatisticsResult.ResultCode.NOT_PERMITTED_SERVER,"NOT_PERMITTED");
  }
  String content=myAssistant.getData(myConnectionService.getDisabledGroups());
  if (StringUtil.isEmptyOrSpaces(content)) {
    return new StatisticsResult(StatisticsResult.ResultCode.NOTHING_TO_SEND,"NOTHING_TO_SEND");
  }
  try {
    sender.send(serviceUrl,content);
    StatisticsUploadAssistant.persistSentPatch(content);
    return new StatisticsResult(StatisticsResult.ResultCode.SEND,content);
  }
 catch (  Exception e) {
    return new StatisticsResult(StatisticsResult.ResultCode.SENT_WITH_ERRORS,e.getMessage() != null ? e.getMessage() : "NPE");
  }
}
