{
  if (myRemovingActivityNow)   return;
  final Map<BusyImpl,Set<UiActivity>> toRemove=new HashMap<BusyImpl,Set<UiActivity>>();
  try {
    myRemovingActivityNow=true;
    myActivities.remove(activity);
    final Iterator<BusyImpl> objects=myObject2Activities.keySet().iterator();
    while (objects.hasNext()) {
      BusyImpl each=objects.next();
      if (each != busy) {
        each.removeActivity(activity);
      }
      if (each.isReady()) {
        final Set<UiActivity> activities=myObject2Activities.get(busy);
        toRemove.put(busy,activities);
      }
    }
  }
  finally {
    for (    BusyImpl each : toRemove.keySet()) {
      final Set<UiActivity> activities=myObject2Activities.remove(each);
      myActivities2Object.remove(activities);
    }
    myRemovingActivityNow=false;
  }
}
