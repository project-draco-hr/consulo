{
  DefaultMutableTreeNode node=(DefaultMutableTreeNode)value;
  if (node.getUserObject() instanceof TestNodeDescriptor) {
    TestProxy proxy=((TestNodeDescriptor)node.getUserObject()).getElement();
    if (node == tree.getModel().getRoot()) {
      TreeRootNode root=(TreeRootNode)proxy;
      if (node.getChildCount() == 0) {
        if ((root.isStarted() && root.isInProgress()) || (root.isInProgress() && !root.isStarted())) {
          setIcon(PoolOfTestIcons.NOT_RAN);
          append("Instantiating tests... ",SimpleTextAttributes.REGULAR_ATTRIBUTES);
        }
 else         if (root.isStarted() && !root.isInProgress()) {
          setIcon(PoolOfTestIcons.PASSED_ICON);
          append("All Tests Passed.",SimpleTextAttributes.REGULAR_ATTRIBUTES);
        }
 else {
          setIcon(PoolOfTestIcons.NOT_RAN);
          append("No Test Results.",SimpleTextAttributes.REGULAR_ATTRIBUTES);
        }
      }
 else {
        setIcon(root.isInProgress() ? Animator.getCurrentFrame() : getIcon(proxy));
        append(root.isInProgress() ? "Running tests..." : "Test Results",SimpleTextAttributes.REGULAR_ATTRIBUTES);
      }
      if (consoleProperties.isPaused()) {
        setIcon(AllIcons.RunConfigurations.TestPaused);
      }
    }
 else {
      if (proxy.getResultMessage() != null) {
        final TestResultMessage result=proxy.getResultMessage();
        final String name=TestProxy.toDisplayText(result,consoleProperties.getProject());
        append(name,SimpleTextAttributes.REGULAR_ATTRIBUTES);
      }
 else {
        append(proxy.getName(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
      }
      setIcon(proxy.isInProgress() ? Animator.getCurrentFrame() : proxy.isInterrupted() ? PoolOfTestIcons.NOT_RAN : getIcon(proxy));
    }
  }
 else {
    setIcon(Animator.getCurrentFrame());
    append(node.getUserObject() != null ? node.getUserObject().toString() : "null",SimpleTextAttributes.REGULAR_ATTRIBUTES);
  }
}
