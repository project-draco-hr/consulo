{
  final PsiExpression expression=assignment.getRExpression();
  final Ref<Boolean> result=new Ref<Boolean>(Boolean.TRUE);
  PsiClass containingClass=field.getContainingClass();
  containingClass.accept(new PsiRecursiveElementVisitor(){
    private PsiCodeBlock currentInitializingBlock;
    public void visitCodeBlock(    PsiCodeBlock block){
      PsiElement parent=block.getParent();
      if (parent instanceof PsiClassInitializer || parent instanceof PsiMethod && ((PsiMethod)parent).isConstructor()) {
        currentInitializingBlock=block;
        super.visitCodeBlock(block);
        currentInitializingBlock=null;
      }
 else {
        super.visitCodeBlock(block);
      }
    }
    public void visitReferenceExpression(    PsiReferenceExpression reference){
      if (!result.get().booleanValue())       return;
      super.visitReferenceExpression(reference);
      if (currentInitializingBlock == null)       return;
      if (!PsiUtil.isOnAssignmentLeftHand(reference))       return;
      PsiElement resolved=reference.resolve();
      if (resolved != field)       return;
      PsiExpression rValue=((PsiAssignmentExpression)reference.getParent()).getRExpression();
      if (rValue == null || !expressionsEquivalent(rValue,expression)) {
        result.set(Boolean.FALSE);
      }
      if (initializingAssignments != null) {
        initializingAssignments.add((PsiAssignmentExpression)reference.getParent());
      }
    }
  }
);
  return result.get().booleanValue();
}
