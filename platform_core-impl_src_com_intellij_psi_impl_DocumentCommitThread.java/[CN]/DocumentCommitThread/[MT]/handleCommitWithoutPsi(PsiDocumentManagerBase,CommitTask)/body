{
  return new Processor<Document>(){
    @Override public boolean process(    Document document){
      log(task.project,"Finishing without PSI",task);
      if (!task.isStillValid() || documentManager.getCachedViewProvider(document) != null) {
        return false;
      }
      documentManager.handleCommitWithoutPsi(document);
      return true;
    }
  }
;
}
