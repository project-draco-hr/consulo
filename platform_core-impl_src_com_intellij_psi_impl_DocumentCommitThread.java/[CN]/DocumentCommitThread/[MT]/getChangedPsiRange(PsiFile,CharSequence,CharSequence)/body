{
  int psiLength=oldDocumentText.length();
  if (!file.getViewProvider().supportsIncrementalReparse(file.getLanguage())) {
    return new TextRange(0,psiLength);
  }
  int commonPrefixLength=StringUtil.commonPrefixLength(oldDocumentText,newDocumentText);
  if (commonPrefixLength == newDocumentText.length() && newDocumentText.length() == psiLength) {
    return null;
  }
  int commonSuffixLength=Math.min(StringUtil.commonSuffixLength(oldDocumentText,newDocumentText),psiLength - commonPrefixLength);
  return new TextRange(commonPrefixLength,psiLength - commonSuffixLength);
}
