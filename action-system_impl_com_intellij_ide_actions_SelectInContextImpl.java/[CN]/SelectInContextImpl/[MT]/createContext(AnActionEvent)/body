{
  DataContext dataContext=event.getDataContext();
  SelectInContext result=createEditorContext(dataContext);
  if (result != null) {
    return result;
  }
  JComponent sourceComponent=getEventComponent(event);
  if (sourceComponent == null) {
    return null;
  }
  SelectInContext selectInContext=(SelectInContext)dataContext.getData(SelectInContext.DATA_CONTEXT_ID);
  if (selectInContext == null) {
    selectInContext=createPsiContext(event);
  }
  if (selectInContext == null) {
    Navigatable descriptor=(Navigatable)dataContext.getData(DataConstants.NAVIGATABLE);
    if (!(descriptor instanceof OpenFileDescriptor)) {
      return null;
    }
    final VirtualFile file=((OpenFileDescriptor)descriptor).getFile();
    if (file != null && file.isValid()) {
      Project project=(Project)dataContext.getData(DataConstants.PROJECT);
      selectInContext=OpenFileDescriptorContext.create(project,file);
    }
  }
  return selectInContext;
}
