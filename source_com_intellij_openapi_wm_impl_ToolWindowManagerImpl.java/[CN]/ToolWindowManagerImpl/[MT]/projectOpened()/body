{
  UIManager.addPropertyChangeListener(myUIManagerPropertyChangeListener);
  LafManager.getInstance().addLafManagerListener(myLafManagerListener);
  myFrame=getWindowManager().allocateFrame(myProject);
  LOG.assertTrue(myFrame != null);
  final ArrayList commandsList=new ArrayList();
  myToolWindowsPane=new ToolWindowsPane(myFrame);
  ((IdeRootPane)myFrame.getRootPane()).setToolWindowsPane(myToolWindowsPane);
  appendUpdateToolWindowsPaneCmd(commandsList);
  final VirtualFile projectFile=myProject.getProjectFile();
  if (projectFile != null) {
    final VirtualFile parentDir=projectFile.getParent();
    LOG.assertTrue(parentDir != null);
    myFrame.setTitle(projectFile.getName() + " - [" + parentDir.getPresentableUrl()+ "]");
  }
 else {
    myFrame.setTitle(myProject.getName());
  }
  final JComponent editorComponent=FileEditorManagerEx.getInstanceEx(myProject).getComponent();
  myEditorComponentFocusWatcher.install(editorComponent);
  appendSetEditorComponentCmd(editorComponent,commandsList);
  if (myEditorComponentActive) {
    activateEditorComponentImpl(commandsList);
  }
  execute(commandsList);
}
