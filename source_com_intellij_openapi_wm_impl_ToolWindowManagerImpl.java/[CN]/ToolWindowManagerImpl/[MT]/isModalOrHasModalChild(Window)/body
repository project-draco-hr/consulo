{
  if (window instanceof Dialog) {
    final Dialog dialog=(Dialog)window;
    if (dialog.isModal() && dialog.isShowing()) {
      return true;
    }
    final Window[] ownedWindows=dialog.getOwnedWindows();
    for (int i=ownedWindows.length - 1; i >= 0; i--) {
      if (isModalOrHasModalChild(ownedWindows[i])) {
        return true;
      }
    }
  }
  return false;
}
