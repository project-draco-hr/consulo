{
  final PsiTryStatement tryStatement1=(PsiTryStatement)element.getParent();
  final StringBuilder newTryStatement=new StringBuilder("try (");
  final PsiResourceList list1=tryStatement1.getResourceList();
  boolean semicolon=false;
  if (list1 != null) {
    final List<PsiResourceVariable> variables1=list1.getResourceVariables();
    for (    PsiResourceVariable variable : variables1) {
      if (semicolon) {
        newTryStatement.append(';');
      }
 else {
        semicolon=true;
      }
      newTryStatement.append(variable.getText());
    }
  }
  final PsiCodeBlock tryBlock1=tryStatement1.getTryBlock();
  if (tryBlock1 == null) {
    return;
  }
  final PsiStatement[] statements=tryBlock1.getStatements();
  final PsiTryStatement tryStatement2=(PsiTryStatement)statements[0];
  final PsiResourceList list2=tryStatement2.getResourceList();
  if (list2 == null) {
    return;
  }
  final List<PsiResourceVariable> variables2=list2.getResourceVariables();
  for (  PsiResourceVariable variable : variables2) {
    if (semicolon) {
      newTryStatement.append(';');
    }
 else {
      semicolon=true;
    }
    newTryStatement.append(variable.getText());
  }
  newTryStatement.append(")");
  final PsiCodeBlock tryBlock2=tryStatement2.getTryBlock();
  if (tryBlock2 == null) {
    return;
  }
  newTryStatement.append(tryBlock2.getText());
  final PsiCatchSection[] catchSections=tryStatement1.getCatchSections();
  for (  PsiCatchSection section : catchSections) {
    newTryStatement.append(section.getText());
  }
  final PsiElementFactory factory=JavaPsiFacade.getElementFactory(element.getProject());
  final PsiStatement newStatement=factory.createStatementFromText(newTryStatement.toString(),element);
  tryStatement1.replace(newStatement);
}
