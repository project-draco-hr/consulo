{
  ProgressIndicator progress=ProgressManager.getInstance().getProgressIndicator();
  if (progress != null) {
    progress.pushState();
    progress.setText(VfsBundle.message("jar.copy.progress",original.getPath()));
    progress.setFraction(0);
  }
  try {
    FileUtil.copy(original,mirror);
  }
 catch (  final IOException e) {
    LOG.warn(e);
    final String path=original.getPath();
    final String message=VfsBundle.message("jar.copy.error.message",path,mirror.getPath(),e.getMessage());
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        Messages.showErrorDialog(message,VfsBundle.message("jar.copy.error.title"));
      }
    }
,ModalityState.NON_MODAL);
    myFileSystem.setNoCopyJarForPath(path);
    return original;
  }
  if (progress != null) {
    progress.popState();
  }
  return mirror;
}
