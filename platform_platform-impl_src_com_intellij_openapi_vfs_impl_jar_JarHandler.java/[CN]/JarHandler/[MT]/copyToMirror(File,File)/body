{
  ProgressManager progressManager=ProgressManager.getInstance();
  ProgressIndicator progress=progressManager.getProgressIndicator();
  if (progress != null) {
    progress.pushState();
    progress.setText(VfsBundle.message("jar.copy.progress",original.getPath()));
    progress.setFraction(0);
  }
  try {
    FileUtil.copy(original,mirror);
  }
 catch (  final IOException e) {
    final String path1=original.getPath();
    final String path2=mirror.getPath();
    ApplicationManager.getApplication().invokeLater(new Runnable(){
      @Override public void run(){
        Messages.showMessageDialog(VfsBundle.message("jar.copy.error.message",path1,path2,e.getMessage()),VfsBundle.message("jar.copy.error.title"),Messages.getErrorIcon());
      }
    }
,ModalityState.NON_MODAL);
    myFileSystem.setNoCopyJarForPath(path1);
    return original;
  }
  if (progress != null) {
    progress.popState();
  }
  return mirror;
}
