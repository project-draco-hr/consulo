{
  final Tag jarTag=new Jar(destFile,"preserve");
  final Manifest manifestTag=new Manifest();
  jarTag.add(manifestTag);
  final java.util.jar.Manifest manifest=new java.util.jar.Manifest();
  ManifestBuilder.setGlobalAttributes(manifest.getMainAttributes());
  applyManifestAttributesToTag(manifest,manifestTag);
  final Module module=instruction.getModule();
  final String moduleOutputDirPath=MakeUtil.getModuleOutputDirPath(module);
  String sourceLocation=GenerationUtils.toRelativePath(moduleOutputDirPath,moduleBaseDir,BuildProperties.getModuleBasedirProperty(module),genOptions,!module.isSavePathsRelative());
  final FileSet fileSet=new FileSet(sourceLocation);
  jarTag.add(fileSet);
  return jarTag;
}
