{
  if (into instanceof mxChildChange) {
    mxChildChange change=(mxChildChange)into;
    if (node.getFirstChild() != null && node.getFirstChild().getNodeType() == Node.ELEMENT_NODE) {
      node=node.cloneNode(true);
      Node tmp=node.getFirstChild();
      change.setChild(dec.decodeCell(tmp,false));
      Node tmp2=tmp.getNextSibling();
      tmp.getParentNode().removeChild(tmp);
      tmp=tmp2;
      while (tmp != null) {
        tmp2=tmp.getNextSibling();
        if (tmp.getNodeType() == Node.ELEMENT_NODE) {
          String id=((Element)tmp).getAttribute("id");
          if (dec.lookup(id) == null) {
            dec.decodeCell(tmp,true);
          }
        }
        tmp.getParentNode().removeChild(tmp);
        tmp=tmp2;
      }
    }
 else {
      String childRef=((Element)node).getAttribute("child");
      change.setChild((mxICell)dec.getObject(childRef));
    }
  }
  return node;
}
