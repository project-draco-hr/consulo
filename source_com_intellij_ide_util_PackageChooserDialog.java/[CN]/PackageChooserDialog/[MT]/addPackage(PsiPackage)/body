{
  if (findNodeForPackage(aPackage.getQualifiedName()) == null) {
    PsiPackage parentPackage=aPackage.getParentPackage();
    if (parentPackage == null) {
      if (aPackage.getQualifiedName().equals("")) {
        ((DefaultMutableTreeNode)myModel.getRoot()).setUserObject(aPackage);
      }
 else {
        PsiPackage defaultPackage=JavaPsiFacade.getInstance(PsiManager.getInstance(myProject).getProject()).findPackage("");
        addPackage(defaultPackage);
        DefaultMutableTreeNode defaultPackageNode=findNodeForPackage("");
        LOG.assertTrue(defaultPackageNode != null);
        defaultPackageNode.add(new DefaultMutableTreeNode(aPackage));
      }
    }
 else {
      addPackage(parentPackage);
      DefaultMutableTreeNode node=findNodeForPackage(parentPackage.getQualifiedName());
      if (node != null) {
        node.add(new DefaultMutableTreeNode(aPackage));
      }
    }
  }
}
