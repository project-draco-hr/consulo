{
  if (dirNames.size() == 0) {
    return false;
  }
  final VirtualFile[] resFiles=new VirtualFile[dirNames.size()];
  for (int i=0, n=dirNames.size(); i < n; i++) {
    final VirtualFile resFile=findOrCreateResourceFile(facet,fileName,dirNames.get(i));
    if (resFile == null) {
      return false;
    }
    resFiles[i]=resFile;
  }
  if (!ReadonlyStatusHandler.ensureFilesWritable(facet.getModule().getProject(),resFiles)) {
    return false;
  }
  final Resources[] resourcesElements=new Resources[resFiles.length];
  for (int i=0; i < resFiles.length; i++) {
    final Resources resources=AndroidUtils.loadDomElement(facet.getModule(),resFiles[i],Resources.class);
    if (resources == null) {
      reportError(facet.getModule().getProject(),AndroidBundle.message("not.resource.file.error",fileName));
      return false;
    }
    resourcesElements[i]=resources;
  }
  for (  Resources resources : resourcesElements) {
    final ResourceElement element=addValueResource(resourceType.getName(),resources);
    element.getName().setValue(resourceName);
    if (value.length() > 0) {
      element.setStringValue(value);
    }
  }
  return true;
}
