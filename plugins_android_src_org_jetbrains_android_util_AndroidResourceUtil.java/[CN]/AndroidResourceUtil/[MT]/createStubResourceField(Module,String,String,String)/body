{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final Project project=module.getProject();
      final PsiClass[] classes=JavaPsiFacade.getInstance(project).findClasses(aPackage + ".R",GlobalSearchScope.moduleScope(module));
      if (classes.length == 1) {
        final PsiClass aClass=classes[0];
        final PsiElementFactory factory=JavaPsiFacade.getElementFactory(project);
        PsiClass resTypeClass=aClass.findInnerClassByName(resClassName,false);
        if (resTypeClass == null) {
          resTypeClass=(PsiClass)aClass.add(factory.createClass(resClassName));
        }
 else         if (resTypeClass.findFieldByName(resFieldName,false) != null) {
          return;
        }
        final PsiField psiField=(PsiField)resTypeClass.add(factory.createField(resFieldName,PsiType.INT));
        PsiUtil.setModifierProperty(psiField,PsiModifier.PUBLIC,true);
        PsiUtil.setModifierProperty(psiField,PsiModifier.STATIC,true);
        PsiUtil.setModifierProperty(psiField,PsiModifier.FINAL,true);
      }
    }
  }
);
}
