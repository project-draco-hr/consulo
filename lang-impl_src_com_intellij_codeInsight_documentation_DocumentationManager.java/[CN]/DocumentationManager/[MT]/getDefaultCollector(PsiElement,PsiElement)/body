{
  return new DocumentationCollector(){
    @Nullable public String getDocumentation() throws Exception {
      final DocumentationProvider provider=getProviderFromElement(element,originalElement);
      if (myParameterInfoController != null) {
        final Object[] objects=myParameterInfoController.getSelectedElements();
        if (objects.length > 0) {
          @NonNls StringBuffer sb=null;
          for (          Object o : objects) {
            PsiElement parameter=null;
            if (o instanceof PsiElement) {
              parameter=(PsiElement)o;
            }
            if (parameter != null) {
              final SmartPsiElementPointer originalElement=parameter.getUserData(ORIGINAL_ELEMENT_KEY);
              final String str2=provider.generateDoc(parameter,originalElement != null ? originalElement.getElement() : null);
              if (str2 == null)               continue;
              if (sb == null)               sb=new StringBuffer();
              sb.append(str2);
              sb.append("<br>");
            }
 else {
              sb=null;
              break;
            }
          }
          if (sb != null)           return sb.toString();
        }
      }
      final SmartPsiElementPointer originalElement=element.getUserData(ORIGINAL_ELEMENT_KEY);
      return provider.generateDoc(element,originalElement != null ? originalElement.getElement() : null);
    }
    @Nullable public PsiElement getElement(){
      return element.isValid() ? element : null;
    }
  }
;
}
