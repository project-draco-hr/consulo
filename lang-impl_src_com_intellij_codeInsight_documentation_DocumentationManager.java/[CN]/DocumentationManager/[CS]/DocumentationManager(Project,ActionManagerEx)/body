{
  myProject=project;
  myActionManagerEx=managerEx;
  final AnActionListener actionListener=new AnActionListener(){
    public void beforeActionPerformed(    AnAction action,    DataContext dataContext){
      final JBPopup hint=getDocInfoHint();
      if (hint != null) {
        if (action instanceof HintManagerImpl.ActionToIgnore)         return;
        if (action == myActionManagerEx.getAction(IdeActions.ACTION_EDITOR_MOVE_CARET_DOWN))         return;
        if (action == myActionManagerEx.getAction(IdeActions.ACTION_EDITOR_MOVE_CARET_UP))         return;
        if (action == myActionManagerEx.getAction(IdeActions.ACTION_EDITOR_MOVE_CARET_PAGE_DOWN))         return;
        if (action == myActionManagerEx.getAction(IdeActions.ACTION_EDITOR_MOVE_CARET_PAGE_UP))         return;
        if (action == ActionManagerEx.getInstanceEx().getAction(IdeActions.ACTION_EDITOR_ESCAPE))         return;
        hint.cancel();
      }
    }
    public void beforeEditorTyping(    char c,    DataContext dataContext){
      final JBPopup hint=getDocInfoHint();
      if (hint != null) {
        hint.cancel();
      }
    }
    public void afterActionPerformed(    final AnAction action,    final DataContext dataContext){
    }
  }
;
  myActionManagerEx.addAnActionListener(actionListener,project);
  myUpdateDocAlarm=new Alarm(Alarm.ThreadToUse.OWN_THREAD,myProject);
}
