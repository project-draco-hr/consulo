{
  TestVirtualFile root=new TestVirtualFile("root");
  TestVirtualFile dir=new TestVirtualFile("dir");
  TestVirtualFile file=new TestVirtualFile("fileToLeave",null,-1L);
  root.addChild(dir);
  dir.addChild(file);
  vcs.createDirectory("root");
  vcs.createDirectory("root/dir");
  long timestamp=-1L;
  vcs.createFile("root/dir/fileToLeave",null,timestamp,false);
  long timestamp1=-1L;
  vcs.createFile("root/dir/fileToDelete",null,timestamp1,false);
  long timestamp2=-1L;
  vcs.createFile("root/dir/subdirToDelete",null,timestamp2,false);
  updateWith(root);
  assertTrue(vcs.hasEntry("root"));
  assertTrue(vcs.hasEntry("root/dir"));
  assertTrue(vcs.hasEntry("root/dir/fileToLeave"));
  assertFalse(vcs.hasEntry("root/dir/fileToDelete"));
  assertFalse(vcs.hasEntry("root/dir/subdirToDelete"));
}
