{
  final Project project=myFacet.getModule().getProject();
  String value=PropertiesComponent.getInstance(project).getValue(ANDROID_TARGET_DEVICES_PROPERTY);
  String[] selectedSerials=value != null ? fromString(value) : null;
  DeviceChooserDialog chooser=new DeviceChooserDialog(myFacet,mySupportMultipleDevices,selectedSerials,filter,showLaunchEmulator);
  chooser.show();
  IDevice[] devices=chooser.getSelectedDevices();
  if (chooser.getExitCode() != DialogWrapper.OK_EXIT_CODE || devices.length == 0) {
    return DeviceChooser.EMPTY_DEVICE_ARRAY;
  }
  PropertiesComponent.getInstance(project).setValue(ANDROID_TARGET_DEVICES_PROPERTY,toString(devices));
  return devices;
}
