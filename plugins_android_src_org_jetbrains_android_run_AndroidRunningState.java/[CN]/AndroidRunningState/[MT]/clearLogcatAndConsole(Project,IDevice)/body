{
  final boolean[] result={true};
  ApplicationManager.getApplication().invokeAndWait(new Runnable(){
    @Override public void run(){
      final ToolWindow toolWindow=ToolWindowManager.getInstance(project).getToolWindow(AndroidLogcatToolWindowFactory.TOOL_WINDOW_ID);
      if (toolWindow == null) {
        result[0]=false;
        return;
      }
      for (      Content content : toolWindow.getContentManager().getContents()) {
        final AndroidLogcatToolWindowView view=content.getUserData(AndroidLogcatToolWindowView.ANDROID_LOGCAT_VIEW_KEY);
        if (view != null && device == view.getSelectedDevice()) {
          view.getLogConsole().clear();
        }
      }
    }
  }
,ModalityState.defaultModalityState());
  if (result[0]) {
    AndroidLogcatUtil.clearLogcat(project,device);
  }
}
