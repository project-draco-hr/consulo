{
  myProcessHandler=new DefaultDebugProcessHandler();
  ConsoleView console;
  if (isDebugMode()) {
    Project project=myFacet.getModule().getProject();
    final TextConsoleBuilder builder=TextConsoleBuilderFactory.getInstance().createBuilder(project);
    console=builder.getConsole();
    if (console != null) {
      console.attachToProcess(myProcessHandler);
    }
  }
 else {
    console=attachConsole();
  }
  myConsole=console;
  if (myTargetChooser instanceof ManualTargetChooser) {
    myTargetDevices=chooseDevicesManually();
    if (myTargetDevices.length > 0) {
      PropertiesComponent.getInstance(myFacet.getModule().getProject()).setValue(ANDROID_TARGET_DEVICES_PROPERTY,toString(myTargetDevices));
    }
    if (myTargetDevices.length == 0) {
      return null;
    }
  }
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      start();
    }
  }
);
  return new DefaultExecutionResult(console,myProcessHandler);
}
