{
  myProcessHandler=new DefaultDebugProcessHandler();
  ConsoleView console;
  if (isDebugMode()) {
    Project project=myFacet.getModule().getProject();
    final TextConsoleBuilder builder=TextConsoleBuilderFactory.getInstance().createBuilder(project);
    console=builder.getConsole();
    if (console != null) {
      console.attachToProcess(myProcessHandler);
    }
  }
 else {
    console=attachConsole();
  }
  myConsole=console;
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      start();
    }
  }
);
  return new DefaultExecutionResult(console,myProcessHandler);
}
