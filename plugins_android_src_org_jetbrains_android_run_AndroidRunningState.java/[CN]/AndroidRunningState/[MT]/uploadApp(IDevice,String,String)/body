{
  if (myStopped)   return false;
  message("Uploading file\n\tlocal path: " + localPath + "\n\tremote path: "+ remotePath,STDOUT);
  String exceptionMessage;
  String errorMessage;
  try {
    SyncService service=device.getSyncService();
    if (service == null) {
      message("Can't upload file: device is not available.",STDERR);
      return false;
    }
    service.pushFile(localPath,remotePath,new MyISyncProgressMonitor());
    return true;
  }
 catch (  TimeoutException e) {
    LOG.info(e);
    exceptionMessage=e.getMessage();
    errorMessage="Connection timeout";
  }
catch (  AdbCommandRejectedException e) {
    LOG.info(e);
    exceptionMessage=e.getMessage();
    errorMessage="ADB refused the command";
  }
catch (  SyncException e) {
    LOG.info(e);
    final SyncException.SyncError errorCode=e.getErrorCode();
    errorMessage=errorCode.getMessage();
    exceptionMessage=e.getMessage();
  }
  if (errorMessage.equals(exceptionMessage) || exceptionMessage == null) {
    message(errorMessage,STDERR);
  }
 else {
    message(errorMessage + '\n' + exceptionMessage,STDERR);
  }
  return false;
}
