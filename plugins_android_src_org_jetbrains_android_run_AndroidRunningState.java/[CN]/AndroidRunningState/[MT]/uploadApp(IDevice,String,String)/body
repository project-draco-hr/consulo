{
  if (myStopped)   return false;
  message("Uploading file\n\tlocal path: " + localPath + "\n\tremote path: "+ remotePath,STDOUT);
  String exceptionMessage=null;
  String errorMessage;
  try {
    SyncService service=device.getSyncService();
    if (service == null) {
      message("Can't upload file: device is not available.",STDERR);
      return false;
    }
    service.pushFile(localPath,remotePath,new MyISyncProgressMonitor());
    SyncService.SyncResult result=service.pushFile(localPath,remotePath,new MyISyncProgressMonitor());
    int code=result.getCode();
switch (code) {
case SyncService.RESULT_OK:
      return true;
case SyncService.RESULT_CANCELED:
    errorMessage="Command canceled";
  break;
case SyncService.RESULT_CONNECTION_ERROR:
errorMessage="Connection error";
break;
case SyncService.RESULT_CONNECTION_TIMEOUT:
errorMessage="Connection timeout";
break;
case SyncService.RESULT_FILE_READ_ERROR:
errorMessage="Cannot read the file";
break;
case SyncService.RESULT_FILE_WRITE_ERROR:
errorMessage="Cannot write the file";
break;
case SyncService.RESULT_LOCAL_IS_DIRECTORY:
errorMessage="Local is directory";
break;
case SyncService.RESULT_NO_DIR_TARGET:
errorMessage="Target directory not found";
break;
case SyncService.RESULT_NO_LOCAL_FILE:
errorMessage="Local file not found";
break;
case SyncService.RESULT_NO_REMOTE_OBJECT:
errorMessage="No remote object";
break;
case SyncService.RESULT_REMOTE_IS_FILE:
errorMessage="Remote is a file";
break;
case SyncService.RESULT_REMOTE_PATH_ENCODING:
errorMessage="Incorrect remote path encoding";
break;
case SyncService.RESULT_REMOTE_PATH_LENGTH:
errorMessage="Incorrect remote path length";
break;
case SyncService.RESULT_TARGET_IS_FILE:
errorMessage="Target is a file";
break;
default :
errorMessage="Can't upload file";
}
}
 catch (TimeoutException e) {
exceptionMessage=e.getMessage();
errorMessage="Connection timeout";
}
catch (AdbCommandRejectedException e) {
exceptionMessage=e.getMessage();
errorMessage="ADB refused the command";
}
if (errorMessage.equals(exceptionMessage) || exceptionMessage == null) {
message(errorMessage,STDERR);
}
 else {
message(errorMessage + '\n' + exceptionMessage,STDERR);
}
return false;
}
