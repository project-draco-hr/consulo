{
  return new PsiElementVisitor(){
    @Override public void visitElement(    PsiElement element){
      if (element.getLanguage() == StdLanguages.JSP || element.getLanguage() == StdLanguages.JSPX) {
        return;
      }
      IElementType type=(element.getNode() != null) ? element.getNode().getElementType() : null;
      if (type == null) {
        return;
      }
      boolean check=languages.contains(type.getLanguage()) && (elementTypes.contains(type.toString()));
      if (!check) {
        return;
      }
      Checker checker=CheckerFactory.getInstance().createChecker(element,holder,isOnTheFly);
      if (checker == null) {
        return;
      }
      final List<ProblemDescriptor> problems=checker.checkElement(element);
      if (problems.isEmpty()) {
        return;
      }
      checker.addDescriptors(problems);
    }
  }
;
}
