{
  final Project project=e.getData(DataKeys.PROJECT);
  final FileEditor editor=e.getData(DataKeys.FILE_EDITOR);
  CommandProcessor commandProcessor=CommandProcessor.getInstance();
  commandProcessor.executeCommand(project,new Runnable(){
    public void run(){
      PsiDocumentManager.getInstance(project).commitAllDocuments();
      IdeDocumentHistory.getInstance(project).includeCurrentCommandAsNavigation();
      if (FindManager.getInstance(project).findNextUsageInEditor(editor)) {
        return;
      }
      FindUtil.searchAgain(project,editor);
    }
  }
,IdeBundle.message("command.find.next"),null);
}
