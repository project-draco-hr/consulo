{
  for (  final File root : committables.keySet()) {
    Collection<File> files=committables.get(root);
    if (files.isEmpty()) {
      continue;
    }
    if (progress != null) {
      progress.setText(SvnBundle.message("progress.text.committing.changes.below",root.getAbsolutePath()));
    }
    File[] filesArray=files.toArray(new File[files.size()]);
    boolean keepLocks=SvnConfiguration.getInstance(mySvnVcs.getProject()).isKeepLocks();
    try {
      SVNCommitInfo result=committer.doCommit(filesArray,keepLocks,comment,force,recursive);
      if (result != SVNCommitInfo.NULL && result.getNewRevision() >= 0) {
        SvnConfiguration.getInstance(mySvnVcs.getProject()).LAST_MERGED_REVISION=null;
        WindowManager.getInstance().getStatusBar(mySvnVcs.getProject()).setInfo(SvnBundle.message("status.text.committed.revision",result.getNewRevision()));
      }
    }
 catch (    SVNException e) {
      exception.add(new VcsException(e));
    }
  }
}
