{
  final List<VcsException> result=new ArrayList<VcsException>();
  final List<VirtualFile> notUnderWcFiles=new ArrayList<VirtualFile>();
  final SVNWCClient wcClient=mySvnVcs.createWCClient();
  final List<VirtualFile> filteredList=new ArrayList<VirtualFile>();
  for (  VirtualFile file : files) {
    if (SvnStatusUtil.fileCanBeAdded(mySvnVcs.getProject(),file)) {
      filteredList.add(file);
    }
 else {
      notUnderWcFiles.add(file);
    }
  }
  if (!notUnderWcFiles.isEmpty()) {
    final StringBuilder sb=new StringBuilder();
    for (    VirtualFile notUnderWcFile : notUnderWcFiles) {
      sb.append(notUnderWcFile.getPath()).append('\n');
    }
    result.add(new VcsException(SvnBundle.message("message.Subversion.files.can.not.be.added.to.subversion.are.not.under.working.copy.text",sb.toString())));
  }
  final List<SVNException> exceptionList=scheduleUnversionedFilesForAddition(wcClient,filteredList);
  for (  SVNException svnException : exceptionList) {
    result.add(new VcsException(svnException));
  }
  return result;
}
