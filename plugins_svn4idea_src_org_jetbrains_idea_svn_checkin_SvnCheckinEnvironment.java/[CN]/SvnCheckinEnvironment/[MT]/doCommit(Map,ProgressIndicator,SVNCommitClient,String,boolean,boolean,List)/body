{
  for (Iterator roots=committables.keySet().iterator(); roots.hasNext(); ) {
    File root=(File)roots.next();
    Collection files=(Collection)committables.get(root);
    if (files.isEmpty()) {
      continue;
    }
    if (progress != null) {
      progress.setText("Committing changes below '" + root.getAbsolutePath() + "'");
    }
    File[] filesArray=(File[])files.toArray(new File[files.size()]);
    boolean keepLocks=myKeepLocksComponent != null && myKeepLocksComponent.isKeepLocks();
    try {
      SVNCommitInfo result=committer.doCommit(filesArray,keepLocks,comment,force,recursive);
      if (result != SVNCommitInfo.NULL && result.getNewRevision() >= 0) {
        WindowManager.getInstance().getStatusBar(mySvnVcs.getProject()).setInfo("Committed revision " + result.getNewRevision() + ".");
      }
    }
 catch (    SVNException e) {
      exception.add(new VcsException(e));
    }
  }
}
