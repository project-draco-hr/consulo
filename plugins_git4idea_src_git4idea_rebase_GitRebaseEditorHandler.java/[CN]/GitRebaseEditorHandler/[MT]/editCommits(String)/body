{
  ensureOpen();
  final Ref<Boolean> isSuccess=new Ref<Boolean>();
  UIUtil.invokeAndWaitIfNeeded(new Runnable(){
    public void run(){
      try {
        if (myRebaseEditorShown) {
          GitRebaseUnstructuredEditor editor=new GitRebaseUnstructuredEditor(myProject,myRoot,path);
          editor.show();
          if (editor.isOK()) {
            editor.save();
            isSuccess.set(true);
            return;
          }
 else {
            isSuccess.set(false);
          }
        }
 else {
          setRebaseEditorShown();
          GitRebaseEditor editor=new GitRebaseEditor(myProject,myRoot,path);
          editor.show();
          if (editor.isOK()) {
            editor.save();
            isSuccess.set(true);
            return;
          }
 else {
            editor.cancel();
            isSuccess.set(true);
          }
        }
      }
 catch (      Exception e) {
        LOG.error("Failed to edit the git rebase file: " + path,e);
      }
      isSuccess.set(false);
    }
  }
);
  return (isSuccess.isNull() || !isSuccess.get().booleanValue()) ? GitRebaseEditorMain.ERROR_EXIT_CODE : 0;
}
