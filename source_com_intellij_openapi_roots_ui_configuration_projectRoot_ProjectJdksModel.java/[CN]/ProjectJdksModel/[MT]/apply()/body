{
  String[] errorString=new String[1];
  if (!canApply(errorString)) {
    throw new ConfigurationException(errorString[0]);
  }
  final ProjectJdk[] allFromTable=ProjectJdkTable.getInstance().getAllJdks();
  final ArrayList<ProjectJdk> itemsInTable=new ArrayList<ProjectJdk>();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      final ProjectJdkTable jdkTable=ProjectJdkTable.getInstance();
      for (      final ProjectJdk tableItem : allFromTable) {
        if (myProjectJdks.containsKey(tableItem)) {
          itemsInTable.add(tableItem);
        }
 else {
          jdkTable.removeJdk(tableItem);
        }
      }
    }
  }
);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      final ProjectJdkTable jdkTable=ProjectJdkTable.getInstance();
      for (      ProjectJdk originalJdk : itemsInTable) {
        final ProjectJdk modifiedJdk=myProjectJdks.get(originalJdk);
        LOG.assertTrue(modifiedJdk != null);
        jdkTable.updateJdk(originalJdk,modifiedJdk);
      }
      final ProjectJdk[] allJdks=jdkTable.getAllJdks();
      for (      final ProjectJdk projectJdk : myProjectJdks.keySet()) {
        LOG.assertTrue(projectJdk != null);
        if (ArrayUtil.find(allJdks,projectJdk) == -1) {
          jdkTable.addJdk(projectJdk);
        }
      }
    }
  }
);
  myModified=false;
}
