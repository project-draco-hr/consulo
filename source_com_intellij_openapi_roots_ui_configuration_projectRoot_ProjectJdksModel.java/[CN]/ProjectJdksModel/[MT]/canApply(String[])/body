{
  ArrayList<String> allNames=new ArrayList<String>();
  ProjectJdk itemWithError=null;
  for (  ProjectJdk currItem : myProjectJdks.values()) {
    String currName=currItem.getName();
    if (currName.length() == 0) {
      itemWithError=currItem;
      errorString[0]=ProjectBundle.message("sdk.list.name.required.error");
      break;
    }
    if (allNames.contains(currName)) {
      itemWithError=currItem;
      errorString[0]=ProjectBundle.message("sdk.list.unique.name.required.error");
      break;
    }
    final SdkAdditionalData sdkAdditionalData=currItem.getSdkAdditionalData();
    if (sdkAdditionalData != null) {
      try {
        sdkAdditionalData.checkValid(this);
      }
 catch (      ConfigurationException e) {
        final ProjectJdk projectJdk=myProjectRootConfigurable.getSelectedJdk();
        if (projectJdk == null || !Comparing.strEqual(projectJdk.getName(),currName)) {
          myProjectRootConfigurable.selectNodeInTree(currName);
        }
        throw e;
      }
    }
    allNames.add(currName);
  }
  if (itemWithError == null)   return true;
  myProjectRootConfigurable.selectNodeInTree(itemWithError.getName());
  return false;
}
