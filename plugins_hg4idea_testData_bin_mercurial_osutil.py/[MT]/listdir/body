def listdir(path, stat=False, skip=None):
    'listdir(path, stat=False) -> list_of_tuples\n\n    Return a sorted list containing information about the entries\n    in the directory.\n\n    If stat is True, each element is a 3-tuple:\n\n      (name, type, stat object)\n\n    Otherwise, each element is a 2-tuple:\n\n      (name, type)\n    '
    result = []
    prefix = path
    if (not prefix.endswith(os.sep)):
        prefix += os.sep
    names = os.listdir(path)
    names.sort()
    for fn in names:
        st = os.lstat((prefix + fn))
        if ((fn == skip) and _stat.S_ISDIR(st.st_mode)):
            return []
        if stat:
            result.append((fn, _mode_to_kind(st.st_mode), st))
        else:
            result.append((fn, _mode_to_kind(st.st_mode)))
    return result
