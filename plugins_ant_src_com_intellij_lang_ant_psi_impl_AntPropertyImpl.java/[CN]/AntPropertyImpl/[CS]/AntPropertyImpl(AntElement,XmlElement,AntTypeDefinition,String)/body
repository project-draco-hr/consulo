{
  super(parent,sourceElement,definition,nameElementAttribute);
  final AntProject project=getAntProject();
  myPropHolder=parent;
  if (parent instanceof AntTarget || parent instanceof AntCall) {
    myPropHolder=project;
  }
  final String name=getName();
  if (name != null) {
    myPropHolder.setProperty(name,this);
  }
 else {
    final String environment=getEnvironment();
    if (environment != null) {
      project.addEnvironmentPropertyPrefix(environment);
    }
 else {
      final XmlTag se=getSourceElement();
      if ("tstamp".equals(se.getName())) {
        String prefix=se.getAttributeValue("prefix");
        if (prefix == null) {
          myPropHolder.setProperty("DSTAMP",this);
          myPropHolder.setProperty("TSTAMP",this);
          myPropHolder.setProperty("TODAY",this);
        }
 else {
          prefix+='.';
          myPropHolder.setProperty(prefix + "DSTAMP",this);
          myPropHolder.setProperty(prefix + "TSTAMP",this);
          myPropHolder.setProperty(prefix + "TODAY",this);
        }
        final XmlAttributeValue value=getTstampPropertyAttributeValue();
        if (value != null && value.getValue() != null) {
          myPropHolder.setProperty(value.getValue(),this);
        }
      }
    }
  }
}
