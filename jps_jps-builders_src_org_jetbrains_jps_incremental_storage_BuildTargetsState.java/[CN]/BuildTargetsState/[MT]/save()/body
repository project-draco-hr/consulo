{
  try {
    File targetTypesFile=getTargetTypesFile();
    FileUtil.createParentDirs(targetTypesFile);
    DataOutputStream output=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(targetTypesFile)));
    try {
      output.writeInt(myMaxTargetId.get());
    }
  finally {
      output.close();
    }
  }
 catch (  IOException e) {
    LOG.info("Cannot save targets info: " + e.getMessage(),e);
  }
  for (  BuildTargetTypeState state : myTypeStates.values()) {
    state.save();
  }
}
