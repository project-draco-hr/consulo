{
  super.visitIfStatement(statement);
  final PsiElement parent=statement.getParent();
  if (parent instanceof PsiIfStatement) {
    final PsiIfStatement parentStatement=(PsiIfStatement)parent;
    final PsiStatement elseBranch=parentStatement.getElseBranch();
    if (statement.equals(elseBranch)) {
      return;
    }
  }
  int numChecks=0;
  PsiIfStatement branch=statement;
  while (branch != null) {
    final PsiExpression condition=branch.getCondition();
    if (!isInstanceofCheck(condition)) {
      return;
    }
    numChecks++;
    final PsiStatement elseBranch=branch.getElseBranch();
    if (elseBranch instanceof PsiIfStatement) {
      branch=(PsiIfStatement)elseBranch;
    }
 else {
      branch=null;
    }
  }
  if (numChecks < 2) {
    return;
  }
  registerStatementError(statement);
}
