{
  if (!containingFile.isPhysical() && containingFile.getOriginalFile() == containingFile) {
    final PsiElement context=containingFile.getContext();
    if (context == null)     return;
    final PsiFile file=context.getContainingFile();
    if (file == null || !file.isPhysical() && file.getOriginalFile() == file)     return;
  }
  Places places=probeElementsUp(host,containingFile,probeUp);
  if (places == null)   return;
  for (  Place place : places) {
    PsiFile injectedPsi=place.getInjectedPsi();
    visitor.visit(injectedPsi,place);
  }
}
