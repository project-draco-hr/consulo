{
  if (element instanceof PsiMethod) {
    builder=builder.setTailText(PsiFormatUtil.formatMethod((PsiMethod)element,substitutor,PsiFormatUtil.SHOW_PARAMETERS,PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_TYPE));
  }
 else   if (element instanceof PsiClass) {
    String tailText=getPackageText((PsiClass)element);
    final PsiClass psiClass=(PsiClass)element;
    if ((substitutor == null || substitutor.getSubstitutionMap().size() == 0) && psiClass.getTypeParameters().length > 0) {
      tailText="<" + StringUtil.join(psiClass.getTypeParameters(),new Function<PsiTypeParameter,String>(){
        public String fun(        PsiTypeParameter psiTypeParameter){
          return psiTypeParameter.getName();
        }
      }
,"," + (showSpaceAfterComma(psiClass) ? " " : "")) + ">"+ tailText;
    }
    builder=builder.setTailText(tailText,true);
  }
  return builder;
}
