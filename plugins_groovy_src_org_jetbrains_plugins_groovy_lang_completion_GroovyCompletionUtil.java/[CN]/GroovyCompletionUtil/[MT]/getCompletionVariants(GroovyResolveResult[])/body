{
  Object[] result=new Object[candidates.length];
  final LookupElementFactory factory=LookupElementFactory.getInstance();
  for (int i=0; i < result.length; i++) {
    final PsiElement element=candidates[i].getElement();
    final PsiElement context=candidates[i].getCurrentFileResolveContext();
    if (context instanceof GrImportStatement) {
      final String importedName=((GrImportStatement)context).getImportedName();
      if (importedName != null && element != null) {
        result[i]=factory.createLookupElement(element,importedName).setPresentableText(importedName);
        continue;
      }
    }
    result[i]=element;
  }
  return result;
}
