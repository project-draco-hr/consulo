{
  Document document=myEditor.getDocument();
  if (startOffset >= document.getTextLength()) {
    return false;
  }
  int endOffsetToUse=Math.min(endOffset,document.getTextLength());
  if (endOffsetToUse <= startOffset) {
    return false;
  }
  if (document.getLineNumber(startOffset) != document.getLineNumber(endOffsetToUse)) {
    return true;
  }
  return myEditor.getSettings().isAllowSingleLogicalLineFolding() && !myEditor.getSoftWrapModel().getSoftWrapsForRange(startOffset,endOffsetToUse).isEmpty();
}
