{
  if (doSanityCheck) {
    if (haveDeleteState)     myAssert(value >= HASH_FREE && value <= HASH_REMOVED);
 else     myAssert(value >= HASH_FREE && value < HASH_REMOVED);
  }
  int hashOccupiedStatusOffset=hashOccupiedStatusByteOffset(index);
  byte b=myBuffer.get(hashOccupiedStatusOffset);
  int shift=hashOccupiedStatusShift(index);
  if (haveDeleteState) {
    b=(byte)(((b & 0xFF) & ~(STATE_MASK << shift)) | (value << shift));
  }
 else {
    b=(byte)(((b & 0xFF) & ~(STATE_MASK_WITHOUT_DELETE << shift)) | (value << shift));
  }
  myBuffer.put(hashOccupiedStatusOffset,b);
  if (doSanityCheck)   myAssert(hashGetState(index) == value);
}
