{
  int address;
  if (nextFreePageCount == 0) {
    if ((height == 2 && root) || height >= 3) {
      nextFreePage=allocEmptyPage();
      nextFreePageCount=1;
      int freePage=nextFreePage + pageSize;
      int numOfFullPages=1;
      while (freePage % ROUND_FACTOR != 0 || numOfFullPages-- > 0) {
        freePage=allocEmptyPage();
        ++nextFreePageCount;
      }
    }
  }
  if (nextFreePageCount > 0) {
    address=nextFreePage;
    nextFreePage+=pageSize;
    --nextFreePageCount;
  }
 else {
    address=allocEmptyPage();
  }
  ++pagesCount;
  return address;
}
