{
  if (!"".equals(packageName)) {
    String rootPackage=findLongestExistingPackage(module.getProject(),packageName,scope);
    if (rootPackage != null) {
      final PsiDirectory[] psiDirectories=getPackageDirectories(module.getProject(),rootPackage,scope);
      if (psiDirectories.length > 0) {
        return psiDirectories[0];
      }
    }
  }
  if (!checkSourceRootsConfigured(module))   return null;
  final VirtualFile[] sourceRoots=ModuleRootManager.getInstance(module).getSourceRoots();
  for (  VirtualFile sourceRoot : sourceRoots) {
    final PsiDirectory directory=PsiManager.getInstance(module.getProject()).findDirectory(sourceRoot);
    if (directory != null) {
      return directory;
    }
  }
  return null;
}
