{
  final Set<String> gradleBinaryPaths=new HashSet<String>(gradleEntity.getPaths(LibraryPathType.BINARY));
  final Set<String> intellijBinaryPaths=new HashSet<String>();
  for (  VirtualFile file : intellijEntity.getFiles(OrderRootType.CLASSES)) {
    final String path=myPlatformFacade.getLocalFileSystemPath(file);
    if (!gradleBinaryPaths.remove(path)) {
      intellijBinaryPaths.add(path);
    }
  }
  if (!gradleBinaryPaths.isEmpty()) {
    GradleLibraryId libraryId=new GradleLibraryId(GradleEntityOwner.GRADLE,gradleEntity.getName());
    for (    String path : gradleBinaryPaths) {
      context.register(new GradleJarPresenceChange(new GradleJarId(path,libraryId),null));
    }
  }
  if (!intellijBinaryPaths.isEmpty()) {
    GradleLibraryId libraryId=new GradleLibraryId(GradleEntityOwner.INTELLIJ,GradleUtil.getLibraryName(intellijEntity));
    for (    String path : intellijBinaryPaths) {
      context.register(new GradleJarPresenceChange(null,new GradleJarId(path,libraryId)));
    }
  }
}
