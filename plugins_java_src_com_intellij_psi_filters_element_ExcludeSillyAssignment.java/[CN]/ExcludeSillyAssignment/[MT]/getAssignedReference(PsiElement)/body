{
  PsiElement each=position;
  while (each != null && !(each instanceof PsiFile)) {
    if (each instanceof PsiExpressionList || each instanceof PsiPrefixExpression || each instanceof PsiPolyadicExpression) {
      return null;
    }
    if (each instanceof PsiAssignmentExpression) {
      final PsiExpression left=((PsiAssignmentExpression)each).getLExpression();
      if (left instanceof PsiReferenceExpression) {
        final PsiReferenceExpression referenceExpression=(PsiReferenceExpression)left;
        final PsiElement qualifier=referenceExpression.getQualifier();
        if (qualifier != null) {
          if (!(qualifier instanceof PsiThisExpression) || ((PsiThisExpression)qualifier).getQualifier() != null) {
            return null;
          }
        }
        return referenceExpression;
      }
      return null;
    }
    each=each.getContext();
  }
  return null;
}
