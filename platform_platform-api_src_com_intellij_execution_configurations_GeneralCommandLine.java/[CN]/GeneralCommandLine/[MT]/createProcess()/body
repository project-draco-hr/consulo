{
  checkWorkingDirectory();
  final String[] commands=prepareCommands();
  if (StringUtil.isEmptyOrSpaces(commands[0])) {
    throw new ExecutionException(IdeBundle.message("run.configuration.error.executable.not.specified"));
  }
  try {
    final ProcessBuilder builder=new ProcessBuilder(commands);
    final Map<String,String> environment=builder.environment();
    setupEnvironment(environment);
    builder.directory(myWorkDirectory);
    builder.redirectErrorStream(myRedirectErrorStream);
    return builder.start();
  }
 catch (  IOException e) {
    throw new ProcessNotCreatedException(e.getMessage(),e,this);
  }
}
