{
  if (file == null || editor == null)   return null;
  PsiElement leafElement=file.findElementAt(editor.getCaretModel().getOffset());
  if (leafElement == null)   return null;
  ASTNode node=leafElement.getNode();
  if (node == null)   return null;
  return (PsiFile)PsiUtil.getRoot(node).getPsi();
}
