{
  if (file == null || editor == null)   return null;
  PsiElement leafElement=file.findElementAt(editor.getCaretModel().getOffset());
  if (leafElement == null)   return null;
  return (PsiFile)PsiUtil.getRoot(leafElement.getNode()).getPsi();
}
