{
  if (editor.isOneLineMode()) {
    return false;
  }
  final Project project=editor.getProject();
  final PsiDocumentManager documentManager=PsiDocumentManager.getInstance(project);
  final Document document=editor.getDocument();
  final PsiFile file=documentManager.getPsiFile(document);
  final Mover mover=getMover(editor,file);
  if (mover == null)   return false;
  final LineRange range=mover.getRangeToMove(editor,file,isDown);
  if (range == null)   return false;
  final int insertOffset=mover.getOffsetToMoveTo(editor,file,range,isDown);
  if (insertOffset == -1)   return false;
  final int maxLine=editor.offsetToLogicalPosition(editor.getDocument().getTextLength()).line;
  if (range.startLine <= 1 && !isDown)   return false;
  if (range.endLine >= maxLine - 1 && isDown)   return false;
  return true;
}
