{
  if (editor.isOneLineMode()) {
    return false;
  }
  final Project project=editor.getProject();
  final PsiDocumentManager documentManager=PsiDocumentManager.getInstance(project);
  final Document document=editor.getDocument();
  final PsiFile file=documentManager.getPsiFile(document);
  if (file == null)   return false;
  final Mover mover=getSuitableMover(editor,file);
  if (mover == null || mover.insertOffset == -1)   return false;
  final int maxLine=editor.offsetToLogicalPosition(editor.getDocument().getTextLength()).line;
  final LineRange range=mover.whatToMove;
  if (range.startLine <= 1 && !isDown)   return false;
  return range.endLine < maxLine - 1 || !isDown;
}
