{
  assertSAX(!myParseStack.isEmpty());
  ElementHandlerBase current=myParseStack.get(myParseStack.size() - 1);
  if (mySb.length() > 0) {
    current.characters(mySb.toString().trim(),myPending,myLockWrapper);
    mySb.setLength(0);
  }
  while (true) {
    final boolean createNewChild=current.startElement(uri,localName,qName,attributes);
    if (createNewChild) {
      assertSAX(myElementsMap.containsKey(qName));
      final ElementHandlerBase newChild=myElementsMap.get(qName).get();
      newChild.updateStatus(attributes,myPending,myLockWrapper);
      newChild.preEffect(myDataCallback);
      myParseStack.add(newChild);
      return;
    }
 else {
      current.postEffect(myDataCallback);
      myParseStack.remove(myParseStack.size() - 1);
      assertSAX(!myParseStack.isEmpty());
      current=myParseStack.get(myParseStack.size() - 1);
    }
  }
}
