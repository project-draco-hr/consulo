{
  super.update(e);
  final Presentation presentation=e.getPresentation();
  boolean enabled=false;
  final Project project=PlatformDataKeys.PROJECT.getData(e.getDataContext());
  if (project == null || !project.isInitialized() || project.isDisposed()) {
    presentation.setEnabled(false);
    return;
  }
  final RunnerAndConfigurationSettingsImpl selectedConfiguration=getConfiguration(project);
  if (selectedConfiguration != null && RunManagerImpl.canRunConfiguration(selectedConfiguration.getConfiguration())) {
    final ProgramRunner runner=RunnerRegistry.getInstance().getRunner(myExecutor.getId(),selectedConfiguration.getConfiguration());
    enabled=runner != null;
    if (enabled) {
      presentation.setDescription(runner.getInfo().getDescription());
    }
  }
  String text=getTemplatePresentation().getTextWithMnemonic();
  text=RunManagerEx.getInstanceEx(project).getConfig().isShowSettingsBeforeRun() ? text + "..." : text;
  presentation.setEnabled(enabled);
  presentation.setText(text);
}
