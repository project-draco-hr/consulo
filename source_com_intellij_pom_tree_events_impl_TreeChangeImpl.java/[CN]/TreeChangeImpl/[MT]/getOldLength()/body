{
  final CharTable charTableByTree=SharedImplUtil.findCharTableByTree(myParent);
  int oldLength=TreeUtil.getNotCachedLength(myParent);
  final Iterator<Map.Entry<ASTNode,ChangeInfo>> iterator=myChanges.entrySet().iterator();
  while (iterator.hasNext()) {
    final Map.Entry<ASTNode,ChangeInfo> entry=iterator.next();
    final ASTNode key=entry.getKey();
    final ChangeInfo change=entry.getValue();
    final int length=TreeUtil.getNotCachedLength(key);
switch (change.getChangeType()) {
case ChangeInfo.ADD:
      oldLength-=length;
    break;
case ChangeInfo.REMOVED:
  oldLength+=length;
break;
case ChangeInfo.REPLACE:
case ChangeInfo.CONTENTS_CHANGED:
oldLength+=change.getOldLength() - length;
break;
}
}
return oldLength;
}
