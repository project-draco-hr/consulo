{
  if (!e.getPropertyName().equals(VirtualFile.PROP_NAME))   return;
  if (!myFileFilter.isUnderContentRoot(e.getFile()))   return;
  VirtualFile newFile=new RenamedVirtualFile(e.getFile(),(String)e.getNewValue());
  if (!myFileFilter.isAllowed(newFile)) {
    if (myFileFilter.isAllowed(e.getFile()))     delete(e.getFile());
    return;
  }
  if (!myFileFilter.isAllowed(e.getFile())) {
    create(newFile);
    return;
  }
  rename(e.getFile(),(String)e.getNewValue());
}
