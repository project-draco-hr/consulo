{
  if (ProjectAttachProcessor.canAttachToProject()) {
    final Module[] modules=ModuleManager.getInstance(project).getModules();
    if (modules.length > 1) {
      Module primaryModule=ModuleAttachProcessor.getPrimaryModule(project);
      if (primaryModule == null) {
        primaryModule=modules[0];
      }
      StringBuilder result=new StringBuilder(primaryModule.getName());
      result.append(", ");
      for (      Module module : modules) {
        if (module == primaryModule)         continue;
        result.append(module.getName());
        break;
      }
      if (modules.length > 2) {
        result.append("...");
      }
      return result.toString();
    }
  }
  return super.getProjectDisplayName(project);
}
