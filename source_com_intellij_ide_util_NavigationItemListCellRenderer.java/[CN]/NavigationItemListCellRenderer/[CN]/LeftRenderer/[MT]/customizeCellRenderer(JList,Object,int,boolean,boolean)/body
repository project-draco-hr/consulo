{
  if (value instanceof NavigationItem) {
    NavigationItem element=(NavigationItem)value;
    ItemPresentation presentation=element.getPresentation();
    String name=presentation.getPresentableText();
    Color color=list.getForeground();
    FileStatus status=element.getFileStatus();
    if (status != FileStatus.NOT_CHANGED) {
      color=status.getColor();
    }
    final SimpleTextAttributes simpleTextAttributes=NodeRenderer.getSimpleTextAttributes(presentation);
    final TextAttributes textAttributes=simpleTextAttributes.toTextAttributes();
    textAttributes.setForegroundColor(color);
    append(name,SimpleTextAttributes.fromTextAttributes(textAttributes));
    setIcon(presentation.getIcon(false));
    String containerText=presentation.getLocationString();
    if (containerText != null && containerText.length() > 0) {
      append(" " + containerText,new SimpleTextAttributes(Font.PLAIN,Color.GRAY));
    }
  }
 else {
    setIcon(IconUtilEx.getEmptyIcon(false));
    append(value == null ? "" : value.toString(),new SimpleTextAttributes(Font.PLAIN,list.getForeground()));
  }
  setPaintFocusBorder(false);
  setBackground(UIManager.getColor(selected ? "List.selectionBackground" : "List.background"));
}
