{
  DefaultActionGroup extraActions=new DefaultActionGroup();
  CommittedChangesPanel panel=new CommittedChangesPanel(myProject,provider,settings,location,extraActions);
  panel.setMaxCount(maxCount);
  panel.refreshChanges(false);
  final ContentFactory factory=PeerFactory.getInstance().getContentFactory();
  if (title == null && location != null) {
    title=VcsBundle.message("browse.changes.content.title",location.toPresentableString());
  }
  final Content content=factory.createContent(panel,title,false);
  final ChangesViewContentManager contentManager=ChangesViewContentManager.getInstance(myProject);
  contentManager.addContent(content);
  contentManager.setSelectedContent(content);
  extraActions.add(new CloseTabToolbarAction(){
    public void actionPerformed(    final AnActionEvent e){
      contentManager.removeContent(content);
    }
  }
);
  ToolWindow window=ToolWindowManager.getInstance(myProject).getToolWindow(ChangesViewContentManager.TOOLWINDOW_ID);
  if (!window.isVisible()) {
    window.activate(null);
  }
}
