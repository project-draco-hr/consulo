{
  final ChangesBrowserSettingsEditor filterUI=provider.createFilterUI(true);
  ChangeBrowserSettings settings=provider.createDefaultSettings();
  boolean ok=true;
  if (filterUI != null) {
    final CommittedChangesFilterDialog dlg=new CommittedChangesFilterDialog(myProject,filterUI,settings);
    dlg.show();
    ok=dlg.getExitCode() == DialogWrapper.OK_EXIT_CODE;
    settings=dlg.getSettings();
  }
 else {
    ok=true;
  }
  if (ok) {
    if (myProject.isDefault()) {
      final List<CommittedChangeList> versions=new ArrayList<CommittedChangeList>();
      final List<VcsException> exceptions=new ArrayList<VcsException>();
      final Ref<CommittedChangesTableModel> tableModelRef=new Ref<CommittedChangesTableModel>();
      final ChangeBrowserSettings settings1=settings;
      final boolean done=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
        public void run(){
          try {
            versions.addAll(provider.getCommittedChanges(settings1,location,0));
          }
 catch (          VcsException e) {
            exceptions.add(e);
          }
          tableModelRef.set(new CommittedChangesTableModel(versions,provider.getColumns()));
        }
      }
,VcsBundle.message("browse.changes.progress.title"),true,myProject);
      if (!done)       return;
      if (!exceptions.isEmpty()) {
        Messages.showErrorDialog(myProject,VcsBundle.message("browse.changes.error.message",exceptions.get(0).getMessage()),VcsBundle.message("browse.changes.error.title"));
        return;
      }
      if (versions.isEmpty()) {
        Messages.showInfoMessage(myProject,VcsBundle.message("browse.changes.nothing.found"),VcsBundle.message("browse.changes.nothing.found.title"));
        return;
      }
      showChangesBrowser(tableModelRef.get(),title,filterUI != null,parent);
    }
 else {
      openCommittedChangesTab(provider,location,settings,0,title);
    }
  }
}
