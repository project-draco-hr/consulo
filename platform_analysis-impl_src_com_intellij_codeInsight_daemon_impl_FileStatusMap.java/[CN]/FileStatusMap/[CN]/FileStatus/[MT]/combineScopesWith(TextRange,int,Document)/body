{
  dirtyScopes.transformValues(new TObjectFunction<RangeMarker,RangeMarker>(){
    @Override public RangeMarker execute(    RangeMarker oldScope){
      RangeMarker newScope=combineScopes(oldScope,scope,fileLength,document);
      if (newScope != oldScope && oldScope != null)       oldScope.dispose();
      return newScope;
    }
  }
);
}
