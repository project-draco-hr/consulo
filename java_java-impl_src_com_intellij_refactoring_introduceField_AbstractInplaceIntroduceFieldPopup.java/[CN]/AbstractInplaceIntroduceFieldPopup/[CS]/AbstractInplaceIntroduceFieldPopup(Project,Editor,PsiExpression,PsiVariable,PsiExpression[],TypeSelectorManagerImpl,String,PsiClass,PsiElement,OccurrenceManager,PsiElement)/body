{
  super(project,editor,expr,localVariable,occurrences,typeSelectorManager,title);
  myParentClass=parentClass;
  myOccurrenceManager=occurrenceManager;
  mySmartPointerManager=SmartPointerManager.getInstance(project);
  myAnchorElement=anchorElement != null ? mySmartPointerManager.createSmartPsiElementPointer(anchorElement) : null;
  myAnchorElementIfAll=anchorElementIfAll != null ? mySmartPointerManager.createSmartPsiElementPointer(anchorElementIfAll) : null;
  for (int i=0, occurrencesLength=occurrences.length; i < occurrencesLength; i++) {
    PsiExpression occurrence=occurrences[i];
    PsiElement parent=occurrence.getParent();
    if (parent == anchorElement) {
      myAnchorIdx=i;
    }
    if (parent == anchorElementIfAll) {
      myAnchorIdxIfAll=i;
    }
  }
}
