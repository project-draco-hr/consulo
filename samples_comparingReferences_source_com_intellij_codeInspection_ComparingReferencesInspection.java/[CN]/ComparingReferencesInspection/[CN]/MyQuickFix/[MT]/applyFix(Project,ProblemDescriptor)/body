{
  try {
    PsiBinaryExpression binaryExpression=(PsiBinaryExpression)descriptor.getPsiElement();
    IElementType opSign=binaryExpression.getOperationTokenType();
    PsiExpression lExpr=binaryExpression.getLOperand();
    PsiExpression rExpr=binaryExpression.getROperand();
    if (rExpr == null)     return;
    PsiElementFactory factory=JavaPsiFacade.getInstance(project).getElementFactory();
    PsiMethodCallExpression equalsCall=(PsiMethodCallExpression)factory.createExpressionFromText("a.equals(b)",null);
    equalsCall.getMethodExpression().getQualifierExpression().replace(lExpr);
    equalsCall.getArgumentList().getExpressions()[0].replace(rExpr);
    PsiExpression result=(PsiExpression)binaryExpression.replace(equalsCall);
    if (opSign == JavaTokenType.NE) {
      PsiPrefixExpression negation=(PsiPrefixExpression)factory.createExpressionFromText("!a",null);
      negation.getOperand().replace(result);
      result.replace(negation);
    }
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
