{
  String groupId=settings.getGroupId();
  if (!isRegistered(groupId)) {
    myIdToSettingsMap.put(groupId,settings);
  }
 else   if (settings.getDisplayType() == NotificationDisplayType.TOOL_WINDOW && !hasToolWindowCapability(groupId)) {
    ObjectUtils.assertNotNull(_getSettings(groupId)).setDisplayType(NotificationDisplayType.TOOL_WINDOW);
    myToolWindowCapable.put(groupId,null);
  }
}
