{
  final Module module=getSelectedModule();
  if (module == null || !myProvider.isEnabledForModuleType(ModuleType.get(module))) {
    return false;
  }
  final ProjectFacetsConfigurator facetsProvider=myModuleStructureConfigurable.getFacetConfigurator();
  if (!myProvider.canAddSupport(module,facetsProvider)) {
    return false;
  }
  final String underlyingFrameworkTypeId=myFrameworkType.getUnderlyingFrameworkTypeId();
  if (underlyingFrameworkTypeId == null)   return true;
  final FrameworkSupportInModuleProvider underlyingProvider=FrameworkSupportUtil.findProvider(underlyingFrameworkTypeId,FrameworkSupportUtil.getAllProviders());
  if (underlyingProvider == null) {
    LOG.error("framework not found by id " + underlyingFrameworkTypeId);
  }
  return underlyingProvider.isSupportAlreadyAdded(module,facetsProvider);
}
