{
  try {
    if (command.size() != 1) {
      String[] envVariables=EnvironmentUtil.getFlattenEnvironmentProperties();
      if (envVariables.length == 0) {
        myProcess=Runtime.getRuntime().exec(command.toArray(new String[command.size()]),envVariables);
      }
 else {
        myProcess=Runtime.getRuntime().exec(command.toArray(new String[command.size()]));
      }
    }
 else {
      myProcess=Runtime.getRuntime().exec(command.get(0));
    }
    myInputStream=myProcess.getInputStream();
    myOutputStream=myProcess.getOutputStream();
    myReadFromErrorStreamAlarm.addRequest(myReadFromErrorStreamRequest,100,getExecutor().getCurrentModalityState());
  }
 catch (  Exception e) {
    closeInternal();
    throw new AuthenticationException(e.getLocalizedMessage(),e);
  }
}
