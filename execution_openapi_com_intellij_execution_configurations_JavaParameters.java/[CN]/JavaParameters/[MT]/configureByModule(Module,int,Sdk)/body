{
  if ((classPathType & JDK_ONLY) != 0) {
    if (jdk == null) {
      throw CantRunException.noJdkConfigured();
    }
    myJdk=jdk;
  }
  if ((classPathType & CLASSES_ONLY) == 0) {
    return;
  }
  Charset encoding=EncodingProjectManager.getInstance(module.getProject()).getEncoding(null,true);
  if (encoding != null) {
    myCharset=encoding;
  }
  ProjectRootsTraversing.collectRoots(module,(classPathType & TESTS_ONLY) != 0 ? ProjectClasspathTraversing.FULL_CLASSPATH_RECURSIVE : ProjectClasspathTraversing.FULL_CLASSPATH_WITHOUT_TESTS,myClassPath);
}
