{
  if (!reference.isQualified()) {
    return false;
  }
  final PsiElement directParent=reference.getParent();
  if (directParent instanceof PsiMethodCallExpression || directParent instanceof PsiAssignmentExpression || directParent instanceof PsiVariable) {
    return false;
  }
  final PsiElement parent=PsiTreeUtil.getParentOfType(reference,PsiImportStatementBase.class,PsiPackageStatement.class,PsiCodeFragment.class);
  if (parent != null) {
    return false;
  }
  final PsiElement target=reference.resolve();
  if (!(target instanceof PsiClass)) {
    return false;
  }
  final PsiClass aClass=(PsiClass)target;
  final String fqName=aClass.getQualifiedName();
  if (fqName == null) {
    return false;
  }
  final String text=stripAngleBrackets(reference.getText());
  return text.equals(fqName);
}
