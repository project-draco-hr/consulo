{
  if (document instanceof PlainDocument) {
    try {
      ((PlainDocument)document).remove(0,((PlainDocument)document).getLength());
      ((PlainDocument)document).insertString(0,value,null);
    }
 catch (    BadLocationException e) {
      throw new RuntimeException(e);
    }
  }
 else {
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        ((com.intellij.openapi.editor.Document)document).replaceString(0,((com.intellij.openapi.editor.Document)document).getTextLength(),value);
      }
    }
);
  }
}
