{
  final CompileContext context=builderContext.getCompileContext();
  final Artifact[] artifacts=getArtifactsToBuild(context.getCompileScope());
  for (  Artifact artifact : artifacts) {
    final String outputPath=artifact.getOutputPath();
    if (outputPath == null || outputPath.length() == 0) {
      context.addMessage(CompilerMessageCategory.ERROR,"Cannot build '" + artifact.getName() + "' artifact: output path is not specified",null,-1,-1);
      continue;
    }
    collectItems(builderContext,artifact,outputPath);
  }
  context.putUserData(AFFECTED_ARTIFACTS,new HashSet<Artifact>(Arrays.asList(artifacts)));
  return builderContext.getProcessingItems();
}
