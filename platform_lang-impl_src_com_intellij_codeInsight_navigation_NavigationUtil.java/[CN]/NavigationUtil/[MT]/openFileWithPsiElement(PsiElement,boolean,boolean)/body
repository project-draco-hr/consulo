{
  boolean openAsNative=false;
  if (element instanceof PsiFile) {
    VirtualFile virtualFile=((PsiFile)element).getVirtualFile();
    if (virtualFile != null) {
      openAsNative=NativeFileIconUtil.isNativeFileType(virtualFile);
    }
  }
  if (searchForOpen) {
    element.putUserData(FileEditorManager.USE_CURRENT_WINDOW,null);
  }
 else {
    element.putUserData(FileEditorManager.USE_CURRENT_WINDOW,true);
  }
  if (openAsNative || !activatePsiElementIfOpen(element,searchForOpen,requestFocus)) {
    final NavigationItem navigationItem=(NavigationItem)element;
    if (!navigationItem.canNavigate())     return false;
    navigationItem.navigate(requestFocus);
    return true;
  }
  element.putUserData(FileEditorManager.USE_CURRENT_WINDOW,null);
  return false;
}
