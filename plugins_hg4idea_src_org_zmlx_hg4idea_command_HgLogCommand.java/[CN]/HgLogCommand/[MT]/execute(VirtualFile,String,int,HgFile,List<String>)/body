{
  List<String> arguments=new LinkedList<String>();
  if (followCopies) {
    arguments.add("--follow");
  }
  if (includeRemoved) {
    if (!(followCopies && logFile)) {
      arguments.add("--removed");
    }
  }
  arguments.add("--template");
  arguments.add(template);
  if (limit != -1) {
    arguments.add("--limit");
    arguments.add(String.valueOf(limit));
  }
  if (argsForCmd != null) {
    arguments.addAll(argsForCmd);
  }
  if (logFile) {
    arguments.add(hgFile.getRelativePath());
  }
  return new HgCommandExecutor(project).executeInCurrentThread(repo,"log",arguments);
}
