{
  final VirtualFile testee;
  if (file.getFileSystem() instanceof JarFileSystem) {
    testee=JarFileSystem.getInstance().getVirtualFileForJar(file);
    if (testee == null)     return false;
  }
 else {
    testee=file;
  }
  for (  VirtualFile root : ModuleRootManager.getInstance(getValue()).getContentRoots()) {
    if (VfsUtil.isAncestor(root,testee,false))     return true;
  }
  return false;
}
