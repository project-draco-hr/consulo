{
  int arrayCount=0;
  ASTNode name=SourceTreeToPsiMap.psiElementToTree(anchor);
  for (ASTNode child=name.getTreeNext(); child != null; child=child.getTreeNext()) {
    IElementType i=child.getElementType();
    if (i == ElementType.LBRACKET) {
      arrayCount++;
    }
 else     if (i != ElementType.RBRACKET && i != ElementType.WHITE_SPACE && i != ElementType.C_STYLE_COMMENT && i != JavaDocElementType.DOC_COMMENT && i != JavaTokenType.DOC_COMMENT && i != ElementType.END_OF_LINE_COMMENT) {
      break;
    }
  }
  PsiType type;
  if (context != null && typeElement instanceof PsiTypeElementImpl) {
    type=((PsiTypeElementImpl)typeElement).getDetachedType(context);
  }
 else {
    type=typeElement.getType();
  }
  for (int i=0; i < arrayCount; i++) {
    type=type.createArrayType();
  }
  return type;
}
