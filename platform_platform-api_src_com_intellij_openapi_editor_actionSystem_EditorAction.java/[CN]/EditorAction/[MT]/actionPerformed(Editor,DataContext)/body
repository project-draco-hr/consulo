{
  if (editor == null)   return;
  final EditorActionHandler handler=getHandler();
  Runnable command=new Runnable(){
    @Override public void run(){
      handler.execute(editor,null,getProjectAwareDataContext(editor,dataContext));
    }
  }
;
  if (!handler.executeInCommand(editor,dataContext)) {
    command.run();
    return;
  }
  String commandName=getTemplatePresentation().getText();
  if (commandName == null)   commandName="";
  CommandProcessor.getInstance().executeCommand(editor.getProject(),command,commandName,handler.getCommandGroupId(editor),UndoConfirmationPolicy.DEFAULT,editor.getDocument());
}
