{
synchronized (myDisposeLock) {
    if (myIsDisposed)     return;
    for (    AbstractVcs vcs : myActiveVcss) {
      vcs.deactivate();
    }
    myActiveVcss.clear();
    AbstractVcs[] allVcss=myVcss.toArray(new AbstractVcs[myVcss.size()]);
    for (    AbstractVcs allVcs : allVcss) {
      unregisterVcs(allVcs);
    }
    try {
      myContentManager=null;
      ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
      if (toolWindowManager != null && toolWindowManager.getToolWindow(ToolWindowId.VCS) != null) {
        toolWindowManager.unregisterToolWindow(ToolWindowId.VCS);
      }
    }
  finally {
      myIsDisposed=true;
    }
  }
}
