{
  myListener=listener;
synchronized (VirtualFilePointerManagerImpl.this) {
    Collection<VirtualFilePointerImpl> set=myUrlToPointerMaps.get(listener).values();
    ArrayList<VirtualFilePointer> result=new ArrayList<VirtualFilePointer>(pointers);
    result.retainAll(set);
    myPointers=result.isEmpty() ? VirtualFilePointer.EMPTY_ARRAY : result.toArray(new VirtualFilePointer[result.size()]);
  }
}
