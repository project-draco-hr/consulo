{
  while (!path.isEmpty() && path.charAt(path.length() - 1) == '/' && !(protocol.equals(JarFileSystem.PROTOCOL) && path.endsWith(JarFileSystem.JAR_SEPARATOR))) {
    path=StringUtil.trimEnd(path,"/");
  }
  return path;
}
