{
  while (!path.isEmpty() && path.charAt(path.length() - 1) == '/' && !(fileSystem instanceof ArchiveFileSystem) && path.endsWith(ArchiveFileSystem.ARCHIVE_SEPARATOR)) {
    path=StringUtil.trimEnd(path,"/");
  }
  return path;
}
