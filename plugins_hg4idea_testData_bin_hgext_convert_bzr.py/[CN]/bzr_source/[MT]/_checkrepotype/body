def _checkrepotype(self, path):
    try:
        from bzrlib import bzrdir
        dir = bzrdir.BzrDir.open_containing(path)[0]
        try:
            tree = dir.open_workingtree(recommend_upgrade=False)
            branch = tree.branch
        except (errors.NoWorkingTree, errors.NotLocalUrl) as e:
            tree = None
            branch = dir.open_branch()
        if ((tree is not None) and (tree.bzrdir.root_transport.base != branch.bzrdir.root_transport.base)):
            self.ui.warn(_('warning: lightweight checkouts may cause conversion failures, try with a regular branch instead.\n'))
    except:
        self.ui.note(_('bzr source type could not be determined\n'))
