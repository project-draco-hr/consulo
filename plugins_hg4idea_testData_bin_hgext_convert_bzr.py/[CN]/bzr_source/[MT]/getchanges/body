def getchanges(self, version):
    self._modecache = {}
    self._revtree = self.sourcerepo.revision_tree(version)
    parentids = self._parentids.pop(version)
    prevtree = self.sourcerepo.revision_tree(parentids[0])
    return self._gettreechanges(self._revtree, prevtree)
