{
  PsiElement[] children=getChildren();
  PsiElement element;
  if (children.length == 0) {
    element=add(member);
  }
 else {
    PsiElement anchor=children[children.length - 1];
    if (!anchor.getText().matches("\n\n")) {
      GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(getProject());
      PsiElement separator=factory.createLineTerminator(1);
      if (anchor.getText().matches("(\\s*\n\\s*)+")) {
        anchor=anchor.replace(separator);
      }
 else {
        anchor=addAfter(separator,anchor);
      }
      separator=factory.createLineTerminator(1);
      anchor=addAfter(separator,anchor);
    }
    element=addAfter(member,anchor);
  }
  return (T)element;
}
