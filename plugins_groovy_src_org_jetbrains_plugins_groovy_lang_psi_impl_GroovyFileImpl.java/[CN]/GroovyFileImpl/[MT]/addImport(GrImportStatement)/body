{
  PsiElement anchor=getAnchorToInsertImportAfter();
  final PsiElement result=addAfter(statement,anchor);
  boolean isAliasedImport=false;
  if (anchor instanceof GrImportStatement) {
    isAliasedImport=!((GrImportStatement)anchor).isAliasedImport() && statement.isAliasedImport() || ((GrImportStatement)anchor).isAliasedImport() && !statement.isAliasedImport();
  }
  if (anchor != null) {
    int lineFeedCount=0;
    if (!(anchor instanceof GrImportStatement) || isAliasedImport) {
      lineFeedCount++;
    }
    final PsiElement prev=result.getPrevSibling();
    if (prev instanceof PsiWhiteSpace) {
      lineFeedCount+=StringUtil.getOccurenceCount(prev.getText(),'\n');
    }
    if (lineFeedCount > 0) {
      getNode().addLeaf(GroovyTokenTypes.mNLS,StringUtil.repeatSymbol('\n',lineFeedCount),result.getNode());
    }
    if (prev instanceof PsiWhiteSpace) {
      prev.delete();
    }
  }
  GrImportStatement importStatement=(GrImportStatement)result;
  PsiElement next=importStatement.getNextSibling();
  if (next != null) {
    ASTNode node=next.getNode();
    if (node != null && GroovyTokenTypes.mNLS == node.getElementType()) {
      next.replace(GroovyPsiElementFactory.getInstance(statement.getProject()).createLineTerminator(2));
    }
  }
  return importStatement;
}
