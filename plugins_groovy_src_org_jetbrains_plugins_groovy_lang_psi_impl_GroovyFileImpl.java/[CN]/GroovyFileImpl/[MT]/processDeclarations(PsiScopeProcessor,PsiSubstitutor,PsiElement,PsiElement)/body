{
  for (  final GrTopLevelDefintion defintion : getTopLevelDefinitions()) {
    if (!ResolveUtil.processElement(processor,defintion))     return false;
  }
  PsiClass scriptClass=getManager().findClass(SCRIPT_BASE_CLASS_NAME,getResolveScope());
  if (scriptClass != null) {
    if (!scriptClass.processDeclarations(processor,substitutor,lastParent,place))     return false;
    if (!ResolveUtil.processDefaultMethods(scriptClass,processor))     return false;
  }
  if (!ResolveUtil.processChildren(this,processor,substitutor,lastParent,place))   return false;
  for (  final String implicitlyImported : IMPLICITLY_IMPORTED_PACKAGES) {
    PsiPackage aPackage=getManager().findPackage(implicitlyImported);
    if (aPackage != null && !aPackage.processDeclarations(processor,substitutor,lastParent,place))     return false;
  }
  String currentPackageName=getPackageName();
  PsiPackage currentPackage=getManager().findPackage(currentPackageName);
  return currentPackage == null || currentPackage.processDeclarations(processor,substitutor,lastParent,place);
}
