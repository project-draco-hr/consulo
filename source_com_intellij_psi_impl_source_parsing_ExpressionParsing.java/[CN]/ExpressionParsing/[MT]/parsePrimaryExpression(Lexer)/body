{
  final LexerPosition startPos=lexer.getCurrentPosition();
  CompositeElement element=parsePrimaryExpressionStart(lexer);
  if (element == null)   return null;
  while (true) {
    IElementType i=lexer.getTokenType();
    if (i == DOT) {
{
        final LexerPosition pos=lexer.getCurrentPosition();
        TreeElement dot=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
        lexer.advance();
        IElementType tokenType=lexer.getTokenType();
        if (tokenType == LT) {
          final TreeElement referenceParameterList=parseReferenceParameterList(lexer,false);
          CompositeElement element1=Factory.createCompositeElement(REFERENCE_EXPRESSION);
          TreeUtil.addChildren(element1,element);
          TreeUtil.addChildren(element1,dot);
          TreeUtil.addChildren(element1,referenceParameterList);
          if (lexer.getTokenType() == IDENTIFIER) {
            TreeUtil.addChildren(element1,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
            lexer.advance();
          }
 else {
            TreeUtil.addChildren(element1,Factory.createErrorElement(JavaErrorMessages.message("expected.identifier")));
            return element1;
          }
          element=element1;
        }
 else         if (tokenType == CLASS_KEYWORD && element.getElementType() == REFERENCE_EXPRESSION) {
          final LexerPosition pos1=lexer.getCurrentPosition();
          lexer.restore(startPos);
          CompositeElement element1=parseClassObjectAccessExpression(lexer);
          if (lexer.getTokenStart() <= pos1.getOffset()) {
            lexer.restore(pos1);
            TreeUtil.addChildren(element,dot);
            TreeUtil.addChildren(element,Factory.createErrorElement(JavaErrorMessages.message("expected.identifier")));
            return element;
          }
          element=element1;
        }
 else         if (tokenType == NEW_KEYWORD) {
          element=parseNewExpression(lexer,element,dot);
        }
 else         if ((tokenType == THIS_KEYWORD || tokenType == SUPER_KEYWORD) && element.getElementType() == REFERENCE_EXPRESSION) {
          lexer.restore(startPos);
          CompositeElement element1=parseJavaCodeReference(lexer,false,true);
          if (element1 == null || lexer.getTokenType() != DOT || lexer.getTokenStart() != pos.getOffset()) {
            lexer.restore(pos);
            return element;
          }
          IElementType type=tokenType == THIS_KEYWORD ? THIS_EXPRESSION : SUPER_EXPRESSION;
          CompositeElement element2=Factory.createCompositeElement(type);
          TreeUtil.addChildren(element2,element1);
          TreeUtil.addChildren(element2,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
          lexer.advance();
          if (lexer.getTokenType() != tokenType) {
            lexer.restore(pos);
            return element;
          }
          TreeUtil.addChildren(element2,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
          lexer.advance();
          element=element2;
        }
 else         if (tokenType == SUPER_KEYWORD) {
          CompositeElement element1=Factory.createCompositeElement(REFERENCE_EXPRESSION);
          TreeUtil.addChildren(element1,element);
          TreeUtil.addChildren(element1,dot);
          TreeUtil.addChildren(element1,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
          lexer.advance();
          element=element1;
        }
 else {
          final TreeElement referenceParameterList=parseReferenceParameterList(lexer,false);
          CompositeElement element1=Factory.createCompositeElement(REFERENCE_EXPRESSION);
          TreeUtil.addChildren(element1,element);
          TreeUtil.addChildren(element1,dot);
          TreeUtil.addChildren(element1,referenceParameterList);
          if (lexer.getTokenType() == IDENTIFIER) {
            TreeUtil.addChildren(element1,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
            lexer.advance();
          }
 else {
            TreeUtil.addChildren(element1,Factory.createErrorElement(JavaErrorMessages.message("expected.identifier")));
            return element1;
          }
          element=element1;
        }
      }
    }
 else     if (i == LPARENTH) {
{
        if (element.getElementType() != REFERENCE_EXPRESSION) {
          if (element.getElementType() == SUPER_EXPRESSION) {
            final LexerPosition pos=lexer.getCurrentPosition();
            lexer.restore(startPos);
            CompositeElement qualifier=parsePrimaryExpressionStart(lexer);
            if (qualifier != null) {
              CompositeElement element1=Factory.createCompositeElement(REFERENCE_EXPRESSION);
              TreeUtil.addChildren(element1,qualifier);
              if (lexer.getTokenType() == DOT) {
                TreeElement dot=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
                lexer.advance();
                TreeUtil.addChildren(element1,dot);
                if (lexer.getTokenType() == SUPER_KEYWORD) {
                  TreeElement superKeyword=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
                  lexer.advance();
                  TreeUtil.addChildren(element1,superKeyword);
                  element=element1;
                  continue;
                }
              }
            }
            lexer.restore(pos);
            return element;
          }
 else           return element;
        }
        CompositeElement element1=Factory.createCompositeElement(METHOD_CALL_EXPRESSION);
        TreeUtil.addChildren(element1,element);
        TreeElement argumentList=parseArgumentList(lexer);
        TreeUtil.addChildren(element1,argumentList);
        element=element1;
      }
    }
 else     if (i == LBRACKET) {
{
        final LexerPosition pos=lexer.getCurrentPosition();
        TreeElement lbracket=ParseUtil.createTokenElement(lexer,myContext.getCharTable());
        lexer.advance();
        if (lexer.getTokenType() == RBRACKET && element.getElementType() == REFERENCE_EXPRESSION) {
          lexer.restore(startPos);
          CompositeElement element1=parseClassObjectAccessExpression(lexer);
          if (lexer.getTokenStart() <= pos.getOffset()) {
            lexer.restore(pos);
            return element;
          }
          element=element1;
        }
 else {
          CompositeElement element1=Factory.createCompositeElement(ARRAY_ACCESS_EXPRESSION);
          TreeUtil.addChildren(element1,element);
          TreeUtil.addChildren(element1,lbracket);
          TreeElement expr=parseExpression(lexer);
          if (expr == null) {
            TreeUtil.addChildren(element1,Factory.createErrorElement(JavaErrorMessages.message("expected.expression")));
            return element1;
          }
          TreeUtil.addChildren(element1,expr);
          if (lexer.getTokenType() != RBRACKET) {
            TreeUtil.addChildren(element1,Factory.createErrorElement(JavaErrorMessages.message("expected.rbracket")));
            return element1;
          }
          TreeUtil.addChildren(element1,ParseUtil.createTokenElement(lexer,myContext.getCharTable()));
          lexer.advance();
          element=element1;
        }
      }
    }
 else {
      return element;
    }
  }
}
