{
  FilterLexer lexer=new FilterLexer(originalLexer,new FilterLexer.SetFilter(StdTokenSets.WHITE_SPACE_OR_COMMENT_BIT_SET));
  lexer.start(buffer,startOffset,endOffset,0);
  CharTable table=myContext.getCharTable();
  final FileElement dummyRoot=DummyHolderFactory.createHolder(manager,null,table).getTreeElement();
  CompositeElement expression=parseExpression(lexer);
  if (expression != null)   TreeUtil.addChildren(dummyRoot,expression);
  CompositeElement parent=dummyRoot;
  final IElementType tokenType=lexer.getTokenType();
  if (tokenType != null && tokenType != TokenType.BAD_CHARACTER) {
    final CompositeElement errorElement=Factory.createErrorElement("Unexpected tokens");
    TreeUtil.addChildren(dummyRoot,errorElement);
    parent=errorElement;
  }
  while (lexer.getTokenType() != null) {
    TreeUtil.addChildren(parent,ParseUtil.createTokenElement(lexer,table));
    lexer.advance();
  }
  ParseUtil.insertMissingTokens(dummyRoot,originalLexer,0,buffer.length(),-1,WhiteSpaceAndCommentsProcessor.INSTANCE,myContext);
  return dummyRoot.getFirstChildNode();
}
