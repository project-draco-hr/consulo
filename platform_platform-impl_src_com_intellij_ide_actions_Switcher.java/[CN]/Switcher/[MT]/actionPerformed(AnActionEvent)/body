{
  final Project project=PlatformDataKeys.PROJECT.getData(e.getDataContext());
  if (project == null)   return;
  boolean selectFirstItem=false;
  if (SWITCHER == null) {
synchronized (Switcher.class) {
      if (SWITCHER == null) {
        SWITCHER=new SwitcherPanel(project);
        FeatureUsageTracker.getInstance().triggerFeatureUsed(SWITCHER_FEATURE_ID);
        selectFirstItem=!FileEditorManagerEx.getInstanceEx(project).hasOpenedFile();
      }
    }
  }
  if (e.getInputEvent().isShiftDown()) {
    SWITCHER.goBack();
  }
 else {
    if (selectFirstItem) {
      SWITCHER.files.setSelectedIndex(0);
    }
 else {
      SWITCHER.goForward();
    }
  }
}
