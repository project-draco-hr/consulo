{
  final Map<String,ToolWindow> keymap=new HashMap<String,ToolWindow>(windows.size());
  final List<ToolWindow> pluginToolWindows=new ArrayList<ToolWindow>();
  for (  ToolWindow window : windows) {
    final Integer index=TW_KEYMAP.get(ids.get(window));
    if (index != null) {
      keymap.put(Integer.toString(index,index + 1).toUpperCase(),window);
    }
 else {
      pluginToolWindows.add(window);
    }
  }
  final Iterator<ToolWindow> iterator=pluginToolWindows.iterator();
  int i=0;
  while (iterator.hasNext()) {
    while (keymap.get(Integer.toString(i,i + 1).toUpperCase()) != null) {
      i++;
    }
    keymap.put(Integer.toString(i,i + 1).toUpperCase(),iterator.next());
    i++;
  }
  return keymap;
}
