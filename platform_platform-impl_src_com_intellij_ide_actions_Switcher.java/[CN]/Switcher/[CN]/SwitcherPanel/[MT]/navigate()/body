{
  final Object value=getSelectedList().getSelectedValue();
  myPopup.closeOk(null);
  if (value instanceof ToolWindow) {
    ((ToolWindow)value).activate(null,true,true);
  }
 else   if (value instanceof FileInfo) {
    final FileInfo info=(FileInfo)value;
    IdeFocusManager.getInstance(project).doWhenFocusSettlesDown(new Runnable(){
      @Override public void run(){
        final FileEditorManagerImpl manager=(FileEditorManagerImpl)FileEditorManager.getInstance(project);
        if (info.second != null) {
          EditorWindow wnd=findAppropriateWindow(info);
          if (wnd != null) {
            manager.openFileImpl2(wnd,info.first,true);
            manager.addSelectionRecord(info.first,wnd);
          }
        }
 else {
          manager.openFile(info.first,true);
        }
      }
    }
);
  }
}
