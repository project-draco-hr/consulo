{
  if ((isFilesSelected() || !isFilesVisible()) && isAutoHide()) {
    cancel();
  }
 else {
    if (files.getModel().getSize() > 0) {
      final int index=Math.min(toolWindows.getSelectedIndex(),files.getModel().getSize() - 1);
      files.setSelectedIndex(index);
      files.ensureIndexIsVisible(index);
      toolWindows.getSelectionModel().clearSelection();
      IdeFocusManager.findInstanceByComponent(files).requestFocus(files,true);
    }
  }
}
