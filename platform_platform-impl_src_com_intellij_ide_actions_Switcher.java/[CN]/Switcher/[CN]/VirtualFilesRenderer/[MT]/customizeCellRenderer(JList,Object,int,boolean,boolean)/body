{
  if (value instanceof FileInfo) {
    VirtualFile virtualFile=((FileInfo)value).getFirst();
    String name=UISettings.getInstance().SHOW_DIRECTORY_FOR_NON_UNIQUE_FILENAMES ? UniqueVFilePathBuilder.getInstance().getUniqueVirtualFilePath(myProject,virtualFile) : virtualFile.getName();
    setIcon(IconUtil.getIcon(virtualFile,Iconable.ICON_FLAG_READ_STATUS,myProject));
    FileStatus fileStatus=FileStatusManager.getInstance(myProject).getStatus(virtualFile);
    final boolean open=FileEditorManager.getInstance(myProject).isFileOpen(virtualFile);
    TextAttributes attributes=new TextAttributes(fileStatus.getColor(),null,null,EffectType.LINE_UNDERSCORE,open ? Font.PLAIN : Font.ITALIC);
    append(name,SimpleTextAttributes.fromTextAttributes(attributes));
    final Color color=FileColorManager.getInstance(myProject).getFileColor(virtualFile);
    if (!selected && color != null) {
      setBackground(color);
    }
  }
}
