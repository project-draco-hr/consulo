{
  final PsiFile file=e.getFile();
  if (file != null) {
    markFileAsDirty(file);
    updateTree(true);
    return;
  }
  PsiElement child=e.getChild();
  if (child instanceof PsiFile) {
    PsiFile psiFile=(PsiFile)child;
    markFileAsDirty(psiFile);
    updateTree(true);
  }
 else   if (child instanceof PsiDirectory) {
    PsiDirectory psiDirectory=(PsiDirectory)child;
    for (Iterator<PsiFile> i=getAllFiles(); i.hasNext(); ) {
      PsiFile psiFile=i.next();
      if (psiFile == null) {
        continue;
      }
      if (PsiTreeUtil.isAncestor(psiDirectory,psiFile,true)) {
        markFileAsDirty(psiFile);
      }
    }
    updateTree(true);
  }
 else {
    if (PsiTreeUtil.getParentOfType(child,PsiComment.class,false) != null) {
      markFileAsDirty(child.getContainingFile());
      updateTree(true);
    }
  }
}
