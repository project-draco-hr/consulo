{
  Object parent=getTreeStructure().getParentElement(obj);
  if (parent == null) {
    return null;
  }
  Object[] children=getTreeStructure().getChildElements(parent);
  Arrays.sort(children,getUi().getNodeDescriptorComparator());
  int idx=-1;
  for (int i=0; i < children.length; i++) {
    if (obj.equals(children[i])) {
      idx=i;
      break;
    }
  }
  if (idx == -1) {
    return null;
  }
  if (idx > 0) {
    return children[idx - 1];
  }
  return getPreviousSibling(parent);
}
