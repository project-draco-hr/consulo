{
  myFileTree.clear();
  myDirtyFileSet.clear();
  myFile2Highlighter.clear();
  TodoTreeStructure treeStructure=getTodoTreeStructure();
  PsiFile[] psiFiles=mySearchHelper.findFilesWithTodoItems();
  for (  PsiFile psiFile : psiFiles) {
    if (mySearchHelper.getTodoItemsCount(psiFile) > 0 && treeStructure.accept(psiFile)) {
      myFileTree.add(psiFile.getVirtualFile());
    }
  }
  treeStructure.validateCache();
}
