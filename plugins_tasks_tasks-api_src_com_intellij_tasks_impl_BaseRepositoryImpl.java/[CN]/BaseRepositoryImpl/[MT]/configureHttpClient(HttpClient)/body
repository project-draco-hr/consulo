{
  client.getParams().setConnectionManagerTimeout(3000);
  client.getParams().setSoTimeout(TaskSettings.getInstance().CONNECTION_TIMEOUT);
  if (isUseProxy()) {
    HttpConfigurable proxy=HttpConfigurable.getInstance();
    client.getHostConfiguration().setProxy(proxy.PROXY_HOST,proxy.PROXY_PORT);
    if (proxy.PROXY_AUTHENTICATION) {
      AuthScope authScope=new AuthScope(proxy.PROXY_HOST,proxy.PROXY_PORT);
      Credentials credentials=getCredentials(proxy.PROXY_LOGIN,proxy.getPlainProxyPassword(),proxy.PROXY_HOST);
      client.getState().setProxyCredentials(authScope,credentials);
    }
  }
  if (isUseHttpAuthentication()) {
    client.getParams().setAuthenticationPreemptive(true);
    client.getState().setCredentials(AuthScope.ANY,new UsernamePasswordCredentials(getUsername(),getPassword()));
  }
}
