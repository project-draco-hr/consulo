{
  DataContext dataContext=e.getDataContext();
  Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  final Editor editor=(Editor)dataContext.getData(DataConstants.EDITOR);
  final FileEditor fileEditor=(FileEditor)dataContext.getData(DataConstants.FILE_EDITOR);
  if (editor == null)   return;
  if (fileEditor == null)   return;
  PsiFile psiFile=PsiDocumentManager.getInstance(project).getPsiFile(editor.getDocument());
  if (psiFile == null)   return;
  PsiDocumentManager.getInstance(project).commitDocument(editor.getDocument());
  FeatureUsageTracker.getInstance().triggerFeatureUsed("navigation.popup.file.structure");
  DialogWrapper dialog;
  dialog=createDialog(psiFile,fileEditor.getStructureViewModel(),editor,project,(Navigatable)dataContext.getData(DataConstants.NAVIGATABLE));
  dialog.setTitle(psiFile.getVirtualFile().getPresentableUrl());
  dialog.show();
}
