{
  final Module module=ApplicationManager.getApplication().runWriteAction(new Computable<Module>(){
    @Override public Module compute(){
      return ModuleManager.getInstance(project).newModule(path + "/" + EclipseProjectFinder.findProjectName(path)+ IdeaXml.IML_EXT,StdModuleTypes.JAVA.getId());
    }
  }
);
  replaceRoot(path,EclipseXml.DOT_CLASSPATH_EXT,project);
  final EclipseClasspathStorageProvider.EclipseClasspathConverter converter=new EclipseClasspathStorageProvider.EclipseClasspathConverter(module);
  final ModifiableRootModel rootModel=ModuleRootManager.getInstance(module).getModifiableModel();
  final Element classpathElement=JDOMUtil.loadDocument(FileUtil.loadFile(new File(path,EclipseXml.DOT_CLASSPATH_EXT))).getRootElement();
  converter.getClasspath(rootModel,classpathElement);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      rootModel.commit();
    }
  }
);
  return module;
}
