{
  errorBean.setExceptionHashCode(exceptionBean.getHashCode());
  final Ref<Exception> err=new Ref<Exception>();
  Runnable runnable=new Runnable(){
    public void run(){
      try {
        HttpConfigurable.getInstance().prepareURL(PREPARE_URL);
        if (!StringUtil.isEmpty(myLogin)) {
          int threadId=ITNProxy.postNewThread(myLogin,myPassword,errorBean,exceptionBean,IdeaLogger.getOurCompilationTimestamp());
          exceptionBean.setItnThreadId(threadId);
        }
      }
 catch (      Exception ex) {
        err.set(ex);
      }
    }
  }
;
  if (myProject == null) {
    runnable.run();
  }
 else {
    ProgressManager.getInstance().runProcessWithProgressSynchronously(runnable,DiagnosticBundle.message("title.submitting.error.report"),false,myProject);
  }
  if (!err.isNull()) {
    throw err.get();
  }
}
