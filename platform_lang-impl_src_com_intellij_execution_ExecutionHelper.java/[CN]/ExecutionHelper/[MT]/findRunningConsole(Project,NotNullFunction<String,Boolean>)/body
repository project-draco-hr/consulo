{
  final ExecutionManager executionManager=ExecutionManager.getInstance(project);
  final ToolWindow runToolWindow=ToolWindowManager.getInstance(project).getToolWindow(DefaultRunExecutor.getRunExecutorInstance().getId());
  if (runToolWindow != null && runToolWindow.isVisible()) {
    final RunContentDescriptor selectedContent=executionManager.getContentManager().getSelectedContent();
    if (selectedContent != null) {
      final ProcessHandler processHandler=selectedContent.getProcessHandler();
      if (processHandler instanceof OSProcessHandler && !processHandler.isProcessTerminated()) {
        final String commandLine=((OSProcessHandler)processHandler).getCommandLine();
        if (cmdLineMatcher.fun(commandLine).booleanValue()) {
          return Collections.singletonList(selectedContent);
        }
      }
    }
  }
  final ArrayList<RunContentDescriptor> result=new ArrayList<RunContentDescriptor>();
  final RunContentDescriptor[] runContentDescriptors=((RunContentManagerImpl)executionManager.getContentManager()).getAllDescriptors();
  for (  RunContentDescriptor runContentDescriptor : runContentDescriptors) {
    final ProcessHandler processHandler=runContentDescriptor.getProcessHandler();
    if (processHandler instanceof OSProcessHandler && !processHandler.isProcessTerminated()) {
      final String commandLine=((OSProcessHandler)processHandler).getCommandLine();
      if (cmdLineMatcher.fun(commandLine).booleanValue()) {
        result.add(runContentDescriptor);
      }
    }
  }
  return result;
}
