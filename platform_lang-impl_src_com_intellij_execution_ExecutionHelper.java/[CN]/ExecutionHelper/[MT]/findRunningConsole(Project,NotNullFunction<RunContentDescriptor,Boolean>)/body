{
  final ExecutionManager executionManager=ExecutionManager.getInstance(project);
  final ToolWindow runToolWindow=ToolWindowManager.getInstance(project).getToolWindow(DefaultRunExecutor.getRunExecutorInstance().getId());
  if (runToolWindow != null && runToolWindow.isVisible()) {
    final RunContentDescriptor selectedContent=executionManager.getContentManager().getSelectedContent();
    if (selectedContent != null) {
      if (descriptorMatcher.fun(selectedContent)) {
        return Collections.singletonList(selectedContent);
      }
    }
  }
  final ArrayList<RunContentDescriptor> result=Lists.newArrayList();
  final RunContentDescriptor[] runContentDescriptors=((RunContentManagerImpl)executionManager.getContentManager()).getAllDescriptors();
  for (  RunContentDescriptor runContentDescriptor : runContentDescriptors) {
    if (descriptorMatcher.fun(runContentDescriptor)) {
      result.add(runContentDescriptor);
    }
  }
  return result;
}
