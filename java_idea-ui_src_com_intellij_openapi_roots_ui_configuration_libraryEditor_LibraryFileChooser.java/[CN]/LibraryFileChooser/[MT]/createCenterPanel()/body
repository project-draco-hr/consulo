{
  final JComponent centerPanel=super.createCenterPanel();
  if (!myInputName) {
    return centerPanel;
  }
  final JPanel panel=new JPanel(new BorderLayout());
  panel.add(centerPanel,BorderLayout.CENTER);
  final FieldPanel fieldPanel=FieldPanel.create(ProjectBundle.message("library.name.prompt"),null);
  fieldPanel.getFieldLabel().setFont(UIUtil.getLabelFont().deriveFont(Font.BOLD));
  myNameField=fieldPanel.getTextField();
  myNameField.getDocument().addDocumentListener(new DocumentListener(){
    public void changedUpdate(    DocumentEvent e){
      myNameChangedByUser=true;
    }
    public void insertUpdate(    DocumentEvent e){
      myNameChangedByUser=true;
    }
    public void removeUpdate(    DocumentEvent e){
      myNameChangedByUser=true;
    }
  }
);
  panel.add(fieldPanel,BorderLayout.NORTH);
  myFileSystemTree.getTree().addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      if (myNameField == null || myNameChangedByUser) {
        return;
      }
      final VirtualFile[] selectedFiles=getSelectedFiles();
      setName(selectedFiles.length == 1 ? selectedFiles[0].getNameWithoutExtension() : "");
    }
  }
);
  return panel;
}
