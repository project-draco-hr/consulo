def _rewritetags(self, source, revmap, data):
    fp = cStringIO.StringIO()
    for line in data.splitlines():
        s = line.split(' ', 1)
        if (len(s) != 2):
            continue
        revid = revmap.get(source.lookuprev(s[0]))
        if (not revid):
            continue
        fp.write(('%s %s\n' % (revid, s[1])))
    return fp.getvalue()
