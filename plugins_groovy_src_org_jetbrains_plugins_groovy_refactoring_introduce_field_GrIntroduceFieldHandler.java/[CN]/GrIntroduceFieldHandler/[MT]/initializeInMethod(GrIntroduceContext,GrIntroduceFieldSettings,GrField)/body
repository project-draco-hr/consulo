{
  if (context.expression == null)   return;
  final GrExpression expression=context.expression;
  final GrTypeDefinition scope=(GrTypeDefinition)context.scope;
  final GrMethod method=getContainingMethod(expression,scope);
  LOG.assertTrue(method != null);
  final GrOpenBlock block=method.getBlock();
  LOG.assertTrue(block != null);
  final GrStatement anchor;
  if (settings.removeLocalVar()) {
    final GrVariable variable=resolveLocalVar(context);
    anchor=PsiTreeUtil.getParentOfType(variable,GrStatement.class);
  }
 else {
    anchor=(GrStatement)findAnchor(context,settings,context.occurrences,block);
  }
  generateAssignment(context,settings,field,anchor,block);
}
