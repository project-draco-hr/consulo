{
  if (context.expression == null)   return;
  final GrExpression expression=context.expression;
  final GrTypeDefinition scope=(GrTypeDefinition)context.scope;
  final GrMethod method=getContainingMethod(expression,scope);
  LOG.assertTrue(method != null);
  final GrStatement anchor;
  if (settings.removeLocalVar()) {
    GrVariable variable=resolveLocalVar(context);
    anchor=PsiTreeUtil.getParentOfType(variable,GrStatement.class);
  }
 else {
    anchor=(GrStatement)findAnchor(context,settings,context.occurrences,method.getBlock());
  }
  generateAssignment(context,settings,field,anchor,method.getBlock());
}
