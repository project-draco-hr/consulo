{
  final GrReferenceExpression newExpr=createRefExpression(field,occurence);
  final PsiElement replaced;
  if (occurence instanceof GrExpression) {
    replaced=((GrExpression)occurence).replaceWithExpression(newExpr,false);
  }
 else {
    replaced=occurence.replace(newExpr);
  }
  if (replaced instanceof GrQualifiedReference) {
    if (!PsiUtil.shortenReference((GrQualifiedReference)replaced)) {
      final PsiElement qualifier=((GrQualifiedReference)replaced).getQualifier();
      if (qualifier instanceof GrQualifiedReference) {
        PsiUtil.shortenReference((GrQualifiedReference)qualifier);
      }
    }
  }
}
