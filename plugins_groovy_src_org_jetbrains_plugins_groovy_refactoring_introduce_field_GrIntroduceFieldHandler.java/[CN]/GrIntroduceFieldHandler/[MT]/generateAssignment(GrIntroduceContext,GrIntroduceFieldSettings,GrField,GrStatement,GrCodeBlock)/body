{
  final GrExpression initializer;
  if (settings.removeLocalVar()) {
    initializer=extractVarInitializer(context);
  }
 else {
    initializer=context.getExpression();
  }
  GrAssignmentExpression init=(GrAssignmentExpression)GroovyPsiElementFactory.getInstance(context.getProject()).createExpressionFromText(settings.getName() + " = " + initializer.getText());
  GrCodeBlock block;
  if (anchor != null) {
    anchor=GroovyRefactoringUtil.addBlockIntoParent(anchor);
    LOG.assertTrue(anchor.getParent() instanceof GrCodeBlock);
    block=(GrCodeBlock)anchor.getParent();
  }
 else {
    block=defaultContainer;
  }
  init=(GrAssignmentExpression)block.addStatementBefore(init,anchor);
  replaceOccurrence(field,init.getLValue());
}
