{
  DirectoryInfo info=getInfoForFileOrDirectory(fileOrDir);
  if (info != null) {
    return info.hasContentFolderFlag(ContentFolderType.PRODUCTION) || info.hasContentFolderFlag(ContentFolderType.TEST) || info.isInLibrarySource();
  }
 else {
    VirtualFile parent=fileOrDir.getParent();
    return parent != null && isInSource(parent);
  }
}
