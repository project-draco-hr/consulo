{
  if (!file.isDirectory() && file.getParent() == null)   return null;
  DirectoryInfo info=directoryIndex.getInfoForDirectory(file);
  if (info != null) {
    return info;
  }
  if (!file.isDirectory()) {
    VirtualFile dir=file.getParent();
    if (dir != null) {
      return directoryIndex.getInfoForDirectory(dir);
    }
  }
  return null;
}
