{
  if (success) {
    JavaRefactoringSettings.getInstance().INTRODUCE_CONSTANT_MOVE_TO_ANOTHER_CLASS=myMoveToAnotherClassCb.isSelected();
    if (myMoveToAnotherClassCb.isSelected()) {
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          myEditor.putUserData(ACTIVE_INTRODUCE,InplaceIntroduceConstantPopup.this);
          try {
            final IntroduceConstantHandler constantHandler=new IntroduceConstantHandler();
            final PsiLocalVariable localVariable=(PsiLocalVariable)getLocalVariable();
            if (localVariable != null) {
              constantHandler.invokeImpl(myProject,localVariable,myEditor);
            }
 else {
              constantHandler.invokeImpl(myProject,myExpr,myEditor);
            }
          }
  finally {
            myEditor.putUserData(ACTIVE_INTRODUCE,null);
          }
        }
      }
);
      return;
    }
  }
  super.moveOffsetAfter(success);
}
