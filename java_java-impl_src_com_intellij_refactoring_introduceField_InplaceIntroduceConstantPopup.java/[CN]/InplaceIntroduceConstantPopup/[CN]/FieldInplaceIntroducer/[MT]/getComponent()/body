{
  if (!myInitListeners) {
    myInitListeners=true;
    myVisibilityPanel.addListener(new VisibilityListener(myProject,myEditor){
      @Override protected String getVisibility(){
        return myVisibilityPanel.getVisibility();
      }
    }
);
    myReplaceAllCb.addItemListener(new ItemListener(){
      @Override public void itemStateChanged(      ItemEvent e){
        final TemplateState templateState=TemplateManagerImpl.getTemplateState(myEditor);
        if (templateState != null) {
          templateState.gotoEnd(true);
          myTypeSelectorManager=new TypeSelectorManagerImpl(myProject,myFieldTypePointer.getType(),null,myExpr,myOccurrences);
          startIntroduceTemplate(isReplaceAllOccurrences());
        }
      }
    }
);
    myAnnotateNonNls.addItemListener(new ItemListener(){
      @Override public void itemStateChanged(      ItemEvent e){
      }
    }
);
  }
  return myWholePanel;
}
