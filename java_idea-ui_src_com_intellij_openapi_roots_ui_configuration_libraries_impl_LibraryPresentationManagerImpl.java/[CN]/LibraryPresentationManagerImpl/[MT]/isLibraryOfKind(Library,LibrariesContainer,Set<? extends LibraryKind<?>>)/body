{
  final LibraryType<?> type=((LibraryEx)library).getType();
  if (type != null && acceptedKinds.contains(type.getKind()))   return true;
  final VirtualFile[] files=librariesContainer.getLibraryFiles(library,OrderRootType.CLASSES);
  return !LibraryDetectionManager.getInstance().processProperties(Arrays.asList(files),new LibraryDetectionManager.LibraryPropertiesProcessor(){
    @Override public <P extends LibraryProperties>boolean processProperties(    @NotNull LibraryKind<P> processedKind,    @NotNull P properties){
      return !acceptedKinds.contains(processedKind);
    }
  }
);
}
