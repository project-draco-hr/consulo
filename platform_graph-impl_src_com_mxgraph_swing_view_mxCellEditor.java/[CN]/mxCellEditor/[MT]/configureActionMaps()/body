{
  InputMap editorInputMap=editorPane.getInputMap();
  InputMap textInputMap=textArea.getInputMap();
  editorInputMap.put(escapeKeystroke,cancelEditingAction);
  textInputMap.put(escapeKeystroke,cancelEditingAction);
  if (graphComponent.isEnterStopsCellEditing()) {
    editorInputMap.put(shiftEnterKeystroke,editorEnterActionMapKey);
    textInputMap.put(shiftEnterKeystroke,textEnterActionMapKey);
    editorInputMap.put(enterKeystroke,SUBMIT_TEXT);
    textInputMap.put(enterKeystroke,SUBMIT_TEXT);
  }
 else {
    editorInputMap.put(enterKeystroke,editorEnterActionMapKey);
    textInputMap.put(enterKeystroke,textEnterActionMapKey);
    if (isShiftEnterSubmitsText()) {
      editorInputMap.put(shiftEnterKeystroke,SUBMIT_TEXT);
      textInputMap.put(shiftEnterKeystroke,SUBMIT_TEXT);
    }
 else {
      editorInputMap.remove(shiftEnterKeystroke);
      textInputMap.remove(shiftEnterKeystroke);
    }
  }
}
