{
  if (LangDataKeys.PSI_ELEMENT.is(dataId)) {
    final PsiElement anElement=getSelectedElement();
    return anElement != null && anElement.isValid() ? anElement : super.getData(dataId);
  }
  if (LangDataKeys.PSI_ELEMENT_ARRAY.is(dataId)) {
    return getSelectedElements();
  }
  if (PlatformDataKeys.DELETE_ELEMENT_PROVIDER.is(dataId)) {
    return null;
  }
  if (PlatformDataKeys.NAVIGATABLE.is(dataId)) {
    final DefaultMutableTreeNode selectedNode=getSelectedNode();
    if (selectedNode == null)     return null;
    final HierarchyNodeDescriptor descriptor=getDescriptor(selectedNode);
    if (descriptor == null)     return null;
    return getNavigatable(descriptor);
  }
  if (PlatformDataKeys.NAVIGATABLE_ARRAY.is(dataId)) {
    return getNavigatables();
  }
  if (PlatformDataKeys.TREE_EXPANDER.is(dataId)) {
    final JTree tree=getCurrentTree();
    if (tree != null) {
      return new DefaultTreeExpander(tree);
    }
  }
  return super.getData(dataId);
}
