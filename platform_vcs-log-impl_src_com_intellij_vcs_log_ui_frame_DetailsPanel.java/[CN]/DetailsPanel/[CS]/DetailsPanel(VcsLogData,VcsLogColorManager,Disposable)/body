{
  myLogData=logData;
  myColorManager=colorManager;
  myScrollPane=new JBScrollPane(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
  myMainContentPanel=new ScrollablePanel(){
    @Override public boolean getScrollableTracksViewportWidth(){
      boolean expanded=false;
      for (      Component c : getComponents()) {
        if (c instanceof CommitPanel && ((CommitPanel)c).isExpanded()) {
          expanded=true;
          break;
        }
      }
      return !expanded;
    }
    @Override public Dimension getPreferredSize(){
      Dimension preferredSize=super.getPreferredSize();
      int height=Math.max(preferredSize.height,myScrollPane.getViewport().getHeight());
      JBScrollPane scrollPane=UIUtil.getParentOfType(JBScrollPane.class,this);
      if (scrollPane == null || getScrollableTracksViewportWidth()) {
        return new Dimension(preferredSize.width,height);
      }
 else {
        return new Dimension(Math.max(preferredSize.width,scrollPane.getViewport().getWidth()),height);
      }
    }
    @Override public Color getBackground(){
      return CommitPanel.getCommitDetailsBackground();
    }
    @Override protected void paintChildren(    Graphics g){
      if (StringUtil.isNotEmpty(myEmptyText.getText())) {
        myEmptyText.paint(this,g);
      }
 else {
        super.paintChildren(g);
      }
    }
  }
;
  myEmptyText=new StatusText(myMainContentPanel){
    @Override protected boolean isStatusVisible(){
      return StringUtil.isNotEmpty(getText());
    }
  }
;
  myMainContentPanel.setLayout(new VerticalFlowLayout(VerticalFlowLayout.TOP,0,0,true,false));
  myMainContentPanel.setOpaque(false);
  myScrollPane.setViewportView(myMainContentPanel);
  myScrollPane.setBorder(IdeBorderFactory.createEmptyBorder());
  myScrollPane.setViewportBorder(IdeBorderFactory.createEmptyBorder());
  myLoadingPanel=new JBLoadingPanel(new BorderLayout(),parent,ProgressWindow.DEFAULT_PROGRESS_DIALOG_POSTPONE_TIME_MILLIS){
    @Override public Color getBackground(){
      return CommitPanel.getCommitDetailsBackground();
    }
  }
;
  myLoadingPanel.add(myScrollPane);
  setLayout(new BorderLayout());
  add(myLoadingPanel,BorderLayout.CENTER);
  myEmptyText.setText("Commit details");
}
