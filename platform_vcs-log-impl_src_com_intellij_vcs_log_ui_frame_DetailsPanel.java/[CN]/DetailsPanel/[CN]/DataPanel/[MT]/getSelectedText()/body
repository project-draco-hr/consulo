{
  Document doc=getDocument();
  int start=getSelectionStart();
  int end=getSelectionEnd();
  try {
    Position p0=doc.createPosition(start);
    Position p1=doc.createPosition(end);
    StringWriter sw=new StringWriter(p1.getOffset() - p0.getOffset());
    getEditorKit().write(sw,doc,p0.getOffset(),p1.getOffset() - p0.getOffset());
    MyHtml2Text parser=new MyHtml2Text();
    parser.parse(new StringReader(sw.toString()));
    return parser.getText();
  }
 catch (  BadLocationException e) {
    LOG.warn(e);
  }
catch (  IOException e) {
    LOG.warn(e);
  }
  return super.getSelectedText();
}
