{
  final Class[] interfaces=ApplicationManager.getApplication().getComponentInterfaces();
  Map<File,Set<ExportableApplicationComponent>> fileToComponents=new HashMap<File,Set<ExportableApplicationComponent>>();
  for (  final Class anInterface : interfaces) {
    final Object component=ApplicationManager.getApplication().getComponent(anInterface);
    if (component instanceof ExportableApplicationComponent) {
      ExportableApplicationComponent exportable=(ExportableApplicationComponent)component;
      exportableComponents.add(exportable);
      final File[] exportFiles=exportable.getExportFiles();
      for (      File exportFile : exportFiles) {
        Set<ExportableApplicationComponent> componentsTied=fileToComponents.get(exportFile);
        if (componentsTied == null) {
          componentsTied=new HashSet<ExportableApplicationComponent>();
          fileToComponents.put(exportFile,componentsTied);
        }
        componentsTied.add(exportable);
      }
    }
  }
  return fileToComponents;
}
