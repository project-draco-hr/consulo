{
  DataContext dataContext=e.getDataContext();
  Editor editor=PlatformDataKeys.EDITOR.getData(dataContext);
  boolean enabled=editor != null && (FileDocumentManager.getInstance().getFile(editor.getDocument()) != null || getElementToCopy(editor,dataContext) != null);
  e.getPresentation().setEnabled(enabled);
  if (ActionPlaces.isPopupPlace(e.getPlace())) {
    e.getPresentation().setVisible(enabled);
  }
 else {
    e.getPresentation().setVisible(true);
  }
}
