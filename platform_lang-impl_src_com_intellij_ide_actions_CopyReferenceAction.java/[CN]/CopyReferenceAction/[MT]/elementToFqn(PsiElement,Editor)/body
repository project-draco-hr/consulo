{
  String result=getQualifiedNameFromProviders(element);
  if (result != null)   return result;
  if (editor != null) {
    PsiReference reference=TargetElementUtil.findReference(editor,editor.getCaretModel().getOffset());
    if (reference != null) {
      result=getQualifiedNameFromProviders(reference.resolve());
      if (result != null)       return result;
    }
  }
  if (element instanceof PsiFile) {
    return FileUtil.toSystemIndependentName(getFileFqn((PsiFile)element));
  }
  if (element instanceof PsiDirectory) {
    return FileUtil.toSystemIndependentName(getVirtualFileFqn(((PsiDirectory)element).getVirtualFile(),element.getProject()));
  }
  return null;
}
