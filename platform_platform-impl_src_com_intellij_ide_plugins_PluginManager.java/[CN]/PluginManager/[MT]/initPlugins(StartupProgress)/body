{
  PluginClassLoaderDetector.install();
  long start=System.currentTimeMillis();
  try {
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      ourPlugins=new IdeaPluginDescriptorImpl[0];
    }
 else {
      initializePlugins(progress);
    }
  }
 catch (  RuntimeException e) {
    getLogger().error(e);
    throw e;
  }
  getLogger().info(ourPlugins.length + " plugins initialized in " + (System.currentTimeMillis() - start)+ " ms");
  logPlugins();
  ClassloaderUtil.clearJarURLCache();
}
