{
  final JpsRemoteProto.Message message=(JpsRemoteProto.Message)msg;
  final JpsRemoteProto.Message.Type messageType=message.getMessageType();
  if (messageType == JpsRemoteProto.Message.Type.FAILURE) {
    handleFailure(message.getFailure());
    return true;
  }
  if (messageType == JpsRemoteProto.Message.Type.RESPONSE) {
    final JpsRemoteProto.Message.Response response=message.getResponse();
    final JpsRemoteProto.Message.Response.Type responseType=response.getResponseType();
switch (responseType) {
case BUILD_EVENT:
{
        return handleBuildEvent(response.getBuildEvent());
      }
case COMPILE_MESSAGE:
{
      handleCompileMessage(response.getCompileMessage());
      return false;
    }
default :
  throw new Exception("Unknown response: " + response);
}
}
throw new Exception("Unknown message received: " + message);
}
