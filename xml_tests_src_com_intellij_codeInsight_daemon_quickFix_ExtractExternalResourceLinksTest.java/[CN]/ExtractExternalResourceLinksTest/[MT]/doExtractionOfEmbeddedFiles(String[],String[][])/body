{
  final List<VirtualFile> files=new ArrayList<VirtualFile>(shortFileName.length);
  for (  String s : shortFileName) {
    files.add(getVirtualFile(getBasePath() + "/" + s));
  }
  int fileIndex=0;
  for (  String[] expectedFileNameArray : expectedFileNames) {
    List<String> strings=FetchExtResourceAction.extractEmbeddedFileReferences(files.get(fileIndex),fileIndex != 0 ? files.get(0) : null,getPsiManager());
    assertEquals(expectedFileNameArray.length,strings.size());
    int index=0;
    for (    final String string : strings) {
      assertEquals(string,expectedFileNameArray[index]);
      ++index;
    }
    fileIndex++;
  }
}
