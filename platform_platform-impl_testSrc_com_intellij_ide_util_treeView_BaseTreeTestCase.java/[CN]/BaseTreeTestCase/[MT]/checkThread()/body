{
  String message="Wrong thread used for query structure, thread=" + Thread.currentThread();
  if (myPassthroughMode) {
    Assert.assertSame(message,myTestThread,Thread.currentThread());
  }
 else {
    if (isBgStructureBuilding()) {
      Assert.assertFalse(message,EventQueue.isDispatchThread());
    }
 else {
      Assert.assertTrue(message,EventQueue.isDispatchThread());
    }
  }
}
