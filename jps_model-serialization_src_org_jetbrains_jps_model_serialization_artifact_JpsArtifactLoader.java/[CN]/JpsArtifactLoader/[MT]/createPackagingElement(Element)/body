{
  String typeId=element.getAttributeValue("id");
  JpsPackagingElementFactory factory=JpsPackagingElementFactory.getInstance();
  if (typeId.equals("root")) {
    return factory.createArtifactRoot();
  }
  if (typeId.equals("directory")) {
    return factory.createDirectory(element.getAttributeValue("name"));
  }
  if (typeId.equals("archive")) {
    return factory.createArchive(element.getAttributeValue("name"));
  }
  if (typeId.equals("file-copy")) {
    return factory.createFileCopy(element.getAttributeValue("path"),element.getAttributeValue("output-file-name"));
  }
  if (typeId.equals("dir-copy")) {
    return factory.createDirectoryCopy(element.getAttributeValue("path"));
  }
  if (typeId.equals("extracted-dir")) {
    return factory.createExtractedDirectory(element.getAttributeValue("path"),element.getAttributeValue("path-in-jar"));
  }
  if (typeId.equals("library")) {
    String level=element.getAttributeValue("level");
    String libraryName=element.getAttributeValue("name");
    String moduleName=element.getAttributeValue("module-name");
    JpsElementReference<? extends JpsCompositeElement> parentReference;
    if (moduleName != null) {
      parentReference=JpsElementFactory.getInstance().createModuleReference(moduleName);
    }
 else {
      parentReference=JpsModuleLoader.createLibraryTableReference(level);
    }
    return factory.createLibraryElement(JpsElementFactory.getInstance().createLibraryReference(libraryName,parentReference));
  }
  if (typeId.equals("artifact")) {
    return factory.createArtifactOutput(JpsArtifactService.getInstance().createReference(element.getAttributeValue("artifact-name")));
  }
  JpsPackagingElementLoader<?> loader=findElementLoader(typeId);
  if (loader != null) {
    return loader.load(element);
  }
  return null;
}
