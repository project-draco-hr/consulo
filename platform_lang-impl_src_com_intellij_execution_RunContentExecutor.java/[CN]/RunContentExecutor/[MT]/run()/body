{
  FileDocumentManager.getInstance().saveAllDocuments();
  ConsoleView view=createConsole(myProject,myProcess);
  if (myHelpId != null) {
    view.setHelpId(myHelpId);
  }
  Executor executor=ExecutorRegistry.getInstance().getExecutorById(DefaultRunExecutor.EXECUTOR_ID);
  DefaultActionGroup actions=new DefaultActionGroup();
  final JComponent consolePanel=createConsolePanel(view,actions);
  RunContentDescriptor descriptor=new RunContentDescriptor(view,myProcess,consolePanel,myTitle);
  actions.add(new RerunAction(consolePanel));
  actions.add(new CloseAction(executor,descriptor,myProject));
  ExecutionManager.getInstance(myProject).getContentManager().showRunContent(executor,descriptor);
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      ToolWindowManager.getInstance(myProject).getToolWindow(ToolWindowId.RUN).activate(null);
    }
  }
);
  if (myAfterCompletion != null) {
    myProcess.addProcessListener(new ProcessAdapter(){
      public void processTerminated(      ProcessEvent event){
        SwingUtilities.invokeLater(myAfterCompletion);
      }
    }
);
  }
  myProcess.startNotify();
}
