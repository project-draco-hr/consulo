{
  List<Pair<MavenProject,Module>> incompatible=new ArrayList<Pair<MavenProject,Module>>();
  for (  MavenProject each : myProjectsTree.getProjects()) {
    Module module=myFileToModuleMapping.get(each.getFile());
    if (module == null)     continue;
    if (shouldCreateModuleFor(each) && !(module.getModuleType() instanceof JavaModuleType)) {
      incompatible.add(Pair.create(each,module));
    }
  }
  if (incompatible.isEmpty())   return;
  doDeleteIncompatibleModules(incompatible);
}
