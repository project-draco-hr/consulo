{
  List<MavenArtifact> artifacts=new ArrayList<MavenArtifact>();
  for (  MavenProject each : myProjectsToImportWithChanges.keySet()) {
    artifacts.addAll(each.getDependencies());
  }
  final Set<File> files=new THashSet<File>();
  for (  MavenArtifact each : artifacts) {
    if (each.isResolved())     files.add(each.getFile());
  }
  final Runnable r=new Runnable(){
    public void run(){
      LocalFileSystem.getInstance().refreshIoFiles(files);
    }
  }
;
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    r.run();
  }
 else {
    postTasks.add(new MavenProjectsProcessorTask(){
      public void perform(      Project project,      MavenEmbeddersManager embeddersManager,      MavenConsole console,      MavenProgressIndicator indicator) throws MavenProcessCanceledException {
        indicator.setText("Refreshing files...");
        r.run();
      }
    }
);
  }
}
