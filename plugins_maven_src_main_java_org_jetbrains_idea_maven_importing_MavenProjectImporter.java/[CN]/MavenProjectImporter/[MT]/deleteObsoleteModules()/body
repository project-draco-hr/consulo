{
  final List<Module> obsolete=collectObsoleteModules();
  if (obsolete.isEmpty())   return;
  MavenProjectsManager.getInstance(myProject).setMavenizedModules(obsolete,false);
  final int[] result=new int[1];
  MavenUtil.invokeAndWait(myProject,myModelsProvider.getModalityStateForQuestionDialogs(),new Runnable(){
    public void run(){
      result[0]=Messages.showYesNoDialog(myProject,ProjectBundle.message("maven.import.message.delete.obsolete",formatModules(obsolete)),ProjectBundle.message("maven.tab.importing"),Messages.getQuestionIcon());
    }
  }
);
  if (result[0] == 1)   return;
  for (  Module each : obsolete) {
    myModuleModel.disposeModule(each);
  }
}
