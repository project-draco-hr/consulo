{
  String key=(source) ? mxConstants.STYLE_SOURCE_PORT : mxConstants.STYLE_TARGET_PORT;
  String id=mxUtils.getString(state.style,key);
  if (id != null && graph.getModel() instanceof mxGraphModel) {
    mxCellState tmp=getState(((mxGraphModel)graph.getModel()).getCell(id));
    if (tmp != null) {
      terminal=tmp;
    }
  }
  return terminal;
}
