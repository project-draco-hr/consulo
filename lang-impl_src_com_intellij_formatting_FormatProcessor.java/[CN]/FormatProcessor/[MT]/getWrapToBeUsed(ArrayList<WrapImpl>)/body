{
  final int wrapsCount=wraps.size();
  if (wrapsCount == 0)   return null;
  if (myWrapCandidate == myCurrentBlock)   return wraps.get(0);
  for (int i=0; i < wrapsCount; ++i) {
    final WrapImpl wrap=wraps.get(i);
    if (!isSuitableInTheCurrentPosition(wrap))     continue;
    if (wrap.isIsActive())     return wrap;
    final WrapImpl.Type type=wrap.getType();
    if (type == WrapImpl.Type.WRAP_ALWAYS)     return wrap;
    if (type == WrapImpl.Type.WRAP_AS_NEEDED || type == WrapImpl.Type.CHOP_IF_NEEDED) {
      if (lineOver()) {
        return wrap;
      }
    }
  }
  return null;
}
