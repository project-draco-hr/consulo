{
  ProjectLevelVcsManager vcsManager=myPlatformFacade.getVcsManager(myProject);
  AbstractVcs vcs=myPlatformFacade.getVcs(myProject);
  List<VirtualFile> currentGitRoots=Arrays.asList(vcsManager.getRootsUnderVcs(vcs));
  List<VcsDirectoryMapping> mappings=new ArrayList<VcsDirectoryMapping>(vcsManager.getDirectoryMappings(vcs));
  for (  VirtualFile root : roots) {
    if (!currentGitRoots.contains(root)) {
      mappings.add(new VcsDirectoryMapping(root.getPath(),vcs.getName()));
    }
  }
  vcsManager.setDirectoryMappings(mappings);
}
