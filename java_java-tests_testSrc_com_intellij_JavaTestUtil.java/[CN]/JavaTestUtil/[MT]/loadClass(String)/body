{
  Class<?> clazz=null;
  ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
  ClassLoader definingClassLoader=JavaTestUtil.class.getClassLoader();
  ClassLoader systemClassLoader=ClassLoader.getSystemClassLoader();
  List<ClassLoader> classLoaders=asList(contextClassLoader,definingClassLoader,systemClassLoader);
  for (  ClassLoader classLoader : classLoaders) {
    clazz=loadClass(className,classLoader);
    if (clazz != null) {
      break;
    }
  }
  if (clazz == null) {
    throw new IllegalStateException(String.format("Can't load class '%s'. Tried to do that via thread context class loader(%s), " + "defining class loader(%s) and system class loader(%s)",className,contextClassLoader,definingClassLoader,systemClassLoader));
  }
  return clazz;
}
