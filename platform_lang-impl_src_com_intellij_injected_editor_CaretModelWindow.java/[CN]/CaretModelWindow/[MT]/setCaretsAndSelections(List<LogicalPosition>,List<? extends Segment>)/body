{
  List<LogicalPosition> convertedPositions=new ArrayList<LogicalPosition>(caretPositions);
  for (  LogicalPosition position : caretPositions) {
    convertedPositions.add(myEditorWindow.injectedToHost(position));
  }
  List<Segment> convertedSelections=new ArrayList<Segment>(selections.size());
  for (  Segment selection : selections) {
    convertedSelections.add(new TextRange(myEditorWindow.getDocument().injectedToHost(selection.getStartOffset()),myEditorWindow.getDocument().injectedToHost(selection.getEndOffset())));
  }
  myDelegate.setCaretsAndSelections(convertedPositions,convertedSelections);
}
