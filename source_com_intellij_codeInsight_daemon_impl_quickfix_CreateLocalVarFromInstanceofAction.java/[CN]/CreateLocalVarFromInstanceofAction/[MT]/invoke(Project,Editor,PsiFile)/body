{
  PsiInstanceOfExpression instanceOfExpression=getInstanceOfExpression(editor,file);
  try {
    PsiLocalVariable localVariable=createLocalVariable(instanceOfExpression);
    TemplateBuilder builder=new TemplateBuilder(localVariable);
    builder.setEndVariableAfter(localVariable.getNameIdentifier());
    Template template=generateTemplate(project,localVariable.getInitializer(),localVariable.getType());
    Editor newEditor=CreateFromUsageBaseAction.positionCursor(project,file,localVariable.getNameIdentifier());
    TextRange range=localVariable.getNameIdentifier().getTextRange();
    newEditor.getDocument().deleteString(range.getStartOffset(),range.getEndOffset());
    CreateFromUsageBaseAction.startTemplate(newEditor,template,project);
  }
 catch (  IncorrectOperationException e) {
    LOG.error(e);
  }
}
