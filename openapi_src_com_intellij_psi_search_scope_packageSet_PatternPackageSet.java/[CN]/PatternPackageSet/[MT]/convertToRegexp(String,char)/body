{
  StringBuffer buf=new StringBuffer(aspectsntx.length());
  int cur=0;
  boolean isAfterSeparator=false;
  boolean isAfterAsterix=false;
  while (cur < aspectsntx.length()) {
    char curChar=aspectsntx.charAt(cur);
    if (curChar != separator && isAfterSeparator) {
      buf.append("\\" + separator);
      isAfterSeparator=false;
    }
    if (curChar != '*' && isAfterAsterix) {
      buf.append(".*");
      isAfterAsterix=false;
    }
    if (curChar == '*') {
      if (!isAfterAsterix) {
        isAfterAsterix=true;
      }
 else {
        buf.append("[^\\" + separator + "]*");
        isAfterAsterix=false;
      }
    }
 else     if (curChar == separator) {
      if (isAfterSeparator) {
        buf.append("\\" + separator + "(.*\\"+ separator+ ")?");
        isAfterSeparator=false;
      }
 else {
        isAfterSeparator=true;
      }
    }
 else {
      buf.append(curChar);
    }
    cur++;
  }
  if (isAfterAsterix) {
    buf.append("[^\\" + separator + "]*");
  }
  return buf.toString();
}
