{
  if (!(type instanceof PsiArrayType)) {
    final String canonical=type.getCanonicalText();
    final String text=canonical != null ? canonical : type.getPresentableText();
    if ("null".equals(text)) {
      return "";
    }
 else {
      return text;
    }
  }
 else {
    return getTypeText(((PsiArrayType)type).getComponentType()) + "[]";
  }
}
