{
  super();
  setModel(dataModel);
  setCellRenderer(new CellRenderer());
  setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  setBorder(BorderFactory.createEtchedBorder());
  addKeyListener(new KeyAdapter(){
    @Override public void keyTyped(    KeyEvent e){
      if (e.getKeyChar() == ' ') {
        int[] indices=CheckBoxList.this.getSelectedIndices();
        for (        int index : indices) {
          if (index >= 0) {
            JCheckBox checkbox=(JCheckBox)getModel().getElementAt(index);
            setSelected(checkbox,index);
          }
        }
      }
    }
  }
);
  new ClickListener(){
    @Override public boolean onClick(    MouseEvent e,    int clickCount){
      if (isEnabled()) {
        int index=locationToIndex(e.getPoint());
        if (index != -1) {
          JCheckBox checkbox=(JCheckBox)getModel().getElementAt(index);
          int iconArea;
          try {
            iconArea=((BasicRadioButtonUI)checkbox.getUI()).getDefaultIcon().getIconWidth();
          }
 catch (          ClassCastException c) {
            iconArea=DEFAULT_CHECK_BOX_WIDTH;
          }
          if (e.getX() < iconArea) {
            setSelected(checkbox,index);
            return true;
          }
        }
      }
      return false;
    }
  }
.installOn(this);
}
