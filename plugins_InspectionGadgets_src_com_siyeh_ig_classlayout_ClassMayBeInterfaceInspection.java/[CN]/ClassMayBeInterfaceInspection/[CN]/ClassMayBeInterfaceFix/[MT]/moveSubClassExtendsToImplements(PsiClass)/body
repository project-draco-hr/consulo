{
  final PsiElementFactory elementFactory=JavaPsiFacade.getInstance(oldClass.getProject()).getElementFactory();
  final PsiJavaCodeReferenceElement classReference=elementFactory.createClassReferenceElement(oldClass);
  final SearchScope searchScope=oldClass.getUseScope();
  for (  final PsiClass inheritor : ClassInheritorsSearch.search(oldClass,searchScope,false)) {
    final PsiReferenceList extendsList=inheritor.getExtendsList();
    if (extendsList == null) {
      continue;
    }
    final PsiReferenceList implementsList=inheritor.getImplementsList();
    moveReference(extendsList,implementsList,classReference);
  }
}
