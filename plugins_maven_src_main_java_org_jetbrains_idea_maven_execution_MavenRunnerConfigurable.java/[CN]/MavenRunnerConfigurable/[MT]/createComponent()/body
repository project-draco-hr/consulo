{
  JPanel panel=new JPanel(new GridBagLayout());
  GridBagConstraints c=new GridBagConstraints();
  c.fill=GridBagConstraints.HORIZONTAL;
  c.anchor=GridBagConstraints.WEST;
  c.insets.bottom=5;
  myRunInBackgroundCheckbox=new JCheckBox("Run in background");
  myRunInBackgroundCheckbox.setMnemonic('b');
  if (!myRunConfigurationMode) {
    c.gridx=0;
    c.gridy++;
    c.weightx=1;
    c.gridwidth=GridBagConstraints.REMAINDER;
    panel.add(myRunInBackgroundCheckbox,c);
  }
  c.gridwidth=1;
  JLabel labelVMParameters=new JLabel("VM Options:");
  labelVMParameters.setDisplayedMnemonic('v');
  labelVMParameters.setLabelFor(myVMParametersEditor=new RawCommandLineEditor());
  myVMParametersEditor.setDialogCaption(labelVMParameters.getText());
  c.gridx=0;
  c.gridy++;
  c.weightx=0;
  panel.add(labelVMParameters,c);
  c.gridx=1;
  c.weightx=1;
  c.insets.left=10;
  panel.add(myVMParametersEditor,c);
  c.insets.left=0;
  JLabel jdkLabel=new JLabel("JRE:");
  jdkLabel.setDisplayedMnemonic('j');
  jdkLabel.setLabelFor(myJdkCombo=new JComboBox());
  c.gridx=0;
  c.gridy++;
  c.weightx=0;
  panel.add(jdkLabel,c);
  c.gridx=1;
  c.weightx=1;
  c.fill=GridBagConstraints.NONE;
  c.insets.left=10;
  panel.add(myJdkCombo,c);
  c.insets.left=0;
  c.fill=GridBagConstraints.HORIZONTAL;
  JPanel propertiesPanel=new JPanel(new BorderLayout());
  propertiesPanel.setBorder(IdeBorderFactory.createTitledBorder("Properties",false,false,true));
  propertiesPanel.add(mySkipTestsCheckBox=new JCheckBox("Skip tests"),BorderLayout.NORTH);
  mySkipTestsCheckBox.setMnemonic('t');
  propertiesPanel.add(myPropertiesPanel=new MyPropertiesPanel(),BorderLayout.CENTER);
  myPropertiesPanel.getEmptyText().setText("No properties defined");
  c.gridx=0;
  c.gridy++;
  c.weightx=c.weighty=1;
  c.gridwidth=c.gridheight=GridBagConstraints.REMAINDER;
  c.fill=GridBagConstraints.BOTH;
  panel.add(propertiesPanel,c);
  collectProperties();
  return panel;
}
