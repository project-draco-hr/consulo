{
  builder.setTitle(IdeBundle.message("action.create.new.class")).addKind("Class",Icons.CLASS_ICON,JavaTemplateUtil.INTERNAL_CLASS_TEMPLATE_NAME).addKind("Interface",Icons.INTERFACE_ICON,JavaTemplateUtil.INTERNAL_INTERFACE_TEMPLATE_NAME);
  if (LanguageLevelProjectExtension.getInstance(project).getLanguageLevel().compareTo(LanguageLevel.JDK_1_5) >= 0) {
    builder.addKind("Enum",Icons.ENUM_ICON,JavaTemplateUtil.INTERNAL_ENUM_TEMPLATE_NAME);
    builder.addKind("Annotation",Icons.ANNOTATION_TYPE_ICON,JavaTemplateUtil.INTERNAL_ANNOTATION_TYPE_TEMPLATE_NAME);
  }
  for (  FileTemplate template : FileTemplateManager.getInstance().getAllTemplates()) {
    final JavaCreateFromTemplateHandler handler=new JavaCreateFromTemplateHandler();
    if (handler.handlesTemplate(template) && JavaCreateFromTemplateHandler.canCreate(directory)) {
      builder.addKind(template.getName(),JavaFileType.INSTANCE.getIcon(),template.getName());
    }
  }
}
