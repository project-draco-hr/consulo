{
  SpellCheckerManager manager=SpellCheckerManager.getInstance(token.getElement().getProject());
  final TextRange textRange=area.getTextRange();
  final String word=area.getWord();
  if (textRange == null || word == null) {
    return;
  }
  if (manager.hasProblem(word)) {
    List<SpellCheckerQuickFix> fixes=new ArrayList<SpellCheckerQuickFix>();
    if (isOnTheFly) {
      if (!token.isUseRename()) {
        fixes.add(new ChangeTo());
      }
 else {
        fixes.add(new RenameTo());
      }
    }
    final AcceptWordAsCorrect acceptWordAsCorrect=isOnTheFly ? BATCH_ACCEPT_FIX : new AcceptWordAsCorrect();
    fixes.add(acceptWordAsCorrect);
    final ProblemDescriptor problemDescriptor=createProblemDescriptor(token,holder,textRange,fixes,isOnTheFly);
    holder.registerProblem(problemDescriptor);
  }
}
