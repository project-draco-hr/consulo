{
  myTemplates.put(new TemplateKey(template),template);
  DefaultMutableTreeNode node=new DefaultMutableTreeNode(template);
  if (myTreeRoot.getChildCount() > 0) {
    for (DefaultMutableTreeNode child=(DefaultMutableTreeNode)myTreeRoot.getFirstChild(); child != null; child=(DefaultMutableTreeNode)myTreeRoot.getChildAfter(child)) {
      String group=(String)child.getUserObject();
      if (group.equals(template.getGroupName())) {
        int index=getIndexToInsert(child,template.getKey());
        child.insert(node,index);
        myTreeTableModel.nodesWereInserted(child,new int[]{index});
        setSelectedNode(node);
        return;
      }
    }
  }
  int index=getIndexToInsert(myTreeRoot,template.getGroupName());
  DefaultMutableTreeNode groupNode=new DefaultMutableTreeNode(template.getGroupName());
  myTreeRoot.insert(groupNode,index);
  myTreeTableModel.nodesWereInserted(myTreeRoot,new int[]{index});
  groupNode.add(node);
  myTreeTableModel.nodesWereInserted(groupNode,new int[]{0});
  setSelectedNode(node);
}
