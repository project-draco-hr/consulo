{
  JPanel tablePanel=new JPanel();
  tablePanel.setBorder(BorderFactory.createLineBorder(Color.gray));
  tablePanel.setLayout(new BorderLayout());
  tablePanel.add(createTable(),BorderLayout.CENTER);
  JPanel tableButtonsPanel=new JPanel();
  tableButtonsPanel.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
  tableButtonsPanel.setLayout(new GridBagLayout());
  GridBagConstraints gbConstraints=new GridBagConstraints();
  gbConstraints.gridwidth=GridBagConstraints.REMAINDER;
  gbConstraints.fill=GridBagConstraints.HORIZONTAL;
  gbConstraints.insets=new Insets(0,0,4,0);
  final JButton addButton=new JButton(CodeInsightBundle.message("templates.dialog.table.action.add"));
  addButton.setMargin(new Insets(2,4,2,4));
  tableButtonsPanel.add(addButton,gbConstraints);
  myCopyButton=new JButton(CodeInsightBundle.message("templates.dialog.table.action.copy"));
  myCopyButton.setEnabled(false);
  myCopyButton.setMargin(new Insets(2,4,2,4));
  tableButtonsPanel.add(myCopyButton,gbConstraints);
  myEditButton=new JButton(CodeInsightBundle.message("templates.dialog.table.action.edit"));
  myEditButton.setEnabled(false);
  myEditButton.setMargin(new Insets(2,4,2,4));
  tableButtonsPanel.add(myEditButton,gbConstraints);
  myRemoveButton=new JButton(CodeInsightBundle.message("templates.dialog.table.action.remove"));
  myRemoveButton.setEnabled(false);
  myRemoveButton.setMargin(new Insets(2,4,2,4));
  tableButtonsPanel.add(myRemoveButton,gbConstraints);
  gbConstraints.weighty=1;
  tableButtonsPanel.add(new JPanel(),gbConstraints);
  tablePanel.add(tableButtonsPanel,BorderLayout.EAST);
  optionsPanel.add(tablePanel,BorderLayout.CENTER);
  JPanel textPanel=new JPanel(new BorderLayout());
  textPanel.setBorder(BorderFactory.createEmptyBorder(10,0,0,0));
  myEditor=TemplateEditorUtil.createEditor(true);
  textPanel.add(myEditor.getComponent(),BorderLayout.CENTER);
  textPanel.add(createExpandByPanel(),BorderLayout.SOUTH);
  textPanel.setPreferredSize(new Dimension(100,myEditor.getLineHeight() * 12));
  optionsPanel.add(textPanel,BorderLayout.SOUTH);
  addButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      addRow();
    }
  }
);
  myCopyButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      copyRow();
    }
  }
);
  myEditButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      edit();
    }
  }
);
  myRemoveButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      removeRow();
    }
  }
);
}
