{
  myKeyField.setText(myTemplate.getKey());
  myDescription.setText(myTemplate.getDescription());
  if (myTemplate.getShortcutChar() == TemplateSettings.DEFAULT_CHAR) {
    myExpandByCombo.setSelectedItem(myDefaultShortcutItem);
  }
 else   if (myTemplate.getShortcutChar() == TemplateSettings.TAB_CHAR) {
    myExpandByCombo.setSelectedItem(TAB);
  }
 else   if (myTemplate.getShortcutChar() == TemplateSettings.ENTER_CHAR) {
    myExpandByCombo.setSelectedItem(ENTER);
  }
 else {
    myExpandByCombo.setSelectedItem(SPACE);
  }
  CommandProcessor.getInstance().executeCommand(null,new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          myTemplateEditor.getDocument().replaceString(0,myTemplateEditor.getDocument().getTextLength(),myTemplate.getString());
        }
      }
);
    }
  }
,"",null);
  UndoManager.getGlobalInstance().clearUndoRedoQueue(TextEditorProvider.getInstance().getTextEditor(myTemplateEditor));
  Set groups=new TreeSet();
  for (int i=0; i < myTemplates.length; i++) {
    TemplateImpl template=myTemplates[i];
    groups.add(template.getGroupName());
  }
  for (Iterator i=groups.iterator(); i.hasNext(); ) {
    String groupName=(String)i.next();
    myGroupCombo.addItem(groupName);
  }
  myGroupCombo.setSelectedItem(myTemplate.getGroupName());
  myVariables.clear();
  for (int i=0; i < myTemplate.getVariableCount(); i++) {
    Variable variable=new Variable(myTemplate.getVariableNameAt(i),myTemplate.getExpressionStringAt(i),myTemplate.getDefaultValueStringAt(i),myTemplate.isAlwaysStopAt(i));
    myVariables.add(variable);
  }
  myCbJavaCode.setSelected(myTemplate.getTemplateContext().JAVA_CODE);
  myCbJavaComment.setSelected(myTemplate.getTemplateContext().JAVA_COMMENT);
  myCbJavaString.setSelected(myTemplate.getTemplateContext().JAVA_STRING);
  myCbCompletion.setSelected(myTemplate.getTemplateContext().COMPLETION);
  myCbOther.setSelected(myTemplate.getTemplateContext().OTHER);
  myCbHTML.setSelected(myTemplate.getTemplateContext().HTML);
  myCbXML.setSelected(myTemplate.getTemplateContext().XML);
  myCbJSP.setSelected(myTemplate.getTemplateContext().JSP);
  myCbReformat.setSelected(myTemplate.isToReformat());
  myCbShortenFQNames.setSelected(myTemplate.isToShortenLongNames());
  myExpandByCombo.setEnabled(!isEnabledInStaticContextOnly());
  updateHighlighter();
  validateOKButton();
  validateEditVariablesButton();
}
