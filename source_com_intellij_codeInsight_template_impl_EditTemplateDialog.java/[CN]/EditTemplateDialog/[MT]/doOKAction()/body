{
  String key=myKeyField.getText().trim();
  for (int i=0; i < myTemplates.length; i++) {
    TemplateImpl template=myTemplates[i];
    if (template.getKey().equals(key) && myTemplate != template) {
      Messages.showMessageDialog(getContentPane(),"Cannot save the template.\nTemplate with the abbreviation \"" + key + "\"\n"+ "already exists in group \""+ template.getGroupName()+ "\".\n"+ "Try another abbreviation.","Cannot Save",Messages.getErrorIcon());
      return;
    }
  }
  if (!TemplateImplUtil.validateTemplateText(myTemplateEditor.getDocument().getText())) {
    Messages.showMessageDialog(getContentPane(),"Error parsing the template","Cannot Save",Messages.getErrorIcon());
    return;
  }
  super.doOKAction();
}
