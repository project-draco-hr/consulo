def __init__(self, ui, path, rev=None):
    super(convert_cvs, self).__init__(ui, path, rev=rev)
    cvs = os.path.join(path, 'CVS')
    if (not os.path.exists(cvs)):
        raise NoRepo((_('%s does not look like a CVS checkout') % path))
    checktool('cvs')
    self.changeset = None
    self.files = {}
    self.tags = {}
    self.lastbranch = {}
    self.socket = None
    self.cvsroot = open(os.path.join(cvs, 'Root')).read()[:(-1)]
    self.cvsrepo = open(os.path.join(cvs, 'Repository')).read()[:(-1)]
    self.encoding = locale.getpreferredencoding()
    self._connect()
