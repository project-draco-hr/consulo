{
  Collection<StructureViewExtension> result=myImplExtensions.get(type);
  if (result == null) {
    for (    Class<? extends PsiElement> registeredType : myExtensions.keySet()) {
      if (ReflectionCache.isAssignable(registeredType,type)) {
        final Collection<StructureViewExtension> extensions=myExtensions.get(registeredType);
        for (        StructureViewExtension extension : extensions) {
          myImplExtensions.put(type,extension);
        }
      }
    }
    result=myImplExtensions.get(type);
    if (result == null)     return Collections.emptyList();
  }
  return result;
}
