{
  add(facade,createDirectory(r,"root"));
  add(facade,createDirectory(r,"root/dir1"));
  add(facade,rename(r,"root/dir1","dir2"));
  add(facade,delete(r,"root/dir2"));
  add(facade,createDirectory(r,"root/dir2"));
  add(facade,rename(r,"root","root2"));
  RootEntry copy=r.copy();
  assertEquals("root/dir2",facade.revertUpTo(copy,"root2/dir2",facade.getChangeListInTests().getChangesInTests().get(3),null,false,true));
  assertTrue(copy.hasEntry("root/dir2"));
  assertFalse(copy.hasEntry("root/dir1"));
  assertFalse(copy.hasEntry("root1"));
  copy=r.copy();
  assertEquals("root/dir1",facade.revertUpTo(copy,"root2/dir2",facade.getChangeListInTests().getChangesInTests().get(3),null,true,true));
  assertTrue(copy.hasEntry("root/dir1"));
  assertFalse(copy.hasEntry("root/dir2"));
  assertFalse(copy.hasEntry("root1"));
}
