{
  if (myOpenProjects.contains(project))   return false;
  if (!ApplicationManager.getApplication().isUnitTestMode() && !((ProjectEx)project).getStateStore().checkVersion())   return false;
  myOpenProjects.add(project);
  fireProjectOpened(project);
  final StartupManagerImpl startupManager=(StartupManagerImpl)StartupManager.getInstance(project);
  startupManager.runProjectConfigurationActivities();
  boolean ok=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      startupManager.runStartupActivities();
    }
  }
,ProjectBundle.message("project.load.progress"),true,project);
  if (!ok) {
    closeProject(project,false);
    notifyProjectOpenFailed();
    return false;
  }
  startupManager.runPostStartupActivities();
  return true;
}
