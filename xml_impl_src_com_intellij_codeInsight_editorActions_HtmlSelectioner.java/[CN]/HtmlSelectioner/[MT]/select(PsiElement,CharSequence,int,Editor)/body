{
  List<TextRange> result=super.select(e,editorText,cursorOffset,editor);
  if (ourStyleSelectioner != null) {
    List<TextRange> o=ourStyleSelectioner.select(e,editorText,cursorOffset,editor);
    if (o != null)     result.addAll(o);
  }
  final PsiElement parent=e.getParent();
  if (parent instanceof XmlComment) {
    result.addAll(expandToWholeLine(editorText,parent.getTextRange(),true));
  }
  PsiFile psiFile=e.getContainingFile();
  FileType fileType=FileTypeManager.getInstance().getFileTypeByFile(psiFile.getVirtualFile());
  addAttributeSelection(result,e);
  final FileViewProvider fileViewProvider=psiFile.getViewProvider();
  for (  Language lang : fileViewProvider.getPrimaryLanguages()) {
    final PsiFile langFile=fileViewProvider.getPsi(lang);
    if (langFile != psiFile)     addAttributeSelection(result,fileViewProvider.findElementAt(cursorOffset,lang));
  }
  EditorHighlighter highlighter=HighlighterFactory.createHighlighter(e.getProject(),psiFile.getVirtualFile());
  highlighter.setText(editorText);
  addTagSelection(editorText,cursorOffset,fileType,highlighter,result);
  return result;
}
