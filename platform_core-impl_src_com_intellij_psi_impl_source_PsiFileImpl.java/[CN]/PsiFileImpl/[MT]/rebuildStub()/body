{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      if (!myManager.isDisposed()) {
        myManager.dropResolveCaches();
        ((PsiModificationTrackerImpl)myManager.getModificationTracker()).incCounter();
      }
      final VirtualFile vFile=getVirtualFile();
      if (vFile != null && vFile.isValid()) {
        final Document doc=FileDocumentManager.getInstance().getCachedDocument(vFile);
        if (doc != null) {
          FileDocumentManager.getInstance().saveDocument(doc);
        }
        FileContentUtilCore.reparseFiles(vFile);
        StubTreeLoader.getInstance().rebuildStubTree(vFile);
      }
    }
  }
,ModalityState.NON_MODAL);
}
