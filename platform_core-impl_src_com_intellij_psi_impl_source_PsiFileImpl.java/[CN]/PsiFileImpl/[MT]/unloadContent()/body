{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  clearCaches();
  myViewProvider.beforeContentsSynchronized();
synchronized (PsiLock.LOCK) {
    FileElement treeElement=derefTreeElement();
    DebugUtil.startPsiModification("unloadContent");
    try {
      if (treeElement != null) {
        myTreeElementPointer=null;
        treeElement.detachFromFile();
        DebugUtil.onInvalidated(treeElement);
      }
      clearStub("unloadContent");
    }
  finally {
      DebugUtil.finishPsiModification();
    }
  }
  myViewProvider.contentsSynchronized();
}
