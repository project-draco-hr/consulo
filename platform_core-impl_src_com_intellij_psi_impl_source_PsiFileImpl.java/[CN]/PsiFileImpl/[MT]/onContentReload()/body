{
  ApplicationManager.getApplication().assertWriteAccessAllowed();
  DebugUtil.startPsiModification("onContentReload");
  try {
    myRefToPsi.invalidatePsi();
    FileElement treeElement=derefTreeElement();
    if (treeElement != null) {
      setTreeElementPointer(null);
      treeElement.detachFromFile();
      DebugUtil.onInvalidated(treeElement);
    }
    clearStub("onContentReload");
  }
  finally {
    DebugUtil.finishPsiModification();
  }
  clearCaches();
}
