{
  StubTree fileStub=derefStub();
  if (fileStub != null) {
synchronized (myStubLock) {
      fileStub=derefStub();
      StubElement childStub=psi.getStub();
      if (fileStub != null && childStub != null && fileStub.getRoot() != childStub.getParentStub()) {
        return false;
      }
    }
  }
  return isValid();
}
