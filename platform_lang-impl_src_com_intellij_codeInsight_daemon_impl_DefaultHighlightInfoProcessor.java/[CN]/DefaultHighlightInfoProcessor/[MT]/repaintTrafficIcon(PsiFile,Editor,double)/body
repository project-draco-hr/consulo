{
  if (ApplicationManager.getApplication().isCommandLine())   return;
  if (repaintIconAlarm.isEmpty() || progress >= 1) {
    repaintIconAlarm.addRequest(new Runnable(){
      @Override public void run(){
        Project myProject=file.getProject();
        if (myProject.isDisposed())         return;
        Editor myeditor=editor;
        if (myeditor == null) {
          myeditor=PsiUtilBase.findEditor(file);
        }
        if (myeditor == null || myeditor.isDisposed())         return;
        EditorMarkupModelImpl markup=(EditorMarkupModelImpl)myeditor.getMarkupModel();
        markup.repaintTrafficLightIcon();
        DaemonListeners.repaintErrorStripeRenderer(myeditor,myProject);
      }
    }
,50,null);
  }
}
