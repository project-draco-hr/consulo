{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
      Library.ModifiableModel libraryModel=rootModel.getModuleLibraryTable().createLibrary().getModifiableModel();
      libraryModel.addRoot(myModule1Dir,OrderRootType.CLASSES);
      libraryModel.commit();
      rootModel.commit();
    }
  }
);
  myIndex.checkConsistency();
  checkInfo(myModule1Dir,myModule,false,false,true,false,"",new Module[]{myModule});
  checkInfo(mySrcDir1,myModule,true,false,true,false,"",new Module[]{myModule});
}
