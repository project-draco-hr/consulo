{
  String rootPath=myModule1Dir.getPath();
  File f=new File(rootPath,"excludedDir/dir/anotherContentRoot");
  ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
  rootModel.getContentEntries()[0].addExcludeFolder(VfsUtil.pathToUrl(FileUtil.toSystemIndependentName(f.getParentFile().getParent())));
  rootModel.commit();
  rootModel=ModuleRootManager.getInstance(myModule2).getModifiableModel();
  rootModel.addContentEntry(VfsUtil.pathToUrl(FileUtil.toSystemIndependentName(f.getPath())));
  rootModel.commit();
  f.mkdirs();
  LocalFileSystem.getInstance().refresh(false);
  assertNull(myIndex.getInfoForDirectory(LocalFileSystem.getInstance().findFileByIoFile(f.getParentFile().getParentFile())));
  assertNotNull(myIndex.getInfoForDirectory(LocalFileSystem.getInstance().findFileByIoFile(f)));
}
