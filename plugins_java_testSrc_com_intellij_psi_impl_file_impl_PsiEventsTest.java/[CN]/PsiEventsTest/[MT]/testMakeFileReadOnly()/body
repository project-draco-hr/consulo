{
  FileManager fileManager=myPsiManager.getFileManager();
  VirtualFile file=myPrjDir1.createChildData(null,"a.txt");
  PsiFile psiFile=fileManager.findFile(file);
  final EventsTestListener listener=new EventsTestListener();
  myPsiManager.addPsiTreeChangeListener(listener,getTestRootDisposable());
  ReadOnlyAttributeUtil.setReadOnlyAttribute(file,true);
  String string=listener.getEventsString();
  final String expected="beforePropertyChange\n" + "propertyChanged\n";
  new WaitFor(500){
    @Override protected boolean condition(){
      return expected.equals(listener.getEventsString());
    }
  }
.assertCompleted(expected);
  ReadOnlyAttributeUtil.setReadOnlyAttribute(file,false);
}
