{
  myFixture.addClass("public class Foo {" + "public static void main(String[] args) { " + "  System.out.println(new Bar().foo());"+ "}"+ "}");
  final String barText="class Bar {" + "  def foo() { 239  }" + "}";
  final PsiFile file=myFixture.addFileToProject("Bar.groovy",barText);
  assertEmpty(make());
  assertOutput("Foo","239");
  setFileText(file,"class Bar {}");
  try {
    make();
    fail("Make should fail");
  }
 catch (  RuntimeException e) {
    if (!(e.getCause() instanceof AssertionFailedError)) {
      throw e;
    }
  }
  setFileText(file,barText);
  assertEmpty(make());
  assertOutput("Foo","239");
}
