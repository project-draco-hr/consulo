{
  LinkedHashSet<PsiType> types=new LinkedHashSet<PsiType>();
  addExprTypesByInstanceof(types,expr);
  addExprTypesWhenContainerElement(types,expr);
  addExprTypesByDerivedClasses(types,expr);
  return types.toArray(new PsiType[types.size()]);
}
