{
  Presentation presentation=event.getPresentation();
  Project project=event.getData(DataKeys.PROJECT);
  if (project == null) {
    presentation.setEnabled(false);
    return;
  }
  final DebuggerContextImpl context=(DebuggerManagerEx.getInstanceEx(project)).getContext();
  DebuggerSession debuggerSession=context.getDebuggerSession();
  final boolean isPaused=debuggerSession != null && debuggerSession.isPaused();
  final SuspendContextImpl suspendContext=context.getSuspendContext();
  final boolean hasCurrentThread=suspendContext != null && suspendContext.getThread() != null;
  presentation.setEnabled(isPaused && hasCurrentThread);
}
