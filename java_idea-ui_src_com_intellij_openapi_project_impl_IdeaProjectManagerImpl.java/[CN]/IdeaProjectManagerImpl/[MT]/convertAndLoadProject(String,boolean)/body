{
  final ConversionResult conversionResult;
  if (convert) {
    conversionResult=convertProject(filePath);
    if (conversionResult.openingIsCanceled()) {
      return null;
    }
  }
 else {
    conversionResult=null;
  }
  final Project project=loadProjectWithProgress(filePath);
  if (project == null)   return null;
  if (conversionResult != null && !conversionResult.conversionNotNeeded()) {
    StartupManager.getInstance(project).registerPostStartupActivity(new Runnable(){
      public void run(){
        conversionResult.postStartupActivity(project);
      }
    }
);
  }
  return project;
}
