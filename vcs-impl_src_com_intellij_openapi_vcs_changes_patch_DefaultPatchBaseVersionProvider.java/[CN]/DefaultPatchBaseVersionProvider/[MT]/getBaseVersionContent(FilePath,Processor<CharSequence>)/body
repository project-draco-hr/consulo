{
  if (myVcs == null) {
    return;
  }
  final VcsHistoryProvider historyProvider=myVcs.getVcsHistoryProvider();
  if (historyProvider == null)   return;
  VcsRevisionNumber revision=null;
  if (myRevisionPattern != null) {
    final Matcher matcher=myRevisionPattern.matcher(myVersionId);
    if (matcher.find()) {
      revision=myVcs.parseRevisionNumber(matcher.group(1));
    }
  }
  Date versionDate=null;
  if (revision == null) {
    try {
      versionDate=new Date(myVersionId);
    }
 catch (    IllegalArgumentException ex) {
      return;
    }
  }
  try {
    final VcsHistorySession session=historyProvider.createSessionFor(filePath);
    if (session == null)     return;
    final List<VcsFileRevision> list=session.getRevisionList();
    if (list == null)     return;
    for (    VcsFileRevision fileRevision : list) {
      boolean found;
      if (revision != null) {
        found=fileRevision.getRevisionNumber().compareTo(revision) <= 0;
      }
 else {
        found=fileRevision.getRevisionDate().before(versionDate);
      }
      if (found) {
        fileRevision.loadContent();
        processor.process(LoadTextUtil.getTextByBinaryPresentation(fileRevision.getContent(),myFile,false));
        break;
      }
    }
  }
 catch (  IOException e) {
    LOG.error(e);
  }
}
