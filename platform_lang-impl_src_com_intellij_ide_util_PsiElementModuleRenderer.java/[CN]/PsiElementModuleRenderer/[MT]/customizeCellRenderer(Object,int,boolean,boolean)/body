{
  myText="";
  if (value instanceof PsiElement) {
    PsiElement element=(PsiElement)value;
    if (element.isValid()) {
      PsiFile psiFile=element.getContainingFile();
      Module module=ModuleUtil.findModuleForPsiElement(element);
      final ProjectFileIndex fileIndex=ProjectRootManager.getInstance(element.getProject()).getFileIndex();
      boolean isInLibraries=false;
      if (psiFile != null) {
        VirtualFile vFile=psiFile.getVirtualFile();
        if (vFile != null) {
          isInLibraries=fileIndex.isInLibrarySource(vFile) || fileIndex.isInLibraryClasses(vFile);
          if (isInLibraries) {
            showLibraryLocation(fileIndex,vFile);
          }
        }
      }
      if (module != null && !isInLibraries) {
        showProjectLocation(psiFile,module,fileIndex);
      }
    }
  }
  setText(myText);
  setBorder(BorderFactory.createEmptyBorder(0,0,0,UIUtil.getListCellHPadding()));
  setHorizontalTextPosition(SwingConstants.LEFT);
  setBackground(selected ? UIUtil.getListSelectionBackground() : UIUtil.getListBackground());
  setForeground(selected ? UIUtil.getListSelectionForeground() : UIUtil.getInactiveTextColor());
  if (UIUtil.isUnderNimbusLookAndFeel()) {
    setOpaque(false);
  }
}
