{
  while (e instanceof InvocationTargetException) {
    if (e.getCause() == null) {
      break;
    }
    e=e.getCause();
  }
  ErrorInfo info=new ErrorInfo();
  info.myMessage=info.myDisplayMessage=message;
  info.myThrowable=e;
  configureError(info,data);
  if (info.myShowMessage) {
    showErrorPage(info);
  }
  if (info.myShowLog) {
    LOG.error(LogMessageEx.createEvent(info.myDisplayMessage,info.myMessage + "\n" + ExceptionUtil.getThrowableText(info.myThrowable),new Attachment(myFile)));
  }
 else {
    LOG.info(info.myDisplayMessage + "\n" + info.myMessage,info.myThrowable);
  }
}
