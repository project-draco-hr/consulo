{
  if (myRootComponent != null && myExpandedState == null && mySelectionState == null) {
    myExpandedState=new int[myExpandedComponents == null ? 0 : myExpandedComponents.size()][];
    for (int i=0; i < myExpandedState.length; i++) {
      IntArrayList path=new IntArrayList();
      componentToPath((RadComponent)myExpandedComponents.get(i),path);
      myExpandedState[i]=path.toArray();
    }
    List<RadComponent> selection=mySurfaceArea.getSelection();
    mySelectionState=new int[selection.size()][];
    for (int i=0; i < mySelectionState.length; i++) {
      IntArrayList path=new IntArrayList();
      componentToPath(selection.get(i),path);
      mySelectionState[i]=path.toArray();
    }
    myExpandedComponents=null;
    myToolProvider.loadDefaultTool();
    mySurfaceArea.deselectAll();
  }
}
