{
  VirtualFile p1=createModulePom("project1","<groupId>test</groupId>" + "<artifactId>project1</artifactId>" + "<version>1</version>");
  VirtualFile p2=createModulePom("project2","<groupId>test</groupId>" + "<artifactId>project2</artifactId>" + "<version>1</version>");
  importProjects(p1,p2);
  VirtualFile oldDir=p2.getParent();
  VirtualFile newDir=myProjectRoot.createChildDirectory(this,"foo");
  assertEquals(2,myMavenTree.getRootProjects().size());
  p2.move(this,newDir);
  waitForReadingCompletion();
  assertEquals(1,myMavenTree.getRootProjects().size());
  p2.move(this,oldDir);
  waitForReadingCompletion();
  assertEquals(2,myMavenTree.getRootProjects().size());
}
