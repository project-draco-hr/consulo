{
  createProjectPom("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<dependencies>"+ "  <dependency>"+ "    <groupId>junit</groupId>"+ "    <artifactId>junit</artifactId>"+ "    <version>4.0</version>"+ "  </dependency>"+ "</dependencies>");
  importProject();
  assertModules("project");
  createProjectSubDir("src/main/java");
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      ModifiableRootModel model=ModuleRootManager.getInstance(getModule("project")).getModifiableModel();
      for (      OrderEntry each : model.getOrderEntries()) {
        if (each instanceof LibraryOrderEntry && MavenRootModelAdapter.isMavenLibrary(((LibraryOrderEntry)each).getLibrary())) {
          model.removeOrderEntry(each);
        }
      }
      model.commit();
    }
  }
);
  assertSources("project");
  assertModuleLibDeps("project");
  myProjectsManager.forceUpdateAllProjectsOrFindAllAvailablePomFiles();
  waitForReadingCompletion();
  myProjectsManager.waitForResolvingCompletion();
  myProjectsManager.performScheduledImportInTests();
  assertSources("project","src/main/java");
  assertModuleLibDeps("project","Maven: junit:junit:4.0");
}
