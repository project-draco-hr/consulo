{
  FileUtil.processFilesRecursively(baseDir,new Processor<File>(){
    @Override public boolean process(    File file){
      try {
        String name=file.getName();
        boolean copy=name.endsWith(".new");
        boolean remove=name.endsWith(".remove");
        if (copy || remove) {
          String path=FileUtil.getRelativePath(baseDir,file);
          assertNotNull(path);
          if (!path.contains(File.separator)) {
            path="src" + File.separator + path;
          }
          if (copy) {
            FileUtil.copyContent(file,new File(workDir,StringUtil.trimEnd(path,".new")));
          }
          if (remove) {
            FileUtil.delete(new File(workDir,StringUtil.trimEnd(path,".remove")));
          }
        }
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
      return true;
    }
  }
);
}
