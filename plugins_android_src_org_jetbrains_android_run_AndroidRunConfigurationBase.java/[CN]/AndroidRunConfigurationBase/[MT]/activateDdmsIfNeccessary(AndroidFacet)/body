{
  Project project=facet.getModule().getProject();
  boolean ddmsEnabled=AndroidEnableDdmsAction.isDdmsEnabled();
  if (ddmsEnabled && isDdmsCorrupted(facet)) {
    ddmsEnabled=false;
    AndroidEnableDdmsAction.setDdmsEnabled(project,false);
  }
  if (!ddmsEnabled) {
    int result=Messages.showYesNoDialog(project,AndroidBundle.message("android.ddms.disabled.error"),AndroidBundle.message("android.ddms.disabled.dialog.title"),Messages.getQuestionIcon());
    if (result != 0) {
      return false;
    }
    AndroidEnableDdmsAction.setDdmsEnabled(project,true);
  }
  return true;
}
