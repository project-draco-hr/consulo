{
  PropertiesComponent propertiesComponent=PropertiesComponent.getInstance(getProject());
  String value=propertiesComponent.getValue(ANDROID_TARGET_DEVICES_PROPERTY);
  String[] selectedSerials=value != null ? fromString(value) : null;
  DeviceChooser chooser=new DeviceChooser(facet,supportMultipleDevices(),selectedSerials);
  chooser.show();
  IDevice[] devices=chooser.getSelectedDevices();
  if (chooser.getExitCode() != DeviceChooser.OK_EXIT_CODE || devices.length == 0) {
    return ArrayUtil.EMPTY_STRING_ARRAY;
  }
  String[] serials=new String[devices.length];
  for (int i=0; i < devices.length; i++) {
    serials[i]=devices[i].getSerialNumber();
  }
  propertiesComponent.setValue(ANDROID_TARGET_DEVICES_PROPERTY,toString(serials));
  return serials;
}
