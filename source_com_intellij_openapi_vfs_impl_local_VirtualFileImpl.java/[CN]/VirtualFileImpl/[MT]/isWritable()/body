{
  ourFileSystem.READ_LOCK.lock();
  try {
    if (!isWritableInitialized()) {
      ourFileSystem.READ_LOCK.unlock();
      ourFileSystem.WRITE_LOCK.lock();
      try {
        cacheIsWritableInitialized();
        final boolean canWrite=getPhysicalFile().canWrite();
        cacheIsWritable(canWrite);
        return canWrite;
      }
  finally {
        ourFileSystem.WRITE_LOCK.unlock();
        ourFileSystem.READ_LOCK.lock();
      }
    }
    return isWritableCached();
  }
  finally {
    ourFileSystem.READ_LOCK.unlock();
  }
}
