{
  if (getParent() == null) {
    return;
  }
  if (myName.equals(newName)) {
    return;
  }
  if (isInvalidName(newName)) {
    throw new IOException("Invalid file name: \"" + newName + "\"");
  }
  myFileSystem.fireBeforePropertyChange(requestor,this,PROP_NAME,myName,newName);
  PhysicalFile file=getPhysicalFile();
  String oldName=myName;
  setName(newName);
  PhysicalFile newFile=getPhysicalFile();
  if (!file.renameTo(newFile)) {
    setName(file.getName());
    throw new IOException("Cannot rename file " + file.getPath() + " to "+ newFile.getPath()+ ".");
  }
 else {
    myFileSystem.firePropertyChanged(requestor,this,PROP_NAME,oldName,myName);
  }
}
