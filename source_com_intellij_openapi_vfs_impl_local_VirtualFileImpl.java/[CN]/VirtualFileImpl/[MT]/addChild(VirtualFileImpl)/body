{
  ourFileSystem.WRITE_LOCK.lock();
  try {
    child.setParent(this);
    if (myChildren != null) {
      VirtualFileImpl[] newChildren=new VirtualFileImpl[myChildren.length + 1];
      System.arraycopy(myChildren,0,newChildren,0,myChildren.length);
      newChildren[myChildren.length]=child;
      myChildren=newChildren;
      ourFileSystem.myUnaccountedFiles.remove(child.getPath());
    }
 else {
      ourFileSystem.myUnaccountedFiles.put(child.getPath(),child);
    }
  }
  finally {
    ourFileSystem.WRITE_LOCK.unlock();
  }
}
