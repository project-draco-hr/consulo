{
  if (!isDirectory())   return null;
  if (myChildren == null) {
synchronized (ourFileSystem.LOCK) {
      if (myChildren == null) {
        PhysicalFile file=getPhysicalFile();
        PhysicalFile[] files=file.listFiles();
        final int length=files == null ? 0 : files.length;
        if (length == 0) {
          myChildren=EMPTY_VIRTUAL_FILE_ARRAY;
        }
 else {
          myChildren=new VirtualFileImpl[length];
          for (int i=0; i < length; ++i) {
            PhysicalFile f=files[i];
            myChildren[i]=new VirtualFileImpl(this,f,f.isDirectory());
          }
        }
      }
    }
  }
  return myChildren;
}
