{
  final Query<PsiReference> result=INSTANCE.createQuery(parameters);
  if (parameters.isSharedOptimizer) {
    return uniqueResults(result);
  }
  final SearchRequestCollector requests=parameters.getOptimizer();
  final PsiElement element=parameters.getElementToSearch();
  return uniqueResults(new MergeQuery<PsiReference>(result,new SearchRequestQuery(PsiUtilCore.getProjectInReadAction(element),requests)));
}
