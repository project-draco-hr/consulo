{
  buildStructure(myRoot);
  final NodeElement intellij=new NodeElement("intellij");
  buildNode(intellij,true);
  assertTree("-/\n" + " -com\n" + "  +[intellij]\n"+ " +jetbrains\n"+ " +org\n"+ " +xunit\n");
  removeFromParentButKeepRef(new NodeElement("intellij"));
  myValidator=new Validator(){
    public boolean isValid(    Object element){
      return !element.equals(intellij);
    }
  }
;
  final Ref<Object> revalidatedElement=new Ref<Object>();
  myStructure.setRevalidator(new Revalidator(){
    public AsyncResult<Object> revalidate(    NodeElement element){
      revalidatedElement.set(element);
      return null;
    }
  }
);
  updateFromRoot();
  assertTree("-/\n" + " [com]\n" + " +jetbrains\n"+ " +org\n"+ " +xunit\n");
  assertNull(revalidatedElement.get() != null ? revalidatedElement.get().toString() : null,revalidatedElement.get());
}
