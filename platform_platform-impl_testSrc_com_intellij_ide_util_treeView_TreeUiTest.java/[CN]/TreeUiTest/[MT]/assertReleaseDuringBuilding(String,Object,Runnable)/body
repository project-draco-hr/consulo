{
  buildStructure(myRoot);
  myElementUpdateHook=new ElementUpdateHook(){
    public void onElementAction(    String action,    Object element){
      if (!element.toString().equals(actionElement.toString()))       return;
      if (actionAction.equals(action)) {
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            myReadyRequest=true;
            Disposer.dispose(getBuilder());
          }
        }
);
      }
    }
  }
;
  buildAction.run();
  boolean released=new WaitFor(5000){
    @Override protected boolean condition(){
      return getBuilder().getUi() == null;
    }
  }
.isConditionRealized();
  assertTrue(released);
}
