{
  getBuilder().getUpdater().setDelay(1000);
  buildStructure(myRoot);
  buildNode("intellij",false);
  select(new Object[]{new NodeElement("intellij")},false);
  assertTree("-/\n" + " -com\n" + "  -[intellij]\n"+ "   openapi\n"+ " +jetbrains\n"+ " +org\n"+ " +xunit\n");
  myIntellij.addChild("ui");
  DefaultMutableTreeNode intellijNode=findNode("intellij",false);
  assertTrue(myTree.isExpanded(new TreePath(intellijNode.getPath())));
  getMyBuilder().addSubtreeToUpdate(intellijNode);
  assertFalse(getMyBuilder().getUi().isReady());
  select(new Object[]{new NodeElement("ui")},false);
  assertTree("-/\n" + " -com\n" + "  -intellij\n"+ "   openapi\n"+ "   [ui]\n"+ " +jetbrains\n"+ " +org\n"+ " +xunit\n");
}
