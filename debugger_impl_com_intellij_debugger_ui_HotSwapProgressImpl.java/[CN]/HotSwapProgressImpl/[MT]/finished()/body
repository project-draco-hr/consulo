{
  super.finished();
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      final List<String> errors=getMessages(MessageCategory.ERROR);
      final List<String> warnings=getMessages(MessageCategory.WARNING);
      if (errors.size() > 0) {
        ToolWindowManager.getInstance(getProject()).notifyByBalloon(ToolWindowId.DEBUG,MessageType.ERROR,buildMessage(errors),null,null);
        WindowManager.getInstance().getStatusBar(getProject()).setInfo(DebuggerBundle.message("status.hot.swap.completed.with.errors"));
      }
 else       if (warnings.size() > 0) {
        ToolWindowManager.getInstance(getProject()).notifyByBalloon(ToolWindowId.DEBUG,MessageType.WARNING,buildMessage(warnings),Messages.getWarningIcon(),null);
        WindowManager.getInstance().getStatusBar(getProject()).setInfo(DebuggerBundle.message("status.hot.swap.completed.with.warnings"));
      }
 else       if (myMessages.size() > 0) {
        final StringBuilder msg=StringBuilderSpinAllocator.alloc();
        try {
          for (          int category : myMessages.keys()) {
            if (msg.length() > 0) {
              msg.append(" \n");
            }
            final List<String> categoryMessages=getMessages(category);
            for (Iterator<String> it=categoryMessages.iterator(); it.hasNext(); ) {
              msg.append(it.next());
              if (it.hasNext()) {
                msg.append(" \n");
              }
            }
          }
          final String message=msg.toString();
          ToolWindowManager.getInstance(getProject()).notifyByBalloon(ToolWindowId.DEBUG,MessageType.INFO,message,Messages.getInformationIcon(),null);
          WindowManager.getInstance().getStatusBar(getProject()).setInfo(message);
        }
  finally {
          StringBuilderSpinAllocator.dispose(msg);
        }
      }
    }
  }
);
}
