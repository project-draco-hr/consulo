{
  ApplicationManager.getApplication().assertReadAccessAllowed();
  if (elements.isEmpty() || DumbService.getInstance(elements.get(0).getProject()).isDumb()) {
    return;
  }
  Set<PsiMethod> methods=new HashSet<PsiMethod>();
  for (  PsiElement element : elements) {
    ProgressManager.getInstance().checkCanceled();
    if (element instanceof PsiMethod) {
      final PsiMethod method=(PsiMethod)element;
      if (PsiUtil.canBeOverriden(method)) {
        methods.add(method);
      }
    }
 else     if (element instanceof PsiClass && !(element instanceof PsiTypeParameter)) {
      collectInheritingClasses((PsiClass)element,result);
    }
  }
  if (!methods.isEmpty()) {
    collectOverridingMethods(methods,result);
  }
}
