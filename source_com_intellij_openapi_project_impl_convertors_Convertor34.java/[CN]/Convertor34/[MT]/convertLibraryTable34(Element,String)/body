{
  if (filePath == null)   return null;
  final Element libraryTable=findNamedChild(root,"component","ProjectLibraryTable");
  if (libraryTable == null)   return null;
  final Element applicationLibraryTable=new Element("component");
  applicationLibraryTable.setAttribute("name","libraryTable");
  final List oldLibraries=libraryTable.getChildren("library");
  for (int i=0; i < oldLibraries.size(); i++) {
    Element oldLibrary=(Element)oldLibraries.get(i);
    Element newLibrary=convertLibrary(oldLibrary);
    applicationLibraryTable.addContent(newLibrary);
  }
  final String ioFilePath=filePath.replace('/',File.separatorChar);
  String parentPath=new File(ioFilePath).getParent();
  if (parentPath == null)   parentPath=".";
  parentPath+="/applicationLibraries.xml";
  final Element newRoot=new Element("application");
  newRoot.addContent(applicationLibraryTable);
  final Document libraryTableDocument=new Document(newRoot);
  try {
    JDOMUtil.writeDocument(libraryTableDocument,parentPath,"\n");
  }
 catch (  IOException e) {
    LOG.error(e);
    return null;
  }
  return parentPath;
}
