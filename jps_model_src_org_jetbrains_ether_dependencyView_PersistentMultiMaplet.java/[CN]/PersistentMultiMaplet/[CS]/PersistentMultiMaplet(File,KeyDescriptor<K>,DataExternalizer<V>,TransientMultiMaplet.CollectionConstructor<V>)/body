{
  myValueExternalizer=valueExternalizer;
  myMap=new PersistentHashMap<K,Collection<V>>(file,keyExternalizer,new CollectionDataExternalizer<V>(valueExternalizer,collectionFactory));
  myCache=new SLRUCache<K,Collection>(CACHE_SIZE,CACHE_SIZE){
    @NotNull @Override public Collection createValue(    K key){
      try {
        final Collection<V> collection=myMap.get(key);
        return collection == null ? NULL_COLLECTION : collection;
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
;
}
