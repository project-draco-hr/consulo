{
  if (!state.myDirToInfoMap.containsKey(dir) || !(dir instanceof NewVirtualFile))   return;
  list.add(dir);
  for (  VirtualFile child : ((NewVirtualFile)dir).getCachedChildren()) {
    if (child.isDirectory()) {
      addDirsRecursively(state,list,child);
    }
  }
}
