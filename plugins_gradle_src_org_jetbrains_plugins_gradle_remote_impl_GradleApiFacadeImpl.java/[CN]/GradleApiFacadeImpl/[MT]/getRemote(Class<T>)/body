{
  Object cachedResult=myRemotes.get(clazz);
  if (cachedResult != null) {
    return (T)cachedResult;
  }
  T result=clazz.newInstance();
  RemoteGradleProcessSettings settings=mySettings.get();
  if (settings != null) {
    result.setSettings(settings);
  }
  try {
    UnicastRemoteObject.exportObject(result,0);
    T stored=(T)myRemotes.putIfAbsent(clazz,result);
    return stored == null ? result : stored;
  }
 catch (  RemoteException e) {
    Object raceResult=myRemotes.get(clazz);
    if (raceResult != null) {
      return (T)raceResult;
    }
 else {
      throw new IllegalStateException(String.format("Can't prepare remote service for interface '%s'",clazz),e);
    }
  }
}
