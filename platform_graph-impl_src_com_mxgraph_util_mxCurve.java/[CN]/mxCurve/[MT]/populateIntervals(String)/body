{
  mxPoint[] currentCurve=points.get(index);
  double[] newIntervals=new double[currentCurve.length];
  double totalLength=0.0;
  newIntervals[0]=0;
  for (int i=0; i < currentCurve.length - 1; i++) {
    double changeX=currentCurve[i + 1].getX() - currentCurve[i].getX();
    double changeY=currentCurve[i + 1].getY() - currentCurve[i].getY();
    double segLength=Math.sqrt(changeX * changeX + changeY * changeY);
    totalLength+=segLength;
    newIntervals[i + 1]=totalLength;
  }
  for (int j=0; j < newIntervals.length; j++) {
    if (j == newIntervals.length - 1) {
      newIntervals[j]=1.0001;
    }
 else {
      newIntervals[j]=newIntervals[j] / totalLength;
    }
  }
  intervals.put(index,newIntervals);
  curveLengths.put(index,totalLength);
}
