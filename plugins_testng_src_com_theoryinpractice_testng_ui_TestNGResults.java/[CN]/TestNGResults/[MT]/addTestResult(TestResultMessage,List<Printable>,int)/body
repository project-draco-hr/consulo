{
  if (failedToStart != null) {
    output.addAll(failedToStart.getOutput());
    exceptionMark+=failedToStart.getExceptionMark();
  }
  TestProxy testCase=started.get(result);
  if (testCase == null) {
    final PsiElement element=getPackageClassNodeFor(result).getPsiElement();
    if (element instanceof PsiClass) {
      final PsiMethod[] methods=ApplicationManager.getApplication().runReadAction(new Computable<PsiMethod[]>(){
        public PsiMethod[] compute(){
          return ((PsiClass)element).findMethodsByName(result.getMethod(),true);
        }
      }
);
      if (methods.length > 0 && !AnnotationUtil.isAnnotated(methods[0],Arrays.asList(TestNGUtil.CONFIG_ANNOTATIONS_FQN))) {
        testCase=testStarted(result);
      }
    }
  }
  if (testCase != null) {
    testCase.setResultMessage(result);
    failedToStart=null;
    if (result.getResult() == MessageHelper.FAILED_TEST) {
      failed.add(testCase);
    }
    model.addTestResult(result);
  }
 else {
    testCase=new TestProxy();
    failedToStart=testCase;
  }
  testCase.setOutput(output);
  testCase.setExceptionMark(exceptionMark);
  if (result.getResult() == MessageHelper.FAILED_TEST) {
    myStatusLine.setStatusColor(ColorProgressBar.RED);
    myStatus=MessageHelper.FAILED_TEST;
  }
 else   if (result.getResult() == MessageHelper.SKIPPED_TEST && myStatus == MessageHelper.PASSED_TEST) {
    myStatus=MessageHelper.SKIPPED_TEST;
  }
  myStatusLine.setFraction((double)count / total);
  updateStatusLine();
}
