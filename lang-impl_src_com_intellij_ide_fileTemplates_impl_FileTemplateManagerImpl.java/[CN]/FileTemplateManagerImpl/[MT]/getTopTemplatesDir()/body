{
  if (ourTopDirs != null) {
    return ourTopDirs;
  }
  Set<VirtualFile> dirList=new THashSet<VirtualFile>();
  appendDefaultTemplatesFromClassloader(FileTemplateManagerImpl.class.getClassLoader(),dirList);
  final Application app=ApplicationManager.getApplication();
  PluginDescriptor[] plugins=app.getPlugins();
  for (  PluginDescriptor plugin : plugins) {
    appendDefaultTemplatesFromClassloader(plugin.getPluginClassLoader(),dirList);
  }
  ourTopDirs=dirList.toArray(new VirtualFile[dirList.size()]);
  return ourTopDirs;
}
