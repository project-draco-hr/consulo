{
  if (isShuttingDown)   return;
  if (attemptCount++ > MAX_PROCESS_LAUNCH_ATTEMPT_COUNT) {
    throw new IOException("Can't launch process anymore");
  }
  shutdownProcess();
  @NonNls final String executableName=SystemInfo.isWindows ? "fsnotifier.exe" : "fsnotifier";
  String alternatePathToFilewatcherExecutable=System.getProperty(PROPERTY_WATCHER_EXECUTABLE_PATH);
  if (alternatePathToFilewatcherExecutable != null) {
    if (!new File(alternatePathToFilewatcherExecutable).exists()) {
      alternatePathToFilewatcherExecutable=null;
    }
  }
  final String pathToExecutable=alternatePathToFilewatcherExecutable != null ? FileUtil.toSystemDependentName(alternatePathToFilewatcherExecutable) : PathManager.getBinPath() + File.separatorChar + executableName;
  notifierProcess=Runtime.getRuntime().exec(new String[]{pathToExecutable});
  notifierReader=new BufferedReader(new InputStreamReader(notifierProcess.getInputStream()));
  notifierWriter=new BufferedWriter(new OutputStreamWriter(notifierProcess.getOutputStream()));
}
