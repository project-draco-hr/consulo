{
  if (myProcessHandler == null || myProcessHandler.isProcessTerminated())   return;
  if (ApplicationManager.getApplication().isDisposeInProgress()) {
    recursive=flat=Collections.emptyList();
  }
synchronized (myLock) {
    if (!restart && myRecursiveWatchRoots.equals(recursive) && myFlatWatchRoots.equals(flat)) {
      return;
    }
    myMapping.clear();
    try {
      writeLine(ROOTS_COMMAND);
      for (      String path : recursive) {
        writeLine(path);
      }
      for (      String path : flat) {
        writeLine("|" + path);
      }
      writeLine("#");
    }
 catch (    IOException e) {
      LOG.error(e);
      shutdownProcess();
    }
    myRecursiveWatchRoots=recursive;
    myFlatWatchRoots=flat;
  }
}
