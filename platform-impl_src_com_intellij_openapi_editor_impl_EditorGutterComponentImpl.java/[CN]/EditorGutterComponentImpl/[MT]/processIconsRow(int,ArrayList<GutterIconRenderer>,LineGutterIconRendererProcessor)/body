{
  int middleCount=0;
  int middleSize=0;
  int x=getLineMarkerAreaOffset() + 1;
  final int y=myEditor.logicalPositionToXY(new LogicalPosition(line,0)).y;
  for (  GutterIconRenderer r : row) {
    final GutterIconRenderer.Alignment alignment=r.getAlignment();
    final Icon icon=r.getIcon();
    if (alignment == GutterIconRenderer.Alignment.LEFT) {
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
    }
 else {
      if (alignment == GutterIconRenderer.Alignment.CENTER) {
        middleCount++;
        middleSize+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
      }
    }
  }
  final int leftSize=x - getLineMarkerAreaOffset();
  x=getLineMarkerAreaOffset() + myIconsAreaWidth;
  for (  GutterIconRenderer r : row) {
    if (r.getAlignment() == GutterIconRenderer.Alignment.RIGHT) {
      Icon icon=r.getIcon();
      x-=icon.getIconWidth();
      processor.process(x,y + getTextAlignmentShift(icon),r);
      x-=GAP_BETWEEN_ICONS;
    }
  }
  int rightSize=myIconsAreaWidth + getLineMarkerAreaOffset() - x;
  if (middleCount > 0) {
    middleSize-=GAP_BETWEEN_ICONS;
    x=getLineMarkerAreaOffset() + leftSize + (myIconsAreaWidth - leftSize - rightSize- middleSize) / 2;
    for (    GutterIconRenderer r : row) {
      if (r.getAlignment() == GutterIconRenderer.Alignment.CENTER) {
        Icon icon=r.getIcon();
        processor.process(x,y + getTextAlignmentShift(icon),r);
        x+=icon.getIconWidth() + GAP_BETWEEN_ICONS;
      }
    }
  }
}
