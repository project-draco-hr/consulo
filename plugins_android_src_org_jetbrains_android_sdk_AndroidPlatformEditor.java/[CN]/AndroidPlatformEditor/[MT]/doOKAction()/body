{
  final String currentName=myLibraryModel.getName();
  String newName=myNameField.getText().trim();
  if (newName.length() == 0) {
    newName=null;
  }
  if (!Comparing.equal(newName,currentName)) {
    if (newName == null) {
      Messages.showErrorDialog(AndroidBundle.message("enter.platform.name.error"),CommonBundle.getErrorTitle());
      return;
    }
    if (myLibrary.getTable().getLibraryByName(newName) != null) {
      Messages.showErrorDialog(AndroidBundle.message("platform.already.exists.error",newName),CommonBundle.getErrorTitle());
      return;
    }
    if (AndroidSdkUtils.DEFAULT_PLATFORM_NAME_PROPERTY.equals(currentName)) {
      PropertiesComponent.getInstance().setValue(AndroidSdkUtils.DEFAULT_PLATFORM_NAME_PROPERTY,newName);
    }
    myLibraryModel.setName(currentName);
  }
  super.doOKAction();
}
