{
  Map<GrBinaryExpression,Alignment> innerAlignments=CollectionFactory.hashMap();
  List<Alignment> currentGroup=null;
  for (  ASTNode child : children) {
    PsiElement psi=child.getPsi();
    if (psi instanceof GrLabeledStatement) {
      List<GrBinaryExpression> table=getTable(((GrLabeledStatement)psi).getStatement());
      if (table.isEmpty()) {
        currentGroup=null;
      }
 else {
        currentGroup=new ArrayList<Alignment>();
        for (        GrBinaryExpression expression : table) {
          Alignment alignment=Alignment.createAlignment(true);
          currentGroup.add(alignment);
          innerAlignments.put(expression,alignment);
        }
      }
    }
 else     if (currentGroup != null && isTablePart(psi)) {
      List<GrBinaryExpression> table=getTable((GrStatement)psi);
      for (int i=0; i < Math.min(table.size(),currentGroup.size()); i++) {
        innerAlignments.put(table.get(i),currentGroup.get(i));
      }
    }
 else {
      currentGroup=null;
    }
  }
  return innerAlignments;
}
