{
  final ArrayList<Block> subBlocks=new ArrayList<Block>();
  ASTNode children[]=node.getChildren(null);
  if (children.length > 0 && NESTED.contains(children[0].getElementType())) {
    addNestedChildrenRecursively(children[0].getPsi(),subBlocks,myAlignment,myWrap,mySettings);
  }
 else   if (canBeCorrectBlock(children[0])) {
    subBlocks.add(new GroovyBlock(children[0],myAlignment,Indent.getContinuationWithoutFirstIndent(),myWrap,mySettings));
  }
  if (children.length > 1) {
    for (    ASTNode childNode : children) {
      if (canBeCorrectBlock(childNode) && children[0] != childNode) {
        subBlocks.add(new GroovyBlock(childNode,myAlignment,Indent.getContinuationWithoutFirstIndent(),myWrap,mySettings));
      }
    }
  }
  return subBlocks;
}
