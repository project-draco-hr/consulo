{
  for (int i=1; i < limit; i++) {
    ASTNode childNode=children.get(i);
    if (canBeCorrectBlock(childNode)) {
      IElementType type=childNode.getElementType();
      Indent indent=topLevel || NESTED.contains(type) || type == mIDENT || TokenSets.DOTS.contains(type) && !isAfterClosure(childNode) ? Indent.getContinuationWithoutFirstIndent() : Indent.getNoneIndent();
      if (aligner != null && TokenSets.DOTS.contains(type)) {
        aligner.append(childNode.getPsi());
      }
      list.add(new GroovyBlock(childNode,indent,myWrap,mySettings,myGroovySettings,myAlignmentProvider));
    }
  }
}
