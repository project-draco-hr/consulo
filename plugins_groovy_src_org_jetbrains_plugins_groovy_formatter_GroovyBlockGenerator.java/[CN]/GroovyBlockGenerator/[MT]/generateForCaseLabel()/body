{
  final ArrayList<Block> subBlocks=new ArrayList<Block>();
  ASTNode prevChildNode=null;
  Indent oldIndent=GroovyIndentProcessor.getChildIndent(myBlock,prevChildNode,myNode);
  subBlocks.add(new GroovyBlock(myNode,myAlignment,oldIndent,myWrap,mySettings));
  PsiElement nextSibling=myNode.getPsi().getNextSibling();
  while (!(nextSibling == null) && !(mRCURLY.equals(nextSibling.getNode().getElementType())) && !(nextSibling instanceof GrCaseLabel)) {
    ASTNode childNode=nextSibling.getNode();
    if (canBeCorrectBlock(childNode)) {
      final Indent indent=GroovyIndentProcessor.getChildIndent(myBlock,prevChildNode,childNode);
      subBlocks.add(new GroovyBlock(childNode,myAlignment,indent,myWrap,mySettings));
      prevChildNode=childNode;
    }
    nextSibling=nextSibling.getNextSibling();
  }
  return subBlocks;
}
