{
  final ArrayList<Block> subBlocks=new ArrayList<Block>();
  ASTNode children[]=myNode.getChildren(null);
  if (children.length > 0 && children[0].getPsi() instanceof GrNested) {
    addNestedChildrenRecursively(children[0].getPsi(),subBlocks,Indent.getContinuationWithoutFirstIndent());
  }
 else   if (canBeCorrectBlock(children[0])) {
    subBlocks.add(new GroovyBlock(children[0],myAlignment,Indent.getContinuationWithoutFirstIndent(),myWrap,mySettings));
  }
  if (children.length > 1) {
    for (    ASTNode childNode : children) {
      if (canBeCorrectBlock(childNode) && children[0] != childNode) {
        subBlocks.add(new GroovyBlock(childNode,myAlignment,Indent.getContinuationWithoutFirstIndent(),myWrap,mySettings));
      }
    }
  }
  return subBlocks;
}
