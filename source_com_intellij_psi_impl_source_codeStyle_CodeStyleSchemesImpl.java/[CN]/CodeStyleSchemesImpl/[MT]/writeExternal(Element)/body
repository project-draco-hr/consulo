{
  File[] files=getSchemeFiles();
  for (int i=0; i < files.length; i++) {
    File file=files[i];
    String fileName=file.getName().toLowerCase();
    String xmlExtension=".xml";
    if (fileName.endsWith(xmlExtension)) {
      try {
        String fileNameWithoutExtension=fileName.substring(0,fileName.length() - xmlExtension.length());
        if (!mySchemes.containsKey(fileNameWithoutExtension)) {
          file.delete();
        }
      }
 catch (      Exception e) {
        LOG.assertTrue(false,"Unable to save Code Style Settings");
      }
    }
  }
  final CodeStyleScheme[] schemes=getSchemes();
  for (int i=0; i < schemes.length; i++) {
    CodeStyleScheme scheme=schemes[i];
    if (!scheme.isDefault()) {
      File dir=getDir(true);
      if (dir == null)       break;
      ((CodeStyleSchemeImpl)scheme).save(dir);
    }
  }
  DefaultJDOMExternalizer.writeExternal(this,element);
}
