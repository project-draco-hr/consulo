{
  byte[] content=from.getFileType().isBinary() ? from.contentsToByteArray() : null;
  final String fileText=from.getFileType().isBinary() ? null : StringUtil.convertLineSeparators(VfsUtil.loadText(from));
  EditorInfo editorInfo=fileText != null ? new EditorInfo(fileText) : null;
  String newFileText=fileText != null ? editorInfo.getNewFileText() : null;
  doWrite(newFileText,to,content,streamsToClose);
  return editorInfo;
}
