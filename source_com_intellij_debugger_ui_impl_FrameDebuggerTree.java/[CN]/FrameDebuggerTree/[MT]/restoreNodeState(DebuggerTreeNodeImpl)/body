{
  if (myAnyNewLocals) {
    final NodeDescriptorImpl descriptor=node.getDescriptor();
    final boolean isLocalVar=descriptor instanceof LocalVariableDescriptorImpl;
    descriptor.myIsSelected&=isLocalVar;
    descriptor.myIsVisible=isLocalVar && descriptor.myIsSelected;
    if (!descriptor.myIsVisible) {
      descriptor.putUserData(VISIBLE_RECT,null);
    }
  }
  super.restoreNodeState(node);
  if (myAnyNewLocals && node.getDescriptor().myIsExpanded) {
    DebuggerTreeNodeImpl root=(DebuggerTreeNodeImpl)getMutableModel().getRoot();
    scrollToVisible(root);
  }
}
