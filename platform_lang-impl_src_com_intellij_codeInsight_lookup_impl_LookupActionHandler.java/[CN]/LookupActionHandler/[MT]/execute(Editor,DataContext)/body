{
  LookupImpl lookup=(LookupImpl)LookupManager.getActiveLookup(editor);
  if (lookup == null || !lookup.isVisible() || myRequireFocusedLookup && !lookup.isFocused()) {
    Project project=editor.getProject();
    if (project != null) {
      LookupManager.getInstance(project).hideActiveLookup();
    }
    myOriginalHandler.execute(editor,dataContext);
    return;
  }
  lookup.markSelectionTouched();
  executeInLookup(lookup,dataContext);
}
