{
  final Object source=getSource();
  List<LanguageVersion> items=new ArrayList<LanguageVersion>();
  if (source instanceof LanguageFileType) {
    final Language baseLang=((LanguageFileType)source).getLanguage();
    LanguageVersion[] versions=baseLang.getVersions();
    Collections.addAll(items,versions);
  }
  myDialectComboBox.setModel(new CollectionComboBoxModel(items));
  final int size=items.size();
  final boolean visible=size > 1;
  myDialectLabel.setVisible(visible);
  myDialectComboBox.setVisible(visible);
  if (visible && (myCurrentFile != null || lastUsed != null)) {
    String curLanguage=myCurrentFile != null ? myCurrentFile.getLanguageVersion().getName() : lastUsed;
    for (int i=0; i < size; ++i) {
      if (curLanguage.equals(items.get(i).toString())) {
        myDialectComboBox.setSelectedIndex(i);
        return;
      }
    }
    myDialectComboBox.setSelectedIndex(size > 0 ? 0 : -1);
  }
}
