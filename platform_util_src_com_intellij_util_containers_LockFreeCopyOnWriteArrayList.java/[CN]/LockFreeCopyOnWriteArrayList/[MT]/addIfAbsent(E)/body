{
  Object[] elements;
  Object[] newElements;
  do {
    elements=array;
    int len=elements.length;
    newElements=new Object[len + 1];
    for (int i=0; i < len; ++i) {
      if (eq(e,elements[i])) {
        return false;
      }
      newElements[i]=elements[i];
    }
    newElements[len]=e;
  }
 while (!replaceArray(elements,newElements));
  return true;
}
