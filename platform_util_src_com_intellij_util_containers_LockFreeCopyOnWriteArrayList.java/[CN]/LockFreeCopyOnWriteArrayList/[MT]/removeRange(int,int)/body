{
  Object[] elements;
  Object[] newElements;
  do {
    elements=array;
    int len=elements.length;
    if (fromIndex < 0 || toIndex > len || toIndex < fromIndex) {
      throw new IndexOutOfBoundsException();
    }
    int newlen=len - (toIndex - fromIndex);
    int numMoved=len - toIndex;
    if (numMoved == 0) {
      newElements=Arrays.copyOf(elements,newlen,Object[].class);
    }
 else {
      newElements=new Object[newlen];
      System.arraycopy(elements,0,newElements,0,fromIndex);
      System.arraycopy(elements,toIndex,newElements,fromIndex,numMoved);
    }
  }
 while (!replaceArray(elements,newElements));
}
