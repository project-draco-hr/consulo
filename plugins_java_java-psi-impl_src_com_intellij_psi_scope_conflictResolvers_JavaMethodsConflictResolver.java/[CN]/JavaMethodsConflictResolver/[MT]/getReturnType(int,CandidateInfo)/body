{
  final PsiParameter[] methodParameters=((PsiMethod)method.getElement()).getParameterList().getParameters();
  if (methodParameters.length == 0)   return null;
  final PsiParameter param=functionalTypeIdx < methodParameters.length ? methodParameters[functionalTypeIdx] : methodParameters[methodParameters.length - 1];
  final PsiType functionalInterfaceType=((MethodCandidateInfo)method).getSiteSubstitutor().substitute(param.getType());
  return LambdaUtil.getFunctionalInterfaceReturnType(functionalInterfaceType);
}
