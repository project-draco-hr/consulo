{
  myQueue.cancelAllUpdates();
  myQueue.queue(new Update("update"){
    public void run(){
      if (!myToolWindowReady || myToolWindowDisposed)       return;
      GuiEditor activeFormEditor=newEditor != null ? newEditor.getEditor() : null;
      if (myToolWindow == null) {
        if (activeFormEditor == null)         return;
        initToolWindow();
      }
      if (myComponentTreeBuilder != null) {
        Disposer.dispose(myComponentTreeBuilder);
        myComponentTreeBuilder=null;
      }
      myComponentTree.setModel(new DefaultTreeModel(new DefaultMutableTreeNode()));
      myComponentTree.setEditor(activeFormEditor);
      myComponentTree.setFormEditor(newEditor);
      myPropertyInspector.setEditor(activeFormEditor);
      if (activeFormEditor == null) {
        myToolWindow.setAvailable(false,null);
      }
 else {
        myComponentTreeBuilder=new ComponentTreeBuilder(myComponentTree,activeFormEditor);
        myToolWindow.setAvailable(true,null);
        myToolWindow.show(null);
      }
    }
  }
);
}
