{
  InjectedLanguage prevLanguage=host.getUserData(LanguageInjectionSupport.TEMPORARY_INJECTED_LANGUAGE);
  if (prevLanguage == null)   return false;
  SmartPointerManager manager=SmartPointerManager.getInstance(myProject);
  SmartPsiElementPointer<PsiLanguageInjectionHost> pointer=manager.createSmartPsiElementPointer(host);
  TempPlace place=new TempPlace(prevLanguage,pointer);
  TempPlace nextPlace=new TempPlace(null,pointer);
  Configuration.replaceInjectionsWithUndo(project,nextPlace,place,Collections.<PsiElement>emptyList(),new PairProcessor<TempPlace,TempPlace>(){
    public boolean process(    final TempPlace add,    final TempPlace remove){
      addInjectionPlace(add);
      return true;
    }
  }
);
  return true;
}
