{
  final File tempFile=new File(entriesFile.getAbsolutePath() + "~");
  FileOutputStream fileOutputStream=new FileOutputStream(tempFile);
  final OutputStreamWriter writer=new OutputStreamWriter(fileOutputStream,charsetName);
  write(writer,lineSeparator);
  if (entriesFile.exists()) {
    if (!entriesFile.delete()) {
      throw new IOException("Could not delete file " + entriesFile.getAbsolutePath());
    }
  }
  FileUtil.rename(tempFile,entriesFile);
}
