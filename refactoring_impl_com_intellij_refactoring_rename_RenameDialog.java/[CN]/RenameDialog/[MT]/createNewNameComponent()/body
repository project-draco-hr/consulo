{
  String[] suggestedNames=getSuggestedNames();
  myNameSuggestionsField=new NameSuggestionsField(suggestedNames,myProject,StdFileTypes.PLAIN_TEXT,myEditor);
  myNameChangedListener=new NameSuggestionsField.DataChanged(){
    public void dataChanged(){
      validateButtons();
    }
  }
;
  myNameSuggestionsField.addDataChangedListener(myNameChangedListener);
  if (myPsiElement instanceof PsiVariable) {
    myNameSuggestionsField.getComponent().registerKeyboardAction(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        completeVariable(myNameSuggestionsField.getEditor());
      }
    }
,KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,InputEvent.CTRL_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
}
