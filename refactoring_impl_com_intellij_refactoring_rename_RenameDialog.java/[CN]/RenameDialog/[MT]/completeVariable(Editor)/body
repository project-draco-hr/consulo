{
  String prefix=myNameSuggestionsField.getEnteredName();
  Collection<LookupItem> items=null;
  for (  NameSuggestionProvider provider : Extensions.getExtensions(NameSuggestionProvider.EP_NAME)) {
    items=provider.completeName(myPsiElement,myNameSuggestionContext,prefix);
    if (items != null)     break;
  }
  if (items != null) {
    LookupItem[] lookupItems=items.toArray(new LookupItem[items.size()]);
    editor.getCaretModel().moveToOffset(prefix.length());
    editor.getSelectionModel().removeSelection();
    LookupManager.getInstance(myProject).showLookup(editor,lookupItems,prefix,null,new CharFilter(){
      public int accept(      char c,      final String prefix){
        if (Character.isJavaIdentifierPart(c))         return CharFilter.ADD_TO_PREFIX;
        return CharFilter.SELECT_ITEM_AND_FINISH_LOOKUP;
      }
    }
);
  }
}
