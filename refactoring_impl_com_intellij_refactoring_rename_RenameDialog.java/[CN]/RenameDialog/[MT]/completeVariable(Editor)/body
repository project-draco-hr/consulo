{
  String prefix=myNameSuggestionsField.getName();
  PsiVariable var=(PsiVariable)myPsiElement;
  VariableKind kind=CodeStyleManager.getInstance(myProject).getVariableKind(var);
  Set<LookupItem> set=new LinkedHashSet<LookupItem>();
  CompletionUtil.completeVariableNameForRefactoring(myProject,set,prefix,var.getType(),kind);
  if (prefix.length() == 0) {
    String[] suggestedNames=getSuggestedNames();
    for (    String suggestedName : suggestedNames) {
      LookupItemUtil.addLookupItem(set,suggestedName,"");
    }
  }
  LookupItem[] lookupItems=set.toArray(new LookupItem[set.size()]);
  editor.getCaretModel().moveToOffset(prefix.length());
  editor.getSelectionModel().removeSelection();
  LookupManager.getInstance(myProject).showLookup(editor,lookupItems,prefix,null,new CharFilter(){
    public int accept(    char c,    final String prefix,    final LookupElement element){
      if (Character.isJavaIdentifierPart(c))       return CharFilter.ADD_TO_PREFIX;
      return CharFilter.SELECT_ITEM_AND_FINISH_LOOKUP;
    }
  }
);
}
