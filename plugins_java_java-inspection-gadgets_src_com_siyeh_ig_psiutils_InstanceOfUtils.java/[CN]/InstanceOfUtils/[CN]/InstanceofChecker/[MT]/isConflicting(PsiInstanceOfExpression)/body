{
  final PsiExpression conditionOperand=expression.getOperand();
  if (!EquivalenceChecker.expressionsAreEquivalent(referenceExpression,conditionOperand)) {
    return false;
  }
  final PsiTypeElement typeElement=expression.getCheckType();
  if (typeElement == null) {
    return false;
  }
  final PsiType type=typeElement.getType();
  if (strict) {
    return !castType.equals(type);
  }
 else {
    return !castType.isAssignableFrom(type);
  }
}
