{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  final CodeInsightSettings settings=CodeInsightSettings.getInstance();
  if (settings.AUTO_POPUP_JAVADOC_LOOKUP) {
    final PsiFile file=PsiUtilBase.getPsiFileInEditor(editor,project);
    if (file == null)     return;
    final Runnable request=new Runnable(){
      public void run(){
        PsiDocumentManager.getInstance(project).commitAllDocuments();
        CommandProcessor.getInstance().executeCommand(project,new Runnable(){
          public void run(){
            new JavadocAutoLookupHandler().invoke(project,editor,file);
          }
        }
,"",null,UndoConfirmationPolicy.DEFAULT,editor.getDocument());
      }
    }
;
    AutoPopupController.getInstance(project).invokeAutoPopupRunnable(request,settings.JAVADOC_LOOKUP_DELAY);
  }
}
