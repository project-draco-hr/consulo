{
  final SvnDiffProvider provider=(SvnDiffProvider)myVcs.getDiffProvider();
  final SVNRevision currentRevision=((SvnRevisionNumber)provider.getCurrentRevision(file)).getRevision();
  final VcsRevisionDescription lastChangedRevision=provider.getCurrentRevisionDescription(file);
  if (lastChangedRevision == null) {
    throw new VcsException("Can not get current revision for file " + file.getPath());
  }
  final SVNRevision svnRevision=((SvnRevisionNumber)lastChangedRevision.getRevisionNumber()).getRevision();
  if (!svnRevision.isValid()) {
    throw new VcsException("Can not get last changed revision for file: " + file.getPath() + "\nPlease run svn info for this file and file an issue.");
  }
  return annotate(file,new SvnFileRevision(myVcs,currentRevision,currentRevision,null,null,null,null,null,file.getCharset()),lastChangedRevision.getRevisionNumber(),true);
}
