{
  return new IntentionAction(){
    @NotNull public String getText(){
      return "Create Class \'" + refElement.getReferenceName() + "\'";
    }
    @NotNull public String getFamilyName(){
      return GroovyBundle.message("create.class");
    }
    public boolean isAvailable(    @NotNull Project project,    Editor editor,    PsiFile file){
      return true;
    }
    public void invoke(    @NotNull Project project,    Editor editor,    PsiFile file) throws IncorrectOperationException {
      if (!(file instanceof GroovyFile))       return;
      final PsiManager manager=refElement.getManager();
      final String name=refElement.getReferenceName();
      final Module module=ModuleUtil.findModuleForPsiElement(file);
      final String qualifier=((GroovyFile)file).getPackageName();
      String title=GroovyBundle.message("create.class",StringUtil.capitalize(CreateClassKind.CLASS.getDescription()));
      CreateClassDialog dialog=new CreateClassDialog(project,title,name,qualifier,CreateClassKind.CLASS,false,module);
      dialog.show();
      if (dialog.getExitCode() != DialogWrapper.OK_EXIT_CODE)       return;
      PsiDirectory targetDirectory=dialog.getTargetDirectory();
      if (targetDirectory == null)       return;
      PsiClass targetClass=createClassByType(targetDirectory,name,manager,refElement);
      putCursor(project,targetClass.getContainingFile(),targetClass);
      return;
    }
    public boolean startInWriteAction(){
      return true;
    }
  }
;
}
