{
  return new CreateClassActionBase(refElement){
    public void invoke(    @NotNull Project project,    Editor editor,    PsiFile file) throws IncorrectOperationException {
      if (!(file instanceof GroovyFileBase))       return;
      GroovyFileBase groovyFile=(GroovyFileBase)file;
      final String qualifier=groovyFile instanceof GroovyFile ? groovyFile.getPackageName() : "";
      final PsiManager manager=PsiManager.getInstance(project);
      final String name=myRefElement.getReferenceName();
      final Module module=ModuleUtil.findModuleForPsiElement(file);
      PsiDirectory targetDirectory=getTargetDirectory(project,qualifier,name,module);
      if (targetDirectory == null)       return;
      String templateName=myRefElement.getParent() instanceof GrImplementsClause ? NewGroovyClassAction.GROOVY_INTERFACE : NewGroovyClassAction.GROOVY_CLASS;
      PsiClass targetClass=createClassByType(targetDirectory,name,manager,myRefElement,templateName);
      if (targetClass != null) {
        addImportForClass(groovyFile,qualifier,targetClass);
        putCursor(project,targetClass.getContainingFile(),targetClass);
      }
    }
  }
;
}
