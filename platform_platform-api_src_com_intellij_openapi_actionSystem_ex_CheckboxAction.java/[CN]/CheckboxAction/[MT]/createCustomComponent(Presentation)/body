{
  JCheckBox checkBox=new JCheckBox(presentation.getText());
  checkBox.setOpaque(false);
  checkBox.setToolTipText(presentation.getDescription());
  checkBox.setMnemonic(presentation.getMnemonic());
  checkBox.setDisplayedMnemonicIndex(presentation.getDisplayedMnemonicIndex());
  checkBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      JCheckBox checkBox=(JCheckBox)e.getSource();
      ActionToolbar actionToolbar=UIUtil.getParentOfType(ActionToolbar.class,checkBox);
      DataContext dataContext=actionToolbar != null ? actionToolbar.getToolbarDataContext() : DataManager.getInstance().getDataContext(checkBox);
      CheckboxAction.this.actionPerformed(new AnActionEvent(null,dataContext,ActionPlaces.UNKNOWN,CheckboxAction.this.getTemplatePresentation(),ActionManager.getInstance(),0));
    }
  }
);
  return checkBox;
}
