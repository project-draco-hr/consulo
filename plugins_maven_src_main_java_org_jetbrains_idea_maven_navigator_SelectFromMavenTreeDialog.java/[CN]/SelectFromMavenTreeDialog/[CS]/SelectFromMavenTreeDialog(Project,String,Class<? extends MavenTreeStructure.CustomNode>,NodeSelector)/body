{
  super(project,false);
  myProject=project;
  mySelector=selector;
  setTitle(title);
  myTree=new SimpleTree();
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  myTree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  PopupMavenTreeStructure treeStructure=new PopupMavenTreeStructure(myProject){
    @Override protected Class<? extends CustomNode>[] getVisibleNodesClasses(){
      return new Class[]{nodeClass};
    }
  }
;
  SimpleTreeBuilder treeBuilder=new SimpleTreeBuilder(myTree,(DefaultTreeModel)myTree.getModel(),treeStructure,null);
  treeBuilder.initRoot();
  Disposer.register(myProject,treeBuilder);
  SimpleNode nodeToSelect=treeStructure.init();
  treeBuilder.updateFromRoot(true);
  myTree.expandPath(new TreePath(myTree.getModel().getRoot()));
  if (nodeToSelect != null) {
    myTree.setSelectedNode(treeBuilder,nodeToSelect,true);
  }
  init();
}
