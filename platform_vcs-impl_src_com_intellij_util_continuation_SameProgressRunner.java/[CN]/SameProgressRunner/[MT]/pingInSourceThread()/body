{
  while (true) {
    try {
      if (!myProject.isOpen())       return;
      if (getSuspendFlag()) {
        mySemaphore.down();
        while (getSuspendFlag()) {
          mySemaphore.waitFor(500);
        }
      }
      final TaskDescriptor current=getNextMatching();
      if (current == null) {
        return;
      }
      if (Where.AWT.equals(current.getWhere())) {
        WaitForProgressToShow.runOrInvokeAndWaitAboveProgress(new Runnable(){
          @Override public void run(){
            current.run(SameProgressRunner.this);
          }
        }
);
      }
 else {
        current.run(this);
      }
    }
 catch (    ProcessCanceledException ignored) {
    }
catch (    Throwable t) {
      LOG.error(t);
      myIndicator.cancel();
    }
  }
}
