{
  try {
    if (i.isRemote()) {
      Proxy proxy=myEmbedder.getSettings().getActiveProxy();
      ProxyInfo proxyInfo=null;
      if (proxy != null) {
        proxyInfo=new ProxyInfo();
        proxyInfo.setHost(proxy.getHost());
        proxyInfo.setPort(proxy.getPort());
        proxyInfo.setNonProxyHosts(proxy.getNonProxyHosts());
        proxyInfo.setUserName(proxy.getUsername());
        proxyInfo.setPassword(proxy.getPassword());
      }
      progress.setIndeterminate(false);
      IndexingContext c=myIndicesData.get(i).context;
      myUpdater.fetchAndUpdateIndex(c,new TransferListenerAdapter(progress),proxyInfo);
    }
 else {
      progress.setIndeterminate(true);
      remove(i);
      add(i);
      myIndexer.scan(myIndicesData.get(i).context);
    }
    updateIndexCache(i);
  }
 catch (  IOException e) {
    throw new MavenRepositoryException(e);
  }
catch (  UnsupportedExistingLuceneIndexException e) {
    throw new MavenRepositoryException(e);
  }
}
