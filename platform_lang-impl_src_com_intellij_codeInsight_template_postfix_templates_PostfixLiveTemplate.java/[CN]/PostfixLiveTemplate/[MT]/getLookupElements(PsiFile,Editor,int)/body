{
  Collection<CustomLiveTemplateLookupElement> result=ContainerUtil.newHashSet();
  CustomTemplateCallback callback=new CustomTemplateCallback(editor,file);
  for (  PostfixTemplateProvider provider : LanguagePostfixTemplate.LANG_EP.allForLanguage(getLanguage(callback))) {
    String key=computeTemplateKeyWithoutContextChecking(callback);
    if (key != null && editor.getCaretModel().getCaretCount() == 1) {
      Condition<PostfixTemplate> isApplicationTemplateFunction=createIsApplicationTemplateFunction(provider,key,file,editor);
      for (      PostfixTemplate postfixTemplate : provider.getTemplates()) {
        if (isApplicationTemplateFunction.value(postfixTemplate)) {
          result.add(new PostfixTemplateLookupElement(this,postfixTemplate,postfixTemplate.getKey(),provider,false));
        }
      }
    }
  }
  return result;
}
