{
  MockChangelistBuilder builder=new MockChangelistBuilder();
  myChangeProvider.getChanges(myDirtyScope,builder,new EmptyProgressIndicator(),new MockChangeListManagerGate(ChangeListManager.getInstance(myProject)));
  List<VirtualFile> unversionedFiles=builder.getUnversionedFiles();
  assertEquals(unversionedFiles.size(),files.length,"Incorrect number of unversioned files.");
  for (  VirtualFile expected : files) {
    if (!unversionedFiles.contains(expected)) {
      fail("Expected file " + expected + " is not unversioned!");
    }
  }
  for (  VirtualFile actual : unversionedFiles) {
    if (ArrayUtil.find(files,actual) < 0) {
      fail("Actually unversioned file " + actual + " is not in the unversioned list!");
    }
  }
}
