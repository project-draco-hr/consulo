{
  Object userObject=((DefaultMutableTreeNode)((TreePath)element).getLastPathComponent()).getUserObject();
  if (userObject instanceof ItemElementDescriptor || userObject instanceof LibraryElementDescriptor) {
    String str=getElementText(element);
    if (str == null) {
      return false;
    }
    if (!hasCapitals(pattern)) {
      str=str.toLowerCase();
    }
    if (pattern.indexOf(File.separator) >= 0) {
      return compare(str,pattern);
    }
    final StringTokenizer tokenizer=new StringTokenizer(str,File.separator);
    while (tokenizer.hasMoreTokens()) {
      final String token=tokenizer.nextToken();
      if (compare(token,pattern)) {
        return true;
      }
    }
    return false;
  }
 else {
    return super.isMatchingElement(element,pattern);
  }
}
