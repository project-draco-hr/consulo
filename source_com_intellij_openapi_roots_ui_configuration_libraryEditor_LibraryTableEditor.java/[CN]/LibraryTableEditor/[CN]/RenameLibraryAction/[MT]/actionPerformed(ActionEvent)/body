{
  final Library selectedLibrary=getSelectedLibrary();
  if (selectedLibrary == null) {
    return;
  }
  final LibraryEditor libraryEditor=getLibraryEditor(selectedLibrary);
  final String currentName=selectedLibrary.getName();
  final String newName=Messages.showInputDialog(myTree,"Enter new library name","Rename library \"" + libraryEditor.getName() + "\"",Messages.getQuestionIcon(),libraryEditor.getName(),new InputValidator(){
    public boolean checkInput(    String inputString){
      return true;
    }
    public boolean canClose(    String libraryName){
      if (!currentName.equals(libraryName)) {
        if (libraryAlreadyExists(libraryName)) {
          Messages.showErrorDialog("Library \"" + libraryName + "\" already exists","Library Already Exists");
          return false;
        }
      }
      return true;
    }
  }
);
  if (newName != null) {
    libraryEditor.setName(newName);
  }
  librariesChanged(true);
}
