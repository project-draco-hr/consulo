{
  final Icon icon;
  if (isValid) {
    VirtualFile presentableFile;
    if (isJarFileRoot(url)) {
      presentableFile=LocalFileSystem.getInstance().findFileByPath(getPresentablePath(url));
    }
 else {
      presentableFile=VirtualFileManager.getInstance().findFileByUrl(url);
    }
    if (presentableFile != null && presentableFile.isValid()) {
      if (presentableFile.getFileSystem() instanceof HttpFileSystem) {
        icon=Icons.WEB_ICON;
      }
 else {
        icon=presentableFile.isDirectory() ? Icons.DIRECTORY_CLOSED_ICON : IconUtilEx.getIcon(presentableFile,0,null);
      }
    }
 else {
      icon=INVALID_ITEM_ICON;
    }
  }
 else {
    icon=INVALID_ITEM_ICON;
  }
  return icon;
}
