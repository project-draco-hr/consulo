{
  super(project,true);
  myProject=project;
  setModal(false);
  setCancelButtonText(CommonBundle.message("button.close"));
  setOKButtonText(DebuggerBundle.message("button.evaluate"));
  myEvaluationPanel=new MyEvaluationPanel(myProject);
  myEditor=createEditor(DefaultCodeFragmentFactory.getInstance());
  setDebuggerContext(getDebuggerContext());
  initDialogData(text);
  myContextListener=new DebuggerContextListener(){
    public void changeEvent(    DebuggerContextImpl newContext,    int event){
      boolean close=true;
      for (      DebuggerSession session : DebuggerManagerEx.getInstanceEx(myProject).getSessions()) {
        if (!session.isStopped()) {
          close=false;
          break;
        }
      }
      if (close) {
        close(CANCEL_EXIT_CODE);
      }
 else {
        setDebuggerContext(newContext);
      }
    }
  }
;
  DebuggerManagerEx.getInstanceEx(myProject).getContextManager().addListener(myContextListener);
  setHorizontalStretch(1f);
  setVerticalStretch(1f);
}
