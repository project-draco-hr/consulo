{
  final HgTagDialog dialog=new HgTagDialog(project);
  dialog.setRoots(repos,selectedRepo);
  dialog.show();
  if (dialog.isOK()) {
    try {
      new HgTagCreateCommand(project,dialog.getRepository(),dialog.getTagName()).execute(new HgCommandResultHandler(){
        @Override public void process(        @Nullable HgCommandResult result){
          if (HgErrorUtil.hasErrorsInCommandExecution(result)) {
            new HgCommandResultNotifier(project).notifyError(result,"Creation failed","Tag creation [" + dialog.getTagName() + "] failed");
          }
        }
      }
);
    }
 catch (    HgCommandException e) {
      handleException(project,e);
    }
  }
}
