{
  if (isFileReadOnly(project,file)) {
    return;
  }
  final PsiConditionalExpression exp=(PsiConditionalExpression)findMatchingElement(file,editor);
  final PsiExpression condition=exp.getCondition();
  final PsiExpression thenExpression=exp.getThenExpression();
  final String thenExpressionText=thenExpression.getText();
  if ("true".equals(thenExpressionText)) {
    final String newExpression=condition.getText();
    replaceExpression(project,newExpression,exp);
  }
 else {
    final String newExpression=BoolUtils.getNegatedExpressionText(condition);
    replaceExpression(project,newExpression,exp);
  }
}
