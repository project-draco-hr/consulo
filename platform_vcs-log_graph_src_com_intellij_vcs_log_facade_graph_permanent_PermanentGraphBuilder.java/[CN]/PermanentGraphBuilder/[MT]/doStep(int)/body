{
  GraphCommit commit=myCommits.get(nodeIndex);
  List<Integer> upNodes=upAdjacentNodes.remove(commit.getIndex());
  if (upNodes == null)   upNodes=Collections.emptyList();
  int edgeIndex=myNodeToEdgeIndex[nodeIndex];
  for (  Integer upNodeIndex : upNodes) {
    fixUnderdoneEdge(upNodeIndex,nodeIndex,commit.getIndex());
    myLongEdges[edgeIndex]=upNodeIndex;
    edgeIndex++;
  }
  if (!mySimpleNodes.get(nodeIndex)) {
    for (    Integer downHashIndex : commit.getParentIndices()) {
      addUnderdoneEdge(nodeIndex,downHashIndex);
      myLongEdges[edgeIndex]=-1;
      edgeIndex++;
    }
  }
  myNodeToEdgeIndex[nodeIndex + 1]=edgeIndex;
}
