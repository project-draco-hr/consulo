{
  long time=Clock.getTime();
  if (params.length == 1) {
    Result format=params[0].calculateResult(context);
    if (format != null) {
      try {
        return new SimpleDateFormat(format.toString()).format(new Date(time));
      }
 catch (      Exception e) {
        LOG.info(e);
        return "Problem when formatting date/time: " + e.getMessage();
      }
    }
  }
  return date ? DateFormatUtil.formatDate(time) : DateFormatUtil.formatTime(time);
}
