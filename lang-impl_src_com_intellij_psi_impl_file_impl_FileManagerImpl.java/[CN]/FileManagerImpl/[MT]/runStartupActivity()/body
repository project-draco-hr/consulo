{
  LOG.assertTrue(!myInitialized);
  myDisposed=false;
  myInitialized=true;
  myProjectFileIndex=myProjectRootManager.getFileIndex();
  myConnection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkVirtualFileListenerAdapter(new MyVirtualFileListener()));
  myConnection.subscribe(AppTopics.FILE_TYPES,new FileTypeListener(){
    public void beforeFileTypesChanged(    FileTypeEvent event){
    }
    public void fileTypesChanged(    FileTypeEvent e){
      handleFileTypesChange(new FileTypesChanged(){
        protected void updateMaps(){
          removeInvalidFilesAndDirs(true);
        }
      }
);
    }
  }
);
  myConnection.subscribe(ProjectTopics.PROJECT_ROOTS,new MyModuleRootListener());
  myConnection.subscribe(AppTopics.FILE_DOCUMENT_SYNC,new MyFileDocumentManagerAdapter());
}
