{
  FileViewProvider viewProvider;
  Language language=getLanguage(file);
  if (language != null) {
    final FileViewProviderFactory factory=LanguageFileViewProviders.INSTANCE.forLanguage(language);
    viewProvider=factory != null ? factory.createFileViewProvider(file,language,myManager,physical) : null;
  }
 else {
    final FileViewProviderFactory factory=FileTypeFileViewProviders.INSTANCE.forFileType(file.getFileType());
    viewProvider=factory != null ? factory.createFileViewProvider(file,null,myManager,physical) : null;
  }
  return viewProvider != null ? viewProvider : new SingleRootFileViewProvider(myManager,file,physical);
}
