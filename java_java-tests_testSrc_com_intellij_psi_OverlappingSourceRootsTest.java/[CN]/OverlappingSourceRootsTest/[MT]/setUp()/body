{
  super.setUp();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      try {
        File dir=createTempDirectory();
        myProjectRoot=LocalFileSystem.getInstance().refreshAndFindFileByPath(dir.getPath().replace(File.separatorChar,'/'));
        mySourceRoot1=myProjectRoot.createChildDirectory(null,"root1");
        mySourceRoot2=myProjectRoot.createChildDirectory(null,"root2");
        mySourceRoot11=mySourceRoot1.createChildDirectory(null,"root11");
        mySourceRoot21=mySourceRoot2.createChildDirectory(null,"root21");
        final ModifiableRootModel rootModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
        final ContentEntry contentEntry=rootModel.addContentEntry(myProjectRoot);
        contentEntry.addSourceFolder(mySourceRoot21,false);
        contentEntry.addSourceFolder(mySourceRoot1,false);
        contentEntry.addSourceFolder(mySourceRoot2,false);
        contentEntry.addSourceFolder(mySourceRoot11,false);
        rootModel.commit();
        myFile1=mySourceRoot1.createChildData(null,"File1.java");
        myFile2=mySourceRoot2.createChildData(null,"File2.java");
        myFile11=mySourceRoot11.createChildData(null,"File11.java");
        myFile21=mySourceRoot21.createChildData(null,"File21.java");
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
);
}
