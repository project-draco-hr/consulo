{
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (project != null) {
    final VirtualFile[] files=e.getData(PlatformDataKeys.VIRTUAL_FILE_ARRAY);
    if (files != null) {
      for (      VirtualFile file : files) {
        GitRepositoryManager manager=GitUtil.getRepositoryManager(project);
        if (manager == null) {
          return false;
        }
        final GitRepository repositoryForFile=manager.getRepositoryForFile(file);
        if (repositoryForFile != null && repositoryForFile.getState() == GitRepository.State.REBASING) {
          return true;
        }
      }
    }
  }
  return false;
}
