{
  final VirtualFile[] contentRoots=ProjectLevelVcsManager.getInstance(project).getRootsUnderVcs(vcs);
  if (contentRoots == null || contentRoots.length == 0) {
    Messages.showErrorDialog(project,GitBundle.getString("repository.action.missing.roots.unconfigured.message"),GitBundle.getString("repository.action.missing.roots.title"));
    return null;
  }
  final List<VirtualFile> roots=new ArrayList<VirtualFile>(GitUtil.gitRootsForPaths(Arrays.asList(contentRoots)));
  if (roots.size() == 0) {
    Messages.showErrorDialog(project,GitBundle.getString("repository.action.missing.roots.misconfigured"),GitBundle.getString("repository.action.missing.roots.title"));
    return null;
  }
  Collections.sort(roots,GitUtil.VIRTUAL_FILE_COMPARATOR);
  return roots;
}
