{
  if (myProject == null) {
    return;
  }
  String linkedProjectPath=myLinkedGradleProjectPathField.getText();
  String gradleHomePath=myGradleHomePathField.getText();
  boolean preferLocalToWrapper;
  if (myPreferWrapperWheneverPossibleCheckBox.isVisible()) {
    preferLocalToWrapper=!myPreferWrapperWheneverPossibleCheckBox.isSelected();
  }
 else {
    preferLocalToWrapper=myUseLocalDistributionButton.isSelected();
  }
  GradleSettings.applySettings(linkedProjectPath,gradleHomePath,preferLocalToWrapper,myProject);
  Project defaultProject=ProjectManager.getInstance().getDefaultProject();
  if (myProject != defaultProject) {
    GradleSettings.applyPreferLocalInstallationToWrapper(preferLocalToWrapper,defaultProject);
  }
  if (isValidGradleHome(gradleHomePath)) {
    myGradleHomeSettingType=GradleHomeSettingType.EXPLICIT_CORRECT;
    if (defaultProject != myProject && !isValidGradleHome(GradleSettings.getInstance(defaultProject).getGradleHome())) {
      GradleSettings.applyGradleHome(gradleHomePath,defaultProject);
    }
    return;
  }
  useNormalColorForPath();
  if (StringUtil.isEmpty(gradleHomePath)) {
    myGradleHomeSettingType=GradleHomeSettingType.UNKNOWN;
  }
 else {
    myGradleHomeSettingType=GradleHomeSettingType.EXPLICIT_INCORRECT;
    myHelper.showBalloon(MessageType.ERROR,myGradleHomeSettingType,0);
  }
}
