{
  StringBuffer buffer=new StringBuffer(packet.length());
  for (int i=0; i < packet.length(); i++) {
    char chr=packet.charAt(i);
    if (chr == ourSpecialSymbol) {
      buffer.append(chr);
      buffer.append(chr);
      continue;
    }
    boolean appendChar=true;
    for (int j=0; j < ourSymbolsToEncode.length; j++)     if (ourSymbolsToEncode[j] == chr) {
      buffer.append(ourSpecialSymbol);
      String code=String.valueOf((int)chr);
      while (code.length() < CODE_LENGTH)       code="0" + code;
      buffer.append(code);
      appendChar=false;
      break;
    }
    if (appendChar)     buffer.append(chr);
  }
  return buffer.toString();
}
