{
  boolean finishEnabled=true;
  boolean nextEnabled=true;
  if (myEqualsPanel != null & getCurrentStep() == 0) {
    finishEnabled=false;
  }
  if (getCurrentStep() == myTestBoxedStep) {
    boolean anyNonBoxed=false;
    for (int i=0; i < myClassFields.length; i++) {
      MemberInfo classField=myClassFields[i];
      if (classField.isChecked()) {
        PsiField field=(PsiField)classField.getMember();
        if (!(field.getType() instanceof PsiPrimitiveType)) {
          anyNonBoxed=true;
          break;
        }
      }
    }
    finishEnabled=finishEnabled && !anyNonBoxed;
    nextEnabled=anyNonBoxed;
  }
  if (getCurrentStep() == 0) {
    boolean anyChecked=false;
    for (int i=0; i < myClassFields.length; i++) {
      MemberInfo classField=myClassFields[i];
      if (classField.isChecked()) {
        anyChecked=true;
        break;
      }
    }
    finishEnabled=finishEnabled && anyChecked;
    nextEnabled=nextEnabled && anyChecked;
  }
  if (getCurrentStep() == myTestBoxedStep) {
    finishEnabled=true;
    nextEnabled=false;
  }
  getFinishButton().setEnabled(finishEnabled);
  getNextButton().setEnabled(nextEnabled);
  if (finishEnabled) {
    getRootPane().setDefaultButton(getFinishButton());
  }
 else   if (nextEnabled) {
    getRootPane().setDefaultButton(getNextButton());
  }
}
