{
  if (LOG.isDebugEnabled()) {
    LOG.debug("enter: save()");
  }
  if (ApplicationManager.getApplication().isDisposed())   return;
  if (myBlockSaveOnFrameDeactivationCount.get() == 0 && GeneralSettings.getInstance().isSaveOnFrameDeactivation()) {
    FileDocumentManager.getInstance().saveAllDocuments();
    Project[] openProjects=ProjectManagerEx.getInstanceEx().getOpenProjects();
    for (    Project project : openProjects) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("save project: " + project);
      }
      project.save();
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("save application settings");
    }
    ApplicationManagerEx.getApplicationEx().saveSettings();
    if (LOG.isDebugEnabled()) {
      LOG.debug("exit: save()");
    }
  }
}
