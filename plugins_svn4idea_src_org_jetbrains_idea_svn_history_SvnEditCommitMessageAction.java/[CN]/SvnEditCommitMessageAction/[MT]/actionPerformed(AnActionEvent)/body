{
  final DataContext dc=e.getDataContext();
  final ChangeList[] lists=VcsDataKeys.CHANGE_LISTS.getData(dc);
  final boolean enabled=lists != null && lists.length == 1 && lists[0] instanceof SvnChangeList;
  if (!enabled)   return;
  final SvnChangeList svnList=(SvnChangeList)lists[0];
  Project project=PlatformDataKeys.PROJECT.getData(dc);
  project=project == null ? ProjectManager.getInstance().getDefaultProject() : project;
  final String edited=Messages.showMultilineInputDialog(project,"Attention! Previous message will be lost!\n\nNew revision comment:","Edit Revision # " + svnList.getNumber() + " Comment",svnList.getComment(),Messages.getInformationIcon(),null);
  if (edited == null || edited.trim().equals(svnList.getComment().trim()))   return;
  final Runnable listener=VcsDataKeys.REMOTE_HISTORY_CHANGED_LISTENER.getData(dc);
  ProgressManager.getInstance().run(new EditMessageTask(project,edited,svnList,listener));
}
