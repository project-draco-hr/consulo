{
  if (!(refInfo instanceof MemberReferenceInfo)) {
    return refInfo.getClassName();
  }
  final int declaringClassName=refInfo.getClassName();
  final Cache cache=getCache();
  final MemberInfo memberInfo=((MemberReferenceInfo)refInfo).getMemberInfo();
  if (memberInfo instanceof FieldInfo) {
    if (cache.findFieldByName(declaringClassName,memberInfo.getName()) != null) {
      return declaringClassName;
    }
  }
 else   if (memberInfo instanceof MethodInfo) {
    if (cache.findMethod(declaringClassName,memberInfo.getName(),memberInfo.getDescriptor()) != null) {
      return declaringClassName;
    }
  }
  final DeclaringClassFinder finder=new DeclaringClassFinder(memberInfo);
  getCacheNavigator().walkSuperClasses(declaringClassName,finder);
  return finder.getDeclaringClassName();
}
