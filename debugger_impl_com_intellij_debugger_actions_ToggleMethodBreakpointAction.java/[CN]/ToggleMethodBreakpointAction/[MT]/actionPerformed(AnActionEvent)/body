{
  Project project=e.getData(DataKeys.PROJECT);
  if (project == null) {
    return;
  }
  DebuggerManagerEx debugManager=DebuggerManagerEx.getInstanceEx(project);
  if (debugManager == null) {
    return;
  }
  final BreakpointManager manager=debugManager.getBreakpointManager();
  final PlaceInDocument place=getPlace(e);
  if (place != null) {
    Breakpoint breakpoint=manager.findBreakpoint(place.getDocument(),place.getOffset(),MethodBreakpoint.CATEGORY);
    if (breakpoint == null) {
      final int methodLine=place.getDocument().getLineNumber(place.getOffset());
      MethodBreakpoint methodBreakpoint=manager.addMethodBreakpoint(place.getDocument(),methodLine);
      if (methodBreakpoint != null) {
        RequestManagerImpl.createRequests(methodBreakpoint);
      }
    }
 else {
      manager.removeBreakpoint(breakpoint);
    }
  }
}
