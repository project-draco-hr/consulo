{
  final DomFileDescription<T> mockDescription=myXmlFile.getUserData(DomManagerImpl.MOCK_DESCIPRTION);
  if (mockDescription != null)   return mockDescription;
  if (sb != null) {
    sb.append("no mock\n");
  }
  final XmlFile originalFile=(XmlFile)myXmlFile.getOriginalFile();
  if (sb != null) {
    sb.append("original: " + originalFile + "\n");
  }
  if (originalFile != myXmlFile) {
    final FileDescriptionCachedValueProvider<T> provider=myDomManager.getOrCreateCachedValueProvider(originalFile);
    final DomFileElementImpl<T> element=provider.getFileElement();
    if (sb != null) {
      sb.append("originalDom " + element + "\n");
    }
    return element == null ? null : element.getFileDescription();
  }
  final Set<DomFileDescription> namedDescriptions=myDomManager.getFileDescriptions(rootTagName.getRootTagLocalName());
  if (sb != null) {
    sb.append("named " + new HashSet<DomFileDescription>(namedDescriptions) + "\n");
  }
  DomFileDescription<T> description=ContainerUtil.find(namedDescriptions,myCondition);
  if (description == null) {
    final Set<DomFileDescription> unnamed=myDomManager.getAcceptingOtherRootTagNameDescriptions();
    description=ContainerUtil.find(unnamed,myCondition);
  }
  if (sb != null) {
    sb.append("found " + description + "\n");
  }
  return description;
}
