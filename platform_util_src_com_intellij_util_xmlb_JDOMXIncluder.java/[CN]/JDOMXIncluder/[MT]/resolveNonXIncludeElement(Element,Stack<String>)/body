{
  if (bases.size() != 0)   bases.peek();
  Element result=new Element(original.getName(),original.getNamespace());
  Iterator<Attribute> attributes=original.getAttributes().iterator();
  while (attributes.hasNext()) {
    Attribute a=attributes.next();
    result.setAttribute(a.clone());
  }
  for (  Content o : original.getContent()) {
    if (o instanceof Element) {
      Element element=(Element)o;
      if (isIncludeElement(element)) {
        result.addContent(resolveXIncludeElement(element,bases));
      }
 else {
        result.addContent(resolveNonXIncludeElement(element,bases));
      }
    }
 else {
      result.addContent(o.clone());
    }
  }
  return result;
}
