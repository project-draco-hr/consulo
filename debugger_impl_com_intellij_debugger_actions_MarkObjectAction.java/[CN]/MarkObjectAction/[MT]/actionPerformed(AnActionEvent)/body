{
  final DebuggerTreeNodeImpl node=getSelectedNode(event.getDataContext());
  if (node == null) {
    return;
  }
  final NodeDescriptorImpl descriptor=node.getDescriptor();
  if (!(descriptor instanceof ValueDescriptorImpl)) {
    return;
  }
  final DebuggerTree tree=node.getTree();
  tree.saveState(node);
  final ValueDescriptorImpl valueDescriptor=((ValueDescriptorImpl)descriptor);
  final DebuggerContextImpl debuggerContext=tree.getDebuggerContext();
  final ValueMarkup markup=valueDescriptor.getMarkup(debuggerContext);
  if (markup != null) {
    valueDescriptor.setMarkup(debuggerContext,null);
  }
 else {
    final Color color=ColorChooser.chooseColor(null,MARK_TEXT,null);
    valueDescriptor.setMarkup(debuggerContext,new ValueMarkup(null,color));
  }
  final DebuggerSession session=debuggerContext.getDebuggerSession();
  if (session != null) {
    session.refresh(false);
  }
}
