{
  final Marker onSelectedHappend=new Marker();
  final Ref<RTestUnitTestProxy> proxyRef=new Ref<RTestUnitTestProxy>();
  final Ref<Boolean> focusRequestedRef=new Ref<Boolean>();
  myResultsViewer.addSelectionChangedListener(new RTestUnitTestProxySelectionChangedListener(){
    public void onSelected(    @Nullable final RTestUnitTestProxy selectedTestProxy,    final boolean requestFocus){
      onSelectedHappend.set();
      proxyRef.set(selectedTestProxy);
      focusRequestedRef.set(requestFocus);
    }
  }
);
  final RTestUnitTestProxy suite=createSuiteProxy("suite",myTestsRootNode);
  final RTestUnitTestProxy test=createTestProxy("test",myTestsRootNode);
  myResultsViewer.onSuiteStarted(suite);
  myResultsViewer.onTestStarted(test);
  myResultsViewer.selectAndNotify(test);
  myResultsViewer.createChangeSelectionAction().run();
  assertTrue(onSelectedHappend.isSet());
  assertEquals(test,proxyRef.get());
  assertTrue(focusRequestedRef.get());
  onSelectedHappend.reset();
  proxyRef.set(null);
  focusRequestedRef.set(null);
  myResultsViewer.selectAndNotify(suite);
  myResultsViewer.createChangeSelectionAction().run();
  assertTrue(onSelectedHappend.isSet());
  assertEquals(suite,proxyRef.get());
  assertTrue(focusRequestedRef.get());
}
