{
  final boolean existed=myDbFile.exists();
  try {
    Class.forName("org.sqlite.JDBC");
    final Connection connection=DriverManager.getConnection(String.format("jdbc:sqlite:%s",myDbFile.getPath()));
    if (!existed && myInitDbScript != null) {
      myInitDbScript.consume(connection);
    }
    connection.setAutoCommit(false);
    return connection;
  }
 catch (  final ClassNotFoundException e) {
    throw new VcsException(e);
  }
catch (  SQLException e) {
    throw new VcsException(e);
  }
}
