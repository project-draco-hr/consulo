{
  final XPathExpression step=locationPath.getPathExpression();
  List<XPathExpression> steps=new ArrayList<XPathExpression>();
  if (step instanceof XPathStep) {
    XPathExpression pathStep=step;
    do {
      steps.add(pathStep);
      pathStep=((XPathStep)pathStep).getStepExpression();
    }
 while (pathStep instanceof XPathStep);
    if (pathStep != null)     steps.add(pathStep);
    Collections.reverse(steps);
    return steps.toArray(new XPathExpression[steps.size()]);
  }
 else   if (step != null) {
    return new XPathExpression[]{step};
  }
 else {
    return XPathExpression.EMPTY_ARRAY;
  }
}
