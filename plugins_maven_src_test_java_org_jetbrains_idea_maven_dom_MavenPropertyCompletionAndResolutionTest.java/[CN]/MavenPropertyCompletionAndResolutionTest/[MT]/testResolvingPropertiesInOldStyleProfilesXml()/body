{
  VirtualFile profiles=createProfilesXmlOldStyle("<profile>" + "  <id>one</id>" + "  <properties>"+ "    <foo>value</foo>"+ "  </properties>"+ "</profile>"+ "<profile>"+ "  <id>two</id>"+ "  <properties>"+ "    <foo>value</foo>"+ "  </properties>"+ "</profile>");
  createProjectPom("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<name>${<caret>foo}</name>");
  readWithProfiles("two");
  assertResolved(myProjectPom,findTag(profiles,"profiles[1].properties.foo",MavenDomProfiles.class));
}
