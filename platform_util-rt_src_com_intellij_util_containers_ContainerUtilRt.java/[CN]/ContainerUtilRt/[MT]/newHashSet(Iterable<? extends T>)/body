{
  if (elements instanceof Collection) {
    @SuppressWarnings("unchecked") Collection<? extends T> collection=(Collection<? extends T>)elements;
    return new com.intellij.util.containers.HashSet<T>(collection);
  }
  return newHashSet(elements.iterator());
}
