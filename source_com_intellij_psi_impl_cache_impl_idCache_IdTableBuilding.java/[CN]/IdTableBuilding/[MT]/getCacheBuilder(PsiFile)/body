{
  final FileType fileType=psiFile.getFileType();
  final IdCacheBuilder idCacheBuilder=cacheBuilders.get(fileType);
  if (idCacheBuilder != null)   return idCacheBuilder;
  if (psiFile instanceof JspFile) {
    return cacheBuilders.get(StdFileTypes.JSP);
  }
  if (psiFile instanceof PsiPlainTextFile) {
    return cacheBuilders.get(StdFileTypes.PLAIN_TEXT);
  }
  if (psiFile instanceof PsiAspectFile) {
    return cacheBuilders.get(StdFileTypes.ASPECT);
  }
  if (psiFile instanceof PsiJavaFile) {
    return cacheBuilders.get(StdFileTypes.JAVA);
  }
  if (psiFile instanceof XmlFile) {
    return cacheBuilders.get(StdFileTypes.XML);
  }
  final Language lang=psiFile.getLanguage();
  if (lang != null) {
    final WordsScanner scanner=lang.getWordsScanner();
    if (scanner != null) {
      return new WordsScannerIdCacheBuilderAdapter(scanner);
    }
  }
  return null;
}
