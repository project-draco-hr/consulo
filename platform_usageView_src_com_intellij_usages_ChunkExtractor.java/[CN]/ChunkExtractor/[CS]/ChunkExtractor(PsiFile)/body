{
  myColorsScheme=UsageTreeColorsScheme.getInstance().getScheme();
  myDocument=PsiDocumentManager.getInstance(file.getProject()).getDocument(file);
  LOG.assertTrue(myDocument != null);
  final FileType fileType=file.getFileType();
  final SyntaxHighlighter highlighter=SyntaxHighlighter.PROVIDER.create(fileType,file.getProject(),file.getVirtualFile());
  myHighlighter=highlighter == null ? new PlainSyntaxHighlighter() : highlighter;
  myLexer=myHighlighter.getHighlightingLexer();
  myLexer.start(myDocument.getCharsSequence());
}
