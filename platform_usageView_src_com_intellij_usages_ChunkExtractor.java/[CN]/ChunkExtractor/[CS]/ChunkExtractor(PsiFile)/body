{
  myColorsScheme=UsageTreeColorsScheme.getInstance().getScheme();
  Project project=file.getProject();
  myDocument=PsiDocumentManager.getInstance(project).getDocument(file);
  LOG.assertTrue(myDocument != null);
  final FileType fileType=file.getFileType();
  final SyntaxHighlighter highlighter=SyntaxHighlighterFactory.getSyntaxHighlighter(fileType,project,file.getVirtualFile());
  myHighlighter=highlighter == null ? new PlainSyntaxHighlighter() : highlighter;
  myLexer=myHighlighter.getHighlightingLexer();
  myLexer.start(myDocument.getCharsSequence());
  myDocumentStamp=myDocument.getModificationStamp();
}
