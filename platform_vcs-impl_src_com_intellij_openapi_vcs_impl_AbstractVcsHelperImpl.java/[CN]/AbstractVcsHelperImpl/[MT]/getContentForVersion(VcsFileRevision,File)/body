{
  VirtualFile vFile=LocalFileSystem.getInstance().findFileByIoFile(file);
  if (vFile != null && (version instanceof CurrentRevision) && !vFile.getFileType().isBinary()) {
    return new DocumentContent(FileDocumentManager.getInstance().getDocument(vFile),vFile.getFileType());
  }
 else {
    return new SimpleContent(VcsHistoryUtil.loadRevisionContentGuessEncoding(version,vFile,null),FileTypeManager.getInstance().getFileTypeByFileName(file.getName()));
  }
}
