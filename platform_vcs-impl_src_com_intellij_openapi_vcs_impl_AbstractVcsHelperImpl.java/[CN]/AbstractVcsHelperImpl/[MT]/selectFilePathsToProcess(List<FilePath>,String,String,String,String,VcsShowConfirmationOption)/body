{
  if (files.size() == 1 && singleFilePromptTemplate != null) {
    String filePrompt=MessageFormat.format(singleFilePromptTemplate,files.get(0).getPresentableUrl());
    if (ConfirmationDialog.requestForConfirmation(confirmationOption,myProject,filePrompt,singleFileTitle,Messages.getQuestionIcon())) {
      return files;
    }
    return null;
  }
  SelectFilePathsDialog dlg=new SelectFilePathsDialog(myProject,files,prompt,confirmationOption);
  dlg.setTitle(title);
  if (!confirmationOption.isPersistent()) {
    dlg.setDoNotAskOption(null);
  }
  dlg.show();
  return dlg.isOK() ? dlg.getSelectedFiles() : null;
}
