{
  try {
    new VcsHistoryProviderBackgroundableProxy(myProject,vcsHistoryProvider).createSessionFor(path,new Consumer<VcsHistorySession>(){
      public void consume(      VcsHistorySession session){
        if (session == null)         return;
        List<VcsFileRevision> revisionsList=session.getRevisionList();
        if (revisionsList.isEmpty())         return;
        String actionName=VcsBundle.message("action.name.file.history",path.getName());
        ContentManager contentManager=ProjectLevelVcsManagerEx.getInstanceEx(myProject).getContentManager();
        FileHistoryPanelImpl fileHistoryPanel=new FileHistoryPanelImpl(myProject,path,repositoryPath,session,vcsHistoryProvider,annotationProvider,contentManager,vcs.getCommittedChangesProvider());
        Content content=ContentFactory.SERVICE.getInstance().createContent(fileHistoryPanel,actionName,true);
        ContentsUtil.addOrReplaceContent(contentManager,content,true);
        ToolWindow toolWindow=ToolWindowManager.getInstance(myProject).getToolWindow(ToolWindowId.VCS);
        toolWindow.activate(null);
      }
    }
,null,false);
  }
 catch (  Exception exception) {
    reportError(exception);
  }
}
