{
  if (lastParent instanceof GrReferenceList) {
    return Arrays.asList(grType.getInnerClasses());
  }
  List<PsiClass> classes=RecursionManager.doPreventingRecursion(grType,true,new Computable<List<PsiClass>>(){
    @Override public List<PsiClass> compute(){
      List<PsiClass> result=new ArrayList<PsiClass>();
      for (      CandidateInfo info : CollectClassMembersUtil.getAllInnerClasses(grType,false).values()) {
        ContainerUtil.addIfNotNull(result,(PsiClass)info.getElement());
      }
      return result;
    }
  }
);
  if (classes == null) {
    return Arrays.asList(grType.getInnerClasses());
  }
  return classes;
}
