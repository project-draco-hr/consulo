{
  myLoadingPanel.startLoading();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    public void run(){
      final AtomicReference<String> error=new AtomicReference<String>();
synchronized (COMMITS_LOADING_LOCK) {
        error.set(collectInfoToPush());
      }
      final Pair<String,String> remoteAndBranch=getRemoteAndTrackedBranchForCurrentBranch();
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          if (error.get() != null) {
            myListPanel.displayError(error.get());
          }
 else {
            myListPanel.setCommits(myGitCommitsToPush);
          }
          if (!myRefspecPanel.turnedOn()) {
            myRefspecPanel.selectRemote(remoteAndBranch.getFirst());
            myRefspecPanel.setBranchToPushIfNotSet(remoteAndBranch.getSecond());
          }
          myLoadingPanel.stopLoading();
        }
      }
);
    }
  }
);
}
