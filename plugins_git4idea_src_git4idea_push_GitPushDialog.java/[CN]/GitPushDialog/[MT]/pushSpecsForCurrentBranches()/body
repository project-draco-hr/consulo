{
  Map<GitRepository,GitPushSpec> defaultSpecs=new HashMap<GitRepository,GitPushSpec>();
  for (  GitRepository repository : myRepositories) {
    GitBranch currentBranch=repository.getCurrentBranch();
    if (currentBranch == null) {
      continue;
    }
    String remoteName=currentBranch.getTrackedRemoteName(repository.getProject(),repository.getRoot());
    String trackedBranchName=currentBranch.getTrackedBranchName(repository.getProject(),repository.getRoot());
    GitRemote remote=GitUtil.findRemoteByName(repository,remoteName);
    GitBranch tracked=findRemoteBranchByName(repository,remote,trackedBranchName);
    if (remote == null || tracked == null) {
      Pair<GitRemote,GitBranch> remoteAndBranch=GitUtil.findMatchingRemoteBranch(repository,currentBranch);
      if (remoteAndBranch == null) {
        continue;
      }
      remote=remoteAndBranch.getFirst();
      tracked=remoteAndBranch.getSecond();
    }
    GitPushSpec pushSpec=new GitPushSpec(remote,currentBranch,tracked);
    defaultSpecs.put(repository,pushSpec);
  }
  return defaultSpecs;
}
