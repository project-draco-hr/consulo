{
  LOG.info("getPushInfo");
synchronized (COMMITS_LOADING_LOCK) {
    GitCommitsByRepoAndBranch selectedCommits;
    if (myGitCommitsToPush == null) {
      LOG.info("getPushInfo | myGitCommitsToPush == null. collecting...");
      collectInfoToPush();
      selectedCommits=myGitCommitsToPush;
    }
 else {
      if (refreshNeeded()) {
        LOG.info("getPushInfo | refresh is needed, collecting...");
        collectInfoToPush();
      }
      Collection<GitRepository> selectedRepositories=myListPanel.getSelectedRepositories();
      selectedCommits=myGitCommitsToPush.retainAll(selectedRepositories);
    }
    LOG.info("getPushInfo | selectedCommits: " + logMessageForCommits(selectedCommits));
    return new GitPushInfo(selectedCommits,myPushSpecs);
  }
}
