{
  UpdateHighlightersUtil.setLineMarkersToEditor(myProject,myDocument,myStartOffset,myEndOffset,myMarkers,Pass.UPDATE_ALL);
  TextRange range=new TextRange(myStartOffset,myEndOffset);
  Collection<HighlightInfo> collection=myInjectedPsiHighlights.get(range);
  if (collection == null) {
    collection=new ArrayList<HighlightInfo>();
  }
  collection.addAll(myHighlights);
  myInjectedPsiHighlights.put(range,collection);
  HighlightInfo[] infos=UpdateHighlightersUtil.setAndGetHighlightersToEditor(myProject,myDocument,myInjectedPsiHighlights,Pass.UPDATE_ALL);
  if (myUpdateAll) {
    reportErrorsToWolf(infos,myFile,myHasErrorElement);
  }
}
