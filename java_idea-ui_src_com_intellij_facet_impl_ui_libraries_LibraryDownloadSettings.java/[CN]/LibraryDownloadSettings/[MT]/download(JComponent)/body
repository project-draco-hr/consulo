{
  VirtualFile[] files=DownloadableFileService.getInstance().createDownloader(mySelectedDownloads,null,parent,myLibraryName + " Library").toDirectory(myDirectoryForDownloadedLibrariesPath).download();
  if (files == null) {
    return null;
  }
  final NewLibraryEditor libraryEditor;
  if (myLibraryType != null) {
    libraryEditor=new NewLibraryEditor(myLibraryType,new LibraryVersionProperties(myVersion.getVersionString()));
  }
 else {
    libraryEditor=new NewLibraryEditor();
  }
  libraryEditor.setName(myLibraryName);
  for (  VirtualFile file : files) {
    libraryEditor.addRoot(file,OrderRootType.CLASSES);
  }
  return libraryEditor;
}
