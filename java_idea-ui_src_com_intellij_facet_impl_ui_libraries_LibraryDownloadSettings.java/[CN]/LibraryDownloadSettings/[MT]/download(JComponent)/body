{
  LibraryDownloadInfo[] toDownload=mySelectedDownloads.toArray(new LibraryDownloadInfo[mySelectedDownloads.size()]);
  LibraryDownloader downloader=new LibraryDownloader(toDownload,null,parent,myDirectoryForDownloadedLibrariesPath,myLibraryName);
  VirtualFile[] files=downloader.download();
  if (files.length != toDownload.length) {
    return null;
  }
  final NewLibraryEditor libraryEditor=new NewLibraryEditor();
  libraryEditor.setName(myLibraryName);
  for (  VirtualFile file : files) {
    libraryEditor.addRoot(file,OrderRootType.CLASSES);
  }
  return libraryEditor;
}
