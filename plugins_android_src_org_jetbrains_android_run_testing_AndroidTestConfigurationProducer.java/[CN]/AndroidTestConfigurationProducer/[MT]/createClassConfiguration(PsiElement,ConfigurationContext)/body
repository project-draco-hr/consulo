{
  PsiClass elementClass=PsiTreeUtil.getParentOfType(element,PsiClass.class,false);
  while (elementClass != null) {
    if (JUnitUtil.isTestClass(elementClass)) {
      RunnerAndConfigurationSettings settings=checkFacetAndCreateConfiguration(elementClass,context,AndroidTestRunConfiguration.TEST_CLASS,elementClass.getQualifiedName());
      if (settings == null)       return null;
      AndroidTestRunConfiguration configuration=(AndroidTestRunConfiguration)settings.getConfiguration();
      configuration.CLASS_NAME=elementClass.getQualifiedName();
      return settings;
    }
    elementClass=PsiTreeUtil.getParentOfType(elementClass,PsiClass.class);
  }
  return null;
}
