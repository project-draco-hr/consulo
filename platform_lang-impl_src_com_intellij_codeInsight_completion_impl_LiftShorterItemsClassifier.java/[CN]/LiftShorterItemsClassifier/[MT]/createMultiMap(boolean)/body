{
  return new MultiMap<K,V>(){
    @NotNull @Override protected Map<K,Collection<V>> createMap(){
      if (identityKeys)       return newIdentityHashMap();
      return newTroveMap();
    }
    @Override public boolean remove(    K key,    V value){
      List<V> elements=(List<V>)get(key);
      int i=ContainerUtil.indexOfIdentity(elements,value);
      if (i >= 0) {
        elements.remove(i);
        if (elements.isEmpty()) {
          remove(key);
        }
        return true;
      }
      return false;
    }
  }
;
}
