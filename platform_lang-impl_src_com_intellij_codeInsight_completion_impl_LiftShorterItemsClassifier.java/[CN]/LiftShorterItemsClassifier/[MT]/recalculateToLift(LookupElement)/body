{
  final THashSet<LookupElement> forPreselection=loadItems(element,myToLiftForPreselection);
  final THashSet<LookupElement> forSorting=loadItems(element,myToLiftForSorting);
  for (  String string : getAllLookupStrings(element)) {
    for (int len=1; len < string.length(); len++) {
      String prefix=string.substring(0,len);
      for (      LookupElement shorterElement : myElements.get(prefix)) {
        if (forSorting.contains(shorterElement) || forPreselection.contains(shorterElement)) {
          continue;
        }
        if (myCondition.shouldLift(shorterElement,element)) {
          forPreselection.add(shorterElement);
        }
 else {
          forSorting.add(shorterElement);
        }
      }
    }
  }
  saveItems(element,forPreselection,myToLiftForPreselection);
  saveItems(element,forSorting,myToLiftForSorting);
}
