{
  final Set<Language> languages=file.getViewProvider().getLanguages();
  for (  Language language : languages) {
    final PsiFile f=file.getViewProvider().getPsi(language);
    f.putUserData(BELTS_ARE_FASTEN_KEY,null);
    List<WeakReference<SmartPointerEx>> pointers=getPointers(file);
    if (pointers == null)     return;
    int index=0;
    for (int i=0; i < pointers.size(); i++) {
      WeakReference<SmartPointerEx> reference=pointers.get(i);
      SmartPointerEx pointer=reference.get();
      if (pointer != null) {
        pointer.unfastenBelt(offset);
        pointers.set(index++,reference);
      }
    }
    final PsiDocumentManager psiDocumentManager=PsiDocumentManager.getInstance(file.getProject());
    for (    Document document : InjectedLanguageUtil.getCachedInjectedDocuments(file)) {
      PsiFile injectedfile=psiDocumentManager.getPsiFile(document);
      if (injectedfile == null)       continue;
      unfastenBelts(injectedfile,0);
    }
    int size=pointers.size();
    for (int i=size - 1; i >= index; i--) {
      pointers.remove(i);
    }
  }
}
