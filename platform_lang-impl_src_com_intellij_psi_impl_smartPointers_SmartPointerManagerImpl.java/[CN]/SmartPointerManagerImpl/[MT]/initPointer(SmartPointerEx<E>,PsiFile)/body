{
  if (containingFile == null)   return;
synchronized (containingFile) {
    List<WeakReference<SmartPointerEx>> pointers=getPointers(containingFile);
    if (pointers == null) {
      pointers=new ArrayList<WeakReference<SmartPointerEx>>();
      containingFile.putUserData(SMART_POINTERS_IN_PSI_FILE_KEY,pointers);
    }
    pointers.add(new WeakReference<SmartPointerEx>(pointer));
    if (areBeltsFastened(containingFile)) {
      pointer.fastenBelt(0,null);
    }
  }
}
