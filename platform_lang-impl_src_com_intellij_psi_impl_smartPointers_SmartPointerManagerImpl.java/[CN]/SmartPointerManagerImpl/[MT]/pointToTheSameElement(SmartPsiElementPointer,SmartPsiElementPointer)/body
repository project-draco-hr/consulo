{
  if (pointer1 instanceof SmartPsiElementPointerImpl && pointer2 instanceof SmartPsiElementPointerImpl) {
    SmartPointerElementInfo elementInfo1=((SmartPsiElementPointerImpl)pointer1).getElementInfo();
    SmartPointerElementInfo elementInfo2=((SmartPsiElementPointerImpl)pointer2).getElementInfo();
    return elementInfo1.pointsToTheSameElementAs(elementInfo2);
  }
  if (pointer1 instanceof LazyPointerImpl && pointer2 instanceof LazyPointerImpl) {
    return ((LazyPointerImpl)pointer1).pointsToTheSameElementAs((LazyPointerImpl)pointer2);
  }
  return Comparing.equal(pointer1.getElement(),pointer2.getElement());
}
