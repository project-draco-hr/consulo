{
  final ModifiableRootModel model=getModel();
  final Sdk oldSdk=model.getSdk();
  if (newJDK != null) {
    model.setSdk(newJDK);
  }
 else {
    model.inheritSdk();
  }
  if (myPanel != null) {
    myPanel.forceInitFromModel();
  }
  flushChangesToModel();
  return oldSdk;
}
