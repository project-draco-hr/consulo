{
  if (myInMemoryMode.get()) {
synchronized (myInMemoryKeys) {
      myInMemoryKeys.put(inputId,newData.keySet());
    }
  }
 else {
    if (myHasSnapshotMapping) {
      saveInputHashId(inputId,savedInputId);
    }
 else {
      if (myInputsIndex != null) {
        if (newData.size() > 0) {
          myInputsIndex.put(inputId,newData.keySet());
        }
 else {
          myInputsIndex.remove(inputId);
        }
      }
      if (SharedIndicesData.ourFileSharedIndicesEnabled) {
        Set<Key> newKeys=newData.keySet();
        if (newKeys.size() == 0)         newKeys=null;
        SharedIndicesData.associateFileData(inputId,myIndexId,newKeys,mySnapshotIndexExternalizer);
      }
    }
  }
}
