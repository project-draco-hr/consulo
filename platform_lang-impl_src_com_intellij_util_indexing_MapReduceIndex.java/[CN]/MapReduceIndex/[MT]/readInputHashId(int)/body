{
  if (SharedIndicesData.ourFileSharedIndicesEnabled) {
    Integer hashId=SharedIndicesData.recallFileData(inputId,myIndexId,EnumeratorIntegerDescriptor.INSTANCE);
    if (hashId == null)     hashId=0;
    if (myInputsSnapshotMapping == null)     return hashId;
    Integer hashIdFromInputSnapshotMapping=myInputsSnapshotMapping.get(inputId);
    if ((hashId == 0 && hashIdFromInputSnapshotMapping != 0) || !Comparing.equal(hashIdFromInputSnapshotMapping,hashId)) {
      SharedIndicesData.associateFileData(inputId,myIndexId,hashIdFromInputSnapshotMapping,EnumeratorIntegerDescriptor.INSTANCE);
      if (hashId != 0) {
        LOG.error("Unexpected indexing diff with hashid " + myIndexId + ", file:"+ IndexInfrastructure.findFileById(PersistentFS.getInstance(),inputId)+ ","+ hashIdFromInputSnapshotMapping+ ","+ hashId);
      }
      hashId=hashIdFromInputSnapshotMapping;
    }
    return hashId;
  }
  return myInputsSnapshotMapping.get(inputId);
}
