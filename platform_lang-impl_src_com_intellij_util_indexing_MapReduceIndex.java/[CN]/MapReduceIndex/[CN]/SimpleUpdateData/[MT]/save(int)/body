{
  if (myHasSnapshotMapping && !((MemoryIndexStorage)getStorage()).isBufferingEnabled()) {
    myInputsSnapshotMapping.put(inputId,savedInputId);
  }
 else   if (myInputsIndex != null) {
    final Set<Key> newKeys=newData.keySet();
    if (newKeys.size() > 0) {
      myInputsIndex.put(inputId,newKeys);
    }
 else {
      myInputsIndex.remove(inputId);
    }
  }
}
