{
  try {
    ExtractClassProcessor processor=new ExtractClassProcessor(aClass,fields,methods,new ArrayList<PsiClass>(),"","Extracted",null,generateGettersSetters);
    processor.run();
    LocalFileSystem.getInstance().refresh(false);
    FileDocumentManager.getInstance().saveAllDocuments();
  }
 catch (  Exception e) {
    if (conflicts != null) {
      Assert.assertEquals(e.getMessage(),conflicts);
      return;
    }
 else {
      fail(e.getMessage());
    }
  }
  if (conflicts != null) {
    fail("Conflicts were not detected: " + conflicts);
  }
}
