{
  String classpathFileName=System.getProperty("idea.test.classpath");
  if (classpathFileName == null) {
    throw new IllegalArgumentException("System property 'idea.test.classpath' should be point to file with classpath.");
  }
  List<String> classRoots=new ArrayList<String>();
  try {
    FileInputStream fis=new FileInputStream(classpathFileName);
    ByteArrayOutputStream baos=new ByteArrayOutputStream(fis.available());
    FileUtil.copy(fis,baos);
    fis.close();
    StringTokenizer tokenizer=new StringTokenizer(baos.toString(),System.getProperty("line.separator"),false);
    while (tokenizer.hasMoreTokens()) {
      String path=tokenizer.nextToken();
      if (!path.endsWith(".jar")) {
        classRoots.add(path);
      }
    }
    return classRoots.toArray(new String[0]);
  }
 catch (  FileNotFoundException e) {
    throw new IllegalArgumentException("File " + classpathFileName + " is not exists.");
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
