{
  if (myProject != null) {
    FileEditorManagerListener listener=new FileEditorManagerAdapter(){
      public void fileOpened(      FileEditorManager fileEditorManager,      VirtualFile virtualFile){
        if (virtualFile.isWritable() && NewFileTracker.getInstance().contains(virtualFile)) {
          NewFileTracker.getInstance().remove(virtualFile);
          if (FileTypeUtil.getInstance().isSupportedFile(virtualFile)) {
            final Module module=ProjectRootManager.getInstance(myProject).getFileIndex().getModuleForFile(virtualFile);
            if (module != null) {
              final PsiFile file=PsiManager.getInstance(myProject).findFile(virtualFile);
              if (file != null) {
                ApplicationManager.getApplication().invokeLater(new Runnable(){
                  public void run(){
                    if (myProject.isDisposed())                     return;
                    if (file.isValid() && file.isWritable()) {
                      final CopyrightProfile opts=getInstance(myProject).getCopyrightOptions(file);
                      if (opts != null) {
                        new UpdateCopyrightProcessor(myProject,module,file).run();
                      }
                    }
                  }
                }
,ModalityState.NON_MODAL,myProject.getDisposed());
              }
            }
          }
        }
      }
    }
;
    FileEditorManager.getInstance(myProject).addFileEditorManagerListener(listener,myProject);
  }
}
