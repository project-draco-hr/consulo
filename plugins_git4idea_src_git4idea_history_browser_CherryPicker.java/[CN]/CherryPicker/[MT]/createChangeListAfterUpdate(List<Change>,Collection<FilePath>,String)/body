{
  final AtomicReference<LocalChangeList> changeList=new AtomicReference<LocalChangeList>();
  myChangeListManager.invokeAfterUpdate(new Runnable(){
    public void run(){
      changeList.set(createChangeList(changes,commitMessage));
    }
  }
,InvokeAfterUpdateMode.SILENT,"",new Consumer<VcsDirtyScopeManager>(){
    public void consume(    VcsDirtyScopeManager vcsDirtyScopeManager){
      vcsDirtyScopeManager.filePathsDirty(paths,null);
    }
  }
,ModalityState.NON_MODAL);
  return changeList.get();
}
