{
  Set<OrderEntry> orderEntries=ContainerUtil.newLinkedHashSet();
  orderEntries.addAll(getLibraryOrderEntries(hierarchy,libraryClassRoot,librarySourceRoot));
  orderEntries.addAll(getDependencyOrderEntries(hierarchy));
  if (moduleContentRoot != null) {
    ContainerUtil.addIfNotNull(orderEntries,getModuleSourceEntry(hierarchy,moduleContentRoot));
  }
  if (orderEntries.isEmpty()) {
    return null;
  }
  OrderEntry[] array=orderEntries.toArray(new OrderEntry[orderEntries.size()]);
  Arrays.sort(array,DirectoryInfo.BY_OWNER_MODULE);
  return array;
}
