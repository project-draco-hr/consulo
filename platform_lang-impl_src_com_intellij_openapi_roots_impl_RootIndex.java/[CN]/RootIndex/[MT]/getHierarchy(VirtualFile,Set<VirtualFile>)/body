{
  List<VirtualFile> hierarchy=ContainerUtil.newArrayList();
  while (dir != null) {
    if (FileTypeManager.getInstance().isFileIgnored(dir)) {
      return null;
    }
    if (allRoots.contains(dir)) {
      hierarchy.add(dir);
    }
    dir=dir.getParent();
  }
  return hierarchy;
}
