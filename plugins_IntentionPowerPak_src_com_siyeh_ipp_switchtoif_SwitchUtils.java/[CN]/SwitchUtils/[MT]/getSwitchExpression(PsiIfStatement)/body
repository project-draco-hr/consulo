{
  final PsiExpression condition=statement.getCondition();
  final LanguageLevel languageLevel=PsiUtil.getLanguageLevel(statement);
  final PsiExpression possibleSwitchExpression=determinePossibleSwitchExpressions(condition,languageLevel);
  if (!canBeSwitchExpression(possibleSwitchExpression,languageLevel)) {
    return null;
  }
  while (true) {
    if (!canBeMadeIntoCase(statement.getCondition(),possibleSwitchExpression,languageLevel)) {
      break;
    }
    final PsiStatement elseBranch=statement.getElseBranch();
    if (!(elseBranch instanceof PsiIfStatement)) {
      return possibleSwitchExpression;
    }
    statement=(PsiIfStatement)elseBranch;
  }
  return null;
}
