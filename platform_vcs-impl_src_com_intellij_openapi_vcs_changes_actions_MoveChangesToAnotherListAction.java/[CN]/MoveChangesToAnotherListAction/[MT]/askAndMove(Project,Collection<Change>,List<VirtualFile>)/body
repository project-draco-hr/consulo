{
  if (changes.isEmpty() && unversionedFiles.isEmpty())   return false;
  final ChangeListManagerImpl listManager=ChangeListManagerImpl.getInstanceImpl(project);
  final List<LocalChangeList> lists=listManager.getChangeLists();
  final List<LocalChangeList> preferredLists=getPreferredLists(lists,changes,true);
  ChangeListChooser chooser=new ChangeListChooser(project,preferredLists,guessPreferredList(preferredLists),ActionsBundle.message("action.ChangesView.Move.text"),null);
  chooser.show();
  LocalChangeList resultList=chooser.getSelectedList();
  if (resultList != null) {
    listManager.moveChangesTo(resultList,changes.toArray(new Change[changes.size()]));
    if ((unversionedFiles != null) && (!unversionedFiles.isEmpty())) {
      listManager.addUnversionedFiles(resultList,unversionedFiles);
    }
    return true;
  }
  return false;
}
