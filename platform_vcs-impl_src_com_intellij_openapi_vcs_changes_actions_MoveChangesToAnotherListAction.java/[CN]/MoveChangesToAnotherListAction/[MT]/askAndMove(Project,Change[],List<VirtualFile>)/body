{
  final ChangeListManagerImpl listManager=ChangeListManagerImpl.getInstanceImpl(project);
  final List<LocalChangeList> lists=listManager.getChangeLists();
  ChangeListChooser chooser=new ChangeListChooser(project,getPreferredLists(lists,changes,true),guessPreferredList(lists,changes),ActionsBundle.message("action.ChangesView.Move.text"),null);
  chooser.show();
  LocalChangeList resultList=chooser.getSelectedList();
  if (resultList != null) {
    listManager.moveChangesTo(resultList,changes);
    if ((unversionedFiles != null) && (!unversionedFiles.isEmpty())) {
      listManager.addUnversionedFiles(resultList,unversionedFiles);
    }
    return true;
  }
  return false;
}
