{
  myName=name;
  myTotalFrames=totalFrames;
  myCycleLength=cycleLength;
  myRepeatable=repeatable;
  myTimer=new Timer(myName,myCycleLength / myTotalFrames){
    protected void onTimer() throws InterruptedException {
      boolean repaint=true;
      if (!isAnimated()) {
        if (myLastAnimated) {
          myCurrentFrame=0;
          myQueuedFrames=0;
          myLastAnimated=false;
        }
 else {
          repaint=false;
        }
      }
 else {
        myLastAnimated=true;
        if (myQueuedFrames > myTotalFrames)         return;
        if (myCurrentFrame + 1 < myTotalFrames) {
          myCurrentFrame++;
        }
 else {
          if (myRepeatable) {
            if (maxRepeatCount == -1 || myRepeatCount < maxRepeatCount) {
              myRepeatCount++;
              myCurrentFrame=0;
              if (interCycleGap > 0) {
                Thread.sleep(interCycleGap - getSpan());
              }
            }
 else {
              repaint=false;
              suspend();
              myRepeatCount=0;
              onAnimationMaxCycleReached();
            }
          }
 else {
            repaint=false;
            suspend();
          }
        }
      }
      if (repaint) {
        myQueuedFrames++;
        SwingUtilities.invokeLater(new Runnable(){
          public void run(){
            myQueuedFrames--;
            paintNow(myCurrentFrame);
          }
        }
);
      }
    }
  }
;
}
