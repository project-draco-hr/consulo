{
  String newName=getNewFileName(serverFileName,serverFileNames,localFileNames);
  String oldFilePath=FILE_SPEC + serverFileName;
  String newFilePath=FILE_SPEC + newName;
  for (  StreamProvider serverStreamProvider : myServerStreamProviders) {
    try {
      InputStream stream=serverStreamProvider.loadContent(oldFilePath,PER_USER);
      if (stream != null) {
        try {
          File file=new File(myShelfPath + "/" + newName);
          FileOutputStream out=new FileOutputStream(file);
          try {
            FileUtil.copy(stream,out);
          }
  finally {
            out.close();
          }
          serverStreamProvider.deleteFile(oldFilePath,PER_USER);
          FileInputStream input=new FileInputStream(file);
          try {
            serverStreamProvider.saveContent(newFilePath,input,file.length(),PER_USER);
          }
  finally {
            input.close();
          }
        }
 catch (        IOException e) {
          LOG.info(e);
        }
      }
    }
 catch (    IOException e) {
      LOG.info(e);
    }
  }
  return newName;
}
