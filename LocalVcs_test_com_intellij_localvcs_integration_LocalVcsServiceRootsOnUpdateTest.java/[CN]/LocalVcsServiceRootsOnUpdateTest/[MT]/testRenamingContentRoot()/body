{
  vcs.createDirectory("c:/dir/root",null);
  vcs.createFile("c:/dir/root/file",null,null);
  vcs.apply();
  TestVirtualFile dir=new TestVirtualFile("c:/dir",null);
  root=new TestVirtualFile("newName",null);
  dir.addChild(root);
  fileManager.firePropertyChanged(root,VirtualFile.PROP_NAME,"root");
  assertFalse(vcs.hasEntry("c:/dir/root"));
  assertTrue(vcs.hasEntry("c:/dir/newName"));
  assertTrue(vcs.hasEntry("c:/dir/newName/file"));
}
