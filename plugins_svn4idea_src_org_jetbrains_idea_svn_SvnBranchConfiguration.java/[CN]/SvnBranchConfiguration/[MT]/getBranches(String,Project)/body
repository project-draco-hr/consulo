{
  final ArrayList<SvnBranchItem> result=new ArrayList<SvnBranchItem>();
  final Ref<SVNException> ex=new Ref<SVNException>();
  boolean rc=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator != null) {
        indicator.setIndeterminate(true);
      }
      try {
        getBranchesImpl(project,url,result,true);
      }
 catch (      SVNException e) {
        ex.set(e);
      }
    }
  }
,SvnBundle.message("compare.with.branch.progress.loading.branches"),true,project);
  if (!rc) {
    return Collections.emptyList();
  }
  if (!ex.isNull()) {
    throw ex.get();
  }
  return result;
}
