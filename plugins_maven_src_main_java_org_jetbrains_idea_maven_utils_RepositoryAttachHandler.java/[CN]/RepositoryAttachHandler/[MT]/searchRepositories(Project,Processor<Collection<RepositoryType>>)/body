{
  ProgressManager.getInstance().run(new Task.Backgroundable(project,"Maven",false){
    public void run(    @NotNull ProgressIndicator indicator){
      final MavenFacadeManager mavenManager=ServiceManager.getService(project,MavenFacadeManager.class);
      final Ref<List<RepositoryType>> result=Ref.create(Collections.<RepositoryType>emptyList());
      try {
        final String[] nexusUrls=getDefaultNexusUrls();
        final MavenFacade mavenFacade=mavenManager.getMavenFacade(project);
        final ArrayList<RepositoryType> repoList=new ArrayList<RepositoryType>();
        for (        String nexusUrl : nexusUrls) {
          final List<RepositoryType> repositories;
          try {
            repositories=mavenFacade.getRepositories(nexusUrl);
          }
 catch (          Exception ex) {
            LOG.warn("Accessing Nexus at: " + nexusUrl,ex);
            continue;
          }
          repoList.addAll(repositories);
        }
        result.set(repoList);
      }
 catch (      Exception e) {
        handleError(null,e);
      }
 finally {
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          public void run(){
            resultProcessor.process(result.get());
          }
        }
);
      }
    }
  }
);
}
