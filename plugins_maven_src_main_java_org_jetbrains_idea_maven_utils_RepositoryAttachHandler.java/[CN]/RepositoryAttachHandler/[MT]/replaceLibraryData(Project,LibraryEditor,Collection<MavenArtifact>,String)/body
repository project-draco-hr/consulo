{
  final String repoUrl=getLocalRepositoryUrl(project);
  for (  OrderRootType type : OrderRootType.getAllTypes()) {
    for (    String url : libraryEditor.getUrls(type)) {
      if (url.startsWith(repoUrl)) {
        libraryEditor.removeRoot(url,type);
      }
    }
  }
  final VirtualFileManager manager=VirtualFileManager.getInstance();
  for (  MavenArtifact each : artifacts) {
    try {
      File repoFile=each.getFile();
      File toFile=repoFile;
      if (copyTo != null) {
        toFile=new File(copyTo,repoFile.getName());
        if (repoFile.exists()) {
          FileUtil.copy(repoFile,toFile);
        }
      }
      final String url=VfsUtil.getUrlForLibraryRoot(toFile);
      manager.refreshAndFindFileByUrl(url);
      if (MavenExtraArtifactType.DOCS.getDefaultClassifier().equals(each.getClassifier())) {
        libraryEditor.addRoot(url,JavadocOrderRootType.getInstance());
      }
 else       if (MavenExtraArtifactType.SOURCES.getDefaultClassifier().equals(each.getClassifier())) {
        libraryEditor.addRoot(url,OrderRootType.SOURCES);
      }
 else {
        libraryEditor.addRoot(url,OrderRootType.CLASSES);
      }
    }
 catch (    MalformedURLException e) {
      MavenLog.LOG.warn(e);
    }
catch (    IOException e) {
      MavenLog.LOG.warn(e);
    }
  }
}
