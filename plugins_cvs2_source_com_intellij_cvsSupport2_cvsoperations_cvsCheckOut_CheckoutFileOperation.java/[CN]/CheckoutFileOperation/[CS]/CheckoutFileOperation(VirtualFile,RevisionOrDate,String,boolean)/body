{
  super(new CheckoutAdminReader());
  myMakeNewFilesReadOnly=makeNewFilesReadOnly;
  myRevisionOrDate=revisionOrDate;
  myFile=CvsVfsUtil.getFileFor(parent,fileName);
  myIsDirectory=myFile.isDirectory();
  Runnable writeAction=new Runnable(){
    public void run(){
      ApplicationManager.getApplication().runWriteAction(new Runnable(){
        public void run(){
          final String parentModule=CvsUtil.getModuleName(parent);
          VirtualFile file=parent.findChild(fileName);
          if (parentModule == null && file != null) {
            myModuleName=CvsUtil.getModuleName(file);
          }
 else {
            myModuleName=parentModule + "/" + fileName;
          }
        }
      }
);
    }
  }
;
  if (!ApplicationManager.getApplication().isDispatchThread()) {
    try {
      ApplicationManager.getApplication().invokeAndWait(writeAction,ModalityState.defaultModalityState());
    }
 catch (    Exception e) {
      LOG.error(e);
    }
  }
 else {
    writeAction.run();
  }
  addFile(myFile.getAbsolutePath());
}
