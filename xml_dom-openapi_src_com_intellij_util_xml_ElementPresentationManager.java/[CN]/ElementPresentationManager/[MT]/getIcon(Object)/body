{
  for (  final Function<Object,Icon> function : ourIconProviders) {
    final Icon icon=function.fun(o);
    if (icon != null) {
      return icon;
    }
  }
  if (o instanceof DomElement) {
    final DomElement domElement=(DomElement)o;
    final boolean dumb=DumbService.getInstance(domElement.getManager().getProject()).isDumb();
    for (    final IconProvider provider : IconProvider.EXTENSION_POINT_NAME.getExtensions()) {
      if (provider instanceof DomIconProvider) {
        if (dumb && !DumbService.isDumbAware(provider)) {
          continue;
        }
        final Icon icon=((DomIconProvider)provider).getIcon(domElement,0);
        if (icon != null) {
          return icon;
        }
      }
    }
  }
  final Icon[] icons=getIconsForClass(o.getClass(),o);
  if (icons != null && icons.length > 0) {
    return icons[0];
  }
  return null;
}
