{
  ((TreeElement)file.getNode()).acceptTree(new RecursiveTreeElementWalkingVisitor(){
    protected boolean visitNode(    TreeElement element){
      PsiElement el=element.getPsi();
      Integer offset=el.getCopyableUserData(CARET_POS_KEY);
      if (offset == null)       return true;
      myEditor.getCaretModel().moveToOffset(el.getTextOffset() + offset);
      el.putCopyableUserData(CARET_POS_KEY,null);
      return false;
    }
  }
);
}
