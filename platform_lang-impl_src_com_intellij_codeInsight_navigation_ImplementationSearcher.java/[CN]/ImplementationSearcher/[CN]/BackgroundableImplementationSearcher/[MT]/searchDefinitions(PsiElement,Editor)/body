{
  final CommonProcessors.CollectProcessor<PsiElement> processor=new CommonProcessors.CollectProcessor<PsiElement>(){
    @Override public boolean process(    PsiElement element){
      processElement(element);
      return super.process(element);
    }
  }
;
  try {
    DefinitionsScopedSearch.search(element,getSearchScope(element,editor)).forEach(processor);
  }
 catch (  IndexNotReadyException e) {
    ImplementationSearcher.dumbModeNotification(element);
    return null;
  }
  return processor.toArray(PsiElement.EMPTY_ARRAY);
}
