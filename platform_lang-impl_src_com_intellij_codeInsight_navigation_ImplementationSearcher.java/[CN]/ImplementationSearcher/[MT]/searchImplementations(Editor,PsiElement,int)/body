{
  boolean onRef=ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    @Override public Boolean compute(){
      HashSet<String> flags=ContainerUtil.newHashSet(getFlags());
      flags.remove(TargetElementUtilEx.REFERENCED_ELEMENT_ACCEPTED);
      flags.remove(TargetElementUtilEx.LOOKUP_ITEM_ACCEPTED);
      return TargetElementUtil.findTargetElement(editor,flags,offset) == null;
    }
  }
);
  return searchImplementations(element,editor,offset,onRef && ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
    @Override public Boolean compute(){
      return TargetElementUtil.includeSelfInGotoImplementation(element);
    }
  }
),onRef);
}
