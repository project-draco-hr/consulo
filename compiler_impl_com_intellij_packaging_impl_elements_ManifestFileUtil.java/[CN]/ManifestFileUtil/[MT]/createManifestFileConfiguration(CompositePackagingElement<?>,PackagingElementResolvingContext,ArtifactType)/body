{
  final VirtualFile manifestFile=findManifestFile(element,context,artifactType);
  final List<String> classpath=new ArrayList<String>();
  String mainClass=null;
  final String path;
  if (manifestFile != null) {
    path=manifestFile.getPath();
    Manifest manifest=readManifest(manifestFile);
    mainClass=manifest.getMainAttributes().getValue(Attributes.Name.MAIN_CLASS);
    final String classpathText=manifest.getMainAttributes().getValue(Attributes.Name.CLASS_PATH);
    if (classpathText != null) {
      classpath.addAll(StringUtil.split(classpathText," "));
    }
  }
 else {
    path=null;
  }
  return new ManifestFileConfiguration(classpath,mainClass,path);
}
