{
  init();
  myFileSystemTree.addListener(new FileSystemTree.Listener(){
    public void selectionChanged(    final List<VirtualFile> selection){
      updateFileName(selection);
      updateOkButton();
    }
  }
,myDisposable);
  if (filename != null) {
    myFileName.setText(filename);
  }
  if (baseDir != null && baseDir.isValid() && baseDir.isDirectory()) {
    myFileSystemTree.select(baseDir,null);
  }
  show();
  if (getExitCode() == OK_EXIT_CODE) {
    final File file=getFile();
    return file == null ? null : new VirtualFileWrapper(file);
  }
  return null;
}
