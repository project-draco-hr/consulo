{
  Element element=new Element("state");
  element.setAttribute(URL,myProjectVirtualFilePointer.getUrl());
  for (  Map.Entry<Module,CompileInfo> entry : myModulesToVirtualFilePoints.entrySet()) {
    final Module key=entry.getKey();
    final CompileInfo value=entry.getValue();
    if (value.inherit) {
      continue;
    }
    Element moduleElement=new Element(MODULE_OUTPUT_TAG);
    moduleElement.setAttribute(NAME,key.getName());
    moduleElement.setAttribute(EXCLUDE,String.valueOf(value.exclude));
    for (    Map.Entry<ContentFolderType,VirtualFilePointer> tempEntry : value.virtualFilePointers.entrySet()) {
      final Element elementForOutput=createElementForOutput(tempEntry.getValue());
      elementForOutput.setAttribute(TYPE,tempEntry.getKey().name());
      moduleElement.addContent(elementForOutput);
    }
    element.addContent(moduleElement);
  }
  return element;
}
