{
  PathMacroManager.getInstance(myProject).expandPaths(element);
  final ModuleManager moduleManager=ModuleManager.getInstance(myProject);
  String url=element.getAttributeValue(URL);
  if (url != null) {
    for (    Element child : element.getChildren()) {
      final String name=child.getAttributeValue(NAME);
      if (name == null) {
        continue;
      }
      Module module=moduleManager.findModuleByName(name);
      if (module == null) {
        continue;
      }
      CompileInfo compileInfo=new CompileInfo();
      compileInfo.inherit=false;
      compileInfo.exclude=Boolean.valueOf(child.getAttributeValue(EXCLUDE));
      for (      Element child2 : child.getChildren()) {
        final String moduleUrl=child2.getAttributeValue(URL);
        final ContentFolderType type=ContentFolderType.valueOf(child2.getAttributeValue(TYPE));
        compileInfo.virtualFilePointers.put(type,VirtualFilePointerManager.getInstance().create(moduleUrl,myProject,null));
      }
      myModulesToVirtualFilePoints.put(module,compileInfo);
    }
  }
  setCompilerOutputUrl(url);
  for (  Module module : moduleManager.getModules()) {
    if (!myModulesToVirtualFilePoints.containsKey(module)) {
      createDefaultForModule(module);
    }
  }
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      createIfNotExists();
    }
  }
);
}
