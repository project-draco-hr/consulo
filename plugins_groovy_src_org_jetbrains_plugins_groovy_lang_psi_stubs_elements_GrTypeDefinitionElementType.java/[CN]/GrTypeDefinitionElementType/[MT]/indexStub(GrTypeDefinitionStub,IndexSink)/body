{
  if (stub.isAnonymous()) {
    final String[] classNames=stub.getSuperClassNames();
    if (classNames.length != 1)     return;
    final String baseClassName=classNames[0];
    if (baseClassName != null) {
      final String shortName=PsiNameHelper.getShortClassName(baseClassName);
      sink.occurrence(GrAnonymousClassIndex.KEY,shortName);
    }
  }
 else {
    String shortName=stub.getName();
    if (shortName != null) {
      sink.occurrence(JavaStubIndexKeys.CLASS_SHORT_NAMES,shortName);
    }
    final String fqn=stub.getQualifiedName();
    if (fqn != null) {
      if (JavaFullClassNameIndex.DEBUG) {
        System.out.println("GrTypeDefinitionElementType.indexStub: fqn = " + fqn + ", fqn.hashCode() = "+ fqn.hashCode());
      }
      sink.occurrence(GrFullClassNameIndex.KEY,fqn.hashCode());
      sink.occurrence(JavaStubIndexKeys.CLASS_FQN,fqn.hashCode());
    }
  }
  for (  String annName : stub.getAnnotations()) {
    if (annName != null) {
      sink.occurrence(GrAnnotatedMemberIndex.KEY,annName);
    }
  }
}
