{
  Lexer lexer=new XmlPsiLexer();
  FilterLexer filterLexer=new FilterLexer(lexer,new FilterLexer.SetFilter(OldXmlParser.XML_WHITE_SPACE_OR_COMMENT_BIT_SET));
  short state=0;
switch (context) {
case ELEMENT_CONTENT_SPEC:
case ATTRIBUTE_SPEC:
case ATTLIST_SPEC:
case ENUMERATED_TYPE:
case ENTITY_DECL_CONTENT:
{
      state=_OldXmlLexer.DOCTYPE_MARKUP;
      break;
    }
case ATTR_VALUE:
case GENERIC_XML:
{
    break;
  }
default :
LOG.error("context: " + context);
}
if (myRootType == XML_MARKUP_DECL && context == TYPE_FOR_MARKUP_DECL) {
state=_OldXmlLexer.DOCTYPE;
}
filterLexer.start(buffer,0,buffer.length(),state);
return filterLexer;
}
