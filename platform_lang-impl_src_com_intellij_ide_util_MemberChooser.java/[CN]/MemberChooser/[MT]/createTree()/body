{
  final Tree tree=new Tree(new DefaultTreeModel(new DefaultMutableTreeNode()));
  tree.setCellRenderer(getTreeCellRenderer());
  UIUtil.setLineStyleAngled(tree);
  tree.setRootVisible(false);
  tree.setShowsRootHandles(true);
  tree.addKeyListener(new TreeKeyListener());
  tree.addTreeSelectionListener(new MyTreeSelectionListener());
  if (!myAllowMultiSelection) {
    tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  }
  new DoubleClickListener(){
    @Override protected boolean onDoubleClick(    MouseEvent e){
      if (tree.getPathForLocation(e.getX(),e.getY()) != null) {
        doOKAction();
        return true;
      }
      return false;
    }
  }
.installOn(tree);
  TreeUtil.installActions(tree);
  return tree;
}
