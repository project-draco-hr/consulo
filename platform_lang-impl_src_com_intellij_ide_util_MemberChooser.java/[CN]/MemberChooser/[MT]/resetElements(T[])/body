{
  myElements=elements;
  mySelectedNodes.clear();
  myNodeToParentMap.clear();
  myElementToNodeMap.clear();
  myContainerNodes.clear();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      myTreeModel=buildModel();
    }
  }
);
  myTree.setModel(myTreeModel);
  myTree.setRootVisible(false);
  doSort();
  TreeUtil.expandAll(myTree);
  if (myCheckboxes == null) {
    myCopyJavadocCheckbox=new NonFocusableCheckBox(IdeBundle.message("checkbox.copy.javadoc"));
    if (myIsInsertOverrideVisible) {
      myInsertOverrideAnnotationCheckbox=new NonFocusableCheckBox(IdeBundle.message("checkbox.insert.at.override"));
    }
    myCheckboxes=new JCheckBox[]{myCopyJavadocCheckbox,myInsertOverrideAnnotationCheckbox};
  }
  myTree.doLayout();
  setOKActionEnabled(myElements != null && myElements.length > 0);
}
