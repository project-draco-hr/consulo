def receiveWithMessage(client, message):
    length = receiveIntWithMessage(client, message)
    buffer = ''
    while (len(buffer) < length):
        chunk = client.recv((length - len(buffer)))
        if (chunk == ''):
            raise util.Abort(message)
        buffer = (buffer + chunk)
    return buffer
