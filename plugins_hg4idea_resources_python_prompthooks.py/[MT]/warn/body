@monkeypatch_method(ui.ui)
def warn(self, *msg):
    original_warn(self, *msg)
    port = int(self.config('hg4ideawarn', 'port', None, True))
    if (not port):
        raise util.Abort('No port was specified')
    self.debug(('hg4idea prompt server waiting on port %s' % port))
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.debug('connecting ...')
    client.connect(('127.0.0.1', port))
    self.debug('connected, sending data ...')
    sendInt(client, len(msg))
    for message in msg:
        send(client, message)
