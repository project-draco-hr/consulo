{
  LanguageLevelProjectExtension.getInstance(myJavaFacade.getProject()).setLanguageLevel(LanguageLevel.JDK_1_5);
  CommandProcessor.getInstance().executeCommand(myProject,new Runnable(){
    public void run(){
      try {
        createFile(myModule,myTestProjectRoot,"PropEnum.java","public enum PropEnum { valueA, valueB }");
        createFile(myModule,myTestProjectRoot,"CustomComponent.java","public class CustomComponent extends JLabel { private PropEnum e; public PropEnum getE() { return e; } public void setE(E newE) { e = newE; } }");
      }
 catch (      Exception e) {
        fail(e.getMessage());
      }
    }
  }
,"",null);
  PsiClass enumClass=myJavaFacade.findClass("PropEnum",ProjectScope.getAllScope(myProject));
  PsiField valueBField=enumClass.findFieldByName("valueB",false);
  assertNotNull(valueBField);
  assertTrue(valueBField instanceof PsiEnumConstant);
  final PsiClass componentClass=myJavaFacade.findClass("CustomComponent",ProjectScope.getAllScope(myProject));
  assertNotNull(componentClass);
  Query<PsiReference> query=ReferencesSearch.search(componentClass);
  assertEquals(1,query.findAll().size());
  query=ReferencesSearch.search(valueBField);
  assertEquals(1,query.findAll().size());
}
