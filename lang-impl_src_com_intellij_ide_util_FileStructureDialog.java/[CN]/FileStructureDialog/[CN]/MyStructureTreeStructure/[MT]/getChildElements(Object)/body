{
  Object[] childElements=super.getChildElements(element);
  if (!myShouldNarrowDown) {
    return childElements;
  }
  String enteredPrefix=myCommanderPanel.getEnteredPrefix();
  if (enteredPrefix == null) {
    return childElements;
  }
  ArrayList<Object> filteredElements=new ArrayList<Object>(childElements.length);
  SpeedSearchBase.SpeedSearchComparator speedSearchComparator=createSpeedSearchComparator();
  for (  Object child : childElements) {
    if (child instanceof AbstractTreeNode) {
      Object value=((AbstractTreeNode)child).getValue();
      if (value instanceof TreeElement) {
        String name=((TreeElement)value).getPresentation().getPresentableText();
        if (name == null) {
          continue;
        }
        if (!speedSearchComparator.doCompare(enteredPrefix,name)) {
          continue;
        }
      }
    }
    filteredElements.add(child);
  }
  return filteredElements.toArray(new Object[filteredElements.size()]);
}
