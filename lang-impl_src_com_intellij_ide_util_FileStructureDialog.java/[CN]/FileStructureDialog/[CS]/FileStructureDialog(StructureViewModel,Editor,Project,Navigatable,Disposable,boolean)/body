{
  super(project,true);
  myProject=project;
  myEditor=editor;
  myNavigatable=navigatable;
  myBaseTreeModel=structureViewModel;
  if (applySortAndFilter) {
    myTreeActionsOwner=new MyTreeActionsOwner();
    myTreeModel=new TreeModelWrapper(structureViewModel,myTreeActionsOwner);
  }
 else {
    myTreeActionsOwner=null;
    myTreeModel=structureViewModel;
  }
  PsiFile psiFile=getPsiFile(project);
  final PsiElement psiElement=getCurrentElement(psiFile);
  init();
  if (psiElement != null) {
    if (myCommanderPanel.shouldDrillDownOnEmptyElement(psiElement)) {
      myCommanderPanel.getBuilder().enterElement(psiElement,PsiUtilBase.getVirtualFile(psiElement));
    }
 else {
      myCommanderPanel.getBuilder().selectElement(psiElement,PsiUtilBase.getVirtualFile(psiElement));
    }
  }
  Disposer.register(myDisposable,auxDisposable);
}
