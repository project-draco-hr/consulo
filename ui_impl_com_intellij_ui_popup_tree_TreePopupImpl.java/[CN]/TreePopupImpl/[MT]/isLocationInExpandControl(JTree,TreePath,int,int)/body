{
  TreeModel treeModel=aTree.getModel();
  final BasicTreeUI basicTreeUI=(BasicTreeUI)aTree.getUI();
  Icon expandedIcon=basicTreeUI.getExpandedIcon();
  if (path != null && !treeModel.isLeaf(path.getLastPathComponent())) {
    int boxWidth;
    Insets i=aTree.getInsets();
    if (expandedIcon != null) {
      boxWidth=expandedIcon.getIconWidth();
    }
 else {
      boxWidth=8;
    }
    int boxLeftX=i != null ? i.left : 0;
    boolean leftToRight=aTree.getComponentOrientation().isLeftToRight();
    int depthOffset=getDepthOffset(aTree);
    int totalChildIndent=basicTreeUI.getLeftChildIndent() + basicTreeUI.getRightChildIndent();
    if (leftToRight) {
      boxLeftX+=((path.getPathCount() + depthOffset - 2) * totalChildIndent + basicTreeUI.getLeftChildIndent()) - boxWidth / 2;
    }
    int boxRightX=boxLeftX + boxWidth;
    return mouseX >= boxLeftX && mouseX <= boxRightX;
  }
  return false;
}
