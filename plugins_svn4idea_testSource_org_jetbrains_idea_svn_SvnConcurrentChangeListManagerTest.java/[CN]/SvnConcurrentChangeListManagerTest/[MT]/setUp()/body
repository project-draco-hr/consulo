{
  super.setUp();
  myDefaulListName=VcsBundle.message("changes.default.changlist.name");
  final MockAbstractVcs vcs=new MockAbstractVcs(myProject);
  myChangeProvider=new MockDelayingChangeProvider();
  vcs.setChangeProvider(myChangeProvider);
  final File mockVcsRoot=new File(myTempDirFixture.getTempDirPath(),"mock");
  mockVcsRoot.mkdir();
  final ProjectLevelVcsManagerImpl projectLevelVcsManager=(ProjectLevelVcsManagerImpl)ProjectLevelVcsManager.getInstance(myProject);
  projectLevelVcsManager.registerVcs(vcs);
  projectLevelVcsManager.setDirectoryMapping(mockVcsRoot.getAbsolutePath(),vcs.getName());
  projectLevelVcsManager.updateActiveVcss();
  AbstractVcs vcsFound=projectLevelVcsManager.findVcsByName(vcs.getName());
  Assert.assertEquals(1,projectLevelVcsManager.getRootsUnderVcs(vcsFound).length);
}
