{
  Presentation presentation=event.getPresentation();
  DataContext dataContext=event.getDataContext();
  Project project=DataKeys.PROJECT.getData(dataContext);
  presentation.setEnabled(false);
  if (project == null) {
    return;
  }
  final ToolWindowManager windowManager=ToolWindowManager.getInstance(project);
  if (windowManager.isEditorComponentActive()) {
    final FileEditorManagerEx editorManager=FileEditorManagerEx.getInstanceEx(project);
    EditorWindow currentWindow=(EditorWindow)dataContext.getData(DataConstantsEx.EDITOR_WINDOW);
    if (currentWindow == null) {
      editorManager.getCurrentWindow();
    }
    if (currentWindow != null) {
      final VirtualFile[] files=currentWindow.getFiles();
      presentation.setEnabled(files.length > 1);
    }
    return;
  }
  ContentManager contentManager=(ContentManager)dataContext.getData(DataConstantsEx.CONTENT_MANAGER);
  presentation.setEnabled(contentManager != null && contentManager.getContentCount() > 1);
}
