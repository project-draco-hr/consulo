{
  final Project project=location.getProject();
  final LinkedHashMap<String,Boolean> classes=new LinkedHashMap<String,Boolean>();
  myElements=collectPatternElements(context,classes);
  if (classes.isEmpty())   return null;
  RunnerAndConfigurationSettings settings=cloneTemplateConfiguration(project,context);
  final JUnitConfiguration configuration=(JUnitConfiguration)settings.getConfiguration();
  final JUnitConfiguration.Data data=configuration.getPersistentData();
  data.getPatterns().putAll(classes);
  data.TEST_OBJECT=JUnitConfiguration.TEST_PATTERN;
  data.setScope(setupPackageConfiguration(context,project,configuration,data.getScope()));
  configuration.setGeneratedName();
  RunConfigurationExtension.patchCreatedConfiguration(configuration);
  return settings;
}
