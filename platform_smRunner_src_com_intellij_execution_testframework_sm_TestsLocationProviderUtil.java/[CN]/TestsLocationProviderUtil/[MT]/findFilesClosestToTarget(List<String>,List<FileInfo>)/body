{
  if (candidates.isEmpty()) {
    return Collections.emptyList();
  }
  for (  String folderName : targetParentFolders) {
    for (    FileInfo info : candidates) {
      info.processRelativePathComponent(folderName);
    }
  }
  int maxProximity=0;
  for (  FileInfo fileInfo : candidates) {
    final int proximity=fileInfo.getProximity();
    if (proximity > maxProximity) {
      maxProximity=proximity;
    }
  }
  if (maxProximity >= MIN_PROXIMITY_TRESHOLD) {
    final List<VirtualFile> files=new ArrayList<VirtualFile>();
    for (    FileInfo info : candidates) {
      if (info.getProximity() == maxProximity) {
        files.add(info.getFile());
      }
    }
    return files;
  }
  return Collections.emptyList();
}
