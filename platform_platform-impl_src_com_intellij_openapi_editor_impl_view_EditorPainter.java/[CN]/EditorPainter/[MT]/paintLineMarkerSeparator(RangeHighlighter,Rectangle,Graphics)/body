{
  Color separatorColor=marker.getLineSeparatorColor();
  LineSeparatorRenderer lineSeparatorRenderer=marker.getLineSeparatorRenderer();
  if (separatorColor == null && lineSeparatorRenderer == null) {
    return;
  }
  int line=myDocument.getLineNumber(marker.getLineSeparatorPlacement() == SeparatorPlacement.TOP ? marker.getStartOffset() : marker.getEndOffset());
  int visualLine=myView.logicalToVisualPosition(new LogicalPosition(line + (marker.getLineSeparatorPlacement() == SeparatorPlacement.TOP ? 0 : 1),0),false).line;
  int y=myView.visualLineToY(visualLine) - 1;
  int startX=getMinX();
  int endX=clip.x + clip.width;
  if (isRightMarginShown()) {
    endX=Math.min(endX,getRightMarginX());
  }
  g.setColor(separatorColor);
  if (lineSeparatorRenderer != null) {
    lineSeparatorRenderer.drawLine(g,startX,endX,y);
  }
 else {
    UIUtil.drawLine(g,startX,y,endX,y);
  }
}
