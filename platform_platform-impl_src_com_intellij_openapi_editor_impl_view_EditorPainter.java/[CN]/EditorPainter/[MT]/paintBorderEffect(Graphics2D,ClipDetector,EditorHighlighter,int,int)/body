{
  HighlighterIterator it=highlighter.createIterator(clipStartOffset);
  while (!it.atEnd() && it.getStart() < clipEndOffset) {
    TextAttributes attributes=it.getTextAttributes();
    if (isBorder(attributes)) {
      paintBorderEffect(g,clipDetector,it.getStart(),it.getEnd(),attributes);
    }
    it.advance();
  }
}
