{
  PsiComment newComment;
  PsiElement comment=method.getFirstChild();
  if (comment != null && comment instanceof PsiComment) {
    String[] commentLines=comment.getText().split("\n");
    StringBuffer buf=new StringBuffer();
    for (int i=0; i < commentLines.length; i++) {
      String commentLine=commentLines[i];
      if (i == commentLines.length - 1) {
        buf.append(javaDocLine);
        buf.append(commentLine);
      }
 else {
        buf.append(commentLine);
        buf.append('\n');
      }
    }
    String commentString=buf.toString();
    newComment=factory.createCommentFromText(commentString,null);
    comment.replace(newComment);
  }
 else {
    String commentString;
    StringBuffer commentBuffer=new StringBuffer();
    commentBuffer.append("/**\n");
    commentBuffer.append(javaDocLine);
    commentBuffer.append('\n');
    commentBuffer.append(" */");
    commentString=commentBuffer.toString();
    newComment=factory.createCommentFromText(commentString,null);
    method.addBefore(newComment,comment);
  }
}
