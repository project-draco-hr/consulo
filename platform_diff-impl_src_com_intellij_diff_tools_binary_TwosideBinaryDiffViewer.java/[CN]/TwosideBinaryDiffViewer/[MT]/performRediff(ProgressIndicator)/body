{
  try {
    indicator.checkCanceled();
    List<DiffContent> contents=myRequest.getContents();
    if (!(contents.get(0) instanceof FileContent) || !(contents.get(1) instanceof FileContent)) {
      return applyNotification(null);
    }
    final VirtualFile file1=((FileContent)contents.get(0)).getFile();
    final VirtualFile file2=((FileContent)contents.get(1)).getFile();
    final JComponent notification=ApplicationManager.getApplication().runReadAction(new Computable<JComponent>(){
      @Override public JComponent compute(){
        if (!file1.isValid() || !file2.isValid()) {
          return DiffNotifications.createError();
        }
        try {
          byte[] bytes1=file1.contentsToByteArray();
          byte[] bytes2=file2.contentsToByteArray();
          return Arrays.equals(bytes1,bytes2) ? DiffNotifications.createEqualContents() : null;
        }
 catch (        IOException e) {
          LOG.warn(e);
          return null;
        }
      }
    }
);
    return applyNotification(notification);
  }
 catch (  ProcessCanceledException e) {
    throw e;
  }
catch (  Throwable e) {
    LOG.error(e);
    return applyNotification(DiffNotifications.createError());
  }
}
