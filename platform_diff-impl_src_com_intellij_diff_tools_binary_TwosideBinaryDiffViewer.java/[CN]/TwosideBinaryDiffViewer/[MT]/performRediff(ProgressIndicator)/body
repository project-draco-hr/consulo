{
  try {
    indicator.checkCanceled();
    List<DiffContent> contents=myRequest.getContents();
    if (!(contents.get(0) instanceof FileContent) || !(contents.get(1) instanceof FileContent)) {
      return applyNotification(null);
    }
    final VirtualFile file1=((FileContent)contents.get(0)).getFile();
    final VirtualFile file2=((FileContent)contents.get(1)).getFile();
    if (!file1.isValid() || !file2.isValid()) {
      return applyNotification(DiffNotifications.ERROR);
    }
    final boolean equal=ApplicationManager.getApplication().runReadAction(new Computable<Boolean>(){
      @Override public Boolean compute(){
        try {
          byte[] bytes1=file1.contentsToByteArray();
          byte[] bytes2=file2.contentsToByteArray();
          return Arrays.equals(bytes1,bytes2);
        }
 catch (        IOException e) {
          LOG.warn(e);
          return false;
        }
      }
    }
);
    return applyNotification(equal ? DiffNotifications.EQUAL_CONTENTS : null);
  }
 catch (  ProcessCanceledException e) {
    throw e;
  }
catch (  Throwable e) {
    LOG.error(e);
    return applyNotification(DiffNotifications.ERROR);
  }
}
