{
  final Collection<ClassRepr> addedClasses=state.myClassDiff.added();
  if (addedClasses.isEmpty()) {
    return;
  }
  debug("Processing added classes:");
  if (!myEasyMode && myFilter != null) {
    for (    ClassRepr c : addedClasses) {
      if (!c.isLocal() && !c.isAnonymous() && isEmpty(c.getOuterClassName())) {
        final File currentlyMappedTo=myClassToSourceFile.get(c.name);
        if (currentlyMappedTo != null && !FileUtil.filesEqual(currentlyMappedTo,srcFile) && currentlyMappedTo.exists() && myFilter.belongsToCurrentChunk(currentlyMappedTo)) {
          debug("Scheduling for recompilation duplicated sources: ",currentlyMappedTo.getPath() + "; " + srcFile.getPath());
          myAffectedFiles.add(currentlyMappedTo);
          myAffectedFiles.add(srcFile);
          myCompiledFiles.remove(srcFile);
          return;
        }
        break;
      }
    }
  }
  for (  final ClassRepr c : addedClasses) {
    debug("Class name: ",c.name);
    myDelta.addChangedClass(c.name);
    for (    final int sup : c.getSupers()) {
      myDelta.registerAddedSuperClass(c.name,sup);
    }
    if (!myEasyMode) {
      final TIntHashSet depClasses=myClassToClassDependency.get(c.name);
      if (depClasses != null) {
        depClasses.forEach(new TIntProcedure(){
          @Override public boolean execute(          int depClass){
            final File fName=myClassToSourceFile.get(depClass);
            if (fName != null) {
              if (myFilter == null || myFilter.accept(fName)) {
                debug("Adding dependent file ",fName);
                myAffectedFiles.add(fName);
              }
            }
            return true;
          }
        }
);
      }
    }
  }
  debug("End of added classes processing.");
}
