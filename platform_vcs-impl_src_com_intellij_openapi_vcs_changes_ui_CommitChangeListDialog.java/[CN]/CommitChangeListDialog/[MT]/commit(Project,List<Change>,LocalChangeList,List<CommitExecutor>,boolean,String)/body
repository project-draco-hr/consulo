{
  final AbstractVcs[] allActiveVcss=ProjectLevelVcsManager.getInstance(project).getAllActiveVcss();
  final List<VcsCheckinHandlerFactory> factoryList=CheckinHandlersManager.getInstance().getMatchingVcsFactories(Arrays.<AbstractVcs>asList(allActiveVcss));
  for (  BaseCheckinHandlerFactory factory : factoryList) {
    final BeforeCheckinDialogHandler handler=factory.createSystemReadyHandler(project);
    if (handler != null && !handler.beforeCommitDialogShownCallback(Collections.unmodifiableList(executors),showVcsCommit)) {
      return false;
    }
  }
  final ChangeListManager manager=ChangeListManager.getInstance(project);
  final LocalChangeList defaultList=manager.getDefaultChangeList();
  final ArrayList<LocalChangeList> changeLists=new ArrayList<LocalChangeList>(manager.getChangeListsCopy());
  CommitChangeListDialog dialog=new CommitChangeListDialog(project,changes,initialSelection,executors,showVcsCommit,defaultList,changeLists,null,false,comment);
  if (!ApplicationManager.getApplication().isUnitTestMode()) {
    dialog.show();
  }
 else {
    dialog.doOKAction();
  }
  return dialog.isOK();
}
