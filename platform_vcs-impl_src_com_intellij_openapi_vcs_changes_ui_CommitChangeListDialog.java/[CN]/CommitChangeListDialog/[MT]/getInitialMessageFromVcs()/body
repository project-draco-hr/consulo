{
  final List<Change> list=getIncludedChanges();
  final Ref<String> result=new Ref<String>();
  ChangesUtil.processChangesByVcs(myProject,list,new ChangesUtil.PerVcsProcessor<Change>(){
    @Override public void process(    final AbstractVcs vcs,    final List<Change> items){
      if (result.isNull()) {
        CheckinEnvironment checkinEnvironment=vcs.getCheckinEnvironment();
        if (checkinEnvironment != null) {
          final Collection<FilePath> paths=ChangesUtil.getPaths(items);
          String defaultMessage=checkinEnvironment.getDefaultMessageFor(paths.toArray(new FilePath[paths.size()]));
          if (defaultMessage != null) {
            result.set(defaultMessage);
          }
        }
      }
    }
  }
);
  return result.get();
}
