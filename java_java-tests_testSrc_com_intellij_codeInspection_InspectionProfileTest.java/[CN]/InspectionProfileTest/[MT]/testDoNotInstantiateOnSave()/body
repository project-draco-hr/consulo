{
  InspectionProfileImpl profile=new InspectionProfileImpl("profile");
  profile.setBaseProfile(InspectionProfileImpl.getDefaultProfile());
  assertEquals(0,countInitializedTools(profile));
  InspectionProfileEntry[] tools=profile.getInspectionTools(null);
  assertTrue(tools.length > 0);
  InspectionProfileEntry tool=tools[0];
  String id=tool.getShortName();
  System.out.println(id);
  if (profile.isToolEnabled(HighlightDisplayKey.findById(id))) {
    profile.disableTool(id);
  }
 else {
    profile.enableTool(id);
  }
  assertEquals(0,countInitializedTools(profile));
  profile.writeExternal(new Element("profile"));
  List<InspectionProfileEntry> initializedTools=getInitializedTools(profile);
  if (initializedTools.size() != 1) {
    for (    InspectionProfileEntry initializedTool : initializedTools) {
      System.out.println(initializedTool.getShortName());
      ((InspectionToolWrapper)initializedTool).instantated.printStackTrace();
    }
    fail();
  }
}
