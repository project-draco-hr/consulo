{
  Component component=(Component)dataContext.getData(DataConstantsEx.CONTEXT_COMPONENT);
  final String packageFQName=directory != null && directory.getPackage() != null ? directory.getPackage().getQualifiedName() : null;
  final GenerateJavadocDialog dialog=new GenerateJavadocDialog(packageFQName,myProject,myConfiguration);
  dialog.reset();
  dialog.show();
  if (!dialog.isOK()) {
    return;
  }
  if (component != null) {
    dataContext=DataManager.getInstance().getDataContext(component);
  }
 else {
    dataContext=MapDataContext.singleData(DataConstants.PROJECT,myProject);
  }
  myConfiguration.setGenerationOptions(new JavadocConfiguration.GenerationOptions(packageFQName,directory,dialog.isGenerationForPackage(),dialog.isGenerationWithSubpackages()));
  try {
    RunStrategy.getInstance().executeDefault(myConfiguration,dataContext);
  }
 catch (  ExecutionException e) {
    ExecutionUtil.showExecutionErrorMessage(e,"Error",myProject);
  }
}
