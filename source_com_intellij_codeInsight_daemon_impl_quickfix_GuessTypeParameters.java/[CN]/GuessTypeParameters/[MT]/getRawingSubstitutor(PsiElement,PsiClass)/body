{
  if (context == null || targetClass == null)   return PsiSubstitutor.EMPTY;
  PsiTypeParameterListOwner currContext=PsiTreeUtil.getParentOfType(context,PsiTypeParameterListOwner.class);
  PsiManager manager=context.getManager();
  PsiSubstitutor substitutor=PsiSubstitutor.EMPTY;
  while (currContext != null && !manager.areElementsEquivalent(currContext,targetClass)) {
    PsiTypeParameterList typeParameterList=currContext.getTypeParameterList();
    if (typeParameterList == null)     break;
    PsiTypeParameter[] typeParameters=typeParameterList.getTypeParameters();
    for (int i=0; i < typeParameters.length; i++) {
      substitutor=substitutor.put(typeParameters[i],null);
    }
    currContext=currContext.getContainingClass();
  }
  return substitutor;
}
