{
  final VirtualFile virtualFile=notificationData.getFilePath() != null ? ExternalSystemUtil.waitForTheFile(notificationData.getFilePath()) : null;
  final String groupName=virtualFile != null ? virtualFile.getPresentableUrl() : notificationData.getTitle();
  myMessageCounter.increment(groupName,notificationData.getNotificationSource(),notificationData.getNotificationCategory(),externalSystemId);
  int line=notificationData.getLine() - 1;
  int column=notificationData.getColumn() - 1;
  if (virtualFile == null)   line=column=-1;
  final int guiLine=line < 0 ? -1 : line + 1;
  final int guiColumn=column < 0 ? 0 : column + 1;
  final Navigatable navigatable=notificationData.getNavigatable() != null ? notificationData.getNavigatable() : virtualFile != null ? new OpenFileDescriptor(myProject,virtualFile,line,column) : null;
  final ErrorTreeElementKind kind=ErrorTreeElementKind.convertMessageFromCompilerErrorType(notificationData.getNotificationCategory().getMessageCategory());
  final String[] message=notificationData.getMessage().split("\n");
  final String exportPrefix=NewErrorTreeViewPanel.createExportPrefix(guiLine);
  final String rendererPrefix=NewErrorTreeViewPanel.createRendererPrefix(guiLine,guiColumn);
  UIUtil.invokeLaterIfNeeded(new Runnable(){
    @Override public void run(){
      boolean activate=notificationData.getNotificationCategory() == NotificationCategory.ERROR || notificationData.getNotificationCategory() == NotificationCategory.WARNING;
      final NewErrorTreeViewPanel errorTreeView=prepareMessagesView(externalSystemId,notificationData.getNotificationSource(),activate);
      final GroupingElement groupingElement=errorTreeView.getErrorViewStructure().getGroupingElement(groupName,null,virtualFile);
      final NavigatableMessageElement navigatableMessageElement;
      if (notificationData.hasLinks()) {
        navigatableMessageElement=new EditableNotificationMessageElement(notification,kind,groupingElement,message,navigatable,exportPrefix,rendererPrefix);
      }
 else {
        navigatableMessageElement=new NotificationMessageElement(kind,groupingElement,message,navigatable,exportPrefix,rendererPrefix);
      }
      errorTreeView.getErrorViewStructure().addNavigatableMessage(groupName,navigatableMessageElement);
      errorTreeView.updateTree();
    }
  }
);
}
