{
  myApplication.assertReadAccessAllowed();
  if ((!myProject.isOpen()) || myProject.isDisposed())   return;
  final Document document=FileDocumentManager.getInstance().getCachedDocument(virtualFile);
  if (document == null) {
    log("Skipping resetTracker() because no cached document for " + virtualFile.getPath());
    return;
  }
  log("resetting tracker for file " + virtualFile.getPath());
  final boolean editorOpened=myFileEditorManager.isFileOpen(virtualFile);
  final boolean shouldBeInstalled=shouldBeInstalled(virtualFile) && editorOpened;
synchronized (myLock) {
    final LineStatusTracker tracker=myLineStatusTrackers.get(document);
    if (tracker == null && (!shouldBeInstalled))     return;
    if (tracker != null) {
      releaseTracker(document);
    }
    if (shouldBeInstalled) {
      installTracker(virtualFile,document);
    }
  }
}
