{
  final Semaphore semaphore=new Semaphore();
  final ExecutionException[] exception=new ExecutionException[1];
  myDebugProcessDispatcher.addListener(new DebugProcessAdapter(){
    public void connectorIsReady(){
      semaphore.up();
      myDebugProcessDispatcher.removeListener(this);
    }
  }
);
  final long time=System.currentTimeMillis();
  this.getManagerThread().invokeLater(new DebuggerCommandImpl(){
    protected void action(){
      VirtualMachine vm=null;
      try {
        while (System.currentTimeMillis() - time < LOCAL_START_TIMEOUT) {
          try {
            vm=createVirtualMachineInt();
            break;
          }
 catch (          ExecutionException e) {
            if (pollConnection && !myConnection.isServerMode() && e.getCause() instanceof IOException) {
synchronized (this) {
                try {
                  wait(500);
                }
 catch (                InterruptedException ie) {
                  break;
                }
              }
            }
 else {
              exception[0]=e;
              break;
            }
          }
        }
      }
  finally {
        semaphore.up();
      }
      if (vm != null) {
        final VirtualMachine vm1=vm;
        afterProcessStarted(new Runnable(){
          public void run(){
            getManagerThread().invokeLater(new DebuggerCommandImpl(){
              protected void action() throws Exception {
                commitVM(vm1);
              }
            }
);
          }
        }
);
      }
    }
  }
);
  semaphore.down();
  semaphore.waitFor();
  if (exception[0] != null)   throw exception[0];
}
