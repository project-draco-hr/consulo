{
  if (initLaf) {
    initLaf();
  }
  val downloadDialog=new CustomizeDownloadDialog();
  ApplicationManager.getApplication().executeOnPooledThread(new Runnable(){
    @Override public void run(){
      val pluginDescriptors=new MultiMap<String,IdeaPluginDescriptor>();
      val predefinedTemplateSets=new MultiMap<String,String>();
      try {
        List<IdeaPluginDescriptor> ideaPluginDescriptors=RepositoryHelper.loadPluginsFromRepository(null);
        for (        IdeaPluginDescriptor ideaPluginDescriptor : ideaPluginDescriptors) {
          pluginDescriptors.putValue(ideaPluginDescriptor.getCategory(),ideaPluginDescriptor);
        }
        loadPredefinedTemplateSets(predefinedTemplateSets);
      }
 catch (      Exception e) {
        CustomizeUtil.LOGGER.warn(e);
      }
      UIUtil.invokeLaterIfNeeded(new Runnable(){
        @Override public void run(){
          downloadDialog.close(0);
          new CustomizeIDEWizardDialog(pluginDescriptors,predefinedTemplateSets).show();
        }
      }
);
    }
  }
);
  downloadDialog.show();
}
