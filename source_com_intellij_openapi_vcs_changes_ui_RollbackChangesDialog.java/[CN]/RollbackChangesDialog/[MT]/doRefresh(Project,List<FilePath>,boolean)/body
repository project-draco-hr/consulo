{
  final LocalHistoryAction action=LocalHistory.startAction(project,VcsBundle.message("changes.action.rollback.text"));
  VirtualFileManager.getInstance().refresh(asynchronous,new Runnable(){
    public void run(){
      action.finish();
      if (!project.isDisposed()) {
        for (        FilePath path : pathsToRefresh) {
          VcsDirtyScopeManager.getInstance(project).fileDirty(path);
        }
      }
    }
  }
);
}
