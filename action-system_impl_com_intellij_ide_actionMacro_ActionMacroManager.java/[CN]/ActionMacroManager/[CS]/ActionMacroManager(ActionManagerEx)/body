{
  myActionManager=actionManagerEx;
  myActionManager.addAnActionListener(new AnActionListener(){
    public void beforeActionPerformed(    AnAction action,    DataContext dataContext){
      if (myIsRecording) {
        String id=myActionManager.getId(action);
        if (id != null && !"StartStopMacroRecording".equals(id)) {
          myRecordingMacro.appendAction(id);
        }
      }
    }
    public void beforeEditorTyping(    char c,    DataContext dataContext){
      if (myIsRecording) {
        myRecordingMacro.appendKeytyped(c);
      }
    }
    public void afterActionPerformed(    final AnAction action,    final DataContext dataContext){
    }
  }
);
}
