{
  final ArrayList<String> result=new ArrayList<String>();
  final ActionManager actionManager=ActionManager.getInstance();
  collectActionNames(null,result,(ActionGroup)actionManager.getActionOrStub(IdeActions.GROUP_MAIN_MENU));
  if (checkBoxState) {
    final Set<String> ids=((ActionManagerImpl)actionManager).getActionIds();
    for (    String id : ids) {
      final AnAction anAction=actionManager.getAction(id);
      if (!(anAction instanceof ActionGroup) && ActionsTreeUtil.isActionFiltered(null,true).value(anAction)) {
        result.add(anAction.getTemplatePresentation().getText());
      }
    }
  }
  return result.toArray(new String[result.size()]);
}
