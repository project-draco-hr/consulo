{
  context.setAddCompletionChar(false);
  final Editor editor=context.getEditor();
  final char completionChar=context.getCompletionChar();
  TailType tailType=getTailType(item,editor,completionChar);
  if (tailType == null) {
    tailType=LookupItem.handleCompletionChar(editor,item,completionChar);
  }
  final int tailOffset;
  try {
    tailOffset=handleInsert(editor,context.getStartOffset(),item,context.getElements(),tailType,completionChar);
  }
 catch (  IncorrectOperationException e) {
    throw new RuntimeException(e);
  }
  tailType.processTail(editor,tailOffset);
  editor.getScrollingModel().scrollToCaret(ScrollType.RELATIVE);
}
