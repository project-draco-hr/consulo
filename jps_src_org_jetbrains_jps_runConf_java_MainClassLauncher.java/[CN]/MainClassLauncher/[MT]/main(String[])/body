{
  if (args.length < 4) {
    return;
  }
  String className=args[0];
  String testRunnerCp=args[1];
  String testsRuntimeCp=args[2];
  String tempArgsFileName=args[3];
  URL[] testsRuntimeClasspath=getClasspathElems(testsRuntimeCp);
  URL[] tcRuntimeClasspath=getClasspathElems(testRunnerCp);
  List<String> arguments=getArguments(tempArgsFileName);
  System.out.println("Runtime classpath: " + Arrays.asList(testsRuntimeClasspath));
  ClassLoader testsRuntimeClassloader=new URLClassLoader(testsRuntimeClasspath,null);
  ClassLoader mainClassLoader=new MainClassClassLoader(tcRuntimeClasspath,testsRuntimeClassloader);
  Class<?> main=mainClassLoader.loadClass(className);
  Method mainMethod=main.getMethod("main",String[].class);
  Thread.currentThread().setContextClassLoader(testsRuntimeClassloader);
  try {
    mainMethod.invoke(null,new Object[]{arguments.toArray(new String[arguments.size()])});
  }
 catch (  Throwable e) {
    throw new RuntimeException("Exception occurred in TeamCity tests launcher: " + main.getName() + ", error: "+ e.toString(),e);
  }
}
