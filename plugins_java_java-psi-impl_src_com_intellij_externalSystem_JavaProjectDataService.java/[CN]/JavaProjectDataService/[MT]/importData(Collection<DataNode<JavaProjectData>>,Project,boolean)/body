{
  if (!ExternalSystemApiUtil.isNewProjectConstruction()) {
    return;
  }
  if (toImport.size() != 1) {
    throw new IllegalArgumentException(String.format("Expected to get a single project but got %d: %s",toImport.size(),toImport));
  }
  JavaProjectData projectData=toImport.iterator().next().getData();
  JavaSdkVersion version=projectData.getJdkVersion();
  JavaSdk javaSdk=JavaSdk.getInstance();
  ProjectRootManager rootManager=ProjectRootManager.getInstance(project);
  Sdk sdk=rootManager.getProjectSdk();
  if (sdk instanceof JavaSdk) {
    JavaSdkVersion currentVersion=javaSdk.getVersion(sdk);
    if (currentVersion == null || !currentVersion.isAtLeast(version)) {
      Sdk newJdk=findJdk(version);
      if (newJdk != null) {
        rootManager.setProjectSdk(sdk);
        LanguageLevel level=version.getMaxLanguageLevel();
        LanguageLevelProjectExtension ext=LanguageLevelProjectExtension.getInstance(project);
        if (level.compareTo(ext.getLanguageLevel()) < 0) {
          ext.setLanguageLevel(level);
        }
      }
    }
  }
  setLanguageLevel(projectData.getLanguageLevel(),project,synchronous);
}
