{
  myTextComponent=textComponent;
  myUndoableEditListener=new UndoableEditListener(){
    public void undoableEditHappened(    UndoableEditEvent e){
      myUndoManager.addEdit(e.getEdit());
    }
  }
;
  myTextComponent.getDocument().addUndoableEditListener(myUndoableEditListener);
  com.intellij.openapi.keymap.Keymap activeKeymap=KeymapManager.getInstance().getActiveKeymap();
  Shortcut[] undoShortcuts=activeKeymap.getShortcuts(IdeActions.ACTION_UNDO);
  Shortcut[] redoShortcuts=activeKeymap.getShortcuts(IdeActions.ACTION_REDO);
  AnAction undoAction=new AnAction(){
    @Override public void update(    AnActionEvent e){
      super.update(e);
      e.getPresentation().setEnabled(canUndo());
    }
    @Override public void actionPerformed(    AnActionEvent e){
      undo();
    }
  }
;
  AnAction redoAction=new AnAction(){
    @Override public void update(    AnActionEvent e){
      super.update(e);
      e.getPresentation().setEnabled(canRedo());
    }
    @Override public void actionPerformed(    AnActionEvent e){
      redo();
    }
  }
;
  undoAction.registerCustomShortcutSet(new CustomShortcutSet(undoShortcuts),myTextComponent);
  redoAction.registerCustomShortcutSet(new CustomShortcutSet(redoShortcuts),myTextComponent);
}
