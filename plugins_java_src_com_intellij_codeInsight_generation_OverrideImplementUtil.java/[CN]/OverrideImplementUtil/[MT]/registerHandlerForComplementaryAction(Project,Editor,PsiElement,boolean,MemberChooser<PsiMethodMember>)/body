{
  final JComponent preferredFocusedComponent=chooser.getPreferredFocusedComponent();
  final Keymap keymap=KeymapManager.getInstance().getActiveKeymap();
  @NonNls final String s=toImplement ? "OverrideMethods" : "ImplementMethods";
  final Shortcut[] shortcuts=keymap.getShortcuts(s);
  if (shortcuts.length > 0 && shortcuts[0] instanceof KeyboardShortcut) {
    preferredFocusedComponent.getInputMap().put(((KeyboardShortcut)shortcuts[0]).getFirstKeyStroke(),s);
    preferredFocusedComponent.getActionMap().put(s,new AbstractAction(){
      @Override public void actionPerformed(      final ActionEvent e){
        chooser.close(DialogWrapper.CANCEL_EXIT_CODE);
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            final CodeInsightActionHandler handler=toImplement ? new OverrideMethodsHandler() : new ImplementMethodsHandler();
            handler.invoke(project,editor,aClass.getContainingFile());
          }
        }
);
      }
    }
);
  }
}
