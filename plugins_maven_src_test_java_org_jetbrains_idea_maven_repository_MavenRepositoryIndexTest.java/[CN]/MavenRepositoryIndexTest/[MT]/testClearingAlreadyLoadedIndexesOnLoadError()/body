{
  myIndex.add(new MavenRepositoryInfo("local1",myDataTestFixture.getTestDataPath("local2"),false));
  myIndex.add(new MavenRepositoryInfo("local2",myDataTestFixture.getTestDataPath("local2"),false));
  myIndex.save();
  shutdownIndex();
  File listFile=new File(myIndexDir,MavenRepositoryIndex.INDICES_LIST_FILE);
  byte[] bytes=FileUtil.loadFileBytes(listFile);
  for (int i=bytes.length / 2; i < bytes.length; i++) {
    bytes[i]=0;
  }
  FileOutputStream s=new FileOutputStream(listFile);
  s.write(bytes);
  s.close();
  initIndex();
  try {
    myIndex.load();
    fail("must has thrown an exception");
  }
 catch (  MavenRepositoryException e) {
  }
  assertTrue(myIndex.getInfos().isEmpty());
  assertFalse(myIndexDir.exists());
}
