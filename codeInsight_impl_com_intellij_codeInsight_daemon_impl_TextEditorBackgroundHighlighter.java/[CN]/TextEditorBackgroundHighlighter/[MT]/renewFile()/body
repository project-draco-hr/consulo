{
  if (myFile == null || !myFile.isValid()) {
    myFile=PsiDocumentManager.getInstance(myProject).getPsiFile(myDocument);
    if (myFile != null) {
      LOG.assertTrue(myFile.isValid());
    }
    myCompiled=myFile instanceof PsiCompiledElement;
    if (myCompiled) {
      myFile=(PsiFile)((PsiCompiledElement)myFile).getMirror();
    }
  }
}
