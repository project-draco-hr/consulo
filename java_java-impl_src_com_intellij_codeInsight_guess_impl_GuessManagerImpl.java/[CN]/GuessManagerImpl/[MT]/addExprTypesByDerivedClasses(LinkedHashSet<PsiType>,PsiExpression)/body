{
  PsiType type=expr.getType();
  if (!(type instanceof PsiClassType))   return;
  PsiClass refClass=PsiUtil.resolveClassInType(type);
  if (refClass == null)   return;
  PsiManager manager=PsiManager.getInstance(myProject);
  PsiElementProcessor.CollectElementsWithLimit<PsiClass> processor=new PsiElementProcessor.CollectElementsWithLimit<PsiClass>(5);
  ClassInheritorsSearch.search(refClass,refClass.getUseScope(),true).forEach(new PsiElementProcessorAdapter<PsiClass>(processor));
  if (processor.isOverflow())   return;
  for (  PsiClass derivedClass : processor.getCollection()) {
    if (derivedClass instanceof PsiAnonymousClass)     continue;
    PsiType derivedType=JavaPsiFacade.getInstance(manager.getProject()).getElementFactory().createType(derivedClass);
    set.add(derivedType);
  }
}
