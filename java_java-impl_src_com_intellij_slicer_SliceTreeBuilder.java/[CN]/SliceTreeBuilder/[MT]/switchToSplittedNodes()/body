{
  final SliceRootNode root=(SliceRootNode)getRootNode().getUserObject();
  Collection<PsiElement> leaves=calcLeafExpressions(root);
  if (leaves == null)   return;
  if (leaves.isEmpty()) {
    Messages.showErrorDialog("Unable to find leaf expressions to group by","Cannot group");
    return;
  }
  root.setChanged();
  root.restructureByLeaves(leaves);
  root.setChanged();
  splitByLeafExpressions=true;
  root.targetEqualUsages.clear();
  getUpdater().cancelAllRequests();
  getUpdater().addSubtreeToUpdateByElement(root);
}
