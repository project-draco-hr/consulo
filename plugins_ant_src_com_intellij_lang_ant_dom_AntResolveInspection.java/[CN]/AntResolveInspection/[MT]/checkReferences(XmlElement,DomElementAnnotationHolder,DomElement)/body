{
  if (xmlElement == null) {
    return;
  }
  Set<PsiReference> processed=null;
  for (  final PsiReference ref : xmlElement.getReferences()) {
    if (!(ref instanceof AntDomReference)) {
      continue;
    }
    final AntDomReference antDomRef=(AntDomReference)ref;
    if (antDomRef.shouldBeSkippedByAnnotator()) {
      continue;
    }
    if (processed != null && processed.contains(ref)) {
      continue;
    }
    if (ref.resolve() == null) {
      holder.createProblem(domElement,ProblemHighlightType.LIKE_UNKNOWN_SYMBOL,antDomRef.getUnresolvedMessagePattern(),ref.getRangeInElement());
      if (ref instanceof AntDomFileReference) {
        if (processed == null) {
          processed=new HashSet<PsiReference>();
        }
        ContainerUtil.addAll(processed,((AntDomFileReference)ref).getFileReferenceSet().getAllReferences());
      }
    }
  }
}
