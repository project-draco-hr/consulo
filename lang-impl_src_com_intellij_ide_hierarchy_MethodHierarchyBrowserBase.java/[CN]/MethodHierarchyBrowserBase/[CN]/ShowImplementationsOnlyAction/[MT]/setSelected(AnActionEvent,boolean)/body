{
  HierarchyBrowserManager.getInstance(myProject).getState().HIDE_CLASSES_WHERE_METHOD_NOT_IMPLEMENTED=flag;
  final Object[] storedInfo=new Object[1];
  if (myCurrentViewName != null) {
    final HierarchyTreeBuilder builder=myBuilders.get(myCurrentViewName);
    storedInfo[0]=builder.storeExpandedAndSelectedInfo();
  }
  final PsiElement element=mySmartPsiElementPointer.getElement();
  if (!isApplicableElement(element)) {
    return;
  }
  final String[] name=new String[]{myCurrentViewName};
  dispose();
  setHierarchyBase(element);
  validate();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      changeView(name[0]);
      if (storedInfo != null) {
        final HierarchyTreeBuilder builder=myBuilders.get(myCurrentViewName);
        builder.restoreExpandedAndSelectedInfo(storedInfo[0]);
      }
    }
  }
);
}
