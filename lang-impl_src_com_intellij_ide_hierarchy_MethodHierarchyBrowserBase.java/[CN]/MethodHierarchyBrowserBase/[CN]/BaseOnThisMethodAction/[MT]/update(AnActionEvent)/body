{
  final Presentation presentation=event.getPresentation();
  registerCustomShortcutSet(ActionManager.getInstance().getAction(IdeActions.ACTION_METHOD_HIERARCHY).getShortcutSet(),null);
  final DataContext dataContext=event.getDataContext();
  final MethodHierarchyBrowserBase browser=(MethodHierarchyBrowserBase)dataContext.getData(METHOD_HIERARCHY_BROWSER_DATA_CONSTANT);
  if (browser == null) {
    presentation.setVisible(false);
    presentation.setEnabled(false);
    return;
  }
  final PsiElement selectedElement=browser.getSelectedElement();
  if (!isApplicableElement(selectedElement)) {
    presentation.setEnabled(false);
    presentation.setVisible(false);
    return;
  }
  presentation.setVisible(true);
  if (!selectedElement.equals(browser.mySmartPsiElementPointer.getElement()) && selectedElement.isValid()) {
    presentation.setEnabled(true);
  }
 else {
    presentation.setEnabled(false);
  }
}
