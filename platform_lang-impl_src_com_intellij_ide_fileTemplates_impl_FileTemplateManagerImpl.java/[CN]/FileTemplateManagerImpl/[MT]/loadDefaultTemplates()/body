{
  final Set<URL> processedUrls=new HashSet<URL>();
  for (  PluginDescriptor plugin : PluginManager.getPlugins()) {
    if (plugin instanceof IdeaPluginDescriptorImpl && ((IdeaPluginDescriptorImpl)plugin).isEnabled()) {
      final ClassLoader loader=plugin.getPluginClassLoader();
      if (loader instanceof PluginClassLoader && ((PluginClassLoader)loader).getUrls().isEmpty()) {
        continue;
      }
      try {
        final Enumeration<URL> systemResources=loader.getResources(DEFAULT_TEMPLATES_ROOT);
        if (systemResources != null && systemResources.hasMoreElements()) {
          while (systemResources.hasMoreElements()) {
            final URL url=systemResources.nextElement();
            if (processedUrls.contains(url)) {
              continue;
            }
            processedUrls.add(url);
            loadDefaultsFromRoot(url);
          }
        }
      }
 catch (      IOException e) {
        LOG.error(e);
      }
    }
  }
}
