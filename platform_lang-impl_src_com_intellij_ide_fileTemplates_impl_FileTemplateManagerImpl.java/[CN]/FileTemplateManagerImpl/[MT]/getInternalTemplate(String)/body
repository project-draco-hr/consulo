{
  LOG.assertTrue(myInternalTemplatesManager != null);
  FileTemplateBase template=myInternalTemplatesManager.findTemplateByName(templateName);
  if (template == null) {
    template=myDefaultTemplatesManager.findTemplateByName(templateName);
  }
  if (template == null) {
    template=(FileTemplateBase)getJ2eeTemplate(templateName);
    if (template != null) {
      template.setReformatCode(true);
    }
 else {
      final String text=normalizeText(getDefaultClassTemplateText(templateName));
      template=myInternalTemplatesManager.addTemplate(templateName,"java");
      template.setText(text);
      myInternalTemplatesManager.saveTemplates();
    }
  }
  return template;
}
