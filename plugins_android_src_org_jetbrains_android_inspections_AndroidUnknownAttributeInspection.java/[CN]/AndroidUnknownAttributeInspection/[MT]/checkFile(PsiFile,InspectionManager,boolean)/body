{
  if (!(file instanceof XmlFile)) {
    return ProblemDescriptor.EMPTY_ARRAY;
  }
  AndroidFacet facet=AndroidFacet.getInstance(file);
  if (facet == null) {
    return ProblemDescriptor.EMPTY_ARRAY;
  }
  if (isMyFile(facet,file)) {
    MyVisitor visitor=new MyVisitor(facet,manager,isOnTheFly);
    file.accept(visitor);
    return visitor.myResult.toArray(new ProblemDescriptor[visitor.myResult.size()]);
  }
  return ProblemDescriptor.EMPTY_ARRAY;
}
