{
  ASTNode treeElement=getTreeElement();
  if (treeElement != null) {
    ASTNode parent=treeElement.getTreeParent();
    while (true) {
      if (parent instanceof RepositoryTreeElement) {
        return SourceTreeToPsiMap.treeElementToPsi(parent);
      }
      parent=parent.getTreeParent();
    }
  }
 else {
synchronized (PsiLock.LOCK) {
      return getRepositoryElementsManager().findOrCreatePsiElementById(getParentId());
    }
  }
}
