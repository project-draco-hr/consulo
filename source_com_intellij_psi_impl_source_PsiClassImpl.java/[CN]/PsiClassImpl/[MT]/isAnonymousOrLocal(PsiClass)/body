{
  if (aClass instanceof PsiAnonymousClass)   return true;
  final PsiClassStub stub=((PsiClassImpl)aClass).getStub();
  if (stub != null) {
    final StubElement parentStub=stub.getParentStub();
    return !(parentStub instanceof PsiClassStub || parentStub instanceof PsiFileStub);
  }
  PsiElement parent=aClass.getParent();
  while (parent != null) {
    if (parent instanceof PsiMethod || parent instanceof PsiField || parent instanceof PsiClassInitializer)     return true;
    if (parent instanceof PsiClass || parent instanceof PsiFile)     return false;
    parent=parent.getParent();
  }
  return false;
}
