{
  String qName=myCachedQName;
  if (qName == null) {
    if (getTreeElement() != null) {
      PsiElement parent=getParent();
      if (parent instanceof PsiJavaFile) {
        String packageName=((PsiJavaFile)parent).getPackageName();
        if (packageName.length() > 0) {
          qName=packageName + "." + getName();
        }
 else {
          qName=getName();
        }
      }
 else       if (parent instanceof PsiClass) {
        String parentQName=((PsiClass)parent).getQualifiedName();
        if (parentQName == null)         return null;
        qName=parentQName + "." + getName();
      }
    }
 else {
      qName=getRepositoryManager().getClassView().getQualifiedName(getRepositoryId());
    }
    myCachedQName=qName;
  }
  return qName;
}
