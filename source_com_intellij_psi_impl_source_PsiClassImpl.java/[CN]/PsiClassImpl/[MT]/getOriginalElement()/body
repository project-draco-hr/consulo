{
  PsiFile psiFile=getContainingFile();
  VirtualFile vFile=psiFile.getVirtualFile();
  final ProjectFileIndex idx=ProjectRootManager.getInstance(myManager.getProject()).getFileIndex();
  if (!idx.isInLibrarySource(vFile))   return this;
  final Set<OrderEntry> orderEntries=new HashSet<OrderEntry>(Arrays.asList(idx.getOrderEntriesForFile(vFile)));
  PsiClass original=myManager.findClass(getQualifiedName(),new GlobalSearchScope(){
    public int compare(    VirtualFile file1,    VirtualFile file2){
      return 0;
    }
    public boolean contains(    VirtualFile file){
      Set<OrderEntry> entries=new HashSet<OrderEntry>(Arrays.asList(idx.getOrderEntriesForFile(file)));
      int size=entries.size();
      entries.addAll(orderEntries);
      return size + orderEntries.size() > entries.size();
    }
    public boolean isSearchInModuleContent(    Module aModule){
      return false;
    }
    public boolean isSearchInLibraries(){
      return true;
    }
  }
);
  return original != null ? original : this;
}
