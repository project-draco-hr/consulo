{
  ArrayList<FilePath> result=new ArrayList<FilePath>();
  VirtualFile[] virtualFileArray=context.getSelectedFiles();
  if (virtualFileArray != null) {
    for (    VirtualFile virtualFile : virtualFileArray) {
      result.add(new FilePathImpl(virtualFile));
    }
  }
  File[] fileArray=context.getSelectedIOFiles();
  if (fileArray != null) {
    for (    File file : fileArray) {
      VirtualFile parent=LocalFileSystem.getInstance().findFileByIoFile(file.getParentFile());
      if (parent != null) {
        result.add(new FilePathImpl(parent,file.getName(),false));
      }
    }
  }
  return result.toArray(new FilePath[result.size()]);
}
