{
  for (Iterator<Location<PsiClass>> iterator=location.getAncestors(PsiClass.class,false); iterator.hasNext(); ) {
    final Location<PsiClass> classLocation=iterator.next();
    if (JUnitUtil.isTestClass(classLocation))     return classLocation.getPsiElement();
  }
  PsiElement element=location.getPsiElement();
  if (element instanceof PsiJavaFile) {
    PsiClass[] classes=((PsiJavaFile)element).getClasses();
    if (classes.length == 1)     return classes[0];
  }
  return null;
}
