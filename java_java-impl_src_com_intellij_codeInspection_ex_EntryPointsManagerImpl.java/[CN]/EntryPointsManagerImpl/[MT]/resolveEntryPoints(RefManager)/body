{
  if (!myResolved) {
    myResolved=true;
    cleanup();
    validateEntryPoints();
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      public void run(){
        for (        SmartRefElementPointer entryPoint : myPersistentEntryPoints.values()) {
          if (entryPoint.resolve(manager)) {
            RefEntity refElement=entryPoint.getRefElement();
            ((RefElementImpl)refElement).setEntry(true);
            ((RefElementImpl)refElement).setPermanentEntry(entryPoint.isPersistent());
          }
        }
      }
    }
);
  }
}
