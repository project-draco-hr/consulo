{
  final RunConfiguration predefinedConfiguration=context.getOriginalConfiguration(TestNGConfigurationType.getInstance());
  Location location=JavaExecutionUtil.stepIntoSingleClass(context.getLocation());
  final PsiElement element=location.getPsiElement();
  RunnerAndConfigurationSettings template=RunManager.getInstance(location.getProject()).getConfigurationTemplate(getConfigurationFactory());
  final Module predefinedModule=((TestNGConfiguration)template.getConfiguration()).getConfigurationModule().getModule();
  final String vmParameters=predefinedConfiguration instanceof TestNGConfiguration ? ((TestNGConfiguration)predefinedConfiguration).getVMParameters() : null;
  if (vmParameters != null && !Comparing.strEqual(vmParameters,testNGConfiguration.getVMParameters()))   return false;
  TestData testobject=testNGConfiguration.getPersistantData();
  if (testobject != null) {
    if (testobject.isConfiguredByElement(element)) {
      final Module configurationModule=testNGConfiguration.getConfigurationModule().getModule();
      if (Comparing.equal(location.getModule(),configurationModule))       return true;
      if (Comparing.equal(predefinedModule,configurationModule))       return true;
    }
  }
  return false;
}
