{
  final Color colorFromElement=UserColorLookup.getColorFromElement(currentElement);
  if (colorFromElement != null) {
    final String code=Integer.toHexString(colorFromElement.getRGB()).substring(2);
    final String text=currentElement.getText();
    if (text.startsWith("#")) {
      final String colorName=getColorNameForHexCode(text);
      if (colorName != null) {
        buf.append(XmlBundle.message("color.name",colorName)).append(BR);
      }
    }
 else {
      final String hexValue=getHexCodeForColorName(text);
      if (hexValue != null) {
        buf.append(XmlBundle.message("color.rgb",hexValue.substring(1))).append(BR);
      }
    }
    String colorBox="<span style=\"background-color:#" + code + "\">&nbsp;&nbsp;&nbsp;</span>";
    buf.append(XmlBundle.message("color.preview",colorBox)).append(BR);
  }
}
