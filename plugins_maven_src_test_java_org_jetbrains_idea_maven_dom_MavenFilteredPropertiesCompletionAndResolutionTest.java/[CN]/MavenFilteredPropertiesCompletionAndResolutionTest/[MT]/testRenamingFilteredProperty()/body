{
  VirtualFile filter=createProjectSubFile("filters/filter.properties","xxx=1");
  createProjectSubDir("res");
  importProject("<groupId>test</groupId>" + "<artifactId>project</artifactId>" + "<version>1</version>"+ "<build>"+ "  <filters>"+ "    <filter>filters/filter.properties</filter>"+ "  </filters>"+ "  <resources>"+ "    <resource>"+ "      <directory>res</directory>"+ "      <filtering>true</filtering>"+ "    </resource>"+ "  </resources>"+ "</build>");
  VirtualFile f=createProjectSubFile("res/foo.properties","foo=abc${x<caret>xx}abc");
  assertResolved(f,findPropertyPsiElement(filter,"xxx"));
  doRename(f,"bar");
  assertEquals("foo=abc${bar}abc",findPsiFile(f).getText());
  assertEquals("bar=1",findPsiFile(filter).getText());
}
