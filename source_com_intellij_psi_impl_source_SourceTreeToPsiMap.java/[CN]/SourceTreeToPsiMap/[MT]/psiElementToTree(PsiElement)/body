{
  ProgressManager.getInstance().checkCanceled();
  if (psiElement == null)   return null;
  if (psiElement instanceof TreeElement) {
    return (TreeElement)psiElement;
  }
 else   if (psiElement instanceof SrcRepositoryPsiElement) {
    return RepositoryElementsManager.getOrFindTreeElement((SrcRepositoryPsiElement)psiElement);
  }
 else   if (psiElement instanceof ASTWrapperPsiElement) {
    return ((ASTWrapperPsiElement)psiElement).getNode();
  }
 else {
    LOG.error("Not TreeElement:" + psiElement);
    return null;
  }
}
