{
  if (graphElement instanceof GraphEdge) {
    Integer upIndex=((GraphEdge)graphElement).getUpNodeIndex();
    Integer downIndex=((GraphEdge)graphElement).getDownNodeIndex();
    if (upIndex != null && downIndex != null && collapsedGraph.isMyCollapsedEdge(upIndex,downIndex))     return null;
    Integer convertedUpIndex=upIndex == null ? null : collapsedGraph.convertToDelegateNodeIndex(upIndex);
    Integer convertedDownIndex=downIndex == null ? null : collapsedGraph.convertToDelegateNodeIndex(downIndex);
    return new GraphEdge(convertedUpIndex,convertedDownIndex,((GraphEdge)graphElement).getTargetId(),((GraphEdge)graphElement).getType());
  }
 else   if (graphElement instanceof GraphNode) {
    return new GraphNode(collapsedGraph.convertToDelegateNodeIndex((((GraphNode)graphElement).getNodeIndex())),((GraphNode)graphElement).getType());
  }
  return null;
}
