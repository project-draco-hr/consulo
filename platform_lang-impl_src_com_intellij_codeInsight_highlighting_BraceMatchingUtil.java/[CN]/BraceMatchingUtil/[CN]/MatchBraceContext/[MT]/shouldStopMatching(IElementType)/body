{
  if (myMatcher instanceof NontrivialBraceMatcher) {
    if (((NontrivialBraceMatcher)myMatcher).shouldStopMatch(forward,brace1Token,iterator))     return true;
    List<IElementType> oppositeElementTypes=((NontrivialBraceMatcher)myMatcher).getOppositeBraceTokenTypes(tokenType);
    for (int i=myBraceStack.size() - 1; i >= 0; i--) {
      if (oppositeElementTypes.contains(myBraceStack.get(i))) {
        return false;
      }
    }
    return true;
  }
  return !myBraceStack.contains(myMatcher.getOppositeBraceTokenType(tokenType));
}
