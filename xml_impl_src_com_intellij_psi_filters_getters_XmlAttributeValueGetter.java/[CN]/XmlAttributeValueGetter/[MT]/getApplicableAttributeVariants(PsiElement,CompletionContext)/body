{
  PsiElement context=_context;
  if (context != null) {
    context=PsiTreeUtil.getParentOfType(context,XmlAttribute.class);
    if (context == null) {
      context=PsiTreeUtil.getParentOfType(_context,XmlAttributeValue.class);
    }
  }
  if (context instanceof XmlAttribute) {
    final XmlAttributeDescriptor descriptor=((XmlAttribute)context).getDescriptor();
    if (descriptor != null) {
      if (descriptor.isFixed()) {
        final String defaultValue=descriptor.getDefaultValue();
        return defaultValue == null ? ArrayUtil.EMPTY_OBJECT_ARRAY : new Object[]{defaultValue};
      }
      String[] values=descriptor instanceof BasicXmlAttributeDescriptor ? ((BasicXmlAttributeDescriptor)descriptor).getEnumeratedValues((XmlElement)context) : descriptor.getEnumeratedValues();
      final String[] strings=addSpecificCompletions(context);
      if (values == null || values.length == 0) {
        values=strings;
      }
 else       if (strings != null) {
        values=ArrayUtil.mergeArrays(values,strings,String.class);
      }
      return values == null ? ArrayUtil.EMPTY_OBJECT_ARRAY : values;
    }
  }
  return ArrayUtil.EMPTY_OBJECT_ARRAY;
}
