{
  if (_context instanceof XmlTokenImpl && ((XmlTokenImpl)_context).getTokenType() == XmlTokenType.XML_ATTRIBUTE_VALUE_TOKEN) {
    XmlAttribute attr=PsiTreeUtil.getParentOfType(_context,XmlAttribute.class);
    if (attr != null) {
      final XmlAttributeDescriptor descriptor=attr.getDescriptor();
      if (descriptor != null) {
        if (descriptor.isFixed()) {
          final String defaultValue=descriptor.getDefaultValue();
          return defaultValue == null ? ArrayUtil.EMPTY_OBJECT_ARRAY : new Object[]{defaultValue};
        }
        String[] values=descriptor instanceof BasicXmlAttributeDescriptor ? ((BasicXmlAttributeDescriptor)descriptor).getEnumeratedValues(attr) : descriptor.getEnumeratedValues();
        final String[] strings=addSpecificCompletions(attr);
        if (values == null || values.length == 0) {
          values=strings;
        }
 else         if (strings != null) {
          values=ArrayUtil.mergeArrays(values,strings);
        }
        return values == null ? ArrayUtil.EMPTY_OBJECT_ARRAY : values;
      }
    }
  }
  return ArrayUtil.EMPTY_OBJECT_ARRAY;
}
