{
  if (e instanceof RunCanceledByUserException) {
    return;
  }
  String message=ExecutionBundle.message("error.running.configuration.with.error.error.message",runProfile != null ? runProfile.getName() : "Run profile",e.getMessage());
  if (ApplicationManager.getApplication().isUnitTestMode()) {
    LOG.error(message);
  }
 else {
    if (message.contains("87") && e instanceof ProcessNotCreatedException) {
      final String commandLineString=((ProcessNotCreatedException)e).getCommandLine().getCommandLineString();
      if (commandLineString.length() > 1024 * 32) {
        if (Messages.showYesNoDialog(project,message + "\nCommand line is too long. In order to reduce its length classpath file can be used. Would you like to enable classpath file mode for all run configurations of your project?",ExecutionBundle.message("run.error.message.title"),Messages.getErrorIcon()) == DialogWrapper.OK_EXIT_CODE) {
          PropertiesComponent.getInstance(project).setValue("dynamic.classpath","true");
          return;
        }
      }
    }
    Messages.showErrorDialog(project,message,ExecutionBundle.message("run.error.message.title"));
  }
}
