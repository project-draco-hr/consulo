{
  boolean isPathSelected=tree.getSelectionModel().isPathSelected(path);
  boolean dark=UIUtil.isUnderDarcula();
  Icon expandIcon=(isPathSelected && tree.hasFocus()) || dark ? getTreeSelectedExpandedIcon() : UIUtil.getTreeExpandedIcon();
  Icon collapseIcon=(isPathSelected && tree.hasFocus()) || dark ? getTreeSelectedCollapsedIcon() : UIUtil.getTreeCollapsedIcon();
  if (!isLeaf(row)) {
    setExpandedIcon(expandIcon);
    setCollapsedIcon(collapseIcon);
  }
  super.paintExpandControl(g,clipBounds,insets,bounds,path,row,isExpanded,hasBeenExpanded,isLeaf);
}
