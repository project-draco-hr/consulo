{
  if (!shouldPaintLines())   return;
  if (!UIUtil.isUnderAquaBasedLookAndFeel() && !UIUtil.isUnderDarcula()) {
    if (UIUtil.isUnderAlloyIDEALookAndFeel()) {
      invertLineColor=tree.getSelectionModel().isRowSelected(row) && tree.hasFocus();
    }
    super.paintHorizontalPartOfLeg(g,clipBounds,insets,bounds,path,row,isExpanded,hasBeenExpanded,isLeaf);
    invertLineColor=false;
  }
}
