{
  ArrayList<AbstractTreeNode> result=new ArrayList<AbstractTreeNode>();
  for (  final AbstractTreeNode aChildren : children) {
    ProjectViewNode treeNode=(ProjectViewNode)aChildren;
    Object o=treeNode.getValue();
    if (o instanceof PsiJavaFile) {
      PsiJavaFile psiJavaFile=(PsiJavaFile)o;
      final VirtualFile virtualFile=psiJavaFile.getVirtualFile();
      if (virtualFile.getFileType() == StdFileTypes.JAVA || virtualFile.getFileType() == StdFileTypes.CLASS) {
        PsiClass[] classes=psiJavaFile.getClasses();
        if (classes.length != 0) {
          for (          PsiClass aClass : classes) {
            if (aClass.isValid()) {
              result.add(new ClassTreeNode(myProject,aClass,((ProjectViewNode)parent).getSettings()));
            }
          }
          continue;
        }
      }
    }
    result.add(treeNode);
  }
  return result;
}
