{
  final SelectionModel selectionModel=editor.getSelectionModel();
  return selectionModel.hasSelection() ? selectionModel.getSelectionStart() : editor.getCaretModel().getOffset();
}
