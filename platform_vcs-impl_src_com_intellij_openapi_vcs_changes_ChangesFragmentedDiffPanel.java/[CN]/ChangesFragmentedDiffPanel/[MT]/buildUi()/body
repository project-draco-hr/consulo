{
  final JPanel topPanel=new JPanel(new BorderLayout());
  final JPanel wrapper=new JPanel();
  final BoxLayout boxLayout=new BoxLayout(wrapper,BoxLayout.X_AXIS);
  wrapper.setLayout(boxLayout);
  final JLabel label=new JLabel(myFilePath);
  label.setBorder(BorderFactory.createEmptyBorder(1,2,0,0));
  wrapper.add(label);
  topPanel.add(wrapper,BorderLayout.CENTER);
  final MyScrollingHelper scrollingHelper=new MyScrollingHelper();
  topPanel.add(scrollingHelper.getLeftScroll(),BorderLayout.SOUTH);
  myPanel.add(topPanel,BorderLayout.NORTH);
  final JPanel wrapperDiffs=new JPanel(new GridBagLayout());
  final JPanel oneMore=new JPanel(new BorderLayout());
  oneMore.add(wrapperDiffs,BorderLayout.NORTH);
  final JBScrollPane scrollBig=new JBScrollPane(oneMore,JBScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,JBScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
  myPanel.add(scrollBig,BorderLayout.CENTER);
  final GridBagConstraints gb=new GridBagConstraints(0,0,1,1,1,0,GridBagConstraints.NORTHWEST,GridBagConstraints.BOTH,new Insets(0,0,0,0),0,0);
  final SplittersSynchronizer splittersSynchronizer=new SplittersSynchronizer();
  final VisibleAreaListener val=new VisibleAreaListener(){
    @Override public void visibleAreaChanged(    VisibleAreaEvent e){
      oneMore.revalidate();
      oneMore.repaint();
      scrollingHelper.onEditorAreaChanged(e);
    }
  }
;
  for (int i=0; i < myDiffs.size(); i++) {
    BeforeAfter<ShiftedSimpleContent> diff=myDiffs.get(i);
    final DiffPanel diffPanel=myMyDiffPanelHolder.getOrCreate();
    ((DiffPanelImpl)diffPanel).noSynchScroll();
    diffPanel.setContents(diff.getBefore(),diff.getAfter());
    ((DiffPanelImpl)diffPanel).prefferedSizeByContents(-1);
    ((DiffPanelImpl)diffPanel).setLineShift(diff.getBefore().getLineShift(),diff.getAfter().getLineShift());
    if (i == 0) {
      ((DiffPanelImpl)diffPanel).getEditor1().getScrollingModel().addVisibleAreaListener(val);
    }
    wrapperDiffs.add(diffPanel.getComponent(),gb);
    ++gb.gridy;
    scrollingHelper.nextPanel(diff,diffPanel);
    splittersSynchronizer.add(((DiffPanelImpl)diffPanel).getSplitter(),((DiffPanelImpl)diffPanel).getEditor1());
  }
  scrollingHelper.afterPanelsAdded();
}
