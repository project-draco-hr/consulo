{
  final PsiElement element=location.getPsiElement();
  PsiElement pp=element.getParent();
  PsiElement parent=element;
  while (!(pp instanceof PsiFile) && pp != null) {
    pp=pp.getParent();
    parent=parent.getParent();
  }
  if (pp != null) {
    String target=getTaskTarget(parent);
    if (target != null) {
      configuration.scriptParams=target;
      configuration.setName(configuration.getName() + "." + target);
    }
  }
  final CompileStepBeforeRun.MakeBeforeRunTask runTask=RunManagerEx.getInstanceEx(element.getProject()).getBeforeRunTask(configuration,CompileStepBeforeRun.ID);
  if (runTask != null) {
    runTask.setEnabled(false);
  }
}
