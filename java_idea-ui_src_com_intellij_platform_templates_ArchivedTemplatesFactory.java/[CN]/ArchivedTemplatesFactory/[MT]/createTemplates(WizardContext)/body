{
  IdeaPluginDescriptor[] plugins=PluginManager.getPlugins();
  Set<URL> urls=new HashSet<URL>();
  for (  IdeaPluginDescriptor plugin : plugins) {
    try {
      Enumeration<URL> resources=plugin.getPluginClassLoader().getResources("resources/projectTemplates");
      urls.addAll(Collections.list(resources));
    }
 catch (    IOException e) {
      LOG.error(e);
    }
  }
  List<ProjectTemplate> templates=new ArrayList<ProjectTemplate>();
  for (  URL url : urls) {
    try {
      final List<String> children=UrlUtil.getChildrenRelativePaths(url);
      for (      String child : children) {
        if (child.endsWith(".zip")) {
          final URL templateUrl=new URL(url.toExternalForm() + "/" + child);
          templates.add(new ArchivedProjectTemplate(child,templateUrl,context));
        }
      }
    }
 catch (    IOException e) {
      LOG.error(e);
    }
  }
  return templates.toArray(new ProjectTemplate[templates.size()]);
}
