{
  LOG.assertTrue(!ProgressManager.getInstance().hasProgressIndicator(),"Password should not be accessed under modal progress");
  String password;
  final Project project=ProjectManager.getInstance().getDefaultProject();
  final PasswordSafeImpl passwordSafe=(PasswordSafeImpl)PasswordSafe.getInstance();
  try {
    password=passwordSafe.getMemoryProvider().getPassword(project,GithubSettings.class,GITHUB_SETTINGS_PASSWORD_KEY);
    if (password != null) {
      return password;
    }
    final MasterKeyPasswordSafe masterKeyProvider=passwordSafe.getMasterKeyProvider();
    if (!masterKeyProvider.isEmpty()) {
      password=masterKeyProvider.getPassword(project,GithubSettings.class,GITHUB_SETTINGS_PASSWORD_KEY);
    }
  }
 catch (  PasswordSafeException e) {
    LOG.info("Couldn't get password for key [" + GITHUB_SETTINGS_PASSWORD_KEY + "]",e);
    password="";
  }
  try {
    passwordSafe.getMemoryProvider().storePassword(ProjectManager.getInstance().getDefaultProject(),GithubSettings.class,GITHUB_SETTINGS_PASSWORD_KEY,password != null ? password : "");
  }
 catch (  PasswordSafeException e) {
    LOG.info("Couldn't store password for key [" + GITHUB_SETTINGS_PASSWORD_KEY + "]",e);
  }
  passwordChanged=false;
  return password != null ? password : "";
}
