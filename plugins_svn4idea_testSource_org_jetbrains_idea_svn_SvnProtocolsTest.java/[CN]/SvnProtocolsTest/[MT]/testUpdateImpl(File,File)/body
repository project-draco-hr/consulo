{
  Assert.assertTrue(wc1.isDirectory());
  final VirtualFile vf=LocalFileSystem.getInstance().refreshAndFindFileByIoFile(wc1);
  final UpdatedFiles files=UpdatedFiles.create();
  final UpdateSession session=myVcs.getUpdateEnvironment().updateDirectories(new FilePath[]{new FilePathImpl(vf)},files,new EmptyProgressIndicator(),new Ref<SequentialUpdatesContext>());
  Assert.assertTrue(session.getExceptions() == null || session.getExceptions().isEmpty());
  Assert.assertTrue(!session.isCanceled());
  Assert.assertTrue(!files.getGroupById(FileGroup.CREATED_ID).getFiles().isEmpty());
  final String path=files.getGroupById(FileGroup.CREATED_ID).getFiles().iterator().next();
  final String name=path.substring(path.lastIndexOf(File.separator) + 1);
  Assert.assertEquals(created.getName(),name);
}
