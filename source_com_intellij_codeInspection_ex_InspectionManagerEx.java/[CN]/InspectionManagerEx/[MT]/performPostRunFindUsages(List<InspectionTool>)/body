{
  FIND_EXTERNAL_USAGES.setTotalAmount(getRequestCount() * 2);
  do {
    processSearchRequests();
    InspectionTool[] requestors=needRepeatSearchRequest.toArray(new InspectionTool[needRepeatSearchRequest.size()]);
    for (int i=0; i < requestors.length; i++) {
      InspectionTool requestor=requestors[i];
      if (!requestor.queryExternalUsagesRequests())       needRepeatSearchRequest.remove(requestor);
    }
    int oldSearchRequestCount=FIND_EXTERNAL_USAGES.getTotalAmount();
    float proportion=FIND_EXTERNAL_USAGES.getProgress();
    int totalAmount=oldSearchRequestCount + getRequestCount() * 2;
    FIND_EXTERNAL_USAGES.setTotalAmount(totalAmount);
    FIND_EXTERNAL_USAGES.setDoneAmount((int)(totalAmount * proportion));
  }
 while (needRepeatSearchRequest.size() > 0);
}
