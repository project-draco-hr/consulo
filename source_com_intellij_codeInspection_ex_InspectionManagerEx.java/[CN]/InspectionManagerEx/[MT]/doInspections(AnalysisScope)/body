{
  while (PsiManager.getInstance(getProject()).findClass("java.lang.Object") == null) {
    Messages.showMessageDialog(getProject(),"The JDK is not configured properly for this project. Inspection cannot proceed.","Error",Messages.getErrorIcon());
    final ProjectJdk projectJdk=LibrariesEditor.chooseAndSetJDK(myProject);
    if (projectJdk == null)     return;
  }
  if (myCurrentScope == null) {
    final InspectCodePanel itc=new InspectCodePanel(this,scope);
    itc.show();
    if (!itc.isOK())     return;
  }
  close();
  getContentManager().removeAllContents();
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    public void run(){
      myCurrentScope=scope;
      launchInspections(scope);
    }
  }
);
}
