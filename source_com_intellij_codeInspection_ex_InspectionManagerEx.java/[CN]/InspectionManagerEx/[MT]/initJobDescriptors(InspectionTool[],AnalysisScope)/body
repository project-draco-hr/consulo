{
  ArrayList<LocalInspectionToolWrapper> localTools=new ArrayList<LocalInspectionToolWrapper>();
  myJobDescriptors=new ArrayList<JobDescriptor>();
  for (int i=0; i < tools.length; i++) {
    InspectionTool tool=tools[i];
    if (getCurrentProfile().isToolEnabled(HighlightDisplayKey.find(tool.getShortName()))) {
      if (tool instanceof LocalInspectionToolWrapper) {
        LocalInspectionToolWrapper wrapper=(LocalInspectionToolWrapper)tool;
        localTools.add(wrapper);
        appendJobDescriptor(LOCAL_ANALYSIS);
      }
 else {
        JobDescriptor[] jobDescriptors=tool.getJobDescriptors();
        for (int j=0; j < jobDescriptors.length; j++) {
          appendJobDescriptor(jobDescriptors[j]);
        }
      }
    }
  }
  BUILD_GRAPH.setTotalAmount(scope.getFileCount());
  LOCAL_ANALYSIS.setTotalAmount(scope.getFileCount());
  return localTools;
}
