{
  cleanup();
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    public void run(){
      PsiDocumentManager.getInstance(myProject).commitAllDocuments();
    }
  }
);
  LOG.info("Code inspection started");
  Runnable runInspection=new Runnable(){
    public void run(){
      performInspectionsWithProgress(scope);
    }
  }
;
  if (!ApplicationManager.getApplication().runProcessWithProgressSynchronously(runInspection,"Inspecting Code...",true,myProject))   return;
  InspectionResultsView view=new InspectionResultsView(myProject);
  InspectionTool[] tools=getCurrentProfile().getInspectionTools(myProject);
  if (!view.update(tools)) {
    Messages.showMessageDialog(myProject,"No suspicious code found","Code Inspection",Messages.getInformationIcon());
  }
 else {
    addView(view);
  }
}
