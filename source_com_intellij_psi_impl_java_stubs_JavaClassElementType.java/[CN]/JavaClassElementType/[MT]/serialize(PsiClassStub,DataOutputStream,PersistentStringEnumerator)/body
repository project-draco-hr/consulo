{
  dataStream.writeByte(((PsiClassStubImpl)stub).getFlags());
  if (!stub.isAnonymous()) {
    if (stub instanceof PsiInnerClassStubPlug) {
      dataStream.writeByte(INNER_PLUG);
      DataInputOutputUtil.writeNAME(dataStream,((PsiInnerClassStubPlug)stub).getOuterClassFQN(),nameStorage);
    }
 else     if (stub instanceof PsiInnerClassStubSocket) {
      dataStream.writeByte(INNER_SOCKET);
    }
 else {
      dataStream.writeByte(NORMAL_CLASS);
    }
    DataInputOutputUtil.writeNAME(dataStream,stub.getName(),nameStorage);
    DataInputOutputUtil.writeNAME(dataStream,stub.getQualifiedName(),nameStorage);
  }
 else {
    DataInputOutputUtil.writeNAME(dataStream,stub.getBaseClassReferenceText(),nameStorage);
  }
}
