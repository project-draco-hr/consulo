{
  PsiElement parent=element.getParent();
  if (element instanceof PsiIdentifier) {
    if (parent instanceof PsiClass && element.equals(((PsiClass)parent).getNameIdentifier())) {
      return parent;
    }
 else     if (parent instanceof PsiVariable && element.equals(((PsiVariable)parent).getNameIdentifier())) {
      return parent;
    }
 else     if (parent instanceof PsiMethod && element.equals(((PsiMethod)parent).getNameIdentifier())) {
      return parent;
    }
 else     if (parent instanceof PsiLabeledStatement && element.equals(((PsiLabeledStatement)parent).getLabelIdentifier())) {
      return parent;
    }
  }
 else   if ((parent=PsiTreeUtil.getParentOfType(element,PsiNamedElement.class,false)) != null) {
    if (parent.getTextOffset() == element.getTextRange().getStartOffset() && !(parent instanceof XmlAttribute) && !(parent instanceof PsiFile && InjectedLanguageManager.getInstance(parent.getProject()).isInjectedFragment((PsiFile)parent))) {
      return parent;
    }
  }
  return null;
}
