{
  Status status=getStatus();
  boolean mustAcquire=!isReadAccessAllowed(status);
  if (mustAcquire) {
    assertNoPsiLock();
    try {
      if (!myLock.readLock().tryLock(0,TimeUnit.MILLISECONDS))       return false;
      setReadLockAcquired(status,true);
    }
 catch (    InterruptedException e) {
      throw new RuntimeInterruptedException(e);
    }
  }
  try {
    action.run();
  }
  finally {
    if (mustAcquire) {
      endRead(status);
    }
  }
  return true;
}
