{
  final boolean hasUnsafeBgTasks=ProgressManager.getInstance().hasUnsafeProgressIndicator();
  final ConfirmExitDialog confirmExitDialog=new ConfirmExitDialog(hasUnsafeBgTasks);
  if (confirmExitDialog.isToBeShown()) {
    confirmExitDialog.show();
    if (!confirmExitDialog.isOK()) {
      return false;
    }
  }
 else {
    confirmExitDialog.close(DialogWrapper.OK_EXIT_CODE);
  }
  return true;
}
