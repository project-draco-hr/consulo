{
  final Component frame=UIUtil.findUltimateParent(window);
  if (frame instanceof IdeFrame) {
    final IdeFrame ideFrame=(IdeFrame)frame;
    if (isActive() != active) {
      myActive=Boolean.valueOf(active);
      System.setProperty("idea.active",Boolean.valueOf(myActive).toString());
      if (active) {
        myReady.onReady();
        myDispatcher.getMulticaster().applicationActivated(ideFrame);
      }
 else {
        myDispatcher.getMulticaster().applicationDeactivated(ideFrame);
      }
      return true;
    }
  }
  return false;
}
