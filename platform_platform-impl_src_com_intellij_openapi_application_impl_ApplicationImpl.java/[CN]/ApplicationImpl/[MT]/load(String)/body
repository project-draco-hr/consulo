{
  getStateStore().setOptionsPath(path);
  getStateStore().setConfigPath(PathManager.getConfigPath());
  myIsFiringLoadingEvent=true;
  try {
    fireBeforeApplicationLoaded();
  }
  finally {
    myIsFiringLoadingEvent=false;
  }
  loadComponentRoamingTypes();
  HeavyProcessLatch.INSTANCE.processStarted();
  try {
    getStateStore().load();
  }
 catch (  StateStorageException e) {
    throw new IOException(e.getMessage());
  }
 finally {
    HeavyProcessLatch.INSTANCE.processFinished();
  }
  myLoaded=true;
  File locatorFile=new File(PathManager.getSystemPath() + "/" + ApplicationEx.LOCATOR_FILE_NAME);
  try {
    byte[] data=PathManager.getHomePath().getBytes("UTF-8");
    FileUtil.writeToFile(locatorFile,data);
  }
 catch (  Exception e) {
    LOG.warn("can't store a location in '" + locatorFile + "'",e);
  }
}
