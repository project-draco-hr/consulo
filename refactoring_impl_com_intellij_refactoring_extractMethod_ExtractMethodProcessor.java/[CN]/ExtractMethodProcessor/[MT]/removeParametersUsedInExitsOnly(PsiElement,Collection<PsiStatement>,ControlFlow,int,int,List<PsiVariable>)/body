{
  LocalSearchScope scope=new LocalSearchScope(codeFragment);
  Variables:   for (Iterator<PsiVariable> iterator=inputVariables.iterator(); iterator.hasNext(); ) {
    PsiVariable variable=iterator.next();
    for (    PsiReference ref : ReferencesSearch.search(variable,scope)) {
      PsiElement element=ref.getElement();
      int elementOffset=controlFlow.getStartOffset(element);
      if (elementOffset >= startOffset && elementOffset <= endOffset) {
        if (!isInExitStatements(element,exitStatements))         continue Variables;
      }
      if (elementOffset == -1) {
        final PsiClass psiClass=PsiTreeUtil.getParentOfType(element,PsiClass.class);
        if (psiClass != null) {
          final TextRange textRange=psiClass.getTextRange();
          if (controlFlow.getElement(startOffset).getTextOffset() <= textRange.getStartOffset() && textRange.getEndOffset() <= controlFlow.getElement(endOffset).getTextRange().getEndOffset()) {
            continue Variables;
          }
        }
      }
    }
    iterator.remove();
  }
}
