{
  if (!(resolved instanceof PsiClass))   return null;
  final PsiExpression qualifier=expression.getQualifierExpression();
  if (qualifier == null)   return null;
  if (qualifier instanceof PsiReferenceExpression) {
    PsiElement qualifierResolved=((PsiReferenceExpression)qualifier).resolve();
    if (qualifierResolved instanceof PsiClass || qualifierResolved instanceof PsiPackage)     return null;
  }
  HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,qualifier,JavaErrorMessages.message("expected.class.or.package"));
  QuickFixAction.registerQuickFixAction(info,new RemoveQualifierFix(qualifier,expression,(PsiClass)resolved));
  return info;
}
