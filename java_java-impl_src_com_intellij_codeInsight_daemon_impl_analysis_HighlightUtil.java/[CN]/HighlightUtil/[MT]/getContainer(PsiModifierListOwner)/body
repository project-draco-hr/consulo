{
  if (refElement instanceof PsiTypeParameter)   return refElement.getParent().getParent();
  if (refElement instanceof PsiClass) {
    final PsiClass containingClass=((PsiClass)refElement).getContainingClass();
    if (containingClass != null)     return containingClass;
    return refElement.getContainingFile();
  }
  if (refElement instanceof PsiMember)   return ((PsiMember)refElement).getContainingClass();
  return refElement.getParent();
}
