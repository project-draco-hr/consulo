{
  if (!(resolved instanceof PsiClass))   return null;
  if (!(element.getParent() instanceof PsiTypeElement))   return null;
  PsiElement catchParameter=element.getParent().getParent();
  boolean isInMultiCatch=false;
  if (catchParameter instanceof PsiTypeElement && ((PsiTypeElement)catchParameter).getType() instanceof PsiDisjunctionType) {
    isInMultiCatch=true;
    catchParameter=catchParameter.getParent();
  }
  if (!(catchParameter instanceof PsiParameter) || !(((PsiParameter)catchParameter).getDeclarationScope() instanceof PsiCatchSection)) {
    return null;
  }
  final PsiClass catchClass=(PsiClass)resolved;
  final PsiCatchSection catchSection=(PsiCatchSection)((PsiParameter)catchParameter).getDeclarationScope();
  final PsiCatchSection[] allCatchSections=catchSection.getTryStatement().getCatchSections();
  final int startFrom=ArrayUtil.find(allCatchSections,catchSection) - (isInMultiCatch ? 0 : 1);
  for (int i=startFrom; i >= 0; i--) {
    final PsiCatchSection upperCatchSection=allCatchSections[i];
    final PsiType upperCatchType=upperCatchSection.getCatchType();
    final boolean highlight=upperCatchType instanceof PsiDisjunctionType ? checkMultiCatchSection(catchSection,element.getParent(),catchClass,upperCatchSection) : checkSimpleCatchSection(catchClass,upperCatchType);
    if (highlight) {
      final String className=PsiFormatUtil.formatClass(catchClass,PsiFormatUtilBase.SHOW_NAME | PsiFormatUtilBase.SHOW_FQ_NAME);
      final String description=JavaErrorMessages.message("exception.already.caught",className);
      final HighlightInfo result=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,element,description);
      if (catchSection != upperCatchSection) {
        QuickFixAction.registerQuickFixAction(result,new MoveCatchUpFix(catchSection,upperCatchSection));
      }
      if (isInMultiCatch) {
        QuickFixAction.registerQuickFixAction(result,new DeleteMultiCatchFix((PsiTypeElement)element.getParent()));
      }
 else {
        QuickFixAction.registerQuickFixAction(result,new DeleteCatchFix((PsiParameter)catchParameter));
      }
      return result;
    }
  }
  return null;
}
