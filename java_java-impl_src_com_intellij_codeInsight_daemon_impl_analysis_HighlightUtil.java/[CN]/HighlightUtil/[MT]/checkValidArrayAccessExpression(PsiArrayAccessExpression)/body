{
  final PsiExpression arrayExpression=arrayAccessExpression.getArrayExpression();
  final PsiType arrayExpressionType=arrayExpression.getType();
  if (arrayExpressionType != null && !(arrayExpressionType instanceof PsiArrayType)) {
    final String description=JavaErrorMessages.message("array.type.expected",formatType(arrayExpressionType));
    final HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,arrayExpression,description);
    QuickFixAction.registerQuickFixAction(info,new ReplaceWithListAccessFix(arrayAccessExpression));
    return info;
  }
  final PsiExpression indexExpression=arrayAccessExpression.getIndexExpression();
  return indexExpression != null ? checkAssignability(PsiType.INT,indexExpression.getType(),indexExpression,indexExpression) : null;
}
