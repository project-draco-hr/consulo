{
  if (ref.isQualified() && isInsidePackageStatement(ref)) {
    VirtualFile file=ref.getContainingFile().getVirtualFile();
    if (file != null) {
      Module module=ProjectFileIndex.SERVICE.getInstance(ref.getProject()).getModuleForFile(file);
      if (module != null) {
        GlobalSearchScope scope=module.getModuleWithDependenciesAndLibrariesScope(false);
        PsiClass aClass=JavaPsiFacade.getInstance(ref.getProject()).findClass(ref.getCanonicalText(),scope);
        if (aClass != null) {
          String message=JavaErrorMessages.message("package.clashes.with.class",ref.getText());
          return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,ref,message);
        }
      }
    }
  }
  return null;
}
