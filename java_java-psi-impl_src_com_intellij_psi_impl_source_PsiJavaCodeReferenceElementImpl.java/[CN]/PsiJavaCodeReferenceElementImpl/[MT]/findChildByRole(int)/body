{
  LOG.assertTrue(ChildRole.isUnique(role));
switch (role) {
default :
    return null;
case ChildRole.REFERENCE_NAME:
  if (getLastChildNode().getElementType() == JavaTokenType.IDENTIFIER) {
    return getLastChildNode();
  }
 else {
    if (getLastChildNode().getElementType() == JavaElementType.REFERENCE_PARAMETER_LIST) {
      ASTNode current=getLastChildNode().getTreePrev();
      while (current != null && (current.getPsi() instanceof PsiWhiteSpace || current.getPsi() instanceof PsiComment)) {
        current=current.getTreePrev();
      }
      if (current != null && current.getElementType() == JavaTokenType.IDENTIFIER) {
        return current;
      }
    }
    return null;
  }
case ChildRole.REFERENCE_PARAMETER_LIST:
if (getLastChildNode().getElementType() == JavaElementType.REFERENCE_PARAMETER_LIST) {
  return getLastChildNode();
}
return null;
case ChildRole.QUALIFIER:
if (getFirstChildNode().getElementType() == JavaElementType.JAVA_CODE_REFERENCE) {
return getFirstChildNode();
}
return null;
case ChildRole.DOT:
return findChildByType(JavaTokenType.DOT);
}
}
