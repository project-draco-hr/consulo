{
  super(parent,true);
  mySeverityRegistrar=severityRegistrar;
  myOptionsList.setCellRenderer(new DefaultListCellRenderer(){
    public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      final Component rendererComponent=super.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      if (value instanceof SeverityRegistrar.SeverityBasedTextAttributes) {
        setText(((SeverityRegistrar.SeverityBasedTextAttributes)value).getSeverity().toString());
      }
      return rendererComponent;
    }
  }
);
  myOptionsList.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      final ListModel model=myOptionsList.getModel();
      if (myCurrentSelection != -1 && myCurrentSelection < model.getSize()) {
        processListValueChanged((SeverityRegistrar.SeverityBasedTextAttributes)model.getElementAt(myCurrentSelection),true);
      }
      final int index=myOptionsList.getSelectedIndex();
      if (index == -1) {
        myCurrentSelection=index;
      }
 else       if (myCurrentSelection != index) {
        final SeverityRegistrar.SeverityBasedTextAttributes highlightInfo=(SeverityRegistrar.SeverityBasedTextAttributes)myOptionsList.getSelectedValue();
        processListValueChanged(highlightInfo,false);
        myCard.show(myRightPanel,isDefaultSetting(highlightInfo.getType()) ? DEFAULT : EDITABLE);
        myCurrentSelection=index;
      }
    }
  }
);
  myOptionsList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  JScrollPane scrollPane=new JScrollPane(myOptionsList);
  scrollPane.setPreferredSize(new Dimension(230,60));
  JPanel leftPanel=new JPanel(new BorderLayout());
  leftPanel.add(scrollPane,BorderLayout.CENTER);
  leftPanel.add(createListToolbar(),BorderLayout.NORTH);
  myPanel=new JPanel(new BorderLayout());
  myPanel.add(leftPanel,BorderLayout.WEST);
  myCard=new CardLayout();
  myRightPanel=new JPanel(myCard);
  final JPanel disabled=new JPanel(new BorderLayout());
  disabled.add(new JLabel(InspectionsBundle.message("severities.default.settings.message"),SwingConstants.CENTER),BorderLayout.CENTER);
  myRightPanel.add(DEFAULT,disabled);
  myRightPanel.add(EDITABLE,myOptionsPanel);
  myCard.show(myRightPanel,EDITABLE);
  myPanel.add(myRightPanel,BorderLayout.CENTER);
  fillList(severity);
  init();
  setTitle(InspectionsBundle.message("severities.editor.dialog.title"));
}
