{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Applying " + event);
  }
  try {
    if (event instanceof VFileCreateEvent) {
      final VFileCreateEvent createEvent=(VFileCreateEvent)event;
      return executeCreateChild(createEvent.getParent(),createEvent.getChildName());
    }
 else     if (event instanceof VFileDeleteEvent) {
      final VFileDeleteEvent deleteEvent=(VFileDeleteEvent)event;
      executeDelete(deleteEvent.getFile());
    }
 else     if (event instanceof VFileContentChangeEvent) {
      final VFileContentChangeEvent contentUpdateEvent=(VFileContentChangeEvent)event;
      executeTouch(contentUpdateEvent.getFile(),contentUpdateEvent.isFromRefresh(),contentUpdateEvent.getModificationStamp());
    }
 else     if (event instanceof VFileCopyEvent) {
      final VFileCopyEvent copyEvent=(VFileCopyEvent)event;
      return executeCreateChild(copyEvent.getNewParent(),copyEvent.getNewChildName());
    }
 else     if (event instanceof VFileMoveEvent) {
      final VFileMoveEvent moveEvent=(VFileMoveEvent)event;
      executeMove(moveEvent.getFile(),moveEvent.getNewParent());
    }
 else     if (event instanceof VFilePropertyChangeEvent) {
      final VFilePropertyChangeEvent propertyChangeEvent=(VFilePropertyChangeEvent)event;
      VirtualFile file=propertyChangeEvent.getFile();
      Object newValue=propertyChangeEvent.getNewValue();
      if (VirtualFile.PROP_NAME.equals(propertyChangeEvent.getPropertyName())) {
        executeRename(file,(String)newValue);
      }
 else       if (VirtualFile.PROP_WRITABLE.equals(propertyChangeEvent.getPropertyName())) {
        executeSetWritable(file,((Boolean)newValue).booleanValue());
        if (LOG.isDebugEnabled()) {
          LOG.debug("File " + file + " writable="+ file.isWritable()+ " id="+ getFileId(file));
        }
      }
 else       if (VirtualFile.PROP_HIDDEN.equals(propertyChangeEvent.getPropertyName())) {
        executeSetHidden(file,((Boolean)newValue).booleanValue());
      }
 else       if (VirtualFile.PROP_SYMLINK_TARGET.equals(propertyChangeEvent.getPropertyName())) {
        executeSetTarget(file,(String)newValue);
      }
    }
  }
 catch (  Exception e) {
    LOG.error(e);
  }
  return null;
}
