{
  String normalized=VfsImplUtil.normalize(fs,FileUtil.toCanonicalPath(basePath));
  String protocol=fs.getProtocol();
  StringBuilder result=new StringBuilder(protocol.length() + URLUtil.SCHEME_SEPARATOR.length() + normalized.length());
  result.append(protocol).append(URLUtil.SCHEME_SEPARATOR).append(normalized);
  return StringUtil.endsWithChar(result,'/') ? UriUtil.trimTrailingSlashes(result.toString()) : result.toString();
}
