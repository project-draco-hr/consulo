{
  myChangesViewManager=changesViewManager;
  myToolWindowManager=toolWindowManager;
  myShelveChangesManager=shelveChangesManager;
  myBus=bus;
  myBus.connect().subscribe(ShelveChangesManager.SHELF_TOPIC,new ChangeListener(){
    public void stateChanged(    ChangeEvent e){
      updateChangesContent();
    }
  }
);
  myTree.setRootVisible(false);
  myTree.setShowsRootHandles(true);
  myTree.setCellRenderer(new ShelfTreeCellRenderer());
  PopupHandler.installPopupHandler(myTree,"ShelvedChangesPopupMenu",ActionPlaces.UNKNOWN);
}
