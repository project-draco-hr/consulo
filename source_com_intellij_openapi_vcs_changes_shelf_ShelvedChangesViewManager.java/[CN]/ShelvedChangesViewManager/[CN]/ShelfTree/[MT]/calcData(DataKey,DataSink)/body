{
  if (key == SHELVED_CHANGELIST_KEY) {
    List<ShelveChangesManager.ShelvedChangeListData> result=new ArrayList<ShelveChangesManager.ShelvedChangeListData>();
    final TreePath[] treePaths=getSelectionPaths();
    for (    TreePath treePath : treePaths) {
      if (treePath.getLastPathComponent() instanceof DefaultMutableTreeNode) {
        DefaultMutableTreeNode node=(DefaultMutableTreeNode)treePath.getLastPathComponent();
        if (node.getUserObject() instanceof ShelveChangesManager.ShelvedChangeListData) {
          result.add((ShelveChangesManager.ShelvedChangeListData)node.getUserObject());
        }
      }
    }
    if (!result.isEmpty()) {
      sink.put(SHELVED_CHANGELIST_KEY,result.toArray(new ShelveChangesManager.ShelvedChangeListData[result.size()]));
    }
  }
}
