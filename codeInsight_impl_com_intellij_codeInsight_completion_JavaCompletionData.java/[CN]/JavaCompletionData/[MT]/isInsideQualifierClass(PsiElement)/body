{
  if (position.getParent() instanceof PsiJavaCodeReferenceElement) {
    final PsiElement qualifier=((PsiJavaCodeReferenceElement)position.getParent()).getQualifier();
    if (qualifier instanceof PsiJavaCodeReferenceElement) {
      final PsiElement qualifierClass=((PsiJavaCodeReferenceElement)qualifier).resolve();
      if (qualifierClass instanceof PsiClass) {
        PsiElement parent=position;
        final PsiManager psiManager=position.getManager();
        while ((parent=PsiTreeUtil.getParentOfType(parent,PsiClass.class,true)) != null) {
          if (psiManager.areElementsEquivalent(parent,qualifierClass)) {
            return true;
          }
        }
      }
    }
  }
  return false;
}
