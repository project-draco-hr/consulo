{
  new CommonBackgroundTask(myProject,"Comparing with " + branchName,null){
    private GitCommitCompareInfo myCompareInfo;
    @Override public void execute(    @NotNull ProgressIndicator indicator){
      myCompareInfo=loadCommitsToCompare(repositories,branchName);
    }
    @Override public void onSuccess(){
      if (myCompareInfo == null) {
        LOG.error("The task to get compare info didn't finish. Repositories: \n" + repositories + "\nbranch name: "+ branchName);
        return;
      }
      displayCompareDialog(branchName,getCurrentBranchOrRev(repositories),myCompareInfo,selectedRepository);
    }
  }
.runInBackground();
}
