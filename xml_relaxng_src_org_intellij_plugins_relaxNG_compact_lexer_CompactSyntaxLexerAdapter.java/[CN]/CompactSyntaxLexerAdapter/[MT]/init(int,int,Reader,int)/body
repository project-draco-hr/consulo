{
  myEndOffset=endOffset;
  myLengthMap=new TIntIntHashMap();
  final EscapePreprocessor preprocessor=new EscapePreprocessor(reader,startOffset,myLengthMap);
  myLexer=new CompactSyntaxTokenManager(new SimpleCharStream(preprocessor,1,1),initialState);
  myCurrentToken=START;
  myCurrentOffset=startOffset;
  myCurrentEnd=startOffset;
  myTokenQueue.clear();
  advance();
}
