{
  final Set<File> moduleRoots=module.getContentRoots();
  for (  File moduleRoot : moduleRoots) {
    try {
      if (FileUtil.isAncestor(moduleRoot,contentRoot,false)) {
        return moduleRoot;
      }
      if (FileUtil.isAncestor(contentRoot,moduleRoot,true)) {
        final Set<File> currentSources=module.getSourceRoots(moduleRoot);
        module.removeContentRoot(moduleRoot);
        module.addContentRoot(contentRoot);
        for (        File source : currentSources) {
          module.addSourceRoot(contentRoot,source);
        }
        return contentRoot;
      }
    }
 catch (    IOException ignored) {
    }
  }
  module.addContentRoot(contentRoot);
  return contentRoot;
}
