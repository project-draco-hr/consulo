{
  FileType foo=new FakeFileType(){
    @Override public boolean isMyFileType(    VirtualFile file){
      return true;
    }
    @NotNull @Override public String getName(){
      return "foo";
    }
    @NotNull @Override public String getDescription(){
      return "";
    }
  }
;
  FileTypeIndex index=new FileTypeIndex(FileTypeManager.getInstance());
  int version=index.getVersion();
  FileTypeManager.getInstance().registerFileType(foo,Collections.<FileNameMatcher>emptyList());
  assertNotSame(version,index.getVersion());
}
