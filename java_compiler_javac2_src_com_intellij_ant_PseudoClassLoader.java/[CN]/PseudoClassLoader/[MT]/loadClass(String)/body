{
  final PseudoClass defined=(PseudoClass)myDefinedClasses.get(internalName);
  if (defined != null) {
    return defined;
  }
  final URL resource=myLoader.findResource(internalName + ".class");
  if (resource == null) {
    final Class lastResort=myLoader.loadClass(internalName.replace('/','.'));
    return new PseudoClass(lastResort);
  }
  final String fileName=resource.getFile();
  final boolean isFile=fileName.length() > 0;
  final File file=new File(fileName);
  if (isFile) {
    final Tag cached=(Tag)myCache.get(internalName);
    if (cached != null && cached.myStamp == file.lastModified()) {
      return cached.myClass;
    }
  }
  final InputStream content=(InputStream)resource.getContent();
  final ClassReader reader=new ClassReader(content);
  final PseudoClass result=createPseudoClass(reader);
  if (isFile) {
    myCache.put(internalName,new Tag(result,file.lastModified()));
  }
  return result;
}
