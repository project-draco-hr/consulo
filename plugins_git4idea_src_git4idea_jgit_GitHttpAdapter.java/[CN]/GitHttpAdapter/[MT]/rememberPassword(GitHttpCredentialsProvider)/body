{
  if (!credentialsProvider.wasDialogShown()) {
    return;
  }
  final PasswordSafeImpl passwordSafe=(PasswordSafeImpl)PasswordSafe.getInstance();
  if (passwordSafe.getSettings().getProviderType() == PasswordSafeSettings.ProviderType.DO_NOT_STORE) {
    return;
  }
  String login=credentialsProvider.getUserName();
  if (login == null || credentialsProvider.getPassword() == null) {
    return;
  }
  String url=adjustHttpUrl(credentialsProvider.getUrl());
  String key=keyForUrlAndLogin(url,login);
  try {
    storePassword(passwordSafe.getMemoryProvider(),credentialsProvider,key);
    if (credentialsProvider.isRememberPassword()) {
      storePassword(passwordSafe.getMasterKeyProvider(),credentialsProvider,key);
    }
    GitRememberedInputs.getInstance().addUrl(url,login);
  }
 catch (  PasswordSafeException e) {
    LOG.info("Couldn't store the password for key [" + key + "]",e);
  }
}
