{
  for (int i=0; i < 3; i++) {
    try {
      AuthData authData=getUsernameAndPassword(provider.getProject(),provider.getUrl());
      if (authData != null) {
        provider.fillAuthDataIfNotFilled(authData.getLogin(),authData.getPassword());
      }
      if (i == 0) {
        provider.setAlwaysShowDialog(false);
      }
 else {
        provider.setAlwaysShowDialog(true);
      }
      command.run();
      rememberPassword(provider);
      return GeneralResult.SUCCESS;
    }
 catch (    JGitInternalException e) {
      if (!authError(e)) {
        throw e;
      }
 else       if (provider.wasCancelled()) {
        return GeneralResult.CANCELLED;
      }
    }
  }
  return GeneralResult.NOT_AUTHORIZED;
}
