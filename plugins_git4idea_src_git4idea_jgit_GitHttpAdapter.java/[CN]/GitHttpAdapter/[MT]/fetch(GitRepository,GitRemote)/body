{
  GitFetchResult.Type resultType;
  try {
    final Git git=convertToGit(repository);
    final GitHttpCredentialsProvider provider=new GitHttpCredentialsProvider(repository.getProject(),remote);
    resultType=callWithAuthRetry(new MyRunnable(){
      @Override public void run() throws InvalidRemoteException {
        FetchCommand fetchCommand=git.fetch();
        fetchCommand.setRemote(remote.getName());
        fetchCommand.setCredentialsProvider(provider);
        fetchCommand.call();
      }
    }
,provider);
  }
 catch (  IOException e) {
    LOG.info("Exception while fetching " + remote + " in "+ repository.toLogString(),e);
    return GitFetchResult.error(e);
  }
catch (  InvalidRemoteException e) {
    LOG.info("Exception while fetching " + remote + " in "+ repository.toLogString(),e);
    return GitFetchResult.error(e);
  }
  return new GitFetchResult(resultType);
}
