{
  return new XmlElementPattern.Capture().with(new PatternCondition<XmlElement>("withDom"){
    public boolean accepts(    @NotNull final XmlElement xmlElement,    final MatchingContext matchingContext,    @NotNull final TraverseContext traverseContext){
      final DomManager manager=DomManager.getDomManager(xmlElement.getProject());
      if (xmlElement instanceof XmlAttribute) {
        return pattern.getCondition().accepts(manager.getDomElement((XmlAttribute)xmlElement),matchingContext,traverseContext);
      }
      if (xmlElement instanceof XmlTag) {
        return pattern.getCondition().accepts(manager.getDomElement((XmlTag)xmlElement),matchingContext,traverseContext);
      }
      return false;
    }
  }
);
}
