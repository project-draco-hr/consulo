{
  final DataContext dataContext=e.getDataContext();
  final Project project=(Project)dataContext.getData(DataConstants.PROJECT);
  CommandProcessor.getInstance().executeCommand(project,new Runnable(){
    public void run(){
      final FileEditorManagerEx fileEditorManager=FileEditorManagerEx.getInstanceEx(project);
      EditorWindow window=(EditorWindow)dataContext.getData(DataConstantsEx.EDITOR_WINDOW);
      if (window == null) {
        window=fileEditorManager.getCurrentWindow();
      }
      final VirtualFile vFile=(VirtualFile)dataContext.getData(DataConstants.VIRTUAL_FILE);
      if (window != null && vFile != null && window.isFileOpen(vFile)) {
        window.closeFile(vFile);
      }
    }
  }
,"Close Active Editor",null);
}
