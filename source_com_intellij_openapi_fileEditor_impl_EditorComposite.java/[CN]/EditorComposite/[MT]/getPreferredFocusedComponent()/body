{
  Component component=myFocusWatcher.getFocusedComponent();
  if (!(component instanceof JComponent) || !component.isShowing() || !component.isEnabled()|| !component.isFocusable()) {
    return getSelectedEditor().getPreferredFocusedComponent();
  }
 else {
    return (JComponent)component;
  }
}
