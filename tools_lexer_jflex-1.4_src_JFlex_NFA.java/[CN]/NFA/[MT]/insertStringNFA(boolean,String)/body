{
  int start=numStates;
  int i;
  for (i=0; i < letters.length(); i++) {
    if (caseless) {
      char c=letters.charAt(i);
      int lower=classes.getClassCode(Character.toLowerCase(c));
      int upper=classes.getClassCode(Character.toUpperCase(c));
      addTransition(i + start,lower,i + start + 1);
      if (upper != lower)       addTransition(i + start,upper,i + start + 1);
    }
 else {
      addTransition(i + start,classes.getClassCode(letters.charAt(i)),i + start + 1);
    }
  }
  return new IntPair(start,i + start);
}
