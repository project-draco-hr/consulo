{
  final PsiType type=expression.getType();
  if (type == null) {
    throw new EvaluateRuntimeException(EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.unknown.expression.type",expression.getText())));
  }
  final PsiExpression operandExpression=expression.getOperand();
  if (operandExpression == null) {
    throw new EvaluateRuntimeException(EvaluateExceptionUtil.createEvaluateException(DebuggerBundle.message("evaluation.error.unknown.expression.operand",expression.getText())));
  }
  operandExpression.accept(this);
  final Evaluator operand=myResult;
  final IElementType opType=expression.getOperationSign().getTokenType();
  if (opType == JavaTokenType.PLUSPLUS || opType == JavaTokenType.MINUSMINUS) {
    final boolean isPlus=opType == JavaTokenType.PLUSPLUS;
    try {
      PsiElementFactory elementFactory=JavaPsiFacade.getInstance(expression.getProject()).getElementFactory();
      PsiExpression one=elementFactory.createExpressionFromText("1",null);
      one.accept(this);
      myResult=new AssignmentEvaluator(operand,new BinaryExpressionEvaluator(operand,myResult,isPlus ? JavaTokenType.PLUS : JavaTokenType.MINUS,type.getCanonicalText()));
    }
 catch (    IncorrectOperationException e) {
      LOG.error(e);
    }
  }
 else {
    myResult=new UnaryExpressionEvaluator(opType,type.getCanonicalText(),operand,expression.getOperationSign().getText());
  }
}
