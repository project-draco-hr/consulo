{
  VirtualFile[] children=fromDirectory.getChildren();
  if (children.length > 0) {
    final FileTypeManager typeManager=FileTypeManager.getInstance();
    for (int idx=0; idx < children.length; idx++) {
      VirtualFile child=children[idx];
      if (child.isDirectory()) {
        addRecursively(container,child,fileType);
      }
 else {
        if (fileType == null || fileType.equals(typeManager.getFileTypeByFile(child))) {
          container.add(child);
        }
      }
    }
  }
}
