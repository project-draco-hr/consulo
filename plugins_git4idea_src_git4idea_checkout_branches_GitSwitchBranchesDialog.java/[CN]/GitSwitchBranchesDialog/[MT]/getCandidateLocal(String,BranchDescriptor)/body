{
  if (StringUtil.isEmpty(value) || !value.startsWith(REMOTES_PREFIX)) {
    return null;
  }
  int p=value.indexOf('/',REMOTES_PREFIX.length() + 1);
  String candidate=null;
  if (p != -1) {
    String c=value.substring(p + 1);
    if (!d.existingBranches.contains(c)) {
      candidate=c;
    }
 else {
      for (int i=2; i < Integer.MAX_VALUE; i++) {
        String cn=c + i;
        if (!d.existingBranches.contains(cn)) {
          candidate=cn;
          break;
        }
      }
    }
    if ("HEAD".equals(candidate)) {
      final String rootPath=d.root.getPath();
      String newRef=resolveHead(value,rootPath);
      candidate=newRef == null ? null : getCandidateLocal(newRef,d);
    }
  }
  return candidate;
}
