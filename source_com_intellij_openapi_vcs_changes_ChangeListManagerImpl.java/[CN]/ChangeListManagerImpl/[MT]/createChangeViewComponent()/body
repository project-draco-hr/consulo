{
  JPanel panel=new JPanel(new BorderLayout());
  DefaultActionGroup toolBarGroup=new DefaultActionGroup();
  RefreshAction refreshAction=new RefreshAction();
  refreshAction.registerCustomShortcutSet(CommonShortcuts.getRerun(),panel);
  AddChangeListAction newChangeListAction=new AddChangeListAction();
  newChangeListAction.registerCustomShortcutSet(CommonShortcuts.getNew(),panel);
  final RemoveChangeListAction removeChangeListAction=new RemoveChangeListAction();
  removeChangeListAction.registerCustomShortcutSet(CommonShortcuts.DELETE,panel);
  final ShowDiffAction diffAction=new ShowDiffAction();
  diffAction.registerCustomShortcutSet(new CustomShortcutSet(KeyStroke.getKeyStroke(KeyEvent.VK_D,SystemInfo.isMac ? KeyEvent.META_DOWN_MASK : KeyEvent.CTRL_DOWN_MASK)),panel);
  final MoveChangesToAnotherListAction toAnotherListAction=new MoveChangesToAnotherListAction();
  toAnotherListAction.registerCustomShortcutSet(CommonShortcuts.getMove(),panel);
  final SetDefaultChangeListAction setDefaultChangeListAction=new SetDefaultChangeListAction();
  final CommitAction commitAction=new CommitAction();
  toolBarGroup.add(refreshAction);
  toolBarGroup.add(commitAction);
  toolBarGroup.add(newChangeListAction);
  toolBarGroup.add(removeChangeListAction);
  toolBarGroup.add(setDefaultChangeListAction);
  toolBarGroup.add(toAnotherListAction);
  toolBarGroup.add(diffAction);
  final ActionToolbar toolbar=ActionManager.getInstance().createActionToolbar("ChangeView",toolBarGroup,false);
  panel.add(toolbar.getComponent(),BorderLayout.WEST);
  panel.add(new JScrollPane(myView),BorderLayout.CENTER);
  DefaultActionGroup menuGroup=new DefaultActionGroup();
  menuGroup.add(refreshAction);
  menuGroup.add(commitAction);
  menuGroup.add(newChangeListAction);
  menuGroup.add(removeChangeListAction);
  menuGroup.add(setDefaultChangeListAction);
  menuGroup.add(toAnotherListAction);
  menuGroup.add(diffAction);
  menuGroup.addSeparator();
  menuGroup.add(ActionManager.getInstance().getAction(IdeActions.GROUP_VERSION_CONTROLS));
  menuGroup.addSeparator();
  menuGroup.add(ActionManager.getInstance().getAction(IdeActions.ACTION_EDIT_SOURCE));
  myView.setMenuActions(menuGroup);
  myProgressLabel=new JLabel();
  panel.add(myProgressLabel,BorderLayout.NORTH);
  myView.installDndSupport(this);
  return panel;
}
