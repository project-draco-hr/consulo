{
  if (myUnversionedFilesHolder.containsFile(file))   return FileStatus.UNKNOWN;
  if (myModifiedWithoutEditingHolder.containsFile(file))   return FileStatus.HIJACKED;
  if (myIgnoredFilesHolder.containsFile(file))   return FileStatus.IGNORED;
  final Change change=getChange(file);
  if (change != null) {
    final FilePath beforePath=ChangesUtil.getBeforePath(change);
    final FilePath afterPath=ChangesUtil.getAfterPath(change);
    if (afterPath != null && beforePath != null && !beforePath.equals(afterPath)) {
      String revisionPath=FileUtil.toSystemIndependentName(beforePath.getPath());
      if (FileUtil.pathsEqual(revisionPath,file.getPath())) {
        return FileStatus.DELETED;
      }
    }
    return change.getFileStatus();
  }
  if (mySwitchedFilesHolder.containsFile(file))   return FileStatus.SWITCHED;
  return FileStatus.NOT_CHANGED;
}
