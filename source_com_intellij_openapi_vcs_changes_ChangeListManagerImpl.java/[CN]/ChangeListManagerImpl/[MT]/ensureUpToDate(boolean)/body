{
  if (!myInitialized)   return true;
  final boolean ok=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      final ProgressIndicator indicator=ProgressManager.getInstance().getProgressIndicator();
      if (indicator != null) {
        indicator.setText(VcsBundle.message("commit.wait.util.synced.message"));
      }
synchronized (myPendingUpdatesLock) {
        scheduleUpdate(10);
        while (ourUpdateAlarm.getActiveRequestCount() > 0 || myUpdateInProgress) {
          if (indicator != null && indicator.isCanceled())           break;
          try {
            myPendingUpdatesLock.wait(100);
          }
 catch (          InterruptedException e) {
            break;
          }
        }
      }
    }
  }
,VcsBundle.message("commit.wait.util.synced.title"),canBeCanceled,myProject);
  if (ok) {
    refreshView();
  }
  return ok;
}
