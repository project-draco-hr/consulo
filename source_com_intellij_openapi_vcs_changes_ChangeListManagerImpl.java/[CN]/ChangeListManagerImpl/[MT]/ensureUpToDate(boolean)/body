{
  final boolean ok=ProgressManager.getInstance().runProcessWithProgressSynchronously(new Runnable(){
    public void run(){
      ProgressManager.getInstance().getProgressIndicator().setText(VcsBundle.message("commit.wait.util.synced.message"));
synchronized (myPendingUpdatesLock) {
        scheduleUpdate(0);
        while (myUpdateAlarm.getActiveRequestCount() > 0) {
          try {
            myPendingUpdatesLock.wait();
          }
 catch (          InterruptedException e) {
            break;
          }
        }
      }
    }
  }
,VcsBundle.message("commit.wait.util.synced.title"),canBeCanceled,myProject);
  if (ok) {
    refreshView();
  }
  return ok;
}
