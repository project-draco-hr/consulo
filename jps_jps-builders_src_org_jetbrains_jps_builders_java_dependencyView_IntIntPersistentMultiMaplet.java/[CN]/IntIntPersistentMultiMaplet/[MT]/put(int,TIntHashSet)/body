{
  try {
    myCache.remove(key);
    myMap.appendData(key,new PersistentHashMap.ValueDataAppender(){
      public void append(      final DataOutput out) throws IOException {
        final Ref<IOException> exRef=new Ref<IOException>();
        value.forEach(new TIntProcedure(){
          @Override public boolean execute(          int value){
            try {
              out.writeInt(value);
            }
 catch (            IOException e) {
              exRef.set(e);
              return false;
            }
            return true;
          }
        }
);
        final IOException exception=exRef.get();
        if (exception != null) {
          throw exception;
        }
      }
    }
);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
