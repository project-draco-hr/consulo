{
  final CheckForUpdateResult result=(forcedChannel == null ? UpdateChecker.checkForUpdates() : UpdateChecker.checkForUpdates(forcedChannel));
  final List<PluginDownloader> updatedPlugins=UpdateChecker.updatePlugins(true,settingsConfigurable);
  if (result.getState() == UpdateStrategy.State.CONNECTION_ERROR) {
    UpdateChecker.showConnectionErrorDialog();
    return;
  }
  if (result.getState() != UpdateStrategy.State.LOADED) {
    return;
  }
  if (result.hasNewBuildInSelectedChannel()) {
    UpdateSettings.getInstance().LAST_TIME_CHECKED=System.currentTimeMillis();
    UpdateSettings.getInstance().setSelectedChannelId(result.getSelected().getId());
    UpdateChecker.showUpdateInfoDialog(enableLink,result.getSelected(),updatedPlugins);
  }
 else {
    UpdateChecker.showNoUpdatesDialog(enableLink,updatedPlugins,true);
  }
}
