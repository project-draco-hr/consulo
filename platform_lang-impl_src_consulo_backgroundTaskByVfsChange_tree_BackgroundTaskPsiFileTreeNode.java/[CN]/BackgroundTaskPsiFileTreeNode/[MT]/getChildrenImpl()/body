{
  VirtualFile ourVirtualFile=getVirtualFile();
  if (ourVirtualFile == null) {
    return super.getChildrenImpl();
  }
  BackgroundTaskByVfsChangeManager vfsChangeManager=BackgroundTaskByVfsChangeManager.getInstance(getProject());
  List<BackgroundTaskByVfsChangeTask> tasks=vfsChangeManager.findTasks(ourVirtualFile);
  if (tasks.isEmpty()) {
    return super.getChildrenImpl();
  }
  List<VirtualFile> generatedFiles=new ArrayList<VirtualFile>();
  for (  BackgroundTaskByVfsChangeTask task : tasks) {
    Collections.addAll(generatedFiles,task.getGeneratedFiles());
  }
  if (generatedFiles.isEmpty()) {
    return super.getChildrenImpl();
  }
  PsiFile[] psiFiles=PsiUtilBase.virtualToPsiFiles(generatedFiles,myProject);
  List<AbstractTreeNode> newChildren=new ArrayList<AbstractTreeNode>(psiFiles.length);
  for (  PsiFile psiFile : psiFiles) {
    newChildren.add(new PsiFileNode(getProject(),psiFile,getSettings()));
  }
  return newChildren;
}
