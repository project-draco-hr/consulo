{
  final List<String> duplicateNames=collectDuplicateModuleNames(model);
  model.visit(new MavenProjectModel.PlainNodeVisitor(){
    public void visit(    MavenProjectModel.Node node){
      MavenId id=node.getMavenId();
      String name=node.getModule() != null ? node.getModule().getName() : generateModuleName(id,duplicateNames);
      node.setModuleName(name);
    }
  }
);
}
