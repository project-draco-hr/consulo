{
  StubTree stubHolder=myStub != null ? myStub.get() : null;
  if (stubHolder == null) {
    if (getTreeElement() == null) {
      final VirtualFile vFile=getVirtualFile();
      stubHolder=StubTree.readFromVFile(vFile,getProject());
      if (stubHolder != null) {
        myStub=new WeakReference<StubTree>(stubHolder);
        ((PsiFileStubImpl)stubHolder.getRoot()).setPsi(this);
      }
    }
  }
  return stubHolder;
}
