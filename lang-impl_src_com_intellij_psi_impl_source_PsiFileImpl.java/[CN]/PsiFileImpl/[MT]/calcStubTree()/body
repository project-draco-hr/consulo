{
synchronized (myStubLock) {
    final FileElement fileElement=(FileElement)calcTreeElement();
    StubTree tree=fileElement.getUserData(STUB_TREE_IN_PARSED_TREE);
    if (tree == null) {
      try {
        final StubElement currentStubTree=((IStubFileElementType)getContentElementType()).getBuilder().buildStubTree(this);
        tree=new StubTree((PsiFileStub)currentStubTree);
        bindFakeStubsToTree(tree);
        fileElement.putUserData(STUB_TREE_IN_PARSED_TREE,tree);
      }
 catch (      ClassCastException ex) {
        int a=1;
      }
    }
    return tree;
  }
}
