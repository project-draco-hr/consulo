{
  File moduleFile=new File(getTestRoot(),"test.iml");
  Module module=createModule(moduleFile);
  final ModuleRootManagerImpl moduleRootManager=(ModuleRootManagerImpl)ModuleRootManager.getInstance(module);
  final ModifiableRootModel rootModel=moduleRootManager.getModifiableModel();
  rootModel.getModuleExtensionOld(CompilerModuleExtension.class).inheritCompilerOutputPath(true);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      rootModel.commit();
    }
  }
);
  Element element=new Element("root");
  moduleRootManager.saveState().writeExternal(element);
  assertElementEquals(element,"<root inherit-compiler-output=\"true\">" + "<exclude-output />" + "<orderEntry type=\"sourceFolder\" forTests=\"false\" />"+ "</root>",module);
}
