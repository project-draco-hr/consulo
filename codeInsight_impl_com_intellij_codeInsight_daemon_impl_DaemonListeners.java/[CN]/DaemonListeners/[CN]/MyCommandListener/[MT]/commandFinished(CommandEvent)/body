{
  Object id=event.getCommandGroupId();
  if (id instanceof Document && !worthBothering((Document)id))   return;
  if (myEscPressed) {
    myEscPressed=false;
    if (id instanceof Document) {
      Document document=(Document)id;
      if (!myDaemonCodeAnalyzer.getFileStatusMap().allDirtyScopesAreNull(document)) {
        stopDaemon(true);
      }
    }
  }
 else   if (!myDaemonCodeAnalyzer.getUpdateProgress().isRunning()) {
    stopDaemon(true);
  }
}
