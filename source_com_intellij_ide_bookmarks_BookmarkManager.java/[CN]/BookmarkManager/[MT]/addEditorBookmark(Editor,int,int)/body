{
  Document document=editor.getDocument();
  PsiFile psiFile=PsiDocumentManager.getInstance(myProject).getPsiFile(document);
  if (psiFile == null)   return;
  final VirtualFile virtualFile=psiFile.getVirtualFile();
  if (virtualFile == null)   return;
  String name=virtualFile.getPath();
  if (name == null)   return;
  RangeHighlighter lineMarker=((MarkupModelEx)document.getMarkupModel(myProject)).addPersistentLineHighlighter(lineIndex,HighlighterLayer.ERROR + 1,null);
  if (lineMarker == null)   return;
  EditorBookmark bookmark=new EditorBookmark(document,myProject,lineMarker,getAutoDescription(editor,lineIndex),number);
  myEditorBookmarks.addBookmark(bookmark);
}
