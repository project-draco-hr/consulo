{
  if (FILEMERGE_PLUGIN == null) {
    throw new VcsException("Could not provide dynamic extension file");
  }
  Receiver receiver=new Receiver();
  SocketServer server=new SocketServer(receiver);
  try {
    int port=server.start();
    List<String> hgOptions=Arrays.asList("--config","extensions.hg4ideafilemerge=" + FILEMERGE_PLUGIN.getAbsolutePath(),"--config","hg4ideafilemerge.port=" + port);
    ensureSuccess(HgCommandService.getInstance(project).execute(repo,hgOptions,"resolve",Arrays.asList(path.getPath())));
  }
 catch (  IOException e) {
    throw new VcsException(e);
  }
  try {
    return receiver.getMergeParticipantsContents();
  }
 catch (  InterruptedException e) {
    return null;
  }
}
