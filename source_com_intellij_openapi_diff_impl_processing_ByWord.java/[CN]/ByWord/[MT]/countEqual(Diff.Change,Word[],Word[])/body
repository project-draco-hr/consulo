{
  int counter=0;
  int position1=0;
  int position2=0;
  while (change != null) {
    if (change.line0 > position1) {
      int same=change.line0 - position1;
      LOG.assertTrue(same == change.line1 - position2);
      for (int i=0; i < same; i++) {
        if (!words1[position1 + i].isWhitespace() && !words2[position2 + i].isWhitespace())         counter++;
      }
      position1+=same;
      position2+=same;
    }
    position1+=change.deleted;
    position2+=change.inserted;
    change=change.link;
  }
  int tailCount=words1.length - position1;
  LOG.assertTrue(tailCount == words2.length - position2);
  while (tailCount > 0) {
    if (!words1[words1.length - tailCount].isWhitespace() && !words2[words2.length - tailCount].isWhitespace())     counter++;
    tailCount--;
  }
  return counter;
}
