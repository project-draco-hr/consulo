{
class MyAsyncUsageConsumer implements AsyncFindUsagesProcessListener {
    final ArrayList<UsageInfo> usages=new ArrayList<UsageInfo>();
    public void foundUsage(    UsageInfo info){
      usages.add(info);
    }
    public int getCount(){
      return usages.size();
    }
    public void findUsagesCompleted(){
    }
  }
  MyAsyncUsageConsumer consumer=new MyAsyncUsageConsumer();
  findUsages(findModel,psiDirectory,project,consumer);
  return consumer.usages;
}
