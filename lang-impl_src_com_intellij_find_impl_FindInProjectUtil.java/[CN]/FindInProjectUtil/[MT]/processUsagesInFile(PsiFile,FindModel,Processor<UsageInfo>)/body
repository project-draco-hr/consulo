{
  return ApplicationManager.getApplication().runReadAction(new Computable<Integer>(){
    public Integer compute(){
      VirtualFile virtualFile=psiFile.getVirtualFile();
      if (virtualFile.isValid()) {
        if (FileTypeManager.getInstance().getFileTypeByFile(virtualFile).isBinary())         return 0;
        final Document document=FileDocumentManager.getInstance().getDocument(virtualFile);
        if (document != null) {
          return addToUsages(document,consumer,findModel,psiFile);
        }
      }
      return 0;
    }
  }
).intValue();
}
