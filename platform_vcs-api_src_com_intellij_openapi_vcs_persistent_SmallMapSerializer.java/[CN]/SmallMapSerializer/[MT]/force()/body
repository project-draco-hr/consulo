{
  if (!myDirty)   return;
  try {
    final ByteArrayOutputStream bos=new ByteArrayOutputStream();
    final DataOutput out=new DataOutputStream(bos);
    out.writeInt(myMap.size());
    for (    Map.Entry<KeyWrapper<K>,V> entry : myMap.entrySet()) {
      myKeyDescriptor.save(out,entry.getKey().myKey);
      myValueExternalizer.save(out,entry.getValue());
    }
    FileUtil.writeToFile(myFile,bos.toByteArray());
  }
 catch (  IOException e) {
    LOG.error(e);
  }
 finally {
    myDirty=false;
  }
}
