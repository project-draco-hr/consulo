def parseurl(url, branches=None):
    'parse url#branch, returning url, branches+[branch]'
    if ('#' not in url):
        return (url, (branches or []))
    (url, branch) = url.split('#', 1)
    return (url, ((branches or []) + [branch]))
