def repository(ui, path='', create=False):
    'return a repository object for the specified path'
    repo = _lookup(path).instance(ui, path, create)
    ui = getattr(repo, 'ui', ui)
    for (name, module) in extensions.extensions():
        hook = getattr(module, 'reposetup', None)
        if hook:
            hook(ui, repo)
    return repo
