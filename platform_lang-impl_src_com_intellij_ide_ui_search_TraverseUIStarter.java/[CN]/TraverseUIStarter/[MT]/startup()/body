{
  final HashMap<SearchableConfigurable,TreeSet<OptionDescription>> options=new HashMap<SearchableConfigurable,TreeSet<OptionDescription>>();
  SearchUtil.processProjectConfigurables(ProjectManager.getInstance().getDefaultProject(),options);
  Element root=new Element(OPTIONS);
  for (  SearchableConfigurable configurable : options.keySet()) {
    Element configurableElement=new Element(CONFIGURABLE);
    final String id=configurable.getId();
    if (id == null)     continue;
    configurableElement.setAttribute(ID,id);
    configurableElement.setAttribute(CONFIGURABLE_NAME,configurable.getDisplayName());
    final TreeSet<OptionDescription> sortedOptions=options.get(configurable);
    writeOptions(configurableElement,sortedOptions);
    if (configurable instanceof KeymapPanel) {
      processKeymap(configurableElement);
    }
 else     if (configurable instanceof OptionsContainingConfigurable) {
      processOptionsContainingConfigurable((OptionsContainingConfigurable)configurable,configurableElement);
    }
 else     if (configurable instanceof PluginManagerConfigurable) {
      final TreeSet<OptionDescription> descriptions=wordsToOptionDescriptors(Collections.singleton(AvailablePluginsManagerMain.MANAGE_REPOSITORIES));
      for (      OptionDescription description : descriptions) {
        append(null,AvailablePluginsManagerMain.MANAGE_REPOSITORIES,description.getOption(),configurableElement);
      }
    }
 else     if (configurable instanceof AllFileTemplatesConfigurable) {
      processFileTemplates(configurableElement);
    }
    root.addContent(configurableElement);
    configurable.disposeUIResources();
  }
  final File file=new File(OUTPUT_PATH);
  if (!file.isFile()) {
    file.getParentFile().mkdirs();
    file.createNewFile();
  }
  JDOMUtil.writeDocument(new Document(root),OUTPUT_PATH,"\n");
  System.out.println("Searchable options index builder completed");
  ((ApplicationEx)ApplicationManager.getApplication()).exit(true);
}
