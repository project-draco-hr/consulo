{
  final HashMap<SearchableConfigurable,TreeSet<OptionDescription>> options=new HashMap<SearchableConfigurable,TreeSet<OptionDescription>>();
  SearchUtil.processProjectConfigurables(ProjectManager.getInstance().getDefaultProject(),options);
  Element root=new Element(OPTIONS);
  for (  SearchableConfigurable configurable : options.keySet()) {
    Element configurableElement=new Element(CONFIGURABLE);
    final String id=configurable.getId();
    if (id == null)     continue;
    configurableElement.setAttribute(ID,id);
    configurableElement.setAttribute(CONFIGURABLE_NAME,configurable.getDisplayName());
    final TreeSet<OptionDescription> sortedOptions=options.get(configurable);
    for (    OptionDescription option : sortedOptions) {
      append(option.getPath(),option.getHit(),option.getOption(),configurableElement);
    }
    if (configurable instanceof KeymapPanel) {
      processKeymap(configurableElement);
    }
 else     if (configurable instanceof OptionsContainingConfigurable) {
      processOptionsContainingConfigurable((OptionsContainingConfigurable)configurable,configurableElement);
    }
    root.addContent(configurableElement);
    configurable.disposeUIResources();
  }
  final File file=new File(OUTPUT_PATH);
  if (!file.isFile()) {
    file.getParentFile().mkdirs();
    file.createNewFile();
  }
  JDOMUtil.writeDocument(new Document(root),OUTPUT_PATH,"\n");
  System.out.println("Searchable options index builder completed");
  ((ApplicationEx)ApplicationManager.getApplication()).exit(true);
}
