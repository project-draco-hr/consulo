{
  if (type instanceof PsiArrayType) {
    PsiType componentType=type.getDeepComponentType();
    if (componentType instanceof PsiClassType) {
      final PsiClassType classType=(PsiClassType)componentType;
      PsiType[] parameters=classType.getParameters();
      for (      PsiType parameter : parameters) {
        if (!(parameter instanceof PsiWildcardType) || ((PsiWildcardType)parameter).getBound() != null) {
          return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,element,JavaErrorMessages.message("generic.array.creation"));
        }
      }
      final PsiClass resolved=((PsiClassType)PsiUtil.convertAnonymousToBaseType(classType)).resolve();
      if (resolved instanceof PsiTypeParameter) {
        return HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,element,JavaErrorMessages.message("generic.array.creation"));
      }
    }
  }
  return null;
}
