{
  final GrStatement elseBranch=getElseBranch();
  if (elseBranch == null || newBranch == null) {
    throw new IncorrectOperationException();
  }
  ASTNode oldBodyNode=elseBranch.getNode();
  if (oldBodyNode.getTreePrev() != null && GroovyTokenTypes.mNLS.equals(oldBodyNode.getTreePrev().getElementType())) {
    ASTNode whiteNode=GroovyPsiElementFactory.getInstance(getProject()).createWhiteSpace().getNode();
    getNode().replaceChild(oldBodyNode.getTreePrev(),whiteNode);
  }
  this.getNode().replaceChild(oldBodyNode,newBranch.getNode());
  ASTNode newNode=newBranch.getNode();
  if (!(newNode.getPsi() instanceof GrCondition)) {
    throw new IncorrectOperationException();
  }
  return (GrStatement)newNode.getPsi();
}
