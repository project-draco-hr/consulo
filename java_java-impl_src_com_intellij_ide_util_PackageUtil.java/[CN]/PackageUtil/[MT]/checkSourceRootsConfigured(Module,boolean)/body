{
  VirtualFile[] sourceRoots=ModuleRootManager.getInstance(module).getSourceRoots();
  if (sourceRoots.length == 0) {
    if (!askUserToSetupSourceRoots) {
      return false;
    }
    Project project=module.getProject();
    Messages.showErrorDialog(project,ProjectBundle.message("module.source.roots.not.configured.error",module.getName()),ProjectBundle.message("module.source.roots.not.configured.title"));
    ProjectSettingsService.getInstance(project).showModuleConfigurationDialog(module.getName(),CommonContentEntriesEditor.NAME);
    sourceRoots=ModuleRootManager.getInstance(module).getSourceRoots();
    if (sourceRoots.length == 0) {
      return false;
    }
  }
  return true;
}
