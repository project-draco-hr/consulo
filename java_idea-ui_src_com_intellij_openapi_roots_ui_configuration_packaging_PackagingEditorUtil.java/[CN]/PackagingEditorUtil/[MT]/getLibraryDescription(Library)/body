{
  String name=library.getName();
  VirtualFile[] files=library.getFiles(OrderRootType.CLASSES);
  if (name != null) {
    return "'" + name + "' "+ LibraryElementPresentation.getLibraryTableDisplayName(library);
  }
 else   if (files.length > 0) {
    Module module=((LibraryImpl)library).getModule();
    final String description;
    if (module == null) {
      description="(" + LibraryElementPresentation.getLibraryTableDisplayName(library) + ")";
    }
 else {
      description=ProjectBundle.message("node.text.library.of.module",module.getName());
    }
    return files[0].getName() + " " + description;
  }
 else {
    return ProjectBundle.message("library.empty.item");
  }
}
