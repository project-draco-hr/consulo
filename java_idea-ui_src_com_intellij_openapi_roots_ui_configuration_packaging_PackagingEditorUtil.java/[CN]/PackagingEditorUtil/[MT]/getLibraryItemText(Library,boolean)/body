{
  String name=library.getName();
  VirtualFile[] files=library.getFiles(OrderRootType.CLASSES);
  if (name != null) {
    return name + (includeTableName ? LibraryElementPresentation.getLibraryTableComment(library) : "");
  }
 else   if (files.length > 0) {
    return files[0].getName() + (includeTableName ? LibraryElementPresentation.getLibraryTableComment(library) : "");
  }
 else {
    return ProjectBundle.message("library.empty.item");
  }
}
