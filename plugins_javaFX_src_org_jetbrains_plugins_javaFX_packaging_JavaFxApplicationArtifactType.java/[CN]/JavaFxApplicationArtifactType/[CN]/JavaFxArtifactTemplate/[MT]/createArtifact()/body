{
  Module module=null;
  if (myModules.size() == 1) {
    module=myModules.get(0);
  }
 else {
    final ChooseModulesDialog dialog=new ChooseModulesDialog(myModules.get(0).getProject(),myModules,"Select Module","Selected module output would to be included in the artifact");
    dialog.setSingleSelectionMode();
    dialog.show();
    if (dialog.isOK()) {
      final List<Module> elements=dialog.getChosenElements();
      if (elements.isEmpty()) {
        return null;
      }
      module=elements.get(0);
    }
  }
  if (module == null)   return null;
  final CompositePackagingElement<?> rootElement=JavaFxApplicationArtifactType.this.createRootElement(module.getName());
  final CompositePackagingElement<?> subElement=PackagingElementFactory.getInstance().createArchive(FileUtil.sanitizeFileName(module.getName()) + ".jar");
  final PackagingElement<?> moduleOutputElement=PackagingElementFactory.getInstance().createModuleOutput(module);
  subElement.addFirstChild(moduleOutputElement);
  rootElement.addFirstChild(subElement);
  return new NewArtifactConfiguration(rootElement,module.getName(),JavaFxApplicationArtifactType.this);
}
