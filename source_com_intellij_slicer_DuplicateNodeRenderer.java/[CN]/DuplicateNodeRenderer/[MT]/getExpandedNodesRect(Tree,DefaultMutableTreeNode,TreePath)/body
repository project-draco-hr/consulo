{
  Rectangle rect=tree.getRowBounds(tree.getRowForPath(path));
  if (tree.isExpanded(path)) {
    Enumeration<DefaultMutableTreeNode> children=node.children();
    while (children.hasMoreElements()) {
      DefaultMutableTreeNode child=children.nextElement();
      TreePath childPath=path.pathByAddingChild(child);
      rect=rect.union(getExpandedNodesRect(tree,child,childPath));
    }
  }
  return rect;
}
