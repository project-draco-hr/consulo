{
  MutableGraph graph=GraphTestUtils.getNewMutableGraph(inputGraph);
  ShortFragmentGenerator shortFragmentGenerator=new ShortFragmentGenerator(graph);
  shortFragmentGenerator.setUnconcealedNodeFunction(parseUnhiddenNodes(graph,unhiddenNodeRows));
  Node commitNode=getCommitNode(graph,rowIndex);
  GraphFragment fragment;
  if (down) {
    fragment=shortFragmentGenerator.getDownShortFragment(commitNode);
  }
 else {
    fragment=shortFragmentGenerator.getUpShortFragment(commitNode);
  }
  Assert.assertEquals(fragmentStr,toStr(fragment));
}
