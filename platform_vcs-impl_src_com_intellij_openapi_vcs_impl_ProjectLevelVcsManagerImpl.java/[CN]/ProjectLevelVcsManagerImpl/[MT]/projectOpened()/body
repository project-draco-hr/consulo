{
  final StartupManager manager=StartupManager.getInstance(myProject);
  manager.registerPostStartupActivity(new DumbAwareRunnable(){
    @Override public void run(){
      ToolWindowManager toolWindowManager=ToolWindowManager.getInstance(myProject);
      if (toolWindowManager != null) {
        ToolWindow toolWindow=toolWindowManager.registerToolWindow(ToolWindowId.VCS,true,ToolWindowAnchor.BOTTOM,myProject,true);
        myContentManager=toolWindow.getContentManager();
        toolWindow.setIcon(AllIcons.Toolwindows.VcsSmallTab);
        toolWindow.installWatcher(myContentManager);
      }
 else {
        myContentManager=ContentFactory.SERVICE.getInstance().createContentManager(true,myProject);
      }
      if (!ApplicationManager.getApplication().isUnitTestMode()) {
        VcsRootChecker[] checkers=Extensions.getExtensions(VcsRootChecker.EXTENSION_POINT_NAME);
        if (checkers.length != 0) {
          VcsRootScanner.start(myProject,checkers);
        }
      }
    }
  }
);
}
