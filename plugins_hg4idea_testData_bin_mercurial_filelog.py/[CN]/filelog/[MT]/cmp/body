def cmp(self, node, text):
    'compare text with a given file revision'
    if (text.startswith('\x01\n') or self.renamed(node)):
        t2 = self.read(node)
        return (t2 != text)
    return revlog.revlog.cmp(self, node, text)
