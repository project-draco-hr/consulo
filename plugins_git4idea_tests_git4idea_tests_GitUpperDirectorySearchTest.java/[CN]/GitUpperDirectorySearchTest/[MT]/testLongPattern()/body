{
  final String dirName=SystemInfo.isFileSystemCaseSensitive ? "somedir/long/path" : "somEdir/lonG/path";
  final File file=new File(myProjectFixture.getProject().getBaseDir().getPath(),"somedir");
  file.mkdir();
  final File childDir=new File(file,"long/path\\and/a/path/to");
  childDir.mkdirs();
  final File a=new File(childDir,"a.txt");
  a.createNewFile();
  final VirtualFile dir=myLocalFileSystem.refreshAndFindFileByIoFile(file);
  final VirtualFile childFile=myLocalFileSystem.refreshAndFindFileByIoFile(a);
  Assert.assertNotNull(dir);
  Assert.assertNotNull(childFile);
  final VirtualFile result=GitUtil.getPossibleBase(childFile,dirName.split("/"));
  Assert.assertEquals(result,dir);
}
