{
  PsiElement psiParent=parent.getPsi();
  PsiElement psiChild=myIsPhysicalScope && !(child instanceof ChameleonElement) ? child.getPsi() : null;
  PsiTreeChangeEventImpl event=null;
  if (psiParent != null && psiChild != null) {
    event=new PsiTreeChangeEventImpl(myPsiManager);
    event.setParent(psiParent);
    event.setChild(psiChild);
    myPsiManager.beforeChildRemoval(event);
  }
  myEvent.addElementaryChange(child,ChangeInfoImpl.create(ChangeInfo.REMOVED,child));
  TreeUtil.remove((TreeElement)child);
  ((CompositeElement)parent).subtreeChanged();
}
