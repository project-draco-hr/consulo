{
  int startToUse=start;
  for (int i=end - 1; i >= start; i--) {
    if (text.charAt(i) == '\n') {
      startToUse=i + 1;
      break;
    }
  }
  int result=0;
  EditorColorsScheme colorsScheme=myEditor.getColorsScheme();
  mySharedKey.fontName=colorsScheme.getEditorFontName();
  mySharedKey.fontSize=colorsScheme.getEditorFontSize();
  mySharedKey.fontType=fontType;
  for (int i=startToUse; i < end; i++) {
    char c=text.charAt(i);
    if (c != '\t') {
      mySharedKey.c=c;
      result+=charWidth(c);
      continue;
    }
    result+=EditorUtil.nextTabStop(x + result,myEditor) - result - x;
  }
  return result;
}
