{
  if (!(psiFile instanceof GroovyFileBase)) {
    return super.checkFile(psiFile,inspectionManager,isOnTheFly);
  }
  final GroovyFileBase groovyFile=(GroovyFileBase)psiFile;
  final ProblemsHolder problemsHolder=new ProblemsHolder(inspectionManager,psiFile,isOnTheFly);
  final BaseInspectionVisitor visitor=buildGroovyVisitor(problemsHolder,isOnTheFly);
  groovyFile.accept(visitor);
  final List<ProblemDescriptor> problems=problemsHolder.getResults();
  if (problems == null) {
    return null;
  }
  return problems.toArray(new ProblemDescriptor[problems.size()]);
}
