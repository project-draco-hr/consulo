{
  final ActionBehaviour<T> behaviour=new ActionBehaviour<T>(){
    @Override public T performAction(    final AnActionEvent e){
      final T newElement=myCopier.convert((T)myList.getSelectedValue());
      handleNewElement(newElement);
      return newElement;
    }
    @Override public void updateAction(    final AnActionEvent e){
      final boolean applicable=myList.getSelectedIndices().length == 1;
      final Presentation presentation=e.getPresentation();
      if (!applicable) {
        presentation.setEnabled(applicable);
        return;
      }
      final boolean enabled=myEnabled.value((T)myList.getSelectedValue());
      presentation.setEnabled(enabled);
      presentation.setVisible(enabled || myVisibleWhenDisabled);
    }
  }
;
  return createAction(behaviour);
}
