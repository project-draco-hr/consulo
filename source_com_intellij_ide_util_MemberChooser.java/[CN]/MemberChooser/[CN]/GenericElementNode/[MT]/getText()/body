{
  PsiSubstitutor substitutor=myCandidate.getSubstitutor();
  if (substitutor == PsiSubstitutor.EMPTY)   return super.getText();
  if (myElement instanceof PsiClass) {
    PsiType classType=myElement.getManager().getElementFactory().createType((PsiClass)myElement,substitutor);
    return PsiFormatUtil.formatType(classType,0,PsiSubstitutor.EMPTY);
  }
 else   if (myElement instanceof PsiMethod) {
    int methodOptions=PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_TYPE | PsiFormatUtil.TYPE_AFTER| PsiFormatUtil.SHOW_PARAMETERS;
    int paramOptions=PsiFormatUtil.SHOW_NAME | PsiFormatUtil.SHOW_TYPE | PsiFormatUtil.TYPE_AFTER;
    return PsiFormatUtil.formatMethod((PsiMethod)myElement,substitutor,methodOptions,paramOptions);
  }
 else {
    return super.getText();
  }
}
