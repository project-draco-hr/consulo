{
  Set set=new LinkedHashSet();
  for (int i=0; i < mySelectedNodes.size(); i++) {
    final Object o=mySelectedNodes.get(i);
    if (o instanceof GenericElementNode) {
      set.add(((GenericElementNode)o).getCandidateInfo());
    }
 else     if (o instanceof ElementNode) {
      PsiElement element=((ElementNode)o).getElement();
      if (element != null)       set.add(element);
    }
 else     if (o instanceof CmpFieldNode) {
      set.add(((CmpFieldNode)o).getField());
    }
 else     if (o instanceof CmrFieldNode) {
      set.add(((CmrFieldNode)o).getField());
    }
  }
  mySelectedElements=new WeakReference[set.size()];
  int i=0;
  for (Iterator it=set.iterator(); it.hasNext(); i++) {
    mySelectedElements[i]=new WeakReference(it.next());
  }
}
