{
  DefaultMutableTreeNode uiNode=null;
  int rowsCreated=0;
  for (int i=uiParentNode.getChildCount() - 1; i >= 0; i--) {
    DefaultMutableTreeNode child=(DefaultMutableTreeNode)uiParentNode.getChildAt(i);
    if (settingsNode.getCurrent().equals(child.getUserObject())) {
      uiNode=child;
      break;
    }
  }
  if (uiNode == null) {
    uiNode=new DefaultMutableTreeNode(settingsNode.getCurrent());
    uiParentNode.add(uiNode);
    rowsCreated++;
  }
  DefaultMutableTreeNode leaf=uiNode;
  HierarchicalArrangementSettingsNode childSettingsNode=settingsNode.getChild();
  if (childSettingsNode != null) {
    Pair<DefaultMutableTreeNode,Integer> pair=map(uiNode,childSettingsNode);
    leaf=pair.first;
    rowsCreated+=pair.second;
  }
  return Pair.create(leaf,rowsCreated);
}
