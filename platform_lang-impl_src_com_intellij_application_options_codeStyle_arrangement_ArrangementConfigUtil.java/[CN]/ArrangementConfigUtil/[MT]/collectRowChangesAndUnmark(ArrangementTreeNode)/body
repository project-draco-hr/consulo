{
  @NotNull TIntIntHashMap changes=new TIntIntHashMap();
  ArrangementTreeNode root=getRoot(node);
  int row=0;
  Stack<ArrangementTreeNode> nodes=new Stack<ArrangementTreeNode>();
  nodes.push(root);
  while (!nodes.isEmpty()) {
    ArrangementTreeNode n=nodes.pop();
    if (n.isRowSet() && n.getRow() != row) {
      changes.put(n.getRow(),row);
    }
    n.resetRow();
    row++;
    for (int i=n.getChildCount() - 1; i >= 0; i--) {
      nodes.push(n.getChildAt(i));
    }
  }
  return changes;
}
