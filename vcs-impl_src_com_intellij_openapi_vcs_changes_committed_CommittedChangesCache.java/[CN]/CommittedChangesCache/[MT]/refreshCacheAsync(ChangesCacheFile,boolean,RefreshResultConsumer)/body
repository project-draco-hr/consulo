{
  try {
    if (!initIfEmpty && cache.isEmpty()) {
      return;
    }
  }
 catch (  IOException e) {
    LOG.error(e);
    return;
  }
  final Task.Backgroundable task=new Task.Backgroundable(myProject,VcsBundle.message("committed.changes.refresh.progress")){
    public void run(    final ProgressIndicator indicator){
      try {
        final List<CommittedChangeList> list;
        if (initIfEmpty && cache.isEmpty()) {
          list=initCache(cache);
        }
 else {
          list=refreshCache(cache);
        }
        if (consumer != null) {
          consumer.receivedChanges(list);
        }
      }
 catch (      ProcessCanceledException ex) {
      }
catch (      IOException e) {
        LOG.error(e);
      }
catch (      VcsException e) {
        if (consumer != null) {
          consumer.receivedError(e);
        }
      }
    }
  }
;
  myTaskQueue.run(task);
}
