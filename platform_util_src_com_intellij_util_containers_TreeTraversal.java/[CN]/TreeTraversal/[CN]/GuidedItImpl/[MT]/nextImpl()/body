{
  if (guide == null)   return stop();
  while (!stack.isEmpty()) {
    P<T> top=stack.getLast();
    Iterator<? extends T> it=top.iterator(tree);
    boolean hasNext=it.hasNext();
    curResult=null;
    if (top.node != null || hasNext) {
      curChild=hasNext ? it.next() : null;
      curParent=top.node;
      curChildren=top.itle;
      curNoChildren=top.empty;
      guide.consume(this);
    }
    if (!hasNext) {
      stack.removeLast();
    }
    if (curResult != null) {
      return curResult;
    }
  }
  return stop();
}
