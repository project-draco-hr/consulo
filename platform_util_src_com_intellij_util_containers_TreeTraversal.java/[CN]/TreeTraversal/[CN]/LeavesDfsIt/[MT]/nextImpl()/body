{
  while (!stack.isEmpty()) {
    P<T> top=stack.getLast();
    if (top.iterator(tree).hasNext() && !top.empty) {
      T child=top.iterator(tree).next();
      stack.addLast(P.create(child));
    }
 else {
      stack.removeLast();
      if (top.empty)       return stack.isEmpty() ? stop() : top.node;
    }
  }
  return stop();
}
