{
  if (!(collectionType instanceof PsiClassType)) {
    return null;
  }
  final PsiClassType classType=(PsiClassType)collectionType;
  final PsiType[] parameterTypes=classType.getParameters();
  if (parameterTypes.length == 0) {
    return PsiType.getJavaLangObject(context.getManager(),context.getResolveScope());
  }
  final PsiType parameterType=parameterTypes[0];
  if (parameterType == null) {
    return PsiType.getJavaLangObject(context.getManager(),context.getResolveScope());
  }
  if (parameterType instanceof PsiWildcardType) {
    final PsiWildcardType wildcardType=(PsiWildcardType)parameterType;
    return wildcardType.getExtendsBound();
  }
 else   if (parameterType instanceof PsiCapturedWildcardType) {
    final PsiCapturedWildcardType capturedWildcardType=(PsiCapturedWildcardType)parameterType;
    final PsiWildcardType wildcardType=capturedWildcardType.getWildcard();
    return wildcardType.getExtendsBound();
  }
  return parameterType;
}
