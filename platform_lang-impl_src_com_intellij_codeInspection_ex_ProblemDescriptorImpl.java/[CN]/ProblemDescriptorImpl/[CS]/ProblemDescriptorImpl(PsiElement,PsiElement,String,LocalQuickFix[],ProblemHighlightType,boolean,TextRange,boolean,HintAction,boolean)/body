{
  super(fixes,descriptionTemplate);
  myShowTooltip=tooltip;
  myHintAction=hintAction;
  PsiFile startContainingFile=startElement.getContainingFile();
  LOG.assertTrue(startContainingFile != null && startContainingFile.isValid() || startElement.isValid(),startElement);
  PsiFile endContainingFile=startElement == endElement ? startContainingFile : endElement.getContainingFile();
  LOG.assertTrue(startElement == endElement || endContainingFile != null && endContainingFile.isValid() || endElement.isValid(),endElement);
  assertPhysical(startElement);
  if (startElement != endElement)   assertPhysical(endElement);
  final TextRange startElementRange=startElement.getTextRange();
  LOG.assertTrue(startElementRange != null,startElement);
  final TextRange endElementRange=endElement.getTextRange();
  LOG.assertTrue(endElementRange != null,endElement);
  if (startElementRange.getStartOffset() >= endElementRange.getEndOffset()) {
    if (!(startElement instanceof PsiFile && endElement instanceof PsiFile)) {
      LOG.error("Empty PSI elements should not be passed to createDescriptor. Start: " + startElement + ", end: "+ endElement);
    }
  }
  myHighlightType=highlightType;
  final Project project=startContainingFile == null ? startElement.getProject() : startContainingFile.getProject();
  final SmartPointerManager manager=SmartPointerManager.getInstance(project);
  myStartSmartPointer=manager.createSmartPsiElementPointer(startElement,startContainingFile);
  myEndSmartPointer=startElement == endElement ? null : manager.createSmartPsiElementPointer(endElement,endContainingFile);
  myAfterEndOfLine=isAfterEndOfLine;
  myTextRangeInElement=rangeInElement;
}
