{
  final RootsAndBranches rootsAndBranches=new RootsAndBranches(myProject,manager,location,myConnection);
  refreshMergeInfo(rootsAndBranches);
  final DefaultActionGroup popup=new DefaultActionGroup(myVcs.getDisplayName(),true);
  popup.add(rootsAndBranches.getIntegrateAction());
  popup.add(rootsAndBranches.getUndoIntegrateAction());
  popup.add(new ConfigureBranchesAction());
  final ShowHideMergePanel action=new ShowHideMergePanel(manager,rootsAndBranches.getStrategy());
  return new VcsCommittedViewAuxiliary(Collections.<AnAction>singletonList(popup),new Runnable(){
    public void run(){
      if (myMergeInfoRefreshActions != null) {
        myMergeInfoRefreshActions.remove(rootsAndBranches);
      }
    }
  }
,Collections.<AnAction>singletonList(action));
}
