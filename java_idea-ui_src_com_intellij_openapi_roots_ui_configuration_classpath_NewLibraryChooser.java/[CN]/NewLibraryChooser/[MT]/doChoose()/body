{
  final LibraryTablesRegistrar registrar=LibraryTablesRegistrar.getInstance();
  List<LibraryTable> tables=Arrays.asList(myRootModel.getModuleLibraryTable(),registrar.getLibraryTable(myProject),registrar.getLibraryTable());
  CreateNewLibraryDialog dialog=CreateNewLibraryDialog.createDialog(myParentComponent,myProject,this,tables,1);
  final Module contextModule=DataKeys.MODULE_CONTEXT.getData(DataManager.getInstance().getDataContext(myParentComponent));
  dialog.addFileChooserContext(LangDataKeys.MODULE_CONTEXT,contextModule);
  dialog.show();
  myIsOk=dialog.isOK();
  if (myIsOk) {
    myChosenLibrary=dialog.createLibrary(myContext.getModifiableLibraryTable(dialog.getSelectedTable()));
  }
 else {
    myChosenLibrary=null;
  }
}
