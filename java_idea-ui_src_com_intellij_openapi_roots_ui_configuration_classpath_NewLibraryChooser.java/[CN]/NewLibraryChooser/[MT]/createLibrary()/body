{
  final NewLibraryConfiguration configuration=CreateNewLibraryAction.createNewLibraryConfiguration(myLibraryType,myParentComponent,myProject);
  if (configuration == null)   return null;
  final NewLibraryEditor libraryEditor=new NewLibraryEditor(configuration.getLibraryType(),configuration.getProperties());
  libraryEditor.setName(configuration.getDefaultLibraryName());
  configuration.addRoots(libraryEditor);
  final LibraryTablesRegistrar registrar=LibraryTablesRegistrar.getInstance();
  List<LibraryTable> tables=Arrays.asList(myRootModel.getModuleLibraryTable(),registrar.getLibraryTable(myProject),registrar.getLibraryTable());
  CreateNewLibraryDialog dialog=new CreateNewLibraryDialog(myParentComponent,myContext,libraryEditor,tables,1);
  final Module contextModule=LangDataKeys.MODULE_CONTEXT.getData(DataManager.getInstance().getDataContext(myParentComponent));
  dialog.setContextModule(contextModule);
  dialog.show();
  if (dialog.isOK()) {
    return dialog.createLibrary();
  }
  return null;
}
