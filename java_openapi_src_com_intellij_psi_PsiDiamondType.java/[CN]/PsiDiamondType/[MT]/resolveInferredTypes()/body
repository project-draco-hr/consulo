{
  final PsiNewExpression newExpression=PsiTreeUtil.getParentOfType(myTypeElement,PsiNewExpression.class);
  if (newExpression == null) {
    return PsiDiamondType.DiamondInferenceResult.NULL_RESULT;
  }
  final PsiAnonymousClass anonymousClass=newExpression.getAnonymousClass();
  if (anonymousClass != null) {
    final PsiElement resolve=anonymousClass.getBaseClassReference().resolve();
    if (resolve instanceof PsiClass && ((PsiClass)resolve).getContainingClass() != null) {
      return PsiDiamondType.DiamondInferenceResult.ANONYMOUS_INNER_RESULT;
    }
  }
  return resolveInferredTypes(newExpression);
}
