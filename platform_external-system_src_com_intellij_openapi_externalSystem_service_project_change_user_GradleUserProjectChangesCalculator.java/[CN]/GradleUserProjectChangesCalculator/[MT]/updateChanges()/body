{
  ExternalProject lastProjectState=myLastProjectState;
  if (lastProjectState == null) {
    updateCurrentProjectState();
    return;
  }
  ExternalProject currentProjectState=buildCurrentIdeProject();
  if (currentProjectState == null) {
    return;
  }
  Context context=new Context(lastProjectState,currentProjectState);
  buildModulePresenceChanges(context);
  buildDependencyPresenceChanges(context);
  filterOutdatedChanges();
  context.currentChanges.addAll(mySettings.getUserProjectChanges());
  mySettings.setUserProjectChanges(context.currentChanges);
  myLastProjectState=currentProjectState;
}
