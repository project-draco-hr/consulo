{
  final TodoOccurrenceConsumer todoOccurrenceConsumer=new TodoOccurrenceConsumer();
  final Lexer filterLexer=createLexer(todoOccurrenceConsumer);
  final CharSequence chars=inputData.getContentAsText();
  filterLexer.start(chars,0,chars.length(),0);
  while (filterLexer.getTokenType() != null) {
    filterLexer.advance();
  }
  final Map<TodoIndexEntry,Integer> map=new HashMap<TodoIndexEntry,Integer>();
  for (  IndexPattern indexPattern : CacheUtil.getIndexPatterns()) {
    final int count=todoOccurrenceConsumer.getOccurrenceCount(indexPattern);
    if (count > 0) {
      map.put(new TodoIndexEntry(indexPattern.getPatternString(),indexPattern.isCaseSensitive()),count);
    }
  }
  return map;
}
