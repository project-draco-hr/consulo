{
  final StringBuffer buffer=new StringBuffer();
  final XmlTag element=getElement();
  final XmlAttribute[] attributes=element.getAttributes();
  String id=element.getAttributeValue(ID_ATTR_NAME);
  String usedAttrName=null;
  if (id == null) {
    id=element.getAttributeValue(NAME_ATTR_NAME);
    if (id != null)     usedAttrName=NAME_ATTR_NAME;
  }
 else {
    usedAttrName=ID_ATTR_NAME;
  }
  id=toCanonicalForm(id);
  for (  XmlAttribute attribute : attributes) {
    if (buffer.length() != 0) {
      buffer.append(" ");
    }
    final String name=attribute.getName();
    if (usedAttrName != null && id != null && usedAttrName.equals(name)) {
      continue;
    }
    buffer.append(name);
    buffer.append("=");
    buffer.append("\"");
    buffer.append(attribute.getValue());
    buffer.append("\"");
  }
  return buffer.toString();
}
