{
  for (  DetectedFacetsTree.FacetNode facetNode : facetNodes) {
    Facet facet=null;
    if (facetNode instanceof FacetNodeImpl) {
      DetectedFacetInfo<Module> detectedFacetInfo=((FacetNodeImpl)facetNode).getDetectedFacetInfo();
      if (accept && facetNode.isChecked()) {
        facet=myDetectedFacetManager.createFacet(detectedFacetInfo,underlyingFacet);
      }
 else {
        myDetectedFacetManager.disableDetectionInFile(detectedFacetInfo);
      }
    }
 else {
      facet=((RealFacetNode)facetNode).myFacetInfo.getFacet();
    }
    processFacetNodes(facetNode.getChildren(),accept && facetNode.isChecked(),facet);
  }
}
