{
  res.add(0,atCaret);
  if (doNotStepInto(atCaret)) {
    if (!recurse)     return;
    recurse=false;
  }
  final PsiElement[] children=atCaret.getChildren();
  for (  PsiElement aChildren : children) {
    collectAllElements(aChildren,res,recurse);
  }
}
