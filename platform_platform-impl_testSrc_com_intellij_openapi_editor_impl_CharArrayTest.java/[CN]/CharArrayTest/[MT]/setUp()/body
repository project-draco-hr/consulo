{
  myMockery=new JUnit4Mockery(){
{
      setImposteriser(ClassImposteriser.INSTANCE);
    }
  }
;
  myDocument=myMockery.mock(DocumentImpl.class);
  myMockery.checking(new Expectations(){
{
      allowing(myDocument).getTextLength();
      will(new CustomAction("getTextLength"){
        @Override public Object invoke(        Invocation invocation) throws Throwable {
          return myArray.length();
        }
      }
);
    }
  }
);
  init(10);
  if (myConfig != null) {
    myArray.insert(myDocument,myConfig.text(),0);
    myArray.setDeferredChangeMode(myConfig.deferred());
  }
}
