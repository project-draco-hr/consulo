{
  PsiElement lastParent=null;
  PsiElement run=element;
  final ResolveState state=ResolveState.initial();
  while (run != null) {
    ProgressManager.checkCanceled();
    if (!run.processDeclarations(processor,state,lastParent,element)) {
      return false;
    }
    lastParent=run;
    run=run.getContext();
  }
  return true;
}
