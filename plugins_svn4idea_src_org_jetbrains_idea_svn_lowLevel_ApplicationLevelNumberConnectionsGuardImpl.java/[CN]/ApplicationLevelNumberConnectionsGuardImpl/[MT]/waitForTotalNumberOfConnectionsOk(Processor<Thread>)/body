{
synchronized (myLock) {
    if (myCurrentlyActiveConnections >= CachingSvnRepositoryPool.ourMaxTotal) {
      waitForFreeConnections(cancelChecker);
      return;
    }
    int cntTotal=getTotalRepositories();
    if (cntTotal >= CachingSvnRepositoryPool.ourMaxTotal) {
      for (      CachingSvnRepositoryPool pool : mySet) {
        pool.closeInactive();
      }
      if (myCurrentlyActiveConnections >= CachingSvnRepositoryPool.ourMaxTotal) {
        waitForFreeConnections(cancelChecker);
      }
    }
  }
}
