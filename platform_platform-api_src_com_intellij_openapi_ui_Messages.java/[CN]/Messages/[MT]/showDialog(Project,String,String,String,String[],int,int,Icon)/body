{
  if (isApplicationInUnitTestOrHeadless()) {
    return ourTestImplementation.show(message);
  }
  try {
    if (canShowMacSheetPanel() && moreInfo == null) {
      return MacMessages.getInstance().showMessageDialog(title,message,options,false,WindowManager.getInstance().suggestParentWindow(project),defaultOptionIndex,focusedOptionIndex,null);
    }
  }
 catch (  Exception exception) {
    LOG.error(exception);
  }
  MessageDialog dialog=new MoreInfoMessageDialog(project,message,title,moreInfo,options,defaultOptionIndex,focusedOptionIndex,icon);
  dialog.show();
  return dialog.getExitCode();
}
