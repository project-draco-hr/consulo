{
  if (isApplicationInUnitTestOrHeadless()) {
    return ourTestImplementation.show(message);
  }
  if (canShowMacSheetPanel()) {
    return MacMessages.getInstance().showMessageDialog(title,message,options,false,WindowManager.getInstance().suggestParentWindow(project),defaultOptionIndex,defaultOptionIndex,null);
  }
  MessageDialog dialog=new MessageDialog(project,message,title,options,defaultOptionIndex,-1,icon,doNotAskOption,false);
  dialog.show();
  return dialog.getExitCode();
}
