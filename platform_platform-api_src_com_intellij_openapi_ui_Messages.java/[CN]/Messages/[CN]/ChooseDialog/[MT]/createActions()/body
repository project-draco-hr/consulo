{
  final Action[] actions=new Action[myOptions.length];
  for (int i=0; i < myOptions.length; i++) {
    String option=myOptions[i];
    final int exitCode=i;
    if (i == myDefaultOptionIndex) {
      actions[i]=new AbstractAction(option){
        @Override public void actionPerformed(        ActionEvent e){
          if (myValidator == null || myValidator.checkInput(myComboBox.getSelectedItem().toString().trim())) {
            close(exitCode);
          }
        }
      }
;
      actions[i].putValue(DEFAULT_ACTION,Boolean.TRUE);
      myComboBox.addItemListener(new ItemListener(){
        @Override public void itemStateChanged(        ItemEvent e){
          actions[exitCode].setEnabled(myValidator == null || myValidator.checkInput(myComboBox.getSelectedItem().toString().trim()));
        }
      }
);
      final JTextField textField=(JTextField)myComboBox.getEditor().getEditorComponent();
      textField.getDocument().addDocumentListener(new DocumentAdapter(){
        @Override public void textChanged(        DocumentEvent event){
          actions[exitCode].setEnabled(myValidator == null || myValidator.checkInput(textField.getText().trim()));
        }
      }
);
    }
 else {
      actions[i]=new AbstractAction(option){
        @Override public void actionPerformed(        ActionEvent e){
          close(exitCode);
        }
      }
;
    }
  }
  return actions;
}
