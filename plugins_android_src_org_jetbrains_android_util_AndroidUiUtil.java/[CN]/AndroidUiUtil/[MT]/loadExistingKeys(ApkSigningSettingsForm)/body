{
  final String errorPrefix="Cannot load key store: ";
  InputStream is=null;
  try {
    is=new FileInputStream(new File(form.getKeyStorePathField().getText().trim()));
    final KeyStore keyStore=KeyStore.getInstance(KeyStore.getDefaultType());
    keyStore.load(is,form.getKeyStorePasswordField().getPassword());
    return AndroidUtils.toList(keyStore.aliases());
  }
 catch (  KeyStoreException e) {
    Messages.showErrorDialog(form.getPanel(),errorPrefix + e.getMessage(),CommonBundle.getErrorTitle());
    return null;
  }
catch (  FileNotFoundException e) {
    Messages.showErrorDialog(form.getPanel(),errorPrefix + e.getMessage(),CommonBundle.getErrorTitle());
    return null;
  }
catch (  CertificateException e) {
    Messages.showErrorDialog(form.getPanel(),errorPrefix + e.getMessage(),CommonBundle.getErrorTitle());
    return null;
  }
catch (  NoSuchAlgorithmException e) {
    Messages.showErrorDialog(form.getPanel(),errorPrefix + e.getMessage(),CommonBundle.getErrorTitle());
    return null;
  }
catch (  IOException e) {
    Messages.showErrorDialog(form.getPanel(),errorPrefix + e.getMessage(),CommonBundle.getErrorTitle());
    return null;
  }
 finally {
    if (is != null) {
      try {
        is.close();
      }
 catch (      IOException e) {
        LOG.info(e);
      }
    }
  }
}
