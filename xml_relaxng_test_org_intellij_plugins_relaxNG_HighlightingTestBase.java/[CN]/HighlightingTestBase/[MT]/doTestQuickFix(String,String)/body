{
  final PsiReference psiReference=myTestFixture.getReferenceAtCaretPositionWithAssertion(file + "." + ext);
  assertNull("Reference",psiReference.resolve());
  assertTrue("QuickFixProvider",psiReference instanceof QuickFixProvider);
  final HighlightInfo info=HighlightInfo.createHighlightInfo(HighlightInfoType.ERROR,0,0,"");
  ((QuickFixProvider)psiReference).registerQuickfix(info,psiReference);
  assertTrue("One action expected",info.quickFixActionRanges.size() == 1);
  final Pair<HighlightInfo.IntentionActionDescriptor,TextRange> rangePair=info.quickFixActionRanges.get(0);
  final IntentionAction action=rangePair.first.getAction();
  assertTrue("action is enabled",action.isAvailable(myTestFixture.getProject(),myTestFixture.getEditor(),myTestFixture.getFile()));
  myTestFixture.launchAction(action);
  myTestFixture.checkResultByFile(file + "_after." + ext);
}
