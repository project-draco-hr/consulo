{
  super.setUp();
  final IdeaTestFixtureFactory factory=IdeaTestFixtureFactory.getFixtureFactory();
  myTestFixture=createFixture(factory);
  myTestFixture.setTestDataPath(getTestDataBasePath() + getTestDataPath());
  InspectionToolProvider[] loaders;
  if (getName().contains("Inspection")) {
    loaders=new InspectionToolProvider[]{new ApplicationLoader(),new DefaultInspectionProvider()};
  }
 else {
    loaders=new InspectionToolProvider[]{new DefaultInspectionProvider()};
  }
  myTestFixture.setUp();
  myTestFixture.enableInspections(loaders);
  new WriteAction(){
    protected void run(    Result result) throws Throwable {
      ResourceUtil.copyFiles(HighlightingTestBase.this);
      init();
    }
  }
.execute().throwException();
}
