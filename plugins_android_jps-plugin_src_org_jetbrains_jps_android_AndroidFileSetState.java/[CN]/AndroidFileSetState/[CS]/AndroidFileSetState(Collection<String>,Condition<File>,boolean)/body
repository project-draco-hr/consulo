{
  myTimestamps=new HashMap<String,Long>();
  for (  String rootPath : roots) {
    final File root=new File(rootPath);
    if (recursively) {
      FileUtil.processFilesRecursively(root,new Processor<File>(){
        @Override public boolean process(        File file){
          if (filter.value(file)) {
            myTimestamps.put(FileUtil.toSystemIndependentName(file.getPath()),file.lastModified());
          }
          return true;
        }
      }
);
    }
 else     if (filter.value(root)) {
      myTimestamps.put(FileUtil.toSystemIndependentName(root.getPath()),root.lastModified());
    }
  }
}
