{
  if (refEntity instanceof RefJavaElement) {
    final RefJavaElement refElement=(RefJavaElement)refEntity;
    if (refElement instanceof RefParameter)     return null;
    if (refElement.isSyntheticJSP())     return null;
    if (refElement.isEntry())     return null;
    if (refElement instanceof RefImplicitConstructor)     return null;
    if (refElement instanceof RefField && ((RefField)refElement).getElement() instanceof PsiEnumConstant)     return null;
    if (refElement instanceof RefMethod) {
      RefMethod refMethod=(RefMethod)refElement;
      if (refMethod.isExternalOverride())       return null;
      if (RefUtil.isEntryPoint(refMethod))       return null;
    }
    if (refElement instanceof RefClass) {
      RefClass refClass=(RefClass)refElement;
      if (refClass.isAnonymous() || RefUtil.isEntryPoint(refClass) || refClass.isTestCase()|| refClass.isServlet()|| refClass.isApplet()|| refClass.isLocalClass())       return null;
      if (isTopLevelClass(refClass) && !SUGGEST_PACKAGE_LOCAL_FOR_TOP_CLASSES)       return null;
    }
    if (refElement.getInReferences().size() == 0)     return null;
    if (refElement.getOwner() instanceof RefClass) {
      RefClass refClass=(RefClass)refElement.getOwner();
      if (refClass.isInterface())       return null;
    }
    final String access=getPossibleAccess(refElement);
    if (access != refElement.getAccessModifier()) {
      final PsiElement psiElement=HighlightUsagesHandler.getNameIdentifier(refElement.getElement());
      if (psiElement != null) {
        return new ProblemDescriptor[]{manager.createProblemDescriptor(psiElement,InspectionsBundle.message("inspection.visibility.compose.suggestion",access == PsiModifier.PACKAGE_LOCAL ? PACKAGE_LOCAL : access),new AcceptSuggestedAccess(globalContext.getRefManager(),access),ProblemHighlightType.GENERIC_ERROR_OR_WARNING)};
      }
    }
  }
  return null;
}
