{
  if (accessModifier == PsiModifier.PUBLIC)   return true;
  final RefUtil refUtil=RefUtil.getInstance();
  if (accessModifier == PsiModifier.PACKAGE_LOCAL) {
    return refUtil.getPackage(from) == refUtil.getPackage(to);
  }
  RefClass fromTopLevel=refUtil.getTopLevelClass(from);
  RefClass toTopLevel=refUtil.getTopLevelClass(to);
  RefClass fromOwner=refUtil.getOwnerClass(from);
  RefClass toOwner=refUtil.getOwnerClass(to);
  if (accessModifier == PsiModifier.PROTECTED) {
    if (SUGGEST_PRIVATE_FOR_INNERS) {
      return refUtil.isInheritor(fromTopLevel,toOwner) || fromOwner != null && refUtil.isInheritor(fromOwner,toTopLevel) || toOwner != null && refUtil.getOwnerClass(toOwner) == from;
    }
    return refUtil.isInheritor(fromTopLevel,toOwner);
  }
  if (accessModifier == PsiModifier.PRIVATE) {
    if (SUGGEST_PRIVATE_FOR_INNERS) {
      return fromTopLevel == toOwner || fromOwner == toTopLevel || toOwner != null && refUtil.getOwnerClass(toOwner) == from;
    }
    if (fromOwner != null && fromOwner.isStatic() && !to.isStatic() && refUtil.isInheritor(fromOwner,toOwner))     return false;
    return fromTopLevel == toOwner;
  }
  return false;
}
