{
  Location location=JavaExecutionUtil.stepIntoSingleClass(context.getLocation());
  if (location == null)   return false;
  if (PatternConfigurationProducer.isMultipleElementsSelected(context)) {
    return false;
  }
  PsiClass testClass=JUnitUtil.getTestClass(location);
  if (testClass == null)   return false;
  sourceElement.set(testClass);
  setupConfigurationModule(context,configuration);
  final Module originalModule=configuration.getConfigurationModule().getModule();
  configuration.beClassConfiguration(testClass);
  configuration.restoreOriginalModule(originalModule);
  return true;
}
