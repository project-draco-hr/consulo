{
  if (expression instanceof PsiBinaryExpression) {
    final PsiJavaToken sign=((PsiBinaryExpression)expression).getOperationSign();
    final IElementType tokenType=sign.getTokenType();
    if (!tokenType.equals(JavaTokenType.EQEQ)) {
      return false;
    }
    final PsiExpression lhs=((PsiBinaryExpression)expression).getLOperand();
    final PsiExpression rhs=((PsiBinaryExpression)expression).getROperand();
    if (rhs == null) {
      return false;
    }
    final PsiType type=lhs.getType();
    return type != null && ClassUtils.isPrimitive(type);
  }
 else   if (expression instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression call=(PsiMethodCallExpression)expression;
    if (!MethodCallUtils.isEqualsCall(call)) {
      return false;
    }
    final PsiReferenceExpression methodExpression=call.getMethodExpression();
    return methodExpression.getQualifierExpression() != null;
  }
  return false;
}
