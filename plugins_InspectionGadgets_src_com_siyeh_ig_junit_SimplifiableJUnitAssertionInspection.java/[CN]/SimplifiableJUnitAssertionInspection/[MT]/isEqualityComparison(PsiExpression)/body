{
  if (expression instanceof PsiBinaryExpression) {
    final PsiBinaryExpression binaryExpression=(PsiBinaryExpression)expression;
    final PsiJavaToken sign=binaryExpression.getOperationSign();
    final IElementType tokenType=sign.getTokenType();
    if (!tokenType.equals(JavaTokenType.EQEQ)) {
      return false;
    }
    final PsiExpression lhs=binaryExpression.getLOperand();
    final PsiExpression rhs=binaryExpression.getROperand();
    if (rhs == null) {
      return false;
    }
    final PsiType type=lhs.getType();
    return type != null && ClassUtils.isPrimitive(type);
  }
 else   if (expression instanceof PsiMethodCallExpression) {
    final PsiMethodCallExpression call=(PsiMethodCallExpression)expression;
    if (!MethodCallUtils.isEqualsCall(call)) {
      return false;
    }
    final PsiReferenceExpression methodExpression=call.getMethodExpression();
    return methodExpression.getQualifierExpression() != null;
  }
  return false;
}
