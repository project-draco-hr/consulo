{
  final Map<VirtualFile,List<VirtualFile>> roots=GitUtil.sortFilesByVcsRoot(project,files);
  for (  VirtualFile root : roots.keySet()) {
    GitCommand command=new GitCommand(project,GitVcsSettings.getInstance(project),root);
    List<VirtualFile> list=roots.get(root);
    VirtualFile[] vfiles=list.toArray(new VirtualFile[list.size()]);
    command.add(vfiles);
  }
  VcsDirtyScopeManager mgr=VcsDirtyScopeManager.getInstance(project);
  for (  VirtualFile file : files) {
    mgr.fileDirty(file);
    file.refresh(true,true);
  }
}
