{
synchronized (treeLock) {
    ObjectNode<T> parentNode=getOrCreateNodeFor(parent,null);
    ObjectNode<T> childNode=getNode(child);
    if (childNode == null) {
      childNode=createNodeFor(child,parentNode);
      myRootObjects.remove(child);
    }
 else {
      ObjectNode<T> childParent=childNode.getParent();
      if (childParent != null) {
        childParent.removeChild(childNode);
      }
    }
    checkWasNotAddedAlready(childNode,child);
    parentNode.addChild(childNode);
    fireRegistered(childNode.getObject());
  }
}
