{
final class ViewWrapper {
    AbstractProjectViewPane myViewPane;
    ViewWrapper(    AbstractProjectViewPane viewPane){
      myViewPane=viewPane;
    }
    public String toString(){
      return myViewPane.getTitle();
    }
  }
  final List<ViewWrapper> views=new ArrayList<ViewWrapper>();
  final Collection<AbstractProjectViewPane> panes=myId2Pane.values();
  ViewWrapper viewToSelect=null;
  for (  final AbstractProjectViewPane pane : panes) {
    final ViewWrapper wrapper=new ViewWrapper(pane);
    if (viewToSelect == null) {
      if (!pane.getId().equals(getCurrentViewId())) {
        viewToSelect=wrapper;
      }
    }
    views.add(wrapper);
  }
  final JList list=new JList(views.toArray(new Object[views.size()]));
  if (viewToSelect != null) {
    list.setSelectedValue(viewToSelect,true);
  }
  Dimension size=getComponent().getSize();
  Point loc=getComponent().getLocationOnScreen();
  Runnable runnable=new Runnable(){
    public void run(){
      if (list.getSelectedIndex() < 0)       return;
      ViewWrapper viewWrapper=(ViewWrapper)list.getSelectedValue();
      changeView(viewWrapper.myViewPane.getId());
    }
  }
;
  new PopupChooserBuilder(list).setTitle(IdeBundle.message("title.popup.views")).setItemChoosenCallback(runnable).createPopup().showInCenterOf(getComponent());
}
