{
  ToolWindow toolWindow=ToolWindowManager.getInstance(myProject).getToolWindow(ToolWindowId.PROJECT_VIEW);
  if (toolWindow == null)   return;
  final PsiElement element=(PsiElement)myDataProvider.getData(DataConstants.PSI_ELEMENT);
  String title;
  if (element != null) {
    if (element instanceof PsiDirectory) {
      PsiDirectory directory=(PsiDirectory)element;
      PsiPackage aPackage=directory.getPackage();
      if (aPackage != null) {
        title=aPackage.getQualifiedName();
      }
 else {
        title=directory.getVirtualFile().getPresentableUrl();
      }
    }
 else     if (element instanceof PsiFile) {
      PsiFile file=(PsiFile)element;
      title=file.getVirtualFile().getPresentableUrl();
    }
 else     if (element instanceof PsiClass) {
      PsiClass psiClass=(PsiClass)element;
      title=psiClass.getQualifiedName();
    }
 else     if (element instanceof PsiMethod) {
      PsiMethod method=(PsiMethod)element;
      PsiClass aClass=method.getContainingClass();
      if (aClass != null) {
        title=aClass.getQualifiedName();
      }
 else {
        title=method.toString();
      }
    }
 else     if (element instanceof PsiField) {
      PsiField field=(PsiField)element;
      PsiClass aClass=field.getContainingClass();
      if (aClass != null) {
        title=aClass.getQualifiedName();
      }
 else {
        title=field.toString();
      }
    }
 else     if (element instanceof PsiPackage) {
      title=((PsiPackage)element).getQualifiedName();
    }
 else {
      PsiFile file=element.getContainingFile();
      if (file != null) {
        title=file.getVirtualFile().getPresentableUrl();
      }
 else {
        title=element.toString();
      }
    }
  }
 else {
    title="";
    if (myProject != null) {
      title=myProject.getProjectFile() != null ? myProject.getProjectFile().getPresentableUrl() : "";
    }
  }
  toolWindow.setTitle(title);
}
