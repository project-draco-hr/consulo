{
  if (o1 instanceof PsiDirectoryNode != o2 instanceof PsiDirectoryNode) {
    return o1 instanceof PsiDirectoryNode ? -1 : 1;
  }
  if (o1 instanceof PackageElementNode != o2 instanceof PackageElementNode) {
    return o1 instanceof PackageElementNode ? -1 : 1;
  }
  if (isSortByType() && o1 instanceof ClassTreeNode != o2 instanceof ClassTreeNode) {
    return o1 instanceof ClassTreeNode ? -1 : 1;
  }
  if (isSortByType() && o1 instanceof ClassTreeNode && o2 instanceof ClassTreeNode) {
    final PsiClass aClass1=((ClassTreeNode)o1).getValue();
    final PsiClass aClass2=((ClassTreeNode)o2).getValue();
    int pos1=getClassPosition(aClass1);
    int pos2=getClassPosition(aClass2);
    final int result=pos1 - pos2;
    if (result != 0)     return result;
  }
 else   if (isSortByType() && o1 instanceof AbstractTreeNode && o2 instanceof AbstractTreeNode&& (o1 instanceof PsiFileNode || ((AbstractTreeNode)o1).getValue() instanceof ResourceBundle)&& (o2 instanceof PsiFileNode || ((AbstractTreeNode)o2).getValue() instanceof ResourceBundle)) {
    String type1=o1 instanceof PsiFileNode ? extension(((PsiFileNode)o1).getValue()) : PropertiesFileType.FILE_TYPE.getDefaultExtension();
    String type2=o2 instanceof PsiFileNode ? extension(((PsiFileNode)o2).getValue()) : PropertiesFileType.FILE_TYPE.getDefaultExtension();
    if (type1 != null && type2 != null) {
      int result=type1.compareTo(type2);
      if (result != 0)       return result;
    }
  }
  return AlphaComparator.INSTANCE.compare(o1,o2);
}
