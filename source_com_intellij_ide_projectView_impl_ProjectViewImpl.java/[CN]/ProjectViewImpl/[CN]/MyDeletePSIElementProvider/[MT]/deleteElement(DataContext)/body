{
  List<PsiElement> allElements=Arrays.asList(getElementsToDelete());
  List<PsiElement> validElements=new ArrayList<PsiElement>();
  for (Iterator<PsiElement> iterator=allElements.iterator(); iterator.hasNext(); ) {
    PsiElement psiElement=iterator.next();
    if (psiElement != null && psiElement.isValid())     validElements.add(psiElement);
  }
  final PsiElement[] elements=validElements.toArray(new PsiElement[validElements.size()]);
  LvcsAction action=LvcsIntegration.checkinFilesBeforeRefactoring(myProject,"Deleting");
  try {
    DeleteHandler.deletePsiElement(elements,myProject);
  }
  finally {
    LvcsIntegration.checkinFilesAfterRefactoring(myProject,action);
  }
}
