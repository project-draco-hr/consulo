{
  PsiElement element=parameters.getPosition();
  GrReferenceExpression expression=(GrReferenceExpression)element.getParent();
  GrExpression qualifierExpression=expression.getQualifierExpression();
  if (qualifierExpression == null)   return;
  PsiType mapType=qualifierExpression.getType();
  if (!GroovyPsiManager.isInheritorCached(mapType,CommonClassNames.JAVA_UTIL_MAP)) {
    return;
  }
  PsiElement resolve=null;
  if (qualifierExpression instanceof GrMethodCall) {
    resolve=((GrMethodCall)qualifierExpression).resolveMethod();
  }
 else   if (qualifierExpression instanceof GrReferenceExpression) {
    resolve=((GrReferenceExpression)qualifierExpression).resolve();
  }
  for (  GroovyMapContentProvider provider : GroovyMapContentProvider.EP_NAME.getExtensions()) {
    provider.addKeyVariants(qualifierExpression,resolve,result);
  }
  if (mapType instanceof GrMapType) {
    for (    String key : ((GrMapType)mapType).getStringKeys()) {
      LookupElement lookup=LookupElementBuilder.create(key);
      lookup=PrioritizedLookupElement.withPriority(lookup,1);
      result.addElement(lookup);
    }
  }
}
