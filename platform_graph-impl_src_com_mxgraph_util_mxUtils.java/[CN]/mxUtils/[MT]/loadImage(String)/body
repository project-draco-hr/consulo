{
  BufferedImage img=null;
  if (url != null) {
    if (url.startsWith("data:image/")) {
      try {
        int comma=url.indexOf(',');
        byte[] data=mxBase64.decode(url.substring(comma + 1));
        ByteArrayInputStream is=new ByteArrayInputStream(data);
        img=ImageIO.read(is);
      }
 catch (      Exception e1) {
      }
    }
 else {
      URL realUrl=null;
      try {
        realUrl=new URL(url);
      }
 catch (      Exception e) {
        realUrl=mxUtils.class.getResource(url);
      }
      if (realUrl != null) {
        try {
          img=ImageIO.read(realUrl);
        }
 catch (        Exception e1) {
          e1.printStackTrace();
        }
      }
    }
  }
  return img;
}
