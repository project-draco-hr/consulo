{
  double wrapWidth=0;
  if (isHtml && vertexBounds != null && mxUtils.getString(style,mxConstants.STYLE_WHITE_SPACE,"nowrap").equals("wrap")) {
    wrapWidth=vertexBounds.getWidth();
  }
  mxRectangle size=mxUtils.getLabelSize(label,style,isHtml,scale,wrapWidth);
  size.setWidth(size.getWidth() / scale);
  size.setHeight(size.getHeight() / scale);
  double x=offset.getX();
  double y=offset.getY();
  double width=0;
  double height=0;
  if (vertexBounds != null) {
    x+=vertexBounds.getX();
    y+=vertexBounds.getY();
    if (mxUtils.getString(style,mxConstants.STYLE_SHAPE,"").equals(mxConstants.SHAPE_SWIMLANE)) {
      boolean horizontal=mxUtils.isTrue(style,mxConstants.STYLE_HORIZONTAL,true);
      double start=mxUtils.getDouble(style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE) * scale;
      if (horizontal) {
        width+=vertexBounds.getWidth();
        height+=start;
      }
 else {
        width+=start;
        height+=vertexBounds.getHeight();
      }
    }
 else {
      width+=vertexBounds.getWidth();
      height+=vertexBounds.getHeight();
    }
  }
  return mxUtils.getScaledLabelBounds(x,y,size,width,height,style,scale);
}
