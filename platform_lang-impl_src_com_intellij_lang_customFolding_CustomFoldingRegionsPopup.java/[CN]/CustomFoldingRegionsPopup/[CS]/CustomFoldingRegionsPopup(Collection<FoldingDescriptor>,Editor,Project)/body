{
  myEditor=editor;
  myRegionsList=new JBList();
  myRegionsList.setModel(new MyListModel(orderByPosition(descriptors)));
  myRegionsList.setSelectedIndex(0);
  final PopupChooserBuilder popupBuilder=JBPopupFactory.getInstance().createListPopupBuilder(myRegionsList);
  myPopup=popupBuilder.setTitle(IdeBundle.message("goto.custom.region.command")).setResizable(false).setMovable(false).setItemChoosenCallback(new Runnable(){
    @Override public void run(){
      PsiElement navigationElement=getNavigationElement();
      if (navigationElement != null) {
        navigateTo(editor,navigationElement);
        IdeDocumentHistory.getInstance(project).includeCurrentCommandAsNavigation();
      }
    }
  }
).createPopup();
}
