{
  final String[] recents=FindSettings.getInstance().getRecentFindStrings();
  final JList list=new JList(recents);
  final JBPopup popup=JBPopupFactory.getInstance().createListPopupBuilder(list).setMovable(false).setResizable(false).setRequestFocus(true).setItemChoosenCallback(new Runnable(){
    public void run(){
      String selectedValue=(String)list.getSelectedValue();
      if (selectedValue != null) {
        mySearchField.setText(selectedValue);
      }
    }
  }
).createPopup();
  final InputEvent event=e.getInputEvent();
  if (event instanceof MouseEvent) {
    popup.showUnderneathOf(myToolbarComponent);
  }
 else {
    popup.showUnderneathOf(mySearchField);
  }
}
