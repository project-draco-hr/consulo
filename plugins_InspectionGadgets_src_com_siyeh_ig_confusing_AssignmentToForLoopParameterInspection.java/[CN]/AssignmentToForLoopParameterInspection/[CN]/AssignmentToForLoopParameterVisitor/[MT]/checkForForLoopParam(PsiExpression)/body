{
  if (!(expression instanceof PsiReferenceExpression)) {
    return;
  }
  final PsiReferenceExpression ref=(PsiReferenceExpression)expression;
  final PsiElement element=ref.resolve();
  if (!(element instanceof PsiLocalVariable)) {
    return;
  }
  final PsiLocalVariable variable=(PsiLocalVariable)element;
  final PsiDeclarationStatement decl=(PsiDeclarationStatement)variable.getParent();
  if (!(decl.getParent() instanceof PsiForStatement)) {
    return;
  }
  final PsiForStatement forStatement=(PsiForStatement)decl.getParent();
  final PsiStatement initialization=forStatement.getInitialization();
  if (initialization == null) {
    return;
  }
  if (!initialization.equals(decl)) {
    return;
  }
  if (!isInForStatementBody(expression,forStatement)) {
    return;
  }
  registerError(expression);
}
