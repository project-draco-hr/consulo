{
  final File androidStorage=new File(context.getDataManager().getDataStorageRoot(),ANDROID_STORAGE_DIR);
  final File dir=new File(new File(androidStorage,INTERMEDIATE_ARTIFACTS_STORAGE),module.getName());
  if (!dir.exists()) {
    if (createIfNotExist) {
      if (!dir.mkdirs()) {
        context.processMessage(new CompilerMessage(compilerName,BuildMessage.Kind.ERROR,AndroidJpsBundle.message("android.jps.cannot.create.directory",dir.getPath())));
        return null;
      }
    }
 else {
      return null;
    }
  }
  return dir;
}
