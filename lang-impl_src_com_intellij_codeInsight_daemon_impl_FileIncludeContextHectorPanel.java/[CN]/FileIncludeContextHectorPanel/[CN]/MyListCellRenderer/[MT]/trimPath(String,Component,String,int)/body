{
  final FontMetrics fontMetrics=component.getFontMetrics(component.getFont());
  final int maxWidth=fontMetrics.stringWidth(path);
  if (maxWidth <= length) {
    myMaxWidth=Math.max(maxWidth,myMaxWidth);
    return path;
  }
  final StringBuilder result=new StringBuilder(path);
  if (path.startsWith(separator)) {
    result.delete(0,1);
  }
  final String[] strings=result.toString().split(separator);
  result.replace(0,strings[0].length(),"...");
  for (int i=1; i < strings.length; i++) {
    final String clipped=result.toString();
    final int width=fontMetrics.stringWidth(clipped);
    if (width <= length) {
      myMaxWidth=Math.max(width,myMaxWidth);
      return clipped;
    }
    result.delete(4,5 + strings[i].length());
  }
  return result.toString();
}
