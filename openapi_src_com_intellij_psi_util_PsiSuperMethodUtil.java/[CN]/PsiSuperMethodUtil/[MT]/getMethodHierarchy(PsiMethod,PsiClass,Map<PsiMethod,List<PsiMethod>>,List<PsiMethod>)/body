{
  final PsiClass[] superTypes=aClass.getSupers();
  final int startMethodIndex=allMethods.size();
  for (int i=0; i < superTypes.length; i++) {
    PsiClass superType=superTypes[i];
    final PsiMethod superMethod;
    superMethod=MethodSignatureUtil.findMethodBySignature(superType,method,false);
    if (superMethod == null) {
      getMethodHierarchy(method,superType,map,allMethods);
    }
 else {
      if (PsiUtil.isAccessible(superMethod,aClass,aClass)) {
        allMethods.add(superMethod);
      }
    }
  }
  final int endMethodIndex=allMethods.size();
  map.put(method,new ArrayList<PsiMethod>(allMethods.subList(startMethodIndex,endMethodIndex)));
  for (int i=startMethodIndex; i < endMethodIndex; i++) {
    final PsiMethod superMethod=allMethods.get(i);
    if (map.get(superMethod) == null) {
      getMethodHierarchy(superMethod,superMethod.getContainingClass(),map,allMethods);
    }
  }
}
