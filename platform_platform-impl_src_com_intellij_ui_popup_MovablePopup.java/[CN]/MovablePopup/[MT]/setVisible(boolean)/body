{
  if (myView != null) {
    myView.setVisible(visible);
  }
 else   if (visible) {
    Window owner=UIUtil.getWindow(myOwner);
    if (owner != null) {
      if (myHeavyWeight) {
        JWindow view=new JWindow(owner);
        try {
          @SuppressWarnings("unchecked") Class<? extends Enum> type=(Class<? extends Enum>)Class.forName("java.awt.Window$Type");
          Object value=Enum.valueOf(type,"POPUP");
          view.getClass().getMethod("setType",type).invoke(view,value);
        }
 catch (        Exception ignored) {
        }
        if (myAlwaysOnTop) {
          try {
            view.setAlwaysOnTop(true);
          }
 catch (          SecurityException ignored) {
            myAlwaysOnTop=false;
          }
        }
        view.setFocusableWindowState(myWindowFocusable);
        if (!myWindowShadow) {
          view.getRootPane().putClientProperty("Window.shadow",Boolean.FALSE);
        }
        myView=view;
      }
 else       if (owner instanceof RootPaneContainer) {
        JLayeredPane parent=((RootPaneContainer)owner).getLayeredPane();
        if (parent != null) {
          JPanel view=new JPanel(new BorderLayout());
          view.setVisible(false);
          parent.add(view,JLayeredPane.POPUP_LAYER,0);
          myView=view;
        }
      }
    }
    if (myView != null) {
      myView.add(myContent);
      Component parent=myView instanceof Window ? null : myView.getParent();
      if (parent != null) {
        Point location=myViewBounds.getLocation();
        SwingUtilities.convertPointFromScreen(location,parent);
        myViewBounds.setLocation(location);
      }
      myView.setBounds(myViewBounds);
      myView.setVisible(true);
      myViewBounds=null;
    }
  }
}
