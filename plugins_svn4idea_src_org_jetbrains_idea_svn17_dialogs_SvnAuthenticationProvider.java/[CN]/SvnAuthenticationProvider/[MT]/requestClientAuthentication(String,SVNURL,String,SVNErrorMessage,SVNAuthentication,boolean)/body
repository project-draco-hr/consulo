{
  if (ApplicationManager.getApplication().isUnitTestMode() && ISVNAuthenticationManager.USERNAME.equals(kind)) {
    final String userName=previousAuth != null && previousAuth.getUserName() != null ? previousAuth.getUserName() : SystemProperties.getUserName();
    return new SVNUserNameAuthentication(userName,false);
  }
  final SvnAuthenticationNotifier.AuthenticationRequest obj=new SvnAuthenticationNotifier.AuthenticationRequest(myProject,kind,url,realm);
  final SVNURL wcUrl=myAuthenticationNotifier.getWcUrl(obj);
  if (wcUrl == null || ourForceInteractive.contains(Thread.currentThread())) {
    return mySvnInteractiveAuthenticationProvider.requestClientAuthentication(kind,url,realm,errorMessage,previousAuth,authMayBeStored);
  }
 else {
    if (myAuthenticationNotifier.ensureNotify(obj)) {
      return (SVNAuthentication)myAuthenticationStorage.getData(kind,realm);
    }
  }
  return null;
}
