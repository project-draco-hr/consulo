{
  if (element instanceof PsiJavaFile || element instanceof PsiClass) {
    PsiElement[] children=element.getChildren();
    for (    PsiElement child : children) {
      if (child instanceof PsiMethod || child instanceof PsiClass) {
        array.add(child);
        addNavigationElements(array,child);
      }
      if (element instanceof PsiClass && child instanceof PsiJavaToken && child.getText().equals("}")) {
        array.add(child);
      }
    }
  }
 else   if (element instanceof XmlFile || element instanceof XmlTag) {
    PsiElement parent=element instanceof XmlFile ? element : element.getParent();
    PsiElement[] children=parent.getChildren();
    for (    PsiElement child : children) {
      if (child instanceof XmlTag) {
        array.add(child);
      }
    }
    addNavigationElements(array,element.getParent());
  }
 else   if (element instanceof PsiFile) {
    StructureViewBuilder structureViewBuilder=element.getLanguage().getStructureViewBuilder((PsiFile)element);
    if (structureViewBuilder instanceof TreeBasedStructureViewBuilder) {
      TreeBasedStructureViewBuilder builder=(TreeBasedStructureViewBuilder)structureViewBuilder;
      StructureViewModel model=builder.createStructureViewModel();
      addStructureViewElements(model.getRoot(),array);
    }
  }
}
