{
  ArrayList<Library> result=new ArrayList<Library>();
  for (  SimpleClasspathElement classpathElement : classpathElements) {
    final Library library=classpathElement.getLibrary();
    if (library != null && library.getTable() != null) {
      result.add(library);
    }
 else {
      final Library newLibrary=LibraryTableImplUtil.createModuleLevelLibrary(null,null);
      Disposer.register(disposable,newLibrary);
      final Library.ModifiableModel libModel=newLibrary.getModifiableModel();
      final String libName=classpathElement.getLibraryName();
      if (libName != null)       libModel.setName(libName);
      List<String> fileUrls=classpathElement.getClassesRootUrls();
      for (      final String fileUrl : fileUrls) {
        libModel.addRoot(fileUrl,OrderRootType.CLASSES);
      }
      libModel.commit();
      result.add(newLibrary);
    }
  }
  return result;
}
