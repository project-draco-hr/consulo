{
  if (myClassLoader == null || myClassLoader.getParent() != parent) {
    ArrayList<URL> urlList=new ArrayList<URL>();
    for (    Library library : getOrderedLibraries()) {
      for (      VirtualFile virtualFile : library.getFiles(OrderRootType.CLASSES)) {
        final File file=new File(PathUtil.toPresentableUrl(virtualFile.getUrl()));
        try {
          urlList.add(file.toURL());
        }
 catch (        MalformedURLException e) {
        }
      }
    }
    URL[] urls=urlList.toArray(new URL[urlList.size()]);
    myClassLoader=new URLClassLoader(urls,parent);
  }
  return myClassLoader;
}
