{
synchronized (PsiLock.LOCK) {
    long id=super.getRepositoryId();
    if (id == -2) {
      RepositoryManager repositoryManager=getRepositoryManager();
      if (repositoryManager != null) {
        id=repositoryManager.getFileId(getViewProvider().getVirtualFile());
      }
 else {
        id=-1;
      }
      super.setRepositoryId(id);
    }
    return id;
  }
}
