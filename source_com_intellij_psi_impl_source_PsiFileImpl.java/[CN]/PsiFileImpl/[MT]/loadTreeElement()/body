{
  if (!isPhysical()) {
    return getTreeElement();
  }
  final Document document=FileDocumentManager.getInstance().getDocument(myFile);
synchronized (PsiLock.LOCK) {
    FileElement treeElement=getTreeElement();
    if (treeElement != null)     return treeElement;
    if (myFile != null && myManager.isAssertOnFileLoading(myFile)) {
      LOG.error("File text loaded " + myFile.getPresentableUrl());
    }
    final CharSequence docText=document.getCharsSequence();
    treeElement=createFileElement(docText);
    treeElement.setDocument(document);
    setTreeElement(treeElement);
    treeElement.setPsiElement(this);
    ((PsiDocumentManagerImpl)PsiDocumentManager.getInstance(myManager.getProject())).contentsLoaded(this);
    if (LOG.isDebugEnabled()) {
      LOG.debug("Loaded text for file " + myFile.getPresentableUrl());
    }
    return treeElement;
  }
}
