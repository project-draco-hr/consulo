{
  try {
    if (shouldClearBeforeUpdate()) {
      FileUtil.delete(getContextDir());
    }
    IndexingContext context=createContext(indexer);
    try {
      updateContext(context,embedder,indexer,updater,progress);
      updateData(context,project,progress);
    }
  finally {
      indexer.removeIndexingContext(context,false);
    }
  }
 catch (  IOException e) {
    throw new MavenIndexException(e);
  }
catch (  UnsupportedExistingLuceneIndexException e) {
    throw new MavenIndexException(e);
  }
}
