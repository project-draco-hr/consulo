{
  if ((options & SHOW_MODIFIERS) != 0 && (options & MODIFIERS_AFTER) == 0) {
    formatModifiers(variable,options,buffer);
  }
  if ((options & SHOW_TYPE) != 0 && (options & TYPE_AFTER) == 0) {
    appendSpaceIfNeeded(buffer);
    buffer.append(formatType(variable.getType(),options,substitutor));
  }
  if (variable instanceof PsiField && (options & SHOW_CONTAINING_CLASS) != 0) {
    PsiClass aClass=((PsiField)variable).getContainingClass();
    if (aClass != null) {
      String className=aClass.getName();
      if (className != null) {
        appendSpaceIfNeeded(buffer);
        if ((options & SHOW_FQ_NAME) != 0) {
          String qName=aClass.getQualifiedName();
          if (qName != null) {
            buffer.append(qName);
          }
 else {
            buffer.append(className);
          }
        }
 else {
          buffer.append(className);
        }
        buffer.append('.');
      }
    }
    if ((options & SHOW_NAME) != 0) {
      buffer.append(variable.getName());
    }
  }
 else {
    if ((options & SHOW_NAME) != 0) {
      String name=variable.getName();
      if (StringUtil.isNotEmpty(name)) {
        appendSpaceIfNeeded(buffer);
        buffer.append(name);
      }
    }
  }
  if ((options & SHOW_TYPE) != 0 && (options & TYPE_AFTER) != 0) {
    if ((options & SHOW_NAME) != 0 && variable.getName() != null) {
      buffer.append(':');
    }
    buffer.append(formatType(variable.getType(),options,substitutor));
  }
  if ((options & SHOW_MODIFIERS) != 0 && (options & MODIFIERS_AFTER) != 0) {
    formatModifiers(variable,options,buffer);
  }
  if ((options & SHOW_INITIALIZER) != 0) {
    PsiExpression initializer=variable.getInitializer();
    if (initializer != null) {
      buffer.append(" = ");
      String text=PsiExpressionTrimRenderer.render(initializer);
      int index1=text.lastIndexOf('\n');
      if (index1 < 0)       index1=text.length();
      int index2=text.lastIndexOf('\r');
      if (index2 < 0)       index2=text.length();
      int index=Math.min(index1,index2);
      buffer.append(text.substring(0,index));
      if (index < text.length()) {
        buffer.append(" ...");
      }
    }
  }
}
