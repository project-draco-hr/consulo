{
  if (expression instanceof PsiParenthesizedExpression) {
    return createChainedVariableValue(((PsiParenthesizedExpression)expression).getExpression());
  }
  PsiReferenceExpression refExpr;
  if (expression instanceof PsiMethodCallExpression) {
    refExpr=((PsiMethodCallExpression)expression).getMethodExpression();
  }
 else   if (expression instanceof PsiReferenceExpression) {
    refExpr=(PsiReferenceExpression)expression;
  }
 else {
    return null;
  }
  PsiVariable var=resolveToVariable(refExpr);
  if (var == null) {
    return null;
  }
  boolean isCall=expression instanceof PsiMethodCallExpression;
  PsiExpression qualifier=refExpr.getQualifierExpression();
  if (qualifier == null) {
    DfaVariableValue result=myFactory.getVarFactory().createVariableValue(var,refExpr.getType(),false,null,isCall);
    if (var instanceof PsiField) {
      myFields.add(result);
    }
    return result;
  }
  if (DfaUtil.isFinalField(var) || DfaUtil.isPlainMutableField(var)) {
    DfaVariableValue qualifierValue=createChainedVariableValue(qualifier);
    if (qualifierValue != null) {
      return myFactory.getVarFactory().createVariableValue(var,refExpr.getType(),false,qualifierValue,isCall || qualifierValue.isViaMethods());
    }
  }
  return null;
}
