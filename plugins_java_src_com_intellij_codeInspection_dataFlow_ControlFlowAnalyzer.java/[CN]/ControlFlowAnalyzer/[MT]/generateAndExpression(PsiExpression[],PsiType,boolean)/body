{
  List<ConditionalGotoInstruction> branchToFail=new ArrayList<ConditionalGotoInstruction>();
  for (int i=0; i < operands.length; i++) {
    PsiExpression operand=operands[i];
    operand.accept(this);
    generateBoxingUnboxingInstructionFor(operand,exprType);
    if (!shortCircuit) {
      if (i > 0) {
        combineStackBooleans(true,operand);
      }
      continue;
    }
    ConditionalGotoInstruction onFail=new ConditionalGotoInstruction(null,true,operand);
    branchToFail.add(onFail);
    addInstruction(onFail);
  }
  if (!shortCircuit) {
    return;
  }
  addInstruction(new PushInstruction(myFactory.getConstFactory().getTrue(),null));
  GotoInstruction toSuccess=new GotoInstruction(null);
  addInstruction(toSuccess);
  PushInstruction pushFalse=new PushInstruction(myFactory.getConstFactory().getFalse(),null);
  addInstruction(pushFalse);
  for (  ConditionalGotoInstruction toFail : branchToFail) {
    toFail.setOffset(pushFalse.getIndex());
  }
  toSuccess.setOffset(pushFalse.getIndex() + 1);
}
