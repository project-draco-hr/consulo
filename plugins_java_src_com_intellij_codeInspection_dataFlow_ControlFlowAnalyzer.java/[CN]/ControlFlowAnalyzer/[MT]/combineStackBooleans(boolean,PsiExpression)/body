{
  ConditionalGotoInstruction toPopAndPushSuccess=new ConditionalGotoInstruction(null,and,anchor);
  addInstruction(toPopAndPushSuccess);
  GotoInstruction overPushSuccess=new GotoInstruction(null);
  addInstruction(overPushSuccess);
  PopInstruction pop=new PopInstruction();
  addInstruction(pop);
  DfaConstValue constValue=and ? myFactory.getConstFactory().getFalse() : myFactory.getConstFactory().getTrue();
  PushInstruction pushSuccess=new PushInstruction(constValue,null);
  addInstruction(pushSuccess);
  toPopAndPushSuccess.setOffset(pop.getIndex());
  overPushSuccess.setOffset(pushSuccess.getIndex() + 1);
}
