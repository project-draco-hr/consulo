{
  if (builder.getTokenType() != JavaTokenType.LBRACE)   return null;
  final PsiBuilder.Marker codeBlock=builder.mark();
  builder.advanceLexer();
  parseStatements(builder,parseUntilEof ? BraceMode.TILL_LAST : BraceMode.TILL_FIRST);
  final boolean greedyBlock=!expectOrError(builder,JavaTokenType.RBRACE,"expected.rbrace");
  builder.getTokenType();
  done(codeBlock,JavaElementType.CODE_BLOCK);
  if (greedyBlock) {
    codeBlock.setCustomEdgeTokenBinders(null,GREEDY_RIGHT_EDGE_PROCESSOR);
  }
  return codeBlock;
}
