{
  if (n1 instanceof LeafElement && n2 instanceof LeafElement) {
    return textMatches(n1,n2) == ThreeState.YES;
  }
  if (n1 instanceof PsiErrorElement && n2 instanceof PsiErrorElement) {
    final PsiErrorElement e1=((PsiErrorElement)n1);
    final PsiErrorElement e2=((PsiErrorElement)n2);
    if (!Comparing.equal(e1.getErrorDescription(),e2.getErrorDescription()))     return false;
  }
  return ((TreeElement)n1).hc() == ((TreeElement)n2).hc();
}
