{
  if (popup == null)   return;
  Component cmp;
  try {
    final Method method=Popup.class.getDeclaredMethod("getComponent");
    method.setAccessible(true);
    cmp=(Component)method.invoke(popup);
  }
 catch (  Throwable e) {
    LOG.error(e);
    return;
  }
  if (cmp instanceof Window) {
    ((Window)cmp).pack();
  }
 else {
    final Point screenPoint=p.getPoint(cmp.getParent());
    final Dimension prefSize=content.getPreferredSize();
    cmp.setBounds(screenPoint.x,screenPoint.y,prefSize.width,prefSize.height);
    cmp.validate();
    cmp.repaint();
  }
}
