{
  if (file.isDirectory()) {
    perform(project,activeVcs,file,context,helper);
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        file.refresh(false,true);
      }
    }
);
    FileStatusManager.getInstance(project).fileStatusChanged(file);
    VcsDirtyScopeManager.getInstance(project).fileDirty(file);
  }
 else {
    perform(project,activeVcs,file,context,helper);
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        file.refresh(false,true);
      }
    }
);
    FileStatusManager.getInstance(project).fileStatusChanged(file);
    VcsDirtyScopeManager.getInstance(project).fileDirty(file);
  }
}
