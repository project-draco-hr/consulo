{
  if (file.isDirectory()) {
    perform(project,activeVcs,file,context);
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        file.refresh(false,true);
      }
    }
);
    VcsDirtyScopeManager.getInstance(project).fileDirty(file);
  }
 else {
    perform(project,activeVcs,file,context);
    ApplicationManager.getApplication().runWriteAction(new Runnable(){
      public void run(){
        file.refresh(false,true);
      }
    }
);
    VcsDirtyScopeManager.getInstance(project).fileDirty(file);
  }
}
