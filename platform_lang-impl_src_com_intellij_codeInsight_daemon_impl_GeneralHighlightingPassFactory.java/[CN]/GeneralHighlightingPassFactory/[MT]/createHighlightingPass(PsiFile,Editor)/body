{
  TextRange textRange=FileStatusMap.getDirtyTextRange(editor,Pass.UPDATE_ALL);
  if (textRange == null)   return new ProgressableTextEditorHighlightingPass.EmptyPass(myProject,editor.getDocument());
  ProperTextRange visibleRange=VisibleHighlightingPassFactory.calculateVisibleRange(editor);
  return new GeneralHighlightingPass(myProject,file,editor.getDocument(),textRange.getStartOffset(),textRange.getEndOffset(),true,visibleRange,editor,new DefaultHighlightInfoProcessor());
}
