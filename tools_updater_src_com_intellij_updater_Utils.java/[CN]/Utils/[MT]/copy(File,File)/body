{
  if (from.isDirectory()) {
    File[] files=from.listFiles();
    if (files == null)     throw new IOException("Cannot get directory's content: " + from);
    for (    File each : files) {
      copy(each,new File(to,each.getName()));
    }
  }
 else {
    InputStream in=new BufferedInputStream(new FileInputStream(from));
    try {
      copyStreamToFile(in,to);
    }
  finally {
      in.close();
    }
    setExecutable(to,from.canExecute());
  }
}
