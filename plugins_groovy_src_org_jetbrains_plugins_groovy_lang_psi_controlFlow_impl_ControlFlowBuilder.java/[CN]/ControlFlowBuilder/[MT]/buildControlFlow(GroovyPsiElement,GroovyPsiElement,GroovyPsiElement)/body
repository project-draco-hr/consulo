{
  myInstructions=new ArrayList<InstructionImpl>();
  myProcessingStack=new Stack<InstructionImpl>();
  myPending=new ArrayList<Pair<InstructionImpl,GroovyPsiElement>>();
  myInstructionNumber=1;
  myStartInScope=startInScope;
  myEndInScope=endInScope;
  myIsInScope=startInScope == null;
  startNode(null);
  scope.accept(this);
  myHead=null;
  final InstructionImpl end=startNode(null);
  checkPending(end);
  return myInstructions.toArray(new Instruction[myInstructions.size()]);
}
