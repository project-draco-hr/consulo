{
  if (closure.getParent() instanceof GrStringInjection) {
    for (    GrParameter parameter : closure.getAllParameters()) {
      addNode(new ReadWriteVariableInstruction(parameter.getName(),parameter,WRITE));
    }
    addNode(new ReadWriteVariableInstruction("owner",closure.getLBrace(),WRITE));
    super.visitClosure(closure);
    return;
  }
  Set<String> names=new HashSet<String>();
  ReadWriteVariableInstruction[] reads=ControlFlowBuilderUtil.getReadsWithoutPriorWrites(closure.getControlFlow(),false);
  for (  ReadWriteVariableInstruction read : reads) {
    names.add(read.getVariableName());
  }
  for (  String name : names) {
    addNodeAndCheckPending(new ReadWriteVariableInstruction(name,closure,READ));
  }
  addNodeAndCheckPending(new InstructionImpl(closure));
}
