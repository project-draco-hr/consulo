{
  if (closure.getParent() instanceof GrStringInjection) {
    super.visitClosure(closure);
    return;
  }
  Set<String> names=new HashSet<String>();
  ReadWriteVariableInstruction[] reads=ControlFlowBuilderUtil.getReadsWithoutPriorWrites(closure.getControlFlow());
  for (  ReadWriteVariableInstruction read : reads) {
    names.add(read.getVariableName());
  }
  for (  String name : names) {
    ReadWriteVariableInstruction i=new ReadWriteVariableInstruction(name,closure,myInstructionNumber++,READ);
    addNode(i);
    checkPending(i);
  }
  InstructionImpl i=new InstructionImpl(closure,myInstructionNumber++);
  addNode(i);
  checkPending(i);
}
