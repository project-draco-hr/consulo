{
  final PsiElement parent=block.getParent();
  final PsiElement lbrace=block.getLBrace();
  if (lbrace != null && parent instanceof GrMethod) {
    final GrParameter[] parameters=((GrMethod)parent).getParameters();
    for (    GrParameter parameter : parameters) {
      addNode(new ReadWriteVariableInstructionImpl(parameter,myInstructionNumber++));
    }
  }
  super.visitOpenBlock(block);
  if (!(block.getParent() instanceof GrBlockStatement && block.getParent().getParent() instanceof GrLoopStatement)) {
    final GrStatement[] statements=block.getStatements();
    if (statements.length > 0) {
      final GrStatement last=statements[statements.length - 1];
      if (last instanceof GrExpression) {
        final MaybeReturnInstruction instruction=new MaybeReturnInstruction((GrExpression)last,myInstructionNumber++);
        checkPending(instruction);
        addNode(instruction);
      }
    }
  }
}
