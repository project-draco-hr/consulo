{
  final PsiElement element=instruction.getElement();
  if (element == null) {
    for (    Pair<InstructionImpl,GroovyPsiElement> pair : myPending) {
      addEdge(pair.getFirst(),instruction);
    }
    myPending.clear();
  }
 else {
    for (int i=myPending.size() - 1; i >= 0; i--) {
      final Pair<InstructionImpl,GroovyPsiElement> pair=myPending.get(i);
      final PsiElement scopeWhenToAdd=pair.getSecond();
      if (!PsiTreeUtil.isAncestor(scopeWhenToAdd,element,false)) {
        addEdge(pair.getFirst(),instruction);
        myPending.remove(i);
      }
 else       break;
    }
  }
}
