{
  final FilePath path=(FilePath)userObject;
  if (path.isDirectory() || !isLeaf()) {
    renderer.append(getRelativePath(safeCastToFilePath(((ChangesBrowserNode)getParent()).getUserObject()),path),SimpleTextAttributes.REGULAR_ATTRIBUTES);
    if (!isLeaf()) {
      appendCount(renderer);
    }
    renderer.setIcon(PlatformIcons.DIRECTORY_CLOSED_ICON);
  }
 else {
    if (renderer.isShowFlatten()) {
      renderer.append(path.getName(),SimpleTextAttributes.REGULAR_ATTRIBUTES);
      final FilePath parentPath=path.getParentPath();
      renderer.append(" (" + parentPath.getPresentableUrl() + ")",SimpleTextAttributes.GRAYED_ATTRIBUTES);
    }
 else {
      renderer.append(getRelativePath(safeCastToFilePath(((ChangesBrowserNode)getParent()).getUserObject()),path),SimpleTextAttributes.REGULAR_ATTRIBUTES);
    }
    renderer.setIcon(path.getFileType().getIcon());
  }
}
