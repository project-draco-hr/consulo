{
  final PsiClassStub stub=getStub();
  if (stub != null) {
    StubElement parent=stub.getParentStub();
    while (parent != null && !(parent instanceof PsiClassStub)) {
      parent=parent.getParentStub();
    }
    if (parent != null) {
      return ((PsiClassStub<? extends PsiClass>)parent).getPsi();
    }
  }
  PsiElement parent=getParent();
  if (parent instanceof PsiClassLevelDeclarationStatement) {
    return PsiTreeUtil.getParentOfType(this,PsiSyntheticClass.class);
  }
  return parent instanceof PsiClass ? (PsiClass)parent : null;
}
