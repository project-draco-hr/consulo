{
  String oldName=getName();
  boolean isRenameFile=isRenameFileOnRenaming();
  PsiImplUtil.setName(getNameIdentifier(),newName);
  if (isRenameFile) {
    PsiFile file=(PsiFile)getParent();
    String fileName=file.getName();
    int dotIndex=fileName.lastIndexOf('.');
    file.setName(dotIndex >= 0 ? newName + "." + fileName.substring(dotIndex + 1) : newName);
  }
  PsiMethod[] methods=getMethods();
  for (  PsiMethod method : methods) {
    if (method.isConstructor() && method.getName().equals(oldName)) {
      method.setName(newName);
    }
  }
  return this;
}
