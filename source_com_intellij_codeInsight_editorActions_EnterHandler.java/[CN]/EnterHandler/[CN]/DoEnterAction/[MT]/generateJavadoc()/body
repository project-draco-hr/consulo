{
  CodeInsightSettings settings=CodeInsightSettings.getInstance();
  StringBuffer buffer=new StringBuffer();
  buffer.append(DOC_COMMENT_ASTERISK);
  buffer.append(LINE_SEPARATOR);
  buffer.append(DOC_COMMENT_SUFFIX);
  PsiDocComment comment=createComment(buffer,settings);
  myOffset=comment.getTextRange().getStartOffset();
  myOffset=CharArrayUtil.shiftForwardUntil(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  myOffset=CharArrayUtil.shiftForward(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  myOffset=CharArrayUtil.shiftForwardUntil(myDocument.getCharsSequence(),myOffset,LINE_SEPARATOR);
  removeTrailingSpaces(myDocument,myOffset);
  if (!CodeStyleSettingsManager.getSettings(getProject()).JD_LEADING_ASTERISKS_ARE_ENABLED) {
    LOG.assertTrue(myDocument.getCharsSequence().charAt(myOffset - 1) == DOC_COMMENT_ASTERISK);
    myDocument.deleteString(myOffset - 1,myOffset);
    myOffset--;
  }
 else {
    myDocument.insertString(myOffset," ");
    myOffset++;
  }
  PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
}
