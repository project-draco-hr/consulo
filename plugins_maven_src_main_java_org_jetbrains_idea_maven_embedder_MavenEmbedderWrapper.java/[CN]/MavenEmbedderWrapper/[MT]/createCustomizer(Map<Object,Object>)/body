{
  return new ContainerCustomizer(){
    public void customize(    PlexusContainer c){
      for (      Map.Entry each : context.entrySet()) {
        c.addContextValue(each.getKey(),each.getValue());
      }
      setImplementation(c,MavenTools.class,CustomMavenTools.class);
      setImplementation(c,ProjectWorkspace.class,CustomProjectWorkspace.class);
      setImplementation(c,MavenWorkspaceStore.class,CustomWorkspaceStore.class);
      setImplementation(c,ModelInterpolator.class,CustomModelInterpolator.class);
      setImplementation(c,MavenProjectBuilder.class,CustomProjectBuilder.class);
      setImplementation(c,ArtifactFactory.class,CustomArtifactFactory.class);
      setImplementation(c,ArtifactHandlerManager.class,CustomArtifactHandlerManager.class);
      setImplementation(c,ArtifactResolver.class,CustomArtifactResolver.class);
      setImplementation(c,ExtensionManager.class,CustomExtensionManager.class);
      setImplementation(c,WagonManager.class,CustomWagonManager.class);
    }
    private <T>void setImplementation(    PlexusContainer container,    Class<T> componentClass,    Class<? extends T> implementationClass){
      ComponentDescriptor d=container.getComponentDescriptor(componentClass.getName());
      d.setImplementation(implementationClass.getName());
    }
  }
;
}
