{
  myEditor=editor;
  myProject=project;
  myFilterRunner=new AsyncFilterRunner(this,myEditor);
  editor.addEditorMouseListener(new EditorMouseAdapter(){
    @Override public void mouseClicked(    EditorMouseEvent e){
      final MouseEvent mouseEvent=e.getMouseEvent();
      if (mouseEvent.getButton() == MouseEvent.BUTTON1 && !mouseEvent.isPopupTrigger()) {
        Runnable runnable=getLinkNavigationRunnable(myEditor.xyToLogicalPosition(e.getMouseEvent().getPoint()));
        if (runnable != null) {
          runnable.run();
        }
      }
    }
  }
);
  editor.getContentComponent().addMouseMotionListener(new MouseMotionAdapter(){
    public void mouseMoved(    final MouseEvent e){
      final HyperlinkInfo info=getHyperlinkInfoByPoint(e.getPoint());
      if (info != null) {
        myEditor.getContentComponent().setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
      }
 else {
        final Cursor cursor=editor instanceof EditorEx ? UIUtil.getTextCursor(((EditorEx)editor).getBackgroundColor()) : Cursor.getPredefinedCursor(Cursor.TEXT_CURSOR);
        myEditor.getContentComponent().setCursor(cursor);
      }
    }
  }
);
}
