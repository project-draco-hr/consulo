{
  final DataContext dataContext=e.getDataContext();
  Project project=DataKeys.PROJECT.getData(dataContext);
  FavoritesTreeNodeDescriptor[] roots=(FavoritesTreeNodeDescriptor[])dataContext.getData(FavoritesTreeViewPanel.CONTEXT_FAVORITES_ROOTS);
  String listName=(String)dataContext.getData(FavoritesTreeViewPanel.FAVORITES_LIST_NAME);
  String newName=AddNewFavoritesListAction.doAddNewFavoritesList(project);
  if (newName != null) {
    new SendToFavoritesAction(newName).doSend(FavoritesManager.getInstance(project),roots,listName);
  }
}
