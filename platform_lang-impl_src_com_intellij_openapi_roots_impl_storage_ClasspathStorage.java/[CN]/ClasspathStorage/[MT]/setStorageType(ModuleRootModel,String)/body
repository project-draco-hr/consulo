{
  final Module module=model.getModule();
  final String oldStorageType=ClassPathStorageUtil.getStorageType(module);
  if (oldStorageType.equals(storageID)) {
    return;
  }
  getProvider(oldStorageType).detach(module);
  if (storageID.equals(ClassPathStorageUtil.DEFAULT_STORAGE)) {
    module.clearOption(ClassPathStorageUtil.CLASSPATH_OPTION);
    module.clearOption(CLASSPATH_DIR_OPTION);
  }
 else {
    module.setOption(ClassPathStorageUtil.CLASSPATH_OPTION,storageID);
    module.setOption(CLASSPATH_DIR_OPTION,getProvider(storageID).getContentRoot(model));
  }
}
