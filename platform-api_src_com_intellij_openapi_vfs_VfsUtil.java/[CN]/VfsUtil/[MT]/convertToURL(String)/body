{
  if (vfsUrl.startsWith(JAR)) {
    LOG.error("jar: protocol not supported.");
    return null;
  }
  if (vfsUrl.startsWith(MAILTO)) {
    try {
      return new URL(vfsUrl);
    }
 catch (    MalformedURLException e) {
      return null;
    }
  }
  String[] split=vfsUrl.split("://");
  if (split.length != 2) {
    LOG.error("Malformed vfsurl.");
    return null;
  }
  String protocol=split[0];
  String path=split[1];
  try {
    if (protocol.equals(FILE)) {
      return new URL(protocol,"",path);
    }
 else {
      return new URL(vfsUrl);
    }
  }
 catch (  MalformedURLException e) {
    LOG.error("MalformedURLException occured:" + e.getMessage());
    return null;
  }
}
