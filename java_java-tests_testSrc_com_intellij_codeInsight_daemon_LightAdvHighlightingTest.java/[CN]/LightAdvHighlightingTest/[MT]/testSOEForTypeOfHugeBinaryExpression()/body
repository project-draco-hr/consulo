{
  configureFromFileText("a.java","class A { String s = \"\"; }");
  assertEmpty(filter(doHighlighting(),HighlightSeverity.ERROR));
  PsiField field=((PsiJavaFile)getFile()).getClasses()[0].getFields()[0];
  PsiExpression literal=JavaPsiFacade.getElementFactory(getProject()).createExpressionFromText("\"xxx\"",field);
  PsiBinaryExpression binary=(PsiBinaryExpression)JavaPsiFacade.getElementFactory(getProject()).createExpressionFromText("a+b",field);
  for (int i=0; i < 2000; i++) {
    PsiExpression expression=field.getInitializer();
    binary.getLOperand().replace(expression);
    binary.getROperand().replace(literal);
    expression.replace(binary);
    PostprocessReformattingAspect.getInstance(getProject()).clear();
  }
  field.getInitializer().getType();
}
