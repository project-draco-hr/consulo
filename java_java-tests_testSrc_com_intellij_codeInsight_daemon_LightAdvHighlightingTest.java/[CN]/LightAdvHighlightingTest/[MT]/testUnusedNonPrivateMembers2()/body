{
  ExtensionPoint<UnusedCodeExtension> point=Extensions.getRootArea().getExtensionPoint(ExtensionPoints.DEAD_CODE_TOOL);
  UnusedCodeExtension extension=new UnusedCodeExtension(){
    @NotNull @Override public String getDisplayName(){
      return "duh";
    }
    @Override public boolean isEntryPoint(    RefElement refElement){
      return false;
    }
    @Override public boolean isEntryPoint(    PsiElement psiElement){
      return psiElement instanceof PsiMethod && ((PsiMethod)psiElement).getName().equals("myTestMethod");
    }
    @Override public boolean isSelected(){
      return false;
    }
    @Override public void setSelected(    boolean selected){
    }
    public void readExternal(    Element element){
    }
    public void writeExternal(    Element element){
    }
  }
;
  point.registerExtension(extension);
  try {
    UnusedDeclarationInspection deadCodeInspection=new UnusedDeclarationInspection();
    enableInspectionTool(deadCodeInspection);
    doTest(true,false);
  }
  finally {
    point.unregisterExtension(extension);
  }
}
