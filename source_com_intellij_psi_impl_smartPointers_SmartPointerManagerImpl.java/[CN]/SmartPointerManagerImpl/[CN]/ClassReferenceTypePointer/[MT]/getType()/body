{
  if (myType.isValid())   return myType;
  final PsiJavaCodeReferenceElement referenceElement=(PsiJavaCodeReferenceElement)mySmartPsiElementPointer.getElement();
  final PsiElementFactory factory=PsiManager.getInstance(myProject).getElementFactory();
  if (referenceElement != null) {
    final PsiClassType type=factory.createType(referenceElement);
    myType=type;
  }
 else {
    try {
      myType=factory.createTypeFromText(myReferenceText,null);
    }
 catch (    IncorrectOperationException e) {
      LOG.error(e);
    }
  }
  return myType;
}
