{
  final PsiElement parent=expression.getParent();
  if (parent instanceof PsiParenthesizedExpression) {
    return;
  }
  if (ignoreParenthesesOnConditionals && parent instanceof PsiConditionalExpression) {
    final PsiConditionalExpression conditionalExpression=(PsiConditionalExpression)parent;
    final PsiExpression condition=conditionalExpression.getCondition();
    if (expression == condition) {
      return;
    }
  }
  if (!ParenthesesUtils.areParenthesesNeeded(expression,ignoreClarifyingParentheses)) {
    registerError(expression);
    return;
  }
  super.visitParenthesizedExpression(expression);
}
