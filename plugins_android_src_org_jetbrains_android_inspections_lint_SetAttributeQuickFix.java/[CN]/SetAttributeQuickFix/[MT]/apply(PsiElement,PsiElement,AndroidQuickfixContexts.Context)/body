{
  final XmlTag tag=PsiTreeUtil.getParentOfType(startElement,XmlTag.class,false);
  if (tag == null) {
    return;
  }
  String value=myValue;
  if (value == null && context instanceof AndroidQuickfixContexts.DesignerContext) {
    value=askForAttributeValue(tag);
    if (value == null) {
      return;
    }
  }
  final XmlAttribute attribute=tag.setAttribute(myAttributeName,SdkConstants.NS_RESOURCES,"");
  if (attribute != null) {
    if (value != null) {
      attribute.setValue(value);
    }
    if (context instanceof AndroidQuickfixContexts.EditorContext) {
      final Editor editor=((AndroidQuickfixContexts.EditorContext)context).getEditor();
      final XmlAttributeValue valueElement=attribute.getValueElement();
      final TextRange valueTextRange=attribute.getValueTextRange();
      if (valueElement != null && valueTextRange != null) {
        final int valueElementStart=valueElement.getTextRange().getStartOffset();
        editor.getCaretModel().moveToOffset(valueElementStart + valueTextRange.getStartOffset());
        if (valueTextRange.getStartOffset() < valueTextRange.getEndOffset()) {
          editor.getSelectionModel().setSelection(valueElementStart + valueTextRange.getStartOffset(),valueElementStart + valueTextRange.getEndOffset());
        }
      }
    }
  }
}
