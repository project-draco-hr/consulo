{
  return new PsiElementProcessor<PsiFileSystemItem>(){
    public boolean execute(    PsiFileSystemItem element){
      final VirtualFile file=element.getVirtualFile();
      if (file != null && !file.isDirectory()) {
        final PsiManager psiManager=getElement().getManager();
        if (psiManager != null) {
          final PsiFile psiFile=psiManager.findFile(file);
          if (psiFile != null) {
            element=psiFile;
          }
        }
      }
      return processor.process(element);
    }
  }
;
}
