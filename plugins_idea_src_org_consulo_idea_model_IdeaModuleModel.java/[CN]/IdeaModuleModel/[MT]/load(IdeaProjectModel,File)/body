{
  final Document document=ideaProjectModel.loadDocument(new File(myFilePath));
  myModuleType=document.getRootElement().getAttributeValue("type");
  XPath xpathExpression=XPath.newInstance("/module[@version='4']/component[@name='NewModuleRootManager']");
  final Element componentNode=(Element)xpathExpression.selectSingleNode(document);
  for (  Attribute attribute : componentNode.getAttributes()) {
    myComponentAttributes.put(attribute.getName(),attribute.getValue());
  }
  for (  Element element : componentNode.getChildren()) {
    final String name=element.getName();
    if ("content".equals(name)) {
      final String url=element.getAttributeValue("url");
      final IdeaContentEntryModel contentEntryModel=new IdeaContentEntryModel(url);
      myContentEntries.add(contentEntryModel);
      for (      Element childOfContent : element.getChildren()) {
        final String nameChildOfContent=childOfContent.getName();
        if ("sourceFolder".equals(nameChildOfContent)) {
          String url2=childOfContent.getAttributeValue("url");
          boolean isTestSource=Boolean.valueOf(childOfContent.getAttributeValue("isTestSource"));
          contentEntryModel.addFolder(url2,isTestSource ? ContentFolderType.TEST : ContentFolderType.SOURCE);
        }
      }
    }
 else     if ("orderEntry".equals(name)) {
      String type=element.getAttributeValue("type");
      if ("module".equals(type)) {
        String moduleName=element.getAttributeValue("module-name");
        myOrderEntries.add(new ModuleOrderEntryModel(moduleName));
      }
 else       if ("sourceFolder".equals(type)) {
        myOrderEntries.add(new ModuleSourceOrderEntryModel());
      }
 else       if ("inheritedJdk".equals(type)) {
        myOrderEntries.add(new InheritedOrderEntryModel());
      }
 else       if ("module-library".equals(type)) {
        IdeaLibraryModel libraryModel=new IdeaLibraryModel();
        libraryModel.load(ideaProjectModel,element);
        myOrderEntries.add(new ModuleLibraryOrderEntryModel(libraryModel));
      }
 else       if ("jdk".equals(type)) {
        myOrderEntries.add(new JdkSourceOrderEntryModel(element.getAttributeValue("jdkName")));
      }
 else       if ("library".equals(type)) {
        final String level=element.getAttributeValue("level");
        if ("project".equals(level)) {
          myOrderEntries.add(new ProjectLibraryOrderEntryModel(name));
        }
      }
    }
  }
}
