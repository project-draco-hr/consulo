{
  if (!(usage.getElement() instanceof GrMethod) || !isGroovyUsage(usage))   return true;
  GrMethod method=(GrMethod)usage.getElement();
  final FieldConflictsResolver fieldConflictsResolver=new FieldConflictsResolver(data.getParameterName(),method.getBlock());
  final MethodJavaDocHelper javaDocHelper=new MethodJavaDocHelper(method);
  GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(method.getProject());
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  data.getParametersToRemove().forEachDescending(new TIntProcedure(){
    public boolean execute(    final int paramNum){
      try {
        PsiParameter param=parameters[paramNum];
        PsiDocTag tag=javaDocHelper.getTagForParameter(param);
        if (tag != null) {
          tag.delete();
        }
        param.delete();
      }
 catch (      IncorrectOperationException e) {
        LOG.error(e);
      }
      return true;
    }
  }
);
  final PsiType forcedType=data.getForcedType();
  final String typeText=forcedType.equalsToText(CommonClassNames.JAVA_LANG_OBJECT) ? null : forcedType.getCanonicalText();
  GrParameter parameter=factory.createParameter(data.getParameterName(),typeText,method);
  parameter.getModifierList().setModifierProperty(GrModifier.FINAL,data.isDeclareFinal());
  final PsiParameter anchorParameter=getAnchorParameter(method);
  final GrParameterList parameterList=method.getParameterList();
  parameter=(GrParameter)parameterList.addAfter(parameter,anchorParameter);
  PsiUtil.shortenReferences(parameter);
  final PsiDocTag tagForAnchorParameter=javaDocHelper.getTagForParameter(anchorParameter);
  javaDocHelper.addParameterAfter(data.getParameterName(),tagForAnchorParameter);
  fieldConflictsResolver.fix();
  return false;
}
