{
  if (!(usage.getElement() instanceof GrMethod) || !isGroovyUsage(usage))   return true;
  GrMethod method=(GrMethod)usage.getElement();
  final FieldConflictsResolver fieldConflictsResolver=new FieldConflictsResolver(data.getParameterName(),method.getBlock());
  final MethodJavaDocHelper javaDocHelper=new MethodJavaDocHelper(method);
  PsiManager manager=method.getManager();
  GroovyPsiElementFactory factory=GroovyPsiElementFactory.getInstance(method.getProject());
  final PsiParameter[] parameters=method.getParameterList().getParameters();
  data.getParametersToRemove().forEachDescending(new TIntProcedure(){
    public boolean execute(    final int paramNum){
      try {
        PsiParameter param=parameters[paramNum];
        PsiDocTag tag=javaDocHelper.getTagForParameter(param);
        if (tag != null) {
          tag.delete();
        }
        param.delete();
      }
 catch (      IncorrectOperationException e) {
      }
      return true;
    }
  }
);
  PsiParameter parameter=factory.createParameter(data.getParameterName(),data.getForcedType().getCanonicalText(),method);
  PsiUtil.setModifierProperty(parameter,PsiModifier.FINAL,data.isDeclareFinal());
  final PsiParameter anchorParameter=getAnchorParameter(method);
  final GrParameterList parameterList=method.getParameterList();
  parameter=(PsiParameter)parameterList.addAfter(parameter,anchorParameter);
  JavaCodeStyleManager.getInstance(manager.getProject()).shortenClassReferences(parameter);
  final PsiDocTag tagForAnchorParameter=javaDocHelper.getTagForParameter(anchorParameter);
  javaDocHelper.addParameterAfter(data.getParameterName(),tagForAnchorParameter);
  fieldConflictsResolver.fix();
  return false;
}
