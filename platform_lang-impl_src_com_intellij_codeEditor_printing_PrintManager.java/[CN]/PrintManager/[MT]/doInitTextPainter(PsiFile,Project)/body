{
  final String fileName=psiFile.getVirtualFile().getPresentableUrl();
  DocumentEx doc=(DocumentEx)PsiDocumentManager.getInstance(project).getDocument(psiFile);
  if (doc == null)   return null;
  EditorHighlighter highlighter=HighlighterFactory.createHighlighter(project,psiFile.getVirtualFile());
  highlighter.setText(doc.getCharsSequence());
  return new TextPainter(doc,highlighter,fileName,psiFile,project,psiFile.getFileType());
}
