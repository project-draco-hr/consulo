{
  if (method == null)   return;
  String name=method.getName();
  boolean isAbstract=GenerationUtil.isAbstractInJava(method);
  PsiModifierList modifierList=method.getModifierList();
  if (!method.isConstructor()) {
    writeModifiers(builder,modifierList);
  }
 else {
    writeModifiers(builder,modifierList,CONSTRUCTOR_MODIFIERS);
  }
  if (method.hasTypeParameters()) {
    writeTypeParameters(builder,method,classNameProvider);
    builder.append(" ");
  }
  if (!method.isConstructor()) {
    PsiType retType=PsiUtil.getSmartReturnType(method);
    writeType(builder,retType,method,classNameProvider);
    builder.append(" ");
  }
  builder.append(name);
  if (method instanceof GrMethod) {
    final ArrayList<GrParameter> actualParams=getActualParams((GrMethod)method,skipOptional);
    GenerationUtil.writeParameterList(builder,actualParams.toArray(new GrParameter[actualParams.size()]),classNameProvider);
  }
 else {
    LOG.assertTrue(skipOptional == 0);
    GenerationUtil.writeParameterList(builder,method.getParameterList().getParameters(),classNameProvider);
  }
  GenerationUtil.writeThrowsList(builder,method.getThrowsList(),getMethodExceptions(method),classNameProvider);
  if (!isAbstract) {
    if (method instanceof GrMethod) {
      ((GrMethod)method).accept(new CodeBlockGenerator(builder,myProject));
    }
 else     if (method instanceof GrAccessorMethod) {
      writeAccessorBody(builder,method);
    }
 else {
      builder.append("{//todo\n}");
    }
  }
 else {
    builder.append(";");
  }
}
