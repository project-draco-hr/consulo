{
  builder.append("{\n");
  final PsiClass containingClass=method.getContainingClass();
  LOG.assertTrue(containingClass instanceof GroovyScriptClass);
  final PsiFile scriptFile=containingClass.getContainingFile();
  LOG.assertTrue(scriptFile instanceof GroovyFile);
  LOG.assertTrue(((GroovyFile)scriptFile).isScript());
  final List<GrStatement> exitPoints=ControlFlowUtils.collectReturns(scriptFile);
  ExpressionContext extended=context.extend();
  extended.searchForLocalVarsToWrap((GroovyPsiElement)scriptFile);
  new CodeBlockGenerator(builder,extended,exitPoints).visitStatementOwner((GroovyFile)scriptFile,MissingReturnInspection.methodMissesSomeReturns((GroovyFile)scriptFile,MissingReturnInspection.ReturnStatus.mustReturnValue));
  builder.append("\n}\n");
}
