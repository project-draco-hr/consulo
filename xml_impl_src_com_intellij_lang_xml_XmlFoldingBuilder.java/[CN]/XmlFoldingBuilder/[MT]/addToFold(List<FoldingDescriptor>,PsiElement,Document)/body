{
  LOG.assertTrue(elementToFold.isValid());
  TextRange range=getRangeToFold(elementToFold);
  if (range == null)   return false;
  if (range.getStartOffset() >= 0 && range.getEndOffset() <= elementToFold.getContainingFile().getTextRange().getEndOffset() && range.getEndOffset() <= document.getTextLength()) {
    if (range.getStartOffset() + 1 < range.getEndOffset()) {
      foldings.add(new FoldingDescriptor(elementToFold.getNode(),range));
      return true;
    }
  }
  return false;
}
