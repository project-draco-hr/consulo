{
  Pair<DocumentChangeTransaction,Integer> pair=myTransactionsMap.get(doc);
  if (pair == null)   return null;
  if (pair.getSecond().intValue() > 0) {
    pair=new Pair<DocumentChangeTransaction,Integer>(pair.getFirst(),new Integer(pair.getSecond().intValue() - 1));
    myTransactionsMap.put(doc,pair);
    return null;
  }
  myTransactionsMap.remove(doc);
  return pair.getFirst();
}
