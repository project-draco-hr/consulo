{
  assertNotResumed();
  DebuggerManagerThreadImpl.assertIsManagerThread();
  try {
    if (!Patches.IBM_JDK_DISABLE_COLLECTION_BUG) {
      for (      ObjectReference objectReference : myKeptReferences) {
        try {
          objectReference.enableCollection();
        }
 catch (        UnsupportedOperationException e) {
        }
      }
      myKeptReferences.clear();
    }
    for (SuspendContextCommandImpl cmd=myPostponedCommands.poll(); cmd != null; cmd=myPostponedCommands.poll()) {
      cmd.notifyCancelled();
    }
    resumeImpl();
  }
  finally {
    myIsResumed=true;
  }
}
