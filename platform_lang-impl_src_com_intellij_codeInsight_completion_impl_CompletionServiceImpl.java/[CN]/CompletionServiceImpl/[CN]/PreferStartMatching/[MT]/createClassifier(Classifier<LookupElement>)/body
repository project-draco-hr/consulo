{
  return new ComparingClassifier<LookupElement>(next,"middleMatching"){
    @NotNull @Override public Comparable getWeight(    LookupElement element){
      Lookup lookup=myLocation.getCompletionParameters().getLookup();
      PrefixMatcher itemMatcher=lookup.itemMatcher(element);
      String prefix=itemMatcher.getPrefix();
      if (StringUtil.isEmpty(prefix)) {
        String pattern=lookup.itemPattern(element);
        if (!pattern.equals(prefix)) {
          itemMatcher=itemMatcher.cloneWithPrefix(pattern);
        }
      }
      for (      String ls : element.getAllLookupStrings()) {
        if (itemMatcher.isStartMatch(ls)) {
          return false;
        }
      }
      return true;
    }
  }
;
}
