{
  if (!myTextBeforePosition.endsWith(matcher.getPrefix())) {
    final int len=myTextBeforePosition.length();
    final String fragment=len > 100 ? myTextBeforePosition.substring(len - 100) : myTextBeforePosition;
    PsiFile positionFile=myParameters.getPosition().getContainingFile();
    LOG.error("prefix should be some actual file string just before caret: " + matcher.getPrefix() + "\n text="+ fragment+ "\ninjected="+ (InjectedLanguageUtil.getTopLevelFile(positionFile) != positionFile)+ "\nlang="+ positionFile.getLanguage());
  }
  return new CompletionResultSetImpl(getConsumer(),myTextBeforePosition,matcher,myContributor,myParameters,mySorter,myProcess,this);
}
