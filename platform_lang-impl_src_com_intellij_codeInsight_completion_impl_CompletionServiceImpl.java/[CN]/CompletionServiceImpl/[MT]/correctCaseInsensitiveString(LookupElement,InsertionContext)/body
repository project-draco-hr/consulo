{
  if (!element.isPrefixMatched()) {
    return;
  }
  final String prefix=element.getPrefixMatcher().getPrefix();
  final String oldLookupString=element.getLookupString();
  if (StringUtil.startsWithIgnoreCase(oldLookupString,prefix)) {
    final String newLookupString=handleCaseInsensitiveVariant(prefix,oldLookupString);
    if (!newLookupString.equals(oldLookupString)) {
      final Document document=context.getEditor().getDocument();
      document.replaceString(context.getStartOffset(),context.getTailOffset(),newLookupString);
      PsiDocumentManager.getInstance(context.getProject()).commitDocument(document);
    }
  }
}
