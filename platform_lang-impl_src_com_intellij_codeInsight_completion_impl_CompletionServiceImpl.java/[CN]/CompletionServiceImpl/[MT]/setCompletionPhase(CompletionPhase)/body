{
  ApplicationManager.getApplication().assertIsDispatchThread();
  CompletionPhase oldPhase=getCompletionPhase();
  CompletionProgressIndicator oldIndicator=oldPhase.indicator;
  if (oldIndicator != null) {
    LOG.assertTrue(!oldIndicator.isRunning() || oldIndicator.isCanceled(),"don't change phase during running completion");
  }
  Disposer.dispose(oldPhase);
  ourPhase=phase;
  ourPhaseTrace=DebugUtil.currentStackTrace();
}
