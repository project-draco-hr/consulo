{
  final Exception[] e=new Exception[1];
  Runnable runnable1=new Runnable(){
    public void run(){
      if (ApplicationManager.getApplication().isDispatchThread()) {
        try {
          ApplicationManager.getApplication().runWriteAction(runnable);
        }
 catch (        Exception e1) {
          e[0]=e1;
        }
      }
 else {
        runnable.run();
      }
    }
  }
;
  if (myRunCommandForTest) {
    CommandProcessor.getInstance().executeCommand(myProject,runnable1,"",null);
  }
 else {
    runnable1.run();
  }
  if (e[0] != null) {
    throw e[0];
  }
}
