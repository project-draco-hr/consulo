{
  if (!(location instanceof NonCodeSearchDescriptionLocation))   return null;
  NonCodeSearchDescriptionLocation ncdLocation=(NonCodeSearchDescriptionLocation)location;
  if (element instanceof PsiJavaPackage) {
    return ncdLocation.isNonJava() ? ((PsiJavaPackage)element).getQualifiedName() : StringUtil.notNullize(((PsiJavaPackage)element).getName());
  }
  if (element instanceof PsiClass) {
    return ncdLocation.isNonJava() ? ((PsiClass)element).getQualifiedName() : ((PsiClass)element).getName();
  }
  if (element instanceof PsiMember) {
    PsiMember member=(PsiMember)element;
    String name=member.getName();
    if (name == null)     return null;
    if (!ncdLocation.isNonJava()) {
      return name;
    }
    PsiClass containingClass=member.getContainingClass();
    if (containingClass == null || containingClass.getQualifiedName() == null)     return null;
    return containingClass.getQualifiedName() + "." + name;
  }
  return null;
}
