{
  final PsiElement psiElement=scope.getPsiElement();
  if (psiElement == null || !psiElement.isValid())   return null;
  final CachedValuesManager manager=CachedValuesManager.getManager(psiElement.getProject());
  CachedValue<Map<String,Set<Define>>> data=psiElement.getUserData(KEY);
  if (data == null || !((DefinitionResolver)data.getValueProvider()).isValid()) {
    final DefinitionResolver resolver=new DefinitionResolver(scope);
    data=manager.createCachedValue(resolver,false);
    psiElement.putUserData(KEY,data);
  }
  return data.getValue();
}
