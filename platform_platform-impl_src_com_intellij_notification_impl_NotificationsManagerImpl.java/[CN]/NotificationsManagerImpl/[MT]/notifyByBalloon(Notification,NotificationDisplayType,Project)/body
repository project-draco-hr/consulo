{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  final Balloon balloon=createBalloon(notification,false,NotificationDisplayType.BALLOON == displayType,NotificationDisplayType.BALLOON == displayType);
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      if (balloon.isDisposed())       return;
      Window window=findWindowForBalloon(project);
      if (window instanceof IdeFrameImpl) {
        ((IdeFrameImpl)window).getBalloonLayout().add(balloon);
      }
    }
  }
);
}
