{
  if (ApplicationManager.getApplication().isUnitTestMode())   return;
  Window window=findWindowForBalloon(project);
  if (window instanceof IdeFrameImpl) {
    boolean sticky=NotificationDisplayType.STICKY_BALLOON == displayType;
    Balloon balloon=createBalloon(notification,false,!sticky,!sticky);
    Disposer.register(project != null ? project : ApplicationManager.getApplication(),balloon);
    ((IdeFrameImpl)window).getBalloonLayout().add(balloon);
  }
}
