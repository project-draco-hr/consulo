{
  final NotificationsConfigurationImpl configuration=NotificationsConfigurationImpl.getNotificationsConfigurationImpl();
  if (!configuration.isRegistered(notification.getGroupId())) {
    configuration.register(notification.getGroupId(),displayType == null ? NotificationDisplayType.BALLOON : displayType);
  }
  final NotificationSettings settings=NotificationsConfigurationImpl.getSettings(notification.getGroupId());
  boolean shouldLog=settings.isShouldLog();
  boolean displayable=settings.getDisplayType() != NotificationDisplayType.NONE;
  if (shouldLog && displayable) {
    myModel.add(notification,project);
  }
  boolean willBeShown=displayable && NotificationsConfigurationImpl.getNotificationsConfigurationImpl().SHOW_BALLOONS;
  if (!shouldLog && !willBeShown) {
    notification.expire();
  }
  if (NotificationsConfigurationImpl.getNotificationsConfigurationImpl().SHOW_BALLOONS) {
    showWhenVisible(notification,project);
  }
}
