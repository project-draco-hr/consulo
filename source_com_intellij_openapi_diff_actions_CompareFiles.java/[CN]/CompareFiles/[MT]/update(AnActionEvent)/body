{
  Presentation presentation=e.getPresentation();
  PsiElement[] elements;
  try {
    elements=ELEMENTS_TO_COMPARE.getNotNull(e.getDataContext());
  }
 catch (  DataAccessor.NoDataException e1) {
    presentation.setVisible(false);
    return;
  }
  DiffRequest diffRequest=getDiffRequest(elements);
  if (diffRequest == null) {
    presentation.setVisible(false);
    return;
  }
  ElementPresentation presentation1=ElementPresentation.forElement(elements[0]);
  ElementPresentation presentation2=ElementPresentation.forElement(elements[1]);
  ElementPresentation.Noun firstKind=presentation1.getKind();
  ElementPresentation.Noun secondKind=presentation2.getKind();
  if (firstKind.equals(secondKind)) {
    presentation.setText("Co_mpare Two " + firstKind.getPlural(true));
  }
 else   presentation.setText("Co_mpare " + firstKind.getSingular(true) + " with "+ secondKind.getSingular(true));
  presentation.setVisible(true);
  presentation.setEnabled(DiffManager.getInstance().getDiffTool().canShow(diffRequest));
}
