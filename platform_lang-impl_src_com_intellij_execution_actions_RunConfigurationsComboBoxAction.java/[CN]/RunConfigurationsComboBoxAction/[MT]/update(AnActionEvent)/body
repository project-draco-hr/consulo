{
  final Presentation presentation=e.getPresentation();
  final Project project=e.getData(CommonDataKeys.PROJECT);
  if (ActionPlaces.isMainMenuOrActionSearch(e.getPlace())) {
    presentation.setDescription(ExecutionBundle.message("choose.run.configuration.action.description"));
    presentation.setEnabled(findFrame(e.getData(PlatformDataKeys.CONTEXT_COMPONENT)) != null);
    return;
  }
  try {
    if (project == null || project.isDisposed() || !project.isInitialized()) {
      updateButton(null,null,null,presentation);
      presentation.setEnabled(false);
    }
 else {
      if (DumbService.getInstance(project).isDumb()) {
        presentation.setEnabled(false);
        presentation.setText("");
        presentation.setIcon(null);
      }
 else {
        updateButton(ExecutionTargetManager.getActiveTarget(project),RunManagerEx.getInstanceEx(project).getSelectedConfiguration(),project,presentation);
        presentation.setEnabled(true);
      }
    }
  }
 catch (  IndexNotReadyException e1) {
    presentation.setEnabled(false);
  }
}
