{
  super(new GridBagLayout());
  myDefaultAnn=defaultAnn;
  myDefaultAnns=defaultAnns;
  myList=new JBList(anns);
  myList.setCellRenderer(new DefaultListCellRenderer(){
    @Override public Component getListCellRendererComponent(    JList list,    Object value,    int index,    boolean isSelected,    boolean cellHasFocus){
      final Component component=super.getListCellRendererComponent(list,value,index,isSelected,cellHasFocus);
      if (Comparing.strEqual((String)value,myDefaultAnn)) {
        setIcon(IconLoader.getIcon("/diff/currentLine.png"));
        setFont(UIUtil.getLabelFont().deriveFont(Font.BOLD));
      }
 else {
        setIcon(EmptyIcon.ICON_16);
      }
      setText((String)value);
      return component;
    }
  }
);
  myList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  myList.setSelectedValue(defaultAnn,true);
  final DefaultActionGroup group=new DefaultActionGroup();
  group.add(new AnAction("Add","Add",ADD_ICON){
{
      registerCustomShortcutSet(CommonShortcuts.INSERT,myList);
    }
    @Override public void actionPerformed(    AnActionEvent e){
      chooseAnnotation(title,myList,null);
    }
  }
);
  group.add(new AnAction("Delete","Delete",REMOVE_ICON){
{
      registerCustomShortcutSet(CommonShortcuts.DELETE,myList);
    }
    @Override public void update(    AnActionEvent e){
      final Object selectedValue=myList.getSelectedValue();
      final boolean enabled=selectedValue != null && ArrayUtil.find(myDefaultAnns,selectedValue) == -1;
      e.getPresentation().setEnabled(enabled);
    }
    @Override public void actionPerformed(    AnActionEvent e){
      final String selectedValue=(String)myList.getSelectedValue();
      if (selectedValue == null)       return;
      if (myDefaultAnn.equals(selectedValue))       myDefaultAnn=myDefaultAnns[0];
      ((DefaultListModel)myList.getModel()).removeElement(selectedValue);
    }
  }
);
  group.add(new AnAction("Make default","Default",SAVE_ICON){
    @Override public void update(    AnActionEvent e){
      final String selectedValue=(String)myList.getSelectedValue();
      final boolean enabled=selectedValue != null && !Comparing.strEqual(myDefaultAnn,selectedValue);
      e.getPresentation().setEnabled(enabled);
    }
    @Override public void actionPerformed(    AnActionEvent e){
      final String selectedValue=(String)myList.getSelectedValue();
      if (selectedValue == null)       return;
      myDefaultAnn=selectedValue;
      final DefaultListModel model=(DefaultListModel)myList.getModel();
      model.setElementAt(myList.getSelectedValue(),myList.getSelectedIndex());
    }
  }
);
  GridBagConstraints gc=new GridBagConstraints(0,0,1,1,1,0,GridBagConstraints.NORTHWEST,GridBagConstraints.HORIZONTAL,new Insets(5,0,0,0),0,0);
  add(new TitledSeparator(title),gc);
  gc.gridy++;
  gc.insets.top=0;
  add(ActionManager.getInstance().createActionToolbar(ActionPlaces.UNKNOWN,group,true).getComponent(),gc);
  gc.gridy++;
  gc.weighty=1;
  gc.fill=GridBagConstraints.BOTH;
  final JScrollPane scrollPane=ScrollPaneFactory.createScrollPane(myList);
  scrollPane.setMinimumSize(new Dimension(250,100));
  add(scrollPane,gc);
}
